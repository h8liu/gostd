<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math/big</h2>
<ul>
<li><a href="/gostd/math/big/arith.go.html">arith.go</a></li>
<li><a href="/gostd/math/big/arith_decl.go.html">arith_decl.go</a></li>
<li><a href="/gostd/math/big/arith_test.go.html">arith_test.go</a></li>
<li><a href="/gostd/math/big/calibrate_test.go.html">calibrate_test.go</a></li>
<li><a href="/gostd/math/big/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/math/big/gcd_test.go.html">gcd_test.go</a></li>
<li><a href="/gostd/math/big/hilbert_test.go.html">hilbert_test.go</a></li>
<li><a href="/gostd/math/big/int.go.html">int.go</a></li>
<li><a href="/gostd/math/big/int_test.go.html">int_test.go</a></li>
<li><a href="/gostd/math/big/nat.go.html">nat.go</a></li>
<li><a href="/gostd/math/big/nat_test.go.html">nat_test.go</a></li>
<li><a href="/gostd/math/big/rat.go.html">rat.go</a></li>
<li><a href="/gostd/math/big/rat_test.go.html" class="current">rat_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7625529">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7625584">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7625638">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7625689">package</span>&nbsp;<span class="ident" id="7625697">big</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7625702">import</span>&nbsp;<span class="op" id="7625709">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625712">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625721">&#34;encoding/gob&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625737">&#34;encoding/json&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625754">&#34;encoding/xml&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625770">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625777">&#34;math&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625785">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625796">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7625807">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7625817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7625820">func</span>&nbsp;<span class="ident" id="7625825">TestZeroRat</span><span class="op" id="7625836">(</span><span class="ident" id="7625837">t</span>&nbsp;<span class="op" id="7625839">*</span><span class="ident" id="7625840">testing</span><span class="op" id="7625847">.</span><span class="ident" id="7625848">T</span><span class="op" id="7625849">)</span>&nbsp;<span class="op" id="7625851">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7625854">var</span>&nbsp;<span class="ident" id="7625858">x</span><span class="op" id="7625859">,</span>&nbsp;<span class="ident" id="7625861">y</span><span class="op" id="7625862">,</span>&nbsp;<span class="ident" id="7625864">z</span>&nbsp;<span class="ident" id="7625866">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7625871">y</span><span class="op" id="7625872">.</span><span class="ident" id="7625873">SetFrac64</span><span class="op" id="7625882">(</span><span class="num" id="7625883">0</span><span class="op" id="7625884">,</span>&nbsp;<span class="num" id="7625886">42</span><span class="op" id="7625888">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7625892">if</span>&nbsp;<span class="ident" id="7625895">x</span><span class="op" id="7625896">.</span><span class="ident" id="7625897">Cmp</span><span class="op" id="7625900">(</span><span class="op" id="7625901">&amp;</span><span class="ident" id="7625902">y</span><span class="op" id="7625903">)</span>&nbsp;<span class="op" id="7625905">!=</span>&nbsp;<span class="num" id="7625908">0</span>&nbsp;<span class="op" id="7625910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7625914">t</span><span class="op" id="7625915">.</span><span class="ident" id="7625916">Errorf</span><span class="op" id="7625922">(</span><span class="string" id="7625923">&#34;x&nbsp;and&nbsp;y&nbsp;should&nbsp;be&nbsp;both&nbsp;equal&nbsp;and&nbsp;zero&#34;</span><span class="op" id="7625962">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7625965">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7625969">if</span>&nbsp;<span class="ident" id="7625972">s</span>&nbsp;<span class="op" id="7625974">:=</span>&nbsp;<span class="ident" id="7625977">x</span><span class="op" id="7625978">.</span><span class="ident" id="7625979">String</span><span class="op" id="7625985">(</span><span class="op" id="7625986">)</span><span class="op" id="7625987">;</span>&nbsp;<span class="ident" id="7625989">s</span>&nbsp;<span class="op" id="7625991">!=</span>&nbsp;<span class="string" id="7625994">&#34;0/1&#34;</span>&nbsp;<span class="op" id="7626000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626004">t</span><span class="op" id="7626005">.</span><span class="ident" id="7626006">Errorf</span><span class="op" id="7626012">(</span><span class="string" id="7626013">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0/1&#34;</span><span class="op" id="7626035">,</span>&nbsp;<span class="ident" id="7626037">s</span><span class="op" id="7626038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626041">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626045">if</span>&nbsp;<span class="ident" id="7626048">s</span>&nbsp;<span class="op" id="7626050">:=</span>&nbsp;<span class="ident" id="7626053">x</span><span class="op" id="7626054">.</span><span class="ident" id="7626055">RatString</span><span class="op" id="7626064">(</span><span class="op" id="7626065">)</span><span class="op" id="7626066">;</span>&nbsp;<span class="ident" id="7626068">s</span>&nbsp;<span class="op" id="7626070">!=</span>&nbsp;<span class="string" id="7626073">&#34;0&#34;</span>&nbsp;<span class="op" id="7626077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626081">t</span><span class="op" id="7626082">.</span><span class="ident" id="7626083">Errorf</span><span class="op" id="7626089">(</span><span class="string" id="7626090">&#34;got&nbsp;x&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7626110">,</span>&nbsp;<span class="ident" id="7626112">s</span><span class="op" id="7626113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626120">z</span><span class="op" id="7626121">.</span><span class="ident" id="7626122">Add</span><span class="op" id="7626125">(</span><span class="op" id="7626126">&amp;</span><span class="ident" id="7626127">x</span><span class="op" id="7626128">,</span>&nbsp;<span class="op" id="7626130">&amp;</span><span class="ident" id="7626131">y</span><span class="op" id="7626132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626135">if</span>&nbsp;<span class="ident" id="7626138">s</span>&nbsp;<span class="op" id="7626140">:=</span>&nbsp;<span class="ident" id="7626143">z</span><span class="op" id="7626144">.</span><span class="ident" id="7626145">RatString</span><span class="op" id="7626154">(</span><span class="op" id="7626155">)</span><span class="op" id="7626156">;</span>&nbsp;<span class="ident" id="7626158">s</span>&nbsp;<span class="op" id="7626160">!=</span>&nbsp;<span class="string" id="7626163">&#34;0&#34;</span>&nbsp;<span class="op" id="7626167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626171">t</span><span class="op" id="7626172">.</span><span class="ident" id="7626173">Errorf</span><span class="op" id="7626179">(</span><span class="string" id="7626180">&#34;got&nbsp;x+y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7626202">,</span>&nbsp;<span class="ident" id="7626204">s</span><span class="op" id="7626205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626212">z</span><span class="op" id="7626213">.</span><span class="ident" id="7626214">Sub</span><span class="op" id="7626217">(</span><span class="op" id="7626218">&amp;</span><span class="ident" id="7626219">x</span><span class="op" id="7626220">,</span>&nbsp;<span class="op" id="7626222">&amp;</span><span class="ident" id="7626223">y</span><span class="op" id="7626224">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626227">if</span>&nbsp;<span class="ident" id="7626230">s</span>&nbsp;<span class="op" id="7626232">:=</span>&nbsp;<span class="ident" id="7626235">z</span><span class="op" id="7626236">.</span><span class="ident" id="7626237">RatString</span><span class="op" id="7626246">(</span><span class="op" id="7626247">)</span><span class="op" id="7626248">;</span>&nbsp;<span class="ident" id="7626250">s</span>&nbsp;<span class="op" id="7626252">!=</span>&nbsp;<span class="string" id="7626255">&#34;0&#34;</span>&nbsp;<span class="op" id="7626259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626263">t</span><span class="op" id="7626264">.</span><span class="ident" id="7626265">Errorf</span><span class="op" id="7626271">(</span><span class="string" id="7626272">&#34;got&nbsp;x-y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7626294">,</span>&nbsp;<span class="ident" id="7626296">s</span><span class="op" id="7626297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626304">z</span><span class="op" id="7626305">.</span><span class="ident" id="7626306">Mul</span><span class="op" id="7626309">(</span><span class="op" id="7626310">&amp;</span><span class="ident" id="7626311">x</span><span class="op" id="7626312">,</span>&nbsp;<span class="op" id="7626314">&amp;</span><span class="ident" id="7626315">y</span><span class="op" id="7626316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626319">if</span>&nbsp;<span class="ident" id="7626322">s</span>&nbsp;<span class="op" id="7626324">:=</span>&nbsp;<span class="ident" id="7626327">z</span><span class="op" id="7626328">.</span><span class="ident" id="7626329">RatString</span><span class="op" id="7626338">(</span><span class="op" id="7626339">)</span><span class="op" id="7626340">;</span>&nbsp;<span class="ident" id="7626342">s</span>&nbsp;<span class="op" id="7626344">!=</span>&nbsp;<span class="string" id="7626347">&#34;0&#34;</span>&nbsp;<span class="op" id="7626351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626355">t</span><span class="op" id="7626356">.</span><span class="ident" id="7626357">Errorf</span><span class="op" id="7626363">(</span><span class="string" id="7626364">&#34;got&nbsp;x*y&nbsp;=&nbsp;%s,&nbsp;want&nbsp;0&#34;</span><span class="op" id="7626386">,</span>&nbsp;<span class="ident" id="7626388">s</span><span class="op" id="7626389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7626396">//&nbsp;check&nbsp;for&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626427">defer</span>&nbsp;<span class="keyword" id="7626433">func</span><span class="op" id="7626437">(</span><span class="op" id="7626438">)</span>&nbsp;<span class="op" id="7626440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7626444">if</span>&nbsp;<span class="ident" id="7626447">s</span>&nbsp;<span class="op" id="7626449">:=</span>&nbsp;<span class="builtinfunc" id="7626452">recover</span><span class="op" id="7626459">(</span><span class="op" id="7626460">)</span><span class="op" id="7626461">;</span>&nbsp;<span class="ident" id="7626463">s</span>&nbsp;<span class="op" id="7626465">==</span>&nbsp;<span class="builtintype" id="7626468">nil</span>&nbsp;<span class="op" id="7626472">||</span>&nbsp;<span class="ident" id="7626475">s</span><span class="op" id="7626476">.</span><span class="op" id="7626477">(</span><span class="builtintype" id="7626478">string</span><span class="op" id="7626484">)</span>&nbsp;<span class="op" id="7626486">!=</span>&nbsp;<span class="string" id="7626489">&#34;division&nbsp;by&nbsp;zero&#34;</span>&nbsp;<span class="op" id="7626508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7626513">panic</span><span class="op" id="7626518">(</span><span class="ident" id="7626519">s</span><span class="op" id="7626520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626524">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626527">}</span><span class="op" id="7626528">(</span><span class="op" id="7626529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626532">z</span><span class="op" id="7626533">.</span><span class="ident" id="7626534">Quo</span><span class="op" id="7626537">(</span><span class="op" id="7626538">&amp;</span><span class="ident" id="7626539">x</span><span class="op" id="7626540">,</span>&nbsp;<span class="op" id="7626542">&amp;</span><span class="ident" id="7626543">y</span><span class="op" id="7626544">)</span><br>
<span class="lineno"></span><span class="op" id="7626546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7626549">var</span>&nbsp;<span class="ident" id="7626553">setStringTests</span>&nbsp;<span class="op" id="7626568">=</span>&nbsp;<span class="op" id="7626570">[</span><span class="op" id="7626571">]</span><span class="keyword" id="7626572">struct</span>&nbsp;<span class="op" id="7626579">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626582">in</span><span class="op" id="7626584">,</span>&nbsp;<span class="ident" id="7626586">out</span>&nbsp;<span class="builtintype" id="7626590">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7626598">ok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7626606">bool</span><br>
<span class="lineno"></span><span class="op" id="7626611">}</span><span class="op" id="7626612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626615">{</span><span class="string" id="7626616">&#34;0&#34;</span><span class="op" id="7626619">,</span>&nbsp;<span class="string" id="7626621">&#34;0&#34;</span><span class="op" id="7626624">,</span>&nbsp;<span class="builtintype" id="7626626">true</span><span class="op" id="7626630">}</span><span class="op" id="7626631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626634">{</span><span class="string" id="7626635">&#34;-0&#34;</span><span class="op" id="7626639">,</span>&nbsp;<span class="string" id="7626641">&#34;0&#34;</span><span class="op" id="7626644">,</span>&nbsp;<span class="builtintype" id="7626646">true</span><span class="op" id="7626650">}</span><span class="op" id="7626651">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626654">{</span><span class="string" id="7626655">&#34;1&#34;</span><span class="op" id="7626658">,</span>&nbsp;<span class="string" id="7626660">&#34;1&#34;</span><span class="op" id="7626663">,</span>&nbsp;<span class="builtintype" id="7626665">true</span><span class="op" id="7626669">}</span><span class="op" id="7626670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626673">{</span><span class="string" id="7626674">&#34;-1&#34;</span><span class="op" id="7626678">,</span>&nbsp;<span class="string" id="7626680">&#34;-1&#34;</span><span class="op" id="7626684">,</span>&nbsp;<span class="builtintype" id="7626686">true</span><span class="op" id="7626690">}</span><span class="op" id="7626691">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626694">{</span><span class="string" id="7626695">&#34;1.&#34;</span><span class="op" id="7626699">,</span>&nbsp;<span class="string" id="7626701">&#34;1&#34;</span><span class="op" id="7626704">,</span>&nbsp;<span class="builtintype" id="7626706">true</span><span class="op" id="7626710">}</span><span class="op" id="7626711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626714">{</span><span class="string" id="7626715">&#34;1e0&#34;</span><span class="op" id="7626720">,</span>&nbsp;<span class="string" id="7626722">&#34;1&#34;</span><span class="op" id="7626725">,</span>&nbsp;<span class="builtintype" id="7626727">true</span><span class="op" id="7626731">}</span><span class="op" id="7626732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626735">{</span><span class="string" id="7626736">&#34;1.e1&#34;</span><span class="op" id="7626742">,</span>&nbsp;<span class="string" id="7626744">&#34;10&#34;</span><span class="op" id="7626748">,</span>&nbsp;<span class="builtintype" id="7626750">true</span><span class="op" id="7626754">}</span><span class="op" id="7626755">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626758">{</span><span class="ident" id="7626759">in</span><span class="op" id="7626761">:</span>&nbsp;<span class="string" id="7626763">&#34;1e&#34;</span><span class="op" id="7626767">,</span>&nbsp;<span class="ident" id="7626769">ok</span><span class="op" id="7626771">:</span>&nbsp;<span class="builtintype" id="7626773">false</span><span class="op" id="7626778">}</span><span class="op" id="7626779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626782">{</span><span class="ident" id="7626783">in</span><span class="op" id="7626785">:</span>&nbsp;<span class="string" id="7626787">&#34;1.e&#34;</span><span class="op" id="7626792">,</span>&nbsp;<span class="ident" id="7626794">ok</span><span class="op" id="7626796">:</span>&nbsp;<span class="builtintype" id="7626798">false</span><span class="op" id="7626803">}</span><span class="op" id="7626804">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626807">{</span><span class="ident" id="7626808">in</span><span class="op" id="7626810">:</span>&nbsp;<span class="string" id="7626812">&#34;1e+14e-5&#34;</span><span class="op" id="7626822">,</span>&nbsp;<span class="ident" id="7626824">ok</span><span class="op" id="7626826">:</span>&nbsp;<span class="builtintype" id="7626828">false</span><span class="op" id="7626833">}</span><span class="op" id="7626834">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626837">{</span><span class="ident" id="7626838">in</span><span class="op" id="7626840">:</span>&nbsp;<span class="string" id="7626842">&#34;1e4.5&#34;</span><span class="op" id="7626849">,</span>&nbsp;<span class="ident" id="7626851">ok</span><span class="op" id="7626853">:</span>&nbsp;<span class="builtintype" id="7626855">false</span><span class="op" id="7626860">}</span><span class="op" id="7626861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626864">{</span><span class="ident" id="7626865">in</span><span class="op" id="7626867">:</span>&nbsp;<span class="string" id="7626869">&#34;r&#34;</span><span class="op" id="7626872">,</span>&nbsp;<span class="ident" id="7626874">ok</span><span class="op" id="7626876">:</span>&nbsp;<span class="builtintype" id="7626878">false</span><span class="op" id="7626883">}</span><span class="op" id="7626884">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626887">{</span><span class="ident" id="7626888">in</span><span class="op" id="7626890">:</span>&nbsp;<span class="string" id="7626892">&#34;a/b&#34;</span><span class="op" id="7626897">,</span>&nbsp;<span class="ident" id="7626899">ok</span><span class="op" id="7626901">:</span>&nbsp;<span class="builtintype" id="7626903">false</span><span class="op" id="7626908">}</span><span class="op" id="7626909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626912">{</span><span class="ident" id="7626913">in</span><span class="op" id="7626915">:</span>&nbsp;<span class="string" id="7626917">&#34;a.b&#34;</span><span class="op" id="7626922">,</span>&nbsp;<span class="ident" id="7626924">ok</span><span class="op" id="7626926">:</span>&nbsp;<span class="builtintype" id="7626928">false</span><span class="op" id="7626933">}</span><span class="op" id="7626934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626937">{</span><span class="string" id="7626938">&#34;-0.1&#34;</span><span class="op" id="7626944">,</span>&nbsp;<span class="string" id="7626946">&#34;-1/10&#34;</span><span class="op" id="7626953">,</span>&nbsp;<span class="builtintype" id="7626955">true</span><span class="op" id="7626959">}</span><span class="op" id="7626960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626963">{</span><span class="string" id="7626964">&#34;-.1&#34;</span><span class="op" id="7626969">,</span>&nbsp;<span class="string" id="7626971">&#34;-1/10&#34;</span><span class="op" id="7626978">,</span>&nbsp;<span class="builtintype" id="7626980">true</span><span class="op" id="7626984">}</span><span class="op" id="7626985">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7626988">{</span><span class="string" id="7626989">&#34;2/4&#34;</span><span class="op" id="7626994">,</span>&nbsp;<span class="string" id="7626996">&#34;1/2&#34;</span><span class="op" id="7627001">,</span>&nbsp;<span class="builtintype" id="7627003">true</span><span class="op" id="7627007">}</span><span class="op" id="7627008">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627011">{</span><span class="string" id="7627012">&#34;.25&#34;</span><span class="op" id="7627017">,</span>&nbsp;<span class="string" id="7627019">&#34;1/4&#34;</span><span class="op" id="7627024">,</span>&nbsp;<span class="builtintype" id="7627026">true</span><span class="op" id="7627030">}</span><span class="op" id="7627031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627034">{</span><span class="string" id="7627035">&#34;-1/5&#34;</span><span class="op" id="7627041">,</span>&nbsp;<span class="string" id="7627043">&#34;-1/5&#34;</span><span class="op" id="7627049">,</span>&nbsp;<span class="builtintype" id="7627051">true</span><span class="op" id="7627055">}</span><span class="op" id="7627056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627059">{</span><span class="string" id="7627060">&#34;8129567.7690E14&#34;</span><span class="op" id="7627077">,</span>&nbsp;<span class="string" id="7627079">&#34;812956776900000000000&#34;</span><span class="op" id="7627102">,</span>&nbsp;<span class="builtintype" id="7627104">true</span><span class="op" id="7627108">}</span><span class="op" id="7627109">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627112">{</span><span class="string" id="7627113">&#34;78189e+4&#34;</span><span class="op" id="7627123">,</span>&nbsp;<span class="string" id="7627125">&#34;781890000&#34;</span><span class="op" id="7627136">,</span>&nbsp;<span class="builtintype" id="7627138">true</span><span class="op" id="7627142">}</span><span class="op" id="7627143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627146">{</span><span class="string" id="7627147">&#34;553019.8935e+8&#34;</span><span class="op" id="7627163">,</span>&nbsp;<span class="string" id="7627165">&#34;55301989350000&#34;</span><span class="op" id="7627181">,</span>&nbsp;<span class="builtintype" id="7627183">true</span><span class="op" id="7627187">}</span><span class="op" id="7627188">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627191">{</span><span class="string" id="7627192">&#34;98765432109876543210987654321e-10&#34;</span><span class="op" id="7627227">,</span>&nbsp;<span class="string" id="7627229">&#34;98765432109876543210987654321/10000000000&#34;</span><span class="op" id="7627272">,</span>&nbsp;<span class="builtintype" id="7627274">true</span><span class="op" id="7627278">}</span><span class="op" id="7627279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627282">{</span><span class="string" id="7627283">&#34;9877861857500000E-7&#34;</span><span class="op" id="7627304">,</span>&nbsp;<span class="string" id="7627306">&#34;3951144743/4&#34;</span><span class="op" id="7627320">,</span>&nbsp;<span class="builtintype" id="7627322">true</span><span class="op" id="7627326">}</span><span class="op" id="7627327">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627330">{</span><span class="string" id="7627331">&#34;2169378.417e-3&#34;</span><span class="op" id="7627347">,</span>&nbsp;<span class="string" id="7627349">&#34;2169378417/1000000&#34;</span><span class="op" id="7627369">,</span>&nbsp;<span class="builtintype" id="7627371">true</span><span class="op" id="7627375">}</span><span class="op" id="7627376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627379">{</span><span class="string" id="7627380">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7627418">,</span>&nbsp;<span class="string" id="7627420">&#34;884243222337379604041632732738665534&#34;</span><span class="op" id="7627458">,</span>&nbsp;<span class="builtintype" id="7627460">true</span><span class="op" id="7627464">}</span><span class="op" id="7627465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627468">{</span><span class="string" id="7627469">&#34;53/70893980658822810696&#34;</span><span class="op" id="7627494">,</span>&nbsp;<span class="string" id="7627496">&#34;53/70893980658822810696&#34;</span><span class="op" id="7627521">,</span>&nbsp;<span class="builtintype" id="7627523">true</span><span class="op" id="7627527">}</span><span class="op" id="7627528">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627531">{</span><span class="string" id="7627532">&#34;106/141787961317645621392&#34;</span><span class="op" id="7627559">,</span>&nbsp;<span class="string" id="7627561">&#34;53/70893980658822810696&#34;</span><span class="op" id="7627586">,</span>&nbsp;<span class="builtintype" id="7627588">true</span><span class="op" id="7627592">}</span><span class="op" id="7627593">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627596">{</span><span class="string" id="7627597">&#34;204211327800791583.81095&#34;</span><span class="op" id="7627623">,</span>&nbsp;<span class="string" id="7627625">&#34;4084226556015831676219/20000&#34;</span><span class="op" id="7627655">,</span>&nbsp;<span class="builtintype" id="7627657">true</span><span class="op" id="7627661">}</span><span class="op" id="7627662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627665">{</span><span class="ident" id="7627666">in</span><span class="op" id="7627668">:</span>&nbsp;<span class="string" id="7627670">&#34;1/0&#34;</span><span class="op" id="7627675">,</span>&nbsp;<span class="ident" id="7627677">ok</span><span class="op" id="7627679">:</span>&nbsp;<span class="builtintype" id="7627681">false</span><span class="op" id="7627686">}</span><span class="op" id="7627687">,</span><br>
<span class="lineno"></span><span class="op" id="7627689">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="7627692">func</span>&nbsp;<span class="ident" id="7627697">TestRatSetString</span><span class="op" id="7627713">(</span><span class="ident" id="7627714">t</span>&nbsp;<span class="op" id="7627716">*</span><span class="ident" id="7627717">testing</span><span class="op" id="7627724">.</span><span class="ident" id="7627725">T</span><span class="op" id="7627726">)</span>&nbsp;<span class="op" id="7627728">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7627731">for</span>&nbsp;<span class="ident" id="7627735">i</span><span class="op" id="7627736">,</span>&nbsp;<span class="ident" id="7627738">test</span>&nbsp;<span class="op" id="7627743">:=</span>&nbsp;<span class="keyword" id="7627746">range</span>&nbsp;<span class="ident" id="7627752">setStringTests</span>&nbsp;<span class="op" id="7627767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7627771">x</span><span class="op" id="7627772">,</span>&nbsp;<span class="ident" id="7627774">ok</span>&nbsp;<span class="op" id="7627777">:=</span>&nbsp;<span class="builtinfunc" id="7627780">new</span><span class="op" id="7627783">(</span><span class="ident" id="7627784">Rat</span><span class="op" id="7627787">)</span><span class="op" id="7627788">.</span><span class="ident" id="7627789">SetString</span><span class="op" id="7627798">(</span><span class="ident" id="7627799">test</span><span class="op" id="7627803">.</span><span class="ident" id="7627804">in</span><span class="op" id="7627806">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7627811">if</span>&nbsp;<span class="ident" id="7627814">ok</span>&nbsp;<span class="op" id="7627817">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7627822">if</span>&nbsp;<span class="op" id="7627825">!</span><span class="ident" id="7627826">test</span><span class="op" id="7627830">.</span><span class="ident" id="7627831">ok</span>&nbsp;<span class="op" id="7627834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7627840">t</span><span class="op" id="7627841">.</span><span class="ident" id="7627842">Errorf</span><span class="op" id="7627848">(</span><span class="string" id="7627849">&#34;#%d&nbsp;SetString(%q)&nbsp;expected&nbsp;failure&#34;</span><span class="op" id="7627885">,</span>&nbsp;<span class="ident" id="7627887">i</span><span class="op" id="7627888">,</span>&nbsp;<span class="ident" id="7627890">test</span><span class="op" id="7627894">.</span><span class="ident" id="7627895">in</span><span class="op" id="7627897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7627902">}</span>&nbsp;<span class="keyword" id="7627904">else</span>&nbsp;<span class="keyword" id="7627909">if</span>&nbsp;<span class="ident" id="7627912">x</span><span class="op" id="7627913">.</span><span class="ident" id="7627914">RatString</span><span class="op" id="7627923">(</span><span class="op" id="7627924">)</span>&nbsp;<span class="op" id="7627926">!=</span>&nbsp;<span class="ident" id="7627929">test</span><span class="op" id="7627933">.</span><span class="ident" id="7627934">out</span>&nbsp;<span class="op" id="7627938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7627944">t</span><span class="op" id="7627945">.</span><span class="ident" id="7627946">Errorf</span><span class="op" id="7627952">(</span><span class="string" id="7627953">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7627987">,</span>&nbsp;<span class="ident" id="7627989">i</span><span class="op" id="7627990">,</span>&nbsp;<span class="ident" id="7627992">test</span><span class="op" id="7627996">.</span><span class="ident" id="7627997">in</span><span class="op" id="7627999">,</span>&nbsp;<span class="ident" id="7628001">x</span><span class="op" id="7628002">.</span><span class="ident" id="7628003">RatString</span><span class="op" id="7628012">(</span><span class="op" id="7628013">)</span><span class="op" id="7628014">,</span>&nbsp;<span class="ident" id="7628016">test</span><span class="op" id="7628020">.</span><span class="ident" id="7628021">out</span><span class="op" id="7628024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628029">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628033">}</span>&nbsp;<span class="keyword" id="7628035">else</span>&nbsp;<span class="keyword" id="7628040">if</span>&nbsp;<span class="ident" id="7628043">x</span>&nbsp;<span class="op" id="7628045">!=</span>&nbsp;<span class="builtintype" id="7628048">nil</span>&nbsp;<span class="op" id="7628052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628057">t</span><span class="op" id="7628058">.</span><span class="ident" id="7628059">Errorf</span><span class="op" id="7628065">(</span><span class="string" id="7628066">&#34;#%d&nbsp;SetString(%q)&nbsp;got&nbsp;%p&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7628101">,</span>&nbsp;<span class="ident" id="7628103">i</span><span class="op" id="7628104">,</span>&nbsp;<span class="ident" id="7628106">test</span><span class="op" id="7628110">.</span><span class="ident" id="7628111">in</span><span class="op" id="7628113">,</span>&nbsp;<span class="ident" id="7628115">x</span><span class="op" id="7628116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628123">}</span><br>
<span class="lineno"></span><span class="op" id="7628125">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="7628128">func</span>&nbsp;<span class="ident" id="7628133">TestRatScan</span><span class="op" id="7628144">(</span><span class="ident" id="7628145">t</span>&nbsp;<span class="op" id="7628147">*</span><span class="ident" id="7628148">testing</span><span class="op" id="7628155">.</span><span class="ident" id="7628156">T</span><span class="op" id="7628157">)</span>&nbsp;<span class="op" id="7628159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628162">var</span>&nbsp;<span class="ident" id="7628166">buf</span>&nbsp;<span class="ident" id="7628170">bytes</span><span class="op" id="7628175">.</span><span class="ident" id="7628176">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628184">for</span>&nbsp;<span class="ident" id="7628188">i</span><span class="op" id="7628189">,</span>&nbsp;<span class="ident" id="7628191">test</span>&nbsp;<span class="op" id="7628196">:=</span>&nbsp;<span class="keyword" id="7628199">range</span>&nbsp;<span class="ident" id="7628205">setStringTests</span>&nbsp;<span class="op" id="7628220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628224">x</span>&nbsp;<span class="op" id="7628226">:=</span>&nbsp;<span class="builtinfunc" id="7628229">new</span><span class="op" id="7628232">(</span><span class="ident" id="7628233">Rat</span><span class="op" id="7628236">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628240">buf</span><span class="op" id="7628243">.</span><span class="ident" id="7628244">Reset</span><span class="op" id="7628249">(</span><span class="op" id="7628250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628254">buf</span><span class="op" id="7628257">.</span><span class="ident" id="7628258">WriteString</span><span class="op" id="7628269">(</span><span class="ident" id="7628270">test</span><span class="op" id="7628274">.</span><span class="ident" id="7628275">in</span><span class="op" id="7628277">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628282">_</span><span class="op" id="7628283">,</span>&nbsp;<span class="ident" id="7628285">err</span>&nbsp;<span class="op" id="7628289">:=</span>&nbsp;<span class="ident" id="7628292">fmt</span><span class="op" id="7628295">.</span><span class="ident" id="7628296">Fscanf</span><span class="op" id="7628302">(</span><span class="op" id="7628303">&amp;</span><span class="ident" id="7628304">buf</span><span class="op" id="7628307">,</span>&nbsp;<span class="string" id="7628309">&#34;%v&#34;</span><span class="op" id="7628313">,</span>&nbsp;<span class="ident" id="7628315">x</span><span class="op" id="7628316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628320">if</span>&nbsp;<span class="ident" id="7628323">err</span>&nbsp;<span class="op" id="7628327">==</span>&nbsp;<span class="builtintype" id="7628330">nil</span>&nbsp;<span class="op" id="7628334">!=</span>&nbsp;<span class="ident" id="7628337">test</span><span class="op" id="7628341">.</span><span class="ident" id="7628342">ok</span>&nbsp;<span class="op" id="7628345">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628350">if</span>&nbsp;<span class="ident" id="7628353">test</span><span class="op" id="7628357">.</span><span class="ident" id="7628358">ok</span>&nbsp;<span class="op" id="7628361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628367">t</span><span class="op" id="7628368">.</span><span class="ident" id="7628369">Errorf</span><span class="op" id="7628375">(</span><span class="string" id="7628376">&#34;#%d&nbsp;error:&nbsp;%s&#34;</span><span class="op" id="7628391">,</span>&nbsp;<span class="ident" id="7628393">i</span><span class="op" id="7628394">,</span>&nbsp;<span class="ident" id="7628396">err</span><span class="op" id="7628399">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628404">}</span>&nbsp;<span class="keyword" id="7628406">else</span>&nbsp;<span class="op" id="7628411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628417">t</span><span class="op" id="7628418">.</span><span class="ident" id="7628419">Errorf</span><span class="op" id="7628425">(</span><span class="string" id="7628426">&#34;#%d&nbsp;expected&nbsp;error&#34;</span><span class="op" id="7628446">,</span>&nbsp;<span class="ident" id="7628448">i</span><span class="op" id="7628449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628454">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628459">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7628474">if</span>&nbsp;<span class="ident" id="7628477">err</span>&nbsp;<span class="op" id="7628481">==</span>&nbsp;<span class="builtintype" id="7628484">nil</span>&nbsp;<span class="op" id="7628488">&amp;&amp;</span>&nbsp;<span class="ident" id="7628491">x</span><span class="op" id="7628492">.</span><span class="ident" id="7628493">RatString</span><span class="op" id="7628502">(</span><span class="op" id="7628503">)</span>&nbsp;<span class="op" id="7628505">!=</span>&nbsp;<span class="ident" id="7628508">test</span><span class="op" id="7628512">.</span><span class="ident" id="7628513">out</span>&nbsp;<span class="op" id="7628517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628522">t</span><span class="op" id="7628523">.</span><span class="ident" id="7628524">Errorf</span><span class="op" id="7628530">(</span><span class="string" id="7628531">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7628551">,</span>&nbsp;<span class="ident" id="7628553">i</span><span class="op" id="7628554">,</span>&nbsp;<span class="ident" id="7628556">x</span><span class="op" id="7628557">.</span><span class="ident" id="7628558">RatString</span><span class="op" id="7628567">(</span><span class="op" id="7628568">)</span><span class="op" id="7628569">,</span>&nbsp;<span class="ident" id="7628571">test</span><span class="op" id="7628575">.</span><span class="ident" id="7628576">out</span><span class="op" id="7628579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628583">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628586">}</span><br>
<span class="lineno"></span><span class="op" id="7628588">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7628591">var</span>&nbsp;<span class="ident" id="7628595">floatStringTests</span>&nbsp;<span class="op" id="7628612">=</span>&nbsp;<span class="op" id="7628614">[</span><span class="op" id="7628615">]</span><span class="keyword" id="7628616">struct</span>&nbsp;<span class="op" id="7628623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628626">in</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7628631">string</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628639">prec</span>&nbsp;<span class="builtintype" id="7628644">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7628649">out</span>&nbsp;&nbsp;<span class="builtintype" id="7628654">string</span><br>
<span class="lineno"></span><span class="op" id="7628661">}</span><span class="op" id="7628662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628665">{</span><span class="string" id="7628666">&#34;0&#34;</span><span class="op" id="7628669">,</span>&nbsp;<span class="num" id="7628671">0</span><span class="op" id="7628672">,</span>&nbsp;<span class="string" id="7628674">&#34;0&#34;</span><span class="op" id="7628677">}</span><span class="op" id="7628678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628681">{</span><span class="string" id="7628682">&#34;0&#34;</span><span class="op" id="7628685">,</span>&nbsp;<span class="num" id="7628687">4</span><span class="op" id="7628688">,</span>&nbsp;<span class="string" id="7628690">&#34;0.0000&#34;</span><span class="op" id="7628698">}</span><span class="op" id="7628699">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628702">{</span><span class="string" id="7628703">&#34;1&#34;</span><span class="op" id="7628706">,</span>&nbsp;<span class="num" id="7628708">0</span><span class="op" id="7628709">,</span>&nbsp;<span class="string" id="7628711">&#34;1&#34;</span><span class="op" id="7628714">}</span><span class="op" id="7628715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628718">{</span><span class="string" id="7628719">&#34;1&#34;</span><span class="op" id="7628722">,</span>&nbsp;<span class="num" id="7628724">2</span><span class="op" id="7628725">,</span>&nbsp;<span class="string" id="7628727">&#34;1.00&#34;</span><span class="op" id="7628733">}</span><span class="op" id="7628734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628737">{</span><span class="string" id="7628738">&#34;-1&#34;</span><span class="op" id="7628742">,</span>&nbsp;<span class="num" id="7628744">0</span><span class="op" id="7628745">,</span>&nbsp;<span class="string" id="7628747">&#34;-1&#34;</span><span class="op" id="7628751">}</span><span class="op" id="7628752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628755">{</span><span class="string" id="7628756">&#34;.25&#34;</span><span class="op" id="7628761">,</span>&nbsp;<span class="num" id="7628763">2</span><span class="op" id="7628764">,</span>&nbsp;<span class="string" id="7628766">&#34;0.25&#34;</span><span class="op" id="7628772">}</span><span class="op" id="7628773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628776">{</span><span class="string" id="7628777">&#34;.25&#34;</span><span class="op" id="7628782">,</span>&nbsp;<span class="num" id="7628784">1</span><span class="op" id="7628785">,</span>&nbsp;<span class="string" id="7628787">&#34;0.3&#34;</span><span class="op" id="7628792">}</span><span class="op" id="7628793">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628796">{</span><span class="string" id="7628797">&#34;.25&#34;</span><span class="op" id="7628802">,</span>&nbsp;<span class="num" id="7628804">3</span><span class="op" id="7628805">,</span>&nbsp;<span class="string" id="7628807">&#34;0.250&#34;</span><span class="op" id="7628814">}</span><span class="op" id="7628815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628818">{</span><span class="string" id="7628819">&#34;-1/3&#34;</span><span class="op" id="7628825">,</span>&nbsp;<span class="num" id="7628827">3</span><span class="op" id="7628828">,</span>&nbsp;<span class="string" id="7628830">&#34;-0.333&#34;</span><span class="op" id="7628838">}</span><span class="op" id="7628839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628842">{</span><span class="string" id="7628843">&#34;-2/3&#34;</span><span class="op" id="7628849">,</span>&nbsp;<span class="num" id="7628851">4</span><span class="op" id="7628852">,</span>&nbsp;<span class="string" id="7628854">&#34;-0.6667&#34;</span><span class="op" id="7628863">}</span><span class="op" id="7628864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628867">{</span><span class="string" id="7628868">&#34;0.96&#34;</span><span class="op" id="7628874">,</span>&nbsp;<span class="num" id="7628876">1</span><span class="op" id="7628877">,</span>&nbsp;<span class="string" id="7628879">&#34;1.0&#34;</span><span class="op" id="7628884">}</span><span class="op" id="7628885">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628888">{</span><span class="string" id="7628889">&#34;0.999&#34;</span><span class="op" id="7628896">,</span>&nbsp;<span class="num" id="7628898">2</span><span class="op" id="7628899">,</span>&nbsp;<span class="string" id="7628901">&#34;1.00&#34;</span><span class="op" id="7628907">}</span><span class="op" id="7628908">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628911">{</span><span class="string" id="7628912">&#34;0.9&#34;</span><span class="op" id="7628917">,</span>&nbsp;<span class="num" id="7628919">0</span><span class="op" id="7628920">,</span>&nbsp;<span class="string" id="7628922">&#34;1&#34;</span><span class="op" id="7628925">}</span><span class="op" id="7628926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628929">{</span><span class="string" id="7628930">&#34;.25&#34;</span><span class="op" id="7628935">,</span>&nbsp;<span class="op" id="7628937">-</span><span class="num" id="7628938">1</span><span class="op" id="7628939">,</span>&nbsp;<span class="string" id="7628941">&#34;0&#34;</span><span class="op" id="7628944">}</span><span class="op" id="7628945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7628948">{</span><span class="string" id="7628949">&#34;.55&#34;</span><span class="op" id="7628954">,</span>&nbsp;<span class="op" id="7628956">-</span><span class="num" id="7628957">1</span><span class="op" id="7628958">,</span>&nbsp;<span class="string" id="7628960">&#34;1&#34;</span><span class="op" id="7628963">}</span><span class="op" id="7628964">,</span><br>
<span class="lineno"></span><span class="op" id="7628966">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="7628969">func</span>&nbsp;<span class="ident" id="7628974">TestFloatString</span><span class="op" id="7628989">(</span><span class="ident" id="7628990">t</span>&nbsp;<span class="op" id="7628992">*</span><span class="ident" id="7628993">testing</span><span class="op" id="7629000">.</span><span class="ident" id="7629001">T</span><span class="op" id="7629002">)</span>&nbsp;<span class="op" id="7629004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629007">for</span>&nbsp;<span class="ident" id="7629011">i</span><span class="op" id="7629012">,</span>&nbsp;<span class="ident" id="7629014">test</span>&nbsp;<span class="op" id="7629019">:=</span>&nbsp;<span class="keyword" id="7629022">range</span>&nbsp;<span class="ident" id="7629028">floatStringTests</span>&nbsp;<span class="op" id="7629045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629049">x</span><span class="op" id="7629050">,</span>&nbsp;<span class="ident" id="7629052">_</span>&nbsp;<span class="op" id="7629054">:=</span>&nbsp;<span class="builtinfunc" id="7629057">new</span><span class="op" id="7629060">(</span><span class="ident" id="7629061">Rat</span><span class="op" id="7629064">)</span><span class="op" id="7629065">.</span><span class="ident" id="7629066">SetString</span><span class="op" id="7629075">(</span><span class="ident" id="7629076">test</span><span class="op" id="7629080">.</span><span class="ident" id="7629081">in</span><span class="op" id="7629083">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629088">if</span>&nbsp;<span class="ident" id="7629091">x</span><span class="op" id="7629092">.</span><span class="ident" id="7629093">FloatString</span><span class="op" id="7629104">(</span><span class="ident" id="7629105">test</span><span class="op" id="7629109">.</span><span class="ident" id="7629110">prec</span><span class="op" id="7629114">)</span>&nbsp;<span class="op" id="7629116">!=</span>&nbsp;<span class="ident" id="7629119">test</span><span class="op" id="7629123">.</span><span class="ident" id="7629124">out</span>&nbsp;<span class="op" id="7629128">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629133">t</span><span class="op" id="7629134">.</span><span class="ident" id="7629135">Errorf</span><span class="op" id="7629141">(</span><span class="string" id="7629142">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7629162">,</span>&nbsp;<span class="ident" id="7629164">i</span><span class="op" id="7629165">,</span>&nbsp;<span class="ident" id="7629167">x</span><span class="op" id="7629168">.</span><span class="ident" id="7629169">FloatString</span><span class="op" id="7629180">(</span><span class="ident" id="7629181">test</span><span class="op" id="7629185">.</span><span class="ident" id="7629186">prec</span><span class="op" id="7629190">)</span><span class="op" id="7629191">,</span>&nbsp;<span class="ident" id="7629193">test</span><span class="op" id="7629197">.</span><span class="ident" id="7629198">out</span><span class="op" id="7629201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629208">}</span><br>
<span class="lineno"></span><span class="op" id="7629210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7629213">func</span>&nbsp;<span class="ident" id="7629218">TestRatSign</span><span class="op" id="7629229">(</span><span class="ident" id="7629230">t</span>&nbsp;<span class="op" id="7629232">*</span><span class="ident" id="7629233">testing</span><span class="op" id="7629240">.</span><span class="ident" id="7629241">T</span><span class="op" id="7629242">)</span>&nbsp;<span class="op" id="7629244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629247">zero</span>&nbsp;<span class="op" id="7629252">:=</span>&nbsp;<span class="ident" id="7629255">NewRat</span><span class="op" id="7629261">(</span><span class="num" id="7629262">0</span><span class="op" id="7629263">,</span>&nbsp;<span class="num" id="7629265">1</span><span class="op" id="7629266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629269">for</span>&nbsp;<span class="ident" id="7629273">_</span><span class="op" id="7629274">,</span>&nbsp;<span class="ident" id="7629276">a</span>&nbsp;<span class="op" id="7629278">:=</span>&nbsp;<span class="keyword" id="7629281">range</span>&nbsp;<span class="ident" id="7629287">setStringTests</span>&nbsp;<span class="op" id="7629302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629306">x</span><span class="op" id="7629307">,</span>&nbsp;<span class="ident" id="7629309">ok</span>&nbsp;<span class="op" id="7629312">:=</span>&nbsp;<span class="builtinfunc" id="7629315">new</span><span class="op" id="7629318">(</span><span class="ident" id="7629319">Rat</span><span class="op" id="7629322">)</span><span class="op" id="7629323">.</span><span class="ident" id="7629324">SetString</span><span class="op" id="7629333">(</span><span class="ident" id="7629334">a</span><span class="op" id="7629335">.</span><span class="ident" id="7629336">in</span><span class="op" id="7629338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629342">if</span>&nbsp;<span class="op" id="7629345">!</span><span class="ident" id="7629346">ok</span>&nbsp;<span class="op" id="7629349">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629354">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629369">s</span>&nbsp;<span class="op" id="7629371">:=</span>&nbsp;<span class="ident" id="7629374">x</span><span class="op" id="7629375">.</span><span class="ident" id="7629376">Sign</span><span class="op" id="7629380">(</span><span class="op" id="7629381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629385">e</span>&nbsp;<span class="op" id="7629387">:=</span>&nbsp;<span class="ident" id="7629390">x</span><span class="op" id="7629391">.</span><span class="ident" id="7629392">Cmp</span><span class="op" id="7629395">(</span><span class="ident" id="7629396">zero</span><span class="op" id="7629400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629404">if</span>&nbsp;<span class="ident" id="7629407">s</span>&nbsp;<span class="op" id="7629409">!=</span>&nbsp;<span class="ident" id="7629412">e</span>&nbsp;<span class="op" id="7629414">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629419">t</span><span class="op" id="7629420">.</span><span class="ident" id="7629421">Errorf</span><span class="op" id="7629427">(</span><span class="string" id="7629428">&#34;got&nbsp;%d;&nbsp;want&nbsp;%d&nbsp;for&nbsp;z&nbsp;=&nbsp;%v&#34;</span><span class="op" id="7629456">,</span>&nbsp;<span class="ident" id="7629458">s</span><span class="op" id="7629459">,</span>&nbsp;<span class="ident" id="7629461">e</span><span class="op" id="7629462">,</span>&nbsp;<span class="op" id="7629464">&amp;</span><span class="ident" id="7629465">x</span><span class="op" id="7629466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629473">}</span><br>
<span class="lineno"></span><span class="op" id="7629475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="7629478">var</span>&nbsp;<span class="ident" id="7629482">ratCmpTests</span>&nbsp;<span class="op" id="7629494">=</span>&nbsp;<span class="op" id="7629496">[</span><span class="op" id="7629497">]</span><span class="keyword" id="7629498">struct</span>&nbsp;<span class="op" id="7629505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629508">rat1</span><span class="op" id="7629512">,</span>&nbsp;<span class="ident" id="7629514">rat2</span>&nbsp;<span class="builtintype" id="7629519">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7629527">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7629538">int</span><br>
<span class="lineno"></span><span class="op" id="7629542">}</span><span class="op" id="7629543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629546">{</span><span class="string" id="7629547">&#34;0&#34;</span><span class="op" id="7629550">,</span>&nbsp;<span class="string" id="7629552">&#34;0/1&#34;</span><span class="op" id="7629557">,</span>&nbsp;<span class="num" id="7629559">0</span><span class="op" id="7629560">}</span><span class="op" id="7629561">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629564">{</span><span class="string" id="7629565">&#34;1/1&#34;</span><span class="op" id="7629570">,</span>&nbsp;<span class="string" id="7629572">&#34;1&#34;</span><span class="op" id="7629575">,</span>&nbsp;<span class="num" id="7629577">0</span><span class="op" id="7629578">}</span><span class="op" id="7629579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629582">{</span><span class="string" id="7629583">&#34;-1&#34;</span><span class="op" id="7629587">,</span>&nbsp;<span class="string" id="7629589">&#34;-2/2&#34;</span><span class="op" id="7629595">,</span>&nbsp;<span class="num" id="7629597">0</span><span class="op" id="7629598">}</span><span class="op" id="7629599">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629602">{</span><span class="string" id="7629603">&#34;1&#34;</span><span class="op" id="7629606">,</span>&nbsp;<span class="string" id="7629608">&#34;0&#34;</span><span class="op" id="7629611">,</span>&nbsp;<span class="num" id="7629613">1</span><span class="op" id="7629614">}</span><span class="op" id="7629615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629618">{</span><span class="string" id="7629619">&#34;0/1&#34;</span><span class="op" id="7629624">,</span>&nbsp;<span class="string" id="7629626">&#34;1/1&#34;</span><span class="op" id="7629631">,</span>&nbsp;<span class="op" id="7629633">-</span><span class="num" id="7629634">1</span><span class="op" id="7629635">}</span><span class="op" id="7629636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629639">{</span><span class="string" id="7629640">&#34;-5/1434770811533343057144&#34;</span><span class="op" id="7629667">,</span>&nbsp;<span class="string" id="7629669">&#34;-5/1434770811533343057145&#34;</span><span class="op" id="7629696">,</span>&nbsp;<span class="op" id="7629698">-</span><span class="num" id="7629699">1</span><span class="op" id="7629700">}</span><span class="op" id="7629701">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629704">{</span><span class="string" id="7629705">&#34;49832350382626108453/8964749413&#34;</span><span class="op" id="7629738">,</span>&nbsp;<span class="string" id="7629740">&#34;49832350382626108454/8964749413&#34;</span><span class="op" id="7629773">,</span>&nbsp;<span class="op" id="7629775">-</span><span class="num" id="7629776">1</span><span class="op" id="7629777">}</span><span class="op" id="7629778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629781">{</span><span class="string" id="7629782">&#34;-37414950961700930/7204075375675961&#34;</span><span class="op" id="7629819">,</span>&nbsp;<span class="string" id="7629821">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7629857">,</span>&nbsp;<span class="op" id="7629859">-</span><span class="num" id="7629860">1</span><span class="op" id="7629861">}</span><span class="op" id="7629862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7629865">{</span><span class="string" id="7629866">&#34;37414950961700930/7204075375675961&#34;</span><span class="op" id="7629902">,</span>&nbsp;<span class="string" id="7629904">&#34;74829901923401860/14408150751351922&#34;</span><span class="op" id="7629941">,</span>&nbsp;<span class="num" id="7629943">0</span><span class="op" id="7629944">}</span><span class="op" id="7629945">,</span><br>
<span class="lineno"></span><span class="op" id="7629947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="keyword" id="7629950">func</span>&nbsp;<span class="ident" id="7629955">TestRatCmp</span><span class="op" id="7629965">(</span><span class="ident" id="7629966">t</span>&nbsp;<span class="op" id="7629968">*</span><span class="ident" id="7629969">testing</span><span class="op" id="7629976">.</span><span class="ident" id="7629977">T</span><span class="op" id="7629978">)</span>&nbsp;<span class="op" id="7629980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7629983">for</span>&nbsp;<span class="ident" id="7629987">i</span><span class="op" id="7629988">,</span>&nbsp;<span class="ident" id="7629990">test</span>&nbsp;<span class="op" id="7629995">:=</span>&nbsp;<span class="keyword" id="7629998">range</span>&nbsp;<span class="ident" id="7630004">ratCmpTests</span>&nbsp;<span class="op" id="7630016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630020">x</span><span class="op" id="7630021">,</span>&nbsp;<span class="ident" id="7630023">_</span>&nbsp;<span class="op" id="7630025">:=</span>&nbsp;<span class="builtinfunc" id="7630028">new</span><span class="op" id="7630031">(</span><span class="ident" id="7630032">Rat</span><span class="op" id="7630035">)</span><span class="op" id="7630036">.</span><span class="ident" id="7630037">SetString</span><span class="op" id="7630046">(</span><span class="ident" id="7630047">test</span><span class="op" id="7630051">.</span><span class="ident" id="7630052">rat1</span><span class="op" id="7630056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630060">y</span><span class="op" id="7630061">,</span>&nbsp;<span class="ident" id="7630063">_</span>&nbsp;<span class="op" id="7630065">:=</span>&nbsp;<span class="builtinfunc" id="7630068">new</span><span class="op" id="7630071">(</span><span class="ident" id="7630072">Rat</span><span class="op" id="7630075">)</span><span class="op" id="7630076">.</span><span class="ident" id="7630077">SetString</span><span class="op" id="7630086">(</span><span class="ident" id="7630087">test</span><span class="op" id="7630091">.</span><span class="ident" id="7630092">rat2</span><span class="op" id="7630096">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630101">out</span>&nbsp;<span class="op" id="7630105">:=</span>&nbsp;<span class="ident" id="7630108">x</span><span class="op" id="7630109">.</span><span class="ident" id="7630110">Cmp</span><span class="op" id="7630113">(</span><span class="ident" id="7630114">y</span><span class="op" id="7630115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630119">if</span>&nbsp;<span class="ident" id="7630122">out</span>&nbsp;<span class="op" id="7630126">!=</span>&nbsp;<span class="ident" id="7630129">test</span><span class="op" id="7630133">.</span><span class="ident" id="7630134">out</span>&nbsp;<span class="op" id="7630138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630143">t</span><span class="op" id="7630144">.</span><span class="ident" id="7630145">Errorf</span><span class="op" id="7630151">(</span><span class="string" id="7630152">&#34;#%d&nbsp;got&nbsp;out&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7630179">,</span>&nbsp;<span class="ident" id="7630181">i</span><span class="op" id="7630182">,</span>&nbsp;<span class="ident" id="7630184">out</span><span class="op" id="7630187">,</span>&nbsp;<span class="ident" id="7630189">test</span><span class="op" id="7630193">.</span><span class="ident" id="7630194">out</span><span class="op" id="7630197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630204">}</span><br>
<span class="lineno">205</span><span class="op" id="7630206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7630209">func</span>&nbsp;<span class="ident" id="7630214">TestIsInt</span><span class="op" id="7630223">(</span><span class="ident" id="7630224">t</span>&nbsp;<span class="op" id="7630226">*</span><span class="ident" id="7630227">testing</span><span class="op" id="7630234">.</span><span class="ident" id="7630235">T</span><span class="op" id="7630236">)</span>&nbsp;<span class="op" id="7630238">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630241">one</span>&nbsp;<span class="op" id="7630245">:=</span>&nbsp;<span class="ident" id="7630248">NewInt</span><span class="op" id="7630254">(</span><span class="num" id="7630255">1</span><span class="op" id="7630256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630259">for</span>&nbsp;<span class="ident" id="7630263">_</span><span class="op" id="7630264">,</span>&nbsp;<span class="ident" id="7630266">a</span>&nbsp;<span class="op" id="7630268">:=</span>&nbsp;<span class="keyword" id="7630271">range</span>&nbsp;<span class="ident" id="7630277">setStringTests</span>&nbsp;<span class="op" id="7630292">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630296">x</span><span class="op" id="7630297">,</span>&nbsp;<span class="ident" id="7630299">ok</span>&nbsp;<span class="op" id="7630302">:=</span>&nbsp;<span class="builtinfunc" id="7630305">new</span><span class="op" id="7630308">(</span><span class="ident" id="7630309">Rat</span><span class="op" id="7630312">)</span><span class="op" id="7630313">.</span><span class="ident" id="7630314">SetString</span><span class="op" id="7630323">(</span><span class="ident" id="7630324">a</span><span class="op" id="7630325">.</span><span class="ident" id="7630326">in</span><span class="op" id="7630328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630332">if</span>&nbsp;<span class="op" id="7630335">!</span><span class="ident" id="7630336">ok</span>&nbsp;<span class="op" id="7630339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630344">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630359">i</span>&nbsp;<span class="op" id="7630361">:=</span>&nbsp;<span class="ident" id="7630364">x</span><span class="op" id="7630365">.</span><span class="ident" id="7630366">IsInt</span><span class="op" id="7630371">(</span><span class="op" id="7630372">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630376">e</span>&nbsp;<span class="op" id="7630378">:=</span>&nbsp;<span class="ident" id="7630381">x</span><span class="op" id="7630382">.</span><span class="ident" id="7630383">Denom</span><span class="op" id="7630388">(</span><span class="op" id="7630389">)</span><span class="op" id="7630390">.</span><span class="ident" id="7630391">Cmp</span><span class="op" id="7630394">(</span><span class="ident" id="7630395">one</span><span class="op" id="7630398">)</span>&nbsp;<span class="op" id="7630400">==</span>&nbsp;<span class="num" id="7630403">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630407">if</span>&nbsp;<span class="ident" id="7630410">i</span>&nbsp;<span class="op" id="7630412">!=</span>&nbsp;<span class="ident" id="7630415">e</span>&nbsp;<span class="op" id="7630417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630422">t</span><span class="op" id="7630423">.</span><span class="ident" id="7630424">Errorf</span><span class="op" id="7630430">(</span><span class="string" id="7630431">&#34;got&nbsp;IsInt(%v)&nbsp;==&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7630461">,</span>&nbsp;<span class="ident" id="7630463">x</span><span class="op" id="7630464">,</span>&nbsp;<span class="ident" id="7630466">i</span><span class="op" id="7630467">,</span>&nbsp;<span class="ident" id="7630469">e</span><span class="op" id="7630470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630477">}</span><br>
<span class="lineno">220</span><span class="op" id="7630479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7630482">func</span>&nbsp;<span class="ident" id="7630487">TestRatAbs</span><span class="op" id="7630497">(</span><span class="ident" id="7630498">t</span>&nbsp;<span class="op" id="7630500">*</span><span class="ident" id="7630501">testing</span><span class="op" id="7630508">.</span><span class="ident" id="7630509">T</span><span class="op" id="7630510">)</span>&nbsp;<span class="op" id="7630512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630515">zero</span>&nbsp;<span class="op" id="7630520">:=</span>&nbsp;<span class="builtinfunc" id="7630523">new</span><span class="op" id="7630526">(</span><span class="ident" id="7630527">Rat</span><span class="op" id="7630530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630533">for</span>&nbsp;<span class="ident" id="7630537">_</span><span class="op" id="7630538">,</span>&nbsp;<span class="ident" id="7630540">a</span>&nbsp;<span class="op" id="7630542">:=</span>&nbsp;<span class="keyword" id="7630545">range</span>&nbsp;<span class="ident" id="7630551">setStringTests</span>&nbsp;<span class="op" id="7630566">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630570">x</span><span class="op" id="7630571">,</span>&nbsp;<span class="ident" id="7630573">ok</span>&nbsp;<span class="op" id="7630576">:=</span>&nbsp;<span class="builtinfunc" id="7630579">new</span><span class="op" id="7630582">(</span><span class="ident" id="7630583">Rat</span><span class="op" id="7630586">)</span><span class="op" id="7630587">.</span><span class="ident" id="7630588">SetString</span><span class="op" id="7630597">(</span><span class="ident" id="7630598">a</span><span class="op" id="7630599">.</span><span class="ident" id="7630600">in</span><span class="op" id="7630602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630606">if</span>&nbsp;<span class="op" id="7630609">!</span><span class="ident" id="7630610">ok</span>&nbsp;<span class="op" id="7630613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630618">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630633">e</span>&nbsp;<span class="op" id="7630635">:=</span>&nbsp;<span class="builtinfunc" id="7630638">new</span><span class="op" id="7630641">(</span><span class="ident" id="7630642">Rat</span><span class="op" id="7630645">)</span><span class="op" id="7630646">.</span><span class="ident" id="7630647">Set</span><span class="op" id="7630650">(</span><span class="ident" id="7630651">x</span><span class="op" id="7630652">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630656">if</span>&nbsp;<span class="ident" id="7630659">e</span><span class="op" id="7630660">.</span><span class="ident" id="7630661">Cmp</span><span class="op" id="7630664">(</span><span class="ident" id="7630665">zero</span><span class="op" id="7630669">)</span>&nbsp;<span class="op" id="7630671">&lt;</span>&nbsp;<span class="num" id="7630673">0</span>&nbsp;<span class="op" id="7630675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630680">e</span><span class="op" id="7630681">.</span><span class="ident" id="7630682">Sub</span><span class="op" id="7630685">(</span><span class="ident" id="7630686">zero</span><span class="op" id="7630690">,</span>&nbsp;<span class="ident" id="7630692">e</span><span class="op" id="7630693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630701">z</span>&nbsp;<span class="op" id="7630703">:=</span>&nbsp;<span class="builtinfunc" id="7630706">new</span><span class="op" id="7630709">(</span><span class="ident" id="7630710">Rat</span><span class="op" id="7630713">)</span><span class="op" id="7630714">.</span><span class="ident" id="7630715">Abs</span><span class="op" id="7630718">(</span><span class="ident" id="7630719">x</span><span class="op" id="7630720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630724">if</span>&nbsp;<span class="ident" id="7630727">z</span><span class="op" id="7630728">.</span><span class="ident" id="7630729">Cmp</span><span class="op" id="7630732">(</span><span class="ident" id="7630733">e</span><span class="op" id="7630734">)</span>&nbsp;<span class="op" id="7630736">!=</span>&nbsp;<span class="num" id="7630739">0</span>&nbsp;<span class="op" id="7630741">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630746">t</span><span class="op" id="7630747">.</span><span class="ident" id="7630748">Errorf</span><span class="op" id="7630754">(</span><span class="string" id="7630755">&#34;got&nbsp;Abs(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7630782">,</span>&nbsp;<span class="ident" id="7630784">x</span><span class="op" id="7630785">,</span>&nbsp;<span class="ident" id="7630787">z</span><span class="op" id="7630788">,</span>&nbsp;<span class="ident" id="7630790">e</span><span class="op" id="7630791">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630795">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630798">}</span><br>
<span class="lineno"></span><span class="op" id="7630800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7630803">func</span>&nbsp;<span class="ident" id="7630808">TestRatNeg</span><span class="op" id="7630818">(</span><span class="ident" id="7630819">t</span>&nbsp;<span class="op" id="7630821">*</span><span class="ident" id="7630822">testing</span><span class="op" id="7630829">.</span><span class="ident" id="7630830">T</span><span class="op" id="7630831">)</span>&nbsp;<span class="op" id="7630833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630836">zero</span>&nbsp;<span class="op" id="7630841">:=</span>&nbsp;<span class="builtinfunc" id="7630844">new</span><span class="op" id="7630847">(</span><span class="ident" id="7630848">Rat</span><span class="op" id="7630851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630854">for</span>&nbsp;<span class="ident" id="7630858">_</span><span class="op" id="7630859">,</span>&nbsp;<span class="ident" id="7630861">a</span>&nbsp;<span class="op" id="7630863">:=</span>&nbsp;<span class="keyword" id="7630866">range</span>&nbsp;<span class="ident" id="7630872">setStringTests</span>&nbsp;<span class="op" id="7630887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630891">x</span><span class="op" id="7630892">,</span>&nbsp;<span class="ident" id="7630894">ok</span>&nbsp;<span class="op" id="7630897">:=</span>&nbsp;<span class="builtinfunc" id="7630900">new</span><span class="op" id="7630903">(</span><span class="ident" id="7630904">Rat</span><span class="op" id="7630907">)</span><span class="op" id="7630908">.</span><span class="ident" id="7630909">SetString</span><span class="op" id="7630918">(</span><span class="ident" id="7630919">a</span><span class="op" id="7630920">.</span><span class="ident" id="7630921">in</span><span class="op" id="7630923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630927">if</span>&nbsp;<span class="op" id="7630930">!</span><span class="ident" id="7630931">ok</span>&nbsp;<span class="op" id="7630934">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7630939">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7630950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630954">e</span>&nbsp;<span class="op" id="7630956">:=</span>&nbsp;<span class="builtinfunc" id="7630959">new</span><span class="op" id="7630962">(</span><span class="ident" id="7630963">Rat</span><span class="op" id="7630966">)</span><span class="op" id="7630967">.</span><span class="ident" id="7630968">Sub</span><span class="op" id="7630971">(</span><span class="ident" id="7630972">zero</span><span class="op" id="7630976">,</span>&nbsp;<span class="ident" id="7630978">x</span><span class="op" id="7630979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7630983">z</span>&nbsp;<span class="op" id="7630985">:=</span>&nbsp;<span class="builtinfunc" id="7630988">new</span><span class="op" id="7630991">(</span><span class="ident" id="7630992">Rat</span><span class="op" id="7630995">)</span><span class="op" id="7630996">.</span><span class="ident" id="7630997">Neg</span><span class="op" id="7631000">(</span><span class="ident" id="7631001">x</span><span class="op" id="7631002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631006">if</span>&nbsp;<span class="ident" id="7631009">z</span><span class="op" id="7631010">.</span><span class="ident" id="7631011">Cmp</span><span class="op" id="7631014">(</span><span class="ident" id="7631015">e</span><span class="op" id="7631016">)</span>&nbsp;<span class="op" id="7631018">!=</span>&nbsp;<span class="num" id="7631021">0</span>&nbsp;<span class="op" id="7631023">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631028">t</span><span class="op" id="7631029">.</span><span class="ident" id="7631030">Errorf</span><span class="op" id="7631036">(</span><span class="string" id="7631037">&#34;got&nbsp;Neg(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7631064">,</span>&nbsp;<span class="ident" id="7631066">x</span><span class="op" id="7631067">,</span>&nbsp;<span class="ident" id="7631069">z</span><span class="op" id="7631070">,</span>&nbsp;<span class="ident" id="7631072">e</span><span class="op" id="7631073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631077">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631080">}</span><br>
<span class="lineno"></span><span class="op" id="7631082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="7631085">func</span>&nbsp;<span class="ident" id="7631090">TestRatInv</span><span class="op" id="7631100">(</span><span class="ident" id="7631101">t</span>&nbsp;<span class="op" id="7631103">*</span><span class="ident" id="7631104">testing</span><span class="op" id="7631111">.</span><span class="ident" id="7631112">T</span><span class="op" id="7631113">)</span>&nbsp;<span class="op" id="7631115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631118">zero</span>&nbsp;<span class="op" id="7631123">:=</span>&nbsp;<span class="builtinfunc" id="7631126">new</span><span class="op" id="7631129">(</span><span class="ident" id="7631130">Rat</span><span class="op" id="7631133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631136">for</span>&nbsp;<span class="ident" id="7631140">_</span><span class="op" id="7631141">,</span>&nbsp;<span class="ident" id="7631143">a</span>&nbsp;<span class="op" id="7631145">:=</span>&nbsp;<span class="keyword" id="7631148">range</span>&nbsp;<span class="ident" id="7631154">setStringTests</span>&nbsp;<span class="op" id="7631169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631173">x</span><span class="op" id="7631174">,</span>&nbsp;<span class="ident" id="7631176">ok</span>&nbsp;<span class="op" id="7631179">:=</span>&nbsp;<span class="builtinfunc" id="7631182">new</span><span class="op" id="7631185">(</span><span class="ident" id="7631186">Rat</span><span class="op" id="7631189">)</span><span class="op" id="7631190">.</span><span class="ident" id="7631191">SetString</span><span class="op" id="7631200">(</span><span class="ident" id="7631201">a</span><span class="op" id="7631202">.</span><span class="ident" id="7631203">in</span><span class="op" id="7631205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631209">if</span>&nbsp;<span class="op" id="7631212">!</span><span class="ident" id="7631213">ok</span>&nbsp;<span class="op" id="7631216">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631221">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631236">if</span>&nbsp;<span class="ident" id="7631239">x</span><span class="op" id="7631240">.</span><span class="ident" id="7631241">Cmp</span><span class="op" id="7631244">(</span><span class="ident" id="7631245">zero</span><span class="op" id="7631249">)</span>&nbsp;<span class="op" id="7631251">==</span>&nbsp;<span class="num" id="7631254">0</span>&nbsp;<span class="op" id="7631256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631261">continue</span>&nbsp;<span class="comment" id="7631270">//&nbsp;avoid&nbsp;division&nbsp;by&nbsp;zero</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631298">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631302">e</span>&nbsp;<span class="op" id="7631304">:=</span>&nbsp;<span class="builtinfunc" id="7631307">new</span><span class="op" id="7631310">(</span><span class="ident" id="7631311">Rat</span><span class="op" id="7631314">)</span><span class="op" id="7631315">.</span><span class="ident" id="7631316">SetFrac</span><span class="op" id="7631323">(</span><span class="ident" id="7631324">x</span><span class="op" id="7631325">.</span><span class="ident" id="7631326">Denom</span><span class="op" id="7631331">(</span><span class="op" id="7631332">)</span><span class="op" id="7631333">,</span>&nbsp;<span class="ident" id="7631335">x</span><span class="op" id="7631336">.</span><span class="ident" id="7631337">Num</span><span class="op" id="7631340">(</span><span class="op" id="7631341">)</span><span class="op" id="7631342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631346">z</span>&nbsp;<span class="op" id="7631348">:=</span>&nbsp;<span class="builtinfunc" id="7631351">new</span><span class="op" id="7631354">(</span><span class="ident" id="7631355">Rat</span><span class="op" id="7631358">)</span><span class="op" id="7631359">.</span><span class="ident" id="7631360">Inv</span><span class="op" id="7631363">(</span><span class="ident" id="7631364">x</span><span class="op" id="7631365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631369">if</span>&nbsp;<span class="ident" id="7631372">z</span><span class="op" id="7631373">.</span><span class="ident" id="7631374">Cmp</span><span class="op" id="7631377">(</span><span class="ident" id="7631378">e</span><span class="op" id="7631379">)</span>&nbsp;<span class="op" id="7631381">!=</span>&nbsp;<span class="num" id="7631384">0</span>&nbsp;<span class="op" id="7631386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631391">t</span><span class="op" id="7631392">.</span><span class="ident" id="7631393">Errorf</span><span class="op" id="7631399">(</span><span class="string" id="7631400">&#34;got&nbsp;Inv(%v)&nbsp;=&nbsp;%v;&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7631427">,</span>&nbsp;<span class="ident" id="7631429">x</span><span class="op" id="7631430">,</span>&nbsp;<span class="ident" id="7631432">z</span><span class="op" id="7631433">,</span>&nbsp;<span class="ident" id="7631435">e</span><span class="op" id="7631436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631440">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631443">}</span><br>
<span class="lineno"></span><span class="op" id="7631445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7631448">type</span>&nbsp;<span class="ident" id="7631453">ratBinFun</span>&nbsp;<span class="keyword" id="7631463">func</span><span class="op" id="7631467">(</span><span class="ident" id="7631468">z</span><span class="op" id="7631469">,</span>&nbsp;<span class="ident" id="7631471">x</span><span class="op" id="7631472">,</span>&nbsp;<span class="ident" id="7631474">y</span>&nbsp;<span class="op" id="7631476">*</span><span class="ident" id="7631477">Rat</span><span class="op" id="7631480">)</span>&nbsp;<span class="op" id="7631482">*</span><span class="ident" id="7631483">Rat</span><br>
<span class="lineno"></span><span class="keyword" id="7631487">type</span>&nbsp;<span class="ident" id="7631492">ratBinArg</span>&nbsp;<span class="keyword" id="7631502">struct</span>&nbsp;<span class="op" id="7631509">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631512">x</span><span class="op" id="7631513">,</span>&nbsp;<span class="ident" id="7631515">y</span><span class="op" id="7631516">,</span>&nbsp;<span class="ident" id="7631518">z</span>&nbsp;<span class="builtintype" id="7631520">string</span><br>
<span class="lineno"></span><span class="op" id="7631527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7631530">func</span>&nbsp;<span class="ident" id="7631535">testRatBin</span><span class="op" id="7631545">(</span><span class="ident" id="7631546">t</span>&nbsp;<span class="op" id="7631548">*</span><span class="ident" id="7631549">testing</span><span class="op" id="7631556">.</span><span class="ident" id="7631557">T</span><span class="op" id="7631558">,</span>&nbsp;<span class="ident" id="7631560">i</span>&nbsp;<span class="builtintype" id="7631562">int</span><span class="op" id="7631565">,</span>&nbsp;<span class="ident" id="7631567">name</span>&nbsp;<span class="builtintype" id="7631572">string</span><span class="op" id="7631578">,</span>&nbsp;<span class="ident" id="7631580">f</span>&nbsp;<span class="ident" id="7631582">ratBinFun</span><span class="op" id="7631591">,</span>&nbsp;<span class="ident" id="7631593">a</span>&nbsp;<span class="ident" id="7631595">ratBinArg</span><span class="op" id="7631604">)</span>&nbsp;<span class="op" id="7631606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631609">x</span><span class="op" id="7631610">,</span>&nbsp;<span class="ident" id="7631612">_</span>&nbsp;<span class="op" id="7631614">:=</span>&nbsp;<span class="builtinfunc" id="7631617">new</span><span class="op" id="7631620">(</span><span class="ident" id="7631621">Rat</span><span class="op" id="7631624">)</span><span class="op" id="7631625">.</span><span class="ident" id="7631626">SetString</span><span class="op" id="7631635">(</span><span class="ident" id="7631636">a</span><span class="op" id="7631637">.</span><span class="ident" id="7631638">x</span><span class="op" id="7631639">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631642">y</span><span class="op" id="7631643">,</span>&nbsp;<span class="ident" id="7631645">_</span>&nbsp;<span class="op" id="7631647">:=</span>&nbsp;<span class="builtinfunc" id="7631650">new</span><span class="op" id="7631653">(</span><span class="ident" id="7631654">Rat</span><span class="op" id="7631657">)</span><span class="op" id="7631658">.</span><span class="ident" id="7631659">SetString</span><span class="op" id="7631668">(</span><span class="ident" id="7631669">a</span><span class="op" id="7631670">.</span><span class="ident" id="7631671">y</span><span class="op" id="7631672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631675">z</span><span class="op" id="7631676">,</span>&nbsp;<span class="ident" id="7631678">_</span>&nbsp;<span class="op" id="7631680">:=</span>&nbsp;<span class="builtinfunc" id="7631683">new</span><span class="op" id="7631686">(</span><span class="ident" id="7631687">Rat</span><span class="op" id="7631690">)</span><span class="op" id="7631691">.</span><span class="ident" id="7631692">SetString</span><span class="op" id="7631701">(</span><span class="ident" id="7631702">a</span><span class="op" id="7631703">.</span><span class="ident" id="7631704">z</span><span class="op" id="7631705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631708">out</span>&nbsp;<span class="op" id="7631712">:=</span>&nbsp;<span class="ident" id="7631715">f</span><span class="op" id="7631716">(</span><span class="builtinfunc" id="7631717">new</span><span class="op" id="7631720">(</span><span class="ident" id="7631721">Rat</span><span class="op" id="7631724">)</span><span class="op" id="7631725">,</span>&nbsp;<span class="ident" id="7631727">x</span><span class="op" id="7631728">,</span>&nbsp;<span class="ident" id="7631730">y</span><span class="op" id="7631731">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7631735">if</span>&nbsp;<span class="ident" id="7631738">out</span><span class="op" id="7631741">.</span><span class="ident" id="7631742">Cmp</span><span class="op" id="7631745">(</span><span class="ident" id="7631746">z</span><span class="op" id="7631747">)</span>&nbsp;<span class="op" id="7631749">!=</span>&nbsp;<span class="num" id="7631752">0</span>&nbsp;<span class="op" id="7631754">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631758">t</span><span class="op" id="7631759">.</span><span class="ident" id="7631760">Errorf</span><span class="op" id="7631766">(</span><span class="string" id="7631767">&#34;%s&nbsp;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7631790">,</span>&nbsp;<span class="ident" id="7631792">name</span><span class="op" id="7631796">,</span>&nbsp;<span class="ident" id="7631798">i</span><span class="op" id="7631799">,</span>&nbsp;<span class="ident" id="7631801">out</span><span class="op" id="7631804">,</span>&nbsp;<span class="ident" id="7631806">z</span><span class="op" id="7631807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631810">}</span><br>
<span class="lineno"></span><span class="op" id="7631812">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7631815">var</span>&nbsp;<span class="ident" id="7631819">ratBinTests</span>&nbsp;<span class="op" id="7631831">=</span>&nbsp;<span class="op" id="7631833">[</span><span class="op" id="7631834">]</span><span class="keyword" id="7631835">struct</span>&nbsp;<span class="op" id="7631842">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631845">x</span><span class="op" id="7631846">,</span>&nbsp;<span class="ident" id="7631848">y</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7631855">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7631863">sum</span><span class="op" id="7631866">,</span>&nbsp;<span class="ident" id="7631868">prod</span>&nbsp;<span class="builtintype" id="7631873">string</span><br>
<span class="lineno"></span><span class="op" id="7631880">}</span><span class="op" id="7631881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631884">{</span><span class="string" id="7631885">&#34;0&#34;</span><span class="op" id="7631888">,</span>&nbsp;<span class="string" id="7631890">&#34;0&#34;</span><span class="op" id="7631893">,</span>&nbsp;<span class="string" id="7631895">&#34;0&#34;</span><span class="op" id="7631898">,</span>&nbsp;<span class="string" id="7631900">&#34;0&#34;</span><span class="op" id="7631903">}</span><span class="op" id="7631904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631907">{</span><span class="string" id="7631908">&#34;0&#34;</span><span class="op" id="7631911">,</span>&nbsp;<span class="string" id="7631913">&#34;1&#34;</span><span class="op" id="7631916">,</span>&nbsp;<span class="string" id="7631918">&#34;1&#34;</span><span class="op" id="7631921">,</span>&nbsp;<span class="string" id="7631923">&#34;0&#34;</span><span class="op" id="7631926">}</span><span class="op" id="7631927">,</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631930">{</span><span class="string" id="7631931">&#34;-1&#34;</span><span class="op" id="7631935">,</span>&nbsp;<span class="string" id="7631937">&#34;0&#34;</span><span class="op" id="7631940">,</span>&nbsp;<span class="string" id="7631942">&#34;-1&#34;</span><span class="op" id="7631946">,</span>&nbsp;<span class="string" id="7631948">&#34;0&#34;</span><span class="op" id="7631951">}</span><span class="op" id="7631952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631955">{</span><span class="string" id="7631956">&#34;-1&#34;</span><span class="op" id="7631960">,</span>&nbsp;<span class="string" id="7631962">&#34;1&#34;</span><span class="op" id="7631965">,</span>&nbsp;<span class="string" id="7631967">&#34;0&#34;</span><span class="op" id="7631970">,</span>&nbsp;<span class="string" id="7631972">&#34;-1&#34;</span><span class="op" id="7631976">}</span><span class="op" id="7631977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7631980">{</span><span class="string" id="7631981">&#34;1&#34;</span><span class="op" id="7631984">,</span>&nbsp;<span class="string" id="7631986">&#34;1&#34;</span><span class="op" id="7631989">,</span>&nbsp;<span class="string" id="7631991">&#34;2&#34;</span><span class="op" id="7631994">,</span>&nbsp;<span class="string" id="7631996">&#34;1&#34;</span><span class="op" id="7631999">}</span><span class="op" id="7632000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632003">{</span><span class="string" id="7632004">&#34;1/2&#34;</span><span class="op" id="7632009">,</span>&nbsp;<span class="string" id="7632011">&#34;1/2&#34;</span><span class="op" id="7632016">,</span>&nbsp;<span class="string" id="7632018">&#34;1&#34;</span><span class="op" id="7632021">,</span>&nbsp;<span class="string" id="7632023">&#34;1/4&#34;</span><span class="op" id="7632028">}</span><span class="op" id="7632029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632032">{</span><span class="string" id="7632033">&#34;1/4&#34;</span><span class="op" id="7632038">,</span>&nbsp;<span class="string" id="7632040">&#34;1/3&#34;</span><span class="op" id="7632045">,</span>&nbsp;<span class="string" id="7632047">&#34;7/12&#34;</span><span class="op" id="7632053">,</span>&nbsp;<span class="string" id="7632055">&#34;1/12&#34;</span><span class="op" id="7632061">}</span><span class="op" id="7632062">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632065">{</span><span class="string" id="7632066">&#34;2/5&#34;</span><span class="op" id="7632071">,</span>&nbsp;<span class="string" id="7632073">&#34;-14/3&#34;</span><span class="op" id="7632080">,</span>&nbsp;<span class="string" id="7632082">&#34;-64/15&#34;</span><span class="op" id="7632090">,</span>&nbsp;<span class="string" id="7632092">&#34;-28/15&#34;</span><span class="op" id="7632100">}</span><span class="op" id="7632101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632104">{</span><span class="string" id="7632105">&#34;4707/49292519774798173060&#34;</span><span class="op" id="7632132">,</span>&nbsp;<span class="string" id="7632134">&#34;-3367/70976135186689855734&#34;</span><span class="op" id="7632162">,</span>&nbsp;<span class="string" id="7632164">&#34;84058377121001851123459/1749296273614329067191168098769082663020&#34;</span><span class="op" id="7632230">,</span>&nbsp;<span class="string" id="7632232">&#34;-1760941/388732505247628681598037355282018369560&#34;</span><span class="op" id="7632282">}</span><span class="op" id="7632283">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632286">{</span><span class="string" id="7632287">&#34;-61204110018146728334/3&#34;</span><span class="op" id="7632312">,</span>&nbsp;<span class="string" id="7632314">&#34;-31052192278051565633/2&#34;</span><span class="op" id="7632339">,</span>&nbsp;<span class="string" id="7632341">&#34;-215564796870448153567/6&#34;</span><span class="op" id="7632367">,</span>&nbsp;<span class="string" id="7632369">&#34;950260896245257153059642991192710872711/3&#34;</span><span class="op" id="7632412">}</span><span class="op" id="7632413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632416">{</span><span class="string" id="7632417">&#34;-854857841473707320655/4237645934602118692642972629634714039&#34;</span><span class="op" id="7632479">,</span>&nbsp;<span class="string" id="7632481">&#34;-18/31750379913563777419&#34;</span><span class="op" id="7632507">,</span>&nbsp;<span class="string" id="7632509">&#34;-27/133467566250814981&#34;</span><span class="op" id="7632533">,</span>&nbsp;<span class="string" id="7632535">&#34;15387441146526731771790/134546868362786310073779084329032722548987800600710485341&#34;</span><span class="op" id="7632618">}</span><span class="op" id="7632619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632622">{</span><span class="string" id="7632623">&#34;618575745270541348005638912139/19198433543745179392300736&#34;</span><span class="op" id="7632682">,</span>&nbsp;<span class="string" id="7632684">&#34;-19948846211000086/637313996471&#34;</span><span class="op" id="7632717">,</span>&nbsp;<span class="string" id="7632719">&#34;27674141753240653/30123979153216&#34;</span><span class="op" id="7632753">,</span>&nbsp;<span class="string" id="7632755">&#34;-6169936206128396568797607742807090270137721977/6117715203873571641674006593837351328&#34;</span><span class="op" id="7632842">}</span><span class="op" id="7632843">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7632846">{</span><span class="string" id="7632847">&#34;-3/26206484091896184128&#34;</span><span class="op" id="7632872">,</span>&nbsp;<span class="string" id="7632874">&#34;5/2848423294177090248&#34;</span><span class="op" id="7632897">,</span>&nbsp;<span class="string" id="7632899">&#34;15310893822118706237/9330894968229805033368778458685147968&#34;</span><span class="op" id="7632959">,</span>&nbsp;<span class="string" id="7632961">&#34;-5/24882386581946146755650075889827061248&#34;</span><span class="op" id="7633004">}</span><span class="op" id="7633005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633008">{</span><span class="string" id="7633009">&#34;26946729/330400702820&#34;</span><span class="op" id="7633032">,</span>&nbsp;<span class="string" id="7633034">&#34;41563965/225583428284&#34;</span><span class="op" id="7633057">,</span>&nbsp;<span class="string" id="7633059">&#34;1238218672302860271/4658307703098666660055&#34;</span><span class="op" id="7633103">,</span>&nbsp;<span class="string" id="7633105">&#34;224002580204097/14906584649915733312176&#34;</span><span class="op" id="7633146">}</span><span class="op" id="7633147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633150">{</span><span class="string" id="7633151">&#34;-8259900599013409474/7&#34;</span><span class="op" id="7633175">,</span>&nbsp;<span class="string" id="7633177">&#34;-84829337473700364773/56707961321161574960&#34;</span><span class="op" id="7633221">,</span>&nbsp;<span class="string" id="7633223">&#34;-468402123685491748914621885145127724451/396955729248131024720&#34;</span><span class="op" id="7633287">,</span>&nbsp;<span class="string" id="7633289">&#34;350340947706464153265156004876107029701/198477864624065512360&#34;</span><span class="op" id="7633352">}</span><span class="op" id="7633353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633356">{</span><span class="string" id="7633357">&#34;575775209696864/1320203974639986246357&#34;</span><span class="op" id="7633397">,</span>&nbsp;<span class="string" id="7633399">&#34;29/712593081308&#34;</span><span class="op" id="7633416">,</span>&nbsp;<span class="string" id="7633418">&#34;410331716733912717985762465/940768218243776489278275419794956&#34;</span><span class="op" id="7633481">,</span>&nbsp;<span class="string" id="7633483">&#34;808/45524274987585732633&#34;</span><span class="op" id="7633509">}</span><span class="op" id="7633510">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633513">{</span><span class="string" id="7633514">&#34;1786597389946320496771/2066653520653241&#34;</span><span class="op" id="7633555">,</span>&nbsp;<span class="string" id="7633557">&#34;6269770/1992362624741777&#34;</span><span class="op" id="7633583">,</span>&nbsp;<span class="string" id="7633585">&#34;3559549865190272133656109052308126637/4117523232840525481453983149257&#34;</span><span class="op" id="7633656">,</span>&nbsp;<span class="string" id="7633658">&#34;8967230/3296219033&#34;</span><span class="op" id="7633678">}</span><span class="op" id="7633679">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7633682">{</span><span class="string" id="7633683">&#34;-36459180403360509753/32150500941194292113930&#34;</span><span class="op" id="7633730">,</span>&nbsp;<span class="string" id="7633732">&#34;9381566963714/9633539&#34;</span><span class="op" id="7633755">,</span>&nbsp;<span class="string" id="7633757">&#34;301622077145533298008420642898530153/309723104686531919656937098270&#34;</span><span class="op" id="7633826">,</span>&nbsp;<span class="string" id="7633828">&#34;-3784609207827/3426986245&#34;</span><span class="op" id="7633855">}</span><span class="op" id="7633856">,</span><br>
<span class="lineno"></span><span class="op" id="7633858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7633861">func</span>&nbsp;<span class="ident" id="7633866">TestRatBin</span><span class="op" id="7633876">(</span><span class="ident" id="7633877">t</span>&nbsp;<span class="op" id="7633879">*</span><span class="ident" id="7633880">testing</span><span class="op" id="7633887">.</span><span class="ident" id="7633888">T</span><span class="op" id="7633889">)</span>&nbsp;<span class="op" id="7633891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7633894">for</span>&nbsp;<span class="ident" id="7633898">i</span><span class="op" id="7633899">,</span>&nbsp;<span class="ident" id="7633901">test</span>&nbsp;<span class="op" id="7633906">:=</span>&nbsp;<span class="keyword" id="7633909">range</span>&nbsp;<span class="ident" id="7633915">ratBinTests</span>&nbsp;<span class="op" id="7633927">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633931">arg</span>&nbsp;<span class="op" id="7633935">:=</span>&nbsp;<span class="ident" id="7633938">ratBinArg</span><span class="op" id="7633947">{</span><span class="ident" id="7633948">test</span><span class="op" id="7633952">.</span><span class="ident" id="7633953">x</span><span class="op" id="7633954">,</span>&nbsp;<span class="ident" id="7633956">test</span><span class="op" id="7633960">.</span><span class="ident" id="7633961">y</span><span class="op" id="7633962">,</span>&nbsp;<span class="ident" id="7633964">test</span><span class="op" id="7633968">.</span><span class="ident" id="7633969">sum</span><span class="op" id="7633972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7633976">testRatBin</span><span class="op" id="7633986">(</span><span class="ident" id="7633987">t</span><span class="op" id="7633988">,</span>&nbsp;<span class="ident" id="7633990">i</span><span class="op" id="7633991">,</span>&nbsp;<span class="string" id="7633993">&#34;Add&#34;</span><span class="op" id="7633998">,</span>&nbsp;<span class="op" id="7634000">(</span><span class="op" id="7634001">*</span><span class="ident" id="7634002">Rat</span><span class="op" id="7634005">)</span><span class="op" id="7634006">.</span><span class="ident" id="7634007">Add</span><span class="op" id="7634010">,</span>&nbsp;<span class="ident" id="7634012">arg</span><span class="op" id="7634015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634020">arg</span>&nbsp;<span class="op" id="7634024">=</span>&nbsp;<span class="ident" id="7634026">ratBinArg</span><span class="op" id="7634035">{</span><span class="ident" id="7634036">test</span><span class="op" id="7634040">.</span><span class="ident" id="7634041">y</span><span class="op" id="7634042">,</span>&nbsp;<span class="ident" id="7634044">test</span><span class="op" id="7634048">.</span><span class="ident" id="7634049">x</span><span class="op" id="7634050">,</span>&nbsp;<span class="ident" id="7634052">test</span><span class="op" id="7634056">.</span><span class="ident" id="7634057">sum</span><span class="op" id="7634060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634064">testRatBin</span><span class="op" id="7634074">(</span><span class="ident" id="7634075">t</span><span class="op" id="7634076">,</span>&nbsp;<span class="ident" id="7634078">i</span><span class="op" id="7634079">,</span>&nbsp;<span class="string" id="7634081">&#34;Add&nbsp;symmetric&#34;</span><span class="op" id="7634096">,</span>&nbsp;<span class="op" id="7634098">(</span><span class="op" id="7634099">*</span><span class="ident" id="7634100">Rat</span><span class="op" id="7634103">)</span><span class="op" id="7634104">.</span><span class="ident" id="7634105">Add</span><span class="op" id="7634108">,</span>&nbsp;<span class="ident" id="7634110">arg</span><span class="op" id="7634113">)</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634118">arg</span>&nbsp;<span class="op" id="7634122">=</span>&nbsp;<span class="ident" id="7634124">ratBinArg</span><span class="op" id="7634133">{</span><span class="ident" id="7634134">test</span><span class="op" id="7634138">.</span><span class="ident" id="7634139">sum</span><span class="op" id="7634142">,</span>&nbsp;<span class="ident" id="7634144">test</span><span class="op" id="7634148">.</span><span class="ident" id="7634149">x</span><span class="op" id="7634150">,</span>&nbsp;<span class="ident" id="7634152">test</span><span class="op" id="7634156">.</span><span class="ident" id="7634157">y</span><span class="op" id="7634158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634162">testRatBin</span><span class="op" id="7634172">(</span><span class="ident" id="7634173">t</span><span class="op" id="7634174">,</span>&nbsp;<span class="ident" id="7634176">i</span><span class="op" id="7634177">,</span>&nbsp;<span class="string" id="7634179">&#34;Sub&#34;</span><span class="op" id="7634184">,</span>&nbsp;<span class="op" id="7634186">(</span><span class="op" id="7634187">*</span><span class="ident" id="7634188">Rat</span><span class="op" id="7634191">)</span><span class="op" id="7634192">.</span><span class="ident" id="7634193">Sub</span><span class="op" id="7634196">,</span>&nbsp;<span class="ident" id="7634198">arg</span><span class="op" id="7634201">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634206">arg</span>&nbsp;<span class="op" id="7634210">=</span>&nbsp;<span class="ident" id="7634212">ratBinArg</span><span class="op" id="7634221">{</span><span class="ident" id="7634222">test</span><span class="op" id="7634226">.</span><span class="ident" id="7634227">sum</span><span class="op" id="7634230">,</span>&nbsp;<span class="ident" id="7634232">test</span><span class="op" id="7634236">.</span><span class="ident" id="7634237">y</span><span class="op" id="7634238">,</span>&nbsp;<span class="ident" id="7634240">test</span><span class="op" id="7634244">.</span><span class="ident" id="7634245">x</span><span class="op" id="7634246">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634250">testRatBin</span><span class="op" id="7634260">(</span><span class="ident" id="7634261">t</span><span class="op" id="7634262">,</span>&nbsp;<span class="ident" id="7634264">i</span><span class="op" id="7634265">,</span>&nbsp;<span class="string" id="7634267">&#34;Sub&nbsp;symmetric&#34;</span><span class="op" id="7634282">,</span>&nbsp;<span class="op" id="7634284">(</span><span class="op" id="7634285">*</span><span class="ident" id="7634286">Rat</span><span class="op" id="7634289">)</span><span class="op" id="7634290">.</span><span class="ident" id="7634291">Sub</span><span class="op" id="7634294">,</span>&nbsp;<span class="ident" id="7634296">arg</span><span class="op" id="7634299">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634304">arg</span>&nbsp;<span class="op" id="7634308">=</span>&nbsp;<span class="ident" id="7634310">ratBinArg</span><span class="op" id="7634319">{</span><span class="ident" id="7634320">test</span><span class="op" id="7634324">.</span><span class="ident" id="7634325">x</span><span class="op" id="7634326">,</span>&nbsp;<span class="ident" id="7634328">test</span><span class="op" id="7634332">.</span><span class="ident" id="7634333">y</span><span class="op" id="7634334">,</span>&nbsp;<span class="ident" id="7634336">test</span><span class="op" id="7634340">.</span><span class="ident" id="7634341">prod</span><span class="op" id="7634345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634349">testRatBin</span><span class="op" id="7634359">(</span><span class="ident" id="7634360">t</span><span class="op" id="7634361">,</span>&nbsp;<span class="ident" id="7634363">i</span><span class="op" id="7634364">,</span>&nbsp;<span class="string" id="7634366">&#34;Mul&#34;</span><span class="op" id="7634371">,</span>&nbsp;<span class="op" id="7634373">(</span><span class="op" id="7634374">*</span><span class="ident" id="7634375">Rat</span><span class="op" id="7634378">)</span><span class="op" id="7634379">.</span><span class="ident" id="7634380">Mul</span><span class="op" id="7634383">,</span>&nbsp;<span class="ident" id="7634385">arg</span><span class="op" id="7634388">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634393">arg</span>&nbsp;<span class="op" id="7634397">=</span>&nbsp;<span class="ident" id="7634399">ratBinArg</span><span class="op" id="7634408">{</span><span class="ident" id="7634409">test</span><span class="op" id="7634413">.</span><span class="ident" id="7634414">y</span><span class="op" id="7634415">,</span>&nbsp;<span class="ident" id="7634417">test</span><span class="op" id="7634421">.</span><span class="ident" id="7634422">x</span><span class="op" id="7634423">,</span>&nbsp;<span class="ident" id="7634425">test</span><span class="op" id="7634429">.</span><span class="ident" id="7634430">prod</span><span class="op" id="7634434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634438">testRatBin</span><span class="op" id="7634448">(</span><span class="ident" id="7634449">t</span><span class="op" id="7634450">,</span>&nbsp;<span class="ident" id="7634452">i</span><span class="op" id="7634453">,</span>&nbsp;<span class="string" id="7634455">&#34;Mul&nbsp;symmetric&#34;</span><span class="op" id="7634470">,</span>&nbsp;<span class="op" id="7634472">(</span><span class="op" id="7634473">*</span><span class="ident" id="7634474">Rat</span><span class="op" id="7634477">)</span><span class="op" id="7634478">.</span><span class="ident" id="7634479">Mul</span><span class="op" id="7634482">,</span>&nbsp;<span class="ident" id="7634484">arg</span><span class="op" id="7634487">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7634492">if</span>&nbsp;<span class="ident" id="7634495">test</span><span class="op" id="7634499">.</span><span class="ident" id="7634500">x</span>&nbsp;<span class="op" id="7634502">!=</span>&nbsp;<span class="string" id="7634505">&#34;0&#34;</span>&nbsp;<span class="op" id="7634509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634514">arg</span>&nbsp;<span class="op" id="7634518">=</span>&nbsp;<span class="ident" id="7634520">ratBinArg</span><span class="op" id="7634529">{</span><span class="ident" id="7634530">test</span><span class="op" id="7634534">.</span><span class="ident" id="7634535">prod</span><span class="op" id="7634539">,</span>&nbsp;<span class="ident" id="7634541">test</span><span class="op" id="7634545">.</span><span class="ident" id="7634546">x</span><span class="op" id="7634547">,</span>&nbsp;<span class="ident" id="7634549">test</span><span class="op" id="7634553">.</span><span class="ident" id="7634554">y</span><span class="op" id="7634555">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634560">testRatBin</span><span class="op" id="7634570">(</span><span class="ident" id="7634571">t</span><span class="op" id="7634572">,</span>&nbsp;<span class="ident" id="7634574">i</span><span class="op" id="7634575">,</span>&nbsp;<span class="string" id="7634577">&#34;Quo&#34;</span><span class="op" id="7634582">,</span>&nbsp;<span class="op" id="7634584">(</span><span class="op" id="7634585">*</span><span class="ident" id="7634586">Rat</span><span class="op" id="7634589">)</span><span class="op" id="7634590">.</span><span class="ident" id="7634591">Quo</span><span class="op" id="7634594">,</span>&nbsp;<span class="ident" id="7634596">arg</span><span class="op" id="7634599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7634603">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7634608">if</span>&nbsp;<span class="ident" id="7634611">test</span><span class="op" id="7634615">.</span><span class="ident" id="7634616">y</span>&nbsp;<span class="op" id="7634618">!=</span>&nbsp;<span class="string" id="7634621">&#34;0&#34;</span>&nbsp;<span class="op" id="7634625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634630">arg</span>&nbsp;<span class="op" id="7634634">=</span>&nbsp;<span class="ident" id="7634636">ratBinArg</span><span class="op" id="7634645">{</span><span class="ident" id="7634646">test</span><span class="op" id="7634650">.</span><span class="ident" id="7634651">prod</span><span class="op" id="7634655">,</span>&nbsp;<span class="ident" id="7634657">test</span><span class="op" id="7634661">.</span><span class="ident" id="7634662">y</span><span class="op" id="7634663">,</span>&nbsp;<span class="ident" id="7634665">test</span><span class="op" id="7634669">.</span><span class="ident" id="7634670">x</span><span class="op" id="7634671">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634676">testRatBin</span><span class="op" id="7634686">(</span><span class="ident" id="7634687">t</span><span class="op" id="7634688">,</span>&nbsp;<span class="ident" id="7634690">i</span><span class="op" id="7634691">,</span>&nbsp;<span class="string" id="7634693">&#34;Quo&nbsp;symmetric&#34;</span><span class="op" id="7634708">,</span>&nbsp;<span class="op" id="7634710">(</span><span class="op" id="7634711">*</span><span class="ident" id="7634712">Rat</span><span class="op" id="7634715">)</span><span class="op" id="7634716">.</span><span class="ident" id="7634717">Quo</span><span class="op" id="7634720">,</span>&nbsp;<span class="ident" id="7634722">arg</span><span class="op" id="7634725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7634729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7634732">}</span><br>
<span class="lineno"></span><span class="op" id="7634734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7634737">func</span>&nbsp;<span class="ident" id="7634742">TestIssue820</span><span class="op" id="7634754">(</span><span class="ident" id="7634755">t</span>&nbsp;<span class="op" id="7634757">*</span><span class="ident" id="7634758">testing</span><span class="op" id="7634765">.</span><span class="ident" id="7634766">T</span><span class="op" id="7634767">)</span>&nbsp;<span class="op" id="7634769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634772">x</span>&nbsp;<span class="op" id="7634774">:=</span>&nbsp;<span class="ident" id="7634777">NewRat</span><span class="op" id="7634783">(</span><span class="num" id="7634784">3</span><span class="op" id="7634785">,</span>&nbsp;<span class="num" id="7634787">1</span><span class="op" id="7634788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634791">y</span>&nbsp;<span class="op" id="7634793">:=</span>&nbsp;<span class="ident" id="7634796">NewRat</span><span class="op" id="7634802">(</span><span class="num" id="7634803">2</span><span class="op" id="7634804">,</span>&nbsp;<span class="num" id="7634806">1</span><span class="op" id="7634807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634810">z</span>&nbsp;<span class="op" id="7634812">:=</span>&nbsp;<span class="ident" id="7634815">y</span><span class="op" id="7634816">.</span><span class="ident" id="7634817">Quo</span><span class="op" id="7634820">(</span><span class="ident" id="7634821">x</span><span class="op" id="7634822">,</span>&nbsp;<span class="ident" id="7634824">y</span><span class="op" id="7634825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634828">q</span>&nbsp;<span class="op" id="7634830">:=</span>&nbsp;<span class="ident" id="7634833">NewRat</span><span class="op" id="7634839">(</span><span class="num" id="7634840">3</span><span class="op" id="7634841">,</span>&nbsp;<span class="num" id="7634843">2</span><span class="op" id="7634844">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7634847">if</span>&nbsp;<span class="ident" id="7634850">z</span><span class="op" id="7634851">.</span><span class="ident" id="7634852">Cmp</span><span class="op" id="7634855">(</span><span class="ident" id="7634856">q</span><span class="op" id="7634857">)</span>&nbsp;<span class="op" id="7634859">!=</span>&nbsp;<span class="num" id="7634862">0</span>&nbsp;<span class="op" id="7634864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634868">t</span><span class="op" id="7634869">.</span><span class="ident" id="7634870">Errorf</span><span class="op" id="7634876">(</span><span class="string" id="7634877">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7634893">,</span>&nbsp;<span class="ident" id="7634895">z</span><span class="op" id="7634896">,</span>&nbsp;<span class="ident" id="7634898">q</span><span class="op" id="7634899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7634902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634906">y</span>&nbsp;<span class="op" id="7634908">=</span>&nbsp;<span class="ident" id="7634910">NewRat</span><span class="op" id="7634916">(</span><span class="num" id="7634917">3</span><span class="op" id="7634918">,</span>&nbsp;<span class="num" id="7634920">1</span><span class="op" id="7634921">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634924">x</span>&nbsp;<span class="op" id="7634926">=</span>&nbsp;<span class="ident" id="7634928">NewRat</span><span class="op" id="7634934">(</span><span class="num" id="7634935">2</span><span class="op" id="7634936">,</span>&nbsp;<span class="num" id="7634938">1</span><span class="op" id="7634939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634942">z</span>&nbsp;<span class="op" id="7634944">=</span>&nbsp;<span class="ident" id="7634946">y</span><span class="op" id="7634947">.</span><span class="ident" id="7634948">Quo</span><span class="op" id="7634951">(</span><span class="ident" id="7634952">x</span><span class="op" id="7634953">,</span>&nbsp;<span class="ident" id="7634955">y</span><span class="op" id="7634956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634959">q</span>&nbsp;<span class="op" id="7634961">=</span>&nbsp;<span class="ident" id="7634963">NewRat</span><span class="op" id="7634969">(</span><span class="num" id="7634970">2</span><span class="op" id="7634971">,</span>&nbsp;<span class="num" id="7634973">3</span><span class="op" id="7634974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7634977">if</span>&nbsp;<span class="ident" id="7634980">z</span><span class="op" id="7634981">.</span><span class="ident" id="7634982">Cmp</span><span class="op" id="7634985">(</span><span class="ident" id="7634986">q</span><span class="op" id="7634987">)</span>&nbsp;<span class="op" id="7634989">!=</span>&nbsp;<span class="num" id="7634992">0</span>&nbsp;<span class="op" id="7634994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7634998">t</span><span class="op" id="7634999">.</span><span class="ident" id="7635000">Errorf</span><span class="op" id="7635006">(</span><span class="string" id="7635007">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7635023">,</span>&nbsp;<span class="ident" id="7635025">z</span><span class="op" id="7635026">,</span>&nbsp;<span class="ident" id="7635028">q</span><span class="op" id="7635029">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635036">x</span>&nbsp;<span class="op" id="7635038">=</span>&nbsp;<span class="ident" id="7635040">NewRat</span><span class="op" id="7635046">(</span><span class="num" id="7635047">3</span><span class="op" id="7635048">,</span>&nbsp;<span class="num" id="7635050">1</span><span class="op" id="7635051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635054">z</span>&nbsp;<span class="op" id="7635056">=</span>&nbsp;<span class="ident" id="7635058">x</span><span class="op" id="7635059">.</span><span class="ident" id="7635060">Quo</span><span class="op" id="7635063">(</span><span class="ident" id="7635064">x</span><span class="op" id="7635065">,</span>&nbsp;<span class="ident" id="7635067">x</span><span class="op" id="7635068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635071">q</span>&nbsp;<span class="op" id="7635073">=</span>&nbsp;<span class="ident" id="7635075">NewRat</span><span class="op" id="7635081">(</span><span class="num" id="7635082">3</span><span class="op" id="7635083">,</span>&nbsp;<span class="num" id="7635085">3</span><span class="op" id="7635086">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635089">if</span>&nbsp;<span class="ident" id="7635092">z</span><span class="op" id="7635093">.</span><span class="ident" id="7635094">Cmp</span><span class="op" id="7635097">(</span><span class="ident" id="7635098">q</span><span class="op" id="7635099">)</span>&nbsp;<span class="op" id="7635101">!=</span>&nbsp;<span class="num" id="7635104">0</span>&nbsp;<span class="op" id="7635106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635110">t</span><span class="op" id="7635111">.</span><span class="ident" id="7635112">Errorf</span><span class="op" id="7635118">(</span><span class="string" id="7635119">&#34;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7635135">,</span>&nbsp;<span class="ident" id="7635137">z</span><span class="op" id="7635138">,</span>&nbsp;<span class="ident" id="7635140">q</span><span class="op" id="7635141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635144">}</span><br>
<span class="lineno"></span><span class="op" id="7635146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="7635149">var</span>&nbsp;<span class="ident" id="7635153">setFrac64Tests</span>&nbsp;<span class="op" id="7635168">=</span>&nbsp;<span class="op" id="7635170">[</span><span class="op" id="7635171">]</span><span class="keyword" id="7635172">struct</span>&nbsp;<span class="op" id="7635179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635182">a</span><span class="op" id="7635183">,</span>&nbsp;<span class="ident" id="7635185">b</span>&nbsp;<span class="ident" id="7635187">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635194">out</span>&nbsp;&nbsp;<span class="builtintype" id="7635199">string</span><br>
<span class="lineno"></span><span class="op" id="7635206">}</span><span class="op" id="7635207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635210">{</span><span class="num" id="7635211">0</span><span class="op" id="7635212">,</span>&nbsp;<span class="num" id="7635214">1</span><span class="op" id="7635215">,</span>&nbsp;<span class="string" id="7635217">&#34;0&#34;</span><span class="op" id="7635220">}</span><span class="op" id="7635221">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635224">{</span><span class="num" id="7635225">0</span><span class="op" id="7635226">,</span>&nbsp;<span class="op" id="7635228">-</span><span class="num" id="7635229">1</span><span class="op" id="7635230">,</span>&nbsp;<span class="string" id="7635232">&#34;0&#34;</span><span class="op" id="7635235">}</span><span class="op" id="7635236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635239">{</span><span class="num" id="7635240">1</span><span class="op" id="7635241">,</span>&nbsp;<span class="num" id="7635243">1</span><span class="op" id="7635244">,</span>&nbsp;<span class="string" id="7635246">&#34;1&#34;</span><span class="op" id="7635249">}</span><span class="op" id="7635250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635253">{</span><span class="op" id="7635254">-</span><span class="num" id="7635255">1</span><span class="op" id="7635256">,</span>&nbsp;<span class="num" id="7635258">1</span><span class="op" id="7635259">,</span>&nbsp;<span class="string" id="7635261">&#34;-1&#34;</span><span class="op" id="7635265">}</span><span class="op" id="7635266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635269">{</span><span class="num" id="7635270">1</span><span class="op" id="7635271">,</span>&nbsp;<span class="op" id="7635273">-</span><span class="num" id="7635274">1</span><span class="op" id="7635275">,</span>&nbsp;<span class="string" id="7635277">&#34;-1&#34;</span><span class="op" id="7635281">}</span><span class="op" id="7635282">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635285">{</span><span class="op" id="7635286">-</span><span class="num" id="7635287">1</span><span class="op" id="7635288">,</span>&nbsp;<span class="op" id="7635290">-</span><span class="num" id="7635291">1</span><span class="op" id="7635292">,</span>&nbsp;<span class="string" id="7635294">&#34;1&#34;</span><span class="op" id="7635297">}</span><span class="op" id="7635298">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635301">{</span><span class="op" id="7635302">-</span><span class="num" id="7635303">9223372036854775808</span><span class="op" id="7635322">,</span>&nbsp;<span class="op" id="7635324">-</span><span class="num" id="7635325">9223372036854775808</span><span class="op" id="7635344">,</span>&nbsp;<span class="string" id="7635346">&#34;1&#34;</span><span class="op" id="7635349">}</span><span class="op" id="7635350">,</span><br>
<span class="lineno"></span><span class="op" id="7635352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7635355">func</span>&nbsp;<span class="ident" id="7635360">TestRatSetFrac64Rat</span><span class="op" id="7635379">(</span><span class="ident" id="7635380">t</span>&nbsp;<span class="op" id="7635382">*</span><span class="ident" id="7635383">testing</span><span class="op" id="7635390">.</span><span class="ident" id="7635391">T</span><span class="op" id="7635392">)</span>&nbsp;<span class="op" id="7635394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635397">for</span>&nbsp;<span class="ident" id="7635401">i</span><span class="op" id="7635402">,</span>&nbsp;<span class="ident" id="7635404">test</span>&nbsp;<span class="op" id="7635409">:=</span>&nbsp;<span class="keyword" id="7635412">range</span>&nbsp;<span class="ident" id="7635418">setFrac64Tests</span>&nbsp;<span class="op" id="7635433">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635437">x</span>&nbsp;<span class="op" id="7635439">:=</span>&nbsp;<span class="builtinfunc" id="7635442">new</span><span class="op" id="7635445">(</span><span class="ident" id="7635446">Rat</span><span class="op" id="7635449">)</span><span class="op" id="7635450">.</span><span class="ident" id="7635451">SetFrac64</span><span class="op" id="7635460">(</span><span class="ident" id="7635461">test</span><span class="op" id="7635465">.</span><span class="ident" id="7635466">a</span><span class="op" id="7635467">,</span>&nbsp;<span class="ident" id="7635469">test</span><span class="op" id="7635473">.</span><span class="ident" id="7635474">b</span><span class="op" id="7635475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635479">if</span>&nbsp;<span class="ident" id="7635482">x</span><span class="op" id="7635483">.</span><span class="ident" id="7635484">RatString</span><span class="op" id="7635493">(</span><span class="op" id="7635494">)</span>&nbsp;<span class="op" id="7635496">!=</span>&nbsp;<span class="ident" id="7635499">test</span><span class="op" id="7635503">.</span><span class="ident" id="7635504">out</span>&nbsp;<span class="op" id="7635508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635513">t</span><span class="op" id="7635514">.</span><span class="ident" id="7635515">Errorf</span><span class="op" id="7635521">(</span><span class="string" id="7635522">&#34;#%d&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7635542">,</span>&nbsp;<span class="ident" id="7635544">i</span><span class="op" id="7635545">,</span>&nbsp;<span class="ident" id="7635547">x</span><span class="op" id="7635548">.</span><span class="ident" id="7635549">RatString</span><span class="op" id="7635558">(</span><span class="op" id="7635559">)</span><span class="op" id="7635560">,</span>&nbsp;<span class="ident" id="7635562">test</span><span class="op" id="7635566">.</span><span class="ident" id="7635567">out</span><span class="op" id="7635570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635574">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635577">}</span><br>
<span class="lineno">390</span><span class="op" id="7635579">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7635582">func</span>&nbsp;<span class="ident" id="7635587">TestRatGobEncoding</span><span class="op" id="7635605">(</span><span class="ident" id="7635606">t</span>&nbsp;<span class="op" id="7635608">*</span><span class="ident" id="7635609">testing</span><span class="op" id="7635616">.</span><span class="ident" id="7635617">T</span><span class="op" id="7635618">)</span>&nbsp;<span class="op" id="7635620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635623">var</span>&nbsp;<span class="ident" id="7635627">medium</span>&nbsp;<span class="ident" id="7635634">bytes</span><span class="op" id="7635639">.</span><span class="ident" id="7635640">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635648">enc</span>&nbsp;<span class="op" id="7635652">:=</span>&nbsp;<span class="ident" id="7635655">gob</span><span class="op" id="7635658">.</span><span class="ident" id="7635659">NewEncoder</span><span class="op" id="7635669">(</span><span class="op" id="7635670">&amp;</span><span class="ident" id="7635671">medium</span><span class="op" id="7635677">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635680">dec</span>&nbsp;<span class="op" id="7635684">:=</span>&nbsp;<span class="ident" id="7635687">gob</span><span class="op" id="7635690">.</span><span class="ident" id="7635691">NewDecoder</span><span class="op" id="7635701">(</span><span class="op" id="7635702">&amp;</span><span class="ident" id="7635703">medium</span><span class="op" id="7635709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635712">for</span>&nbsp;<span class="ident" id="7635716">_</span><span class="op" id="7635717">,</span>&nbsp;<span class="ident" id="7635719">test</span>&nbsp;<span class="op" id="7635724">:=</span>&nbsp;<span class="keyword" id="7635727">range</span>&nbsp;<span class="ident" id="7635733">encodingTests</span>&nbsp;<span class="op" id="7635747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635751">medium</span><span class="op" id="7635757">.</span><span class="ident" id="7635758">Reset</span><span class="op" id="7635763">(</span><span class="op" id="7635764">)</span>&nbsp;<span class="comment" id="7635766">//&nbsp;empty&nbsp;buffer&nbsp;for&nbsp;each&nbsp;test&nbsp;case&nbsp;(in&nbsp;case&nbsp;of&nbsp;failures)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635825">var</span>&nbsp;<span class="ident" id="7635829">tx</span>&nbsp;<span class="ident" id="7635832">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635838">tx</span><span class="op" id="7635840">.</span><span class="ident" id="7635841">SetString</span><span class="op" id="7635850">(</span><span class="ident" id="7635851">test</span>&nbsp;<span class="op" id="7635856">+</span>&nbsp;<span class="string" id="7635858">&#34;.14159265&#34;</span><span class="op" id="7635869">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635873">if</span>&nbsp;<span class="ident" id="7635876">err</span>&nbsp;<span class="op" id="7635880">:=</span>&nbsp;<span class="ident" id="7635883">enc</span><span class="op" id="7635886">.</span><span class="ident" id="7635887">Encode</span><span class="op" id="7635893">(</span><span class="op" id="7635894">&amp;</span><span class="ident" id="7635895">tx</span><span class="op" id="7635897">)</span><span class="op" id="7635898">;</span>&nbsp;<span class="ident" id="7635900">err</span>&nbsp;<span class="op" id="7635904">!=</span>&nbsp;<span class="builtintype" id="7635907">nil</span>&nbsp;<span class="op" id="7635911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7635916">t</span><span class="op" id="7635917">.</span><span class="ident" id="7635918">Errorf</span><span class="op" id="7635924">(</span><span class="string" id="7635925">&#34;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7635952">,</span>&nbsp;<span class="op" id="7635954">&amp;</span><span class="ident" id="7635955">tx</span><span class="op" id="7635957">,</span>&nbsp;<span class="ident" id="7635959">err</span><span class="op" id="7635962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7635966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635970">var</span>&nbsp;<span class="ident" id="7635974">rx</span>&nbsp;<span class="ident" id="7635977">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7635983">if</span>&nbsp;<span class="ident" id="7635986">err</span>&nbsp;<span class="op" id="7635990">:=</span>&nbsp;<span class="ident" id="7635993">dec</span><span class="op" id="7635996">.</span><span class="ident" id="7635997">Decode</span><span class="op" id="7636003">(</span><span class="op" id="7636004">&amp;</span><span class="ident" id="7636005">rx</span><span class="op" id="7636007">)</span><span class="op" id="7636008">;</span>&nbsp;<span class="ident" id="7636010">err</span>&nbsp;<span class="op" id="7636014">!=</span>&nbsp;<span class="builtintype" id="7636017">nil</span>&nbsp;<span class="op" id="7636021">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636026">t</span><span class="op" id="7636027">.</span><span class="ident" id="7636028">Errorf</span><span class="op" id="7636034">(</span><span class="string" id="7636035">&#34;decoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7636062">,</span>&nbsp;<span class="op" id="7636064">&amp;</span><span class="ident" id="7636065">tx</span><span class="op" id="7636067">,</span>&nbsp;<span class="ident" id="7636069">err</span><span class="op" id="7636072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636080">if</span>&nbsp;<span class="ident" id="7636083">rx</span><span class="op" id="7636085">.</span><span class="ident" id="7636086">Cmp</span><span class="op" id="7636089">(</span><span class="op" id="7636090">&amp;</span><span class="ident" id="7636091">tx</span><span class="op" id="7636093">)</span>&nbsp;<span class="op" id="7636095">!=</span>&nbsp;<span class="num" id="7636098">0</span>&nbsp;<span class="op" id="7636100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636105">t</span><span class="op" id="7636106">.</span><span class="ident" id="7636107">Errorf</span><span class="op" id="7636113">(</span><span class="string" id="7636114">&#34;transmission&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7636157">,</span>&nbsp;<span class="op" id="7636159">&amp;</span><span class="ident" id="7636160">tx</span><span class="op" id="7636162">,</span>&nbsp;<span class="op" id="7636164">&amp;</span><span class="ident" id="7636165">rx</span><span class="op" id="7636167">,</span>&nbsp;<span class="op" id="7636169">&amp;</span><span class="ident" id="7636170">tx</span><span class="op" id="7636172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636176">}</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636179">}</span><br>
<span class="lineno"></span><span class="op" id="7636181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7636184">//&nbsp;Sending&nbsp;a&nbsp;nil&nbsp;Rat&nbsp;pointer&nbsp;(inside&nbsp;a&nbsp;slice)&nbsp;on&nbsp;a&nbsp;round&nbsp;trip&nbsp;through&nbsp;gob&nbsp;should&nbsp;yield&nbsp;a&nbsp;zero.</span><br>
<span class="lineno"></span><span class="comment" id="7636279">//&nbsp;TODO:&nbsp;top-level&nbsp;nils.</span><br>
<span class="lineno">415</span><span class="keyword" id="7636304">func</span>&nbsp;<span class="ident" id="7636309">TestGobEncodingNilRatInSlice</span><span class="op" id="7636337">(</span><span class="ident" id="7636338">t</span>&nbsp;<span class="op" id="7636340">*</span><span class="ident" id="7636341">testing</span><span class="op" id="7636348">.</span><span class="ident" id="7636349">T</span><span class="op" id="7636350">)</span>&nbsp;<span class="op" id="7636352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636355">buf</span>&nbsp;<span class="op" id="7636359">:=</span>&nbsp;<span class="builtinfunc" id="7636362">new</span><span class="op" id="7636365">(</span><span class="ident" id="7636366">bytes</span><span class="op" id="7636371">.</span><span class="ident" id="7636372">Buffer</span><span class="op" id="7636378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636381">enc</span>&nbsp;<span class="op" id="7636385">:=</span>&nbsp;<span class="ident" id="7636388">gob</span><span class="op" id="7636391">.</span><span class="ident" id="7636392">NewEncoder</span><span class="op" id="7636402">(</span><span class="ident" id="7636403">buf</span><span class="op" id="7636406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636409">dec</span>&nbsp;<span class="op" id="7636413">:=</span>&nbsp;<span class="ident" id="7636416">gob</span><span class="op" id="7636419">.</span><span class="ident" id="7636420">NewDecoder</span><span class="op" id="7636430">(</span><span class="ident" id="7636431">buf</span><span class="op" id="7636434">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636438">var</span>&nbsp;<span class="ident" id="7636442">in</span>&nbsp;<span class="op" id="7636445">=</span>&nbsp;<span class="builtinfunc" id="7636447">make</span><span class="op" id="7636451">(</span><span class="op" id="7636452">[</span><span class="op" id="7636453">]</span><span class="op" id="7636454">*</span><span class="ident" id="7636455">Rat</span><span class="op" id="7636458">,</span>&nbsp;<span class="num" id="7636460">1</span><span class="op" id="7636461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636464">err</span>&nbsp;<span class="op" id="7636468">:=</span>&nbsp;<span class="ident" id="7636471">enc</span><span class="op" id="7636474">.</span><span class="ident" id="7636475">Encode</span><span class="op" id="7636481">(</span><span class="op" id="7636482">&amp;</span><span class="ident" id="7636483">in</span><span class="op" id="7636485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636488">if</span>&nbsp;<span class="ident" id="7636491">err</span>&nbsp;<span class="op" id="7636495">!=</span>&nbsp;<span class="builtintype" id="7636498">nil</span>&nbsp;<span class="op" id="7636502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636506">t</span><span class="op" id="7636507">.</span><span class="ident" id="7636508">Errorf</span><span class="op" id="7636514">(</span><span class="string" id="7636515">&#34;gob&nbsp;encode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7636538">,</span>&nbsp;<span class="ident" id="7636540">err</span><span class="op" id="7636543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636546">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636549">var</span>&nbsp;<span class="ident" id="7636553">out</span>&nbsp;<span class="op" id="7636557">[</span><span class="op" id="7636558">]</span><span class="op" id="7636559">*</span><span class="ident" id="7636560">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636565">err</span>&nbsp;<span class="op" id="7636569">=</span>&nbsp;<span class="ident" id="7636571">dec</span><span class="op" id="7636574">.</span><span class="ident" id="7636575">Decode</span><span class="op" id="7636581">(</span><span class="op" id="7636582">&amp;</span><span class="ident" id="7636583">out</span><span class="op" id="7636586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636589">if</span>&nbsp;<span class="ident" id="7636592">err</span>&nbsp;<span class="op" id="7636596">!=</span>&nbsp;<span class="builtintype" id="7636599">nil</span>&nbsp;<span class="op" id="7636603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636607">t</span><span class="op" id="7636608">.</span><span class="ident" id="7636609">Fatalf</span><span class="op" id="7636615">(</span><span class="string" id="7636616">&#34;gob&nbsp;decode&nbsp;failed:&nbsp;%q&#34;</span><span class="op" id="7636639">,</span>&nbsp;<span class="ident" id="7636641">err</span><span class="op" id="7636644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636647">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636650">if</span>&nbsp;<span class="builtinfunc" id="7636653">len</span><span class="op" id="7636656">(</span><span class="ident" id="7636657">out</span><span class="op" id="7636660">)</span>&nbsp;<span class="op" id="7636662">!=</span>&nbsp;<span class="num" id="7636665">1</span>&nbsp;<span class="op" id="7636667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636671">t</span><span class="op" id="7636672">.</span><span class="ident" id="7636673">Fatalf</span><span class="op" id="7636679">(</span><span class="string" id="7636680">&#34;wrong&nbsp;len;&nbsp;want&nbsp;1&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7636706">,</span>&nbsp;<span class="builtinfunc" id="7636708">len</span><span class="op" id="7636711">(</span><span class="ident" id="7636712">out</span><span class="op" id="7636715">)</span><span class="op" id="7636716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636722">var</span>&nbsp;<span class="ident" id="7636726">zero</span>&nbsp;<span class="ident" id="7636731">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7636736">if</span>&nbsp;<span class="ident" id="7636739">out</span><span class="op" id="7636742">[</span><span class="num" id="7636743">0</span><span class="op" id="7636744">]</span><span class="op" id="7636745">.</span><span class="ident" id="7636746">Cmp</span><span class="op" id="7636749">(</span><span class="op" id="7636750">&amp;</span><span class="ident" id="7636751">zero</span><span class="op" id="7636755">)</span>&nbsp;<span class="op" id="7636757">!=</span>&nbsp;<span class="num" id="7636760">0</span>&nbsp;<span class="op" id="7636762">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7636766">t</span><span class="op" id="7636767">.</span><span class="ident" id="7636768">Errorf</span><span class="op" id="7636774">(</span><span class="string" id="7636775">&#34;transmission&nbsp;of&nbsp;(*Int)(nill)&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;0&#34;</span><span class="op" id="7636827">,</span>&nbsp;<span class="ident" id="7636829">out</span><span class="op" id="7636832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7636835">}</span><br>
<span class="lineno"></span><span class="op" id="7636837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7636840">var</span>&nbsp;<span class="ident" id="7636844">ratNums</span>&nbsp;<span class="op" id="7636852">=</span>&nbsp;<span class="op" id="7636854">[</span><span class="op" id="7636855">]</span><span class="builtintype" id="7636856">string</span><span class="op" id="7636862">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7636865">&#34;-141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7636943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7636946">&#34;-1415926535897932384626433832795028841971&#34;</span><span class="op" id="7636989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7636992">&#34;-141592653589793&#34;</span><span class="op" id="7637010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637013">&#34;-1&#34;</span><span class="op" id="7637017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637020">&#34;0&#34;</span><span class="op" id="7637023">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637026">&#34;1&#34;</span><span class="op" id="7637029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637032">&#34;141592653589793&#34;</span><span class="op" id="7637049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637052">&#34;1415926535897932384626433832795028841971&#34;</span><span class="op" id="7637094">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637097">&#34;141592653589793238462643383279502884197169399375105820974944592307816406286&#34;</span><span class="op" id="7637174">,</span><br>
<span class="lineno"></span><span class="op" id="7637176">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="7637179">var</span>&nbsp;<span class="ident" id="7637183">ratDenoms</span>&nbsp;<span class="op" id="7637193">=</span>&nbsp;<span class="op" id="7637195">[</span><span class="op" id="7637196">]</span><span class="builtintype" id="7637197">string</span><span class="op" id="7637203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637206">&#34;1&#34;</span><span class="op" id="7637209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637212">&#34;718281828459045&#34;</span><span class="op" id="7637229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637232">&#34;7182818284590452353602874713526624977572&#34;</span><span class="op" id="7637274">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7637277">&#34;718281828459045235360287471352662497757247093699959574966967627724076630353&#34;</span><span class="op" id="7637354">,</span><br>
<span class="lineno"></span><span class="op" id="7637356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7637359">func</span>&nbsp;<span class="ident" id="7637364">TestRatJSONEncoding</span><span class="op" id="7637383">(</span><span class="ident" id="7637384">t</span>&nbsp;<span class="op" id="7637386">*</span><span class="ident" id="7637387">testing</span><span class="op" id="7637394">.</span><span class="ident" id="7637395">T</span><span class="op" id="7637396">)</span>&nbsp;<span class="op" id="7637398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637401">for</span>&nbsp;<span class="ident" id="7637405">_</span><span class="op" id="7637406">,</span>&nbsp;<span class="ident" id="7637408">num</span>&nbsp;<span class="op" id="7637412">:=</span>&nbsp;<span class="keyword" id="7637415">range</span>&nbsp;<span class="ident" id="7637421">ratNums</span>&nbsp;<span class="op" id="7637429">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637433">for</span>&nbsp;<span class="ident" id="7637437">_</span><span class="op" id="7637438">,</span>&nbsp;<span class="ident" id="7637440">denom</span>&nbsp;<span class="op" id="7637446">:=</span>&nbsp;<span class="keyword" id="7637449">range</span>&nbsp;<span class="ident" id="7637455">ratDenoms</span>&nbsp;<span class="op" id="7637465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637470">var</span>&nbsp;<span class="ident" id="7637474">tx</span>&nbsp;<span class="ident" id="7637477">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7637484">tx</span><span class="op" id="7637486">.</span><span class="ident" id="7637487">SetString</span><span class="op" id="7637496">(</span><span class="ident" id="7637497">num</span>&nbsp;<span class="op" id="7637501">+</span>&nbsp;<span class="string" id="7637503">&#34;/&#34;</span>&nbsp;<span class="op" id="7637507">+</span>&nbsp;<span class="ident" id="7637509">denom</span><span class="op" id="7637514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7637519">b</span><span class="op" id="7637520">,</span>&nbsp;<span class="ident" id="7637522">err</span>&nbsp;<span class="op" id="7637526">:=</span>&nbsp;<span class="ident" id="7637529">json</span><span class="op" id="7637533">.</span><span class="ident" id="7637534">Marshal</span><span class="op" id="7637541">(</span><span class="op" id="7637542">&amp;</span><span class="ident" id="7637543">tx</span><span class="op" id="7637545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637550">if</span>&nbsp;<span class="ident" id="7637553">err</span>&nbsp;<span class="op" id="7637557">!=</span>&nbsp;<span class="builtintype" id="7637560">nil</span>&nbsp;<span class="op" id="7637564">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7637570">t</span><span class="op" id="7637571">.</span><span class="ident" id="7637572">Errorf</span><span class="op" id="7637578">(</span><span class="string" id="7637579">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7637608">,</span>&nbsp;<span class="op" id="7637610">&amp;</span><span class="ident" id="7637611">tx</span><span class="op" id="7637613">,</span>&nbsp;<span class="ident" id="7637615">err</span><span class="op" id="7637618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637624">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7637636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637641">var</span>&nbsp;<span class="ident" id="7637645">rx</span>&nbsp;<span class="ident" id="7637648">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637655">if</span>&nbsp;<span class="ident" id="7637658">err</span>&nbsp;<span class="op" id="7637662">:=</span>&nbsp;<span class="ident" id="7637665">json</span><span class="op" id="7637669">.</span><span class="ident" id="7637670">Unmarshal</span><span class="op" id="7637679">(</span><span class="ident" id="7637680">b</span><span class="op" id="7637681">,</span>&nbsp;<span class="op" id="7637683">&amp;</span><span class="ident" id="7637684">rx</span><span class="op" id="7637686">)</span><span class="op" id="7637687">;</span>&nbsp;<span class="ident" id="7637689">err</span>&nbsp;<span class="op" id="7637693">!=</span>&nbsp;<span class="builtintype" id="7637696">nil</span>&nbsp;<span class="op" id="7637700">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7637706">t</span><span class="op" id="7637707">.</span><span class="ident" id="7637708">Errorf</span><span class="op" id="7637714">(</span><span class="string" id="7637715">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7637746">,</span>&nbsp;<span class="op" id="7637748">&amp;</span><span class="ident" id="7637749">tx</span><span class="op" id="7637751">,</span>&nbsp;<span class="ident" id="7637753">err</span><span class="op" id="7637756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637762">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7637774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637779">if</span>&nbsp;<span class="ident" id="7637782">rx</span><span class="op" id="7637784">.</span><span class="ident" id="7637785">Cmp</span><span class="op" id="7637788">(</span><span class="op" id="7637789">&amp;</span><span class="ident" id="7637790">tx</span><span class="op" id="7637792">)</span>&nbsp;<span class="op" id="7637794">!=</span>&nbsp;<span class="num" id="7637797">0</span>&nbsp;<span class="op" id="7637799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7637805">t</span><span class="op" id="7637806">.</span><span class="ident" id="7637807">Errorf</span><span class="op" id="7637813">(</span><span class="string" id="7637814">&#34;JSON&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7637858">,</span>&nbsp;<span class="op" id="7637860">&amp;</span><span class="ident" id="7637861">tx</span><span class="op" id="7637863">,</span>&nbsp;<span class="op" id="7637865">&amp;</span><span class="ident" id="7637866">rx</span><span class="op" id="7637868">,</span>&nbsp;<span class="op" id="7637870">&amp;</span><span class="ident" id="7637871">tx</span><span class="op" id="7637873">)</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7637878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7637882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7637885">}</span><br>
<span class="lineno"></span><span class="op" id="7637887">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="7637890">func</span>&nbsp;<span class="ident" id="7637895">TestRatXMLEncoding</span><span class="op" id="7637913">(</span><span class="ident" id="7637914">t</span>&nbsp;<span class="op" id="7637916">*</span><span class="ident" id="7637917">testing</span><span class="op" id="7637924">.</span><span class="ident" id="7637925">T</span><span class="op" id="7637926">)</span>&nbsp;<span class="op" id="7637928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637931">for</span>&nbsp;<span class="ident" id="7637935">_</span><span class="op" id="7637936">,</span>&nbsp;<span class="ident" id="7637938">num</span>&nbsp;<span class="op" id="7637942">:=</span>&nbsp;<span class="keyword" id="7637945">range</span>&nbsp;<span class="ident" id="7637951">ratNums</span>&nbsp;<span class="op" id="7637959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7637963">for</span>&nbsp;<span class="ident" id="7637967">_</span><span class="op" id="7637968">,</span>&nbsp;<span class="ident" id="7637970">denom</span>&nbsp;<span class="op" id="7637976">:=</span>&nbsp;<span class="keyword" id="7637979">range</span>&nbsp;<span class="ident" id="7637985">ratDenoms</span>&nbsp;<span class="op" id="7637995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638000">var</span>&nbsp;<span class="ident" id="7638004">tx</span>&nbsp;<span class="ident" id="7638007">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638014">tx</span><span class="op" id="7638016">.</span><span class="ident" id="7638017">SetString</span><span class="op" id="7638026">(</span><span class="ident" id="7638027">num</span>&nbsp;<span class="op" id="7638031">+</span>&nbsp;<span class="string" id="7638033">&#34;/&#34;</span>&nbsp;<span class="op" id="7638037">+</span>&nbsp;<span class="ident" id="7638039">denom</span><span class="op" id="7638044">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638049">b</span><span class="op" id="7638050">,</span>&nbsp;<span class="ident" id="7638052">err</span>&nbsp;<span class="op" id="7638056">:=</span>&nbsp;<span class="ident" id="7638059">xml</span><span class="op" id="7638062">.</span><span class="ident" id="7638063">Marshal</span><span class="op" id="7638070">(</span><span class="op" id="7638071">&amp;</span><span class="ident" id="7638072">tx</span><span class="op" id="7638074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638079">if</span>&nbsp;<span class="ident" id="7638082">err</span>&nbsp;<span class="op" id="7638086">!=</span>&nbsp;<span class="builtintype" id="7638089">nil</span>&nbsp;<span class="op" id="7638093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638099">t</span><span class="op" id="7638100">.</span><span class="ident" id="7638101">Errorf</span><span class="op" id="7638107">(</span><span class="string" id="7638108">&#34;marshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7638137">,</span>&nbsp;<span class="op" id="7638139">&amp;</span><span class="ident" id="7638140">tx</span><span class="op" id="7638142">,</span>&nbsp;<span class="ident" id="7638144">err</span><span class="op" id="7638147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638153">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638165">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638170">var</span>&nbsp;<span class="ident" id="7638174">rx</span>&nbsp;<span class="ident" id="7638177">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638184">if</span>&nbsp;<span class="ident" id="7638187">err</span>&nbsp;<span class="op" id="7638191">:=</span>&nbsp;<span class="ident" id="7638194">xml</span><span class="op" id="7638197">.</span><span class="ident" id="7638198">Unmarshal</span><span class="op" id="7638207">(</span><span class="ident" id="7638208">b</span><span class="op" id="7638209">,</span>&nbsp;<span class="op" id="7638211">&amp;</span><span class="ident" id="7638212">rx</span><span class="op" id="7638214">)</span><span class="op" id="7638215">;</span>&nbsp;<span class="ident" id="7638217">err</span>&nbsp;<span class="op" id="7638221">!=</span>&nbsp;<span class="builtintype" id="7638224">nil</span>&nbsp;<span class="op" id="7638228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638234">t</span><span class="op" id="7638235">.</span><span class="ident" id="7638236">Errorf</span><span class="op" id="7638242">(</span><span class="string" id="7638243">&#34;unmarshaling&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;%s&#34;</span><span class="op" id="7638274">,</span>&nbsp;<span class="op" id="7638276">&amp;</span><span class="ident" id="7638277">tx</span><span class="op" id="7638279">,</span>&nbsp;<span class="ident" id="7638281">err</span><span class="op" id="7638284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638290">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638302">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638307">if</span>&nbsp;<span class="ident" id="7638310">rx</span><span class="op" id="7638312">.</span><span class="ident" id="7638313">Cmp</span><span class="op" id="7638316">(</span><span class="op" id="7638317">&amp;</span><span class="ident" id="7638318">tx</span><span class="op" id="7638320">)</span>&nbsp;<span class="op" id="7638322">!=</span>&nbsp;<span class="num" id="7638325">0</span>&nbsp;<span class="op" id="7638327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638333">t</span><span class="op" id="7638334">.</span><span class="ident" id="7638335">Errorf</span><span class="op" id="7638341">(</span><span class="string" id="7638342">&#34;XML&nbsp;encoding&nbsp;of&nbsp;%s&nbsp;failed:&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7638385">,</span>&nbsp;<span class="op" id="7638387">&amp;</span><span class="ident" id="7638388">tx</span><span class="op" id="7638390">,</span>&nbsp;<span class="op" id="7638392">&amp;</span><span class="ident" id="7638393">rx</span><span class="op" id="7638395">,</span>&nbsp;<span class="op" id="7638397">&amp;</span><span class="ident" id="7638398">tx</span><span class="op" id="7638400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638412">}</span><br>
<span class="lineno">500</span><span class="op" id="7638414">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7638417">func</span>&nbsp;<span class="ident" id="7638422">TestIssue2379</span><span class="op" id="7638435">(</span><span class="ident" id="7638436">t</span>&nbsp;<span class="op" id="7638438">*</span><span class="ident" id="7638439">testing</span><span class="op" id="7638446">.</span><span class="ident" id="7638447">T</span><span class="op" id="7638448">)</span>&nbsp;<span class="op" id="7638450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7638453">//&nbsp;1)&nbsp;no&nbsp;aliasing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638472">q</span>&nbsp;<span class="op" id="7638474">:=</span>&nbsp;<span class="ident" id="7638477">NewRat</span><span class="op" id="7638483">(</span><span class="num" id="7638484">3</span><span class="op" id="7638485">,</span>&nbsp;<span class="num" id="7638487">2</span><span class="op" id="7638488">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638491">x</span>&nbsp;<span class="op" id="7638493">:=</span>&nbsp;<span class="builtinfunc" id="7638496">new</span><span class="op" id="7638499">(</span><span class="ident" id="7638500">Rat</span><span class="op" id="7638503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638506">x</span><span class="op" id="7638507">.</span><span class="ident" id="7638508">SetFrac</span><span class="op" id="7638515">(</span><span class="ident" id="7638516">NewInt</span><span class="op" id="7638522">(</span><span class="num" id="7638523">3</span><span class="op" id="7638524">)</span><span class="op" id="7638525">,</span>&nbsp;<span class="ident" id="7638527">NewInt</span><span class="op" id="7638533">(</span><span class="num" id="7638534">2</span><span class="op" id="7638535">)</span><span class="op" id="7638536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638539">if</span>&nbsp;<span class="ident" id="7638542">x</span><span class="op" id="7638543">.</span><span class="ident" id="7638544">Cmp</span><span class="op" id="7638547">(</span><span class="ident" id="7638548">q</span><span class="op" id="7638549">)</span>&nbsp;<span class="op" id="7638551">!=</span>&nbsp;<span class="num" id="7638554">0</span>&nbsp;<span class="op" id="7638556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638560">t</span><span class="op" id="7638561">.</span><span class="ident" id="7638562">Errorf</span><span class="op" id="7638568">(</span><span class="string" id="7638569">&#34;1)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7638588">,</span>&nbsp;<span class="ident" id="7638590">x</span><span class="op" id="7638591">,</span>&nbsp;<span class="ident" id="7638593">q</span><span class="op" id="7638594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638597">}</span><br>
<span class="lineno">510</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7638601">//&nbsp;2)&nbsp;aliasing&nbsp;of&nbsp;numerator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638630">x</span>&nbsp;<span class="op" id="7638632">=</span>&nbsp;<span class="ident" id="7638634">NewRat</span><span class="op" id="7638640">(</span><span class="num" id="7638641">2</span><span class="op" id="7638642">,</span>&nbsp;<span class="num" id="7638644">3</span><span class="op" id="7638645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638648">x</span><span class="op" id="7638649">.</span><span class="ident" id="7638650">SetFrac</span><span class="op" id="7638657">(</span><span class="ident" id="7638658">NewInt</span><span class="op" id="7638664">(</span><span class="num" id="7638665">3</span><span class="op" id="7638666">)</span><span class="op" id="7638667">,</span>&nbsp;<span class="ident" id="7638669">x</span><span class="op" id="7638670">.</span><span class="ident" id="7638671">Num</span><span class="op" id="7638674">(</span><span class="op" id="7638675">)</span><span class="op" id="7638676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638679">if</span>&nbsp;<span class="ident" id="7638682">x</span><span class="op" id="7638683">.</span><span class="ident" id="7638684">Cmp</span><span class="op" id="7638687">(</span><span class="ident" id="7638688">q</span><span class="op" id="7638689">)</span>&nbsp;<span class="op" id="7638691">!=</span>&nbsp;<span class="num" id="7638694">0</span>&nbsp;<span class="op" id="7638696">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638700">t</span><span class="op" id="7638701">.</span><span class="ident" id="7638702">Errorf</span><span class="op" id="7638708">(</span><span class="string" id="7638709">&#34;2)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7638728">,</span>&nbsp;<span class="ident" id="7638730">x</span><span class="op" id="7638731">,</span>&nbsp;<span class="ident" id="7638733">q</span><span class="op" id="7638734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7638741">//&nbsp;3)&nbsp;aliasing&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638772">x</span>&nbsp;<span class="op" id="7638774">=</span>&nbsp;<span class="ident" id="7638776">NewRat</span><span class="op" id="7638782">(</span><span class="num" id="7638783">2</span><span class="op" id="7638784">,</span>&nbsp;<span class="num" id="7638786">3</span><span class="op" id="7638787">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638790">x</span><span class="op" id="7638791">.</span><span class="ident" id="7638792">SetFrac</span><span class="op" id="7638799">(</span><span class="ident" id="7638800">x</span><span class="op" id="7638801">.</span><span class="ident" id="7638802">Denom</span><span class="op" id="7638807">(</span><span class="op" id="7638808">)</span><span class="op" id="7638809">,</span>&nbsp;<span class="ident" id="7638811">NewInt</span><span class="op" id="7638817">(</span><span class="num" id="7638818">2</span><span class="op" id="7638819">)</span><span class="op" id="7638820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638823">if</span>&nbsp;<span class="ident" id="7638826">x</span><span class="op" id="7638827">.</span><span class="ident" id="7638828">Cmp</span><span class="op" id="7638831">(</span><span class="ident" id="7638832">q</span><span class="op" id="7638833">)</span>&nbsp;<span class="op" id="7638835">!=</span>&nbsp;<span class="num" id="7638838">0</span>&nbsp;<span class="op" id="7638840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638844">t</span><span class="op" id="7638845">.</span><span class="ident" id="7638846">Errorf</span><span class="op" id="7638852">(</span><span class="string" id="7638853">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7638872">,</span>&nbsp;<span class="ident" id="7638874">x</span><span class="op" id="7638875">,</span>&nbsp;<span class="ident" id="7638877">q</span><span class="op" id="7638878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7638881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7638885">//&nbsp;4)&nbsp;aliasing&nbsp;of&nbsp;numerator&nbsp;and&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638930">x</span>&nbsp;<span class="op" id="7638932">=</span>&nbsp;<span class="ident" id="7638934">NewRat</span><span class="op" id="7638940">(</span><span class="num" id="7638941">2</span><span class="op" id="7638942">,</span>&nbsp;<span class="num" id="7638944">3</span><span class="op" id="7638945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7638948">x</span><span class="op" id="7638949">.</span><span class="ident" id="7638950">SetFrac</span><span class="op" id="7638957">(</span><span class="ident" id="7638958">x</span><span class="op" id="7638959">.</span><span class="ident" id="7638960">Denom</span><span class="op" id="7638965">(</span><span class="op" id="7638966">)</span><span class="op" id="7638967">,</span>&nbsp;<span class="ident" id="7638969">x</span><span class="op" id="7638970">.</span><span class="ident" id="7638971">Num</span><span class="op" id="7638974">(</span><span class="op" id="7638975">)</span><span class="op" id="7638976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7638979">if</span>&nbsp;<span class="ident" id="7638982">x</span><span class="op" id="7638983">.</span><span class="ident" id="7638984">Cmp</span><span class="op" id="7638987">(</span><span class="ident" id="7638988">q</span><span class="op" id="7638989">)</span>&nbsp;<span class="op" id="7638991">!=</span>&nbsp;<span class="num" id="7638994">0</span>&nbsp;<span class="op" id="7638996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639000">t</span><span class="op" id="7639001">.</span><span class="ident" id="7639002">Errorf</span><span class="op" id="7639008">(</span><span class="string" id="7639009">&#34;4)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7639028">,</span>&nbsp;<span class="ident" id="7639030">x</span><span class="op" id="7639031">,</span>&nbsp;<span class="ident" id="7639033">q</span><span class="op" id="7639034">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7639037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7639041">//&nbsp;5)&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;are&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639087">q</span>&nbsp;<span class="op" id="7639089">=</span>&nbsp;<span class="ident" id="7639091">NewRat</span><span class="op" id="7639097">(</span><span class="num" id="7639098">1</span><span class="op" id="7639099">,</span>&nbsp;<span class="num" id="7639101">1</span><span class="op" id="7639102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639105">x</span>&nbsp;<span class="op" id="7639107">=</span>&nbsp;<span class="builtinfunc" id="7639109">new</span><span class="op" id="7639112">(</span><span class="ident" id="7639113">Rat</span><span class="op" id="7639116">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639119">n</span>&nbsp;<span class="op" id="7639121">:=</span>&nbsp;<span class="ident" id="7639124">NewInt</span><span class="op" id="7639130">(</span><span class="num" id="7639131">7</span><span class="op" id="7639132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639135">x</span><span class="op" id="7639136">.</span><span class="ident" id="7639137">SetFrac</span><span class="op" id="7639144">(</span><span class="ident" id="7639145">n</span><span class="op" id="7639146">,</span>&nbsp;<span class="ident" id="7639148">n</span><span class="op" id="7639149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7639152">if</span>&nbsp;<span class="ident" id="7639155">x</span><span class="op" id="7639156">.</span><span class="ident" id="7639157">Cmp</span><span class="op" id="7639160">(</span><span class="ident" id="7639161">q</span><span class="op" id="7639162">)</span>&nbsp;<span class="op" id="7639164">!=</span>&nbsp;<span class="num" id="7639167">0</span>&nbsp;<span class="op" id="7639169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639173">t</span><span class="op" id="7639174">.</span><span class="ident" id="7639175">Errorf</span><span class="op" id="7639181">(</span><span class="string" id="7639182">&#34;5)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7639201">,</span>&nbsp;<span class="ident" id="7639203">x</span><span class="op" id="7639204">,</span>&nbsp;<span class="ident" id="7639206">q</span><span class="op" id="7639207">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7639210">}</span><br>
<span class="lineno">540</span><span class="op" id="7639212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7639215">func</span>&nbsp;<span class="ident" id="7639220">TestIssue3521</span><span class="op" id="7639233">(</span><span class="ident" id="7639234">t</span>&nbsp;<span class="op" id="7639236">*</span><span class="ident" id="7639237">testing</span><span class="op" id="7639244">.</span><span class="ident" id="7639245">T</span><span class="op" id="7639246">)</span>&nbsp;<span class="op" id="7639248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639251">a</span>&nbsp;<span class="op" id="7639253">:=</span>&nbsp;<span class="builtinfunc" id="7639256">new</span><span class="op" id="7639259">(</span><span class="ident" id="7639260">Int</span><span class="op" id="7639263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639266">b</span>&nbsp;<span class="op" id="7639268">:=</span>&nbsp;<span class="builtinfunc" id="7639271">new</span><span class="op" id="7639274">(</span><span class="ident" id="7639275">Int</span><span class="op" id="7639278">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639281">a</span><span class="op" id="7639282">.</span><span class="ident" id="7639283">SetString</span><span class="op" id="7639292">(</span><span class="string" id="7639293">&#34;64375784358435883458348587&#34;</span><span class="op" id="7639321">,</span>&nbsp;<span class="num" id="7639323">0</span><span class="op" id="7639324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639327">b</span><span class="op" id="7639328">.</span><span class="ident" id="7639329">SetString</span><span class="op" id="7639338">(</span><span class="string" id="7639339">&#34;4789759874531&#34;</span><span class="op" id="7639354">,</span>&nbsp;<span class="num" id="7639356">0</span><span class="op" id="7639357">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7639361">//&nbsp;0)&nbsp;a&nbsp;raw&nbsp;zero&nbsp;value&nbsp;has&nbsp;1&nbsp;as&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639406">zero</span>&nbsp;<span class="op" id="7639411">:=</span>&nbsp;<span class="builtinfunc" id="7639414">new</span><span class="op" id="7639417">(</span><span class="ident" id="7639418">Rat</span><span class="op" id="7639421">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639424">one</span>&nbsp;<span class="op" id="7639428">:=</span>&nbsp;<span class="ident" id="7639431">NewInt</span><span class="op" id="7639437">(</span><span class="num" id="7639438">1</span><span class="op" id="7639439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7639442">if</span>&nbsp;<span class="ident" id="7639445">zero</span><span class="op" id="7639449">.</span><span class="ident" id="7639450">Denom</span><span class="op" id="7639455">(</span><span class="op" id="7639456">)</span><span class="op" id="7639457">.</span><span class="ident" id="7639458">Cmp</span><span class="op" id="7639461">(</span><span class="ident" id="7639462">one</span><span class="op" id="7639465">)</span>&nbsp;<span class="op" id="7639467">!=</span>&nbsp;<span class="num" id="7639470">0</span>&nbsp;<span class="op" id="7639472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639476">t</span><span class="op" id="7639477">.</span><span class="ident" id="7639478">Errorf</span><span class="op" id="7639484">(</span><span class="string" id="7639485">&#34;0)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7639504">,</span>&nbsp;<span class="ident" id="7639506">zero</span><span class="op" id="7639510">.</span><span class="ident" id="7639511">Denom</span><span class="op" id="7639516">(</span><span class="op" id="7639517">)</span><span class="op" id="7639518">,</span>&nbsp;<span class="ident" id="7639520">one</span><span class="op" id="7639523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7639526">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7639530">//&nbsp;1a)&nbsp;a&nbsp;zero&nbsp;value&nbsp;remains&nbsp;zero&nbsp;independent&nbsp;of&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639591">x</span>&nbsp;<span class="op" id="7639593">:=</span>&nbsp;<span class="builtinfunc" id="7639596">new</span><span class="op" id="7639599">(</span><span class="ident" id="7639600">Rat</span><span class="op" id="7639603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639606">x</span><span class="op" id="7639607">.</span><span class="ident" id="7639608">Denom</span><span class="op" id="7639613">(</span><span class="op" id="7639614">)</span><span class="op" id="7639615">.</span><span class="ident" id="7639616">Set</span><span class="op" id="7639619">(</span><span class="builtinfunc" id="7639620">new</span><span class="op" id="7639623">(</span><span class="ident" id="7639624">Int</span><span class="op" id="7639627">)</span><span class="op" id="7639628">.</span><span class="ident" id="7639629">Neg</span><span class="op" id="7639632">(</span><span class="ident" id="7639633">b</span><span class="op" id="7639634">)</span><span class="op" id="7639635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7639638">if</span>&nbsp;<span class="ident" id="7639641">x</span><span class="op" id="7639642">.</span><span class="ident" id="7639643">Cmp</span><span class="op" id="7639646">(</span><span class="ident" id="7639647">zero</span><span class="op" id="7639651">)</span>&nbsp;<span class="op" id="7639653">!=</span>&nbsp;<span class="num" id="7639656">0</span>&nbsp;<span class="op" id="7639658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639662">t</span><span class="op" id="7639663">.</span><span class="ident" id="7639664">Errorf</span><span class="op" id="7639670">(</span><span class="string" id="7639671">&#34;1a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7639691">,</span>&nbsp;<span class="ident" id="7639693">x</span><span class="op" id="7639694">,</span>&nbsp;<span class="ident" id="7639696">zero</span><span class="op" id="7639700">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7639703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7639707">//&nbsp;1b)&nbsp;a&nbsp;zero&nbsp;value&nbsp;may&nbsp;have&nbsp;a&nbsp;denominator&nbsp;!=&nbsp;0&nbsp;and&nbsp;!=&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639765">x</span><span class="op" id="7639766">.</span><span class="ident" id="7639767">Num</span><span class="op" id="7639770">(</span><span class="op" id="7639771">)</span><span class="op" id="7639772">.</span><span class="ident" id="7639773">Set</span><span class="op" id="7639776">(</span><span class="ident" id="7639777">a</span><span class="op" id="7639778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639781">qab</span>&nbsp;<span class="op" id="7639785">:=</span>&nbsp;<span class="builtinfunc" id="7639788">new</span><span class="op" id="7639791">(</span><span class="ident" id="7639792">Rat</span><span class="op" id="7639795">)</span><span class="op" id="7639796">.</span><span class="ident" id="7639797">SetFrac</span><span class="op" id="7639804">(</span><span class="ident" id="7639805">a</span><span class="op" id="7639806">,</span>&nbsp;<span class="ident" id="7639808">b</span><span class="op" id="7639809">)</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7639812">if</span>&nbsp;<span class="ident" id="7639815">x</span><span class="op" id="7639816">.</span><span class="ident" id="7639817">Cmp</span><span class="op" id="7639820">(</span><span class="ident" id="7639821">qab</span><span class="op" id="7639824">)</span>&nbsp;<span class="op" id="7639826">!=</span>&nbsp;<span class="num" id="7639829">0</span>&nbsp;<span class="op" id="7639831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639835">t</span><span class="op" id="7639836">.</span><span class="ident" id="7639837">Errorf</span><span class="op" id="7639843">(</span><span class="string" id="7639844">&#34;1b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7639864">,</span>&nbsp;<span class="ident" id="7639866">x</span><span class="op" id="7639867">,</span>&nbsp;<span class="ident" id="7639869">qab</span><span class="op" id="7639872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7639875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7639879">//&nbsp;2a)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639949">x</span><span class="op" id="7639950">.</span><span class="ident" id="7639951">SetFrac64</span><span class="op" id="7639960">(</span><span class="num" id="7639961">10</span><span class="op" id="7639963">,</span>&nbsp;<span class="num" id="7639965">2</span><span class="op" id="7639966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639969">x</span><span class="op" id="7639970">.</span><span class="ident" id="7639971">Denom</span><span class="op" id="7639976">(</span><span class="op" id="7639977">)</span><span class="op" id="7639978">.</span><span class="ident" id="7639979">SetInt64</span><span class="op" id="7639987">(</span><span class="num" id="7639988">3</span><span class="op" id="7639989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7639992">q53</span>&nbsp;<span class="op" id="7639996">:=</span>&nbsp;<span class="ident" id="7639999">NewRat</span><span class="op" id="7640005">(</span><span class="num" id="7640006">5</span><span class="op" id="7640007">,</span>&nbsp;<span class="num" id="7640009">3</span><span class="op" id="7640010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7640013">if</span>&nbsp;<span class="ident" id="7640016">x</span><span class="op" id="7640017">.</span><span class="ident" id="7640018">Cmp</span><span class="op" id="7640021">(</span><span class="ident" id="7640022">q53</span><span class="op" id="7640025">)</span>&nbsp;<span class="op" id="7640027">!=</span>&nbsp;<span class="num" id="7640030">0</span>&nbsp;<span class="op" id="7640032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640036">t</span><span class="op" id="7640037">.</span><span class="ident" id="7640038">Errorf</span><span class="op" id="7640044">(</span><span class="string" id="7640045">&#34;2a)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7640065">,</span>&nbsp;<span class="ident" id="7640067">x</span><span class="op" id="7640068">,</span>&nbsp;<span class="ident" id="7640070">q53</span><span class="op" id="7640073">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7640076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7640080">//&nbsp;2b)&nbsp;an&nbsp;integral&nbsp;value&nbsp;becomes&nbsp;a&nbsp;fraction&nbsp;depending&nbsp;on&nbsp;denominator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640150">x</span>&nbsp;<span class="op" id="7640152">=</span>&nbsp;<span class="ident" id="7640154">NewRat</span><span class="op" id="7640160">(</span><span class="num" id="7640161">10</span><span class="op" id="7640163">,</span>&nbsp;<span class="num" id="7640165">2</span><span class="op" id="7640166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640169">x</span><span class="op" id="7640170">.</span><span class="ident" id="7640171">Denom</span><span class="op" id="7640176">(</span><span class="op" id="7640177">)</span><span class="op" id="7640178">.</span><span class="ident" id="7640179">SetInt64</span><span class="op" id="7640187">(</span><span class="num" id="7640188">3</span><span class="op" id="7640189">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7640192">if</span>&nbsp;<span class="ident" id="7640195">x</span><span class="op" id="7640196">.</span><span class="ident" id="7640197">Cmp</span><span class="op" id="7640200">(</span><span class="ident" id="7640201">q53</span><span class="op" id="7640204">)</span>&nbsp;<span class="op" id="7640206">!=</span>&nbsp;<span class="num" id="7640209">0</span>&nbsp;<span class="op" id="7640211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640215">t</span><span class="op" id="7640216">.</span><span class="ident" id="7640217">Errorf</span><span class="op" id="7640223">(</span><span class="string" id="7640224">&#34;2b)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7640244">,</span>&nbsp;<span class="ident" id="7640246">x</span><span class="op" id="7640247">,</span>&nbsp;<span class="ident" id="7640249">q53</span><span class="op" id="7640252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7640255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7640259">//&nbsp;3)&nbsp;changing&nbsp;the&nbsp;numerator/denominator&nbsp;of&nbsp;a&nbsp;Rat&nbsp;changes&nbsp;the&nbsp;Rat</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640326">x</span><span class="op" id="7640327">.</span><span class="ident" id="7640328">SetFrac</span><span class="op" id="7640335">(</span><span class="ident" id="7640336">a</span><span class="op" id="7640337">,</span>&nbsp;<span class="ident" id="7640339">b</span><span class="op" id="7640340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640343">a</span>&nbsp;<span class="op" id="7640345">=</span>&nbsp;<span class="ident" id="7640347">x</span><span class="op" id="7640348">.</span><span class="ident" id="7640349">Num</span><span class="op" id="7640352">(</span><span class="op" id="7640353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640356">b</span>&nbsp;<span class="op" id="7640358">=</span>&nbsp;<span class="ident" id="7640360">x</span><span class="op" id="7640361">.</span><span class="ident" id="7640362">Denom</span><span class="op" id="7640367">(</span><span class="op" id="7640368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640371">a</span><span class="op" id="7640372">.</span><span class="ident" id="7640373">SetInt64</span><span class="op" id="7640381">(</span><span class="num" id="7640382">5</span><span class="op" id="7640383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640386">b</span><span class="op" id="7640387">.</span><span class="ident" id="7640388">SetInt64</span><span class="op" id="7640396">(</span><span class="num" id="7640397">3</span><span class="op" id="7640398">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7640401">if</span>&nbsp;<span class="ident" id="7640404">x</span><span class="op" id="7640405">.</span><span class="ident" id="7640406">Cmp</span><span class="op" id="7640409">(</span><span class="ident" id="7640410">q53</span><span class="op" id="7640413">)</span>&nbsp;<span class="op" id="7640415">!=</span>&nbsp;<span class="num" id="7640418">0</span>&nbsp;<span class="op" id="7640420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7640424">t</span><span class="op" id="7640425">.</span><span class="ident" id="7640426">Errorf</span><span class="op" id="7640432">(</span><span class="string" id="7640433">&#34;3)&nbsp;got&nbsp;%s&nbsp;want&nbsp;%s&#34;</span><span class="op" id="7640452">,</span>&nbsp;<span class="ident" id="7640454">x</span><span class="op" id="7640455">,</span>&nbsp;<span class="ident" id="7640457">q53</span><span class="op" id="7640460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7640463">}</span><br>
<span class="lineno"></span><span class="op" id="7640465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span><span class="comment" id="7640468">//&nbsp;Test&nbsp;inputs&nbsp;to&nbsp;Rat.SetString.&nbsp;&nbsp;The&nbsp;prefix&nbsp;&#34;long:&#34;&nbsp;causes&nbsp;the&nbsp;test</span><br>
<span class="lineno"></span><span class="comment" id="7640537">//&nbsp;to&nbsp;be&nbsp;skipped&nbsp;in&nbsp;--test.short&nbsp;mode.&nbsp;&nbsp;(The&nbsp;threshold&nbsp;is&nbsp;about&nbsp;500us.)</span><br>
<span class="lineno"></span><span class="keyword" id="7640609">var</span>&nbsp;<span class="ident" id="7640613">float64inputs</span>&nbsp;<span class="op" id="7640627">=</span>&nbsp;<span class="op" id="7640629">[</span><span class="op" id="7640630">]</span><span class="builtintype" id="7640631">string</span><span class="op" id="7640637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7640640">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/testfp.txt.</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7640690">//&nbsp;Table&nbsp;1:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&lt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640760">&#34;5e+125&#34;</span><span class="op" id="7640768">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640771">&#34;69e+267&#34;</span><span class="op" id="7640780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640783">&#34;999e-026&#34;</span><span class="op" id="7640793">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640796">&#34;7861e-034&#34;</span><span class="op" id="7640807">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640810">&#34;75569e-254&#34;</span><span class="op" id="7640822">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640825">&#34;928609e-261&#34;</span><span class="op" id="7640838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640841">&#34;9210917e+080&#34;</span><span class="op" id="7640855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640858">&#34;84863171e+114&#34;</span><span class="op" id="7640873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640876">&#34;653777767e+273&#34;</span><span class="op" id="7640892">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640895">&#34;5232604057e-298&#34;</span><span class="op" id="7640912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640915">&#34;27235667517e-109&#34;</span><span class="op" id="7640933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640936">&#34;653532977297e-123&#34;</span><span class="op" id="7640955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640958">&#34;3142213164987e-294&#34;</span><span class="op" id="7640978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7640981">&#34;46202199371337e-072&#34;</span><span class="op" id="7641002">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641005">&#34;231010996856685e-073&#34;</span><span class="op" id="7641027">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641030">&#34;9324754620109615e+212&#34;</span><span class="op" id="7641053">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641056">&#34;78459735791271921e+049&#34;</span><span class="op" id="7641080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641083">&#34;272104041512242479e+200&#34;</span><span class="op" id="7641108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641111">&#34;6802601037806061975e+198&#34;</span><span class="op" id="7641137">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641140">&#34;20505426358836677347e-221&#34;</span><span class="op" id="7641167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641170">&#34;836168422905420598437e-234&#34;</span><span class="op" id="7641198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641201">&#34;4891559871276714924261e+222&#34;</span><span class="op" id="7641230">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7641234">//&nbsp;Table&nbsp;2:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;53-bit&nbsp;Binary,&nbsp;&gt;&nbsp;1/2&nbsp;ULP</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641304">&#34;9e-265&#34;</span><span class="op" id="7641312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641315">&#34;85e-037&#34;</span><span class="op" id="7641324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641327">&#34;623e+100&#34;</span><span class="op" id="7641337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641340">&#34;3571e+263&#34;</span><span class="op" id="7641351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641354">&#34;81661e+153&#34;</span><span class="op" id="7641366">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641369">&#34;920657e-023&#34;</span><span class="op" id="7641382">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641385">&#34;4603285e-024&#34;</span><span class="op" id="7641399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641402">&#34;87575437e-309&#34;</span><span class="op" id="7641417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641420">&#34;245540327e+122&#34;</span><span class="op" id="7641436">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641439">&#34;6138508175e+120&#34;</span><span class="op" id="7641456">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641459">&#34;83356057653e+193&#34;</span><span class="op" id="7641477">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641480">&#34;619534293513e+124&#34;</span><span class="op" id="7641499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641502">&#34;2335141086879e+218&#34;</span><span class="op" id="7641522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641525">&#34;36167929443327e-159&#34;</span><span class="op" id="7641546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641549">&#34;609610927149051e-255&#34;</span><span class="op" id="7641571">,</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641574">&#34;3743626360493413e-165&#34;</span><span class="op" id="7641597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641600">&#34;94080055902682397e-242&#34;</span><span class="op" id="7641624">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641627">&#34;899810892172646163e+283&#34;</span><span class="op" id="7641652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641655">&#34;7120190517612959703e+120&#34;</span><span class="op" id="7641681">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641684">&#34;25188282901709339043e-252&#34;</span><span class="op" id="7641711">,</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641714">&#34;308984926168550152811e-052&#34;</span><span class="op" id="7641742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641745">&#34;6372891218502368041059e+064&#34;</span><span class="op" id="7641774">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7641778">//&nbsp;Table&nbsp;14:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&lt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641848">&#34;5e-20&#34;</span><span class="op" id="7641855">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641858">&#34;67e+14&#34;</span><span class="op" id="7641866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641869">&#34;985e+15&#34;</span><span class="op" id="7641878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641881">&#34;7693e-42&#34;</span><span class="op" id="7641891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641894">&#34;55895e-16&#34;</span><span class="op" id="7641905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641908">&#34;996622e-44&#34;</span><span class="op" id="7641920">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641923">&#34;7038531e-32&#34;</span><span class="op" id="7641936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641939">&#34;60419369e-46&#34;</span><span class="op" id="7641953">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641956">&#34;702990899e-20&#34;</span><span class="op" id="7641971">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641974">&#34;6930161142e-48&#34;</span><span class="op" id="7641990">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7641993">&#34;25933168707e+13&#34;</span><span class="op" id="7642010">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642013">&#34;596428896559e+20&#34;</span><span class="op" id="7642031">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642035">//&nbsp;Table&nbsp;15:&nbsp;Stress&nbsp;Inputs&nbsp;for&nbsp;Conversion&nbsp;to&nbsp;24-bit&nbsp;Binary,&nbsp;&gt;1/2&nbsp;ULP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642105">&#34;3e-23&#34;</span><span class="op" id="7642112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642115">&#34;57e+18&#34;</span><span class="op" id="7642123">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642126">&#34;789e-35&#34;</span><span class="op" id="7642135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642138">&#34;2539e-18&#34;</span><span class="op" id="7642148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642151">&#34;76173e+28&#34;</span><span class="op" id="7642162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642165">&#34;887745e-11&#34;</span><span class="op" id="7642177">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642180">&#34;5382571e-37&#34;</span><span class="op" id="7642193">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642196">&#34;82381273e-35&#34;</span><span class="op" id="7642210">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642213">&#34;750486563e-38&#34;</span><span class="op" id="7642228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642231">&#34;3752432815e-39&#34;</span><span class="op" id="7642247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642250">&#34;75224575729e-45&#34;</span><span class="op" id="7642267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642270">&#34;459926601011e+15&#34;</span><span class="op" id="7642288">,</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642292">//&nbsp;Constants&nbsp;plundered&nbsp;from&nbsp;strconv/atof_test.go.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642344">&#34;0&#34;</span><span class="op" id="7642347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642350">&#34;1&#34;</span><span class="op" id="7642353">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642356">&#34;+1&#34;</span><span class="op" id="7642360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642363">&#34;1e23&#34;</span><span class="op" id="7642369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642372">&#34;1E23&#34;</span><span class="op" id="7642378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642381">&#34;100000000000000000000000&#34;</span><span class="op" id="7642407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642410">&#34;1e-100&#34;</span><span class="op" id="7642418">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642421">&#34;123456700&#34;</span><span class="op" id="7642432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642435">&#34;99999999999999974834176&#34;</span><span class="op" id="7642460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642463">&#34;100000000000000000000001&#34;</span><span class="op" id="7642489">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642492">&#34;100000000000000008388608&#34;</span><span class="op" id="7642518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642521">&#34;100000000000000016777215&#34;</span><span class="op" id="7642547">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642550">&#34;100000000000000016777216&#34;</span><span class="op" id="7642576">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642579">&#34;-1&#34;</span><span class="op" id="7642583">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642586">&#34;-0.1&#34;</span><span class="op" id="7642592">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642595">&#34;-0&#34;</span><span class="op" id="7642599">,</span>&nbsp;<span class="comment" id="7642601">//&nbsp;NB:&nbsp;exception&nbsp;made&nbsp;for&nbsp;this&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642639">&#34;1e-20&#34;</span><span class="op" id="7642646">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642649">&#34;625e-3&#34;</span><span class="op" id="7642657">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642661">//&nbsp;largest&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642681">&#34;1.7976931348623157e308&#34;</span><span class="op" id="7642705">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642708">&#34;-1.7976931348623157e308&#34;</span><span class="op" id="7642733">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642736">//&nbsp;next&nbsp;float64&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642765">&#34;1.7976931348623159e308&#34;</span><span class="op" id="7642789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642792">&#34;-1.7976931348623159e308&#34;</span><span class="op" id="7642817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642820">//&nbsp;the&nbsp;border&nbsp;is&nbsp;...158079</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642848">//&nbsp;borderline&nbsp;-&nbsp;okay</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642870">&#34;1.7976931348623158e308&#34;</span><span class="op" id="7642894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642897">&#34;-1.7976931348623158e308&#34;</span><span class="op" id="7642922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7642925">//&nbsp;borderline&nbsp;-&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642952">&#34;1.797693134862315808e308&#34;</span><span class="op" id="7642978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7642981">&#34;-1.797693134862315808e308&#34;</span><span class="op" id="7643008">,</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643012">//&nbsp;a&nbsp;little&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643035">&#34;1e308&#34;</span><span class="op" id="7643042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643045">&#34;2e308&#34;</span><span class="op" id="7643052">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643055">&#34;1e309&#34;</span><span class="op" id="7643062">,</span><br>
<span class="lineno">715</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643066">//&nbsp;way&nbsp;too&nbsp;large</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643084">&#34;1e310&#34;</span><span class="op" id="7643091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643094">&#34;-1e310&#34;</span><span class="op" id="7643102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643105">&#34;1e400&#34;</span><span class="op" id="7643112">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643115">&#34;-1e400&#34;</span><span class="op" id="7643123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643126">&#34;long:1e400000&#34;</span><span class="op" id="7643141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643144">&#34;long:-1e400000&#34;</span><span class="op" id="7643160">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643164">//&nbsp;denormalized</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643181">&#34;1e-305&#34;</span><span class="op" id="7643189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643192">&#34;1e-306&#34;</span><span class="op" id="7643200">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643203">&#34;1e-307&#34;</span><span class="op" id="7643211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643214">&#34;1e-308&#34;</span><span class="op" id="7643222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643225">&#34;1e-309&#34;</span><span class="op" id="7643233">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643236">&#34;1e-310&#34;</span><span class="op" id="7643244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643247">&#34;1e-322&#34;</span><span class="op" id="7643255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643258">//&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643280">&#34;5e-324&#34;</span><span class="op" id="7643288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643291">&#34;4e-324&#34;</span><span class="op" id="7643299">,</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643302">&#34;3e-324&#34;</span><span class="op" id="7643310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643313">//&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643327">&#34;2e-324&#34;</span><span class="op" id="7643335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643338">//&nbsp;way&nbsp;too&nbsp;small</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643356">&#34;1e-350&#34;</span><span class="op" id="7643364">,</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643367">&#34;long:1e-400000&#34;</span><span class="op" id="7643383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643386">//&nbsp;way&nbsp;too&nbsp;small,&nbsp;negative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643414">&#34;-1e-350&#34;</span><span class="op" id="7643423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643426">&#34;long:-1e-400000&#34;</span><span class="op" id="7643443">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643447">//&nbsp;try&nbsp;to&nbsp;overflow&nbsp;exponent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643476">//&nbsp;[Disabled:&nbsp;too&nbsp;slow&nbsp;and&nbsp;memory-hungry&nbsp;with&nbsp;rationals.]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643535">//&nbsp;&#34;1e-4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643556">//&nbsp;&#34;1e+4294967296&#34;,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643577">//&nbsp;&#34;1e-18446744073709551616&#34;,</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643608">//&nbsp;&#34;1e+18446744073709551616&#34;,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643640">//&nbsp;http://www.exploringbinary.com/java-hangs-when-converting-2-2250738585072012e-308/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643727">&#34;2.2250738585072012e-308&#34;</span><span class="op" id="7643752">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643755">//&nbsp;http://www.exploringbinary.com/php-hangs-on-numeric-value-2-2250738585072011e-308/</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643842">&#34;2.2250738585072011e-308&#34;</span><span class="op" id="7643867">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643871">//&nbsp;A&nbsp;very&nbsp;large&nbsp;number&nbsp;(initially&nbsp;wrongly&nbsp;parsed&nbsp;by&nbsp;the&nbsp;fast&nbsp;algorithm).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7643945">&#34;4.630813248087435e+307&#34;</span><span class="op" id="7643969">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7643973">//&nbsp;A&nbsp;different&nbsp;kind&nbsp;of&nbsp;very&nbsp;large&nbsp;number.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644016">&#34;22.222222222222222&#34;</span><span class="op" id="7644036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644039">&#34;long:2.&#34;</span>&nbsp;<span class="op" id="7644049">+</span>&nbsp;<span class="ident" id="7644051">strings</span><span class="op" id="7644058">.</span><span class="ident" id="7644059">Repeat</span><span class="op" id="7644065">(</span><span class="string" id="7644066">&#34;2&#34;</span><span class="op" id="7644069">,</span>&nbsp;<span class="num" id="7644071">4000</span><span class="op" id="7644075">)</span>&nbsp;<span class="op" id="7644077">+</span>&nbsp;<span class="string" id="7644079">&#34;e+1&#34;</span><span class="op" id="7644084">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644088">//&nbsp;Exactly&nbsp;halfway&nbsp;between&nbsp;1&nbsp;and&nbsp;math.Nextafter(1,&nbsp;2).</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644144">//&nbsp;Round&nbsp;to&nbsp;even&nbsp;(down).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644170">&#34;1.00000000000000011102230246251565404236316680908203125&#34;</span><span class="op" id="7644227">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644230">//&nbsp;Slightly&nbsp;lower;&nbsp;still&nbsp;round&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644268">&#34;1.00000000000000011102230246251565404236316680908203124&#34;</span><span class="op" id="7644325">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644328">//&nbsp;Slightly&nbsp;higher;&nbsp;round&nbsp;up.</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644359">&#34;1.00000000000000011102230246251565404236316680908203126&#34;</span><span class="op" id="7644416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644419">//&nbsp;Slightly&nbsp;higher,&nbsp;but&nbsp;you&nbsp;have&nbsp;to&nbsp;read&nbsp;all&nbsp;the&nbsp;way&nbsp;to&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644485">&#34;long:1.00000000000000011102230246251565404236316680908203125&#34;</span>&nbsp;<span class="op" id="7644548">+</span>&nbsp;<span class="ident" id="7644550">strings</span><span class="op" id="7644557">.</span><span class="ident" id="7644558">Repeat</span><span class="op" id="7644564">(</span><span class="string" id="7644565">&#34;0&#34;</span><span class="op" id="7644568">,</span>&nbsp;<span class="num" id="7644570">10000</span><span class="op" id="7644575">)</span>&nbsp;<span class="op" id="7644577">+</span>&nbsp;<span class="string" id="7644579">&#34;1&#34;</span><span class="op" id="7644582">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644586">//&nbsp;Smallest&nbsp;denormal,&nbsp;2^(-1022-52)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644622">&#34;4.940656458412465441765687928682213723651e-324&#34;</span><span class="op" id="7644670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644673">//&nbsp;Half&nbsp;of&nbsp;smallest&nbsp;denormal,&nbsp;2^(-1022-53)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644717">&#34;2.470328229206232720882843964341106861825e-324&#34;</span><span class="op" id="7644765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644768">//&nbsp;A&nbsp;little&nbsp;more&nbsp;than&nbsp;the&nbsp;exact&nbsp;half&nbsp;of&nbsp;smallest&nbsp;denormal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644827">//&nbsp;2^-1075&nbsp;+&nbsp;2^-1100.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;1p-1074.)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7644872">&#34;2.470328302827751011111470718709768633275e-324&#34;</span><span class="op" id="7644920">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644923">//&nbsp;The&nbsp;exact&nbsp;halfway&nbsp;between&nbsp;smallest&nbsp;normal&nbsp;and&nbsp;largest&nbsp;denormal:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7644991">//&nbsp;2^-1022&nbsp;-&nbsp;2^-1075.&nbsp;&nbsp;(Rounds&nbsp;to&nbsp;2^-1022.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645036">&#34;2.225073858507201136057409796709131975935e-308&#34;</span><span class="op" id="7645084">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645088">&#34;1152921504606846975&#34;</span><span class="op" id="7645109">,</span>&nbsp;&nbsp;<span class="comment" id="7645112">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645128">&#34;-1152921504606846975&#34;</span><span class="op" id="7645150">,</span>&nbsp;<span class="comment" id="7645152">//&nbsp;-(1&lt;&lt;60&nbsp;-&nbsp;1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645169">&#34;1152921504606846977&#34;</span><span class="op" id="7645190">,</span>&nbsp;&nbsp;<span class="comment" id="7645193">//&nbsp;&nbsp;&nbsp;1&lt;&lt;60&nbsp;+&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645209">&#34;-1152921504606846977&#34;</span><span class="op" id="7645231">,</span>&nbsp;<span class="comment" id="7645233">//&nbsp;-(1&lt;&lt;60&nbsp;+&nbsp;1)</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7645251">&#34;1/3&#34;</span><span class="op" id="7645256">,</span><br>
<span class="lineno"></span><span class="op" id="7645258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7645261">//&nbsp;isFinite&nbsp;reports&nbsp;whether&nbsp;f&nbsp;represents&nbsp;a&nbsp;finite&nbsp;rational&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="7645327">//&nbsp;It&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;!math.IsNan(f)&nbsp;&amp;&amp;&nbsp;!math.IsInf(f,&nbsp;0).</span><br>
<span class="lineno">795</span><span class="keyword" id="7645387">func</span>&nbsp;<span class="ident" id="7645392">isFinite</span><span class="op" id="7645400">(</span><span class="ident" id="7645401">f</span>&nbsp;<span class="builtintype" id="7645403">float64</span><span class="op" id="7645410">)</span>&nbsp;<span class="builtintype" id="7645412">bool</span>&nbsp;<span class="op" id="7645417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645420">return</span>&nbsp;<span class="ident" id="7645427">math</span><span class="op" id="7645431">.</span><span class="ident" id="7645432">Abs</span><span class="op" id="7645435">(</span><span class="ident" id="7645436">f</span><span class="op" id="7645437">)</span>&nbsp;<span class="op" id="7645439">&lt;=</span>&nbsp;<span class="ident" id="7645442">math</span><span class="op" id="7645446">.</span><span class="ident" id="7645447">MaxFloat64</span><br>
<span class="lineno"></span><span class="op" id="7645458">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7645461">func</span>&nbsp;<span class="ident" id="7645466">TestFloat32SpecialCases</span><span class="op" id="7645489">(</span><span class="ident" id="7645490">t</span>&nbsp;<span class="op" id="7645492">*</span><span class="ident" id="7645493">testing</span><span class="op" id="7645500">.</span><span class="ident" id="7645501">T</span><span class="op" id="7645502">)</span>&nbsp;<span class="op" id="7645504">{</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645507">for</span>&nbsp;<span class="ident" id="7645511">_</span><span class="op" id="7645512">,</span>&nbsp;<span class="ident" id="7645514">input</span>&nbsp;<span class="op" id="7645520">:=</span>&nbsp;<span class="keyword" id="7645523">range</span>&nbsp;<span class="ident" id="7645529">float64inputs</span>&nbsp;<span class="op" id="7645543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645547">if</span>&nbsp;<span class="ident" id="7645550">strings</span><span class="op" id="7645557">.</span><span class="ident" id="7645558">HasPrefix</span><span class="op" id="7645567">(</span><span class="ident" id="7645568">input</span><span class="op" id="7645573">,</span>&nbsp;<span class="string" id="7645575">&#34;long:&#34;</span><span class="op" id="7645582">)</span>&nbsp;<span class="op" id="7645584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645589">if</span>&nbsp;<span class="ident" id="7645592">testing</span><span class="op" id="7645599">.</span><span class="ident" id="7645600">Short</span><span class="op" id="7645605">(</span><span class="op" id="7645606">)</span>&nbsp;<span class="op" id="7645608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645614">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7645626">}</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7645631">input</span>&nbsp;<span class="op" id="7645637">=</span>&nbsp;<span class="ident" id="7645639">input</span><span class="op" id="7645644">[</span><span class="builtinfunc" id="7645645">len</span><span class="op" id="7645648">(</span><span class="string" id="7645649">&#34;long:&#34;</span><span class="op" id="7645656">)</span><span class="op" id="7645657">:</span><span class="op" id="7645658">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7645662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7645667">r</span><span class="op" id="7645668">,</span>&nbsp;<span class="ident" id="7645670">ok</span>&nbsp;<span class="op" id="7645673">:=</span>&nbsp;<span class="builtinfunc" id="7645676">new</span><span class="op" id="7645679">(</span><span class="ident" id="7645680">Rat</span><span class="op" id="7645683">)</span><span class="op" id="7645684">.</span><span class="ident" id="7645685">SetString</span><span class="op" id="7645694">(</span><span class="ident" id="7645695">input</span><span class="op" id="7645700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645704">if</span>&nbsp;<span class="op" id="7645707">!</span><span class="ident" id="7645708">ok</span>&nbsp;<span class="op" id="7645711">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7645716">t</span><span class="op" id="7645717">.</span><span class="ident" id="7645718">Errorf</span><span class="op" id="7645724">(</span><span class="string" id="7645725">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7645751">,</span>&nbsp;<span class="ident" id="7645753">input</span><span class="op" id="7645758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645763">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7645774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7645778">f</span><span class="op" id="7645779">,</span>&nbsp;<span class="ident" id="7645781">exact</span>&nbsp;<span class="op" id="7645787">:=</span>&nbsp;<span class="ident" id="7645790">r</span><span class="op" id="7645791">.</span><span class="ident" id="7645792">Float32</span><span class="op" id="7645799">(</span><span class="op" id="7645800">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7645805">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float32&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7645860">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7645901">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7645963">if</span>&nbsp;<span class="op" id="7645966">!</span><span class="ident" id="7645967">strings</span><span class="op" id="7645974">.</span><span class="ident" id="7645975">Contains</span><span class="op" id="7645983">(</span><span class="ident" id="7645984">input</span><span class="op" id="7645989">,</span>&nbsp;<span class="string" id="7645991">&#34;/&#34;</span><span class="op" id="7645994">)</span>&nbsp;<span class="op" id="7645996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646001">e64</span><span class="op" id="7646004">,</span>&nbsp;<span class="ident" id="7646006">_</span>&nbsp;<span class="op" id="7646008">:=</span>&nbsp;<span class="ident" id="7646011">strconv</span><span class="op" id="7646018">.</span><span class="ident" id="7646019">ParseFloat</span><span class="op" id="7646029">(</span><span class="ident" id="7646030">input</span><span class="op" id="7646035">,</span>&nbsp;<span class="num" id="7646037">32</span><span class="op" id="7646039">)</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646044">e</span>&nbsp;<span class="op" id="7646046">:=</span>&nbsp;<span class="builtintype" id="7646049">float32</span><span class="op" id="7646056">(</span><span class="ident" id="7646057">e64</span><span class="op" id="7646060">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646066">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646109">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646159">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646205">switch</span>&nbsp;<span class="op" id="7646212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646217">case</span>&nbsp;<span class="ident" id="7646222">math</span><span class="op" id="7646226">.</span><span class="ident" id="7646227">Float32bits</span><span class="op" id="7646238">(</span><span class="ident" id="7646239">e</span><span class="op" id="7646240">)</span>&nbsp;<span class="op" id="7646242">==</span>&nbsp;<span class="ident" id="7646245">math</span><span class="op" id="7646249">.</span><span class="ident" id="7646250">Float32bits</span><span class="op" id="7646261">(</span><span class="ident" id="7646262">f</span><span class="op" id="7646263">)</span><span class="op" id="7646264">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646270">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646295">case</span>&nbsp;<span class="ident" id="7646300">f</span>&nbsp;<span class="op" id="7646302">==</span>&nbsp;<span class="num" id="7646305">0</span>&nbsp;<span class="op" id="7646307">&amp;&amp;</span>&nbsp;<span class="ident" id="7646310">r</span><span class="op" id="7646311">.</span><span class="ident" id="7646312">Num</span><span class="op" id="7646315">(</span><span class="op" id="7646316">)</span><span class="op" id="7646317">.</span><span class="ident" id="7646318">BitLen</span><span class="op" id="7646324">(</span><span class="op" id="7646325">)</span>&nbsp;<span class="op" id="7646327">==</span>&nbsp;<span class="num" id="7646330">0</span><span class="op" id="7646331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646337">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646392">default</span><span class="op" id="7646399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646405">t</span><span class="op" id="7646406">.</span><span class="ident" id="7646407">Errorf</span><span class="op" id="7646413">(</span><span class="string" id="7646414">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7646474">,</span>&nbsp;<span class="ident" id="7646476">input</span><span class="op" id="7646481">,</span>&nbsp;<span class="ident" id="7646483">e</span><span class="op" id="7646484">,</span>&nbsp;<span class="ident" id="7646486">e</span><span class="op" id="7646487">,</span>&nbsp;<span class="ident" id="7646489">f</span><span class="op" id="7646490">,</span>&nbsp;<span class="ident" id="7646492">f</span><span class="op" id="7646493">,</span>&nbsp;<span class="ident" id="7646495">f</span><span class="op" id="7646496">-</span><span class="ident" id="7646497">e</span><span class="op" id="7646498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7646503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7646507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646512">if</span>&nbsp;<span class="op" id="7646515">!</span><span class="ident" id="7646516">isFinite</span><span class="op" id="7646524">(</span><span class="builtintype" id="7646525">float64</span><span class="op" id="7646532">(</span><span class="ident" id="7646533">f</span><span class="op" id="7646534">)</span><span class="op" id="7646535">)</span>&nbsp;<span class="op" id="7646537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646542">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7646553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646558">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646602">if</span>&nbsp;<span class="op" id="7646605">!</span><span class="ident" id="7646606">checkIsBestApprox32</span><span class="op" id="7646625">(</span><span class="ident" id="7646626">t</span><span class="op" id="7646627">,</span>&nbsp;<span class="ident" id="7646629">f</span><span class="op" id="7646630">,</span>&nbsp;<span class="ident" id="7646632">r</span><span class="op" id="7646633">)</span>&nbsp;<span class="op" id="7646635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646640">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646674">t</span><span class="op" id="7646675">.</span><span class="ident" id="7646676">Errorf</span><span class="op" id="7646682">(</span><span class="string" id="7646683">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7646699">,</span>&nbsp;<span class="ident" id="7646701">input</span><span class="op" id="7646706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7646710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646715">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646761">checkNonLossyRoundtrip32</span><span class="op" id="7646785">(</span><span class="ident" id="7646786">t</span><span class="op" id="7646787">,</span>&nbsp;<span class="ident" id="7646789">f</span><span class="op" id="7646790">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7646795">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7646841">if</span>&nbsp;<span class="ident" id="7646844">wasExact</span>&nbsp;<span class="op" id="7646853">:=</span>&nbsp;<span class="builtinfunc" id="7646856">new</span><span class="op" id="7646859">(</span><span class="ident" id="7646860">Rat</span><span class="op" id="7646863">)</span><span class="op" id="7646864">.</span><span class="ident" id="7646865">SetFloat64</span><span class="op" id="7646875">(</span><span class="builtintype" id="7646876">float64</span><span class="op" id="7646883">(</span><span class="ident" id="7646884">f</span><span class="op" id="7646885">)</span><span class="op" id="7646886">)</span><span class="op" id="7646887">.</span><span class="ident" id="7646888">Cmp</span><span class="op" id="7646891">(</span><span class="ident" id="7646892">r</span><span class="op" id="7646893">)</span>&nbsp;<span class="op" id="7646895">==</span>&nbsp;<span class="num" id="7646898">0</span><span class="op" id="7646899">;</span>&nbsp;<span class="ident" id="7646901">wasExact</span>&nbsp;<span class="op" id="7646910">!=</span>&nbsp;<span class="ident" id="7646913">exact</span>&nbsp;<span class="op" id="7646919">{</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7646924">t</span><span class="op" id="7646925">.</span><span class="ident" id="7646926">Errorf</span><span class="op" id="7646932">(</span><span class="string" id="7646933">&#34;Rat.SetString(%q).Float32().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7646982">,</span>&nbsp;<span class="ident" id="7646984">input</span><span class="op" id="7646989">,</span>&nbsp;<span class="ident" id="7646991">exact</span><span class="op" id="7646996">,</span>&nbsp;<span class="ident" id="7646998">wasExact</span><span class="op" id="7647006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7647010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7647013">}</span><br>
<span class="lineno"></span><span class="op" id="7647015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">855</span><span class="keyword" id="7647018">func</span>&nbsp;<span class="ident" id="7647023">TestFloat64SpecialCases</span><span class="op" id="7647046">(</span><span class="ident" id="7647047">t</span>&nbsp;<span class="op" id="7647049">*</span><span class="ident" id="7647050">testing</span><span class="op" id="7647057">.</span><span class="ident" id="7647058">T</span><span class="op" id="7647059">)</span>&nbsp;<span class="op" id="7647061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647064">for</span>&nbsp;<span class="ident" id="7647068">_</span><span class="op" id="7647069">,</span>&nbsp;<span class="ident" id="7647071">input</span>&nbsp;<span class="op" id="7647077">:=</span>&nbsp;<span class="keyword" id="7647080">range</span>&nbsp;<span class="ident" id="7647086">float64inputs</span>&nbsp;<span class="op" id="7647100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647104">if</span>&nbsp;<span class="ident" id="7647107">strings</span><span class="op" id="7647114">.</span><span class="ident" id="7647115">HasPrefix</span><span class="op" id="7647124">(</span><span class="ident" id="7647125">input</span><span class="op" id="7647130">,</span>&nbsp;<span class="string" id="7647132">&#34;long:&#34;</span><span class="op" id="7647139">)</span>&nbsp;<span class="op" id="7647141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647146">if</span>&nbsp;<span class="ident" id="7647149">testing</span><span class="op" id="7647156">.</span><span class="ident" id="7647157">Short</span><span class="op" id="7647162">(</span><span class="op" id="7647163">)</span>&nbsp;<span class="op" id="7647165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647171">continue</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7647183">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647188">input</span>&nbsp;<span class="op" id="7647194">=</span>&nbsp;<span class="ident" id="7647196">input</span><span class="op" id="7647201">[</span><span class="builtinfunc" id="7647202">len</span><span class="op" id="7647205">(</span><span class="string" id="7647206">&#34;long:&#34;</span><span class="op" id="7647213">)</span><span class="op" id="7647214">:</span><span class="op" id="7647215">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7647219">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647224">r</span><span class="op" id="7647225">,</span>&nbsp;<span class="ident" id="7647227">ok</span>&nbsp;<span class="op" id="7647230">:=</span>&nbsp;<span class="builtinfunc" id="7647233">new</span><span class="op" id="7647236">(</span><span class="ident" id="7647237">Rat</span><span class="op" id="7647240">)</span><span class="op" id="7647241">.</span><span class="ident" id="7647242">SetString</span><span class="op" id="7647251">(</span><span class="ident" id="7647252">input</span><span class="op" id="7647257">)</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647261">if</span>&nbsp;<span class="op" id="7647264">!</span><span class="ident" id="7647265">ok</span>&nbsp;<span class="op" id="7647268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647273">t</span><span class="op" id="7647274">.</span><span class="ident" id="7647275">Errorf</span><span class="op" id="7647281">(</span><span class="string" id="7647282">&#34;Rat.SetString(%q)&nbsp;failed&#34;</span><span class="op" id="7647308">,</span>&nbsp;<span class="ident" id="7647310">input</span><span class="op" id="7647315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647320">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7647331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647335">f</span><span class="op" id="7647336">,</span>&nbsp;<span class="ident" id="7647338">exact</span>&nbsp;<span class="op" id="7647344">:=</span>&nbsp;<span class="ident" id="7647347">r</span><span class="op" id="7647348">.</span><span class="ident" id="7647349">Float64</span><span class="op" id="7647356">(</span><span class="op" id="7647357">)</span><br>
<span class="lineno">870</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647362">//&nbsp;1.&nbsp;Check&nbsp;string&nbsp;-&gt;&nbsp;Rat&nbsp;-&gt;&nbsp;float64&nbsp;conversions&nbsp;are</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647417">//&nbsp;consistent&nbsp;with&nbsp;strconv.ParseFloat.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647458">//&nbsp;Skip&nbsp;this&nbsp;check&nbsp;if&nbsp;the&nbsp;input&nbsp;uses&nbsp;&#34;a/b&#34;&nbsp;rational&nbsp;syntax.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647520">if</span>&nbsp;<span class="op" id="7647523">!</span><span class="ident" id="7647524">strings</span><span class="op" id="7647531">.</span><span class="ident" id="7647532">Contains</span><span class="op" id="7647540">(</span><span class="ident" id="7647541">input</span><span class="op" id="7647546">,</span>&nbsp;<span class="string" id="7647548">&#34;/&#34;</span><span class="op" id="7647551">)</span>&nbsp;<span class="op" id="7647553">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647558">e</span><span class="op" id="7647559">,</span>&nbsp;<span class="ident" id="7647561">_</span>&nbsp;<span class="op" id="7647563">:=</span>&nbsp;<span class="ident" id="7647566">strconv</span><span class="op" id="7647573">.</span><span class="ident" id="7647574">ParseFloat</span><span class="op" id="7647584">(</span><span class="ident" id="7647585">input</span><span class="op" id="7647590">,</span>&nbsp;<span class="num" id="7647592">64</span><span class="op" id="7647594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647600">//&nbsp;Careful:&nbsp;negative&nbsp;Rats&nbsp;too&nbsp;small&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647643">//&nbsp;float64&nbsp;become&nbsp;-0,&nbsp;but&nbsp;Rat&nbsp;obviously&nbsp;cannot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647693">//&nbsp;preserve&nbsp;the&nbsp;sign&nbsp;from&nbsp;SetString(&#34;-0&#34;).</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647739">switch</span>&nbsp;<span class="op" id="7647746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647751">case</span>&nbsp;<span class="ident" id="7647756">math</span><span class="op" id="7647760">.</span><span class="ident" id="7647761">Float64bits</span><span class="op" id="7647772">(</span><span class="ident" id="7647773">e</span><span class="op" id="7647774">)</span>&nbsp;<span class="op" id="7647776">==</span>&nbsp;<span class="ident" id="7647779">math</span><span class="op" id="7647783">.</span><span class="ident" id="7647784">Float64bits</span><span class="op" id="7647795">(</span><span class="ident" id="7647796">f</span><span class="op" id="7647797">)</span><span class="op" id="7647798">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647804">//&nbsp;Ok:&nbsp;bitwise&nbsp;equal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647829">case</span>&nbsp;<span class="ident" id="7647834">f</span>&nbsp;<span class="op" id="7647836">==</span>&nbsp;<span class="num" id="7647839">0</span>&nbsp;<span class="op" id="7647841">&amp;&amp;</span>&nbsp;<span class="ident" id="7647844">r</span><span class="op" id="7647845">.</span><span class="ident" id="7647846">Num</span><span class="op" id="7647849">(</span><span class="op" id="7647850">)</span><span class="op" id="7647851">.</span><span class="ident" id="7647852">BitLen</span><span class="op" id="7647858">(</span><span class="op" id="7647859">)</span>&nbsp;<span class="op" id="7647861">==</span>&nbsp;<span class="num" id="7647864">0</span><span class="op" id="7647865">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7647871">//&nbsp;Ok:&nbsp;Rat(0)&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;both&nbsp;+/-&nbsp;float64(0).</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7647926">default</span><span class="op" id="7647933">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7647939">t</span><span class="op" id="7647940">.</span><span class="ident" id="7647941">Errorf</span><span class="op" id="7647947">(</span><span class="string" id="7647948">&#34;strconv.ParseFloat(%q)&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;want&nbsp;%g&nbsp;(%b);&nbsp;delta&nbsp;=&nbsp;%g&#34;</span><span class="op" id="7648008">,</span>&nbsp;<span class="ident" id="7648010">input</span><span class="op" id="7648015">,</span>&nbsp;<span class="ident" id="7648017">e</span><span class="op" id="7648018">,</span>&nbsp;<span class="ident" id="7648020">e</span><span class="op" id="7648021">,</span>&nbsp;<span class="ident" id="7648023">f</span><span class="op" id="7648024">,</span>&nbsp;<span class="ident" id="7648026">f</span><span class="op" id="7648027">,</span>&nbsp;<span class="ident" id="7648029">f</span><span class="op" id="7648030">-</span><span class="ident" id="7648031">e</span><span class="op" id="7648032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648041">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648046">if</span>&nbsp;<span class="op" id="7648049">!</span><span class="ident" id="7648050">isFinite</span><span class="op" id="7648058">(</span><span class="ident" id="7648059">f</span><span class="op" id="7648060">)</span>&nbsp;<span class="op" id="7648062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648067">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648078">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648083">//&nbsp;2.&nbsp;Check&nbsp;f&nbsp;is&nbsp;best&nbsp;approximation&nbsp;to&nbsp;r.</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648127">if</span>&nbsp;<span class="op" id="7648130">!</span><span class="ident" id="7648131">checkIsBestApprox64</span><span class="op" id="7648150">(</span><span class="ident" id="7648151">t</span><span class="op" id="7648152">,</span>&nbsp;<span class="ident" id="7648154">f</span><span class="op" id="7648155">,</span>&nbsp;<span class="ident" id="7648157">r</span><span class="op" id="7648158">)</span>&nbsp;<span class="op" id="7648160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648165">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7648199">t</span><span class="op" id="7648200">.</span><span class="ident" id="7648201">Errorf</span><span class="op" id="7648207">(</span><span class="string" id="7648208">&#34;(input&nbsp;was&nbsp;%q)&#34;</span><span class="op" id="7648224">,</span>&nbsp;<span class="ident" id="7648226">input</span><span class="op" id="7648231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648240">//&nbsp;3.&nbsp;Check&nbsp;f-&gt;R-&gt;f&nbsp;roundtrip&nbsp;is&nbsp;non-lossy.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7648286">checkNonLossyRoundtrip64</span><span class="op" id="7648310">(</span><span class="ident" id="7648311">t</span><span class="op" id="7648312">,</span>&nbsp;<span class="ident" id="7648314">f</span><span class="op" id="7648315">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648320">//&nbsp;4.&nbsp;Check&nbsp;exactness&nbsp;using&nbsp;slow&nbsp;algorithm.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648366">if</span>&nbsp;<span class="ident" id="7648369">wasExact</span>&nbsp;<span class="op" id="7648378">:=</span>&nbsp;<span class="builtinfunc" id="7648381">new</span><span class="op" id="7648384">(</span><span class="ident" id="7648385">Rat</span><span class="op" id="7648388">)</span><span class="op" id="7648389">.</span><span class="ident" id="7648390">SetFloat64</span><span class="op" id="7648400">(</span><span class="ident" id="7648401">f</span><span class="op" id="7648402">)</span><span class="op" id="7648403">.</span><span class="ident" id="7648404">Cmp</span><span class="op" id="7648407">(</span><span class="ident" id="7648408">r</span><span class="op" id="7648409">)</span>&nbsp;<span class="op" id="7648411">==</span>&nbsp;<span class="num" id="7648414">0</span><span class="op" id="7648415">;</span>&nbsp;<span class="ident" id="7648417">wasExact</span>&nbsp;<span class="op" id="7648426">!=</span>&nbsp;<span class="ident" id="7648429">exact</span>&nbsp;<span class="op" id="7648435">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7648440">t</span><span class="op" id="7648441">.</span><span class="ident" id="7648442">Errorf</span><span class="op" id="7648448">(</span><span class="string" id="7648449">&#34;Rat.SetString(%q).Float64().exact&nbsp;=&nbsp;%t,&nbsp;want&nbsp;%t&#34;</span><span class="op" id="7648498">,</span>&nbsp;<span class="ident" id="7648500">input</span><span class="op" id="7648505">,</span>&nbsp;<span class="ident" id="7648507">exact</span><span class="op" id="7648512">,</span>&nbsp;<span class="ident" id="7648514">wasExact</span><span class="op" id="7648522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648529">}</span><br>
<span class="lineno"></span><span class="op" id="7648531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">910</span><span class="keyword" id="7648534">func</span>&nbsp;<span class="ident" id="7648539">TestFloat32Distribution</span><span class="op" id="7648562">(</span><span class="ident" id="7648563">t</span>&nbsp;<span class="op" id="7648565">*</span><span class="ident" id="7648566">testing</span><span class="op" id="7648573">.</span><span class="ident" id="7648574">T</span><span class="op" id="7648575">)</span>&nbsp;<span class="op" id="7648577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648580">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648640">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float32&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float32()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7648700">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float32&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648752">var</span>&nbsp;<span class="ident" id="7648756">add</span>&nbsp;<span class="op" id="7648760">=</span>&nbsp;<span class="op" id="7648762">[</span><span class="op" id="7648763">]</span><span class="ident" id="7648764">int64</span><span class="op" id="7648769">{</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648773">0</span><span class="op" id="7648774">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648778">1</span><span class="op" id="7648779">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648783">3</span><span class="op" id="7648784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648788">5</span><span class="op" id="7648789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648793">7</span><span class="op" id="7648794">,</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648798">9</span><span class="op" id="7648799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7648803">11</span><span class="op" id="7648805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648811">var</span>&nbsp;<span class="ident" id="7648815">winc</span><span class="op" id="7648819">,</span>&nbsp;<span class="ident" id="7648821">einc</span>&nbsp;<span class="op" id="7648826">=</span>&nbsp;<span class="ident" id="7648828">uint64</span><span class="op" id="7648834">(</span><span class="num" id="7648835">1</span><span class="op" id="7648836">)</span><span class="op" id="7648837">,</span>&nbsp;<span class="num" id="7648839">1</span>&nbsp;<span class="comment" id="7648841">//&nbsp;soak&nbsp;test&nbsp;(~1.5s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648873">if</span>&nbsp;<span class="ident" id="7648876">testing</span><span class="op" id="7648883">.</span><span class="ident" id="7648884">Short</span><span class="op" id="7648889">(</span><span class="op" id="7648890">)</span>&nbsp;<span class="op" id="7648892">{</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7648896">winc</span><span class="op" id="7648900">,</span>&nbsp;<span class="ident" id="7648902">einc</span>&nbsp;<span class="op" id="7648907">=</span>&nbsp;<span class="num" id="7648909">5</span><span class="op" id="7648910">,</span>&nbsp;<span class="num" id="7648912">15</span>&nbsp;<span class="comment" id="7648915">//&nbsp;quick&nbsp;test&nbsp;(~60ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7648948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648952">for</span>&nbsp;<span class="ident" id="7648956">_</span><span class="op" id="7648957">,</span>&nbsp;<span class="ident" id="7648959">sign</span>&nbsp;<span class="op" id="7648964">:=</span>&nbsp;<span class="keyword" id="7648967">range</span>&nbsp;<span class="string" id="7648973">&#34;+-&#34;</span>&nbsp;<span class="op" id="7648978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7648982">for</span>&nbsp;<span class="ident" id="7648986">_</span><span class="op" id="7648987">,</span>&nbsp;<span class="ident" id="7648989">a</span>&nbsp;<span class="op" id="7648991">:=</span>&nbsp;<span class="keyword" id="7648994">range</span>&nbsp;<span class="ident" id="7649000">add</span>&nbsp;<span class="op" id="7649004">{</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649009">for</span>&nbsp;<span class="ident" id="7649013">wid</span>&nbsp;<span class="op" id="7649017">:=</span>&nbsp;<span class="ident" id="7649020">uint64</span><span class="op" id="7649026">(</span><span class="num" id="7649027">0</span><span class="op" id="7649028">)</span><span class="op" id="7649029">;</span>&nbsp;<span class="ident" id="7649031">wid</span>&nbsp;<span class="op" id="7649035">&lt;</span>&nbsp;<span class="num" id="7649037">30</span><span class="op" id="7649039">;</span>&nbsp;<span class="ident" id="7649041">wid</span>&nbsp;<span class="op" id="7649045">+=</span>&nbsp;<span class="ident" id="7649048">winc</span>&nbsp;<span class="op" id="7649053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649059">b</span>&nbsp;<span class="op" id="7649061">:=</span>&nbsp;<span class="num" id="7649064">1</span><span class="op" id="7649065">&lt;&lt;</span><span class="ident" id="7649067">wid</span>&nbsp;<span class="op" id="7649071">+</span>&nbsp;<span class="ident" id="7649073">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649079">if</span>&nbsp;<span class="ident" id="7649082">sign</span>&nbsp;<span class="op" id="7649087">==</span>&nbsp;<span class="string" id="7649090">&#39;-&#39;</span>&nbsp;<span class="op" id="7649094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649101">b</span>&nbsp;<span class="op" id="7649103">=</span>&nbsp;<span class="op" id="7649105">-</span><span class="ident" id="7649106">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649112">}</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649118">for</span>&nbsp;<span class="ident" id="7649122">exp</span>&nbsp;<span class="op" id="7649126">:=</span>&nbsp;<span class="op" id="7649129">-</span><span class="num" id="7649130">150</span><span class="op" id="7649133">;</span>&nbsp;<span class="ident" id="7649135">exp</span>&nbsp;<span class="op" id="7649139">&lt;</span>&nbsp;<span class="num" id="7649141">150</span><span class="op" id="7649144">;</span>&nbsp;<span class="ident" id="7649146">exp</span>&nbsp;<span class="op" id="7649150">+=</span>&nbsp;<span class="ident" id="7649153">einc</span>&nbsp;<span class="op" id="7649158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649165">num</span><span class="op" id="7649168">,</span>&nbsp;<span class="ident" id="7649170">den</span>&nbsp;<span class="op" id="7649174">:=</span>&nbsp;<span class="ident" id="7649177">NewInt</span><span class="op" id="7649183">(</span><span class="ident" id="7649184">b</span><span class="op" id="7649185">)</span><span class="op" id="7649186">,</span>&nbsp;<span class="ident" id="7649188">NewInt</span><span class="op" id="7649194">(</span><span class="num" id="7649195">1</span><span class="op" id="7649196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649203">if</span>&nbsp;<span class="ident" id="7649206">exp</span>&nbsp;<span class="op" id="7649210">&gt;</span>&nbsp;<span class="num" id="7649212">0</span>&nbsp;<span class="op" id="7649214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649222">num</span><span class="op" id="7649225">.</span><span class="ident" id="7649226">Lsh</span><span class="op" id="7649229">(</span><span class="ident" id="7649230">num</span><span class="op" id="7649233">,</span>&nbsp;<span class="builtintype" id="7649235">uint</span><span class="op" id="7649239">(</span><span class="ident" id="7649240">exp</span><span class="op" id="7649243">)</span><span class="op" id="7649244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649251">}</span>&nbsp;<span class="keyword" id="7649253">else</span>&nbsp;<span class="op" id="7649258">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649266">den</span><span class="op" id="7649269">.</span><span class="ident" id="7649270">Lsh</span><span class="op" id="7649273">(</span><span class="ident" id="7649274">den</span><span class="op" id="7649277">,</span>&nbsp;<span class="builtintype" id="7649279">uint</span><span class="op" id="7649283">(</span><span class="op" id="7649284">-</span><span class="ident" id="7649285">exp</span><span class="op" id="7649288">)</span><span class="op" id="7649289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649303">r</span>&nbsp;<span class="op" id="7649305">:=</span>&nbsp;<span class="builtinfunc" id="7649308">new</span><span class="op" id="7649311">(</span><span class="ident" id="7649312">Rat</span><span class="op" id="7649315">)</span><span class="op" id="7649316">.</span><span class="ident" id="7649317">SetFrac</span><span class="op" id="7649324">(</span><span class="ident" id="7649325">num</span><span class="op" id="7649328">,</span>&nbsp;<span class="ident" id="7649330">den</span><span class="op" id="7649333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649340">f</span><span class="op" id="7649341">,</span>&nbsp;<span class="ident" id="7649343">_</span>&nbsp;<span class="op" id="7649345">:=</span>&nbsp;<span class="ident" id="7649348">r</span><span class="op" id="7649349">.</span><span class="ident" id="7649350">Float32</span><span class="op" id="7649357">(</span><span class="op" id="7649358">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649366">if</span>&nbsp;<span class="op" id="7649369">!</span><span class="ident" id="7649370">checkIsBestApprox32</span><span class="op" id="7649389">(</span><span class="ident" id="7649390">t</span><span class="op" id="7649391">,</span>&nbsp;<span class="ident" id="7649393">f</span><span class="op" id="7649394">,</span>&nbsp;<span class="ident" id="7649396">r</span><span class="op" id="7649397">)</span>&nbsp;<span class="op" id="7649399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7649407">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649444">t</span><span class="op" id="7649445">.</span><span class="ident" id="7649446">Errorf</span><span class="op" id="7649452">(</span><span class="string" id="7649453">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7649516">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649525">b</span><span class="op" id="7649526">,</span>&nbsp;<span class="ident" id="7649528">exp</span><span class="op" id="7649531">,</span>&nbsp;<span class="ident" id="7649533">f</span><span class="op" id="7649534">,</span>&nbsp;<span class="ident" id="7649536">f</span><span class="op" id="7649537">,</span>&nbsp;<span class="ident" id="7649539">math</span><span class="op" id="7649543">.</span><span class="ident" id="7649544">Ldexp</span><span class="op" id="7649549">(</span><span class="builtintype" id="7649550">float64</span><span class="op" id="7649557">(</span><span class="ident" id="7649558">b</span><span class="op" id="7649559">)</span><span class="op" id="7649560">,</span>&nbsp;<span class="ident" id="7649562">exp</span><span class="op" id="7649565">)</span><span class="op" id="7649566">,</span>&nbsp;<span class="ident" id="7649568">r</span><span class="op" id="7649569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649576">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649584">checkNonLossyRoundtrip32</span><span class="op" id="7649608">(</span><span class="ident" id="7649609">t</span><span class="op" id="7649610">,</span>&nbsp;<span class="ident" id="7649612">f</span><span class="op" id="7649613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649628">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649631">}</span><br>
<span class="lineno"></span><span class="op" id="7649633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7649636">func</span>&nbsp;<span class="ident" id="7649641">TestFloat64Distribution</span><span class="op" id="7649664">(</span><span class="ident" id="7649665">t</span>&nbsp;<span class="op" id="7649667">*</span><span class="ident" id="7649668">testing</span><span class="op" id="7649675">.</span><span class="ident" id="7649676">T</span><span class="op" id="7649677">)</span>&nbsp;<span class="op" id="7649679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7649682">//&nbsp;Generate&nbsp;a&nbsp;distribution&nbsp;of&nbsp;(sign,&nbsp;mantissa,&nbsp;exp)&nbsp;values</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7649742">//&nbsp;broader&nbsp;than&nbsp;the&nbsp;float64&nbsp;range,&nbsp;and&nbsp;check&nbsp;Rat.Float64()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7649802">//&nbsp;always&nbsp;picks&nbsp;the&nbsp;closest&nbsp;float64&nbsp;approximation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649854">var</span>&nbsp;<span class="ident" id="7649858">add</span>&nbsp;<span class="op" id="7649862">=</span>&nbsp;<span class="op" id="7649864">[</span><span class="op" id="7649865">]</span><span class="ident" id="7649866">int64</span><span class="op" id="7649871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649875">0</span><span class="op" id="7649876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649880">1</span><span class="op" id="7649881">,</span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649885">3</span><span class="op" id="7649886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649890">5</span><span class="op" id="7649891">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649895">7</span><span class="op" id="7649896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649900">9</span><span class="op" id="7649901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7649905">11</span><span class="op" id="7649907">,</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7649910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649913">var</span>&nbsp;<span class="ident" id="7649917">winc</span><span class="op" id="7649921">,</span>&nbsp;<span class="ident" id="7649923">einc</span>&nbsp;<span class="op" id="7649928">=</span>&nbsp;<span class="ident" id="7649930">uint64</span><span class="op" id="7649936">(</span><span class="num" id="7649937">1</span><span class="op" id="7649938">)</span><span class="op" id="7649939">,</span>&nbsp;<span class="num" id="7649941">1</span>&nbsp;<span class="comment" id="7649943">//&nbsp;soak&nbsp;test&nbsp;(~75s&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7649974">if</span>&nbsp;<span class="ident" id="7649977">testing</span><span class="op" id="7649984">.</span><span class="ident" id="7649985">Short</span><span class="op" id="7649990">(</span><span class="op" id="7649991">)</span>&nbsp;<span class="op" id="7649993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7649997">winc</span><span class="op" id="7650001">,</span>&nbsp;<span class="ident" id="7650003">einc</span>&nbsp;<span class="op" id="7650008">=</span>&nbsp;<span class="num" id="7650010">10</span><span class="op" id="7650012">,</span>&nbsp;<span class="num" id="7650014">500</span>&nbsp;<span class="comment" id="7650018">//&nbsp;quick&nbsp;test&nbsp;(~12ms&nbsp;on&nbsp;x86-64)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650051">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650055">for</span>&nbsp;<span class="ident" id="7650059">_</span><span class="op" id="7650060">,</span>&nbsp;<span class="ident" id="7650062">sign</span>&nbsp;<span class="op" id="7650067">:=</span>&nbsp;<span class="keyword" id="7650070">range</span>&nbsp;<span class="string" id="7650076">&#34;+-&#34;</span>&nbsp;<span class="op" id="7650081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650085">for</span>&nbsp;<span class="ident" id="7650089">_</span><span class="op" id="7650090">,</span>&nbsp;<span class="ident" id="7650092">a</span>&nbsp;<span class="op" id="7650094">:=</span>&nbsp;<span class="keyword" id="7650097">range</span>&nbsp;<span class="ident" id="7650103">add</span>&nbsp;<span class="op" id="7650107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650112">for</span>&nbsp;<span class="ident" id="7650116">wid</span>&nbsp;<span class="op" id="7650120">:=</span>&nbsp;<span class="ident" id="7650123">uint64</span><span class="op" id="7650129">(</span><span class="num" id="7650130">0</span><span class="op" id="7650131">)</span><span class="op" id="7650132">;</span>&nbsp;<span class="ident" id="7650134">wid</span>&nbsp;<span class="op" id="7650138">&lt;</span>&nbsp;<span class="num" id="7650140">60</span><span class="op" id="7650142">;</span>&nbsp;<span class="ident" id="7650144">wid</span>&nbsp;<span class="op" id="7650148">+=</span>&nbsp;<span class="ident" id="7650151">winc</span>&nbsp;<span class="op" id="7650156">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650162">b</span>&nbsp;<span class="op" id="7650164">:=</span>&nbsp;<span class="num" id="7650167">1</span><span class="op" id="7650168">&lt;&lt;</span><span class="ident" id="7650170">wid</span>&nbsp;<span class="op" id="7650174">+</span>&nbsp;<span class="ident" id="7650176">a</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650182">if</span>&nbsp;<span class="ident" id="7650185">sign</span>&nbsp;<span class="op" id="7650190">==</span>&nbsp;<span class="string" id="7650193">&#39;-&#39;</span>&nbsp;<span class="op" id="7650197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650204">b</span>&nbsp;<span class="op" id="7650206">=</span>&nbsp;<span class="op" id="7650208">-</span><span class="ident" id="7650209">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650221">for</span>&nbsp;<span class="ident" id="7650225">exp</span>&nbsp;<span class="op" id="7650229">:=</span>&nbsp;<span class="op" id="7650232">-</span><span class="num" id="7650233">1100</span><span class="op" id="7650237">;</span>&nbsp;<span class="ident" id="7650239">exp</span>&nbsp;<span class="op" id="7650243">&lt;</span>&nbsp;<span class="num" id="7650245">1100</span><span class="op" id="7650249">;</span>&nbsp;<span class="ident" id="7650251">exp</span>&nbsp;<span class="op" id="7650255">+=</span>&nbsp;<span class="ident" id="7650258">einc</span>&nbsp;<span class="op" id="7650263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650270">num</span><span class="op" id="7650273">,</span>&nbsp;<span class="ident" id="7650275">den</span>&nbsp;<span class="op" id="7650279">:=</span>&nbsp;<span class="ident" id="7650282">NewInt</span><span class="op" id="7650288">(</span><span class="ident" id="7650289">b</span><span class="op" id="7650290">)</span><span class="op" id="7650291">,</span>&nbsp;<span class="ident" id="7650293">NewInt</span><span class="op" id="7650299">(</span><span class="num" id="7650300">1</span><span class="op" id="7650301">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650308">if</span>&nbsp;<span class="ident" id="7650311">exp</span>&nbsp;<span class="op" id="7650315">&gt;</span>&nbsp;<span class="num" id="7650317">0</span>&nbsp;<span class="op" id="7650319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650327">num</span><span class="op" id="7650330">.</span><span class="ident" id="7650331">Lsh</span><span class="op" id="7650334">(</span><span class="ident" id="7650335">num</span><span class="op" id="7650338">,</span>&nbsp;<span class="builtintype" id="7650340">uint</span><span class="op" id="7650344">(</span><span class="ident" id="7650345">exp</span><span class="op" id="7650348">)</span><span class="op" id="7650349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650356">}</span>&nbsp;<span class="keyword" id="7650358">else</span>&nbsp;<span class="op" id="7650363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650371">den</span><span class="op" id="7650374">.</span><span class="ident" id="7650375">Lsh</span><span class="op" id="7650378">(</span><span class="ident" id="7650379">den</span><span class="op" id="7650382">,</span>&nbsp;<span class="builtintype" id="7650384">uint</span><span class="op" id="7650388">(</span><span class="op" id="7650389">-</span><span class="ident" id="7650390">exp</span><span class="op" id="7650393">)</span><span class="op" id="7650394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650401">}</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650408">r</span>&nbsp;<span class="op" id="7650410">:=</span>&nbsp;<span class="builtinfunc" id="7650413">new</span><span class="op" id="7650416">(</span><span class="ident" id="7650417">Rat</span><span class="op" id="7650420">)</span><span class="op" id="7650421">.</span><span class="ident" id="7650422">SetFrac</span><span class="op" id="7650429">(</span><span class="ident" id="7650430">num</span><span class="op" id="7650433">,</span>&nbsp;<span class="ident" id="7650435">den</span><span class="op" id="7650438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650445">f</span><span class="op" id="7650446">,</span>&nbsp;<span class="ident" id="7650448">_</span>&nbsp;<span class="op" id="7650450">:=</span>&nbsp;<span class="ident" id="7650453">r</span><span class="op" id="7650454">.</span><span class="ident" id="7650455">Float64</span><span class="op" id="7650462">(</span><span class="op" id="7650463">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650471">if</span>&nbsp;<span class="op" id="7650474">!</span><span class="ident" id="7650475">checkIsBestApprox64</span><span class="op" id="7650494">(</span><span class="ident" id="7650495">t</span><span class="op" id="7650496">,</span>&nbsp;<span class="ident" id="7650498">f</span><span class="op" id="7650499">,</span>&nbsp;<span class="ident" id="7650501">r</span><span class="op" id="7650502">)</span>&nbsp;<span class="op" id="7650504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7650512">//&nbsp;Append&nbsp;context&nbsp;information.</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650549">t</span><span class="op" id="7650550">.</span><span class="ident" id="7650551">Errorf</span><span class="op" id="7650557">(</span><span class="string" id="7650558">&#34;(input&nbsp;was&nbsp;mantissa&nbsp;%#x,&nbsp;exp&nbsp;%d;&nbsp;f&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;f&nbsp;~&nbsp;%g;&nbsp;r&nbsp;=&nbsp;%v)&#34;</span><span class="op" id="7650621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650630">b</span><span class="op" id="7650631">,</span>&nbsp;<span class="ident" id="7650633">exp</span><span class="op" id="7650636">,</span>&nbsp;<span class="ident" id="7650638">f</span><span class="op" id="7650639">,</span>&nbsp;<span class="ident" id="7650641">f</span><span class="op" id="7650642">,</span>&nbsp;<span class="ident" id="7650644">math</span><span class="op" id="7650648">.</span><span class="ident" id="7650649">Ldexp</span><span class="op" id="7650654">(</span><span class="builtintype" id="7650655">float64</span><span class="op" id="7650662">(</span><span class="ident" id="7650663">b</span><span class="op" id="7650664">)</span><span class="op" id="7650665">,</span>&nbsp;<span class="ident" id="7650667">exp</span><span class="op" id="7650670">)</span><span class="op" id="7650671">,</span>&nbsp;<span class="ident" id="7650673">r</span><span class="op" id="7650674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7650689">checkNonLossyRoundtrip64</span><span class="op" id="7650713">(</span><span class="ident" id="7650714">t</span><span class="op" id="7650715">,</span>&nbsp;<span class="ident" id="7650717">f</span><span class="op" id="7650718">)</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7650736">}</span><br>
<span class="lineno"></span><span class="op" id="7650738">}</span><br>
<span class="lineno">1005</span><br>
<span class="lineno"></span><span class="comment" id="7650741">//&nbsp;TestSetFloat64NonFinite&nbsp;checks&nbsp;that&nbsp;SetFloat64&nbsp;of&nbsp;a&nbsp;non-finite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="7650813">//&nbsp;returns&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="7650829">func</span>&nbsp;<span class="ident" id="7650834">TestSetFloat64NonFinite</span><span class="op" id="7650857">(</span><span class="ident" id="7650858">t</span>&nbsp;<span class="op" id="7650860">*</span><span class="ident" id="7650861">testing</span><span class="op" id="7650868">.</span><span class="ident" id="7650869">T</span><span class="op" id="7650870">)</span>&nbsp;<span class="op" id="7650872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650875">for</span>&nbsp;<span class="ident" id="7650879">_</span><span class="op" id="7650880">,</span>&nbsp;<span class="ident" id="7650882">f</span>&nbsp;<span class="op" id="7650884">:=</span>&nbsp;<span class="keyword" id="7650887">range</span>&nbsp;<span class="op" id="7650893">[</span><span class="op" id="7650894">]</span><span class="builtintype" id="7650895">float64</span><span class="op" id="7650902">{</span><span class="ident" id="7650903">math</span><span class="op" id="7650907">.</span><span class="ident" id="7650908">NaN</span><span class="op" id="7650911">(</span><span class="op" id="7650912">)</span><span class="op" id="7650913">,</span>&nbsp;<span class="ident" id="7650915">math</span><span class="op" id="7650919">.</span><span class="ident" id="7650920">Inf</span><span class="op" id="7650923">(</span><span class="op" id="7650924">+</span><span class="num" id="7650925">1</span><span class="op" id="7650926">)</span><span class="op" id="7650927">,</span>&nbsp;<span class="ident" id="7650929">math</span><span class="op" id="7650933">.</span><span class="ident" id="7650934">Inf</span><span class="op" id="7650937">(</span><span class="op" id="7650938">-</span><span class="num" id="7650939">1</span><span class="op" id="7650940">)</span><span class="op" id="7650941">}</span>&nbsp;<span class="op" id="7650943">{</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650947">var</span>&nbsp;<span class="ident" id="7650951">r</span>&nbsp;<span class="ident" id="7650953">Rat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7650959">if</span>&nbsp;<span class="ident" id="7650962">r2</span>&nbsp;<span class="op" id="7650965">:=</span>&nbsp;<span class="ident" id="7650968">r</span><span class="op" id="7650969">.</span><span class="ident" id="7650970">SetFloat64</span><span class="op" id="7650980">(</span><span class="ident" id="7650981">f</span><span class="op" id="7650982">)</span><span class="op" id="7650983">;</span>&nbsp;<span class="ident" id="7650985">r2</span>&nbsp;<span class="op" id="7650988">!=</span>&nbsp;<span class="builtintype" id="7650991">nil</span>&nbsp;<span class="op" id="7650995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651000">t</span><span class="op" id="7651001">.</span><span class="ident" id="7651002">Errorf</span><span class="op" id="7651008">(</span><span class="string" id="7651009">&#34;SetFloat64(%g)&nbsp;was&nbsp;%v,&nbsp;want&nbsp;nil&#34;</span><span class="op" id="7651042">,</span>&nbsp;<span class="ident" id="7651044">f</span><span class="op" id="7651045">,</span>&nbsp;<span class="ident" id="7651047">r2</span><span class="op" id="7651049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651056">}</span><br>
<span class="lineno">1015</span><span class="op" id="7651058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7651061">//&nbsp;checkNonLossyRoundtrip32&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7651134">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7651161">func</span>&nbsp;<span class="ident" id="7651166">checkNonLossyRoundtrip32</span><span class="op" id="7651190">(</span><span class="ident" id="7651191">t</span>&nbsp;<span class="op" id="7651193">*</span><span class="ident" id="7651194">testing</span><span class="op" id="7651201">.</span><span class="ident" id="7651202">T</span><span class="op" id="7651203">,</span>&nbsp;<span class="ident" id="7651205">f</span>&nbsp;<span class="builtintype" id="7651207">float32</span><span class="op" id="7651214">)</span>&nbsp;<span class="op" id="7651216">{</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651219">if</span>&nbsp;<span class="op" id="7651222">!</span><span class="ident" id="7651223">isFinite</span><span class="op" id="7651231">(</span><span class="builtintype" id="7651232">float64</span><span class="op" id="7651239">(</span><span class="ident" id="7651240">f</span><span class="op" id="7651241">)</span><span class="op" id="7651242">)</span>&nbsp;<span class="op" id="7651244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651248">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651256">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651259">r</span>&nbsp;<span class="op" id="7651261">:=</span>&nbsp;<span class="builtinfunc" id="7651264">new</span><span class="op" id="7651267">(</span><span class="ident" id="7651268">Rat</span><span class="op" id="7651271">)</span><span class="op" id="7651272">.</span><span class="ident" id="7651273">SetFloat64</span><span class="op" id="7651283">(</span><span class="builtintype" id="7651284">float64</span><span class="op" id="7651291">(</span><span class="ident" id="7651292">f</span><span class="op" id="7651293">)</span><span class="op" id="7651294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651297">if</span>&nbsp;<span class="ident" id="7651300">r</span>&nbsp;<span class="op" id="7651302">==</span>&nbsp;<span class="builtintype" id="7651305">nil</span>&nbsp;<span class="op" id="7651309">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651313">t</span><span class="op" id="7651314">.</span><span class="ident" id="7651315">Errorf</span><span class="op" id="7651321">(</span><span class="string" id="7651322">&#34;Rat.SetFloat64(float64(%g)&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7651363">,</span>&nbsp;<span class="ident" id="7651365">f</span><span class="op" id="7651366">,</span>&nbsp;<span class="ident" id="7651368">f</span><span class="op" id="7651369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651373">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651384">f2</span><span class="op" id="7651386">,</span>&nbsp;<span class="ident" id="7651388">exact</span>&nbsp;<span class="op" id="7651394">:=</span>&nbsp;<span class="ident" id="7651397">r</span><span class="op" id="7651398">.</span><span class="ident" id="7651399">Float32</span><span class="op" id="7651406">(</span><span class="op" id="7651407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651410">if</span>&nbsp;<span class="ident" id="7651413">f</span>&nbsp;<span class="op" id="7651415">!=</span>&nbsp;<span class="ident" id="7651418">f2</span>&nbsp;<span class="op" id="7651421">||</span>&nbsp;<span class="op" id="7651424">!</span><span class="ident" id="7651425">exact</span>&nbsp;<span class="op" id="7651431">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651435">t</span><span class="op" id="7651436">.</span><span class="ident" id="7651437">Errorf</span><span class="op" id="7651443">(</span><span class="string" id="7651444">&#34;Rat.SetFloat64(float64(%g)).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7651527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651532">f</span><span class="op" id="7651533">,</span>&nbsp;<span class="ident" id="7651535">f2</span><span class="op" id="7651537">,</span>&nbsp;<span class="ident" id="7651539">f2</span><span class="op" id="7651541">,</span>&nbsp;<span class="ident" id="7651543">exact</span><span class="op" id="7651548">,</span>&nbsp;<span class="ident" id="7651550">f</span><span class="op" id="7651551">,</span>&nbsp;<span class="ident" id="7651553">f</span><span class="op" id="7651554">,</span>&nbsp;<span class="builtintype" id="7651556">true</span><span class="op" id="7651560">,</span>&nbsp;<span class="ident" id="7651562">f2</span><span class="op" id="7651564">-</span><span class="ident" id="7651565">f</span><span class="op" id="7651566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651569">}</span><br>
<span class="lineno"></span><span class="op" id="7651571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1035</span><span class="comment" id="7651574">//&nbsp;checkNonLossyRoundtrip64&nbsp;checks&nbsp;that&nbsp;a&nbsp;float-&gt;Rat-&gt;float&nbsp;roundtrip&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7651647">//&nbsp;non-lossy&nbsp;for&nbsp;finite&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7651674">func</span>&nbsp;<span class="ident" id="7651679">checkNonLossyRoundtrip64</span><span class="op" id="7651703">(</span><span class="ident" id="7651704">t</span>&nbsp;<span class="op" id="7651706">*</span><span class="ident" id="7651707">testing</span><span class="op" id="7651714">.</span><span class="ident" id="7651715">T</span><span class="op" id="7651716">,</span>&nbsp;<span class="ident" id="7651718">f</span>&nbsp;<span class="builtintype" id="7651720">float64</span><span class="op" id="7651727">)</span>&nbsp;<span class="op" id="7651729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651732">if</span>&nbsp;<span class="op" id="7651735">!</span><span class="ident" id="7651736">isFinite</span><span class="op" id="7651744">(</span><span class="ident" id="7651745">f</span><span class="op" id="7651746">)</span>&nbsp;<span class="op" id="7651748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651752">return</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651763">r</span>&nbsp;<span class="op" id="7651765">:=</span>&nbsp;<span class="builtinfunc" id="7651768">new</span><span class="op" id="7651771">(</span><span class="ident" id="7651772">Rat</span><span class="op" id="7651775">)</span><span class="op" id="7651776">.</span><span class="ident" id="7651777">SetFloat64</span><span class="op" id="7651787">(</span><span class="ident" id="7651788">f</span><span class="op" id="7651789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651792">if</span>&nbsp;<span class="ident" id="7651795">r</span>&nbsp;<span class="op" id="7651797">==</span>&nbsp;<span class="builtintype" id="7651800">nil</span>&nbsp;<span class="op" id="7651804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651808">t</span><span class="op" id="7651809">.</span><span class="ident" id="7651810">Errorf</span><span class="op" id="7651816">(</span><span class="string" id="7651817">&#34;Rat.SetFloat64(%g&nbsp;(%b))&nbsp;==&nbsp;nil&#34;</span><span class="op" id="7651849">,</span>&nbsp;<span class="ident" id="7651851">f</span><span class="op" id="7651852">,</span>&nbsp;<span class="ident" id="7651854">f</span><span class="op" id="7651855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651859">return</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7651867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651870">f2</span><span class="op" id="7651872">,</span>&nbsp;<span class="ident" id="7651874">exact</span>&nbsp;<span class="op" id="7651880">:=</span>&nbsp;<span class="ident" id="7651883">r</span><span class="op" id="7651884">.</span><span class="ident" id="7651885">Float64</span><span class="op" id="7651892">(</span><span class="op" id="7651893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7651896">if</span>&nbsp;<span class="ident" id="7651899">f</span>&nbsp;<span class="op" id="7651901">!=</span>&nbsp;<span class="ident" id="7651904">f2</span>&nbsp;<span class="op" id="7651907">||</span>&nbsp;<span class="op" id="7651910">!</span><span class="ident" id="7651911">exact</span>&nbsp;<span class="op" id="7651917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7651921">t</span><span class="op" id="7651922">.</span><span class="ident" id="7651923">Errorf</span><span class="op" id="7651929">(</span><span class="string" id="7651930">&#34;Rat.SetFloat64(%g).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;%v,&nbsp;want&nbsp;%g&nbsp;(%b),&nbsp;%v;&nbsp;delta&nbsp;=&nbsp;%b&#34;</span><span class="op" id="7652004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652009">f</span><span class="op" id="7652010">,</span>&nbsp;<span class="ident" id="7652012">f2</span><span class="op" id="7652014">,</span>&nbsp;<span class="ident" id="7652016">f2</span><span class="op" id="7652018">,</span>&nbsp;<span class="ident" id="7652020">exact</span><span class="op" id="7652025">,</span>&nbsp;<span class="ident" id="7652027">f</span><span class="op" id="7652028">,</span>&nbsp;<span class="ident" id="7652030">f</span><span class="op" id="7652031">,</span>&nbsp;<span class="builtintype" id="7652033">true</span><span class="op" id="7652037">,</span>&nbsp;<span class="ident" id="7652039">f2</span><span class="op" id="7652041">-</span><span class="ident" id="7652042">f</span><span class="op" id="7652043">)</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7652046">}</span><br>
<span class="lineno"></span><span class="op" id="7652048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7652051">//&nbsp;delta&nbsp;returns&nbsp;the&nbsp;absolute&nbsp;difference&nbsp;between&nbsp;r&nbsp;and&nbsp;f.</span><br>
<span class="lineno"></span><span class="keyword" id="7652109">func</span>&nbsp;<span class="ident" id="7652114">delta</span><span class="op" id="7652119">(</span><span class="ident" id="7652120">r</span>&nbsp;<span class="op" id="7652122">*</span><span class="ident" id="7652123">Rat</span><span class="op" id="7652126">,</span>&nbsp;<span class="ident" id="7652128">f</span>&nbsp;<span class="builtintype" id="7652130">float64</span><span class="op" id="7652137">)</span>&nbsp;<span class="op" id="7652139">*</span><span class="ident" id="7652140">Rat</span>&nbsp;<span class="op" id="7652144">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652147">d</span>&nbsp;<span class="op" id="7652149">:=</span>&nbsp;<span class="builtinfunc" id="7652152">new</span><span class="op" id="7652155">(</span><span class="ident" id="7652156">Rat</span><span class="op" id="7652159">)</span><span class="op" id="7652160">.</span><span class="ident" id="7652161">Sub</span><span class="op" id="7652164">(</span><span class="ident" id="7652165">r</span><span class="op" id="7652166">,</span>&nbsp;<span class="builtinfunc" id="7652168">new</span><span class="op" id="7652171">(</span><span class="ident" id="7652172">Rat</span><span class="op" id="7652175">)</span><span class="op" id="7652176">.</span><span class="ident" id="7652177">SetFloat64</span><span class="op" id="7652187">(</span><span class="ident" id="7652188">f</span><span class="op" id="7652189">)</span><span class="op" id="7652190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7652193">return</span>&nbsp;<span class="ident" id="7652200">d</span><span class="op" id="7652201">.</span><span class="ident" id="7652202">Abs</span><span class="op" id="7652205">(</span><span class="ident" id="7652206">d</span><span class="op" id="7652207">)</span><br>
<span class="lineno"></span><span class="op" id="7652209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7652212">//&nbsp;checkIsBestApprox32&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float32</span><br>
<span class="lineno">1060</span><span class="comment" id="7652278">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7652301">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7652329">func</span>&nbsp;<span class="ident" id="7652334">checkIsBestApprox32</span><span class="op" id="7652353">(</span><span class="ident" id="7652354">t</span>&nbsp;<span class="op" id="7652356">*</span><span class="ident" id="7652357">testing</span><span class="op" id="7652364">.</span><span class="ident" id="7652365">T</span><span class="op" id="7652366">,</span>&nbsp;<span class="ident" id="7652368">f</span>&nbsp;<span class="builtintype" id="7652370">float32</span><span class="op" id="7652377">,</span>&nbsp;<span class="ident" id="7652379">r</span>&nbsp;<span class="op" id="7652381">*</span><span class="ident" id="7652382">Rat</span><span class="op" id="7652385">)</span>&nbsp;<span class="builtintype" id="7652387">bool</span>&nbsp;<span class="op" id="7652392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7652395">if</span>&nbsp;<span class="ident" id="7652398">math</span><span class="op" id="7652402">.</span><span class="ident" id="7652403">Abs</span><span class="op" id="7652406">(</span><span class="builtintype" id="7652407">float64</span><span class="op" id="7652414">(</span><span class="ident" id="7652415">f</span><span class="op" id="7652416">)</span><span class="op" id="7652417">)</span>&nbsp;<span class="op" id="7652419">&gt;=</span>&nbsp;<span class="ident" id="7652422">math</span><span class="op" id="7652426">.</span><span class="ident" id="7652427">MaxFloat32</span>&nbsp;<span class="op" id="7652438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7652442">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat32).</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7652513">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7652561">return</span>&nbsp;<span class="builtintype" id="7652568">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7652574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7652578">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652645">f0</span>&nbsp;<span class="op" id="7652648">:=</span>&nbsp;<span class="ident" id="7652651">math</span><span class="op" id="7652655">.</span><span class="ident" id="7652656">Nextafter32</span><span class="op" id="7652667">(</span><span class="ident" id="7652668">f</span><span class="op" id="7652669">,</span>&nbsp;<span class="builtintype" id="7652671">float32</span><span class="op" id="7652678">(</span><span class="ident" id="7652679">math</span><span class="op" id="7652683">.</span><span class="ident" id="7652684">Inf</span><span class="op" id="7652687">(</span><span class="op" id="7652688">-</span><span class="num" id="7652689">1</span><span class="op" id="7652690">)</span><span class="op" id="7652691">)</span><span class="op" id="7652692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652695">f1</span>&nbsp;<span class="op" id="7652698">:=</span>&nbsp;<span class="ident" id="7652701">math</span><span class="op" id="7652705">.</span><span class="ident" id="7652706">Nextafter32</span><span class="op" id="7652717">(</span><span class="ident" id="7652718">f</span><span class="op" id="7652719">,</span>&nbsp;<span class="builtintype" id="7652721">float32</span><span class="op" id="7652728">(</span><span class="ident" id="7652729">math</span><span class="op" id="7652733">.</span><span class="ident" id="7652734">Inf</span><span class="op" id="7652737">(</span><span class="op" id="7652738">+</span><span class="num" id="7652739">1</span><span class="op" id="7652740">)</span><span class="op" id="7652741">)</span><span class="op" id="7652742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7652746">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652811">df</span>&nbsp;<span class="op" id="7652814">:=</span>&nbsp;<span class="ident" id="7652817">delta</span><span class="op" id="7652822">(</span><span class="ident" id="7652823">r</span><span class="op" id="7652824">,</span>&nbsp;<span class="builtintype" id="7652826">float64</span><span class="op" id="7652833">(</span><span class="ident" id="7652834">f</span><span class="op" id="7652835">)</span><span class="op" id="7652836">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652839">df0</span>&nbsp;<span class="op" id="7652843">:=</span>&nbsp;<span class="ident" id="7652846">delta</span><span class="op" id="7652851">(</span><span class="ident" id="7652852">r</span><span class="op" id="7652853">,</span>&nbsp;<span class="builtintype" id="7652855">float64</span><span class="op" id="7652862">(</span><span class="ident" id="7652863">f0</span><span class="op" id="7652865">)</span><span class="op" id="7652866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652869">df1</span>&nbsp;<span class="op" id="7652873">:=</span>&nbsp;<span class="ident" id="7652876">delta</span><span class="op" id="7652881">(</span><span class="ident" id="7652882">r</span><span class="op" id="7652883">,</span>&nbsp;<span class="builtintype" id="7652885">float64</span><span class="op" id="7652892">(</span><span class="ident" id="7652893">f1</span><span class="op" id="7652895">)</span><span class="op" id="7652896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7652899">if</span>&nbsp;<span class="ident" id="7652902">df</span><span class="op" id="7652904">.</span><span class="ident" id="7652905">Cmp</span><span class="op" id="7652908">(</span><span class="ident" id="7652909">df0</span><span class="op" id="7652912">)</span>&nbsp;<span class="op" id="7652914">&gt;</span>&nbsp;<span class="num" id="7652916">0</span>&nbsp;<span class="op" id="7652918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7652922">t</span><span class="op" id="7652923">.</span><span class="ident" id="7652924">Errorf</span><span class="op" id="7652930">(</span><span class="string" id="7652931">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7653000">,</span>&nbsp;<span class="ident" id="7653002">r</span><span class="op" id="7653003">,</span>&nbsp;<span class="ident" id="7653005">f</span><span class="op" id="7653006">,</span>&nbsp;<span class="ident" id="7653008">f</span><span class="op" id="7653009">,</span>&nbsp;<span class="ident" id="7653011">f0</span><span class="op" id="7653013">,</span>&nbsp;<span class="ident" id="7653015">f0</span><span class="op" id="7653017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653021">return</span>&nbsp;<span class="builtintype" id="7653028">false</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7653035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653038">if</span>&nbsp;<span class="ident" id="7653041">df</span><span class="op" id="7653043">.</span><span class="ident" id="7653044">Cmp</span><span class="op" id="7653047">(</span><span class="ident" id="7653048">df1</span><span class="op" id="7653051">)</span>&nbsp;<span class="op" id="7653053">&gt;</span>&nbsp;<span class="num" id="7653055">0</span>&nbsp;<span class="op" id="7653057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7653061">t</span><span class="op" id="7653062">.</span><span class="ident" id="7653063">Errorf</span><span class="op" id="7653069">(</span><span class="string" id="7653070">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float32&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7653135">,</span>&nbsp;<span class="ident" id="7653137">r</span><span class="op" id="7653138">,</span>&nbsp;<span class="ident" id="7653140">f</span><span class="op" id="7653141">,</span>&nbsp;<span class="ident" id="7653143">f</span><span class="op" id="7653144">,</span>&nbsp;<span class="ident" id="7653146">f1</span><span class="op" id="7653148">,</span>&nbsp;<span class="ident" id="7653150">f1</span><span class="op" id="7653152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653156">return</span>&nbsp;<span class="builtintype" id="7653163">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7653170">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653173">if</span>&nbsp;<span class="ident" id="7653176">df</span><span class="op" id="7653178">.</span><span class="ident" id="7653179">Cmp</span><span class="op" id="7653182">(</span><span class="ident" id="7653183">df0</span><span class="op" id="7653186">)</span>&nbsp;<span class="op" id="7653188">==</span>&nbsp;<span class="num" id="7653191">0</span>&nbsp;<span class="op" id="7653193">&amp;&amp;</span>&nbsp;<span class="op" id="7653196">!</span><span class="ident" id="7653197">isEven32</span><span class="op" id="7653205">(</span><span class="ident" id="7653206">f</span><span class="op" id="7653207">)</span>&nbsp;<span class="op" id="7653209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7653213">t</span><span class="op" id="7653214">.</span><span class="ident" id="7653215">Errorf</span><span class="op" id="7653221">(</span><span class="string" id="7653222">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7653299">,</span>&nbsp;<span class="ident" id="7653301">r</span><span class="op" id="7653302">,</span>&nbsp;<span class="ident" id="7653304">f</span><span class="op" id="7653305">,</span>&nbsp;<span class="ident" id="7653307">f</span><span class="op" id="7653308">,</span>&nbsp;<span class="ident" id="7653310">f0</span><span class="op" id="7653312">,</span>&nbsp;<span class="ident" id="7653314">f0</span><span class="op" id="7653316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653320">return</span>&nbsp;<span class="builtintype" id="7653327">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7653334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653337">if</span>&nbsp;<span class="ident" id="7653340">df</span><span class="op" id="7653342">.</span><span class="ident" id="7653343">Cmp</span><span class="op" id="7653346">(</span><span class="ident" id="7653347">df1</span><span class="op" id="7653350">)</span>&nbsp;<span class="op" id="7653352">==</span>&nbsp;<span class="num" id="7653355">0</span>&nbsp;<span class="op" id="7653357">&amp;&amp;</span>&nbsp;<span class="op" id="7653360">!</span><span class="ident" id="7653361">isEven32</span><span class="op" id="7653369">(</span><span class="ident" id="7653370">f</span><span class="op" id="7653371">)</span>&nbsp;<span class="op" id="7653373">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7653377">t</span><span class="op" id="7653378">.</span><span class="ident" id="7653379">Errorf</span><span class="op" id="7653385">(</span><span class="string" id="7653386">&#34;Rat(%v).Float32()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7653463">,</span>&nbsp;<span class="ident" id="7653465">r</span><span class="op" id="7653466">,</span>&nbsp;<span class="ident" id="7653468">f</span><span class="op" id="7653469">,</span>&nbsp;<span class="ident" id="7653471">f</span><span class="op" id="7653472">,</span>&nbsp;<span class="ident" id="7653474">f1</span><span class="op" id="7653476">,</span>&nbsp;<span class="ident" id="7653478">f1</span><span class="op" id="7653480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653484">return</span>&nbsp;<span class="builtintype" id="7653491">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7653498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653501">return</span>&nbsp;<span class="builtintype" id="7653508">true</span><br>
<span class="lineno"></span><span class="op" id="7653513">}</span><br>
<span class="lineno">1095</span><br>
<span class="lineno"></span><span class="comment" id="7653516">//&nbsp;checkIsBestApprox64&nbsp;checks&nbsp;that&nbsp;f&nbsp;is&nbsp;the&nbsp;best&nbsp;possible&nbsp;float64</span><br>
<span class="lineno"></span><span class="comment" id="7653582">//&nbsp;approximation&nbsp;of&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="7653605">//&nbsp;Returns&nbsp;true&nbsp;on&nbsp;success.</span><br>
<span class="lineno"></span><span class="keyword" id="7653633">func</span>&nbsp;<span class="ident" id="7653638">checkIsBestApprox64</span><span class="op" id="7653657">(</span><span class="ident" id="7653658">t</span>&nbsp;<span class="op" id="7653660">*</span><span class="ident" id="7653661">testing</span><span class="op" id="7653668">.</span><span class="ident" id="7653669">T</span><span class="op" id="7653670">,</span>&nbsp;<span class="ident" id="7653672">f</span>&nbsp;<span class="builtintype" id="7653674">float64</span><span class="op" id="7653681">,</span>&nbsp;<span class="ident" id="7653683">r</span>&nbsp;<span class="op" id="7653685">*</span><span class="ident" id="7653686">Rat</span><span class="op" id="7653689">)</span>&nbsp;<span class="builtintype" id="7653691">bool</span>&nbsp;<span class="op" id="7653696">{</span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653699">if</span>&nbsp;<span class="ident" id="7653702">math</span><span class="op" id="7653706">.</span><span class="ident" id="7653707">Abs</span><span class="op" id="7653710">(</span><span class="ident" id="7653711">f</span><span class="op" id="7653712">)</span>&nbsp;<span class="op" id="7653714">&gt;=</span>&nbsp;<span class="ident" id="7653717">math</span><span class="op" id="7653721">.</span><span class="ident" id="7653722">MaxFloat64</span>&nbsp;<span class="op" id="7653733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7653737">//&nbsp;Cannot&nbsp;check&nbsp;+Inf,&nbsp;-Inf,&nbsp;nor&nbsp;the&nbsp;float&nbsp;next&nbsp;to&nbsp;them&nbsp;(MaxFloat64).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7653808">//&nbsp;But&nbsp;we&nbsp;have&nbsp;tests&nbsp;for&nbsp;these&nbsp;special&nbsp;cases.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7653856">return</span>&nbsp;<span class="builtintype" id="7653863">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7653869">}</span><br>
<span class="lineno">1105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7653873">//&nbsp;r&nbsp;must&nbsp;be&nbsp;strictly&nbsp;between&nbsp;f0&nbsp;and&nbsp;f1,&nbsp;the&nbsp;floats&nbsp;bracketing&nbsp;f.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7653940">f0</span>&nbsp;<span class="op" id="7653943">:=</span>&nbsp;<span class="ident" id="7653946">math</span><span class="op" id="7653950">.</span><span class="ident" id="7653951">Nextafter</span><span class="op" id="7653960">(</span><span class="ident" id="7653961">f</span><span class="op" id="7653962">,</span>&nbsp;<span class="ident" id="7653964">math</span><span class="op" id="7653968">.</span><span class="ident" id="7653969">Inf</span><span class="op" id="7653972">(</span><span class="op" id="7653973">-</span><span class="num" id="7653974">1</span><span class="op" id="7653975">)</span><span class="op" id="7653976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7653979">f1</span>&nbsp;<span class="op" id="7653982">:=</span>&nbsp;<span class="ident" id="7653985">math</span><span class="op" id="7653989">.</span><span class="ident" id="7653990">Nextafter</span><span class="op" id="7653999">(</span><span class="ident" id="7654000">f</span><span class="op" id="7654001">,</span>&nbsp;<span class="ident" id="7654003">math</span><span class="op" id="7654007">.</span><span class="ident" id="7654008">Inf</span><span class="op" id="7654011">(</span><span class="op" id="7654012">+</span><span class="num" id="7654013">1</span><span class="op" id="7654014">)</span><span class="op" id="7654015">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7654019">//&nbsp;For&nbsp;f&nbsp;to&nbsp;be&nbsp;correct,&nbsp;r&nbsp;must&nbsp;be&nbsp;closer&nbsp;to&nbsp;f&nbsp;than&nbsp;to&nbsp;f0&nbsp;or&nbsp;f1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654084">df</span>&nbsp;<span class="op" id="7654087">:=</span>&nbsp;<span class="ident" id="7654090">delta</span><span class="op" id="7654095">(</span><span class="ident" id="7654096">r</span><span class="op" id="7654097">,</span>&nbsp;<span class="ident" id="7654099">f</span><span class="op" id="7654100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654103">df0</span>&nbsp;<span class="op" id="7654107">:=</span>&nbsp;<span class="ident" id="7654110">delta</span><span class="op" id="7654115">(</span><span class="ident" id="7654116">r</span><span class="op" id="7654117">,</span>&nbsp;<span class="ident" id="7654119">f0</span><span class="op" id="7654121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654124">df1</span>&nbsp;<span class="op" id="7654128">:=</span>&nbsp;<span class="ident" id="7654131">delta</span><span class="op" id="7654136">(</span><span class="ident" id="7654137">r</span><span class="op" id="7654138">,</span>&nbsp;<span class="ident" id="7654140">f1</span><span class="op" id="7654142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654145">if</span>&nbsp;<span class="ident" id="7654148">df</span><span class="op" id="7654150">.</span><span class="ident" id="7654151">Cmp</span><span class="op" id="7654154">(</span><span class="ident" id="7654155">df0</span><span class="op" id="7654158">)</span>&nbsp;<span class="op" id="7654160">&gt;</span>&nbsp;<span class="num" id="7654162">0</span>&nbsp;<span class="op" id="7654164">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654168">t</span><span class="op" id="7654169">.</span><span class="ident" id="7654170">Errorf</span><span class="op" id="7654176">(</span><span class="string" id="7654177">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;previous&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7654246">,</span>&nbsp;<span class="ident" id="7654248">r</span><span class="op" id="7654249">,</span>&nbsp;<span class="ident" id="7654251">f</span><span class="op" id="7654252">,</span>&nbsp;<span class="ident" id="7654254">f</span><span class="op" id="7654255">,</span>&nbsp;<span class="ident" id="7654257">f0</span><span class="op" id="7654259">,</span>&nbsp;<span class="ident" id="7654261">f0</span><span class="op" id="7654263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654267">return</span>&nbsp;<span class="builtintype" id="7654274">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7654281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654284">if</span>&nbsp;<span class="ident" id="7654287">df</span><span class="op" id="7654289">.</span><span class="ident" id="7654290">Cmp</span><span class="op" id="7654293">(</span><span class="ident" id="7654294">df1</span><span class="op" id="7654297">)</span>&nbsp;<span class="op" id="7654299">&gt;</span>&nbsp;<span class="num" id="7654301">0</span>&nbsp;<span class="op" id="7654303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654307">t</span><span class="op" id="7654308">.</span><span class="ident" id="7654309">Errorf</span><span class="op" id="7654315">(</span><span class="string" id="7654316">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b),&nbsp;but&nbsp;next&nbsp;float64&nbsp;%g&nbsp;(%b)&nbsp;is&nbsp;closer&#34;</span><span class="op" id="7654381">,</span>&nbsp;<span class="ident" id="7654383">r</span><span class="op" id="7654384">,</span>&nbsp;<span class="ident" id="7654386">f</span><span class="op" id="7654387">,</span>&nbsp;<span class="ident" id="7654389">f</span><span class="op" id="7654390">,</span>&nbsp;<span class="ident" id="7654392">f1</span><span class="op" id="7654394">,</span>&nbsp;<span class="ident" id="7654396">f1</span><span class="op" id="7654398">)</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654402">return</span>&nbsp;<span class="builtintype" id="7654409">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7654416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654419">if</span>&nbsp;<span class="ident" id="7654422">df</span><span class="op" id="7654424">.</span><span class="ident" id="7654425">Cmp</span><span class="op" id="7654428">(</span><span class="ident" id="7654429">df0</span><span class="op" id="7654432">)</span>&nbsp;<span class="op" id="7654434">==</span>&nbsp;<span class="num" id="7654437">0</span>&nbsp;<span class="op" id="7654439">&amp;&amp;</span>&nbsp;<span class="op" id="7654442">!</span><span class="ident" id="7654443">isEven64</span><span class="op" id="7654451">(</span><span class="ident" id="7654452">f</span><span class="op" id="7654453">)</span>&nbsp;<span class="op" id="7654455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654459">t</span><span class="op" id="7654460">.</span><span class="ident" id="7654461">Errorf</span><span class="op" id="7654467">(</span><span class="string" id="7654468">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7654545">,</span>&nbsp;<span class="ident" id="7654547">r</span><span class="op" id="7654548">,</span>&nbsp;<span class="ident" id="7654550">f</span><span class="op" id="7654551">,</span>&nbsp;<span class="ident" id="7654553">f</span><span class="op" id="7654554">,</span>&nbsp;<span class="ident" id="7654556">f0</span><span class="op" id="7654558">,</span>&nbsp;<span class="ident" id="7654560">f0</span><span class="op" id="7654562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654566">return</span>&nbsp;<span class="builtintype" id="7654573">false</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7654580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654583">if</span>&nbsp;<span class="ident" id="7654586">df</span><span class="op" id="7654588">.</span><span class="ident" id="7654589">Cmp</span><span class="op" id="7654592">(</span><span class="ident" id="7654593">df1</span><span class="op" id="7654596">)</span>&nbsp;<span class="op" id="7654598">==</span>&nbsp;<span class="num" id="7654601">0</span>&nbsp;<span class="op" id="7654603">&amp;&amp;</span>&nbsp;<span class="op" id="7654606">!</span><span class="ident" id="7654607">isEven64</span><span class="op" id="7654615">(</span><span class="ident" id="7654616">f</span><span class="op" id="7654617">)</span>&nbsp;<span class="op" id="7654619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654623">t</span><span class="op" id="7654624">.</span><span class="ident" id="7654625">Errorf</span><span class="op" id="7654631">(</span><span class="string" id="7654632">&#34;Rat(%v).Float64()&nbsp;=&nbsp;%g&nbsp;(%b);&nbsp;halfway&nbsp;should&nbsp;have&nbsp;rounded&nbsp;to&nbsp;%g&nbsp;(%b)&nbsp;instead&#34;</span><span class="op" id="7654709">,</span>&nbsp;<span class="ident" id="7654711">r</span><span class="op" id="7654712">,</span>&nbsp;<span class="ident" id="7654714">f</span><span class="op" id="7654715">,</span>&nbsp;<span class="ident" id="7654717">f</span><span class="op" id="7654718">,</span>&nbsp;<span class="ident" id="7654720">f1</span><span class="op" id="7654722">,</span>&nbsp;<span class="ident" id="7654724">f1</span><span class="op" id="7654726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654730">return</span>&nbsp;<span class="builtintype" id="7654737">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7654744">}</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7654747">return</span>&nbsp;<span class="builtintype" id="7654754">true</span><br>
<span class="lineno"></span><span class="op" id="7654759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7654762">func</span>&nbsp;<span class="ident" id="7654767">isEven32</span><span class="op" id="7654775">(</span><span class="ident" id="7654776">f</span>&nbsp;<span class="builtintype" id="7654778">float32</span><span class="op" id="7654785">)</span>&nbsp;<span class="builtintype" id="7654787">bool</span>&nbsp;<span class="op" id="7654792">{</span>&nbsp;<span class="keyword" id="7654794">return</span>&nbsp;<span class="ident" id="7654801">math</span><span class="op" id="7654805">.</span><span class="ident" id="7654806">Float32bits</span><span class="op" id="7654817">(</span><span class="ident" id="7654818">f</span><span class="op" id="7654819">)</span><span class="op" id="7654820">&amp;</span><span class="num" id="7654821">1</span>&nbsp;<span class="op" id="7654823">==</span>&nbsp;<span class="num" id="7654826">0</span>&nbsp;<span class="op" id="7654828">}</span><br>
<span class="lineno"></span><span class="keyword" id="7654830">func</span>&nbsp;<span class="ident" id="7654835">isEven64</span><span class="op" id="7654843">(</span><span class="ident" id="7654844">f</span>&nbsp;<span class="builtintype" id="7654846">float64</span><span class="op" id="7654853">)</span>&nbsp;<span class="builtintype" id="7654855">bool</span>&nbsp;<span class="op" id="7654860">{</span>&nbsp;<span class="keyword" id="7654862">return</span>&nbsp;<span class="ident" id="7654869">math</span><span class="op" id="7654873">.</span><span class="ident" id="7654874">Float64bits</span><span class="op" id="7654885">(</span><span class="ident" id="7654886">f</span><span class="op" id="7654887">)</span><span class="op" id="7654888">&amp;</span><span class="num" id="7654889">1</span>&nbsp;<span class="op" id="7654891">==</span>&nbsp;<span class="num" id="7654894">0</span>&nbsp;<span class="op" id="7654896">}</span><br>
<span class="lineno">1135</span><br>
<span class="lineno"></span><span class="keyword" id="7654899">func</span>&nbsp;<span class="ident" id="7654904">TestIsFinite</span><span class="op" id="7654916">(</span><span class="ident" id="7654917">t</span>&nbsp;<span class="op" id="7654919">*</span><span class="ident" id="7654920">testing</span><span class="op" id="7654927">.</span><span class="ident" id="7654928">T</span><span class="op" id="7654929">)</span>&nbsp;<span class="op" id="7654931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7654934">finites</span>&nbsp;<span class="op" id="7654942">:=</span>&nbsp;<span class="op" id="7654945">[</span><span class="op" id="7654946">]</span><span class="builtintype" id="7654947">float64</span><span class="op" id="7654954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7654958">1.0</span>&nbsp;<span class="op" id="7654962">/</span>&nbsp;<span class="num" id="7654964">3</span><span class="op" id="7654965">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7654969">4891559871276714924261e+222</span><span class="op" id="7654996">,</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655000">math</span><span class="op" id="7655004">.</span><span class="ident" id="7655005">MaxFloat64</span><span class="op" id="7655015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655019">math</span><span class="op" id="7655023">.</span><span class="ident" id="7655024">SmallestNonzeroFloat64</span><span class="op" id="7655046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655050">-</span><span class="ident" id="7655051">math</span><span class="op" id="7655055">.</span><span class="ident" id="7655056">MaxFloat64</span><span class="op" id="7655066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655070">-</span><span class="ident" id="7655071">math</span><span class="op" id="7655075">.</span><span class="ident" id="7655076">SmallestNonzeroFloat64</span><span class="op" id="7655098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655101">}</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7655104">for</span>&nbsp;<span class="ident" id="7655108">_</span><span class="op" id="7655109">,</span>&nbsp;<span class="ident" id="7655111">f</span>&nbsp;<span class="op" id="7655113">:=</span>&nbsp;<span class="keyword" id="7655116">range</span>&nbsp;<span class="ident" id="7655122">finites</span>&nbsp;<span class="op" id="7655130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7655134">if</span>&nbsp;<span class="op" id="7655137">!</span><span class="ident" id="7655138">isFinite</span><span class="op" id="7655146">(</span><span class="ident" id="7655147">f</span><span class="op" id="7655148">)</span>&nbsp;<span class="op" id="7655150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655155">t</span><span class="op" id="7655156">.</span><span class="ident" id="7655157">Errorf</span><span class="op" id="7655163">(</span><span class="string" id="7655164">&#34;!IsFinite(%g&nbsp;(%b))&#34;</span><span class="op" id="7655184">,</span>&nbsp;<span class="ident" id="7655186">f</span><span class="op" id="7655187">,</span>&nbsp;<span class="ident" id="7655189">f</span><span class="op" id="7655190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655197">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655200">nonfinites</span>&nbsp;<span class="op" id="7655211">:=</span>&nbsp;<span class="op" id="7655214">[</span><span class="op" id="7655215">]</span><span class="builtintype" id="7655216">float64</span><span class="op" id="7655223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655227">math</span><span class="op" id="7655231">.</span><span class="ident" id="7655232">NaN</span><span class="op" id="7655235">(</span><span class="op" id="7655236">)</span><span class="op" id="7655237">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655241">math</span><span class="op" id="7655245">.</span><span class="ident" id="7655246">Inf</span><span class="op" id="7655249">(</span><span class="op" id="7655250">-</span><span class="num" id="7655251">1</span><span class="op" id="7655252">)</span><span class="op" id="7655253">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655257">math</span><span class="op" id="7655261">.</span><span class="ident" id="7655262">Inf</span><span class="op" id="7655265">(</span><span class="op" id="7655266">+</span><span class="num" id="7655267">1</span><span class="op" id="7655268">)</span><span class="op" id="7655269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655272">}</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7655275">for</span>&nbsp;<span class="ident" id="7655279">_</span><span class="op" id="7655280">,</span>&nbsp;<span class="ident" id="7655282">f</span>&nbsp;<span class="op" id="7655284">:=</span>&nbsp;<span class="keyword" id="7655287">range</span>&nbsp;<span class="ident" id="7655293">nonfinites</span>&nbsp;<span class="op" id="7655304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7655308">if</span>&nbsp;<span class="ident" id="7655311">isFinite</span><span class="op" id="7655319">(</span><span class="ident" id="7655320">f</span><span class="op" id="7655321">)</span>&nbsp;<span class="op" id="7655323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7655328">t</span><span class="op" id="7655329">.</span><span class="ident" id="7655330">Errorf</span><span class="op" id="7655336">(</span><span class="string" id="7655337">&#34;IsFinite(%g,&nbsp;(%b))&#34;</span><span class="op" id="7655357">,</span>&nbsp;<span class="ident" id="7655359">f</span><span class="op" id="7655360">,</span>&nbsp;<span class="ident" id="7655362">f</span><span class="op" id="7655363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7655370">}</span><br>
<span class="lineno">1160</span><span class="op" id="7655372">}</span>
</div>
</body>
</html>
