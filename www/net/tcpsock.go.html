<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3449152">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3449208">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3449262">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3449313">package</span>&nbsp;<span class="ident" id="3449321">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3449326">//&nbsp;TCPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;TCP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="3449380">type</span>&nbsp;<span class="ident" id="3449385">TCPAddr</span>&nbsp;<span class="keyword" id="3449393">struct</span>&nbsp;<span class="op" id="3449400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3449403">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3449408">IP</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3449412">Port</span>&nbsp;<span class="builtintype" id="3449417">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3449422">Zone</span>&nbsp;<span class="builtintype" id="3449427">string</span>&nbsp;<span class="comment" id="3449434">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="3449465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3449468">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;tcp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="3449522">func</span>&nbsp;<span class="op" id="3449527">(</span><span class="ident" id="3449528">a</span>&nbsp;<span class="op" id="3449530">*</span><span class="ident" id="3449531">TCPAddr</span><span class="op" id="3449538">)</span>&nbsp;<span class="ident" id="3449540">Network</span><span class="op" id="3449547">(</span><span class="op" id="3449548">)</span>&nbsp;<span class="builtintype" id="3449550">string</span>&nbsp;<span class="op" id="3449557">{</span>&nbsp;<span class="keyword" id="3449559">return</span>&nbsp;<span class="string" id="3449566">&#34;tcp&#34;</span>&nbsp;<span class="op" id="3449572">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3449575">func</span>&nbsp;<span class="op" id="3449580">(</span><span class="ident" id="3449581">a</span>&nbsp;<span class="op" id="3449583">*</span><span class="ident" id="3449584">TCPAddr</span><span class="op" id="3449591">)</span>&nbsp;<span class="ident" id="3449593">String</span><span class="op" id="3449599">(</span><span class="op" id="3449600">)</span>&nbsp;<span class="builtintype" id="3449602">string</span>&nbsp;<span class="op" id="3449609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449612">if</span>&nbsp;<span class="ident" id="3449615">a</span>&nbsp;<span class="op" id="3449617">==</span>&nbsp;<span class="ident" id="3449620">nil</span>&nbsp;<span class="op" id="3449624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449628">return</span>&nbsp;<span class="string" id="3449635">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3449644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3449647">ip</span>&nbsp;<span class="op" id="3449650">:=</span>&nbsp;<span class="ident" id="3449653">ipEmptyString</span><span class="op" id="3449666">(</span><span class="ident" id="3449667">a</span><span class="op" id="3449668">.</span><span class="ident" id="3449669">IP</span><span class="op" id="3449671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449674">if</span>&nbsp;<span class="ident" id="3449677">a</span><span class="op" id="3449678">.</span><span class="ident" id="3449679">Zone</span>&nbsp;<span class="op" id="3449684">!=</span>&nbsp;<span class="string" id="3449687">&#34;&#34;</span>&nbsp;<span class="op" id="3449690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449694">return</span>&nbsp;<span class="ident" id="3449701">JoinHostPort</span><span class="op" id="3449713">(</span><span class="ident" id="3449714">ip</span><span class="op" id="3449716">+</span><span class="string" id="3449717">&#34;%&#34;</span><span class="op" id="3449720">+</span><span class="ident" id="3449721">a</span><span class="op" id="3449722">.</span><span class="ident" id="3449723">Zone</span><span class="op" id="3449727">,</span>&nbsp;<span class="ident" id="3449729">itoa</span><span class="op" id="3449733">(</span><span class="ident" id="3449734">a</span><span class="op" id="3449735">.</span><span class="ident" id="3449736">Port</span><span class="op" id="3449740">)</span><span class="op" id="3449741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3449744">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449747">return</span>&nbsp;<span class="ident" id="3449754">JoinHostPort</span><span class="op" id="3449766">(</span><span class="ident" id="3449767">ip</span><span class="op" id="3449769">,</span>&nbsp;<span class="ident" id="3449771">itoa</span><span class="op" id="3449775">(</span><span class="ident" id="3449776">a</span><span class="op" id="3449777">.</span><span class="ident" id="3449778">Port</span><span class="op" id="3449782">)</span><span class="op" id="3449783">)</span><br>
<span class="lineno"></span><span class="op" id="3449785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3449788">func</span>&nbsp;<span class="op" id="3449793">(</span><span class="ident" id="3449794">a</span>&nbsp;<span class="op" id="3449796">*</span><span class="ident" id="3449797">TCPAddr</span><span class="op" id="3449804">)</span>&nbsp;<span class="ident" id="3449806">toAddr</span><span class="op" id="3449812">(</span><span class="op" id="3449813">)</span>&nbsp;<span class="ident" id="3449815">Addr</span>&nbsp;<span class="op" id="3449820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449823">if</span>&nbsp;<span class="ident" id="3449826">a</span>&nbsp;<span class="op" id="3449828">==</span>&nbsp;<span class="ident" id="3449831">nil</span>&nbsp;<span class="op" id="3449835">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449839">return</span>&nbsp;<span class="ident" id="3449846">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3449851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3449854">return</span>&nbsp;<span class="ident" id="3449861">a</span><br>
<span class="lineno"></span><span class="op" id="3449863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3449866">//&nbsp;ResolveTCPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;TCP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3449937">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3450006">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3450070">//&nbsp;&#34;tcp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="3450139">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="3450202">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3450228">func</span>&nbsp;<span class="ident" id="3450233">ResolveTCPAddr</span><span class="op" id="3450247">(</span><span class="ident" id="3450248">net</span><span class="op" id="3450251">,</span>&nbsp;<span class="ident" id="3450253">addr</span>&nbsp;<span class="builtintype" id="3450258">string</span><span class="op" id="3450264">)</span>&nbsp;<span class="op" id="3450266">(</span><span class="op" id="3450267">*</span><span class="ident" id="3450268">TCPAddr</span><span class="op" id="3450275">,</span>&nbsp;<span class="builtintype" id="3450277">error</span><span class="op" id="3450282">)</span>&nbsp;<span class="op" id="3450284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450287">switch</span>&nbsp;<span class="ident" id="3450294">net</span>&nbsp;<span class="op" id="3450298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450301">case</span>&nbsp;<span class="string" id="3450306">&#34;tcp&#34;</span><span class="op" id="3450311">,</span>&nbsp;<span class="string" id="3450313">&#34;tcp4&#34;</span><span class="op" id="3450319">,</span>&nbsp;<span class="string" id="3450321">&#34;tcp6&#34;</span><span class="op" id="3450327">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450330">case</span>&nbsp;<span class="string" id="3450335">&#34;&#34;</span><span class="op" id="3450337">:</span>&nbsp;<span class="comment" id="3450339">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3450393">net</span>&nbsp;<span class="op" id="3450397">=</span>&nbsp;<span class="string" id="3450399">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450406">default</span><span class="op" id="3450413">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450417">return</span>&nbsp;<span class="ident" id="3450424">nil</span><span class="op" id="3450427">,</span>&nbsp;<span class="ident" id="3450429">UnknownNetworkError</span><span class="op" id="3450448">(</span><span class="ident" id="3450449">net</span><span class="op" id="3450452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3450455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3450458">a</span><span class="op" id="3450459">,</span>&nbsp;<span class="ident" id="3450461">err</span>&nbsp;<span class="op" id="3450465">:=</span>&nbsp;<span class="ident" id="3450468">resolveInternetAddr</span><span class="op" id="3450487">(</span><span class="ident" id="3450488">net</span><span class="op" id="3450491">,</span>&nbsp;<span class="ident" id="3450493">addr</span><span class="op" id="3450497">,</span>&nbsp;<span class="ident" id="3450499">noDeadline</span><span class="op" id="3450509">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450512">if</span>&nbsp;<span class="ident" id="3450515">err</span>&nbsp;<span class="op" id="3450519">!=</span>&nbsp;<span class="ident" id="3450522">nil</span>&nbsp;<span class="op" id="3450526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450530">return</span>&nbsp;<span class="ident" id="3450537">nil</span><span class="op" id="3450540">,</span>&nbsp;<span class="ident" id="3450542">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3450547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3450550">return</span>&nbsp;<span class="ident" id="3450557">a</span><span class="op" id="3450558">.</span><span class="ident" id="3450559">toAddr</span><span class="op" id="3450565">(</span><span class="op" id="3450566">)</span><span class="op" id="3450567">.</span><span class="op" id="3450568">(</span><span class="op" id="3450569">*</span><span class="ident" id="3450570">TCPAddr</span><span class="op" id="3450577">)</span><span class="op" id="3450578">,</span>&nbsp;<span class="ident" id="3450580">nil</span><br>
<span class="lineno"></span><span class="op" id="3450584">}</span>
</div>
</body>
</html>
