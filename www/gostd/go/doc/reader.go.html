<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5115797">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5115852">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5115906">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5115957">package</span>&nbsp;<span class="ident" id="5115965">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5115970">import</span>&nbsp;<span class="op" id="5115977">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5115980">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5115990">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5116002">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5116012">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5116020">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="5116030">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5116033">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5116113">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="5116137">//</span><br>
<span class="lineno"></span><span class="comment" id="5116140">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="5116221">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="5116303">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="5116385">//</span><br>
<span class="lineno"></span><span class="keyword" id="5116388">type</span>&nbsp;<span class="ident" id="5116393">methodSet</span>&nbsp;<span class="keyword" id="5116403">map</span><span class="op" id="5116406">[</span><span class="builtintype" id="5116407">string</span><span class="op" id="5116413">]</span><span class="op" id="5116414">*</span><span class="ident" id="5116415">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="5116421">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5116482">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="5116547">//</span><br>
<span class="lineno"></span><span class="keyword" id="5116550">func</span>&nbsp;<span class="ident" id="5116555">recvString</span><span class="op" id="5116565">(</span><span class="ident" id="5116566">recv</span>&nbsp;<span class="ident" id="5116571">ast</span><span class="op" id="5116574">.</span><span class="ident" id="5116575">Expr</span><span class="op" id="5116579">)</span>&nbsp;<span class="builtintype" id="5116581">string</span>&nbsp;<span class="op" id="5116588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116591">switch</span>&nbsp;<span class="ident" id="5116598">t</span>&nbsp;<span class="op" id="5116600">:=</span>&nbsp;<span class="ident" id="5116603">recv</span><span class="op" id="5116607">.</span><span class="op" id="5116608">(</span><span class="keyword" id="5116609">type</span><span class="op" id="5116613">)</span>&nbsp;<span class="op" id="5116615">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116618">case</span>&nbsp;<span class="op" id="5116623">*</span><span class="ident" id="5116624">ast</span><span class="op" id="5116627">.</span><span class="ident" id="5116628">Ident</span><span class="op" id="5116633">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116637">return</span>&nbsp;<span class="ident" id="5116644">t</span><span class="op" id="5116645">.</span><span class="ident" id="5116646">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116652">case</span>&nbsp;<span class="op" id="5116657">*</span><span class="ident" id="5116658">ast</span><span class="op" id="5116661">.</span><span class="ident" id="5116662">StarExpr</span><span class="op" id="5116670">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116674">return</span>&nbsp;<span class="string" id="5116681">&#34;*&#34;</span>&nbsp;<span class="op" id="5116685">+</span>&nbsp;<span class="ident" id="5116687">recvString</span><span class="op" id="5116697">(</span><span class="ident" id="5116698">t</span><span class="op" id="5116699">.</span><span class="ident" id="5116700">X</span><span class="op" id="5116701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5116704">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116707">return</span>&nbsp;<span class="string" id="5116714">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="5116724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5116727">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5116792">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="5116861">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5116911">//</span><br>
<span class="lineno"></span><span class="keyword" id="5116914">func</span>&nbsp;<span class="op" id="5116919">(</span><span class="ident" id="5116920">mset</span>&nbsp;<span class="ident" id="5116925">methodSet</span><span class="op" id="5116934">)</span>&nbsp;<span class="ident" id="5116936">set</span><span class="op" id="5116939">(</span><span class="ident" id="5116940">f</span>&nbsp;<span class="op" id="5116942">*</span><span class="ident" id="5116943">ast</span><span class="op" id="5116946">.</span><span class="ident" id="5116947">FuncDecl</span><span class="op" id="5116955">)</span>&nbsp;<span class="op" id="5116957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5116960">name</span>&nbsp;<span class="op" id="5116965">:=</span>&nbsp;<span class="ident" id="5116968">f</span><span class="op" id="5116969">.</span><span class="ident" id="5116970">Name</span><span class="op" id="5116974">.</span><span class="ident" id="5116975">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5116981">if</span>&nbsp;<span class="ident" id="5116984">g</span>&nbsp;<span class="op" id="5116986">:=</span>&nbsp;<span class="ident" id="5116989">mset</span><span class="op" id="5116993">[</span><span class="ident" id="5116994">name</span><span class="op" id="5116998">]</span><span class="op" id="5116999">;</span>&nbsp;<span class="ident" id="5117001">g</span>&nbsp;<span class="op" id="5117003">!=</span>&nbsp;<span class="builtintype" id="5117006">nil</span>&nbsp;<span class="op" id="5117010">&amp;&amp;</span>&nbsp;<span class="ident" id="5117013">g</span><span class="op" id="5117014">.</span><span class="ident" id="5117015">Doc</span>&nbsp;<span class="op" id="5117019">!=</span>&nbsp;<span class="string" id="5117022">&#34;&#34;</span>&nbsp;<span class="op" id="5117025">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117029">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117093">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117153">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117216">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117279">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117314">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117325">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117383">recv</span>&nbsp;<span class="op" id="5117388">:=</span>&nbsp;<span class="string" id="5117391">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117395">if</span>&nbsp;<span class="ident" id="5117398">f</span><span class="op" id="5117399">.</span><span class="ident" id="5117400">Recv</span>&nbsp;<span class="op" id="5117405">!=</span>&nbsp;<span class="builtintype" id="5117408">nil</span>&nbsp;<span class="op" id="5117412">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117416">var</span>&nbsp;<span class="ident" id="5117420">typ</span>&nbsp;<span class="ident" id="5117424">ast</span><span class="op" id="5117427">.</span><span class="ident" id="5117428">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5117435">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117477">if</span>&nbsp;<span class="ident" id="5117480">list</span>&nbsp;<span class="op" id="5117485">:=</span>&nbsp;<span class="ident" id="5117488">f</span><span class="op" id="5117489">.</span><span class="ident" id="5117490">Recv</span><span class="op" id="5117494">.</span><span class="ident" id="5117495">List</span><span class="op" id="5117499">;</span>&nbsp;<span class="builtinfunc" id="5117501">len</span><span class="op" id="5117504">(</span><span class="ident" id="5117505">list</span><span class="op" id="5117509">)</span>&nbsp;<span class="op" id="5117511">==</span>&nbsp;<span class="num" id="5117514">1</span>&nbsp;<span class="op" id="5117516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117521">typ</span>&nbsp;<span class="op" id="5117525">=</span>&nbsp;<span class="ident" id="5117527">list</span><span class="op" id="5117531">[</span><span class="num" id="5117532">0</span><span class="op" id="5117533">]</span><span class="op" id="5117534">.</span><span class="ident" id="5117535">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117542">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117546">recv</span>&nbsp;<span class="op" id="5117551">=</span>&nbsp;<span class="ident" id="5117553">recvString</span><span class="op" id="5117563">(</span><span class="ident" id="5117564">typ</span><span class="op" id="5117567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117573">mset</span><span class="op" id="5117577">[</span><span class="ident" id="5117578">name</span><span class="op" id="5117582">]</span>&nbsp;<span class="op" id="5117584">=</span>&nbsp;<span class="op" id="5117586">&amp;</span><span class="ident" id="5117587">Func</span><span class="op" id="5117591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117595">Doc</span><span class="op" id="5117598">:</span>&nbsp;&nbsp;<span class="ident" id="5117601">f</span><span class="op" id="5117602">.</span><span class="ident" id="5117603">Doc</span><span class="op" id="5117606">.</span><span class="ident" id="5117607">Text</span><span class="op" id="5117611">(</span><span class="op" id="5117612">)</span><span class="op" id="5117613">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117617">Name</span><span class="op" id="5117621">:</span>&nbsp;<span class="ident" id="5117623">name</span><span class="op" id="5117627">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117631">Decl</span><span class="op" id="5117635">:</span>&nbsp;<span class="ident" id="5117637">f</span><span class="op" id="5117638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117642">Recv</span><span class="op" id="5117646">:</span>&nbsp;<span class="ident" id="5117648">recv</span><span class="op" id="5117652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117656">Orig</span><span class="op" id="5117660">:</span>&nbsp;<span class="ident" id="5117662">recv</span><span class="op" id="5117666">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5117669">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117672">f</span><span class="op" id="5117673">.</span><span class="ident" id="5117674">Doc</span>&nbsp;<span class="op" id="5117678">=</span>&nbsp;<span class="builtintype" id="5117680">nil</span>&nbsp;<span class="comment" id="5117684">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="5117718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5117721">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="5117792">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="5117864">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="5117881">//</span><br>
<span class="lineno"></span><span class="keyword" id="5117884">func</span>&nbsp;<span class="op" id="5117889">(</span><span class="ident" id="5117890">mset</span>&nbsp;<span class="ident" id="5117895">methodSet</span><span class="op" id="5117904">)</span>&nbsp;<span class="ident" id="5117906">add</span><span class="op" id="5117909">(</span><span class="ident" id="5117910">m</span>&nbsp;<span class="op" id="5117912">*</span><span class="ident" id="5117913">Func</span><span class="op" id="5117917">)</span>&nbsp;<span class="op" id="5117919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117922">old</span>&nbsp;<span class="op" id="5117926">:=</span>&nbsp;<span class="ident" id="5117929">mset</span><span class="op" id="5117933">[</span><span class="ident" id="5117934">m</span><span class="op" id="5117935">.</span><span class="ident" id="5117936">Name</span><span class="op" id="5117940">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5117943">if</span>&nbsp;<span class="ident" id="5117946">old</span>&nbsp;<span class="op" id="5117950">==</span>&nbsp;<span class="builtintype" id="5117953">nil</span>&nbsp;<span class="op" id="5117957">||</span>&nbsp;<span class="ident" id="5117960">m</span><span class="op" id="5117961">.</span><span class="ident" id="5117962">Level</span>&nbsp;<span class="op" id="5117968">&lt;</span>&nbsp;<span class="ident" id="5117970">old</span><span class="op" id="5117973">.</span><span class="ident" id="5117974">Level</span>&nbsp;<span class="op" id="5117980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5117984">mset</span><span class="op" id="5117988">[</span><span class="ident" id="5117989">m</span><span class="op" id="5117990">.</span><span class="ident" id="5117991">Name</span><span class="op" id="5117995">]</span>&nbsp;<span class="op" id="5117997">=</span>&nbsp;<span class="ident" id="5117999">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118003">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5118011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118014">if</span>&nbsp;<span class="ident" id="5118017">old</span>&nbsp;<span class="op" id="5118021">!=</span>&nbsp;<span class="builtintype" id="5118024">nil</span>&nbsp;<span class="op" id="5118028">&amp;&amp;</span>&nbsp;<span class="ident" id="5118031">m</span><span class="op" id="5118032">.</span><span class="ident" id="5118033">Level</span>&nbsp;<span class="op" id="5118039">==</span>&nbsp;<span class="ident" id="5118042">old</span><span class="op" id="5118045">.</span><span class="ident" id="5118046">Level</span>&nbsp;<span class="op" id="5118052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118056">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118109">mset</span><span class="op" id="5118113">[</span><span class="ident" id="5118114">m</span><span class="op" id="5118115">.</span><span class="ident" id="5118116">Name</span><span class="op" id="5118120">]</span>&nbsp;<span class="op" id="5118122">=</span>&nbsp;<span class="op" id="5118124">&amp;</span><span class="ident" id="5118125">Func</span><span class="op" id="5118129">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118134">Name</span><span class="op" id="5118138">:</span>&nbsp;&nbsp;<span class="ident" id="5118141">m</span><span class="op" id="5118142">.</span><span class="ident" id="5118143">Name</span><span class="op" id="5118147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5118152">Level</span><span class="op" id="5118157">:</span>&nbsp;<span class="ident" id="5118159">m</span><span class="op" id="5118160">.</span><span class="ident" id="5118161">Level</span><span class="op" id="5118166">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5118170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5118173">}</span><br>
<span class="lineno"></span><span class="op" id="5118175">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="5118178">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5118258">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5118274">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="5118337">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="5118381">//</span><br>
<span class="lineno"></span><span class="keyword" id="5118384">func</span>&nbsp;<span class="ident" id="5118389">baseTypeName</span><span class="op" id="5118401">(</span><span class="ident" id="5118402">x</span>&nbsp;<span class="ident" id="5118404">ast</span><span class="op" id="5118407">.</span><span class="ident" id="5118408">Expr</span><span class="op" id="5118412">)</span>&nbsp;<span class="op" id="5118414">(</span><span class="ident" id="5118415">name</span>&nbsp;<span class="builtintype" id="5118420">string</span><span class="op" id="5118426">,</span>&nbsp;<span class="ident" id="5118428">imported</span>&nbsp;<span class="builtintype" id="5118437">bool</span><span class="op" id="5118441">)</span>&nbsp;<span class="op" id="5118443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118446">switch</span>&nbsp;<span class="ident" id="5118453">t</span>&nbsp;<span class="op" id="5118455">:=</span>&nbsp;<span class="ident" id="5118458">x</span><span class="op" id="5118459">.</span><span class="op" id="5118460">(</span><span class="keyword" id="5118461">type</span><span class="op" id="5118465">)</span>&nbsp;<span class="op" id="5118467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118470">case</span>&nbsp;<span class="op" id="5118475">*</span><span class="ident" id="5118476">ast</span><span class="op" id="5118479">.</span><span class="ident" id="5118480">Ident</span><span class="op" id="5118485">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118489">return</span>&nbsp;<span class="ident" id="5118496">t</span><span class="op" id="5118497">.</span><span class="ident" id="5118498">Name</span><span class="op" id="5118502">,</span>&nbsp;<span class="builtintype" id="5118504">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118511">case</span>&nbsp;<span class="op" id="5118516">*</span><span class="ident" id="5118517">ast</span><span class="op" id="5118520">.</span><span class="ident" id="5118521">SelectorExpr</span><span class="op" id="5118533">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118537">if</span>&nbsp;<span class="ident" id="5118540">_</span><span class="op" id="5118541">,</span>&nbsp;<span class="ident" id="5118543">ok</span>&nbsp;<span class="op" id="5118546">:=</span>&nbsp;<span class="ident" id="5118549">t</span><span class="op" id="5118550">.</span><span class="ident" id="5118551">X</span><span class="op" id="5118552">.</span><span class="op" id="5118553">(</span><span class="op" id="5118554">*</span><span class="ident" id="5118555">ast</span><span class="op" id="5118558">.</span><span class="ident" id="5118559">Ident</span><span class="op" id="5118564">)</span><span class="op" id="5118565">;</span>&nbsp;<span class="ident" id="5118567">ok</span>&nbsp;<span class="op" id="5118570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118575">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5118621">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118651">return</span>&nbsp;<span class="ident" id="5118658">t</span><span class="op" id="5118659">.</span><span class="ident" id="5118660">Sel</span><span class="op" id="5118663">.</span><span class="ident" id="5118664">Name</span><span class="op" id="5118668">,</span>&nbsp;<span class="builtintype" id="5118670">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5118677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118680">case</span>&nbsp;<span class="op" id="5118685">*</span><span class="ident" id="5118686">ast</span><span class="op" id="5118689">.</span><span class="ident" id="5118690">StarExpr</span><span class="op" id="5118698">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118702">return</span>&nbsp;<span class="ident" id="5118709">baseTypeName</span><span class="op" id="5118721">(</span><span class="ident" id="5118722">t</span><span class="op" id="5118723">.</span><span class="ident" id="5118724">X</span><span class="op" id="5118725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5118728">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5118731">return</span><br>
<span class="lineno"></span><span class="op" id="5118738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5118741">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="5118794">type</span>&nbsp;<span class="ident" id="5118799">embeddedSet</span>&nbsp;<span class="keyword" id="5118811">map</span><span class="op" id="5118814">[</span><span class="op" id="5118815">*</span><span class="ident" id="5118816">namedType</span><span class="op" id="5118825">]</span><span class="builtintype" id="5118826">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="5118832">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="5118906">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="5118978">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="5119000">//</span><br>
<span class="lineno">120</span><span class="keyword" id="5119003">type</span>&nbsp;<span class="ident" id="5119008">namedType</span>&nbsp;<span class="keyword" id="5119018">struct</span>&nbsp;<span class="op" id="5119025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119028">doc</span>&nbsp;&nbsp;<span class="builtintype" id="5119033">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119046">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119071">name</span>&nbsp;<span class="builtintype" id="5119076">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119089">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119103">decl</span>&nbsp;<span class="op" id="5119108">*</span><span class="ident" id="5119109">ast</span><span class="op" id="5119112">.</span><span class="ident" id="5119113">GenDecl</span>&nbsp;<span class="comment" id="5119121">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119166">isEmbedded</span>&nbsp;<span class="builtintype" id="5119177">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119189">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119223">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5119234">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119246">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119280">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5119291">embeddedSet</span>&nbsp;<span class="comment" id="5119303">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119347">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119375">values</span>&nbsp;&nbsp;<span class="op" id="5119383">[</span><span class="op" id="5119384">]</span><span class="op" id="5119385">*</span><span class="ident" id="5119386">Value</span>&nbsp;<span class="comment" id="5119392">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119412">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5119420">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119431">methods</span>&nbsp;<span class="ident" id="5119439">methodSet</span><br>
<span class="lineno"></span><span class="op" id="5119449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="5119452">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5119532">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5119547">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="5119605">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="5119666">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5119723">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="5119783">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5119844">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="5119885">//</span><br>
<span class="lineno">145</span><span class="keyword" id="5119888">type</span>&nbsp;<span class="ident" id="5119893">reader</span>&nbsp;<span class="keyword" id="5119900">struct</span>&nbsp;<span class="op" id="5119907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119910">mode</span>&nbsp;<span class="ident" id="5119915">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5119922">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119945">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5119955">string</span>&nbsp;<span class="comment" id="5119962">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5119996">filenames</span>&nbsp;<span class="op" id="5120006">[</span><span class="op" id="5120007">]</span><span class="builtintype" id="5120008">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120016">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120026">map</span><span class="op" id="5120029">[</span><span class="builtintype" id="5120030">string</span><span class="op" id="5120036">]</span><span class="op" id="5120037">[</span><span class="op" id="5120038">]</span><span class="op" id="5120039">*</span><span class="ident" id="5120040">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120047">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120064">imports</span>&nbsp;<span class="keyword" id="5120072">map</span><span class="op" id="5120075">[</span><span class="builtintype" id="5120076">string</span><span class="op" id="5120082">]</span><span class="builtintype" id="5120083">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120088">values</span>&nbsp;&nbsp;<span class="op" id="5120096">[</span><span class="op" id="5120097">]</span><span class="op" id="5120098">*</span><span class="ident" id="5120099">Value</span>&nbsp;<span class="comment" id="5120105">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120125">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120133">map</span><span class="op" id="5120136">[</span><span class="builtintype" id="5120137">string</span><span class="op" id="5120143">]</span><span class="op" id="5120144">*</span><span class="ident" id="5120145">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120156">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5120164">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120176">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120230">errorDecl</span>&nbsp;<span class="builtintype" id="5120240">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120261">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120307">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5120317">[</span><span class="op" id="5120318">]</span><span class="op" id="5120319">*</span><span class="ident" id="5120320">ast</span><span class="op" id="5120323">.</span><span class="ident" id="5120324">InterfaceType</span>&nbsp;<span class="comment" id="5120338">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="5120395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5120398">func</span>&nbsp;<span class="op" id="5120403">(</span><span class="ident" id="5120404">r</span>&nbsp;<span class="op" id="5120406">*</span><span class="ident" id="5120407">reader</span><span class="op" id="5120413">)</span>&nbsp;<span class="ident" id="5120415">isVisible</span><span class="op" id="5120424">(</span><span class="ident" id="5120425">name</span>&nbsp;<span class="builtintype" id="5120430">string</span><span class="op" id="5120436">)</span>&nbsp;<span class="builtintype" id="5120438">bool</span>&nbsp;<span class="op" id="5120443">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120446">return</span>&nbsp;<span class="ident" id="5120453">r</span><span class="op" id="5120454">.</span><span class="ident" id="5120455">mode</span><span class="op" id="5120459">&amp;</span><span class="ident" id="5120460">AllDecls</span>&nbsp;<span class="op" id="5120469">!=</span>&nbsp;<span class="num" id="5120472">0</span>&nbsp;<span class="op" id="5120474">||</span>&nbsp;<span class="ident" id="5120477">ast</span><span class="op" id="5120480">.</span><span class="ident" id="5120481">IsExported</span><span class="op" id="5120491">(</span><span class="ident" id="5120492">name</span><span class="op" id="5120496">)</span><br>
<span class="lineno"></span><span class="op" id="5120498">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5120501">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="5120558">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="5120614">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="5120672">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="5120701">//</span><br>
<span class="lineno"></span><span class="keyword" id="5120704">func</span>&nbsp;<span class="op" id="5120709">(</span><span class="ident" id="5120710">r</span>&nbsp;<span class="op" id="5120712">*</span><span class="ident" id="5120713">reader</span><span class="op" id="5120719">)</span>&nbsp;<span class="ident" id="5120721">lookupType</span><span class="op" id="5120731">(</span><span class="ident" id="5120732">name</span>&nbsp;<span class="builtintype" id="5120737">string</span><span class="op" id="5120743">)</span>&nbsp;<span class="op" id="5120745">*</span><span class="ident" id="5120746">namedType</span>&nbsp;<span class="op" id="5120756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120759">if</span>&nbsp;<span class="ident" id="5120762">name</span>&nbsp;<span class="op" id="5120767">==</span>&nbsp;<span class="string" id="5120770">&#34;&#34;</span>&nbsp;<span class="op" id="5120773">||</span>&nbsp;<span class="ident" id="5120776">name</span>&nbsp;<span class="op" id="5120781">==</span>&nbsp;<span class="string" id="5120784">&#34;_&#34;</span>&nbsp;<span class="op" id="5120788">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120792">return</span>&nbsp;<span class="builtintype" id="5120799">nil</span>&nbsp;<span class="comment" id="5120803">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5120840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120843">if</span>&nbsp;<span class="ident" id="5120846">typ</span><span class="op" id="5120849">,</span>&nbsp;<span class="ident" id="5120851">found</span>&nbsp;<span class="op" id="5120857">:=</span>&nbsp;<span class="ident" id="5120860">r</span><span class="op" id="5120861">.</span><span class="ident" id="5120862">types</span><span class="op" id="5120867">[</span><span class="ident" id="5120868">name</span><span class="op" id="5120872">]</span><span class="op" id="5120873">;</span>&nbsp;<span class="ident" id="5120875">found</span>&nbsp;<span class="op" id="5120881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5120885">return</span>&nbsp;<span class="ident" id="5120892">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5120897">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5120900">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120949">typ</span>&nbsp;<span class="op" id="5120953">:=</span>&nbsp;<span class="op" id="5120956">&amp;</span><span class="ident" id="5120957">namedType</span><span class="op" id="5120966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120970">name</span><span class="op" id="5120974">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120980">name</span><span class="op" id="5120984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5120988">embedded</span><span class="op" id="5120996">:</span>&nbsp;<span class="builtinfunc" id="5120998">make</span><span class="op" id="5121002">(</span><span class="ident" id="5121003">embeddedSet</span><span class="op" id="5121014">)</span><span class="op" id="5121015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121019">funcs</span><span class="op" id="5121024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5121029">make</span><span class="op" id="5121033">(</span><span class="ident" id="5121034">methodSet</span><span class="op" id="5121043">)</span><span class="op" id="5121044">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121048">methods</span><span class="op" id="5121055">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="5121058">make</span><span class="op" id="5121062">(</span><span class="ident" id="5121063">methodSet</span><span class="op" id="5121072">)</span><span class="op" id="5121073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121079">r</span><span class="op" id="5121080">.</span><span class="ident" id="5121081">types</span><span class="op" id="5121086">[</span><span class="ident" id="5121087">name</span><span class="op" id="5121091">]</span>&nbsp;<span class="op" id="5121093">=</span>&nbsp;<span class="ident" id="5121095">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121100">return</span>&nbsp;<span class="ident" id="5121107">typ</span><br>
<span class="lineno"></span><span class="op" id="5121111">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="5121114">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="5121176">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="5121240">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5121304">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="5121344">//</span><br>
<span class="lineno"></span><span class="keyword" id="5121347">func</span>&nbsp;<span class="op" id="5121352">(</span><span class="ident" id="5121353">r</span>&nbsp;<span class="op" id="5121355">*</span><span class="ident" id="5121356">reader</span><span class="op" id="5121362">)</span>&nbsp;<span class="ident" id="5121364">recordAnonymousField</span><span class="op" id="5121384">(</span><span class="ident" id="5121385">parent</span>&nbsp;<span class="op" id="5121392">*</span><span class="ident" id="5121393">namedType</span><span class="op" id="5121402">,</span>&nbsp;<span class="ident" id="5121404">fieldType</span>&nbsp;<span class="ident" id="5121414">ast</span><span class="op" id="5121417">.</span><span class="ident" id="5121418">Expr</span><span class="op" id="5121422">)</span>&nbsp;<span class="op" id="5121424">(</span><span class="ident" id="5121425">fname</span>&nbsp;<span class="builtintype" id="5121431">string</span><span class="op" id="5121437">)</span>&nbsp;<span class="op" id="5121439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121442">fname</span><span class="op" id="5121447">,</span>&nbsp;<span class="ident" id="5121449">imp</span>&nbsp;<span class="op" id="5121453">:=</span>&nbsp;<span class="ident" id="5121456">baseTypeName</span><span class="op" id="5121468">(</span><span class="ident" id="5121469">fieldType</span><span class="op" id="5121478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121481">if</span>&nbsp;<span class="ident" id="5121484">parent</span>&nbsp;<span class="op" id="5121491">==</span>&nbsp;<span class="builtintype" id="5121494">nil</span>&nbsp;<span class="op" id="5121498">||</span>&nbsp;<span class="ident" id="5121501">imp</span>&nbsp;<span class="op" id="5121505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121509">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121520">if</span>&nbsp;<span class="ident" id="5121523">ftype</span>&nbsp;<span class="op" id="5121529">:=</span>&nbsp;<span class="ident" id="5121532">r</span><span class="op" id="5121533">.</span><span class="ident" id="5121534">lookupType</span><span class="op" id="5121544">(</span><span class="ident" id="5121545">fname</span><span class="op" id="5121550">)</span><span class="op" id="5121551">;</span>&nbsp;<span class="ident" id="5121553">ftype</span>&nbsp;<span class="op" id="5121559">!=</span>&nbsp;<span class="builtintype" id="5121562">nil</span>&nbsp;<span class="op" id="5121566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121570">ftype</span><span class="op" id="5121575">.</span><span class="ident" id="5121576">isEmbedded</span>&nbsp;<span class="op" id="5121587">=</span>&nbsp;<span class="builtintype" id="5121589">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121596">_</span><span class="op" id="5121597">,</span>&nbsp;<span class="ident" id="5121599">ptr</span>&nbsp;<span class="op" id="5121603">:=</span>&nbsp;<span class="ident" id="5121606">fieldType</span><span class="op" id="5121615">.</span><span class="op" id="5121616">(</span><span class="op" id="5121617">*</span><span class="ident" id="5121618">ast</span><span class="op" id="5121621">.</span><span class="ident" id="5121622">StarExpr</span><span class="op" id="5121630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121634">parent</span><span class="op" id="5121640">.</span><span class="ident" id="5121641">embedded</span><span class="op" id="5121649">[</span><span class="ident" id="5121650">ftype</span><span class="op" id="5121655">]</span>&nbsp;<span class="op" id="5121657">=</span>&nbsp;<span class="ident" id="5121659">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121667">return</span><br>
<span class="lineno"></span><span class="op" id="5121674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5121677">func</span>&nbsp;<span class="op" id="5121682">(</span><span class="ident" id="5121683">r</span>&nbsp;<span class="op" id="5121685">*</span><span class="ident" id="5121686">reader</span><span class="op" id="5121692">)</span>&nbsp;<span class="ident" id="5121694">readDoc</span><span class="op" id="5121701">(</span><span class="ident" id="5121702">comment</span>&nbsp;<span class="op" id="5121710">*</span><span class="ident" id="5121711">ast</span><span class="op" id="5121714">.</span><span class="ident" id="5121715">CommentGroup</span><span class="op" id="5121727">)</span>&nbsp;<span class="op" id="5121729">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121732">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5121791">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121847">text</span>&nbsp;<span class="op" id="5121852">:=</span>&nbsp;<span class="ident" id="5121855">comment</span><span class="op" id="5121862">.</span><span class="ident" id="5121863">Text</span><span class="op" id="5121867">(</span><span class="op" id="5121868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121871">if</span>&nbsp;<span class="ident" id="5121874">r</span><span class="op" id="5121875">.</span><span class="ident" id="5121876">doc</span>&nbsp;<span class="op" id="5121880">==</span>&nbsp;<span class="string" id="5121883">&#34;&#34;</span>&nbsp;<span class="op" id="5121886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121890">r</span><span class="op" id="5121891">.</span><span class="ident" id="5121892">doc</span>&nbsp;<span class="op" id="5121896">=</span>&nbsp;<span class="ident" id="5121898">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5121905">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5121913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121916">r</span><span class="op" id="5121917">.</span><span class="ident" id="5121918">doc</span>&nbsp;<span class="op" id="5121922">+=</span>&nbsp;<span class="string" id="5121925">&#34;\n&#34;</span>&nbsp;<span class="op" id="5121930">+</span>&nbsp;<span class="ident" id="5121932">text</span><br>
<span class="lineno"></span><span class="op" id="5121937">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="5121940">func</span>&nbsp;<span class="op" id="5121945">(</span><span class="ident" id="5121946">r</span>&nbsp;<span class="op" id="5121948">*</span><span class="ident" id="5121949">reader</span><span class="op" id="5121955">)</span>&nbsp;<span class="ident" id="5121957">remember</span><span class="op" id="5121965">(</span><span class="ident" id="5121966">typ</span>&nbsp;<span class="op" id="5121970">*</span><span class="ident" id="5121971">ast</span><span class="op" id="5121974">.</span><span class="ident" id="5121975">InterfaceType</span><span class="op" id="5121988">)</span>&nbsp;<span class="op" id="5121990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5121993">r</span><span class="op" id="5121994">.</span><span class="ident" id="5121995">fixlist</span>&nbsp;<span class="op" id="5122003">=</span>&nbsp;<span class="builtinfunc" id="5122005">append</span><span class="op" id="5122011">(</span><span class="ident" id="5122012">r</span><span class="op" id="5122013">.</span><span class="ident" id="5122014">fixlist</span><span class="op" id="5122021">,</span>&nbsp;<span class="ident" id="5122023">typ</span><span class="op" id="5122026">)</span><br>
<span class="lineno"></span><span class="op" id="5122028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5122031">func</span>&nbsp;<span class="ident" id="5122036">specNames</span><span class="op" id="5122045">(</span><span class="ident" id="5122046">specs</span>&nbsp;<span class="op" id="5122052">[</span><span class="op" id="5122053">]</span><span class="ident" id="5122054">ast</span><span class="op" id="5122057">.</span><span class="ident" id="5122058">Spec</span><span class="op" id="5122062">)</span>&nbsp;<span class="op" id="5122064">[</span><span class="op" id="5122065">]</span><span class="builtintype" id="5122066">string</span>&nbsp;<span class="op" id="5122073">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122076">names</span>&nbsp;<span class="op" id="5122082">:=</span>&nbsp;<span class="builtinfunc" id="5122085">make</span><span class="op" id="5122089">(</span><span class="op" id="5122090">[</span><span class="op" id="5122091">]</span><span class="builtintype" id="5122092">string</span><span class="op" id="5122098">,</span>&nbsp;<span class="num" id="5122100">0</span><span class="op" id="5122101">,</span>&nbsp;<span class="builtinfunc" id="5122103">len</span><span class="op" id="5122106">(</span><span class="ident" id="5122107">specs</span><span class="op" id="5122112">)</span><span class="op" id="5122113">)</span>&nbsp;<span class="comment" id="5122115">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122139">for</span>&nbsp;<span class="ident" id="5122143">_</span><span class="op" id="5122144">,</span>&nbsp;<span class="ident" id="5122146">s</span>&nbsp;<span class="op" id="5122148">:=</span>&nbsp;<span class="keyword" id="5122151">range</span>&nbsp;<span class="ident" id="5122157">specs</span>&nbsp;<span class="op" id="5122163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122167">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122222">for</span>&nbsp;<span class="ident" id="5122226">_</span><span class="op" id="5122227">,</span>&nbsp;<span class="ident" id="5122229">ident</span>&nbsp;<span class="op" id="5122235">:=</span>&nbsp;<span class="keyword" id="5122238">range</span>&nbsp;<span class="ident" id="5122244">s</span><span class="op" id="5122245">.</span><span class="op" id="5122246">(</span><span class="op" id="5122247">*</span><span class="ident" id="5122248">ast</span><span class="op" id="5122251">.</span><span class="ident" id="5122252">ValueSpec</span><span class="op" id="5122261">)</span><span class="op" id="5122262">.</span><span class="ident" id="5122263">Names</span>&nbsp;<span class="op" id="5122269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122274">names</span>&nbsp;<span class="op" id="5122280">=</span>&nbsp;<span class="builtinfunc" id="5122282">append</span><span class="op" id="5122288">(</span><span class="ident" id="5122289">names</span><span class="op" id="5122294">,</span>&nbsp;<span class="ident" id="5122296">ident</span><span class="op" id="5122301">.</span><span class="ident" id="5122302">Name</span><span class="op" id="5122306">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122316">return</span>&nbsp;<span class="ident" id="5122323">names</span><br>
<span class="lineno"></span><span class="op" id="5122329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="5122332">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5122383">//</span><br>
<span class="lineno"></span><span class="keyword" id="5122386">func</span>&nbsp;<span class="op" id="5122391">(</span><span class="ident" id="5122392">r</span>&nbsp;<span class="op" id="5122394">*</span><span class="ident" id="5122395">reader</span><span class="op" id="5122401">)</span>&nbsp;<span class="ident" id="5122403">readValue</span><span class="op" id="5122412">(</span><span class="ident" id="5122413">decl</span>&nbsp;<span class="op" id="5122418">*</span><span class="ident" id="5122419">ast</span><span class="op" id="5122422">.</span><span class="ident" id="5122423">GenDecl</span><span class="op" id="5122430">)</span>&nbsp;<span class="op" id="5122432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122435">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122490">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122560">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122630">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122700">domName</span>&nbsp;<span class="op" id="5122708">:=</span>&nbsp;<span class="string" id="5122711">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122715">domFreq</span>&nbsp;<span class="op" id="5122723">:=</span>&nbsp;<span class="num" id="5122726">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122729">prev</span>&nbsp;<span class="op" id="5122734">:=</span>&nbsp;<span class="string" id="5122737">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122741">n</span>&nbsp;<span class="op" id="5122743">:=</span>&nbsp;<span class="num" id="5122746">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122749">for</span>&nbsp;<span class="ident" id="5122753">_</span><span class="op" id="5122754">,</span>&nbsp;<span class="ident" id="5122756">spec</span>&nbsp;<span class="op" id="5122761">:=</span>&nbsp;<span class="keyword" id="5122764">range</span>&nbsp;<span class="ident" id="5122770">decl</span><span class="op" id="5122774">.</span><span class="ident" id="5122775">Specs</span>&nbsp;<span class="op" id="5122781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122785">s</span><span class="op" id="5122786">,</span>&nbsp;<span class="ident" id="5122788">ok</span>&nbsp;<span class="op" id="5122791">:=</span>&nbsp;<span class="ident" id="5122794">spec</span><span class="op" id="5122798">.</span><span class="op" id="5122799">(</span><span class="op" id="5122800">*</span><span class="ident" id="5122801">ast</span><span class="op" id="5122804">.</span><span class="ident" id="5122805">ValueSpec</span><span class="op" id="5122814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122818">if</span>&nbsp;<span class="op" id="5122821">!</span><span class="ident" id="5122822">ok</span>&nbsp;<span class="op" id="5122825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122830">continue</span>&nbsp;<span class="comment" id="5122839">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5122883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5122887">name</span>&nbsp;<span class="op" id="5122892">:=</span>&nbsp;<span class="string" id="5122895">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122900">switch</span>&nbsp;<span class="op" id="5122907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122911">case</span>&nbsp;<span class="ident" id="5122916">s</span><span class="op" id="5122917">.</span><span class="ident" id="5122918">Type</span>&nbsp;<span class="op" id="5122923">!=</span>&nbsp;<span class="builtintype" id="5122926">nil</span><span class="op" id="5122929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5122934">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5122978">if</span>&nbsp;<span class="ident" id="5122981">n</span><span class="op" id="5122982">,</span>&nbsp;<span class="ident" id="5122984">imp</span>&nbsp;<span class="op" id="5122988">:=</span>&nbsp;<span class="ident" id="5122991">baseTypeName</span><span class="op" id="5123003">(</span><span class="ident" id="5123004">s</span><span class="op" id="5123005">.</span><span class="ident" id="5123006">Type</span><span class="op" id="5123010">)</span><span class="op" id="5123011">;</span>&nbsp;<span class="op" id="5123013">!</span><span class="ident" id="5123014">imp</span>&nbsp;<span class="op" id="5123018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123024">name</span>&nbsp;<span class="op" id="5123029">=</span>&nbsp;<span class="ident" id="5123031">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123040">case</span>&nbsp;<span class="ident" id="5123045">decl</span><span class="op" id="5123049">.</span><span class="ident" id="5123050">Tok</span>&nbsp;<span class="op" id="5123054">==</span>&nbsp;<span class="ident" id="5123057">token</span><span class="op" id="5123062">.</span><span class="ident" id="5123063">CONST</span><span class="op" id="5123068">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123073">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123134">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123194">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123252">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123313">name</span>&nbsp;<span class="op" id="5123318">=</span>&nbsp;<span class="ident" id="5123320">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123327">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123331">if</span>&nbsp;<span class="ident" id="5123334">name</span>&nbsp;<span class="op" id="5123339">!=</span>&nbsp;<span class="string" id="5123342">&#34;&#34;</span>&nbsp;<span class="op" id="5123345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123350">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123379">if</span>&nbsp;<span class="ident" id="5123382">domName</span>&nbsp;<span class="op" id="5123390">!=</span>&nbsp;<span class="string" id="5123393">&#34;&#34;</span>&nbsp;<span class="op" id="5123396">&amp;&amp;</span>&nbsp;<span class="ident" id="5123399">domName</span>&nbsp;<span class="op" id="5123407">!=</span>&nbsp;<span class="ident" id="5123410">name</span>&nbsp;<span class="op" id="5123415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123421">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123471">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123492">domName</span>&nbsp;<span class="op" id="5123500">=</span>&nbsp;<span class="string" id="5123502">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123509">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123523">domName</span>&nbsp;<span class="op" id="5123531">=</span>&nbsp;<span class="ident" id="5123533">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123541">domFreq</span><span class="op" id="5123548">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123553">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123557">prev</span>&nbsp;<span class="op" id="5123562">=</span>&nbsp;<span class="ident" id="5123564">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123571">n</span><span class="op" id="5123572">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123580">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123622">if</span>&nbsp;<span class="ident" id="5123625">n</span>&nbsp;<span class="op" id="5123627">==</span>&nbsp;<span class="num" id="5123630">0</span>&nbsp;<span class="op" id="5123632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123636">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5123644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123648">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123722">values</span>&nbsp;<span class="op" id="5123729">:=</span>&nbsp;<span class="op" id="5123732">&amp;</span><span class="ident" id="5123733">r</span><span class="op" id="5123734">.</span><span class="ident" id="5123735">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123743">const</span>&nbsp;<span class="ident" id="5123749">threshold</span>&nbsp;<span class="op" id="5123759">=</span>&nbsp;<span class="num" id="5123761">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123767">if</span>&nbsp;<span class="ident" id="5123770">domName</span>&nbsp;<span class="op" id="5123778">!=</span>&nbsp;<span class="string" id="5123781">&#34;&#34;</span>&nbsp;<span class="op" id="5123784">&amp;&amp;</span>&nbsp;<span class="ident" id="5123787">r</span><span class="op" id="5123788">.</span><span class="ident" id="5123789">isVisible</span><span class="op" id="5123798">(</span><span class="ident" id="5123799">domName</span><span class="op" id="5123806">)</span>&nbsp;<span class="op" id="5123808">&amp;&amp;</span>&nbsp;<span class="ident" id="5123811">domFreq</span>&nbsp;<span class="op" id="5123819">&gt;=</span>&nbsp;<span class="builtintype" id="5123822">int</span><span class="op" id="5123825">(</span><span class="builtintype" id="5123826">float64</span><span class="op" id="5123833">(</span><span class="builtinfunc" id="5123834">len</span><span class="op" id="5123837">(</span><span class="ident" id="5123838">decl</span><span class="op" id="5123842">.</span><span class="ident" id="5123843">Specs</span><span class="op" id="5123848">)</span><span class="op" id="5123849">)</span><span class="op" id="5123850">*</span><span class="ident" id="5123851">threshold</span><span class="op" id="5123860">)</span>&nbsp;<span class="op" id="5123862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5123866">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5123911">if</span>&nbsp;<span class="ident" id="5123914">typ</span>&nbsp;<span class="op" id="5123918">:=</span>&nbsp;<span class="ident" id="5123921">r</span><span class="op" id="5123922">.</span><span class="ident" id="5123923">lookupType</span><span class="op" id="5123933">(</span><span class="ident" id="5123934">domName</span><span class="op" id="5123941">)</span><span class="op" id="5123942">;</span>&nbsp;<span class="ident" id="5123944">typ</span>&nbsp;<span class="op" id="5123948">!=</span>&nbsp;<span class="builtintype" id="5123951">nil</span>&nbsp;<span class="op" id="5123955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5123960">values</span>&nbsp;<span class="op" id="5123967">=</span>&nbsp;<span class="op" id="5123969">&amp;</span><span class="ident" id="5123970">typ</span><span class="op" id="5123973">.</span><span class="ident" id="5123974">values</span>&nbsp;<span class="comment" id="5123981">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124011">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124018">*</span><span class="ident" id="5124019">values</span>&nbsp;<span class="op" id="5124026">=</span>&nbsp;<span class="builtinfunc" id="5124028">append</span><span class="op" id="5124034">(</span><span class="op" id="5124035">*</span><span class="ident" id="5124036">values</span><span class="op" id="5124042">,</span>&nbsp;<span class="op" id="5124044">&amp;</span><span class="ident" id="5124045">Value</span><span class="op" id="5124050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124054">Doc</span><span class="op" id="5124057">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5124061">decl</span><span class="op" id="5124065">.</span><span class="ident" id="5124066">Doc</span><span class="op" id="5124069">.</span><span class="ident" id="5124070">Text</span><span class="op" id="5124074">(</span><span class="op" id="5124075">)</span><span class="op" id="5124076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124080">Names</span><span class="op" id="5124085">:</span>&nbsp;<span class="ident" id="5124087">specNames</span><span class="op" id="5124096">(</span><span class="ident" id="5124097">decl</span><span class="op" id="5124101">.</span><span class="ident" id="5124102">Specs</span><span class="op" id="5124107">)</span><span class="op" id="5124108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124112">Decl</span><span class="op" id="5124116">:</span>&nbsp;&nbsp;<span class="ident" id="5124119">decl</span><span class="op" id="5124123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124127">order</span><span class="op" id="5124132">:</span>&nbsp;<span class="builtinfunc" id="5124134">len</span><span class="op" id="5124137">(</span><span class="op" id="5124138">*</span><span class="ident" id="5124139">values</span><span class="op" id="5124145">)</span><span class="op" id="5124146">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124149">}</span><span class="op" id="5124150">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124153">decl</span><span class="op" id="5124157">.</span><span class="ident" id="5124158">Doc</span>&nbsp;<span class="op" id="5124162">=</span>&nbsp;<span class="builtintype" id="5124164">nil</span>&nbsp;<span class="comment" id="5124168">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5124202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5124205">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="5124268">//</span><br>
<span class="lineno"></span><span class="keyword" id="5124271">func</span>&nbsp;<span class="ident" id="5124276">fields</span><span class="op" id="5124282">(</span><span class="ident" id="5124283">typ</span>&nbsp;<span class="ident" id="5124287">ast</span><span class="op" id="5124290">.</span><span class="ident" id="5124291">Expr</span><span class="op" id="5124295">)</span>&nbsp;<span class="op" id="5124297">(</span><span class="ident" id="5124298">list</span>&nbsp;<span class="op" id="5124303">[</span><span class="op" id="5124304">]</span><span class="op" id="5124305">*</span><span class="ident" id="5124306">ast</span><span class="op" id="5124309">.</span><span class="ident" id="5124310">Field</span><span class="op" id="5124315">,</span>&nbsp;<span class="ident" id="5124317">isStruct</span>&nbsp;<span class="builtintype" id="5124326">bool</span><span class="op" id="5124330">)</span>&nbsp;<span class="op" id="5124332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124335">var</span>&nbsp;<span class="ident" id="5124339">fields</span>&nbsp;<span class="op" id="5124346">*</span><span class="ident" id="5124347">ast</span><span class="op" id="5124350">.</span><span class="ident" id="5124351">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124362">switch</span>&nbsp;<span class="ident" id="5124369">t</span>&nbsp;<span class="op" id="5124371">:=</span>&nbsp;<span class="ident" id="5124374">typ</span><span class="op" id="5124377">.</span><span class="op" id="5124378">(</span><span class="keyword" id="5124379">type</span><span class="op" id="5124383">)</span>&nbsp;<span class="op" id="5124385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124388">case</span>&nbsp;<span class="op" id="5124393">*</span><span class="ident" id="5124394">ast</span><span class="op" id="5124397">.</span><span class="ident" id="5124398">StructType</span><span class="op" id="5124408">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124412">fields</span>&nbsp;<span class="op" id="5124419">=</span>&nbsp;<span class="ident" id="5124421">t</span><span class="op" id="5124422">.</span><span class="ident" id="5124423">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124432">isStruct</span>&nbsp;<span class="op" id="5124441">=</span>&nbsp;<span class="builtintype" id="5124443">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124449">case</span>&nbsp;<span class="op" id="5124454">*</span><span class="ident" id="5124455">ast</span><span class="op" id="5124458">.</span><span class="ident" id="5124459">InterfaceType</span><span class="op" id="5124472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124476">fields</span>&nbsp;<span class="op" id="5124483">=</span>&nbsp;<span class="ident" id="5124485">t</span><span class="op" id="5124486">.</span><span class="ident" id="5124487">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124496">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124499">if</span>&nbsp;<span class="ident" id="5124502">fields</span>&nbsp;<span class="op" id="5124509">!=</span>&nbsp;<span class="builtintype" id="5124512">nil</span>&nbsp;<span class="op" id="5124516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124520">list</span>&nbsp;<span class="op" id="5124525">=</span>&nbsp;<span class="ident" id="5124527">fields</span><span class="op" id="5124533">.</span><span class="ident" id="5124534">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124543">return</span><br>
<span class="lineno"></span><span class="op" id="5124550">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5124553">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5124595">//</span><br>
<span class="lineno"></span><span class="keyword" id="5124598">func</span>&nbsp;<span class="op" id="5124603">(</span><span class="ident" id="5124604">r</span>&nbsp;<span class="op" id="5124606">*</span><span class="ident" id="5124607">reader</span><span class="op" id="5124613">)</span>&nbsp;<span class="ident" id="5124615">readType</span><span class="op" id="5124623">(</span><span class="ident" id="5124624">decl</span>&nbsp;<span class="op" id="5124629">*</span><span class="ident" id="5124630">ast</span><span class="op" id="5124633">.</span><span class="ident" id="5124634">GenDecl</span><span class="op" id="5124641">,</span>&nbsp;<span class="ident" id="5124643">spec</span>&nbsp;<span class="op" id="5124648">*</span><span class="ident" id="5124649">ast</span><span class="op" id="5124652">.</span><span class="ident" id="5124653">TypeSpec</span><span class="op" id="5124661">)</span>&nbsp;<span class="op" id="5124663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124666">typ</span>&nbsp;<span class="op" id="5124670">:=</span>&nbsp;<span class="ident" id="5124673">r</span><span class="op" id="5124674">.</span><span class="ident" id="5124675">lookupType</span><span class="op" id="5124685">(</span><span class="ident" id="5124686">spec</span><span class="op" id="5124690">.</span><span class="ident" id="5124691">Name</span><span class="op" id="5124695">.</span><span class="ident" id="5124696">Name</span><span class="op" id="5124700">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124703">if</span>&nbsp;<span class="ident" id="5124706">typ</span>&nbsp;<span class="op" id="5124710">==</span>&nbsp;<span class="builtintype" id="5124713">nil</span>&nbsp;<span class="op" id="5124717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124721">return</span>&nbsp;<span class="comment" id="5124728">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5124772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124776">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124829">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124884">typ</span><span class="op" id="5124887">.</span><span class="ident" id="5124888">decl</span>&nbsp;<span class="op" id="5124893">=</span>&nbsp;<span class="ident" id="5124895">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5124902">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124928">doc</span>&nbsp;<span class="op" id="5124932">:=</span>&nbsp;<span class="ident" id="5124935">spec</span><span class="op" id="5124939">.</span><span class="ident" id="5124940">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5124945">spec</span><span class="op" id="5124949">.</span><span class="ident" id="5124950">Doc</span>&nbsp;<span class="op" id="5124954">=</span>&nbsp;<span class="builtintype" id="5124956">nil</span>&nbsp;<span class="comment" id="5124960">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5124995">if</span>&nbsp;<span class="ident" id="5124998">doc</span>&nbsp;<span class="op" id="5125002">==</span>&nbsp;<span class="builtintype" id="5125005">nil</span>&nbsp;<span class="op" id="5125009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125013">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125083">doc</span>&nbsp;<span class="op" id="5125087">=</span>&nbsp;<span class="ident" id="5125089">decl</span><span class="op" id="5125093">.</span><span class="ident" id="5125094">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125099">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125102">decl</span><span class="op" id="5125106">.</span><span class="ident" id="5125107">Doc</span>&nbsp;<span class="op" id="5125111">=</span>&nbsp;<span class="builtintype" id="5125113">nil</span>&nbsp;<span class="comment" id="5125117">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125152">typ</span><span class="op" id="5125155">.</span><span class="ident" id="5125156">doc</span>&nbsp;<span class="op" id="5125160">=</span>&nbsp;<span class="ident" id="5125162">doc</span><span class="op" id="5125165">.</span><span class="ident" id="5125166">Text</span><span class="op" id="5125170">(</span><span class="op" id="5125171">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125175">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125233">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125296">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125324">var</span>&nbsp;<span class="ident" id="5125328">list</span>&nbsp;<span class="op" id="5125333">[</span><span class="op" id="5125334">]</span><span class="op" id="5125335">*</span><span class="ident" id="5125336">ast</span><span class="op" id="5125339">.</span><span class="ident" id="5125340">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125347">list</span><span class="op" id="5125351">,</span>&nbsp;<span class="ident" id="5125353">typ</span><span class="op" id="5125356">.</span><span class="ident" id="5125357">isStruct</span>&nbsp;<span class="op" id="5125366">=</span>&nbsp;<span class="ident" id="5125368">fields</span><span class="op" id="5125374">(</span><span class="ident" id="5125375">spec</span><span class="op" id="5125379">.</span><span class="ident" id="5125380">Type</span><span class="op" id="5125384">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125387">for</span>&nbsp;<span class="ident" id="5125391">_</span><span class="op" id="5125392">,</span>&nbsp;<span class="ident" id="5125394">field</span>&nbsp;<span class="op" id="5125400">:=</span>&nbsp;<span class="keyword" id="5125403">range</span>&nbsp;<span class="ident" id="5125409">list</span>&nbsp;<span class="op" id="5125414">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125418">if</span>&nbsp;<span class="builtinfunc" id="5125421">len</span><span class="op" id="5125424">(</span><span class="ident" id="5125425">field</span><span class="op" id="5125430">.</span><span class="ident" id="5125431">Names</span><span class="op" id="5125436">)</span>&nbsp;<span class="op" id="5125438">==</span>&nbsp;<span class="num" id="5125441">0</span>&nbsp;<span class="op" id="5125443">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125448">r</span><span class="op" id="5125449">.</span><span class="ident" id="5125450">recordAnonymousField</span><span class="op" id="5125470">(</span><span class="ident" id="5125471">typ</span><span class="op" id="5125474">,</span>&nbsp;<span class="ident" id="5125476">field</span><span class="op" id="5125481">.</span><span class="ident" id="5125482">Type</span><span class="op" id="5125486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125493">}</span><br>
<span class="lineno"></span><span class="op" id="5125495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="5125498">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="5125550">//</span><br>
<span class="lineno"></span><span class="keyword" id="5125553">func</span>&nbsp;<span class="op" id="5125558">(</span><span class="ident" id="5125559">r</span>&nbsp;<span class="op" id="5125561">*</span><span class="ident" id="5125562">reader</span><span class="op" id="5125568">)</span>&nbsp;<span class="ident" id="5125570">readFunc</span><span class="op" id="5125578">(</span><span class="ident" id="5125579">fun</span>&nbsp;<span class="op" id="5125583">*</span><span class="ident" id="5125584">ast</span><span class="op" id="5125587">.</span><span class="ident" id="5125588">FuncDecl</span><span class="op" id="5125596">)</span>&nbsp;<span class="op" id="5125598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125601">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125625">fun</span><span class="op" id="5125628">.</span><span class="ident" id="5125629">Body</span>&nbsp;<span class="op" id="5125634">=</span>&nbsp;<span class="builtintype" id="5125636">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125642">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125695">if</span>&nbsp;<span class="ident" id="5125698">fun</span><span class="op" id="5125701">.</span><span class="ident" id="5125702">Recv</span>&nbsp;<span class="op" id="5125707">!=</span>&nbsp;<span class="builtintype" id="5125710">nil</span>&nbsp;<span class="op" id="5125714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125718">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125730">recvTypeName</span><span class="op" id="5125742">,</span>&nbsp;<span class="ident" id="5125744">imp</span>&nbsp;<span class="op" id="5125748">:=</span>&nbsp;<span class="ident" id="5125751">baseTypeName</span><span class="op" id="5125763">(</span><span class="ident" id="5125764">fun</span><span class="op" id="5125767">.</span><span class="ident" id="5125768">Recv</span><span class="op" id="5125772">.</span><span class="ident" id="5125773">List</span><span class="op" id="5125777">[</span><span class="num" id="5125778">0</span><span class="op" id="5125779">]</span><span class="op" id="5125780">.</span><span class="ident" id="5125781">Type</span><span class="op" id="5125785">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125789">if</span>&nbsp;<span class="ident" id="5125792">imp</span>&nbsp;<span class="op" id="5125796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125801">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125842">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125871">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125880">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5125884">if</span>&nbsp;<span class="ident" id="5125887">typ</span>&nbsp;<span class="op" id="5125891">:=</span>&nbsp;<span class="ident" id="5125894">r</span><span class="op" id="5125895">.</span><span class="ident" id="5125896">lookupType</span><span class="op" id="5125906">(</span><span class="ident" id="5125907">recvTypeName</span><span class="op" id="5125919">)</span><span class="op" id="5125920">;</span>&nbsp;<span class="ident" id="5125922">typ</span>&nbsp;<span class="op" id="5125926">!=</span>&nbsp;<span class="builtintype" id="5125929">nil</span>&nbsp;<span class="op" id="5125933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5125938">typ</span><span class="op" id="5125941">.</span><span class="ident" id="5125942">methods</span><span class="op" id="5125949">.</span><span class="ident" id="5125950">set</span><span class="op" id="5125953">(</span><span class="ident" id="5125954">fun</span><span class="op" id="5125957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5125961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125965">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5125998">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126066">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126135">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126203">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126268">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126276">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126280">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126355">if</span>&nbsp;<span class="ident" id="5126358">fun</span><span class="op" id="5126361">.</span><span class="ident" id="5126362">Type</span><span class="op" id="5126366">.</span><span class="ident" id="5126367">Results</span><span class="op" id="5126374">.</span><span class="ident" id="5126375">NumFields</span><span class="op" id="5126384">(</span><span class="op" id="5126385">)</span>&nbsp;<span class="op" id="5126387">&gt;=</span>&nbsp;<span class="num" id="5126390">1</span>&nbsp;<span class="op" id="5126392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126396">res</span>&nbsp;<span class="op" id="5126400">:=</span>&nbsp;<span class="ident" id="5126403">fun</span><span class="op" id="5126406">.</span><span class="ident" id="5126407">Type</span><span class="op" id="5126411">.</span><span class="ident" id="5126412">Results</span><span class="op" id="5126419">.</span><span class="ident" id="5126420">List</span><span class="op" id="5126424">[</span><span class="num" id="5126425">0</span><span class="op" id="5126426">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126430">if</span>&nbsp;<span class="builtinfunc" id="5126433">len</span><span class="op" id="5126436">(</span><span class="ident" id="5126437">res</span><span class="op" id="5126440">.</span><span class="ident" id="5126441">Names</span><span class="op" id="5126446">)</span>&nbsp;<span class="op" id="5126448">&lt;=</span>&nbsp;<span class="num" id="5126451">1</span>&nbsp;<span class="op" id="5126453">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126458">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126515">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126572">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126603">if</span>&nbsp;<span class="ident" id="5126606">n</span><span class="op" id="5126607">,</span>&nbsp;<span class="ident" id="5126609">imp</span>&nbsp;<span class="op" id="5126613">:=</span>&nbsp;<span class="ident" id="5126616">baseTypeName</span><span class="op" id="5126628">(</span><span class="ident" id="5126629">res</span><span class="op" id="5126632">.</span><span class="ident" id="5126633">Type</span><span class="op" id="5126637">)</span><span class="op" id="5126638">;</span>&nbsp;<span class="op" id="5126640">!</span><span class="ident" id="5126641">imp</span>&nbsp;<span class="op" id="5126645">&amp;&amp;</span>&nbsp;<span class="ident" id="5126648">r</span><span class="op" id="5126649">.</span><span class="ident" id="5126650">isVisible</span><span class="op" id="5126659">(</span><span class="ident" id="5126660">n</span><span class="op" id="5126661">)</span>&nbsp;<span class="op" id="5126663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126669">if</span>&nbsp;<span class="ident" id="5126672">typ</span>&nbsp;<span class="op" id="5126676">:=</span>&nbsp;<span class="ident" id="5126679">r</span><span class="op" id="5126680">.</span><span class="ident" id="5126681">lookupType</span><span class="op" id="5126691">(</span><span class="ident" id="5126692">n</span><span class="op" id="5126693">)</span><span class="op" id="5126694">;</span>&nbsp;<span class="ident" id="5126696">typ</span>&nbsp;<span class="op" id="5126700">!=</span>&nbsp;<span class="builtintype" id="5126703">nil</span>&nbsp;<span class="op" id="5126707">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126714">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126750">typ</span><span class="op" id="5126753">.</span><span class="ident" id="5126754">funcs</span><span class="op" id="5126759">.</span><span class="ident" id="5126760">set</span><span class="op" id="5126763">(</span><span class="ident" id="5126764">fun</span><span class="op" id="5126767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5126774">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126790">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126797">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126801">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126831">r</span><span class="op" id="5126832">.</span><span class="ident" id="5126833">funcs</span><span class="op" id="5126838">.</span><span class="ident" id="5126839">set</span><span class="op" id="5126842">(</span><span class="ident" id="5126843">fun</span><span class="op" id="5126846">)</span><br>
<span class="lineno">400</span><span class="op" id="5126848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5126851">var</span>&nbsp;<span class="op" id="5126855">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126858">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5126872">=</span>&nbsp;<span class="string" id="5126874">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5126922">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5126984">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="5126998">=</span>&nbsp;<span class="ident" id="5127000">regexp</span><span class="op" id="5127006">.</span><span class="ident" id="5127007">MustCompile</span><span class="op" id="5127018">(</span><span class="string" id="5127019">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="5127029">+</span>&nbsp;<span class="ident" id="5127031">noteMarker</span><span class="op" id="5127041">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5127048">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127078">noteCommentRx</span>&nbsp;<span class="op" id="5127092">=</span>&nbsp;<span class="ident" id="5127094">regexp</span><span class="op" id="5127100">.</span><span class="ident" id="5127101">MustCompile</span><span class="op" id="5127112">(</span><span class="string" id="5127113">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="5127128">+</span>&nbsp;<span class="ident" id="5127130">noteMarker</span><span class="op" id="5127140">)</span>&nbsp;<span class="comment" id="5127142">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="5127174">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5127177">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5127241">//</span><br>
<span class="lineno">410</span><span class="keyword" id="5127244">func</span>&nbsp;<span class="op" id="5127249">(</span><span class="ident" id="5127250">r</span>&nbsp;<span class="op" id="5127252">*</span><span class="ident" id="5127253">reader</span><span class="op" id="5127259">)</span>&nbsp;<span class="ident" id="5127261">readNote</span><span class="op" id="5127269">(</span><span class="ident" id="5127270">list</span>&nbsp;<span class="op" id="5127275">[</span><span class="op" id="5127276">]</span><span class="op" id="5127277">*</span><span class="ident" id="5127278">ast</span><span class="op" id="5127281">.</span><span class="ident" id="5127282">Comment</span><span class="op" id="5127289">)</span>&nbsp;<span class="op" id="5127291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127294">text</span>&nbsp;<span class="op" id="5127299">:=</span>&nbsp;<span class="op" id="5127302">(</span><span class="op" id="5127303">&amp;</span><span class="ident" id="5127304">ast</span><span class="op" id="5127307">.</span><span class="ident" id="5127308">CommentGroup</span><span class="op" id="5127320">{</span><span class="ident" id="5127321">List</span><span class="op" id="5127325">:</span>&nbsp;<span class="ident" id="5127327">list</span><span class="op" id="5127331">}</span><span class="op" id="5127332">)</span><span class="op" id="5127333">.</span><span class="ident" id="5127334">Text</span><span class="op" id="5127338">(</span><span class="op" id="5127339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127342">if</span>&nbsp;<span class="ident" id="5127345">m</span>&nbsp;<span class="op" id="5127347">:=</span>&nbsp;<span class="ident" id="5127350">noteMarkerRx</span><span class="op" id="5127362">.</span><span class="ident" id="5127363">FindStringSubmatchIndex</span><span class="op" id="5127386">(</span><span class="ident" id="5127387">text</span><span class="op" id="5127391">)</span><span class="op" id="5127392">;</span>&nbsp;<span class="ident" id="5127394">m</span>&nbsp;<span class="op" id="5127396">!=</span>&nbsp;<span class="builtintype" id="5127399">nil</span>&nbsp;<span class="op" id="5127403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5127407">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5127451">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5127498">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5127545">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127573">body</span>&nbsp;<span class="op" id="5127578">:=</span>&nbsp;<span class="ident" id="5127581">clean</span><span class="op" id="5127586">(</span><span class="ident" id="5127587">text</span><span class="op" id="5127591">[</span><span class="ident" id="5127592">m</span><span class="op" id="5127593">[</span><span class="num" id="5127594">1</span><span class="op" id="5127595">]</span><span class="op" id="5127596">:</span><span class="op" id="5127597">]</span><span class="op" id="5127598">,</span>&nbsp;<span class="ident" id="5127600">keepNL</span><span class="op" id="5127606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5127610">if</span>&nbsp;<span class="ident" id="5127613">body</span>&nbsp;<span class="op" id="5127618">!=</span>&nbsp;<span class="string" id="5127621">&#34;&#34;</span>&nbsp;<span class="op" id="5127624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127629">marker</span>&nbsp;<span class="op" id="5127636">:=</span>&nbsp;<span class="ident" id="5127639">text</span><span class="op" id="5127643">[</span><span class="ident" id="5127644">m</span><span class="op" id="5127645">[</span><span class="num" id="5127646">2</span><span class="op" id="5127647">]</span><span class="op" id="5127648">:</span><span class="ident" id="5127649">m</span><span class="op" id="5127650">[</span><span class="num" id="5127651">3</span><span class="op" id="5127652">]</span><span class="op" id="5127653">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127658">r</span><span class="op" id="5127659">.</span><span class="ident" id="5127660">notes</span><span class="op" id="5127665">[</span><span class="ident" id="5127666">marker</span><span class="op" id="5127672">]</span>&nbsp;<span class="op" id="5127674">=</span>&nbsp;<span class="builtinfunc" id="5127676">append</span><span class="op" id="5127682">(</span><span class="ident" id="5127683">r</span><span class="op" id="5127684">.</span><span class="ident" id="5127685">notes</span><span class="op" id="5127690">[</span><span class="ident" id="5127691">marker</span><span class="op" id="5127697">]</span><span class="op" id="5127698">,</span>&nbsp;<span class="op" id="5127700">&amp;</span><span class="ident" id="5127701">Note</span><span class="op" id="5127705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127711">Pos</span><span class="op" id="5127714">:</span>&nbsp;&nbsp;<span class="ident" id="5127717">list</span><span class="op" id="5127721">[</span><span class="num" id="5127722">0</span><span class="op" id="5127723">]</span><span class="op" id="5127724">.</span><span class="ident" id="5127725">Pos</span><span class="op" id="5127728">(</span><span class="op" id="5127729">)</span><span class="op" id="5127730">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127736">End</span><span class="op" id="5127739">:</span>&nbsp;&nbsp;<span class="ident" id="5127742">list</span><span class="op" id="5127746">[</span><span class="builtinfunc" id="5127747">len</span><span class="op" id="5127750">(</span><span class="ident" id="5127751">list</span><span class="op" id="5127755">)</span><span class="op" id="5127756">-</span><span class="num" id="5127757">1</span><span class="op" id="5127758">]</span><span class="op" id="5127759">.</span><span class="ident" id="5127760">End</span><span class="op" id="5127763">(</span><span class="op" id="5127764">)</span><span class="op" id="5127765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127771">UID</span><span class="op" id="5127774">:</span>&nbsp;&nbsp;<span class="ident" id="5127777">text</span><span class="op" id="5127781">[</span><span class="ident" id="5127782">m</span><span class="op" id="5127783">[</span><span class="num" id="5127784">4</span><span class="op" id="5127785">]</span><span class="op" id="5127786">:</span><span class="ident" id="5127787">m</span><span class="op" id="5127788">[</span><span class="num" id="5127789">5</span><span class="op" id="5127790">]</span><span class="op" id="5127791">]</span><span class="op" id="5127792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5127798">Body</span><span class="op" id="5127802">:</span>&nbsp;<span class="ident" id="5127804">body</span><span class="op" id="5127808">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127813">}</span><span class="op" id="5127814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5127821">}</span><br>
<span class="lineno"></span><span class="op" id="5127823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="5127826">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5127869">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5127940">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="5128009">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5128077">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="5128143">//</span><br>
<span class="lineno"></span><span class="keyword" id="5128146">func</span>&nbsp;<span class="op" id="5128151">(</span><span class="ident" id="5128152">r</span>&nbsp;<span class="op" id="5128154">*</span><span class="ident" id="5128155">reader</span><span class="op" id="5128161">)</span>&nbsp;<span class="ident" id="5128163">readNotes</span><span class="op" id="5128172">(</span><span class="ident" id="5128173">comments</span>&nbsp;<span class="op" id="5128182">[</span><span class="op" id="5128183">]</span><span class="op" id="5128184">*</span><span class="ident" id="5128185">ast</span><span class="op" id="5128188">.</span><span class="ident" id="5128189">CommentGroup</span><span class="op" id="5128201">)</span>&nbsp;<span class="op" id="5128203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128206">for</span>&nbsp;<span class="ident" id="5128210">_</span><span class="op" id="5128211">,</span>&nbsp;<span class="ident" id="5128213">group</span>&nbsp;<span class="op" id="5128219">:=</span>&nbsp;<span class="keyword" id="5128222">range</span>&nbsp;<span class="ident" id="5128228">comments</span>&nbsp;<span class="op" id="5128237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128241">i</span>&nbsp;<span class="op" id="5128243">:=</span>&nbsp;<span class="op" id="5128246">-</span><span class="num" id="5128247">1</span>&nbsp;<span class="comment" id="5128249">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128309">list</span>&nbsp;<span class="op" id="5128314">:=</span>&nbsp;<span class="ident" id="5128317">group</span><span class="op" id="5128322">.</span><span class="ident" id="5128323">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128330">for</span>&nbsp;<span class="ident" id="5128334">j</span><span class="op" id="5128335">,</span>&nbsp;<span class="ident" id="5128337">c</span>&nbsp;<span class="op" id="5128339">:=</span>&nbsp;<span class="keyword" id="5128342">range</span>&nbsp;<span class="ident" id="5128348">list</span>&nbsp;<span class="op" id="5128353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128358">if</span>&nbsp;<span class="ident" id="5128361">noteCommentRx</span><span class="op" id="5128374">.</span><span class="ident" id="5128375">MatchString</span><span class="op" id="5128386">(</span><span class="ident" id="5128387">c</span><span class="op" id="5128388">.</span><span class="ident" id="5128389">Text</span><span class="op" id="5128393">)</span>&nbsp;<span class="op" id="5128395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128401">if</span>&nbsp;<span class="ident" id="5128404">i</span>&nbsp;<span class="op" id="5128406">&gt;=</span>&nbsp;<span class="num" id="5128409">0</span>&nbsp;<span class="op" id="5128411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128418">r</span><span class="op" id="5128419">.</span><span class="ident" id="5128420">readNote</span><span class="op" id="5128428">(</span><span class="ident" id="5128429">list</span><span class="op" id="5128433">[</span><span class="ident" id="5128434">i</span><span class="op" id="5128435">:</span><span class="ident" id="5128436">j</span><span class="op" id="5128437">]</span><span class="op" id="5128438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128444">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128450">i</span>&nbsp;<span class="op" id="5128452">=</span>&nbsp;<span class="ident" id="5128454">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128467">if</span>&nbsp;<span class="ident" id="5128470">i</span>&nbsp;<span class="op" id="5128472">&gt;=</span>&nbsp;<span class="num" id="5128475">0</span>&nbsp;<span class="op" id="5128477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128482">r</span><span class="op" id="5128483">.</span><span class="ident" id="5128484">readNote</span><span class="op" id="5128492">(</span><span class="ident" id="5128493">list</span><span class="op" id="5128497">[</span><span class="ident" id="5128498">i</span><span class="op" id="5128499">:</span><span class="op" id="5128500">]</span><span class="op" id="5128501">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128508">}</span><br>
<span class="lineno"></span><span class="op" id="5128510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5128513">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="5128571">//</span><br>
<span class="lineno"></span><span class="keyword" id="5128574">func</span>&nbsp;<span class="op" id="5128579">(</span><span class="ident" id="5128580">r</span>&nbsp;<span class="op" id="5128582">*</span><span class="ident" id="5128583">reader</span><span class="op" id="5128589">)</span>&nbsp;<span class="ident" id="5128591">readFile</span><span class="op" id="5128599">(</span><span class="ident" id="5128600">src</span>&nbsp;<span class="op" id="5128604">*</span><span class="ident" id="5128605">ast</span><span class="op" id="5128608">.</span><span class="ident" id="5128609">File</span><span class="op" id="5128613">)</span>&nbsp;<span class="op" id="5128615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5128618">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128648">if</span>&nbsp;<span class="ident" id="5128651">src</span><span class="op" id="5128654">.</span><span class="ident" id="5128655">Doc</span>&nbsp;<span class="op" id="5128659">!=</span>&nbsp;<span class="builtintype" id="5128662">nil</span>&nbsp;<span class="op" id="5128666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128670">r</span><span class="op" id="5128671">.</span><span class="ident" id="5128672">readDoc</span><span class="op" id="5128679">(</span><span class="ident" id="5128680">src</span><span class="op" id="5128683">.</span><span class="ident" id="5128684">Doc</span><span class="op" id="5128687">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5128691">src</span><span class="op" id="5128694">.</span><span class="ident" id="5128695">Doc</span>&nbsp;<span class="op" id="5128699">=</span>&nbsp;<span class="builtintype" id="5128701">nil</span>&nbsp;<span class="comment" id="5128705">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5128740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5128744">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128769">for</span>&nbsp;<span class="ident" id="5128773">_</span><span class="op" id="5128774">,</span>&nbsp;<span class="ident" id="5128776">decl</span>&nbsp;<span class="op" id="5128781">:=</span>&nbsp;<span class="keyword" id="5128784">range</span>&nbsp;<span class="ident" id="5128790">src</span><span class="op" id="5128793">.</span><span class="ident" id="5128794">Decls</span>&nbsp;<span class="op" id="5128800">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128804">switch</span>&nbsp;<span class="ident" id="5128811">d</span>&nbsp;<span class="op" id="5128813">:=</span>&nbsp;<span class="ident" id="5128816">decl</span><span class="op" id="5128820">.</span><span class="op" id="5128821">(</span><span class="keyword" id="5128822">type</span><span class="op" id="5128826">)</span>&nbsp;<span class="op" id="5128828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128832">case</span>&nbsp;<span class="op" id="5128837">*</span><span class="ident" id="5128838">ast</span><span class="op" id="5128841">.</span><span class="ident" id="5128842">GenDecl</span><span class="op" id="5128849">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128854">switch</span>&nbsp;<span class="ident" id="5128861">d</span><span class="op" id="5128862">.</span><span class="ident" id="5128863">Tok</span>&nbsp;<span class="op" id="5128867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128872">case</span>&nbsp;<span class="ident" id="5128877">token</span><span class="op" id="5128882">.</span><span class="ident" id="5128883">IMPORT</span><span class="op" id="5128889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5128895">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128935">for</span>&nbsp;<span class="ident" id="5128939">_</span><span class="op" id="5128940">,</span>&nbsp;<span class="ident" id="5128942">spec</span>&nbsp;<span class="op" id="5128947">:=</span>&nbsp;<span class="keyword" id="5128950">range</span>&nbsp;<span class="ident" id="5128956">d</span><span class="op" id="5128957">.</span><span class="ident" id="5128958">Specs</span>&nbsp;<span class="op" id="5128964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5128971">if</span>&nbsp;<span class="ident" id="5128974">s</span><span class="op" id="5128975">,</span>&nbsp;<span class="ident" id="5128977">ok</span>&nbsp;<span class="op" id="5128980">:=</span>&nbsp;<span class="ident" id="5128983">spec</span><span class="op" id="5128987">.</span><span class="op" id="5128988">(</span><span class="op" id="5128989">*</span><span class="ident" id="5128990">ast</span><span class="op" id="5128993">.</span><span class="ident" id="5128994">ImportSpec</span><span class="op" id="5129004">)</span><span class="op" id="5129005">;</span>&nbsp;<span class="ident" id="5129007">ok</span>&nbsp;<span class="op" id="5129010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129018">if</span>&nbsp;<span class="ident" id="5129021">import_</span><span class="op" id="5129028">,</span>&nbsp;<span class="ident" id="5129030">err</span>&nbsp;<span class="op" id="5129034">:=</span>&nbsp;<span class="ident" id="5129037">strconv</span><span class="op" id="5129044">.</span><span class="ident" id="5129045">Unquote</span><span class="op" id="5129052">(</span><span class="ident" id="5129053">s</span><span class="op" id="5129054">.</span><span class="ident" id="5129055">Path</span><span class="op" id="5129059">.</span><span class="ident" id="5129060">Value</span><span class="op" id="5129065">)</span><span class="op" id="5129066">;</span>&nbsp;<span class="ident" id="5129068">err</span>&nbsp;<span class="op" id="5129072">==</span>&nbsp;<span class="builtintype" id="5129075">nil</span>&nbsp;<span class="op" id="5129079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5129088">r</span><span class="op" id="5129089">.</span><span class="ident" id="5129090">imports</span><span class="op" id="5129097">[</span><span class="ident" id="5129098">import_</span><span class="op" id="5129105">]</span>&nbsp;<span class="op" id="5129107">=</span>&nbsp;<span class="num" id="5129109">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5129117">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5129124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5129130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129135">case</span>&nbsp;<span class="ident" id="5129140">token</span><span class="op" id="5129145">.</span><span class="ident" id="5129146">CONST</span><span class="op" id="5129151">,</span>&nbsp;<span class="ident" id="5129153">token</span><span class="op" id="5129158">.</span><span class="ident" id="5129159">VAR</span><span class="op" id="5129162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129168">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5129229">r</span><span class="op" id="5129230">.</span><span class="ident" id="5129231">readValue</span><span class="op" id="5129240">(</span><span class="ident" id="5129241">d</span><span class="op" id="5129242">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129247">case</span>&nbsp;<span class="ident" id="5129252">token</span><span class="op" id="5129257">.</span><span class="ident" id="5129258">TYPE</span><span class="op" id="5129262">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129268">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129306">if</span>&nbsp;<span class="builtinfunc" id="5129309">len</span><span class="op" id="5129312">(</span><span class="ident" id="5129313">d</span><span class="op" id="5129314">.</span><span class="ident" id="5129315">Specs</span><span class="op" id="5129320">)</span>&nbsp;<span class="op" id="5129322">==</span>&nbsp;<span class="num" id="5129325">1</span>&nbsp;<span class="op" id="5129327">&amp;&amp;</span>&nbsp;<span class="op" id="5129330">!</span><span class="ident" id="5129331">d</span><span class="op" id="5129332">.</span><span class="ident" id="5129333">Lparen</span><span class="op" id="5129339">.</span><span class="ident" id="5129340">IsValid</span><span class="op" id="5129347">(</span><span class="op" id="5129348">)</span>&nbsp;<span class="op" id="5129350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129357">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129413">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129464">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129517">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129568">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129589">if</span>&nbsp;<span class="ident" id="5129592">s</span><span class="op" id="5129593">,</span>&nbsp;<span class="ident" id="5129595">ok</span>&nbsp;<span class="op" id="5129598">:=</span>&nbsp;<span class="ident" id="5129601">d</span><span class="op" id="5129602">.</span><span class="ident" id="5129603">Specs</span><span class="op" id="5129608">[</span><span class="num" id="5129609">0</span><span class="op" id="5129610">]</span><span class="op" id="5129611">.</span><span class="op" id="5129612">(</span><span class="op" id="5129613">*</span><span class="ident" id="5129614">ast</span><span class="op" id="5129617">.</span><span class="ident" id="5129618">TypeSpec</span><span class="op" id="5129626">)</span><span class="op" id="5129627">;</span>&nbsp;<span class="ident" id="5129629">ok</span>&nbsp;<span class="op" id="5129632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5129640">r</span><span class="op" id="5129641">.</span><span class="ident" id="5129642">readType</span><span class="op" id="5129650">(</span><span class="ident" id="5129651">d</span><span class="op" id="5129652">,</span>&nbsp;<span class="ident" id="5129654">s</span><span class="op" id="5129655">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5129662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129669">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5129679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129685">for</span>&nbsp;<span class="ident" id="5129689">_</span><span class="op" id="5129690">,</span>&nbsp;<span class="ident" id="5129692">spec</span>&nbsp;<span class="op" id="5129697">:=</span>&nbsp;<span class="keyword" id="5129700">range</span>&nbsp;<span class="ident" id="5129706">d</span><span class="op" id="5129707">.</span><span class="ident" id="5129708">Specs</span>&nbsp;<span class="op" id="5129714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5129721">if</span>&nbsp;<span class="ident" id="5129724">s</span><span class="op" id="5129725">,</span>&nbsp;<span class="ident" id="5129727">ok</span>&nbsp;<span class="op" id="5129730">:=</span>&nbsp;<span class="ident" id="5129733">spec</span><span class="op" id="5129737">.</span><span class="op" id="5129738">(</span><span class="op" id="5129739">*</span><span class="ident" id="5129740">ast</span><span class="op" id="5129743">.</span><span class="ident" id="5129744">TypeSpec</span><span class="op" id="5129752">)</span><span class="op" id="5129753">;</span>&nbsp;<span class="ident" id="5129755">ok</span>&nbsp;<span class="op" id="5129758">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129766">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129821">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129878">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5129934">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5129991">fake</span>&nbsp;<span class="op" id="5129996">:=</span>&nbsp;<span class="op" id="5129999">&amp;</span><span class="ident" id="5130000">ast</span><span class="op" id="5130003">.</span><span class="ident" id="5130004">GenDecl</span><span class="op" id="5130011">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130020">Doc</span><span class="op" id="5130023">:</span>&nbsp;<span class="ident" id="5130025">d</span><span class="op" id="5130026">.</span><span class="ident" id="5130027">Doc</span><span class="op" id="5130030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130039">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130090">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130143">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130192">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130243">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130295">TokPos</span><span class="op" id="5130301">:</span>&nbsp;<span class="ident" id="5130303">s</span><span class="op" id="5130304">.</span><span class="ident" id="5130305">Pos</span><span class="op" id="5130308">(</span><span class="op" id="5130309">)</span><span class="op" id="5130310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130319">Tok</span><span class="op" id="5130322">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130327">token</span><span class="op" id="5130332">.</span><span class="ident" id="5130333">TYPE</span><span class="op" id="5130337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130346">Specs</span><span class="op" id="5130351">:</span>&nbsp;&nbsp;<span class="op" id="5130354">[</span><span class="op" id="5130355">]</span><span class="ident" id="5130356">ast</span><span class="op" id="5130359">.</span><span class="ident" id="5130360">Spec</span><span class="op" id="5130364">{</span><span class="ident" id="5130365">s</span><span class="op" id="5130366">}</span><span class="op" id="5130367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130375">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130383">r</span><span class="op" id="5130384">.</span><span class="ident" id="5130385">readType</span><span class="op" id="5130393">(</span><span class="ident" id="5130394">fake</span><span class="op" id="5130398">,</span>&nbsp;<span class="ident" id="5130400">s</span><span class="op" id="5130401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5130423">case</span>&nbsp;<span class="op" id="5130428">*</span><span class="ident" id="5130429">ast</span><span class="op" id="5130432">.</span><span class="ident" id="5130433">FuncDecl</span><span class="op" id="5130441">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130446">r</span><span class="op" id="5130447">.</span><span class="ident" id="5130448">readFunc</span><span class="op" id="5130456">(</span><span class="ident" id="5130457">d</span><span class="op" id="5130458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5130465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130469">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130506">r</span><span class="op" id="5130507">.</span><span class="ident" id="5130508">readNotes</span><span class="op" id="5130517">(</span><span class="ident" id="5130518">src</span><span class="op" id="5130521">.</span><span class="ident" id="5130522">Comments</span><span class="op" id="5130530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130533">src</span><span class="op" id="5130536">.</span><span class="ident" id="5130537">Comments</span>&nbsp;<span class="op" id="5130546">=</span>&nbsp;<span class="builtintype" id="5130548">nil</span>&nbsp;<span class="comment" id="5130552">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="5130604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5130607">func</span>&nbsp;<span class="op" id="5130612">(</span><span class="ident" id="5130613">r</span>&nbsp;<span class="op" id="5130615">*</span><span class="ident" id="5130616">reader</span><span class="op" id="5130622">)</span>&nbsp;<span class="ident" id="5130624">readPackage</span><span class="op" id="5130635">(</span><span class="ident" id="5130636">pkg</span>&nbsp;<span class="op" id="5130640">*</span><span class="ident" id="5130641">ast</span><span class="op" id="5130644">.</span><span class="ident" id="5130645">Package</span><span class="op" id="5130652">,</span>&nbsp;<span class="ident" id="5130654">mode</span>&nbsp;<span class="ident" id="5130659">Mode</span><span class="op" id="5130663">)</span>&nbsp;<span class="op" id="5130665">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130668">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130690">r</span><span class="op" id="5130691">.</span><span class="ident" id="5130692">filenames</span>&nbsp;<span class="op" id="5130702">=</span>&nbsp;<span class="builtinfunc" id="5130704">make</span><span class="op" id="5130708">(</span><span class="op" id="5130709">[</span><span class="op" id="5130710">]</span><span class="builtintype" id="5130711">string</span><span class="op" id="5130717">,</span>&nbsp;<span class="builtinfunc" id="5130719">len</span><span class="op" id="5130722">(</span><span class="ident" id="5130723">pkg</span><span class="op" id="5130726">.</span><span class="ident" id="5130727">Files</span><span class="op" id="5130732">)</span><span class="op" id="5130733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130736">r</span><span class="op" id="5130737">.</span><span class="ident" id="5130738">imports</span>&nbsp;<span class="op" id="5130746">=</span>&nbsp;<span class="builtinfunc" id="5130748">make</span><span class="op" id="5130752">(</span><span class="keyword" id="5130753">map</span><span class="op" id="5130756">[</span><span class="builtintype" id="5130757">string</span><span class="op" id="5130763">]</span><span class="builtintype" id="5130764">int</span><span class="op" id="5130767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130770">r</span><span class="op" id="5130771">.</span><span class="ident" id="5130772">mode</span>&nbsp;<span class="op" id="5130777">=</span>&nbsp;<span class="ident" id="5130779">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130785">r</span><span class="op" id="5130786">.</span><span class="ident" id="5130787">types</span>&nbsp;<span class="op" id="5130793">=</span>&nbsp;<span class="builtinfunc" id="5130795">make</span><span class="op" id="5130799">(</span><span class="keyword" id="5130800">map</span><span class="op" id="5130803">[</span><span class="builtintype" id="5130804">string</span><span class="op" id="5130810">]</span><span class="op" id="5130811">*</span><span class="ident" id="5130812">namedType</span><span class="op" id="5130821">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130824">r</span><span class="op" id="5130825">.</span><span class="ident" id="5130826">funcs</span>&nbsp;<span class="op" id="5130832">=</span>&nbsp;<span class="builtinfunc" id="5130834">make</span><span class="op" id="5130838">(</span><span class="ident" id="5130839">methodSet</span><span class="op" id="5130848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130851">r</span><span class="op" id="5130852">.</span><span class="ident" id="5130853">notes</span>&nbsp;<span class="op" id="5130859">=</span>&nbsp;<span class="builtinfunc" id="5130861">make</span><span class="op" id="5130865">(</span><span class="keyword" id="5130866">map</span><span class="op" id="5130869">[</span><span class="builtintype" id="5130870">string</span><span class="op" id="5130876">]</span><span class="op" id="5130877">[</span><span class="op" id="5130878">]</span><span class="op" id="5130879">*</span><span class="ident" id="5130880">Note</span><span class="op" id="5130884">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130888">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5130943">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5130993">i</span>&nbsp;<span class="op" id="5130995">:=</span>&nbsp;<span class="num" id="5130998">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131001">for</span>&nbsp;<span class="ident" id="5131005">filename</span>&nbsp;<span class="op" id="5131014">:=</span>&nbsp;<span class="keyword" id="5131017">range</span>&nbsp;<span class="ident" id="5131023">pkg</span><span class="op" id="5131026">.</span><span class="ident" id="5131027">Files</span>&nbsp;<span class="op" id="5131033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131037">r</span><span class="op" id="5131038">.</span><span class="ident" id="5131039">filenames</span><span class="op" id="5131048">[</span><span class="ident" id="5131049">i</span><span class="op" id="5131050">]</span>&nbsp;<span class="op" id="5131052">=</span>&nbsp;<span class="ident" id="5131054">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131065">i</span><span class="op" id="5131066">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5131070">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131073">sort</span><span class="op" id="5131077">.</span><span class="ident" id="5131078">Strings</span><span class="op" id="5131085">(</span><span class="ident" id="5131086">r</span><span class="op" id="5131087">.</span><span class="ident" id="5131088">filenames</span><span class="op" id="5131097">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5131101">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131135">for</span>&nbsp;<span class="ident" id="5131139">_</span><span class="op" id="5131140">,</span>&nbsp;<span class="ident" id="5131142">filename</span>&nbsp;<span class="op" id="5131151">:=</span>&nbsp;<span class="keyword" id="5131154">range</span>&nbsp;<span class="ident" id="5131160">r</span><span class="op" id="5131161">.</span><span class="ident" id="5131162">filenames</span>&nbsp;<span class="op" id="5131172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131176">f</span>&nbsp;<span class="op" id="5131178">:=</span>&nbsp;<span class="ident" id="5131181">pkg</span><span class="op" id="5131184">.</span><span class="ident" id="5131185">Files</span><span class="op" id="5131190">[</span><span class="ident" id="5131191">filename</span><span class="op" id="5131199">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131203">if</span>&nbsp;<span class="ident" id="5131206">mode</span><span class="op" id="5131210">&amp;</span><span class="ident" id="5131211">AllDecls</span>&nbsp;<span class="op" id="5131220">==</span>&nbsp;<span class="num" id="5131223">0</span>&nbsp;<span class="op" id="5131225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131230">r</span><span class="op" id="5131231">.</span><span class="ident" id="5131232">fileExports</span><span class="op" id="5131243">(</span><span class="ident" id="5131244">f</span><span class="op" id="5131245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5131249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131253">r</span><span class="op" id="5131254">.</span><span class="ident" id="5131255">readFile</span><span class="op" id="5131263">(</span><span class="ident" id="5131264">f</span><span class="op" id="5131265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5131268">}</span><br>
<span class="lineno">550</span><span class="op" id="5131270">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5131273">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5131353">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="5131363">func</span>&nbsp;<span class="ident" id="5131368">customizeRecv</span><span class="op" id="5131381">(</span><span class="ident" id="5131382">f</span>&nbsp;<span class="op" id="5131384">*</span><span class="ident" id="5131385">Func</span><span class="op" id="5131389">,</span>&nbsp;<span class="ident" id="5131391">recvTypeName</span>&nbsp;<span class="builtintype" id="5131404">string</span><span class="op" id="5131410">,</span>&nbsp;<span class="ident" id="5131412">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5131426">bool</span><span class="op" id="5131430">,</span>&nbsp;<span class="ident" id="5131432">level</span>&nbsp;<span class="builtintype" id="5131438">int</span><span class="op" id="5131441">)</span>&nbsp;<span class="op" id="5131443">*</span><span class="ident" id="5131444">Func</span>&nbsp;<span class="op" id="5131449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131452">if</span>&nbsp;<span class="ident" id="5131455">f</span>&nbsp;<span class="op" id="5131457">==</span>&nbsp;<span class="builtintype" id="5131460">nil</span>&nbsp;<span class="op" id="5131464">||</span>&nbsp;<span class="ident" id="5131467">f</span><span class="op" id="5131468">.</span><span class="ident" id="5131469">Decl</span>&nbsp;<span class="op" id="5131474">==</span>&nbsp;<span class="builtintype" id="5131477">nil</span>&nbsp;<span class="op" id="5131481">||</span>&nbsp;<span class="ident" id="5131484">f</span><span class="op" id="5131485">.</span><span class="ident" id="5131486">Decl</span><span class="op" id="5131490">.</span><span class="ident" id="5131491">Recv</span>&nbsp;<span class="op" id="5131496">==</span>&nbsp;<span class="builtintype" id="5131499">nil</span>&nbsp;<span class="op" id="5131503">||</span>&nbsp;<span class="builtinfunc" id="5131506">len</span><span class="op" id="5131509">(</span><span class="ident" id="5131510">f</span><span class="op" id="5131511">.</span><span class="ident" id="5131512">Decl</span><span class="op" id="5131516">.</span><span class="ident" id="5131517">Recv</span><span class="op" id="5131521">.</span><span class="ident" id="5131522">List</span><span class="op" id="5131526">)</span>&nbsp;<span class="op" id="5131528">!=</span>&nbsp;<span class="num" id="5131531">1</span>&nbsp;<span class="op" id="5131533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131537">return</span>&nbsp;<span class="ident" id="5131544">f</span>&nbsp;<span class="comment" id="5131546">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5131580">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5131584">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131634">newField</span>&nbsp;<span class="op" id="5131643">:=</span>&nbsp;<span class="op" id="5131646">*</span><span class="ident" id="5131647">f</span><span class="op" id="5131648">.</span><span class="ident" id="5131649">Decl</span><span class="op" id="5131653">.</span><span class="ident" id="5131654">Recv</span><span class="op" id="5131658">.</span><span class="ident" id="5131659">List</span><span class="op" id="5131663">[</span><span class="num" id="5131664">0</span><span class="op" id="5131665">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131668">origPos</span>&nbsp;<span class="op" id="5131676">:=</span>&nbsp;<span class="ident" id="5131679">newField</span><span class="op" id="5131687">.</span><span class="ident" id="5131688">Type</span><span class="op" id="5131692">.</span><span class="ident" id="5131693">Pos</span><span class="op" id="5131696">(</span><span class="op" id="5131697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131700">_</span><span class="op" id="5131701">,</span>&nbsp;<span class="ident" id="5131703">origRecvIsPtr</span>&nbsp;<span class="op" id="5131717">:=</span>&nbsp;<span class="ident" id="5131720">newField</span><span class="op" id="5131728">.</span><span class="ident" id="5131729">Type</span><span class="op" id="5131733">.</span><span class="op" id="5131734">(</span><span class="op" id="5131735">*</span><span class="ident" id="5131736">ast</span><span class="op" id="5131739">.</span><span class="ident" id="5131740">StarExpr</span><span class="op" id="5131748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131751">newIdent</span>&nbsp;<span class="op" id="5131760">:=</span>&nbsp;<span class="op" id="5131763">&amp;</span><span class="ident" id="5131764">ast</span><span class="op" id="5131767">.</span><span class="ident" id="5131768">Ident</span><span class="op" id="5131773">{</span><span class="ident" id="5131774">NamePos</span><span class="op" id="5131781">:</span>&nbsp;<span class="ident" id="5131783">origPos</span><span class="op" id="5131790">,</span>&nbsp;<span class="ident" id="5131792">Name</span><span class="op" id="5131796">:</span>&nbsp;<span class="ident" id="5131798">recvTypeName</span><span class="op" id="5131810">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131813">var</span>&nbsp;<span class="ident" id="5131817">typ</span>&nbsp;<span class="ident" id="5131821">ast</span><span class="op" id="5131824">.</span><span class="ident" id="5131825">Expr</span>&nbsp;<span class="op" id="5131830">=</span>&nbsp;<span class="ident" id="5131832">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5131842">if</span>&nbsp;<span class="op" id="5131845">!</span><span class="ident" id="5131846">embeddedIsPtr</span>&nbsp;<span class="op" id="5131860">&amp;&amp;</span>&nbsp;<span class="ident" id="5131863">origRecvIsPtr</span>&nbsp;<span class="op" id="5131877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131881">newIdent</span><span class="op" id="5131889">.</span><span class="ident" id="5131890">NamePos</span><span class="op" id="5131897">++</span>&nbsp;<span class="comment" id="5131900">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131926">typ</span>&nbsp;<span class="op" id="5131930">=</span>&nbsp;<span class="op" id="5131932">&amp;</span><span class="ident" id="5131933">ast</span><span class="op" id="5131936">.</span><span class="ident" id="5131937">StarExpr</span><span class="op" id="5131945">{</span><span class="ident" id="5131946">Star</span><span class="op" id="5131950">:</span>&nbsp;<span class="ident" id="5131952">origPos</span><span class="op" id="5131959">,</span>&nbsp;<span class="ident" id="5131961">X</span><span class="op" id="5131962">:</span>&nbsp;<span class="ident" id="5131964">newIdent</span><span class="op" id="5131972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5131975">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5131978">newField</span><span class="op" id="5131986">.</span><span class="ident" id="5131987">Type</span>&nbsp;<span class="op" id="5131992">=</span>&nbsp;<span class="ident" id="5131994">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132000">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132065">newFieldList</span>&nbsp;<span class="op" id="5132078">:=</span>&nbsp;<span class="op" id="5132081">*</span><span class="ident" id="5132082">f</span><span class="op" id="5132083">.</span><span class="ident" id="5132084">Decl</span><span class="op" id="5132088">.</span><span class="ident" id="5132089">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132095">newFieldList</span><span class="op" id="5132107">.</span><span class="ident" id="5132108">List</span>&nbsp;<span class="op" id="5132113">=</span>&nbsp;<span class="op" id="5132115">[</span><span class="op" id="5132116">]</span><span class="op" id="5132117">*</span><span class="ident" id="5132118">ast</span><span class="op" id="5132121">.</span><span class="ident" id="5132122">Field</span><span class="op" id="5132127">{</span><span class="op" id="5132128">&amp;</span><span class="ident" id="5132129">newField</span><span class="op" id="5132137">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132141">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132212">newFuncDecl</span>&nbsp;<span class="op" id="5132224">:=</span>&nbsp;<span class="op" id="5132227">*</span><span class="ident" id="5132228">f</span><span class="op" id="5132229">.</span><span class="ident" id="5132230">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132236">newFuncDecl</span><span class="op" id="5132247">.</span><span class="ident" id="5132248">Recv</span>&nbsp;<span class="op" id="5132253">=</span>&nbsp;<span class="op" id="5132255">&amp;</span><span class="ident" id="5132256">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132271">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132336">newF</span>&nbsp;<span class="op" id="5132341">:=</span>&nbsp;<span class="op" id="5132344">*</span><span class="ident" id="5132345">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132348">newF</span><span class="op" id="5132352">.</span><span class="ident" id="5132353">Decl</span>&nbsp;<span class="op" id="5132358">=</span>&nbsp;<span class="op" id="5132360">&amp;</span><span class="ident" id="5132361">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132374">newF</span><span class="op" id="5132378">.</span><span class="ident" id="5132379">Recv</span>&nbsp;<span class="op" id="5132384">=</span>&nbsp;<span class="ident" id="5132386">recvString</span><span class="op" id="5132396">(</span><span class="ident" id="5132397">typ</span><span class="op" id="5132400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132403">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132436">newF</span><span class="op" id="5132440">.</span><span class="ident" id="5132441">Level</span>&nbsp;<span class="op" id="5132447">=</span>&nbsp;<span class="ident" id="5132449">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5132457">return</span>&nbsp;<span class="op" id="5132464">&amp;</span><span class="ident" id="5132465">newF</span><br>
<span class="lineno"></span><span class="op" id="5132470">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="5132473">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="5132545">//</span><br>
<span class="lineno"></span><span class="keyword" id="5132548">func</span>&nbsp;<span class="op" id="5132553">(</span><span class="ident" id="5132554">r</span>&nbsp;<span class="op" id="5132556">*</span><span class="ident" id="5132557">reader</span><span class="op" id="5132563">)</span>&nbsp;<span class="ident" id="5132565">collectEmbeddedMethods</span><span class="op" id="5132587">(</span><span class="ident" id="5132588">mset</span>&nbsp;<span class="ident" id="5132593">methodSet</span><span class="op" id="5132602">,</span>&nbsp;<span class="ident" id="5132604">typ</span>&nbsp;<span class="op" id="5132608">*</span><span class="ident" id="5132609">namedType</span><span class="op" id="5132618">,</span>&nbsp;<span class="ident" id="5132620">recvTypeName</span>&nbsp;<span class="builtintype" id="5132633">string</span><span class="op" id="5132639">,</span>&nbsp;<span class="ident" id="5132641">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="5132655">bool</span><span class="op" id="5132659">,</span>&nbsp;<span class="ident" id="5132661">level</span>&nbsp;<span class="builtintype" id="5132667">int</span><span class="op" id="5132670">,</span>&nbsp;<span class="ident" id="5132672">visited</span>&nbsp;<span class="ident" id="5132680">embeddedSet</span><span class="op" id="5132691">)</span>&nbsp;<span class="op" id="5132693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5132696">visited</span><span class="op" id="5132703">[</span><span class="ident" id="5132704">typ</span><span class="op" id="5132707">]</span>&nbsp;<span class="op" id="5132709">=</span>&nbsp;<span class="builtintype" id="5132711">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5132717">for</span>&nbsp;<span class="ident" id="5132721">embedded</span><span class="op" id="5132729">,</span>&nbsp;<span class="ident" id="5132731">isPtr</span>&nbsp;<span class="op" id="5132737">:=</span>&nbsp;<span class="keyword" id="5132740">range</span>&nbsp;<span class="ident" id="5132746">typ</span><span class="op" id="5132749">.</span><span class="ident" id="5132750">embedded</span>&nbsp;<span class="op" id="5132759">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132763">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132820">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132876">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132932">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5132989">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5133015">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="5133033">:=</span>&nbsp;<span class="ident" id="5133036">embeddedIsPtr</span>&nbsp;<span class="op" id="5133050">||</span>&nbsp;<span class="ident" id="5133053">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133061">for</span>&nbsp;<span class="ident" id="5133065">_</span><span class="op" id="5133066">,</span>&nbsp;<span class="ident" id="5133068">m</span>&nbsp;<span class="op" id="5133070">:=</span>&nbsp;<span class="keyword" id="5133073">range</span>&nbsp;<span class="ident" id="5133079">embedded</span><span class="op" id="5133087">.</span><span class="ident" id="5133088">methods</span>&nbsp;<span class="op" id="5133096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133101">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133143">if</span>&nbsp;<span class="ident" id="5133146">m</span><span class="op" id="5133147">.</span><span class="ident" id="5133148">Level</span>&nbsp;<span class="op" id="5133154">==</span>&nbsp;<span class="num" id="5133157">0</span>&nbsp;<span class="op" id="5133159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5133165">mset</span><span class="op" id="5133169">.</span><span class="ident" id="5133170">add</span><span class="op" id="5133173">(</span><span class="ident" id="5133174">customizeRecv</span><span class="op" id="5133187">(</span><span class="ident" id="5133188">m</span><span class="op" id="5133189">,</span>&nbsp;<span class="ident" id="5133191">recvTypeName</span><span class="op" id="5133203">,</span>&nbsp;<span class="ident" id="5133205">thisEmbeddedIsPtr</span><span class="op" id="5133222">,</span>&nbsp;<span class="ident" id="5133224">level</span><span class="op" id="5133229">)</span><span class="op" id="5133230">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133243">if</span>&nbsp;<span class="op" id="5133246">!</span><span class="ident" id="5133247">visited</span><span class="op" id="5133254">[</span><span class="ident" id="5133255">embedded</span><span class="op" id="5133263">]</span>&nbsp;<span class="op" id="5133265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5133270">r</span><span class="op" id="5133271">.</span><span class="ident" id="5133272">collectEmbeddedMethods</span><span class="op" id="5133294">(</span><span class="ident" id="5133295">mset</span><span class="op" id="5133299">,</span>&nbsp;<span class="ident" id="5133301">embedded</span><span class="op" id="5133309">,</span>&nbsp;<span class="ident" id="5133311">recvTypeName</span><span class="op" id="5133323">,</span>&nbsp;<span class="ident" id="5133325">thisEmbeddedIsPtr</span><span class="op" id="5133342">,</span>&nbsp;<span class="ident" id="5133344">level</span><span class="op" id="5133349">+</span><span class="num" id="5133350">1</span><span class="op" id="5133351">,</span>&nbsp;<span class="ident" id="5133353">visited</span><span class="op" id="5133360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133364">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5133370">delete</span><span class="op" id="5133376">(</span><span class="ident" id="5133377">visited</span><span class="op" id="5133384">,</span>&nbsp;<span class="ident" id="5133386">typ</span><span class="op" id="5133389">)</span><br>
<span class="lineno"></span><span class="op" id="5133391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5133394">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="5133476">//</span><br>
<span class="lineno"></span><span class="keyword" id="5133479">func</span>&nbsp;<span class="op" id="5133484">(</span><span class="ident" id="5133485">r</span>&nbsp;<span class="op" id="5133487">*</span><span class="ident" id="5133488">reader</span><span class="op" id="5133494">)</span>&nbsp;<span class="ident" id="5133496">computeMethodSets</span><span class="op" id="5133513">(</span><span class="op" id="5133514">)</span>&nbsp;<span class="op" id="5133516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133519">for</span>&nbsp;<span class="ident" id="5133523">_</span><span class="op" id="5133524">,</span>&nbsp;<span class="ident" id="5133526">t</span>&nbsp;<span class="op" id="5133528">:=</span>&nbsp;<span class="keyword" id="5133531">range</span>&nbsp;<span class="ident" id="5133537">r</span><span class="op" id="5133538">.</span><span class="ident" id="5133539">types</span>&nbsp;<span class="op" id="5133545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133549">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133585">if</span>&nbsp;<span class="ident" id="5133588">t</span><span class="op" id="5133589">.</span><span class="ident" id="5133590">isStruct</span>&nbsp;<span class="op" id="5133599">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133604">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5133617">r</span><span class="op" id="5133618">.</span><span class="ident" id="5133619">collectEmbeddedMethods</span><span class="op" id="5133641">(</span><span class="ident" id="5133642">t</span><span class="op" id="5133643">.</span><span class="ident" id="5133644">methods</span><span class="op" id="5133651">,</span>&nbsp;<span class="ident" id="5133653">t</span><span class="op" id="5133654">,</span>&nbsp;<span class="ident" id="5133656">t</span><span class="op" id="5133657">.</span><span class="ident" id="5133658">name</span><span class="op" id="5133662">,</span>&nbsp;<span class="builtintype" id="5133664">false</span><span class="op" id="5133669">,</span>&nbsp;<span class="num" id="5133671">1</span><span class="op" id="5133672">,</span>&nbsp;<span class="builtinfunc" id="5133674">make</span><span class="op" id="5133678">(</span><span class="ident" id="5133679">embeddedSet</span><span class="op" id="5133690">)</span><span class="op" id="5133691">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133695">}</span>&nbsp;<span class="keyword" id="5133697">else</span>&nbsp;<span class="op" id="5133702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133707">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133723">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133750">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5133754">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133830">if</span>&nbsp;<span class="ident" id="5133833">r</span><span class="op" id="5133834">.</span><span class="ident" id="5133835">errorDecl</span>&nbsp;<span class="op" id="5133845">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5133849">for</span>&nbsp;<span class="ident" id="5133853">_</span><span class="op" id="5133854">,</span>&nbsp;<span class="ident" id="5133856">ityp</span>&nbsp;<span class="op" id="5133861">:=</span>&nbsp;<span class="keyword" id="5133864">range</span>&nbsp;<span class="ident" id="5133870">r</span><span class="op" id="5133871">.</span><span class="ident" id="5133872">fixlist</span>&nbsp;<span class="op" id="5133880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5133885">removeErrorField</span><span class="op" id="5133901">(</span><span class="ident" id="5133902">ityp</span><span class="op" id="5133906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133910">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5133913">}</span><br>
<span class="lineno"></span><span class="op" id="5133915">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="5133918">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5133988">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="5134060">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="5134130">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="5134172">//</span><br>
<span class="lineno"></span><span class="keyword" id="5134175">func</span>&nbsp;<span class="op" id="5134180">(</span><span class="ident" id="5134181">r</span>&nbsp;<span class="op" id="5134183">*</span><span class="ident" id="5134184">reader</span><span class="op" id="5134190">)</span>&nbsp;<span class="ident" id="5134192">cleanupTypes</span><span class="op" id="5134204">(</span><span class="op" id="5134205">)</span>&nbsp;<span class="op" id="5134207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5134210">for</span>&nbsp;<span class="ident" id="5134214">_</span><span class="op" id="5134215">,</span>&nbsp;<span class="ident" id="5134217">t</span>&nbsp;<span class="op" id="5134219">:=</span>&nbsp;<span class="keyword" id="5134222">range</span>&nbsp;<span class="ident" id="5134228">r</span><span class="op" id="5134229">.</span><span class="ident" id="5134230">types</span>&nbsp;<span class="op" id="5134236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134240">visible</span>&nbsp;<span class="op" id="5134248">:=</span>&nbsp;<span class="ident" id="5134251">r</span><span class="op" id="5134252">.</span><span class="ident" id="5134253">isVisible</span><span class="op" id="5134262">(</span><span class="ident" id="5134263">t</span><span class="op" id="5134264">.</span><span class="ident" id="5134265">name</span><span class="op" id="5134269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5134273">if</span>&nbsp;<span class="ident" id="5134276">t</span><span class="op" id="5134277">.</span><span class="ident" id="5134278">decl</span>&nbsp;<span class="op" id="5134283">==</span>&nbsp;<span class="builtintype" id="5134286">nil</span>&nbsp;<span class="op" id="5134290">&amp;&amp;</span>&nbsp;<span class="op" id="5134293">(</span><span class="ident" id="5134294">predeclaredTypes</span><span class="op" id="5134310">[</span><span class="ident" id="5134311">t</span><span class="op" id="5134312">.</span><span class="ident" id="5134313">name</span><span class="op" id="5134317">]</span>&nbsp;<span class="op" id="5134319">||</span>&nbsp;<span class="ident" id="5134322">t</span><span class="op" id="5134323">.</span><span class="ident" id="5134324">isEmbedded</span>&nbsp;<span class="op" id="5134335">&amp;&amp;</span>&nbsp;<span class="ident" id="5134338">visible</span><span class="op" id="5134345">)</span>&nbsp;<span class="op" id="5134347">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134352">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134429">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134504">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134581">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134636">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134657">r</span><span class="op" id="5134658">.</span><span class="ident" id="5134659">values</span>&nbsp;<span class="op" id="5134666">=</span>&nbsp;<span class="builtinfunc" id="5134668">append</span><span class="op" id="5134674">(</span><span class="ident" id="5134675">r</span><span class="op" id="5134676">.</span><span class="ident" id="5134677">values</span><span class="op" id="5134683">,</span>&nbsp;<span class="ident" id="5134685">t</span><span class="op" id="5134686">.</span><span class="ident" id="5134687">values</span><span class="op" id="5134693">...</span><span class="op" id="5134696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134701">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5134733">for</span>&nbsp;<span class="ident" id="5134737">name</span><span class="op" id="5134741">,</span>&nbsp;<span class="ident" id="5134743">f</span>&nbsp;<span class="op" id="5134745">:=</span>&nbsp;<span class="keyword" id="5134748">range</span>&nbsp;<span class="ident" id="5134754">t</span><span class="op" id="5134755">.</span><span class="ident" id="5134756">funcs</span>&nbsp;<span class="op" id="5134762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134768">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134822">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5134880">r</span><span class="op" id="5134881">.</span><span class="ident" id="5134882">funcs</span><span class="op" id="5134887">[</span><span class="ident" id="5134888">name</span><span class="op" id="5134892">]</span>&nbsp;<span class="op" id="5134894">=</span>&nbsp;<span class="ident" id="5134896">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5134901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134906">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5134928">for</span>&nbsp;<span class="ident" id="5134932">name</span><span class="op" id="5134936">,</span>&nbsp;<span class="ident" id="5134938">m</span>&nbsp;<span class="op" id="5134940">:=</span>&nbsp;<span class="keyword" id="5134943">range</span>&nbsp;<span class="ident" id="5134949">t</span><span class="op" id="5134950">.</span><span class="ident" id="5134951">methods</span>&nbsp;<span class="op" id="5134959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5134965">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135029">if</span>&nbsp;<span class="ident" id="5135032">_</span><span class="op" id="5135033">,</span>&nbsp;<span class="ident" id="5135035">found</span>&nbsp;<span class="op" id="5135041">:=</span>&nbsp;<span class="ident" id="5135044">r</span><span class="op" id="5135045">.</span><span class="ident" id="5135046">funcs</span><span class="op" id="5135051">[</span><span class="ident" id="5135052">name</span><span class="op" id="5135056">]</span><span class="op" id="5135057">;</span>&nbsp;<span class="op" id="5135059">!</span><span class="ident" id="5135060">found</span>&nbsp;<span class="op" id="5135066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135073">r</span><span class="op" id="5135074">.</span><span class="ident" id="5135075">funcs</span><span class="op" id="5135080">[</span><span class="ident" id="5135081">name</span><span class="op" id="5135085">]</span>&nbsp;<span class="op" id="5135087">=</span>&nbsp;<span class="ident" id="5135089">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135095">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135104">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5135108">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135167">if</span>&nbsp;<span class="ident" id="5135170">t</span><span class="op" id="5135171">.</span><span class="ident" id="5135172">decl</span>&nbsp;<span class="op" id="5135177">==</span>&nbsp;<span class="builtintype" id="5135180">nil</span>&nbsp;<span class="op" id="5135184">||</span>&nbsp;<span class="op" id="5135187">!</span><span class="ident" id="5135188">visible</span>&nbsp;<span class="op" id="5135196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5135201">delete</span><span class="op" id="5135207">(</span><span class="ident" id="5135208">r</span><span class="op" id="5135209">.</span><span class="ident" id="5135210">types</span><span class="op" id="5135215">,</span>&nbsp;<span class="ident" id="5135217">t</span><span class="op" id="5135218">.</span><span class="ident" id="5135219">name</span><span class="op" id="5135223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135230">}</span><br>
<span class="lineno">670</span><span class="op" id="5135232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5135235">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5135315">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="5135327">type</span>&nbsp;<span class="ident" id="5135332">data</span>&nbsp;<span class="keyword" id="5135337">struct</span>&nbsp;<span class="op" id="5135344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135347">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5135352">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135357">swap</span>&nbsp;<span class="keyword" id="5135362">func</span><span class="op" id="5135366">(</span><span class="ident" id="5135367">i</span><span class="op" id="5135368">,</span>&nbsp;<span class="ident" id="5135370">j</span>&nbsp;<span class="builtintype" id="5135372">int</span><span class="op" id="5135375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135378">less</span>&nbsp;<span class="keyword" id="5135383">func</span><span class="op" id="5135387">(</span><span class="ident" id="5135388">i</span><span class="op" id="5135389">,</span>&nbsp;<span class="ident" id="5135391">j</span>&nbsp;<span class="builtintype" id="5135393">int</span><span class="op" id="5135396">)</span>&nbsp;<span class="builtintype" id="5135398">bool</span><br>
<span class="lineno"></span><span class="op" id="5135403">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="5135406">func</span>&nbsp;<span class="op" id="5135411">(</span><span class="ident" id="5135412">d</span>&nbsp;<span class="op" id="5135414">*</span><span class="ident" id="5135415">data</span><span class="op" id="5135419">)</span>&nbsp;<span class="ident" id="5135421">Len</span><span class="op" id="5135424">(</span><span class="op" id="5135425">)</span>&nbsp;<span class="builtintype" id="5135427">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135441">{</span>&nbsp;<span class="keyword" id="5135443">return</span>&nbsp;<span class="ident" id="5135450">d</span><span class="op" id="5135451">.</span><span class="ident" id="5135452">n</span>&nbsp;<span class="op" id="5135454">}</span><br>
<span class="lineno"></span><span class="keyword" id="5135456">func</span>&nbsp;<span class="op" id="5135461">(</span><span class="ident" id="5135462">d</span>&nbsp;<span class="op" id="5135464">*</span><span class="ident" id="5135465">data</span><span class="op" id="5135469">)</span>&nbsp;<span class="ident" id="5135471">Swap</span><span class="op" id="5135475">(</span><span class="ident" id="5135476">i</span><span class="op" id="5135477">,</span>&nbsp;<span class="ident" id="5135479">j</span>&nbsp;<span class="builtintype" id="5135481">int</span><span class="op" id="5135484">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135491">{</span>&nbsp;<span class="ident" id="5135493">d</span><span class="op" id="5135494">.</span><span class="ident" id="5135495">swap</span><span class="op" id="5135499">(</span><span class="ident" id="5135500">i</span><span class="op" id="5135501">,</span>&nbsp;<span class="ident" id="5135503">j</span><span class="op" id="5135504">)</span>&nbsp;<span class="op" id="5135506">}</span><br>
<span class="lineno"></span><span class="keyword" id="5135508">func</span>&nbsp;<span class="op" id="5135513">(</span><span class="ident" id="5135514">d</span>&nbsp;<span class="op" id="5135516">*</span><span class="ident" id="5135517">data</span><span class="op" id="5135521">)</span>&nbsp;<span class="ident" id="5135523">Less</span><span class="op" id="5135527">(</span><span class="ident" id="5135528">i</span><span class="op" id="5135529">,</span>&nbsp;<span class="ident" id="5135531">j</span>&nbsp;<span class="builtintype" id="5135533">int</span><span class="op" id="5135536">)</span>&nbsp;<span class="builtintype" id="5135538">bool</span>&nbsp;<span class="op" id="5135543">{</span>&nbsp;<span class="keyword" id="5135545">return</span>&nbsp;<span class="ident" id="5135552">d</span><span class="op" id="5135553">.</span><span class="ident" id="5135554">less</span><span class="op" id="5135558">(</span><span class="ident" id="5135559">i</span><span class="op" id="5135560">,</span>&nbsp;<span class="ident" id="5135562">j</span><span class="op" id="5135563">)</span>&nbsp;<span class="op" id="5135565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="5135568">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="5135611">func</span>&nbsp;<span class="ident" id="5135616">sortBy</span><span class="op" id="5135622">(</span><span class="ident" id="5135623">less</span>&nbsp;<span class="keyword" id="5135628">func</span><span class="op" id="5135632">(</span><span class="ident" id="5135633">i</span><span class="op" id="5135634">,</span>&nbsp;<span class="ident" id="5135636">j</span>&nbsp;<span class="builtintype" id="5135638">int</span><span class="op" id="5135641">)</span>&nbsp;<span class="builtintype" id="5135643">bool</span><span class="op" id="5135647">,</span>&nbsp;<span class="ident" id="5135649">swap</span>&nbsp;<span class="keyword" id="5135654">func</span><span class="op" id="5135658">(</span><span class="ident" id="5135659">i</span><span class="op" id="5135660">,</span>&nbsp;<span class="ident" id="5135662">j</span>&nbsp;<span class="builtintype" id="5135664">int</span><span class="op" id="5135667">)</span><span class="op" id="5135668">,</span>&nbsp;<span class="ident" id="5135670">n</span>&nbsp;<span class="builtintype" id="5135672">int</span><span class="op" id="5135675">)</span>&nbsp;<span class="op" id="5135677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135680">sort</span><span class="op" id="5135684">.</span><span class="ident" id="5135685">Sort</span><span class="op" id="5135689">(</span><span class="op" id="5135690">&amp;</span><span class="ident" id="5135691">data</span><span class="op" id="5135695">{</span><span class="ident" id="5135696">n</span><span class="op" id="5135697">,</span>&nbsp;<span class="ident" id="5135699">swap</span><span class="op" id="5135703">,</span>&nbsp;<span class="ident" id="5135705">less</span><span class="op" id="5135709">}</span><span class="op" id="5135710">)</span><br>
<span class="lineno"></span><span class="op" id="5135712">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="5135715">func</span>&nbsp;<span class="ident" id="5135720">sortedKeys</span><span class="op" id="5135730">(</span><span class="ident" id="5135731">m</span>&nbsp;<span class="keyword" id="5135733">map</span><span class="op" id="5135736">[</span><span class="builtintype" id="5135737">string</span><span class="op" id="5135743">]</span><span class="builtintype" id="5135744">int</span><span class="op" id="5135747">)</span>&nbsp;<span class="op" id="5135749">[</span><span class="op" id="5135750">]</span><span class="builtintype" id="5135751">string</span>&nbsp;<span class="op" id="5135758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135761">list</span>&nbsp;<span class="op" id="5135766">:=</span>&nbsp;<span class="builtinfunc" id="5135769">make</span><span class="op" id="5135773">(</span><span class="op" id="5135774">[</span><span class="op" id="5135775">]</span><span class="builtintype" id="5135776">string</span><span class="op" id="5135782">,</span>&nbsp;<span class="builtinfunc" id="5135784">len</span><span class="op" id="5135787">(</span><span class="ident" id="5135788">m</span><span class="op" id="5135789">)</span><span class="op" id="5135790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135793">i</span>&nbsp;<span class="op" id="5135795">:=</span>&nbsp;<span class="num" id="5135798">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135801">for</span>&nbsp;<span class="ident" id="5135805">key</span>&nbsp;<span class="op" id="5135809">:=</span>&nbsp;<span class="keyword" id="5135812">range</span>&nbsp;<span class="ident" id="5135818">m</span>&nbsp;<span class="op" id="5135820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135824">list</span><span class="op" id="5135828">[</span><span class="ident" id="5135829">i</span><span class="op" id="5135830">]</span>&nbsp;<span class="op" id="5135832">=</span>&nbsp;<span class="ident" id="5135834">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135840">i</span><span class="op" id="5135841">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5135845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5135848">sort</span><span class="op" id="5135852">.</span><span class="ident" id="5135853">Strings</span><span class="op" id="5135860">(</span><span class="ident" id="5135861">list</span><span class="op" id="5135865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135868">return</span>&nbsp;<span class="ident" id="5135875">list</span><br>
<span class="lineno"></span><span class="op" id="5135880">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="5135883">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="5135949">//</span><br>
<span class="lineno"></span><span class="keyword" id="5135952">func</span>&nbsp;<span class="ident" id="5135957">sortingName</span><span class="op" id="5135968">(</span><span class="ident" id="5135969">d</span>&nbsp;<span class="op" id="5135971">*</span><span class="ident" id="5135972">ast</span><span class="op" id="5135975">.</span><span class="ident" id="5135976">GenDecl</span><span class="op" id="5135983">)</span>&nbsp;<span class="builtintype" id="5135985">string</span>&nbsp;<span class="op" id="5135992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5135995">if</span>&nbsp;<span class="builtinfunc" id="5135998">len</span><span class="op" id="5136001">(</span><span class="ident" id="5136002">d</span><span class="op" id="5136003">.</span><span class="ident" id="5136004">Specs</span><span class="op" id="5136009">)</span>&nbsp;<span class="op" id="5136011">==</span>&nbsp;<span class="num" id="5136014">1</span>&nbsp;<span class="op" id="5136016">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136020">if</span>&nbsp;<span class="ident" id="5136023">s</span><span class="op" id="5136024">,</span>&nbsp;<span class="ident" id="5136026">ok</span>&nbsp;<span class="op" id="5136029">:=</span>&nbsp;<span class="ident" id="5136032">d</span><span class="op" id="5136033">.</span><span class="ident" id="5136034">Specs</span><span class="op" id="5136039">[</span><span class="num" id="5136040">0</span><span class="op" id="5136041">]</span><span class="op" id="5136042">.</span><span class="op" id="5136043">(</span><span class="op" id="5136044">*</span><span class="ident" id="5136045">ast</span><span class="op" id="5136048">.</span><span class="ident" id="5136049">ValueSpec</span><span class="op" id="5136058">)</span><span class="op" id="5136059">;</span>&nbsp;<span class="ident" id="5136061">ok</span>&nbsp;<span class="op" id="5136064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136069">return</span>&nbsp;<span class="ident" id="5136076">s</span><span class="op" id="5136077">.</span><span class="ident" id="5136078">Names</span><span class="op" id="5136083">[</span><span class="num" id="5136084">0</span><span class="op" id="5136085">]</span><span class="op" id="5136086">.</span><span class="ident" id="5136087">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136100">return</span>&nbsp;<span class="string" id="5136107">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="5136110">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5136113">func</span>&nbsp;<span class="ident" id="5136118">sortedValues</span><span class="op" id="5136130">(</span><span class="ident" id="5136131">m</span>&nbsp;<span class="op" id="5136133">[</span><span class="op" id="5136134">]</span><span class="op" id="5136135">*</span><span class="ident" id="5136136">Value</span><span class="op" id="5136141">,</span>&nbsp;<span class="ident" id="5136143">tok</span>&nbsp;<span class="ident" id="5136147">token</span><span class="op" id="5136152">.</span><span class="ident" id="5136153">Token</span><span class="op" id="5136158">)</span>&nbsp;<span class="op" id="5136160">[</span><span class="op" id="5136161">]</span><span class="op" id="5136162">*</span><span class="ident" id="5136163">Value</span>&nbsp;<span class="op" id="5136169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136172">list</span>&nbsp;<span class="op" id="5136177">:=</span>&nbsp;<span class="builtinfunc" id="5136180">make</span><span class="op" id="5136184">(</span><span class="op" id="5136185">[</span><span class="op" id="5136186">]</span><span class="op" id="5136187">*</span><span class="ident" id="5136188">Value</span><span class="op" id="5136193">,</span>&nbsp;<span class="builtinfunc" id="5136195">len</span><span class="op" id="5136198">(</span><span class="ident" id="5136199">m</span><span class="op" id="5136200">)</span><span class="op" id="5136201">)</span>&nbsp;<span class="comment" id="5136203">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136230">i</span>&nbsp;<span class="op" id="5136232">:=</span>&nbsp;<span class="num" id="5136235">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136238">for</span>&nbsp;<span class="ident" id="5136242">_</span><span class="op" id="5136243">,</span>&nbsp;<span class="ident" id="5136245">val</span>&nbsp;<span class="op" id="5136249">:=</span>&nbsp;<span class="keyword" id="5136252">range</span>&nbsp;<span class="ident" id="5136258">m</span>&nbsp;<span class="op" id="5136260">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136264">if</span>&nbsp;<span class="ident" id="5136267">val</span><span class="op" id="5136270">.</span><span class="ident" id="5136271">Decl</span><span class="op" id="5136275">.</span><span class="ident" id="5136276">Tok</span>&nbsp;<span class="op" id="5136280">==</span>&nbsp;<span class="ident" id="5136283">tok</span>&nbsp;<span class="op" id="5136287">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136292">list</span><span class="op" id="5136296">[</span><span class="ident" id="5136297">i</span><span class="op" id="5136298">]</span>&nbsp;<span class="op" id="5136300">=</span>&nbsp;<span class="ident" id="5136302">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136309">i</span><span class="op" id="5136310">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136315">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136321">list</span>&nbsp;<span class="op" id="5136326">=</span>&nbsp;<span class="ident" id="5136328">list</span><span class="op" id="5136332">[</span><span class="num" id="5136333">0</span><span class="op" id="5136334">:</span><span class="ident" id="5136335">i</span><span class="op" id="5136336">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136340">sortBy</span><span class="op" id="5136346">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136350">func</span><span class="op" id="5136354">(</span><span class="ident" id="5136355">i</span><span class="op" id="5136356">,</span>&nbsp;<span class="ident" id="5136358">j</span>&nbsp;<span class="builtintype" id="5136360">int</span><span class="op" id="5136363">)</span>&nbsp;<span class="builtintype" id="5136365">bool</span>&nbsp;<span class="op" id="5136370">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136375">if</span>&nbsp;<span class="ident" id="5136378">ni</span><span class="op" id="5136380">,</span>&nbsp;<span class="ident" id="5136382">nj</span>&nbsp;<span class="op" id="5136385">:=</span>&nbsp;<span class="ident" id="5136388">sortingName</span><span class="op" id="5136399">(</span><span class="ident" id="5136400">list</span><span class="op" id="5136404">[</span><span class="ident" id="5136405">i</span><span class="op" id="5136406">]</span><span class="op" id="5136407">.</span><span class="ident" id="5136408">Decl</span><span class="op" id="5136412">)</span><span class="op" id="5136413">,</span>&nbsp;<span class="ident" id="5136415">sortingName</span><span class="op" id="5136426">(</span><span class="ident" id="5136427">list</span><span class="op" id="5136431">[</span><span class="ident" id="5136432">j</span><span class="op" id="5136433">]</span><span class="op" id="5136434">.</span><span class="ident" id="5136435">Decl</span><span class="op" id="5136439">)</span><span class="op" id="5136440">;</span>&nbsp;<span class="ident" id="5136442">ni</span>&nbsp;<span class="op" id="5136445">!=</span>&nbsp;<span class="ident" id="5136448">nj</span>&nbsp;<span class="op" id="5136451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136457">return</span>&nbsp;<span class="ident" id="5136464">ni</span>&nbsp;<span class="op" id="5136467">&lt;</span>&nbsp;<span class="ident" id="5136469">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136480">return</span>&nbsp;<span class="ident" id="5136487">list</span><span class="op" id="5136491">[</span><span class="ident" id="5136492">i</span><span class="op" id="5136493">]</span><span class="op" id="5136494">.</span><span class="ident" id="5136495">order</span>&nbsp;<span class="op" id="5136501">&lt;</span>&nbsp;<span class="ident" id="5136503">list</span><span class="op" id="5136507">[</span><span class="ident" id="5136508">j</span><span class="op" id="5136509">]</span><span class="op" id="5136510">.</span><span class="ident" id="5136511">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136519">}</span><span class="op" id="5136520">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136524">func</span><span class="op" id="5136528">(</span><span class="ident" id="5136529">i</span><span class="op" id="5136530">,</span>&nbsp;<span class="ident" id="5136532">j</span>&nbsp;<span class="builtintype" id="5136534">int</span><span class="op" id="5136537">)</span>&nbsp;<span class="op" id="5136539">{</span>&nbsp;<span class="ident" id="5136541">list</span><span class="op" id="5136545">[</span><span class="ident" id="5136546">i</span><span class="op" id="5136547">]</span><span class="op" id="5136548">,</span>&nbsp;<span class="ident" id="5136550">list</span><span class="op" id="5136554">[</span><span class="ident" id="5136555">j</span><span class="op" id="5136556">]</span>&nbsp;<span class="op" id="5136558">=</span>&nbsp;<span class="ident" id="5136560">list</span><span class="op" id="5136564">[</span><span class="ident" id="5136565">j</span><span class="op" id="5136566">]</span><span class="op" id="5136567">,</span>&nbsp;<span class="ident" id="5136569">list</span><span class="op" id="5136573">[</span><span class="ident" id="5136574">i</span><span class="op" id="5136575">]</span>&nbsp;<span class="op" id="5136577">}</span><span class="op" id="5136578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5136582">len</span><span class="op" id="5136585">(</span><span class="ident" id="5136586">list</span><span class="op" id="5136590">)</span><span class="op" id="5136591">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5136594">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136598">return</span>&nbsp;<span class="ident" id="5136605">list</span><br>
<span class="lineno">735</span><span class="op" id="5136610">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5136613">func</span>&nbsp;<span class="ident" id="5136618">sortedTypes</span><span class="op" id="5136629">(</span><span class="ident" id="5136630">m</span>&nbsp;<span class="keyword" id="5136632">map</span><span class="op" id="5136635">[</span><span class="builtintype" id="5136636">string</span><span class="op" id="5136642">]</span><span class="op" id="5136643">*</span><span class="ident" id="5136644">namedType</span><span class="op" id="5136653">,</span>&nbsp;<span class="ident" id="5136655">allMethods</span>&nbsp;<span class="builtintype" id="5136666">bool</span><span class="op" id="5136670">)</span>&nbsp;<span class="op" id="5136672">[</span><span class="op" id="5136673">]</span><span class="op" id="5136674">*</span><span class="ident" id="5136675">Type</span>&nbsp;<span class="op" id="5136680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136683">list</span>&nbsp;<span class="op" id="5136688">:=</span>&nbsp;<span class="builtinfunc" id="5136691">make</span><span class="op" id="5136695">(</span><span class="op" id="5136696">[</span><span class="op" id="5136697">]</span><span class="op" id="5136698">*</span><span class="ident" id="5136699">Type</span><span class="op" id="5136703">,</span>&nbsp;<span class="builtinfunc" id="5136705">len</span><span class="op" id="5136708">(</span><span class="ident" id="5136709">m</span><span class="op" id="5136710">)</span><span class="op" id="5136711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136714">i</span>&nbsp;<span class="op" id="5136716">:=</span>&nbsp;<span class="num" id="5136719">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5136722">for</span>&nbsp;<span class="ident" id="5136726">_</span><span class="op" id="5136727">,</span>&nbsp;<span class="ident" id="5136729">t</span>&nbsp;<span class="op" id="5136731">:=</span>&nbsp;<span class="keyword" id="5136734">range</span>&nbsp;<span class="ident" id="5136740">m</span>&nbsp;<span class="op" id="5136742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136746">list</span><span class="op" id="5136750">[</span><span class="ident" id="5136751">i</span><span class="op" id="5136752">]</span>&nbsp;<span class="op" id="5136754">=</span>&nbsp;<span class="op" id="5136756">&amp;</span><span class="ident" id="5136757">Type</span><span class="op" id="5136761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136766">Doc</span><span class="op" id="5136769">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136775">t</span><span class="op" id="5136776">.</span><span class="ident" id="5136777">doc</span><span class="op" id="5136780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136785">Name</span><span class="op" id="5136789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136794">t</span><span class="op" id="5136795">.</span><span class="ident" id="5136796">name</span><span class="op" id="5136800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136805">Decl</span><span class="op" id="5136809">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136814">t</span><span class="op" id="5136815">.</span><span class="ident" id="5136816">decl</span><span class="op" id="5136820">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136825">Consts</span><span class="op" id="5136831">:</span>&nbsp;&nbsp;<span class="ident" id="5136834">sortedValues</span><span class="op" id="5136846">(</span><span class="ident" id="5136847">t</span><span class="op" id="5136848">.</span><span class="ident" id="5136849">values</span><span class="op" id="5136855">,</span>&nbsp;<span class="ident" id="5136857">token</span><span class="op" id="5136862">.</span><span class="ident" id="5136863">CONST</span><span class="op" id="5136868">)</span><span class="op" id="5136869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136874">Vars</span><span class="op" id="5136878">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136883">sortedValues</span><span class="op" id="5136895">(</span><span class="ident" id="5136896">t</span><span class="op" id="5136897">.</span><span class="ident" id="5136898">values</span><span class="op" id="5136904">,</span>&nbsp;<span class="ident" id="5136906">token</span><span class="op" id="5136911">.</span><span class="ident" id="5136912">VAR</span><span class="op" id="5136915">)</span><span class="op" id="5136916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136921">Funcs</span><span class="op" id="5136926">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5136930">sortedFuncs</span><span class="op" id="5136941">(</span><span class="ident" id="5136942">t</span><span class="op" id="5136943">.</span><span class="ident" id="5136944">funcs</span><span class="op" id="5136949">,</span>&nbsp;<span class="builtintype" id="5136951">true</span><span class="op" id="5136955">)</span><span class="op" id="5136956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5136961">Methods</span><span class="op" id="5136968">:</span>&nbsp;<span class="ident" id="5136970">sortedFuncs</span><span class="op" id="5136981">(</span><span class="ident" id="5136982">t</span><span class="op" id="5136983">.</span><span class="ident" id="5136984">methods</span><span class="op" id="5136991">,</span>&nbsp;<span class="ident" id="5136993">allMethods</span><span class="op" id="5137003">)</span><span class="op" id="5137004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137008">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137012">i</span><span class="op" id="5137013">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137021">sortBy</span><span class="op" id="5137027">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137031">func</span><span class="op" id="5137035">(</span><span class="ident" id="5137036">i</span><span class="op" id="5137037">,</span>&nbsp;<span class="ident" id="5137039">j</span>&nbsp;<span class="builtintype" id="5137041">int</span><span class="op" id="5137044">)</span>&nbsp;<span class="builtintype" id="5137046">bool</span>&nbsp;<span class="op" id="5137051">{</span>&nbsp;<span class="keyword" id="5137053">return</span>&nbsp;<span class="ident" id="5137060">list</span><span class="op" id="5137064">[</span><span class="ident" id="5137065">i</span><span class="op" id="5137066">]</span><span class="op" id="5137067">.</span><span class="ident" id="5137068">Name</span>&nbsp;<span class="op" id="5137073">&lt;</span>&nbsp;<span class="ident" id="5137075">list</span><span class="op" id="5137079">[</span><span class="ident" id="5137080">j</span><span class="op" id="5137081">]</span><span class="op" id="5137082">.</span><span class="ident" id="5137083">Name</span>&nbsp;<span class="op" id="5137088">}</span><span class="op" id="5137089">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137093">func</span><span class="op" id="5137097">(</span><span class="ident" id="5137098">i</span><span class="op" id="5137099">,</span>&nbsp;<span class="ident" id="5137101">j</span>&nbsp;<span class="builtintype" id="5137103">int</span><span class="op" id="5137106">)</span>&nbsp;<span class="op" id="5137108">{</span>&nbsp;<span class="ident" id="5137110">list</span><span class="op" id="5137114">[</span><span class="ident" id="5137115">i</span><span class="op" id="5137116">]</span><span class="op" id="5137117">,</span>&nbsp;<span class="ident" id="5137119">list</span><span class="op" id="5137123">[</span><span class="ident" id="5137124">j</span><span class="op" id="5137125">]</span>&nbsp;<span class="op" id="5137127">=</span>&nbsp;<span class="ident" id="5137129">list</span><span class="op" id="5137133">[</span><span class="ident" id="5137134">j</span><span class="op" id="5137135">]</span><span class="op" id="5137136">,</span>&nbsp;<span class="ident" id="5137138">list</span><span class="op" id="5137142">[</span><span class="ident" id="5137143">i</span><span class="op" id="5137144">]</span>&nbsp;<span class="op" id="5137146">}</span><span class="op" id="5137147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5137151">len</span><span class="op" id="5137154">(</span><span class="ident" id="5137155">list</span><span class="op" id="5137159">)</span><span class="op" id="5137160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137163">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137167">return</span>&nbsp;<span class="ident" id="5137174">list</span><br>
<span class="lineno">760</span><span class="op" id="5137179">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137182">func</span>&nbsp;<span class="ident" id="5137187">removeStar</span><span class="op" id="5137197">(</span><span class="ident" id="5137198">s</span>&nbsp;<span class="builtintype" id="5137200">string</span><span class="op" id="5137206">)</span>&nbsp;<span class="builtintype" id="5137208">string</span>&nbsp;<span class="op" id="5137215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137218">if</span>&nbsp;<span class="builtinfunc" id="5137221">len</span><span class="op" id="5137224">(</span><span class="ident" id="5137225">s</span><span class="op" id="5137226">)</span>&nbsp;<span class="op" id="5137228">&gt;</span>&nbsp;<span class="num" id="5137230">0</span>&nbsp;<span class="op" id="5137232">&amp;&amp;</span>&nbsp;<span class="ident" id="5137235">s</span><span class="op" id="5137236">[</span><span class="num" id="5137237">0</span><span class="op" id="5137238">]</span>&nbsp;<span class="op" id="5137240">==</span>&nbsp;<span class="string" id="5137243">&#39;*&#39;</span>&nbsp;<span class="op" id="5137247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137251">return</span>&nbsp;<span class="ident" id="5137258">s</span><span class="op" id="5137259">[</span><span class="num" id="5137260">1</span><span class="op" id="5137261">:</span><span class="op" id="5137262">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137268">return</span>&nbsp;<span class="ident" id="5137275">s</span><br>
<span class="lineno"></span><span class="op" id="5137277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5137280">func</span>&nbsp;<span class="ident" id="5137285">sortedFuncs</span><span class="op" id="5137296">(</span><span class="ident" id="5137297">m</span>&nbsp;<span class="ident" id="5137299">methodSet</span><span class="op" id="5137308">,</span>&nbsp;<span class="ident" id="5137310">allMethods</span>&nbsp;<span class="builtintype" id="5137321">bool</span><span class="op" id="5137325">)</span>&nbsp;<span class="op" id="5137327">[</span><span class="op" id="5137328">]</span><span class="op" id="5137329">*</span><span class="ident" id="5137330">Func</span>&nbsp;<span class="op" id="5137335">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137338">list</span>&nbsp;<span class="op" id="5137343">:=</span>&nbsp;<span class="builtinfunc" id="5137346">make</span><span class="op" id="5137350">(</span><span class="op" id="5137351">[</span><span class="op" id="5137352">]</span><span class="op" id="5137353">*</span><span class="ident" id="5137354">Func</span><span class="op" id="5137358">,</span>&nbsp;<span class="builtinfunc" id="5137360">len</span><span class="op" id="5137363">(</span><span class="ident" id="5137364">m</span><span class="op" id="5137365">)</span><span class="op" id="5137366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137369">i</span>&nbsp;<span class="op" id="5137371">:=</span>&nbsp;<span class="num" id="5137374">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137377">for</span>&nbsp;<span class="ident" id="5137381">_</span><span class="op" id="5137382">,</span>&nbsp;<span class="ident" id="5137384">m</span>&nbsp;<span class="op" id="5137386">:=</span>&nbsp;<span class="keyword" id="5137389">range</span>&nbsp;<span class="ident" id="5137395">m</span>&nbsp;<span class="op" id="5137397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5137401">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137441">switch</span>&nbsp;<span class="op" id="5137448">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137452">case</span>&nbsp;<span class="ident" id="5137457">m</span><span class="op" id="5137458">.</span><span class="ident" id="5137459">Decl</span>&nbsp;<span class="op" id="5137464">==</span>&nbsp;<span class="builtintype" id="5137467">nil</span><span class="op" id="5137470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5137475">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137503">case</span>&nbsp;<span class="ident" id="5137508">allMethods</span><span class="op" id="5137518">,</span>&nbsp;<span class="ident" id="5137520">m</span><span class="op" id="5137521">.</span><span class="ident" id="5137522">Level</span>&nbsp;<span class="op" id="5137528">==</span>&nbsp;<span class="num" id="5137531">0</span><span class="op" id="5137532">,</span>&nbsp;<span class="op" id="5137534">!</span><span class="ident" id="5137535">ast</span><span class="op" id="5137538">.</span><span class="ident" id="5137539">IsExported</span><span class="op" id="5137549">(</span><span class="ident" id="5137550">removeStar</span><span class="op" id="5137560">(</span><span class="ident" id="5137561">m</span><span class="op" id="5137562">.</span><span class="ident" id="5137563">Orig</span><span class="op" id="5137567">)</span><span class="op" id="5137568">)</span><span class="op" id="5137569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5137574">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5137629">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137684">list</span><span class="op" id="5137688">[</span><span class="ident" id="5137689">i</span><span class="op" id="5137690">]</span>&nbsp;<span class="op" id="5137692">=</span>&nbsp;<span class="ident" id="5137694">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137699">i</span><span class="op" id="5137700">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137705">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137711">list</span>&nbsp;<span class="op" id="5137716">=</span>&nbsp;<span class="ident" id="5137718">list</span><span class="op" id="5137722">[</span><span class="num" id="5137723">0</span><span class="op" id="5137724">:</span><span class="ident" id="5137725">i</span><span class="op" id="5137726">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5137729">sortBy</span><span class="op" id="5137735">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137739">func</span><span class="op" id="5137743">(</span><span class="ident" id="5137744">i</span><span class="op" id="5137745">,</span>&nbsp;<span class="ident" id="5137747">j</span>&nbsp;<span class="builtintype" id="5137749">int</span><span class="op" id="5137752">)</span>&nbsp;<span class="builtintype" id="5137754">bool</span>&nbsp;<span class="op" id="5137759">{</span>&nbsp;<span class="keyword" id="5137761">return</span>&nbsp;<span class="ident" id="5137768">list</span><span class="op" id="5137772">[</span><span class="ident" id="5137773">i</span><span class="op" id="5137774">]</span><span class="op" id="5137775">.</span><span class="ident" id="5137776">Name</span>&nbsp;<span class="op" id="5137781">&lt;</span>&nbsp;<span class="ident" id="5137783">list</span><span class="op" id="5137787">[</span><span class="ident" id="5137788">j</span><span class="op" id="5137789">]</span><span class="op" id="5137790">.</span><span class="ident" id="5137791">Name</span>&nbsp;<span class="op" id="5137796">}</span><span class="op" id="5137797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137801">func</span><span class="op" id="5137805">(</span><span class="ident" id="5137806">i</span><span class="op" id="5137807">,</span>&nbsp;<span class="ident" id="5137809">j</span>&nbsp;<span class="builtintype" id="5137811">int</span><span class="op" id="5137814">)</span>&nbsp;<span class="op" id="5137816">{</span>&nbsp;<span class="ident" id="5137818">list</span><span class="op" id="5137822">[</span><span class="ident" id="5137823">i</span><span class="op" id="5137824">]</span><span class="op" id="5137825">,</span>&nbsp;<span class="ident" id="5137827">list</span><span class="op" id="5137831">[</span><span class="ident" id="5137832">j</span><span class="op" id="5137833">]</span>&nbsp;<span class="op" id="5137835">=</span>&nbsp;<span class="ident" id="5137837">list</span><span class="op" id="5137841">[</span><span class="ident" id="5137842">j</span><span class="op" id="5137843">]</span><span class="op" id="5137844">,</span>&nbsp;<span class="ident" id="5137846">list</span><span class="op" id="5137850">[</span><span class="ident" id="5137851">i</span><span class="op" id="5137852">]</span>&nbsp;<span class="op" id="5137854">}</span><span class="op" id="5137855">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5137859">len</span><span class="op" id="5137862">(</span><span class="ident" id="5137863">list</span><span class="op" id="5137867">)</span><span class="op" id="5137868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5137871">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5137874">return</span>&nbsp;<span class="ident" id="5137881">list</span><br>
<span class="lineno"></span><span class="op" id="5137886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5137889">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="5137962">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="5138030">//</span><br>
<span class="lineno"></span><span class="keyword" id="5138033">func</span>&nbsp;<span class="ident" id="5138038">noteBodies</span><span class="op" id="5138048">(</span><span class="ident" id="5138049">notes</span>&nbsp;<span class="op" id="5138055">[</span><span class="op" id="5138056">]</span><span class="op" id="5138057">*</span><span class="ident" id="5138058">Note</span><span class="op" id="5138062">)</span>&nbsp;<span class="op" id="5138064">[</span><span class="op" id="5138065">]</span><span class="builtintype" id="5138066">string</span>&nbsp;<span class="op" id="5138073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5138076">var</span>&nbsp;<span class="ident" id="5138080">list</span>&nbsp;<span class="op" id="5138085">[</span><span class="op" id="5138086">]</span><span class="builtintype" id="5138087">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5138095">for</span>&nbsp;<span class="ident" id="5138099">_</span><span class="op" id="5138100">,</span>&nbsp;<span class="ident" id="5138102">n</span>&nbsp;<span class="op" id="5138104">:=</span>&nbsp;<span class="keyword" id="5138107">range</span>&nbsp;<span class="ident" id="5138113">notes</span>&nbsp;<span class="op" id="5138119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5138123">list</span>&nbsp;<span class="op" id="5138128">=</span>&nbsp;<span class="builtinfunc" id="5138130">append</span><span class="op" id="5138136">(</span><span class="ident" id="5138137">list</span><span class="op" id="5138141">,</span>&nbsp;<span class="ident" id="5138143">n</span><span class="op" id="5138144">.</span><span class="ident" id="5138145">Body</span><span class="op" id="5138149">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5138152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5138155">return</span>&nbsp;<span class="ident" id="5138162">list</span><br>
<span class="lineno"></span><span class="op" id="5138167">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5138170">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="5138250">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5138278">var</span>&nbsp;<span class="ident" id="5138282">predeclaredTypes</span>&nbsp;<span class="op" id="5138299">=</span>&nbsp;<span class="keyword" id="5138301">map</span><span class="op" id="5138304">[</span><span class="builtintype" id="5138305">string</span><span class="op" id="5138311">]</span><span class="builtintype" id="5138312">bool</span><span class="op" id="5138316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138319">&#34;bool&#34;</span><span class="op" id="5138325">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138333">true</span><span class="op" id="5138337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138340">&#34;byte&#34;</span><span class="op" id="5138346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138354">true</span><span class="op" id="5138358">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138361">&#34;complex64&#34;</span><span class="op" id="5138372">:</span>&nbsp;&nbsp;<span class="builtintype" id="5138375">true</span><span class="op" id="5138379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138382">&#34;complex128&#34;</span><span class="op" id="5138394">:</span>&nbsp;<span class="builtintype" id="5138396">true</span><span class="op" id="5138400">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138403">&#34;error&#34;</span><span class="op" id="5138410">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138417">true</span><span class="op" id="5138421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138424">&#34;float32&#34;</span><span class="op" id="5138433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138438">true</span><span class="op" id="5138442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138445">&#34;float64&#34;</span><span class="op" id="5138454">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138459">true</span><span class="op" id="5138463">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138466">&#34;int&#34;</span><span class="op" id="5138471">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138480">true</span><span class="op" id="5138484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138487">&#34;int8&#34;</span><span class="op" id="5138493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138501">true</span><span class="op" id="5138505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138508">&#34;int16&#34;</span><span class="op" id="5138515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138522">true</span><span class="op" id="5138526">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138529">&#34;int32&#34;</span><span class="op" id="5138536">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138543">true</span><span class="op" id="5138547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138550">&#34;int64&#34;</span><span class="op" id="5138557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138564">true</span><span class="op" id="5138568">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138571">&#34;rune&#34;</span><span class="op" id="5138577">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138585">true</span><span class="op" id="5138589">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138592">&#34;string&#34;</span><span class="op" id="5138600">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138606">true</span><span class="op" id="5138610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138613">&#34;uint&#34;</span><span class="op" id="5138619">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138627">true</span><span class="op" id="5138631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138634">&#34;uint8&#34;</span><span class="op" id="5138641">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138648">true</span><span class="op" id="5138652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138655">&#34;uint16&#34;</span><span class="op" id="5138663">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138669">true</span><span class="op" id="5138673">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138676">&#34;uint32&#34;</span><span class="op" id="5138684">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138690">true</span><span class="op" id="5138694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138697">&#34;uint64&#34;</span><span class="op" id="5138705">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138711">true</span><span class="op" id="5138715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138718">&#34;uintptr&#34;</span><span class="op" id="5138727">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138732">true</span><span class="op" id="5138736">,</span><br>
<span class="lineno"></span><span class="op" id="5138738">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="5138741">var</span>&nbsp;<span class="ident" id="5138745">predeclaredFuncs</span>&nbsp;<span class="op" id="5138762">=</span>&nbsp;<span class="keyword" id="5138764">map</span><span class="op" id="5138767">[</span><span class="builtintype" id="5138768">string</span><span class="op" id="5138774">]</span><span class="builtintype" id="5138775">bool</span><span class="op" id="5138779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138782">&#34;append&#34;</span><span class="op" id="5138790">:</span>&nbsp;&nbsp;<span class="builtintype" id="5138793">true</span><span class="op" id="5138797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138800">&#34;cap&#34;</span><span class="op" id="5138805">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138811">true</span><span class="op" id="5138815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138818">&#34;close&#34;</span><span class="op" id="5138825">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138829">true</span><span class="op" id="5138833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138836">&#34;complex&#34;</span><span class="op" id="5138845">:</span>&nbsp;<span class="builtintype" id="5138847">true</span><span class="op" id="5138851">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138854">&#34;copy&#34;</span><span class="op" id="5138860">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138865">true</span><span class="op" id="5138869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138872">&#34;delete&#34;</span><span class="op" id="5138880">:</span>&nbsp;&nbsp;<span class="builtintype" id="5138883">true</span><span class="op" id="5138887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138890">&#34;imag&#34;</span><span class="op" id="5138896">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138901">true</span><span class="op" id="5138905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138908">&#34;len&#34;</span><span class="op" id="5138913">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138919">true</span><span class="op" id="5138923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138926">&#34;make&#34;</span><span class="op" id="5138932">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138937">true</span><span class="op" id="5138941">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138944">&#34;new&#34;</span><span class="op" id="5138949">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138955">true</span><span class="op" id="5138959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138962">&#34;panic&#34;</span><span class="op" id="5138969">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138973">true</span><span class="op" id="5138977">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138980">&#34;print&#34;</span><span class="op" id="5138987">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5138991">true</span><span class="op" id="5138995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5138998">&#34;println&#34;</span><span class="op" id="5139007">:</span>&nbsp;<span class="builtintype" id="5139009">true</span><span class="op" id="5139013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139016">&#34;real&#34;</span><span class="op" id="5139022">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5139027">true</span><span class="op" id="5139031">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139034">&#34;recover&#34;</span><span class="op" id="5139043">:</span>&nbsp;<span class="builtintype" id="5139045">true</span><span class="op" id="5139049">,</span><br>
<span class="lineno"></span><span class="op" id="5139051">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5139054">var</span>&nbsp;<span class="ident" id="5139058">predeclaredConstants</span>&nbsp;<span class="op" id="5139079">=</span>&nbsp;<span class="keyword" id="5139081">map</span><span class="op" id="5139084">[</span><span class="builtintype" id="5139085">string</span><span class="op" id="5139091">]</span><span class="builtintype" id="5139092">bool</span><span class="op" id="5139096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139099">&#34;false&#34;</span><span class="op" id="5139106">:</span>&nbsp;<span class="builtintype" id="5139108">true</span><span class="op" id="5139112">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139115">&#34;iota&#34;</span><span class="op" id="5139121">:</span>&nbsp;&nbsp;<span class="builtintype" id="5139124">true</span><span class="op" id="5139128">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139131">&#34;nil&#34;</span><span class="op" id="5139136">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5139140">true</span><span class="op" id="5139144">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5139147">&#34;true&#34;</span><span class="op" id="5139153">:</span>&nbsp;&nbsp;<span class="builtintype" id="5139156">true</span><span class="op" id="5139160">,</span><br>
<span class="lineno"></span><span class="op" id="5139162">}</span>
</div>
</body>
</html>
