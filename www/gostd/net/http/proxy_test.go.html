<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html" class="current">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7483742">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7483797">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7483851">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7483902">package</span>&nbsp;<span class="ident" id="7483910">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7483916">import</span>&nbsp;<span class="op" id="7483923">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7483926">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7483937">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7483943">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7483953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7483956">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="7483972">//&nbsp;&nbsp;&nbsp;&nbsp;test&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7483991">var</span>&nbsp;<span class="ident" id="7483995">UseProxyTests</span>&nbsp;<span class="op" id="7484009">=</span>&nbsp;<span class="op" id="7484011">[</span><span class="op" id="7484012">]</span><span class="keyword" id="7484013">struct</span>&nbsp;<span class="op" id="7484020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7484023">host</span>&nbsp;&nbsp;<span class="builtintype" id="7484029">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7484037">match</span>&nbsp;<span class="builtintype" id="7484043">bool</span><br>
<span class="lineno"></span><span class="op" id="7484048">}</span><span class="op" id="7484049">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7484052">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484079">{</span><span class="string" id="7484080">&#34;localhost:80&#34;</span><span class="op" id="7484094">,</span>&nbsp;<span class="builtintype" id="7484096">false</span><span class="op" id="7484101">}</span><span class="op" id="7484102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484105">{</span><span class="string" id="7484106">&#34;127.0.0.1&#34;</span><span class="op" id="7484117">,</span>&nbsp;<span class="builtintype" id="7484119">false</span><span class="op" id="7484124">}</span><span class="op" id="7484125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484128">{</span><span class="string" id="7484129">&#34;127.0.0.2&#34;</span><span class="op" id="7484140">,</span>&nbsp;<span class="builtintype" id="7484142">false</span><span class="op" id="7484147">}</span><span class="op" id="7484148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484151">{</span><span class="string" id="7484152">&#34;[::1]&#34;</span><span class="op" id="7484159">,</span>&nbsp;<span class="builtintype" id="7484161">false</span><span class="op" id="7484166">}</span><span class="op" id="7484167">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484170">{</span><span class="string" id="7484171">&#34;[::2]&#34;</span><span class="op" id="7484178">,</span>&nbsp;<span class="builtintype" id="7484180">true</span><span class="op" id="7484184">}</span><span class="op" id="7484185">,</span>&nbsp;<span class="comment" id="7484187">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484215">{</span><span class="string" id="7484216">&#34;barbaz.net&#34;</span><span class="op" id="7484228">,</span>&nbsp;<span class="builtintype" id="7484230">false</span><span class="op" id="7484235">}</span><span class="op" id="7484236">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7484242">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484267">{</span><span class="string" id="7484268">&#34;foobar.com&#34;</span><span class="op" id="7484280">,</span>&nbsp;<span class="builtintype" id="7484282">false</span><span class="op" id="7484287">}</span><span class="op" id="7484288">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7484294">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484320">{</span><span class="string" id="7484321">&#34;foofoobar.com&#34;</span><span class="op" id="7484336">,</span>&nbsp;<span class="builtintype" id="7484338">true</span><span class="op" id="7484342">}</span><span class="op" id="7484343">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7484347">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484385">{</span><span class="string" id="7484386">&#34;baz.com&#34;</span><span class="op" id="7484395">,</span>&nbsp;<span class="builtintype" id="7484397">true</span><span class="op" id="7484401">}</span><span class="op" id="7484402">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7484412">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484450">{</span><span class="string" id="7484451">&#34;localhost.net&#34;</span><span class="op" id="7484466">,</span>&nbsp;<span class="builtintype" id="7484468">true</span><span class="op" id="7484472">}</span><span class="op" id="7484473">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7484477">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484512">{</span><span class="string" id="7484513">&#34;local.localhost&#34;</span><span class="op" id="7484530">,</span>&nbsp;<span class="builtintype" id="7484532">true</span><span class="op" id="7484536">}</span><span class="op" id="7484537">,</span>&nbsp;<span class="comment" id="7484539">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484574">{</span><span class="string" id="7484575">&#34;barbarbaz.net&#34;</span><span class="op" id="7484590">,</span>&nbsp;<span class="builtintype" id="7484592">true</span><span class="op" id="7484596">}</span><span class="op" id="7484597">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7484601">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484643">{</span><span class="string" id="7484644">&#34;www.foobar.com&#34;</span><span class="op" id="7484660">,</span>&nbsp;<span class="builtintype" id="7484662">false</span><span class="op" id="7484667">}</span><span class="op" id="7484668">,</span>&nbsp;<span class="comment" id="7484670">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="7484718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7484721">func</span>&nbsp;<span class="ident" id="7484726">TestUseProxy</span><span class="op" id="7484738">(</span><span class="ident" id="7484739">t</span>&nbsp;<span class="op" id="7484741">*</span><span class="ident" id="7484742">testing</span><span class="op" id="7484749">.</span><span class="ident" id="7484750">T</span><span class="op" id="7484751">)</span>&nbsp;<span class="op" id="7484753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7484756">ResetProxyEnv</span><span class="op" id="7484769">(</span><span class="op" id="7484770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7484773">os</span><span class="op" id="7484775">.</span><span class="ident" id="7484776">Setenv</span><span class="op" id="7484782">(</span><span class="string" id="7484783">&#34;NO_PROXY&#34;</span><span class="op" id="7484793">,</span>&nbsp;<span class="string" id="7484795">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="7484820">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7484823">for</span>&nbsp;<span class="ident" id="7484827">_</span><span class="op" id="7484828">,</span>&nbsp;<span class="ident" id="7484830">test</span>&nbsp;<span class="op" id="7484835">:=</span>&nbsp;<span class="keyword" id="7484838">range</span>&nbsp;<span class="ident" id="7484844">UseProxyTests</span>&nbsp;<span class="op" id="7484858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7484862">if</span>&nbsp;<span class="ident" id="7484865">useProxy</span><span class="op" id="7484873">(</span><span class="ident" id="7484874">test</span><span class="op" id="7484878">.</span><span class="ident" id="7484879">host</span><span class="op" id="7484883">+</span><span class="string" id="7484884">&#34;:80&#34;</span><span class="op" id="7484889">)</span>&nbsp;<span class="op" id="7484891">!=</span>&nbsp;<span class="ident" id="7484894">test</span><span class="op" id="7484898">.</span><span class="ident" id="7484899">match</span>&nbsp;<span class="op" id="7484905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7484910">t</span><span class="op" id="7484911">.</span><span class="ident" id="7484912">Errorf</span><span class="op" id="7484918">(</span><span class="string" id="7484919">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7484947">,</span>&nbsp;<span class="ident" id="7484949">test</span><span class="op" id="7484953">.</span><span class="ident" id="7484954">host</span><span class="op" id="7484958">,</span>&nbsp;<span class="op" id="7484960">!</span><span class="ident" id="7484961">test</span><span class="op" id="7484965">.</span><span class="ident" id="7484966">match</span><span class="op" id="7484971">,</span>&nbsp;<span class="ident" id="7484973">test</span><span class="op" id="7484977">.</span><span class="ident" id="7484978">match</span><span class="op" id="7484983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7484990">}</span><br>
<span class="lineno">45</span><span class="op" id="7484992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7484995">var</span>&nbsp;<span class="ident" id="7484999">cacheKeysTests</span>&nbsp;<span class="op" id="7485014">=</span>&nbsp;<span class="op" id="7485016">[</span><span class="op" id="7485017">]</span><span class="keyword" id="7485018">struct</span>&nbsp;<span class="op" id="7485025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485028">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="7485035">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485043">scheme</span>&nbsp;<span class="builtintype" id="7485050">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485058">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7485065">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485073">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7485080">string</span><br>
<span class="lineno"></span><span class="op" id="7485087">}</span><span class="op" id="7485088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485091">{</span><span class="string" id="7485092">&#34;&#34;</span><span class="op" id="7485094">,</span>&nbsp;<span class="string" id="7485096">&#34;http&#34;</span><span class="op" id="7485102">,</span>&nbsp;<span class="string" id="7485104">&#34;foo.com&#34;</span><span class="op" id="7485113">,</span>&nbsp;<span class="string" id="7485115">&#34;|http|foo.com&#34;</span><span class="op" id="7485130">}</span><span class="op" id="7485131">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485134">{</span><span class="string" id="7485135">&#34;&#34;</span><span class="op" id="7485137">,</span>&nbsp;<span class="string" id="7485139">&#34;https&#34;</span><span class="op" id="7485146">,</span>&nbsp;<span class="string" id="7485148">&#34;foo.com&#34;</span><span class="op" id="7485157">,</span>&nbsp;<span class="string" id="7485159">&#34;|https|foo.com&#34;</span><span class="op" id="7485175">}</span><span class="op" id="7485176">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485179">{</span><span class="string" id="7485180">&#34;http://foo.com&#34;</span><span class="op" id="7485196">,</span>&nbsp;<span class="string" id="7485198">&#34;http&#34;</span><span class="op" id="7485204">,</span>&nbsp;<span class="string" id="7485206">&#34;foo.com&#34;</span><span class="op" id="7485215">,</span>&nbsp;<span class="string" id="7485217">&#34;http://foo.com|http|&#34;</span><span class="op" id="7485239">}</span><span class="op" id="7485240">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485243">{</span><span class="string" id="7485244">&#34;http://foo.com&#34;</span><span class="op" id="7485260">,</span>&nbsp;<span class="string" id="7485262">&#34;https&#34;</span><span class="op" id="7485269">,</span>&nbsp;<span class="string" id="7485271">&#34;foo.com&#34;</span><span class="op" id="7485280">,</span>&nbsp;<span class="string" id="7485282">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="7485312">}</span><span class="op" id="7485313">,</span><br>
<span class="lineno"></span><span class="op" id="7485315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7485318">func</span>&nbsp;<span class="ident" id="7485323">TestCacheKeys</span><span class="op" id="7485336">(</span><span class="ident" id="7485337">t</span>&nbsp;<span class="op" id="7485339">*</span><span class="ident" id="7485340">testing</span><span class="op" id="7485347">.</span><span class="ident" id="7485348">T</span><span class="op" id="7485349">)</span>&nbsp;<span class="op" id="7485351">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485354">for</span>&nbsp;<span class="ident" id="7485358">_</span><span class="op" id="7485359">,</span>&nbsp;<span class="ident" id="7485361">tt</span>&nbsp;<span class="op" id="7485364">:=</span>&nbsp;<span class="keyword" id="7485367">range</span>&nbsp;<span class="ident" id="7485373">cacheKeysTests</span>&nbsp;<span class="op" id="7485388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485392">var</span>&nbsp;<span class="ident" id="7485396">proxy</span>&nbsp;<span class="op" id="7485402">*</span><span class="ident" id="7485403">url</span><span class="op" id="7485406">.</span><span class="ident" id="7485407">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485413">if</span>&nbsp;<span class="ident" id="7485416">tt</span><span class="op" id="7485418">.</span><span class="ident" id="7485419">proxy</span>&nbsp;<span class="op" id="7485425">!=</span>&nbsp;<span class="string" id="7485428">&#34;&#34;</span>&nbsp;<span class="op" id="7485431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485436">u</span><span class="op" id="7485437">,</span>&nbsp;<span class="ident" id="7485439">err</span>&nbsp;<span class="op" id="7485443">:=</span>&nbsp;<span class="ident" id="7485446">url</span><span class="op" id="7485449">.</span><span class="ident" id="7485450">Parse</span><span class="op" id="7485455">(</span><span class="ident" id="7485456">tt</span><span class="op" id="7485458">.</span><span class="ident" id="7485459">proxy</span><span class="op" id="7485464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485469">if</span>&nbsp;<span class="ident" id="7485472">err</span>&nbsp;<span class="op" id="7485476">!=</span>&nbsp;<span class="builtintype" id="7485479">nil</span>&nbsp;<span class="op" id="7485483">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485489">t</span><span class="op" id="7485490">.</span><span class="ident" id="7485491">Fatal</span><span class="op" id="7485496">(</span><span class="ident" id="7485497">err</span><span class="op" id="7485500">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485505">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485510">proxy</span>&nbsp;<span class="op" id="7485516">=</span>&nbsp;<span class="ident" id="7485518">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485526">cm</span>&nbsp;<span class="op" id="7485529">:=</span>&nbsp;<span class="ident" id="7485532">connectMethod</span><span class="op" id="7485545">{</span><span class="ident" id="7485546">proxy</span><span class="op" id="7485551">,</span>&nbsp;<span class="ident" id="7485553">tt</span><span class="op" id="7485555">.</span><span class="ident" id="7485556">scheme</span><span class="op" id="7485562">,</span>&nbsp;<span class="ident" id="7485564">tt</span><span class="op" id="7485566">.</span><span class="ident" id="7485567">addr</span><span class="op" id="7485571">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485575">if</span>&nbsp;<span class="ident" id="7485578">got</span>&nbsp;<span class="op" id="7485582">:=</span>&nbsp;<span class="ident" id="7485585">cm</span><span class="op" id="7485587">.</span><span class="ident" id="7485588">key</span><span class="op" id="7485591">(</span><span class="op" id="7485592">)</span><span class="op" id="7485593">.</span><span class="ident" id="7485594">String</span><span class="op" id="7485600">(</span><span class="op" id="7485601">)</span><span class="op" id="7485602">;</span>&nbsp;<span class="ident" id="7485604">got</span>&nbsp;<span class="op" id="7485608">!=</span>&nbsp;<span class="ident" id="7485611">tt</span><span class="op" id="7485613">.</span><span class="ident" id="7485614">key</span>&nbsp;<span class="op" id="7485618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485623">t</span><span class="op" id="7485624">.</span><span class="ident" id="7485625">Fatalf</span><span class="op" id="7485631">(</span><span class="string" id="7485632">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7485670">,</span>&nbsp;<span class="ident" id="7485672">tt</span><span class="op" id="7485674">.</span><span class="ident" id="7485675">proxy</span><span class="op" id="7485680">,</span>&nbsp;<span class="ident" id="7485682">tt</span><span class="op" id="7485684">.</span><span class="ident" id="7485685">scheme</span><span class="op" id="7485691">,</span>&nbsp;<span class="ident" id="7485693">tt</span><span class="op" id="7485695">.</span><span class="ident" id="7485696">addr</span><span class="op" id="7485700">,</span>&nbsp;<span class="ident" id="7485702">got</span><span class="op" id="7485705">,</span>&nbsp;<span class="ident" id="7485707">tt</span><span class="op" id="7485709">.</span><span class="ident" id="7485710">key</span><span class="op" id="7485713">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485720">}</span><br>
<span class="lineno"></span><span class="op" id="7485722">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7485725">func</span>&nbsp;<span class="ident" id="7485730">ResetProxyEnv</span><span class="op" id="7485743">(</span><span class="op" id="7485744">)</span>&nbsp;<span class="op" id="7485746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="7485749">for</span>&nbsp;<span class="ident" id="7485753">_</span><span class="op" id="7485754">,</span>&nbsp;<span class="ident" id="7485756">v</span>&nbsp;<span class="op" id="7485758">:=</span>&nbsp;<span class="keyword" id="7485761">range</span>&nbsp;<span class="op" id="7485767">[</span><span class="op" id="7485768">]</span><span class="builtintype" id="7485769">string</span><span class="op" id="7485775">{</span><span class="string" id="7485776">&#34;HTTP_PROXY&#34;</span><span class="op" id="7485788">,</span>&nbsp;<span class="string" id="7485790">&#34;http_proxy&#34;</span><span class="op" id="7485802">,</span>&nbsp;<span class="string" id="7485804">&#34;NO_PROXY&#34;</span><span class="op" id="7485814">,</span>&nbsp;<span class="string" id="7485816">&#34;no_proxy&#34;</span><span class="op" id="7485826">}</span>&nbsp;<span class="op" id="7485828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485832">os</span><span class="op" id="7485834">.</span><span class="ident" id="7485835">Setenv</span><span class="op" id="7485841">(</span><span class="ident" id="7485842">v</span><span class="op" id="7485843">,</span>&nbsp;<span class="string" id="7485845">&#34;&#34;</span><span class="op" id="7485847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7485850">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7485853">ResetCachedEnvironment</span><span class="op" id="7485875">(</span><span class="op" id="7485876">)</span><br>
<span class="lineno"></span><span class="op" id="7485878">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
