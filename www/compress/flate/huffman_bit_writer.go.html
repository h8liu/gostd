<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4572082">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4572137">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4572191">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4572242">package</span>&nbsp;<span class="ident" id="4572250">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4572257">import</span>&nbsp;<span class="op" id="4572264">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4572267">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4572273">&#34;math&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4572280">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4572283">const</span>&nbsp;<span class="op" id="4572289">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572292">//&nbsp;The&nbsp;largest&nbsp;offset&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4572321">offsetCodeCount</span>&nbsp;<span class="op" id="4572337">=</span>&nbsp;<span class="num" id="4572339">30</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572344">//&nbsp;The&nbsp;special&nbsp;code&nbsp;used&nbsp;to&nbsp;mark&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;block.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4572398">endBlockMarker</span>&nbsp;<span class="op" id="4572413">=</span>&nbsp;<span class="num" id="4572415">256</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572421">//&nbsp;The&nbsp;first&nbsp;length&nbsp;code.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4572448">lengthCodesStart</span>&nbsp;<span class="op" id="4572465">=</span>&nbsp;<span class="num" id="4572467">257</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572473">//&nbsp;The&nbsp;number&nbsp;of&nbsp;codegen&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4572506">codegenCodeCount</span>&nbsp;<span class="op" id="4572523">=</span>&nbsp;<span class="num" id="4572525">19</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4572529">badCode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4572546">=</span>&nbsp;<span class="num" id="4572548">255</span><br>
<span class="lineno">25</span><span class="op" id="4572552">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4572555">//&nbsp;The&nbsp;number&nbsp;of&nbsp;extra&nbsp;bits&nbsp;needed&nbsp;by&nbsp;length&nbsp;code&nbsp;X&nbsp;-&nbsp;LENGTH_CODES_START.</span><br>
<span class="lineno"></span><span class="keyword" id="4572629">var</span>&nbsp;<span class="ident" id="4572633">lengthExtraBits</span>&nbsp;<span class="op" id="4572649">=</span>&nbsp;<span class="op" id="4572651">[</span><span class="op" id="4572652">]</span><span class="builtintype" id="4572653">int8</span><span class="op" id="4572657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572660">/*&nbsp;257&nbsp;*/</span>&nbsp;<span class="num" id="4572670">0</span><span class="op" id="4572671">,</span>&nbsp;<span class="num" id="4572673">0</span><span class="op" id="4572674">,</span>&nbsp;<span class="num" id="4572676">0</span><span class="op" id="4572677">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572680">/*&nbsp;260&nbsp;*/</span>&nbsp;<span class="num" id="4572690">0</span><span class="op" id="4572691">,</span>&nbsp;<span class="num" id="4572693">0</span><span class="op" id="4572694">,</span>&nbsp;<span class="num" id="4572696">0</span><span class="op" id="4572697">,</span>&nbsp;<span class="num" id="4572699">0</span><span class="op" id="4572700">,</span>&nbsp;<span class="num" id="4572702">0</span><span class="op" id="4572703">,</span>&nbsp;<span class="num" id="4572705">1</span><span class="op" id="4572706">,</span>&nbsp;<span class="num" id="4572708">1</span><span class="op" id="4572709">,</span>&nbsp;<span class="num" id="4572711">1</span><span class="op" id="4572712">,</span>&nbsp;<span class="num" id="4572714">1</span><span class="op" id="4572715">,</span>&nbsp;<span class="num" id="4572717">2</span><span class="op" id="4572718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572721">/*&nbsp;270&nbsp;*/</span>&nbsp;<span class="num" id="4572731">2</span><span class="op" id="4572732">,</span>&nbsp;<span class="num" id="4572734">2</span><span class="op" id="4572735">,</span>&nbsp;<span class="num" id="4572737">2</span><span class="op" id="4572738">,</span>&nbsp;<span class="num" id="4572740">3</span><span class="op" id="4572741">,</span>&nbsp;<span class="num" id="4572743">3</span><span class="op" id="4572744">,</span>&nbsp;<span class="num" id="4572746">3</span><span class="op" id="4572747">,</span>&nbsp;<span class="num" id="4572749">3</span><span class="op" id="4572750">,</span>&nbsp;<span class="num" id="4572752">4</span><span class="op" id="4572753">,</span>&nbsp;<span class="num" id="4572755">4</span><span class="op" id="4572756">,</span>&nbsp;<span class="num" id="4572758">4</span><span class="op" id="4572759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4572762">/*&nbsp;280&nbsp;*/</span>&nbsp;<span class="num" id="4572772">4</span><span class="op" id="4572773">,</span>&nbsp;<span class="num" id="4572775">5</span><span class="op" id="4572776">,</span>&nbsp;<span class="num" id="4572778">5</span><span class="op" id="4572779">,</span>&nbsp;<span class="num" id="4572781">5</span><span class="op" id="4572782">,</span>&nbsp;<span class="num" id="4572784">5</span><span class="op" id="4572785">,</span>&nbsp;<span class="num" id="4572787">0</span><span class="op" id="4572788">,</span><br>
<span class="lineno"></span><span class="op" id="4572790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="4572793">//&nbsp;The&nbsp;length&nbsp;indicated&nbsp;by&nbsp;length&nbsp;code&nbsp;X&nbsp;-&nbsp;LENGTH_CODES_START.</span><br>
<span class="lineno"></span><span class="keyword" id="4572856">var</span>&nbsp;<span class="ident" id="4572860">lengthBase</span>&nbsp;<span class="op" id="4572871">=</span>&nbsp;<span class="op" id="4572873">[</span><span class="op" id="4572874">]</span><span class="builtintype" id="4572875">uint32</span><span class="op" id="4572881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4572884">0</span><span class="op" id="4572885">,</span>&nbsp;<span class="num" id="4572887">1</span><span class="op" id="4572888">,</span>&nbsp;<span class="num" id="4572890">2</span><span class="op" id="4572891">,</span>&nbsp;<span class="num" id="4572893">3</span><span class="op" id="4572894">,</span>&nbsp;<span class="num" id="4572896">4</span><span class="op" id="4572897">,</span>&nbsp;<span class="num" id="4572899">5</span><span class="op" id="4572900">,</span>&nbsp;<span class="num" id="4572902">6</span><span class="op" id="4572903">,</span>&nbsp;<span class="num" id="4572905">7</span><span class="op" id="4572906">,</span>&nbsp;<span class="num" id="4572908">8</span><span class="op" id="4572909">,</span>&nbsp;<span class="num" id="4572911">10</span><span class="op" id="4572913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4572916">12</span><span class="op" id="4572918">,</span>&nbsp;<span class="num" id="4572920">14</span><span class="op" id="4572922">,</span>&nbsp;<span class="num" id="4572924">16</span><span class="op" id="4572926">,</span>&nbsp;<span class="num" id="4572928">20</span><span class="op" id="4572930">,</span>&nbsp;<span class="num" id="4572932">24</span><span class="op" id="4572934">,</span>&nbsp;<span class="num" id="4572936">28</span><span class="op" id="4572938">,</span>&nbsp;<span class="num" id="4572940">32</span><span class="op" id="4572942">,</span>&nbsp;<span class="num" id="4572944">40</span><span class="op" id="4572946">,</span>&nbsp;<span class="num" id="4572948">48</span><span class="op" id="4572950">,</span>&nbsp;<span class="num" id="4572952">56</span><span class="op" id="4572954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4572957">64</span><span class="op" id="4572959">,</span>&nbsp;<span class="num" id="4572961">80</span><span class="op" id="4572963">,</span>&nbsp;<span class="num" id="4572965">96</span><span class="op" id="4572967">,</span>&nbsp;<span class="num" id="4572969">112</span><span class="op" id="4572972">,</span>&nbsp;<span class="num" id="4572974">128</span><span class="op" id="4572977">,</span>&nbsp;<span class="num" id="4572979">160</span><span class="op" id="4572982">,</span>&nbsp;<span class="num" id="4572984">192</span><span class="op" id="4572987">,</span>&nbsp;<span class="num" id="4572989">224</span><span class="op" id="4572992">,</span>&nbsp;<span class="num" id="4572994">255</span><span class="op" id="4572997">,</span><br>
<span class="lineno">40</span><span class="op" id="4572999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4573002">//&nbsp;offset&nbsp;code&nbsp;word&nbsp;extra&nbsp;bits.</span><br>
<span class="lineno"></span><span class="keyword" id="4573034">var</span>&nbsp;<span class="ident" id="4573038">offsetExtraBits</span>&nbsp;<span class="op" id="4573054">=</span>&nbsp;<span class="op" id="4573056">[</span><span class="op" id="4573057">]</span><span class="builtintype" id="4573058">int8</span><span class="op" id="4573062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573065">0</span><span class="op" id="4573066">,</span>&nbsp;<span class="num" id="4573068">0</span><span class="op" id="4573069">,</span>&nbsp;<span class="num" id="4573071">0</span><span class="op" id="4573072">,</span>&nbsp;<span class="num" id="4573074">0</span><span class="op" id="4573075">,</span>&nbsp;<span class="num" id="4573077">1</span><span class="op" id="4573078">,</span>&nbsp;<span class="num" id="4573080">1</span><span class="op" id="4573081">,</span>&nbsp;<span class="num" id="4573083">2</span><span class="op" id="4573084">,</span>&nbsp;<span class="num" id="4573086">2</span><span class="op" id="4573087">,</span>&nbsp;<span class="num" id="4573089">3</span><span class="op" id="4573090">,</span>&nbsp;<span class="num" id="4573092">3</span><span class="op" id="4573093">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573096">4</span><span class="op" id="4573097">,</span>&nbsp;<span class="num" id="4573099">4</span><span class="op" id="4573100">,</span>&nbsp;<span class="num" id="4573102">5</span><span class="op" id="4573103">,</span>&nbsp;<span class="num" id="4573105">5</span><span class="op" id="4573106">,</span>&nbsp;<span class="num" id="4573108">6</span><span class="op" id="4573109">,</span>&nbsp;<span class="num" id="4573111">6</span><span class="op" id="4573112">,</span>&nbsp;<span class="num" id="4573114">7</span><span class="op" id="4573115">,</span>&nbsp;<span class="num" id="4573117">7</span><span class="op" id="4573118">,</span>&nbsp;<span class="num" id="4573120">8</span><span class="op" id="4573121">,</span>&nbsp;<span class="num" id="4573123">8</span><span class="op" id="4573124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573127">9</span><span class="op" id="4573128">,</span>&nbsp;<span class="num" id="4573130">9</span><span class="op" id="4573131">,</span>&nbsp;<span class="num" id="4573133">10</span><span class="op" id="4573135">,</span>&nbsp;<span class="num" id="4573137">10</span><span class="op" id="4573139">,</span>&nbsp;<span class="num" id="4573141">11</span><span class="op" id="4573143">,</span>&nbsp;<span class="num" id="4573145">11</span><span class="op" id="4573147">,</span>&nbsp;<span class="num" id="4573149">12</span><span class="op" id="4573151">,</span>&nbsp;<span class="num" id="4573153">12</span><span class="op" id="4573155">,</span>&nbsp;<span class="num" id="4573157">13</span><span class="op" id="4573159">,</span>&nbsp;<span class="num" id="4573161">13</span><span class="op" id="4573163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4573166">/*&nbsp;extended&nbsp;window&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573189">14</span><span class="op" id="4573191">,</span>&nbsp;<span class="num" id="4573193">14</span><span class="op" id="4573195">,</span>&nbsp;<span class="num" id="4573197">15</span><span class="op" id="4573199">,</span>&nbsp;<span class="num" id="4573201">15</span><span class="op" id="4573203">,</span>&nbsp;<span class="num" id="4573205">16</span><span class="op" id="4573207">,</span>&nbsp;<span class="num" id="4573209">16</span><span class="op" id="4573211">,</span>&nbsp;<span class="num" id="4573213">17</span><span class="op" id="4573215">,</span>&nbsp;<span class="num" id="4573217">17</span><span class="op" id="4573219">,</span>&nbsp;<span class="num" id="4573221">18</span><span class="op" id="4573223">,</span>&nbsp;<span class="num" id="4573225">18</span><span class="op" id="4573227">,</span>&nbsp;<span class="num" id="4573229">19</span><span class="op" id="4573231">,</span>&nbsp;<span class="num" id="4573233">19</span><span class="op" id="4573235">,</span>&nbsp;<span class="num" id="4573237">20</span><span class="op" id="4573239">,</span>&nbsp;<span class="num" id="4573241">20</span><span class="op" id="4573243">,</span><br>
<span class="lineno"></span><span class="op" id="4573245">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="keyword" id="4573248">var</span>&nbsp;<span class="ident" id="4573252">offsetBase</span>&nbsp;<span class="op" id="4573263">=</span>&nbsp;<span class="op" id="4573265">[</span><span class="op" id="4573266">]</span><span class="builtintype" id="4573267">uint32</span><span class="op" id="4573273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4573276">/*&nbsp;normal&nbsp;deflate&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573298">0x000000</span><span class="op" id="4573306">,</span>&nbsp;<span class="num" id="4573308">0x000001</span><span class="op" id="4573316">,</span>&nbsp;<span class="num" id="4573318">0x000002</span><span class="op" id="4573326">,</span>&nbsp;<span class="num" id="4573328">0x000003</span><span class="op" id="4573336">,</span>&nbsp;<span class="num" id="4573338">0x000004</span><span class="op" id="4573346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573349">0x000006</span><span class="op" id="4573357">,</span>&nbsp;<span class="num" id="4573359">0x000008</span><span class="op" id="4573367">,</span>&nbsp;<span class="num" id="4573369">0x00000c</span><span class="op" id="4573377">,</span>&nbsp;<span class="num" id="4573379">0x000010</span><span class="op" id="4573387">,</span>&nbsp;<span class="num" id="4573389">0x000018</span><span class="op" id="4573397">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573400">0x000020</span><span class="op" id="4573408">,</span>&nbsp;<span class="num" id="4573410">0x000030</span><span class="op" id="4573418">,</span>&nbsp;<span class="num" id="4573420">0x000040</span><span class="op" id="4573428">,</span>&nbsp;<span class="num" id="4573430">0x000060</span><span class="op" id="4573438">,</span>&nbsp;<span class="num" id="4573440">0x000080</span><span class="op" id="4573448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573451">0x0000c0</span><span class="op" id="4573459">,</span>&nbsp;<span class="num" id="4573461">0x000100</span><span class="op" id="4573469">,</span>&nbsp;<span class="num" id="4573471">0x000180</span><span class="op" id="4573479">,</span>&nbsp;<span class="num" id="4573481">0x000200</span><span class="op" id="4573489">,</span>&nbsp;<span class="num" id="4573491">0x000300</span><span class="op" id="4573499">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573502">0x000400</span><span class="op" id="4573510">,</span>&nbsp;<span class="num" id="4573512">0x000600</span><span class="op" id="4573520">,</span>&nbsp;<span class="num" id="4573522">0x000800</span><span class="op" id="4573530">,</span>&nbsp;<span class="num" id="4573532">0x000c00</span><span class="op" id="4573540">,</span>&nbsp;<span class="num" id="4573542">0x001000</span><span class="op" id="4573550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573553">0x001800</span><span class="op" id="4573561">,</span>&nbsp;<span class="num" id="4573563">0x002000</span><span class="op" id="4573571">,</span>&nbsp;<span class="num" id="4573573">0x003000</span><span class="op" id="4573581">,</span>&nbsp;<span class="num" id="4573583">0x004000</span><span class="op" id="4573591">,</span>&nbsp;<span class="num" id="4573593">0x006000</span><span class="op" id="4573601">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4573605">/*&nbsp;extended&nbsp;window&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573628">0x008000</span><span class="op" id="4573636">,</span>&nbsp;<span class="num" id="4573638">0x00c000</span><span class="op" id="4573646">,</span>&nbsp;<span class="num" id="4573648">0x010000</span><span class="op" id="4573656">,</span>&nbsp;<span class="num" id="4573658">0x018000</span><span class="op" id="4573666">,</span>&nbsp;<span class="num" id="4573668">0x020000</span><span class="op" id="4573676">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573679">0x030000</span><span class="op" id="4573687">,</span>&nbsp;<span class="num" id="4573689">0x040000</span><span class="op" id="4573697">,</span>&nbsp;<span class="num" id="4573699">0x060000</span><span class="op" id="4573707">,</span>&nbsp;<span class="num" id="4573709">0x080000</span><span class="op" id="4573717">,</span>&nbsp;<span class="num" id="4573719">0x0c0000</span><span class="op" id="4573727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="4573730">0x100000</span><span class="op" id="4573738">,</span>&nbsp;<span class="num" id="4573740">0x180000</span><span class="op" id="4573748">,</span>&nbsp;<span class="num" id="4573750">0x200000</span><span class="op" id="4573758">,</span>&nbsp;<span class="num" id="4573760">0x300000</span><span class="op" id="4573768">,</span><br>
<span class="lineno"></span><span class="op" id="4573770">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4573773">//&nbsp;The&nbsp;odd&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;codegen&nbsp;code&nbsp;sizes&nbsp;are&nbsp;written.</span><br>
<span class="lineno"></span><span class="keyword" id="4573835">var</span>&nbsp;<span class="ident" id="4573839">codegenOrder</span>&nbsp;<span class="op" id="4573852">=</span>&nbsp;<span class="op" id="4573854">[</span><span class="op" id="4573855">]</span><span class="builtintype" id="4573856">uint32</span><span class="op" id="4573862">{</span><span class="num" id="4573863">16</span><span class="op" id="4573865">,</span>&nbsp;<span class="num" id="4573867">17</span><span class="op" id="4573869">,</span>&nbsp;<span class="num" id="4573871">18</span><span class="op" id="4573873">,</span>&nbsp;<span class="num" id="4573875">0</span><span class="op" id="4573876">,</span>&nbsp;<span class="num" id="4573878">8</span><span class="op" id="4573879">,</span>&nbsp;<span class="num" id="4573881">7</span><span class="op" id="4573882">,</span>&nbsp;<span class="num" id="4573884">9</span><span class="op" id="4573885">,</span>&nbsp;<span class="num" id="4573887">6</span><span class="op" id="4573888">,</span>&nbsp;<span class="num" id="4573890">10</span><span class="op" id="4573892">,</span>&nbsp;<span class="num" id="4573894">5</span><span class="op" id="4573895">,</span>&nbsp;<span class="num" id="4573897">11</span><span class="op" id="4573899">,</span>&nbsp;<span class="num" id="4573901">4</span><span class="op" id="4573902">,</span>&nbsp;<span class="num" id="4573904">12</span><span class="op" id="4573906">,</span>&nbsp;<span class="num" id="4573908">3</span><span class="op" id="4573909">,</span>&nbsp;<span class="num" id="4573911">13</span><span class="op" id="4573913">,</span>&nbsp;<span class="num" id="4573915">2</span><span class="op" id="4573916">,</span>&nbsp;<span class="num" id="4573918">14</span><span class="op" id="4573920">,</span>&nbsp;<span class="num" id="4573922">1</span><span class="op" id="4573923">,</span>&nbsp;<span class="num" id="4573925">15</span><span class="op" id="4573927">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4573930">type</span>&nbsp;<span class="ident" id="4573935">huffmanBitWriter</span>&nbsp;<span class="keyword" id="4573952">struct</span>&nbsp;<span class="op" id="4573959">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4573962">w</span>&nbsp;<span class="ident" id="4573964"><a href="/compress/flate/huffman_bit_writer.go.html#4572267">io</a></span><span class="op" id="4573966">.</span><span class="ident" id="4573967">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4573975">//&nbsp;Data&nbsp;waiting&nbsp;to&nbsp;be&nbsp;written&nbsp;is&nbsp;bytes[0:nbytes]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4574025">//&nbsp;and&nbsp;then&nbsp;the&nbsp;low&nbsp;nbits&nbsp;of&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574061">bits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4574077">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574085">nbits</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4574101">uint32</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574109">bytes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4574125">[</span><span class="num" id="4574126">64</span><span class="op" id="4574128">]</span><span class="builtintype" id="4574129">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574135">nbytes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4574151">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574156">literalFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4574172">[</span><span class="op" id="4574173">]</span><span class="builtintype" id="4574174">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574181">offsetFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4574197">[</span><span class="op" id="4574198">]</span><span class="builtintype" id="4574199">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574206">codegen</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4574222">[</span><span class="op" id="4574223">]</span><span class="builtintype" id="4574224">uint8</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574231">codegenFreq</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4574247">[</span><span class="op" id="4574248">]</span><span class="builtintype" id="4574249">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574256">literalEncoding</span>&nbsp;<span class="op" id="4574272">*</span><span class="ident" id="4574273"><a href="/compress/flate/huffman_code.go.html#4585510">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574289">offsetEncoding</span>&nbsp;&nbsp;<span class="op" id="4574305">*</span><span class="ident" id="4574306"><a href="/compress/flate/huffman_code.go.html#4585510">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574322">codegenEncoding</span>&nbsp;<span class="op" id="4574338">*</span><span class="ident" id="4574339"><a href="/compress/flate/huffman_code.go.html#4585510">huffmanEncoder</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574355">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4574371">error</span><br>
<span class="lineno">85</span><span class="op" id="4574377">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4574380">func</span>&nbsp;<span class="ident" id="4574385">newHuffmanBitWriter</span><span class="op" id="4574404">(</span><span class="ident" id="4574405">w</span>&nbsp;<span class="ident" id="4574407"><a href="/compress/flate/huffman_bit_writer.go.html#4572267">io</a></span><span class="op" id="4574409">.</span><span class="ident" id="4574410">Writer</span><span class="op" id="4574416">)</span>&nbsp;<span class="op" id="4574418">*</span><span class="ident" id="4574419"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span>&nbsp;<span class="op" id="4574436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4574439">return</span>&nbsp;<span class="op" id="4574446">&amp;</span><span class="ident" id="4574447"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4574463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574467">w</span><span class="op" id="4574468">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4574484"><a href="/compress/flate/huffman_bit_writer.go.html#4574405">w</a></span><span class="op" id="4574485">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574489">literalFreq</span><span class="op" id="4574500">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4574506">make</span><span class="op" id="4574510">(</span><span class="op" id="4574511">[</span><span class="op" id="4574512">]</span><span class="builtintype" id="4574513">int32</span><span class="op" id="4574518">,</span>&nbsp;<span class="ident" id="4574520"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span><span class="op" id="4574526">)</span><span class="op" id="4574527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574531">offsetFreq</span><span class="op" id="4574541">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4574548">make</span><span class="op" id="4574552">(</span><span class="op" id="4574553">[</span><span class="op" id="4574554">]</span><span class="builtintype" id="4574555">int32</span><span class="op" id="4574560">,</span>&nbsp;<span class="ident" id="4574562"><a href="/compress/flate/huffman_bit_writer.go.html#4572321">offsetCodeCount</a></span><span class="op" id="4574577">)</span><span class="op" id="4574578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574582">codegen</span><span class="op" id="4574589">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4574599">make</span><span class="op" id="4574603">(</span><span class="op" id="4574604">[</span><span class="op" id="4574605">]</span><span class="builtintype" id="4574606">uint8</span><span class="op" id="4574611">,</span>&nbsp;<span class="ident" id="4574613"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span><span class="op" id="4574619">+</span><span class="ident" id="4574620"><a href="/compress/flate/huffman_bit_writer.go.html#4572321">offsetCodeCount</a></span><span class="op" id="4574635">+</span><span class="num" id="4574636">1</span><span class="op" id="4574637">)</span><span class="op" id="4574638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574642">codegenFreq</span><span class="op" id="4574653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4574659">make</span><span class="op" id="4574663">(</span><span class="op" id="4574664">[</span><span class="op" id="4574665">]</span><span class="builtintype" id="4574666">int32</span><span class="op" id="4574671">,</span>&nbsp;<span class="ident" id="4574673"><a href="/compress/flate/huffman_bit_writer.go.html#4572506">codegenCodeCount</a></span><span class="op" id="4574689">)</span><span class="op" id="4574690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574694">literalEncoding</span><span class="op" id="4574709">:</span>&nbsp;<span class="ident" id="4574711"><a href="/compress/flate/huffman_code.go.html#4586303">newHuffmanEncoder</a></span><span class="op" id="4574728">(</span><span class="ident" id="4574729"><a href="/compress/flate/inflate.go.html#4595270">maxLit</a></span><span class="op" id="4574735">)</span><span class="op" id="4574736">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574740">offsetEncoding</span><span class="op" id="4574754">:</span>&nbsp;&nbsp;<span class="ident" id="4574757"><a href="/compress/flate/huffman_code.go.html#4586303">newHuffmanEncoder</a></span><span class="op" id="4574774">(</span><span class="ident" id="4574775"><a href="/compress/flate/huffman_bit_writer.go.html#4572321">offsetCodeCount</a></span><span class="op" id="4574790">)</span><span class="op" id="4574791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574795">codegenEncoding</span><span class="op" id="4574810">:</span>&nbsp;<span class="ident" id="4574812"><a href="/compress/flate/huffman_code.go.html#4586303">newHuffmanEncoder</a></span><span class="op" id="4574829">(</span><span class="ident" id="4574830"><a href="/compress/flate/huffman_bit_writer.go.html#4572506">codegenCodeCount</a></span><span class="op" id="4574846">)</span><span class="op" id="4574847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4574850">}</span><br>
<span class="lineno"></span><span class="op" id="4574852">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="keyword" id="4574855">func</span>&nbsp;<span class="op" id="4574860">(</span><span class="ident" id="4574861">w</span>&nbsp;<span class="op" id="4574863">*</span><span class="ident" id="4574864"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4574880">)</span>&nbsp;<span class="ident" id="4574882">reset</span><span class="op" id="4574887">(</span><span class="ident" id="4574888">writer</span>&nbsp;<span class="ident" id="4574895"><a href="/compress/flate/huffman_bit_writer.go.html#4572267">io</a></span><span class="op" id="4574897">.</span><span class="ident" id="4574898">Writer</span><span class="op" id="4574904">)</span>&nbsp;<span class="op" id="4574906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574909"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574910">.</span><span class="ident" id="4574911">w</span>&nbsp;<span class="op" id="4574913">=</span>&nbsp;<span class="ident" id="4574915"><a href="/compress/flate/huffman_bit_writer.go.html#4574888">writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574923"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574924">.</span><span class="ident" id="4574925">bits</span><span class="op" id="4574929">,</span>&nbsp;<span class="ident" id="4574931"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574932">.</span><span class="ident" id="4574933">nbits</span><span class="op" id="4574938">,</span>&nbsp;<span class="ident" id="4574940"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574941">.</span><span class="ident" id="4574942">nbytes</span><span class="op" id="4574948">,</span>&nbsp;<span class="ident" id="4574950"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574951">.</span><span class="ident" id="4574952">err</span>&nbsp;<span class="op" id="4574956">=</span>&nbsp;<span class="num" id="4574958">0</span><span class="op" id="4574959">,</span>&nbsp;<span class="num" id="4574961">0</span><span class="op" id="4574962">,</span>&nbsp;<span class="num" id="4574964">0</span><span class="op" id="4574965">,</span>&nbsp;<span class="ident" id="4574967">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4574972"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4574973">.</span><span class="ident" id="4574974">bytes</span>&nbsp;<span class="op" id="4574980">=</span>&nbsp;<span class="op" id="4574982">[</span><span class="num" id="4574983">64</span><span class="op" id="4574985">]</span><span class="builtintype" id="4574986">byte</span><span class="op" id="4574990">{</span><span class="op" id="4574991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4574994">for</span>&nbsp;<span class="ident" id="4574998">i</span>&nbsp;<span class="op" id="4575000">:=</span>&nbsp;<span class="keyword" id="4575003">range</span>&nbsp;<span class="ident" id="4575009"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575010">.</span><span class="ident" id="4575011">codegen</span>&nbsp;<span class="op" id="4575019">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575023"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575024">.</span><span class="ident" id="4575025">codegen</span><span class="op" id="4575032">[</span><span class="ident" id="4575033"><a href="/compress/flate/huffman_bit_writer.go.html#4574998">i</a></span><span class="op" id="4575034">]</span>&nbsp;<span class="op" id="4575036">=</span>&nbsp;<span class="num" id="4575038">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575041">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575044">for</span>&nbsp;<span class="ident" id="4575048">_</span><span class="op" id="4575049">,</span>&nbsp;<span class="ident" id="4575051">s</span>&nbsp;<span class="op" id="4575053">:=</span>&nbsp;<span class="keyword" id="4575056">range</span>&nbsp;<span class="op" id="4575062">[</span><span class="op" id="4575063">...</span><span class="op" id="4575066">]</span><span class="op" id="4575067">[</span><span class="op" id="4575068">]</span><span class="builtintype" id="4575069">int32</span><span class="op" id="4575074">{</span><span class="ident" id="4575075"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575076">.</span><span class="ident" id="4575077">literalFreq</span><span class="op" id="4575088">,</span>&nbsp;<span class="ident" id="4575090"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575091">.</span><span class="ident" id="4575092">offsetFreq</span><span class="op" id="4575102">,</span>&nbsp;<span class="ident" id="4575104"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575105">.</span><span class="ident" id="4575106">codegenFreq</span><span class="op" id="4575117">}</span>&nbsp;<span class="op" id="4575119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575123">for</span>&nbsp;<span class="ident" id="4575127">i</span>&nbsp;<span class="op" id="4575129">:=</span>&nbsp;<span class="keyword" id="4575132">range</span>&nbsp;<span class="ident" id="4575138"><a href="/compress/flate/huffman_bit_writer.go.html#4575051">s</a></span>&nbsp;<span class="op" id="4575140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575145"><a href="/compress/flate/huffman_bit_writer.go.html#4575051">s</a></span><span class="op" id="4575146">[</span><span class="ident" id="4575147"><a href="/compress/flate/huffman_bit_writer.go.html#4575127">i</a></span><span class="op" id="4575148">]</span>&nbsp;<span class="op" id="4575150">=</span>&nbsp;<span class="num" id="4575152">0</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575162">for</span>&nbsp;<span class="ident" id="4575166">_</span><span class="op" id="4575167">,</span>&nbsp;<span class="ident" id="4575169">enc</span>&nbsp;<span class="op" id="4575173">:=</span>&nbsp;<span class="keyword" id="4575176">range</span>&nbsp;<span class="op" id="4575182">[</span><span class="op" id="4575183">...</span><span class="op" id="4575186">]</span><span class="op" id="4575187">*</span><span class="ident" id="4575188"><a href="/compress/flate/huffman_code.go.html#4585510">huffmanEncoder</a></span><span class="op" id="4575202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575206"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575207">.</span><span class="ident" id="4575208">literalEncoding</span><span class="op" id="4575223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575227"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575228">.</span><span class="ident" id="4575229">offsetEncoding</span><span class="op" id="4575243">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575247"><a href="/compress/flate/huffman_bit_writer.go.html#4574861">w</a></span><span class="op" id="4575248">.</span><span class="ident" id="4575249">codegenEncoding</span><span class="op" id="4575264">}</span>&nbsp;<span class="op" id="4575266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575270">for</span>&nbsp;<span class="ident" id="4575274">i</span>&nbsp;<span class="op" id="4575276">:=</span>&nbsp;<span class="keyword" id="4575279">range</span>&nbsp;<span class="ident" id="4575285"><a href="/compress/flate/huffman_bit_writer.go.html#4575169">enc</a></span><span class="op" id="4575288">.</span><span class="ident" id="4575289">code</span>&nbsp;<span class="op" id="4575294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575299"><a href="/compress/flate/huffman_bit_writer.go.html#4575169">enc</a></span><span class="op" id="4575302">.</span><span class="ident" id="4575303">code</span><span class="op" id="4575307">[</span><span class="ident" id="4575308"><a href="/compress/flate/huffman_bit_writer.go.html#4575274">i</a></span><span class="op" id="4575309">]</span>&nbsp;<span class="op" id="4575311">=</span>&nbsp;<span class="num" id="4575313">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575321">for</span>&nbsp;<span class="ident" id="4575325">i</span>&nbsp;<span class="op" id="4575327">:=</span>&nbsp;<span class="keyword" id="4575330">range</span>&nbsp;<span class="ident" id="4575336"><a href="/compress/flate/huffman_bit_writer.go.html#4575169">enc</a></span><span class="op" id="4575339">.</span><span class="ident" id="4575340">codeBits</span>&nbsp;<span class="op" id="4575349">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575354"><a href="/compress/flate/huffman_bit_writer.go.html#4575169">enc</a></span><span class="op" id="4575357">.</span><span class="ident" id="4575358">codeBits</span><span class="op" id="4575366">[</span><span class="ident" id="4575367"><a href="/compress/flate/huffman_bit_writer.go.html#4575325">i</a></span><span class="op" id="4575368">]</span>&nbsp;<span class="op" id="4575370">=</span>&nbsp;<span class="num" id="4575372">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575379">}</span><br>
<span class="lineno"></span><span class="op" id="4575381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="4575384">func</span>&nbsp;<span class="op" id="4575389">(</span><span class="ident" id="4575390">w</span>&nbsp;<span class="op" id="4575392">*</span><span class="ident" id="4575393"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4575409">)</span>&nbsp;<span class="ident" id="4575411">flushBits</span><span class="op" id="4575420">(</span><span class="op" id="4575421">)</span>&nbsp;<span class="op" id="4575423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575426">if</span>&nbsp;<span class="ident" id="4575429"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575430">.</span><span class="ident" id="4575431">err</span>&nbsp;<span class="op" id="4575435">!=</span>&nbsp;<span class="ident" id="4575438">nil</span>&nbsp;<span class="op" id="4575442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575446"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575447">.</span><span class="ident" id="4575448">nbits</span>&nbsp;<span class="op" id="4575454">=</span>&nbsp;<span class="num" id="4575456">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575460">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575468">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575471">bits</span>&nbsp;<span class="op" id="4575476">:=</span>&nbsp;<span class="ident" id="4575479"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575480">.</span><span class="ident" id="4575481">bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575487"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575488">.</span><span class="ident" id="4575489">bits</span>&nbsp;<span class="op" id="4575494">&gt;&gt;=</span>&nbsp;<span class="num" id="4575498">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575502"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575503">.</span><span class="ident" id="4575504">nbits</span>&nbsp;<span class="op" id="4575510">-=</span>&nbsp;<span class="num" id="4575513">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575517">n</span>&nbsp;<span class="op" id="4575519">:=</span>&nbsp;<span class="ident" id="4575522"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575523">.</span><span class="ident" id="4575524">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575532"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575533">.</span><span class="ident" id="4575534">bytes</span><span class="op" id="4575539">[</span><span class="ident" id="4575540"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span><span class="op" id="4575541">]</span>&nbsp;<span class="op" id="4575543">=</span>&nbsp;<span class="builtintype" id="4575545">byte</span><span class="op" id="4575549">(</span><span class="ident" id="4575550"><a href="/compress/flate/huffman_bit_writer.go.html#4575471">bits</a></span><span class="op" id="4575554">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575557"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575558">.</span><span class="ident" id="4575559">bytes</span><span class="op" id="4575564">[</span><span class="ident" id="4575565"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span><span class="op" id="4575566">+</span><span class="num" id="4575567">1</span><span class="op" id="4575568">]</span>&nbsp;<span class="op" id="4575570">=</span>&nbsp;<span class="builtintype" id="4575572">byte</span><span class="op" id="4575576">(</span><span class="ident" id="4575577"><a href="/compress/flate/huffman_bit_writer.go.html#4575471">bits</a></span>&nbsp;<span class="op" id="4575582">&gt;&gt;</span>&nbsp;<span class="num" id="4575585">8</span><span class="op" id="4575586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575589">if</span>&nbsp;<span class="ident" id="4575592"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span>&nbsp;<span class="op" id="4575594">+=</span>&nbsp;<span class="num" id="4575597">2</span><span class="op" id="4575598">;</span>&nbsp;<span class="ident" id="4575600"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span>&nbsp;<span class="op" id="4575602">&gt;=</span>&nbsp;<span class="builtinfunc" id="4575605">len</span><span class="op" id="4575608">(</span><span class="ident" id="4575609"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575610">.</span><span class="ident" id="4575611">bytes</span><span class="op" id="4575616">)</span>&nbsp;<span class="op" id="4575618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575622">_</span><span class="op" id="4575623">,</span>&nbsp;<span class="ident" id="4575625"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575626">.</span><span class="ident" id="4575627">err</span>&nbsp;<span class="op" id="4575631">=</span>&nbsp;<span class="ident" id="4575633"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575634">.</span><span class="ident" id="4575635">w</span><span class="op" id="4575636">.</span><span class="ident" id="4575637">Write</span><span class="op" id="4575642">(</span><span class="ident" id="4575643"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575644">.</span><span class="ident" id="4575645">bytes</span><span class="op" id="4575650">[</span><span class="num" id="4575651">0</span><span class="op" id="4575652">:</span><span class="op" id="4575653">]</span><span class="op" id="4575654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575658"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span>&nbsp;<span class="op" id="4575660">=</span>&nbsp;<span class="num" id="4575662">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575665">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575668"><a href="/compress/flate/huffman_bit_writer.go.html#4575390">w</a></span><span class="op" id="4575669">.</span><span class="ident" id="4575670">nbytes</span>&nbsp;<span class="op" id="4575677">=</span>&nbsp;<span class="ident" id="4575679"><a href="/compress/flate/huffman_bit_writer.go.html#4575517">n</a></span><br>
<span class="lineno"></span><span class="op" id="4575681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4575684">func</span>&nbsp;<span class="op" id="4575689">(</span><span class="ident" id="4575690">w</span>&nbsp;<span class="op" id="4575692">*</span><span class="ident" id="4575693"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4575709">)</span>&nbsp;<span class="ident" id="4575711">flush</span><span class="op" id="4575716">(</span><span class="op" id="4575717">)</span>&nbsp;<span class="op" id="4575719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575722">if</span>&nbsp;<span class="ident" id="4575725"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575726">.</span><span class="ident" id="4575727">err</span>&nbsp;<span class="op" id="4575731">!=</span>&nbsp;<span class="ident" id="4575734">nil</span>&nbsp;<span class="op" id="4575738">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575742"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575743">.</span><span class="ident" id="4575744">nbits</span>&nbsp;<span class="op" id="4575750">=</span>&nbsp;<span class="num" id="4575752">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575756">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575767">n</span>&nbsp;<span class="op" id="4575769">:=</span>&nbsp;<span class="ident" id="4575772"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575773">.</span><span class="ident" id="4575774">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575782">if</span>&nbsp;<span class="ident" id="4575785"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575786">.</span><span class="ident" id="4575787">nbits</span>&nbsp;<span class="op" id="4575793">&gt;</span>&nbsp;<span class="num" id="4575795">8</span>&nbsp;<span class="op" id="4575797">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575801"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575802">.</span><span class="ident" id="4575803">bytes</span><span class="op" id="4575808">[</span><span class="ident" id="4575809"><a href="/compress/flate/huffman_bit_writer.go.html#4575767">n</a></span><span class="op" id="4575810">]</span>&nbsp;<span class="op" id="4575812">=</span>&nbsp;<span class="builtintype" id="4575814">byte</span><span class="op" id="4575818">(</span><span class="ident" id="4575819"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575820">.</span><span class="ident" id="4575821">bits</span><span class="op" id="4575825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575829"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575830">.</span><span class="ident" id="4575831">bits</span>&nbsp;<span class="op" id="4575836">&gt;&gt;=</span>&nbsp;<span class="num" id="4575840">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575844"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575845">.</span><span class="ident" id="4575846">nbits</span>&nbsp;<span class="op" id="4575852">-=</span>&nbsp;<span class="num" id="4575855">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575859"><a href="/compress/flate/huffman_bit_writer.go.html#4575767">n</a></span><span class="op" id="4575860">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575864">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4575867">if</span>&nbsp;<span class="ident" id="4575870"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575871">.</span><span class="ident" id="4575872">nbits</span>&nbsp;<span class="op" id="4575878">&gt;</span>&nbsp;<span class="num" id="4575880">0</span>&nbsp;<span class="op" id="4575882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575886"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575887">.</span><span class="ident" id="4575888">bytes</span><span class="op" id="4575893">[</span><span class="ident" id="4575894"><a href="/compress/flate/huffman_bit_writer.go.html#4575767">n</a></span><span class="op" id="4575895">]</span>&nbsp;<span class="op" id="4575897">=</span>&nbsp;<span class="builtintype" id="4575899">byte</span><span class="op" id="4575903">(</span><span class="ident" id="4575904"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575905">.</span><span class="ident" id="4575906">bits</span><span class="op" id="4575910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575914"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575915">.</span><span class="ident" id="4575916">nbits</span>&nbsp;<span class="op" id="4575922">=</span>&nbsp;<span class="num" id="4575924">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575928"><a href="/compress/flate/huffman_bit_writer.go.html#4575767">n</a></span><span class="op" id="4575929">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4575933">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575936"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575937">.</span><span class="ident" id="4575938">bits</span>&nbsp;<span class="op" id="4575943">=</span>&nbsp;<span class="num" id="4575945">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575948">_</span><span class="op" id="4575949">,</span>&nbsp;<span class="ident" id="4575951"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575952">.</span><span class="ident" id="4575953">err</span>&nbsp;<span class="op" id="4575957">=</span>&nbsp;<span class="ident" id="4575959"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575960">.</span><span class="ident" id="4575961">w</span><span class="op" id="4575962">.</span><span class="ident" id="4575963">Write</span><span class="op" id="4575968">(</span><span class="ident" id="4575969"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575970">.</span><span class="ident" id="4575971">bytes</span><span class="op" id="4575976">[</span><span class="num" id="4575977">0</span><span class="op" id="4575978">:</span><span class="ident" id="4575979"><a href="/compress/flate/huffman_bit_writer.go.html#4575767">n</a></span><span class="op" id="4575980">]</span><span class="op" id="4575981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4575984"><a href="/compress/flate/huffman_bit_writer.go.html#4575690">w</a></span><span class="op" id="4575985">.</span><span class="ident" id="4575986">nbytes</span>&nbsp;<span class="op" id="4575993">=</span>&nbsp;<span class="num" id="4575995">0</span><br>
<span class="lineno"></span><span class="op" id="4575997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="4576000">func</span>&nbsp;<span class="op" id="4576005">(</span><span class="ident" id="4576006">w</span>&nbsp;<span class="op" id="4576008">*</span><span class="ident" id="4576009"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4576025">)</span>&nbsp;<span class="ident" id="4576027">writeBits</span><span class="op" id="4576036">(</span><span class="ident" id="4576037">b</span><span class="op" id="4576038">,</span>&nbsp;<span class="ident" id="4576040">nb</span>&nbsp;<span class="builtintype" id="4576043">int32</span><span class="op" id="4576048">)</span>&nbsp;<span class="op" id="4576050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576053"><a href="/compress/flate/huffman_bit_writer.go.html#4576006">w</a></span><span class="op" id="4576054">.</span><span class="ident" id="4576055">bits</span>&nbsp;<span class="op" id="4576060">|=</span>&nbsp;<span class="builtintype" id="4576063">uint32</span><span class="op" id="4576069">(</span><span class="ident" id="4576070"><a href="/compress/flate/huffman_bit_writer.go.html#4576037">b</a></span><span class="op" id="4576071">)</span>&nbsp;<span class="op" id="4576073">&lt;&lt;</span>&nbsp;<span class="ident" id="4576076"><a href="/compress/flate/huffman_bit_writer.go.html#4576006">w</a></span><span class="op" id="4576077">.</span><span class="ident" id="4576078">nbits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576085">if</span>&nbsp;<span class="ident" id="4576088"><a href="/compress/flate/huffman_bit_writer.go.html#4576006">w</a></span><span class="op" id="4576089">.</span><span class="ident" id="4576090">nbits</span>&nbsp;<span class="op" id="4576096">+=</span>&nbsp;<span class="builtintype" id="4576099">uint32</span><span class="op" id="4576105">(</span><span class="ident" id="4576106"><a href="/compress/flate/huffman_bit_writer.go.html#4576040">nb</a></span><span class="op" id="4576108">)</span><span class="op" id="4576109">;</span>&nbsp;<span class="ident" id="4576111"><a href="/compress/flate/huffman_bit_writer.go.html#4576006">w</a></span><span class="op" id="4576112">.</span><span class="ident" id="4576113">nbits</span>&nbsp;<span class="op" id="4576119">&gt;=</span>&nbsp;<span class="num" id="4576122">16</span>&nbsp;<span class="op" id="4576125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576129"><a href="/compress/flate/huffman_bit_writer.go.html#4576006">w</a></span><span class="op" id="4576130">.</span><span class="ident" id="4576131">flushBits</span><span class="op" id="4576140">(</span><span class="op" id="4576141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576144">}</span><br>
<span class="lineno">170</span><span class="op" id="4576146">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4576149">func</span>&nbsp;<span class="op" id="4576154">(</span><span class="ident" id="4576155">w</span>&nbsp;<span class="op" id="4576157">*</span><span class="ident" id="4576158"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4576174">)</span>&nbsp;<span class="ident" id="4576176">writeBytes</span><span class="op" id="4576186">(</span><span class="ident" id="4576187">bytes</span>&nbsp;<span class="op" id="4576193">[</span><span class="op" id="4576194">]</span><span class="builtintype" id="4576195">byte</span><span class="op" id="4576199">)</span>&nbsp;<span class="op" id="4576201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576204">if</span>&nbsp;<span class="ident" id="4576207"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576208">.</span><span class="ident" id="4576209">err</span>&nbsp;<span class="op" id="4576213">!=</span>&nbsp;<span class="ident" id="4576216">nil</span>&nbsp;<span class="op" id="4576220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576224">return</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576232">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576235">n</span>&nbsp;<span class="op" id="4576237">:=</span>&nbsp;<span class="ident" id="4576240"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576241">.</span><span class="ident" id="4576242">nbytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576250">if</span>&nbsp;<span class="ident" id="4576253"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576254">.</span><span class="ident" id="4576255">nbits</span>&nbsp;<span class="op" id="4576261">==</span>&nbsp;<span class="num" id="4576264">8</span>&nbsp;<span class="op" id="4576266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576270"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576271">.</span><span class="ident" id="4576272">bytes</span><span class="op" id="4576277">[</span><span class="ident" id="4576278"><a href="/compress/flate/huffman_bit_writer.go.html#4576235">n</a></span><span class="op" id="4576279">]</span>&nbsp;<span class="op" id="4576281">=</span>&nbsp;<span class="builtintype" id="4576283">byte</span><span class="op" id="4576287">(</span><span class="ident" id="4576288"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576289">.</span><span class="ident" id="4576290">bits</span><span class="op" id="4576294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576298"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576299">.</span><span class="ident" id="4576300">nbits</span>&nbsp;<span class="op" id="4576306">=</span>&nbsp;<span class="num" id="4576308">0</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576312"><a href="/compress/flate/huffman_bit_writer.go.html#4576235">n</a></span><span class="op" id="4576313">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576317">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576320">if</span>&nbsp;<span class="ident" id="4576323"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576324">.</span><span class="ident" id="4576325">nbits</span>&nbsp;<span class="op" id="4576331">!=</span>&nbsp;<span class="num" id="4576334">0</span>&nbsp;<span class="op" id="4576336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576340"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576341">.</span><span class="ident" id="4576342">err</span>&nbsp;<span class="op" id="4576346">=</span>&nbsp;<span class="ident" id="4576348"><a href="/compress/flate/inflate.go.html#4595663">InternalError</a></span><span class="op" id="4576361">(</span><span class="string" id="4576362">&#34;writeBytes&nbsp;with&nbsp;unfinished&nbsp;bits&#34;</span><span class="op" id="4576395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576399">return</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576410">if</span>&nbsp;<span class="ident" id="4576413"><a href="/compress/flate/huffman_bit_writer.go.html#4576235">n</a></span>&nbsp;<span class="op" id="4576415">!=</span>&nbsp;<span class="num" id="4576418">0</span>&nbsp;<span class="op" id="4576420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576424">_</span><span class="op" id="4576425">,</span>&nbsp;<span class="ident" id="4576427"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576428">.</span><span class="ident" id="4576429">err</span>&nbsp;<span class="op" id="4576433">=</span>&nbsp;<span class="ident" id="4576435"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576436">.</span><span class="ident" id="4576437">w</span><span class="op" id="4576438">.</span><span class="ident" id="4576439">Write</span><span class="op" id="4576444">(</span><span class="ident" id="4576445"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576446">.</span><span class="ident" id="4576447">bytes</span><span class="op" id="4576452">[</span><span class="num" id="4576453">0</span><span class="op" id="4576454">:</span><span class="ident" id="4576455"><a href="/compress/flate/huffman_bit_writer.go.html#4576235">n</a></span><span class="op" id="4576456">]</span><span class="op" id="4576457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576461">if</span>&nbsp;<span class="ident" id="4576464"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576465">.</span><span class="ident" id="4576466">err</span>&nbsp;<span class="op" id="4576470">!=</span>&nbsp;<span class="ident" id="4576473">nil</span>&nbsp;<span class="op" id="4576477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4576482">return</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4576494">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576497"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576498">.</span><span class="ident" id="4576499">nbytes</span>&nbsp;<span class="op" id="4576506">=</span>&nbsp;<span class="num" id="4576508">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4576511">_</span><span class="op" id="4576512">,</span>&nbsp;<span class="ident" id="4576514"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576515">.</span><span class="ident" id="4576516">err</span>&nbsp;<span class="op" id="4576520">=</span>&nbsp;<span class="ident" id="4576522"><a href="/compress/flate/huffman_bit_writer.go.html#4576155">w</a></span><span class="op" id="4576523">.</span><span class="ident" id="4576524">w</span><span class="op" id="4576525">.</span><span class="ident" id="4576526">Write</span><span class="op" id="4576531">(</span><span class="ident" id="4576532"><a href="/compress/flate/huffman_bit_writer.go.html#4576187">bytes</a></span><span class="op" id="4576537">)</span><br>
<span class="lineno"></span><span class="op" id="4576539">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="4576542">//&nbsp;RFC&nbsp;1951&nbsp;3.2.7&nbsp;specifies&nbsp;a&nbsp;special&nbsp;run-length&nbsp;encoding&nbsp;for&nbsp;specifying</span><br>
<span class="lineno"></span><span class="comment" id="4576615">//&nbsp;the&nbsp;literal&nbsp;and&nbsp;offset&nbsp;lengths&nbsp;arrays&nbsp;(which&nbsp;are&nbsp;concatenated&nbsp;into&nbsp;a&nbsp;single</span><br>
<span class="lineno"></span><span class="comment" id="4576694">//&nbsp;array).&nbsp;&nbsp;This&nbsp;method&nbsp;generates&nbsp;that&nbsp;run-length&nbsp;encoding.</span><br>
<span class="lineno"></span><span class="comment" id="4576754">//</span><br>
<span class="lineno">200</span><span class="comment" id="4576757">//&nbsp;The&nbsp;result&nbsp;is&nbsp;written&nbsp;into&nbsp;the&nbsp;codegen&nbsp;array,&nbsp;and&nbsp;the&nbsp;frequencies</span><br>
<span class="lineno"></span><span class="comment" id="4576826">//&nbsp;of&nbsp;each&nbsp;code&nbsp;is&nbsp;written&nbsp;into&nbsp;the&nbsp;codegenFreq&nbsp;array.</span><br>
<span class="lineno"></span><span class="comment" id="4576881">//&nbsp;Codes&nbsp;0-15&nbsp;are&nbsp;single&nbsp;byte&nbsp;codes.&nbsp;Codes&nbsp;16-18&nbsp;are&nbsp;followed&nbsp;by&nbsp;additional</span><br>
<span class="lineno"></span><span class="comment" id="4576957">//&nbsp;information.&nbsp;&nbsp;Code&nbsp;badCode&nbsp;is&nbsp;an&nbsp;end&nbsp;marker</span><br>
<span class="lineno"></span><span class="comment" id="4577004">//</span><br>
<span class="lineno">205</span><span class="comment" id="4577007">//&nbsp;&nbsp;numLiterals&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;literals&nbsp;in&nbsp;literalEncoding</span><br>
<span class="lineno"></span><span class="comment" id="4577070">//&nbsp;&nbsp;numOffsets&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;offsets&nbsp;in&nbsp;offsetEncoding</span><br>
<span class="lineno"></span><span class="keyword" id="4577131">func</span>&nbsp;<span class="op" id="4577136">(</span><span class="ident" id="4577137">w</span>&nbsp;<span class="op" id="4577139">*</span><span class="ident" id="4577140"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4577156">)</span>&nbsp;<span class="ident" id="4577158">generateCodegen</span><span class="op" id="4577173">(</span><span class="ident" id="4577174">numLiterals</span>&nbsp;<span class="builtintype" id="4577186">int</span><span class="op" id="4577189">,</span>&nbsp;<span class="ident" id="4577191">numOffsets</span>&nbsp;<span class="builtintype" id="4577202">int</span><span class="op" id="4577205">)</span>&nbsp;<span class="op" id="4577207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4577210">for</span>&nbsp;<span class="ident" id="4577214">i</span>&nbsp;<span class="op" id="4577216">:=</span>&nbsp;<span class="keyword" id="4577219">range</span>&nbsp;<span class="ident" id="4577225"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4577226">.</span><span class="ident" id="4577227">codegenFreq</span>&nbsp;<span class="op" id="4577239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577243"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4577244">.</span><span class="ident" id="4577245">codegenFreq</span><span class="op" id="4577256">[</span><span class="ident" id="4577257"><a href="/compress/flate/huffman_bit_writer.go.html#4577214">i</a></span><span class="op" id="4577258">]</span>&nbsp;<span class="op" id="4577260">=</span>&nbsp;<span class="num" id="4577262">0</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4577265">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577268">//&nbsp;Note&nbsp;that&nbsp;we&nbsp;are&nbsp;using&nbsp;codegen&nbsp;both&nbsp;as&nbsp;a&nbsp;temporary&nbsp;variable&nbsp;for&nbsp;holding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577344">//&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;frequencies,&nbsp;and&nbsp;as&nbsp;the&nbsp;place&nbsp;where&nbsp;we&nbsp;put&nbsp;the&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577417">//&nbsp;This&nbsp;is&nbsp;fine&nbsp;because&nbsp;the&nbsp;output&nbsp;is&nbsp;always&nbsp;shorter&nbsp;than&nbsp;the&nbsp;input&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577491">//&nbsp;so&nbsp;far.</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577503">codegen</span>&nbsp;<span class="op" id="4577511">:=</span>&nbsp;<span class="ident" id="4577514"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4577515">.</span><span class="ident" id="4577516">codegen</span>&nbsp;<span class="comment" id="4577524">//&nbsp;cache</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577534">//&nbsp;Copy&nbsp;the&nbsp;concatenated&nbsp;code&nbsp;sizes&nbsp;to&nbsp;codegen.&nbsp;&nbsp;Put&nbsp;a&nbsp;marker&nbsp;at&nbsp;the&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4577609">copy</span><span class="op" id="4577613">(</span><span class="ident" id="4577614"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4577621">[</span><span class="num" id="4577622">0</span><span class="op" id="4577623">:</span><span class="ident" id="4577624"><a href="/compress/flate/huffman_bit_writer.go.html#4577174">numLiterals</a></span><span class="op" id="4577635">]</span><span class="op" id="4577636">,</span>&nbsp;<span class="ident" id="4577638"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4577639">.</span><span class="ident" id="4577640">literalEncoding</span><span class="op" id="4577655">.</span><span class="ident" id="4577656">codeBits</span><span class="op" id="4577664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4577667">copy</span><span class="op" id="4577671">(</span><span class="ident" id="4577672"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4577679">[</span><span class="ident" id="4577680"><a href="/compress/flate/huffman_bit_writer.go.html#4577174">numLiterals</a></span><span class="op" id="4577691">:</span><span class="ident" id="4577692"><a href="/compress/flate/huffman_bit_writer.go.html#4577174">numLiterals</a></span><span class="op" id="4577703">+</span><span class="ident" id="4577704"><a href="/compress/flate/huffman_bit_writer.go.html#4577191">numOffsets</a></span><span class="op" id="4577714">]</span><span class="op" id="4577715">,</span>&nbsp;<span class="ident" id="4577717"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4577718">.</span><span class="ident" id="4577719">offsetEncoding</span><span class="op" id="4577733">.</span><span class="ident" id="4577734">codeBits</span><span class="op" id="4577742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577745"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4577752">[</span><span class="ident" id="4577753"><a href="/compress/flate/huffman_bit_writer.go.html#4577174">numLiterals</a></span><span class="op" id="4577764">+</span><span class="ident" id="4577765"><a href="/compress/flate/huffman_bit_writer.go.html#4577191">numOffsets</a></span><span class="op" id="4577775">]</span>&nbsp;<span class="op" id="4577777">=</span>&nbsp;<span class="ident" id="4577779"><a href="/compress/flate/huffman_bit_writer.go.html#4572529">badCode</a></span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577789">size</span>&nbsp;<span class="op" id="4577794">:=</span>&nbsp;<span class="ident" id="4577797"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4577804">[</span><span class="num" id="4577805">0</span><span class="op" id="4577806">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577809">count</span>&nbsp;<span class="op" id="4577815">:=</span>&nbsp;<span class="num" id="4577818">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577821">outIndex</span>&nbsp;<span class="op" id="4577830">:=</span>&nbsp;<span class="num" id="4577833">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4577836">for</span>&nbsp;<span class="ident" id="4577840">inIndex</span>&nbsp;<span class="op" id="4577848">:=</span>&nbsp;<span class="num" id="4577851">1</span><span class="op" id="4577852">;</span>&nbsp;<span class="ident" id="4577854"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span>&nbsp;<span class="op" id="4577859">!=</span>&nbsp;<span class="ident" id="4577862"><a href="/compress/flate/huffman_bit_writer.go.html#4572529">badCode</a></span><span class="op" id="4577869">;</span>&nbsp;<span class="ident" id="4577871"><a href="/compress/flate/huffman_bit_writer.go.html#4577840">inIndex</a></span><span class="op" id="4577878">++</span>&nbsp;<span class="op" id="4577881">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577885">//&nbsp;INVARIANT:&nbsp;We&nbsp;have&nbsp;seen&nbsp;&#34;count&#34;&nbsp;copies&nbsp;of&nbsp;size&nbsp;that&nbsp;have&nbsp;not&nbsp;yet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4577955">//&nbsp;had&nbsp;output&nbsp;generated&nbsp;for&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4577991">nextSize</span>&nbsp;<span class="op" id="4578000">:=</span>&nbsp;<span class="ident" id="4578003"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578010">[</span><span class="ident" id="4578011"><a href="/compress/flate/huffman_bit_writer.go.html#4577840">inIndex</a></span><span class="op" id="4578018">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578022">if</span>&nbsp;<span class="ident" id="4578025"><a href="/compress/flate/huffman_bit_writer.go.html#4577991">nextSize</a></span>&nbsp;<span class="op" id="4578034">==</span>&nbsp;<span class="ident" id="4578037"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span>&nbsp;<span class="op" id="4578042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578047"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><span class="op" id="4578052">++</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578058">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4578073">//&nbsp;We&nbsp;need&nbsp;to&nbsp;generate&nbsp;codegen&nbsp;indicating&nbsp;&#34;count&#34;&nbsp;of&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578134">if</span>&nbsp;<span class="ident" id="4578137"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span>&nbsp;<span class="op" id="4578142">!=</span>&nbsp;<span class="num" id="4578145">0</span>&nbsp;<span class="op" id="4578147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578152"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578159">[</span><span class="ident" id="4578160"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578168">]</span>&nbsp;<span class="op" id="4578170">=</span>&nbsp;<span class="ident" id="4578172"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578180"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578188">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578194"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4578195">.</span><span class="ident" id="4578196">codegenFreq</span><span class="op" id="4578207">[</span><span class="ident" id="4578208"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span><span class="op" id="4578212">]</span><span class="op" id="4578213">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578219"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><span class="op" id="4578224">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578230">for</span>&nbsp;<span class="ident" id="4578234"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578240">&gt;=</span>&nbsp;<span class="num" id="4578243">3</span>&nbsp;<span class="op" id="4578245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578251">n</span>&nbsp;<span class="op" id="4578253">:=</span>&nbsp;<span class="num" id="4578256">6</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578262">if</span>&nbsp;<span class="ident" id="4578265"><a href="/compress/flate/huffman_bit_writer.go.html#4578251">n</a></span>&nbsp;<span class="op" id="4578267">&gt;</span>&nbsp;<span class="ident" id="4578269"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578282"><a href="/compress/flate/huffman_bit_writer.go.html#4578251">n</a></span>&nbsp;<span class="op" id="4578284">=</span>&nbsp;<span class="ident" id="4578286"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578296">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578302"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578309">[</span><span class="ident" id="4578310"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578318">]</span>&nbsp;<span class="op" id="4578320">=</span>&nbsp;<span class="num" id="4578322">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578329"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578337">++</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578344"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578351">[</span><span class="ident" id="4578352"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578360">]</span>&nbsp;<span class="op" id="4578362">=</span>&nbsp;<span class="builtintype" id="4578364">uint8</span><span class="op" id="4578369">(</span><span class="ident" id="4578370"><a href="/compress/flate/huffman_bit_writer.go.html#4578251">n</a></span>&nbsp;<span class="op" id="4578372">-</span>&nbsp;<span class="num" id="4578374">3</span><span class="op" id="4578375">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578381"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578389">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578396"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4578397">.</span><span class="ident" id="4578398">codegenFreq</span><span class="op" id="4578409">[</span><span class="num" id="4578410">16</span><span class="op" id="4578412">]</span><span class="op" id="4578413">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578420"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578426">-=</span>&nbsp;<span class="ident" id="4578429"><a href="/compress/flate/huffman_bit_writer.go.html#4578251">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578434">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578438">}</span>&nbsp;<span class="keyword" id="4578440">else</span>&nbsp;<span class="op" id="4578445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578450">for</span>&nbsp;<span class="ident" id="4578454"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578460">&gt;=</span>&nbsp;<span class="num" id="4578463">11</span>&nbsp;<span class="op" id="4578466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578472">n</span>&nbsp;<span class="op" id="4578474">:=</span>&nbsp;<span class="num" id="4578477">138</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578485">if</span>&nbsp;<span class="ident" id="4578488"><a href="/compress/flate/huffman_bit_writer.go.html#4578472">n</a></span>&nbsp;<span class="op" id="4578490">&gt;</span>&nbsp;<span class="ident" id="4578492"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578505"><a href="/compress/flate/huffman_bit_writer.go.html#4578472">n</a></span>&nbsp;<span class="op" id="4578507">=</span>&nbsp;<span class="ident" id="4578509"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578525"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578532">[</span><span class="ident" id="4578533"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578541">]</span>&nbsp;<span class="op" id="4578543">=</span>&nbsp;<span class="num" id="4578545">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578552"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578560">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578567"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578574">[</span><span class="ident" id="4578575"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578583">]</span>&nbsp;<span class="op" id="4578585">=</span>&nbsp;<span class="builtintype" id="4578587">uint8</span><span class="op" id="4578592">(</span><span class="ident" id="4578593"><a href="/compress/flate/huffman_bit_writer.go.html#4578472">n</a></span>&nbsp;<span class="op" id="4578595">-</span>&nbsp;<span class="num" id="4578597">11</span><span class="op" id="4578599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578605"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578613">++</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578620"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4578621">.</span><span class="ident" id="4578622">codegenFreq</span><span class="op" id="4578633">[</span><span class="num" id="4578634">18</span><span class="op" id="4578636">]</span><span class="op" id="4578637">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578644"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578650">-=</span>&nbsp;<span class="ident" id="4578653"><a href="/compress/flate/huffman_bit_writer.go.html#4578472">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578663">if</span>&nbsp;<span class="ident" id="4578666"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578672">&gt;=</span>&nbsp;<span class="num" id="4578675">3</span>&nbsp;<span class="op" id="4578677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4578683">//&nbsp;count&nbsp;&gt;=&nbsp;3&nbsp;&amp;&amp;&nbsp;count&nbsp;&lt;=&nbsp;10</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578716"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578723">[</span><span class="ident" id="4578724"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578732">]</span>&nbsp;<span class="op" id="4578734">=</span>&nbsp;<span class="num" id="4578736">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578743"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578751">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578758"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578765">[</span><span class="ident" id="4578766"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578774">]</span>&nbsp;<span class="op" id="4578776">=</span>&nbsp;<span class="builtintype" id="4578778">uint8</span><span class="op" id="4578783">(</span><span class="ident" id="4578784"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578790">-</span>&nbsp;<span class="num" id="4578792">3</span><span class="op" id="4578793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578799"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578807">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578814"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4578815">.</span><span class="ident" id="4578816">codegenFreq</span><span class="op" id="4578827">[</span><span class="num" id="4578828">17</span><span class="op" id="4578830">]</span><span class="op" id="4578831">++</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578838"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578844">=</span>&nbsp;<span class="num" id="4578846">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578859"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><span class="op" id="4578864">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4578869">for</span>&nbsp;<span class="op" id="4578873">;</span>&nbsp;<span class="ident" id="4578875"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4578881">&gt;=</span>&nbsp;<span class="num" id="4578884">0</span><span class="op" id="4578885">;</span>&nbsp;<span class="ident" id="4578887"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span><span class="op" id="4578892">--</span>&nbsp;<span class="op" id="4578895">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578900"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4578907">[</span><span class="ident" id="4578908"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578916">]</span>&nbsp;<span class="op" id="4578918">=</span>&nbsp;<span class="ident" id="4578920"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578928"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4578936">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4578942"><a href="/compress/flate/huffman_bit_writer.go.html#4577137">w</a></span><span class="op" id="4578943">.</span><span class="ident" id="4578944">codegenFreq</span><span class="op" id="4578955">[</span><span class="ident" id="4578956"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span><span class="op" id="4578960">]</span><span class="op" id="4578961">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4578966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4578970">//&nbsp;Set&nbsp;up&nbsp;invariant&nbsp;for&nbsp;next&nbsp;time&nbsp;through&nbsp;the&nbsp;loop.</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579024"><a href="/compress/flate/huffman_bit_writer.go.html#4577789">size</a></span>&nbsp;<span class="op" id="4579029">=</span>&nbsp;<span class="ident" id="4579031"><a href="/compress/flate/huffman_bit_writer.go.html#4577991">nextSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579042"><a href="/compress/flate/huffman_bit_writer.go.html#4577809">count</a></span>&nbsp;<span class="op" id="4579048">=</span>&nbsp;<span class="num" id="4579050">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4579056">//&nbsp;Marker&nbsp;indicating&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;codegen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579102"><a href="/compress/flate/huffman_bit_writer.go.html#4577503">codegen</a></span><span class="op" id="4579109">[</span><span class="ident" id="4579110"><a href="/compress/flate/huffman_bit_writer.go.html#4577821">outIndex</a></span><span class="op" id="4579118">]</span>&nbsp;<span class="op" id="4579120">=</span>&nbsp;<span class="ident" id="4579122"><a href="/compress/flate/huffman_bit_writer.go.html#4572529">badCode</a></span><br>
<span class="lineno">285</span><span class="op" id="4579130">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4579133">func</span>&nbsp;<span class="op" id="4579138">(</span><span class="ident" id="4579139">w</span>&nbsp;<span class="op" id="4579141">*</span><span class="ident" id="4579142"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4579158">)</span>&nbsp;<span class="ident" id="4579160">writeCode</span><span class="op" id="4579169">(</span><span class="ident" id="4579170">code</span>&nbsp;<span class="op" id="4579175">*</span><span class="ident" id="4579176"><a href="/compress/flate/huffman_code.go.html#4585510">huffmanEncoder</a></span><span class="op" id="4579190">,</span>&nbsp;<span class="ident" id="4579192">literal</span>&nbsp;<span class="builtintype" id="4579200">uint32</span><span class="op" id="4579206">)</span>&nbsp;<span class="op" id="4579208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579211">if</span>&nbsp;<span class="ident" id="4579214"><a href="/compress/flate/huffman_bit_writer.go.html#4579139">w</a></span><span class="op" id="4579215">.</span><span class="ident" id="4579216">err</span>&nbsp;<span class="op" id="4579220">!=</span>&nbsp;<span class="ident" id="4579223">nil</span>&nbsp;<span class="op" id="4579227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579231">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579242"><a href="/compress/flate/huffman_bit_writer.go.html#4579139">w</a></span><span class="op" id="4579243">.</span><span class="ident" id="4579244">writeBits</span><span class="op" id="4579253">(</span><span class="builtintype" id="4579254">int32</span><span class="op" id="4579259">(</span><span class="ident" id="4579260"><a href="/compress/flate/huffman_bit_writer.go.html#4579170">code</a></span><span class="op" id="4579264">.</span><span class="ident" id="4579265">code</span><span class="op" id="4579269">[</span><span class="ident" id="4579270"><a href="/compress/flate/huffman_bit_writer.go.html#4579192">literal</a></span><span class="op" id="4579277">]</span><span class="op" id="4579278">)</span><span class="op" id="4579279">,</span>&nbsp;<span class="builtintype" id="4579281">int32</span><span class="op" id="4579286">(</span><span class="ident" id="4579287"><a href="/compress/flate/huffman_bit_writer.go.html#4579170">code</a></span><span class="op" id="4579291">.</span><span class="ident" id="4579292">codeBits</span><span class="op" id="4579300">[</span><span class="ident" id="4579301"><a href="/compress/flate/huffman_bit_writer.go.html#4579192">literal</a></span><span class="op" id="4579308">]</span><span class="op" id="4579309">)</span><span class="op" id="4579310">)</span><br>
<span class="lineno"></span><span class="op" id="4579312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4579315">//&nbsp;Write&nbsp;the&nbsp;header&nbsp;of&nbsp;a&nbsp;dynamic&nbsp;Huffman&nbsp;block&nbsp;to&nbsp;the&nbsp;output&nbsp;stream.</span><br>
<span class="lineno">295</span><span class="comment" id="4579384">//</span><br>
<span class="lineno"></span><span class="comment" id="4579387">//&nbsp;&nbsp;numLiterals&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;literals&nbsp;specified&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="comment" id="4579448">//&nbsp;&nbsp;numOffsets&nbsp;&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;offsets&nbsp;specified&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="comment" id="4579508">//&nbsp;&nbsp;numCodegens&nbsp;&nbsp;The&nbsp;number&nbsp;of&nbsp;codegens&nbsp;used&nbsp;in&nbsp;codegen</span><br>
<span class="lineno"></span><span class="keyword" id="4579564">func</span>&nbsp;<span class="op" id="4579569">(</span><span class="ident" id="4579570">w</span>&nbsp;<span class="op" id="4579572">*</span><span class="ident" id="4579573"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4579589">)</span>&nbsp;<span class="ident" id="4579591">writeDynamicHeader</span><span class="op" id="4579609">(</span><span class="ident" id="4579610">numLiterals</span>&nbsp;<span class="builtintype" id="4579622">int</span><span class="op" id="4579625">,</span>&nbsp;<span class="ident" id="4579627">numOffsets</span>&nbsp;<span class="builtintype" id="4579638">int</span><span class="op" id="4579641">,</span>&nbsp;<span class="ident" id="4579643">numCodegens</span>&nbsp;<span class="builtintype" id="4579655">int</span><span class="op" id="4579658">,</span>&nbsp;<span class="ident" id="4579660">isEof</span>&nbsp;<span class="builtintype" id="4579666">bool</span><span class="op" id="4579670">)</span>&nbsp;<span class="op" id="4579672">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579675">if</span>&nbsp;<span class="ident" id="4579678"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579679">.</span><span class="ident" id="4579680">err</span>&nbsp;<span class="op" id="4579684">!=</span>&nbsp;<span class="ident" id="4579687">nil</span>&nbsp;<span class="op" id="4579691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579695">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579706">var</span>&nbsp;<span class="ident" id="4579710">firstBits</span>&nbsp;<span class="builtintype" id="4579720">int32</span>&nbsp;<span class="op" id="4579726">=</span>&nbsp;<span class="num" id="4579728">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579731">if</span>&nbsp;<span class="ident" id="4579734"><a href="/compress/flate/huffman_bit_writer.go.html#4579660">isEof</a></span>&nbsp;<span class="op" id="4579740">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579744"><a href="/compress/flate/huffman_bit_writer.go.html#4579710">firstBits</a></span>&nbsp;<span class="op" id="4579754">=</span>&nbsp;<span class="num" id="4579756">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4579759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579762"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579763">.</span><span class="ident" id="4579764">writeBits</span><span class="op" id="4579773">(</span><span class="ident" id="4579774"><a href="/compress/flate/huffman_bit_writer.go.html#4579710">firstBits</a></span><span class="op" id="4579783">,</span>&nbsp;<span class="num" id="4579785">3</span><span class="op" id="4579786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579789"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579790">.</span><span class="ident" id="4579791">writeBits</span><span class="op" id="4579800">(</span><span class="builtintype" id="4579801">int32</span><span class="op" id="4579806">(</span><span class="ident" id="4579807"><a href="/compress/flate/huffman_bit_writer.go.html#4579610">numLiterals</a></span><span class="op" id="4579818">-</span><span class="num" id="4579819">257</span><span class="op" id="4579822">)</span><span class="op" id="4579823">,</span>&nbsp;<span class="num" id="4579825">5</span><span class="op" id="4579826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579829"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579830">.</span><span class="ident" id="4579831">writeBits</span><span class="op" id="4579840">(</span><span class="builtintype" id="4579841">int32</span><span class="op" id="4579846">(</span><span class="ident" id="4579847"><a href="/compress/flate/huffman_bit_writer.go.html#4579627">numOffsets</a></span><span class="op" id="4579857">-</span><span class="num" id="4579858">1</span><span class="op" id="4579859">)</span><span class="op" id="4579860">,</span>&nbsp;<span class="num" id="4579862">5</span><span class="op" id="4579863">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579866"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579867">.</span><span class="ident" id="4579868">writeBits</span><span class="op" id="4579877">(</span><span class="builtintype" id="4579878">int32</span><span class="op" id="4579883">(</span><span class="ident" id="4579884"><a href="/compress/flate/huffman_bit_writer.go.html#4579643">numCodegens</a></span><span class="op" id="4579895">-</span><span class="num" id="4579896">4</span><span class="op" id="4579897">)</span><span class="op" id="4579898">,</span>&nbsp;<span class="num" id="4579900">4</span><span class="op" id="4579901">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4579905">for</span>&nbsp;<span class="ident" id="4579909">i</span>&nbsp;<span class="op" id="4579911">:=</span>&nbsp;<span class="num" id="4579914">0</span><span class="op" id="4579915">;</span>&nbsp;<span class="ident" id="4579917"><a href="/compress/flate/huffman_bit_writer.go.html#4579909">i</a></span>&nbsp;<span class="op" id="4579919">&lt;</span>&nbsp;<span class="ident" id="4579921"><a href="/compress/flate/huffman_bit_writer.go.html#4579643">numCodegens</a></span><span class="op" id="4579932">;</span>&nbsp;<span class="ident" id="4579934"><a href="/compress/flate/huffman_bit_writer.go.html#4579909">i</a></span><span class="op" id="4579935">++</span>&nbsp;<span class="op" id="4579938">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579942">value</span>&nbsp;<span class="op" id="4579948">:=</span>&nbsp;<span class="ident" id="4579951"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579952">.</span><span class="ident" id="4579953">codegenEncoding</span><span class="op" id="4579968">.</span><span class="ident" id="4579969">codeBits</span><span class="op" id="4579977">[</span><span class="ident" id="4579978"><a href="/compress/flate/huffman_bit_writer.go.html#4573839">codegenOrder</a></span><span class="op" id="4579990">[</span><span class="ident" id="4579991"><a href="/compress/flate/huffman_bit_writer.go.html#4579909">i</a></span><span class="op" id="4579992">]</span><span class="op" id="4579993">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4579997"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4579998">.</span><span class="ident" id="4579999">writeBits</span><span class="op" id="4580008">(</span><span class="builtintype" id="4580009">int32</span><span class="op" id="4580014">(</span><span class="ident" id="4580015"><a href="/compress/flate/huffman_bit_writer.go.html#4579942">value</a></span><span class="op" id="4580020">)</span><span class="op" id="4580021">,</span>&nbsp;<span class="num" id="4580023">3</span><span class="op" id="4580024">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580027">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580031">i</span>&nbsp;<span class="op" id="4580033">:=</span>&nbsp;<span class="num" id="4580036">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580039">for</span>&nbsp;<span class="op" id="4580043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580047">var</span>&nbsp;<span class="ident" id="4580051">codeWord</span>&nbsp;<span class="builtintype" id="4580060">int</span>&nbsp;<span class="op" id="4580064">=</span>&nbsp;<span class="builtintype" id="4580066">int</span><span class="op" id="4580069">(</span><span class="ident" id="4580070"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580071">.</span><span class="ident" id="4580072">codegen</span><span class="op" id="4580079">[</span><span class="ident" id="4580080"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580081">]</span><span class="op" id="4580082">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580086"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580087">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580092">if</span>&nbsp;<span class="ident" id="4580095"><a href="/compress/flate/huffman_bit_writer.go.html#4580051">codeWord</a></span>&nbsp;<span class="op" id="4580104">==</span>&nbsp;<span class="ident" id="4580107"><a href="/compress/flate/huffman_bit_writer.go.html#4572529">badCode</a></span>&nbsp;<span class="op" id="4580115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580120">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4580132">//&nbsp;The&nbsp;low&nbsp;byte&nbsp;contains&nbsp;the&nbsp;actual&nbsp;code&nbsp;to&nbsp;generate.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580188"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580189">.</span><span class="ident" id="4580190">writeCode</span><span class="op" id="4580199">(</span><span class="ident" id="4580200"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580201">.</span><span class="ident" id="4580202">codegenEncoding</span><span class="op" id="4580217">,</span>&nbsp;<span class="builtintype" id="4580219">uint32</span><span class="op" id="4580225">(</span><span class="ident" id="4580226"><a href="/compress/flate/huffman_bit_writer.go.html#4580051">codeWord</a></span><span class="op" id="4580234">)</span><span class="op" id="4580235">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580240">switch</span>&nbsp;<span class="ident" id="4580247"><a href="/compress/flate/huffman_bit_writer.go.html#4580051">codeWord</a></span>&nbsp;<span class="op" id="4580256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580260">case</span>&nbsp;<span class="num" id="4580265">16</span><span class="op" id="4580267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580272"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580273">.</span><span class="ident" id="4580274">writeBits</span><span class="op" id="4580283">(</span><span class="builtintype" id="4580284">int32</span><span class="op" id="4580289">(</span><span class="ident" id="4580290"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580291">.</span><span class="ident" id="4580292">codegen</span><span class="op" id="4580299">[</span><span class="ident" id="4580300"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580301">]</span><span class="op" id="4580302">)</span><span class="op" id="4580303">,</span>&nbsp;<span class="num" id="4580305">2</span><span class="op" id="4580306">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580311"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580312">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580318">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580326">case</span>&nbsp;<span class="num" id="4580331">17</span><span class="op" id="4580333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580338"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580339">.</span><span class="ident" id="4580340">writeBits</span><span class="op" id="4580349">(</span><span class="builtintype" id="4580350">int32</span><span class="op" id="4580355">(</span><span class="ident" id="4580356"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580357">.</span><span class="ident" id="4580358">codegen</span><span class="op" id="4580365">[</span><span class="ident" id="4580366"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580367">]</span><span class="op" id="4580368">)</span><span class="op" id="4580369">,</span>&nbsp;<span class="num" id="4580371">3</span><span class="op" id="4580372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580377"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580378">++</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580384">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580392">case</span>&nbsp;<span class="num" id="4580397">18</span><span class="op" id="4580399">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580404"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580405">.</span><span class="ident" id="4580406">writeBits</span><span class="op" id="4580415">(</span><span class="builtintype" id="4580416">int32</span><span class="op" id="4580421">(</span><span class="ident" id="4580422"><a href="/compress/flate/huffman_bit_writer.go.html#4579570">w</a></span><span class="op" id="4580423">.</span><span class="ident" id="4580424">codegen</span><span class="op" id="4580431">[</span><span class="ident" id="4580432"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580433">]</span><span class="op" id="4580434">)</span><span class="op" id="4580435">,</span>&nbsp;<span class="num" id="4580437">7</span><span class="op" id="4580438">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580443"><a href="/compress/flate/huffman_bit_writer.go.html#4580031">i</a></span><span class="op" id="4580444">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580450">break</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580461">}</span><br>
<span class="lineno"></span><span class="op" id="4580463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4580466">func</span>&nbsp;<span class="op" id="4580471">(</span><span class="ident" id="4580472">w</span>&nbsp;<span class="op" id="4580474">*</span><span class="ident" id="4580475"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4580491">)</span>&nbsp;<span class="ident" id="4580493">writeStoredHeader</span><span class="op" id="4580510">(</span><span class="ident" id="4580511">length</span>&nbsp;<span class="builtintype" id="4580518">int</span><span class="op" id="4580521">,</span>&nbsp;<span class="ident" id="4580523">isEof</span>&nbsp;<span class="builtintype" id="4580529">bool</span><span class="op" id="4580533">)</span>&nbsp;<span class="op" id="4580535">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580538">if</span>&nbsp;<span class="ident" id="4580541"><a href="/compress/flate/huffman_bit_writer.go.html#4580472">w</a></span><span class="op" id="4580542">.</span><span class="ident" id="4580543">err</span>&nbsp;<span class="op" id="4580547">!=</span>&nbsp;<span class="ident" id="4580550">nil</span>&nbsp;<span class="op" id="4580554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580558">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580566">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580569">var</span>&nbsp;<span class="ident" id="4580573">flag</span>&nbsp;<span class="builtintype" id="4580578">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580585">if</span>&nbsp;<span class="ident" id="4580588"><a href="/compress/flate/huffman_bit_writer.go.html#4580523">isEof</a></span>&nbsp;<span class="op" id="4580594">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580598"><a href="/compress/flate/huffman_bit_writer.go.html#4580573">flag</a></span>&nbsp;<span class="op" id="4580603">=</span>&nbsp;<span class="num" id="4580605">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580611"><a href="/compress/flate/huffman_bit_writer.go.html#4580472">w</a></span><span class="op" id="4580612">.</span><span class="ident" id="4580613">writeBits</span><span class="op" id="4580622">(</span><span class="ident" id="4580623"><a href="/compress/flate/huffman_bit_writer.go.html#4580573">flag</a></span><span class="op" id="4580627">,</span>&nbsp;<span class="num" id="4580629">3</span><span class="op" id="4580630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580633"><a href="/compress/flate/huffman_bit_writer.go.html#4580472">w</a></span><span class="op" id="4580634">.</span><span class="ident" id="4580635">flush</span><span class="op" id="4580640">(</span><span class="op" id="4580641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580644"><a href="/compress/flate/huffman_bit_writer.go.html#4580472">w</a></span><span class="op" id="4580645">.</span><span class="ident" id="4580646">writeBits</span><span class="op" id="4580655">(</span><span class="builtintype" id="4580656">int32</span><span class="op" id="4580661">(</span><span class="ident" id="4580662"><a href="/compress/flate/huffman_bit_writer.go.html#4580511">length</a></span><span class="op" id="4580668">)</span><span class="op" id="4580669">,</span>&nbsp;<span class="num" id="4580671">16</span><span class="op" id="4580673">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580676"><a href="/compress/flate/huffman_bit_writer.go.html#4580472">w</a></span><span class="op" id="4580677">.</span><span class="ident" id="4580678">writeBits</span><span class="op" id="4580687">(</span><span class="builtintype" id="4580688">int32</span><span class="op" id="4580693">(</span><span class="op" id="4580694">^</span><span class="builtintype" id="4580695">uint16</span><span class="op" id="4580701">(</span><span class="ident" id="4580702"><a href="/compress/flate/huffman_bit_writer.go.html#4580511">length</a></span><span class="op" id="4580708">)</span><span class="op" id="4580709">)</span><span class="op" id="4580710">,</span>&nbsp;<span class="num" id="4580712">16</span><span class="op" id="4580714">)</span><br>
<span class="lineno"></span><span class="op" id="4580716">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4580719">func</span>&nbsp;<span class="op" id="4580724">(</span><span class="ident" id="4580725">w</span>&nbsp;<span class="op" id="4580727">*</span><span class="ident" id="4580728"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4580744">)</span>&nbsp;<span class="ident" id="4580746">writeFixedHeader</span><span class="op" id="4580762">(</span><span class="ident" id="4580763">isEof</span>&nbsp;<span class="builtintype" id="4580769">bool</span><span class="op" id="4580773">)</span>&nbsp;<span class="op" id="4580775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580778">if</span>&nbsp;<span class="ident" id="4580781"><a href="/compress/flate/huffman_bit_writer.go.html#4580725">w</a></span><span class="op" id="4580782">.</span><span class="ident" id="4580783">err</span>&nbsp;<span class="op" id="4580787">!=</span>&nbsp;<span class="ident" id="4580790">nil</span>&nbsp;<span class="op" id="4580794">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580798">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4580809">//&nbsp;Indicate&nbsp;that&nbsp;we&nbsp;are&nbsp;a&nbsp;fixed&nbsp;Huffman&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580856">var</span>&nbsp;<span class="ident" id="4580860">value</span>&nbsp;<span class="builtintype" id="4580866">int32</span>&nbsp;<span class="op" id="4580872">=</span>&nbsp;<span class="num" id="4580874">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4580877">if</span>&nbsp;<span class="ident" id="4580880"><a href="/compress/flate/huffman_bit_writer.go.html#4580763">isEof</a></span>&nbsp;<span class="op" id="4580886">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580890"><a href="/compress/flate/huffman_bit_writer.go.html#4580860">value</a></span>&nbsp;<span class="op" id="4580896">=</span>&nbsp;<span class="num" id="4580898">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4580901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4580904"><a href="/compress/flate/huffman_bit_writer.go.html#4580725">w</a></span><span class="op" id="4580905">.</span><span class="ident" id="4580906">writeBits</span><span class="op" id="4580915">(</span><span class="ident" id="4580916"><a href="/compress/flate/huffman_bit_writer.go.html#4580860">value</a></span><span class="op" id="4580921">,</span>&nbsp;<span class="num" id="4580923">3</span><span class="op" id="4580924">)</span><br>
<span class="lineno"></span><span class="op" id="4580926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">370</span><span class="keyword" id="4580929">func</span>&nbsp;<span class="op" id="4580934">(</span><span class="ident" id="4580935">w</span>&nbsp;<span class="op" id="4580937">*</span><span class="ident" id="4580938"><a href="/compress/flate/huffman_bit_writer.go.html#4573935">huffmanBitWriter</a></span><span class="op" id="4580954">)</span>&nbsp;<span class="ident" id="4580956">writeBlock</span><span class="op" id="4580966">(</span><span class="ident" id="4580967">tokens</span>&nbsp;<span class="op" id="4580974">[</span><span class="op" id="4580975">]</span><span class="ident" id="4580976"><a href="/compress/flate/token.go.html#4616305">token</a></span><span class="op" id="4580981">,</span>&nbsp;<span class="ident" id="4580983">eof</span>&nbsp;<span class="builtintype" id="4580987">bool</span><span class="op" id="4580991">,</span>&nbsp;<span class="ident" id="4580993">input</span>&nbsp;<span class="op" id="4580999">[</span><span class="op" id="4581000">]</span><span class="builtintype" id="4581001">byte</span><span class="op" id="4581005">)</span>&nbsp;<span class="op" id="4581007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581010">if</span>&nbsp;<span class="ident" id="4581013"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581014">.</span><span class="ident" id="4581015">err</span>&nbsp;<span class="op" id="4581019">!=</span>&nbsp;<span class="ident" id="4581022">nil</span>&nbsp;<span class="op" id="4581026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581030">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581041">for</span>&nbsp;<span class="ident" id="4581045">i</span>&nbsp;<span class="op" id="4581047">:=</span>&nbsp;<span class="keyword" id="4581050">range</span>&nbsp;<span class="ident" id="4581056"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581057">.</span><span class="ident" id="4581058">literalFreq</span>&nbsp;<span class="op" id="4581070">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581074"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581075">.</span><span class="ident" id="4581076">literalFreq</span><span class="op" id="4581087">[</span><span class="ident" id="4581088"><a href="/compress/flate/huffman_bit_writer.go.html#4581045">i</a></span><span class="op" id="4581089">]</span>&nbsp;<span class="op" id="4581091">=</span>&nbsp;<span class="num" id="4581093">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581099">for</span>&nbsp;<span class="ident" id="4581103">i</span>&nbsp;<span class="op" id="4581105">:=</span>&nbsp;<span class="keyword" id="4581108">range</span>&nbsp;<span class="ident" id="4581114"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581115">.</span><span class="ident" id="4581116">offsetFreq</span>&nbsp;<span class="op" id="4581127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581131"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581132">.</span><span class="ident" id="4581133">offsetFreq</span><span class="op" id="4581143">[</span><span class="ident" id="4581144"><a href="/compress/flate/huffman_bit_writer.go.html#4581103">i</a></span><span class="op" id="4581145">]</span>&nbsp;<span class="op" id="4581147">=</span>&nbsp;<span class="num" id="4581149">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581152">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581156">n</span>&nbsp;<span class="op" id="4581158">:=</span>&nbsp;<span class="builtinfunc" id="4581161">len</span><span class="op" id="4581164">(</span><span class="ident" id="4581165"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span><span class="op" id="4581171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581174"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span>&nbsp;<span class="op" id="4581181">=</span>&nbsp;<span class="ident" id="4581183"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span><span class="op" id="4581189">[</span><span class="num" id="4581190">0</span>&nbsp;<span class="op" id="4581192">:</span>&nbsp;<span class="ident" id="4581194"><a href="/compress/flate/huffman_bit_writer.go.html#4581156">n</a></span><span class="op" id="4581195">+</span><span class="num" id="4581196">1</span><span class="op" id="4581197">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581200"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span><span class="op" id="4581206">[</span><span class="ident" id="4581207"><a href="/compress/flate/huffman_bit_writer.go.html#4581156">n</a></span><span class="op" id="4581208">]</span>&nbsp;<span class="op" id="4581210">=</span>&nbsp;<span class="ident" id="4581212"><a href="/compress/flate/huffman_bit_writer.go.html#4572398">endBlockMarker</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581229">for</span>&nbsp;<span class="ident" id="4581233">_</span><span class="op" id="4581234">,</span>&nbsp;<span class="ident" id="4581236">t</span>&nbsp;<span class="op" id="4581238">:=</span>&nbsp;<span class="keyword" id="4581241">range</span>&nbsp;<span class="ident" id="4581247"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span>&nbsp;<span class="op" id="4581254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581258">switch</span>&nbsp;<span class="ident" id="4581265"><a href="/compress/flate/huffman_bit_writer.go.html#4581236">t</a></span><span class="op" id="4581266">.</span><span class="ident" id="4581267">typ</span><span class="op" id="4581270">(</span><span class="op" id="4581271">)</span>&nbsp;<span class="op" id="4581273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581277">case</span>&nbsp;<span class="ident" id="4581282"><a href="/compress/flate/token.go.html#4614017">literalType</a></span><span class="op" id="4581293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581298"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581299">.</span><span class="ident" id="4581300">literalFreq</span><span class="op" id="4581311">[</span><span class="ident" id="4581312"><a href="/compress/flate/huffman_bit_writer.go.html#4581236">t</a></span><span class="op" id="4581313">.</span><span class="ident" id="4581314">literal</span><span class="op" id="4581321">(</span><span class="op" id="4581322">)</span><span class="op" id="4581323">]</span><span class="op" id="4581324">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581329">case</span>&nbsp;<span class="ident" id="4581334"><a href="/compress/flate/token.go.html#4614040">matchType</a></span><span class="op" id="4581343">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581348">length</span>&nbsp;<span class="op" id="4581355">:=</span>&nbsp;<span class="ident" id="4581358"><a href="/compress/flate/huffman_bit_writer.go.html#4581236">t</a></span><span class="op" id="4581359">.</span><span class="ident" id="4581360">length</span><span class="op" id="4581366">(</span><span class="op" id="4581367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581372">offset</span>&nbsp;<span class="op" id="4581379">:=</span>&nbsp;<span class="ident" id="4581382"><a href="/compress/flate/huffman_bit_writer.go.html#4581236">t</a></span><span class="op" id="4581383">.</span><span class="ident" id="4581384">offset</span><span class="op" id="4581390">(</span><span class="op" id="4581391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581396"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581397">.</span><span class="ident" id="4581398">literalFreq</span><span class="op" id="4581409">[</span><span class="ident" id="4581410"><a href="/compress/flate/huffman_bit_writer.go.html#4572448">lengthCodesStart</a></span><span class="op" id="4581426">+</span><span class="ident" id="4581427"><a href="/compress/flate/token.go.html#4617019">lengthCode</a></span><span class="op" id="4581437">(</span><span class="ident" id="4581438"><a href="/compress/flate/huffman_bit_writer.go.html#4581348">length</a></span><span class="op" id="4581444">)</span><span class="op" id="4581445">]</span><span class="op" id="4581446">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581452"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581453">.</span><span class="ident" id="4581454">offsetFreq</span><span class="op" id="4581464">[</span><span class="ident" id="4581465"><a href="/compress/flate/token.go.html#4617145">offsetCode</a></span><span class="op" id="4581475">(</span><span class="ident" id="4581476"><a href="/compress/flate/huffman_bit_writer.go.html#4581372">offset</a></span><span class="op" id="4581482">)</span><span class="op" id="4581483">]</span><span class="op" id="4581484">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581489">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581492">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4581496">//&nbsp;get&nbsp;the&nbsp;number&nbsp;of&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581527">numLiterals</span>&nbsp;<span class="op" id="4581539">:=</span>&nbsp;<span class="builtinfunc" id="4581542">len</span><span class="op" id="4581545">(</span><span class="ident" id="4581546"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581547">.</span><span class="ident" id="4581548">literalFreq</span><span class="op" id="4581559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581562">for</span>&nbsp;<span class="ident" id="4581566"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581567">.</span><span class="ident" id="4581568">literalFreq</span><span class="op" id="4581579">[</span><span class="ident" id="4581580"><a href="/compress/flate/huffman_bit_writer.go.html#4581527">numLiterals</a></span><span class="op" id="4581591">-</span><span class="num" id="4581592">1</span><span class="op" id="4581593">]</span>&nbsp;<span class="op" id="4581595">==</span>&nbsp;<span class="num" id="4581598">0</span>&nbsp;<span class="op" id="4581600">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581604"><a href="/compress/flate/huffman_bit_writer.go.html#4581527">numLiterals</a></span><span class="op" id="4581615">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4581622">//&nbsp;get&nbsp;the&nbsp;number&nbsp;of&nbsp;offsets</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581652">numOffsets</span>&nbsp;<span class="op" id="4581663">:=</span>&nbsp;<span class="builtinfunc" id="4581666">len</span><span class="op" id="4581669">(</span><span class="ident" id="4581670"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581671">.</span><span class="ident" id="4581672">offsetFreq</span><span class="op" id="4581682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581685">for</span>&nbsp;<span class="ident" id="4581689"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span>&nbsp;<span class="op" id="4581700">&gt;</span>&nbsp;<span class="num" id="4581702">0</span>&nbsp;<span class="op" id="4581704">&amp;&amp;</span>&nbsp;<span class="ident" id="4581707"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581708">.</span><span class="ident" id="4581709">offsetFreq</span><span class="op" id="4581719">[</span><span class="ident" id="4581720"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span><span class="op" id="4581730">-</span><span class="num" id="4581731">1</span><span class="op" id="4581732">]</span>&nbsp;<span class="op" id="4581734">==</span>&nbsp;<span class="num" id="4581737">0</span>&nbsp;<span class="op" id="4581739">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581743"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span><span class="op" id="4581753">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4581757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4581760">if</span>&nbsp;<span class="ident" id="4581763"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span>&nbsp;<span class="op" id="4581774">==</span>&nbsp;<span class="num" id="4581777">0</span>&nbsp;<span class="op" id="4581779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4581783">//&nbsp;We&nbsp;haven&#39;t&nbsp;found&nbsp;a&nbsp;single&nbsp;match.&nbsp;If&nbsp;we&nbsp;want&nbsp;to&nbsp;go&nbsp;with&nbsp;the&nbsp;dynamic&nbsp;encoding,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4581865">//&nbsp;we&nbsp;should&nbsp;count&nbsp;at&nbsp;least&nbsp;one&nbsp;offset&nbsp;to&nbsp;be&nbsp;sure&nbsp;that&nbsp;the&nbsp;offset&nbsp;huffman&nbsp;tree&nbsp;could&nbsp;be&nbsp;encoded.</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581964"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4581965">.</span><span class="ident" id="4581966">offsetFreq</span><span class="op" id="4581976">[</span><span class="num" id="4581977">0</span><span class="op" id="4581978">]</span>&nbsp;<span class="op" id="4581980">=</span>&nbsp;<span class="num" id="4581982">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4581986"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span>&nbsp;<span class="op" id="4581997">=</span>&nbsp;<span class="num" id="4581999">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582002">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582006"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582007">.</span><span class="ident" id="4582008">literalEncoding</span><span class="op" id="4582023">.</span><span class="ident" id="4582024">generate</span><span class="op" id="4582032">(</span><span class="ident" id="4582033"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582034">.</span><span class="ident" id="4582035">literalFreq</span><span class="op" id="4582046">,</span>&nbsp;<span class="num" id="4582048">15</span><span class="op" id="4582050">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582053"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582054">.</span><span class="ident" id="4582055">offsetEncoding</span><span class="op" id="4582069">.</span><span class="ident" id="4582070">generate</span><span class="op" id="4582078">(</span><span class="ident" id="4582079"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582080">.</span><span class="ident" id="4582081">offsetFreq</span><span class="op" id="4582091">,</span>&nbsp;<span class="num" id="4582093">15</span><span class="op" id="4582095">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582099">storedBytes</span>&nbsp;<span class="op" id="4582111">:=</span>&nbsp;<span class="num" id="4582114">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582117">if</span>&nbsp;<span class="ident" id="4582120"><a href="/compress/flate/huffman_bit_writer.go.html#4580993">input</a></span>&nbsp;<span class="op" id="4582126">!=</span>&nbsp;<span class="ident" id="4582129">nil</span>&nbsp;<span class="op" id="4582133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582137"><a href="/compress/flate/huffman_bit_writer.go.html#4582099">storedBytes</a></span>&nbsp;<span class="op" id="4582149">=</span>&nbsp;<span class="builtinfunc" id="4582151">len</span><span class="op" id="4582154">(</span><span class="ident" id="4582155"><a href="/compress/flate/huffman_bit_writer.go.html#4580993">input</a></span><span class="op" id="4582160">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582166">var</span>&nbsp;<span class="ident" id="4582170">extraBits</span>&nbsp;<span class="ident" id="4582180">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582187">var</span>&nbsp;<span class="ident" id="4582191">storedSize</span>&nbsp;<span class="ident" id="4582202">int64</span>&nbsp;<span class="op" id="4582208">=</span>&nbsp;<span class="ident" id="4582210"><a href="/compress/flate/huffman_bit_writer.go.html#4572273">math</a></span><span class="op" id="4582214">.</span><span class="ident" id="4582215">MaxInt64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582225">if</span>&nbsp;<span class="ident" id="4582228"><a href="/compress/flate/huffman_bit_writer.go.html#4582099">storedBytes</a></span>&nbsp;<span class="op" id="4582240">&lt;=</span>&nbsp;<span class="ident" id="4582243"><a href="/compress/flate/deflate.go.html#4553076">maxStoreBlockSize</a></span>&nbsp;<span class="op" id="4582261">&amp;&amp;</span>&nbsp;<span class="ident" id="4582264"><a href="/compress/flate/huffman_bit_writer.go.html#4580993">input</a></span>&nbsp;<span class="op" id="4582270">!=</span>&nbsp;<span class="ident" id="4582273">nil</span>&nbsp;<span class="op" id="4582277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582281"><a href="/compress/flate/huffman_bit_writer.go.html#4582191">storedSize</a></span>&nbsp;<span class="op" id="4582292">=</span>&nbsp;<span class="ident" id="4582294">int64</span><span class="op" id="4582299">(</span><span class="op" id="4582300">(</span><span class="ident" id="4582301"><a href="/compress/flate/huffman_bit_writer.go.html#4582099">storedBytes</a></span>&nbsp;<span class="op" id="4582313">+</span>&nbsp;<span class="num" id="4582315">5</span><span class="op" id="4582316">)</span>&nbsp;<span class="op" id="4582318">*</span>&nbsp;<span class="num" id="4582320">8</span><span class="op" id="4582321">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582325">//&nbsp;We&nbsp;only&nbsp;bother&nbsp;calculating&nbsp;the&nbsp;costs&nbsp;of&nbsp;the&nbsp;extra&nbsp;bits&nbsp;required&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582397">//&nbsp;the&nbsp;length&nbsp;of&nbsp;offset&nbsp;fields&nbsp;(which&nbsp;will&nbsp;be&nbsp;the&nbsp;same&nbsp;for&nbsp;both&nbsp;fixed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582469">//&nbsp;and&nbsp;dynamic&nbsp;encoding),&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;compare&nbsp;those&nbsp;two&nbsp;encodings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582539">//&nbsp;against&nbsp;stored&nbsp;encoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582569">for</span>&nbsp;<span class="ident" id="4582573">lengthCode</span>&nbsp;<span class="op" id="4582584">:=</span>&nbsp;<span class="ident" id="4582587"><a href="/compress/flate/huffman_bit_writer.go.html#4572448">lengthCodesStart</a></span>&nbsp;<span class="op" id="4582604">+</span>&nbsp;<span class="num" id="4582606">8</span><span class="op" id="4582607">;</span>&nbsp;<span class="ident" id="4582609"><a href="/compress/flate/huffman_bit_writer.go.html#4582573">lengthCode</a></span>&nbsp;<span class="op" id="4582620">&lt;</span>&nbsp;<span class="ident" id="4582622"><a href="/compress/flate/huffman_bit_writer.go.html#4581527">numLiterals</a></span><span class="op" id="4582633">;</span>&nbsp;<span class="ident" id="4582635"><a href="/compress/flate/huffman_bit_writer.go.html#4582573">lengthCode</a></span><span class="op" id="4582645">++</span>&nbsp;<span class="op" id="4582648">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582653">//&nbsp;First&nbsp;eight&nbsp;length&nbsp;codes&nbsp;have&nbsp;extra&nbsp;size&nbsp;=&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582705"><a href="/compress/flate/huffman_bit_writer.go.html#4582170">extraBits</a></span>&nbsp;<span class="op" id="4582715">+=</span>&nbsp;<span class="ident" id="4582718">int64</span><span class="op" id="4582723">(</span><span class="ident" id="4582724"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582725">.</span><span class="ident" id="4582726">literalFreq</span><span class="op" id="4582737">[</span><span class="ident" id="4582738"><a href="/compress/flate/huffman_bit_writer.go.html#4582573">lengthCode</a></span><span class="op" id="4582748">]</span><span class="op" id="4582749">)</span>&nbsp;<span class="op" id="4582751">*</span>&nbsp;<span class="ident" id="4582753">int64</span><span class="op" id="4582758">(</span><span class="ident" id="4582759"><a href="/compress/flate/huffman_bit_writer.go.html#4572633">lengthExtraBits</a></span><span class="op" id="4582774">[</span><span class="ident" id="4582775"><a href="/compress/flate/huffman_bit_writer.go.html#4582573">lengthCode</a></span><span class="op" id="4582785">-</span><span class="ident" id="4582786"><a href="/compress/flate/huffman_bit_writer.go.html#4572448">lengthCodesStart</a></span><span class="op" id="4582802">]</span><span class="op" id="4582803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4582807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4582811">for</span>&nbsp;<span class="ident" id="4582815">offsetCode</span>&nbsp;<span class="op" id="4582826">:=</span>&nbsp;<span class="num" id="4582829">4</span><span class="op" id="4582830">;</span>&nbsp;<span class="ident" id="4582832"><a href="/compress/flate/huffman_bit_writer.go.html#4582815">offsetCode</a></span>&nbsp;<span class="op" id="4582843">&lt;</span>&nbsp;<span class="ident" id="4582845"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span><span class="op" id="4582855">;</span>&nbsp;<span class="ident" id="4582857"><a href="/compress/flate/huffman_bit_writer.go.html#4582815">offsetCode</a></span><span class="op" id="4582867">++</span>&nbsp;<span class="op" id="4582870">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4582875">//&nbsp;First&nbsp;four&nbsp;offset&nbsp;codes&nbsp;have&nbsp;extra&nbsp;size&nbsp;=&nbsp;0.</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4582926"><a href="/compress/flate/huffman_bit_writer.go.html#4582170">extraBits</a></span>&nbsp;<span class="op" id="4582936">+=</span>&nbsp;<span class="ident" id="4582939">int64</span><span class="op" id="4582944">(</span><span class="ident" id="4582945"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4582946">.</span><span class="ident" id="4582947">offsetFreq</span><span class="op" id="4582957">[</span><span class="ident" id="4582958"><a href="/compress/flate/huffman_bit_writer.go.html#4582815">offsetCode</a></span><span class="op" id="4582968">]</span><span class="op" id="4582969">)</span>&nbsp;<span class="op" id="4582971">*</span>&nbsp;<span class="ident" id="4582973">int64</span><span class="op" id="4582978">(</span><span class="ident" id="4582979"><a href="/compress/flate/huffman_bit_writer.go.html#4573038">offsetExtraBits</a></span><span class="op" id="4582994">[</span><span class="ident" id="4582995"><a href="/compress/flate/huffman_bit_writer.go.html#4582815">offsetCode</a></span><span class="op" id="4583005">]</span><span class="op" id="4583006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4583017">//&nbsp;Figure&nbsp;out&nbsp;smallest&nbsp;code.</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4583047">//&nbsp;Fixed&nbsp;Huffman&nbsp;baseline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583075">var</span>&nbsp;<span class="ident" id="4583079">size</span>&nbsp;<span class="op" id="4583084">=</span>&nbsp;<span class="ident" id="4583086">int64</span><span class="op" id="4583091">(</span><span class="num" id="4583092">3</span><span class="op" id="4583093">)</span>&nbsp;<span class="op" id="4583095">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583099"><a href="/compress/flate/huffman_code.go.html#4587382">fixedLiteralEncoding</a></span><span class="op" id="4583119">.</span><span class="ident" id="4583120">bitLength</span><span class="op" id="4583129">(</span><span class="ident" id="4583130"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583131">.</span><span class="ident" id="4583132">literalFreq</span><span class="op" id="4583143">)</span>&nbsp;<span class="op" id="4583145">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583149"><a href="/compress/flate/huffman_code.go.html#4587456">fixedOffsetEncoding</a></span><span class="op" id="4583168">.</span><span class="ident" id="4583169">bitLength</span><span class="op" id="4583178">(</span><span class="ident" id="4583179"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583180">.</span><span class="ident" id="4583181">offsetFreq</span><span class="op" id="4583191">)</span>&nbsp;<span class="op" id="4583193">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583197"><a href="/compress/flate/huffman_bit_writer.go.html#4582170">extraBits</a></span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583208">var</span>&nbsp;<span class="ident" id="4583212">literalEncoding</span>&nbsp;<span class="op" id="4583228">=</span>&nbsp;<span class="ident" id="4583230"><a href="/compress/flate/huffman_code.go.html#4587382">fixedLiteralEncoding</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583252">var</span>&nbsp;<span class="ident" id="4583256">offsetEncoding</span>&nbsp;<span class="op" id="4583271">=</span>&nbsp;<span class="ident" id="4583273"><a href="/compress/flate/huffman_code.go.html#4587456">fixedOffsetEncoding</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4583295">//&nbsp;Dynamic&nbsp;Huffman?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583316">var</span>&nbsp;<span class="ident" id="4583320">numCodegens</span>&nbsp;<span class="builtintype" id="4583332">int</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4583338">//&nbsp;Generate&nbsp;codegen&nbsp;and&nbsp;codegenFrequencies,&nbsp;which&nbsp;indicates&nbsp;how&nbsp;to&nbsp;encode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4583413">//&nbsp;the&nbsp;literalEncoding&nbsp;and&nbsp;the&nbsp;offsetEncoding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583461"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583462">.</span><span class="ident" id="4583463">generateCodegen</span><span class="op" id="4583478">(</span><span class="ident" id="4583479"><a href="/compress/flate/huffman_bit_writer.go.html#4581527">numLiterals</a></span><span class="op" id="4583490">,</span>&nbsp;<span class="ident" id="4583492"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span><span class="op" id="4583502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583505"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583506">.</span><span class="ident" id="4583507">codegenEncoding</span><span class="op" id="4583522">.</span><span class="ident" id="4583523">generate</span><span class="op" id="4583531">(</span><span class="ident" id="4583532"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583533">.</span><span class="ident" id="4583534">codegenFreq</span><span class="op" id="4583545">,</span>&nbsp;<span class="num" id="4583547">7</span><span class="op" id="4583548">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583551"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span>&nbsp;<span class="op" id="4583563">=</span>&nbsp;<span class="builtinfunc" id="4583565">len</span><span class="op" id="4583568">(</span><span class="ident" id="4583569"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583570">.</span><span class="ident" id="4583571">codegenFreq</span><span class="op" id="4583582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4583585">for</span>&nbsp;<span class="ident" id="4583589"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span>&nbsp;<span class="op" id="4583601">&gt;</span>&nbsp;<span class="num" id="4583603">4</span>&nbsp;<span class="op" id="4583605">&amp;&amp;</span>&nbsp;<span class="ident" id="4583608"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583609">.</span><span class="ident" id="4583610">codegenFreq</span><span class="op" id="4583621">[</span><span class="ident" id="4583622"><a href="/compress/flate/huffman_bit_writer.go.html#4573839">codegenOrder</a></span><span class="op" id="4583634">[</span><span class="ident" id="4583635"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span><span class="op" id="4583646">-</span><span class="num" id="4583647">1</span><span class="op" id="4583648">]</span><span class="op" id="4583649">]</span>&nbsp;<span class="op" id="4583651">==</span>&nbsp;<span class="num" id="4583654">0</span>&nbsp;<span class="op" id="4583656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583660"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span><span class="op" id="4583671">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4583675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583678">dynamicHeader</span>&nbsp;<span class="op" id="4583692">:=</span>&nbsp;<span class="ident" id="4583695">int64</span><span class="op" id="4583700">(</span><span class="num" id="4583701">3</span><span class="op" id="4583702">+</span><span class="num" id="4583703">5</span><span class="op" id="4583704">+</span><span class="num" id="4583705">5</span><span class="op" id="4583706">+</span><span class="num" id="4583707">4</span><span class="op" id="4583708">+</span><span class="op" id="4583709">(</span><span class="num" id="4583710">3</span><span class="op" id="4583711">*</span><span class="ident" id="4583712"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span><span class="op" id="4583723">)</span><span class="op" id="4583724">)</span>&nbsp;<span class="op" id="4583726">+</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583730"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583731">.</span><span class="ident" id="4583732">codegenEncoding</span><span class="op" id="4583747">.</span><span class="ident" id="4583748">bitLength</span><span class="op" id="4583757">(</span><span class="ident" id="4583758"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583759">.</span><span class="ident" id="4583760">codegenFreq</span><span class="op" id="4583771">)</span>&nbsp;<span class="op" id="4583773">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583777">int64</span><span class="op" id="4583782">(</span><span class="ident" id="4583783"><a href="/compress/flate/huffman_bit_writer.go.html#4582170">extraBits</a></span><span class="op" id="4583792">)</span>&nbsp;<span class="op" id="4583794">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583798">int64</span><span class="op" id="4583803">(</span><span class="ident" id="4583804"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583805">.</span><span class="ident" id="4583806">codegenFreq</span><span class="op" id="4583817">[</span><span class="num" id="4583818">16</span><span class="op" id="4583820">]</span><span class="op" id="4583821">*</span><span class="num" id="4583822">2</span><span class="op" id="4583823">)</span>&nbsp;<span class="op" id="4583825">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583829">int64</span><span class="op" id="4583834">(</span><span class="ident" id="4583835"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583836">.</span><span class="ident" id="4583837">codegenFreq</span><span class="op" id="4583848">[</span><span class="num" id="4583849">17</span><span class="op" id="4583851">]</span><span class="op" id="4583852">*</span><span class="num" id="4583853">3</span><span class="op" id="4583854">)</span>&nbsp;<span class="op" id="4583856">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583860">int64</span><span class="op" id="4583865">(</span><span class="ident" id="4583866"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583867">.</span><span class="ident" id="4583868">codegenFreq</span><span class="op" id="4583879">[</span><span class="num" id="4583880">18</span><span class="op" id="4583882">]</span><span class="op" id="4583883">*</span><span class="num" id="4583884">7</span><span class="op" id="4583885">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583888">dynamicSize</span>&nbsp;<span class="op" id="4583900">:=</span>&nbsp;<span class="ident" id="4583903"><a href="/compress/flate/huffman_bit_writer.go.html#4583678">dynamicHeader</a></span>&nbsp;<span class="op" id="4583917">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583921"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583922">.</span><span class="ident" id="4583923">literalEncoding</span><span class="op" id="4583938">.</span><span class="ident" id="4583939">bitLength</span><span class="op" id="4583948">(</span><span class="ident" id="4583949"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583950">.</span><span class="ident" id="4583951">literalFreq</span><span class="op" id="4583962">)</span>&nbsp;<span class="op" id="4583964">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4583968"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583969">.</span><span class="ident" id="4583970">offsetEncoding</span><span class="op" id="4583984">.</span><span class="ident" id="4583985">bitLength</span><span class="op" id="4583994">(</span><span class="ident" id="4583995"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4583996">.</span><span class="ident" id="4583997">offsetFreq</span><span class="op" id="4584007">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584011">if</span>&nbsp;<span class="ident" id="4584014"><a href="/compress/flate/huffman_bit_writer.go.html#4583888">dynamicSize</a></span>&nbsp;<span class="op" id="4584026">&lt;</span>&nbsp;<span class="ident" id="4584028"><a href="/compress/flate/huffman_bit_writer.go.html#4583079">size</a></span>&nbsp;<span class="op" id="4584033">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584037"><a href="/compress/flate/huffman_bit_writer.go.html#4583079">size</a></span>&nbsp;<span class="op" id="4584042">=</span>&nbsp;<span class="ident" id="4584044"><a href="/compress/flate/huffman_bit_writer.go.html#4583888">dynamicSize</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584058"><a href="/compress/flate/huffman_bit_writer.go.html#4583212">literalEncoding</a></span>&nbsp;<span class="op" id="4584074">=</span>&nbsp;<span class="ident" id="4584076"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584077">.</span><span class="ident" id="4584078">literalEncoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584096"><a href="/compress/flate/huffman_bit_writer.go.html#4583256">offsetEncoding</a></span>&nbsp;<span class="op" id="4584111">=</span>&nbsp;<span class="ident" id="4584113"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584114">.</span><span class="ident" id="4584115">offsetEncoding</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4584135">//&nbsp;Stored&nbsp;bytes?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584153">if</span>&nbsp;<span class="ident" id="4584156"><a href="/compress/flate/huffman_bit_writer.go.html#4582191">storedSize</a></span>&nbsp;<span class="op" id="4584167">&lt;</span>&nbsp;<span class="ident" id="4584169"><a href="/compress/flate/huffman_bit_writer.go.html#4583079">size</a></span>&nbsp;<span class="op" id="4584174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584178"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584179">.</span><span class="ident" id="4584180">writeStoredHeader</span><span class="op" id="4584197">(</span><span class="ident" id="4584198"><a href="/compress/flate/huffman_bit_writer.go.html#4582099">storedBytes</a></span><span class="op" id="4584209">,</span>&nbsp;<span class="ident" id="4584211"><a href="/compress/flate/huffman_bit_writer.go.html#4580983">eof</a></span><span class="op" id="4584214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584218"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584219">.</span><span class="ident" id="4584220">writeBytes</span><span class="op" id="4584230">(</span><span class="ident" id="4584231"><a href="/compress/flate/huffman_bit_writer.go.html#4580993">input</a></span><span class="op" id="4584236">[</span><span class="num" id="4584237">0</span><span class="op" id="4584238">:</span><span class="ident" id="4584239"><a href="/compress/flate/huffman_bit_writer.go.html#4582099">storedBytes</a></span><span class="op" id="4584250">]</span><span class="op" id="4584251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584255">return</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584263">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4584267">//&nbsp;Huffman.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584280">if</span>&nbsp;<span class="ident" id="4584283"><a href="/compress/flate/huffman_bit_writer.go.html#4583212">literalEncoding</a></span>&nbsp;<span class="op" id="4584299">==</span>&nbsp;<span class="ident" id="4584302"><a href="/compress/flate/huffman_code.go.html#4587382">fixedLiteralEncoding</a></span>&nbsp;<span class="op" id="4584323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584327"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584328">.</span><span class="ident" id="4584329">writeFixedHeader</span><span class="op" id="4584345">(</span><span class="ident" id="4584346"><a href="/compress/flate/huffman_bit_writer.go.html#4580983">eof</a></span><span class="op" id="4584349">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584352">}</span>&nbsp;<span class="keyword" id="4584354">else</span>&nbsp;<span class="op" id="4584359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584363"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584364">.</span><span class="ident" id="4584365">writeDynamicHeader</span><span class="op" id="4584383">(</span><span class="ident" id="4584384"><a href="/compress/flate/huffman_bit_writer.go.html#4581527">numLiterals</a></span><span class="op" id="4584395">,</span>&nbsp;<span class="ident" id="4584397"><a href="/compress/flate/huffman_bit_writer.go.html#4581652">numOffsets</a></span><span class="op" id="4584407">,</span>&nbsp;<span class="ident" id="4584409"><a href="/compress/flate/huffman_bit_writer.go.html#4583320">numCodegens</a></span><span class="op" id="4584420">,</span>&nbsp;<span class="ident" id="4584422"><a href="/compress/flate/huffman_bit_writer.go.html#4580983">eof</a></span><span class="op" id="4584425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584431">for</span>&nbsp;<span class="ident" id="4584435">_</span><span class="op" id="4584436">,</span>&nbsp;<span class="ident" id="4584438">t</span>&nbsp;<span class="op" id="4584440">:=</span>&nbsp;<span class="keyword" id="4584443">range</span>&nbsp;<span class="ident" id="4584449"><a href="/compress/flate/huffman_bit_writer.go.html#4580967">tokens</a></span>&nbsp;<span class="op" id="4584456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584460">switch</span>&nbsp;<span class="ident" id="4584467"><a href="/compress/flate/huffman_bit_writer.go.html#4584438">t</a></span><span class="op" id="4584468">.</span><span class="ident" id="4584469">typ</span><span class="op" id="4584472">(</span><span class="op" id="4584473">)</span>&nbsp;<span class="op" id="4584475">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584479">case</span>&nbsp;<span class="ident" id="4584484"><a href="/compress/flate/token.go.html#4614017">literalType</a></span><span class="op" id="4584495">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584500"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584501">.</span><span class="ident" id="4584502">writeCode</span><span class="op" id="4584511">(</span><span class="ident" id="4584512"><a href="/compress/flate/huffman_bit_writer.go.html#4583212">literalEncoding</a></span><span class="op" id="4584527">,</span>&nbsp;<span class="ident" id="4584529"><a href="/compress/flate/huffman_bit_writer.go.html#4584438">t</a></span><span class="op" id="4584530">.</span><span class="ident" id="4584531">literal</span><span class="op" id="4584538">(</span><span class="op" id="4584539">)</span><span class="op" id="4584540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584545">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584553">case</span>&nbsp;<span class="ident" id="4584558"><a href="/compress/flate/token.go.html#4614040">matchType</a></span><span class="op" id="4584567">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4584572">//&nbsp;Write&nbsp;the&nbsp;length</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584595">length</span>&nbsp;<span class="op" id="4584602">:=</span>&nbsp;<span class="ident" id="4584605"><a href="/compress/flate/huffman_bit_writer.go.html#4584438">t</a></span><span class="op" id="4584606">.</span><span class="ident" id="4584607">length</span><span class="op" id="4584613">(</span><span class="op" id="4584614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584619">lengthCode</span>&nbsp;<span class="op" id="4584630">:=</span>&nbsp;<span class="ident" id="4584633"><a href="/compress/flate/token.go.html#4617019">lengthCode</a></span><span class="op" id="4584643">(</span><span class="ident" id="4584644"><a href="/compress/flate/huffman_bit_writer.go.html#4584595">length</a></span><span class="op" id="4584650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584655"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584656">.</span><span class="ident" id="4584657">writeCode</span><span class="op" id="4584666">(</span><span class="ident" id="4584667"><a href="/compress/flate/huffman_bit_writer.go.html#4583212">literalEncoding</a></span><span class="op" id="4584682">,</span>&nbsp;<span class="ident" id="4584684"><a href="/compress/flate/huffman_bit_writer.go.html#4584619">lengthCode</a></span><span class="op" id="4584694">+</span><span class="ident" id="4584695"><a href="/compress/flate/huffman_bit_writer.go.html#4572448">lengthCodesStart</a></span><span class="op" id="4584711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584716">extraLengthBits</span>&nbsp;<span class="op" id="4584732">:=</span>&nbsp;<span class="builtintype" id="4584735">int32</span><span class="op" id="4584740">(</span><span class="ident" id="4584741"><a href="/compress/flate/huffman_bit_writer.go.html#4572633">lengthExtraBits</a></span><span class="op" id="4584756">[</span><span class="ident" id="4584757"><a href="/compress/flate/huffman_bit_writer.go.html#4584619">lengthCode</a></span><span class="op" id="4584767">]</span><span class="op" id="4584768">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4584773">if</span>&nbsp;<span class="ident" id="4584776"><a href="/compress/flate/huffman_bit_writer.go.html#4584716">extraLengthBits</a></span>&nbsp;<span class="op" id="4584792">&gt;</span>&nbsp;<span class="num" id="4584794">0</span>&nbsp;<span class="op" id="4584796">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584802">extraLength</span>&nbsp;<span class="op" id="4584814">:=</span>&nbsp;<span class="builtintype" id="4584817">int32</span><span class="op" id="4584822">(</span><span class="ident" id="4584823"><a href="/compress/flate/huffman_bit_writer.go.html#4584595">length</a></span>&nbsp;<span class="op" id="4584830">-</span>&nbsp;<span class="ident" id="4584832"><a href="/compress/flate/huffman_bit_writer.go.html#4572860">lengthBase</a></span><span class="op" id="4584842">[</span><span class="ident" id="4584843"><a href="/compress/flate/huffman_bit_writer.go.html#4584619">lengthCode</a></span><span class="op" id="4584853">]</span><span class="op" id="4584854">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584860"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584861">.</span><span class="ident" id="4584862">writeBits</span><span class="op" id="4584871">(</span><span class="ident" id="4584872"><a href="/compress/flate/huffman_bit_writer.go.html#4584802">extraLength</a></span><span class="op" id="4584883">,</span>&nbsp;<span class="ident" id="4584885"><a href="/compress/flate/huffman_bit_writer.go.html#4584716">extraLengthBits</a></span><span class="op" id="4584900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4584905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4584910">//&nbsp;Write&nbsp;the&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584933">offset</span>&nbsp;<span class="op" id="4584940">:=</span>&nbsp;<span class="ident" id="4584943"><a href="/compress/flate/huffman_bit_writer.go.html#4584438">t</a></span><span class="op" id="4584944">.</span><span class="ident" id="4584945">offset</span><span class="op" id="4584951">(</span><span class="op" id="4584952">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584957">offsetCode</span>&nbsp;<span class="op" id="4584968">:=</span>&nbsp;<span class="ident" id="4584971"><a href="/compress/flate/token.go.html#4617145">offsetCode</a></span><span class="op" id="4584981">(</span><span class="ident" id="4584982"><a href="/compress/flate/huffman_bit_writer.go.html#4584933">offset</a></span><span class="op" id="4584988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4584993"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4584994">.</span><span class="ident" id="4584995">writeCode</span><span class="op" id="4585004">(</span><span class="ident" id="4585005"><a href="/compress/flate/huffman_bit_writer.go.html#4583256">offsetEncoding</a></span><span class="op" id="4585019">,</span>&nbsp;<span class="ident" id="4585021"><a href="/compress/flate/huffman_bit_writer.go.html#4584957">offsetCode</a></span><span class="op" id="4585031">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585036">extraOffsetBits</span>&nbsp;<span class="op" id="4585052">:=</span>&nbsp;<span class="builtintype" id="4585055">int32</span><span class="op" id="4585060">(</span><span class="ident" id="4585061"><a href="/compress/flate/huffman_bit_writer.go.html#4573038">offsetExtraBits</a></span><span class="op" id="4585076">[</span><span class="ident" id="4585077"><a href="/compress/flate/huffman_bit_writer.go.html#4584957">offsetCode</a></span><span class="op" id="4585087">]</span><span class="op" id="4585088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585093">if</span>&nbsp;<span class="ident" id="4585096"><a href="/compress/flate/huffman_bit_writer.go.html#4585036">extraOffsetBits</a></span>&nbsp;<span class="op" id="4585112">&gt;</span>&nbsp;<span class="num" id="4585114">0</span>&nbsp;<span class="op" id="4585116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585122">extraOffset</span>&nbsp;<span class="op" id="4585134">:=</span>&nbsp;<span class="builtintype" id="4585137">int32</span><span class="op" id="4585142">(</span><span class="ident" id="4585143"><a href="/compress/flate/huffman_bit_writer.go.html#4584933">offset</a></span>&nbsp;<span class="op" id="4585150">-</span>&nbsp;<span class="ident" id="4585152"><a href="/compress/flate/huffman_bit_writer.go.html#4573252">offsetBase</a></span><span class="op" id="4585162">[</span><span class="ident" id="4585163"><a href="/compress/flate/huffman_bit_writer.go.html#4584957">offsetCode</a></span><span class="op" id="4585173">]</span><span class="op" id="4585174">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4585180"><a href="/compress/flate/huffman_bit_writer.go.html#4580935">w</a></span><span class="op" id="4585181">.</span><span class="ident" id="4585182">writeBits</span><span class="op" id="4585191">(</span><span class="ident" id="4585192"><a href="/compress/flate/huffman_bit_writer.go.html#4585122">extraOffset</a></span><span class="op" id="4585203">,</span>&nbsp;<span class="ident" id="4585205"><a href="/compress/flate/huffman_bit_writer.go.html#4585036">extraOffsetBits</a></span><span class="op" id="4585220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585225">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585230">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4585238">default</span><span class="op" id="4585245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4585250">panic</span><span class="op" id="4585255">(</span><span class="string" id="4585256">&#34;unknown&nbsp;token&nbsp;type:&nbsp;&#34;</span>&nbsp;<span class="op" id="4585279">+</span>&nbsp;<span class="builtintype" id="4585281">string</span><span class="op" id="4585287">(</span><span class="ident" id="4585288"><a href="/compress/flate/huffman_bit_writer.go.html#4584438">t</a></span><span class="op" id="4585289">)</span><span class="op" id="4585290">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585294">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4585297">}</span><br>
<span class="lineno"></span><span class="op" id="4585299">}</span>
</div>
</body>
</html>
