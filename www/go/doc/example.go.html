<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5728573">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5728628">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5728682">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5728733">//&nbsp;Extract&nbsp;example&nbsp;functions&nbsp;from&nbsp;file&nbsp;ASTs.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5728779">package</span>&nbsp;<span class="ident" id="5728787">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5728792">import</span>&nbsp;<span class="op" id="5728799">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728802">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728812">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728824">&#34;path&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728832">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728842">&#34;sort&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728850">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728861">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728872">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5728883">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5728898">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="5728901">//&nbsp;An&nbsp;Example&nbsp;represents&nbsp;an&nbsp;example&nbsp;function&nbsp;found&nbsp;in&nbsp;a&nbsp;source&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5728971">type</span>&nbsp;<span class="ident" id="5728976">Example</span>&nbsp;<span class="keyword" id="5728984">struct</span>&nbsp;<span class="op" id="5728991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5728994">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5729006">string</span>&nbsp;<span class="comment" id="5729013">//&nbsp;name&nbsp;of&nbsp;the&nbsp;item&nbsp;being&nbsp;exemplified</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729052">Doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5729064">string</span>&nbsp;<span class="comment" id="5729071">//&nbsp;example&nbsp;function&nbsp;doc&nbsp;string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729103">Code</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5729115"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5729118">.</span><span class="ident" id="5729119">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729125">Play</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5729137">*</span><span class="ident" id="5729138"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5729141">.</span><span class="ident" id="5729142">File</span>&nbsp;<span class="comment" id="5729147">//&nbsp;a&nbsp;whole&nbsp;program&nbsp;version&nbsp;of&nbsp;the&nbsp;example</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729190">Comments</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5729202">[</span><span class="op" id="5729203">]</span><span class="op" id="5729204">*</span><span class="ident" id="5729205"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5729208">.</span><span class="ident" id="5729209">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729223">Output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5729235">string</span>&nbsp;<span class="comment" id="5729242">//&nbsp;expected&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729262">EmptyOutput</span>&nbsp;<span class="builtintype" id="5729274">bool</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5729281">//&nbsp;expect&nbsp;empty&nbsp;output</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5729305">Order</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5729317">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5729324">//&nbsp;original&nbsp;source&nbsp;code&nbsp;order</span><br>
<span class="lineno"></span><span class="op" id="5729354">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5729357">//&nbsp;Examples&nbsp;returns&nbsp;the&nbsp;examples&nbsp;found&nbsp;in&nbsp;the&nbsp;files,&nbsp;sorted&nbsp;by&nbsp;Name&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5729432">//&nbsp;The&nbsp;Order&nbsp;fields&nbsp;record&nbsp;the&nbsp;order&nbsp;in&nbsp;which&nbsp;the&nbsp;examples&nbsp;were&nbsp;encountered.</span><br>
<span class="lineno">35</span><span class="comment" id="5729509">//</span><br>
<span class="lineno"></span><span class="comment" id="5729512">//&nbsp;Playable&nbsp;Examples&nbsp;must&nbsp;be&nbsp;in&nbsp;a&nbsp;package&nbsp;whose&nbsp;name&nbsp;ends&nbsp;in&nbsp;&#34;_test&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5729582">//&nbsp;An&nbsp;Example&nbsp;is&nbsp;&#34;playable&#34;&nbsp;(the&nbsp;Play&nbsp;field&nbsp;is&nbsp;non-nil)&nbsp;in&nbsp;either&nbsp;of&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="5729657">//&nbsp;circumstances:</span><br>
<span class="lineno"></span><span class="comment" id="5729675">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;example&nbsp;function&nbsp;is&nbsp;self-contained:&nbsp;the&nbsp;function&nbsp;references&nbsp;only</span><br>
<span class="lineno">40</span><span class="comment" id="5729751">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identifiers&nbsp;from&nbsp;other&nbsp;packages&nbsp;(or&nbsp;predeclared&nbsp;identifiers,&nbsp;such&nbsp;as</span><br>
<span class="lineno"></span><span class="comment" id="5729827">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;int&#34;)&nbsp;and&nbsp;the&nbsp;test&nbsp;file&nbsp;does&nbsp;not&nbsp;include&nbsp;a&nbsp;dot&nbsp;import.</span><br>
<span class="lineno"></span><span class="comment" id="5729890">//&nbsp;&nbsp;&nbsp;-&nbsp;The&nbsp;entire&nbsp;test&nbsp;file&nbsp;is&nbsp;the&nbsp;example:&nbsp;the&nbsp;file&nbsp;contains&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5729964">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;function,&nbsp;zero&nbsp;test&nbsp;or&nbsp;benchmark&nbsp;functions,&nbsp;and&nbsp;at&nbsp;least&nbsp;one</span><br>
<span class="lineno"></span><span class="comment" id="5730040">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;top-level&nbsp;function,&nbsp;type,&nbsp;variable,&nbsp;or&nbsp;constant&nbsp;declaration&nbsp;other</span><br>
<span class="lineno">45</span><span class="comment" id="5730113">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;the&nbsp;example&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="5730147">func</span>&nbsp;<span class="ident" id="5730152">Examples</span><span class="op" id="5730160">(</span><span class="ident" id="5730161">files</span>&nbsp;<span class="op" id="5730167">...</span><span class="op" id="5730170">*</span><span class="ident" id="5730171"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5730174">.</span><span class="ident" id="5730175">File</span><span class="op" id="5730179">)</span>&nbsp;<span class="op" id="5730181">[</span><span class="op" id="5730182">]</span><span class="op" id="5730183">*</span><span class="ident" id="5730184"><a href="/go/doc/example.go.html#5728976">Example</a></span>&nbsp;<span class="op" id="5730192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730195">var</span>&nbsp;<span class="ident" id="5730199">list</span>&nbsp;<span class="op" id="5730204">[</span><span class="op" id="5730205">]</span><span class="op" id="5730206">*</span><span class="ident" id="5730207"><a href="/go/doc/example.go.html#5728976">Example</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730216">for</span>&nbsp;<span class="ident" id="5730220">_</span><span class="op" id="5730221">,</span>&nbsp;<span class="ident" id="5730223">file</span>&nbsp;<span class="op" id="5730228">:=</span>&nbsp;<span class="keyword" id="5730231">range</span>&nbsp;<span class="ident" id="5730237"><a href="/go/doc/example.go.html#5730161">files</a></span>&nbsp;<span class="op" id="5730243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730247">hasTests</span>&nbsp;<span class="op" id="5730256">:=</span>&nbsp;<span class="builtintype" id="5730259">false</span>&nbsp;<span class="comment" id="5730265">//&nbsp;file&nbsp;contains&nbsp;tests&nbsp;or&nbsp;benchmarks</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730304">numDecl</span>&nbsp;<span class="op" id="5730312">:=</span>&nbsp;<span class="num" id="5730315">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5730322">//&nbsp;number&nbsp;of&nbsp;non-import&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730373">var</span>&nbsp;<span class="ident" id="5730377">flist</span>&nbsp;<span class="op" id="5730383">[</span><span class="op" id="5730384">]</span><span class="op" id="5730385">*</span><span class="ident" id="5730386"><a href="/go/doc/example.go.html#5728976">Example</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730396">for</span>&nbsp;<span class="ident" id="5730400">_</span><span class="op" id="5730401">,</span>&nbsp;<span class="ident" id="5730403">decl</span>&nbsp;<span class="op" id="5730408">:=</span>&nbsp;<span class="keyword" id="5730411">range</span>&nbsp;<span class="ident" id="5730417"><a href="/go/doc/example.go.html#5730223">file</a></span><span class="op" id="5730421">.</span><span class="ident" id="5730422">Decls</span>&nbsp;<span class="op" id="5730428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730433">if</span>&nbsp;<span class="ident" id="5730436">g</span><span class="op" id="5730437">,</span>&nbsp;<span class="ident" id="5730439">ok</span>&nbsp;<span class="op" id="5730442">:=</span>&nbsp;<span class="ident" id="5730445"><a href="/go/doc/example.go.html#5730403">decl</a></span><span class="op" id="5730449">.</span><span class="op" id="5730450">(</span><span class="op" id="5730451">*</span><span class="ident" id="5730452"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5730455">.</span><span class="ident" id="5730456">GenDecl</span><span class="op" id="5730463">)</span><span class="op" id="5730464">;</span>&nbsp;<span class="ident" id="5730466"><a href="/go/doc/example.go.html#5730439">ok</a></span>&nbsp;<span class="op" id="5730469">&amp;&amp;</span>&nbsp;<span class="ident" id="5730472"><a href="/go/doc/example.go.html#5730436">g</a></span><span class="op" id="5730473">.</span><span class="ident" id="5730474">Tok</span>&nbsp;<span class="op" id="5730478">!=</span>&nbsp;<span class="ident" id="5730481"><a href="/go/doc/example.go.html#5728812">token</a></span><span class="op" id="5730486">.</span><span class="ident" id="5730487">IMPORT</span>&nbsp;<span class="op" id="5730494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730500"><a href="/go/doc/example.go.html#5730304">numDecl</a></span><span class="op" id="5730507">++</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730514">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730526">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730531">f</span><span class="op" id="5730532">,</span>&nbsp;<span class="ident" id="5730534">ok</span>&nbsp;<span class="op" id="5730537">:=</span>&nbsp;<span class="ident" id="5730540"><a href="/go/doc/example.go.html#5730403">decl</a></span><span class="op" id="5730544">.</span><span class="op" id="5730545">(</span><span class="op" id="5730546">*</span><span class="ident" id="5730547"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5730550">.</span><span class="ident" id="5730551">FuncDecl</span><span class="op" id="5730559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730564">if</span>&nbsp;<span class="op" id="5730567">!</span><span class="ident" id="5730568"><a href="/go/doc/example.go.html#5730534">ok</a></span>&nbsp;<span class="op" id="5730571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730577">continue</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730594"><a href="/go/doc/example.go.html#5730304">numDecl</a></span><span class="op" id="5730601">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730607">name</span>&nbsp;<span class="op" id="5730612">:=</span>&nbsp;<span class="ident" id="5730615"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5730616">.</span><span class="ident" id="5730617">Name</span><span class="op" id="5730621">.</span><span class="ident" id="5730622">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730630">if</span>&nbsp;<span class="ident" id="5730633"><a href="/go/doc/example.go.html#5732464">isTest</a></span><span class="op" id="5730639">(</span><span class="ident" id="5730640"><a href="/go/doc/example.go.html#5730607">name</a></span><span class="op" id="5730644">,</span>&nbsp;<span class="string" id="5730646">&#34;Test&#34;</span><span class="op" id="5730652">)</span>&nbsp;<span class="op" id="5730654">||</span>&nbsp;<span class="ident" id="5730657"><a href="/go/doc/example.go.html#5732464">isTest</a></span><span class="op" id="5730663">(</span><span class="ident" id="5730664"><a href="/go/doc/example.go.html#5730607">name</a></span><span class="op" id="5730668">,</span>&nbsp;<span class="string" id="5730670">&#34;Benchmark&#34;</span><span class="op" id="5730681">)</span>&nbsp;<span class="op" id="5730683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730689"><a href="/go/doc/example.go.html#5730247">hasTests</a></span>&nbsp;<span class="op" id="5730698">=</span>&nbsp;<span class="builtintype" id="5730700">true</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730709">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730726">if</span>&nbsp;<span class="op" id="5730729">!</span><span class="ident" id="5730730"><a href="/go/doc/example.go.html#5732464">isTest</a></span><span class="op" id="5730736">(</span><span class="ident" id="5730737"><a href="/go/doc/example.go.html#5730607">name</a></span><span class="op" id="5730741">,</span>&nbsp;<span class="string" id="5730743">&#34;Example&#34;</span><span class="op" id="5730752">)</span>&nbsp;<span class="op" id="5730754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730760">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730772">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730777">var</span>&nbsp;<span class="ident" id="5730781">doc</span>&nbsp;<span class="builtintype" id="5730785">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5730795">if</span>&nbsp;<span class="ident" id="5730798"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5730799">.</span><span class="ident" id="5730800">Doc</span>&nbsp;<span class="op" id="5730804">!=</span>&nbsp;<span class="ident" id="5730807">nil</span>&nbsp;<span class="op" id="5730811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730817"><a href="/go/doc/example.go.html#5730781">doc</a></span>&nbsp;<span class="op" id="5730821">=</span>&nbsp;<span class="ident" id="5730823"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5730824">.</span><span class="ident" id="5730825">Doc</span><span class="op" id="5730828">.</span><span class="ident" id="5730829">Text</span><span class="op" id="5730833">(</span><span class="op" id="5730834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5730839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730844">output</span><span class="op" id="5730850">,</span>&nbsp;<span class="ident" id="5730852">hasOutput</span>&nbsp;<span class="op" id="5730862">:=</span>&nbsp;<span class="ident" id="5730865"><a href="/go/doc/example.go.html#5731720">exampleOutput</a></span><span class="op" id="5730878">(</span><span class="ident" id="5730879"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5730880">.</span><span class="ident" id="5730881">Body</span><span class="op" id="5730885">,</span>&nbsp;<span class="ident" id="5730887"><a href="/go/doc/example.go.html#5730223">file</a></span><span class="op" id="5730891">.</span><span class="ident" id="5730892">Comments</span><span class="op" id="5730900">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730905"><a href="/go/doc/example.go.html#5730377">flist</a></span>&nbsp;<span class="op" id="5730911">=</span>&nbsp;<span class="builtinfunc" id="5730913">append</span><span class="op" id="5730919">(</span><span class="ident" id="5730920"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5730925">,</span>&nbsp;<span class="op" id="5730927">&amp;</span><span class="ident" id="5730928"><a href="/go/doc/example.go.html#5728976">Example</a></span><span class="op" id="5730935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730941">Name</span><span class="op" id="5730945">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5730954"><a href="/go/doc/example.go.html#5730607">name</a></span><span class="op" id="5730958">[</span><span class="builtinfunc" id="5730959">len</span><span class="op" id="5730962">(</span><span class="string" id="5730963">&#34;Example&#34;</span><span class="op" id="5730972">)</span><span class="op" id="5730973">:</span><span class="op" id="5730974">]</span><span class="op" id="5730975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5730981">Doc</span><span class="op" id="5730984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5730994"><a href="/go/doc/example.go.html#5730781">doc</a></span><span class="op" id="5730997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731003">Code</span><span class="op" id="5731007">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5731016"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5731017">.</span><span class="ident" id="5731018">Body</span><span class="op" id="5731022">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731028">Play</span><span class="op" id="5731032">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5731041"><a href="/go/doc/example.go.html#5733081">playExample</a></span><span class="op" id="5731052">(</span><span class="ident" id="5731053"><a href="/go/doc/example.go.html#5730223">file</a></span><span class="op" id="5731057">,</span>&nbsp;<span class="ident" id="5731059"><a href="/go/doc/example.go.html#5730531">f</a></span><span class="op" id="5731060">.</span><span class="ident" id="5731061">Body</span><span class="op" id="5731065">)</span><span class="op" id="5731066">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731072">Comments</span><span class="op" id="5731080">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5731085"><a href="/go/doc/example.go.html#5730223">file</a></span><span class="op" id="5731089">.</span><span class="ident" id="5731090">Comments</span><span class="op" id="5731098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731104">Output</span><span class="op" id="5731110">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5731117"><a href="/go/doc/example.go.html#5730844">output</a></span><span class="op" id="5731123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731129">EmptyOutput</span><span class="op" id="5731140">:</span>&nbsp;<span class="ident" id="5731142"><a href="/go/doc/example.go.html#5730844">output</a></span>&nbsp;<span class="op" id="5731149">==</span>&nbsp;<span class="string" id="5731152">&#34;&#34;</span>&nbsp;<span class="op" id="5731155">&amp;&amp;</span>&nbsp;<span class="ident" id="5731158"><a href="/go/doc/example.go.html#5730852">hasOutput</a></span><span class="op" id="5731167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731173">Order</span><span class="op" id="5731178">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5731186">len</span><span class="op" id="5731189">(</span><span class="ident" id="5731190"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5731195">)</span><span class="op" id="5731196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5731201">}</span><span class="op" id="5731202">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5731206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731210">if</span>&nbsp;<span class="op" id="5731213">!</span><span class="ident" id="5731214"><a href="/go/doc/example.go.html#5730247">hasTests</a></span>&nbsp;<span class="op" id="5731223">&amp;&amp;</span>&nbsp;<span class="ident" id="5731226"><a href="/go/doc/example.go.html#5730304">numDecl</a></span>&nbsp;<span class="op" id="5731234">&gt;</span>&nbsp;<span class="num" id="5731236">1</span>&nbsp;<span class="op" id="5731238">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="5731241">len</span><span class="op" id="5731244">(</span><span class="ident" id="5731245"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5731250">)</span>&nbsp;<span class="op" id="5731252">==</span>&nbsp;<span class="num" id="5731255">1</span>&nbsp;<span class="op" id="5731257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5731262">//&nbsp;If&nbsp;this&nbsp;file&nbsp;only&nbsp;has&nbsp;one&nbsp;example&nbsp;function,&nbsp;some</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5731317">//&nbsp;other&nbsp;top-level&nbsp;declarations,&nbsp;and&nbsp;no&nbsp;tests&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5731369">//&nbsp;benchmarks,&nbsp;use&nbsp;the&nbsp;whole&nbsp;file&nbsp;as&nbsp;the&nbsp;example.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731422"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5731427">[</span><span class="num" id="5731428">0</span><span class="op" id="5731429">]</span><span class="op" id="5731430">.</span><span class="ident" id="5731431">Code</span>&nbsp;<span class="op" id="5731436">=</span>&nbsp;<span class="ident" id="5731438"><a href="/go/doc/example.go.html#5730223">file</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731446"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5731451">[</span><span class="num" id="5731452">0</span><span class="op" id="5731453">]</span><span class="op" id="5731454">.</span><span class="ident" id="5731455">Play</span>&nbsp;<span class="op" id="5731460">=</span>&nbsp;<span class="ident" id="5731462"><a href="/go/doc/example.go.html#5737305">playExampleFile</a></span><span class="op" id="5731477">(</span><span class="ident" id="5731478"><a href="/go/doc/example.go.html#5730223">file</a></span><span class="op" id="5731482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5731486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731490"><a href="/go/doc/example.go.html#5730199">list</a></span>&nbsp;<span class="op" id="5731495">=</span>&nbsp;<span class="builtinfunc" id="5731497">append</span><span class="op" id="5731503">(</span><span class="ident" id="5731504"><a href="/go/doc/example.go.html#5730199">list</a></span><span class="op" id="5731508">,</span>&nbsp;<span class="ident" id="5731510"><a href="/go/doc/example.go.html#5730377">flist</a></span><span class="op" id="5731515">...</span><span class="op" id="5731518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5731521">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731524"><a href="/go/doc/example.go.html#5728842">sort</a></span><span class="op" id="5731528">.</span><span class="ident" id="5731529">Sort</span><span class="op" id="5731533">(</span><span class="ident" id="5731534"><a href="/go/doc/example.go.html#5732715">exampleByName</a></span><span class="op" id="5731547">(</span><span class="ident" id="5731548"><a href="/go/doc/example.go.html#5730199">list</a></span><span class="op" id="5731552">)</span><span class="op" id="5731553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731556">return</span>&nbsp;<span class="ident" id="5731563"><a href="/go/doc/example.go.html#5730199">list</a></span><br>
<span class="lineno"></span><span class="op" id="5731568">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5731571">var</span>&nbsp;<span class="ident" id="5731575">outputPrefix</span>&nbsp;<span class="op" id="5731588">=</span>&nbsp;<span class="ident" id="5731590"><a href="/go/doc/example.go.html#5728832">regexp</a></span><span class="op" id="5731596">.</span><span class="ident" id="5731597">MustCompile</span><span class="op" id="5731608">(</span><span class="string" id="5731609">`(?i)^[[:space:]]*output:`</span><span class="op" id="5731635">)</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="5731638">//&nbsp;Extracts&nbsp;the&nbsp;expected&nbsp;output&nbsp;and&nbsp;whether&nbsp;there&nbsp;was&nbsp;a&nbsp;valid&nbsp;output&nbsp;comment</span><br>
<span class="lineno"></span><span class="keyword" id="5731715">func</span>&nbsp;<span class="ident" id="5731720">exampleOutput</span><span class="op" id="5731733">(</span><span class="ident" id="5731734">b</span>&nbsp;<span class="op" id="5731736">*</span><span class="ident" id="5731737"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5731740">.</span><span class="ident" id="5731741">BlockStmt</span><span class="op" id="5731750">,</span>&nbsp;<span class="ident" id="5731752">comments</span>&nbsp;<span class="op" id="5731761">[</span><span class="op" id="5731762">]</span><span class="op" id="5731763">*</span><span class="ident" id="5731764"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5731767">.</span><span class="ident" id="5731768">CommentGroup</span><span class="op" id="5731780">)</span>&nbsp;<span class="op" id="5731782">(</span><span class="ident" id="5731783">output</span>&nbsp;<span class="builtintype" id="5731790">string</span><span class="op" id="5731796">,</span>&nbsp;<span class="ident" id="5731798">ok</span>&nbsp;<span class="builtintype" id="5731801">bool</span><span class="op" id="5731805">)</span>&nbsp;<span class="op" id="5731807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731810">if</span>&nbsp;<span class="ident" id="5731813">_</span><span class="op" id="5731814">,</span>&nbsp;<span class="ident" id="5731816">last</span>&nbsp;<span class="op" id="5731821">:=</span>&nbsp;<span class="ident" id="5731824"><a href="/go/doc/example.go.html#5738898">lastComment</a></span><span class="op" id="5731835">(</span><span class="ident" id="5731836"><a href="/go/doc/example.go.html#5731734">b</a></span><span class="op" id="5731837">,</span>&nbsp;<span class="ident" id="5731839"><a href="/go/doc/example.go.html#5731752">comments</a></span><span class="op" id="5731847">)</span><span class="op" id="5731848">;</span>&nbsp;<span class="ident" id="5731850"><a href="/go/doc/example.go.html#5731816">last</a></span>&nbsp;<span class="op" id="5731855">!=</span>&nbsp;<span class="ident" id="5731858">nil</span>&nbsp;<span class="op" id="5731862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5731866">//&nbsp;test&nbsp;that&nbsp;it&nbsp;begins&nbsp;with&nbsp;the&nbsp;correct&nbsp;prefix</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731915">text</span>&nbsp;<span class="op" id="5731920">:=</span>&nbsp;<span class="ident" id="5731923"><a href="/go/doc/example.go.html#5731816">last</a></span><span class="op" id="5731927">.</span><span class="ident" id="5731928">Text</span><span class="op" id="5731932">(</span><span class="op" id="5731933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5731937">if</span>&nbsp;<span class="ident" id="5731940">loc</span>&nbsp;<span class="op" id="5731944">:=</span>&nbsp;<span class="ident" id="5731947"><a href="/go/doc/example.go.html#5731575">outputPrefix</a></span><span class="op" id="5731959">.</span><span class="ident" id="5731960">FindStringIndex</span><span class="op" id="5731975">(</span><span class="ident" id="5731976"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5731980">)</span><span class="op" id="5731981">;</span>&nbsp;<span class="ident" id="5731983"><a href="/go/doc/example.go.html#5731940">loc</a></span>&nbsp;<span class="op" id="5731987">!=</span>&nbsp;<span class="ident" id="5731990">nil</span>&nbsp;<span class="op" id="5731994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5731999"><a href="/go/doc/example.go.html#5731915">text</a></span>&nbsp;<span class="op" id="5732004">=</span>&nbsp;<span class="ident" id="5732006"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732010">[</span><span class="ident" id="5732011"><a href="/go/doc/example.go.html#5731940">loc</a></span><span class="op" id="5732014">[</span><span class="num" id="5732015">1</span><span class="op" id="5732016">]</span><span class="op" id="5732017">:</span><span class="op" id="5732018">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5732023">//&nbsp;Strip&nbsp;zero&nbsp;or&nbsp;more&nbsp;spaces&nbsp;followed&nbsp;by&nbsp;\n&nbsp;or&nbsp;a&nbsp;single&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732089"><a href="/go/doc/example.go.html#5731915">text</a></span>&nbsp;<span class="op" id="5732094">=</span>&nbsp;<span class="ident" id="5732096"><a href="/go/doc/example.go.html#5728861">strings</a></span><span class="op" id="5732103">.</span><span class="ident" id="5732104">TrimLeft</span><span class="op" id="5732112">(</span><span class="ident" id="5732113"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732117">,</span>&nbsp;<span class="string" id="5732119">&#34;&nbsp;&#34;</span><span class="op" id="5732122">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732127">if</span>&nbsp;<span class="builtinfunc" id="5732130">len</span><span class="op" id="5732133">(</span><span class="ident" id="5732134"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732138">)</span>&nbsp;<span class="op" id="5732140">&gt;</span>&nbsp;<span class="num" id="5732142">0</span>&nbsp;<span class="op" id="5732144">&amp;&amp;</span>&nbsp;<span class="ident" id="5732147"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732151">[</span><span class="num" id="5732152">0</span><span class="op" id="5732153">]</span>&nbsp;<span class="op" id="5732155">==</span>&nbsp;<span class="string" id="5732158">&#39;\n&#39;</span>&nbsp;<span class="op" id="5732163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5732169"><a href="/go/doc/example.go.html#5731915">text</a></span>&nbsp;<span class="op" id="5732174">=</span>&nbsp;<span class="ident" id="5732176"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732180">[</span><span class="num" id="5732181">1</span><span class="op" id="5732182">:</span><span class="op" id="5732183">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732193">return</span>&nbsp;<span class="ident" id="5732200"><a href="/go/doc/example.go.html#5731915">text</a></span><span class="op" id="5732204">,</span>&nbsp;<span class="builtintype" id="5732206">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732213">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732219">return</span>&nbsp;<span class="string" id="5732226">&#34;&#34;</span><span class="op" id="5732228">,</span>&nbsp;<span class="builtintype" id="5732230">false</span>&nbsp;<span class="comment" id="5732236">//&nbsp;no&nbsp;suitable&nbsp;comment&nbsp;found</span><br>
<span class="lineno"></span><span class="op" id="5732265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5732268">//&nbsp;isTest&nbsp;tells&nbsp;whether&nbsp;name&nbsp;looks&nbsp;like&nbsp;a&nbsp;test,&nbsp;example,&nbsp;or&nbsp;benchmark.</span><br>
<span class="lineno">120</span><span class="comment" id="5732339">//&nbsp;It&nbsp;is&nbsp;a&nbsp;Test&nbsp;(say)&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;character&nbsp;after&nbsp;Test&nbsp;that&nbsp;is&nbsp;not&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5732410">//&nbsp;lower-case&nbsp;letter.&nbsp;(We&nbsp;don&#39;t&nbsp;want&nbsp;Testiness.)</span><br>
<span class="lineno"></span><span class="keyword" id="5732459">func</span>&nbsp;<span class="ident" id="5732464">isTest</span><span class="op" id="5732470">(</span><span class="ident" id="5732471">name</span><span class="op" id="5732475">,</span>&nbsp;<span class="ident" id="5732477">prefix</span>&nbsp;<span class="builtintype" id="5732484">string</span><span class="op" id="5732490">)</span>&nbsp;<span class="builtintype" id="5732492">bool</span>&nbsp;<span class="op" id="5732497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732500">if</span>&nbsp;<span class="op" id="5732503">!</span><span class="ident" id="5732504"><a href="/go/doc/example.go.html#5728861">strings</a></span><span class="op" id="5732511">.</span><span class="ident" id="5732512">HasPrefix</span><span class="op" id="5732521">(</span><span class="ident" id="5732522"><a href="/go/doc/example.go.html#5732471">name</a></span><span class="op" id="5732526">,</span>&nbsp;<span class="ident" id="5732528"><a href="/go/doc/example.go.html#5732477">prefix</a></span><span class="op" id="5732534">)</span>&nbsp;<span class="op" id="5732536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732540">return</span>&nbsp;<span class="builtintype" id="5732547">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732557">if</span>&nbsp;<span class="builtinfunc" id="5732560">len</span><span class="op" id="5732563">(</span><span class="ident" id="5732564"><a href="/go/doc/example.go.html#5732471">name</a></span><span class="op" id="5732568">)</span>&nbsp;<span class="op" id="5732570">==</span>&nbsp;<span class="builtinfunc" id="5732573">len</span><span class="op" id="5732576">(</span><span class="ident" id="5732577"><a href="/go/doc/example.go.html#5732477">prefix</a></span><span class="op" id="5732583">)</span>&nbsp;<span class="op" id="5732585">{</span>&nbsp;<span class="comment" id="5732587">//&nbsp;&#34;Test&#34;&nbsp;is&nbsp;ok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732605">return</span>&nbsp;<span class="builtintype" id="5732612">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5732618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="5732621">rune</span><span class="op" id="5732625">,</span>&nbsp;<span class="ident" id="5732627">_</span>&nbsp;<span class="op" id="5732629">:=</span>&nbsp;<span class="ident" id="5732632"><a href="/go/doc/example.go.html#5728883">utf8</a></span><span class="op" id="5732636">.</span><span class="ident" id="5732637">DecodeRuneInString</span><span class="op" id="5732655">(</span><span class="ident" id="5732656"><a href="/go/doc/example.go.html#5732471">name</a></span><span class="op" id="5732660">[</span><span class="builtinfunc" id="5732661">len</span><span class="op" id="5732664">(</span><span class="ident" id="5732665"><a href="/go/doc/example.go.html#5732477">prefix</a></span><span class="op" id="5732671">)</span><span class="op" id="5732672">:</span><span class="op" id="5732673">]</span><span class="op" id="5732674">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5732677">return</span>&nbsp;<span class="op" id="5732684">!</span><span class="ident" id="5732685"><a href="/go/doc/example.go.html#5728872">unicode</a></span><span class="op" id="5732692">.</span><span class="ident" id="5732693">IsLower</span><span class="op" id="5732700">(</span><span class="builtintype" id="5732701"><a href="/go/doc/example.go.html#5732621">rune</a></span><span class="op" id="5732705">)</span><br>
<span class="lineno"></span><span class="op" id="5732707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5732710">type</span>&nbsp;<span class="ident" id="5732715">exampleByName</span>&nbsp;<span class="op" id="5732729">[</span><span class="op" id="5732730">]</span><span class="op" id="5732731">*</span><span class="ident" id="5732732"><a href="/go/doc/example.go.html#5728976">Example</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="5732741">func</span>&nbsp;<span class="op" id="5732746">(</span><span class="ident" id="5732747">s</span>&nbsp;<span class="ident" id="5732749"><a href="/go/doc/example.go.html#5732715">exampleByName</a></span><span class="op" id="5732762">)</span>&nbsp;<span class="ident" id="5732764">Len</span><span class="op" id="5732767">(</span><span class="op" id="5732768">)</span>&nbsp;<span class="builtintype" id="5732770">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5732784">{</span>&nbsp;<span class="keyword" id="5732786">return</span>&nbsp;<span class="builtinfunc" id="5732793">len</span><span class="op" id="5732796">(</span><span class="ident" id="5732797"><a href="/go/doc/example.go.html#5732747">s</a></span><span class="op" id="5732798">)</span>&nbsp;<span class="op" id="5732800">}</span><br>
<span class="lineno"></span><span class="keyword" id="5732802">func</span>&nbsp;<span class="op" id="5732807">(</span><span class="ident" id="5732808">s</span>&nbsp;<span class="ident" id="5732810"><a href="/go/doc/example.go.html#5732715">exampleByName</a></span><span class="op" id="5732823">)</span>&nbsp;<span class="ident" id="5732825">Swap</span><span class="op" id="5732829">(</span><span class="ident" id="5732830">i</span><span class="op" id="5732831">,</span>&nbsp;<span class="ident" id="5732833">j</span>&nbsp;<span class="builtintype" id="5732835">int</span><span class="op" id="5732838">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5732845">{</span>&nbsp;<span class="ident" id="5732847"><a href="/go/doc/example.go.html#5732808">s</a></span><span class="op" id="5732848">[</span><span class="ident" id="5732849"><a href="/go/doc/example.go.html#5732830">i</a></span><span class="op" id="5732850">]</span><span class="op" id="5732851">,</span>&nbsp;<span class="ident" id="5732853"><a href="/go/doc/example.go.html#5732808">s</a></span><span class="op" id="5732854">[</span><span class="ident" id="5732855"><a href="/go/doc/example.go.html#5732833">j</a></span><span class="op" id="5732856">]</span>&nbsp;<span class="op" id="5732858">=</span>&nbsp;<span class="ident" id="5732860"><a href="/go/doc/example.go.html#5732808">s</a></span><span class="op" id="5732861">[</span><span class="ident" id="5732862"><a href="/go/doc/example.go.html#5732833">j</a></span><span class="op" id="5732863">]</span><span class="op" id="5732864">,</span>&nbsp;<span class="ident" id="5732866"><a href="/go/doc/example.go.html#5732808">s</a></span><span class="op" id="5732867">[</span><span class="ident" id="5732868"><a href="/go/doc/example.go.html#5732830">i</a></span><span class="op" id="5732869">]</span>&nbsp;<span class="op" id="5732871">}</span><br>
<span class="lineno"></span><span class="keyword" id="5732873">func</span>&nbsp;<span class="op" id="5732878">(</span><span class="ident" id="5732879">s</span>&nbsp;<span class="ident" id="5732881"><a href="/go/doc/example.go.html#5732715">exampleByName</a></span><span class="op" id="5732894">)</span>&nbsp;<span class="ident" id="5732896">Less</span><span class="op" id="5732900">(</span><span class="ident" id="5732901">i</span><span class="op" id="5732902">,</span>&nbsp;<span class="ident" id="5732904">j</span>&nbsp;<span class="builtintype" id="5732906">int</span><span class="op" id="5732909">)</span>&nbsp;<span class="builtintype" id="5732911">bool</span>&nbsp;<span class="op" id="5732916">{</span>&nbsp;<span class="keyword" id="5732918">return</span>&nbsp;<span class="ident" id="5732925"><a href="/go/doc/example.go.html#5732879">s</a></span><span class="op" id="5732926">[</span><span class="ident" id="5732927"><a href="/go/doc/example.go.html#5732901">i</a></span><span class="op" id="5732928">]</span><span class="op" id="5732929">.</span><span class="ident" id="5732930">Name</span>&nbsp;<span class="op" id="5732935">&lt;</span>&nbsp;<span class="ident" id="5732937"><a href="/go/doc/example.go.html#5732879">s</a></span><span class="op" id="5732938">[</span><span class="ident" id="5732939"><a href="/go/doc/example.go.html#5732904">j</a></span><span class="op" id="5732940">]</span><span class="op" id="5732941">.</span><span class="ident" id="5732942">Name</span>&nbsp;<span class="op" id="5732947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5732950">//&nbsp;playExample&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File&nbsp;based&nbsp;on&nbsp;the&nbsp;provided</span><br>
<span class="lineno">140</span><span class="comment" id="5733015">//&nbsp;file&nbsp;with&nbsp;the&nbsp;provided&nbsp;function&nbsp;body&nbsp;as&nbsp;the&nbsp;body&nbsp;of&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5733076">func</span>&nbsp;<span class="ident" id="5733081">playExample</span><span class="op" id="5733092">(</span><span class="ident" id="5733093">file</span>&nbsp;<span class="op" id="5733098">*</span><span class="ident" id="5733099"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733102">.</span><span class="ident" id="5733103">File</span><span class="op" id="5733107">,</span>&nbsp;<span class="ident" id="5733109">body</span>&nbsp;<span class="op" id="5733114">*</span><span class="ident" id="5733115"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733118">.</span><span class="ident" id="5733119">BlockStmt</span><span class="op" id="5733128">)</span>&nbsp;<span class="op" id="5733130">*</span><span class="ident" id="5733131"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733134">.</span><span class="ident" id="5733135">File</span>&nbsp;<span class="op" id="5733140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733143">if</span>&nbsp;<span class="op" id="5733146">!</span><span class="ident" id="5733147"><a href="/go/doc/example.go.html#5728861">strings</a></span><span class="op" id="5733154">.</span><span class="ident" id="5733155">HasSuffix</span><span class="op" id="5733164">(</span><span class="ident" id="5733165"><a href="/go/doc/example.go.html#5733093">file</a></span><span class="op" id="5733169">.</span><span class="ident" id="5733170">Name</span><span class="op" id="5733174">.</span><span class="ident" id="5733175">Name</span><span class="op" id="5733179">,</span>&nbsp;<span class="string" id="5733181">&#34;_test&#34;</span><span class="op" id="5733188">)</span>&nbsp;<span class="op" id="5733190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5733194">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5733246">//&nbsp;greater&nbsp;package&nbsp;(yet).</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733274">return</span>&nbsp;<span class="ident" id="5733281">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5733290">//&nbsp;Find&nbsp;top-level&nbsp;declarations&nbsp;in&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733335">topDecls</span>&nbsp;<span class="op" id="5733344">:=</span>&nbsp;<span class="builtinfunc" id="5733347">make</span><span class="op" id="5733351">(</span><span class="keyword" id="5733352">map</span><span class="op" id="5733355">[</span><span class="op" id="5733356">*</span><span class="ident" id="5733357"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733360">.</span><span class="ident" id="5733361">Object</span><span class="op" id="5733367">]</span><span class="builtintype" id="5733368">bool</span><span class="op" id="5733372">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733375">for</span>&nbsp;<span class="ident" id="5733379">_</span><span class="op" id="5733380">,</span>&nbsp;<span class="ident" id="5733382">decl</span>&nbsp;<span class="op" id="5733387">:=</span>&nbsp;<span class="keyword" id="5733390">range</span>&nbsp;<span class="ident" id="5733396"><a href="/go/doc/example.go.html#5733093">file</a></span><span class="op" id="5733400">.</span><span class="ident" id="5733401">Decls</span>&nbsp;<span class="op" id="5733407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733411">switch</span>&nbsp;<span class="ident" id="5733418">d</span>&nbsp;<span class="op" id="5733420">:=</span>&nbsp;<span class="ident" id="5733423"><a href="/go/doc/example.go.html#5733382">decl</a></span><span class="op" id="5733427">.</span><span class="op" id="5733428">(</span><span class="keyword" id="5733429">type</span><span class="op" id="5733433">)</span>&nbsp;<span class="op" id="5733435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733439">case</span>&nbsp;<span class="op" id="5733444">*</span><span class="ident" id="5733445"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733448">.</span><span class="ident" id="5733449">FuncDecl</span><span class="op" id="5733457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733462"><a href="/go/doc/example.go.html#5733335">topDecls</a></span><span class="op" id="5733470">[</span><span class="ident" id="5733471"><a href="/go/doc/example.go.html#5733418">d</a></span><span class="op" id="5733472">.</span><span class="ident" id="5733473">Name</span><span class="op" id="5733477">.</span><span class="ident" id="5733478">Obj</span><span class="op" id="5733481">]</span>&nbsp;<span class="op" id="5733483">=</span>&nbsp;<span class="builtintype" id="5733485">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733492">case</span>&nbsp;<span class="op" id="5733497">*</span><span class="ident" id="5733498"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733501">.</span><span class="ident" id="5733502">GenDecl</span><span class="op" id="5733509">:</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733514">for</span>&nbsp;<span class="ident" id="5733518">_</span><span class="op" id="5733519">,</span>&nbsp;<span class="ident" id="5733521">spec</span>&nbsp;<span class="op" id="5733526">:=</span>&nbsp;<span class="keyword" id="5733529">range</span>&nbsp;<span class="ident" id="5733535"><a href="/go/doc/example.go.html#5733418">d</a></span><span class="op" id="5733536">.</span><span class="ident" id="5733537">Specs</span>&nbsp;<span class="op" id="5733543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733549">switch</span>&nbsp;<span class="ident" id="5733556">s</span>&nbsp;<span class="op" id="5733558">:=</span>&nbsp;<span class="ident" id="5733561"><a href="/go/doc/example.go.html#5733521">spec</a></span><span class="op" id="5733565">.</span><span class="op" id="5733566">(</span><span class="keyword" id="5733567">type</span><span class="op" id="5733571">)</span>&nbsp;<span class="op" id="5733573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733579">case</span>&nbsp;<span class="op" id="5733584">*</span><span class="ident" id="5733585"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733588">.</span><span class="ident" id="5733589">TypeSpec</span><span class="op" id="5733597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733604"><a href="/go/doc/example.go.html#5733335">topDecls</a></span><span class="op" id="5733612">[</span><span class="ident" id="5733613"><a href="/go/doc/example.go.html#5733556">s</a></span><span class="op" id="5733614">.</span><span class="ident" id="5733615">Name</span><span class="op" id="5733619">.</span><span class="ident" id="5733620">Obj</span><span class="op" id="5733623">]</span>&nbsp;<span class="op" id="5733625">=</span>&nbsp;<span class="builtintype" id="5733627">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733636">case</span>&nbsp;<span class="op" id="5733641">*</span><span class="ident" id="5733642"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733645">.</span><span class="ident" id="5733646">ValueSpec</span><span class="op" id="5733655">:</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733662">for</span>&nbsp;<span class="ident" id="5733666">_</span><span class="op" id="5733667">,</span>&nbsp;<span class="ident" id="5733669">id</span>&nbsp;<span class="op" id="5733672">:=</span>&nbsp;<span class="keyword" id="5733675">range</span>&nbsp;<span class="ident" id="5733681"><a href="/go/doc/example.go.html#5733556">s</a></span><span class="op" id="5733682">.</span><span class="ident" id="5733683">Names</span>&nbsp;<span class="op" id="5733689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733697"><a href="/go/doc/example.go.html#5733335">topDecls</a></span><span class="op" id="5733705">[</span><span class="ident" id="5733706"><a href="/go/doc/example.go.html#5733669">id</a></span><span class="op" id="5733708">.</span><span class="ident" id="5733709">Obj</span><span class="op" id="5733712">]</span>&nbsp;<span class="op" id="5733714">=</span>&nbsp;<span class="builtintype" id="5733716">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733726">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733737">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5733744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5733748">//&nbsp;Find&nbsp;unresolved&nbsp;identifiers&nbsp;and&nbsp;uses&nbsp;of&nbsp;top-level&nbsp;declarations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733816">unresolved</span>&nbsp;<span class="op" id="5733827">:=</span>&nbsp;<span class="builtinfunc" id="5733830">make</span><span class="op" id="5733834">(</span><span class="keyword" id="5733835">map</span><span class="op" id="5733838">[</span><span class="builtintype" id="5733839">string</span><span class="op" id="5733845">]</span><span class="builtintype" id="5733846">bool</span><span class="op" id="5733850">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733853">usesTopDecl</span>&nbsp;<span class="op" id="5733865">:=</span>&nbsp;<span class="builtintype" id="5733868">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5733875">var</span>&nbsp;<span class="ident" id="5733879">inspectFunc</span>&nbsp;<span class="keyword" id="5733891">func</span><span class="op" id="5733895">(</span><span class="ident" id="5733896"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733899">.</span><span class="ident" id="5733900">Node</span><span class="op" id="5733904">)</span>&nbsp;<span class="builtintype" id="5733906">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5733912"><a href="/go/doc/example.go.html#5733879">inspectFunc</a></span>&nbsp;<span class="op" id="5733924">=</span>&nbsp;<span class="keyword" id="5733926">func</span><span class="op" id="5733930">(</span><span class="ident" id="5733931">n</span>&nbsp;<span class="ident" id="5733933"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5733936">.</span><span class="ident" id="5733937">Node</span><span class="op" id="5733941">)</span>&nbsp;<span class="builtintype" id="5733943">bool</span>&nbsp;<span class="op" id="5733948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5733952">//&nbsp;For&nbsp;selector&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;left&nbsp;hand&nbsp;side.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734016">//&nbsp;(For&nbsp;an&nbsp;expression&nbsp;like&nbsp;fmt.Println,&nbsp;only&nbsp;add&nbsp;&#34;fmt&#34;&nbsp;to&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734080">//&nbsp;set&nbsp;of&nbsp;unresolved&nbsp;names,&nbsp;not&nbsp;&#34;Println&#34;.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734126">if</span>&nbsp;<span class="ident" id="5734129">e</span><span class="op" id="5734130">,</span>&nbsp;<span class="ident" id="5734132">ok</span>&nbsp;<span class="op" id="5734135">:=</span>&nbsp;<span class="ident" id="5734138"><a href="/go/doc/example.go.html#5733931">n</a></span><span class="op" id="5734139">.</span><span class="op" id="5734140">(</span><span class="op" id="5734141">*</span><span class="ident" id="5734142"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734145">.</span><span class="ident" id="5734146">SelectorExpr</span><span class="op" id="5734158">)</span><span class="op" id="5734159">;</span>&nbsp;<span class="ident" id="5734161"><a href="/go/doc/example.go.html#5734132">ok</a></span>&nbsp;<span class="op" id="5734164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734169"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734172">.</span><span class="ident" id="5734173">Inspect</span><span class="op" id="5734180">(</span><span class="ident" id="5734181"><a href="/go/doc/example.go.html#5734129">e</a></span><span class="op" id="5734182">.</span><span class="ident" id="5734183">X</span><span class="op" id="5734184">,</span>&nbsp;<span class="ident" id="5734186"><a href="/go/doc/example.go.html#5733879">inspectFunc</a></span><span class="op" id="5734197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734202">return</span>&nbsp;<span class="builtintype" id="5734209">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734217">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734221">//&nbsp;For&nbsp;key&nbsp;value&nbsp;expressions,&nbsp;only&nbsp;inspect&nbsp;the&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734276">//&nbsp;as&nbsp;the&nbsp;key&nbsp;should&nbsp;be&nbsp;resolved&nbsp;by&nbsp;the&nbsp;type&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734330">//&nbsp;composite&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734354">if</span>&nbsp;<span class="ident" id="5734357">e</span><span class="op" id="5734358">,</span>&nbsp;<span class="ident" id="5734360">ok</span>&nbsp;<span class="op" id="5734363">:=</span>&nbsp;<span class="ident" id="5734366"><a href="/go/doc/example.go.html#5733931">n</a></span><span class="op" id="5734367">.</span><span class="op" id="5734368">(</span><span class="op" id="5734369">*</span><span class="ident" id="5734370"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734373">.</span><span class="ident" id="5734374">KeyValueExpr</span><span class="op" id="5734386">)</span><span class="op" id="5734387">;</span>&nbsp;<span class="ident" id="5734389"><a href="/go/doc/example.go.html#5734360">ok</a></span>&nbsp;<span class="op" id="5734392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734397"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734400">.</span><span class="ident" id="5734401">Inspect</span><span class="op" id="5734408">(</span><span class="ident" id="5734409"><a href="/go/doc/example.go.html#5734357">e</a></span><span class="op" id="5734410">.</span><span class="ident" id="5734411">Value</span><span class="op" id="5734416">,</span>&nbsp;<span class="ident" id="5734418"><a href="/go/doc/example.go.html#5733879">inspectFunc</a></span><span class="op" id="5734429">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734434">return</span>&nbsp;<span class="builtintype" id="5734441">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734453">if</span>&nbsp;<span class="ident" id="5734456">id</span><span class="op" id="5734458">,</span>&nbsp;<span class="ident" id="5734460">ok</span>&nbsp;<span class="op" id="5734463">:=</span>&nbsp;<span class="ident" id="5734466"><a href="/go/doc/example.go.html#5733931">n</a></span><span class="op" id="5734467">.</span><span class="op" id="5734468">(</span><span class="op" id="5734469">*</span><span class="ident" id="5734470"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734473">.</span><span class="ident" id="5734474">Ident</span><span class="op" id="5734479">)</span><span class="op" id="5734480">;</span>&nbsp;<span class="ident" id="5734482"><a href="/go/doc/example.go.html#5734460">ok</a></span>&nbsp;<span class="op" id="5734485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734490">if</span>&nbsp;<span class="ident" id="5734493"><a href="/go/doc/example.go.html#5734456">id</a></span><span class="op" id="5734495">.</span><span class="ident" id="5734496">Obj</span>&nbsp;<span class="op" id="5734500">==</span>&nbsp;<span class="ident" id="5734503">nil</span>&nbsp;<span class="op" id="5734507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734513"><a href="/go/doc/example.go.html#5733816">unresolved</a></span><span class="op" id="5734523">[</span><span class="ident" id="5734524"><a href="/go/doc/example.go.html#5734456">id</a></span><span class="op" id="5734526">.</span><span class="ident" id="5734527">Name</span><span class="op" id="5734531">]</span>&nbsp;<span class="op" id="5734533">=</span>&nbsp;<span class="builtintype" id="5734535">true</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734543">}</span>&nbsp;<span class="keyword" id="5734545">else</span>&nbsp;<span class="keyword" id="5734550">if</span>&nbsp;<span class="ident" id="5734553"><a href="/go/doc/example.go.html#5733335">topDecls</a></span><span class="op" id="5734561">[</span><span class="ident" id="5734562"><a href="/go/doc/example.go.html#5734456">id</a></span><span class="op" id="5734564">.</span><span class="ident" id="5734565">Obj</span><span class="op" id="5734568">]</span>&nbsp;<span class="op" id="5734570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734576"><a href="/go/doc/example.go.html#5733853">usesTopDecl</a></span>&nbsp;<span class="op" id="5734588">=</span>&nbsp;<span class="builtintype" id="5734590">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734598">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734606">return</span>&nbsp;<span class="builtintype" id="5734613">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5734622"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5734625">.</span><span class="ident" id="5734626">Inspect</span><span class="op" id="5734633">(</span><span class="ident" id="5734634"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5734638">,</span>&nbsp;<span class="ident" id="5734640"><a href="/go/doc/example.go.html#5733879">inspectFunc</a></span><span class="op" id="5734651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734654">if</span>&nbsp;<span class="ident" id="5734657"><a href="/go/doc/example.go.html#5733853">usesTopDecl</a></span>&nbsp;<span class="op" id="5734669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734673">//&nbsp;We&nbsp;don&#39;t&nbsp;support&nbsp;examples&nbsp;that&nbsp;are&nbsp;not&nbsp;self-contained&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734739">return</span>&nbsp;<span class="ident" id="5734746">nil</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734755">//&nbsp;Remove&nbsp;predeclared&nbsp;identifiers&nbsp;from&nbsp;unresolved&nbsp;list.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734812">for</span>&nbsp;<span class="ident" id="5734816">n</span>&nbsp;<span class="op" id="5734818">:=</span>&nbsp;<span class="keyword" id="5734821">range</span>&nbsp;<span class="ident" id="5734827"><a href="/go/doc/example.go.html#5733816">unresolved</a></span>&nbsp;<span class="op" id="5734838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5734842">if</span>&nbsp;<span class="ident" id="5734845"><a href="/go/doc/reader.go.html#5768984">predeclaredTypes</a></span><span class="op" id="5734861">[</span><span class="ident" id="5734862"><a href="/go/doc/example.go.html#5734816">n</a></span><span class="op" id="5734863">]</span>&nbsp;<span class="op" id="5734865">||</span>&nbsp;<span class="ident" id="5734868"><a href="/go/doc/reader.go.html#5769760">predeclaredConstants</a></span><span class="op" id="5734888">[</span><span class="ident" id="5734889"><a href="/go/doc/example.go.html#5734816">n</a></span><span class="op" id="5734890">]</span>&nbsp;<span class="op" id="5734892">||</span>&nbsp;<span class="ident" id="5734895"><a href="/go/doc/reader.go.html#5769447">predeclaredFuncs</a></span><span class="op" id="5734911">[</span><span class="ident" id="5734912"><a href="/go/doc/example.go.html#5734816">n</a></span><span class="op" id="5734913">]</span>&nbsp;<span class="op" id="5734915">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5734920">delete</span><span class="op" id="5734926">(</span><span class="ident" id="5734927"><a href="/go/doc/example.go.html#5733816">unresolved</a></span><span class="op" id="5734937">,</span>&nbsp;<span class="ident" id="5734939"><a href="/go/doc/example.go.html#5734816">n</a></span><span class="op" id="5734940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5734947">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5734951">//&nbsp;Use&nbsp;unresolved&nbsp;identifiers&nbsp;to&nbsp;determine&nbsp;the&nbsp;imports&nbsp;used&nbsp;by&nbsp;this</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735020">//&nbsp;example.&nbsp;The&nbsp;heuristic&nbsp;assumes&nbsp;package&nbsp;names&nbsp;match&nbsp;base&nbsp;import</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735087">//&nbsp;paths&nbsp;for&nbsp;imports&nbsp;w/o&nbsp;renames&nbsp;(should&nbsp;be&nbsp;good&nbsp;enough&nbsp;most&nbsp;of&nbsp;the&nbsp;time).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735163">namedImports</span>&nbsp;<span class="op" id="5735176">:=</span>&nbsp;<span class="builtinfunc" id="5735179">make</span><span class="op" id="5735183">(</span><span class="keyword" id="5735184">map</span><span class="op" id="5735187">[</span><span class="builtintype" id="5735188">string</span><span class="op" id="5735194">]</span><span class="builtintype" id="5735195">string</span><span class="op" id="5735201">)</span>&nbsp;<span class="comment" id="5735203">//&nbsp;[name]path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735218">var</span>&nbsp;<span class="ident" id="5735222">blankImports</span>&nbsp;<span class="op" id="5735235">[</span><span class="op" id="5735236">]</span><span class="ident" id="5735237"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5735240">.</span><span class="ident" id="5735241">Spec</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5735258">//&nbsp;_&nbsp;imports</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735272">for</span>&nbsp;<span class="ident" id="5735276">_</span><span class="op" id="5735277">,</span>&nbsp;<span class="ident" id="5735279">s</span>&nbsp;<span class="op" id="5735281">:=</span>&nbsp;<span class="keyword" id="5735284">range</span>&nbsp;<span class="ident" id="5735290"><a href="/go/doc/example.go.html#5733093">file</a></span><span class="op" id="5735294">.</span><span class="ident" id="5735295">Imports</span>&nbsp;<span class="op" id="5735303">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735307">p</span><span class="op" id="5735308">,</span>&nbsp;<span class="ident" id="5735310">err</span>&nbsp;<span class="op" id="5735314">:=</span>&nbsp;<span class="ident" id="5735317"><a href="/go/doc/example.go.html#5728850">strconv</a></span><span class="op" id="5735324">.</span><span class="ident" id="5735325">Unquote</span><span class="op" id="5735332">(</span><span class="ident" id="5735333"><a href="/go/doc/example.go.html#5735279">s</a></span><span class="op" id="5735334">.</span><span class="ident" id="5735335">Path</span><span class="op" id="5735339">.</span><span class="ident" id="5735340">Value</span><span class="op" id="5735345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735349">if</span>&nbsp;<span class="ident" id="5735352"><a href="/go/doc/example.go.html#5735310">err</a></span>&nbsp;<span class="op" id="5735356">!=</span>&nbsp;<span class="ident" id="5735359">nil</span>&nbsp;<span class="op" id="5735363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735368">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735379">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735383">n</span>&nbsp;<span class="op" id="5735385">:=</span>&nbsp;<span class="ident" id="5735388"><a href="/go/doc/example.go.html#5728824">path</a></span><span class="op" id="5735392">.</span><span class="ident" id="5735393">Base</span><span class="op" id="5735397">(</span><span class="ident" id="5735398"><a href="/go/doc/example.go.html#5735307">p</a></span><span class="op" id="5735399">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735403">if</span>&nbsp;<span class="ident" id="5735406"><a href="/go/doc/example.go.html#5735279">s</a></span><span class="op" id="5735407">.</span><span class="ident" id="5735408">Name</span>&nbsp;<span class="op" id="5735413">!=</span>&nbsp;<span class="ident" id="5735416">nil</span>&nbsp;<span class="op" id="5735420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735425"><a href="/go/doc/example.go.html#5735383">n</a></span>&nbsp;<span class="op" id="5735427">=</span>&nbsp;<span class="ident" id="5735429"><a href="/go/doc/example.go.html#5735279">s</a></span><span class="op" id="5735430">.</span><span class="ident" id="5735431">Name</span><span class="op" id="5735435">.</span><span class="ident" id="5735436">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735444">switch</span>&nbsp;<span class="ident" id="5735451"><a href="/go/doc/example.go.html#5735383">n</a></span>&nbsp;<span class="op" id="5735453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735458">case</span>&nbsp;<span class="string" id="5735463">&#34;_&#34;</span><span class="op" id="5735466">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735472"><a href="/go/doc/example.go.html#5735222">blankImports</a></span>&nbsp;<span class="op" id="5735485">=</span>&nbsp;<span class="builtinfunc" id="5735487">append</span><span class="op" id="5735493">(</span><span class="ident" id="5735494"><a href="/go/doc/example.go.html#5735222">blankImports</a></span><span class="op" id="5735506">,</span>&nbsp;<span class="ident" id="5735508"><a href="/go/doc/example.go.html#5735279">s</a></span><span class="op" id="5735509">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735515">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735527">case</span>&nbsp;<span class="string" id="5735532">&#34;.&#34;</span><span class="op" id="5735535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735541">//&nbsp;We&nbsp;can&#39;t&nbsp;resolve&nbsp;dot&nbsp;imports&nbsp;(yet).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735584">return</span>&nbsp;<span class="ident" id="5735591">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735598">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735606">if</span>&nbsp;<span class="ident" id="5735609"><a href="/go/doc/example.go.html#5733816">unresolved</a></span><span class="op" id="5735619">[</span><span class="ident" id="5735620"><a href="/go/doc/example.go.html#5735383">n</a></span><span class="op" id="5735621">]</span>&nbsp;<span class="op" id="5735623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5735628"><a href="/go/doc/example.go.html#5735163">namedImports</a></span><span class="op" id="5735640">[</span><span class="ident" id="5735641"><a href="/go/doc/example.go.html#5735383">n</a></span><span class="op" id="5735642">]</span>&nbsp;<span class="op" id="5735644">=</span>&nbsp;<span class="ident" id="5735646"><a href="/go/doc/example.go.html#5735307">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5735651">delete</span><span class="op" id="5735657">(</span><span class="ident" id="5735658"><a href="/go/doc/example.go.html#5733816">unresolved</a></span><span class="op" id="5735668">,</span>&nbsp;<span class="ident" id="5735670"><a href="/go/doc/example.go.html#5735383">n</a></span><span class="op" id="5735671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735675">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735682">//&nbsp;If&nbsp;there&nbsp;are&nbsp;other&nbsp;unresolved&nbsp;identifiers,&nbsp;give&nbsp;up&nbsp;because&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735750">//&nbsp;synthesized&nbsp;file&nbsp;is&nbsp;not&nbsp;going&nbsp;to&nbsp;build.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735794">if</span>&nbsp;<span class="builtinfunc" id="5735797">len</span><span class="op" id="5735800">(</span><span class="ident" id="5735801"><a href="/go/doc/example.go.html#5733816">unresolved</a></span><span class="op" id="5735811">)</span>&nbsp;<span class="op" id="5735813">&gt;</span>&nbsp;<span class="num" id="5735815">0</span>&nbsp;<span class="op" id="5735817">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735821">return</span>&nbsp;<span class="ident" id="5735828">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5735833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5735837">//&nbsp;Include&nbsp;documentation&nbsp;belonging&nbsp;to&nbsp;blank&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735891">var</span>&nbsp;<span class="ident" id="5735895">comments</span>&nbsp;<span class="op" id="5735904">[</span><span class="op" id="5735905">]</span><span class="op" id="5735906">*</span><span class="ident" id="5735907"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5735910">.</span><span class="ident" id="5735911">CommentGroup</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735925">for</span>&nbsp;<span class="ident" id="5735929">_</span><span class="op" id="5735930">,</span>&nbsp;<span class="ident" id="5735932">s</span>&nbsp;<span class="op" id="5735934">:=</span>&nbsp;<span class="keyword" id="5735937">range</span>&nbsp;<span class="ident" id="5735943"><a href="/go/doc/example.go.html#5735222">blankImports</a></span>&nbsp;<span class="op" id="5735956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5735960">if</span>&nbsp;<span class="ident" id="5735963">c</span>&nbsp;<span class="op" id="5735965">:=</span>&nbsp;<span class="ident" id="5735968"><a href="/go/doc/example.go.html#5735932">s</a></span><span class="op" id="5735969">.</span><span class="op" id="5735970">(</span><span class="op" id="5735971">*</span><span class="ident" id="5735972"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5735975">.</span><span class="ident" id="5735976">ImportSpec</span><span class="op" id="5735986">)</span><span class="op" id="5735987">.</span><span class="ident" id="5735988">Doc</span><span class="op" id="5735991">;</span>&nbsp;<span class="ident" id="5735993"><a href="/go/doc/example.go.html#5735963">c</a></span>&nbsp;<span class="op" id="5735995">!=</span>&nbsp;<span class="ident" id="5735998">nil</span>&nbsp;<span class="op" id="5736002">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736007"><a href="/go/doc/example.go.html#5735895">comments</a></span>&nbsp;<span class="op" id="5736016">=</span>&nbsp;<span class="builtinfunc" id="5736018">append</span><span class="op" id="5736024">(</span><span class="ident" id="5736025"><a href="/go/doc/example.go.html#5735895">comments</a></span><span class="op" id="5736033">,</span>&nbsp;<span class="ident" id="5736035"><a href="/go/doc/example.go.html#5735963">c</a></span><span class="op" id="5736036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736043">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736047">//&nbsp;Include&nbsp;comments&nbsp;that&nbsp;are&nbsp;inside&nbsp;the&nbsp;function&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736103">for</span>&nbsp;<span class="ident" id="5736107">_</span><span class="op" id="5736108">,</span>&nbsp;<span class="ident" id="5736110">c</span>&nbsp;<span class="op" id="5736112">:=</span>&nbsp;<span class="keyword" id="5736115">range</span>&nbsp;<span class="ident" id="5736121"><a href="/go/doc/example.go.html#5733093">file</a></span><span class="op" id="5736125">.</span><span class="ident" id="5736126">Comments</span>&nbsp;<span class="op" id="5736135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736139">if</span>&nbsp;<span class="ident" id="5736142"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5736146">.</span><span class="ident" id="5736147">Pos</span><span class="op" id="5736150">(</span><span class="op" id="5736151">)</span>&nbsp;<span class="op" id="5736153">&lt;=</span>&nbsp;<span class="ident" id="5736156"><a href="/go/doc/example.go.html#5736110">c</a></span><span class="op" id="5736157">.</span><span class="ident" id="5736158">Pos</span><span class="op" id="5736161">(</span><span class="op" id="5736162">)</span>&nbsp;<span class="op" id="5736164">&amp;&amp;</span>&nbsp;<span class="ident" id="5736167"><a href="/go/doc/example.go.html#5736110">c</a></span><span class="op" id="5736168">.</span><span class="ident" id="5736169">End</span><span class="op" id="5736172">(</span><span class="op" id="5736173">)</span>&nbsp;<span class="op" id="5736175">&lt;=</span>&nbsp;<span class="ident" id="5736178"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5736182">.</span><span class="ident" id="5736183">End</span><span class="op" id="5736186">(</span><span class="op" id="5736187">)</span>&nbsp;<span class="op" id="5736189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736194"><a href="/go/doc/example.go.html#5735895">comments</a></span>&nbsp;<span class="op" id="5736203">=</span>&nbsp;<span class="builtinfunc" id="5736205">append</span><span class="op" id="5736211">(</span><span class="ident" id="5736212"><a href="/go/doc/example.go.html#5735895">comments</a></span><span class="op" id="5736220">,</span>&nbsp;<span class="ident" id="5736222"><a href="/go/doc/example.go.html#5736110">c</a></span><span class="op" id="5736223">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736234">//&nbsp;Strip&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;and&nbsp;adjust&nbsp;body&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736292"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5736296">,</span>&nbsp;<span class="ident" id="5736298"><a href="/go/doc/example.go.html#5735895">comments</a></span>&nbsp;<span class="op" id="5736307">=</span>&nbsp;<span class="ident" id="5736309"><a href="/go/doc/example.go.html#5738214">stripOutputComment</a></span><span class="op" id="5736327">(</span><span class="ident" id="5736328"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5736332">,</span>&nbsp;<span class="ident" id="5736334"><a href="/go/doc/example.go.html#5735895">comments</a></span><span class="op" id="5736342">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736346">//&nbsp;Synthesize&nbsp;import&nbsp;declaration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736381">importDecl</span>&nbsp;<span class="op" id="5736392">:=</span>&nbsp;<span class="op" id="5736395">&amp;</span><span class="ident" id="5736396"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736399">.</span><span class="ident" id="5736400">GenDecl</span><span class="op" id="5736407">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736411">Tok</span><span class="op" id="5736414">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5736419"><a href="/go/doc/example.go.html#5728812">token</a></span><span class="op" id="5736424">.</span><span class="ident" id="5736425">IMPORT</span><span class="op" id="5736431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736435">Lparen</span><span class="op" id="5736441">:</span>&nbsp;<span class="num" id="5736443">1</span><span class="op" id="5736444">,</span>&nbsp;<span class="comment" id="5736446">//&nbsp;Need&nbsp;non-zero&nbsp;Lparen&nbsp;and&nbsp;Rparen&nbsp;so&nbsp;that&nbsp;printer</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736499">Rparen</span><span class="op" id="5736505">:</span>&nbsp;<span class="num" id="5736507">1</span><span class="op" id="5736508">,</span>&nbsp;<span class="comment" id="5736510">//&nbsp;treats&nbsp;this&nbsp;as&nbsp;a&nbsp;factored&nbsp;import.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736548">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736551">for</span>&nbsp;<span class="ident" id="5736555">n</span><span class="op" id="5736556">,</span>&nbsp;<span class="ident" id="5736558">p</span>&nbsp;<span class="op" id="5736560">:=</span>&nbsp;<span class="keyword" id="5736563">range</span>&nbsp;<span class="ident" id="5736569"><a href="/go/doc/example.go.html#5735163">namedImports</a></span>&nbsp;<span class="op" id="5736582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736586">s</span>&nbsp;<span class="op" id="5736588">:=</span>&nbsp;<span class="op" id="5736591">&amp;</span><span class="ident" id="5736592"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736595">.</span><span class="ident" id="5736596">ImportSpec</span><span class="op" id="5736606">{</span><span class="ident" id="5736607">Path</span><span class="op" id="5736611">:</span>&nbsp;<span class="op" id="5736613">&amp;</span><span class="ident" id="5736614"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736617">.</span><span class="ident" id="5736618">BasicLit</span><span class="op" id="5736626">{</span><span class="ident" id="5736627">Value</span><span class="op" id="5736632">:</span>&nbsp;<span class="ident" id="5736634"><a href="/go/doc/example.go.html#5728850">strconv</a></span><span class="op" id="5736641">.</span><span class="ident" id="5736642">Quote</span><span class="op" id="5736647">(</span><span class="ident" id="5736648"><a href="/go/doc/example.go.html#5736558">p</a></span><span class="op" id="5736649">)</span><span class="op" id="5736650">}</span><span class="op" id="5736651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5736655">if</span>&nbsp;<span class="ident" id="5736658"><a href="/go/doc/example.go.html#5728824">path</a></span><span class="op" id="5736662">.</span><span class="ident" id="5736663">Base</span><span class="op" id="5736667">(</span><span class="ident" id="5736668"><a href="/go/doc/example.go.html#5736558">p</a></span><span class="op" id="5736669">)</span>&nbsp;<span class="op" id="5736671">!=</span>&nbsp;<span class="ident" id="5736674"><a href="/go/doc/example.go.html#5736555">n</a></span>&nbsp;<span class="op" id="5736676">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736681"><a href="/go/doc/example.go.html#5736586">s</a></span><span class="op" id="5736682">.</span><span class="ident" id="5736683">Name</span>&nbsp;<span class="op" id="5736688">=</span>&nbsp;<span class="ident" id="5736690"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736693">.</span><span class="ident" id="5736694">NewIdent</span><span class="op" id="5736702">(</span><span class="ident" id="5736703"><a href="/go/doc/example.go.html#5736555">n</a></span><span class="op" id="5736704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736712"><a href="/go/doc/example.go.html#5736381">importDecl</a></span><span class="op" id="5736722">.</span><span class="ident" id="5736723">Specs</span>&nbsp;<span class="op" id="5736729">=</span>&nbsp;<span class="builtinfunc" id="5736731">append</span><span class="op" id="5736737">(</span><span class="ident" id="5736738"><a href="/go/doc/example.go.html#5736381">importDecl</a></span><span class="op" id="5736748">.</span><span class="ident" id="5736749">Specs</span><span class="op" id="5736754">,</span>&nbsp;<span class="ident" id="5736756"><a href="/go/doc/example.go.html#5736586">s</a></span><span class="op" id="5736757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5736760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736763"><a href="/go/doc/example.go.html#5736381">importDecl</a></span><span class="op" id="5736773">.</span><span class="ident" id="5736774">Specs</span>&nbsp;<span class="op" id="5736780">=</span>&nbsp;<span class="builtinfunc" id="5736782">append</span><span class="op" id="5736788">(</span><span class="ident" id="5736789"><a href="/go/doc/example.go.html#5736381">importDecl</a></span><span class="op" id="5736799">.</span><span class="ident" id="5736800">Specs</span><span class="op" id="5736805">,</span>&nbsp;<span class="ident" id="5736807"><a href="/go/doc/example.go.html#5735222">blankImports</a></span><span class="op" id="5736819">...</span><span class="op" id="5736822">)</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5736826">//&nbsp;Synthesize&nbsp;main&nbsp;function.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736856">funcDecl</span>&nbsp;<span class="op" id="5736865">:=</span>&nbsp;<span class="op" id="5736868">&amp;</span><span class="ident" id="5736869"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736872">.</span><span class="ident" id="5736873">FuncDecl</span><span class="op" id="5736881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736885">Name</span><span class="op" id="5736889">:</span>&nbsp;<span class="ident" id="5736891"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736894">.</span><span class="ident" id="5736895">NewIdent</span><span class="op" id="5736903">(</span><span class="string" id="5736904">&#34;main&#34;</span><span class="op" id="5736910">)</span><span class="op" id="5736911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736915">Type</span><span class="op" id="5736919">:</span>&nbsp;<span class="op" id="5736921">&amp;</span><span class="ident" id="5736922"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736925">.</span><span class="ident" id="5736926">FuncType</span><span class="op" id="5736934">{</span><span class="ident" id="5736935">Params</span><span class="op" id="5736941">:</span>&nbsp;<span class="op" id="5736943">&amp;</span><span class="ident" id="5736944"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5736947">.</span><span class="ident" id="5736948">FieldList</span><span class="op" id="5736957">{</span><span class="op" id="5736958">}</span><span class="op" id="5736959">}</span><span class="op" id="5736960">,</span>&nbsp;<span class="comment" id="5736962">//&nbsp;FuncType.Params&nbsp;must&nbsp;be&nbsp;non-nil</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5736999">Body</span><span class="op" id="5737003">:</span>&nbsp;<span class="ident" id="5737005"><a href="/go/doc/example.go.html#5733109">body</a></span><span class="op" id="5737009">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737012">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5737016">//&nbsp;Synthesize&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737037">return</span>&nbsp;<span class="op" id="5737044">&amp;</span><span class="ident" id="5737045"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737048">.</span><span class="ident" id="5737049">File</span><span class="op" id="5737053">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737057">Name</span><span class="op" id="5737061">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5737067"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737070">.</span><span class="ident" id="5737071">NewIdent</span><span class="op" id="5737079">(</span><span class="string" id="5737080">&#34;main&#34;</span><span class="op" id="5737086">)</span><span class="op" id="5737087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737091">Decls</span><span class="op" id="5737096">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5737101">[</span><span class="op" id="5737102">]</span><span class="ident" id="5737103"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737106">.</span><span class="ident" id="5737107">Decl</span><span class="op" id="5737111">{</span><span class="ident" id="5737112"><a href="/go/doc/example.go.html#5736381">importDecl</a></span><span class="op" id="5737122">,</span>&nbsp;<span class="ident" id="5737124"><a href="/go/doc/example.go.html#5736856">funcDecl</a></span><span class="op" id="5737132">}</span><span class="op" id="5737133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737137">Comments</span><span class="op" id="5737145">:</span>&nbsp;<span class="ident" id="5737147"><a href="/go/doc/example.go.html#5735895">comments</a></span><span class="op" id="5737155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737158">}</span><br>
<span class="lineno"></span><span class="op" id="5737160">}</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span><span class="comment" id="5737163">//&nbsp;playExampleFile&nbsp;takes&nbsp;a&nbsp;whole&nbsp;file&nbsp;example&nbsp;and&nbsp;synthesizes&nbsp;a&nbsp;new&nbsp;*ast.File</span><br>
<span class="lineno"></span><span class="comment" id="5737241">//&nbsp;such&nbsp;that&nbsp;the&nbsp;example&nbsp;is&nbsp;function&nbsp;main&nbsp;in&nbsp;package&nbsp;main.</span><br>
<span class="lineno"></span><span class="keyword" id="5737300">func</span>&nbsp;<span class="ident" id="5737305">playExampleFile</span><span class="op" id="5737320">(</span><span class="ident" id="5737321">file</span>&nbsp;<span class="op" id="5737326">*</span><span class="ident" id="5737327"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737330">.</span><span class="ident" id="5737331">File</span><span class="op" id="5737335">)</span>&nbsp;<span class="op" id="5737337">*</span><span class="ident" id="5737338"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737341">.</span><span class="ident" id="5737342">File</span>&nbsp;<span class="op" id="5737347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5737350">//&nbsp;Strip&nbsp;copyright&nbsp;comment&nbsp;if&nbsp;present.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737390">comments</span>&nbsp;<span class="op" id="5737399">:=</span>&nbsp;<span class="ident" id="5737402"><a href="/go/doc/example.go.html#5737321">file</a></span><span class="op" id="5737406">.</span><span class="ident" id="5737407">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737417">if</span>&nbsp;<span class="builtinfunc" id="5737420">len</span><span class="op" id="5737423">(</span><span class="ident" id="5737424"><a href="/go/doc/example.go.html#5737390">comments</a></span><span class="op" id="5737432">)</span>&nbsp;<span class="op" id="5737434">&gt;</span>&nbsp;<span class="num" id="5737436">0</span>&nbsp;<span class="op" id="5737438">&amp;&amp;</span>&nbsp;<span class="ident" id="5737441"><a href="/go/doc/example.go.html#5728861">strings</a></span><span class="op" id="5737448">.</span><span class="ident" id="5737449">HasPrefix</span><span class="op" id="5737458">(</span><span class="ident" id="5737459"><a href="/go/doc/example.go.html#5737390">comments</a></span><span class="op" id="5737467">[</span><span class="num" id="5737468">0</span><span class="op" id="5737469">]</span><span class="op" id="5737470">.</span><span class="ident" id="5737471">Text</span><span class="op" id="5737475">(</span><span class="op" id="5737476">)</span><span class="op" id="5737477">,</span>&nbsp;<span class="string" id="5737479">&#34;Copyright&#34;</span><span class="op" id="5737490">)</span>&nbsp;<span class="op" id="5737492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737496"><a href="/go/doc/example.go.html#5737390">comments</a></span>&nbsp;<span class="op" id="5737505">=</span>&nbsp;<span class="ident" id="5737507"><a href="/go/doc/example.go.html#5737390">comments</a></span><span class="op" id="5737515">[</span><span class="num" id="5737516">1</span><span class="op" id="5737517">:</span><span class="op" id="5737518">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5737525">//&nbsp;Copy&nbsp;declaration&nbsp;slice,&nbsp;rewriting&nbsp;the&nbsp;ExampleX&nbsp;function&nbsp;to&nbsp;main.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737594">var</span>&nbsp;<span class="ident" id="5737598">decls</span>&nbsp;<span class="op" id="5737604">[</span><span class="op" id="5737605">]</span><span class="ident" id="5737606"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737609">.</span><span class="ident" id="5737610">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737616">for</span>&nbsp;<span class="ident" id="5737620">_</span><span class="op" id="5737621">,</span>&nbsp;<span class="ident" id="5737623">d</span>&nbsp;<span class="op" id="5737625">:=</span>&nbsp;<span class="keyword" id="5737628">range</span>&nbsp;<span class="ident" id="5737634"><a href="/go/doc/example.go.html#5737321">file</a></span><span class="op" id="5737638">.</span><span class="ident" id="5737639">Decls</span>&nbsp;<span class="op" id="5737645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5737649">if</span>&nbsp;<span class="ident" id="5737652">f</span><span class="op" id="5737653">,</span>&nbsp;<span class="ident" id="5737655">ok</span>&nbsp;<span class="op" id="5737658">:=</span>&nbsp;<span class="ident" id="5737661"><a href="/go/doc/example.go.html#5737623">d</a></span><span class="op" id="5737662">.</span><span class="op" id="5737663">(</span><span class="op" id="5737664">*</span><span class="ident" id="5737665"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737668">.</span><span class="ident" id="5737669">FuncDecl</span><span class="op" id="5737677">)</span><span class="op" id="5737678">;</span>&nbsp;<span class="ident" id="5737680"><a href="/go/doc/example.go.html#5737655">ok</a></span>&nbsp;<span class="op" id="5737683">&amp;&amp;</span>&nbsp;<span class="ident" id="5737686"><a href="/go/doc/example.go.html#5732464">isTest</a></span><span class="op" id="5737692">(</span><span class="ident" id="5737693"><a href="/go/doc/example.go.html#5737652">f</a></span><span class="op" id="5737694">.</span><span class="ident" id="5737695">Name</span><span class="op" id="5737699">.</span><span class="ident" id="5737700">Name</span><span class="op" id="5737704">,</span>&nbsp;<span class="string" id="5737706">&#34;Example&#34;</span><span class="op" id="5737715">)</span>&nbsp;<span class="op" id="5737717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5737722">//&nbsp;Copy&nbsp;the&nbsp;FuncDecl,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737776">newF</span>&nbsp;<span class="op" id="5737781">:=</span>&nbsp;<span class="op" id="5737784">*</span><span class="ident" id="5737785"><a href="/go/doc/example.go.html#5737652">f</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737790"><a href="/go/doc/example.go.html#5737776">newF</a></span><span class="op" id="5737794">.</span><span class="ident" id="5737795">Name</span>&nbsp;<span class="op" id="5737800">=</span>&nbsp;<span class="ident" id="5737802"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5737805">.</span><span class="ident" id="5737806">NewIdent</span><span class="op" id="5737814">(</span><span class="string" id="5737815">&#34;main&#34;</span><span class="op" id="5737821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737826"><a href="/go/doc/example.go.html#5737776">newF</a></span><span class="op" id="5737830">.</span><span class="ident" id="5737831">Body</span><span class="op" id="5737835">,</span>&nbsp;<span class="ident" id="5737837"><a href="/go/doc/example.go.html#5737390">comments</a></span>&nbsp;<span class="op" id="5737846">=</span>&nbsp;<span class="ident" id="5737848"><a href="/go/doc/example.go.html#5738214">stripOutputComment</a></span><span class="op" id="5737866">(</span><span class="ident" id="5737867"><a href="/go/doc/example.go.html#5737652">f</a></span><span class="op" id="5737868">.</span><span class="ident" id="5737869">Body</span><span class="op" id="5737873">,</span>&nbsp;<span class="ident" id="5737875"><a href="/go/doc/example.go.html#5737390">comments</a></span><span class="op" id="5737883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737888"><a href="/go/doc/example.go.html#5737623">d</a></span>&nbsp;<span class="op" id="5737890">=</span>&nbsp;<span class="op" id="5737892">&amp;</span><span class="ident" id="5737893"><a href="/go/doc/example.go.html#5737776">newF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737900">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737904"><a href="/go/doc/example.go.html#5737598">decls</a></span>&nbsp;<span class="op" id="5737910">=</span>&nbsp;<span class="builtinfunc" id="5737912">append</span><span class="op" id="5737918">(</span><span class="ident" id="5737919"><a href="/go/doc/example.go.html#5737598">decls</a></span><span class="op" id="5737924">,</span>&nbsp;<span class="ident" id="5737926"><a href="/go/doc/example.go.html#5737623">d</a></span><span class="op" id="5737927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5737930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5737934">//&nbsp;Copy&nbsp;the&nbsp;File,&nbsp;as&nbsp;it&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737982">f</span>&nbsp;<span class="op" id="5737984">:=</span>&nbsp;<span class="op" id="5737987">*</span><span class="ident" id="5737988"><a href="/go/doc/example.go.html#5737321">file</a></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5737994"><a href="/go/doc/example.go.html#5737982">f</a></span><span class="op" id="5737995">.</span><span class="ident" id="5737996">Name</span>&nbsp;<span class="op" id="5738001">=</span>&nbsp;<span class="ident" id="5738003"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738006">.</span><span class="ident" id="5738007">NewIdent</span><span class="op" id="5738015">(</span><span class="string" id="5738016">&#34;main&#34;</span><span class="op" id="5738022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738025"><a href="/go/doc/example.go.html#5737982">f</a></span><span class="op" id="5738026">.</span><span class="ident" id="5738027">Decls</span>&nbsp;<span class="op" id="5738033">=</span>&nbsp;<span class="ident" id="5738035"><a href="/go/doc/example.go.html#5737598">decls</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738042"><a href="/go/doc/example.go.html#5737982">f</a></span><span class="op" id="5738043">.</span><span class="ident" id="5738044">Comments</span>&nbsp;<span class="op" id="5738053">=</span>&nbsp;<span class="ident" id="5738055"><a href="/go/doc/example.go.html#5737390">comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5738065">return</span>&nbsp;<span class="op" id="5738072">&amp;</span><span class="ident" id="5738073"><a href="/go/doc/example.go.html#5737982">f</a></span><br>
<span class="lineno"></span><span class="op" id="5738075">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="5738078">//&nbsp;stripOutputComment&nbsp;finds&nbsp;and&nbsp;removes&nbsp;an&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;from&nbsp;body</span><br>
<span class="lineno"></span><span class="comment" id="5738149">//&nbsp;and&nbsp;comments,&nbsp;and&nbsp;adjusts&nbsp;the&nbsp;body&nbsp;block&#39;s&nbsp;end&nbsp;position.</span><br>
<span class="lineno"></span><span class="keyword" id="5738209">func</span>&nbsp;<span class="ident" id="5738214">stripOutputComment</span><span class="op" id="5738232">(</span><span class="ident" id="5738233">body</span>&nbsp;<span class="op" id="5738238">*</span><span class="ident" id="5738239"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738242">.</span><span class="ident" id="5738243">BlockStmt</span><span class="op" id="5738252">,</span>&nbsp;<span class="ident" id="5738254">comments</span>&nbsp;<span class="op" id="5738263">[</span><span class="op" id="5738264">]</span><span class="op" id="5738265">*</span><span class="ident" id="5738266"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738269">.</span><span class="ident" id="5738270">CommentGroup</span><span class="op" id="5738282">)</span>&nbsp;<span class="op" id="5738284">(</span><span class="op" id="5738285">*</span><span class="ident" id="5738286"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738289">.</span><span class="ident" id="5738290">BlockStmt</span><span class="op" id="5738299">,</span>&nbsp;<span class="op" id="5738301">[</span><span class="op" id="5738302">]</span><span class="op" id="5738303">*</span><span class="ident" id="5738304"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738307">.</span><span class="ident" id="5738308">CommentGroup</span><span class="op" id="5738320">)</span>&nbsp;<span class="op" id="5738322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5738325">//&nbsp;Do&nbsp;nothing&nbsp;if&nbsp;no&nbsp;&#34;Output:&#34;&nbsp;comment&nbsp;found.</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738371">i</span><span class="op" id="5738372">,</span>&nbsp;<span class="ident" id="5738374">last</span>&nbsp;<span class="op" id="5738379">:=</span>&nbsp;<span class="ident" id="5738382"><a href="/go/doc/example.go.html#5738898">lastComment</a></span><span class="op" id="5738393">(</span><span class="ident" id="5738394"><a href="/go/doc/example.go.html#5738233">body</a></span><span class="op" id="5738398">,</span>&nbsp;<span class="ident" id="5738400"><a href="/go/doc/example.go.html#5738254">comments</a></span><span class="op" id="5738408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5738411">if</span>&nbsp;<span class="ident" id="5738414"><a href="/go/doc/example.go.html#5738374">last</a></span>&nbsp;<span class="op" id="5738419">==</span>&nbsp;<span class="ident" id="5738422">nil</span>&nbsp;<span class="op" id="5738426">||</span>&nbsp;<span class="op" id="5738429">!</span><span class="ident" id="5738430"><a href="/go/doc/example.go.html#5731575">outputPrefix</a></span><span class="op" id="5738442">.</span><span class="ident" id="5738443">MatchString</span><span class="op" id="5738454">(</span><span class="ident" id="5738455"><a href="/go/doc/example.go.html#5738374">last</a></span><span class="op" id="5738459">.</span><span class="ident" id="5738460">Text</span><span class="op" id="5738464">(</span><span class="op" id="5738465">)</span><span class="op" id="5738466">)</span>&nbsp;<span class="op" id="5738468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5738472">return</span>&nbsp;<span class="ident" id="5738479"><a href="/go/doc/example.go.html#5738233">body</a></span><span class="op" id="5738483">,</span>&nbsp;<span class="ident" id="5738485"><a href="/go/doc/example.go.html#5738254">comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5738495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5738499">//&nbsp;Copy&nbsp;body&nbsp;and&nbsp;comments,&nbsp;as&nbsp;the&nbsp;originals&nbsp;may&nbsp;be&nbsp;used&nbsp;elsewhere.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738567">newBody</span>&nbsp;<span class="op" id="5738575">:=</span>&nbsp;<span class="op" id="5738578">&amp;</span><span class="ident" id="5738579"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738582">.</span><span class="ident" id="5738583">BlockStmt</span><span class="op" id="5738592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738596">Lbrace</span><span class="op" id="5738602">:</span>&nbsp;<span class="ident" id="5738604"><a href="/go/doc/example.go.html#5738233">body</a></span><span class="op" id="5738608">.</span><span class="ident" id="5738609">Lbrace</span><span class="op" id="5738615">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738619">List</span><span class="op" id="5738623">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5738627"><a href="/go/doc/example.go.html#5738233">body</a></span><span class="op" id="5738631">.</span><span class="ident" id="5738632">List</span><span class="op" id="5738636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738640">Rbrace</span><span class="op" id="5738646">:</span>&nbsp;<span class="ident" id="5738648"><a href="/go/doc/example.go.html#5738374">last</a></span><span class="op" id="5738652">.</span><span class="ident" id="5738653">Pos</span><span class="op" id="5738656">(</span><span class="op" id="5738657">)</span><span class="op" id="5738658">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5738661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738664">newComments</span>&nbsp;<span class="op" id="5738676">:=</span>&nbsp;<span class="builtinfunc" id="5738679">make</span><span class="op" id="5738683">(</span><span class="op" id="5738684">[</span><span class="op" id="5738685">]</span><span class="op" id="5738686">*</span><span class="ident" id="5738687"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738690">.</span><span class="ident" id="5738691">CommentGroup</span><span class="op" id="5738703">,</span>&nbsp;<span class="builtinfunc" id="5738705">len</span><span class="op" id="5738708">(</span><span class="ident" id="5738709"><a href="/go/doc/example.go.html#5738254">comments</a></span><span class="op" id="5738717">)</span><span class="op" id="5738718">-</span><span class="num" id="5738719">1</span><span class="op" id="5738720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5738723">copy</span><span class="op" id="5738727">(</span><span class="ident" id="5738728"><a href="/go/doc/example.go.html#5738664">newComments</a></span><span class="op" id="5738739">,</span>&nbsp;<span class="ident" id="5738741"><a href="/go/doc/example.go.html#5738254">comments</a></span><span class="op" id="5738749">[</span><span class="op" id="5738750">:</span><span class="ident" id="5738751"><a href="/go/doc/example.go.html#5738371">i</a></span><span class="op" id="5738752">]</span><span class="op" id="5738753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5738756">copy</span><span class="op" id="5738760">(</span><span class="ident" id="5738761"><a href="/go/doc/example.go.html#5738664">newComments</a></span><span class="op" id="5738772">[</span><span class="ident" id="5738773"><a href="/go/doc/example.go.html#5738371">i</a></span><span class="op" id="5738774">:</span><span class="op" id="5738775">]</span><span class="op" id="5738776">,</span>&nbsp;<span class="ident" id="5738778"><a href="/go/doc/example.go.html#5738254">comments</a></span><span class="op" id="5738786">[</span><span class="ident" id="5738787"><a href="/go/doc/example.go.html#5738371">i</a></span><span class="op" id="5738788">+</span><span class="num" id="5738789">1</span><span class="op" id="5738790">:</span><span class="op" id="5738791">]</span><span class="op" id="5738792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5738795">return</span>&nbsp;<span class="ident" id="5738802"><a href="/go/doc/example.go.html#5738567">newBody</a></span><span class="op" id="5738809">,</span>&nbsp;<span class="ident" id="5738811"><a href="/go/doc/example.go.html#5738664">newComments</a></span><br>
<span class="lineno">340</span><span class="op" id="5738823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5738826">//&nbsp;lastComment&nbsp;returns&nbsp;the&nbsp;last&nbsp;comment&nbsp;inside&nbsp;the&nbsp;provided&nbsp;block.</span><br>
<span class="lineno"></span><span class="keyword" id="5738893">func</span>&nbsp;<span class="ident" id="5738898">lastComment</span><span class="op" id="5738909">(</span><span class="ident" id="5738910">b</span>&nbsp;<span class="op" id="5738912">*</span><span class="ident" id="5738913"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738916">.</span><span class="ident" id="5738917">BlockStmt</span><span class="op" id="5738926">,</span>&nbsp;<span class="ident" id="5738928">c</span>&nbsp;<span class="op" id="5738930">[</span><span class="op" id="5738931">]</span><span class="op" id="5738932">*</span><span class="ident" id="5738933"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738936">.</span><span class="ident" id="5738937">CommentGroup</span><span class="op" id="5738949">)</span>&nbsp;<span class="op" id="5738951">(</span><span class="ident" id="5738952">i</span>&nbsp;<span class="builtintype" id="5738954">int</span><span class="op" id="5738957">,</span>&nbsp;<span class="ident" id="5738959">last</span>&nbsp;<span class="op" id="5738964">*</span><span class="ident" id="5738965"><a href="/go/doc/example.go.html#5728802">ast</a></span><span class="op" id="5738968">.</span><span class="ident" id="5738969">CommentGroup</span><span class="op" id="5738981">)</span>&nbsp;<span class="op" id="5738983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5738986">pos</span><span class="op" id="5738989">,</span>&nbsp;<span class="ident" id="5738991">end</span>&nbsp;<span class="op" id="5738995">:=</span>&nbsp;<span class="ident" id="5738998"><a href="/go/doc/example.go.html#5738910">b</a></span><span class="op" id="5738999">.</span><span class="ident" id="5739000">Pos</span><span class="op" id="5739003">(</span><span class="op" id="5739004">)</span><span class="op" id="5739005">,</span>&nbsp;<span class="ident" id="5739007"><a href="/go/doc/example.go.html#5738910">b</a></span><span class="op" id="5739008">.</span><span class="ident" id="5739009">End</span><span class="op" id="5739012">(</span><span class="op" id="5739013">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739016">for</span>&nbsp;<span class="ident" id="5739020">j</span><span class="op" id="5739021">,</span>&nbsp;<span class="ident" id="5739023">cg</span>&nbsp;<span class="op" id="5739026">:=</span>&nbsp;<span class="keyword" id="5739029">range</span>&nbsp;<span class="ident" id="5739035"><a href="/go/doc/example.go.html#5738928">c</a></span>&nbsp;<span class="op" id="5739037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739041">if</span>&nbsp;<span class="ident" id="5739044"><a href="/go/doc/example.go.html#5739023">cg</a></span><span class="op" id="5739046">.</span><span class="ident" id="5739047">Pos</span><span class="op" id="5739050">(</span><span class="op" id="5739051">)</span>&nbsp;<span class="op" id="5739053">&lt;</span>&nbsp;<span class="ident" id="5739055"><a href="/go/doc/example.go.html#5738986">pos</a></span>&nbsp;<span class="op" id="5739059">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739064">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5739075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739079">if</span>&nbsp;<span class="ident" id="5739082"><a href="/go/doc/example.go.html#5739023">cg</a></span><span class="op" id="5739084">.</span><span class="ident" id="5739085">End</span><span class="op" id="5739088">(</span><span class="op" id="5739089">)</span>&nbsp;<span class="op" id="5739091">&gt;</span>&nbsp;<span class="ident" id="5739093"><a href="/go/doc/example.go.html#5738991">end</a></span>&nbsp;<span class="op" id="5739097">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739102">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5739110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5739114"><a href="/go/doc/example.go.html#5738952">i</a></span><span class="op" id="5739115">,</span>&nbsp;<span class="ident" id="5739117"><a href="/go/doc/example.go.html#5738959">last</a></span>&nbsp;<span class="op" id="5739122">=</span>&nbsp;<span class="ident" id="5739124"><a href="/go/doc/example.go.html#5739020">j</a></span><span class="op" id="5739125">,</span>&nbsp;<span class="ident" id="5739127"><a href="/go/doc/example.go.html#5739023">cg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5739131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5739134">return</span><br>
<span class="lineno">355</span><span class="op" id="5739141">}</span>
</div>
</body>
</html>
