<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7766430">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7766485">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7766539">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7766590">package</span>&nbsp;<span class="ident" id="7766598">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7766603">import</span>&nbsp;<span class="op" id="7766610">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766613">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766619">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766632">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766638">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766649">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7766659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7766662">var</span>&nbsp;<span class="ident" id="7766666">filenames</span>&nbsp;<span class="op" id="7766676">=</span>&nbsp;<span class="op" id="7766678">[</span><span class="op" id="7766679">]</span><span class="builtintype" id="7766680">string</span><span class="op" id="7766686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766689">&#34;../testdata/e.txt&#34;</span><span class="op" id="7766708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7766711">&#34;../testdata/pi.txt&#34;</span><span class="op" id="7766731">,</span><br>
<span class="lineno"></span><span class="op" id="7766733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7766736">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="7766814">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7766881">func</span>&nbsp;<span class="ident" id="7766886">testFile</span><span class="op" id="7766894">(</span><span class="ident" id="7766895">t</span>&nbsp;<span class="op" id="7766897">*</span><span class="ident" id="7766898">testing</span><span class="op" id="7766905">.</span><span class="ident" id="7766906">T</span><span class="op" id="7766907">,</span>&nbsp;<span class="ident" id="7766909">fn</span>&nbsp;<span class="builtintype" id="7766912">string</span><span class="op" id="7766918">,</span>&nbsp;<span class="ident" id="7766920">order</span>&nbsp;<span class="ident" id="7766926">Order</span><span class="op" id="7766931">,</span>&nbsp;<span class="ident" id="7766933">litWidth</span>&nbsp;<span class="builtintype" id="7766942">int</span><span class="op" id="7766945">)</span>&nbsp;<span class="op" id="7766947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7766950">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7766987">golden</span><span class="op" id="7766993">,</span>&nbsp;<span class="ident" id="7766995">err</span>&nbsp;<span class="op" id="7766999">:=</span>&nbsp;<span class="ident" id="7767002">os</span><span class="op" id="7767004">.</span><span class="ident" id="7767005">Open</span><span class="op" id="7767009">(</span><span class="ident" id="7767010">fn</span><span class="op" id="7767012">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767015">if</span>&nbsp;<span class="ident" id="7767018">err</span>&nbsp;<span class="op" id="7767022">!=</span>&nbsp;<span class="ident" id="7767025">nil</span>&nbsp;<span class="op" id="7767029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767033">t</span><span class="op" id="7767034">.</span><span class="ident" id="7767035">Errorf</span><span class="op" id="7767041">(</span><span class="string" id="7767042">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7767073">,</span>&nbsp;<span class="ident" id="7767075">fn</span><span class="op" id="7767077">,</span>&nbsp;<span class="ident" id="7767079">order</span><span class="op" id="7767084">,</span>&nbsp;<span class="ident" id="7767086">litWidth</span><span class="op" id="7767094">,</span>&nbsp;<span class="ident" id="7767096">err</span><span class="op" id="7767099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767103">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767114">defer</span>&nbsp;<span class="ident" id="7767120">golden</span><span class="op" id="7767126">.</span><span class="ident" id="7767127">Close</span><span class="op" id="7767132">(</span><span class="op" id="7767133">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7767137">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767257">raw</span><span class="op" id="7767260">,</span>&nbsp;<span class="ident" id="7767262">err</span>&nbsp;<span class="op" id="7767266">:=</span>&nbsp;<span class="ident" id="7767269">os</span><span class="op" id="7767271">.</span><span class="ident" id="7767272">Open</span><span class="op" id="7767276">(</span><span class="ident" id="7767277">fn</span><span class="op" id="7767279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767282">if</span>&nbsp;<span class="ident" id="7767285">err</span>&nbsp;<span class="op" id="7767289">!=</span>&nbsp;<span class="ident" id="7767292">nil</span>&nbsp;<span class="op" id="7767296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767300">t</span><span class="op" id="7767301">.</span><span class="ident" id="7767302">Errorf</span><span class="op" id="7767308">(</span><span class="string" id="7767309">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7767340">,</span>&nbsp;<span class="ident" id="7767342">fn</span><span class="op" id="7767344">,</span>&nbsp;<span class="ident" id="7767346">order</span><span class="op" id="7767351">,</span>&nbsp;<span class="ident" id="7767353">litWidth</span><span class="op" id="7767361">,</span>&nbsp;<span class="ident" id="7767363">err</span><span class="op" id="7767366">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767370">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767382">piper</span><span class="op" id="7767387">,</span>&nbsp;<span class="ident" id="7767389">pipew</span>&nbsp;<span class="op" id="7767395">:=</span>&nbsp;<span class="ident" id="7767398">io</span><span class="op" id="7767400">.</span><span class="ident" id="7767401">Pipe</span><span class="op" id="7767405">(</span><span class="op" id="7767406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767409">defer</span>&nbsp;<span class="ident" id="7767415">piper</span><span class="op" id="7767420">.</span><span class="ident" id="7767421">Close</span><span class="op" id="7767426">(</span><span class="op" id="7767427">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767430">go</span>&nbsp;<span class="keyword" id="7767433">func</span><span class="op" id="7767437">(</span><span class="op" id="7767438">)</span>&nbsp;<span class="op" id="7767440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767444">defer</span>&nbsp;<span class="ident" id="7767450">raw</span><span class="op" id="7767453">.</span><span class="ident" id="7767454">Close</span><span class="op" id="7767459">(</span><span class="op" id="7767460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767464">defer</span>&nbsp;<span class="ident" id="7767470">pipew</span><span class="op" id="7767475">.</span><span class="ident" id="7767476">Close</span><span class="op" id="7767481">(</span><span class="op" id="7767482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767486">lzww</span>&nbsp;<span class="op" id="7767491">:=</span>&nbsp;<span class="ident" id="7767494">NewWriter</span><span class="op" id="7767503">(</span><span class="ident" id="7767504">pipew</span><span class="op" id="7767509">,</span>&nbsp;<span class="ident" id="7767511">order</span><span class="op" id="7767516">,</span>&nbsp;<span class="ident" id="7767518">litWidth</span><span class="op" id="7767526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767530">defer</span>&nbsp;<span class="ident" id="7767536">lzww</span><span class="op" id="7767540">.</span><span class="ident" id="7767541">Close</span><span class="op" id="7767546">(</span><span class="op" id="7767547">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767551">var</span>&nbsp;<span class="ident" id="7767555">b</span>&nbsp;<span class="op" id="7767557">[</span><span class="num" id="7767558">4096</span><span class="op" id="7767562">]</span><span class="builtintype" id="7767563">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767570">for</span>&nbsp;<span class="op" id="7767574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767579">n</span><span class="op" id="7767580">,</span>&nbsp;<span class="ident" id="7767582">err0</span>&nbsp;<span class="op" id="7767587">:=</span>&nbsp;<span class="ident" id="7767590">raw</span><span class="op" id="7767593">.</span><span class="ident" id="7767594">Read</span><span class="op" id="7767598">(</span><span class="ident" id="7767599">b</span><span class="op" id="7767600">[</span><span class="op" id="7767601">:</span><span class="op" id="7767602">]</span><span class="op" id="7767603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767608">if</span>&nbsp;<span class="ident" id="7767611">err0</span>&nbsp;<span class="op" id="7767616">!=</span>&nbsp;<span class="ident" id="7767619">nil</span>&nbsp;<span class="op" id="7767623">&amp;&amp;</span>&nbsp;<span class="ident" id="7767626">err0</span>&nbsp;<span class="op" id="7767631">!=</span>&nbsp;<span class="ident" id="7767634">io</span><span class="op" id="7767636">.</span><span class="ident" id="7767637">EOF</span>&nbsp;<span class="op" id="7767641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767647">t</span><span class="op" id="7767648">.</span><span class="ident" id="7767649">Errorf</span><span class="op" id="7767655">(</span><span class="string" id="7767656">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7767687">,</span>&nbsp;<span class="ident" id="7767689">fn</span><span class="op" id="7767691">,</span>&nbsp;<span class="ident" id="7767693">order</span><span class="op" id="7767698">,</span>&nbsp;<span class="ident" id="7767700">litWidth</span><span class="op" id="7767708">,</span>&nbsp;<span class="ident" id="7767710">err0</span><span class="op" id="7767714">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767720">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767735">_</span><span class="op" id="7767736">,</span>&nbsp;<span class="ident" id="7767738">err1</span>&nbsp;<span class="op" id="7767743">:=</span>&nbsp;<span class="ident" id="7767746">lzww</span><span class="op" id="7767750">.</span><span class="ident" id="7767751">Write</span><span class="op" id="7767756">(</span><span class="ident" id="7767757">b</span><span class="op" id="7767758">[</span><span class="op" id="7767759">:</span><span class="ident" id="7767760">n</span><span class="op" id="7767761">]</span><span class="op" id="7767762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767767">if</span>&nbsp;<span class="ident" id="7767770">err1</span>&nbsp;<span class="op" id="7767775">!=</span>&nbsp;<span class="ident" id="7767778">nil</span>&nbsp;<span class="op" id="7767782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767788">t</span><span class="op" id="7767789">.</span><span class="ident" id="7767790">Errorf</span><span class="op" id="7767796">(</span><span class="string" id="7767797">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7767828">,</span>&nbsp;<span class="ident" id="7767830">fn</span><span class="op" id="7767832">,</span>&nbsp;<span class="ident" id="7767834">order</span><span class="op" id="7767839">,</span>&nbsp;<span class="ident" id="7767841">litWidth</span><span class="op" id="7767849">,</span>&nbsp;<span class="ident" id="7767851">err1</span><span class="op" id="7767855">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767861">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767876">if</span>&nbsp;<span class="ident" id="7767879">err0</span>&nbsp;<span class="op" id="7767884">==</span>&nbsp;<span class="ident" id="7767887">io</span><span class="op" id="7767889">.</span><span class="ident" id="7767890">EOF</span>&nbsp;<span class="op" id="7767894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767900">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767909">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7767916">}</span><span class="op" id="7767917">(</span><span class="op" id="7767918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7767921">lzwr</span>&nbsp;<span class="op" id="7767926">:=</span>&nbsp;<span class="ident" id="7767929">NewReader</span><span class="op" id="7767938">(</span><span class="ident" id="7767939">piper</span><span class="op" id="7767944">,</span>&nbsp;<span class="ident" id="7767946">order</span><span class="op" id="7767951">,</span>&nbsp;<span class="ident" id="7767953">litWidth</span><span class="op" id="7767961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7767964">defer</span>&nbsp;<span class="ident" id="7767970">lzwr</span><span class="op" id="7767974">.</span><span class="ident" id="7767975">Close</span><span class="op" id="7767980">(</span><span class="op" id="7767981">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7767985">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768006">b0</span><span class="op" id="7768008">,</span>&nbsp;<span class="ident" id="7768010">err0</span>&nbsp;<span class="op" id="7768015">:=</span>&nbsp;<span class="ident" id="7768018">ioutil</span><span class="op" id="7768024">.</span><span class="ident" id="7768025">ReadAll</span><span class="op" id="7768032">(</span><span class="ident" id="7768033">golden</span><span class="op" id="7768039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768042">b1</span><span class="op" id="7768044">,</span>&nbsp;<span class="ident" id="7768046">err1</span>&nbsp;<span class="op" id="7768051">:=</span>&nbsp;<span class="ident" id="7768054">ioutil</span><span class="op" id="7768060">.</span><span class="ident" id="7768061">ReadAll</span><span class="op" id="7768068">(</span><span class="ident" id="7768069">lzwr</span><span class="op" id="7768073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768076">if</span>&nbsp;<span class="ident" id="7768079">err0</span>&nbsp;<span class="op" id="7768084">!=</span>&nbsp;<span class="ident" id="7768087">nil</span>&nbsp;<span class="op" id="7768091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768095">t</span><span class="op" id="7768096">.</span><span class="ident" id="7768097">Errorf</span><span class="op" id="7768103">(</span><span class="string" id="7768104">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7768135">,</span>&nbsp;<span class="ident" id="7768137">fn</span><span class="op" id="7768139">,</span>&nbsp;<span class="ident" id="7768141">order</span><span class="op" id="7768146">,</span>&nbsp;<span class="ident" id="7768148">litWidth</span><span class="op" id="7768156">,</span>&nbsp;<span class="ident" id="7768158">err0</span><span class="op" id="7768162">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768166">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768177">if</span>&nbsp;<span class="ident" id="7768180">err1</span>&nbsp;<span class="op" id="7768185">!=</span>&nbsp;<span class="ident" id="7768188">nil</span>&nbsp;<span class="op" id="7768192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768196">t</span><span class="op" id="7768197">.</span><span class="ident" id="7768198">Errorf</span><span class="op" id="7768204">(</span><span class="string" id="7768205">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7768236">,</span>&nbsp;<span class="ident" id="7768238">fn</span><span class="op" id="7768240">,</span>&nbsp;<span class="ident" id="7768242">order</span><span class="op" id="7768247">,</span>&nbsp;<span class="ident" id="7768249">litWidth</span><span class="op" id="7768257">,</span>&nbsp;<span class="ident" id="7768259">err1</span><span class="op" id="7768263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768267">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768278">if</span>&nbsp;<span class="builtinfunc" id="7768281">len</span><span class="op" id="7768284">(</span><span class="ident" id="7768285">b1</span><span class="op" id="7768287">)</span>&nbsp;<span class="op" id="7768289">!=</span>&nbsp;<span class="builtinfunc" id="7768292">len</span><span class="op" id="7768295">(</span><span class="ident" id="7768296">b0</span><span class="op" id="7768298">)</span>&nbsp;<span class="op" id="7768300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768304">t</span><span class="op" id="7768305">.</span><span class="ident" id="7768306">Errorf</span><span class="op" id="7768312">(</span><span class="string" id="7768313">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="7768366">,</span>&nbsp;<span class="ident" id="7768368">fn</span><span class="op" id="7768370">,</span>&nbsp;<span class="ident" id="7768372">order</span><span class="op" id="7768377">,</span>&nbsp;<span class="ident" id="7768379">litWidth</span><span class="op" id="7768387">,</span>&nbsp;<span class="builtinfunc" id="7768389">len</span><span class="op" id="7768392">(</span><span class="ident" id="7768393">b1</span><span class="op" id="7768395">)</span><span class="op" id="7768396">,</span>&nbsp;<span class="builtinfunc" id="7768398">len</span><span class="op" id="7768401">(</span><span class="ident" id="7768402">b0</span><span class="op" id="7768404">)</span><span class="op" id="7768405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768409">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768417">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768420">for</span>&nbsp;<span class="ident" id="7768424">i</span>&nbsp;<span class="op" id="7768426">:=</span>&nbsp;<span class="num" id="7768429">0</span><span class="op" id="7768430">;</span>&nbsp;<span class="ident" id="7768432">i</span>&nbsp;<span class="op" id="7768434">&lt;</span>&nbsp;<span class="builtinfunc" id="7768436">len</span><span class="op" id="7768439">(</span><span class="ident" id="7768440">b0</span><span class="op" id="7768442">)</span><span class="op" id="7768443">;</span>&nbsp;<span class="ident" id="7768445">i</span><span class="op" id="7768446">++</span>&nbsp;<span class="op" id="7768449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768453">if</span>&nbsp;<span class="ident" id="7768456">b1</span><span class="op" id="7768458">[</span><span class="ident" id="7768459">i</span><span class="op" id="7768460">]</span>&nbsp;<span class="op" id="7768462">!=</span>&nbsp;<span class="ident" id="7768465">b0</span><span class="op" id="7768467">[</span><span class="ident" id="7768468">i</span><span class="op" id="7768469">]</span>&nbsp;<span class="op" id="7768471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768476">t</span><span class="op" id="7768477">.</span><span class="ident" id="7768478">Errorf</span><span class="op" id="7768484">(</span><span class="string" id="7768485">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="7768548">,</span>&nbsp;<span class="ident" id="7768550">fn</span><span class="op" id="7768552">,</span>&nbsp;<span class="ident" id="7768554">order</span><span class="op" id="7768559">,</span>&nbsp;<span class="ident" id="7768561">litWidth</span><span class="op" id="7768569">,</span>&nbsp;<span class="ident" id="7768571">i</span><span class="op" id="7768572">,</span>&nbsp;<span class="ident" id="7768574">b1</span><span class="op" id="7768576">[</span><span class="ident" id="7768577">i</span><span class="op" id="7768578">]</span><span class="op" id="7768579">,</span>&nbsp;<span class="ident" id="7768581">b0</span><span class="op" id="7768583">[</span><span class="ident" id="7768584">i</span><span class="op" id="7768585">]</span><span class="op" id="7768586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768591">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768600">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768603">}</span><br>
<span class="lineno"></span><span class="op" id="7768605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7768608">func</span>&nbsp;<span class="ident" id="7768613">TestWriter</span><span class="op" id="7768623">(</span><span class="ident" id="7768624">t</span>&nbsp;<span class="op" id="7768626">*</span><span class="ident" id="7768627">testing</span><span class="op" id="7768634">.</span><span class="ident" id="7768635">T</span><span class="op" id="7768636">)</span>&nbsp;<span class="op" id="7768638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768641">for</span>&nbsp;<span class="ident" id="7768645">_</span><span class="op" id="7768646">,</span>&nbsp;<span class="ident" id="7768648">filename</span>&nbsp;<span class="op" id="7768657">:=</span>&nbsp;<span class="keyword" id="7768660">range</span>&nbsp;<span class="ident" id="7768666">filenames</span>&nbsp;<span class="op" id="7768676">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768680">for</span>&nbsp;<span class="ident" id="7768684">_</span><span class="op" id="7768685">,</span>&nbsp;<span class="ident" id="7768687">order</span>&nbsp;<span class="op" id="7768693">:=</span>&nbsp;<span class="keyword" id="7768696">range</span>&nbsp;<span class="op" id="7768702">[</span><span class="op" id="7768703">...</span><span class="op" id="7768706">]</span><span class="ident" id="7768707">Order</span><span class="op" id="7768712">{</span><span class="ident" id="7768713">LSB</span><span class="op" id="7768716">,</span>&nbsp;<span class="ident" id="7768718">MSB</span><span class="op" id="7768721">}</span>&nbsp;<span class="op" id="7768723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7768728">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7768808">for</span>&nbsp;<span class="ident" id="7768812">_</span><span class="op" id="7768813">,</span>&nbsp;<span class="ident" id="7768815">litWidth</span>&nbsp;<span class="op" id="7768824">:=</span>&nbsp;<span class="keyword" id="7768827">range</span>&nbsp;<span class="op" id="7768833">[</span><span class="op" id="7768834">...</span><span class="op" id="7768837">]</span><span class="builtintype" id="7768838">int</span><span class="op" id="7768841">{</span><span class="num" id="7768842">6</span><span class="op" id="7768843">,</span>&nbsp;<span class="num" id="7768845">7</span><span class="op" id="7768846">,</span>&nbsp;<span class="num" id="7768848">8</span><span class="op" id="7768849">}</span>&nbsp;<span class="op" id="7768851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768857">testFile</span><span class="op" id="7768865">(</span><span class="ident" id="7768866">t</span><span class="op" id="7768867">,</span>&nbsp;<span class="ident" id="7768869">filename</span><span class="op" id="7768877">,</span>&nbsp;<span class="ident" id="7768879">order</span><span class="op" id="7768884">,</span>&nbsp;<span class="ident" id="7768886">litWidth</span><span class="op" id="7768894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768899">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7768906">}</span><br>
<span class="lineno"></span><span class="op" id="7768908">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7768911">func</span>&nbsp;<span class="ident" id="7768916">TestWriterReturnValues</span><span class="op" id="7768938">(</span><span class="ident" id="7768939">t</span>&nbsp;<span class="op" id="7768941">*</span><span class="ident" id="7768942">testing</span><span class="op" id="7768949">.</span><span class="ident" id="7768950">T</span><span class="op" id="7768951">)</span>&nbsp;<span class="op" id="7768953">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768956">w</span>&nbsp;<span class="op" id="7768958">:=</span>&nbsp;<span class="ident" id="7768961">NewWriter</span><span class="op" id="7768970">(</span><span class="ident" id="7768971">ioutil</span><span class="op" id="7768977">.</span><span class="ident" id="7768978">Discard</span><span class="op" id="7768985">,</span>&nbsp;<span class="ident" id="7768987">LSB</span><span class="op" id="7768990">,</span>&nbsp;<span class="num" id="7768992">8</span><span class="op" id="7768993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7768996">n</span><span class="op" id="7768997">,</span>&nbsp;<span class="ident" id="7768999">err</span>&nbsp;<span class="op" id="7769003">:=</span>&nbsp;<span class="ident" id="7769006">w</span><span class="op" id="7769007">.</span><span class="ident" id="7769008">Write</span><span class="op" id="7769013">(</span><span class="op" id="7769014">[</span><span class="op" id="7769015">]</span><span class="builtintype" id="7769016">byte</span><span class="op" id="7769020">(</span><span class="string" id="7769021">&#34;asdf&#34;</span><span class="op" id="7769027">)</span><span class="op" id="7769028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769031">if</span>&nbsp;<span class="ident" id="7769034">n</span>&nbsp;<span class="op" id="7769036">!=</span>&nbsp;<span class="num" id="7769039">4</span>&nbsp;<span class="op" id="7769041">||</span>&nbsp;<span class="ident" id="7769044">err</span>&nbsp;<span class="op" id="7769048">!=</span>&nbsp;<span class="ident" id="7769051">nil</span>&nbsp;<span class="op" id="7769055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769059">t</span><span class="op" id="7769060">.</span><span class="ident" id="7769061">Errorf</span><span class="op" id="7769067">(</span><span class="string" id="7769068">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="7769093">,</span>&nbsp;<span class="ident" id="7769095">n</span><span class="op" id="7769096">,</span>&nbsp;<span class="ident" id="7769098">err</span><span class="op" id="7769101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769104">}</span><br>
<span class="lineno">105</span><span class="op" id="7769106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769109">func</span>&nbsp;<span class="ident" id="7769114">benchmarkEncoder</span><span class="op" id="7769130">(</span><span class="ident" id="7769131">b</span>&nbsp;<span class="op" id="7769133">*</span><span class="ident" id="7769134">testing</span><span class="op" id="7769141">.</span><span class="ident" id="7769142">B</span><span class="op" id="7769143">,</span>&nbsp;<span class="ident" id="7769145">n</span>&nbsp;<span class="builtintype" id="7769147">int</span><span class="op" id="7769150">)</span>&nbsp;<span class="op" id="7769152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769155">b</span><span class="op" id="7769156">.</span><span class="ident" id="7769157">StopTimer</span><span class="op" id="7769166">(</span><span class="op" id="7769167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769170">b</span><span class="op" id="7769171">.</span><span class="ident" id="7769172">SetBytes</span><span class="op" id="7769180">(</span><span class="ident" id="7769181">int64</span><span class="op" id="7769186">(</span><span class="ident" id="7769187">n</span><span class="op" id="7769188">)</span><span class="op" id="7769189">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769192">buf0</span><span class="op" id="7769196">,</span>&nbsp;<span class="ident" id="7769198">err</span>&nbsp;<span class="op" id="7769202">:=</span>&nbsp;<span class="ident" id="7769205">ioutil</span><span class="op" id="7769211">.</span><span class="ident" id="7769212">ReadFile</span><span class="op" id="7769220">(</span><span class="string" id="7769221">&#34;../testdata/e.txt&#34;</span><span class="op" id="7769240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769243">if</span>&nbsp;<span class="ident" id="7769246">err</span>&nbsp;<span class="op" id="7769250">!=</span>&nbsp;<span class="ident" id="7769253">nil</span>&nbsp;<span class="op" id="7769257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769261">b</span><span class="op" id="7769262">.</span><span class="ident" id="7769263">Fatal</span><span class="op" id="7769268">(</span><span class="ident" id="7769269">err</span><span class="op" id="7769272">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769278">if</span>&nbsp;<span class="builtinfunc" id="7769281">len</span><span class="op" id="7769284">(</span><span class="ident" id="7769285">buf0</span><span class="op" id="7769289">)</span>&nbsp;<span class="op" id="7769291">==</span>&nbsp;<span class="num" id="7769294">0</span>&nbsp;<span class="op" id="7769296">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769300">b</span><span class="op" id="7769301">.</span><span class="ident" id="7769302">Fatalf</span><span class="op" id="7769308">(</span><span class="string" id="7769309">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="7769332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769338">buf1</span>&nbsp;<span class="op" id="7769343">:=</span>&nbsp;<span class="builtinfunc" id="7769346">make</span><span class="op" id="7769350">(</span><span class="op" id="7769351">[</span><span class="op" id="7769352">]</span><span class="builtintype" id="7769353">byte</span><span class="op" id="7769357">,</span>&nbsp;<span class="ident" id="7769359">n</span><span class="op" id="7769360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769363">for</span>&nbsp;<span class="ident" id="7769367">i</span>&nbsp;<span class="op" id="7769369">:=</span>&nbsp;<span class="num" id="7769372">0</span><span class="op" id="7769373">;</span>&nbsp;<span class="ident" id="7769375">i</span>&nbsp;<span class="op" id="7769377">&lt;</span>&nbsp;<span class="ident" id="7769379">n</span><span class="op" id="7769380">;</span>&nbsp;<span class="ident" id="7769382">i</span>&nbsp;<span class="op" id="7769384">+=</span>&nbsp;<span class="builtinfunc" id="7769387">len</span><span class="op" id="7769390">(</span><span class="ident" id="7769391">buf0</span><span class="op" id="7769395">)</span>&nbsp;<span class="op" id="7769397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769401">if</span>&nbsp;<span class="builtinfunc" id="7769404">len</span><span class="op" id="7769407">(</span><span class="ident" id="7769408">buf0</span><span class="op" id="7769412">)</span>&nbsp;<span class="op" id="7769414">&gt;</span>&nbsp;<span class="ident" id="7769416">n</span><span class="op" id="7769417">-</span><span class="ident" id="7769418">i</span>&nbsp;<span class="op" id="7769420">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769425">buf0</span>&nbsp;<span class="op" id="7769430">=</span>&nbsp;<span class="ident" id="7769432">buf0</span><span class="op" id="7769436">[</span><span class="op" id="7769437">:</span><span class="ident" id="7769438">n</span><span class="op" id="7769439">-</span><span class="ident" id="7769440">i</span><span class="op" id="7769441">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7769449">copy</span><span class="op" id="7769453">(</span><span class="ident" id="7769454">buf1</span><span class="op" id="7769458">[</span><span class="ident" id="7769459">i</span><span class="op" id="7769460">:</span><span class="op" id="7769461">]</span><span class="op" id="7769462">,</span>&nbsp;<span class="ident" id="7769464">buf0</span><span class="op" id="7769468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769474">buf0</span>&nbsp;<span class="op" id="7769479">=</span>&nbsp;<span class="ident" id="7769481">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769486">runtime</span><span class="op" id="7769493">.</span><span class="ident" id="7769494">GC</span><span class="op" id="7769496">(</span><span class="op" id="7769497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769500">b</span><span class="op" id="7769501">.</span><span class="ident" id="7769502">StartTimer</span><span class="op" id="7769512">(</span><span class="op" id="7769513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7769516">for</span>&nbsp;<span class="ident" id="7769520">i</span>&nbsp;<span class="op" id="7769522">:=</span>&nbsp;<span class="num" id="7769525">0</span><span class="op" id="7769526">;</span>&nbsp;<span class="ident" id="7769528">i</span>&nbsp;<span class="op" id="7769530">&lt;</span>&nbsp;<span class="ident" id="7769532">b</span><span class="op" id="7769533">.</span><span class="ident" id="7769534">N</span><span class="op" id="7769535">;</span>&nbsp;<span class="ident" id="7769537">i</span><span class="op" id="7769538">++</span>&nbsp;<span class="op" id="7769541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769545">w</span>&nbsp;<span class="op" id="7769547">:=</span>&nbsp;<span class="ident" id="7769550">NewWriter</span><span class="op" id="7769559">(</span><span class="ident" id="7769560">ioutil</span><span class="op" id="7769566">.</span><span class="ident" id="7769567">Discard</span><span class="op" id="7769574">,</span>&nbsp;<span class="ident" id="7769576">LSB</span><span class="op" id="7769579">,</span>&nbsp;<span class="num" id="7769581">8</span><span class="op" id="7769582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769586">w</span><span class="op" id="7769587">.</span><span class="ident" id="7769588">Write</span><span class="op" id="7769593">(</span><span class="ident" id="7769594">buf1</span><span class="op" id="7769598">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769602">w</span><span class="op" id="7769603">.</span><span class="ident" id="7769604">Close</span><span class="op" id="7769609">(</span><span class="op" id="7769610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7769613">}</span><br>
<span class="lineno"></span><span class="op" id="7769615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769618">func</span>&nbsp;<span class="ident" id="7769623">BenchmarkEncoder1e4</span><span class="op" id="7769642">(</span><span class="ident" id="7769643">b</span>&nbsp;<span class="op" id="7769645">*</span><span class="ident" id="7769646">testing</span><span class="op" id="7769653">.</span><span class="ident" id="7769654">B</span><span class="op" id="7769655">)</span>&nbsp;<span class="op" id="7769657">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769660">benchmarkEncoder</span><span class="op" id="7769676">(</span><span class="ident" id="7769677">b</span><span class="op" id="7769678">,</span>&nbsp;<span class="num" id="7769680">1e4</span><span class="op" id="7769683">)</span><br>
<span class="lineno"></span><span class="op" id="7769685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769688">func</span>&nbsp;<span class="ident" id="7769693">BenchmarkEncoder1e5</span><span class="op" id="7769712">(</span><span class="ident" id="7769713">b</span>&nbsp;<span class="op" id="7769715">*</span><span class="ident" id="7769716">testing</span><span class="op" id="7769723">.</span><span class="ident" id="7769724">B</span><span class="op" id="7769725">)</span>&nbsp;<span class="op" id="7769727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769730">benchmarkEncoder</span><span class="op" id="7769746">(</span><span class="ident" id="7769747">b</span><span class="op" id="7769748">,</span>&nbsp;<span class="num" id="7769750">1e5</span><span class="op" id="7769753">)</span><br>
<span class="lineno">140</span><span class="op" id="7769755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7769758">func</span>&nbsp;<span class="ident" id="7769763">BenchmarkEncoder1e6</span><span class="op" id="7769782">(</span><span class="ident" id="7769783">b</span>&nbsp;<span class="op" id="7769785">*</span><span class="ident" id="7769786">testing</span><span class="op" id="7769793">.</span><span class="ident" id="7769794">B</span><span class="op" id="7769795">)</span>&nbsp;<span class="op" id="7769797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7769800">benchmarkEncoder</span><span class="op" id="7769816">(</span><span class="ident" id="7769817">b</span><span class="op" id="7769818">,</span>&nbsp;<span class="num" id="7769820">1e6</span><span class="op" id="7769823">)</span><br>
<span class="lineno"></span><span class="op" id="7769825">}</span>
</div>
</body>
</html>
