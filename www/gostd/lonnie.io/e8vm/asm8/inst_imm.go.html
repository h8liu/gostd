<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5092676">package</span>&nbsp;<span class="ident" id="5092684">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5092690">import</span>&nbsp;<span class="op" id="5092697">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092700">&#34;strconv&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092712">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5092734">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5092737">var</span>&nbsp;<span class="op" id="5092741">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5092744">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5092771">opImsMap</span>&nbsp;<span class="op" id="5092780">=</span>&nbsp;<span class="keyword" id="5092782">map</span><span class="op" id="5092785">[</span><span class="builtintype" id="5092786">string</span><span class="op" id="5092792">]</span><span class="builtintype" id="5092793">uint32</span><span class="op" id="5092799">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092803">&#34;addi&#34;</span><span class="op" id="5092809">:</span>&nbsp;<span class="num" id="5092811">1</span><span class="op" id="5092812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092816">&#34;slti&#34;</span><span class="op" id="5092822">:</span>&nbsp;<span class="num" id="5092824">2</span><span class="op" id="5092825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5092828">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5092832">opMemMap</span>&nbsp;<span class="op" id="5092841">=</span>&nbsp;<span class="keyword" id="5092843">map</span><span class="op" id="5092846">[</span><span class="builtintype" id="5092847">string</span><span class="op" id="5092853">]</span><span class="builtintype" id="5092854">uint32</span><span class="op" id="5092860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092864">&#34;lw&#34;</span><span class="op" id="5092868">:</span>&nbsp;&nbsp;<span class="num" id="5092871">6</span><span class="op" id="5092872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092876">&#34;lb&#34;</span><span class="op" id="5092880">:</span>&nbsp;&nbsp;<span class="num" id="5092883">7</span><span class="op" id="5092884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092888">&#34;lbu&#34;</span><span class="op" id="5092893">:</span>&nbsp;<span class="num" id="5092895">8</span><span class="op" id="5092896">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092900">&#34;sw&#34;</span><span class="op" id="5092904">:</span>&nbsp;&nbsp;<span class="num" id="5092907">9</span><span class="op" id="5092908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092912">&#34;sb&#34;</span><span class="op" id="5092916">:</span>&nbsp;&nbsp;<span class="num" id="5092919">10</span><span class="op" id="5092921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5092924">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5092928">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5092957">opImuMap</span>&nbsp;<span class="op" id="5092966">=</span>&nbsp;<span class="keyword" id="5092968">map</span><span class="op" id="5092971">[</span><span class="builtintype" id="5092972">string</span><span class="op" id="5092978">]</span><span class="builtintype" id="5092979">uint32</span><span class="op" id="5092985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5092989">&#34;andi&#34;</span><span class="op" id="5092995">:</span>&nbsp;<span class="num" id="5092997">3</span><span class="op" id="5092998">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5093002">&#34;ori&#34;</span><span class="op" id="5093007">:</span>&nbsp;&nbsp;<span class="num" id="5093010">4</span><span class="op" id="5093011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5093018">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093053">opImmMap</span>&nbsp;<span class="op" id="5093062">=</span>&nbsp;<span class="keyword" id="5093064">map</span><span class="op" id="5093067">[</span><span class="builtintype" id="5093068">string</span><span class="op" id="5093074">]</span><span class="builtintype" id="5093075">uint32</span><span class="op" id="5093081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5093085">&#34;lui&#34;</span><span class="op" id="5093090">:</span>&nbsp;<span class="num" id="5093092">5</span><span class="op" id="5093093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093096">}</span><br>
<span class="lineno"></span><span class="op" id="5093098">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5093101">//&nbsp;parseImu&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5093149">func</span>&nbsp;<span class="ident" id="5093154">parseImu</span><span class="op" id="5093162">(</span><span class="ident" id="5093163">p</span>&nbsp;<span class="op" id="5093165">*</span><span class="ident" id="5093166">parser</span><span class="op" id="5093172">,</span>&nbsp;<span class="ident" id="5093174">op</span>&nbsp;<span class="op" id="5093177">*</span><span class="ident" id="5093178">lex8</span><span class="op" id="5093182">.</span><span class="ident" id="5093183">Token</span><span class="op" id="5093188">)</span>&nbsp;<span class="builtintype" id="5093190">uint32</span>&nbsp;<span class="op" id="5093197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093200">ret</span><span class="op" id="5093203">,</span>&nbsp;<span class="ident" id="5093205">e</span>&nbsp;<span class="op" id="5093207">:=</span>&nbsp;<span class="ident" id="5093210">strconv</span><span class="op" id="5093217">.</span><span class="ident" id="5093218">ParseUint</span><span class="op" id="5093227">(</span><span class="ident" id="5093228">op</span><span class="op" id="5093230">.</span><span class="ident" id="5093231">Lit</span><span class="op" id="5093234">,</span>&nbsp;<span class="num" id="5093236">0</span><span class="op" id="5093237">,</span>&nbsp;<span class="num" id="5093239">32</span><span class="op" id="5093241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093244">if</span>&nbsp;<span class="ident" id="5093247">e</span>&nbsp;<span class="op" id="5093249">!=</span>&nbsp;<span class="ident" id="5093252">nil</span>&nbsp;<span class="op" id="5093256">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093260">p</span><span class="op" id="5093261">.</span><span class="ident" id="5093262">err</span><span class="op" id="5093265">(</span><span class="ident" id="5093266">op</span><span class="op" id="5093268">.</span><span class="ident" id="5093269">Pos</span><span class="op" id="5093272">,</span>&nbsp;<span class="string" id="5093274">&#34;invalid&nbsp;unsigned&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5093309">,</span>&nbsp;<span class="ident" id="5093311">op</span><span class="op" id="5093313">.</span><span class="ident" id="5093314">Lit</span><span class="op" id="5093317">,</span>&nbsp;<span class="ident" id="5093319">e</span><span class="op" id="5093320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093324">return</span>&nbsp;<span class="num" id="5093331">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093338">if</span>&nbsp;<span class="op" id="5093341">(</span><span class="ident" id="5093342">ret</span>&nbsp;<span class="op" id="5093346">&amp;</span>&nbsp;<span class="num" id="5093348">0xffff</span><span class="op" id="5093354">)</span>&nbsp;<span class="op" id="5093356">!=</span>&nbsp;<span class="ident" id="5093359">ret</span>&nbsp;<span class="op" id="5093363">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093367">p</span><span class="op" id="5093368">.</span><span class="ident" id="5093369">err</span><span class="op" id="5093372">(</span><span class="ident" id="5093373">op</span><span class="op" id="5093375">.</span><span class="ident" id="5093376">Pos</span><span class="op" id="5093379">,</span>&nbsp;<span class="string" id="5093381">&#34;immediate&nbsp;too&nbsp;large:&nbsp;%s&#34;</span><span class="op" id="5093406">,</span>&nbsp;<span class="ident" id="5093408">op</span><span class="op" id="5093410">.</span><span class="ident" id="5093411">Lit</span><span class="op" id="5093414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093418">return</span>&nbsp;<span class="num" id="5093425">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093428">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093432">return</span>&nbsp;<span class="builtintype" id="5093439">uint32</span><span class="op" id="5093445">(</span><span class="ident" id="5093446">ret</span><span class="op" id="5093449">)</span><br>
<span class="lineno">50</span><span class="op" id="5093451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5093454">//&nbsp;parseIms&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5093502">func</span>&nbsp;<span class="ident" id="5093507">parseIms</span><span class="op" id="5093515">(</span><span class="ident" id="5093516">p</span>&nbsp;<span class="op" id="5093518">*</span><span class="ident" id="5093519">parser</span><span class="op" id="5093525">,</span>&nbsp;<span class="ident" id="5093527">op</span>&nbsp;<span class="op" id="5093530">*</span><span class="ident" id="5093531">lex8</span><span class="op" id="5093535">.</span><span class="ident" id="5093536">Token</span><span class="op" id="5093541">)</span>&nbsp;<span class="builtintype" id="5093543">uint32</span>&nbsp;<span class="op" id="5093550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093553">ret</span><span class="op" id="5093556">,</span>&nbsp;<span class="ident" id="5093558">e</span>&nbsp;<span class="op" id="5093560">:=</span>&nbsp;<span class="ident" id="5093563">strconv</span><span class="op" id="5093570">.</span><span class="ident" id="5093571">ParseInt</span><span class="op" id="5093579">(</span><span class="ident" id="5093580">op</span><span class="op" id="5093582">.</span><span class="ident" id="5093583">Lit</span><span class="op" id="5093586">,</span>&nbsp;<span class="num" id="5093588">0</span><span class="op" id="5093589">,</span>&nbsp;<span class="num" id="5093591">32</span><span class="op" id="5093593">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093596">if</span>&nbsp;<span class="ident" id="5093599">e</span>&nbsp;<span class="op" id="5093601">!=</span>&nbsp;<span class="ident" id="5093604">nil</span>&nbsp;<span class="op" id="5093608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093612">p</span><span class="op" id="5093613">.</span><span class="ident" id="5093614">err</span><span class="op" id="5093617">(</span><span class="ident" id="5093618">op</span><span class="op" id="5093620">.</span><span class="ident" id="5093621">Pos</span><span class="op" id="5093624">,</span>&nbsp;<span class="string" id="5093626">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5093659">,</span>&nbsp;<span class="ident" id="5093661">op</span><span class="op" id="5093663">.</span><span class="ident" id="5093664">Lit</span><span class="op" id="5093667">,</span>&nbsp;<span class="ident" id="5093669">e</span><span class="op" id="5093670">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093674">return</span>&nbsp;<span class="num" id="5093681">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093688">if</span>&nbsp;<span class="ident" id="5093691">ret</span>&nbsp;<span class="op" id="5093695">&gt;</span>&nbsp;<span class="num" id="5093697">0x7fff</span>&nbsp;<span class="op" id="5093704">||</span>&nbsp;<span class="ident" id="5093707">ret</span>&nbsp;<span class="op" id="5093711">&lt;</span>&nbsp;<span class="op" id="5093713">-</span><span class="num" id="5093714">0x8000</span>&nbsp;<span class="op" id="5093721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093725">p</span><span class="op" id="5093726">.</span><span class="ident" id="5093727">err</span><span class="op" id="5093730">(</span><span class="ident" id="5093731">op</span><span class="op" id="5093733">.</span><span class="ident" id="5093734">Pos</span><span class="op" id="5093737">,</span>&nbsp;<span class="string" id="5093739">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5093774">,</span>&nbsp;<span class="ident" id="5093776">op</span><span class="op" id="5093778">.</span><span class="ident" id="5093779">Lit</span><span class="op" id="5093782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093786">return</span>&nbsp;<span class="num" id="5093793">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5093796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093800">return</span>&nbsp;<span class="builtintype" id="5093807">uint32</span><span class="op" id="5093813">(</span><span class="ident" id="5093814">ret</span><span class="op" id="5093817">)</span>&nbsp;<span class="op" id="5093819">&amp;</span>&nbsp;<span class="num" id="5093821">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5093828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5093831">//&nbsp;parseImm&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5093879">func</span>&nbsp;<span class="ident" id="5093884">parseImm</span><span class="op" id="5093892">(</span><span class="ident" id="5093893">p</span>&nbsp;<span class="op" id="5093895">*</span><span class="ident" id="5093896">parser</span><span class="op" id="5093902">,</span>&nbsp;<span class="ident" id="5093904">op</span>&nbsp;<span class="op" id="5093907">*</span><span class="ident" id="5093908">lex8</span><span class="op" id="5093912">.</span><span class="ident" id="5093913">Token</span><span class="op" id="5093918">)</span>&nbsp;<span class="builtintype" id="5093920">uint32</span>&nbsp;<span class="op" id="5093927">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093930">ret</span><span class="op" id="5093933">,</span>&nbsp;<span class="ident" id="5093935">e</span>&nbsp;<span class="op" id="5093937">:=</span>&nbsp;<span class="ident" id="5093940">strconv</span><span class="op" id="5093947">.</span><span class="ident" id="5093948">ParseInt</span><span class="op" id="5093956">(</span><span class="ident" id="5093957">op</span><span class="op" id="5093959">.</span><span class="ident" id="5093960">Lit</span><span class="op" id="5093963">,</span>&nbsp;<span class="num" id="5093965">0</span><span class="op" id="5093966">,</span>&nbsp;<span class="num" id="5093968">32</span><span class="op" id="5093970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5093973">if</span>&nbsp;<span class="ident" id="5093976">e</span>&nbsp;<span class="op" id="5093978">!=</span>&nbsp;<span class="ident" id="5093981">nil</span>&nbsp;<span class="op" id="5093985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5093989">p</span><span class="op" id="5093990">.</span><span class="ident" id="5093991">err</span><span class="op" id="5093994">(</span><span class="ident" id="5093995">op</span><span class="op" id="5093997">.</span><span class="ident" id="5093998">Pos</span><span class="op" id="5094001">,</span>&nbsp;<span class="string" id="5094003">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5094036">,</span>&nbsp;<span class="ident" id="5094038">op</span><span class="op" id="5094040">.</span><span class="ident" id="5094041">Lit</span><span class="op" id="5094044">,</span>&nbsp;<span class="ident" id="5094046">e</span><span class="op" id="5094047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094051">return</span>&nbsp;<span class="num" id="5094058">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094061">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094065">if</span>&nbsp;<span class="ident" id="5094068">ret</span>&nbsp;<span class="op" id="5094072">&gt;</span>&nbsp;<span class="num" id="5094074">0xffff</span>&nbsp;<span class="op" id="5094081">||</span>&nbsp;<span class="ident" id="5094084">ret</span>&nbsp;<span class="op" id="5094088">&lt;</span>&nbsp;<span class="op" id="5094090">-</span><span class="num" id="5094091">0x8000</span>&nbsp;<span class="op" id="5094098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094102">p</span><span class="op" id="5094103">.</span><span class="ident" id="5094104">err</span><span class="op" id="5094107">(</span><span class="ident" id="5094108">op</span><span class="op" id="5094110">.</span><span class="ident" id="5094111">Pos</span><span class="op" id="5094114">,</span>&nbsp;<span class="string" id="5094116">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5094151">,</span>&nbsp;<span class="ident" id="5094153">op</span><span class="op" id="5094155">.</span><span class="ident" id="5094156">Lit</span><span class="op" id="5094159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094163">return</span>&nbsp;<span class="num" id="5094170">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094173">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094177">return</span>&nbsp;<span class="builtintype" id="5094184">uint32</span><span class="op" id="5094190">(</span><span class="ident" id="5094191">ret</span><span class="op" id="5094194">)</span>&nbsp;<span class="op" id="5094196">&amp;</span>&nbsp;<span class="num" id="5094198">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5094205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5094208">func</span>&nbsp;<span class="ident" id="5094213">makeInstImm</span><span class="op" id="5094224">(</span><span class="ident" id="5094225">op</span><span class="op" id="5094227">,</span>&nbsp;<span class="ident" id="5094229">d</span><span class="op" id="5094230">,</span>&nbsp;<span class="ident" id="5094232">s</span><span class="op" id="5094233">,</span>&nbsp;<span class="ident" id="5094235">im</span>&nbsp;<span class="builtintype" id="5094238">uint32</span><span class="op" id="5094244">)</span>&nbsp;<span class="op" id="5094246">*</span><span class="ident" id="5094247">inst</span>&nbsp;<span class="op" id="5094252">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094255">ret</span>&nbsp;<span class="op" id="5094259">:=</span>&nbsp;<span class="builtintype" id="5094262">uint32</span><span class="op" id="5094268">(</span><span class="num" id="5094269">0</span><span class="op" id="5094270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094273">ret</span>&nbsp;<span class="op" id="5094277">|=</span>&nbsp;<span class="op" id="5094280">(</span><span class="ident" id="5094281">op</span>&nbsp;<span class="op" id="5094284">&amp;</span>&nbsp;<span class="num" id="5094286">0xff</span><span class="op" id="5094290">)</span>&nbsp;<span class="op" id="5094292">&lt;&lt;</span>&nbsp;<span class="num" id="5094295">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094299">ret</span>&nbsp;<span class="op" id="5094303">|=</span>&nbsp;<span class="op" id="5094306">(</span><span class="ident" id="5094307">d</span>&nbsp;<span class="op" id="5094309">&amp;</span>&nbsp;<span class="num" id="5094311">0x7</span><span class="op" id="5094314">)</span>&nbsp;<span class="op" id="5094316">&lt;&lt;</span>&nbsp;<span class="num" id="5094319">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094323">ret</span>&nbsp;<span class="op" id="5094327">|=</span>&nbsp;<span class="op" id="5094330">(</span><span class="ident" id="5094331">s</span>&nbsp;<span class="op" id="5094333">&amp;</span>&nbsp;<span class="num" id="5094335">0x7</span><span class="op" id="5094338">)</span>&nbsp;<span class="op" id="5094340">&lt;&lt;</span>&nbsp;<span class="num" id="5094343">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094347">ret</span>&nbsp;<span class="op" id="5094351">|=</span>&nbsp;<span class="op" id="5094354">(</span><span class="ident" id="5094355">im</span>&nbsp;<span class="op" id="5094358">&amp;</span>&nbsp;<span class="num" id="5094360">0xffff</span><span class="op" id="5094366">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094370">return</span>&nbsp;<span class="op" id="5094377">&amp;</span><span class="ident" id="5094378">inst</span><span class="op" id="5094382">{</span><span class="ident" id="5094383">inst</span><span class="op" id="5094387">:</span>&nbsp;<span class="ident" id="5094389">ret</span><span class="op" id="5094392">}</span><br>
<span class="lineno"></span><span class="op" id="5094394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5094397">func</span>&nbsp;<span class="ident" id="5094402">parseInstImm</span><span class="op" id="5094414">(</span><span class="ident" id="5094415">p</span>&nbsp;<span class="op" id="5094417">*</span><span class="ident" id="5094418">parser</span><span class="op" id="5094424">,</span>&nbsp;<span class="ident" id="5094426">ops</span>&nbsp;<span class="op" id="5094430">[</span><span class="op" id="5094431">]</span><span class="op" id="5094432">*</span><span class="ident" id="5094433">lex8</span><span class="op" id="5094437">.</span><span class="ident" id="5094438">Token</span><span class="op" id="5094443">)</span>&nbsp;<span class="op" id="5094445">(</span><span class="op" id="5094446">*</span><span class="ident" id="5094447">inst</span><span class="op" id="5094451">,</span>&nbsp;<span class="builtintype" id="5094453">bool</span><span class="op" id="5094457">)</span>&nbsp;<span class="op" id="5094459">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094462">op0</span>&nbsp;<span class="op" id="5094466">:=</span>&nbsp;<span class="ident" id="5094469">ops</span><span class="op" id="5094472">[</span><span class="num" id="5094473">0</span><span class="op" id="5094474">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094477">opName</span>&nbsp;<span class="op" id="5094484">:=</span>&nbsp;<span class="ident" id="5094487">op0</span><span class="op" id="5094490">.</span><span class="ident" id="5094491">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094496">args</span>&nbsp;<span class="op" id="5094501">:=</span>&nbsp;<span class="ident" id="5094504">ops</span><span class="op" id="5094507">[</span><span class="num" id="5094508">1</span><span class="op" id="5094509">:</span><span class="op" id="5094510">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094514">var</span>&nbsp;<span class="op" id="5094518">(</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094522">op</span><span class="op" id="5094524">,</span>&nbsp;<span class="ident" id="5094526">d</span><span class="op" id="5094527">,</span>&nbsp;<span class="ident" id="5094529">s</span><span class="op" id="5094530">,</span>&nbsp;<span class="ident" id="5094532">im</span>&nbsp;<span class="builtintype" id="5094535">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094544">pack</span><span class="op" id="5094548">,</span>&nbsp;<span class="ident" id="5094550">sym</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5094557">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094566">fill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5094579">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094585">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5094598">*</span><span class="ident" id="5094599">lex8</span><span class="op" id="5094603">.</span><span class="ident" id="5094604">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094611">)</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094615">argCount</span>&nbsp;<span class="op" id="5094624">:=</span>&nbsp;<span class="keyword" id="5094627">func</span><span class="op" id="5094631">(</span><span class="ident" id="5094632">n</span>&nbsp;<span class="builtintype" id="5094634">int</span><span class="op" id="5094637">)</span>&nbsp;<span class="builtintype" id="5094639">bool</span>&nbsp;<span class="op" id="5094644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094648">if</span>&nbsp;<span class="op" id="5094651">!</span><span class="ident" id="5094652">argCount</span><span class="op" id="5094660">(</span><span class="ident" id="5094661">p</span><span class="op" id="5094662">,</span>&nbsp;<span class="ident" id="5094664">ops</span><span class="op" id="5094667">,</span>&nbsp;<span class="ident" id="5094669">n</span><span class="op" id="5094670">)</span>&nbsp;<span class="op" id="5094672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094677">return</span>&nbsp;<span class="builtintype" id="5094684">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094692">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094696">if</span>&nbsp;<span class="ident" id="5094699">n</span>&nbsp;<span class="op" id="5094701">&gt;=</span>&nbsp;<span class="num" id="5094704">1</span>&nbsp;<span class="op" id="5094706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094711">d</span>&nbsp;<span class="op" id="5094713">=</span>&nbsp;<span class="ident" id="5094715">parseReg</span><span class="op" id="5094723">(</span><span class="ident" id="5094724">p</span><span class="op" id="5094725">,</span>&nbsp;<span class="ident" id="5094727">args</span><span class="op" id="5094731">[</span><span class="num" id="5094732">0</span><span class="op" id="5094733">]</span><span class="op" id="5094734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094742">return</span>&nbsp;<span class="builtintype" id="5094749">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094755">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094759">parseSym</span>&nbsp;<span class="op" id="5094768">:=</span>&nbsp;<span class="keyword" id="5094771">func</span><span class="op" id="5094775">(</span><span class="ident" id="5094776">t</span>&nbsp;<span class="op" id="5094778">*</span><span class="ident" id="5094779">lex8</span><span class="op" id="5094783">.</span><span class="ident" id="5094784">Token</span><span class="op" id="5094789">,</span>&nbsp;<span class="ident" id="5094791">f</span>&nbsp;<span class="keyword" id="5094793">func</span><span class="op" id="5094797">(</span><span class="op" id="5094798">*</span><span class="ident" id="5094799">parser</span><span class="op" id="5094805">,</span>&nbsp;<span class="op" id="5094807">*</span><span class="ident" id="5094808">lex8</span><span class="op" id="5094812">.</span><span class="ident" id="5094813">Token</span><span class="op" id="5094818">)</span>&nbsp;<span class="builtintype" id="5094820">uint32</span><span class="op" id="5094826">)</span>&nbsp;<span class="op" id="5094828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094832">if</span>&nbsp;<span class="ident" id="5094835">isSymbol</span><span class="op" id="5094843">(</span><span class="ident" id="5094844">t</span><span class="op" id="5094845">.</span><span class="ident" id="5094846">Lit</span><span class="op" id="5094849">)</span>&nbsp;<span class="op" id="5094851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094856">pack</span><span class="op" id="5094860">,</span>&nbsp;<span class="ident" id="5094862">sym</span>&nbsp;<span class="op" id="5094866">=</span>&nbsp;<span class="ident" id="5094868">parseSym</span><span class="op" id="5094876">(</span><span class="ident" id="5094877">p</span><span class="op" id="5094878">,</span>&nbsp;<span class="ident" id="5094880">t</span><span class="op" id="5094881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094886">fill</span>&nbsp;<span class="op" id="5094891">=</span>&nbsp;<span class="ident" id="5094893">fillLow</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094904">symTok</span>&nbsp;<span class="op" id="5094911">=</span>&nbsp;<span class="ident" id="5094913">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094917">}</span>&nbsp;<span class="keyword" id="5094919">else</span>&nbsp;<span class="op" id="5094924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5094929">im</span>&nbsp;<span class="op" id="5094932">=</span>&nbsp;<span class="ident" id="5094934">f</span><span class="op" id="5094935">(</span><span class="ident" id="5094936">p</span><span class="op" id="5094937">,</span>&nbsp;<span class="ident" id="5094939">t</span><span class="op" id="5094940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5094947">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094951">var</span>&nbsp;<span class="ident" id="5094955">found</span>&nbsp;<span class="builtintype" id="5094961">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5094967">if</span>&nbsp;<span class="ident" id="5094970">op</span><span class="op" id="5094972">,</span>&nbsp;<span class="ident" id="5094974">found</span>&nbsp;<span class="op" id="5094980">=</span>&nbsp;<span class="ident" id="5094982">opImsMap</span><span class="op" id="5094990">[</span><span class="ident" id="5094991">opName</span><span class="op" id="5094997">]</span><span class="op" id="5094998">;</span>&nbsp;<span class="ident" id="5095000">found</span>&nbsp;<span class="op" id="5095006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5095010">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095038">if</span>&nbsp;<span class="ident" id="5095041">argCount</span><span class="op" id="5095049">(</span><span class="num" id="5095050">3</span><span class="op" id="5095051">)</span>&nbsp;<span class="op" id="5095053">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095058">s</span>&nbsp;<span class="op" id="5095060">=</span>&nbsp;<span class="ident" id="5095062">parseReg</span><span class="op" id="5095070">(</span><span class="ident" id="5095071">p</span><span class="op" id="5095072">,</span>&nbsp;<span class="ident" id="5095074">args</span><span class="op" id="5095078">[</span><span class="num" id="5095079">1</span><span class="op" id="5095080">]</span><span class="op" id="5095081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095086">parseSym</span><span class="op" id="5095094">(</span><span class="ident" id="5095095">args</span><span class="op" id="5095099">[</span><span class="num" id="5095100">2</span><span class="op" id="5095101">]</span><span class="op" id="5095102">,</span>&nbsp;<span class="ident" id="5095104">parseIms</span><span class="op" id="5095112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095119">}</span>&nbsp;<span class="keyword" id="5095121">else</span>&nbsp;<span class="keyword" id="5095126">if</span>&nbsp;<span class="ident" id="5095129">op</span><span class="op" id="5095131">,</span>&nbsp;<span class="ident" id="5095133">found</span>&nbsp;<span class="op" id="5095139">=</span>&nbsp;<span class="ident" id="5095141">opMemMap</span><span class="op" id="5095149">[</span><span class="ident" id="5095150">opName</span><span class="op" id="5095156">]</span><span class="op" id="5095157">;</span>&nbsp;<span class="ident" id="5095159">found</span>&nbsp;<span class="op" id="5095165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095169">if</span>&nbsp;<span class="builtinfunc" id="5095172">len</span><span class="op" id="5095175">(</span><span class="ident" id="5095176">args</span><span class="op" id="5095180">)</span>&nbsp;<span class="op" id="5095182">==</span>&nbsp;<span class="num" id="5095185">2</span>&nbsp;<span class="op" id="5095187">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5095192">//&nbsp;mem&nbsp;op&nbsp;can&nbsp;omit&nbsp;the&nbsp;offset&nbsp;if&nbsp;it&nbsp;is&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095236">d</span>&nbsp;<span class="op" id="5095238">=</span>&nbsp;<span class="ident" id="5095240">parseReg</span><span class="op" id="5095248">(</span><span class="ident" id="5095249">p</span><span class="op" id="5095250">,</span>&nbsp;<span class="ident" id="5095252">args</span><span class="op" id="5095256">[</span><span class="num" id="5095257">0</span><span class="op" id="5095258">]</span><span class="op" id="5095259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095264">s</span>&nbsp;<span class="op" id="5095266">=</span>&nbsp;<span class="ident" id="5095268">parseReg</span><span class="op" id="5095276">(</span><span class="ident" id="5095277">p</span><span class="op" id="5095278">,</span>&nbsp;<span class="ident" id="5095280">args</span><span class="op" id="5095284">[</span><span class="num" id="5095285">1</span><span class="op" id="5095286">]</span><span class="op" id="5095287">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095291">}</span>&nbsp;<span class="keyword" id="5095293">else</span>&nbsp;<span class="keyword" id="5095298">if</span>&nbsp;<span class="ident" id="5095301">argCount</span><span class="op" id="5095309">(</span><span class="num" id="5095310">3</span><span class="op" id="5095311">)</span>&nbsp;<span class="op" id="5095313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095318">s</span>&nbsp;<span class="op" id="5095320">=</span>&nbsp;<span class="ident" id="5095322">parseReg</span><span class="op" id="5095330">(</span><span class="ident" id="5095331">p</span><span class="op" id="5095332">,</span>&nbsp;<span class="ident" id="5095334">args</span><span class="op" id="5095338">[</span><span class="num" id="5095339">1</span><span class="op" id="5095340">]</span><span class="op" id="5095341">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095346">parseSym</span><span class="op" id="5095354">(</span><span class="ident" id="5095355">args</span><span class="op" id="5095359">[</span><span class="num" id="5095360">2</span><span class="op" id="5095361">]</span><span class="op" id="5095362">,</span>&nbsp;<span class="ident" id="5095364">parseIms</span><span class="op" id="5095372">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095379">}</span>&nbsp;<span class="keyword" id="5095381">else</span>&nbsp;<span class="keyword" id="5095386">if</span>&nbsp;<span class="ident" id="5095389">op</span><span class="op" id="5095391">,</span>&nbsp;<span class="ident" id="5095393">found</span>&nbsp;<span class="op" id="5095399">=</span>&nbsp;<span class="ident" id="5095401">opImuMap</span><span class="op" id="5095409">[</span><span class="ident" id="5095410">opName</span><span class="op" id="5095416">]</span><span class="op" id="5095417">;</span>&nbsp;<span class="ident" id="5095419">found</span>&nbsp;<span class="op" id="5095425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5095429">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095459">if</span>&nbsp;<span class="ident" id="5095462">argCount</span><span class="op" id="5095470">(</span><span class="num" id="5095471">3</span><span class="op" id="5095472">)</span>&nbsp;<span class="op" id="5095474">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095479">s</span>&nbsp;<span class="op" id="5095481">=</span>&nbsp;<span class="ident" id="5095483">parseReg</span><span class="op" id="5095491">(</span><span class="ident" id="5095492">p</span><span class="op" id="5095493">,</span>&nbsp;<span class="ident" id="5095495">args</span><span class="op" id="5095499">[</span><span class="num" id="5095500">1</span><span class="op" id="5095501">]</span><span class="op" id="5095502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095507">parseSym</span><span class="op" id="5095515">(</span><span class="ident" id="5095516">args</span><span class="op" id="5095520">[</span><span class="num" id="5095521">2</span><span class="op" id="5095522">]</span><span class="op" id="5095523">,</span>&nbsp;<span class="ident" id="5095525">parseImu</span><span class="op" id="5095533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095540">}</span>&nbsp;<span class="keyword" id="5095542">else</span>&nbsp;<span class="keyword" id="5095547">if</span>&nbsp;<span class="ident" id="5095550">op</span><span class="op" id="5095552">,</span>&nbsp;<span class="ident" id="5095554">found</span>&nbsp;<span class="op" id="5095560">=</span>&nbsp;<span class="ident" id="5095562">opImmMap</span><span class="op" id="5095570">[</span><span class="ident" id="5095571">opName</span><span class="op" id="5095577">]</span><span class="op" id="5095578">;</span>&nbsp;<span class="ident" id="5095580">found</span>&nbsp;<span class="op" id="5095586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5095590">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095626">if</span>&nbsp;<span class="ident" id="5095629">argCount</span><span class="op" id="5095637">(</span><span class="num" id="5095638">2</span><span class="op" id="5095639">)</span>&nbsp;<span class="op" id="5095641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095646">parseSym</span><span class="op" id="5095654">(</span><span class="ident" id="5095655">args</span><span class="op" id="5095659">[</span><span class="num" id="5095660">1</span><span class="op" id="5095661">]</span><span class="op" id="5095662">,</span>&nbsp;<span class="ident" id="5095664">parseImm</span><span class="op" id="5095672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095680">if</span>&nbsp;<span class="ident" id="5095683">opName</span>&nbsp;<span class="op" id="5095690">==</span>&nbsp;<span class="string" id="5095693">&#34;lui&#34;</span>&nbsp;<span class="op" id="5095699">&amp;&amp;</span>&nbsp;<span class="ident" id="5095702">fill</span>&nbsp;<span class="op" id="5095707">==</span>&nbsp;<span class="ident" id="5095710">fillLow</span>&nbsp;<span class="op" id="5095718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095723">fill</span>&nbsp;<span class="op" id="5095728">=</span>&nbsp;<span class="ident" id="5095730">fillHigh</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095744">}</span>&nbsp;<span class="keyword" id="5095746">else</span>&nbsp;<span class="op" id="5095751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095755">return</span>&nbsp;<span class="ident" id="5095762">nil</span><span class="op" id="5095765">,</span>&nbsp;<span class="builtintype" id="5095767">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5095774">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095778">ret</span>&nbsp;<span class="op" id="5095782">:=</span>&nbsp;<span class="ident" id="5095785">makeInstImm</span><span class="op" id="5095796">(</span><span class="ident" id="5095797">op</span><span class="op" id="5095799">,</span>&nbsp;<span class="ident" id="5095801">d</span><span class="op" id="5095802">,</span>&nbsp;<span class="ident" id="5095804">s</span><span class="op" id="5095805">,</span>&nbsp;<span class="ident" id="5095807">im</span><span class="op" id="5095809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095812">ret</span><span class="op" id="5095815">.</span><span class="ident" id="5095816">pack</span>&nbsp;<span class="op" id="5095821">=</span>&nbsp;<span class="ident" id="5095823">pack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095829">ret</span><span class="op" id="5095832">.</span><span class="ident" id="5095833">symbol</span>&nbsp;<span class="op" id="5095840">=</span>&nbsp;<span class="ident" id="5095842">sym</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095847">ret</span><span class="op" id="5095850">.</span><span class="ident" id="5095851">fill</span>&nbsp;<span class="op" id="5095856">=</span>&nbsp;<span class="ident" id="5095858">fill</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5095864">ret</span><span class="op" id="5095867">.</span><span class="ident" id="5095868">symTok</span>&nbsp;<span class="op" id="5095875">=</span>&nbsp;<span class="ident" id="5095877">symTok</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5095886">return</span>&nbsp;<span class="ident" id="5095893">ret</span><span class="op" id="5095896">,</span>&nbsp;<span class="builtintype" id="5095898">true</span><br>
<span class="lineno"></span><span class="op" id="5095903">}</span>
</div>
</body>
</html>
