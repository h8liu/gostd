<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1504154">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1504210">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1504264">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1504315">package</span>&nbsp;<span class="ident" id="1504323">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1504328">//&nbsp;TCPAddr&nbsp;represents&nbsp;the&nbsp;address&nbsp;of&nbsp;a&nbsp;TCP&nbsp;end&nbsp;point.</span><br>
<span class="lineno"></span><span class="keyword" id="1504382">type</span>&nbsp;<span class="ident" id="1504387">TCPAddr</span>&nbsp;<span class="keyword" id="1504395">struct</span>&nbsp;<span class="op" id="1504402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504405">IP</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1504410"><a href="/net/ip.go.html#1417189">IP</a></span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504414">Port</span>&nbsp;<span class="builtintype" id="1504419">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504424">Zone</span>&nbsp;<span class="builtintype" id="1504429">string</span>&nbsp;<span class="comment" id="1504436">//&nbsp;IPv6&nbsp;scoped&nbsp;addressing&nbsp;zone</span><br>
<span class="lineno"></span><span class="op" id="1504467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1504470">//&nbsp;Network&nbsp;returns&nbsp;the&nbsp;address&#39;s&nbsp;network&nbsp;name,&nbsp;&#34;tcp&#34;.</span><br>
<span class="lineno">15</span><span class="keyword" id="1504524">func</span>&nbsp;<span class="op" id="1504529">(</span><span class="ident" id="1504530">a</span>&nbsp;<span class="op" id="1504532">*</span><span class="ident" id="1504533"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1504540">)</span>&nbsp;<span class="ident" id="1504542">Network</span><span class="op" id="1504549">(</span><span class="op" id="1504550">)</span>&nbsp;<span class="builtintype" id="1504552">string</span>&nbsp;<span class="op" id="1504559">{</span>&nbsp;<span class="keyword" id="1504561">return</span>&nbsp;<span class="string" id="1504568">&#34;tcp&#34;</span>&nbsp;<span class="op" id="1504574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504577">func</span>&nbsp;<span class="op" id="1504582">(</span><span class="ident" id="1504583">a</span>&nbsp;<span class="op" id="1504585">*</span><span class="ident" id="1504586"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1504593">)</span>&nbsp;<span class="ident" id="1504595">String</span><span class="op" id="1504601">(</span><span class="op" id="1504602">)</span>&nbsp;<span class="builtintype" id="1504604">string</span>&nbsp;<span class="op" id="1504611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504614">if</span>&nbsp;<span class="ident" id="1504617"><a href="/net/tcpsock.go.html#1504583">a</a></span>&nbsp;<span class="op" id="1504619">==</span>&nbsp;<span class="ident" id="1504622">nil</span>&nbsp;<span class="op" id="1504626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504630">return</span>&nbsp;<span class="string" id="1504637">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1504649">ip</span>&nbsp;<span class="op" id="1504652">:=</span>&nbsp;<span class="ident" id="1504655"><a href="/net/ip.go.html#1423884">ipEmptyString</a></span><span class="op" id="1504668">(</span><span class="ident" id="1504669"><a href="/net/tcpsock.go.html#1504583">a</a></span><span class="op" id="1504670">.</span><span class="ident" id="1504671">IP</span><span class="op" id="1504673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504676">if</span>&nbsp;<span class="ident" id="1504679"><a href="/net/tcpsock.go.html#1504583">a</a></span><span class="op" id="1504680">.</span><span class="ident" id="1504681">Zone</span>&nbsp;<span class="op" id="1504686">!=</span>&nbsp;<span class="string" id="1504689">&#34;&#34;</span>&nbsp;<span class="op" id="1504692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504696">return</span>&nbsp;<span class="ident" id="1504703"><a href="/net/ipsock.go.html#1445996">JoinHostPort</a></span><span class="op" id="1504715">(</span><span class="ident" id="1504716"><a href="/net/tcpsock.go.html#1504649">ip</a></span><span class="op" id="1504718">+</span><span class="string" id="1504719">&#34;%&#34;</span><span class="op" id="1504722">+</span><span class="ident" id="1504723"><a href="/net/tcpsock.go.html#1504583">a</a></span><span class="op" id="1504724">.</span><span class="ident" id="1504725">Zone</span><span class="op" id="1504729">,</span>&nbsp;<span class="ident" id="1504731"><a href="/net/parse.go.html#1479069">itoa</a></span><span class="op" id="1504735">(</span><span class="ident" id="1504736"><a href="/net/tcpsock.go.html#1504583">a</a></span><span class="op" id="1504737">.</span><span class="ident" id="1504738">Port</span><span class="op" id="1504742">)</span><span class="op" id="1504743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504746">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504749">return</span>&nbsp;<span class="ident" id="1504756"><a href="/net/ipsock.go.html#1445996">JoinHostPort</a></span><span class="op" id="1504768">(</span><span class="ident" id="1504769"><a href="/net/tcpsock.go.html#1504649">ip</a></span><span class="op" id="1504771">,</span>&nbsp;<span class="ident" id="1504773"><a href="/net/parse.go.html#1479069">itoa</a></span><span class="op" id="1504777">(</span><span class="ident" id="1504778"><a href="/net/tcpsock.go.html#1504583">a</a></span><span class="op" id="1504779">.</span><span class="ident" id="1504780">Port</span><span class="op" id="1504784">)</span><span class="op" id="1504785">)</span><br>
<span class="lineno"></span><span class="op" id="1504787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1504790">func</span>&nbsp;<span class="op" id="1504795">(</span><span class="ident" id="1504796">a</span>&nbsp;<span class="op" id="1504798">*</span><span class="ident" id="1504799"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1504806">)</span>&nbsp;<span class="ident" id="1504808">toAddr</span><span class="op" id="1504814">(</span><span class="op" id="1504815">)</span>&nbsp;<span class="ident" id="1504817"><a href="/net/net.go.html#1465097">Addr</a></span>&nbsp;<span class="op" id="1504822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504825">if</span>&nbsp;<span class="ident" id="1504828"><a href="/net/tcpsock.go.html#1504796">a</a></span>&nbsp;<span class="op" id="1504830">==</span>&nbsp;<span class="ident" id="1504833">nil</span>&nbsp;<span class="op" id="1504837">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504841">return</span>&nbsp;<span class="ident" id="1504848">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1504853">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1504856">return</span>&nbsp;<span class="ident" id="1504863"><a href="/net/tcpsock.go.html#1504796">a</a></span><br>
<span class="lineno"></span><span class="op" id="1504865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="1504868">//&nbsp;ResolveTCPAddr&nbsp;parses&nbsp;addr&nbsp;as&nbsp;a&nbsp;TCP&nbsp;address&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;host:port&#34;</span><br>
<span class="lineno"></span><span class="comment" id="1504939">//&nbsp;or&nbsp;&#34;[ipv6-host%zone]:port&#34;&nbsp;and&nbsp;resolves&nbsp;a&nbsp;pair&nbsp;of&nbsp;domain&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="1505008">//&nbsp;port&nbsp;name&nbsp;on&nbsp;the&nbsp;network&nbsp;net,&nbsp;which&nbsp;must&nbsp;be&nbsp;&#34;tcp&#34;,&nbsp;&#34;tcp4&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="1505072">//&nbsp;&#34;tcp6&#34;.&nbsp;&nbsp;A&nbsp;literal&nbsp;address&nbsp;or&nbsp;host&nbsp;name&nbsp;for&nbsp;IPv6&nbsp;must&nbsp;be&nbsp;enclosed</span><br>
<span class="lineno"></span><span class="comment" id="1505141">//&nbsp;in&nbsp;square&nbsp;brackets,&nbsp;as&nbsp;in&nbsp;&#34;[::1]:80&#34;,&nbsp;&#34;[ipv6-host]:http&#34;&nbsp;or</span><br>
<span class="lineno">40</span><span class="comment" id="1505204">//&nbsp;&#34;[ipv6-host%zone]:80&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="1505230">func</span>&nbsp;<span class="ident" id="1505235">ResolveTCPAddr</span><span class="op" id="1505249">(</span><span class="ident" id="1505250">net</span><span class="op" id="1505253">,</span>&nbsp;<span class="ident" id="1505255">addr</span>&nbsp;<span class="builtintype" id="1505260">string</span><span class="op" id="1505266">)</span>&nbsp;<span class="op" id="1505268">(</span><span class="op" id="1505269">*</span><span class="ident" id="1505270"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1505277">,</span>&nbsp;<span class="builtintype" id="1505279">error</span><span class="op" id="1505284">)</span>&nbsp;<span class="op" id="1505286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505289">switch</span>&nbsp;<span class="ident" id="1505296"><a href="/net/tcpsock.go.html#1505250">net</a></span>&nbsp;<span class="op" id="1505300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505303">case</span>&nbsp;<span class="string" id="1505308">&#34;tcp&#34;</span><span class="op" id="1505313">,</span>&nbsp;<span class="string" id="1505315">&#34;tcp4&#34;</span><span class="op" id="1505321">,</span>&nbsp;<span class="string" id="1505323">&#34;tcp6&#34;</span><span class="op" id="1505329">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505332">case</span>&nbsp;<span class="string" id="1505337">&#34;&#34;</span><span class="op" id="1505339">:</span>&nbsp;<span class="comment" id="1505341">//&nbsp;a&nbsp;hint&nbsp;wildcard&nbsp;for&nbsp;Go&nbsp;1.0&nbsp;undocumented&nbsp;behavior</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505395"><a href="/net/tcpsock.go.html#1505250">net</a></span>&nbsp;<span class="op" id="1505399">=</span>&nbsp;<span class="string" id="1505401">&#34;tcp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505408">default</span><span class="op" id="1505415">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505419">return</span>&nbsp;<span class="ident" id="1505426">nil</span><span class="op" id="1505429">,</span>&nbsp;<span class="ident" id="1505431"><a href="/net/net.go.html#1473867">UnknownNetworkError</a></span><span class="op" id="1505450">(</span><span class="ident" id="1505451"><a href="/net/tcpsock.go.html#1505250">net</a></span><span class="op" id="1505454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505457">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1505460">a</span><span class="op" id="1505461">,</span>&nbsp;<span class="ident" id="1505463">err</span>&nbsp;<span class="op" id="1505467">:=</span>&nbsp;<span class="ident" id="1505470"><a href="/net/ipsock.go.html#1446593">resolveInternetAddr</a></span><span class="op" id="1505489">(</span><span class="ident" id="1505490"><a href="/net/tcpsock.go.html#1505250">net</a></span><span class="op" id="1505493">,</span>&nbsp;<span class="ident" id="1505495"><a href="/net/tcpsock.go.html#1505255">addr</a></span><span class="op" id="1505499">,</span>&nbsp;<span class="ident" id="1505501"><a href="/net/net.go.html#1473194">noDeadline</a></span><span class="op" id="1505511">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505514">if</span>&nbsp;<span class="ident" id="1505517"><a href="/net/tcpsock.go.html#1505463">err</a></span>&nbsp;<span class="op" id="1505521">!=</span>&nbsp;<span class="ident" id="1505524">nil</span>&nbsp;<span class="op" id="1505528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505532">return</span>&nbsp;<span class="ident" id="1505539">nil</span><span class="op" id="1505542">,</span>&nbsp;<span class="ident" id="1505544"><a href="/net/tcpsock.go.html#1505463">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1505549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1505552">return</span>&nbsp;<span class="ident" id="1505559"><a href="/net/tcpsock.go.html#1505460">a</a></span><span class="op" id="1505560">.</span><span class="ident" id="1505561">toAddr</span><span class="op" id="1505567">(</span><span class="op" id="1505568">)</span><span class="op" id="1505569">.</span><span class="op" id="1505570">(</span><span class="op" id="1505571">*</span><span class="ident" id="1505572"><a href="/net/tcpsock.go.html#1504387">TCPAddr</a></span><span class="op" id="1505579">)</span><span class="op" id="1505580">,</span>&nbsp;<span class="ident" id="1505582">nil</span><br>
<span class="lineno"></span><span class="op" id="1505586">}</span>
</div>
</body>
</html>
