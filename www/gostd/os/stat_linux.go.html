<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html" class="current">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2363472">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2363527">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2363581">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2363632">package</span>&nbsp;<span class="ident" id="2363640">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2363644">import</span>&nbsp;<span class="op" id="2363651">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2363654">&#34;syscall&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2363665">&#34;time&#34;</span><br>
<span class="lineno">10</span><span class="op" id="2363672">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2363675">func</span>&nbsp;<span class="ident" id="2363680">sameFile</span><span class="op" id="2363688">(</span><span class="ident" id="2363689">fs1</span><span class="op" id="2363692">,</span>&nbsp;<span class="ident" id="2363694">fs2</span>&nbsp;<span class="op" id="2363698">*</span><span class="ident" id="2363699">fileStat</span><span class="op" id="2363707">)</span>&nbsp;<span class="builtintype" id="2363709">bool</span>&nbsp;<span class="op" id="2363714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363717">stat1</span>&nbsp;<span class="op" id="2363723">:=</span>&nbsp;<span class="ident" id="2363726">fs1</span><span class="op" id="2363729">.</span><span class="ident" id="2363730">sys</span><span class="op" id="2363733">.</span><span class="op" id="2363734">(</span><span class="op" id="2363735">*</span><span class="ident" id="2363736">syscall</span><span class="op" id="2363743">.</span><span class="ident" id="2363744">Stat_t</span><span class="op" id="2363750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363753">stat2</span>&nbsp;<span class="op" id="2363759">:=</span>&nbsp;<span class="ident" id="2363762">fs2</span><span class="op" id="2363765">.</span><span class="ident" id="2363766">sys</span><span class="op" id="2363769">.</span><span class="op" id="2363770">(</span><span class="op" id="2363771">*</span><span class="ident" id="2363772">syscall</span><span class="op" id="2363779">.</span><span class="ident" id="2363780">Stat_t</span><span class="op" id="2363786">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2363789">return</span>&nbsp;<span class="ident" id="2363796">stat1</span><span class="op" id="2363801">.</span><span class="ident" id="2363802">Dev</span>&nbsp;<span class="op" id="2363806">==</span>&nbsp;<span class="ident" id="2363809">stat2</span><span class="op" id="2363814">.</span><span class="ident" id="2363815">Dev</span>&nbsp;<span class="op" id="2363819">&amp;&amp;</span>&nbsp;<span class="ident" id="2363822">stat1</span><span class="op" id="2363827">.</span><span class="ident" id="2363828">Ino</span>&nbsp;<span class="op" id="2363832">==</span>&nbsp;<span class="ident" id="2363835">stat2</span><span class="op" id="2363840">.</span><span class="ident" id="2363841">Ino</span><br>
<span class="lineno"></span><span class="op" id="2363845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2363848">func</span>&nbsp;<span class="ident" id="2363853">fileInfoFromStat</span><span class="op" id="2363869">(</span><span class="ident" id="2363870">st</span>&nbsp;<span class="op" id="2363873">*</span><span class="ident" id="2363874">syscall</span><span class="op" id="2363881">.</span><span class="ident" id="2363882">Stat_t</span><span class="op" id="2363888">,</span>&nbsp;<span class="ident" id="2363890">name</span>&nbsp;<span class="builtintype" id="2363895">string</span><span class="op" id="2363901">)</span>&nbsp;<span class="ident" id="2363903">FileInfo</span>&nbsp;<span class="op" id="2363912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363915">fs</span>&nbsp;<span class="op" id="2363918">:=</span>&nbsp;<span class="op" id="2363921">&amp;</span><span class="ident" id="2363922">fileStat</span><span class="op" id="2363930">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363934">name</span><span class="op" id="2363938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363943">basename</span><span class="op" id="2363951">(</span><span class="ident" id="2363952">name</span><span class="op" id="2363956">)</span><span class="op" id="2363957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363961">size</span><span class="op" id="2363965">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363970">int64</span><span class="op" id="2363975">(</span><span class="ident" id="2363976">st</span><span class="op" id="2363978">.</span><span class="ident" id="2363979">Size</span><span class="op" id="2363983">)</span><span class="op" id="2363984">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2363988">modTime</span><span class="op" id="2363995">:</span>&nbsp;<span class="ident" id="2363997">timespecToTime</span><span class="op" id="2364011">(</span><span class="ident" id="2364012">st</span><span class="op" id="2364014">.</span><span class="ident" id="2364015">Mtim</span><span class="op" id="2364019">)</span><span class="op" id="2364020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364024">sys</span><span class="op" id="2364027">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364033">st</span><span class="op" id="2364035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364038">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364041">fs</span><span class="op" id="2364043">.</span><span class="ident" id="2364044">mode</span>&nbsp;<span class="op" id="2364049">=</span>&nbsp;<span class="ident" id="2364051">FileMode</span><span class="op" id="2364059">(</span><span class="ident" id="2364060">st</span><span class="op" id="2364062">.</span><span class="ident" id="2364063">Mode</span>&nbsp;<span class="op" id="2364068">&amp;</span>&nbsp;<span class="num" id="2364070">0777</span><span class="op" id="2364074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364077">switch</span>&nbsp;<span class="ident" id="2364084">st</span><span class="op" id="2364086">.</span><span class="ident" id="2364087">Mode</span>&nbsp;<span class="op" id="2364092">&amp;</span>&nbsp;<span class="ident" id="2364094">syscall</span><span class="op" id="2364101">.</span><span class="ident" id="2364102">S_IFMT</span>&nbsp;<span class="op" id="2364109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364112">case</span>&nbsp;<span class="ident" id="2364117">syscall</span><span class="op" id="2364124">.</span><span class="ident" id="2364125">S_IFBLK</span><span class="op" id="2364132">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364136">fs</span><span class="op" id="2364138">.</span><span class="ident" id="2364139">mode</span>&nbsp;<span class="op" id="2364144">|=</span>&nbsp;<span class="ident" id="2364147">ModeDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364159">case</span>&nbsp;<span class="ident" id="2364164">syscall</span><span class="op" id="2364171">.</span><span class="ident" id="2364172">S_IFCHR</span><span class="op" id="2364179">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364183">fs</span><span class="op" id="2364185">.</span><span class="ident" id="2364186">mode</span>&nbsp;<span class="op" id="2364191">|=</span>&nbsp;<span class="ident" id="2364194">ModeDevice</span>&nbsp;<span class="op" id="2364205">|</span>&nbsp;<span class="ident" id="2364207">ModeCharDevice</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364223">case</span>&nbsp;<span class="ident" id="2364228">syscall</span><span class="op" id="2364235">.</span><span class="ident" id="2364236">S_IFDIR</span><span class="op" id="2364243">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364247">fs</span><span class="op" id="2364249">.</span><span class="ident" id="2364250">mode</span>&nbsp;<span class="op" id="2364255">|=</span>&nbsp;<span class="ident" id="2364258">ModeDir</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364267">case</span>&nbsp;<span class="ident" id="2364272">syscall</span><span class="op" id="2364279">.</span><span class="ident" id="2364280">S_IFIFO</span><span class="op" id="2364287">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364291">fs</span><span class="op" id="2364293">.</span><span class="ident" id="2364294">mode</span>&nbsp;<span class="op" id="2364299">|=</span>&nbsp;<span class="ident" id="2364302">ModeNamedPipe</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364317">case</span>&nbsp;<span class="ident" id="2364322">syscall</span><span class="op" id="2364329">.</span><span class="ident" id="2364330">S_IFLNK</span><span class="op" id="2364337">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364341">fs</span><span class="op" id="2364343">.</span><span class="ident" id="2364344">mode</span>&nbsp;<span class="op" id="2364349">|=</span>&nbsp;<span class="ident" id="2364352">ModeSymlink</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364365">case</span>&nbsp;<span class="ident" id="2364370">syscall</span><span class="op" id="2364377">.</span><span class="ident" id="2364378">S_IFREG</span><span class="op" id="2364385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2364389">//&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364407">case</span>&nbsp;<span class="ident" id="2364412">syscall</span><span class="op" id="2364419">.</span><span class="ident" id="2364420">S_IFSOCK</span><span class="op" id="2364428">:</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364432">fs</span><span class="op" id="2364434">.</span><span class="ident" id="2364435">mode</span>&nbsp;<span class="op" id="2364440">|=</span>&nbsp;<span class="ident" id="2364443">ModeSocket</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364458">if</span>&nbsp;<span class="ident" id="2364461">st</span><span class="op" id="2364463">.</span><span class="ident" id="2364464">Mode</span><span class="op" id="2364468">&amp;</span><span class="ident" id="2364469">syscall</span><span class="op" id="2364476">.</span><span class="ident" id="2364477">S_ISGID</span>&nbsp;<span class="op" id="2364485">!=</span>&nbsp;<span class="num" id="2364488">0</span>&nbsp;<span class="op" id="2364490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364494">fs</span><span class="op" id="2364496">.</span><span class="ident" id="2364497">mode</span>&nbsp;<span class="op" id="2364502">|=</span>&nbsp;<span class="ident" id="2364505">ModeSetgid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364517">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364520">if</span>&nbsp;<span class="ident" id="2364523">st</span><span class="op" id="2364525">.</span><span class="ident" id="2364526">Mode</span><span class="op" id="2364530">&amp;</span><span class="ident" id="2364531">syscall</span><span class="op" id="2364538">.</span><span class="ident" id="2364539">S_ISUID</span>&nbsp;<span class="op" id="2364547">!=</span>&nbsp;<span class="num" id="2364550">0</span>&nbsp;<span class="op" id="2364552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364556">fs</span><span class="op" id="2364558">.</span><span class="ident" id="2364559">mode</span>&nbsp;<span class="op" id="2364564">|=</span>&nbsp;<span class="ident" id="2364567">ModeSetuid</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364582">if</span>&nbsp;<span class="ident" id="2364585">st</span><span class="op" id="2364587">.</span><span class="ident" id="2364588">Mode</span><span class="op" id="2364592">&amp;</span><span class="ident" id="2364593">syscall</span><span class="op" id="2364600">.</span><span class="ident" id="2364601">S_ISVTX</span>&nbsp;<span class="op" id="2364609">!=</span>&nbsp;<span class="num" id="2364612">0</span>&nbsp;<span class="op" id="2364614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2364618">fs</span><span class="op" id="2364620">.</span><span class="ident" id="2364621">mode</span>&nbsp;<span class="op" id="2364626">|=</span>&nbsp;<span class="ident" id="2364629">ModeSticky</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2364641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364644">return</span>&nbsp;<span class="ident" id="2364651">fs</span><br>
<span class="lineno"></span><span class="op" id="2364654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2364657">func</span>&nbsp;<span class="ident" id="2364662">timespecToTime</span><span class="op" id="2364676">(</span><span class="ident" id="2364677">ts</span>&nbsp;<span class="ident" id="2364680">syscall</span><span class="op" id="2364687">.</span><span class="ident" id="2364688">Timespec</span><span class="op" id="2364696">)</span>&nbsp;<span class="ident" id="2364698">time</span><span class="op" id="2364702">.</span><span class="ident" id="2364703">Time</span>&nbsp;<span class="op" id="2364708">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364711">return</span>&nbsp;<span class="ident" id="2364718">time</span><span class="op" id="2364722">.</span><span class="ident" id="2364723">Unix</span><span class="op" id="2364727">(</span><span class="ident" id="2364728">int64</span><span class="op" id="2364733">(</span><span class="ident" id="2364734">ts</span><span class="op" id="2364736">.</span><span class="ident" id="2364737">Sec</span><span class="op" id="2364740">)</span><span class="op" id="2364741">,</span>&nbsp;<span class="ident" id="2364743">int64</span><span class="op" id="2364748">(</span><span class="ident" id="2364749">ts</span><span class="op" id="2364751">.</span><span class="ident" id="2364752">Nsec</span><span class="op" id="2364756">)</span><span class="op" id="2364757">)</span><br>
<span class="lineno"></span><span class="op" id="2364759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2364762">//&nbsp;For&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="2364778">func</span>&nbsp;<span class="ident" id="2364783">atime</span><span class="op" id="2364788">(</span><span class="ident" id="2364789">fi</span>&nbsp;<span class="ident" id="2364792">FileInfo</span><span class="op" id="2364800">)</span>&nbsp;<span class="ident" id="2364802">time</span><span class="op" id="2364806">.</span><span class="ident" id="2364807">Time</span>&nbsp;<span class="op" id="2364812">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2364815">return</span>&nbsp;<span class="ident" id="2364822">timespecToTime</span><span class="op" id="2364836">(</span><span class="ident" id="2364837">fi</span><span class="op" id="2364839">.</span><span class="ident" id="2364840">Sys</span><span class="op" id="2364843">(</span><span class="op" id="2364844">)</span><span class="op" id="2364845">.</span><span class="op" id="2364846">(</span><span class="op" id="2364847">*</span><span class="ident" id="2364848">syscall</span><span class="op" id="2364855">.</span><span class="ident" id="2364856">Stat_t</span><span class="op" id="2364862">)</span><span class="op" id="2364863">.</span><span class="ident" id="2364864">Atim</span><span class="op" id="2364868">)</span><br>
<span class="lineno"></span><span class="op" id="2364870">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
