<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5397313">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5397368">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5397422">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5397473">package</span>&nbsp;<span class="ident" id="5397481">jpeg</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5397487">//&nbsp;This&nbsp;is&nbsp;a&nbsp;Go&nbsp;translation&nbsp;of&nbsp;idct.c&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="5397530">//</span><br>
<span class="lineno"></span><span class="comment" id="5397533">//&nbsp;http://standards.iso.org/ittf/PubliclyAvailableStandards/ISO_IEC_13818-4_2004_Conformance_Testing/Video/verifier/mpeg2decode_960109.tar.gz</span><br>
<span class="lineno">10</span><span class="comment" id="5397675">//</span><br>
<span class="lineno"></span><span class="comment" id="5397678">//&nbsp;which&nbsp;carries&nbsp;the&nbsp;following&nbsp;notice:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5397718">/*&nbsp;Copyright&nbsp;(C)&nbsp;1996,&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group.&nbsp;All&nbsp;Rights&nbsp;Reserved.&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5397798">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Disclaimer&nbsp;of&nbsp;Warranty<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;These&nbsp;software&nbsp;programs&nbsp;are&nbsp;available&nbsp;to&nbsp;the&nbsp;user&nbsp;without&nbsp;any&nbsp;license&nbsp;fee&nbsp;or<br>
<span class="lineno"></span>&nbsp;*&nbsp;royalty&nbsp;on&nbsp;an&nbsp;&#34;as&nbsp;is&#34;&nbsp;basis.&nbsp;&nbsp;The&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group&nbsp;disclaims<br>
<span class="lineno">20</span>&nbsp;*&nbsp;any&nbsp;and&nbsp;all&nbsp;warranties,&nbsp;whether&nbsp;express,&nbsp;implied,&nbsp;or&nbsp;statuary,&nbsp;including&nbsp;any<br>
<span class="lineno"></span>&nbsp;*&nbsp;implied&nbsp;warranties&nbsp;or&nbsp;merchantability&nbsp;or&nbsp;of&nbsp;fitness&nbsp;for&nbsp;a&nbsp;particular<br>
<span class="lineno"></span>&nbsp;*&nbsp;purpose.&nbsp;&nbsp;In&nbsp;no&nbsp;event&nbsp;shall&nbsp;the&nbsp;copyright-holder&nbsp;be&nbsp;liable&nbsp;for&nbsp;any<br>
<span class="lineno"></span>&nbsp;*&nbsp;incidental,&nbsp;punitive,&nbsp;or&nbsp;consequential&nbsp;damages&nbsp;of&nbsp;any&nbsp;kind&nbsp;whatsoever<br>
<span class="lineno"></span>&nbsp;*&nbsp;arising&nbsp;from&nbsp;the&nbsp;use&nbsp;of&nbsp;these&nbsp;programs.<br>
<span class="lineno">25</span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;This&nbsp;disclaimer&nbsp;of&nbsp;warranty&nbsp;extends&nbsp;to&nbsp;the&nbsp;user&nbsp;of&nbsp;these&nbsp;programs&nbsp;and&nbsp;user&#39;s<br>
<span class="lineno"></span>&nbsp;*&nbsp;customers,&nbsp;employees,&nbsp;agents,&nbsp;transferees,&nbsp;successors,&nbsp;and&nbsp;assigns.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;The&nbsp;MPEG&nbsp;Software&nbsp;Simulation&nbsp;Group&nbsp;does&nbsp;not&nbsp;represent&nbsp;or&nbsp;warrant&nbsp;that&nbsp;the<br>
<span class="lineno">30</span>&nbsp;*&nbsp;programs&nbsp;furnished&nbsp;hereunder&nbsp;are&nbsp;free&nbsp;of&nbsp;infringement&nbsp;of&nbsp;any&nbsp;third-party<br>
<span class="lineno"></span>&nbsp;*&nbsp;patents.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Commercial&nbsp;implementations&nbsp;of&nbsp;MPEG-1&nbsp;and&nbsp;MPEG-2&nbsp;video,&nbsp;including&nbsp;shareware,<br>
<span class="lineno"></span>&nbsp;*&nbsp;are&nbsp;subject&nbsp;to&nbsp;royalty&nbsp;fees&nbsp;to&nbsp;patent&nbsp;holders.&nbsp;&nbsp;Many&nbsp;of&nbsp;these&nbsp;patents&nbsp;are<br>
<span class="lineno">35</span>&nbsp;*&nbsp;general&nbsp;enough&nbsp;such&nbsp;that&nbsp;they&nbsp;are&nbsp;unavoidable&nbsp;regardless&nbsp;of&nbsp;implementation<br>
<span class="lineno"></span>&nbsp;*&nbsp;design.<br>
<span class="lineno"></span>&nbsp;*<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="5398904">const</span>&nbsp;<span class="ident" id="5398910">blockSize</span>&nbsp;<span class="op" id="5398920">=</span>&nbsp;<span class="num" id="5398922">64</span>&nbsp;<span class="comment" id="5398925">//&nbsp;A&nbsp;DCT&nbsp;block&nbsp;is&nbsp;8x8.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5398949">type</span>&nbsp;<span class="ident" id="5398954">block</span>&nbsp;<span class="op" id="5398960">[</span><span class="ident" id="5398961"><a href="/image/jpeg/idct.go.html#5398910">blockSize</a></span><span class="op" id="5398970">]</span><span class="builtintype" id="5398971">int32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5398978">const</span>&nbsp;<span class="op" id="5398984">(</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5398987">w1</span>&nbsp;<span class="op" id="5398990">=</span>&nbsp;<span class="num" id="5398992">2841</span>&nbsp;<span class="comment" id="5398997">//&nbsp;2048*sqrt(2)*cos(1*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399027">w2</span>&nbsp;<span class="op" id="5399030">=</span>&nbsp;<span class="num" id="5399032">2676</span>&nbsp;<span class="comment" id="5399037">//&nbsp;2048*sqrt(2)*cos(2*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399067">w3</span>&nbsp;<span class="op" id="5399070">=</span>&nbsp;<span class="num" id="5399072">2408</span>&nbsp;<span class="comment" id="5399077">//&nbsp;2048*sqrt(2)*cos(3*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399107">w5</span>&nbsp;<span class="op" id="5399110">=</span>&nbsp;<span class="num" id="5399112">1609</span>&nbsp;<span class="comment" id="5399117">//&nbsp;2048*sqrt(2)*cos(5*pi/16)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399147">w6</span>&nbsp;<span class="op" id="5399150">=</span>&nbsp;<span class="num" id="5399152">1108</span>&nbsp;<span class="comment" id="5399157">//&nbsp;2048*sqrt(2)*cos(6*pi/16)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399187">w7</span>&nbsp;<span class="op" id="5399190">=</span>&nbsp;<span class="num" id="5399192">565</span>&nbsp;&nbsp;<span class="comment" id="5399197">//&nbsp;2048*sqrt(2)*cos(7*pi/16)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399228">w1pw7</span>&nbsp;<span class="op" id="5399234">=</span>&nbsp;<span class="ident" id="5399236"><a href="/image/jpeg/idct.go.html#5398987">w1</a></span>&nbsp;<span class="op" id="5399239">+</span>&nbsp;<span class="ident" id="5399241"><a href="/image/jpeg/idct.go.html#5399187">w7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399245">w1mw7</span>&nbsp;<span class="op" id="5399251">=</span>&nbsp;<span class="ident" id="5399253"><a href="/image/jpeg/idct.go.html#5398987">w1</a></span>&nbsp;<span class="op" id="5399256">-</span>&nbsp;<span class="ident" id="5399258"><a href="/image/jpeg/idct.go.html#5399187">w7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399262">w2pw6</span>&nbsp;<span class="op" id="5399268">=</span>&nbsp;<span class="ident" id="5399270"><a href="/image/jpeg/idct.go.html#5399027">w2</a></span>&nbsp;<span class="op" id="5399273">+</span>&nbsp;<span class="ident" id="5399275"><a href="/image/jpeg/idct.go.html#5399147">w6</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399279">w2mw6</span>&nbsp;<span class="op" id="5399285">=</span>&nbsp;<span class="ident" id="5399287"><a href="/image/jpeg/idct.go.html#5399027">w2</a></span>&nbsp;<span class="op" id="5399290">-</span>&nbsp;<span class="ident" id="5399292"><a href="/image/jpeg/idct.go.html#5399147">w6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399296">w3pw5</span>&nbsp;<span class="op" id="5399302">=</span>&nbsp;<span class="ident" id="5399304"><a href="/image/jpeg/idct.go.html#5399067">w3</a></span>&nbsp;<span class="op" id="5399307">+</span>&nbsp;<span class="ident" id="5399309"><a href="/image/jpeg/idct.go.html#5399107">w5</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399313">w3mw5</span>&nbsp;<span class="op" id="5399319">=</span>&nbsp;<span class="ident" id="5399321"><a href="/image/jpeg/idct.go.html#5399067">w3</a></span>&nbsp;<span class="op" id="5399324">-</span>&nbsp;<span class="ident" id="5399326"><a href="/image/jpeg/idct.go.html#5399107">w5</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399331">r2</span>&nbsp;<span class="op" id="5399334">=</span>&nbsp;<span class="num" id="5399336">181</span>&nbsp;<span class="comment" id="5399340">//&nbsp;256/sqrt(2)</span><br>
<span class="lineno">60</span><span class="op" id="5399355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5399358">//&nbsp;idct&nbsp;performs&nbsp;a&nbsp;2-D&nbsp;Inverse&nbsp;Discrete&nbsp;Cosine&nbsp;Transformation.</span><br>
<span class="lineno"></span><span class="comment" id="5399421">//</span><br>
<span class="lineno"></span><span class="comment" id="5399424">//&nbsp;The&nbsp;input&nbsp;coefficients&nbsp;should&nbsp;already&nbsp;have&nbsp;been&nbsp;multiplied&nbsp;by&nbsp;the</span><br>
<span class="lineno">65</span><span class="comment" id="5399493">//&nbsp;appropriate&nbsp;quantization&nbsp;table.&nbsp;We&nbsp;use&nbsp;fixed-point&nbsp;computation,&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5399569">//&nbsp;number&nbsp;of&nbsp;bits&nbsp;for&nbsp;the&nbsp;fractional&nbsp;component&nbsp;varying&nbsp;over&nbsp;the&nbsp;intermediate</span><br>
<span class="lineno"></span><span class="comment" id="5399646">//&nbsp;stages.</span><br>
<span class="lineno"></span><span class="comment" id="5399657">//</span><br>
<span class="lineno"></span><span class="comment" id="5399660">//&nbsp;For&nbsp;more&nbsp;on&nbsp;the&nbsp;actual&nbsp;algorithm,&nbsp;see&nbsp;Z.&nbsp;Wang,&nbsp;&#34;Fast&nbsp;algorithms&nbsp;for&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="5399735">//&nbsp;discrete&nbsp;W&nbsp;transform&nbsp;and&nbsp;for&nbsp;the&nbsp;discrete&nbsp;Fourier&nbsp;transform&#34;,&nbsp;IEEE&nbsp;Trans.&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="5399815">//&nbsp;ASSP,&nbsp;Vol.&nbsp;ASSP-&nbsp;32,&nbsp;pp.&nbsp;803-816,&nbsp;Aug.&nbsp;1984.</span><br>
<span class="lineno"></span><span class="keyword" id="5399863">func</span>&nbsp;<span class="ident" id="5399868">idct</span><span class="op" id="5399872">(</span><span class="ident" id="5399873">src</span>&nbsp;<span class="op" id="5399877">*</span><span class="ident" id="5399878"><a href="/image/jpeg/idct.go.html#5398954">block</a></span><span class="op" id="5399883">)</span>&nbsp;<span class="op" id="5399885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5399888">//&nbsp;Horizontal&nbsp;1-D&nbsp;IDCT.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5399913">for</span>&nbsp;<span class="ident" id="5399917">y</span>&nbsp;<span class="op" id="5399919">:=</span>&nbsp;<span class="num" id="5399922">0</span><span class="op" id="5399923">;</span>&nbsp;<span class="ident" id="5399925"><a href="/image/jpeg/idct.go.html#5399917">y</a></span>&nbsp;<span class="op" id="5399927">&lt;</span>&nbsp;<span class="num" id="5399929">8</span><span class="op" id="5399930">;</span>&nbsp;<span class="ident" id="5399932"><a href="/image/jpeg/idct.go.html#5399917">y</a></span><span class="op" id="5399933">++</span>&nbsp;<span class="op" id="5399936">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5399940">y8</span>&nbsp;<span class="op" id="5399943">:=</span>&nbsp;<span class="ident" id="5399946"><a href="/image/jpeg/idct.go.html#5399917">y</a></span>&nbsp;<span class="op" id="5399948">*</span>&nbsp;<span class="num" id="5399950">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5399954">//&nbsp;If&nbsp;all&nbsp;the&nbsp;AC&nbsp;components&nbsp;are&nbsp;zero,&nbsp;then&nbsp;the&nbsp;IDCT&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5400020">if</span>&nbsp;<span class="ident" id="5400023"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400026">[</span><span class="ident" id="5400027"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400029">+</span><span class="num" id="5400030">1</span><span class="op" id="5400031">]</span>&nbsp;<span class="op" id="5400033">==</span>&nbsp;<span class="num" id="5400036">0</span>&nbsp;<span class="op" id="5400038">&amp;&amp;</span>&nbsp;<span class="ident" id="5400041"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400044">[</span><span class="ident" id="5400045"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400047">+</span><span class="num" id="5400048">2</span><span class="op" id="5400049">]</span>&nbsp;<span class="op" id="5400051">==</span>&nbsp;<span class="num" id="5400054">0</span>&nbsp;<span class="op" id="5400056">&amp;&amp;</span>&nbsp;<span class="ident" id="5400059"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400062">[</span><span class="ident" id="5400063"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400065">+</span><span class="num" id="5400066">3</span><span class="op" id="5400067">]</span>&nbsp;<span class="op" id="5400069">==</span>&nbsp;<span class="num" id="5400072">0</span>&nbsp;<span class="op" id="5400074">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400080"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400083">[</span><span class="ident" id="5400084"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400086">+</span><span class="num" id="5400087">4</span><span class="op" id="5400088">]</span>&nbsp;<span class="op" id="5400090">==</span>&nbsp;<span class="num" id="5400093">0</span>&nbsp;<span class="op" id="5400095">&amp;&amp;</span>&nbsp;<span class="ident" id="5400098"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400101">[</span><span class="ident" id="5400102"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400104">+</span><span class="num" id="5400105">5</span><span class="op" id="5400106">]</span>&nbsp;<span class="op" id="5400108">==</span>&nbsp;<span class="num" id="5400111">0</span>&nbsp;<span class="op" id="5400113">&amp;&amp;</span>&nbsp;<span class="ident" id="5400116"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400119">[</span><span class="ident" id="5400120"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400122">+</span><span class="num" id="5400123">6</span><span class="op" id="5400124">]</span>&nbsp;<span class="op" id="5400126">==</span>&nbsp;<span class="num" id="5400129">0</span>&nbsp;<span class="op" id="5400131">&amp;&amp;</span>&nbsp;<span class="ident" id="5400134"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400137">[</span><span class="ident" id="5400138"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400140">+</span><span class="num" id="5400141">7</span><span class="op" id="5400142">]</span>&nbsp;<span class="op" id="5400144">==</span>&nbsp;<span class="num" id="5400147">0</span>&nbsp;<span class="op" id="5400149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400154">dc</span>&nbsp;<span class="op" id="5400157">:=</span>&nbsp;<span class="ident" id="5400160"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400163">[</span><span class="ident" id="5400164"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400166">+</span><span class="num" id="5400167">0</span><span class="op" id="5400168">]</span>&nbsp;<span class="op" id="5400170">&lt;&lt;</span>&nbsp;<span class="num" id="5400173">3</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400178"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400181">[</span><span class="ident" id="5400182"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400184">+</span><span class="num" id="5400185">0</span><span class="op" id="5400186">]</span>&nbsp;<span class="op" id="5400188">=</span>&nbsp;<span class="ident" id="5400190"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400196"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400199">[</span><span class="ident" id="5400200"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400202">+</span><span class="num" id="5400203">1</span><span class="op" id="5400204">]</span>&nbsp;<span class="op" id="5400206">=</span>&nbsp;<span class="ident" id="5400208"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400214"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400217">[</span><span class="ident" id="5400218"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400220">+</span><span class="num" id="5400221">2</span><span class="op" id="5400222">]</span>&nbsp;<span class="op" id="5400224">=</span>&nbsp;<span class="ident" id="5400226"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400232"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400235">[</span><span class="ident" id="5400236"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400238">+</span><span class="num" id="5400239">3</span><span class="op" id="5400240">]</span>&nbsp;<span class="op" id="5400242">=</span>&nbsp;<span class="ident" id="5400244"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400250"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400253">[</span><span class="ident" id="5400254"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400256">+</span><span class="num" id="5400257">4</span><span class="op" id="5400258">]</span>&nbsp;<span class="op" id="5400260">=</span>&nbsp;<span class="ident" id="5400262"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400268"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400271">[</span><span class="ident" id="5400272"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400274">+</span><span class="num" id="5400275">5</span><span class="op" id="5400276">]</span>&nbsp;<span class="op" id="5400278">=</span>&nbsp;<span class="ident" id="5400280"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400286"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400289">[</span><span class="ident" id="5400290"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400292">+</span><span class="num" id="5400293">6</span><span class="op" id="5400294">]</span>&nbsp;<span class="op" id="5400296">=</span>&nbsp;<span class="ident" id="5400298"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400304"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400307">[</span><span class="ident" id="5400308"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400310">+</span><span class="num" id="5400311">7</span><span class="op" id="5400312">]</span>&nbsp;<span class="op" id="5400314">=</span>&nbsp;<span class="ident" id="5400316"><a href="/image/jpeg/idct.go.html#5400154">dc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5400322">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5400333">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5400338">//&nbsp;Prescale.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400353">x0</span>&nbsp;<span class="op" id="5400356">:=</span>&nbsp;<span class="op" id="5400359">(</span><span class="ident" id="5400360"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400363">[</span><span class="ident" id="5400364"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400366">+</span><span class="num" id="5400367">0</span><span class="op" id="5400368">]</span>&nbsp;<span class="op" id="5400370">&lt;&lt;</span>&nbsp;<span class="num" id="5400373">11</span><span class="op" id="5400375">)</span>&nbsp;<span class="op" id="5400377">+</span>&nbsp;<span class="num" id="5400379">128</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400385">x1</span>&nbsp;<span class="op" id="5400388">:=</span>&nbsp;<span class="ident" id="5400391"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400394">[</span><span class="ident" id="5400395"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400397">+</span><span class="num" id="5400398">4</span><span class="op" id="5400399">]</span>&nbsp;<span class="op" id="5400401">&lt;&lt;</span>&nbsp;<span class="num" id="5400404">11</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400409">x2</span>&nbsp;<span class="op" id="5400412">:=</span>&nbsp;<span class="ident" id="5400415"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400418">[</span><span class="ident" id="5400419"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400421">+</span><span class="num" id="5400422">6</span><span class="op" id="5400423">]</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400427">x3</span>&nbsp;<span class="op" id="5400430">:=</span>&nbsp;<span class="ident" id="5400433"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400436">[</span><span class="ident" id="5400437"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400439">+</span><span class="num" id="5400440">2</span><span class="op" id="5400441">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400445">x4</span>&nbsp;<span class="op" id="5400448">:=</span>&nbsp;<span class="ident" id="5400451"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400454">[</span><span class="ident" id="5400455"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400457">+</span><span class="num" id="5400458">1</span><span class="op" id="5400459">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400463">x5</span>&nbsp;<span class="op" id="5400466">:=</span>&nbsp;<span class="ident" id="5400469"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400472">[</span><span class="ident" id="5400473"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400475">+</span><span class="num" id="5400476">7</span><span class="op" id="5400477">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400481">x6</span>&nbsp;<span class="op" id="5400484">:=</span>&nbsp;<span class="ident" id="5400487"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400490">[</span><span class="ident" id="5400491"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400493">+</span><span class="num" id="5400494">5</span><span class="op" id="5400495">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400499">x7</span>&nbsp;<span class="op" id="5400502">:=</span>&nbsp;<span class="ident" id="5400505"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400508">[</span><span class="ident" id="5400509"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400511">+</span><span class="num" id="5400512">3</span><span class="op" id="5400513">]</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5400518">//&nbsp;Stage&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400532">x8</span>&nbsp;<span class="op" id="5400535">:=</span>&nbsp;<span class="ident" id="5400538"><a href="/image/jpeg/idct.go.html#5399187">w7</a></span>&nbsp;<span class="op" id="5400541">*</span>&nbsp;<span class="op" id="5400543">(</span><span class="ident" id="5400544"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span>&nbsp;<span class="op" id="5400547">+</span>&nbsp;<span class="ident" id="5400549"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span><span class="op" id="5400551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400555"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span>&nbsp;<span class="op" id="5400558">=</span>&nbsp;<span class="ident" id="5400560"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400563">+</span>&nbsp;<span class="ident" id="5400565"><a href="/image/jpeg/idct.go.html#5399245">w1mw7</a></span><span class="op" id="5400570">*</span><span class="ident" id="5400571"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400576"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span>&nbsp;<span class="op" id="5400579">=</span>&nbsp;<span class="ident" id="5400581"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400584">-</span>&nbsp;<span class="ident" id="5400586"><a href="/image/jpeg/idct.go.html#5399228">w1pw7</a></span><span class="op" id="5400591">*</span><span class="ident" id="5400592"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400597"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400600">=</span>&nbsp;<span class="ident" id="5400602"><a href="/image/jpeg/idct.go.html#5399067">w3</a></span>&nbsp;<span class="op" id="5400605">*</span>&nbsp;<span class="op" id="5400607">(</span><span class="ident" id="5400608"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span>&nbsp;<span class="op" id="5400611">+</span>&nbsp;<span class="ident" id="5400613"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span><span class="op" id="5400615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400619"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span>&nbsp;<span class="op" id="5400622">=</span>&nbsp;<span class="ident" id="5400624"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400627">-</span>&nbsp;<span class="ident" id="5400629"><a href="/image/jpeg/idct.go.html#5399313">w3mw5</a></span><span class="op" id="5400634">*</span><span class="ident" id="5400635"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400640"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span>&nbsp;<span class="op" id="5400643">=</span>&nbsp;<span class="ident" id="5400645"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400648">-</span>&nbsp;<span class="ident" id="5400650"><a href="/image/jpeg/idct.go.html#5399296">w3pw5</a></span><span class="op" id="5400655">*</span><span class="ident" id="5400656"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5400662">//&nbsp;Stage&nbsp;2.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400676"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400679">=</span>&nbsp;<span class="ident" id="5400681"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5400684">+</span>&nbsp;<span class="ident" id="5400686"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400691"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5400694">-=</span>&nbsp;<span class="ident" id="5400697"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400702"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span>&nbsp;<span class="op" id="5400705">=</span>&nbsp;<span class="ident" id="5400707"><a href="/image/jpeg/idct.go.html#5399147">w6</a></span>&nbsp;<span class="op" id="5400710">*</span>&nbsp;<span class="op" id="5400712">(</span><span class="ident" id="5400713"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span>&nbsp;<span class="op" id="5400716">+</span>&nbsp;<span class="ident" id="5400718"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><span class="op" id="5400720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400724"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span>&nbsp;<span class="op" id="5400727">=</span>&nbsp;<span class="ident" id="5400729"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span>&nbsp;<span class="op" id="5400732">-</span>&nbsp;<span class="ident" id="5400734"><a href="/image/jpeg/idct.go.html#5399262">w2pw6</a></span><span class="op" id="5400739">*</span><span class="ident" id="5400740"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400745"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span>&nbsp;<span class="op" id="5400748">=</span>&nbsp;<span class="ident" id="5400750"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span>&nbsp;<span class="op" id="5400753">+</span>&nbsp;<span class="ident" id="5400755"><a href="/image/jpeg/idct.go.html#5399279">w2mw6</a></span><span class="op" id="5400760">*</span><span class="ident" id="5400761"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400766"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span>&nbsp;<span class="op" id="5400769">=</span>&nbsp;<span class="ident" id="5400771"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span>&nbsp;<span class="op" id="5400774">+</span>&nbsp;<span class="ident" id="5400776"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400781"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span>&nbsp;<span class="op" id="5400784">-=</span>&nbsp;<span class="ident" id="5400787"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400792"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span>&nbsp;<span class="op" id="5400795">=</span>&nbsp;<span class="ident" id="5400797"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span>&nbsp;<span class="op" id="5400800">+</span>&nbsp;<span class="ident" id="5400802"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400807"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span>&nbsp;<span class="op" id="5400810">-=</span>&nbsp;<span class="ident" id="5400813"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5400819">//&nbsp;Stage&nbsp;3.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400833"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span>&nbsp;<span class="op" id="5400836">=</span>&nbsp;<span class="ident" id="5400838"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400841">+</span>&nbsp;<span class="ident" id="5400843"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400848"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5400851">-=</span>&nbsp;<span class="ident" id="5400854"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400859"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span>&nbsp;<span class="op" id="5400862">=</span>&nbsp;<span class="ident" id="5400864"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5400867">+</span>&nbsp;<span class="ident" id="5400869"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400874"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5400877">-=</span>&nbsp;<span class="ident" id="5400880"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400885"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span>&nbsp;<span class="op" id="5400888">=</span>&nbsp;<span class="op" id="5400890">(</span><span class="ident" id="5400891"><a href="/image/jpeg/idct.go.html#5399331">r2</a></span><span class="op" id="5400893">*</span><span class="op" id="5400894">(</span><span class="ident" id="5400895"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span><span class="op" id="5400897">+</span><span class="ident" id="5400898"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span><span class="op" id="5400900">)</span>&nbsp;<span class="op" id="5400902">+</span>&nbsp;<span class="num" id="5400904">128</span><span class="op" id="5400907">)</span>&nbsp;<span class="op" id="5400909">&gt;&gt;</span>&nbsp;<span class="num" id="5400912">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400916"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span>&nbsp;<span class="op" id="5400919">=</span>&nbsp;<span class="op" id="5400921">(</span><span class="ident" id="5400922"><a href="/image/jpeg/idct.go.html#5399331">r2</a></span><span class="op" id="5400924">*</span><span class="op" id="5400925">(</span><span class="ident" id="5400926"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span><span class="op" id="5400928">-</span><span class="ident" id="5400929"><a href="/image/jpeg/idct.go.html#5400463">x5</a></span><span class="op" id="5400931">)</span>&nbsp;<span class="op" id="5400933">+</span>&nbsp;<span class="num" id="5400935">128</span><span class="op" id="5400938">)</span>&nbsp;<span class="op" id="5400940">&gt;&gt;</span>&nbsp;<span class="num" id="5400943">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5400948">//&nbsp;Stage&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400962"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400965">[</span><span class="ident" id="5400966"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400968">+</span><span class="num" id="5400969">0</span><span class="op" id="5400970">]</span>&nbsp;<span class="op" id="5400972">=</span>&nbsp;<span class="op" id="5400974">(</span><span class="ident" id="5400975"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span>&nbsp;<span class="op" id="5400978">+</span>&nbsp;<span class="ident" id="5400980"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span><span class="op" id="5400982">)</span>&nbsp;<span class="op" id="5400984">&gt;&gt;</span>&nbsp;<span class="num" id="5400987">8</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5400991"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5400994">[</span><span class="ident" id="5400995"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5400997">+</span><span class="num" id="5400998">1</span><span class="op" id="5400999">]</span>&nbsp;<span class="op" id="5401001">=</span>&nbsp;<span class="op" id="5401003">(</span><span class="ident" id="5401004"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span>&nbsp;<span class="op" id="5401007">+</span>&nbsp;<span class="ident" id="5401009"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><span class="op" id="5401011">)</span>&nbsp;<span class="op" id="5401013">&gt;&gt;</span>&nbsp;<span class="num" id="5401016">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401020"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401023">[</span><span class="ident" id="5401024"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401026">+</span><span class="num" id="5401027">2</span><span class="op" id="5401028">]</span>&nbsp;<span class="op" id="5401030">=</span>&nbsp;<span class="op" id="5401032">(</span><span class="ident" id="5401033"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5401036">+</span>&nbsp;<span class="ident" id="5401038"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span><span class="op" id="5401040">)</span>&nbsp;<span class="op" id="5401042">&gt;&gt;</span>&nbsp;<span class="num" id="5401045">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401049"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401052">[</span><span class="ident" id="5401053"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401055">+</span><span class="num" id="5401056">3</span><span class="op" id="5401057">]</span>&nbsp;<span class="op" id="5401059">=</span>&nbsp;<span class="op" id="5401061">(</span><span class="ident" id="5401062"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5401065">+</span>&nbsp;<span class="ident" id="5401067"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span><span class="op" id="5401069">)</span>&nbsp;<span class="op" id="5401071">&gt;&gt;</span>&nbsp;<span class="num" id="5401074">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401078"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401081">[</span><span class="ident" id="5401082"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401084">+</span><span class="num" id="5401085">4</span><span class="op" id="5401086">]</span>&nbsp;<span class="op" id="5401088">=</span>&nbsp;<span class="op" id="5401090">(</span><span class="ident" id="5401091"><a href="/image/jpeg/idct.go.html#5400532">x8</a></span>&nbsp;<span class="op" id="5401094">-</span>&nbsp;<span class="ident" id="5401096"><a href="/image/jpeg/idct.go.html#5400481">x6</a></span><span class="op" id="5401098">)</span>&nbsp;<span class="op" id="5401100">&gt;&gt;</span>&nbsp;<span class="num" id="5401103">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401107"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401110">[</span><span class="ident" id="5401111"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401113">+</span><span class="num" id="5401114">5</span><span class="op" id="5401115">]</span>&nbsp;<span class="op" id="5401117">=</span>&nbsp;<span class="op" id="5401119">(</span><span class="ident" id="5401120"><a href="/image/jpeg/idct.go.html#5400353">x0</a></span>&nbsp;<span class="op" id="5401123">-</span>&nbsp;<span class="ident" id="5401125"><a href="/image/jpeg/idct.go.html#5400445">x4</a></span><span class="op" id="5401127">)</span>&nbsp;<span class="op" id="5401129">&gt;&gt;</span>&nbsp;<span class="num" id="5401132">8</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401136"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401139">[</span><span class="ident" id="5401140"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401142">+</span><span class="num" id="5401143">6</span><span class="op" id="5401144">]</span>&nbsp;<span class="op" id="5401146">=</span>&nbsp;<span class="op" id="5401148">(</span><span class="ident" id="5401149"><a href="/image/jpeg/idct.go.html#5400427">x3</a></span>&nbsp;<span class="op" id="5401152">-</span>&nbsp;<span class="ident" id="5401154"><a href="/image/jpeg/idct.go.html#5400409">x2</a></span><span class="op" id="5401156">)</span>&nbsp;<span class="op" id="5401158">&gt;&gt;</span>&nbsp;<span class="num" id="5401161">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401165"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401168">[</span><span class="ident" id="5401169"><a href="/image/jpeg/idct.go.html#5399940">y8</a></span><span class="op" id="5401171">+</span><span class="num" id="5401172">7</span><span class="op" id="5401173">]</span>&nbsp;<span class="op" id="5401175">=</span>&nbsp;<span class="op" id="5401177">(</span><span class="ident" id="5401178"><a href="/image/jpeg/idct.go.html#5400499">x7</a></span>&nbsp;<span class="op" id="5401181">-</span>&nbsp;<span class="ident" id="5401183"><a href="/image/jpeg/idct.go.html#5400385">x1</a></span><span class="op" id="5401185">)</span>&nbsp;<span class="op" id="5401187">&gt;&gt;</span>&nbsp;<span class="num" id="5401190">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5401193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401197">//&nbsp;Vertical&nbsp;1-D&nbsp;IDCT.</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5401220">for</span>&nbsp;<span class="ident" id="5401224">x</span>&nbsp;<span class="op" id="5401226">:=</span>&nbsp;<span class="num" id="5401229">0</span><span class="op" id="5401230">;</span>&nbsp;<span class="ident" id="5401232"><a href="/image/jpeg/idct.go.html#5401224">x</a></span>&nbsp;<span class="op" id="5401234">&lt;</span>&nbsp;<span class="num" id="5401236">8</span><span class="op" id="5401237">;</span>&nbsp;<span class="ident" id="5401239"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401240">++</span>&nbsp;<span class="op" id="5401243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401247">//&nbsp;Similar&nbsp;to&nbsp;the&nbsp;horizontal&nbsp;1-D&nbsp;IDCT&nbsp;case,&nbsp;if&nbsp;all&nbsp;the&nbsp;AC&nbsp;components&nbsp;are&nbsp;zero,&nbsp;then&nbsp;the&nbsp;IDCT&nbsp;is&nbsp;trivial.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401354">//&nbsp;However,&nbsp;after&nbsp;performing&nbsp;the&nbsp;horizontal&nbsp;1-D&nbsp;IDCT,&nbsp;there&nbsp;are&nbsp;typically&nbsp;non-zero&nbsp;AC&nbsp;components,&nbsp;so</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401457">//&nbsp;we&nbsp;do&nbsp;not&nbsp;bother&nbsp;to&nbsp;check&nbsp;for&nbsp;the&nbsp;all-zero&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401512">//&nbsp;Prescale.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401527">y0</span>&nbsp;<span class="op" id="5401530">:=</span>&nbsp;<span class="op" id="5401533">(</span><span class="ident" id="5401534"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401537">[</span><span class="num" id="5401538">8</span><span class="op" id="5401539">*</span><span class="num" id="5401540">0</span><span class="op" id="5401541">+</span><span class="ident" id="5401542"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401543">]</span>&nbsp;<span class="op" id="5401545">&lt;&lt;</span>&nbsp;<span class="num" id="5401548">8</span><span class="op" id="5401549">)</span>&nbsp;<span class="op" id="5401551">+</span>&nbsp;<span class="num" id="5401553">8192</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401560">y1</span>&nbsp;<span class="op" id="5401563">:=</span>&nbsp;<span class="ident" id="5401566"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401569">[</span><span class="num" id="5401570">8</span><span class="op" id="5401571">*</span><span class="num" id="5401572">4</span><span class="op" id="5401573">+</span><span class="ident" id="5401574"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401575">]</span>&nbsp;<span class="op" id="5401577">&lt;&lt;</span>&nbsp;<span class="num" id="5401580">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401584">y2</span>&nbsp;<span class="op" id="5401587">:=</span>&nbsp;<span class="ident" id="5401590"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401593">[</span><span class="num" id="5401594">8</span><span class="op" id="5401595">*</span><span class="num" id="5401596">6</span><span class="op" id="5401597">+</span><span class="ident" id="5401598"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401599">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401603">y3</span>&nbsp;<span class="op" id="5401606">:=</span>&nbsp;<span class="ident" id="5401609"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401612">[</span><span class="num" id="5401613">8</span><span class="op" id="5401614">*</span><span class="num" id="5401615">2</span><span class="op" id="5401616">+</span><span class="ident" id="5401617"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401618">]</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401622">y4</span>&nbsp;<span class="op" id="5401625">:=</span>&nbsp;<span class="ident" id="5401628"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401631">[</span><span class="num" id="5401632">8</span><span class="op" id="5401633">*</span><span class="num" id="5401634">1</span><span class="op" id="5401635">+</span><span class="ident" id="5401636"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401637">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401641">y5</span>&nbsp;<span class="op" id="5401644">:=</span>&nbsp;<span class="ident" id="5401647"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401650">[</span><span class="num" id="5401651">8</span><span class="op" id="5401652">*</span><span class="num" id="5401653">7</span><span class="op" id="5401654">+</span><span class="ident" id="5401655"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401656">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401660">y6</span>&nbsp;<span class="op" id="5401663">:=</span>&nbsp;<span class="ident" id="5401666"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401669">[</span><span class="num" id="5401670">8</span><span class="op" id="5401671">*</span><span class="num" id="5401672">5</span><span class="op" id="5401673">+</span><span class="ident" id="5401674"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401675">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401679">y7</span>&nbsp;<span class="op" id="5401682">:=</span>&nbsp;<span class="ident" id="5401685"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5401688">[</span><span class="num" id="5401689">8</span><span class="op" id="5401690">*</span><span class="num" id="5401691">3</span><span class="op" id="5401692">+</span><span class="ident" id="5401693"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5401694">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401699">//&nbsp;Stage&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401713">y8</span>&nbsp;<span class="op" id="5401716">:=</span>&nbsp;<span class="ident" id="5401719"><a href="/image/jpeg/idct.go.html#5399187">w7</a></span><span class="op" id="5401721">*</span><span class="op" id="5401722">(</span><span class="ident" id="5401723"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5401725">+</span><span class="ident" id="5401726"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span><span class="op" id="5401728">)</span>&nbsp;<span class="op" id="5401730">+</span>&nbsp;<span class="num" id="5401732">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401736"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span>&nbsp;<span class="op" id="5401739">=</span>&nbsp;<span class="op" id="5401741">(</span><span class="ident" id="5401742"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401745">+</span>&nbsp;<span class="ident" id="5401747"><a href="/image/jpeg/idct.go.html#5399245">w1mw7</a></span><span class="op" id="5401752">*</span><span class="ident" id="5401753"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5401755">)</span>&nbsp;<span class="op" id="5401757">&gt;&gt;</span>&nbsp;<span class="num" id="5401760">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401764"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span>&nbsp;<span class="op" id="5401767">=</span>&nbsp;<span class="op" id="5401769">(</span><span class="ident" id="5401770"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401773">-</span>&nbsp;<span class="ident" id="5401775"><a href="/image/jpeg/idct.go.html#5399228">w1pw7</a></span><span class="op" id="5401780">*</span><span class="ident" id="5401781"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span><span class="op" id="5401783">)</span>&nbsp;<span class="op" id="5401785">&gt;&gt;</span>&nbsp;<span class="num" id="5401788">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401792"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401795">=</span>&nbsp;<span class="ident" id="5401797"><a href="/image/jpeg/idct.go.html#5399067">w3</a></span><span class="op" id="5401799">*</span><span class="op" id="5401800">(</span><span class="ident" id="5401801"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><span class="op" id="5401803">+</span><span class="ident" id="5401804"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span><span class="op" id="5401806">)</span>&nbsp;<span class="op" id="5401808">+</span>&nbsp;<span class="num" id="5401810">4</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401814"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span>&nbsp;<span class="op" id="5401817">=</span>&nbsp;<span class="op" id="5401819">(</span><span class="ident" id="5401820"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401823">-</span>&nbsp;<span class="ident" id="5401825"><a href="/image/jpeg/idct.go.html#5399313">w3mw5</a></span><span class="op" id="5401830">*</span><span class="ident" id="5401831"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><span class="op" id="5401833">)</span>&nbsp;<span class="op" id="5401835">&gt;&gt;</span>&nbsp;<span class="num" id="5401838">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401842"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span>&nbsp;<span class="op" id="5401845">=</span>&nbsp;<span class="op" id="5401847">(</span><span class="ident" id="5401848"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401851">-</span>&nbsp;<span class="ident" id="5401853"><a href="/image/jpeg/idct.go.html#5399296">w3pw5</a></span><span class="op" id="5401858">*</span><span class="ident" id="5401859"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span><span class="op" id="5401861">)</span>&nbsp;<span class="op" id="5401863">&gt;&gt;</span>&nbsp;<span class="num" id="5401866">3</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5401871">//&nbsp;Stage&nbsp;2.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401885"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5401888">=</span>&nbsp;<span class="ident" id="5401890"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5401893">+</span>&nbsp;<span class="ident" id="5401895"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401900"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5401903">-=</span>&nbsp;<span class="ident" id="5401906"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401911"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span>&nbsp;<span class="op" id="5401914">=</span>&nbsp;<span class="ident" id="5401916"><a href="/image/jpeg/idct.go.html#5399147">w6</a></span><span class="op" id="5401918">*</span><span class="op" id="5401919">(</span><span class="ident" id="5401920"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span><span class="op" id="5401922">+</span><span class="ident" id="5401923"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><span class="op" id="5401925">)</span>&nbsp;<span class="op" id="5401927">+</span>&nbsp;<span class="num" id="5401929">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401933"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span>&nbsp;<span class="op" id="5401936">=</span>&nbsp;<span class="op" id="5401938">(</span><span class="ident" id="5401939"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span>&nbsp;<span class="op" id="5401942">-</span>&nbsp;<span class="ident" id="5401944"><a href="/image/jpeg/idct.go.html#5399262">w2pw6</a></span><span class="op" id="5401949">*</span><span class="ident" id="5401950"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><span class="op" id="5401952">)</span>&nbsp;<span class="op" id="5401954">&gt;&gt;</span>&nbsp;<span class="num" id="5401957">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401961"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span>&nbsp;<span class="op" id="5401964">=</span>&nbsp;<span class="op" id="5401966">(</span><span class="ident" id="5401967"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span>&nbsp;<span class="op" id="5401970">+</span>&nbsp;<span class="ident" id="5401972"><a href="/image/jpeg/idct.go.html#5399279">w2mw6</a></span><span class="op" id="5401977">*</span><span class="ident" id="5401978"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span><span class="op" id="5401980">)</span>&nbsp;<span class="op" id="5401982">&gt;&gt;</span>&nbsp;<span class="num" id="5401985">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5401989"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span>&nbsp;<span class="op" id="5401992">=</span>&nbsp;<span class="ident" id="5401994"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span>&nbsp;<span class="op" id="5401997">+</span>&nbsp;<span class="ident" id="5401999"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402004"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span>&nbsp;<span class="op" id="5402007">-=</span>&nbsp;<span class="ident" id="5402010"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402015"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span>&nbsp;<span class="op" id="5402018">=</span>&nbsp;<span class="ident" id="5402020"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span>&nbsp;<span class="op" id="5402023">+</span>&nbsp;<span class="ident" id="5402025"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402030"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span>&nbsp;<span class="op" id="5402033">-=</span>&nbsp;<span class="ident" id="5402036"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5402042">//&nbsp;Stage&nbsp;3.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402056"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span>&nbsp;<span class="op" id="5402059">=</span>&nbsp;<span class="ident" id="5402061"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5402064">+</span>&nbsp;<span class="ident" id="5402066"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402071"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5402074">-=</span>&nbsp;<span class="ident" id="5402077"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402082"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span>&nbsp;<span class="op" id="5402085">=</span>&nbsp;<span class="ident" id="5402087"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5402090">+</span>&nbsp;<span class="ident" id="5402092"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402097"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5402100">-=</span>&nbsp;<span class="ident" id="5402103"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402108"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span>&nbsp;<span class="op" id="5402111">=</span>&nbsp;<span class="op" id="5402113">(</span><span class="ident" id="5402114"><a href="/image/jpeg/idct.go.html#5399331">r2</a></span><span class="op" id="5402116">*</span><span class="op" id="5402117">(</span><span class="ident" id="5402118"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5402120">+</span><span class="ident" id="5402121"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span><span class="op" id="5402123">)</span>&nbsp;<span class="op" id="5402125">+</span>&nbsp;<span class="num" id="5402127">128</span><span class="op" id="5402130">)</span>&nbsp;<span class="op" id="5402132">&gt;&gt;</span>&nbsp;<span class="num" id="5402135">8</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402139"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span>&nbsp;<span class="op" id="5402142">=</span>&nbsp;<span class="op" id="5402144">(</span><span class="ident" id="5402145"><a href="/image/jpeg/idct.go.html#5399331">r2</a></span><span class="op" id="5402147">*</span><span class="op" id="5402148">(</span><span class="ident" id="5402149"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5402151">-</span><span class="ident" id="5402152"><a href="/image/jpeg/idct.go.html#5401641">y5</a></span><span class="op" id="5402154">)</span>&nbsp;<span class="op" id="5402156">+</span>&nbsp;<span class="num" id="5402158">128</span><span class="op" id="5402161">)</span>&nbsp;<span class="op" id="5402163">&gt;&gt;</span>&nbsp;<span class="num" id="5402166">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5402171">//&nbsp;Stage&nbsp;4.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402185"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402188">[</span><span class="num" id="5402189">8</span><span class="op" id="5402190">*</span><span class="num" id="5402191">0</span><span class="op" id="5402192">+</span><span class="ident" id="5402193"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402194">]</span>&nbsp;<span class="op" id="5402196">=</span>&nbsp;<span class="op" id="5402198">(</span><span class="ident" id="5402199"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span>&nbsp;<span class="op" id="5402202">+</span>&nbsp;<span class="ident" id="5402204"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span><span class="op" id="5402206">)</span>&nbsp;<span class="op" id="5402208">&gt;&gt;</span>&nbsp;<span class="num" id="5402211">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402216"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402219">[</span><span class="num" id="5402220">8</span><span class="op" id="5402221">*</span><span class="num" id="5402222">1</span><span class="op" id="5402223">+</span><span class="ident" id="5402224"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402225">]</span>&nbsp;<span class="op" id="5402227">=</span>&nbsp;<span class="op" id="5402229">(</span><span class="ident" id="5402230"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span>&nbsp;<span class="op" id="5402233">+</span>&nbsp;<span class="ident" id="5402235"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><span class="op" id="5402237">)</span>&nbsp;<span class="op" id="5402239">&gt;&gt;</span>&nbsp;<span class="num" id="5402242">14</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402247"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402250">[</span><span class="num" id="5402251">8</span><span class="op" id="5402252">*</span><span class="num" id="5402253">2</span><span class="op" id="5402254">+</span><span class="ident" id="5402255"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402256">]</span>&nbsp;<span class="op" id="5402258">=</span>&nbsp;<span class="op" id="5402260">(</span><span class="ident" id="5402261"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5402264">+</span>&nbsp;<span class="ident" id="5402266"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5402268">)</span>&nbsp;<span class="op" id="5402270">&gt;&gt;</span>&nbsp;<span class="num" id="5402273">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402278"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402281">[</span><span class="num" id="5402282">8</span><span class="op" id="5402283">*</span><span class="num" id="5402284">3</span><span class="op" id="5402285">+</span><span class="ident" id="5402286"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402287">]</span>&nbsp;<span class="op" id="5402289">=</span>&nbsp;<span class="op" id="5402291">(</span><span class="ident" id="5402292"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5402295">+</span>&nbsp;<span class="ident" id="5402297"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><span class="op" id="5402299">)</span>&nbsp;<span class="op" id="5402301">&gt;&gt;</span>&nbsp;<span class="num" id="5402304">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402309"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402312">[</span><span class="num" id="5402313">8</span><span class="op" id="5402314">*</span><span class="num" id="5402315">4</span><span class="op" id="5402316">+</span><span class="ident" id="5402317"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402318">]</span>&nbsp;<span class="op" id="5402320">=</span>&nbsp;<span class="op" id="5402322">(</span><span class="ident" id="5402323"><a href="/image/jpeg/idct.go.html#5401713">y8</a></span>&nbsp;<span class="op" id="5402326">-</span>&nbsp;<span class="ident" id="5402328"><a href="/image/jpeg/idct.go.html#5401660">y6</a></span><span class="op" id="5402330">)</span>&nbsp;<span class="op" id="5402332">&gt;&gt;</span>&nbsp;<span class="num" id="5402335">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402340"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402343">[</span><span class="num" id="5402344">8</span><span class="op" id="5402345">*</span><span class="num" id="5402346">5</span><span class="op" id="5402347">+</span><span class="ident" id="5402348"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402349">]</span>&nbsp;<span class="op" id="5402351">=</span>&nbsp;<span class="op" id="5402353">(</span><span class="ident" id="5402354"><a href="/image/jpeg/idct.go.html#5401527">y0</a></span>&nbsp;<span class="op" id="5402357">-</span>&nbsp;<span class="ident" id="5402359"><a href="/image/jpeg/idct.go.html#5401622">y4</a></span><span class="op" id="5402361">)</span>&nbsp;<span class="op" id="5402363">&gt;&gt;</span>&nbsp;<span class="num" id="5402366">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402371"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402374">[</span><span class="num" id="5402375">8</span><span class="op" id="5402376">*</span><span class="num" id="5402377">6</span><span class="op" id="5402378">+</span><span class="ident" id="5402379"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402380">]</span>&nbsp;<span class="op" id="5402382">=</span>&nbsp;<span class="op" id="5402384">(</span><span class="ident" id="5402385"><a href="/image/jpeg/idct.go.html#5401603">y3</a></span>&nbsp;<span class="op" id="5402388">-</span>&nbsp;<span class="ident" id="5402390"><a href="/image/jpeg/idct.go.html#5401584">y2</a></span><span class="op" id="5402392">)</span>&nbsp;<span class="op" id="5402394">&gt;&gt;</span>&nbsp;<span class="num" id="5402397">14</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5402402"><a href="/image/jpeg/idct.go.html#5399873">src</a></span><span class="op" id="5402405">[</span><span class="num" id="5402406">8</span><span class="op" id="5402407">*</span><span class="num" id="5402408">7</span><span class="op" id="5402409">+</span><span class="ident" id="5402410"><a href="/image/jpeg/idct.go.html#5401224">x</a></span><span class="op" id="5402411">]</span>&nbsp;<span class="op" id="5402413">=</span>&nbsp;<span class="op" id="5402415">(</span><span class="ident" id="5402416"><a href="/image/jpeg/idct.go.html#5401679">y7</a></span>&nbsp;<span class="op" id="5402419">-</span>&nbsp;<span class="ident" id="5402421"><a href="/image/jpeg/idct.go.html#5401560">y1</a></span><span class="op" id="5402423">)</span>&nbsp;<span class="op" id="5402425">&gt;&gt;</span>&nbsp;<span class="num" id="5402428">14</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5402432">}</span><br>
<span class="lineno"></span><span class="op" id="5402434">}</span>
</div>
</body>
</html>
