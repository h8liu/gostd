<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>time</h2>
<ul>
<li><a href="/gostd/time/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/time/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/time/format.go.html">format.go</a></li>
<li><a href="/gostd/time/format_test.go.html">format_test.go</a></li>
<li><a href="/gostd/time/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/time/sleep.go.html">sleep.go</a></li>
<li><a href="/gostd/time/sleep_test.go.html">sleep_test.go</a></li>
<li><a href="/gostd/time/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/time/tick.go.html">tick.go</a></li>
<li><a href="/gostd/time/tick_test.go.html">tick_test.go</a></li>
<li><a href="/gostd/time/time.go.html">time.go</a></li>
<li><a href="/gostd/time/time_test.go.html">time_test.go</a></li>
<li><a href="/gostd/time/zoneinfo.go.html">zoneinfo.go</a></li>
<li><a href="/gostd/time/zoneinfo_read.go.html">zoneinfo_read.go</a></li>
<li><a href="/gostd/time/zoneinfo_test.go.html">zoneinfo_test.go</a></li>
<li><a href="/gostd/time/zoneinfo_unix.go.html">zoneinfo_unix.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2738892">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2738947">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2739001">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2739052">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2739122">package</span>&nbsp;<span class="ident" id="2739130">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2739136">import</span>&nbsp;<span class="op" id="2739143">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2739146">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="2739156">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2739166">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2739169">//&nbsp;for&nbsp;testing:&nbsp;whatever&nbsp;interrupts&nbsp;a&nbsp;sleep</span><br>
<span class="lineno">15</span><span class="keyword" id="2739213">func</span>&nbsp;<span class="ident" id="2739218">interrupt</span><span class="op" id="2739227">(</span><span class="op" id="2739228">)</span>&nbsp;<span class="op" id="2739230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739233">syscall</span><span class="op" id="2739240">.</span><span class="ident" id="2739241">Kill</span><span class="op" id="2739245">(</span><span class="ident" id="2739246">syscall</span><span class="op" id="2739253">.</span><span class="ident" id="2739254">Getpid</span><span class="op" id="2739260">(</span><span class="op" id="2739261">)</span><span class="op" id="2739262">,</span>&nbsp;<span class="ident" id="2739264">syscall</span><span class="op" id="2739271">.</span><span class="ident" id="2739272">SIGCHLD</span><span class="op" id="2739279">)</span><br>
<span class="lineno"></span><span class="op" id="2739281">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2739284">//&nbsp;readFile&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;named&nbsp;file.</span><br>
<span class="lineno">20</span><span class="comment" id="2739345">//&nbsp;It&nbsp;is&nbsp;a&nbsp;trivial&nbsp;implementation&nbsp;of&nbsp;ioutil.ReadFile,&nbsp;reimplemented</span><br>
<span class="lineno"></span><span class="comment" id="2739413">//&nbsp;here&nbsp;to&nbsp;avoid&nbsp;depending&nbsp;on&nbsp;io/ioutil&nbsp;or&nbsp;os.</span><br>
<span class="lineno"></span><span class="keyword" id="2739460">func</span>&nbsp;<span class="ident" id="2739465">readFile</span><span class="op" id="2739473">(</span><span class="ident" id="2739474">name</span>&nbsp;<span class="builtintype" id="2739479">string</span><span class="op" id="2739485">)</span>&nbsp;<span class="op" id="2739487">(</span><span class="op" id="2739488">[</span><span class="op" id="2739489">]</span><span class="builtintype" id="2739490">byte</span><span class="op" id="2739494">,</span>&nbsp;<span class="builtintype" id="2739496">error</span><span class="op" id="2739501">)</span>&nbsp;<span class="op" id="2739503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739506">f</span><span class="op" id="2739507">,</span>&nbsp;<span class="ident" id="2739509">err</span>&nbsp;<span class="op" id="2739513">:=</span>&nbsp;<span class="ident" id="2739516">syscall</span><span class="op" id="2739523">.</span><span class="ident" id="2739524">Open</span><span class="op" id="2739528">(</span><span class="ident" id="2739529">name</span><span class="op" id="2739533">,</span>&nbsp;<span class="ident" id="2739535">syscall</span><span class="op" id="2739542">.</span><span class="ident" id="2739543">O_RDONLY</span><span class="op" id="2739551">,</span>&nbsp;<span class="num" id="2739553">0</span><span class="op" id="2739554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739557">if</span>&nbsp;<span class="ident" id="2739560">err</span>&nbsp;<span class="op" id="2739564">!=</span>&nbsp;<span class="ident" id="2739567">nil</span>&nbsp;<span class="op" id="2739571">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739575">return</span>&nbsp;<span class="ident" id="2739582">nil</span><span class="op" id="2739585">,</span>&nbsp;<span class="ident" id="2739587">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739595">defer</span>&nbsp;<span class="ident" id="2739601">syscall</span><span class="op" id="2739608">.</span><span class="ident" id="2739609">Close</span><span class="op" id="2739614">(</span><span class="ident" id="2739615">f</span><span class="op" id="2739616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739619">var</span>&nbsp;<span class="op" id="2739623">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739627">buf</span>&nbsp;<span class="op" id="2739631">[</span><span class="num" id="2739632">4096</span><span class="op" id="2739636">]</span><span class="builtintype" id="2739637">byte</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739644">ret</span>&nbsp;<span class="op" id="2739648">[</span><span class="op" id="2739649">]</span><span class="builtintype" id="2739650">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739657">n</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2739661">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739669">for</span>&nbsp;<span class="op" id="2739673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739677">n</span><span class="op" id="2739678">,</span>&nbsp;<span class="ident" id="2739680">err</span>&nbsp;<span class="op" id="2739684">=</span>&nbsp;<span class="ident" id="2739686">syscall</span><span class="op" id="2739693">.</span><span class="ident" id="2739694">Read</span><span class="op" id="2739698">(</span><span class="ident" id="2739699">f</span><span class="op" id="2739700">,</span>&nbsp;<span class="ident" id="2739702">buf</span><span class="op" id="2739705">[</span><span class="op" id="2739706">:</span><span class="op" id="2739707">]</span><span class="op" id="2739708">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739712">if</span>&nbsp;<span class="ident" id="2739715">n</span>&nbsp;<span class="op" id="2739717">&gt;</span>&nbsp;<span class="num" id="2739719">0</span>&nbsp;<span class="op" id="2739721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739726">ret</span>&nbsp;<span class="op" id="2739730">=</span>&nbsp;<span class="builtinfunc" id="2739732">append</span><span class="op" id="2739738">(</span><span class="ident" id="2739739">ret</span><span class="op" id="2739742">,</span>&nbsp;<span class="ident" id="2739744">buf</span><span class="op" id="2739747">[</span><span class="op" id="2739748">:</span><span class="ident" id="2739749">n</span><span class="op" id="2739750">]</span><span class="op" id="2739751">...</span><span class="op" id="2739754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739762">if</span>&nbsp;<span class="ident" id="2739765">n</span>&nbsp;<span class="op" id="2739767">==</span>&nbsp;<span class="num" id="2739770">0</span>&nbsp;<span class="op" id="2739772">||</span>&nbsp;<span class="ident" id="2739775">err</span>&nbsp;<span class="op" id="2739779">!=</span>&nbsp;<span class="ident" id="2739782">nil</span>&nbsp;<span class="op" id="2739786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739791">break</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739805">return</span>&nbsp;<span class="ident" id="2739812">ret</span><span class="op" id="2739815">,</span>&nbsp;<span class="ident" id="2739817">err</span><br>
<span class="lineno"></span><span class="op" id="2739821">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="2739824">func</span>&nbsp;<span class="ident" id="2739829">open</span><span class="op" id="2739833">(</span><span class="ident" id="2739834">name</span>&nbsp;<span class="builtintype" id="2739839">string</span><span class="op" id="2739845">)</span>&nbsp;<span class="op" id="2739847">(</span><span class="builtintype" id="2739848">uintptr</span><span class="op" id="2739855">,</span>&nbsp;<span class="builtintype" id="2739857">error</span><span class="op" id="2739862">)</span>&nbsp;<span class="op" id="2739864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2739867">fd</span><span class="op" id="2739869">,</span>&nbsp;<span class="ident" id="2739871">err</span>&nbsp;<span class="op" id="2739875">:=</span>&nbsp;<span class="ident" id="2739878">syscall</span><span class="op" id="2739885">.</span><span class="ident" id="2739886">Open</span><span class="op" id="2739890">(</span><span class="ident" id="2739891">name</span><span class="op" id="2739895">,</span>&nbsp;<span class="ident" id="2739897">syscall</span><span class="op" id="2739904">.</span><span class="ident" id="2739905">O_RDONLY</span><span class="op" id="2739913">,</span>&nbsp;<span class="num" id="2739915">0</span><span class="op" id="2739916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739919">if</span>&nbsp;<span class="ident" id="2739922">err</span>&nbsp;<span class="op" id="2739926">!=</span>&nbsp;<span class="ident" id="2739929">nil</span>&nbsp;<span class="op" id="2739933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739937">return</span>&nbsp;<span class="num" id="2739944">0</span><span class="op" id="2739945">,</span>&nbsp;<span class="ident" id="2739947">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2739952">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2739955">return</span>&nbsp;<span class="builtintype" id="2739962">uintptr</span><span class="op" id="2739969">(</span><span class="ident" id="2739970">fd</span><span class="op" id="2739972">)</span><span class="op" id="2739973">,</span>&nbsp;<span class="ident" id="2739975">nil</span><br>
<span class="lineno"></span><span class="op" id="2739979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2739982">func</span>&nbsp;<span class="ident" id="2739987">closefd</span><span class="op" id="2739994">(</span><span class="ident" id="2739995">fd</span>&nbsp;<span class="builtintype" id="2739998">uintptr</span><span class="op" id="2740005">)</span>&nbsp;<span class="op" id="2740007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740010">syscall</span><span class="op" id="2740017">.</span><span class="ident" id="2740018">Close</span><span class="op" id="2740023">(</span><span class="builtintype" id="2740024">int</span><span class="op" id="2740027">(</span><span class="ident" id="2740028">fd</span><span class="op" id="2740030">)</span><span class="op" id="2740031">)</span><br>
<span class="lineno">55</span><span class="op" id="2740033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2740036">func</span>&nbsp;<span class="ident" id="2740041">preadn</span><span class="op" id="2740047">(</span><span class="ident" id="2740048">fd</span>&nbsp;<span class="builtintype" id="2740051">uintptr</span><span class="op" id="2740058">,</span>&nbsp;<span class="ident" id="2740060">buf</span>&nbsp;<span class="op" id="2740064">[</span><span class="op" id="2740065">]</span><span class="builtintype" id="2740066">byte</span><span class="op" id="2740070">,</span>&nbsp;<span class="ident" id="2740072">off</span>&nbsp;<span class="builtintype" id="2740076">int</span><span class="op" id="2740079">)</span>&nbsp;<span class="builtintype" id="2740081">error</span>&nbsp;<span class="op" id="2740087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740090">whence</span>&nbsp;<span class="op" id="2740097">:=</span>&nbsp;<span class="num" id="2740100">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740103">if</span>&nbsp;<span class="ident" id="2740106">off</span>&nbsp;<span class="op" id="2740110">&lt;</span>&nbsp;<span class="num" id="2740112">0</span>&nbsp;<span class="op" id="2740114">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740118">whence</span>&nbsp;<span class="op" id="2740125">=</span>&nbsp;<span class="num" id="2740127">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740133">if</span>&nbsp;<span class="ident" id="2740136">_</span><span class="op" id="2740137">,</span>&nbsp;<span class="ident" id="2740139">err</span>&nbsp;<span class="op" id="2740143">:=</span>&nbsp;<span class="ident" id="2740146">syscall</span><span class="op" id="2740153">.</span><span class="ident" id="2740154">Seek</span><span class="op" id="2740158">(</span><span class="builtintype" id="2740159">int</span><span class="op" id="2740162">(</span><span class="ident" id="2740163">fd</span><span class="op" id="2740165">)</span><span class="op" id="2740166">,</span>&nbsp;<span class="ident" id="2740168">int64</span><span class="op" id="2740173">(</span><span class="ident" id="2740174">off</span><span class="op" id="2740177">)</span><span class="op" id="2740178">,</span>&nbsp;<span class="ident" id="2740180">whence</span><span class="op" id="2740186">)</span><span class="op" id="2740187">;</span>&nbsp;<span class="ident" id="2740189">err</span>&nbsp;<span class="op" id="2740193">!=</span>&nbsp;<span class="ident" id="2740196">nil</span>&nbsp;<span class="op" id="2740200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740204">return</span>&nbsp;<span class="ident" id="2740211">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740216">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740219">for</span>&nbsp;<span class="builtinfunc" id="2740223">len</span><span class="op" id="2740226">(</span><span class="ident" id="2740227">buf</span><span class="op" id="2740230">)</span>&nbsp;<span class="op" id="2740232">&gt;</span>&nbsp;<span class="num" id="2740234">0</span>&nbsp;<span class="op" id="2740236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740240">m</span><span class="op" id="2740241">,</span>&nbsp;<span class="ident" id="2740243">err</span>&nbsp;<span class="op" id="2740247">:=</span>&nbsp;<span class="ident" id="2740250">syscall</span><span class="op" id="2740257">.</span><span class="ident" id="2740258">Read</span><span class="op" id="2740262">(</span><span class="builtintype" id="2740263">int</span><span class="op" id="2740266">(</span><span class="ident" id="2740267">fd</span><span class="op" id="2740269">)</span><span class="op" id="2740270">,</span>&nbsp;<span class="ident" id="2740272">buf</span><span class="op" id="2740275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740279">if</span>&nbsp;<span class="ident" id="2740282">m</span>&nbsp;<span class="op" id="2740284">&lt;=</span>&nbsp;<span class="num" id="2740287">0</span>&nbsp;<span class="op" id="2740289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740294">if</span>&nbsp;<span class="ident" id="2740297">err</span>&nbsp;<span class="op" id="2740301">==</span>&nbsp;<span class="ident" id="2740304">nil</span>&nbsp;<span class="op" id="2740308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740314">return</span>&nbsp;<span class="ident" id="2740321">errors</span><span class="op" id="2740327">.</span><span class="ident" id="2740328">New</span><span class="op" id="2740331">(</span><span class="string" id="2740332">&#34;short&nbsp;read&#34;</span><span class="op" id="2740344">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740354">return</span>&nbsp;<span class="ident" id="2740361">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2740371">buf</span>&nbsp;<span class="op" id="2740375">=</span>&nbsp;<span class="ident" id="2740377">buf</span><span class="op" id="2740380">[</span><span class="ident" id="2740381">m</span><span class="op" id="2740382">:</span><span class="op" id="2740383">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2740386">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2740389">return</span>&nbsp;<span class="ident" id="2740396">nil</span><br>
<span class="lineno"></span><span class="op" id="2740400">}</span>
</div>
</body>
</html>
