<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7025717">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7025772">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7025826">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7025877">package</span>&nbsp;<span class="ident" id="7025885">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7025896">import</span>&nbsp;<span class="op" id="7025903">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025906">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025915">&#34;encoding/json&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025932">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025939">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025945">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025958">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025975">&#34;os&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025981">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7025992">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7026003">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7026013">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7026016">func</span>&nbsp;<span class="ident" id="7026021">TestBoundaryLine</span><span class="op" id="7026037">(</span><span class="ident" id="7026038">t</span>&nbsp;<span class="op" id="7026040">*</span><span class="ident" id="7026041"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7026048">.</span><span class="ident" id="7026049">T</span><span class="op" id="7026050">)</span>&nbsp;<span class="op" id="7026052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026055">mr</span>&nbsp;<span class="op" id="7026058">:=</span>&nbsp;<span class="ident" id="7026061"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7026070">(</span><span class="ident" id="7026071"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7026078">.</span><span class="ident" id="7026079">NewReader</span><span class="op" id="7026088">(</span><span class="string" id="7026089">&#34;&#34;</span><span class="op" id="7026091">)</span><span class="op" id="7026092">,</span>&nbsp;<span class="string" id="7026094">&#34;myBoundary&#34;</span><span class="op" id="7026106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026109">if</span>&nbsp;<span class="op" id="7026112">!</span><span class="ident" id="7026113"><a href="/mime/multipart/multipart_test.go.html#7026055">mr</a></span><span class="op" id="7026115">.</span><span class="ident" id="7026116">isBoundaryDelimiterLine</span><span class="op" id="7026139">(</span><span class="op" id="7026140">[</span><span class="op" id="7026141">]</span><span class="builtintype" id="7026142">byte</span><span class="op" id="7026146">(</span><span class="string" id="7026147">&#34;--myBoundary\r\n&#34;</span><span class="op" id="7026165">)</span><span class="op" id="7026166">)</span>&nbsp;<span class="op" id="7026168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026172"><a href="/mime/multipart/multipart_test.go.html#7026038">t</a></span><span class="op" id="7026173">.</span><span class="ident" id="7026174">Error</span><span class="op" id="7026179">(</span><span class="string" id="7026180">&#34;expected&#34;</span><span class="op" id="7026190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026193">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026196">if</span>&nbsp;<span class="op" id="7026199">!</span><span class="ident" id="7026200"><a href="/mime/multipart/multipart_test.go.html#7026055">mr</a></span><span class="op" id="7026202">.</span><span class="ident" id="7026203">isBoundaryDelimiterLine</span><span class="op" id="7026226">(</span><span class="op" id="7026227">[</span><span class="op" id="7026228">]</span><span class="builtintype" id="7026229">byte</span><span class="op" id="7026233">(</span><span class="string" id="7026234">&#34;--myBoundary&nbsp;\r\n&#34;</span><span class="op" id="7026253">)</span><span class="op" id="7026254">)</span>&nbsp;<span class="op" id="7026256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026260"><a href="/mime/multipart/multipart_test.go.html#7026038">t</a></span><span class="op" id="7026261">.</span><span class="ident" id="7026262">Error</span><span class="op" id="7026267">(</span><span class="string" id="7026268">&#34;expected&#34;</span><span class="op" id="7026278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026284">if</span>&nbsp;<span class="op" id="7026287">!</span><span class="ident" id="7026288"><a href="/mime/multipart/multipart_test.go.html#7026055">mr</a></span><span class="op" id="7026290">.</span><span class="ident" id="7026291">isBoundaryDelimiterLine</span><span class="op" id="7026314">(</span><span class="op" id="7026315">[</span><span class="op" id="7026316">]</span><span class="builtintype" id="7026317">byte</span><span class="op" id="7026321">(</span><span class="string" id="7026322">&#34;--myBoundary&nbsp;\n&#34;</span><span class="op" id="7026339">)</span><span class="op" id="7026340">)</span>&nbsp;<span class="op" id="7026342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026346"><a href="/mime/multipart/multipart_test.go.html#7026038">t</a></span><span class="op" id="7026347">.</span><span class="ident" id="7026348">Error</span><span class="op" id="7026353">(</span><span class="string" id="7026354">&#34;expected&#34;</span><span class="op" id="7026364">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026370">if</span>&nbsp;<span class="ident" id="7026373"><a href="/mime/multipart/multipart_test.go.html#7026055">mr</a></span><span class="op" id="7026375">.</span><span class="ident" id="7026376">isBoundaryDelimiterLine</span><span class="op" id="7026399">(</span><span class="op" id="7026400">[</span><span class="op" id="7026401">]</span><span class="builtintype" id="7026402">byte</span><span class="op" id="7026406">(</span><span class="string" id="7026407">&#34;--myBoundary&nbsp;bogus&nbsp;\n&#34;</span><span class="op" id="7026430">)</span><span class="op" id="7026431">)</span>&nbsp;<span class="op" id="7026433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026437"><a href="/mime/multipart/multipart_test.go.html#7026038">t</a></span><span class="op" id="7026438">.</span><span class="ident" id="7026439">Error</span><span class="op" id="7026444">(</span><span class="string" id="7026445">&#34;expected&nbsp;fail&#34;</span><span class="op" id="7026460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026463">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026466">if</span>&nbsp;<span class="ident" id="7026469"><a href="/mime/multipart/multipart_test.go.html#7026055">mr</a></span><span class="op" id="7026471">.</span><span class="ident" id="7026472">isBoundaryDelimiterLine</span><span class="op" id="7026495">(</span><span class="op" id="7026496">[</span><span class="op" id="7026497">]</span><span class="builtintype" id="7026498">byte</span><span class="op" id="7026502">(</span><span class="string" id="7026503">&#34;--myBoundary&nbsp;bogus--&#34;</span><span class="op" id="7026525">)</span><span class="op" id="7026526">)</span>&nbsp;<span class="op" id="7026528">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026532"><a href="/mime/multipart/multipart_test.go.html#7026038">t</a></span><span class="op" id="7026533">.</span><span class="ident" id="7026534">Error</span><span class="op" id="7026539">(</span><span class="string" id="7026540">&#34;expected&nbsp;fail&#34;</span><span class="op" id="7026555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026558">}</span><br>
<span class="lineno"></span><span class="op" id="7026560">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026563">func</span>&nbsp;<span class="ident" id="7026568">escapeString</span><span class="op" id="7026580">(</span><span class="ident" id="7026581">v</span>&nbsp;<span class="builtintype" id="7026583">string</span><span class="op" id="7026589">)</span>&nbsp;<span class="builtintype" id="7026591">string</span>&nbsp;<span class="op" id="7026598">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026601">bytes</span><span class="op" id="7026606">,</span>&nbsp;<span class="ident" id="7026608">_</span>&nbsp;<span class="op" id="7026610">:=</span>&nbsp;<span class="ident" id="7026613"><a href="/mime/multipart/multipart_test.go.html#7025915">json</a></span><span class="op" id="7026617">.</span><span class="ident" id="7026618">Marshal</span><span class="op" id="7026625">(</span><span class="ident" id="7026626"><a href="/mime/multipart/multipart_test.go.html#7026581">v</a></span><span class="op" id="7026627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026630">return</span>&nbsp;<span class="builtintype" id="7026637">string</span><span class="op" id="7026643">(</span><span class="ident" id="7026644"><a href="/mime/multipart/multipart_test.go.html#7026601">bytes</a></span><span class="op" id="7026649">)</span><br>
<span class="lineno"></span><span class="op" id="7026651">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026654">func</span>&nbsp;<span class="ident" id="7026659">expectEq</span><span class="op" id="7026667">(</span><span class="ident" id="7026668">t</span>&nbsp;<span class="op" id="7026670">*</span><span class="ident" id="7026671"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7026678">.</span><span class="ident" id="7026679">T</span><span class="op" id="7026680">,</span>&nbsp;<span class="ident" id="7026682">expected</span><span class="op" id="7026690">,</span>&nbsp;<span class="ident" id="7026692">actual</span><span class="op" id="7026698">,</span>&nbsp;<span class="ident" id="7026700">what</span>&nbsp;<span class="builtintype" id="7026705">string</span><span class="op" id="7026711">)</span>&nbsp;<span class="op" id="7026713">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026716">if</span>&nbsp;<span class="ident" id="7026719"><a href="/mime/multipart/multipart_test.go.html#7026682">expected</a></span>&nbsp;<span class="op" id="7026728">==</span>&nbsp;<span class="ident" id="7026731"><a href="/mime/multipart/multipart_test.go.html#7026692">actual</a></span>&nbsp;<span class="op" id="7026738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7026742">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026753"><a href="/mime/multipart/multipart_test.go.html#7026668">t</a></span><span class="op" id="7026754">.</span><span class="ident" id="7026755">Errorf</span><span class="op" id="7026761">(</span><span class="string" id="7026762">&#34;Unexpected&nbsp;value&nbsp;for&nbsp;%s;&nbsp;got&nbsp;%s&nbsp;(len&nbsp;%d)&nbsp;but&nbsp;expected:&nbsp;%s&nbsp;(len&nbsp;%d)&#34;</span><span class="op" id="7026830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026834"><a href="/mime/multipart/multipart_test.go.html#7026700">what</a></span><span class="op" id="7026838">,</span>&nbsp;<span class="ident" id="7026840"><a href="/mime/multipart/multipart_test.go.html#7026568">escapeString</a></span><span class="op" id="7026852">(</span><span class="ident" id="7026853"><a href="/mime/multipart/multipart_test.go.html#7026692">actual</a></span><span class="op" id="7026859">)</span><span class="op" id="7026860">,</span>&nbsp;<span class="builtinfunc" id="7026862">len</span><span class="op" id="7026865">(</span><span class="ident" id="7026866"><a href="/mime/multipart/multipart_test.go.html#7026692">actual</a></span><span class="op" id="7026872">)</span><span class="op" id="7026873">,</span>&nbsp;<span class="ident" id="7026875"><a href="/mime/multipart/multipart_test.go.html#7026568">escapeString</a></span><span class="op" id="7026887">(</span><span class="ident" id="7026888"><a href="/mime/multipart/multipart_test.go.html#7026682">expected</a></span><span class="op" id="7026896">)</span><span class="op" id="7026897">,</span>&nbsp;<span class="builtinfunc" id="7026899">len</span><span class="op" id="7026902">(</span><span class="ident" id="7026903"><a href="/mime/multipart/multipart_test.go.html#7026682">expected</a></span><span class="op" id="7026911">)</span><span class="op" id="7026912">)</span><br>
<span class="lineno">50</span><span class="op" id="7026914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7026917">func</span>&nbsp;<span class="ident" id="7026922">TestNameAccessors</span><span class="op" id="7026939">(</span><span class="ident" id="7026940">t</span>&nbsp;<span class="op" id="7026942">*</span><span class="ident" id="7026943"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7026950">.</span><span class="ident" id="7026951">T</span><span class="op" id="7026952">)</span>&nbsp;<span class="op" id="7026954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7026957">tests</span>&nbsp;<span class="op" id="7026963">:=</span>&nbsp;<span class="op" id="7026966">[</span><span class="op" id="7026967">...</span><span class="op" id="7026970">]</span><span class="op" id="7026971">[</span><span class="num" id="7026972">3</span><span class="op" id="7026973">]</span><span class="builtintype" id="7026974">string</span><span class="op" id="7026980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7026984">{</span><span class="string" id="7026985">`form-data;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7027008">,</span>&nbsp;<span class="string" id="7027010">&#34;foo&#34;</span><span class="op" id="7027015">,</span>&nbsp;<span class="string" id="7027017">&#34;&#34;</span><span class="op" id="7027019">}</span><span class="op" id="7027020">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027024">{</span><span class="string" id="7027025">`&nbsp;form-data&nbsp;;&nbsp;name=foo`</span><span class="op" id="7027048">,</span>&nbsp;<span class="string" id="7027050">&#34;foo&#34;</span><span class="op" id="7027055">,</span>&nbsp;<span class="string" id="7027057">&#34;&#34;</span><span class="op" id="7027059">}</span><span class="op" id="7027060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027064">{</span><span class="string" id="7027065">`FORM-DATA;name=&#34;foo&#34;`</span><span class="op" id="7027087">,</span>&nbsp;<span class="string" id="7027089">&#34;foo&#34;</span><span class="op" id="7027094">,</span>&nbsp;<span class="string" id="7027096">&#34;&#34;</span><span class="op" id="7027098">}</span><span class="op" id="7027099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027103">{</span><span class="string" id="7027104">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7027129">,</span>&nbsp;<span class="string" id="7027131">&#34;foo&#34;</span><span class="op" id="7027136">,</span>&nbsp;<span class="string" id="7027138">&#34;&#34;</span><span class="op" id="7027140">}</span><span class="op" id="7027141">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027145">{</span><span class="string" id="7027146">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=&#34;foo&#34;`</span><span class="op" id="7027171">,</span>&nbsp;<span class="string" id="7027173">&#34;foo&#34;</span><span class="op" id="7027178">,</span>&nbsp;<span class="string" id="7027180">&#34;&#34;</span><span class="op" id="7027182">}</span><span class="op" id="7027183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027187">{</span><span class="string" id="7027188">`&nbsp;FORM-DATA&nbsp;;&nbsp;name=foo`</span><span class="op" id="7027211">,</span>&nbsp;<span class="string" id="7027213">&#34;foo&#34;</span><span class="op" id="7027218">,</span>&nbsp;<span class="string" id="7027220">&#34;&#34;</span><span class="op" id="7027222">}</span><span class="op" id="7027223">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027227">{</span><span class="string" id="7027228">`&nbsp;FORM-DATA&nbsp;;&nbsp;filename=&#34;foo.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="7027281">,</span>&nbsp;<span class="string" id="7027283">&#34;foo&#34;</span><span class="op" id="7027288">,</span>&nbsp;<span class="string" id="7027290">&#34;foo.txt&#34;</span><span class="op" id="7027299">}</span><span class="op" id="7027300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027304">{</span><span class="string" id="7027305">`&nbsp;not-form-data&nbsp;;&nbsp;filename=&#34;bar.txt&#34;;&nbsp;name=foo;&nbsp;baz=quux`</span><span class="op" id="7027362">,</span>&nbsp;<span class="string" id="7027364">&#34;&#34;</span><span class="op" id="7027366">,</span>&nbsp;<span class="string" id="7027368">&#34;bar.txt&#34;</span><span class="op" id="7027377">}</span><span class="op" id="7027378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7027384">for</span>&nbsp;<span class="ident" id="7027388">i</span><span class="op" id="7027389">,</span>&nbsp;<span class="ident" id="7027391">test</span>&nbsp;<span class="op" id="7027396">:=</span>&nbsp;<span class="keyword" id="7027399">range</span>&nbsp;<span class="ident" id="7027405"><a href="/mime/multipart/multipart_test.go.html#7026957">tests</a></span>&nbsp;<span class="op" id="7027411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027415">p</span>&nbsp;<span class="op" id="7027417">:=</span>&nbsp;<span class="op" id="7027420">&amp;</span><span class="ident" id="7027421"><a href="/mime/multipart/multipart.go.html#3966939">Part</a></span><span class="op" id="7027425">{</span><span class="ident" id="7027426">Header</span><span class="op" id="7027432">:</span>&nbsp;<span class="builtinfunc" id="7027434">make</span><span class="op" id="7027438">(</span><span class="keyword" id="7027439">map</span><span class="op" id="7027442">[</span><span class="builtintype" id="7027443">string</span><span class="op" id="7027449">]</span><span class="op" id="7027450">[</span><span class="op" id="7027451">]</span><span class="builtintype" id="7027452">string</span><span class="op" id="7027458">)</span><span class="op" id="7027459">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027463"><a href="/mime/multipart/multipart_test.go.html#7027415">p</a></span><span class="op" id="7027464">.</span><span class="ident" id="7027465">Header</span><span class="op" id="7027471">.</span><span class="ident" id="7027472">Set</span><span class="op" id="7027475">(</span><span class="string" id="7027476">&#34;Content-Disposition&#34;</span><span class="op" id="7027497">,</span>&nbsp;<span class="ident" id="7027499"><a href="/mime/multipart/multipart_test.go.html#7027391">test</a></span><span class="op" id="7027503">[</span><span class="num" id="7027504">0</span><span class="op" id="7027505">]</span><span class="op" id="7027506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7027510">if</span>&nbsp;<span class="ident" id="7027513">g</span><span class="op" id="7027514">,</span>&nbsp;<span class="ident" id="7027516">e</span>&nbsp;<span class="op" id="7027518">:=</span>&nbsp;<span class="ident" id="7027521"><a href="/mime/multipart/multipart_test.go.html#7027415">p</a></span><span class="op" id="7027522">.</span><span class="ident" id="7027523">FormName</span><span class="op" id="7027531">(</span><span class="op" id="7027532">)</span><span class="op" id="7027533">,</span>&nbsp;<span class="ident" id="7027535"><a href="/mime/multipart/multipart_test.go.html#7027391">test</a></span><span class="op" id="7027539">[</span><span class="num" id="7027540">1</span><span class="op" id="7027541">]</span><span class="op" id="7027542">;</span>&nbsp;<span class="ident" id="7027544"><a href="/mime/multipart/multipart_test.go.html#7027513">g</a></span>&nbsp;<span class="op" id="7027546">!=</span>&nbsp;<span class="ident" id="7027549"><a href="/mime/multipart/multipart_test.go.html#7027516">e</a></span>&nbsp;<span class="op" id="7027551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027556"><a href="/mime/multipart/multipart_test.go.html#7026940">t</a></span><span class="op" id="7027557">.</span><span class="ident" id="7027558">Errorf</span><span class="op" id="7027564">(</span><span class="string" id="7027565">&#34;test&nbsp;%d:&nbsp;FormName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7027600">,</span>&nbsp;<span class="ident" id="7027602"><a href="/mime/multipart/multipart_test.go.html#7027388">i</a></span><span class="op" id="7027603">,</span>&nbsp;<span class="ident" id="7027605"><a href="/mime/multipart/multipart_test.go.html#7027513">g</a></span><span class="op" id="7027606">,</span>&nbsp;<span class="ident" id="7027608"><a href="/mime/multipart/multipart_test.go.html#7027516">e</a></span><span class="op" id="7027609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7027617">if</span>&nbsp;<span class="ident" id="7027620">g</span><span class="op" id="7027621">,</span>&nbsp;<span class="ident" id="7027623">e</span>&nbsp;<span class="op" id="7027625">:=</span>&nbsp;<span class="ident" id="7027628"><a href="/mime/multipart/multipart_test.go.html#7027415">p</a></span><span class="op" id="7027629">.</span><span class="ident" id="7027630">FileName</span><span class="op" id="7027638">(</span><span class="op" id="7027639">)</span><span class="op" id="7027640">,</span>&nbsp;<span class="ident" id="7027642"><a href="/mime/multipart/multipart_test.go.html#7027391">test</a></span><span class="op" id="7027646">[</span><span class="num" id="7027647">2</span><span class="op" id="7027648">]</span><span class="op" id="7027649">;</span>&nbsp;<span class="ident" id="7027651"><a href="/mime/multipart/multipart_test.go.html#7027620">g</a></span>&nbsp;<span class="op" id="7027653">!=</span>&nbsp;<span class="ident" id="7027656"><a href="/mime/multipart/multipart_test.go.html#7027623">e</a></span>&nbsp;<span class="op" id="7027658">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027663"><a href="/mime/multipart/multipart_test.go.html#7026940">t</a></span><span class="op" id="7027664">.</span><span class="ident" id="7027665">Errorf</span><span class="op" id="7027671">(</span><span class="string" id="7027672">&#34;test&nbsp;%d:&nbsp;FileName()&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7027707">,</span>&nbsp;<span class="ident" id="7027709"><a href="/mime/multipart/multipart_test.go.html#7027388">i</a></span><span class="op" id="7027710">,</span>&nbsp;<span class="ident" id="7027712"><a href="/mime/multipart/multipart_test.go.html#7027620">g</a></span><span class="op" id="7027713">,</span>&nbsp;<span class="ident" id="7027715"><a href="/mime/multipart/multipart_test.go.html#7027623">e</a></span><span class="op" id="7027716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7027723">}</span><br>
<span class="lineno"></span><span class="op" id="7027725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="7027728">var</span>&nbsp;<span class="ident" id="7027732">longLine</span>&nbsp;<span class="op" id="7027741">=</span>&nbsp;<span class="ident" id="7027743"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7027750">.</span><span class="ident" id="7027751">Repeat</span><span class="op" id="7027757">(</span><span class="string" id="7027758">&#34;\n\n\r\r\r\n\r\000&#34;</span><span class="op" id="7027778">,</span>&nbsp;<span class="op" id="7027780">(</span><span class="num" id="7027781">1</span><span class="op" id="7027782">&lt;&lt;</span><span class="num" id="7027784">20</span><span class="op" id="7027786">)</span><span class="op" id="7027787">/</span><span class="num" id="7027788">8</span><span class="op" id="7027789">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7027792">func</span>&nbsp;<span class="ident" id="7027797">testMultipartBody</span><span class="op" id="7027814">(</span><span class="ident" id="7027815">sep</span>&nbsp;<span class="builtintype" id="7027819">string</span><span class="op" id="7027825">)</span>&nbsp;<span class="builtintype" id="7027827">string</span>&nbsp;<span class="op" id="7027834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7027837">testBody</span>&nbsp;<span class="op" id="7027846">:=</span>&nbsp;<span class="string" id="7027849">`<br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno">80</span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1<br>
<span class="lineno"></span>HEADER2:&nbsp;value2<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno">85</span>My&nbsp;value<br>
<span class="lineno"></span>The&nbsp;end.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>name:&nbsp;bigsection<br>
<span class="lineno"></span><br>
<span class="lineno">90</span>[longline]<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>Header1:&nbsp;value1b<br>
<span class="lineno"></span>HEADER2:&nbsp;value2b<br>
<span class="lineno"></span>foo-bar:&nbsp;bazb<br>
<span class="lineno">95</span><br>
<span class="lineno"></span>Line&nbsp;1<br>
<span class="lineno"></span>Line&nbsp;2<br>
<span class="lineno"></span>Line&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.<br>
<span class="lineno"></span><br>
<span class="lineno">100</span>--MyBoundary<br>
<span class="lineno"></span><br>
<span class="lineno"></span>never&nbsp;read&nbsp;data<br>
<span class="lineno"></span>--MyBoundary--<br>
<span class="lineno"></span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>useless&nbsp;trailer<br>
<span class="lineno"></span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028206"><a href="/mime/multipart/multipart_test.go.html#7027837">testBody</a></span>&nbsp;<span class="op" id="7028215">=</span>&nbsp;<span class="ident" id="7028217"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7028224">.</span><span class="ident" id="7028225">Replace</span><span class="op" id="7028232">(</span><span class="ident" id="7028233"><a href="/mime/multipart/multipart_test.go.html#7027837">testBody</a></span><span class="op" id="7028241">,</span>&nbsp;<span class="string" id="7028243">&#34;\n&#34;</span><span class="op" id="7028247">,</span>&nbsp;<span class="ident" id="7028249"><a href="/mime/multipart/multipart_test.go.html#7027815">sep</a></span><span class="op" id="7028252">,</span>&nbsp;<span class="op" id="7028254">-</span><span class="num" id="7028255">1</span><span class="op" id="7028256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028259">return</span>&nbsp;<span class="ident" id="7028266"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7028273">.</span><span class="ident" id="7028274">Replace</span><span class="op" id="7028281">(</span><span class="ident" id="7028282"><a href="/mime/multipart/multipart_test.go.html#7027837">testBody</a></span><span class="op" id="7028290">,</span>&nbsp;<span class="string" id="7028292">&#34;[longline]&#34;</span><span class="op" id="7028304">,</span>&nbsp;<span class="ident" id="7028306"><a href="/mime/multipart/multipart_test.go.html#7027732">longLine</a></span><span class="op" id="7028314">,</span>&nbsp;<span class="num" id="7028316">1</span><span class="op" id="7028317">)</span><br>
<span class="lineno">110</span><span class="op" id="7028319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028322">func</span>&nbsp;<span class="ident" id="7028327">TestMultipart</span><span class="op" id="7028340">(</span><span class="ident" id="7028341">t</span>&nbsp;<span class="op" id="7028343">*</span><span class="ident" id="7028344"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7028351">.</span><span class="ident" id="7028352">T</span><span class="op" id="7028353">)</span>&nbsp;<span class="op" id="7028355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028358">bodyReader</span>&nbsp;<span class="op" id="7028369">:=</span>&nbsp;<span class="ident" id="7028372"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7028379">.</span><span class="ident" id="7028380">NewReader</span><span class="op" id="7028389">(</span><span class="ident" id="7028390"><a href="/mime/multipart/multipart_test.go.html#7027797">testMultipartBody</a></span><span class="op" id="7028407">(</span><span class="string" id="7028408">&#34;\r\n&#34;</span><span class="op" id="7028414">)</span><span class="op" id="7028415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028418"><a href="/mime/multipart/multipart_test.go.html#7028763">testMultipart</a></span><span class="op" id="7028431">(</span><span class="ident" id="7028432"><a href="/mime/multipart/multipart_test.go.html#7028341">t</a></span><span class="op" id="7028433">,</span>&nbsp;<span class="ident" id="7028435"><a href="/mime/multipart/multipart_test.go.html#7028358">bodyReader</a></span><span class="op" id="7028445">,</span>&nbsp;<span class="ident" id="7028447">false</span><span class="op" id="7028452">)</span><br>
<span class="lineno">115</span><span class="op" id="7028454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028457">func</span>&nbsp;<span class="ident" id="7028462">TestMultipartOnlyNewlines</span><span class="op" id="7028487">(</span><span class="ident" id="7028488">t</span>&nbsp;<span class="op" id="7028490">*</span><span class="ident" id="7028491"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7028498">.</span><span class="ident" id="7028499">T</span><span class="op" id="7028500">)</span>&nbsp;<span class="op" id="7028502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028505">bodyReader</span>&nbsp;<span class="op" id="7028516">:=</span>&nbsp;<span class="ident" id="7028519"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7028526">.</span><span class="ident" id="7028527">NewReader</span><span class="op" id="7028536">(</span><span class="ident" id="7028537"><a href="/mime/multipart/multipart_test.go.html#7027797">testMultipartBody</a></span><span class="op" id="7028554">(</span><span class="string" id="7028555">&#34;\n&#34;</span><span class="op" id="7028559">)</span><span class="op" id="7028560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028563"><a href="/mime/multipart/multipart_test.go.html#7028763">testMultipart</a></span><span class="op" id="7028576">(</span><span class="ident" id="7028577"><a href="/mime/multipart/multipart_test.go.html#7028488">t</a></span><span class="op" id="7028578">,</span>&nbsp;<span class="ident" id="7028580"><a href="/mime/multipart/multipart_test.go.html#7028505">bodyReader</a></span><span class="op" id="7028590">,</span>&nbsp;<span class="ident" id="7028592">true</span><span class="op" id="7028596">)</span><br>
<span class="lineno">120</span><span class="op" id="7028598">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028601">func</span>&nbsp;<span class="ident" id="7028606">TestMultipartSlowInput</span><span class="op" id="7028628">(</span><span class="ident" id="7028629">t</span>&nbsp;<span class="op" id="7028631">*</span><span class="ident" id="7028632"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7028639">.</span><span class="ident" id="7028640">T</span><span class="op" id="7028641">)</span>&nbsp;<span class="op" id="7028643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028646">bodyReader</span>&nbsp;<span class="op" id="7028657">:=</span>&nbsp;<span class="ident" id="7028660"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7028667">.</span><span class="ident" id="7028668">NewReader</span><span class="op" id="7028677">(</span><span class="ident" id="7028678"><a href="/mime/multipart/multipart_test.go.html#7027797">testMultipartBody</a></span><span class="op" id="7028695">(</span><span class="string" id="7028696">&#34;\r\n&#34;</span><span class="op" id="7028702">)</span><span class="op" id="7028703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028706"><a href="/mime/multipart/multipart_test.go.html#7028763">testMultipart</a></span><span class="op" id="7028719">(</span><span class="ident" id="7028720"><a href="/mime/multipart/multipart_test.go.html#7028629">t</a></span><span class="op" id="7028721">,</span>&nbsp;<span class="op" id="7028723">&amp;</span><span class="ident" id="7028724"><a href="/mime/multipart/multipart_test.go.html#7033298">slowReader</a></span><span class="op" id="7028734">{</span><span class="ident" id="7028735"><a href="/mime/multipart/multipart_test.go.html#7028646">bodyReader</a></span><span class="op" id="7028745">}</span><span class="op" id="7028746">,</span>&nbsp;<span class="ident" id="7028748">false</span><span class="op" id="7028753">)</span><br>
<span class="lineno">125</span><span class="op" id="7028755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7028758">func</span>&nbsp;<span class="ident" id="7028763">testMultipart</span><span class="op" id="7028776">(</span><span class="ident" id="7028777">t</span>&nbsp;<span class="op" id="7028779">*</span><span class="ident" id="7028780"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7028787">.</span><span class="ident" id="7028788">T</span><span class="op" id="7028789">,</span>&nbsp;<span class="ident" id="7028791">r</span>&nbsp;<span class="ident" id="7028793"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7028795">.</span><span class="ident" id="7028796">Reader</span><span class="op" id="7028802">,</span>&nbsp;<span class="ident" id="7028804">onlyNewlines</span>&nbsp;<span class="builtintype" id="7028817">bool</span><span class="op" id="7028821">)</span>&nbsp;<span class="op" id="7028823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028826">reader</span>&nbsp;<span class="op" id="7028833">:=</span>&nbsp;<span class="ident" id="7028836"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7028845">(</span><span class="ident" id="7028846"><a href="/mime/multipart/multipart_test.go.html#7028791">r</a></span><span class="op" id="7028847">,</span>&nbsp;<span class="string" id="7028849">&#34;MyBoundary&#34;</span><span class="op" id="7028861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028864">buf</span>&nbsp;<span class="op" id="7028868">:=</span>&nbsp;<span class="builtinfunc" id="7028871">new</span><span class="op" id="7028874">(</span><span class="ident" id="7028875"><a href="/mime/multipart/multipart_test.go.html#7025906">bytes</a></span><span class="op" id="7028880">.</span><span class="ident" id="7028881">Buffer</span><span class="op" id="7028887">)</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7028891">//&nbsp;Part1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028901">part</span><span class="op" id="7028905">,</span>&nbsp;<span class="ident" id="7028907">err</span>&nbsp;<span class="op" id="7028911">:=</span>&nbsp;<span class="ident" id="7028914"><a href="/mime/multipart/multipart_test.go.html#7028826">reader</a></span><span class="op" id="7028920">.</span><span class="ident" id="7028921">NextPart</span><span class="op" id="7028929">(</span><span class="op" id="7028930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028933">if</span>&nbsp;<span class="ident" id="7028936"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span>&nbsp;<span class="op" id="7028941">==</span>&nbsp;<span class="ident" id="7028944">nil</span>&nbsp;<span class="op" id="7028948">||</span>&nbsp;<span class="ident" id="7028951"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7028955">!=</span>&nbsp;<span class="ident" id="7028958">nil</span>&nbsp;<span class="op" id="7028962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7028966"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7028967">.</span><span class="ident" id="7028968">Error</span><span class="op" id="7028973">(</span><span class="string" id="7028974">&#34;Expected&nbsp;part1&#34;</span><span class="op" id="7028990">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7028994">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029005">if</span>&nbsp;<span class="ident" id="7029008">x</span>&nbsp;<span class="op" id="7029010">:=</span>&nbsp;<span class="ident" id="7029013"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029017">.</span><span class="ident" id="7029018">Header</span><span class="op" id="7029024">.</span><span class="ident" id="7029025">Get</span><span class="op" id="7029028">(</span><span class="string" id="7029029">&#34;Header1&#34;</span><span class="op" id="7029038">)</span><span class="op" id="7029039">;</span>&nbsp;<span class="ident" id="7029041"><a href="/mime/multipart/multipart_test.go.html#7029008">x</a></span>&nbsp;<span class="op" id="7029043">!=</span>&nbsp;<span class="string" id="7029046">&#34;value1&#34;</span>&nbsp;<span class="op" id="7029055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029059"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029060">.</span><span class="ident" id="7029061">Errorf</span><span class="op" id="7029067">(</span><span class="string" id="7029068">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7029103">,</span>&nbsp;<span class="string" id="7029105">&#34;Header1&#34;</span><span class="op" id="7029114">,</span>&nbsp;<span class="ident" id="7029116"><a href="/mime/multipart/multipart_test.go.html#7029008">x</a></span><span class="op" id="7029117">,</span>&nbsp;<span class="string" id="7029119">&#34;value1&#34;</span><span class="op" id="7029127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029130">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029133">if</span>&nbsp;<span class="ident" id="7029136">x</span>&nbsp;<span class="op" id="7029138">:=</span>&nbsp;<span class="ident" id="7029141"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029145">.</span><span class="ident" id="7029146">Header</span><span class="op" id="7029152">.</span><span class="ident" id="7029153">Get</span><span class="op" id="7029156">(</span><span class="string" id="7029157">&#34;foo-bar&#34;</span><span class="op" id="7029166">)</span><span class="op" id="7029167">;</span>&nbsp;<span class="ident" id="7029169"><a href="/mime/multipart/multipart_test.go.html#7029136">x</a></span>&nbsp;<span class="op" id="7029171">!=</span>&nbsp;<span class="string" id="7029174">&#34;baz&#34;</span>&nbsp;<span class="op" id="7029180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029184"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029185">.</span><span class="ident" id="7029186">Errorf</span><span class="op" id="7029192">(</span><span class="string" id="7029193">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7029228">,</span>&nbsp;<span class="string" id="7029230">&#34;foo-bar&#34;</span><span class="op" id="7029239">,</span>&nbsp;<span class="ident" id="7029241"><a href="/mime/multipart/multipart_test.go.html#7029136">x</a></span><span class="op" id="7029242">,</span>&nbsp;<span class="string" id="7029244">&#34;baz&#34;</span><span class="op" id="7029249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029255">if</span>&nbsp;<span class="ident" id="7029258">x</span>&nbsp;<span class="op" id="7029260">:=</span>&nbsp;<span class="ident" id="7029263"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029267">.</span><span class="ident" id="7029268">Header</span><span class="op" id="7029274">.</span><span class="ident" id="7029275">Get</span><span class="op" id="7029278">(</span><span class="string" id="7029279">&#34;Foo-Bar&#34;</span><span class="op" id="7029288">)</span><span class="op" id="7029289">;</span>&nbsp;<span class="ident" id="7029291"><a href="/mime/multipart/multipart_test.go.html#7029258">x</a></span>&nbsp;<span class="op" id="7029293">!=</span>&nbsp;<span class="string" id="7029296">&#34;baz&#34;</span>&nbsp;<span class="op" id="7029302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029306"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029307">.</span><span class="ident" id="7029308">Errorf</span><span class="op" id="7029314">(</span><span class="string" id="7029315">&#34;part.Header.Get(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7029350">,</span>&nbsp;<span class="string" id="7029352">&#34;Foo-Bar&#34;</span><span class="op" id="7029361">,</span>&nbsp;<span class="ident" id="7029363"><a href="/mime/multipart/multipart_test.go.html#7029258">x</a></span><span class="op" id="7029364">,</span>&nbsp;<span class="string" id="7029366">&#34;baz&#34;</span><span class="op" id="7029371">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029377"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7029380">.</span><span class="ident" id="7029381">Reset</span><span class="op" id="7029386">(</span><span class="op" id="7029387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029390">if</span>&nbsp;<span class="ident" id="7029393">_</span><span class="op" id="7029394">,</span>&nbsp;<span class="ident" id="7029396">err</span>&nbsp;<span class="op" id="7029400">:=</span>&nbsp;<span class="ident" id="7029403"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7029405">.</span><span class="ident" id="7029406">Copy</span><span class="op" id="7029410">(</span><span class="ident" id="7029411"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7029414">,</span>&nbsp;<span class="ident" id="7029416"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029420">)</span><span class="op" id="7029421">;</span>&nbsp;<span class="ident" id="7029423"><a href="/mime/multipart/multipart_test.go.html#7029396">err</a></span>&nbsp;<span class="op" id="7029427">!=</span>&nbsp;<span class="ident" id="7029430">nil</span>&nbsp;<span class="op" id="7029434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029438"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029439">.</span><span class="ident" id="7029440">Errorf</span><span class="op" id="7029446">(</span><span class="string" id="7029447">&#34;part&nbsp;1&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7029464">,</span>&nbsp;<span class="ident" id="7029466"><a href="/mime/multipart/multipart_test.go.html#7029396">err</a></span><span class="op" id="7029469">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029472">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029476">adjustNewlines</span>&nbsp;<span class="op" id="7029491">:=</span>&nbsp;<span class="keyword" id="7029494">func</span><span class="op" id="7029498">(</span><span class="ident" id="7029499">s</span>&nbsp;<span class="builtintype" id="7029501">string</span><span class="op" id="7029507">)</span>&nbsp;<span class="builtintype" id="7029509">string</span>&nbsp;<span class="op" id="7029516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029520">if</span>&nbsp;<span class="ident" id="7029523"><a href="/mime/multipart/multipart_test.go.html#7028804">onlyNewlines</a></span>&nbsp;<span class="op" id="7029536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029541">return</span>&nbsp;<span class="ident" id="7029548"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7029555">.</span><span class="ident" id="7029556">Replace</span><span class="op" id="7029563">(</span><span class="ident" id="7029564"><a href="/mime/multipart/multipart_test.go.html#7029499">s</a></span><span class="op" id="7029565">,</span>&nbsp;<span class="string" id="7029567">&#34;\r\n&#34;</span><span class="op" id="7029573">,</span>&nbsp;<span class="string" id="7029575">&#34;\n&#34;</span><span class="op" id="7029579">,</span>&nbsp;<span class="op" id="7029581">-</span><span class="num" id="7029582">1</span><span class="op" id="7029583">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029587">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029591">return</span>&nbsp;<span class="ident" id="7029598"><a href="/mime/multipart/multipart_test.go.html#7029499">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029605"><a href="/mime/multipart/multipart_test.go.html#7026659">expectEq</a></span><span class="op" id="7029613">(</span><span class="ident" id="7029614"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029615">,</span>&nbsp;<span class="ident" id="7029617"><a href="/mime/multipart/multipart_test.go.html#7029476">adjustNewlines</a></span><span class="op" id="7029631">(</span><span class="string" id="7029632">&#34;My&nbsp;value\r\nThe&nbsp;end.&#34;</span><span class="op" id="7029654">)</span><span class="op" id="7029655">,</span>&nbsp;<span class="ident" id="7029657"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7029660">.</span><span class="ident" id="7029661">String</span><span class="op" id="7029667">(</span><span class="op" id="7029668">)</span><span class="op" id="7029669">,</span>&nbsp;<span class="string" id="7029671">&#34;Value&nbsp;of&nbsp;first&nbsp;part&#34;</span><span class="op" id="7029692">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7029696">//&nbsp;Part2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029706"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029710">,</span>&nbsp;<span class="ident" id="7029712"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7029716">=</span>&nbsp;<span class="ident" id="7029718"><a href="/mime/multipart/multipart_test.go.html#7028826">reader</a></span><span class="op" id="7029724">.</span><span class="ident" id="7029725">NextPart</span><span class="op" id="7029733">(</span><span class="op" id="7029734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029737">if</span>&nbsp;<span class="ident" id="7029740"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7029744">!=</span>&nbsp;<span class="ident" id="7029747">nil</span>&nbsp;<span class="op" id="7029751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029755"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029756">.</span><span class="ident" id="7029757">Fatalf</span><span class="op" id="7029763">(</span><span class="string" id="7029764">&#34;Expected&nbsp;part2;&nbsp;got:&nbsp;%v&#34;</span><span class="op" id="7029789">,</span>&nbsp;<span class="ident" id="7029791"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span><span class="op" id="7029794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029798">return</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029809">if</span>&nbsp;<span class="ident" id="7029812">e</span><span class="op" id="7029813">,</span>&nbsp;<span class="ident" id="7029815">g</span>&nbsp;<span class="op" id="7029817">:=</span>&nbsp;<span class="string" id="7029820">&#34;bigsection&#34;</span><span class="op" id="7029832">,</span>&nbsp;<span class="ident" id="7029834"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029838">.</span><span class="ident" id="7029839">Header</span><span class="op" id="7029845">.</span><span class="ident" id="7029846">Get</span><span class="op" id="7029849">(</span><span class="string" id="7029850">&#34;name&#34;</span><span class="op" id="7029856">)</span><span class="op" id="7029857">;</span>&nbsp;<span class="ident" id="7029859"><a href="/mime/multipart/multipart_test.go.html#7029812">e</a></span>&nbsp;<span class="op" id="7029861">!=</span>&nbsp;<span class="ident" id="7029864"><a href="/mime/multipart/multipart_test.go.html#7029815">g</a></span>&nbsp;<span class="op" id="7029866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029870"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029871">.</span><span class="ident" id="7029872">Errorf</span><span class="op" id="7029878">(</span><span class="string" id="7029879">&#34;part2&#39;s&nbsp;name&nbsp;header:&nbsp;expected&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7029921">,</span>&nbsp;<span class="ident" id="7029923"><a href="/mime/multipart/multipart_test.go.html#7029812">e</a></span><span class="op" id="7029924">,</span>&nbsp;<span class="ident" id="7029926"><a href="/mime/multipart/multipart_test.go.html#7029815">g</a></span><span class="op" id="7029927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7029930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029933"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7029936">.</span><span class="ident" id="7029937">Reset</span><span class="op" id="7029942">(</span><span class="op" id="7029943">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7029946">if</span>&nbsp;<span class="ident" id="7029949">_</span><span class="op" id="7029950">,</span>&nbsp;<span class="ident" id="7029952">err</span>&nbsp;<span class="op" id="7029956">:=</span>&nbsp;<span class="ident" id="7029959"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7029961">.</span><span class="ident" id="7029962">Copy</span><span class="op" id="7029966">(</span><span class="ident" id="7029967"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7029970">,</span>&nbsp;<span class="ident" id="7029972"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7029976">)</span><span class="op" id="7029977">;</span>&nbsp;<span class="ident" id="7029979"><a href="/mime/multipart/multipart_test.go.html#7029952">err</a></span>&nbsp;<span class="op" id="7029983">!=</span>&nbsp;<span class="ident" id="7029986">nil</span>&nbsp;<span class="op" id="7029990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7029994"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7029995">.</span><span class="ident" id="7029996">Errorf</span><span class="op" id="7030002">(</span><span class="string" id="7030003">&#34;part&nbsp;2&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7030020">,</span>&nbsp;<span class="ident" id="7030022"><a href="/mime/multipart/multipart_test.go.html#7029952">err</a></span><span class="op" id="7030025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030031">s</span>&nbsp;<span class="op" id="7030033">:=</span>&nbsp;<span class="ident" id="7030036"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7030039">.</span><span class="ident" id="7030040">String</span><span class="op" id="7030046">(</span><span class="op" id="7030047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030050">if</span>&nbsp;<span class="builtinfunc" id="7030053">len</span><span class="op" id="7030056">(</span><span class="ident" id="7030057"><a href="/mime/multipart/multipart_test.go.html#7030031">s</a></span><span class="op" id="7030058">)</span>&nbsp;<span class="op" id="7030060">!=</span>&nbsp;<span class="builtinfunc" id="7030063">len</span><span class="op" id="7030066">(</span><span class="ident" id="7030067"><a href="/mime/multipart/multipart_test.go.html#7027732">longLine</a></span><span class="op" id="7030075">)</span>&nbsp;<span class="op" id="7030077">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030081"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030082">.</span><span class="ident" id="7030083">Errorf</span><span class="op" id="7030089">(</span><span class="string" id="7030090">&#34;part2&nbsp;body&nbsp;expected&nbsp;long&nbsp;line&nbsp;of&nbsp;length&nbsp;%d;&nbsp;got&nbsp;length&nbsp;%d&#34;</span><span class="op" id="7030149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7030154">len</span><span class="op" id="7030157">(</span><span class="ident" id="7030158"><a href="/mime/multipart/multipart_test.go.html#7027732">longLine</a></span><span class="op" id="7030166">)</span><span class="op" id="7030167">,</span>&nbsp;<span class="builtinfunc" id="7030169">len</span><span class="op" id="7030172">(</span><span class="ident" id="7030173"><a href="/mime/multipart/multipart_test.go.html#7030031">s</a></span><span class="op" id="7030174">)</span><span class="op" id="7030175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030181">if</span>&nbsp;<span class="ident" id="7030184"><a href="/mime/multipart/multipart_test.go.html#7030031">s</a></span>&nbsp;<span class="op" id="7030186">!=</span>&nbsp;<span class="ident" id="7030189"><a href="/mime/multipart/multipart_test.go.html#7027732">longLine</a></span>&nbsp;<span class="op" id="7030198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030202"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030203">.</span><span class="ident" id="7030204">Errorf</span><span class="op" id="7030210">(</span><span class="string" id="7030211">&#34;part2&nbsp;long&nbsp;body&nbsp;didn&#39;t&nbsp;match&#34;</span><span class="op" id="7030241">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030248">//&nbsp;Part3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030258"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7030262">,</span>&nbsp;<span class="ident" id="7030264"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030268">=</span>&nbsp;<span class="ident" id="7030270"><a href="/mime/multipart/multipart_test.go.html#7028826">reader</a></span><span class="op" id="7030276">.</span><span class="ident" id="7030277">NextPart</span><span class="op" id="7030285">(</span><span class="op" id="7030286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030289">if</span>&nbsp;<span class="ident" id="7030292"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span>&nbsp;<span class="op" id="7030297">==</span>&nbsp;<span class="ident" id="7030300">nil</span>&nbsp;<span class="op" id="7030304">||</span>&nbsp;<span class="ident" id="7030307"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030311">!=</span>&nbsp;<span class="ident" id="7030314">nil</span>&nbsp;<span class="op" id="7030318">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030322"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030323">.</span><span class="ident" id="7030324">Error</span><span class="op" id="7030329">(</span><span class="string" id="7030330">&#34;Expected&nbsp;part3&#34;</span><span class="op" id="7030346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030350">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030361">if</span>&nbsp;<span class="ident" id="7030364"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7030368">.</span><span class="ident" id="7030369">Header</span><span class="op" id="7030375">.</span><span class="ident" id="7030376">Get</span><span class="op" id="7030379">(</span><span class="string" id="7030380">&#34;foo-bar&#34;</span><span class="op" id="7030389">)</span>&nbsp;<span class="op" id="7030391">!=</span>&nbsp;<span class="string" id="7030394">&#34;bazb&#34;</span>&nbsp;<span class="op" id="7030401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030405"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030406">.</span><span class="ident" id="7030407">Error</span><span class="op" id="7030412">(</span><span class="string" id="7030413">&#34;Expected&nbsp;foo-bar:&nbsp;bazb&#34;</span><span class="op" id="7030437">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030443"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7030446">.</span><span class="ident" id="7030447">Reset</span><span class="op" id="7030452">(</span><span class="op" id="7030453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030456">if</span>&nbsp;<span class="ident" id="7030459">_</span><span class="op" id="7030460">,</span>&nbsp;<span class="ident" id="7030462">err</span>&nbsp;<span class="op" id="7030466">:=</span>&nbsp;<span class="ident" id="7030469"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7030471">.</span><span class="ident" id="7030472">Copy</span><span class="op" id="7030476">(</span><span class="ident" id="7030477"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7030480">,</span>&nbsp;<span class="ident" id="7030482"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7030486">)</span><span class="op" id="7030487">;</span>&nbsp;<span class="ident" id="7030489"><a href="/mime/multipart/multipart_test.go.html#7030462">err</a></span>&nbsp;<span class="op" id="7030493">!=</span>&nbsp;<span class="ident" id="7030496">nil</span>&nbsp;<span class="op" id="7030500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030504"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030505">.</span><span class="ident" id="7030506">Errorf</span><span class="op" id="7030512">(</span><span class="string" id="7030513">&#34;part&nbsp;3&nbsp;copy:&nbsp;%v&#34;</span><span class="op" id="7030530">,</span>&nbsp;<span class="ident" id="7030532"><a href="/mime/multipart/multipart_test.go.html#7030462">err</a></span><span class="op" id="7030535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030538">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030541"><a href="/mime/multipart/multipart_test.go.html#7026659">expectEq</a></span><span class="op" id="7030549">(</span><span class="ident" id="7030550"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030551">,</span>&nbsp;<span class="ident" id="7030553"><a href="/mime/multipart/multipart_test.go.html#7029476">adjustNewlines</a></span><span class="op" id="7030567">(</span><span class="string" id="7030568">&#34;Line&nbsp;1\r\nLine&nbsp;2\r\nLine&nbsp;3&nbsp;ends&nbsp;in&nbsp;a&nbsp;newline,&nbsp;but&nbsp;just&nbsp;one.\r\n&#34;</span><span class="op" id="7030633">)</span><span class="op" id="7030634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030638"><a href="/mime/multipart/multipart_test.go.html#7028864">buf</a></span><span class="op" id="7030641">.</span><span class="ident" id="7030642">String</span><span class="op" id="7030648">(</span><span class="op" id="7030649">)</span><span class="op" id="7030650">,</span>&nbsp;<span class="string" id="7030652">&#34;body&nbsp;of&nbsp;part&nbsp;3&#34;</span><span class="op" id="7030668">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030672">//&nbsp;Part4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030682"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7030686">,</span>&nbsp;<span class="ident" id="7030688"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030692">=</span>&nbsp;<span class="ident" id="7030694"><a href="/mime/multipart/multipart_test.go.html#7028826">reader</a></span><span class="op" id="7030700">.</span><span class="ident" id="7030701">NextPart</span><span class="op" id="7030709">(</span><span class="op" id="7030710">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030713">if</span>&nbsp;<span class="ident" id="7030716"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span>&nbsp;<span class="op" id="7030721">==</span>&nbsp;<span class="ident" id="7030724">nil</span>&nbsp;<span class="op" id="7030728">||</span>&nbsp;<span class="ident" id="7030731"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030735">!=</span>&nbsp;<span class="ident" id="7030738">nil</span>&nbsp;<span class="op" id="7030742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030746"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030747">.</span><span class="ident" id="7030748">Error</span><span class="op" id="7030753">(</span><span class="string" id="7030754">&#34;Expected&nbsp;part&nbsp;4&nbsp;without&nbsp;errors&#34;</span><span class="op" id="7030786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030790">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7030802">//&nbsp;Non-existent&nbsp;part5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030825"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span><span class="op" id="7030829">,</span>&nbsp;<span class="ident" id="7030831"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030835">=</span>&nbsp;<span class="ident" id="7030837"><a href="/mime/multipart/multipart_test.go.html#7028826">reader</a></span><span class="op" id="7030843">.</span><span class="ident" id="7030844">NextPart</span><span class="op" id="7030852">(</span><span class="op" id="7030853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030856">if</span>&nbsp;<span class="ident" id="7030859"><a href="/mime/multipart/multipart_test.go.html#7028901">part</a></span>&nbsp;<span class="op" id="7030864">!=</span>&nbsp;<span class="ident" id="7030867">nil</span>&nbsp;<span class="op" id="7030871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030875"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030876">.</span><span class="ident" id="7030877">Error</span><span class="op" id="7030882">(</span><span class="string" id="7030883">&#34;Didn&#39;t&nbsp;expect&nbsp;a&nbsp;fifth&nbsp;part.&#34;</span><span class="op" id="7030912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030915">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7030918">if</span>&nbsp;<span class="ident" id="7030921"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span>&nbsp;<span class="op" id="7030925">!=</span>&nbsp;<span class="ident" id="7030928"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7030930">.</span><span class="ident" id="7030931">EOF</span>&nbsp;<span class="op" id="7030935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7030939"><a href="/mime/multipart/multipart_test.go.html#7028777">t</a></span><span class="op" id="7030940">.</span><span class="ident" id="7030941">Errorf</span><span class="op" id="7030947">(</span><span class="string" id="7030948">&#34;On&nbsp;fifth&nbsp;part&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7030987">,</span>&nbsp;<span class="ident" id="7030989"><a href="/mime/multipart/multipart_test.go.html#7028907">err</a></span><span class="op" id="7030992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7030995">}</span><br>
<span class="lineno"></span><span class="op" id="7030997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="7031000">func</span>&nbsp;<span class="ident" id="7031005">TestVariousTextLineEndings</span><span class="op" id="7031031">(</span><span class="ident" id="7031032">t</span>&nbsp;<span class="op" id="7031034">*</span><span class="ident" id="7031035"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7031042">.</span><span class="ident" id="7031043">T</span><span class="op" id="7031044">)</span>&nbsp;<span class="op" id="7031046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031049">tests</span>&nbsp;<span class="op" id="7031055">:=</span>&nbsp;<span class="op" id="7031058">[</span><span class="op" id="7031059">...</span><span class="op" id="7031062">]</span><span class="builtintype" id="7031063">string</span><span class="op" id="7031069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031073">&#34;Foo\nBar&#34;</span><span class="op" id="7031083">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031087">&#34;Foo\nBar\n&#34;</span><span class="op" id="7031099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031103">&#34;Foo\r\nBar&#34;</span><span class="op" id="7031115">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031119">&#34;Foo\r\nBar\r\n&#34;</span><span class="op" id="7031135">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031139">&#34;Foo\rBar&#34;</span><span class="op" id="7031149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031153">&#34;Foo\rBar\r&#34;</span><span class="op" id="7031165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031169">&#34;\x00\x01\x02\x09\x0a\x0b\x0c\x0d\x0e\x0f\x10&#34;</span><span class="op" id="7031215">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031218">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031222">for</span>&nbsp;<span class="ident" id="7031226">testNum</span><span class="op" id="7031233">,</span>&nbsp;<span class="ident" id="7031235">expectedBody</span>&nbsp;<span class="op" id="7031248">:=</span>&nbsp;<span class="keyword" id="7031251">range</span>&nbsp;<span class="ident" id="7031257"><a href="/mime/multipart/multipart_test.go.html#7031049">tests</a></span>&nbsp;<span class="op" id="7031263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031267">body</span>&nbsp;<span class="op" id="7031272">:=</span>&nbsp;<span class="string" id="7031275">&#34;--BOUNDARY\r\n&#34;</span>&nbsp;<span class="op" id="7031292">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031297">&#34;Content-Disposition:&nbsp;form-data;&nbsp;name=\&#34;value\&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7031350">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031355">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="7031362">+</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031367"><a href="/mime/multipart/multipart_test.go.html#7031235">expectedBody</a></span>&nbsp;<span class="op" id="7031380">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7031385">&#34;\r\n--BOUNDARY--\r\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031410">bodyReader</span>&nbsp;<span class="op" id="7031421">:=</span>&nbsp;<span class="ident" id="7031424"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7031431">.</span><span class="ident" id="7031432">NewReader</span><span class="op" id="7031441">(</span><span class="ident" id="7031442"><a href="/mime/multipart/multipart_test.go.html#7031267">body</a></span><span class="op" id="7031446">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031451">reader</span>&nbsp;<span class="op" id="7031458">:=</span>&nbsp;<span class="ident" id="7031461"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7031470">(</span><span class="ident" id="7031471"><a href="/mime/multipart/multipart_test.go.html#7031410">bodyReader</a></span><span class="op" id="7031481">,</span>&nbsp;<span class="string" id="7031483">&#34;BOUNDARY&#34;</span><span class="op" id="7031493">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031497">buf</span>&nbsp;<span class="op" id="7031501">:=</span>&nbsp;<span class="builtinfunc" id="7031504">new</span><span class="op" id="7031507">(</span><span class="ident" id="7031508"><a href="/mime/multipart/multipart_test.go.html#7025906">bytes</a></span><span class="op" id="7031513">.</span><span class="ident" id="7031514">Buffer</span><span class="op" id="7031520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031524">part</span><span class="op" id="7031528">,</span>&nbsp;<span class="ident" id="7031530">err</span>&nbsp;<span class="op" id="7031534">:=</span>&nbsp;<span class="ident" id="7031537"><a href="/mime/multipart/multipart_test.go.html#7031451">reader</a></span><span class="op" id="7031543">.</span><span class="ident" id="7031544">NextPart</span><span class="op" id="7031552">(</span><span class="op" id="7031553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031557">if</span>&nbsp;<span class="ident" id="7031560"><a href="/mime/multipart/multipart_test.go.html#7031524">part</a></span>&nbsp;<span class="op" id="7031565">==</span>&nbsp;<span class="ident" id="7031568">nil</span>&nbsp;<span class="op" id="7031572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031577"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7031578">.</span><span class="ident" id="7031579">Errorf</span><span class="op" id="7031585">(</span><span class="string" id="7031586">&#34;Expected&nbsp;a&nbsp;body&nbsp;part&nbsp;on&nbsp;text&nbsp;%d&#34;</span><span class="op" id="7031619">,</span>&nbsp;<span class="ident" id="7031621"><a href="/mime/multipart/multipart_test.go.html#7031226">testNum</a></span><span class="op" id="7031628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031633">continue</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031644">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031648">if</span>&nbsp;<span class="ident" id="7031651"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span>&nbsp;<span class="op" id="7031655">!=</span>&nbsp;<span class="ident" id="7031658">nil</span>&nbsp;<span class="op" id="7031662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031667"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7031668">.</span><span class="ident" id="7031669">Errorf</span><span class="op" id="7031675">(</span><span class="string" id="7031676">&#34;Unexpected&nbsp;error&nbsp;on&nbsp;text&nbsp;%d:&nbsp;%v&#34;</span><span class="op" id="7031709">,</span>&nbsp;<span class="ident" id="7031711"><a href="/mime/multipart/multipart_test.go.html#7031226">testNum</a></span><span class="op" id="7031718">,</span>&nbsp;<span class="ident" id="7031720"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span><span class="op" id="7031723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031728">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031739">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031743">written</span><span class="op" id="7031750">,</span>&nbsp;<span class="ident" id="7031752"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span>&nbsp;<span class="op" id="7031756">:=</span>&nbsp;<span class="ident" id="7031759"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7031761">.</span><span class="ident" id="7031762">Copy</span><span class="op" id="7031766">(</span><span class="ident" id="7031767"><a href="/mime/multipart/multipart_test.go.html#7031497">buf</a></span><span class="op" id="7031770">,</span>&nbsp;<span class="ident" id="7031772"><a href="/mime/multipart/multipart_test.go.html#7031524">part</a></span><span class="op" id="7031776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031780"><a href="/mime/multipart/multipart_test.go.html#7026659">expectEq</a></span><span class="op" id="7031788">(</span><span class="ident" id="7031789"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7031790">,</span>&nbsp;<span class="ident" id="7031792"><a href="/mime/multipart/multipart_test.go.html#7031235">expectedBody</a></span><span class="op" id="7031804">,</span>&nbsp;<span class="ident" id="7031806"><a href="/mime/multipart/multipart_test.go.html#7031497">buf</a></span><span class="op" id="7031809">.</span><span class="ident" id="7031810">String</span><span class="op" id="7031816">(</span><span class="op" id="7031817">)</span><span class="op" id="7031818">,</span>&nbsp;<span class="ident" id="7031820"><a href="/mime/multipart/multipart_test.go.html#7025932">fmt</a></span><span class="op" id="7031823">.</span><span class="ident" id="7031824">Sprintf</span><span class="op" id="7031831">(</span><span class="string" id="7031832">&#34;test&nbsp;%d&#34;</span><span class="op" id="7031841">,</span>&nbsp;<span class="ident" id="7031843"><a href="/mime/multipart/multipart_test.go.html#7031226">testNum</a></span><span class="op" id="7031850">)</span><span class="op" id="7031851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031855">if</span>&nbsp;<span class="ident" id="7031858"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span>&nbsp;<span class="op" id="7031862">!=</span>&nbsp;<span class="ident" id="7031865">nil</span>&nbsp;<span class="op" id="7031869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031874"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7031875">.</span><span class="ident" id="7031876">Errorf</span><span class="op" id="7031882">(</span><span class="string" id="7031883">&#34;Error&nbsp;copying&nbsp;multipart;&nbsp;bytes=%v,&nbsp;error=%v&#34;</span><span class="op" id="7031928">,</span>&nbsp;<span class="ident" id="7031930"><a href="/mime/multipart/multipart_test.go.html#7031743">written</a></span><span class="op" id="7031937">,</span>&nbsp;<span class="ident" id="7031939"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span><span class="op" id="7031942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7031946">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7031951"><a href="/mime/multipart/multipart_test.go.html#7031524">part</a></span><span class="op" id="7031955">,</span>&nbsp;<span class="ident" id="7031957"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span>&nbsp;<span class="op" id="7031961">=</span>&nbsp;<span class="ident" id="7031963"><a href="/mime/multipart/multipart_test.go.html#7031451">reader</a></span><span class="op" id="7031969">.</span><span class="ident" id="7031970">NextPart</span><span class="op" id="7031978">(</span><span class="op" id="7031979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7031983">if</span>&nbsp;<span class="ident" id="7031986"><a href="/mime/multipart/multipart_test.go.html#7031524">part</a></span>&nbsp;<span class="op" id="7031991">!=</span>&nbsp;<span class="ident" id="7031994">nil</span>&nbsp;<span class="op" id="7031998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032003"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7032004">.</span><span class="ident" id="7032005">Errorf</span><span class="op" id="7032011">(</span><span class="string" id="7032012">&#34;Unexpected&nbsp;part&nbsp;in&nbsp;test&nbsp;%d&#34;</span><span class="op" id="7032040">,</span>&nbsp;<span class="ident" id="7032042"><a href="/mime/multipart/multipart_test.go.html#7031226">testNum</a></span><span class="op" id="7032049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032053">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032057">if</span>&nbsp;<span class="ident" id="7032060"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span>&nbsp;<span class="op" id="7032064">!=</span>&nbsp;<span class="ident" id="7032067"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7032069">.</span><span class="ident" id="7032070">EOF</span>&nbsp;<span class="op" id="7032074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032079"><a href="/mime/multipart/multipart_test.go.html#7031032">t</a></span><span class="op" id="7032080">.</span><span class="ident" id="7032081">Errorf</span><span class="op" id="7032087">(</span><span class="string" id="7032088">&#34;On&nbsp;test&nbsp;%d&nbsp;expected&nbsp;io.EOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7032124">,</span>&nbsp;<span class="ident" id="7032126"><a href="/mime/multipart/multipart_test.go.html#7031226">testNum</a></span><span class="op" id="7032133">,</span>&nbsp;<span class="ident" id="7032135"><a href="/mime/multipart/multipart_test.go.html#7031530">err</a></span><span class="op" id="7032138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032146">}</span><br>
<span class="lineno">260</span><span class="op" id="7032148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7032151">type</span>&nbsp;<span class="ident" id="7032156">maliciousReader</span>&nbsp;<span class="keyword" id="7032172">struct</span>&nbsp;<span class="op" id="7032179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032182">t</span>&nbsp;<span class="op" id="7032184">*</span><span class="ident" id="7032185"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7032192">.</span><span class="ident" id="7032193">T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032196">n</span>&nbsp;<span class="builtintype" id="7032198">int</span><br>
<span class="lineno">265</span><span class="op" id="7032202">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7032205">const</span>&nbsp;<span class="ident" id="7032211">maxReadThreshold</span>&nbsp;<span class="op" id="7032228">=</span>&nbsp;<span class="num" id="7032230">1</span>&nbsp;<span class="op" id="7032232">&lt;&lt;</span>&nbsp;<span class="num" id="7032235">20</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7032239">func</span>&nbsp;<span class="op" id="7032244">(</span><span class="ident" id="7032245">mr</span>&nbsp;<span class="op" id="7032248">*</span><span class="ident" id="7032249"><a href="/mime/multipart/multipart_test.go.html#7032156">maliciousReader</a></span><span class="op" id="7032264">)</span>&nbsp;<span class="ident" id="7032266">Read</span><span class="op" id="7032270">(</span><span class="ident" id="7032271">b</span>&nbsp;<span class="op" id="7032273">[</span><span class="op" id="7032274">]</span><span class="builtintype" id="7032275">byte</span><span class="op" id="7032279">)</span>&nbsp;<span class="op" id="7032281">(</span><span class="ident" id="7032282">n</span>&nbsp;<span class="builtintype" id="7032284">int</span><span class="op" id="7032287">,</span>&nbsp;<span class="ident" id="7032289">err</span>&nbsp;<span class="builtintype" id="7032293">error</span><span class="op" id="7032298">)</span>&nbsp;<span class="op" id="7032300">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032303"><a href="/mime/multipart/multipart_test.go.html#7032245">mr</a></span><span class="op" id="7032305">.</span><span class="ident" id="7032306">n</span>&nbsp;<span class="op" id="7032308">+=</span>&nbsp;<span class="builtinfunc" id="7032311">len</span><span class="op" id="7032314">(</span><span class="ident" id="7032315"><a href="/mime/multipart/multipart_test.go.html#7032271">b</a></span><span class="op" id="7032316">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032319">if</span>&nbsp;<span class="ident" id="7032322"><a href="/mime/multipart/multipart_test.go.html#7032245">mr</a></span><span class="op" id="7032324">.</span><span class="ident" id="7032325">n</span>&nbsp;<span class="op" id="7032327">&gt;=</span>&nbsp;<span class="ident" id="7032330"><a href="/mime/multipart/multipart_test.go.html#7032211">maxReadThreshold</a></span>&nbsp;<span class="op" id="7032347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032351"><a href="/mime/multipart/multipart_test.go.html#7032245">mr</a></span><span class="op" id="7032353">.</span><span class="ident" id="7032354">t</span><span class="op" id="7032355">.</span><span class="ident" id="7032356">Fatal</span><span class="op" id="7032361">(</span><span class="string" id="7032362">&#34;too&nbsp;much&nbsp;was&nbsp;read&#34;</span><span class="op" id="7032381">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032385">return</span>&nbsp;<span class="num" id="7032392">0</span><span class="op" id="7032393">,</span>&nbsp;<span class="ident" id="7032395"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7032397">.</span><span class="ident" id="7032398">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032403">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032406">return</span>&nbsp;<span class="builtinfunc" id="7032413">len</span><span class="op" id="7032416">(</span><span class="ident" id="7032417"><a href="/mime/multipart/multipart_test.go.html#7032271">b</a></span><span class="op" id="7032418">)</span><span class="op" id="7032419">,</span>&nbsp;<span class="ident" id="7032421">nil</span><br>
<span class="lineno"></span><span class="op" id="7032425">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7032428">func</span>&nbsp;<span class="ident" id="7032433">TestLineLimit</span><span class="op" id="7032446">(</span><span class="ident" id="7032447">t</span>&nbsp;<span class="op" id="7032449">*</span><span class="ident" id="7032450"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7032457">.</span><span class="ident" id="7032458">T</span><span class="op" id="7032459">)</span>&nbsp;<span class="op" id="7032461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032464">mr</span>&nbsp;<span class="op" id="7032467">:=</span>&nbsp;<span class="op" id="7032470">&amp;</span><span class="ident" id="7032471"><a href="/mime/multipart/multipart_test.go.html#7032156">maliciousReader</a></span><span class="op" id="7032486">{</span><span class="ident" id="7032487">t</span><span class="op" id="7032488">:</span>&nbsp;<span class="ident" id="7032490"><a href="/mime/multipart/multipart_test.go.html#7032447">t</a></span><span class="op" id="7032491">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032494">r</span>&nbsp;<span class="op" id="7032496">:=</span>&nbsp;<span class="ident" id="7032499"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7032508">(</span><span class="ident" id="7032509"><a href="/mime/multipart/multipart_test.go.html#7032464">mr</a></span><span class="op" id="7032511">,</span>&nbsp;<span class="string" id="7032513">&#34;fooBoundary&#34;</span><span class="op" id="7032526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032529">part</span><span class="op" id="7032533">,</span>&nbsp;<span class="ident" id="7032535">err</span>&nbsp;<span class="op" id="7032539">:=</span>&nbsp;<span class="ident" id="7032542"><a href="/mime/multipart/multipart_test.go.html#7032494">r</a></span><span class="op" id="7032543">.</span><span class="ident" id="7032544">NextPart</span><span class="op" id="7032552">(</span><span class="op" id="7032553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032556">if</span>&nbsp;<span class="ident" id="7032559"><a href="/mime/multipart/multipart_test.go.html#7032529">part</a></span>&nbsp;<span class="op" id="7032564">!=</span>&nbsp;<span class="ident" id="7032567">nil</span>&nbsp;<span class="op" id="7032571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032575"><a href="/mime/multipart/multipart_test.go.html#7032447">t</a></span><span class="op" id="7032576">.</span><span class="ident" id="7032577">Errorf</span><span class="op" id="7032583">(</span><span class="string" id="7032584">&#34;unexpected&nbsp;part&nbsp;read&#34;</span><span class="op" id="7032606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032609">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032612">if</span>&nbsp;<span class="ident" id="7032615"><a href="/mime/multipart/multipart_test.go.html#7032535">err</a></span>&nbsp;<span class="op" id="7032619">==</span>&nbsp;<span class="ident" id="7032622">nil</span>&nbsp;<span class="op" id="7032626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032630"><a href="/mime/multipart/multipart_test.go.html#7032447">t</a></span><span class="op" id="7032631">.</span><span class="ident" id="7032632">Errorf</span><span class="op" id="7032638">(</span><span class="string" id="7032639">&#34;expected&nbsp;an&nbsp;error&#34;</span><span class="op" id="7032658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032661">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7032664">if</span>&nbsp;<span class="ident" id="7032667"><a href="/mime/multipart/multipart_test.go.html#7032464">mr</a></span><span class="op" id="7032669">.</span><span class="ident" id="7032670">n</span>&nbsp;<span class="op" id="7032672">&gt;=</span>&nbsp;<span class="ident" id="7032675"><a href="/mime/multipart/multipart_test.go.html#7032211">maxReadThreshold</a></span>&nbsp;<span class="op" id="7032692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032696"><a href="/mime/multipart/multipart_test.go.html#7032447">t</a></span><span class="op" id="7032697">.</span><span class="ident" id="7032698">Errorf</span><span class="op" id="7032704">(</span><span class="string" id="7032705">&#34;expected&nbsp;to&nbsp;read&nbsp;&lt;&nbsp;%d&nbsp;bytes;&nbsp;read&nbsp;%d&#34;</span><span class="op" id="7032743">,</span>&nbsp;<span class="ident" id="7032745"><a href="/mime/multipart/multipart_test.go.html#7032211">maxReadThreshold</a></span><span class="op" id="7032761">,</span>&nbsp;<span class="ident" id="7032763"><a href="/mime/multipart/multipart_test.go.html#7032464">mr</a></span><span class="op" id="7032765">.</span><span class="ident" id="7032766">n</span><span class="op" id="7032767">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7032770">}</span><br>
<span class="lineno"></span><span class="op" id="7032772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7032775">func</span>&nbsp;<span class="ident" id="7032780">TestMultipartTruncated</span><span class="op" id="7032802">(</span><span class="ident" id="7032803">t</span>&nbsp;<span class="op" id="7032805">*</span><span class="ident" id="7032806"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7032813">.</span><span class="ident" id="7032814">T</span><span class="op" id="7032815">)</span>&nbsp;<span class="op" id="7032817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032820">testBody</span>&nbsp;<span class="op" id="7032829">:=</span>&nbsp;<span class="string" id="7032832">`<br>
<span class="lineno">295</span>This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo-bar:&nbsp;baz<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Oh&nbsp;no,&nbsp;premature&nbsp;EOF!<br>
<span class="lineno">300</span>`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032939">body</span>&nbsp;<span class="op" id="7032944">:=</span>&nbsp;<span class="ident" id="7032947"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7032954">.</span><span class="ident" id="7032955">Replace</span><span class="op" id="7032962">(</span><span class="ident" id="7032963"><a href="/mime/multipart/multipart_test.go.html#7032820">testBody</a></span><span class="op" id="7032971">,</span>&nbsp;<span class="string" id="7032973">&#34;\n&#34;</span><span class="op" id="7032977">,</span>&nbsp;<span class="string" id="7032979">&#34;\r\n&#34;</span><span class="op" id="7032985">,</span>&nbsp;<span class="op" id="7032987">-</span><span class="num" id="7032988">1</span><span class="op" id="7032989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7032992">bodyReader</span>&nbsp;<span class="op" id="7033003">:=</span>&nbsp;<span class="ident" id="7033006"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7033013">.</span><span class="ident" id="7033014">NewReader</span><span class="op" id="7033023">(</span><span class="ident" id="7033024"><a href="/mime/multipart/multipart_test.go.html#7032939">body</a></span><span class="op" id="7033028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033031">r</span>&nbsp;<span class="op" id="7033033">:=</span>&nbsp;<span class="ident" id="7033036"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7033045">(</span><span class="ident" id="7033046"><a href="/mime/multipart/multipart_test.go.html#7032992">bodyReader</a></span><span class="op" id="7033056">,</span>&nbsp;<span class="string" id="7033058">&#34;MyBoundary&#34;</span><span class="op" id="7033070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033074">part</span><span class="op" id="7033078">,</span>&nbsp;<span class="ident" id="7033080">err</span>&nbsp;<span class="op" id="7033084">:=</span>&nbsp;<span class="ident" id="7033087"><a href="/mime/multipart/multipart_test.go.html#7033031">r</a></span><span class="op" id="7033088">.</span><span class="ident" id="7033089">NextPart</span><span class="op" id="7033097">(</span><span class="op" id="7033098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7033101">if</span>&nbsp;<span class="ident" id="7033104"><a href="/mime/multipart/multipart_test.go.html#7033080">err</a></span>&nbsp;<span class="op" id="7033108">!=</span>&nbsp;<span class="ident" id="7033111">nil</span>&nbsp;<span class="op" id="7033115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033119"><a href="/mime/multipart/multipart_test.go.html#7032803">t</a></span><span class="op" id="7033120">.</span><span class="ident" id="7033121">Fatalf</span><span class="op" id="7033127">(</span><span class="string" id="7033128">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="7033147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033153">_</span><span class="op" id="7033154">,</span>&nbsp;<span class="ident" id="7033156"><a href="/mime/multipart/multipart_test.go.html#7033080">err</a></span>&nbsp;<span class="op" id="7033160">=</span>&nbsp;<span class="ident" id="7033162"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7033164">.</span><span class="ident" id="7033165">Copy</span><span class="op" id="7033169">(</span><span class="ident" id="7033170"><a href="/mime/multipart/multipart_test.go.html#7025945">ioutil</a></span><span class="op" id="7033176">.</span><span class="ident" id="7033177">Discard</span><span class="op" id="7033184">,</span>&nbsp;<span class="ident" id="7033186"><a href="/mime/multipart/multipart_test.go.html#7033074">part</a></span><span class="op" id="7033190">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7033193">if</span>&nbsp;<span class="ident" id="7033196"><a href="/mime/multipart/multipart_test.go.html#7033080">err</a></span>&nbsp;<span class="op" id="7033200">!=</span>&nbsp;<span class="ident" id="7033203"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7033205">.</span><span class="ident" id="7033206">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="7033223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033227"><a href="/mime/multipart/multipart_test.go.html#7032803">t</a></span><span class="op" id="7033228">.</span><span class="ident" id="7033229">Fatalf</span><span class="op" id="7033235">(</span><span class="string" id="7033236">&#34;expected&nbsp;error&nbsp;io.ErrUnexpectedEOF;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7033280">,</span>&nbsp;<span class="ident" id="7033282"><a href="/mime/multipart/multipart_test.go.html#7033080">err</a></span><span class="op" id="7033285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033288">}</span><br>
<span class="lineno"></span><span class="op" id="7033290">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="7033293">type</span>&nbsp;<span class="ident" id="7033298">slowReader</span>&nbsp;<span class="keyword" id="7033309">struct</span>&nbsp;<span class="op" id="7033316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033319">r</span>&nbsp;<span class="ident" id="7033321"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7033323">.</span><span class="ident" id="7033324">Reader</span><br>
<span class="lineno"></span><span class="op" id="7033331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7033334">func</span>&nbsp;<span class="op" id="7033339">(</span><span class="ident" id="7033340">s</span>&nbsp;<span class="op" id="7033342">*</span><span class="ident" id="7033343"><a href="/mime/multipart/multipart_test.go.html#7033298">slowReader</a></span><span class="op" id="7033353">)</span>&nbsp;<span class="ident" id="7033355">Read</span><span class="op" id="7033359">(</span><span class="ident" id="7033360">p</span>&nbsp;<span class="op" id="7033362">[</span><span class="op" id="7033363">]</span><span class="builtintype" id="7033364">byte</span><span class="op" id="7033368">)</span>&nbsp;<span class="op" id="7033370">(</span><span class="builtintype" id="7033371">int</span><span class="op" id="7033374">,</span>&nbsp;<span class="builtintype" id="7033376">error</span><span class="op" id="7033381">)</span>&nbsp;<span class="op" id="7033383">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7033386">if</span>&nbsp;<span class="builtinfunc" id="7033389">len</span><span class="op" id="7033392">(</span><span class="ident" id="7033393"><a href="/mime/multipart/multipart_test.go.html#7033360">p</a></span><span class="op" id="7033394">)</span>&nbsp;<span class="op" id="7033396">==</span>&nbsp;<span class="num" id="7033399">0</span>&nbsp;<span class="op" id="7033401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7033405">return</span>&nbsp;<span class="ident" id="7033412"><a href="/mime/multipart/multipart_test.go.html#7033340">s</a></span><span class="op" id="7033413">.</span><span class="ident" id="7033414">r</span><span class="op" id="7033415">.</span><span class="ident" id="7033416">Read</span><span class="op" id="7033420">(</span><span class="ident" id="7033421"><a href="/mime/multipart/multipart_test.go.html#7033360">p</a></span><span class="op" id="7033422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7033425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7033428">return</span>&nbsp;<span class="ident" id="7033435"><a href="/mime/multipart/multipart_test.go.html#7033340">s</a></span><span class="op" id="7033436">.</span><span class="ident" id="7033437">r</span><span class="op" id="7033438">.</span><span class="ident" id="7033439">Read</span><span class="op" id="7033443">(</span><span class="ident" id="7033444"><a href="/mime/multipart/multipart_test.go.html#7033360">p</a></span><span class="op" id="7033445">[</span><span class="op" id="7033446">:</span><span class="num" id="7033447">1</span><span class="op" id="7033448">]</span><span class="op" id="7033449">)</span><br>
<span class="lineno"></span><span class="op" id="7033451">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="7033454">func</span>&nbsp;<span class="ident" id="7033459">TestLineContinuation</span><span class="op" id="7033479">(</span><span class="ident" id="7033480">t</span>&nbsp;<span class="op" id="7033482">*</span><span class="ident" id="7033483"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7033490">.</span><span class="ident" id="7033491">T</span><span class="op" id="7033492">)</span>&nbsp;<span class="op" id="7033494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033497">//&nbsp;This&nbsp;body,&nbsp;extracted&nbsp;from&nbsp;an&nbsp;email,&nbsp;contains&nbsp;headers&nbsp;that&nbsp;span&nbsp;multiple</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033573">//&nbsp;lines.</span><br>
<span class="lineno"></span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033585">//&nbsp;TODO:&nbsp;The&nbsp;original&nbsp;mail&nbsp;ended&nbsp;with&nbsp;a&nbsp;double-newline&nbsp;before&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7033652">//&nbsp;final&nbsp;delimiter;&nbsp;this&nbsp;was&nbsp;manually&nbsp;edited&nbsp;to&nbsp;use&nbsp;a&nbsp;CRLF.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7033713">testBody</span>&nbsp;<span class="op" id="7033722">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7033727">&#34;\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;7bit\nContent-Type:&nbsp;text/plain;\n\tcharset=US-ASCII;\n\tdelsp=yes;\n\tformat=flowed\n\nI&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;happening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).\n\n\n--Apple-Mail-2-292336769\nContent-Transfer-Encoding:&nbsp;quoted-printable\nContent-Type:&nbsp;text/html;\n\tcharset=ISO-8859-1\n\n&lt;HTML&gt;&lt;BODY&gt;I&#39;m&nbsp;finding&nbsp;the&nbsp;same&nbsp;thing&nbsp;=\nhappening&nbsp;on&nbsp;my&nbsp;system&nbsp;(10.4.1).=A0&nbsp;But&nbsp;I&nbsp;built&nbsp;it&nbsp;with&nbsp;XCode&nbsp;=\n2.0.&lt;/BODY&gt;&lt;/=\nHTML&gt;=\n\r\n--Apple-Mail-2-292336769--\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034223">r</span>&nbsp;<span class="op" id="7034225">:=</span>&nbsp;<span class="ident" id="7034228"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7034237">(</span><span class="ident" id="7034238"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7034245">.</span><span class="ident" id="7034246">NewReader</span><span class="op" id="7034255">(</span><span class="ident" id="7034256"><a href="/mime/multipart/multipart_test.go.html#7033713">testBody</a></span><span class="op" id="7034264">)</span><span class="op" id="7034265">,</span>&nbsp;<span class="string" id="7034267">&#34;Apple-Mail-2-292336769&#34;</span><span class="op" id="7034291">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034295">for</span>&nbsp;<span class="ident" id="7034299">i</span>&nbsp;<span class="op" id="7034301">:=</span>&nbsp;<span class="num" id="7034304">0</span><span class="op" id="7034305">;</span>&nbsp;<span class="ident" id="7034307"><a href="/mime/multipart/multipart_test.go.html#7034299">i</a></span>&nbsp;<span class="op" id="7034309">&lt;</span>&nbsp;<span class="num" id="7034311">2</span><span class="op" id="7034312">;</span>&nbsp;<span class="ident" id="7034314"><a href="/mime/multipart/multipart_test.go.html#7034299">i</a></span><span class="op" id="7034315">++</span>&nbsp;<span class="op" id="7034318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034322">part</span><span class="op" id="7034326">,</span>&nbsp;<span class="ident" id="7034328">err</span>&nbsp;<span class="op" id="7034332">:=</span>&nbsp;<span class="ident" id="7034335"><a href="/mime/multipart/multipart_test.go.html#7034223">r</a></span><span class="op" id="7034336">.</span><span class="ident" id="7034337">NextPart</span><span class="op" id="7034345">(</span><span class="op" id="7034346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034350">if</span>&nbsp;<span class="ident" id="7034353"><a href="/mime/multipart/multipart_test.go.html#7034328">err</a></span>&nbsp;<span class="op" id="7034357">!=</span>&nbsp;<span class="ident" id="7034360">nil</span>&nbsp;<span class="op" id="7034364">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034369"><a href="/mime/multipart/multipart_test.go.html#7033480">t</a></span><span class="op" id="7034370">.</span><span class="ident" id="7034371">Fatalf</span><span class="op" id="7034377">(</span><span class="string" id="7034378">&#34;didn&#39;t&nbsp;get&nbsp;a&nbsp;part&#34;</span><span class="op" id="7034397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034405">var</span>&nbsp;<span class="ident" id="7034409">buf</span>&nbsp;<span class="ident" id="7034413"><a href="/mime/multipart/multipart_test.go.html#7025906">bytes</a></span><span class="op" id="7034418">.</span><span class="ident" id="7034419">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034428">n</span><span class="op" id="7034429">,</span>&nbsp;<span class="ident" id="7034431"><a href="/mime/multipart/multipart_test.go.html#7034328">err</a></span>&nbsp;<span class="op" id="7034435">:=</span>&nbsp;<span class="ident" id="7034438"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7034440">.</span><span class="ident" id="7034441">Copy</span><span class="op" id="7034445">(</span><span class="op" id="7034446">&amp;</span><span class="ident" id="7034447"><a href="/mime/multipart/multipart_test.go.html#7034409">buf</a></span><span class="op" id="7034450">,</span>&nbsp;<span class="ident" id="7034452"><a href="/mime/multipart/multipart_test.go.html#7034322">part</a></span><span class="op" id="7034456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034460">if</span>&nbsp;<span class="ident" id="7034463"><a href="/mime/multipart/multipart_test.go.html#7034328">err</a></span>&nbsp;<span class="op" id="7034467">!=</span>&nbsp;<span class="ident" id="7034470">nil</span>&nbsp;<span class="op" id="7034474">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034479"><a href="/mime/multipart/multipart_test.go.html#7033480">t</a></span><span class="op" id="7034480">.</span><span class="ident" id="7034481">Errorf</span><span class="op" id="7034487">(</span><span class="string" id="7034488">&#34;error&nbsp;reading&nbsp;part:&nbsp;%v\nread&nbsp;so&nbsp;far:&nbsp;%q&#34;</span><span class="op" id="7034529">,</span>&nbsp;<span class="ident" id="7034531"><a href="/mime/multipart/multipart_test.go.html#7034328">err</a></span><span class="op" id="7034534">,</span>&nbsp;<span class="ident" id="7034536"><a href="/mime/multipart/multipart_test.go.html#7034409">buf</a></span><span class="op" id="7034539">.</span><span class="ident" id="7034540">String</span><span class="op" id="7034546">(</span><span class="op" id="7034547">)</span><span class="op" id="7034548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7034556">if</span>&nbsp;<span class="ident" id="7034559"><a href="/mime/multipart/multipart_test.go.html#7034428">n</a></span>&nbsp;<span class="op" id="7034561">&lt;=</span>&nbsp;<span class="num" id="7034564">0</span>&nbsp;<span class="op" id="7034566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034571"><a href="/mime/multipart/multipart_test.go.html#7033480">t</a></span><span class="op" id="7034572">.</span><span class="ident" id="7034573">Errorf</span><span class="op" id="7034579">(</span><span class="string" id="7034580">&#34;read&nbsp;%d&nbsp;bytes;&nbsp;expected&nbsp;&gt;0&#34;</span><span class="op" id="7034608">,</span>&nbsp;<span class="ident" id="7034610"><a href="/mime/multipart/multipart_test.go.html#7034428">n</a></span><span class="op" id="7034611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034615">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7034618">}</span><br>
<span class="lineno"></span><span class="op" id="7034620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7034623">func</span>&nbsp;<span class="ident" id="7034628">TestQuotedPrintableEncoding</span><span class="op" id="7034655">(</span><span class="ident" id="7034656">t</span>&nbsp;<span class="op" id="7034658">*</span><span class="ident" id="7034659"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7034666">.</span><span class="ident" id="7034667">T</span><span class="op" id="7034668">)</span>&nbsp;<span class="op" id="7034670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7034673">//&nbsp;From&nbsp;http://golang.org/issue/4411</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7034711">body</span>&nbsp;<span class="op" id="7034716">:=</span>&nbsp;<span class="string" id="7034719">&#34;--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=text\r\nContent-Transfer-Encoding:&nbsp;quoted-printable\r\n\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;wor=\r\nds&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;=\r\nwords&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words\r\n--0016e68ee29c5d515f04cedf6733\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--0016e68ee29c5d515f04cedf6733--&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035453">r</span>&nbsp;<span class="op" id="7035455">:=</span>&nbsp;<span class="ident" id="7035458"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7035467">(</span><span class="ident" id="7035468"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7035475">.</span><span class="ident" id="7035476">NewReader</span><span class="op" id="7035485">(</span><span class="ident" id="7035486"><a href="/mime/multipart/multipart_test.go.html#7034711">body</a></span><span class="op" id="7035490">)</span><span class="op" id="7035491">,</span>&nbsp;<span class="string" id="7035493">&#34;0016e68ee29c5d515f04cedf6733&#34;</span><span class="op" id="7035523">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035526">part</span><span class="op" id="7035530">,</span>&nbsp;<span class="ident" id="7035532">err</span>&nbsp;<span class="op" id="7035536">:=</span>&nbsp;<span class="ident" id="7035539"><a href="/mime/multipart/multipart_test.go.html#7035453">r</a></span><span class="op" id="7035540">.</span><span class="ident" id="7035541">NextPart</span><span class="op" id="7035549">(</span><span class="op" id="7035550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035553">if</span>&nbsp;<span class="ident" id="7035556"><a href="/mime/multipart/multipart_test.go.html#7035532">err</a></span>&nbsp;<span class="op" id="7035560">!=</span>&nbsp;<span class="ident" id="7035563">nil</span>&nbsp;<span class="op" id="7035567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035571"><a href="/mime/multipart/multipart_test.go.html#7034656">t</a></span><span class="op" id="7035572">.</span><span class="ident" id="7035573">Fatal</span><span class="op" id="7035578">(</span><span class="ident" id="7035579"><a href="/mime/multipart/multipart_test.go.html#7035532">err</a></span><span class="op" id="7035582">)</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035585">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035588">if</span>&nbsp;<span class="ident" id="7035591">te</span><span class="op" id="7035593">,</span>&nbsp;<span class="ident" id="7035595">ok</span>&nbsp;<span class="op" id="7035598">:=</span>&nbsp;<span class="ident" id="7035601"><a href="/mime/multipart/multipart_test.go.html#7035526">part</a></span><span class="op" id="7035605">.</span><span class="ident" id="7035606">Header</span><span class="op" id="7035612">[</span><span class="string" id="7035613">&#34;Content-Transfer-Encoding&#34;</span><span class="op" id="7035640">]</span><span class="op" id="7035641">;</span>&nbsp;<span class="ident" id="7035643"><a href="/mime/multipart/multipart_test.go.html#7035595">ok</a></span>&nbsp;<span class="op" id="7035646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035650"><a href="/mime/multipart/multipart_test.go.html#7034656">t</a></span><span class="op" id="7035651">.</span><span class="ident" id="7035652">Errorf</span><span class="op" id="7035658">(</span><span class="string" id="7035659">&#34;unexpected&nbsp;Content-Transfer-Encoding&nbsp;of&nbsp;%q&#34;</span><span class="op" id="7035703">,</span>&nbsp;<span class="ident" id="7035705"><a href="/mime/multipart/multipart_test.go.html#7035591">te</a></span><span class="op" id="7035707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035710">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035713">var</span>&nbsp;<span class="ident" id="7035717">buf</span>&nbsp;<span class="ident" id="7035721"><a href="/mime/multipart/multipart_test.go.html#7025906">bytes</a></span><span class="op" id="7035726">.</span><span class="ident" id="7035727">Buffer</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035735">_</span><span class="op" id="7035736">,</span>&nbsp;<span class="ident" id="7035738"><a href="/mime/multipart/multipart_test.go.html#7035532">err</a></span>&nbsp;<span class="op" id="7035742">=</span>&nbsp;<span class="ident" id="7035744"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7035746">.</span><span class="ident" id="7035747">Copy</span><span class="op" id="7035751">(</span><span class="op" id="7035752">&amp;</span><span class="ident" id="7035753"><a href="/mime/multipart/multipart_test.go.html#7035717">buf</a></span><span class="op" id="7035756">,</span>&nbsp;<span class="ident" id="7035758"><a href="/mime/multipart/multipart_test.go.html#7035526">part</a></span><span class="op" id="7035762">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7035765">if</span>&nbsp;<span class="ident" id="7035768"><a href="/mime/multipart/multipart_test.go.html#7035532">err</a></span>&nbsp;<span class="op" id="7035772">!=</span>&nbsp;<span class="ident" id="7035775">nil</span>&nbsp;<span class="op" id="7035779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035783"><a href="/mime/multipart/multipart_test.go.html#7034656">t</a></span><span class="op" id="7035784">.</span><span class="ident" id="7035785">Error</span><span class="op" id="7035790">(</span><span class="ident" id="7035791"><a href="/mime/multipart/multipart_test.go.html#7035532">err</a></span><span class="op" id="7035794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7035797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035800">got</span>&nbsp;<span class="op" id="7035804">:=</span>&nbsp;<span class="ident" id="7035807"><a href="/mime/multipart/multipart_test.go.html#7035717">buf</a></span><span class="op" id="7035810">.</span><span class="ident" id="7035811">String</span><span class="op" id="7035817">(</span><span class="op" id="7035818">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7035821">want</span>&nbsp;<span class="op" id="7035826">:=</span>&nbsp;<span class="string" id="7035829">&#34;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&nbsp;words&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036186">if</span>&nbsp;<span class="ident" id="7036189"><a href="/mime/multipart/multipart_test.go.html#7035800">got</a></span>&nbsp;<span class="op" id="7036193">!=</span>&nbsp;<span class="ident" id="7036196"><a href="/mime/multipart/multipart_test.go.html#7035821">want</a></span>&nbsp;<span class="op" id="7036201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036205"><a href="/mime/multipart/multipart_test.go.html#7034656">t</a></span><span class="op" id="7036206">.</span><span class="ident" id="7036207">Errorf</span><span class="op" id="7036213">(</span><span class="string" id="7036214">&#34;wrong&nbsp;part&nbsp;value:\n&nbsp;got:&nbsp;%q\nwant:&nbsp;%q&#34;</span><span class="op" id="7036253">,</span>&nbsp;<span class="ident" id="7036255"><a href="/mime/multipart/multipart_test.go.html#7035800">got</a></span><span class="op" id="7036258">,</span>&nbsp;<span class="ident" id="7036260"><a href="/mime/multipart/multipart_test.go.html#7035821">want</a></span><span class="op" id="7036264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036267">}</span><br>
<span class="lineno"></span><span class="op" id="7036269">}</span><br>
<span class="lineno">375</span><br>
<span class="lineno"></span><span class="comment" id="7036272">//&nbsp;Test&nbsp;parsing&nbsp;an&nbsp;image&nbsp;attachment&nbsp;from&nbsp;gmail,&nbsp;which&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span><span class="keyword" id="7036345">func</span>&nbsp;<span class="ident" id="7036350">TestNested</span><span class="op" id="7036360">(</span><span class="ident" id="7036361">t</span>&nbsp;<span class="op" id="7036363">*</span><span class="ident" id="7036364"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7036371">.</span><span class="ident" id="7036372">T</span><span class="op" id="7036373">)</span>&nbsp;<span class="op" id="7036375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7036378">//&nbsp;nested-mime&nbsp;is&nbsp;the&nbsp;body&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart/mixed&nbsp;email</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7036438">//&nbsp;with&nbsp;boundary&nbsp;e89a8ff1c1e83553e304be640612</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036485">f</span><span class="op" id="7036486">,</span>&nbsp;<span class="ident" id="7036488">err</span>&nbsp;<span class="op" id="7036492">:=</span>&nbsp;<span class="ident" id="7036495"><a href="/mime/multipart/multipart_test.go.html#7025975">os</a></span><span class="op" id="7036497">.</span><span class="ident" id="7036498">Open</span><span class="op" id="7036502">(</span><span class="string" id="7036503">&#34;testdata/nested-mime&#34;</span><span class="op" id="7036525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036528">if</span>&nbsp;<span class="ident" id="7036531"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7036535">!=</span>&nbsp;<span class="ident" id="7036538">nil</span>&nbsp;<span class="op" id="7036542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036546"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7036547">.</span><span class="ident" id="7036548">Fatal</span><span class="op" id="7036553">(</span><span class="ident" id="7036554"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7036557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036563">defer</span>&nbsp;<span class="ident" id="7036569"><a href="/mime/multipart/multipart_test.go.html#7036485">f</a></span><span class="op" id="7036570">.</span><span class="ident" id="7036571">Close</span><span class="op" id="7036576">(</span><span class="op" id="7036577">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036580">mr</span>&nbsp;<span class="op" id="7036583">:=</span>&nbsp;<span class="ident" id="7036586"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7036595">(</span><span class="ident" id="7036596"><a href="/mime/multipart/multipart_test.go.html#7036485">f</a></span><span class="op" id="7036597">,</span>&nbsp;<span class="string" id="7036599">&#34;e89a8ff1c1e83553e304be640612&#34;</span><span class="op" id="7036629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036632">p</span><span class="op" id="7036633">,</span>&nbsp;<span class="ident" id="7036635"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7036639">:=</span>&nbsp;<span class="ident" id="7036642"><a href="/mime/multipart/multipart_test.go.html#7036580">mr</a></span><span class="op" id="7036644">.</span><span class="ident" id="7036645">NextPart</span><span class="op" id="7036653">(</span><span class="op" id="7036654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036657">if</span>&nbsp;<span class="ident" id="7036660"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7036664">!=</span>&nbsp;<span class="ident" id="7036667">nil</span>&nbsp;<span class="op" id="7036671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036675"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7036676">.</span><span class="ident" id="7036677">Fatalf</span><span class="op" id="7036683">(</span><span class="string" id="7036684">&#34;error&nbsp;reading&nbsp;first&nbsp;section&nbsp;(alternative):&nbsp;%v&#34;</span><span class="op" id="7036731">,</span>&nbsp;<span class="ident" id="7036733"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7036736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036739">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7036743">//&nbsp;Read&nbsp;the&nbsp;inner&nbsp;text/plain&nbsp;and&nbsp;text/html&nbsp;sections&nbsp;of&nbsp;the&nbsp;multipart/alternative.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036826">mr2</span>&nbsp;<span class="op" id="7036830">:=</span>&nbsp;<span class="ident" id="7036833"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7036842">(</span><span class="ident" id="7036843"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7036844">,</span>&nbsp;<span class="string" id="7036846">&#34;e89a8ff1c1e83553e004be640610&#34;</span><span class="op" id="7036876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036879"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7036880">,</span>&nbsp;<span class="ident" id="7036882"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7036886">=</span>&nbsp;<span class="ident" id="7036888"><a href="/mime/multipart/multipart_test.go.html#7036826">mr2</a></span><span class="op" id="7036891">.</span><span class="ident" id="7036892">NextPart</span><span class="op" id="7036900">(</span><span class="op" id="7036901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036904">if</span>&nbsp;<span class="ident" id="7036907"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7036911">!=</span>&nbsp;<span class="ident" id="7036914">nil</span>&nbsp;<span class="op" id="7036918">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7036922"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7036923">.</span><span class="ident" id="7036924">Fatalf</span><span class="op" id="7036930">(</span><span class="string" id="7036931">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7036960">,</span>&nbsp;<span class="ident" id="7036962"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7036965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7036968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7036971">if</span>&nbsp;<span class="ident" id="7036974">b</span><span class="op" id="7036975">,</span>&nbsp;<span class="ident" id="7036977">err</span>&nbsp;<span class="op" id="7036981">:=</span>&nbsp;<span class="ident" id="7036984"><a href="/mime/multipart/multipart_test.go.html#7025945">ioutil</a></span><span class="op" id="7036990">.</span><span class="ident" id="7036991">ReadAll</span><span class="op" id="7036998">(</span><span class="ident" id="7036999"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7037000">)</span><span class="op" id="7037001">;</span>&nbsp;<span class="builtintype" id="7037003">string</span><span class="op" id="7037009">(</span><span class="ident" id="7037010"><a href="/mime/multipart/multipart_test.go.html#7036974">b</a></span><span class="op" id="7037011">)</span>&nbsp;<span class="op" id="7037013">!=</span>&nbsp;<span class="string" id="7037016">&#34;*body*\r\n&#34;</span>&nbsp;<span class="op" id="7037029">||</span>&nbsp;<span class="ident" id="7037032"><a href="/mime/multipart/multipart_test.go.html#7036977">err</a></span>&nbsp;<span class="op" id="7037036">!=</span>&nbsp;<span class="ident" id="7037039">nil</span>&nbsp;<span class="op" id="7037043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037047"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037048">.</span><span class="ident" id="7037049">Fatalf</span><span class="op" id="7037055">(</span><span class="string" id="7037056">&#34;reading&nbsp;text/plain&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7037093">,</span>&nbsp;<span class="ident" id="7037095"><a href="/mime/multipart/multipart_test.go.html#7036974">b</a></span><span class="op" id="7037096">,</span>&nbsp;<span class="ident" id="7037098"><a href="/mime/multipart/multipart_test.go.html#7036977">err</a></span><span class="op" id="7037101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037104">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037107"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7037108">,</span>&nbsp;<span class="ident" id="7037110"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037114">=</span>&nbsp;<span class="ident" id="7037116"><a href="/mime/multipart/multipart_test.go.html#7036826">mr2</a></span><span class="op" id="7037119">.</span><span class="ident" id="7037120">NextPart</span><span class="op" id="7037128">(</span><span class="op" id="7037129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037132">if</span>&nbsp;<span class="ident" id="7037135"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037139">!=</span>&nbsp;<span class="ident" id="7037142">nil</span>&nbsp;<span class="op" id="7037146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037150"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037151">.</span><span class="ident" id="7037152">Fatalf</span><span class="op" id="7037158">(</span><span class="string" id="7037159">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7037187">,</span>&nbsp;<span class="ident" id="7037189"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7037192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037198">if</span>&nbsp;<span class="ident" id="7037201">b</span><span class="op" id="7037202">,</span>&nbsp;<span class="ident" id="7037204">err</span>&nbsp;<span class="op" id="7037208">:=</span>&nbsp;<span class="ident" id="7037211"><a href="/mime/multipart/multipart_test.go.html#7025945">ioutil</a></span><span class="op" id="7037217">.</span><span class="ident" id="7037218">ReadAll</span><span class="op" id="7037225">(</span><span class="ident" id="7037226"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7037227">)</span><span class="op" id="7037228">;</span>&nbsp;<span class="builtintype" id="7037230">string</span><span class="op" id="7037236">(</span><span class="ident" id="7037237"><a href="/mime/multipart/multipart_test.go.html#7037201">b</a></span><span class="op" id="7037238">)</span>&nbsp;<span class="op" id="7037240">!=</span>&nbsp;<span class="string" id="7037243">&#34;&lt;b&gt;body&lt;/b&gt;\r\n&#34;</span>&nbsp;<span class="op" id="7037261">||</span>&nbsp;<span class="ident" id="7037264"><a href="/mime/multipart/multipart_test.go.html#7037204">err</a></span>&nbsp;<span class="op" id="7037268">!=</span>&nbsp;<span class="ident" id="7037271">nil</span>&nbsp;<span class="op" id="7037275">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037279"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037280">.</span><span class="ident" id="7037281">Fatalf</span><span class="op" id="7037287">(</span><span class="string" id="7037288">&#34;reading&nbsp;text/html&nbsp;part:&nbsp;got&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="7037324">,</span>&nbsp;<span class="ident" id="7037326"><a href="/mime/multipart/multipart_test.go.html#7037201">b</a></span><span class="op" id="7037327">,</span>&nbsp;<span class="ident" id="7037329"><a href="/mime/multipart/multipart_test.go.html#7037204">err</a></span><span class="op" id="7037332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037339"><a href="/mime/multipart/multipart_test.go.html#7036632">p</a></span><span class="op" id="7037340">,</span>&nbsp;<span class="ident" id="7037342"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037346">=</span>&nbsp;<span class="ident" id="7037348"><a href="/mime/multipart/multipart_test.go.html#7036826">mr2</a></span><span class="op" id="7037351">.</span><span class="ident" id="7037352">NextPart</span><span class="op" id="7037360">(</span><span class="op" id="7037361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037364">if</span>&nbsp;<span class="ident" id="7037367"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037371">!=</span>&nbsp;<span class="ident" id="7037374"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7037376">.</span><span class="ident" id="7037377">EOF</span>&nbsp;<span class="op" id="7037381">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037385"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037386">.</span><span class="ident" id="7037387">Fatalf</span><span class="op" id="7037393">(</span><span class="string" id="7037394">&#34;final&nbsp;inner&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="7037434">,</span>&nbsp;<span class="ident" id="7037436"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7037439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7037446">//&nbsp;Back&nbsp;to&nbsp;the&nbsp;outer&nbsp;multipart/mixed,&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037515">_</span><span class="op" id="7037516">,</span>&nbsp;<span class="ident" id="7037518"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037522">=</span>&nbsp;<span class="ident" id="7037524"><a href="/mime/multipart/multipart_test.go.html#7036580">mr</a></span><span class="op" id="7037526">.</span><span class="ident" id="7037527">NextPart</span><span class="op" id="7037535">(</span><span class="op" id="7037536">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037539">if</span>&nbsp;<span class="ident" id="7037542"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037546">!=</span>&nbsp;<span class="ident" id="7037549">nil</span>&nbsp;<span class="op" id="7037553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037557"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037558">.</span><span class="ident" id="7037559">Fatalf</span><span class="op" id="7037565">(</span><span class="string" id="7037566">&#34;error&nbsp;reading&nbsp;the&nbsp;image&nbsp;attachment&nbsp;at&nbsp;the&nbsp;end:&nbsp;%v&#34;</span><span class="op" id="7037617">,</span>&nbsp;<span class="ident" id="7037619"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7037622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037629">_</span><span class="op" id="7037630">,</span>&nbsp;<span class="ident" id="7037632"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037636">=</span>&nbsp;<span class="ident" id="7037638"><a href="/mime/multipart/multipart_test.go.html#7036580">mr</a></span><span class="op" id="7037640">.</span><span class="ident" id="7037641">NextPart</span><span class="op" id="7037649">(</span><span class="op" id="7037650">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037653">if</span>&nbsp;<span class="ident" id="7037656"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span>&nbsp;<span class="op" id="7037660">!=</span>&nbsp;<span class="ident" id="7037663"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7037665">.</span><span class="ident" id="7037666">EOF</span>&nbsp;<span class="op" id="7037670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037674"><a href="/mime/multipart/multipart_test.go.html#7036361">t</a></span><span class="op" id="7037675">.</span><span class="ident" id="7037676">Fatalf</span><span class="op" id="7037682">(</span><span class="string" id="7037683">&#34;final&nbsp;outer&nbsp;NextPart&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.EOF&#34;</span><span class="op" id="7037723">,</span>&nbsp;<span class="ident" id="7037725"><a href="/mime/multipart/multipart_test.go.html#7036488">err</a></span><span class="op" id="7037728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7037731">}</span><br>
<span class="lineno"></span><span class="op" id="7037733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">425</span><span class="keyword" id="7037736">type</span>&nbsp;<span class="ident" id="7037741">headerBody</span>&nbsp;<span class="keyword" id="7037752">struct</span>&nbsp;<span class="op" id="7037759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037762">header</span>&nbsp;<span class="ident" id="7037769"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7037778">.</span><span class="ident" id="7037779">MIMEHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037791">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7037798">string</span><br>
<span class="lineno"></span><span class="op" id="7037805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="keyword" id="7037808">func</span>&nbsp;<span class="ident" id="7037813">formData</span><span class="op" id="7037821">(</span><span class="ident" id="7037822">key</span><span class="op" id="7037825">,</span>&nbsp;<span class="ident" id="7037827">value</span>&nbsp;<span class="builtintype" id="7037833">string</span><span class="op" id="7037839">)</span>&nbsp;<span class="ident" id="7037841"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span>&nbsp;<span class="op" id="7037852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7037855">return</span>&nbsp;<span class="ident" id="7037862"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7037872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7037876"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7037885">.</span><span class="ident" id="7037886">MIMEHeader</span><span class="op" id="7037896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037901">&#34;Content-Type&#34;</span><span class="op" id="7037915">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7037924">{</span><span class="string" id="7037925">&#34;text/plain;&nbsp;charset=ISO-8859-1&#34;</span><span class="op" id="7037957">}</span><span class="op" id="7037958">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7037963">&#34;Content-Disposition&#34;</span><span class="op" id="7037984">:</span>&nbsp;<span class="op" id="7037986">{</span><span class="string" id="7037987">&#34;form-data;&nbsp;name=&#34;</span>&nbsp;<span class="op" id="7038006">+</span>&nbsp;<span class="ident" id="7038008"><a href="/mime/multipart/multipart_test.go.html#7037822">key</a></span><span class="op" id="7038011">}</span><span class="op" id="7038012">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038016">}</span><span class="op" id="7038017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038021"><a href="/mime/multipart/multipart_test.go.html#7037827">value</a></span><span class="op" id="7038026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038029">}</span><br>
<span class="lineno"></span><span class="op" id="7038031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">440</span><span class="keyword" id="7038034">type</span>&nbsp;<span class="ident" id="7038039">parseTest</span>&nbsp;<span class="keyword" id="7038049">struct</span>&nbsp;<span class="op" id="7038056">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038059">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7038067">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038075">in</span><span class="op" id="7038077">,</span>&nbsp;<span class="ident" id="7038079">sep</span>&nbsp;<span class="builtintype" id="7038083">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038091">want</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7038099">[</span><span class="op" id="7038100">]</span><span class="ident" id="7038101"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><br>
<span class="lineno"></span><span class="op" id="7038112">}</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span><span class="keyword" id="7038115">var</span>&nbsp;<span class="ident" id="7038119">parseTests</span>&nbsp;<span class="op" id="7038130">=</span>&nbsp;<span class="op" id="7038132">[</span><span class="op" id="7038133">]</span><span class="ident" id="7038134"><a href="/mime/multipart/multipart_test.go.html#7038039">parseTest</a></span><span class="op" id="7038143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038146">//&nbsp;Actual&nbsp;body&nbsp;from&nbsp;App&nbsp;Engine&nbsp;on&nbsp;a&nbsp;blob&nbsp;upload.&nbsp;The&nbsp;final&nbsp;part&nbsp;(the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038216">//&nbsp;Content-Type:&nbsp;message/external-body)&nbsp;is&nbsp;what&nbsp;App&nbsp;Engine&nbsp;replaces</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038285">//&nbsp;the&nbsp;uploaded&nbsp;file&nbsp;with.&nbsp;&nbsp;The&nbsp;other&nbsp;form&nbsp;fields&nbsp;(prefixed&nbsp;with</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038351">//&nbsp;&#34;other&#34;&nbsp;in&nbsp;their&nbsp;form-data&nbsp;name)&nbsp;are&nbsp;unchanged.&nbsp;&nbsp;A&nbsp;bug&nbsp;was</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038414">//&nbsp;reported&nbsp;with&nbsp;blob&nbsp;uploads&nbsp;failing&nbsp;when&nbsp;the&nbsp;other&nbsp;fields&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7038480">//&nbsp;empty.&nbsp;This&nbsp;was&nbsp;the&nbsp;MIME&nbsp;POST&nbsp;body&nbsp;that&nbsp;previously&nbsp;failed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7038543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038547">name</span><span class="op" id="7038551">:</span>&nbsp;<span class="string" id="7038553">&#34;App&nbsp;Engine&nbsp;post&#34;</span><span class="op" id="7038570">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038574">sep</span><span class="op" id="7038577">:</span>&nbsp;&nbsp;<span class="string" id="7038580">&#34;00151757727e9583fd04bfbca4c6&#34;</span><span class="op" id="7038610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7038614">in</span><span class="op" id="7038616">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7038620">&#34;--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty1\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo1\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherFoo2\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherEmpty2\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatFoo\r\n\r\nfoo\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=otherRepeatEmpty\r\n\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;text/plain;&nbsp;charset=ISO-8859-1\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=submit\r\n\r\nSubmit\r\n--00151757727e9583fd04bfbca4c6\r\nContent-Type:&nbsp;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\nContent-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n\r\n--00151757727e9583fd04bfbca4c6--&#34;</span><span class="op" id="7040528">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040532">want</span><span class="op" id="7040536">:</span>&nbsp;<span class="op" id="7040538">[</span><span class="op" id="7040539">]</span><span class="ident" id="7040540"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7040550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040555"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040563">(</span><span class="string" id="7040564">&#34;otherEmpty1&#34;</span><span class="op" id="7040577">,</span>&nbsp;<span class="string" id="7040579">&#34;&#34;</span><span class="op" id="7040581">)</span><span class="op" id="7040582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040587"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040595">(</span><span class="string" id="7040596">&#34;otherFoo1&#34;</span><span class="op" id="7040607">,</span>&nbsp;<span class="string" id="7040609">&#34;foo&#34;</span><span class="op" id="7040614">)</span><span class="op" id="7040615">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040620"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040628">(</span><span class="string" id="7040629">&#34;otherFoo2&#34;</span><span class="op" id="7040640">,</span>&nbsp;<span class="string" id="7040642">&#34;foo&#34;</span><span class="op" id="7040647">)</span><span class="op" id="7040648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040653"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040661">(</span><span class="string" id="7040662">&#34;otherEmpty2&#34;</span><span class="op" id="7040675">,</span>&nbsp;<span class="string" id="7040677">&#34;&#34;</span><span class="op" id="7040679">)</span><span class="op" id="7040680">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040685"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040693">(</span><span class="string" id="7040694">&#34;otherRepeatFoo&#34;</span><span class="op" id="7040710">,</span>&nbsp;<span class="string" id="7040712">&#34;foo&#34;</span><span class="op" id="7040717">)</span><span class="op" id="7040718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040723"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040731">(</span><span class="string" id="7040732">&#34;otherRepeatFoo&#34;</span><span class="op" id="7040748">,</span>&nbsp;<span class="string" id="7040750">&#34;foo&#34;</span><span class="op" id="7040755">)</span><span class="op" id="7040756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040761"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040769">(</span><span class="string" id="7040770">&#34;otherRepeatEmpty&#34;</span><span class="op" id="7040788">,</span>&nbsp;<span class="string" id="7040790">&#34;&#34;</span><span class="op" id="7040792">)</span><span class="op" id="7040793">,</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040798"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040806">(</span><span class="string" id="7040807">&#34;otherRepeatEmpty&#34;</span><span class="op" id="7040825">,</span>&nbsp;<span class="string" id="7040827">&#34;&#34;</span><span class="op" id="7040829">)</span><span class="op" id="7040830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7040835"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7040843">(</span><span class="string" id="7040844">&#34;submit&#34;</span><span class="op" id="7040852">,</span>&nbsp;<span class="string" id="7040854">&#34;Submit&#34;</span><span class="op" id="7040862">)</span><span class="op" id="7040863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7040868">{</span><span class="ident" id="7040869"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7040878">.</span><span class="ident" id="7040879">MIMEHeader</span><span class="op" id="7040889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7040895">&#34;Content-Type&#34;</span><span class="op" id="7040909">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7040918">{</span><span class="string" id="7040919">&#34;message/external-body;&nbsp;charset=ISO-8859-1;&nbsp;blob-key=AHAZQqG84qllx7HUqO_oou5EvdYQNS3Mbbkb0RjjBoM_Kc1UqEN2ygDxWiyCPulIhpHRPx-VbpB6RX4MrsqhWAi_ZxJ48O9P2cTIACbvATHvg7IgbvZytyGMpL7xO1tlIvgwcM47JNfv_tGhy1XwyEUO8oldjPqg5Q&#34;</span><span class="op" id="7041135">}</span><span class="op" id="7041136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7041142">&#34;Content-Disposition&#34;</span><span class="op" id="7041163">:</span>&nbsp;<span class="op" id="7041165">{</span><span class="string" id="7041166">&#34;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;&#34;</span><span class="op" id="7041211">}</span><span class="op" id="7041212">,</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041217">}</span><span class="op" id="7041218">,</span>&nbsp;<span class="string" id="7041220">&#34;Content-Type:&nbsp;image/png\r\nContent-Length:&nbsp;232303\r\nX-AppEngine-Upload-Creation:&nbsp;2012-05-10&nbsp;23:14:02.715173\r\nContent-MD5:&nbsp;MzRjODU1ZDZhZGU1NmRlOWEwZmMwMDdlODBmZTA0NzA=\r\nContent-Disposition:&nbsp;form-data;&nbsp;name=file;&nbsp;filename=\&#34;fall.png\&#34;\r\n\r\n&#34;</span><span class="op" id="7041467">}</span><span class="op" id="7041468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041472">}</span><span class="op" id="7041473">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041476">}</span><span class="op" id="7041477">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7041481">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041557">name</span><span class="op" id="7041561">:</span>&nbsp;<span class="string" id="7041563">&#34;single&nbsp;empty&nbsp;part,&nbsp;--boundary&#34;</span><span class="op" id="7041594">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041598">sep</span><span class="op" id="7041601">:</span>&nbsp;&nbsp;<span class="string" id="7041604">&#34;abc&#34;</span><span class="op" id="7041609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041613">in</span><span class="op" id="7041615">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7041619">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&#34;</span><span class="op" id="7041653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041657">want</span><span class="op" id="7041661">:</span>&nbsp;<span class="op" id="7041663">[</span><span class="op" id="7041664">]</span><span class="ident" id="7041665"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7041675">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041680">{</span><span class="ident" id="7041681"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7041690">.</span><span class="ident" id="7041691">MIMEHeader</span><span class="op" id="7041701">{</span><span class="string" id="7041702">&#34;Foo&#34;</span><span class="op" id="7041707">:</span>&nbsp;<span class="op" id="7041709">{</span><span class="string" id="7041710">&#34;bar&#34;</span><span class="op" id="7041715">}</span><span class="op" id="7041716">}</span><span class="op" id="7041717">,</span>&nbsp;<span class="string" id="7041719">&#34;&#34;</span><span class="op" id="7041721">}</span><span class="op" id="7041722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041726">}</span><span class="op" id="7041727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041730">}</span><span class="op" id="7041731">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7041735">//&nbsp;Single&nbsp;empty&nbsp;part,&nbsp;ended&nbsp;with&nbsp;\r\n--boundary&nbsp;immediately&nbsp;after&nbsp;headers.</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041815">name</span><span class="op" id="7041819">:</span>&nbsp;<span class="string" id="7041821">&#34;single&nbsp;empty&nbsp;part,&nbsp;\r\n--boundary&#34;</span><span class="op" id="7041856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041860">sep</span><span class="op" id="7041863">:</span>&nbsp;&nbsp;<span class="string" id="7041866">&#34;abc&#34;</span><span class="op" id="7041871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041875">in</span><span class="op" id="7041877">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7041881">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n\r\n--abc--&#34;</span><span class="op" id="7041919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7041923">want</span><span class="op" id="7041927">:</span>&nbsp;<span class="op" id="7041929">[</span><span class="op" id="7041930">]</span><span class="ident" id="7041931"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7041941">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041946">{</span><span class="ident" id="7041947"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7041956">.</span><span class="ident" id="7041957">MIMEHeader</span><span class="op" id="7041967">{</span><span class="string" id="7041968">&#34;Foo&#34;</span><span class="op" id="7041973">:</span>&nbsp;<span class="op" id="7041975">{</span><span class="string" id="7041976">&#34;bar&#34;</span><span class="op" id="7041981">}</span><span class="op" id="7041982">}</span><span class="op" id="7041983">,</span>&nbsp;<span class="string" id="7041985">&#34;&#34;</span><span class="op" id="7041987">}</span><span class="op" id="7041988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041992">}</span><span class="op" id="7041993">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7041996">}</span><span class="op" id="7041997">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7042001">//&nbsp;Final&nbsp;part&nbsp;empty.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042027">name</span><span class="op" id="7042031">:</span>&nbsp;<span class="string" id="7042033">&#34;final&nbsp;part&nbsp;empty&#34;</span><span class="op" id="7042051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042055">sep</span><span class="op" id="7042058">:</span>&nbsp;&nbsp;<span class="string" id="7042061">&#34;abc&#34;</span><span class="op" id="7042066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042070">in</span><span class="op" id="7042072">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7042076">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc\r\nFoo2:&nbsp;bar2\r\n\r\n--abc--&#34;</span><span class="op" id="7042137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042141">want</span><span class="op" id="7042145">:</span>&nbsp;<span class="op" id="7042147">[</span><span class="op" id="7042148">]</span><span class="ident" id="7042149"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7042159">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042164">{</span><span class="ident" id="7042165"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7042174">.</span><span class="ident" id="7042175">MIMEHeader</span><span class="op" id="7042185">{</span><span class="string" id="7042186">&#34;Foo&#34;</span><span class="op" id="7042191">:</span>&nbsp;<span class="op" id="7042193">{</span><span class="string" id="7042194">&#34;bar&#34;</span><span class="op" id="7042199">}</span><span class="op" id="7042200">}</span><span class="op" id="7042201">,</span>&nbsp;<span class="string" id="7042203">&#34;&#34;</span><span class="op" id="7042205">}</span><span class="op" id="7042206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042211">{</span><span class="ident" id="7042212"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7042221">.</span><span class="ident" id="7042222">MIMEHeader</span><span class="op" id="7042232">{</span><span class="string" id="7042233">&#34;Foo2&#34;</span><span class="op" id="7042239">:</span>&nbsp;<span class="op" id="7042241">{</span><span class="string" id="7042242">&#34;bar2&#34;</span><span class="op" id="7042248">}</span><span class="op" id="7042249">}</span><span class="op" id="7042250">,</span>&nbsp;<span class="string" id="7042252">&#34;&#34;</span><span class="op" id="7042254">}</span><span class="op" id="7042255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042259">}</span><span class="op" id="7042260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042263">}</span><span class="op" id="7042264">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7042268">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;newlines&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042330">name</span><span class="op" id="7042334">:</span>&nbsp;<span class="string" id="7042336">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;crlf&#34;</span><span class="op" id="7042364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042368">sep</span><span class="op" id="7042371">:</span>&nbsp;&nbsp;<span class="string" id="7042374">&#34;abc&#34;</span><span class="op" id="7042379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042383">in</span><span class="op" id="7042385">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7042389">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--\r\n&#34;</span><span class="op" id="7042427">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042431">want</span><span class="op" id="7042435">:</span>&nbsp;<span class="op" id="7042437">[</span><span class="op" id="7042438">]</span><span class="ident" id="7042439"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7042449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042454">{</span><span class="ident" id="7042455"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7042464">.</span><span class="ident" id="7042465">MIMEHeader</span><span class="op" id="7042475">{</span><span class="string" id="7042476">&#34;Foo&#34;</span><span class="op" id="7042481">:</span>&nbsp;<span class="op" id="7042483">{</span><span class="string" id="7042484">&#34;bar&#34;</span><span class="op" id="7042489">}</span><span class="op" id="7042490">}</span><span class="op" id="7042491">,</span>&nbsp;<span class="string" id="7042493">&#34;&#34;</span><span class="op" id="7042495">}</span><span class="op" id="7042496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042500">}</span><span class="op" id="7042501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042504">}</span><span class="op" id="7042505">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7042509">//&nbsp;Final&nbsp;part&nbsp;empty&nbsp;with&nbsp;lwsp-chars&nbsp;after&nbsp;final&nbsp;separator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042573">name</span><span class="op" id="7042577">:</span>&nbsp;<span class="string" id="7042579">&#34;final&nbsp;part&nbsp;empty&nbsp;then&nbsp;lwsp&#34;</span><span class="op" id="7042607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042611">sep</span><span class="op" id="7042614">:</span>&nbsp;&nbsp;<span class="string" id="7042617">&#34;abc&#34;</span><span class="op" id="7042622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042626">in</span><span class="op" id="7042628">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7042632">&#34;--abc\r\nFoo:&nbsp;bar\r\n\r\n--abc--&nbsp;\t&#34;</span><span class="op" id="7042669">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042673">want</span><span class="op" id="7042677">:</span>&nbsp;<span class="op" id="7042679">[</span><span class="op" id="7042680">]</span><span class="ident" id="7042681"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7042691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042696">{</span><span class="ident" id="7042697"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7042706">.</span><span class="ident" id="7042707">MIMEHeader</span><span class="op" id="7042717">{</span><span class="string" id="7042718">&#34;Foo&#34;</span><span class="op" id="7042723">:</span>&nbsp;<span class="op" id="7042725">{</span><span class="string" id="7042726">&#34;bar&#34;</span><span class="op" id="7042731">}</span><span class="op" id="7042732">}</span><span class="op" id="7042733">,</span>&nbsp;<span class="string" id="7042735">&#34;&#34;</span><span class="op" id="7042737">}</span><span class="op" id="7042738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042742">}</span><span class="op" id="7042743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042746">}</span><span class="op" id="7042747">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7042751">//&nbsp;No&nbsp;parts&nbsp;(empty&nbsp;form&nbsp;as&nbsp;submitted&nbsp;by&nbsp;Chrome)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042804">name</span><span class="op" id="7042808">:</span>&nbsp;<span class="string" id="7042810">&#34;no&nbsp;parts&#34;</span><span class="op" id="7042820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042824">sep</span><span class="op" id="7042827">:</span>&nbsp;&nbsp;<span class="string" id="7042830">&#34;----WebKitFormBoundaryQfEAfzFOiSemeHfA&#34;</span><span class="op" id="7042870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042874">in</span><span class="op" id="7042876">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7042880">&#34;------WebKitFormBoundaryQfEAfzFOiSemeHfA--\r\n&#34;</span><span class="op" id="7042928">,</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7042932">want</span><span class="op" id="7042936">:</span>&nbsp;<span class="op" id="7042938">[</span><span class="op" id="7042939">]</span><span class="ident" id="7042940"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7042950">{</span><span class="op" id="7042951">}</span><span class="op" id="7042952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7042955">}</span><span class="op" id="7042956">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7042960">//&nbsp;Part&nbsp;containing&nbsp;data&nbsp;starting&nbsp;with&nbsp;the&nbsp;boundary,&nbsp;but&nbsp;with&nbsp;additional&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043041">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043045">name</span><span class="op" id="7043049">:</span>&nbsp;<span class="string" id="7043051">&#34;fake&nbsp;separator&nbsp;as&nbsp;data&#34;</span><span class="op" id="7043075">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043079">sep</span><span class="op" id="7043082">:</span>&nbsp;&nbsp;<span class="string" id="7043085">&#34;sep&#34;</span><span class="op" id="7043090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043094">in</span><span class="op" id="7043096">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7043100">&#34;--sep\r\nFoo:&nbsp;bar\r\n\r\n--sepFAKE\r\n--sep--&#34;</span><span class="op" id="7043147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043151">want</span><span class="op" id="7043155">:</span>&nbsp;<span class="op" id="7043157">[</span><span class="op" id="7043158">]</span><span class="ident" id="7043159"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7043169">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043174">{</span><span class="ident" id="7043175"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7043184">.</span><span class="ident" id="7043185">MIMEHeader</span><span class="op" id="7043195">{</span><span class="string" id="7043196">&#34;Foo&#34;</span><span class="op" id="7043201">:</span>&nbsp;<span class="op" id="7043203">{</span><span class="string" id="7043204">&#34;bar&#34;</span><span class="op" id="7043209">}</span><span class="op" id="7043210">}</span><span class="op" id="7043211">,</span>&nbsp;<span class="string" id="7043213">&#34;--sepFAKE&#34;</span><span class="op" id="7043224">}</span><span class="op" id="7043225">,</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043229">}</span><span class="op" id="7043230">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043233">}</span><span class="op" id="7043234">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7043238">//&nbsp;Part&nbsp;containing&nbsp;a&nbsp;boundary&nbsp;with&nbsp;whitespace&nbsp;following&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043299">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043303">name</span><span class="op" id="7043307">:</span>&nbsp;<span class="string" id="7043309">&#34;boundary&nbsp;with&nbsp;whitespace&#34;</span><span class="op" id="7043335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043339">sep</span><span class="op" id="7043342">:</span>&nbsp;&nbsp;<span class="string" id="7043345">&#34;sep&#34;</span><span class="op" id="7043350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043354">in</span><span class="op" id="7043356">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7043360">&#34;--sep&nbsp;\r\nFoo:&nbsp;bar\r\n\r\ntext\r\n--sep--&#34;</span><span class="op" id="7043403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043407">want</span><span class="op" id="7043411">:</span>&nbsp;<span class="op" id="7043413">[</span><span class="op" id="7043414">]</span><span class="ident" id="7043415"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7043425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043430">{</span><span class="ident" id="7043431"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7043440">.</span><span class="ident" id="7043441">MIMEHeader</span><span class="op" id="7043451">{</span><span class="string" id="7043452">&#34;Foo&#34;</span><span class="op" id="7043457">:</span>&nbsp;<span class="op" id="7043459">{</span><span class="string" id="7043460">&#34;bar&#34;</span><span class="op" id="7043465">}</span><span class="op" id="7043466">}</span><span class="op" id="7043467">,</span>&nbsp;<span class="string" id="7043469">&#34;text&#34;</span><span class="op" id="7043475">}</span><span class="op" id="7043476">,</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043480">}</span><span class="op" id="7043481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043484">}</span><span class="op" id="7043485">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7043489">//&nbsp;With&nbsp;ignored&nbsp;leading&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043520">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043524">name</span><span class="op" id="7043528">:</span>&nbsp;<span class="string" id="7043530">&#34;leading&nbsp;line&#34;</span><span class="op" id="7043544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043548">sep</span><span class="op" id="7043551">:</span>&nbsp;&nbsp;<span class="string" id="7043554">&#34;MyBoundary&#34;</span><span class="op" id="7043566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043570">in</span><span class="op" id="7043572">:</span>&nbsp;<span class="ident" id="7043574"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7043581">.</span><span class="ident" id="7043582">Replace</span><span class="op" id="7043589">(</span><span class="string" id="7043590">`This&nbsp;is&nbsp;a&nbsp;multi-part&nbsp;message.&nbsp;&nbsp;This&nbsp;line&nbsp;is&nbsp;ignored.<br>
<span class="lineno"></span>--MyBoundary<br>
<span class="lineno"></span>foo:&nbsp;bar<br>
<span class="lineno">560</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>--MyBoundary--`</span><span class="op" id="7043683">,</span>&nbsp;<span class="string" id="7043685">&#34;\n&#34;</span><span class="op" id="7043689">,</span>&nbsp;<span class="string" id="7043691">&#34;\r\n&#34;</span><span class="op" id="7043697">,</span>&nbsp;<span class="op" id="7043699">-</span><span class="num" id="7043700">1</span><span class="op" id="7043701">)</span><span class="op" id="7043702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043706">want</span><span class="op" id="7043710">:</span>&nbsp;<span class="op" id="7043712">[</span><span class="op" id="7043713">]</span><span class="ident" id="7043714"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7043724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043729">{</span><span class="ident" id="7043730"><a href="/mime/multipart/multipart_test.go.html#7025958">textproto</a></span><span class="op" id="7043739">.</span><span class="ident" id="7043740">MIMEHeader</span><span class="op" id="7043750">{</span><span class="string" id="7043751">&#34;Foo&#34;</span><span class="op" id="7043756">:</span>&nbsp;<span class="op" id="7043758">{</span><span class="string" id="7043759">&#34;bar&#34;</span><span class="op" id="7043764">}</span><span class="op" id="7043765">}</span><span class="op" id="7043766">,</span>&nbsp;<span class="string" id="7043768">&#34;&#34;</span><span class="op" id="7043770">}</span><span class="op" id="7043771">,</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043775">}</span><span class="op" id="7043776">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7043779">}</span><span class="op" id="7043780">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043784"><a href="/mime/multipart/multipart_test.go.html#7044786">roundTripParseTest</a></span><span class="op" id="7043802">(</span><span class="op" id="7043803">)</span><span class="op" id="7043804">,</span><br>
<span class="lineno"></span><span class="op" id="7043806">}</span><br>
<span class="lineno">570</span><br>
<span class="lineno"></span><span class="keyword" id="7043809">func</span>&nbsp;<span class="ident" id="7043814">TestParse</span><span class="op" id="7043823">(</span><span class="ident" id="7043824">t</span>&nbsp;<span class="op" id="7043826">*</span><span class="ident" id="7043827"><a href="/mime/multipart/multipart_test.go.html#7026003">testing</a></span><span class="op" id="7043834">.</span><span class="ident" id="7043835">T</span><span class="op" id="7043836">)</span>&nbsp;<span class="op" id="7043838">{</span><br>
<span class="lineno"></span><span class="ident" id="7043840">Cases</span><span class="op" id="7043845">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043848">for</span>&nbsp;<span class="ident" id="7043852">_</span><span class="op" id="7043853">,</span>&nbsp;<span class="ident" id="7043855">tt</span>&nbsp;<span class="op" id="7043858">:=</span>&nbsp;<span class="keyword" id="7043861">range</span>&nbsp;<span class="ident" id="7043867"><a href="/mime/multipart/multipart_test.go.html#7038119">parseTests</a></span>&nbsp;<span class="op" id="7043878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043882">r</span>&nbsp;<span class="op" id="7043884">:=</span>&nbsp;<span class="ident" id="7043887"><a href="/mime/multipart/multipart.go.html#3968802">NewReader</a></span><span class="op" id="7043896">(</span><span class="ident" id="7043897"><a href="/mime/multipart/multipart_test.go.html#7025992">strings</a></span><span class="op" id="7043904">.</span><span class="ident" id="7043905">NewReader</span><span class="op" id="7043914">(</span><span class="ident" id="7043915"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7043917">.</span><span class="ident" id="7043918">in</span><span class="op" id="7043920">)</span><span class="op" id="7043921">,</span>&nbsp;<span class="ident" id="7043923"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7043925">.</span><span class="ident" id="7043926">sep</span><span class="op" id="7043929">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043933">got</span>&nbsp;<span class="op" id="7043937">:=</span>&nbsp;<span class="op" id="7043940">[</span><span class="op" id="7043941">]</span><span class="ident" id="7043942"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7043952">{</span><span class="op" id="7043953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043957">for</span>&nbsp;<span class="op" id="7043961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7043966">p</span><span class="op" id="7043967">,</span>&nbsp;<span class="ident" id="7043969">err</span>&nbsp;<span class="op" id="7043973">:=</span>&nbsp;<span class="ident" id="7043976"><a href="/mime/multipart/multipart_test.go.html#7043882">r</a></span><span class="op" id="7043977">.</span><span class="ident" id="7043978">NextPart</span><span class="op" id="7043986">(</span><span class="op" id="7043987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7043992">if</span>&nbsp;<span class="ident" id="7043995"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span>&nbsp;<span class="op" id="7043999">==</span>&nbsp;<span class="ident" id="7044002"><a href="/mime/multipart/multipart_test.go.html#7025939">io</a></span><span class="op" id="7044004">.</span><span class="ident" id="7044005">EOF</span>&nbsp;<span class="op" id="7044009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044015">break</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044029">if</span>&nbsp;<span class="ident" id="7044032"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span>&nbsp;<span class="op" id="7044036">!=</span>&nbsp;<span class="ident" id="7044039">nil</span>&nbsp;<span class="op" id="7044043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044049"><a href="/mime/multipart/multipart_test.go.html#7043824">t</a></span><span class="op" id="7044050">.</span><span class="ident" id="7044051">Errorf</span><span class="op" id="7044057">(</span><span class="string" id="7044058">&#34;in&nbsp;test&nbsp;%q,&nbsp;NextPart:&nbsp;%v&#34;</span><span class="op" id="7044084">,</span>&nbsp;<span class="ident" id="7044086"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044088">.</span><span class="ident" id="7044089">name</span><span class="op" id="7044093">,</span>&nbsp;<span class="ident" id="7044095"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span><span class="op" id="7044098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044104">continue</span>&nbsp;<span class="ident" id="7044113">Cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044122">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044127">pbody</span><span class="op" id="7044132">,</span>&nbsp;<span class="ident" id="7044134"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span>&nbsp;<span class="op" id="7044138">:=</span>&nbsp;<span class="ident" id="7044141"><a href="/mime/multipart/multipart_test.go.html#7025945">ioutil</a></span><span class="op" id="7044147">.</span><span class="ident" id="7044148">ReadAll</span><span class="op" id="7044155">(</span><span class="ident" id="7044156"><a href="/mime/multipart/multipart_test.go.html#7043966">p</a></span><span class="op" id="7044157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044162">if</span>&nbsp;<span class="ident" id="7044165"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span>&nbsp;<span class="op" id="7044169">!=</span>&nbsp;<span class="ident" id="7044172">nil</span>&nbsp;<span class="op" id="7044176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044182"><a href="/mime/multipart/multipart_test.go.html#7043824">t</a></span><span class="op" id="7044183">.</span><span class="ident" id="7044184">Errorf</span><span class="op" id="7044190">(</span><span class="string" id="7044191">&#34;in&nbsp;test&nbsp;%q,&nbsp;error&nbsp;reading&nbsp;part:&nbsp;%v&#34;</span><span class="op" id="7044227">,</span>&nbsp;<span class="ident" id="7044229"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044231">.</span><span class="ident" id="7044232">name</span><span class="op" id="7044236">,</span>&nbsp;<span class="ident" id="7044238"><a href="/mime/multipart/multipart_test.go.html#7043969">err</a></span><span class="op" id="7044241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044247">continue</span>&nbsp;<span class="ident" id="7044256">Cases</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044265">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044270"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span>&nbsp;<span class="op" id="7044274">=</span>&nbsp;<span class="builtinfunc" id="7044276">append</span><span class="op" id="7044282">(</span><span class="ident" id="7044283"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044286">,</span>&nbsp;<span class="ident" id="7044288"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7044298">{</span><span class="ident" id="7044299"><a href="/mime/multipart/multipart_test.go.html#7043966">p</a></span><span class="op" id="7044300">.</span><span class="ident" id="7044301">Header</span><span class="op" id="7044307">,</span>&nbsp;<span class="builtintype" id="7044309">string</span><span class="op" id="7044315">(</span><span class="ident" id="7044316"><a href="/mime/multipart/multipart_test.go.html#7044127">pbody</a></span><span class="op" id="7044321">)</span><span class="op" id="7044322">}</span><span class="op" id="7044323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044331">if</span>&nbsp;<span class="op" id="7044334">!</span><span class="ident" id="7044335"><a href="/mime/multipart/multipart_test.go.html#7025981">reflect</a></span><span class="op" id="7044342">.</span><span class="ident" id="7044343">DeepEqual</span><span class="op" id="7044352">(</span><span class="ident" id="7044353"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044355">.</span><span class="ident" id="7044356">want</span><span class="op" id="7044360">,</span>&nbsp;<span class="ident" id="7044362"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044365">)</span>&nbsp;<span class="op" id="7044367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044372"><a href="/mime/multipart/multipart_test.go.html#7043824">t</a></span><span class="op" id="7044373">.</span><span class="ident" id="7044374">Errorf</span><span class="op" id="7044380">(</span><span class="string" id="7044381">&#34;test&nbsp;%q:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7044411">,</span>&nbsp;<span class="ident" id="7044413"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044415">.</span><span class="ident" id="7044416">name</span><span class="op" id="7044420">,</span>&nbsp;<span class="ident" id="7044422"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044425">,</span>&nbsp;<span class="ident" id="7044427"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044429">.</span><span class="ident" id="7044430">want</span><span class="op" id="7044434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044439">if</span>&nbsp;<span class="builtinfunc" id="7044442">len</span><span class="op" id="7044445">(</span><span class="ident" id="7044446"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044448">.</span><span class="ident" id="7044449">want</span><span class="op" id="7044453">)</span>&nbsp;<span class="op" id="7044455">!=</span>&nbsp;<span class="builtinfunc" id="7044458">len</span><span class="op" id="7044461">(</span><span class="ident" id="7044462"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044465">)</span>&nbsp;<span class="op" id="7044467">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044473"><a href="/mime/multipart/multipart_test.go.html#7043824">t</a></span><span class="op" id="7044474">.</span><span class="ident" id="7044475">Errorf</span><span class="op" id="7044481">(</span><span class="string" id="7044482">&#34;test&nbsp;%q:&nbsp;got&nbsp;%d&nbsp;parts,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7044514">,</span>&nbsp;<span class="ident" id="7044516"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044518">.</span><span class="ident" id="7044519">name</span><span class="op" id="7044523">,</span>&nbsp;<span class="builtinfunc" id="7044525">len</span><span class="op" id="7044528">(</span><span class="ident" id="7044529"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044532">)</span><span class="op" id="7044533">,</span>&nbsp;<span class="builtinfunc" id="7044535">len</span><span class="op" id="7044538">(</span><span class="ident" id="7044539"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044541">.</span><span class="ident" id="7044542">want</span><span class="op" id="7044546">)</span><span class="op" id="7044547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044552">}</span>&nbsp;<span class="keyword" id="7044554">else</span>&nbsp;<span class="keyword" id="7044559">if</span>&nbsp;<span class="builtinfunc" id="7044562">len</span><span class="op" id="7044565">(</span><span class="ident" id="7044566"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044569">)</span>&nbsp;<span class="op" id="7044571">&gt;</span>&nbsp;<span class="num" id="7044573">1</span>&nbsp;<span class="op" id="7044575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044581">for</span>&nbsp;<span class="ident" id="7044585">pi</span><span class="op" id="7044587">,</span>&nbsp;<span class="ident" id="7044589">wantPart</span>&nbsp;<span class="op" id="7044598">:=</span>&nbsp;<span class="keyword" id="7044601">range</span>&nbsp;<span class="ident" id="7044607"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044609">.</span><span class="ident" id="7044610">want</span>&nbsp;<span class="op" id="7044615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7044622">if</span>&nbsp;<span class="op" id="7044625">!</span><span class="ident" id="7044626"><a href="/mime/multipart/multipart_test.go.html#7025981">reflect</a></span><span class="op" id="7044633">.</span><span class="ident" id="7044634">DeepEqual</span><span class="op" id="7044643">(</span><span class="ident" id="7044644"><a href="/mime/multipart/multipart_test.go.html#7044589">wantPart</a></span><span class="op" id="7044652">,</span>&nbsp;<span class="ident" id="7044654"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044657">[</span><span class="ident" id="7044658"><a href="/mime/multipart/multipart_test.go.html#7044585">pi</a></span><span class="op" id="7044660">]</span><span class="op" id="7044661">)</span>&nbsp;<span class="op" id="7044663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044671"><a href="/mime/multipart/multipart_test.go.html#7043824">t</a></span><span class="op" id="7044672">.</span><span class="ident" id="7044673">Errorf</span><span class="op" id="7044679">(</span><span class="string" id="7044680">&#34;test&nbsp;%q,&nbsp;part&nbsp;%d:\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="7044719">,</span>&nbsp;<span class="ident" id="7044721"><a href="/mime/multipart/multipart_test.go.html#7043855">tt</a></span><span class="op" id="7044723">.</span><span class="ident" id="7044724">name</span><span class="op" id="7044728">,</span>&nbsp;<span class="ident" id="7044730"><a href="/mime/multipart/multipart_test.go.html#7044585">pi</a></span><span class="op" id="7044732">,</span>&nbsp;<span class="ident" id="7044734"><a href="/mime/multipart/multipart_test.go.html#7043933">got</a></span><span class="op" id="7044737">[</span><span class="ident" id="7044738"><a href="/mime/multipart/multipart_test.go.html#7044585">pi</a></span><span class="op" id="7044740">]</span><span class="op" id="7044741">,</span>&nbsp;<span class="ident" id="7044743"><a href="/mime/multipart/multipart_test.go.html#7044589">wantPart</a></span><span class="op" id="7044751">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7044776">}</span><br>
<span class="lineno">605</span><span class="op" id="7044778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7044781">func</span>&nbsp;<span class="ident" id="7044786">roundTripParseTest</span><span class="op" id="7044804">(</span><span class="op" id="7044805">)</span>&nbsp;<span class="ident" id="7044807"><a href="/mime/multipart/multipart_test.go.html#7038039">parseTest</a></span>&nbsp;<span class="op" id="7044817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044820">t</span>&nbsp;<span class="op" id="7044822">:=</span>&nbsp;<span class="ident" id="7044825"><a href="/mime/multipart/multipart_test.go.html#7038039">parseTest</a></span><span class="op" id="7044834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044838">name</span><span class="op" id="7044842">:</span>&nbsp;<span class="string" id="7044844">&#34;round&nbsp;trip&#34;</span><span class="op" id="7044856">,</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044860">want</span><span class="op" id="7044864">:</span>&nbsp;<span class="op" id="7044866">[</span><span class="op" id="7044867">]</span><span class="ident" id="7044868"><a href="/mime/multipart/multipart_test.go.html#7037741">headerBody</a></span><span class="op" id="7044878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044883"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7044891">(</span><span class="string" id="7044892">&#34;empty&#34;</span><span class="op" id="7044899">,</span>&nbsp;<span class="string" id="7044901">&#34;&#34;</span><span class="op" id="7044903">)</span><span class="op" id="7044904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044909"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7044917">(</span><span class="string" id="7044918">&#34;lf&#34;</span><span class="op" id="7044922">,</span>&nbsp;<span class="string" id="7044924">&#34;\n&#34;</span><span class="op" id="7044928">)</span><span class="op" id="7044929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044934"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7044942">(</span><span class="string" id="7044943">&#34;cr&#34;</span><span class="op" id="7044947">,</span>&nbsp;<span class="string" id="7044949">&#34;\r&#34;</span><span class="op" id="7044953">)</span><span class="op" id="7044954">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044959"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7044967">(</span><span class="string" id="7044968">&#34;crlf&#34;</span><span class="op" id="7044974">,</span>&nbsp;<span class="string" id="7044976">&#34;\r\n&#34;</span><span class="op" id="7044982">)</span><span class="op" id="7044983">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7044988"><a href="/mime/multipart/multipart_test.go.html#7037813">formData</a></span><span class="op" id="7044996">(</span><span class="string" id="7044997">&#34;foo&#34;</span><span class="op" id="7045002">,</span>&nbsp;<span class="string" id="7045004">&#34;bar&#34;</span><span class="op" id="7045009">)</span><span class="op" id="7045010">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045014">}</span><span class="op" id="7045015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045021">var</span>&nbsp;<span class="ident" id="7045025">buf</span>&nbsp;<span class="ident" id="7045029"><a href="/mime/multipart/multipart_test.go.html#7025906">bytes</a></span><span class="op" id="7045034">.</span><span class="ident" id="7045035">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045043">w</span>&nbsp;<span class="op" id="7045045">:=</span>&nbsp;<span class="ident" id="7045048"><a href="/mime/multipart/writer.go.html#3979643">NewWriter</a></span><span class="op" id="7045057">(</span><span class="op" id="7045058">&amp;</span><span class="ident" id="7045059"><a href="/mime/multipart/multipart_test.go.html#7045025">buf</a></span><span class="op" id="7045062">)</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045065">for</span>&nbsp;<span class="ident" id="7045069">_</span><span class="op" id="7045070">,</span>&nbsp;<span class="ident" id="7045072">p</span>&nbsp;<span class="op" id="7045074">:=</span>&nbsp;<span class="keyword" id="7045077">range</span>&nbsp;<span class="ident" id="7045083"><a href="/mime/multipart/multipart_test.go.html#7044820">t</a></span><span class="op" id="7045084">.</span><span class="ident" id="7045085">want</span>&nbsp;<span class="op" id="7045090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045094">pw</span><span class="op" id="7045096">,</span>&nbsp;<span class="ident" id="7045098">err</span>&nbsp;<span class="op" id="7045102">:=</span>&nbsp;<span class="ident" id="7045105"><a href="/mime/multipart/multipart_test.go.html#7045043">w</a></span><span class="op" id="7045106">.</span><span class="ident" id="7045107">CreatePart</span><span class="op" id="7045117">(</span><span class="ident" id="7045118"><a href="/mime/multipart/multipart_test.go.html#7045072">p</a></span><span class="op" id="7045119">.</span><span class="ident" id="7045120">header</span><span class="op" id="7045126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045130">if</span>&nbsp;<span class="ident" id="7045133"><a href="/mime/multipart/multipart_test.go.html#7045098">err</a></span>&nbsp;<span class="op" id="7045137">!=</span>&nbsp;<span class="ident" id="7045140">nil</span>&nbsp;<span class="op" id="7045144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045149">panic</span><span class="op" id="7045154">(</span><span class="ident" id="7045155"><a href="/mime/multipart/multipart_test.go.html#7045098">err</a></span><span class="op" id="7045158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045162">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045166">_</span><span class="op" id="7045167">,</span>&nbsp;<span class="ident" id="7045169"><a href="/mime/multipart/multipart_test.go.html#7045098">err</a></span>&nbsp;<span class="op" id="7045173">=</span>&nbsp;<span class="ident" id="7045175"><a href="/mime/multipart/multipart_test.go.html#7045094">pw</a></span><span class="op" id="7045177">.</span><span class="ident" id="7045178">Write</span><span class="op" id="7045183">(</span><span class="op" id="7045184">[</span><span class="op" id="7045185">]</span><span class="builtintype" id="7045186">byte</span><span class="op" id="7045190">(</span><span class="ident" id="7045191"><a href="/mime/multipart/multipart_test.go.html#7045072">p</a></span><span class="op" id="7045192">.</span><span class="ident" id="7045193">body</span><span class="op" id="7045197">)</span><span class="op" id="7045198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045202">if</span>&nbsp;<span class="ident" id="7045205"><a href="/mime/multipart/multipart_test.go.html#7045098">err</a></span>&nbsp;<span class="op" id="7045209">!=</span>&nbsp;<span class="ident" id="7045212">nil</span>&nbsp;<span class="op" id="7045216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7045221">panic</span><span class="op" id="7045226">(</span><span class="ident" id="7045227"><a href="/mime/multipart/multipart_test.go.html#7045098">err</a></span><span class="op" id="7045230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7045237">}</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045240"><a href="/mime/multipart/multipart_test.go.html#7045043">w</a></span><span class="op" id="7045241">.</span><span class="ident" id="7045242">Close</span><span class="op" id="7045247">(</span><span class="op" id="7045248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045251"><a href="/mime/multipart/multipart_test.go.html#7044820">t</a></span><span class="op" id="7045252">.</span><span class="ident" id="7045253">in</span>&nbsp;<span class="op" id="7045256">=</span>&nbsp;<span class="ident" id="7045258"><a href="/mime/multipart/multipart_test.go.html#7045025">buf</a></span><span class="op" id="7045261">.</span><span class="ident" id="7045262">String</span><span class="op" id="7045268">(</span><span class="op" id="7045269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7045272"><a href="/mime/multipart/multipart_test.go.html#7044820">t</a></span><span class="op" id="7045273">.</span><span class="ident" id="7045274">sep</span>&nbsp;<span class="op" id="7045278">=</span>&nbsp;<span class="ident" id="7045280"><a href="/mime/multipart/multipart_test.go.html#7045043">w</a></span><span class="op" id="7045281">.</span><span class="ident" id="7045282">Boundary</span><span class="op" id="7045290">(</span><span class="op" id="7045291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7045294">return</span>&nbsp;<span class="ident" id="7045301"><a href="/mime/multipart/multipart_test.go.html#7044820">t</a></span><br>
<span class="lineno"></span><span class="op" id="7045303">}</span>
</div>
</body>
</html>
