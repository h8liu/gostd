<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>hash/fnv</h2>
<ul>
<li><a href="/gostd/hash/fnv/fnv.go.html">fnv.go</a></li>
<li><a href="/gostd/hash/fnv/fnv_test.go.html">fnv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5510700">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5510755">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5510809">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5510860">//&nbsp;Package&nbsp;fnv&nbsp;implements&nbsp;FNV-1&nbsp;and&nbsp;FNV-1a,&nbsp;non-cryptographic&nbsp;hash&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="5510937">//&nbsp;created&nbsp;by&nbsp;Glenn&nbsp;Fowler,&nbsp;Landon&nbsp;Curt&nbsp;Noll,&nbsp;and&nbsp;Phong&nbsp;Vo.</span><br>
<span class="lineno"></span><span class="comment" id="5510997">//&nbsp;See</span><br>
<span class="lineno"></span><span class="comment" id="5511004">//&nbsp;http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function.</span><br>
<span class="lineno"></span><span class="keyword" id="5511082">package</span>&nbsp;<span class="ident" id="5511090">fnv</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="5511095">import</span>&nbsp;<span class="op" id="5511102">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5511105">&#34;hash&#34;</span><br>
<span class="lineno"></span><span class="op" id="5511112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="5511115">type</span>&nbsp;<span class="op" id="5511120">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511123">sum32</span>&nbsp;&nbsp;<span class="builtintype" id="5511130">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511138">sum32a</span>&nbsp;<span class="builtintype" id="5511145">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511153">sum64</span>&nbsp;&nbsp;<span class="ident" id="5511160">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511168">sum64a</span>&nbsp;<span class="ident" id="5511175">uint64</span><br>
<span class="lineno">20</span><span class="op" id="5511182">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5511185">const</span>&nbsp;<span class="op" id="5511191">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511194">offset32</span>&nbsp;<span class="op" id="5511203">=</span>&nbsp;<span class="num" id="5511205">2166136261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511217">offset64</span>&nbsp;<span class="op" id="5511226">=</span>&nbsp;<span class="num" id="5511228">14695981039346656037</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511250">prime32</span>&nbsp;&nbsp;<span class="op" id="5511259">=</span>&nbsp;<span class="num" id="5511261">16777619</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5511271">prime64</span>&nbsp;&nbsp;<span class="op" id="5511280">=</span>&nbsp;<span class="num" id="5511282">1099511628211</span><br>
<span class="lineno"></span><span class="op" id="5511296">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5511299">//&nbsp;New32&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno">30</span><span class="keyword" id="5511346">func</span>&nbsp;<span class="ident" id="5511351">New32</span><span class="op" id="5511356">(</span><span class="op" id="5511357">)</span>&nbsp;<span class="ident" id="5511359">hash</span><span class="op" id="5511363">.</span><span class="ident" id="5511364">Hash32</span>&nbsp;<span class="op" id="5511371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511374">var</span>&nbsp;<span class="ident" id="5511378">s</span>&nbsp;<span class="ident" id="5511380">sum32</span>&nbsp;<span class="op" id="5511386">=</span>&nbsp;<span class="ident" id="5511388">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511398">return</span>&nbsp;<span class="op" id="5511405">&amp;</span><span class="ident" id="5511406">s</span><br>
<span class="lineno"></span><span class="op" id="5511408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5511411">//&nbsp;New32a&nbsp;returns&nbsp;a&nbsp;new&nbsp;32-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5511460">func</span>&nbsp;<span class="ident" id="5511465">New32a</span><span class="op" id="5511471">(</span><span class="op" id="5511472">)</span>&nbsp;<span class="ident" id="5511474">hash</span><span class="op" id="5511478">.</span><span class="ident" id="5511479">Hash32</span>&nbsp;<span class="op" id="5511486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511489">var</span>&nbsp;<span class="ident" id="5511493">s</span>&nbsp;<span class="ident" id="5511495">sum32a</span>&nbsp;<span class="op" id="5511502">=</span>&nbsp;<span class="ident" id="5511504">offset32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511514">return</span>&nbsp;<span class="op" id="5511521">&amp;</span><span class="ident" id="5511522">s</span><br>
<span class="lineno"></span><span class="op" id="5511524">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="comment" id="5511527">//&nbsp;New64&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5511574">func</span>&nbsp;<span class="ident" id="5511579">New64</span><span class="op" id="5511584">(</span><span class="op" id="5511585">)</span>&nbsp;<span class="ident" id="5511587">hash</span><span class="op" id="5511591">.</span><span class="ident" id="5511592">Hash64</span>&nbsp;<span class="op" id="5511599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511602">var</span>&nbsp;<span class="ident" id="5511606">s</span>&nbsp;<span class="ident" id="5511608">sum64</span>&nbsp;<span class="op" id="5511614">=</span>&nbsp;<span class="ident" id="5511616">offset64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511626">return</span>&nbsp;<span class="op" id="5511633">&amp;</span><span class="ident" id="5511634">s</span><br>
<span class="lineno">45</span><span class="op" id="5511636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5511639">//&nbsp;New64a&nbsp;returns&nbsp;a&nbsp;new&nbsp;64-bit&nbsp;FNV-1a&nbsp;hash.Hash.</span><br>
<span class="lineno"></span><span class="keyword" id="5511688">func</span>&nbsp;<span class="ident" id="5511693">New64a</span><span class="op" id="5511699">(</span><span class="op" id="5511700">)</span>&nbsp;<span class="ident" id="5511702">hash</span><span class="op" id="5511706">.</span><span class="ident" id="5511707">Hash64</span>&nbsp;<span class="op" id="5511714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511717">var</span>&nbsp;<span class="ident" id="5511721">s</span>&nbsp;<span class="ident" id="5511723">sum64a</span>&nbsp;<span class="op" id="5511730">=</span>&nbsp;<span class="ident" id="5511732">offset64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5511742">return</span>&nbsp;<span class="op" id="5511749">&amp;</span><span class="ident" id="5511750">s</span><br>
<span class="lineno"></span><span class="op" id="5511752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5511755">func</span>&nbsp;<span class="op" id="5511760">(</span><span class="ident" id="5511761">s</span>&nbsp;<span class="op" id="5511763">*</span><span class="ident" id="5511764">sum32</span><span class="op" id="5511769">)</span>&nbsp;<span class="ident" id="5511771">Reset</span><span class="op" id="5511776">(</span><span class="op" id="5511777">)</span>&nbsp;&nbsp;<span class="op" id="5511780">{</span>&nbsp;<span class="op" id="5511782">*</span><span class="ident" id="5511783">s</span>&nbsp;<span class="op" id="5511785">=</span>&nbsp;<span class="ident" id="5511787">offset32</span>&nbsp;<span class="op" id="5511796">}</span><br>
<span class="lineno"></span><span class="keyword" id="5511798">func</span>&nbsp;<span class="op" id="5511803">(</span><span class="ident" id="5511804">s</span>&nbsp;<span class="op" id="5511806">*</span><span class="ident" id="5511807">sum32a</span><span class="op" id="5511813">)</span>&nbsp;<span class="ident" id="5511815">Reset</span><span class="op" id="5511820">(</span><span class="op" id="5511821">)</span>&nbsp;<span class="op" id="5511823">{</span>&nbsp;<span class="op" id="5511825">*</span><span class="ident" id="5511826">s</span>&nbsp;<span class="op" id="5511828">=</span>&nbsp;<span class="ident" id="5511830">offset32</span>&nbsp;<span class="op" id="5511839">}</span><br>
<span class="lineno">55</span><span class="keyword" id="5511841">func</span>&nbsp;<span class="op" id="5511846">(</span><span class="ident" id="5511847">s</span>&nbsp;<span class="op" id="5511849">*</span><span class="ident" id="5511850">sum64</span><span class="op" id="5511855">)</span>&nbsp;<span class="ident" id="5511857">Reset</span><span class="op" id="5511862">(</span><span class="op" id="5511863">)</span>&nbsp;&nbsp;<span class="op" id="5511866">{</span>&nbsp;<span class="op" id="5511868">*</span><span class="ident" id="5511869">s</span>&nbsp;<span class="op" id="5511871">=</span>&nbsp;<span class="ident" id="5511873">offset64</span>&nbsp;<span class="op" id="5511882">}</span><br>
<span class="lineno"></span><span class="keyword" id="5511884">func</span>&nbsp;<span class="op" id="5511889">(</span><span class="ident" id="5511890">s</span>&nbsp;<span class="op" id="5511892">*</span><span class="ident" id="5511893">sum64a</span><span class="op" id="5511899">)</span>&nbsp;<span class="ident" id="5511901">Reset</span><span class="op" id="5511906">(</span><span class="op" id="5511907">)</span>&nbsp;<span class="op" id="5511909">{</span>&nbsp;<span class="op" id="5511911">*</span><span class="ident" id="5511912">s</span>&nbsp;<span class="op" id="5511914">=</span>&nbsp;<span class="ident" id="5511916">offset64</span>&nbsp;<span class="op" id="5511925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5511928">func</span>&nbsp;<span class="op" id="5511933">(</span><span class="ident" id="5511934">s</span>&nbsp;<span class="op" id="5511936">*</span><span class="ident" id="5511937">sum32</span><span class="op" id="5511942">)</span>&nbsp;<span class="ident" id="5511944">Sum32</span><span class="op" id="5511949">(</span><span class="op" id="5511950">)</span>&nbsp;<span class="builtintype" id="5511952">uint32</span>&nbsp;&nbsp;<span class="op" id="5511960">{</span>&nbsp;<span class="keyword" id="5511962">return</span>&nbsp;<span class="builtintype" id="5511969">uint32</span><span class="op" id="5511975">(</span><span class="op" id="5511976">*</span><span class="ident" id="5511977">s</span><span class="op" id="5511978">)</span>&nbsp;<span class="op" id="5511980">}</span><br>
<span class="lineno"></span><span class="keyword" id="5511982">func</span>&nbsp;<span class="op" id="5511987">(</span><span class="ident" id="5511988">s</span>&nbsp;<span class="op" id="5511990">*</span><span class="ident" id="5511991">sum32a</span><span class="op" id="5511997">)</span>&nbsp;<span class="ident" id="5511999">Sum32</span><span class="op" id="5512004">(</span><span class="op" id="5512005">)</span>&nbsp;<span class="builtintype" id="5512007">uint32</span>&nbsp;<span class="op" id="5512014">{</span>&nbsp;<span class="keyword" id="5512016">return</span>&nbsp;<span class="builtintype" id="5512023">uint32</span><span class="op" id="5512029">(</span><span class="op" id="5512030">*</span><span class="ident" id="5512031">s</span><span class="op" id="5512032">)</span>&nbsp;<span class="op" id="5512034">}</span><br>
<span class="lineno">60</span><span class="keyword" id="5512036">func</span>&nbsp;<span class="op" id="5512041">(</span><span class="ident" id="5512042">s</span>&nbsp;<span class="op" id="5512044">*</span><span class="ident" id="5512045">sum64</span><span class="op" id="5512050">)</span>&nbsp;<span class="ident" id="5512052">Sum64</span><span class="op" id="5512057">(</span><span class="op" id="5512058">)</span>&nbsp;<span class="ident" id="5512060">uint64</span>&nbsp;&nbsp;<span class="op" id="5512068">{</span>&nbsp;<span class="keyword" id="5512070">return</span>&nbsp;<span class="ident" id="5512077">uint64</span><span class="op" id="5512083">(</span><span class="op" id="5512084">*</span><span class="ident" id="5512085">s</span><span class="op" id="5512086">)</span>&nbsp;<span class="op" id="5512088">}</span><br>
<span class="lineno"></span><span class="keyword" id="5512090">func</span>&nbsp;<span class="op" id="5512095">(</span><span class="ident" id="5512096">s</span>&nbsp;<span class="op" id="5512098">*</span><span class="ident" id="5512099">sum64a</span><span class="op" id="5512105">)</span>&nbsp;<span class="ident" id="5512107">Sum64</span><span class="op" id="5512112">(</span><span class="op" id="5512113">)</span>&nbsp;<span class="ident" id="5512115">uint64</span>&nbsp;<span class="op" id="5512122">{</span>&nbsp;<span class="keyword" id="5512124">return</span>&nbsp;<span class="ident" id="5512131">uint64</span><span class="op" id="5512137">(</span><span class="op" id="5512138">*</span><span class="ident" id="5512139">s</span><span class="op" id="5512140">)</span>&nbsp;<span class="op" id="5512142">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512145">func</span>&nbsp;<span class="op" id="5512150">(</span><span class="ident" id="5512151">s</span>&nbsp;<span class="op" id="5512153">*</span><span class="ident" id="5512154">sum32</span><span class="op" id="5512159">)</span>&nbsp;<span class="ident" id="5512161">Write</span><span class="op" id="5512166">(</span><span class="ident" id="5512167">data</span>&nbsp;<span class="op" id="5512172">[</span><span class="op" id="5512173">]</span><span class="builtintype" id="5512174">byte</span><span class="op" id="5512178">)</span>&nbsp;<span class="op" id="5512180">(</span><span class="builtintype" id="5512181">int</span><span class="op" id="5512184">,</span>&nbsp;<span class="builtintype" id="5512186">error</span><span class="op" id="5512191">)</span>&nbsp;<span class="op" id="5512193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512196">hash</span>&nbsp;<span class="op" id="5512201">:=</span>&nbsp;<span class="op" id="5512204">*</span><span class="ident" id="5512205">s</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512208">for</span>&nbsp;<span class="ident" id="5512212">_</span><span class="op" id="5512213">,</span>&nbsp;<span class="ident" id="5512215">c</span>&nbsp;<span class="op" id="5512217">:=</span>&nbsp;<span class="keyword" id="5512220">range</span>&nbsp;<span class="ident" id="5512226">data</span>&nbsp;<span class="op" id="5512231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512235">hash</span>&nbsp;<span class="op" id="5512240">*=</span>&nbsp;<span class="ident" id="5512243">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512253">hash</span>&nbsp;<span class="op" id="5512258">^=</span>&nbsp;<span class="ident" id="5512261">sum32</span><span class="op" id="5512266">(</span><span class="ident" id="5512267">c</span><span class="op" id="5512268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512274">*</span><span class="ident" id="5512275">s</span>&nbsp;<span class="op" id="5512277">=</span>&nbsp;<span class="ident" id="5512279">hash</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512285">return</span>&nbsp;<span class="builtinfunc" id="5512292">len</span><span class="op" id="5512295">(</span><span class="ident" id="5512296">data</span><span class="op" id="5512300">)</span><span class="op" id="5512301">,</span>&nbsp;<span class="ident" id="5512303">nil</span><br>
<span class="lineno"></span><span class="op" id="5512307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512310">func</span>&nbsp;<span class="op" id="5512315">(</span><span class="ident" id="5512316">s</span>&nbsp;<span class="op" id="5512318">*</span><span class="ident" id="5512319">sum32a</span><span class="op" id="5512325">)</span>&nbsp;<span class="ident" id="5512327">Write</span><span class="op" id="5512332">(</span><span class="ident" id="5512333">data</span>&nbsp;<span class="op" id="5512338">[</span><span class="op" id="5512339">]</span><span class="builtintype" id="5512340">byte</span><span class="op" id="5512344">)</span>&nbsp;<span class="op" id="5512346">(</span><span class="builtintype" id="5512347">int</span><span class="op" id="5512350">,</span>&nbsp;<span class="builtintype" id="5512352">error</span><span class="op" id="5512357">)</span>&nbsp;<span class="op" id="5512359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512362">hash</span>&nbsp;<span class="op" id="5512367">:=</span>&nbsp;<span class="op" id="5512370">*</span><span class="ident" id="5512371">s</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512374">for</span>&nbsp;<span class="ident" id="5512378">_</span><span class="op" id="5512379">,</span>&nbsp;<span class="ident" id="5512381">c</span>&nbsp;<span class="op" id="5512383">:=</span>&nbsp;<span class="keyword" id="5512386">range</span>&nbsp;<span class="ident" id="5512392">data</span>&nbsp;<span class="op" id="5512397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512401">hash</span>&nbsp;<span class="op" id="5512406">^=</span>&nbsp;<span class="ident" id="5512409">sum32a</span><span class="op" id="5512415">(</span><span class="ident" id="5512416">c</span><span class="op" id="5512417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512421">hash</span>&nbsp;<span class="op" id="5512426">*=</span>&nbsp;<span class="ident" id="5512429">prime32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512441">*</span><span class="ident" id="5512442">s</span>&nbsp;<span class="op" id="5512444">=</span>&nbsp;<span class="ident" id="5512446">hash</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512452">return</span>&nbsp;<span class="builtinfunc" id="5512459">len</span><span class="op" id="5512462">(</span><span class="ident" id="5512463">data</span><span class="op" id="5512467">)</span><span class="op" id="5512468">,</span>&nbsp;<span class="ident" id="5512470">nil</span><br>
<span class="lineno"></span><span class="op" id="5512474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512477">func</span>&nbsp;<span class="op" id="5512482">(</span><span class="ident" id="5512483">s</span>&nbsp;<span class="op" id="5512485">*</span><span class="ident" id="5512486">sum64</span><span class="op" id="5512491">)</span>&nbsp;<span class="ident" id="5512493">Write</span><span class="op" id="5512498">(</span><span class="ident" id="5512499">data</span>&nbsp;<span class="op" id="5512504">[</span><span class="op" id="5512505">]</span><span class="builtintype" id="5512506">byte</span><span class="op" id="5512510">)</span>&nbsp;<span class="op" id="5512512">(</span><span class="builtintype" id="5512513">int</span><span class="op" id="5512516">,</span>&nbsp;<span class="builtintype" id="5512518">error</span><span class="op" id="5512523">)</span>&nbsp;<span class="op" id="5512525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512528">hash</span>&nbsp;<span class="op" id="5512533">:=</span>&nbsp;<span class="op" id="5512536">*</span><span class="ident" id="5512537">s</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512540">for</span>&nbsp;<span class="ident" id="5512544">_</span><span class="op" id="5512545">,</span>&nbsp;<span class="ident" id="5512547">c</span>&nbsp;<span class="op" id="5512549">:=</span>&nbsp;<span class="keyword" id="5512552">range</span>&nbsp;<span class="ident" id="5512558">data</span>&nbsp;<span class="op" id="5512563">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512567">hash</span>&nbsp;<span class="op" id="5512572">*=</span>&nbsp;<span class="ident" id="5512575">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512585">hash</span>&nbsp;<span class="op" id="5512590">^=</span>&nbsp;<span class="ident" id="5512593">sum64</span><span class="op" id="5512598">(</span><span class="ident" id="5512599">c</span><span class="op" id="5512600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512603">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512606">*</span><span class="ident" id="5512607">s</span>&nbsp;<span class="op" id="5512609">=</span>&nbsp;<span class="ident" id="5512611">hash</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512617">return</span>&nbsp;<span class="builtinfunc" id="5512624">len</span><span class="op" id="5512627">(</span><span class="ident" id="5512628">data</span><span class="op" id="5512632">)</span><span class="op" id="5512633">,</span>&nbsp;<span class="ident" id="5512635">nil</span><br>
<span class="lineno"></span><span class="op" id="5512639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512642">func</span>&nbsp;<span class="op" id="5512647">(</span><span class="ident" id="5512648">s</span>&nbsp;<span class="op" id="5512650">*</span><span class="ident" id="5512651">sum64a</span><span class="op" id="5512657">)</span>&nbsp;<span class="ident" id="5512659">Write</span><span class="op" id="5512664">(</span><span class="ident" id="5512665">data</span>&nbsp;<span class="op" id="5512670">[</span><span class="op" id="5512671">]</span><span class="builtintype" id="5512672">byte</span><span class="op" id="5512676">)</span>&nbsp;<span class="op" id="5512678">(</span><span class="builtintype" id="5512679">int</span><span class="op" id="5512682">,</span>&nbsp;<span class="builtintype" id="5512684">error</span><span class="op" id="5512689">)</span>&nbsp;<span class="op" id="5512691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512694">hash</span>&nbsp;<span class="op" id="5512699">:=</span>&nbsp;<span class="op" id="5512702">*</span><span class="ident" id="5512703">s</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512706">for</span>&nbsp;<span class="ident" id="5512710">_</span><span class="op" id="5512711">,</span>&nbsp;<span class="ident" id="5512713">c</span>&nbsp;<span class="op" id="5512715">:=</span>&nbsp;<span class="keyword" id="5512718">range</span>&nbsp;<span class="ident" id="5512724">data</span>&nbsp;<span class="op" id="5512729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512733">hash</span>&nbsp;<span class="op" id="5512738">^=</span>&nbsp;<span class="ident" id="5512741">sum64a</span><span class="op" id="5512747">(</span><span class="ident" id="5512748">c</span><span class="op" id="5512749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5512753">hash</span>&nbsp;<span class="op" id="5512758">*=</span>&nbsp;<span class="ident" id="5512761">prime64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512770">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5512773">*</span><span class="ident" id="5512774">s</span>&nbsp;<span class="op" id="5512776">=</span>&nbsp;<span class="ident" id="5512778">hash</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5512784">return</span>&nbsp;<span class="builtinfunc" id="5512791">len</span><span class="op" id="5512794">(</span><span class="ident" id="5512795">data</span><span class="op" id="5512799">)</span><span class="op" id="5512800">,</span>&nbsp;<span class="ident" id="5512802">nil</span><br>
<span class="lineno"></span><span class="op" id="5512806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512809">func</span>&nbsp;<span class="op" id="5512814">(</span><span class="ident" id="5512815">s</span>&nbsp;<span class="op" id="5512817">*</span><span class="ident" id="5512818">sum32</span><span class="op" id="5512823">)</span>&nbsp;<span class="ident" id="5512825">Size</span><span class="op" id="5512829">(</span><span class="op" id="5512830">)</span>&nbsp;<span class="builtintype" id="5512832">int</span>&nbsp;&nbsp;<span class="op" id="5512837">{</span>&nbsp;<span class="keyword" id="5512839">return</span>&nbsp;<span class="num" id="5512846">4</span>&nbsp;<span class="op" id="5512848">}</span><br>
<span class="lineno"></span><span class="keyword" id="5512850">func</span>&nbsp;<span class="op" id="5512855">(</span><span class="ident" id="5512856">s</span>&nbsp;<span class="op" id="5512858">*</span><span class="ident" id="5512859">sum32a</span><span class="op" id="5512865">)</span>&nbsp;<span class="ident" id="5512867">Size</span><span class="op" id="5512871">(</span><span class="op" id="5512872">)</span>&nbsp;<span class="builtintype" id="5512874">int</span>&nbsp;<span class="op" id="5512878">{</span>&nbsp;<span class="keyword" id="5512880">return</span>&nbsp;<span class="num" id="5512887">4</span>&nbsp;<span class="op" id="5512889">}</span><br>
<span class="lineno">105</span><span class="keyword" id="5512891">func</span>&nbsp;<span class="op" id="5512896">(</span><span class="ident" id="5512897">s</span>&nbsp;<span class="op" id="5512899">*</span><span class="ident" id="5512900">sum64</span><span class="op" id="5512905">)</span>&nbsp;<span class="ident" id="5512907">Size</span><span class="op" id="5512911">(</span><span class="op" id="5512912">)</span>&nbsp;<span class="builtintype" id="5512914">int</span>&nbsp;&nbsp;<span class="op" id="5512919">{</span>&nbsp;<span class="keyword" id="5512921">return</span>&nbsp;<span class="num" id="5512928">8</span>&nbsp;<span class="op" id="5512930">}</span><br>
<span class="lineno"></span><span class="keyword" id="5512932">func</span>&nbsp;<span class="op" id="5512937">(</span><span class="ident" id="5512938">s</span>&nbsp;<span class="op" id="5512940">*</span><span class="ident" id="5512941">sum64a</span><span class="op" id="5512947">)</span>&nbsp;<span class="ident" id="5512949">Size</span><span class="op" id="5512953">(</span><span class="op" id="5512954">)</span>&nbsp;<span class="builtintype" id="5512956">int</span>&nbsp;<span class="op" id="5512960">{</span>&nbsp;<span class="keyword" id="5512962">return</span>&nbsp;<span class="num" id="5512969">8</span>&nbsp;<span class="op" id="5512971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5512974">func</span>&nbsp;<span class="op" id="5512979">(</span><span class="ident" id="5512980">s</span>&nbsp;<span class="op" id="5512982">*</span><span class="ident" id="5512983">sum32</span><span class="op" id="5512988">)</span>&nbsp;<span class="ident" id="5512990">BlockSize</span><span class="op" id="5512999">(</span><span class="op" id="5513000">)</span>&nbsp;<span class="builtintype" id="5513002">int</span>&nbsp;&nbsp;<span class="op" id="5513007">{</span>&nbsp;<span class="keyword" id="5513009">return</span>&nbsp;<span class="num" id="5513016">1</span>&nbsp;<span class="op" id="5513018">}</span><br>
<span class="lineno"></span><span class="keyword" id="5513020">func</span>&nbsp;<span class="op" id="5513025">(</span><span class="ident" id="5513026">s</span>&nbsp;<span class="op" id="5513028">*</span><span class="ident" id="5513029">sum32a</span><span class="op" id="5513035">)</span>&nbsp;<span class="ident" id="5513037">BlockSize</span><span class="op" id="5513046">(</span><span class="op" id="5513047">)</span>&nbsp;<span class="builtintype" id="5513049">int</span>&nbsp;<span class="op" id="5513053">{</span>&nbsp;<span class="keyword" id="5513055">return</span>&nbsp;<span class="num" id="5513062">1</span>&nbsp;<span class="op" id="5513064">}</span><br>
<span class="lineno">110</span><span class="keyword" id="5513066">func</span>&nbsp;<span class="op" id="5513071">(</span><span class="ident" id="5513072">s</span>&nbsp;<span class="op" id="5513074">*</span><span class="ident" id="5513075">sum64</span><span class="op" id="5513080">)</span>&nbsp;<span class="ident" id="5513082">BlockSize</span><span class="op" id="5513091">(</span><span class="op" id="5513092">)</span>&nbsp;<span class="builtintype" id="5513094">int</span>&nbsp;&nbsp;<span class="op" id="5513099">{</span>&nbsp;<span class="keyword" id="5513101">return</span>&nbsp;<span class="num" id="5513108">1</span>&nbsp;<span class="op" id="5513110">}</span><br>
<span class="lineno"></span><span class="keyword" id="5513112">func</span>&nbsp;<span class="op" id="5513117">(</span><span class="ident" id="5513118">s</span>&nbsp;<span class="op" id="5513120">*</span><span class="ident" id="5513121">sum64a</span><span class="op" id="5513127">)</span>&nbsp;<span class="ident" id="5513129">BlockSize</span><span class="op" id="5513138">(</span><span class="op" id="5513139">)</span>&nbsp;<span class="builtintype" id="5513141">int</span>&nbsp;<span class="op" id="5513145">{</span>&nbsp;<span class="keyword" id="5513147">return</span>&nbsp;<span class="num" id="5513154">1</span>&nbsp;<span class="op" id="5513156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5513159">func</span>&nbsp;<span class="op" id="5513164">(</span><span class="ident" id="5513165">s</span>&nbsp;<span class="op" id="5513167">*</span><span class="ident" id="5513168">sum32</span><span class="op" id="5513173">)</span>&nbsp;<span class="ident" id="5513175">Sum</span><span class="op" id="5513178">(</span><span class="ident" id="5513179">in</span>&nbsp;<span class="op" id="5513182">[</span><span class="op" id="5513183">]</span><span class="builtintype" id="5513184">byte</span><span class="op" id="5513188">)</span>&nbsp;<span class="op" id="5513190">[</span><span class="op" id="5513191">]</span><span class="builtintype" id="5513192">byte</span>&nbsp;<span class="op" id="5513197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513200">v</span>&nbsp;<span class="op" id="5513202">:=</span>&nbsp;<span class="builtintype" id="5513205">uint32</span><span class="op" id="5513211">(</span><span class="op" id="5513212">*</span><span class="ident" id="5513213">s</span><span class="op" id="5513214">)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5513217">return</span>&nbsp;<span class="builtinfunc" id="5513224">append</span><span class="op" id="5513230">(</span><span class="ident" id="5513231">in</span><span class="op" id="5513233">,</span>&nbsp;<span class="builtintype" id="5513235">byte</span><span class="op" id="5513239">(</span><span class="ident" id="5513240">v</span><span class="op" id="5513241">&gt;&gt;</span><span class="num" id="5513243">24</span><span class="op" id="5513245">)</span><span class="op" id="5513246">,</span>&nbsp;<span class="builtintype" id="5513248">byte</span><span class="op" id="5513252">(</span><span class="ident" id="5513253">v</span><span class="op" id="5513254">&gt;&gt;</span><span class="num" id="5513256">16</span><span class="op" id="5513258">)</span><span class="op" id="5513259">,</span>&nbsp;<span class="builtintype" id="5513261">byte</span><span class="op" id="5513265">(</span><span class="ident" id="5513266">v</span><span class="op" id="5513267">&gt;&gt;</span><span class="num" id="5513269">8</span><span class="op" id="5513270">)</span><span class="op" id="5513271">,</span>&nbsp;<span class="builtintype" id="5513273">byte</span><span class="op" id="5513277">(</span><span class="ident" id="5513278">v</span><span class="op" id="5513279">)</span><span class="op" id="5513280">)</span><br>
<span class="lineno"></span><span class="op" id="5513282">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5513285">func</span>&nbsp;<span class="op" id="5513290">(</span><span class="ident" id="5513291">s</span>&nbsp;<span class="op" id="5513293">*</span><span class="ident" id="5513294">sum32a</span><span class="op" id="5513300">)</span>&nbsp;<span class="ident" id="5513302">Sum</span><span class="op" id="5513305">(</span><span class="ident" id="5513306">in</span>&nbsp;<span class="op" id="5513309">[</span><span class="op" id="5513310">]</span><span class="builtintype" id="5513311">byte</span><span class="op" id="5513315">)</span>&nbsp;<span class="op" id="5513317">[</span><span class="op" id="5513318">]</span><span class="builtintype" id="5513319">byte</span>&nbsp;<span class="op" id="5513324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513327">v</span>&nbsp;<span class="op" id="5513329">:=</span>&nbsp;<span class="builtintype" id="5513332">uint32</span><span class="op" id="5513338">(</span><span class="op" id="5513339">*</span><span class="ident" id="5513340">s</span><span class="op" id="5513341">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5513344">return</span>&nbsp;<span class="builtinfunc" id="5513351">append</span><span class="op" id="5513357">(</span><span class="ident" id="5513358">in</span><span class="op" id="5513360">,</span>&nbsp;<span class="builtintype" id="5513362">byte</span><span class="op" id="5513366">(</span><span class="ident" id="5513367">v</span><span class="op" id="5513368">&gt;&gt;</span><span class="num" id="5513370">24</span><span class="op" id="5513372">)</span><span class="op" id="5513373">,</span>&nbsp;<span class="builtintype" id="5513375">byte</span><span class="op" id="5513379">(</span><span class="ident" id="5513380">v</span><span class="op" id="5513381">&gt;&gt;</span><span class="num" id="5513383">16</span><span class="op" id="5513385">)</span><span class="op" id="5513386">,</span>&nbsp;<span class="builtintype" id="5513388">byte</span><span class="op" id="5513392">(</span><span class="ident" id="5513393">v</span><span class="op" id="5513394">&gt;&gt;</span><span class="num" id="5513396">8</span><span class="op" id="5513397">)</span><span class="op" id="5513398">,</span>&nbsp;<span class="builtintype" id="5513400">byte</span><span class="op" id="5513404">(</span><span class="ident" id="5513405">v</span><span class="op" id="5513406">)</span><span class="op" id="5513407">)</span><br>
<span class="lineno"></span><span class="op" id="5513409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5513412">func</span>&nbsp;<span class="op" id="5513417">(</span><span class="ident" id="5513418">s</span>&nbsp;<span class="op" id="5513420">*</span><span class="ident" id="5513421">sum64</span><span class="op" id="5513426">)</span>&nbsp;<span class="ident" id="5513428">Sum</span><span class="op" id="5513431">(</span><span class="ident" id="5513432">in</span>&nbsp;<span class="op" id="5513435">[</span><span class="op" id="5513436">]</span><span class="builtintype" id="5513437">byte</span><span class="op" id="5513441">)</span>&nbsp;<span class="op" id="5513443">[</span><span class="op" id="5513444">]</span><span class="builtintype" id="5513445">byte</span>&nbsp;<span class="op" id="5513450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513453">v</span>&nbsp;<span class="op" id="5513455">:=</span>&nbsp;<span class="ident" id="5513458">uint64</span><span class="op" id="5513464">(</span><span class="op" id="5513465">*</span><span class="ident" id="5513466">s</span><span class="op" id="5513467">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5513470">return</span>&nbsp;<span class="builtinfunc" id="5513477">append</span><span class="op" id="5513483">(</span><span class="ident" id="5513484">in</span><span class="op" id="5513486">,</span>&nbsp;<span class="builtintype" id="5513488">byte</span><span class="op" id="5513492">(</span><span class="ident" id="5513493">v</span><span class="op" id="5513494">&gt;&gt;</span><span class="num" id="5513496">56</span><span class="op" id="5513498">)</span><span class="op" id="5513499">,</span>&nbsp;<span class="builtintype" id="5513501">byte</span><span class="op" id="5513505">(</span><span class="ident" id="5513506">v</span><span class="op" id="5513507">&gt;&gt;</span><span class="num" id="5513509">48</span><span class="op" id="5513511">)</span><span class="op" id="5513512">,</span>&nbsp;<span class="builtintype" id="5513514">byte</span><span class="op" id="5513518">(</span><span class="ident" id="5513519">v</span><span class="op" id="5513520">&gt;&gt;</span><span class="num" id="5513522">40</span><span class="op" id="5513524">)</span><span class="op" id="5513525">,</span>&nbsp;<span class="builtintype" id="5513527">byte</span><span class="op" id="5513531">(</span><span class="ident" id="5513532">v</span><span class="op" id="5513533">&gt;&gt;</span><span class="num" id="5513535">32</span><span class="op" id="5513537">)</span><span class="op" id="5513538">,</span>&nbsp;<span class="builtintype" id="5513540">byte</span><span class="op" id="5513544">(</span><span class="ident" id="5513545">v</span><span class="op" id="5513546">&gt;&gt;</span><span class="num" id="5513548">24</span><span class="op" id="5513550">)</span><span class="op" id="5513551">,</span>&nbsp;<span class="builtintype" id="5513553">byte</span><span class="op" id="5513557">(</span><span class="ident" id="5513558">v</span><span class="op" id="5513559">&gt;&gt;</span><span class="num" id="5513561">16</span><span class="op" id="5513563">)</span><span class="op" id="5513564">,</span>&nbsp;<span class="builtintype" id="5513566">byte</span><span class="op" id="5513570">(</span><span class="ident" id="5513571">v</span><span class="op" id="5513572">&gt;&gt;</span><span class="num" id="5513574">8</span><span class="op" id="5513575">)</span><span class="op" id="5513576">,</span>&nbsp;<span class="builtintype" id="5513578">byte</span><span class="op" id="5513582">(</span><span class="ident" id="5513583">v</span><span class="op" id="5513584">)</span><span class="op" id="5513585">)</span><br>
<span class="lineno"></span><span class="op" id="5513587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5513590">func</span>&nbsp;<span class="op" id="5513595">(</span><span class="ident" id="5513596">s</span>&nbsp;<span class="op" id="5513598">*</span><span class="ident" id="5513599">sum64a</span><span class="op" id="5513605">)</span>&nbsp;<span class="ident" id="5513607">Sum</span><span class="op" id="5513610">(</span><span class="ident" id="5513611">in</span>&nbsp;<span class="op" id="5513614">[</span><span class="op" id="5513615">]</span><span class="builtintype" id="5513616">byte</span><span class="op" id="5513620">)</span>&nbsp;<span class="op" id="5513622">[</span><span class="op" id="5513623">]</span><span class="builtintype" id="5513624">byte</span>&nbsp;<span class="op" id="5513629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5513632">v</span>&nbsp;<span class="op" id="5513634">:=</span>&nbsp;<span class="ident" id="5513637">uint64</span><span class="op" id="5513643">(</span><span class="op" id="5513644">*</span><span class="ident" id="5513645">s</span><span class="op" id="5513646">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5513649">return</span>&nbsp;<span class="builtinfunc" id="5513656">append</span><span class="op" id="5513662">(</span><span class="ident" id="5513663">in</span><span class="op" id="5513665">,</span>&nbsp;<span class="builtintype" id="5513667">byte</span><span class="op" id="5513671">(</span><span class="ident" id="5513672">v</span><span class="op" id="5513673">&gt;&gt;</span><span class="num" id="5513675">56</span><span class="op" id="5513677">)</span><span class="op" id="5513678">,</span>&nbsp;<span class="builtintype" id="5513680">byte</span><span class="op" id="5513684">(</span><span class="ident" id="5513685">v</span><span class="op" id="5513686">&gt;&gt;</span><span class="num" id="5513688">48</span><span class="op" id="5513690">)</span><span class="op" id="5513691">,</span>&nbsp;<span class="builtintype" id="5513693">byte</span><span class="op" id="5513697">(</span><span class="ident" id="5513698">v</span><span class="op" id="5513699">&gt;&gt;</span><span class="num" id="5513701">40</span><span class="op" id="5513703">)</span><span class="op" id="5513704">,</span>&nbsp;<span class="builtintype" id="5513706">byte</span><span class="op" id="5513710">(</span><span class="ident" id="5513711">v</span><span class="op" id="5513712">&gt;&gt;</span><span class="num" id="5513714">32</span><span class="op" id="5513716">)</span><span class="op" id="5513717">,</span>&nbsp;<span class="builtintype" id="5513719">byte</span><span class="op" id="5513723">(</span><span class="ident" id="5513724">v</span><span class="op" id="5513725">&gt;&gt;</span><span class="num" id="5513727">24</span><span class="op" id="5513729">)</span><span class="op" id="5513730">,</span>&nbsp;<span class="builtintype" id="5513732">byte</span><span class="op" id="5513736">(</span><span class="ident" id="5513737">v</span><span class="op" id="5513738">&gt;&gt;</span><span class="num" id="5513740">16</span><span class="op" id="5513742">)</span><span class="op" id="5513743">,</span>&nbsp;<span class="builtintype" id="5513745">byte</span><span class="op" id="5513749">(</span><span class="ident" id="5513750">v</span><span class="op" id="5513751">&gt;&gt;</span><span class="num" id="5513753">8</span><span class="op" id="5513754">)</span><span class="op" id="5513755">,</span>&nbsp;<span class="builtintype" id="5513757">byte</span><span class="op" id="5513761">(</span><span class="ident" id="5513762">v</span><span class="op" id="5513763">)</span><span class="op" id="5513764">)</span><br>
<span class="lineno"></span><span class="op" id="5513766">}</span>
</div>
</body>
</html>
