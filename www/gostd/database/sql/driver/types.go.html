<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5849151">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5849206">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5849260">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5849311">package</span>&nbsp;<span class="ident" id="5849319">driver</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5849327">import</span>&nbsp;<span class="op" id="5849334">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5849337">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5849344">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5849355">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5849366">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5849373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5849376">//&nbsp;ValueConverter&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;ConvertValue&nbsp;method.</span><br>
<span class="lineno">15</span><span class="comment" id="5849446">//</span><br>
<span class="lineno"></span><span class="comment" id="5849449">//&nbsp;Various&nbsp;implementations&nbsp;of&nbsp;ValueConverter&nbsp;are&nbsp;provided&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5849514">//&nbsp;driver&nbsp;package&nbsp;to&nbsp;provide&nbsp;consistent&nbsp;implementations&nbsp;of&nbsp;conversions</span><br>
<span class="lineno"></span><span class="comment" id="5849585">//&nbsp;between&nbsp;drivers.&nbsp;&nbsp;The&nbsp;ValueConverters&nbsp;have&nbsp;several&nbsp;uses:</span><br>
<span class="lineno"></span><span class="comment" id="5849645">//</span><br>
<span class="lineno">20</span><span class="comment" id="5849648">//&nbsp;&nbsp;*&nbsp;converting&nbsp;from&nbsp;the&nbsp;Value&nbsp;types&nbsp;as&nbsp;provided&nbsp;by&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5849717">//&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;database&nbsp;table&#39;s&nbsp;specific&nbsp;column&nbsp;type&nbsp;and&nbsp;making&nbsp;sure&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5849787">//&nbsp;&nbsp;&nbsp;&nbsp;fits,&nbsp;such&nbsp;as&nbsp;making&nbsp;sure&nbsp;a&nbsp;particular&nbsp;int64&nbsp;fits&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5849848">//&nbsp;&nbsp;&nbsp;&nbsp;table&#39;s&nbsp;uint16&nbsp;column.</span><br>
<span class="lineno"></span><span class="comment" id="5849877">//</span><br>
<span class="lineno">25</span><span class="comment" id="5849880">//&nbsp;&nbsp;*&nbsp;converting&nbsp;a&nbsp;value&nbsp;as&nbsp;given&nbsp;from&nbsp;the&nbsp;database&nbsp;into&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5849948">//&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;Value&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="5849974">//</span><br>
<span class="lineno"></span><span class="comment" id="5849977">//&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;sql&nbsp;package,&nbsp;for&nbsp;converting&nbsp;from&nbsp;a&nbsp;driver&#39;s&nbsp;Value&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5850045">//&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;user&#39;s&nbsp;type&nbsp;in&nbsp;a&nbsp;scan.</span><br>
<span class="lineno">30</span><span class="keyword" id="5850079">type</span>&nbsp;<span class="ident" id="5850084">ValueConverter</span>&nbsp;<span class="keyword" id="5850099">interface</span>&nbsp;<span class="op" id="5850109">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5850112">//&nbsp;ConvertValue&nbsp;converts&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850165">ConvertValue</span><span class="op" id="5850177">(</span><span class="ident" id="5850178">v</span>&nbsp;<span class="keyword" id="5850180">interface</span><span class="op" id="5850189">{</span><span class="op" id="5850190">}</span><span class="op" id="5850191">)</span>&nbsp;<span class="op" id="5850193">(</span><span class="ident" id="5850194">Value</span><span class="op" id="5850199">,</span>&nbsp;<span class="builtintype" id="5850201">error</span><span class="op" id="5850206">)</span><br>
<span class="lineno"></span><span class="op" id="5850208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5850211">//&nbsp;Valuer&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;Value&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5850266">//</span><br>
<span class="lineno"></span><span class="comment" id="5850269">//&nbsp;Types&nbsp;implementing&nbsp;Valuer&nbsp;interface&nbsp;are&nbsp;able&nbsp;to&nbsp;convert</span><br>
<span class="lineno"></span><span class="comment" id="5850328">//&nbsp;themselves&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="5850361">type</span>&nbsp;<span class="ident" id="5850366">Valuer</span>&nbsp;<span class="keyword" id="5850373">interface</span>&nbsp;<span class="op" id="5850383">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5850386">//&nbsp;Value&nbsp;returns&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5850420">Value</span><span class="op" id="5850425">(</span><span class="op" id="5850426">)</span>&nbsp;<span class="op" id="5850428">(</span><span class="ident" id="5850429">Value</span><span class="op" id="5850434">,</span>&nbsp;<span class="builtintype" id="5850436">error</span><span class="op" id="5850441">)</span><br>
<span class="lineno"></span><span class="op" id="5850443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850446">//&nbsp;Bool&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;bools.</span><br>
<span class="lineno">45</span><span class="comment" id="5850511">//</span><br>
<span class="lineno"></span><span class="comment" id="5850514">//&nbsp;The&nbsp;conversion&nbsp;rules&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5850543">//&nbsp;&nbsp;-&nbsp;booleans&nbsp;are&nbsp;returned&nbsp;unchanged</span><br>
<span class="lineno"></span><span class="comment" id="5850581">//&nbsp;&nbsp;-&nbsp;for&nbsp;integer&nbsp;types,</span><br>
<span class="lineno"></span><span class="comment" id="5850606">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;is&nbsp;true</span><br>
<span class="lineno">50</span><span class="comment" id="5850625">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;is&nbsp;false,</span><br>
<span class="lineno"></span><span class="comment" id="5850646">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;integers&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5850683">//&nbsp;&nbsp;-&nbsp;for&nbsp;strings&nbsp;and&nbsp;[]byte,&nbsp;same&nbsp;rules&nbsp;as&nbsp;strconv.ParseBool</span><br>
<span class="lineno"></span><span class="comment" id="5850745">//&nbsp;&nbsp;-&nbsp;all&nbsp;other&nbsp;types&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="5850780">var</span>&nbsp;<span class="ident" id="5850784">Bool</span>&nbsp;<span class="ident" id="5850789">boolType</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5850799">type</span>&nbsp;<span class="ident" id="5850804">boolType</span>&nbsp;<span class="keyword" id="5850813">struct</span><span class="op" id="5850819">{</span><span class="op" id="5850820">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5850823">var</span>&nbsp;<span class="ident" id="5850827">_</span>&nbsp;<span class="ident" id="5850829">ValueConverter</span>&nbsp;<span class="op" id="5850844">=</span>&nbsp;<span class="ident" id="5850846">boolType</span><span class="op" id="5850854">{</span><span class="op" id="5850855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5850858">func</span>&nbsp;<span class="op" id="5850863">(</span><span class="ident" id="5850864">boolType</span><span class="op" id="5850872">)</span>&nbsp;<span class="ident" id="5850874">String</span><span class="op" id="5850880">(</span><span class="op" id="5850881">)</span>&nbsp;<span class="builtintype" id="5850883">string</span>&nbsp;<span class="op" id="5850890">{</span>&nbsp;<span class="keyword" id="5850892">return</span>&nbsp;<span class="string" id="5850899">&#34;Bool&#34;</span>&nbsp;<span class="op" id="5850906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5850909">func</span>&nbsp;<span class="op" id="5850914">(</span><span class="ident" id="5850915">boolType</span><span class="op" id="5850923">)</span>&nbsp;<span class="ident" id="5850925">ConvertValue</span><span class="op" id="5850937">(</span><span class="ident" id="5850938">src</span>&nbsp;<span class="keyword" id="5850942">interface</span><span class="op" id="5850951">{</span><span class="op" id="5850952">}</span><span class="op" id="5850953">)</span>&nbsp;<span class="op" id="5850955">(</span><span class="ident" id="5850956">Value</span><span class="op" id="5850961">,</span>&nbsp;<span class="builtintype" id="5850963">error</span><span class="op" id="5850968">)</span>&nbsp;<span class="op" id="5850970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850973">switch</span>&nbsp;<span class="ident" id="5850980">s</span>&nbsp;<span class="op" id="5850982">:=</span>&nbsp;<span class="ident" id="5850985">src</span><span class="op" id="5850988">.</span><span class="op" id="5850989">(</span><span class="keyword" id="5850990">type</span><span class="op" id="5850994">)</span>&nbsp;<span class="op" id="5850996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5850999">case</span>&nbsp;<span class="builtintype" id="5851004">bool</span><span class="op" id="5851008">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851012">return</span>&nbsp;<span class="ident" id="5851019">s</span><span class="op" id="5851020">,</span>&nbsp;<span class="ident" id="5851022">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851027">case</span>&nbsp;<span class="builtintype" id="5851032">string</span><span class="op" id="5851038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851042">b</span><span class="op" id="5851043">,</span>&nbsp;<span class="ident" id="5851045">err</span>&nbsp;<span class="op" id="5851049">:=</span>&nbsp;<span class="ident" id="5851052">strconv</span><span class="op" id="5851059">.</span><span class="ident" id="5851060">ParseBool</span><span class="op" id="5851069">(</span><span class="ident" id="5851070">s</span><span class="op" id="5851071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851075">if</span>&nbsp;<span class="ident" id="5851078">err</span>&nbsp;<span class="op" id="5851082">!=</span>&nbsp;<span class="ident" id="5851085">nil</span>&nbsp;<span class="op" id="5851089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851094">return</span>&nbsp;<span class="ident" id="5851101">nil</span><span class="op" id="5851104">,</span>&nbsp;<span class="ident" id="5851106">fmt</span><span class="op" id="5851109">.</span><span class="ident" id="5851110">Errorf</span><span class="op" id="5851116">(</span><span class="string" id="5851117">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5851165">,</span>&nbsp;<span class="ident" id="5851167">s</span><span class="op" id="5851168">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851176">return</span>&nbsp;<span class="ident" id="5851183">b</span><span class="op" id="5851184">,</span>&nbsp;<span class="ident" id="5851186">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851191">case</span>&nbsp;<span class="op" id="5851196">[</span><span class="op" id="5851197">]</span><span class="builtintype" id="5851198">byte</span><span class="op" id="5851202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851206">b</span><span class="op" id="5851207">,</span>&nbsp;<span class="ident" id="5851209">err</span>&nbsp;<span class="op" id="5851213">:=</span>&nbsp;<span class="ident" id="5851216">strconv</span><span class="op" id="5851223">.</span><span class="ident" id="5851224">ParseBool</span><span class="op" id="5851233">(</span><span class="builtintype" id="5851234">string</span><span class="op" id="5851240">(</span><span class="ident" id="5851241">s</span><span class="op" id="5851242">)</span><span class="op" id="5851243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851247">if</span>&nbsp;<span class="ident" id="5851250">err</span>&nbsp;<span class="op" id="5851254">!=</span>&nbsp;<span class="ident" id="5851257">nil</span>&nbsp;<span class="op" id="5851261">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851266">return</span>&nbsp;<span class="ident" id="5851273">nil</span><span class="op" id="5851276">,</span>&nbsp;<span class="ident" id="5851278">fmt</span><span class="op" id="5851281">.</span><span class="ident" id="5851282">Errorf</span><span class="op" id="5851288">(</span><span class="string" id="5851289">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5851337">,</span>&nbsp;<span class="ident" id="5851339">s</span><span class="op" id="5851340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851348">return</span>&nbsp;<span class="ident" id="5851355">b</span><span class="op" id="5851356">,</span>&nbsp;<span class="ident" id="5851358">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851363">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851367">sv</span>&nbsp;<span class="op" id="5851370">:=</span>&nbsp;<span class="ident" id="5851373">reflect</span><span class="op" id="5851380">.</span><span class="ident" id="5851381">ValueOf</span><span class="op" id="5851388">(</span><span class="ident" id="5851389">src</span><span class="op" id="5851392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851395">switch</span>&nbsp;<span class="ident" id="5851402">sv</span><span class="op" id="5851404">.</span><span class="ident" id="5851405">Kind</span><span class="op" id="5851409">(</span><span class="op" id="5851410">)</span>&nbsp;<span class="op" id="5851412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851415">case</span>&nbsp;<span class="ident" id="5851420">reflect</span><span class="op" id="5851427">.</span><span class="ident" id="5851428">Int</span><span class="op" id="5851431">,</span>&nbsp;<span class="ident" id="5851433">reflect</span><span class="op" id="5851440">.</span><span class="ident" id="5851441">Int8</span><span class="op" id="5851445">,</span>&nbsp;<span class="ident" id="5851447">reflect</span><span class="op" id="5851454">.</span><span class="ident" id="5851455">Int16</span><span class="op" id="5851460">,</span>&nbsp;<span class="ident" id="5851462">reflect</span><span class="op" id="5851469">.</span><span class="ident" id="5851470">Int32</span><span class="op" id="5851475">,</span>&nbsp;<span class="ident" id="5851477">reflect</span><span class="op" id="5851484">.</span><span class="ident" id="5851485">Int64</span><span class="op" id="5851490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851494">iv</span>&nbsp;<span class="op" id="5851497">:=</span>&nbsp;<span class="ident" id="5851500">sv</span><span class="op" id="5851502">.</span><span class="ident" id="5851503">Int</span><span class="op" id="5851506">(</span><span class="op" id="5851507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851511">if</span>&nbsp;<span class="ident" id="5851514">iv</span>&nbsp;<span class="op" id="5851517">==</span>&nbsp;<span class="num" id="5851520">1</span>&nbsp;<span class="op" id="5851522">||</span>&nbsp;<span class="ident" id="5851525">iv</span>&nbsp;<span class="op" id="5851528">==</span>&nbsp;<span class="num" id="5851531">0</span>&nbsp;<span class="op" id="5851533">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851538">return</span>&nbsp;<span class="ident" id="5851545">iv</span>&nbsp;<span class="op" id="5851548">==</span>&nbsp;<span class="num" id="5851551">1</span><span class="op" id="5851552">,</span>&nbsp;<span class="ident" id="5851554">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851560">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851564">return</span>&nbsp;<span class="ident" id="5851571">nil</span><span class="op" id="5851574">,</span>&nbsp;<span class="ident" id="5851576">fmt</span><span class="op" id="5851579">.</span><span class="ident" id="5851580">Errorf</span><span class="op" id="5851586">(</span><span class="string" id="5851587">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5851635">,</span>&nbsp;<span class="ident" id="5851637">iv</span><span class="op" id="5851639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851642">case</span>&nbsp;<span class="ident" id="5851647">reflect</span><span class="op" id="5851654">.</span><span class="ident" id="5851655">Uint</span><span class="op" id="5851659">,</span>&nbsp;<span class="ident" id="5851661">reflect</span><span class="op" id="5851668">.</span><span class="ident" id="5851669">Uint8</span><span class="op" id="5851674">,</span>&nbsp;<span class="ident" id="5851676">reflect</span><span class="op" id="5851683">.</span><span class="ident" id="5851684">Uint16</span><span class="op" id="5851690">,</span>&nbsp;<span class="ident" id="5851692">reflect</span><span class="op" id="5851699">.</span><span class="ident" id="5851700">Uint32</span><span class="op" id="5851706">,</span>&nbsp;<span class="ident" id="5851708">reflect</span><span class="op" id="5851715">.</span><span class="ident" id="5851716">Uint64</span><span class="op" id="5851722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5851726">uv</span>&nbsp;<span class="op" id="5851729">:=</span>&nbsp;<span class="ident" id="5851732">sv</span><span class="op" id="5851734">.</span><span class="ident" id="5851735">Uint</span><span class="op" id="5851739">(</span><span class="op" id="5851740">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851744">if</span>&nbsp;<span class="ident" id="5851747">uv</span>&nbsp;<span class="op" id="5851750">==</span>&nbsp;<span class="num" id="5851753">1</span>&nbsp;<span class="op" id="5851755">||</span>&nbsp;<span class="ident" id="5851758">uv</span>&nbsp;<span class="op" id="5851761">==</span>&nbsp;<span class="num" id="5851764">0</span>&nbsp;<span class="op" id="5851766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851771">return</span>&nbsp;<span class="ident" id="5851778">uv</span>&nbsp;<span class="op" id="5851781">==</span>&nbsp;<span class="num" id="5851784">1</span><span class="op" id="5851785">,</span>&nbsp;<span class="ident" id="5851787">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851797">return</span>&nbsp;<span class="ident" id="5851804">nil</span><span class="op" id="5851807">,</span>&nbsp;<span class="ident" id="5851809">fmt</span><span class="op" id="5851812">.</span><span class="ident" id="5851813">Errorf</span><span class="op" id="5851819">(</span><span class="string" id="5851820">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5851868">,</span>&nbsp;<span class="ident" id="5851870">uv</span><span class="op" id="5851872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5851875">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5851879">return</span>&nbsp;<span class="ident" id="5851886">nil</span><span class="op" id="5851889">,</span>&nbsp;<span class="ident" id="5851891">fmt</span><span class="op" id="5851894">.</span><span class="ident" id="5851895">Errorf</span><span class="op" id="5851901">(</span><span class="string" id="5851902">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%v&nbsp;(%T)&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5851955">,</span>&nbsp;<span class="ident" id="5851957">src</span><span class="op" id="5851960">,</span>&nbsp;<span class="ident" id="5851962">src</span><span class="op" id="5851965">)</span><br>
<span class="lineno"></span><span class="op" id="5851967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5851970">//&nbsp;Int32&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;int64,</span><br>
<span class="lineno">100</span><span class="comment" id="5852036">//&nbsp;respecting&nbsp;the&nbsp;limits&nbsp;of&nbsp;an&nbsp;int32&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5852080">var</span>&nbsp;<span class="ident" id="5852084">Int32</span>&nbsp;<span class="ident" id="5852090">int32Type</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5852101">type</span>&nbsp;<span class="ident" id="5852106">int32Type</span>&nbsp;<span class="keyword" id="5852116">struct</span><span class="op" id="5852122">{</span><span class="op" id="5852123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5852126">var</span>&nbsp;<span class="ident" id="5852130">_</span>&nbsp;<span class="ident" id="5852132">ValueConverter</span>&nbsp;<span class="op" id="5852147">=</span>&nbsp;<span class="ident" id="5852149">int32Type</span><span class="op" id="5852158">{</span><span class="op" id="5852159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5852162">func</span>&nbsp;<span class="op" id="5852167">(</span><span class="ident" id="5852168">int32Type</span><span class="op" id="5852177">)</span>&nbsp;<span class="ident" id="5852179">ConvertValue</span><span class="op" id="5852191">(</span><span class="ident" id="5852192">v</span>&nbsp;<span class="keyword" id="5852194">interface</span><span class="op" id="5852203">{</span><span class="op" id="5852204">}</span><span class="op" id="5852205">)</span>&nbsp;<span class="op" id="5852207">(</span><span class="ident" id="5852208">Value</span><span class="op" id="5852213">,</span>&nbsp;<span class="builtintype" id="5852215">error</span><span class="op" id="5852220">)</span>&nbsp;<span class="op" id="5852222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852225">rv</span>&nbsp;<span class="op" id="5852228">:=</span>&nbsp;<span class="ident" id="5852231">reflect</span><span class="op" id="5852238">.</span><span class="ident" id="5852239">ValueOf</span><span class="op" id="5852246">(</span><span class="ident" id="5852247">v</span><span class="op" id="5852248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852251">switch</span>&nbsp;<span class="ident" id="5852258">rv</span><span class="op" id="5852260">.</span><span class="ident" id="5852261">Kind</span><span class="op" id="5852265">(</span><span class="op" id="5852266">)</span>&nbsp;<span class="op" id="5852268">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852271">case</span>&nbsp;<span class="ident" id="5852276">reflect</span><span class="op" id="5852283">.</span><span class="ident" id="5852284">Int</span><span class="op" id="5852287">,</span>&nbsp;<span class="ident" id="5852289">reflect</span><span class="op" id="5852296">.</span><span class="ident" id="5852297">Int8</span><span class="op" id="5852301">,</span>&nbsp;<span class="ident" id="5852303">reflect</span><span class="op" id="5852310">.</span><span class="ident" id="5852311">Int16</span><span class="op" id="5852316">,</span>&nbsp;<span class="ident" id="5852318">reflect</span><span class="op" id="5852325">.</span><span class="ident" id="5852326">Int32</span><span class="op" id="5852331">,</span>&nbsp;<span class="ident" id="5852333">reflect</span><span class="op" id="5852340">.</span><span class="ident" id="5852341">Int64</span><span class="op" id="5852346">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852350">i64</span>&nbsp;<span class="op" id="5852354">:=</span>&nbsp;<span class="ident" id="5852357">rv</span><span class="op" id="5852359">.</span><span class="ident" id="5852360">Int</span><span class="op" id="5852363">(</span><span class="op" id="5852364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852368">if</span>&nbsp;<span class="ident" id="5852371">i64</span>&nbsp;<span class="op" id="5852375">&gt;</span>&nbsp;<span class="op" id="5852377">(</span><span class="num" id="5852378">1</span><span class="op" id="5852379">&lt;&lt;</span><span class="num" id="5852381">31</span><span class="op" id="5852383">)</span><span class="op" id="5852384">-</span><span class="num" id="5852385">1</span>&nbsp;<span class="op" id="5852387">||</span>&nbsp;<span class="ident" id="5852390">i64</span>&nbsp;<span class="op" id="5852394">&lt;</span>&nbsp;<span class="op" id="5852396">-</span><span class="op" id="5852397">(</span><span class="num" id="5852398">1</span><span class="op" id="5852399">&lt;&lt;</span><span class="num" id="5852401">31</span><span class="op" id="5852403">)</span>&nbsp;<span class="op" id="5852405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852410">return</span>&nbsp;<span class="ident" id="5852417">nil</span><span class="op" id="5852420">,</span>&nbsp;<span class="ident" id="5852422">fmt</span><span class="op" id="5852425">.</span><span class="ident" id="5852426">Errorf</span><span class="op" id="5852432">(</span><span class="string" id="5852433">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5852471">,</span>&nbsp;<span class="ident" id="5852473">v</span><span class="op" id="5852474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852478">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852482">return</span>&nbsp;<span class="ident" id="5852489">i64</span><span class="op" id="5852492">,</span>&nbsp;<span class="ident" id="5852494">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852499">case</span>&nbsp;<span class="ident" id="5852504">reflect</span><span class="op" id="5852511">.</span><span class="ident" id="5852512">Uint</span><span class="op" id="5852516">,</span>&nbsp;<span class="ident" id="5852518">reflect</span><span class="op" id="5852525">.</span><span class="ident" id="5852526">Uint8</span><span class="op" id="5852531">,</span>&nbsp;<span class="ident" id="5852533">reflect</span><span class="op" id="5852540">.</span><span class="ident" id="5852541">Uint16</span><span class="op" id="5852547">,</span>&nbsp;<span class="ident" id="5852549">reflect</span><span class="op" id="5852556">.</span><span class="ident" id="5852557">Uint32</span><span class="op" id="5852563">,</span>&nbsp;<span class="ident" id="5852565">reflect</span><span class="op" id="5852572">.</span><span class="ident" id="5852573">Uint64</span><span class="op" id="5852579">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852583">u64</span>&nbsp;<span class="op" id="5852587">:=</span>&nbsp;<span class="ident" id="5852590">rv</span><span class="op" id="5852592">.</span><span class="ident" id="5852593">Uint</span><span class="op" id="5852597">(</span><span class="op" id="5852598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852602">if</span>&nbsp;<span class="ident" id="5852605">u64</span>&nbsp;<span class="op" id="5852609">&gt;</span>&nbsp;<span class="op" id="5852611">(</span><span class="num" id="5852612">1</span><span class="op" id="5852613">&lt;&lt;</span><span class="num" id="5852615">31</span><span class="op" id="5852617">)</span><span class="op" id="5852618">-</span><span class="num" id="5852619">1</span>&nbsp;<span class="op" id="5852621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852626">return</span>&nbsp;<span class="ident" id="5852633">nil</span><span class="op" id="5852636">,</span>&nbsp;<span class="ident" id="5852638">fmt</span><span class="op" id="5852641">.</span><span class="ident" id="5852642">Errorf</span><span class="op" id="5852648">(</span><span class="string" id="5852649">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5852687">,</span>&nbsp;<span class="ident" id="5852689">v</span><span class="op" id="5852690">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852698">return</span>&nbsp;<span class="ident" id="5852705">int64</span><span class="op" id="5852710">(</span><span class="ident" id="5852711">u64</span><span class="op" id="5852714">)</span><span class="op" id="5852715">,</span>&nbsp;<span class="ident" id="5852717">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852722">case</span>&nbsp;<span class="ident" id="5852727">reflect</span><span class="op" id="5852734">.</span><span class="ident" id="5852735">String</span><span class="op" id="5852741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5852745">i</span><span class="op" id="5852746">,</span>&nbsp;<span class="ident" id="5852748">err</span>&nbsp;<span class="op" id="5852752">:=</span>&nbsp;<span class="ident" id="5852755">strconv</span><span class="op" id="5852762">.</span><span class="ident" id="5852763">Atoi</span><span class="op" id="5852767">(</span><span class="ident" id="5852768">rv</span><span class="op" id="5852770">.</span><span class="ident" id="5852771">String</span><span class="op" id="5852777">(</span><span class="op" id="5852778">)</span><span class="op" id="5852779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852783">if</span>&nbsp;<span class="ident" id="5852786">err</span>&nbsp;<span class="op" id="5852790">!=</span>&nbsp;<span class="ident" id="5852793">nil</span>&nbsp;<span class="op" id="5852797">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852802">return</span>&nbsp;<span class="ident" id="5852809">nil</span><span class="op" id="5852812">,</span>&nbsp;<span class="ident" id="5852814">fmt</span><span class="op" id="5852817">.</span><span class="ident" id="5852818">Errorf</span><span class="op" id="5852824">(</span><span class="string" id="5852825">&#34;sql/driver:&nbsp;value&nbsp;%q&nbsp;can&#39;t&nbsp;be&nbsp;converted&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5852875">,</span>&nbsp;<span class="ident" id="5852877">v</span><span class="op" id="5852878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852886">return</span>&nbsp;<span class="ident" id="5852893">int64</span><span class="op" id="5852898">(</span><span class="ident" id="5852899">i</span><span class="op" id="5852900">)</span><span class="op" id="5852901">,</span>&nbsp;<span class="ident" id="5852903">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5852908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5852911">return</span>&nbsp;<span class="ident" id="5852918">nil</span><span class="op" id="5852921">,</span>&nbsp;<span class="ident" id="5852923">fmt</span><span class="op" id="5852926">.</span><span class="ident" id="5852927">Errorf</span><span class="op" id="5852933">(</span><span class="string" id="5852934">&#34;sql/driver:&nbsp;unsupported&nbsp;value&nbsp;%v&nbsp;(type&nbsp;%T)&nbsp;converting&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5852998">,</span>&nbsp;<span class="ident" id="5853000">v</span><span class="op" id="5853001">,</span>&nbsp;<span class="ident" id="5853003">v</span><span class="op" id="5853004">)</span><br>
<span class="lineno">130</span><span class="op" id="5853006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5853009">//&nbsp;String&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;its&nbsp;input&nbsp;to&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5853076">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;already&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte,&nbsp;it&#39;s&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5853139">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;of&nbsp;another&nbsp;type,&nbsp;conversion&nbsp;to&nbsp;string&nbsp;is&nbsp;done</span><br>
<span class="lineno">135</span><span class="comment" id="5853204">//&nbsp;with&nbsp;fmt.Sprintf(&#34;%v&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="5853234">var</span>&nbsp;<span class="ident" id="5853238">String</span>&nbsp;<span class="ident" id="5853245">stringType</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5853257">type</span>&nbsp;<span class="ident" id="5853262">stringType</span>&nbsp;<span class="keyword" id="5853273">struct</span><span class="op" id="5853279">{</span><span class="op" id="5853280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="5853283">func</span>&nbsp;<span class="op" id="5853288">(</span><span class="ident" id="5853289">stringType</span><span class="op" id="5853299">)</span>&nbsp;<span class="ident" id="5853301">ConvertValue</span><span class="op" id="5853313">(</span><span class="ident" id="5853314">v</span>&nbsp;<span class="keyword" id="5853316">interface</span><span class="op" id="5853325">{</span><span class="op" id="5853326">}</span><span class="op" id="5853327">)</span>&nbsp;<span class="op" id="5853329">(</span><span class="ident" id="5853330">Value</span><span class="op" id="5853335">,</span>&nbsp;<span class="builtintype" id="5853337">error</span><span class="op" id="5853342">)</span>&nbsp;<span class="op" id="5853344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853347">switch</span>&nbsp;<span class="ident" id="5853354">v</span><span class="op" id="5853355">.</span><span class="op" id="5853356">(</span><span class="keyword" id="5853357">type</span><span class="op" id="5853361">)</span>&nbsp;<span class="op" id="5853363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853366">case</span>&nbsp;<span class="builtintype" id="5853371">string</span><span class="op" id="5853377">,</span>&nbsp;<span class="op" id="5853379">[</span><span class="op" id="5853380">]</span><span class="builtintype" id="5853381">byte</span><span class="op" id="5853385">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853389">return</span>&nbsp;<span class="ident" id="5853396">v</span><span class="op" id="5853397">,</span>&nbsp;<span class="ident" id="5853399">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5853404">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853407">return</span>&nbsp;<span class="ident" id="5853414">fmt</span><span class="op" id="5853417">.</span><span class="ident" id="5853418">Sprintf</span><span class="op" id="5853425">(</span><span class="string" id="5853426">&#34;%v&#34;</span><span class="op" id="5853430">,</span>&nbsp;<span class="ident" id="5853432">v</span><span class="op" id="5853433">)</span><span class="op" id="5853434">,</span>&nbsp;<span class="ident" id="5853436">nil</span><br>
<span class="lineno"></span><span class="op" id="5853440">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5853443">//&nbsp;Null&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;allowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5853508">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno">150</span><span class="keyword" id="5853570">type</span>&nbsp;<span class="ident" id="5853575">Null</span>&nbsp;<span class="keyword" id="5853580">struct</span>&nbsp;<span class="op" id="5853587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5853590">Converter</span>&nbsp;<span class="ident" id="5853600">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="5853615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5853618">func</span>&nbsp;<span class="op" id="5853623">(</span><span class="ident" id="5853624">n</span>&nbsp;<span class="ident" id="5853626">Null</span><span class="op" id="5853630">)</span>&nbsp;<span class="ident" id="5853632">ConvertValue</span><span class="op" id="5853644">(</span><span class="ident" id="5853645">v</span>&nbsp;<span class="keyword" id="5853647">interface</span><span class="op" id="5853656">{</span><span class="op" id="5853657">}</span><span class="op" id="5853658">)</span>&nbsp;<span class="op" id="5853660">(</span><span class="ident" id="5853661">Value</span><span class="op" id="5853666">,</span>&nbsp;<span class="builtintype" id="5853668">error</span><span class="op" id="5853673">)</span>&nbsp;<span class="op" id="5853675">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853678">if</span>&nbsp;<span class="ident" id="5853681">v</span>&nbsp;<span class="op" id="5853683">==</span>&nbsp;<span class="ident" id="5853686">nil</span>&nbsp;<span class="op" id="5853690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853694">return</span>&nbsp;<span class="ident" id="5853701">nil</span><span class="op" id="5853704">,</span>&nbsp;<span class="ident" id="5853706">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5853711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853714">return</span>&nbsp;<span class="ident" id="5853721">n</span><span class="op" id="5853722">.</span><span class="ident" id="5853723">Converter</span><span class="op" id="5853732">.</span><span class="ident" id="5853733">ConvertValue</span><span class="op" id="5853745">(</span><span class="ident" id="5853746">v</span><span class="op" id="5853747">)</span><br>
<span class="lineno"></span><span class="op" id="5853749">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="5853752">//&nbsp;NotNull&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;disallowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5853823">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno"></span><span class="keyword" id="5853885">type</span>&nbsp;<span class="ident" id="5853890">NotNull</span>&nbsp;<span class="keyword" id="5853898">struct</span>&nbsp;<span class="op" id="5853905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5853908">Converter</span>&nbsp;<span class="ident" id="5853918">ValueConverter</span><br>
<span class="lineno">165</span><span class="op" id="5853933">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5853936">func</span>&nbsp;<span class="op" id="5853941">(</span><span class="ident" id="5853942">n</span>&nbsp;<span class="ident" id="5853944">NotNull</span><span class="op" id="5853951">)</span>&nbsp;<span class="ident" id="5853953">ConvertValue</span><span class="op" id="5853965">(</span><span class="ident" id="5853966">v</span>&nbsp;<span class="keyword" id="5853968">interface</span><span class="op" id="5853977">{</span><span class="op" id="5853978">}</span><span class="op" id="5853979">)</span>&nbsp;<span class="op" id="5853981">(</span><span class="ident" id="5853982">Value</span><span class="op" id="5853987">,</span>&nbsp;<span class="builtintype" id="5853989">error</span><span class="op" id="5853994">)</span>&nbsp;<span class="op" id="5853996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5853999">if</span>&nbsp;<span class="ident" id="5854002">v</span>&nbsp;<span class="op" id="5854004">==</span>&nbsp;<span class="ident" id="5854007">nil</span>&nbsp;<span class="op" id="5854011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854015">return</span>&nbsp;<span class="ident" id="5854022">nil</span><span class="op" id="5854025">,</span>&nbsp;<span class="ident" id="5854027">fmt</span><span class="op" id="5854030">.</span><span class="ident" id="5854031">Errorf</span><span class="op" id="5854037">(</span><span class="string" id="5854038">&#34;nil&nbsp;value&nbsp;not&nbsp;allowed&#34;</span><span class="op" id="5854061">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5854064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854067">return</span>&nbsp;<span class="ident" id="5854074">n</span><span class="op" id="5854075">.</span><span class="ident" id="5854076">Converter</span><span class="op" id="5854085">.</span><span class="ident" id="5854086">ConvertValue</span><span class="op" id="5854098">(</span><span class="ident" id="5854099">v</span><span class="op" id="5854100">)</span><br>
<span class="lineno"></span><span class="op" id="5854102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5854105">//&nbsp;IsValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;parameter&nbsp;type.</span><br>
<span class="lineno">175</span><span class="comment" id="5854167">//&nbsp;Unlike&nbsp;IsScanValue,&nbsp;IsValue&nbsp;permits&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5854223">func</span>&nbsp;<span class="ident" id="5854228">IsValue</span><span class="op" id="5854235">(</span><span class="ident" id="5854236">v</span>&nbsp;<span class="keyword" id="5854238">interface</span><span class="op" id="5854247">{</span><span class="op" id="5854248">}</span><span class="op" id="5854249">)</span>&nbsp;<span class="builtintype" id="5854251">bool</span>&nbsp;<span class="op" id="5854256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854259">if</span>&nbsp;<span class="ident" id="5854262">IsScanValue</span><span class="op" id="5854273">(</span><span class="ident" id="5854274">v</span><span class="op" id="5854275">)</span>&nbsp;<span class="op" id="5854277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854281">return</span>&nbsp;<span class="builtintype" id="5854288">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5854294">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854297">if</span>&nbsp;<span class="ident" id="5854300">_</span><span class="op" id="5854301">,</span>&nbsp;<span class="ident" id="5854303">ok</span>&nbsp;<span class="op" id="5854306">:=</span>&nbsp;<span class="ident" id="5854309">v</span><span class="op" id="5854310">.</span><span class="op" id="5854311">(</span><span class="builtintype" id="5854312">string</span><span class="op" id="5854318">)</span><span class="op" id="5854319">;</span>&nbsp;<span class="ident" id="5854321">ok</span>&nbsp;<span class="op" id="5854324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854328">return</span>&nbsp;<span class="builtintype" id="5854335">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5854341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854344">return</span>&nbsp;<span class="builtintype" id="5854351">false</span><br>
<span class="lineno"></span><span class="op" id="5854357">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="5854360">//&nbsp;IsScanValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;scan&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5854421">//&nbsp;Unlike&nbsp;IsValue,&nbsp;IsScanValue&nbsp;does&nbsp;not&nbsp;permit&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5854485">func</span>&nbsp;<span class="ident" id="5854490">IsScanValue</span><span class="op" id="5854501">(</span><span class="ident" id="5854502">v</span>&nbsp;<span class="keyword" id="5854504">interface</span><span class="op" id="5854513">{</span><span class="op" id="5854514">}</span><span class="op" id="5854515">)</span>&nbsp;<span class="builtintype" id="5854517">bool</span>&nbsp;<span class="op" id="5854522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854525">if</span>&nbsp;<span class="ident" id="5854528">v</span>&nbsp;<span class="op" id="5854530">==</span>&nbsp;<span class="ident" id="5854533">nil</span>&nbsp;<span class="op" id="5854537">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854541">return</span>&nbsp;<span class="builtintype" id="5854548">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5854554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854557">switch</span>&nbsp;<span class="ident" id="5854564">v</span><span class="op" id="5854565">.</span><span class="op" id="5854566">(</span><span class="keyword" id="5854567">type</span><span class="op" id="5854571">)</span>&nbsp;<span class="op" id="5854573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854576">case</span>&nbsp;<span class="ident" id="5854581">int64</span><span class="op" id="5854586">,</span>&nbsp;<span class="builtintype" id="5854588">float64</span><span class="op" id="5854595">,</span>&nbsp;<span class="op" id="5854597">[</span><span class="op" id="5854598">]</span><span class="builtintype" id="5854599">byte</span><span class="op" id="5854603">,</span>&nbsp;<span class="builtintype" id="5854605">bool</span><span class="op" id="5854609">,</span>&nbsp;<span class="ident" id="5854611">time</span><span class="op" id="5854615">.</span><span class="ident" id="5854616">Time</span><span class="op" id="5854620">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854624">return</span>&nbsp;<span class="builtintype" id="5854631">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5854637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5854640">return</span>&nbsp;<span class="builtintype" id="5854647">false</span><br>
<span class="lineno"></span><span class="op" id="5854653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5854656">//&nbsp;DefaultParameterConverter&nbsp;is&nbsp;the&nbsp;default&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">200</span><span class="comment" id="5854718">//&nbsp;ValueConverter&nbsp;that&#39;s&nbsp;used&nbsp;when&nbsp;a&nbsp;Stmt&nbsp;doesn&#39;t&nbsp;implement</span><br>
<span class="lineno"></span><span class="comment" id="5854778">//&nbsp;ColumnConverter.</span><br>
<span class="lineno"></span><span class="comment" id="5854798">//</span><br>
<span class="lineno"></span><span class="comment" id="5854801">//&nbsp;DefaultParameterConverter&nbsp;returns&nbsp;the&nbsp;given&nbsp;value&nbsp;directly&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5854866">//&nbsp;IsValue(value).&nbsp;&nbsp;Otherwise&nbsp;integer&nbsp;type&nbsp;are&nbsp;converted&nbsp;to</span><br>
<span class="lineno">205</span><span class="comment" id="5854926">//&nbsp;int64,&nbsp;floats&nbsp;to&nbsp;float64,&nbsp;and&nbsp;strings&nbsp;to&nbsp;[]byte.&nbsp;&nbsp;Other&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5854995">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5855008">var</span>&nbsp;<span class="ident" id="5855012">DefaultParameterConverter</span>&nbsp;<span class="ident" id="5855038">defaultConverter</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855056">type</span>&nbsp;<span class="ident" id="5855061">defaultConverter</span>&nbsp;<span class="keyword" id="5855078">struct</span><span class="op" id="5855084">{</span><span class="op" id="5855085">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="5855088">var</span>&nbsp;<span class="ident" id="5855092">_</span>&nbsp;<span class="ident" id="5855094">ValueConverter</span>&nbsp;<span class="op" id="5855109">=</span>&nbsp;<span class="ident" id="5855111">defaultConverter</span><span class="op" id="5855127">{</span><span class="op" id="5855128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5855131">func</span>&nbsp;<span class="op" id="5855136">(</span><span class="ident" id="5855137">defaultConverter</span><span class="op" id="5855153">)</span>&nbsp;<span class="ident" id="5855155">ConvertValue</span><span class="op" id="5855167">(</span><span class="ident" id="5855168">v</span>&nbsp;<span class="keyword" id="5855170">interface</span><span class="op" id="5855179">{</span><span class="op" id="5855180">}</span><span class="op" id="5855181">)</span>&nbsp;<span class="op" id="5855183">(</span><span class="ident" id="5855184">Value</span><span class="op" id="5855189">,</span>&nbsp;<span class="builtintype" id="5855191">error</span><span class="op" id="5855196">)</span>&nbsp;<span class="op" id="5855198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855201">if</span>&nbsp;<span class="ident" id="5855204">IsValue</span><span class="op" id="5855211">(</span><span class="ident" id="5855212">v</span><span class="op" id="5855213">)</span>&nbsp;<span class="op" id="5855215">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855219">return</span>&nbsp;<span class="ident" id="5855226">v</span><span class="op" id="5855227">,</span>&nbsp;<span class="ident" id="5855229">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855238">if</span>&nbsp;<span class="ident" id="5855241">svi</span><span class="op" id="5855244">,</span>&nbsp;<span class="ident" id="5855246">ok</span>&nbsp;<span class="op" id="5855249">:=</span>&nbsp;<span class="ident" id="5855252">v</span><span class="op" id="5855253">.</span><span class="op" id="5855254">(</span><span class="ident" id="5855255">Valuer</span><span class="op" id="5855261">)</span><span class="op" id="5855262">;</span>&nbsp;<span class="ident" id="5855264">ok</span>&nbsp;<span class="op" id="5855267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855271">sv</span><span class="op" id="5855273">,</span>&nbsp;<span class="ident" id="5855275">err</span>&nbsp;<span class="op" id="5855279">:=</span>&nbsp;<span class="ident" id="5855282">svi</span><span class="op" id="5855285">.</span><span class="ident" id="5855286">Value</span><span class="op" id="5855291">(</span><span class="op" id="5855292">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855296">if</span>&nbsp;<span class="ident" id="5855299">err</span>&nbsp;<span class="op" id="5855303">!=</span>&nbsp;<span class="ident" id="5855306">nil</span>&nbsp;<span class="op" id="5855310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855315">return</span>&nbsp;<span class="ident" id="5855322">nil</span><span class="op" id="5855325">,</span>&nbsp;<span class="ident" id="5855327">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855333">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855337">if</span>&nbsp;<span class="op" id="5855340">!</span><span class="ident" id="5855341">IsValue</span><span class="op" id="5855348">(</span><span class="ident" id="5855349">sv</span><span class="op" id="5855351">)</span>&nbsp;<span class="op" id="5855353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855358">return</span>&nbsp;<span class="ident" id="5855365">nil</span><span class="op" id="5855368">,</span>&nbsp;<span class="ident" id="5855370">fmt</span><span class="op" id="5855373">.</span><span class="ident" id="5855374">Errorf</span><span class="op" id="5855380">(</span><span class="string" id="5855381">&#34;non-Value&nbsp;type&nbsp;%T&nbsp;returned&nbsp;from&nbsp;Value&#34;</span><span class="op" id="5855420">,</span>&nbsp;<span class="ident" id="5855422">sv</span><span class="op" id="5855424">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855432">return</span>&nbsp;<span class="ident" id="5855439">sv</span><span class="op" id="5855441">,</span>&nbsp;<span class="ident" id="5855443">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855452">rv</span>&nbsp;<span class="op" id="5855455">:=</span>&nbsp;<span class="ident" id="5855458">reflect</span><span class="op" id="5855465">.</span><span class="ident" id="5855466">ValueOf</span><span class="op" id="5855473">(</span><span class="ident" id="5855474">v</span><span class="op" id="5855475">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855478">switch</span>&nbsp;<span class="ident" id="5855485">rv</span><span class="op" id="5855487">.</span><span class="ident" id="5855488">Kind</span><span class="op" id="5855492">(</span><span class="op" id="5855493">)</span>&nbsp;<span class="op" id="5855495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855498">case</span>&nbsp;<span class="ident" id="5855503">reflect</span><span class="op" id="5855510">.</span><span class="ident" id="5855511">Ptr</span><span class="op" id="5855514">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5855518">//&nbsp;indirect&nbsp;pointers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855541">if</span>&nbsp;<span class="ident" id="5855544">rv</span><span class="op" id="5855546">.</span><span class="ident" id="5855547">IsNil</span><span class="op" id="5855552">(</span><span class="op" id="5855553">)</span>&nbsp;<span class="op" id="5855555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855560">return</span>&nbsp;<span class="ident" id="5855567">nil</span><span class="op" id="5855570">,</span>&nbsp;<span class="ident" id="5855572">nil</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855578">}</span>&nbsp;<span class="keyword" id="5855580">else</span>&nbsp;<span class="op" id="5855585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855590">return</span>&nbsp;<span class="ident" id="5855597">defaultConverter</span><span class="op" id="5855613">{</span><span class="op" id="5855614">}</span><span class="op" id="5855615">.</span><span class="ident" id="5855616">ConvertValue</span><span class="op" id="5855628">(</span><span class="ident" id="5855629">rv</span><span class="op" id="5855631">.</span><span class="ident" id="5855632">Elem</span><span class="op" id="5855636">(</span><span class="op" id="5855637">)</span><span class="op" id="5855638">.</span><span class="ident" id="5855639">Interface</span><span class="op" id="5855648">(</span><span class="op" id="5855649">)</span><span class="op" id="5855650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855657">case</span>&nbsp;<span class="ident" id="5855662">reflect</span><span class="op" id="5855669">.</span><span class="ident" id="5855670">Int</span><span class="op" id="5855673">,</span>&nbsp;<span class="ident" id="5855675">reflect</span><span class="op" id="5855682">.</span><span class="ident" id="5855683">Int8</span><span class="op" id="5855687">,</span>&nbsp;<span class="ident" id="5855689">reflect</span><span class="op" id="5855696">.</span><span class="ident" id="5855697">Int16</span><span class="op" id="5855702">,</span>&nbsp;<span class="ident" id="5855704">reflect</span><span class="op" id="5855711">.</span><span class="ident" id="5855712">Int32</span><span class="op" id="5855717">,</span>&nbsp;<span class="ident" id="5855719">reflect</span><span class="op" id="5855726">.</span><span class="ident" id="5855727">Int64</span><span class="op" id="5855732">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855736">return</span>&nbsp;<span class="ident" id="5855743">rv</span><span class="op" id="5855745">.</span><span class="ident" id="5855746">Int</span><span class="op" id="5855749">(</span><span class="op" id="5855750">)</span><span class="op" id="5855751">,</span>&nbsp;<span class="ident" id="5855753">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855758">case</span>&nbsp;<span class="ident" id="5855763">reflect</span><span class="op" id="5855770">.</span><span class="ident" id="5855771">Uint</span><span class="op" id="5855775">,</span>&nbsp;<span class="ident" id="5855777">reflect</span><span class="op" id="5855784">.</span><span class="ident" id="5855785">Uint8</span><span class="op" id="5855790">,</span>&nbsp;<span class="ident" id="5855792">reflect</span><span class="op" id="5855799">.</span><span class="ident" id="5855800">Uint16</span><span class="op" id="5855806">,</span>&nbsp;<span class="ident" id="5855808">reflect</span><span class="op" id="5855815">.</span><span class="ident" id="5855816">Uint32</span><span class="op" id="5855822">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855826">return</span>&nbsp;<span class="ident" id="5855833">int64</span><span class="op" id="5855838">(</span><span class="ident" id="5855839">rv</span><span class="op" id="5855841">.</span><span class="ident" id="5855842">Uint</span><span class="op" id="5855846">(</span><span class="op" id="5855847">)</span><span class="op" id="5855848">)</span><span class="op" id="5855849">,</span>&nbsp;<span class="ident" id="5855851">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855856">case</span>&nbsp;<span class="ident" id="5855861">reflect</span><span class="op" id="5855868">.</span><span class="ident" id="5855869">Uint64</span><span class="op" id="5855875">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5855879">u64</span>&nbsp;<span class="op" id="5855883">:=</span>&nbsp;<span class="ident" id="5855886">rv</span><span class="op" id="5855888">.</span><span class="ident" id="5855889">Uint</span><span class="op" id="5855893">(</span><span class="op" id="5855894">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855898">if</span>&nbsp;<span class="ident" id="5855901">u64</span>&nbsp;<span class="op" id="5855905">&gt;=</span>&nbsp;<span class="num" id="5855908">1</span><span class="op" id="5855909">&lt;&lt;</span><span class="num" id="5855911">63</span>&nbsp;<span class="op" id="5855914">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5855919">return</span>&nbsp;<span class="ident" id="5855926">nil</span><span class="op" id="5855929">,</span>&nbsp;<span class="ident" id="5855931">fmt</span><span class="op" id="5855934">.</span><span class="ident" id="5855935">Errorf</span><span class="op" id="5855941">(</span><span class="string" id="5855942">&#34;uint64&nbsp;values&nbsp;with&nbsp;high&nbsp;bit&nbsp;set&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5855993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5855997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856001">return</span>&nbsp;<span class="ident" id="5856008">int64</span><span class="op" id="5856013">(</span><span class="ident" id="5856014">u64</span><span class="op" id="5856017">)</span><span class="op" id="5856018">,</span>&nbsp;<span class="ident" id="5856020">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856025">case</span>&nbsp;<span class="ident" id="5856030">reflect</span><span class="op" id="5856037">.</span><span class="ident" id="5856038">Float32</span><span class="op" id="5856045">,</span>&nbsp;<span class="ident" id="5856047">reflect</span><span class="op" id="5856054">.</span><span class="ident" id="5856055">Float64</span><span class="op" id="5856062">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856066">return</span>&nbsp;<span class="ident" id="5856073">rv</span><span class="op" id="5856075">.</span><span class="ident" id="5856076">Float</span><span class="op" id="5856081">(</span><span class="op" id="5856082">)</span><span class="op" id="5856083">,</span>&nbsp;<span class="ident" id="5856085">nil</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5856090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5856093">return</span>&nbsp;<span class="ident" id="5856100">nil</span><span class="op" id="5856103">,</span>&nbsp;<span class="ident" id="5856105">fmt</span><span class="op" id="5856108">.</span><span class="ident" id="5856109">Errorf</span><span class="op" id="5856115">(</span><span class="string" id="5856116">&#34;unsupported&nbsp;type&nbsp;%T,&nbsp;a&nbsp;%s&#34;</span><span class="op" id="5856143">,</span>&nbsp;<span class="ident" id="5856145">v</span><span class="op" id="5856146">,</span>&nbsp;<span class="ident" id="5856148">rv</span><span class="op" id="5856150">.</span><span class="ident" id="5856151">Kind</span><span class="op" id="5856155">(</span><span class="op" id="5856156">)</span><span class="op" id="5856157">)</span><br>
<span class="lineno"></span><span class="op" id="5856159">}</span>
</div>
</body>
</html>
