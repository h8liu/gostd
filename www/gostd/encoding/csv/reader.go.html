<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5599007">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5599062">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5599116">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5599167">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="5599235">//</span><br>
<span class="lineno"></span><span class="comment" id="5599238">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="5599316">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="5599391">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="5599441">//</span><br>
<span class="lineno"></span><span class="comment" id="5599444">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="5599468">//</span><br>
<span class="lineno"></span><span class="comment" id="5599471">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5599517">//</span><br>
<span class="lineno">15</span><span class="comment" id="5599520">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="5599588">//</span><br>
<span class="lineno"></span><span class="comment" id="5599591">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="5599670">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="5599735">//</span><br>
<span class="lineno">20</span><span class="comment" id="5599738">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="5599807">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5599877">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="5599887">//</span><br>
<span class="lineno"></span><span class="comment" id="5599890">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="5599905">//</span><br>
<span class="lineno"></span><span class="comment" id="5599908">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5599940">//</span><br>
<span class="lineno"></span><span class="comment" id="5599943">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="5599968">//</span><br>
<span class="lineno">30</span><span class="comment" id="5599971">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="5600008">//</span><br>
<span class="lineno"></span><span class="comment" id="5600011">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="5600081">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="5600124">//</span><br>
<span class="lineno">35</span><span class="comment" id="5600127">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="5600174">//</span><br>
<span class="lineno"></span><span class="comment" id="5600177">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5600191">//</span><br>
<span class="lineno"></span><span class="comment" id="5600194">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="5600240">//</span><br>
<span class="lineno"></span><span class="comment" id="5600243">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="5600300">//</span><br>
<span class="lineno"></span><span class="comment" id="5600303">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5600318">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="5600341">//</span><br>
<span class="lineno"></span><span class="comment" id="5600344">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5600358">//</span><br>
<span class="lineno"></span><span class="comment" id="5600361">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="5600377">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="5600402">package</span>&nbsp;<span class="ident" id="5600410">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5600415">import</span>&nbsp;<span class="op" id="5600422">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600425">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600434">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600443">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600453">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600460">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5600466">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="5600476">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="5600479">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="5600527">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="5600575">type</span>&nbsp;<span class="ident" id="5600580">ParseError</span>&nbsp;<span class="keyword" id="5600591">struct</span>&nbsp;<span class="op" id="5600598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600601">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5600608">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5600614">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600648">Column</span>&nbsp;<span class="builtintype" id="5600655">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="5600661">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600710">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5600717">error</span>&nbsp;<span class="comment" id="5600723">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="5600743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5600746">func</span>&nbsp;<span class="op" id="5600751">(</span><span class="ident" id="5600752">e</span>&nbsp;<span class="op" id="5600754">*</span><span class="ident" id="5600755">ParseError</span><span class="op" id="5600765">)</span>&nbsp;<span class="ident" id="5600767">Error</span><span class="op" id="5600772">(</span><span class="op" id="5600773">)</span>&nbsp;<span class="builtintype" id="5600775">string</span>&nbsp;<span class="op" id="5600782">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5600785">return</span>&nbsp;<span class="ident" id="5600792">fmt</span><span class="op" id="5600795">.</span><span class="ident" id="5600796">Sprintf</span><span class="op" id="5600803">(</span><span class="string" id="5600804">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="5600828">,</span>&nbsp;<span class="ident" id="5600830">e</span><span class="op" id="5600831">.</span><span class="ident" id="5600832">Line</span><span class="op" id="5600836">,</span>&nbsp;<span class="ident" id="5600838">e</span><span class="op" id="5600839">.</span><span class="ident" id="5600840">Column</span><span class="op" id="5600846">,</span>&nbsp;<span class="ident" id="5600848">e</span><span class="op" id="5600849">.</span><span class="ident" id="5600850">Err</span><span class="op" id="5600853">)</span><br>
<span class="lineno"></span><span class="op" id="5600855">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5600858">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="5600923">var</span>&nbsp;<span class="op" id="5600927">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5600930">ErrTrailingComma</span>&nbsp;<span class="op" id="5600947">=</span>&nbsp;<span class="ident" id="5600949">errors</span><span class="op" id="5600955">.</span><span class="ident" id="5600956">New</span><span class="op" id="5600959">(</span><span class="string" id="5600960">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="5600992">)</span>&nbsp;<span class="comment" id="5600994">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601013">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5601030">=</span>&nbsp;<span class="ident" id="5601032">errors</span><span class="op" id="5601038">.</span><span class="ident" id="5601039">New</span><span class="op" id="5601042">(</span><span class="string" id="5601043">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="5601072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601075">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5601092">=</span>&nbsp;<span class="ident" id="5601094">errors</span><span class="op" id="5601100">.</span><span class="ident" id="5601101">New</span><span class="op" id="5601104">(</span><span class="string" id="5601105">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="5601129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5601132">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5601149">=</span>&nbsp;<span class="ident" id="5601151">errors</span><span class="op" id="5601157">.</span><span class="ident" id="5601158">New</span><span class="op" id="5601161">(</span><span class="string" id="5601162">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="5601194">)</span><br>
<span class="lineno"></span><span class="op" id="5601196">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="5601199">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="5601250">//</span><br>
<span class="lineno"></span><span class="comment" id="5601253">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="5601329">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="5601403">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="5601437">//</span><br>
<span class="lineno"></span><span class="comment" id="5601440">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="5601494">//</span><br>
<span class="lineno"></span><span class="comment" id="5601497">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="5601570">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="5601604">//</span><br>
<span class="lineno"></span><span class="comment" id="5601607">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5601671">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5601749">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="5601822">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5601897">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5601955">//</span><br>
<span class="lineno"></span><span class="comment" id="5601958">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5602030">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="5602081">//</span><br>
<span class="lineno"></span><span class="comment" id="5602084">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="5602159">type</span>&nbsp;<span class="ident" id="5602164">Reader</span>&nbsp;<span class="keyword" id="5602171">struct</span>&nbsp;<span class="op" id="5602178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602181">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602198">rune</span>&nbsp;<span class="comment" id="5602203">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602249">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602266">rune</span>&nbsp;<span class="comment" id="5602271">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602311">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="5602328">int</span>&nbsp;&nbsp;<span class="comment" id="5602333">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602374">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602391">bool</span>&nbsp;<span class="comment" id="5602396">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602418">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602435">bool</span>&nbsp;<span class="comment" id="5602440">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602486">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="5602503">bool</span>&nbsp;<span class="comment" id="5602508">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602531">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602548">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602553">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5602570">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602575">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5602592">*</span><span class="ident" id="5602593">bufio</span><span class="op" id="5602598">.</span><span class="ident" id="5602599">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602607">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5602624">bytes</span><span class="op" id="5602629">.</span><span class="ident" id="5602630">Buffer</span><br>
<span class="lineno"></span><span class="op" id="5602637">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="5602640">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="5602693">func</span>&nbsp;<span class="ident" id="5602698">NewReader</span><span class="op" id="5602707">(</span><span class="ident" id="5602708">r</span>&nbsp;<span class="ident" id="5602710">io</span><span class="op" id="5602712">.</span><span class="ident" id="5602713">Reader</span><span class="op" id="5602719">)</span>&nbsp;<span class="op" id="5602721">*</span><span class="ident" id="5602722">Reader</span>&nbsp;<span class="op" id="5602729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602732">return</span>&nbsp;<span class="op" id="5602739">&amp;</span><span class="ident" id="5602740">Reader</span><span class="op" id="5602746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602750">Comma</span><span class="op" id="5602755">:</span>&nbsp;<span class="string" id="5602757">&#39;,&#39;</span><span class="op" id="5602760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602764">r</span><span class="op" id="5602765">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5602771">bufio</span><span class="op" id="5602776">.</span><span class="ident" id="5602777">NewReader</span><span class="op" id="5602786">(</span><span class="ident" id="5602787">r</span><span class="op" id="5602788">)</span><span class="op" id="5602789">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602792">}</span><br>
<span class="lineno"></span><span class="op" id="5602794">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5602797">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="5602845">func</span>&nbsp;<span class="op" id="5602850">(</span><span class="ident" id="5602851">r</span>&nbsp;<span class="op" id="5602853">*</span><span class="ident" id="5602854">Reader</span><span class="op" id="5602860">)</span>&nbsp;<span class="builtintype" id="5602862">error</span><span class="op" id="5602867">(</span><span class="ident" id="5602868">err</span>&nbsp;<span class="builtintype" id="5602872">error</span><span class="op" id="5602877">)</span>&nbsp;<span class="builtintype" id="5602879">error</span>&nbsp;<span class="op" id="5602885">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5602888">return</span>&nbsp;<span class="op" id="5602895">&amp;</span><span class="ident" id="5602896">ParseError</span><span class="op" id="5602906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602910">Line</span><span class="op" id="5602914">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5602918">r</span><span class="op" id="5602919">.</span><span class="ident" id="5602920">line</span><span class="op" id="5602924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602928">Column</span><span class="op" id="5602934">:</span>&nbsp;<span class="ident" id="5602936">r</span><span class="op" id="5602937">.</span><span class="ident" id="5602938">column</span><span class="op" id="5602944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5602948">Err</span><span class="op" id="5602951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5602956">err</span><span class="op" id="5602959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5602962">}</span><br>
<span class="lineno">130</span><span class="op" id="5602964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5602967">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="5603044">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="5603078">func</span>&nbsp;<span class="op" id="5603083">(</span><span class="ident" id="5603084">r</span>&nbsp;<span class="op" id="5603086">*</span><span class="ident" id="5603087">Reader</span><span class="op" id="5603093">)</span>&nbsp;<span class="ident" id="5603095">Read</span><span class="op" id="5603099">(</span><span class="op" id="5603100">)</span>&nbsp;<span class="op" id="5603102">(</span><span class="ident" id="5603103">record</span>&nbsp;<span class="op" id="5603110">[</span><span class="op" id="5603111">]</span><span class="builtintype" id="5603112">string</span><span class="op" id="5603118">,</span>&nbsp;<span class="ident" id="5603120">err</span>&nbsp;<span class="builtintype" id="5603124">error</span><span class="op" id="5603129">)</span>&nbsp;<span class="op" id="5603131">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603134">for</span>&nbsp;<span class="op" id="5603138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603142">record</span><span class="op" id="5603148">,</span>&nbsp;<span class="ident" id="5603150">err</span>&nbsp;<span class="op" id="5603154">=</span>&nbsp;<span class="ident" id="5603156">r</span><span class="op" id="5603157">.</span><span class="ident" id="5603158">parseRecord</span><span class="op" id="5603169">(</span><span class="op" id="5603170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603174">if</span>&nbsp;<span class="ident" id="5603177">record</span>&nbsp;<span class="op" id="5603184">!=</span>&nbsp;<span class="ident" id="5603187">nil</span>&nbsp;<span class="op" id="5603191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603196">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603204">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603208">if</span>&nbsp;<span class="ident" id="5603211">err</span>&nbsp;<span class="op" id="5603215">!=</span>&nbsp;<span class="ident" id="5603218">nil</span>&nbsp;<span class="op" id="5603222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603227">return</span>&nbsp;<span class="ident" id="5603234">nil</span><span class="op" id="5603237">,</span>&nbsp;<span class="ident" id="5603239">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603248">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603252">if</span>&nbsp;<span class="ident" id="5603255">r</span><span class="op" id="5603256">.</span><span class="ident" id="5603257">FieldsPerRecord</span>&nbsp;<span class="op" id="5603273">&gt;</span>&nbsp;<span class="num" id="5603275">0</span>&nbsp;<span class="op" id="5603277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603281">if</span>&nbsp;<span class="builtinfunc" id="5603284">len</span><span class="op" id="5603287">(</span><span class="ident" id="5603288">record</span><span class="op" id="5603294">)</span>&nbsp;<span class="op" id="5603296">!=</span>&nbsp;<span class="ident" id="5603299">r</span><span class="op" id="5603300">.</span><span class="ident" id="5603301">FieldsPerRecord</span>&nbsp;<span class="op" id="5603317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603322">r</span><span class="op" id="5603323">.</span><span class="ident" id="5603324">column</span>&nbsp;<span class="op" id="5603331">=</span>&nbsp;<span class="num" id="5603333">0</span>&nbsp;<span class="comment" id="5603335">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603367">return</span>&nbsp;<span class="ident" id="5603374">record</span><span class="op" id="5603380">,</span>&nbsp;<span class="ident" id="5603382">r</span><span class="op" id="5603383">.</span><span class="builtintype" id="5603384">error</span><span class="op" id="5603389">(</span><span class="ident" id="5603390">ErrFieldCount</span><span class="op" id="5603403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603407">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603410">}</span>&nbsp;<span class="keyword" id="5603412">else</span>&nbsp;<span class="keyword" id="5603417">if</span>&nbsp;<span class="ident" id="5603420">r</span><span class="op" id="5603421">.</span><span class="ident" id="5603422">FieldsPerRecord</span>&nbsp;<span class="op" id="5603438">==</span>&nbsp;<span class="num" id="5603441">0</span>&nbsp;<span class="op" id="5603443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603447">r</span><span class="op" id="5603448">.</span><span class="ident" id="5603449">FieldsPerRecord</span>&nbsp;<span class="op" id="5603465">=</span>&nbsp;<span class="builtinfunc" id="5603467">len</span><span class="op" id="5603470">(</span><span class="ident" id="5603471">record</span><span class="op" id="5603477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603483">return</span>&nbsp;<span class="ident" id="5603490">record</span><span class="op" id="5603496">,</span>&nbsp;<span class="ident" id="5603498">nil</span><br>
<span class="lineno"></span><span class="op" id="5603502">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="5603505">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="5603556">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="5603593">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5603669">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="5603747">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="5603760">func</span>&nbsp;<span class="op" id="5603765">(</span><span class="ident" id="5603766">r</span>&nbsp;<span class="op" id="5603768">*</span><span class="ident" id="5603769">Reader</span><span class="op" id="5603775">)</span>&nbsp;<span class="ident" id="5603777">ReadAll</span><span class="op" id="5603784">(</span><span class="op" id="5603785">)</span>&nbsp;<span class="op" id="5603787">(</span><span class="ident" id="5603788">records</span>&nbsp;<span class="op" id="5603796">[</span><span class="op" id="5603797">]</span><span class="op" id="5603798">[</span><span class="op" id="5603799">]</span><span class="builtintype" id="5603800">string</span><span class="op" id="5603806">,</span>&nbsp;<span class="ident" id="5603808">err</span>&nbsp;<span class="builtintype" id="5603812">error</span><span class="op" id="5603817">)</span>&nbsp;<span class="op" id="5603819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603822">for</span>&nbsp;<span class="op" id="5603826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603830">record</span><span class="op" id="5603836">,</span>&nbsp;<span class="ident" id="5603838">err</span>&nbsp;<span class="op" id="5603842">:=</span>&nbsp;<span class="ident" id="5603845">r</span><span class="op" id="5603846">.</span><span class="ident" id="5603847">Read</span><span class="op" id="5603851">(</span><span class="op" id="5603852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603856">if</span>&nbsp;<span class="ident" id="5603859">err</span>&nbsp;<span class="op" id="5603863">==</span>&nbsp;<span class="ident" id="5603866">io</span><span class="op" id="5603868">.</span><span class="ident" id="5603869">EOF</span>&nbsp;<span class="op" id="5603873">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603878">return</span>&nbsp;<span class="ident" id="5603885">records</span><span class="op" id="5603892">,</span>&nbsp;<span class="ident" id="5603894">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603900">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603904">if</span>&nbsp;<span class="ident" id="5603907">err</span>&nbsp;<span class="op" id="5603911">!=</span>&nbsp;<span class="ident" id="5603914">nil</span>&nbsp;<span class="op" id="5603918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5603923">return</span>&nbsp;<span class="ident" id="5603930">nil</span><span class="op" id="5603933">,</span>&nbsp;<span class="ident" id="5603935">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603941">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5603945">records</span>&nbsp;<span class="op" id="5603953">=</span>&nbsp;<span class="builtinfunc" id="5603955">append</span><span class="op" id="5603961">(</span><span class="ident" id="5603962">records</span><span class="op" id="5603969">,</span>&nbsp;<span class="ident" id="5603971">record</span><span class="op" id="5603977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5603980">}</span><br>
<span class="lineno"></span><span class="op" id="5603982">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5603985">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="5604057">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="5604133">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="5604176">func</span>&nbsp;<span class="op" id="5604181">(</span><span class="ident" id="5604182">r</span>&nbsp;<span class="op" id="5604184">*</span><span class="ident" id="5604185">Reader</span><span class="op" id="5604191">)</span>&nbsp;<span class="ident" id="5604193">readRune</span><span class="op" id="5604201">(</span><span class="op" id="5604202">)</span>&nbsp;<span class="op" id="5604204">(</span><span class="builtintype" id="5604205">rune</span><span class="op" id="5604209">,</span>&nbsp;<span class="builtintype" id="5604211">error</span><span class="op" id="5604216">)</span>&nbsp;<span class="op" id="5604218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604221">r1</span><span class="op" id="5604223">,</span>&nbsp;<span class="ident" id="5604225">_</span><span class="op" id="5604226">,</span>&nbsp;<span class="ident" id="5604228">err</span>&nbsp;<span class="op" id="5604232">:=</span>&nbsp;<span class="ident" id="5604235">r</span><span class="op" id="5604236">.</span><span class="ident" id="5604237">r</span><span class="op" id="5604238">.</span><span class="ident" id="5604239">ReadRune</span><span class="op" id="5604247">(</span><span class="op" id="5604248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604252">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604315">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604377">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604443">if</span>&nbsp;<span class="ident" id="5604446">r1</span>&nbsp;<span class="op" id="5604449">==</span>&nbsp;<span class="string" id="5604452">&#39;\r&#39;</span>&nbsp;<span class="op" id="5604457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604461">r1</span><span class="op" id="5604463">,</span>&nbsp;<span class="ident" id="5604465">_</span><span class="op" id="5604466">,</span>&nbsp;<span class="ident" id="5604468">err</span>&nbsp;<span class="op" id="5604472">=</span>&nbsp;<span class="ident" id="5604474">r</span><span class="op" id="5604475">.</span><span class="ident" id="5604476">r</span><span class="op" id="5604477">.</span><span class="ident" id="5604478">ReadRune</span><span class="op" id="5604486">(</span><span class="op" id="5604487">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604491">if</span>&nbsp;<span class="ident" id="5604494">err</span>&nbsp;<span class="op" id="5604498">==</span>&nbsp;<span class="ident" id="5604501">nil</span>&nbsp;<span class="op" id="5604505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604510">if</span>&nbsp;<span class="ident" id="5604513">r1</span>&nbsp;<span class="op" id="5604516">!=</span>&nbsp;<span class="string" id="5604519">&#39;\n&#39;</span>&nbsp;<span class="op" id="5604524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604530">r</span><span class="op" id="5604531">.</span><span class="ident" id="5604532">r</span><span class="op" id="5604533">.</span><span class="ident" id="5604534">UnreadRune</span><span class="op" id="5604544">(</span><span class="op" id="5604545">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604551">r1</span>&nbsp;<span class="op" id="5604554">=</span>&nbsp;<span class="string" id="5604556">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604564">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604574">r</span><span class="op" id="5604575">.</span><span class="ident" id="5604576">column</span><span class="op" id="5604582">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604586">return</span>&nbsp;<span class="ident" id="5604593">r1</span><span class="op" id="5604595">,</span>&nbsp;<span class="ident" id="5604597">err</span><br>
<span class="lineno"></span><span class="op" id="5604601">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="5604604">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5604675">func</span>&nbsp;<span class="op" id="5604680">(</span><span class="ident" id="5604681">r</span>&nbsp;<span class="op" id="5604683">*</span><span class="ident" id="5604684">Reader</span><span class="op" id="5604690">)</span>&nbsp;<span class="ident" id="5604692">skip</span><span class="op" id="5604696">(</span><span class="ident" id="5604697">delim</span>&nbsp;<span class="builtintype" id="5604703">rune</span><span class="op" id="5604707">)</span>&nbsp;<span class="builtintype" id="5604709">error</span>&nbsp;<span class="op" id="5604715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604718">for</span>&nbsp;<span class="op" id="5604722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5604726">r1</span><span class="op" id="5604728">,</span>&nbsp;<span class="ident" id="5604730">err</span>&nbsp;<span class="op" id="5604734">:=</span>&nbsp;<span class="ident" id="5604737">r</span><span class="op" id="5604738">.</span><span class="ident" id="5604739">readRune</span><span class="op" id="5604747">(</span><span class="op" id="5604748">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604752">if</span>&nbsp;<span class="ident" id="5604755">err</span>&nbsp;<span class="op" id="5604759">!=</span>&nbsp;<span class="ident" id="5604762">nil</span>&nbsp;<span class="op" id="5604766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604771">return</span>&nbsp;<span class="ident" id="5604778">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604788">if</span>&nbsp;<span class="ident" id="5604791">r1</span>&nbsp;<span class="op" id="5604794">==</span>&nbsp;<span class="ident" id="5604797">delim</span>&nbsp;<span class="op" id="5604803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5604808">return</span>&nbsp;<span class="ident" id="5604815">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5604824">}</span><br>
<span class="lineno"></span><span class="op" id="5604826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5604829">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="5604889">func</span>&nbsp;<span class="op" id="5604894">(</span><span class="ident" id="5604895">r</span>&nbsp;<span class="op" id="5604897">*</span><span class="ident" id="5604898">Reader</span><span class="op" id="5604904">)</span>&nbsp;<span class="ident" id="5604906">parseRecord</span><span class="op" id="5604917">(</span><span class="op" id="5604918">)</span>&nbsp;<span class="op" id="5604920">(</span><span class="ident" id="5604921">fields</span>&nbsp;<span class="op" id="5604928">[</span><span class="op" id="5604929">]</span><span class="builtintype" id="5604930">string</span><span class="op" id="5604936">,</span>&nbsp;<span class="ident" id="5604938">err</span>&nbsp;<span class="builtintype" id="5604942">error</span><span class="op" id="5604947">)</span>&nbsp;<span class="op" id="5604949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5604952">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605013">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605071">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605142">r</span><span class="op" id="5605143">.</span><span class="ident" id="5605144">line</span><span class="op" id="5605148">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605152">r</span><span class="op" id="5605153">.</span><span class="ident" id="5605154">column</span>&nbsp;<span class="op" id="5605161">=</span>&nbsp;<span class="op" id="5605163">-</span><span class="num" id="5605164">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605168">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605228">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605291">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605326">r1</span><span class="op" id="5605328">,</span>&nbsp;<span class="ident" id="5605330">_</span><span class="op" id="5605331">,</span>&nbsp;<span class="ident" id="5605333">err</span>&nbsp;<span class="op" id="5605337">:=</span>&nbsp;<span class="ident" id="5605340">r</span><span class="op" id="5605341">.</span><span class="ident" id="5605342">r</span><span class="op" id="5605343">.</span><span class="ident" id="5605344">ReadRune</span><span class="op" id="5605352">(</span><span class="op" id="5605353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605356">if</span>&nbsp;<span class="ident" id="5605359">err</span>&nbsp;<span class="op" id="5605363">!=</span>&nbsp;<span class="ident" id="5605366">nil</span>&nbsp;<span class="op" id="5605370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605374">return</span>&nbsp;<span class="ident" id="5605381">nil</span><span class="op" id="5605384">,</span>&nbsp;<span class="ident" id="5605386">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605391">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605395">if</span>&nbsp;<span class="ident" id="5605398">r</span><span class="op" id="5605399">.</span><span class="ident" id="5605400">Comment</span>&nbsp;<span class="op" id="5605408">!=</span>&nbsp;<span class="num" id="5605411">0</span>&nbsp;<span class="op" id="5605413">&amp;&amp;</span>&nbsp;<span class="ident" id="5605416">r1</span>&nbsp;<span class="op" id="5605419">==</span>&nbsp;<span class="ident" id="5605422">r</span><span class="op" id="5605423">.</span><span class="ident" id="5605424">Comment</span>&nbsp;<span class="op" id="5605432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605436">return</span>&nbsp;<span class="ident" id="5605443">nil</span><span class="op" id="5605446">,</span>&nbsp;<span class="ident" id="5605448">r</span><span class="op" id="5605449">.</span><span class="ident" id="5605450">skip</span><span class="op" id="5605454">(</span><span class="string" id="5605455">&#39;\n&#39;</span><span class="op" id="5605459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605465">r</span><span class="op" id="5605466">.</span><span class="ident" id="5605467">r</span><span class="op" id="5605468">.</span><span class="ident" id="5605469">UnreadRune</span><span class="op" id="5605479">(</span><span class="op" id="5605480">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5605484">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605530">for</span>&nbsp;<span class="op" id="5605534">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605538">haveField</span><span class="op" id="5605547">,</span>&nbsp;<span class="ident" id="5605549">delim</span><span class="op" id="5605554">,</span>&nbsp;<span class="ident" id="5605556">err</span>&nbsp;<span class="op" id="5605560">:=</span>&nbsp;<span class="ident" id="5605563">r</span><span class="op" id="5605564">.</span><span class="ident" id="5605565">parseField</span><span class="op" id="5605575">(</span><span class="op" id="5605576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605580">if</span>&nbsp;<span class="ident" id="5605583">haveField</span>&nbsp;<span class="op" id="5605593">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605598">fields</span>&nbsp;<span class="op" id="5605605">=</span>&nbsp;<span class="builtinfunc" id="5605607">append</span><span class="op" id="5605613">(</span><span class="ident" id="5605614">fields</span><span class="op" id="5605620">,</span>&nbsp;<span class="ident" id="5605622">r</span><span class="op" id="5605623">.</span><span class="ident" id="5605624">field</span><span class="op" id="5605629">.</span><span class="ident" id="5605630">String</span><span class="op" id="5605636">(</span><span class="op" id="5605637">)</span><span class="op" id="5605638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605646">if</span>&nbsp;<span class="ident" id="5605649">delim</span>&nbsp;<span class="op" id="5605655">==</span>&nbsp;<span class="string" id="5605658">&#39;\n&#39;</span>&nbsp;<span class="op" id="5605663">||</span>&nbsp;<span class="ident" id="5605666">err</span>&nbsp;<span class="op" id="5605670">==</span>&nbsp;<span class="ident" id="5605673">io</span><span class="op" id="5605675">.</span><span class="ident" id="5605676">EOF</span>&nbsp;<span class="op" id="5605680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605685">return</span>&nbsp;<span class="ident" id="5605692">fields</span><span class="op" id="5605698">,</span>&nbsp;<span class="ident" id="5605700">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605706">}</span>&nbsp;<span class="keyword" id="5605708">else</span>&nbsp;<span class="keyword" id="5605713">if</span>&nbsp;<span class="ident" id="5605716">err</span>&nbsp;<span class="op" id="5605720">!=</span>&nbsp;<span class="ident" id="5605723">nil</span>&nbsp;<span class="op" id="5605727">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5605732">return</span>&nbsp;<span class="ident" id="5605739">nil</span><span class="op" id="5605742">,</span>&nbsp;<span class="ident" id="5605744">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5605753">}</span><br>
<span class="lineno"></span><span class="op" id="5605755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="5605758">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5605828">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="5605903">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="5605925">func</span>&nbsp;<span class="op" id="5605930">(</span><span class="ident" id="5605931">r</span>&nbsp;<span class="op" id="5605933">*</span><span class="ident" id="5605934">Reader</span><span class="op" id="5605940">)</span>&nbsp;<span class="ident" id="5605942">parseField</span><span class="op" id="5605952">(</span><span class="op" id="5605953">)</span>&nbsp;<span class="op" id="5605955">(</span><span class="ident" id="5605956">haveField</span>&nbsp;<span class="builtintype" id="5605966">bool</span><span class="op" id="5605970">,</span>&nbsp;<span class="ident" id="5605972">delim</span>&nbsp;<span class="builtintype" id="5605978">rune</span><span class="op" id="5605982">,</span>&nbsp;<span class="ident" id="5605984">err</span>&nbsp;<span class="builtintype" id="5605988">error</span><span class="op" id="5605993">)</span>&nbsp;<span class="op" id="5605995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5605998">r</span><span class="op" id="5605999">.</span><span class="ident" id="5606000">field</span><span class="op" id="5606005">.</span><span class="ident" id="5606006">Reset</span><span class="op" id="5606011">(</span><span class="op" id="5606012">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606016">r1</span><span class="op" id="5606018">,</span>&nbsp;<span class="ident" id="5606020">err</span>&nbsp;<span class="op" id="5606024">:=</span>&nbsp;<span class="ident" id="5606027">r</span><span class="op" id="5606028">.</span><span class="ident" id="5606029">readRune</span><span class="op" id="5606037">(</span><span class="op" id="5606038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606041">for</span>&nbsp;<span class="ident" id="5606045">err</span>&nbsp;<span class="op" id="5606049">==</span>&nbsp;<span class="ident" id="5606052">nil</span>&nbsp;<span class="op" id="5606056">&amp;&amp;</span>&nbsp;<span class="ident" id="5606059">r</span><span class="op" id="5606060">.</span><span class="ident" id="5606061">TrimLeadingSpace</span>&nbsp;<span class="op" id="5606078">&amp;&amp;</span>&nbsp;<span class="ident" id="5606081">r1</span>&nbsp;<span class="op" id="5606084">!=</span>&nbsp;<span class="string" id="5606087">&#39;\n&#39;</span>&nbsp;<span class="op" id="5606092">&amp;&amp;</span>&nbsp;<span class="ident" id="5606095">unicode</span><span class="op" id="5606102">.</span><span class="ident" id="5606103">IsSpace</span><span class="op" id="5606110">(</span><span class="ident" id="5606111">r1</span><span class="op" id="5606113">)</span>&nbsp;<span class="op" id="5606115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606119">r1</span><span class="op" id="5606121">,</span>&nbsp;<span class="ident" id="5606123">err</span>&nbsp;<span class="op" id="5606127">=</span>&nbsp;<span class="ident" id="5606129">r</span><span class="op" id="5606130">.</span><span class="ident" id="5606131">readRune</span><span class="op" id="5606139">(</span><span class="op" id="5606140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606143">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606147">if</span>&nbsp;<span class="ident" id="5606150">err</span>&nbsp;<span class="op" id="5606154">==</span>&nbsp;<span class="ident" id="5606157">io</span><span class="op" id="5606159">.</span><span class="ident" id="5606160">EOF</span>&nbsp;<span class="op" id="5606164">&amp;&amp;</span>&nbsp;<span class="ident" id="5606167">r</span><span class="op" id="5606168">.</span><span class="ident" id="5606169">column</span>&nbsp;<span class="op" id="5606176">!=</span>&nbsp;<span class="num" id="5606179">0</span>&nbsp;<span class="op" id="5606181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606185">return</span>&nbsp;<span class="builtintype" id="5606192">true</span><span class="op" id="5606196">,</span>&nbsp;<span class="num" id="5606198">0</span><span class="op" id="5606199">,</span>&nbsp;<span class="ident" id="5606201">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606209">if</span>&nbsp;<span class="ident" id="5606212">err</span>&nbsp;<span class="op" id="5606216">!=</span>&nbsp;<span class="ident" id="5606219">nil</span>&nbsp;<span class="op" id="5606223">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606227">return</span>&nbsp;<span class="builtintype" id="5606234">false</span><span class="op" id="5606239">,</span>&nbsp;<span class="num" id="5606241">0</span><span class="op" id="5606242">,</span>&nbsp;<span class="ident" id="5606244">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606253">switch</span>&nbsp;<span class="ident" id="5606260">r1</span>&nbsp;<span class="op" id="5606263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606266">case</span>&nbsp;<span class="ident" id="5606271">r</span><span class="op" id="5606272">.</span><span class="ident" id="5606273">Comma</span><span class="op" id="5606278">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5606282">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606304">case</span>&nbsp;<span class="string" id="5606309">&#39;\n&#39;</span><span class="op" id="5606313">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5606317">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606368">if</span>&nbsp;<span class="ident" id="5606371">r</span><span class="op" id="5606372">.</span><span class="ident" id="5606373">column</span>&nbsp;<span class="op" id="5606380">==</span>&nbsp;<span class="num" id="5606383">0</span>&nbsp;<span class="op" id="5606385">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606390">return</span>&nbsp;<span class="builtintype" id="5606397">false</span><span class="op" id="5606402">,</span>&nbsp;<span class="ident" id="5606404">r1</span><span class="op" id="5606406">,</span>&nbsp;<span class="ident" id="5606408">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606418">return</span>&nbsp;<span class="builtintype" id="5606425">true</span><span class="op" id="5606429">,</span>&nbsp;<span class="ident" id="5606431">r1</span><span class="op" id="5606433">,</span>&nbsp;<span class="ident" id="5606435">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606441">case</span>&nbsp;<span class="string" id="5606446">&#39;&#34;&#39;</span><span class="op" id="5606449">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5606453">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606470">Quoted</span><span class="op" id="5606476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606480">for</span>&nbsp;<span class="op" id="5606484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606489">r1</span><span class="op" id="5606491">,</span>&nbsp;<span class="ident" id="5606493">err</span>&nbsp;<span class="op" id="5606497">=</span>&nbsp;<span class="ident" id="5606499">r</span><span class="op" id="5606500">.</span><span class="ident" id="5606501">readRune</span><span class="op" id="5606509">(</span><span class="op" id="5606510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606515">if</span>&nbsp;<span class="ident" id="5606518">err</span>&nbsp;<span class="op" id="5606522">!=</span>&nbsp;<span class="ident" id="5606525">nil</span>&nbsp;<span class="op" id="5606529">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606535">if</span>&nbsp;<span class="ident" id="5606538">err</span>&nbsp;<span class="op" id="5606542">==</span>&nbsp;<span class="ident" id="5606545">io</span><span class="op" id="5606547">.</span><span class="ident" id="5606548">EOF</span>&nbsp;<span class="op" id="5606552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606559">if</span>&nbsp;<span class="ident" id="5606562">r</span><span class="op" id="5606563">.</span><span class="ident" id="5606564">LazyQuotes</span>&nbsp;<span class="op" id="5606575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606583">return</span>&nbsp;<span class="builtintype" id="5606590">true</span><span class="op" id="5606594">,</span>&nbsp;<span class="num" id="5606596">0</span><span class="op" id="5606597">,</span>&nbsp;<span class="ident" id="5606599">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606615">return</span>&nbsp;<span class="builtintype" id="5606622">false</span><span class="op" id="5606627">,</span>&nbsp;<span class="num" id="5606629">0</span><span class="op" id="5606630">,</span>&nbsp;<span class="ident" id="5606632">r</span><span class="op" id="5606633">.</span><span class="builtintype" id="5606634">error</span><span class="op" id="5606639">(</span><span class="ident" id="5606640">ErrQuote</span><span class="op" id="5606648">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606660">return</span>&nbsp;<span class="builtintype" id="5606667">false</span><span class="op" id="5606672">,</span>&nbsp;<span class="num" id="5606674">0</span><span class="op" id="5606675">,</span>&nbsp;<span class="ident" id="5606677">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606689">switch</span>&nbsp;<span class="ident" id="5606696">r1</span>&nbsp;<span class="op" id="5606699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606704">case</span>&nbsp;<span class="string" id="5606709">&#39;&#34;&#39;</span><span class="op" id="5606712">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606718">r1</span><span class="op" id="5606720">,</span>&nbsp;<span class="ident" id="5606722">err</span>&nbsp;<span class="op" id="5606726">=</span>&nbsp;<span class="ident" id="5606728">r</span><span class="op" id="5606729">.</span><span class="ident" id="5606730">readRune</span><span class="op" id="5606738">(</span><span class="op" id="5606739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606745">if</span>&nbsp;<span class="ident" id="5606748">err</span>&nbsp;<span class="op" id="5606752">!=</span>&nbsp;<span class="ident" id="5606755">nil</span>&nbsp;<span class="op" id="5606759">||</span>&nbsp;<span class="ident" id="5606762">r1</span>&nbsp;<span class="op" id="5606765">==</span>&nbsp;<span class="ident" id="5606768">r</span><span class="op" id="5606769">.</span><span class="ident" id="5606770">Comma</span>&nbsp;<span class="op" id="5606776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606783">break</span>&nbsp;<span class="ident" id="5606789">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606806">if</span>&nbsp;<span class="ident" id="5606809">r1</span>&nbsp;<span class="op" id="5606812">==</span>&nbsp;<span class="string" id="5606815">&#39;\n&#39;</span>&nbsp;<span class="op" id="5606820">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606827">return</span>&nbsp;<span class="builtintype" id="5606834">true</span><span class="op" id="5606838">,</span>&nbsp;<span class="ident" id="5606840">r1</span><span class="op" id="5606842">,</span>&nbsp;<span class="ident" id="5606844">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606852">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606858">if</span>&nbsp;<span class="ident" id="5606861">r1</span>&nbsp;<span class="op" id="5606864">!=</span>&nbsp;<span class="string" id="5606867">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5606871">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606878">if</span>&nbsp;<span class="op" id="5606881">!</span><span class="ident" id="5606882">r</span><span class="op" id="5606883">.</span><span class="ident" id="5606884">LazyQuotes</span>&nbsp;<span class="op" id="5606895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606903">r</span><span class="op" id="5606904">.</span><span class="ident" id="5606905">column</span><span class="op" id="5606911">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5606920">return</span>&nbsp;<span class="builtintype" id="5606927">false</span><span class="op" id="5606932">,</span>&nbsp;<span class="num" id="5606934">0</span><span class="op" id="5606935">,</span>&nbsp;<span class="ident" id="5606937">r</span><span class="op" id="5606938">.</span><span class="builtintype" id="5606939">error</span><span class="op" id="5606944">(</span><span class="ident" id="5606945">ErrQuote</span><span class="op" id="5606953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5606960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5606967">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5606997">r</span><span class="op" id="5606998">.</span><span class="ident" id="5606999">field</span><span class="op" id="5607004">.</span><span class="ident" id="5607005">WriteRune</span><span class="op" id="5607014">(</span><span class="string" id="5607015">&#39;&#34;&#39;</span><span class="op" id="5607018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607024">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607029">case</span>&nbsp;<span class="string" id="5607034">&#39;\n&#39;</span><span class="op" id="5607038">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5607044">r</span><span class="op" id="5607045">.</span><span class="ident" id="5607046">line</span><span class="op" id="5607050">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5607057">r</span><span class="op" id="5607058">.</span><span class="ident" id="5607059">column</span>&nbsp;<span class="op" id="5607066">=</span>&nbsp;<span class="op" id="5607068">-</span><span class="num" id="5607069">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5607079">r</span><span class="op" id="5607080">.</span><span class="ident" id="5607081">field</span><span class="op" id="5607086">.</span><span class="ident" id="5607087">WriteRune</span><span class="op" id="5607096">(</span><span class="ident" id="5607097">r1</span><span class="op" id="5607099">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607107">default</span><span class="op" id="5607114">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5607118">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607138">for</span>&nbsp;<span class="op" id="5607142">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5607147">r</span><span class="op" id="5607148">.</span><span class="ident" id="5607149">field</span><span class="op" id="5607154">.</span><span class="ident" id="5607155">WriteRune</span><span class="op" id="5607164">(</span><span class="ident" id="5607165">r1</span><span class="op" id="5607167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5607172">r1</span><span class="op" id="5607174">,</span>&nbsp;<span class="ident" id="5607176">err</span>&nbsp;<span class="op" id="5607180">=</span>&nbsp;<span class="ident" id="5607182">r</span><span class="op" id="5607183">.</span><span class="ident" id="5607184">readRune</span><span class="op" id="5607192">(</span><span class="op" id="5607193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607198">if</span>&nbsp;<span class="ident" id="5607201">err</span>&nbsp;<span class="op" id="5607205">!=</span>&nbsp;<span class="ident" id="5607208">nil</span>&nbsp;<span class="op" id="5607212">||</span>&nbsp;<span class="ident" id="5607215">r1</span>&nbsp;<span class="op" id="5607218">==</span>&nbsp;<span class="ident" id="5607221">r</span><span class="op" id="5607222">.</span><span class="ident" id="5607223">Comma</span>&nbsp;<span class="op" id="5607229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607235">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607244">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607249">if</span>&nbsp;<span class="ident" id="5607252">r1</span>&nbsp;<span class="op" id="5607255">==</span>&nbsp;<span class="string" id="5607258">&#39;\n&#39;</span>&nbsp;<span class="op" id="5607263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607269">return</span>&nbsp;<span class="builtintype" id="5607276">true</span><span class="op" id="5607280">,</span>&nbsp;<span class="ident" id="5607282">r1</span><span class="op" id="5607284">,</span>&nbsp;<span class="ident" id="5607286">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607293">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607298">if</span>&nbsp;<span class="op" id="5607301">!</span><span class="ident" id="5607302">r</span><span class="op" id="5607303">.</span><span class="ident" id="5607304">LazyQuotes</span>&nbsp;<span class="op" id="5607315">&amp;&amp;</span>&nbsp;<span class="ident" id="5607318">r1</span>&nbsp;<span class="op" id="5607321">==</span>&nbsp;<span class="string" id="5607324">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="5607328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607334">return</span>&nbsp;<span class="builtintype" id="5607341">false</span><span class="op" id="5607346">,</span>&nbsp;<span class="num" id="5607348">0</span><span class="op" id="5607349">,</span>&nbsp;<span class="ident" id="5607351">r</span><span class="op" id="5607352">.</span><span class="builtintype" id="5607353">error</span><span class="op" id="5607358">(</span><span class="ident" id="5607359">ErrBareQuote</span><span class="op" id="5607371">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607383">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607387">if</span>&nbsp;<span class="ident" id="5607390">err</span>&nbsp;<span class="op" id="5607394">!=</span>&nbsp;<span class="ident" id="5607397">nil</span>&nbsp;<span class="op" id="5607401">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607405">if</span>&nbsp;<span class="ident" id="5607408">err</span>&nbsp;<span class="op" id="5607412">==</span>&nbsp;<span class="ident" id="5607415">io</span><span class="op" id="5607417">.</span><span class="ident" id="5607418">EOF</span>&nbsp;<span class="op" id="5607422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607427">return</span>&nbsp;<span class="builtintype" id="5607434">true</span><span class="op" id="5607438">,</span>&nbsp;<span class="num" id="5607440">0</span><span class="op" id="5607441">,</span>&nbsp;<span class="ident" id="5607443">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607449">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607453">return</span>&nbsp;<span class="builtintype" id="5607460">false</span><span class="op" id="5607465">,</span>&nbsp;<span class="num" id="5607467">0</span><span class="op" id="5607468">,</span>&nbsp;<span class="ident" id="5607470">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5607475">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5607479">return</span>&nbsp;<span class="builtintype" id="5607486">true</span><span class="op" id="5607490">,</span>&nbsp;<span class="ident" id="5607492">r1</span><span class="op" id="5607494">,</span>&nbsp;<span class="ident" id="5607496">nil</span><br>
<span class="lineno"></span><span class="op" id="5607500">}</span>
</div>
</body>
</html>
