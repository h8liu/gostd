<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6178526">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6178581">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6178635">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6178686">//&nbsp;Package&nbsp;printer&nbsp;implements&nbsp;printing&nbsp;of&nbsp;AST&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="6178739">package</span>&nbsp;<span class="ident" id="6178747">printer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6178756">import</span>&nbsp;<span class="op" id="6178763">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178766">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178773">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178783">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178795">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178801">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178807">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178818">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178829">&#34;text/tabwriter&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6178847">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6178857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="6178860">const</span>&nbsp;<span class="op" id="6178866">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178869">maxNewlines</span>&nbsp;<span class="op" id="6178881">=</span>&nbsp;<span class="num" id="6178883">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6178889">//&nbsp;max.&nbsp;number&nbsp;of&nbsp;newlines&nbsp;between&nbsp;source&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178937">debug</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6178949">=</span>&nbsp;<span class="ident" id="6178951">false</span>&nbsp;<span class="comment" id="6178957">//&nbsp;enable&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178982">infinity</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6178994">=</span>&nbsp;<span class="num" id="6178996">1</span>&nbsp;<span class="op" id="6178998">&lt;&lt;</span>&nbsp;<span class="num" id="6179001">30</span><br>
<span class="lineno"></span><span class="op" id="6179004">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="6179007">type</span>&nbsp;<span class="ident" id="6179012">whiteSpace</span>&nbsp;<span class="builtintype" id="6179023">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179029">const</span>&nbsp;<span class="op" id="6179035">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179038">ignore</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6179047">=</span>&nbsp;<span class="ident" id="6179049"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179059">(</span><span class="num" id="6179060">0</span><span class="op" id="6179061">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179064">blank</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6179073">=</span>&nbsp;<span class="ident" id="6179075"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179085">(</span><span class="string" id="6179086">&#39;&nbsp;&#39;</span><span class="op" id="6179089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179092">vtab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6179101">=</span>&nbsp;<span class="ident" id="6179103"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179113">(</span><span class="string" id="6179114">&#39;\v&#39;</span><span class="op" id="6179118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179121">newline</span>&nbsp;&nbsp;<span class="op" id="6179130">=</span>&nbsp;<span class="ident" id="6179132"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179142">(</span><span class="string" id="6179143">&#39;\n&#39;</span><span class="op" id="6179147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179150">formfeed</span>&nbsp;<span class="op" id="6179159">=</span>&nbsp;<span class="ident" id="6179161"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179171">(</span><span class="string" id="6179172">&#39;\f&#39;</span><span class="op" id="6179176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179179">indent</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6179188">=</span>&nbsp;<span class="ident" id="6179190"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179200">(</span><span class="string" id="6179201">&#39;&gt;&#39;</span><span class="op" id="6179204">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179207">unindent</span>&nbsp;<span class="op" id="6179216">=</span>&nbsp;<span class="ident" id="6179218"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6179228">(</span><span class="string" id="6179229">&#39;&lt;&#39;</span><span class="op" id="6179232">)</span><br>
<span class="lineno"></span><span class="op" id="6179234">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6179237">//&nbsp;A&nbsp;pmode&nbsp;value&nbsp;represents&nbsp;the&nbsp;current&nbsp;printer&nbsp;mode.</span><br>
<span class="lineno"></span><span class="keyword" id="6179291">type</span>&nbsp;<span class="ident" id="6179296">pmode</span>&nbsp;<span class="builtintype" id="6179302">int</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="6179307">const</span>&nbsp;<span class="op" id="6179313">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179316">noExtraBlank</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6179333"><a href="/go/printer/printer.go.html#6179296">pmode</a></span>&nbsp;<span class="op" id="6179339">=</span>&nbsp;<span class="num" id="6179341">1</span>&nbsp;<span class="op" id="6179343">&lt;&lt;</span>&nbsp;<span class="ident" id="6179346">iota</span>&nbsp;<span class="comment" id="6179351">//&nbsp;disables&nbsp;extra&nbsp;blank&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179399">noExtraLinebreak</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6179434">//&nbsp;disables&nbsp;extra&nbsp;line&nbsp;break&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span><span class="op" id="6179486">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="6179489">type</span>&nbsp;<span class="ident" id="6179494">commentInfo</span>&nbsp;<span class="keyword" id="6179506">struct</span>&nbsp;<span class="op" id="6179513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179516">cindex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6179531">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6179549">//&nbsp;current&nbsp;comment&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179575">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6179590">*</span><span class="ident" id="6179591"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6179594">.</span><span class="ident" id="6179595">CommentGroup</span>&nbsp;<span class="comment" id="6179608">//&nbsp;=&nbsp;printer.comments[cindex];&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179647">commentOffset</span>&nbsp;&nbsp;<span class="builtintype" id="6179662">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6179680">//&nbsp;=&nbsp;printer.posFor(printer.comments[cindex].List[0].Pos()).Offset;&nbsp;or&nbsp;infinity</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179761">commentNewline</span>&nbsp;<span class="builtintype" id="6179776">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6179794">//&nbsp;true&nbsp;if&nbsp;the&nbsp;comment&nbsp;group&nbsp;contains&nbsp;newlines</span><br>
<span class="lineno"></span><span class="op" id="6179841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6179844">type</span>&nbsp;<span class="ident" id="6179849">printer</span>&nbsp;<span class="keyword" id="6179857">struct</span>&nbsp;<span class="op" id="6179864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179867">//&nbsp;Configuration&nbsp;(does&nbsp;not&nbsp;change&nbsp;after&nbsp;initialization)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179924"><a href="/go/printer/printer.go.html#6213576">Config</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179932">fset</span>&nbsp;<span class="op" id="6179937">*</span><span class="ident" id="6179938"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6179943">.</span><span class="ident" id="6179944">FileSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179954">//&nbsp;Current&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179972">output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6179984">[</span><span class="op" id="6179985">]</span><span class="builtintype" id="6179986">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6179997">//&nbsp;raw&nbsp;printer&nbsp;result</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180020">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6180032">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6180045">//&nbsp;current&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180069">mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180081"><a href="/go/printer/printer.go.html#6179296">pmode</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6180094">//&nbsp;current&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180119">impliedSemi</span>&nbsp;<span class="builtintype" id="6180131">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6180144">//&nbsp;if&nbsp;set,&nbsp;a&nbsp;linebreak&nbsp;implies&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180188">lastTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180200"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6180205">.</span><span class="ident" id="6180206">Token</span>&nbsp;&nbsp;<span class="comment" id="6180213">//&nbsp;last&nbsp;token&nbsp;printed&nbsp;(token.ILLEGAL&nbsp;if&nbsp;it&#39;s&nbsp;whitespace)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180271">prevOpen</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180283"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6180288">.</span><span class="ident" id="6180289">Token</span>&nbsp;&nbsp;<span class="comment" id="6180296">//&nbsp;previous&nbsp;non-brace&nbsp;&#34;open&#34;&nbsp;token&nbsp;(,&nbsp;[,&nbsp;or&nbsp;token.ILLEGAL</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180355">wsbuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6180367">[</span><span class="op" id="6180368">]</span><span class="ident" id="6180369"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span>&nbsp;<span class="comment" id="6180380">//&nbsp;delayed&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180405">//&nbsp;Positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180419">//&nbsp;The&nbsp;out&nbsp;position&nbsp;differs&nbsp;from&nbsp;the&nbsp;pos&nbsp;position&nbsp;when&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180486">//&nbsp;formatting&nbsp;differs&nbsp;from&nbsp;the&nbsp;source&nbsp;formatting&nbsp;(in&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180554">//&nbsp;white&nbsp;space).&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;difference&nbsp;and&nbsp;SourcePos&nbsp;is&nbsp;set&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180620">//&nbsp;ConfigMode,&nbsp;//line&nbsp;comments&nbsp;are&nbsp;used&nbsp;in&nbsp;the&nbsp;output&nbsp;to&nbsp;restore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6180686">//&nbsp;original&nbsp;source&nbsp;positions&nbsp;for&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180730">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180738"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6180743">.</span><span class="ident" id="6180744">Position</span>&nbsp;<span class="comment" id="6180753">//&nbsp;current&nbsp;position&nbsp;in&nbsp;AST&nbsp;(source)&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180796">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180804"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6180809">.</span><span class="ident" id="6180810">Position</span>&nbsp;<span class="comment" id="6180819">//&nbsp;current&nbsp;position&nbsp;in&nbsp;output&nbsp;space</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180856">last</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6180864"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6180869">.</span><span class="ident" id="6180870">Position</span>&nbsp;<span class="comment" id="6180879">//&nbsp;value&nbsp;of&nbsp;pos&nbsp;after&nbsp;calling&nbsp;writeString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6180922">linePtr</span>&nbsp;<span class="op" id="6180930">*</span><span class="builtintype" id="6180931">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6180945">//&nbsp;if&nbsp;set,&nbsp;record&nbsp;out.Line&nbsp;for&nbsp;the&nbsp;next&nbsp;token&nbsp;in&nbsp;*linePtr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181005">//&nbsp;The&nbsp;list&nbsp;of&nbsp;all&nbsp;source&nbsp;comments,&nbsp;in&nbsp;order&nbsp;of&nbsp;appearance.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181066">comments</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6181082">[</span><span class="op" id="6181083">]</span><span class="op" id="6181084">*</span><span class="ident" id="6181085"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6181088">.</span><span class="ident" id="6181089">CommentGroup</span>&nbsp;<span class="comment" id="6181102">//&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181117">useNodeComments</span>&nbsp;<span class="builtintype" id="6181133">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6181153">//&nbsp;if&nbsp;not&nbsp;set,&nbsp;ignore&nbsp;lead&nbsp;and&nbsp;line&nbsp;comments&nbsp;of&nbsp;nodes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181209">//&nbsp;Information&nbsp;about&nbsp;p.comments[p.cindex];&nbsp;set&nbsp;up&nbsp;by&nbsp;nextComment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181276"><a href="/go/printer/printer.go.html#6179494">commentInfo</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181290">//&nbsp;Cache&nbsp;of&nbsp;already&nbsp;computed&nbsp;node&nbsp;sizes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181332">nodeSizes</span>&nbsp;<span class="keyword" id="6181342">map</span><span class="op" id="6181345">[</span><span class="ident" id="6181346"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6181349">.</span><span class="ident" id="6181350">Node</span><span class="op" id="6181354">]</span><span class="builtintype" id="6181355">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6181361">//&nbsp;Cache&nbsp;of&nbsp;most&nbsp;recently&nbsp;computed&nbsp;line&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181412">cachedPos</span>&nbsp;&nbsp;<span class="ident" id="6181423"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6181428">.</span><span class="ident" id="6181429">Pos</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181434">cachedLine</span>&nbsp;<span class="builtintype" id="6181445">int</span>&nbsp;<span class="comment" id="6181449">//&nbsp;line&nbsp;corresponding&nbsp;to&nbsp;cachedPos</span><br>
<span class="lineno"></span><span class="op" id="6181484">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181487">func</span>&nbsp;<span class="op" id="6181492">(</span><span class="ident" id="6181493">p</span>&nbsp;<span class="op" id="6181495">*</span><span class="ident" id="6181496"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6181503">)</span>&nbsp;<span class="ident" id="6181505">init</span><span class="op" id="6181509">(</span><span class="ident" id="6181510">cfg</span>&nbsp;<span class="op" id="6181514">*</span><span class="ident" id="6181515"><a href="/go/printer/printer.go.html#6213576">Config</a></span><span class="op" id="6181521">,</span>&nbsp;<span class="ident" id="6181523">fset</span>&nbsp;<span class="op" id="6181528">*</span><span class="ident" id="6181529"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6181534">.</span><span class="ident" id="6181535">FileSet</span><span class="op" id="6181542">,</span>&nbsp;<span class="ident" id="6181544">nodeSizes</span>&nbsp;<span class="keyword" id="6181554">map</span><span class="op" id="6181557">[</span><span class="ident" id="6181558"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6181561">.</span><span class="ident" id="6181562">Node</span><span class="op" id="6181566">]</span><span class="builtintype" id="6181567">int</span><span class="op" id="6181570">)</span>&nbsp;<span class="op" id="6181572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181575"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181576">.</span><span class="ident" id="6181577">Config</span>&nbsp;<span class="op" id="6181584">=</span>&nbsp;<span class="op" id="6181586">*</span><span class="ident" id="6181587"><a href="/go/printer/printer.go.html#6181510">cfg</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181592"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181593">.</span><span class="ident" id="6181594">fset</span>&nbsp;<span class="op" id="6181599">=</span>&nbsp;<span class="ident" id="6181601"><a href="/go/printer/printer.go.html#6181523">fset</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181607"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181608">.</span><span class="ident" id="6181609">pos</span>&nbsp;<span class="op" id="6181613">=</span>&nbsp;<span class="ident" id="6181615"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6181620">.</span><span class="ident" id="6181621">Position</span><span class="op" id="6181629">{</span><span class="ident" id="6181630">Line</span><span class="op" id="6181634">:</span>&nbsp;<span class="num" id="6181636">1</span><span class="op" id="6181637">,</span>&nbsp;<span class="ident" id="6181639">Column</span><span class="op" id="6181645">:</span>&nbsp;<span class="num" id="6181647">1</span><span class="op" id="6181648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181651"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181652">.</span><span class="ident" id="6181653">out</span>&nbsp;<span class="op" id="6181657">=</span>&nbsp;<span class="ident" id="6181659"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6181664">.</span><span class="ident" id="6181665">Position</span><span class="op" id="6181673">{</span><span class="ident" id="6181674">Line</span><span class="op" id="6181678">:</span>&nbsp;<span class="num" id="6181680">1</span><span class="op" id="6181681">,</span>&nbsp;<span class="ident" id="6181683">Column</span><span class="op" id="6181689">:</span>&nbsp;<span class="num" id="6181691">1</span><span class="op" id="6181692">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181695"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181696">.</span><span class="ident" id="6181697">wsbuf</span>&nbsp;<span class="op" id="6181703">=</span>&nbsp;<span class="builtinfunc" id="6181705">make</span><span class="op" id="6181709">(</span><span class="op" id="6181710">[</span><span class="op" id="6181711">]</span><span class="ident" id="6181712"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6181722">,</span>&nbsp;<span class="num" id="6181724">0</span><span class="op" id="6181725">,</span>&nbsp;<span class="num" id="6181727">16</span><span class="op" id="6181729">)</span>&nbsp;<span class="comment" id="6181731">//&nbsp;whitespace&nbsp;sequences&nbsp;are&nbsp;short</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181766"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181767">.</span><span class="ident" id="6181768">nodeSizes</span>&nbsp;<span class="op" id="6181778">=</span>&nbsp;<span class="ident" id="6181780"><a href="/go/printer/printer.go.html#6181544">nodeSizes</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181791"><a href="/go/printer/printer.go.html#6181493">p</a></span><span class="op" id="6181792">.</span><span class="ident" id="6181793">cachedPos</span>&nbsp;<span class="op" id="6181803">=</span>&nbsp;<span class="op" id="6181805">-</span><span class="num" id="6181806">1</span><br>
<span class="lineno"></span><span class="op" id="6181808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6181811">func</span>&nbsp;<span class="op" id="6181816">(</span><span class="ident" id="6181817">p</span>&nbsp;<span class="op" id="6181819">*</span><span class="ident" id="6181820"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6181827">)</span>&nbsp;<span class="ident" id="6181829">internalError</span><span class="op" id="6181842">(</span><span class="ident" id="6181843">msg</span>&nbsp;<span class="op" id="6181847">...</span><span class="keyword" id="6181850">interface</span><span class="op" id="6181859">{</span><span class="op" id="6181860">}</span><span class="op" id="6181861">)</span>&nbsp;<span class="op" id="6181863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6181866">if</span>&nbsp;<span class="ident" id="6181869"><a href="/go/printer/printer.go.html#6178937">debug</a></span>&nbsp;<span class="op" id="6181875">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181879"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6181882">.</span><span class="ident" id="6181883">Print</span><span class="op" id="6181888">(</span><span class="ident" id="6181889"><a href="/go/printer/printer.go.html#6181817">p</a></span><span class="op" id="6181890">.</span><span class="ident" id="6181891">pos</span><span class="op" id="6181894">.</span><span class="ident" id="6181895">String</span><span class="op" id="6181901">(</span><span class="op" id="6181902">)</span>&nbsp;<span class="op" id="6181904">+</span>&nbsp;<span class="string" id="6181906">&#34;:&nbsp;&#34;</span><span class="op" id="6181910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6181914"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6181917">.</span><span class="ident" id="6181918">Println</span><span class="op" id="6181925">(</span><span class="ident" id="6181926"><a href="/go/printer/printer.go.html#6181843">msg</a></span><span class="op" id="6181929">...</span><span class="op" id="6181932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6181936">panic</span><span class="op" id="6181941">(</span><span class="string" id="6181942">&#34;go/printer&#34;</span><span class="op" id="6181954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6181957">}</span><br>
<span class="lineno"></span><span class="op" id="6181959">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="6181962">//&nbsp;commentsHaveNewline&nbsp;reports&nbsp;whether&nbsp;a&nbsp;list&nbsp;of&nbsp;comments&nbsp;belonging&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6182033">//&nbsp;an&nbsp;*ast.CommentGroup&nbsp;contains&nbsp;newlines.&nbsp;Because&nbsp;the&nbsp;position&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="6182109">//&nbsp;may&nbsp;only&nbsp;be&nbsp;partially&nbsp;correct,&nbsp;we&nbsp;also&nbsp;have&nbsp;to&nbsp;read&nbsp;the&nbsp;comment&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="6182182">func</span>&nbsp;<span class="op" id="6182187">(</span><span class="ident" id="6182188">p</span>&nbsp;<span class="op" id="6182190">*</span><span class="ident" id="6182191"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6182198">)</span>&nbsp;<span class="ident" id="6182200">commentsHaveNewline</span><span class="op" id="6182219">(</span><span class="ident" id="6182220">list</span>&nbsp;<span class="op" id="6182225">[</span><span class="op" id="6182226">]</span><span class="op" id="6182227">*</span><span class="ident" id="6182228"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6182231">.</span><span class="ident" id="6182232">Comment</span><span class="op" id="6182239">)</span>&nbsp;<span class="builtintype" id="6182241">bool</span>&nbsp;<span class="op" id="6182246">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182249">//&nbsp;len(list)&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182267">line</span>&nbsp;<span class="op" id="6182272">:=</span>&nbsp;<span class="ident" id="6182275"><a href="/go/printer/printer.go.html#6182188">p</a></span><span class="op" id="6182276">.</span><span class="ident" id="6182277">lineFor</span><span class="op" id="6182284">(</span><span class="ident" id="6182285"><a href="/go/printer/printer.go.html#6182220">list</a></span><span class="op" id="6182289">[</span><span class="num" id="6182290">0</span><span class="op" id="6182291">]</span><span class="op" id="6182292">.</span><span class="ident" id="6182293">Pos</span><span class="op" id="6182296">(</span><span class="op" id="6182297">)</span><span class="op" id="6182298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182301">for</span>&nbsp;<span class="ident" id="6182305">i</span><span class="op" id="6182306">,</span>&nbsp;<span class="ident" id="6182308">c</span>&nbsp;<span class="op" id="6182310">:=</span>&nbsp;<span class="keyword" id="6182313">range</span>&nbsp;<span class="ident" id="6182319"><a href="/go/printer/printer.go.html#6182220">list</a></span>&nbsp;<span class="op" id="6182324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182328">if</span>&nbsp;<span class="ident" id="6182331"><a href="/go/printer/printer.go.html#6182305">i</a></span>&nbsp;<span class="op" id="6182333">&gt;</span>&nbsp;<span class="num" id="6182335">0</span>&nbsp;<span class="op" id="6182337">&amp;&amp;</span>&nbsp;<span class="ident" id="6182340"><a href="/go/printer/printer.go.html#6182188">p</a></span><span class="op" id="6182341">.</span><span class="ident" id="6182342">lineFor</span><span class="op" id="6182349">(</span><span class="ident" id="6182350"><a href="/go/printer/printer.go.html#6182220">list</a></span><span class="op" id="6182354">[</span><span class="ident" id="6182355"><a href="/go/printer/printer.go.html#6182305">i</a></span><span class="op" id="6182356">]</span><span class="op" id="6182357">.</span><span class="ident" id="6182358">Pos</span><span class="op" id="6182361">(</span><span class="op" id="6182362">)</span><span class="op" id="6182363">)</span>&nbsp;<span class="op" id="6182365">!=</span>&nbsp;<span class="ident" id="6182368"><a href="/go/printer/printer.go.html#6182267">line</a></span>&nbsp;<span class="op" id="6182373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182378">//&nbsp;not&nbsp;all&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182418">return</span>&nbsp;<span class="ident" id="6182425">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182436">if</span>&nbsp;<span class="ident" id="6182439">t</span>&nbsp;<span class="op" id="6182441">:=</span>&nbsp;<span class="ident" id="6182444"><a href="/go/printer/printer.go.html#6182308">c</a></span><span class="op" id="6182445">.</span><span class="ident" id="6182446">Text</span><span class="op" id="6182450">;</span>&nbsp;<span class="builtinfunc" id="6182452">len</span><span class="op" id="6182455">(</span><span class="ident" id="6182456"><a href="/go/printer/printer.go.html#6182439">t</a></span><span class="op" id="6182457">)</span>&nbsp;<span class="op" id="6182459">&gt;=</span>&nbsp;<span class="num" id="6182462">2</span>&nbsp;<span class="op" id="6182464">&amp;&amp;</span>&nbsp;<span class="op" id="6182467">(</span><span class="ident" id="6182468"><a href="/go/printer/printer.go.html#6182439">t</a></span><span class="op" id="6182469">[</span><span class="num" id="6182470">1</span><span class="op" id="6182471">]</span>&nbsp;<span class="op" id="6182473">==</span>&nbsp;<span class="string" id="6182476">&#39;/&#39;</span>&nbsp;<span class="op" id="6182480">||</span>&nbsp;<span class="ident" id="6182483"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6182490">.</span><span class="ident" id="6182491">Contains</span><span class="op" id="6182499">(</span><span class="ident" id="6182500"><a href="/go/printer/printer.go.html#6182439">t</a></span><span class="op" id="6182501">,</span>&nbsp;<span class="string" id="6182503">&#34;\n&#34;</span><span class="op" id="6182507">)</span><span class="op" id="6182508">)</span>&nbsp;<span class="op" id="6182510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182515">return</span>&nbsp;<span class="ident" id="6182522">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182529">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182535">_</span>&nbsp;<span class="op" id="6182537">=</span>&nbsp;<span class="ident" id="6182539"><a href="/go/printer/printer.go.html#6182267">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182545">return</span>&nbsp;<span class="ident" id="6182552">false</span><br>
<span class="lineno"></span><span class="op" id="6182558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="6182561">func</span>&nbsp;<span class="op" id="6182566">(</span><span class="ident" id="6182567">p</span>&nbsp;<span class="op" id="6182569">*</span><span class="ident" id="6182570"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6182577">)</span>&nbsp;<span class="ident" id="6182579">nextComment</span><span class="op" id="6182590">(</span><span class="op" id="6182591">)</span>&nbsp;<span class="op" id="6182593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182596">for</span>&nbsp;<span class="ident" id="6182600"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182601">.</span><span class="ident" id="6182602">cindex</span>&nbsp;<span class="op" id="6182609">&lt;</span>&nbsp;<span class="builtinfunc" id="6182611">len</span><span class="op" id="6182614">(</span><span class="ident" id="6182615"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182616">.</span><span class="ident" id="6182617">comments</span><span class="op" id="6182625">)</span>&nbsp;<span class="op" id="6182627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182631">c</span>&nbsp;<span class="op" id="6182633">:=</span>&nbsp;<span class="ident" id="6182636"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182637">.</span><span class="ident" id="6182638">comments</span><span class="op" id="6182646">[</span><span class="ident" id="6182647"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182648">.</span><span class="ident" id="6182649">cindex</span><span class="op" id="6182655">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182659"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182660">.</span><span class="ident" id="6182661">cindex</span><span class="op" id="6182667">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182672">if</span>&nbsp;<span class="ident" id="6182675">list</span>&nbsp;<span class="op" id="6182680">:=</span>&nbsp;<span class="ident" id="6182683"><a href="/go/printer/printer.go.html#6182631">c</a></span><span class="op" id="6182684">.</span><span class="ident" id="6182685">List</span><span class="op" id="6182689">;</span>&nbsp;<span class="builtinfunc" id="6182691">len</span><span class="op" id="6182694">(</span><span class="ident" id="6182695"><a href="/go/printer/printer.go.html#6182675">list</a></span><span class="op" id="6182699">)</span>&nbsp;<span class="op" id="6182701">&gt;</span>&nbsp;<span class="num" id="6182703">0</span>&nbsp;<span class="op" id="6182705">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182710"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182711">.</span><span class="ident" id="6182712">comment</span>&nbsp;<span class="op" id="6182720">=</span>&nbsp;<span class="ident" id="6182722"><a href="/go/printer/printer.go.html#6182631">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182727"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182728">.</span><span class="ident" id="6182729">commentOffset</span>&nbsp;<span class="op" id="6182743">=</span>&nbsp;<span class="ident" id="6182745"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182746">.</span><span class="ident" id="6182747">posFor</span><span class="op" id="6182753">(</span><span class="ident" id="6182754"><a href="/go/printer/printer.go.html#6182675">list</a></span><span class="op" id="6182758">[</span><span class="num" id="6182759">0</span><span class="op" id="6182760">]</span><span class="op" id="6182761">.</span><span class="ident" id="6182762">Pos</span><span class="op" id="6182765">(</span><span class="op" id="6182766">)</span><span class="op" id="6182767">)</span><span class="op" id="6182768">.</span><span class="ident" id="6182769">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182779"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182780">.</span><span class="ident" id="6182781">commentNewline</span>&nbsp;<span class="op" id="6182796">=</span>&nbsp;<span class="ident" id="6182798"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182799">.</span><span class="ident" id="6182800">commentsHaveNewline</span><span class="op" id="6182819">(</span><span class="ident" id="6182820"><a href="/go/printer/printer.go.html#6182675">list</a></span><span class="op" id="6182824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6182829">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182838">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182842">//&nbsp;we&nbsp;should&nbsp;not&nbsp;reach&nbsp;here&nbsp;(correct&nbsp;ASTs&nbsp;don&#39;t&nbsp;have&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182903">//&nbsp;ast.CommentGroup&nbsp;nodes),&nbsp;but&nbsp;be&nbsp;conservative&nbsp;and&nbsp;try&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6182966">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6182969">//&nbsp;no&nbsp;more&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6182990"><a href="/go/printer/printer.go.html#6182567">p</a></span><span class="op" id="6182991">.</span><span class="ident" id="6182992">commentOffset</span>&nbsp;<span class="op" id="6183006">=</span>&nbsp;<span class="ident" id="6183008"><a href="/go/printer/printer.go.html#6178982">infinity</a></span><br>
<span class="lineno">145</span><span class="op" id="6183017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183020">//&nbsp;commentBefore&nbsp;returns&nbsp;true&nbsp;iff&nbsp;the&nbsp;current&nbsp;comment&nbsp;group&nbsp;occurs</span><br>
<span class="lineno"></span><span class="comment" id="6183087">//&nbsp;before&nbsp;the&nbsp;next&nbsp;position&nbsp;in&nbsp;the&nbsp;source&nbsp;code&nbsp;and&nbsp;printing&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="6183155">//&nbsp;not&nbsp;introduce&nbsp;implicit&nbsp;semicolons.</span><br>
<span class="lineno">150</span><span class="comment" id="6183193">//</span><br>
<span class="lineno"></span><span class="keyword" id="6183196">func</span>&nbsp;<span class="op" id="6183201">(</span><span class="ident" id="6183202">p</span>&nbsp;<span class="op" id="6183204">*</span><span class="ident" id="6183205"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6183212">)</span>&nbsp;<span class="ident" id="6183214">commentBefore</span><span class="op" id="6183227">(</span><span class="ident" id="6183228">next</span>&nbsp;<span class="ident" id="6183233"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6183238">.</span><span class="ident" id="6183239">Position</span><span class="op" id="6183247">)</span>&nbsp;<span class="builtintype" id="6183249">bool</span>&nbsp;<span class="op" id="6183254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183257">return</span>&nbsp;<span class="ident" id="6183264"><a href="/go/printer/printer.go.html#6183202">p</a></span><span class="op" id="6183265">.</span><span class="ident" id="6183266">commentOffset</span>&nbsp;<span class="op" id="6183280">&lt;</span>&nbsp;<span class="ident" id="6183282"><a href="/go/printer/printer.go.html#6183228">next</a></span><span class="op" id="6183286">.</span><span class="ident" id="6183287">Offset</span>&nbsp;<span class="op" id="6183294">&amp;&amp;</span>&nbsp;<span class="op" id="6183297">(</span><span class="op" id="6183298">!</span><span class="ident" id="6183299"><a href="/go/printer/printer.go.html#6183202">p</a></span><span class="op" id="6183300">.</span><span class="ident" id="6183301">impliedSemi</span>&nbsp;<span class="op" id="6183313">||</span>&nbsp;<span class="op" id="6183316">!</span><span class="ident" id="6183317"><a href="/go/printer/printer.go.html#6183202">p</a></span><span class="op" id="6183318">.</span><span class="ident" id="6183319">commentNewline</span><span class="op" id="6183333">)</span><br>
<span class="lineno"></span><span class="op" id="6183335">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="6183338">//&nbsp;commentSizeBefore&nbsp;returns&nbsp;the&nbsp;estimated&nbsp;size&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6183393">//&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;before&nbsp;the&nbsp;next&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="6183448">//</span><br>
<span class="lineno"></span><span class="keyword" id="6183451">func</span>&nbsp;<span class="op" id="6183456">(</span><span class="ident" id="6183457">p</span>&nbsp;<span class="op" id="6183459">*</span><span class="ident" id="6183460"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6183467">)</span>&nbsp;<span class="ident" id="6183469">commentSizeBefore</span><span class="op" id="6183486">(</span><span class="ident" id="6183487">next</span>&nbsp;<span class="ident" id="6183492"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6183497">.</span><span class="ident" id="6183498">Position</span><span class="op" id="6183506">)</span>&nbsp;<span class="builtintype" id="6183508">int</span>&nbsp;<span class="op" id="6183512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6183515">//&nbsp;save/restore&nbsp;current&nbsp;p.commentInfo&nbsp;(p.nextComment()&nbsp;modifies&nbsp;it)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183584">defer</span>&nbsp;<span class="keyword" id="6183590">func</span><span class="op" id="6183594">(</span><span class="ident" id="6183595">info</span>&nbsp;<span class="ident" id="6183600"><a href="/go/printer/printer.go.html#6179494">commentInfo</a></span><span class="op" id="6183611">)</span>&nbsp;<span class="op" id="6183613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183617"><a href="/go/printer/printer.go.html#6183457">p</a></span><span class="op" id="6183618">.</span><span class="ident" id="6183619">commentInfo</span>&nbsp;<span class="op" id="6183631">=</span>&nbsp;<span class="ident" id="6183633"><a href="/go/printer/printer.go.html#6183595">info</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183639">}</span><span class="op" id="6183640">(</span><span class="ident" id="6183641"><a href="/go/printer/printer.go.html#6183457">p</a></span><span class="op" id="6183642">.</span><span class="ident" id="6183643">commentInfo</span><span class="op" id="6183654">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183658">size</span>&nbsp;<span class="op" id="6183663">:=</span>&nbsp;<span class="num" id="6183666">0</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183669">for</span>&nbsp;<span class="ident" id="6183673"><a href="/go/printer/printer.go.html#6183457">p</a></span><span class="op" id="6183674">.</span><span class="ident" id="6183675">commentBefore</span><span class="op" id="6183688">(</span><span class="ident" id="6183689"><a href="/go/printer/printer.go.html#6183487">next</a></span><span class="op" id="6183693">)</span>&nbsp;<span class="op" id="6183695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183699">for</span>&nbsp;<span class="ident" id="6183703">_</span><span class="op" id="6183704">,</span>&nbsp;<span class="ident" id="6183706">c</span>&nbsp;<span class="op" id="6183708">:=</span>&nbsp;<span class="keyword" id="6183711">range</span>&nbsp;<span class="ident" id="6183717"><a href="/go/printer/printer.go.html#6183457">p</a></span><span class="op" id="6183718">.</span><span class="ident" id="6183719">comment</span><span class="op" id="6183726">.</span><span class="ident" id="6183727">List</span>&nbsp;<span class="op" id="6183732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183737"><a href="/go/printer/printer.go.html#6183658">size</a></span>&nbsp;<span class="op" id="6183742">+=</span>&nbsp;<span class="builtinfunc" id="6183745">len</span><span class="op" id="6183748">(</span><span class="ident" id="6183749"><a href="/go/printer/printer.go.html#6183706">c</a></span><span class="op" id="6183750">.</span><span class="ident" id="6183751">Text</span><span class="op" id="6183755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6183763"><a href="/go/printer/printer.go.html#6183457">p</a></span><span class="op" id="6183764">.</span><span class="ident" id="6183765">nextComment</span><span class="op" id="6183776">(</span><span class="op" id="6183777">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6183780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6183783">return</span>&nbsp;<span class="ident" id="6183790"><a href="/go/printer/printer.go.html#6183658">size</a></span><br>
<span class="lineno"></span><span class="op" id="6183795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6183798">//&nbsp;recordLine&nbsp;records&nbsp;the&nbsp;output&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;next&nbsp;non-whitespace</span><br>
<span class="lineno">175</span><span class="comment" id="6183871">//&nbsp;token&nbsp;in&nbsp;*linePtr.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate&nbsp;line&nbsp;number&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6183945">//&nbsp;formatted&nbsp;construct,&nbsp;independent&nbsp;of&nbsp;pending&nbsp;(not&nbsp;yet&nbsp;emitted)&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="6184021">//&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6184037">//</span><br>
<span class="lineno"></span><span class="keyword" id="6184040">func</span>&nbsp;<span class="op" id="6184045">(</span><span class="ident" id="6184046">p</span>&nbsp;<span class="op" id="6184048">*</span><span class="ident" id="6184049"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6184056">)</span>&nbsp;<span class="ident" id="6184058">recordLine</span><span class="op" id="6184068">(</span><span class="ident" id="6184069">linePtr</span>&nbsp;<span class="op" id="6184077">*</span><span class="builtintype" id="6184078">int</span><span class="op" id="6184081">)</span>&nbsp;<span class="op" id="6184083">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184086"><a href="/go/printer/printer.go.html#6184046">p</a></span><span class="op" id="6184087">.</span><span class="ident" id="6184088">linePtr</span>&nbsp;<span class="op" id="6184096">=</span>&nbsp;<span class="ident" id="6184098"><a href="/go/printer/printer.go.html#6184069">linePtr</a></span><br>
<span class="lineno"></span><span class="op" id="6184106">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6184109">//&nbsp;linesFrom&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;output&nbsp;lines&nbsp;between&nbsp;the&nbsp;current</span><br>
<span class="lineno"></span><span class="comment" id="6184177">//&nbsp;output&nbsp;line&nbsp;and&nbsp;the&nbsp;line&nbsp;argument,&nbsp;ignoring&nbsp;any&nbsp;pending&nbsp;(not&nbsp;yet</span><br>
<span class="lineno">185</span><span class="comment" id="6184245">//&nbsp;emitted)&nbsp;whitespace&nbsp;or&nbsp;comments.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate</span><br>
<span class="lineno"></span><span class="comment" id="6184315">//&nbsp;size&nbsp;(in&nbsp;number&nbsp;of&nbsp;lines)&nbsp;for&nbsp;a&nbsp;formatted&nbsp;construct.</span><br>
<span class="lineno"></span><span class="comment" id="6184371">//</span><br>
<span class="lineno"></span><span class="keyword" id="6184374">func</span>&nbsp;<span class="op" id="6184379">(</span><span class="ident" id="6184380">p</span>&nbsp;<span class="op" id="6184382">*</span><span class="ident" id="6184383"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6184390">)</span>&nbsp;<span class="ident" id="6184392">linesFrom</span><span class="op" id="6184401">(</span><span class="ident" id="6184402">line</span>&nbsp;<span class="builtintype" id="6184407">int</span><span class="op" id="6184410">)</span>&nbsp;<span class="builtintype" id="6184412">int</span>&nbsp;<span class="op" id="6184416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184419">return</span>&nbsp;<span class="ident" id="6184426"><a href="/go/printer/printer.go.html#6184380">p</a></span><span class="op" id="6184427">.</span><span class="ident" id="6184428">out</span><span class="op" id="6184431">.</span><span class="ident" id="6184432">Line</span>&nbsp;<span class="op" id="6184437">-</span>&nbsp;<span class="ident" id="6184439"><a href="/go/printer/printer.go.html#6184402">line</a></span><br>
<span class="lineno">190</span><span class="op" id="6184444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6184447">func</span>&nbsp;<span class="op" id="6184452">(</span><span class="ident" id="6184453">p</span>&nbsp;<span class="op" id="6184455">*</span><span class="ident" id="6184456"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6184463">)</span>&nbsp;<span class="ident" id="6184465">posFor</span><span class="op" id="6184471">(</span><span class="ident" id="6184472">pos</span>&nbsp;<span class="ident" id="6184476"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6184481">.</span><span class="ident" id="6184482">Pos</span><span class="op" id="6184485">)</span>&nbsp;<span class="ident" id="6184487"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6184492">.</span><span class="ident" id="6184493">Position</span>&nbsp;<span class="op" id="6184502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184505">//&nbsp;not&nbsp;used&nbsp;frequently&nbsp;enough&nbsp;to&nbsp;cache&nbsp;entire&nbsp;token.Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184567">return</span>&nbsp;<span class="ident" id="6184574"><a href="/go/printer/printer.go.html#6184453">p</a></span><span class="op" id="6184575">.</span><span class="ident" id="6184576">fset</span><span class="op" id="6184580">.</span><span class="ident" id="6184581">Position</span><span class="op" id="6184589">(</span><span class="ident" id="6184590"><a href="/go/printer/printer.go.html#6184472">pos</a></span><span class="op" id="6184593">)</span><br>
<span class="lineno">195</span><span class="op" id="6184595">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6184598">func</span>&nbsp;<span class="op" id="6184603">(</span><span class="ident" id="6184604">p</span>&nbsp;<span class="op" id="6184606">*</span><span class="ident" id="6184607"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6184614">)</span>&nbsp;<span class="ident" id="6184616">lineFor</span><span class="op" id="6184623">(</span><span class="ident" id="6184624">pos</span>&nbsp;<span class="ident" id="6184628"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6184633">.</span><span class="ident" id="6184634">Pos</span><span class="op" id="6184637">)</span>&nbsp;<span class="builtintype" id="6184639">int</span>&nbsp;<span class="op" id="6184643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184646">if</span>&nbsp;<span class="ident" id="6184649"><a href="/go/printer/printer.go.html#6184624">pos</a></span>&nbsp;<span class="op" id="6184653">!=</span>&nbsp;<span class="ident" id="6184656"><a href="/go/printer/printer.go.html#6184604">p</a></span><span class="op" id="6184657">.</span><span class="ident" id="6184658">cachedPos</span>&nbsp;<span class="op" id="6184668">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184672"><a href="/go/printer/printer.go.html#6184604">p</a></span><span class="op" id="6184673">.</span><span class="ident" id="6184674">cachedPos</span>&nbsp;<span class="op" id="6184684">=</span>&nbsp;<span class="ident" id="6184686"><a href="/go/printer/printer.go.html#6184624">pos</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6184692"><a href="/go/printer/printer.go.html#6184604">p</a></span><span class="op" id="6184693">.</span><span class="ident" id="6184694">cachedLine</span>&nbsp;<span class="op" id="6184705">=</span>&nbsp;<span class="ident" id="6184707"><a href="/go/printer/printer.go.html#6184604">p</a></span><span class="op" id="6184708">.</span><span class="ident" id="6184709">fset</span><span class="op" id="6184713">.</span><span class="ident" id="6184714">Position</span><span class="op" id="6184722">(</span><span class="ident" id="6184723"><a href="/go/printer/printer.go.html#6184624">pos</a></span><span class="op" id="6184726">)</span><span class="op" id="6184727">.</span><span class="ident" id="6184728">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6184734">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184737">return</span>&nbsp;<span class="ident" id="6184744"><a href="/go/printer/printer.go.html#6184604">p</a></span><span class="op" id="6184745">.</span><span class="ident" id="6184746">cachedLine</span><br>
<span class="lineno"></span><span class="op" id="6184757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="6184760">//&nbsp;atLineBegin&nbsp;emits&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary&nbsp;and&nbsp;prints&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="keyword" id="6184835">func</span>&nbsp;<span class="op" id="6184840">(</span><span class="ident" id="6184841">p</span>&nbsp;<span class="op" id="6184843">*</span><span class="ident" id="6184844"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6184851">)</span>&nbsp;<span class="ident" id="6184853">atLineBegin</span><span class="op" id="6184864">(</span><span class="ident" id="6184865">pos</span>&nbsp;<span class="ident" id="6184869"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6184874">.</span><span class="ident" id="6184875">Position</span><span class="op" id="6184883">)</span>&nbsp;<span class="op" id="6184885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6184888">//&nbsp;write&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6184928">if</span>&nbsp;<span class="ident" id="6184931"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6184932">.</span><span class="ident" id="6184933">Config</span><span class="op" id="6184939">.</span><span class="ident" id="6184940">Mode</span><span class="op" id="6184944">&amp;</span><span class="ident" id="6184945"><a href="/go/printer/printer.go.html#6213431">SourcePos</a></span>&nbsp;<span class="op" id="6184955">!=</span>&nbsp;<span class="num" id="6184958">0</span>&nbsp;<span class="op" id="6184960">&amp;&amp;</span>&nbsp;<span class="ident" id="6184963"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6184966">.</span><span class="ident" id="6184967">IsValid</span><span class="op" id="6184974">(</span><span class="op" id="6184975">)</span>&nbsp;<span class="op" id="6184977">&amp;&amp;</span>&nbsp;<span class="op" id="6184980">(</span><span class="ident" id="6184981"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6184982">.</span><span class="ident" id="6184983">out</span><span class="op" id="6184986">.</span><span class="ident" id="6184987">Line</span>&nbsp;<span class="op" id="6184992">!=</span>&nbsp;<span class="ident" id="6184995"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6184998">.</span><span class="ident" id="6184999">Line</span>&nbsp;<span class="op" id="6185004">||</span>&nbsp;<span class="ident" id="6185007"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185008">.</span><span class="ident" id="6185009">out</span><span class="op" id="6185012">.</span><span class="ident" id="6185013">Filename</span>&nbsp;<span class="op" id="6185022">!=</span>&nbsp;<span class="ident" id="6185025"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6185028">.</span><span class="ident" id="6185029">Filename</span><span class="op" id="6185037">)</span>&nbsp;<span class="op" id="6185039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185043"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185044">.</span><span class="ident" id="6185045">output</span>&nbsp;<span class="op" id="6185052">=</span>&nbsp;<span class="builtinfunc" id="6185054">append</span><span class="op" id="6185060">(</span><span class="ident" id="6185061"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185062">.</span><span class="ident" id="6185063">output</span><span class="op" id="6185069">,</span>&nbsp;<span class="ident" id="6185071"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6185080">.</span><span class="ident" id="6185081">Escape</span><span class="op" id="6185087">)</span>&nbsp;<span class="comment" id="6185089">//&nbsp;protect&nbsp;&#39;\n&#39;&nbsp;in&nbsp;//line&nbsp;from&nbsp;tabwriter&nbsp;interpretation</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185147"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185148">.</span><span class="ident" id="6185149">output</span>&nbsp;<span class="op" id="6185156">=</span>&nbsp;<span class="builtinfunc" id="6185158">append</span><span class="op" id="6185164">(</span><span class="ident" id="6185165"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185166">.</span><span class="ident" id="6185167">output</span><span class="op" id="6185173">,</span>&nbsp;<span class="ident" id="6185175"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6185178">.</span><span class="ident" id="6185179">Sprintf</span><span class="op" id="6185186">(</span><span class="string" id="6185187">&#34;//line&nbsp;%s:%d\n&#34;</span><span class="op" id="6185203">,</span>&nbsp;<span class="ident" id="6185205"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6185208">.</span><span class="ident" id="6185209">Filename</span><span class="op" id="6185217">,</span>&nbsp;<span class="ident" id="6185219"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6185222">.</span><span class="ident" id="6185223">Line</span><span class="op" id="6185227">)</span><span class="op" id="6185228">...</span><span class="op" id="6185231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185235"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185236">.</span><span class="ident" id="6185237">output</span>&nbsp;<span class="op" id="6185244">=</span>&nbsp;<span class="builtinfunc" id="6185246">append</span><span class="op" id="6185252">(</span><span class="ident" id="6185253"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185254">.</span><span class="ident" id="6185255">output</span><span class="op" id="6185261">,</span>&nbsp;<span class="ident" id="6185263"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6185272">.</span><span class="ident" id="6185273">Escape</span><span class="op" id="6185279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185283">//&nbsp;p.out&nbsp;must&nbsp;match&nbsp;the&nbsp;//line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185324"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185325">.</span><span class="ident" id="6185326">out</span><span class="op" id="6185329">.</span><span class="ident" id="6185330">Filename</span>&nbsp;<span class="op" id="6185339">=</span>&nbsp;<span class="ident" id="6185341"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6185344">.</span><span class="ident" id="6185345">Filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185356"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185357">.</span><span class="ident" id="6185358">out</span><span class="op" id="6185361">.</span><span class="ident" id="6185362">Line</span>&nbsp;<span class="op" id="6185367">=</span>&nbsp;<span class="ident" id="6185369"><a href="/go/printer/printer.go.html#6184865">pos</a></span><span class="op" id="6185372">.</span><span class="ident" id="6185373">Line</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185383">//&nbsp;write&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185405">//&nbsp;use&nbsp;&#34;hard&#34;&nbsp;htabs&nbsp;-&nbsp;indentation&nbsp;columns</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185448">//&nbsp;must&nbsp;not&nbsp;be&nbsp;discarded&nbsp;by&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185491">n</span>&nbsp;<span class="op" id="6185493">:=</span>&nbsp;<span class="ident" id="6185496"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185497">.</span><span class="ident" id="6185498">Config</span><span class="op" id="6185504">.</span><span class="ident" id="6185505">Indent</span>&nbsp;<span class="op" id="6185512">+</span>&nbsp;<span class="ident" id="6185514"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185515">.</span><span class="ident" id="6185516">indent</span>&nbsp;<span class="comment" id="6185523">//&nbsp;include&nbsp;base&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185552">for</span>&nbsp;<span class="ident" id="6185556">i</span>&nbsp;<span class="op" id="6185558">:=</span>&nbsp;<span class="num" id="6185561">0</span><span class="op" id="6185562">;</span>&nbsp;<span class="ident" id="6185564"><a href="/go/printer/printer.go.html#6185556">i</a></span>&nbsp;<span class="op" id="6185566">&lt;</span>&nbsp;<span class="ident" id="6185568"><a href="/go/printer/printer.go.html#6185491">n</a></span><span class="op" id="6185569">;</span>&nbsp;<span class="ident" id="6185571"><a href="/go/printer/printer.go.html#6185556">i</a></span><span class="op" id="6185572">++</span>&nbsp;<span class="op" id="6185575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185579"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185580">.</span><span class="ident" id="6185581">output</span>&nbsp;<span class="op" id="6185588">=</span>&nbsp;<span class="builtinfunc" id="6185590">append</span><span class="op" id="6185596">(</span><span class="ident" id="6185597"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185598">.</span><span class="ident" id="6185599">output</span><span class="op" id="6185605">,</span>&nbsp;<span class="string" id="6185607">&#39;\t&#39;</span><span class="op" id="6185611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185614">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185618">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185639"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185640">.</span><span class="ident" id="6185641">pos</span><span class="op" id="6185644">.</span><span class="ident" id="6185645">Offset</span>&nbsp;<span class="op" id="6185652">+=</span>&nbsp;<span class="ident" id="6185655"><a href="/go/printer/printer.go.html#6185491">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185658"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185659">.</span><span class="ident" id="6185660">pos</span><span class="op" id="6185663">.</span><span class="ident" id="6185664">Column</span>&nbsp;<span class="op" id="6185671">+=</span>&nbsp;<span class="ident" id="6185674"><a href="/go/printer/printer.go.html#6185491">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185677"><a href="/go/printer/printer.go.html#6184841">p</a></span><span class="op" id="6185678">.</span><span class="ident" id="6185679">out</span><span class="op" id="6185682">.</span><span class="ident" id="6185683">Column</span>&nbsp;<span class="op" id="6185690">+=</span>&nbsp;<span class="ident" id="6185693"><a href="/go/printer/printer.go.html#6185491">n</a></span><br>
<span class="lineno"></span><span class="op" id="6185695">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="6185698">//&nbsp;writeByte&nbsp;writes&nbsp;ch&nbsp;n&nbsp;times&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos.</span><br>
<span class="lineno"></span><span class="keyword" id="6185760">func</span>&nbsp;<span class="op" id="6185765">(</span><span class="ident" id="6185766">p</span>&nbsp;<span class="op" id="6185768">*</span><span class="ident" id="6185769"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6185776">)</span>&nbsp;<span class="ident" id="6185778">writeByte</span><span class="op" id="6185787">(</span><span class="ident" id="6185788">ch</span>&nbsp;<span class="builtintype" id="6185791">byte</span><span class="op" id="6185795">,</span>&nbsp;<span class="ident" id="6185797">n</span>&nbsp;<span class="builtintype" id="6185799">int</span><span class="op" id="6185802">)</span>&nbsp;<span class="op" id="6185804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185807">if</span>&nbsp;<span class="ident" id="6185810"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185811">.</span><span class="ident" id="6185812">out</span><span class="op" id="6185815">.</span><span class="ident" id="6185816">Column</span>&nbsp;<span class="op" id="6185823">==</span>&nbsp;<span class="num" id="6185826">1</span>&nbsp;<span class="op" id="6185828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185832"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185833">.</span><span class="ident" id="6185834">atLineBegin</span><span class="op" id="6185845">(</span><span class="ident" id="6185846"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185847">.</span><span class="ident" id="6185848">pos</span><span class="op" id="6185851">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185854">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185858">for</span>&nbsp;<span class="ident" id="6185862">i</span>&nbsp;<span class="op" id="6185864">:=</span>&nbsp;<span class="num" id="6185867">0</span><span class="op" id="6185868">;</span>&nbsp;<span class="ident" id="6185870"><a href="/go/printer/printer.go.html#6185862">i</a></span>&nbsp;<span class="op" id="6185872">&lt;</span>&nbsp;<span class="ident" id="6185874"><a href="/go/printer/printer.go.html#6185797">n</a></span><span class="op" id="6185875">;</span>&nbsp;<span class="ident" id="6185877"><a href="/go/printer/printer.go.html#6185862">i</a></span><span class="op" id="6185878">++</span>&nbsp;<span class="op" id="6185881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185885"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185886">.</span><span class="ident" id="6185887">output</span>&nbsp;<span class="op" id="6185894">=</span>&nbsp;<span class="builtinfunc" id="6185896">append</span><span class="op" id="6185902">(</span><span class="ident" id="6185903"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185904">.</span><span class="ident" id="6185905">output</span><span class="op" id="6185911">,</span>&nbsp;<span class="ident" id="6185913"><a href="/go/printer/printer.go.html#6185788">ch</a></span><span class="op" id="6185915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6185918">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6185922">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185943"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185944">.</span><span class="ident" id="6185945">pos</span><span class="op" id="6185948">.</span><span class="ident" id="6185949">Offset</span>&nbsp;<span class="op" id="6185956">+=</span>&nbsp;<span class="ident" id="6185959"><a href="/go/printer/printer.go.html#6185797">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6185962">if</span>&nbsp;<span class="ident" id="6185965"><a href="/go/printer/printer.go.html#6185788">ch</a></span>&nbsp;<span class="op" id="6185968">==</span>&nbsp;<span class="string" id="6185971">&#39;\n&#39;</span>&nbsp;<span class="op" id="6185976">||</span>&nbsp;<span class="ident" id="6185979"><a href="/go/printer/printer.go.html#6185788">ch</a></span>&nbsp;<span class="op" id="6185982">==</span>&nbsp;<span class="string" id="6185985">&#39;\f&#39;</span>&nbsp;<span class="op" id="6185990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6185994"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6185995">.</span><span class="ident" id="6185996">pos</span><span class="op" id="6185999">.</span><span class="ident" id="6186000">Line</span>&nbsp;<span class="op" id="6186005">+=</span>&nbsp;<span class="ident" id="6186008"><a href="/go/printer/printer.go.html#6185797">n</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186012"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6186013">.</span><span class="ident" id="6186014">out</span><span class="op" id="6186017">.</span><span class="ident" id="6186018">Line</span>&nbsp;<span class="op" id="6186023">+=</span>&nbsp;<span class="ident" id="6186026"><a href="/go/printer/printer.go.html#6185797">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186030"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6186031">.</span><span class="ident" id="6186032">pos</span><span class="op" id="6186035">.</span><span class="ident" id="6186036">Column</span>&nbsp;<span class="op" id="6186043">=</span>&nbsp;<span class="num" id="6186045">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186049"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6186050">.</span><span class="ident" id="6186051">out</span><span class="op" id="6186054">.</span><span class="ident" id="6186055">Column</span>&nbsp;<span class="op" id="6186062">=</span>&nbsp;<span class="num" id="6186064">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186068">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186076">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186079"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6186080">.</span><span class="ident" id="6186081">pos</span><span class="op" id="6186084">.</span><span class="ident" id="6186085">Column</span>&nbsp;<span class="op" id="6186092">+=</span>&nbsp;<span class="ident" id="6186095"><a href="/go/printer/printer.go.html#6185797">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186098"><a href="/go/printer/printer.go.html#6185766">p</a></span><span class="op" id="6186099">.</span><span class="ident" id="6186100">out</span><span class="op" id="6186103">.</span><span class="ident" id="6186104">Column</span>&nbsp;<span class="op" id="6186111">+=</span>&nbsp;<span class="ident" id="6186114"><a href="/go/printer/printer.go.html#6185797">n</a></span><br>
<span class="lineno"></span><span class="op" id="6186116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6186119">//&nbsp;writeString&nbsp;writes&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos,&nbsp;p.out,</span><br>
<span class="lineno">255</span><span class="comment" id="6186192">//&nbsp;and&nbsp;p.last.&nbsp;If&nbsp;isLit&nbsp;is&nbsp;set,&nbsp;s&nbsp;is&nbsp;escaped&nbsp;w/&nbsp;tabwriter.Escape&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="6186268">//&nbsp;to&nbsp;protect&nbsp;s&nbsp;from&nbsp;being&nbsp;interpreted&nbsp;by&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><span class="comment" id="6186325">//</span><br>
<span class="lineno"></span><span class="comment" id="6186328">//&nbsp;Note:&nbsp;writeString&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;write&nbsp;Go&nbsp;tokens,&nbsp;literals,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6186396">//&nbsp;comments,&nbsp;all&nbsp;of&nbsp;which&nbsp;must&nbsp;be&nbsp;written&nbsp;literally.&nbsp;Thus,&nbsp;it&nbsp;is&nbsp;correct</span><br>
<span class="lineno">260</span><span class="comment" id="6186469">//&nbsp;to&nbsp;always&nbsp;set&nbsp;isLit&nbsp;=&nbsp;true.&nbsp;However,&nbsp;setting&nbsp;it&nbsp;explicitly&nbsp;only&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6186541">//&nbsp;needed&nbsp;(i.e.,&nbsp;when&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;that&nbsp;s&nbsp;contains&nbsp;no&nbsp;tabs&nbsp;or&nbsp;line&nbsp;breaks)</span><br>
<span class="lineno"></span><span class="comment" id="6186617">//&nbsp;avoids&nbsp;processing&nbsp;extra&nbsp;escape&nbsp;characters&nbsp;and&nbsp;reduces&nbsp;run&nbsp;time&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6186690">//&nbsp;printer&nbsp;benchmark&nbsp;by&nbsp;up&nbsp;to&nbsp;10%.</span><br>
<span class="lineno"></span><span class="comment" id="6186725">//</span><br>
<span class="lineno">265</span><span class="keyword" id="6186728">func</span>&nbsp;<span class="op" id="6186733">(</span><span class="ident" id="6186734">p</span>&nbsp;<span class="op" id="6186736">*</span><span class="ident" id="6186737"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6186744">)</span>&nbsp;<span class="ident" id="6186746">writeString</span><span class="op" id="6186757">(</span><span class="ident" id="6186758">pos</span>&nbsp;<span class="ident" id="6186762"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6186767">.</span><span class="ident" id="6186768">Position</span><span class="op" id="6186776">,</span>&nbsp;<span class="ident" id="6186778">s</span>&nbsp;<span class="builtintype" id="6186780">string</span><span class="op" id="6186786">,</span>&nbsp;<span class="ident" id="6186788">isLit</span>&nbsp;<span class="builtintype" id="6186794">bool</span><span class="op" id="6186798">)</span>&nbsp;<span class="op" id="6186800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186803">if</span>&nbsp;<span class="ident" id="6186806"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6186807">.</span><span class="ident" id="6186808">out</span><span class="op" id="6186811">.</span><span class="ident" id="6186812">Column</span>&nbsp;<span class="op" id="6186819">==</span>&nbsp;<span class="num" id="6186822">1</span>&nbsp;<span class="op" id="6186824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6186828"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6186829">.</span><span class="ident" id="6186830">atLineBegin</span><span class="op" id="6186841">(</span><span class="ident" id="6186842"><a href="/go/printer/printer.go.html#6186758">pos</a></span><span class="op" id="6186845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6186848">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6186852">if</span>&nbsp;<span class="ident" id="6186855"><a href="/go/printer/printer.go.html#6186758">pos</a></span><span class="op" id="6186858">.</span><span class="ident" id="6186859">IsValid</span><span class="op" id="6186866">(</span><span class="op" id="6186867">)</span>&nbsp;<span class="op" id="6186869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6186873">//&nbsp;update&nbsp;p.pos&nbsp;(if&nbsp;pos&nbsp;is&nbsp;invalid,&nbsp;continue&nbsp;with&nbsp;existing&nbsp;p.pos)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6186941">//&nbsp;Note:&nbsp;Must&nbsp;do&nbsp;this&nbsp;after&nbsp;handling&nbsp;line&nbsp;beginnings&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187004">//&nbsp;atLineBegin&nbsp;updates&nbsp;p.pos&nbsp;if&nbsp;there&#39;s&nbsp;indentation,&nbsp;but&nbsp;p.pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187069">//&nbsp;is&nbsp;the&nbsp;position&nbsp;of&nbsp;s.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187096"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187097">.</span><span class="ident" id="6187098">pos</span>&nbsp;<span class="op" id="6187102">=</span>&nbsp;<span class="ident" id="6187104"><a href="/go/printer/printer.go.html#6186758">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187109">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187113">if</span>&nbsp;<span class="ident" id="6187116"><a href="/go/printer/printer.go.html#6186788">isLit</a></span>&nbsp;<span class="op" id="6187122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187126">//&nbsp;Protect&nbsp;s&nbsp;such&nbsp;that&nbsp;is&nbsp;passes&nbsp;through&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187183">//&nbsp;unchanged.&nbsp;Note&nbsp;that&nbsp;valid&nbsp;Go&nbsp;programs&nbsp;cannot&nbsp;contain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187242">//&nbsp;tabwriter.Escape&nbsp;bytes&nbsp;since&nbsp;they&nbsp;do&nbsp;not&nbsp;appear&nbsp;in&nbsp;legal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187304">//&nbsp;UTF-8&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187326"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187327">.</span><span class="ident" id="6187328">output</span>&nbsp;<span class="op" id="6187335">=</span>&nbsp;<span class="builtinfunc" id="6187337">append</span><span class="op" id="6187343">(</span><span class="ident" id="6187344"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187345">.</span><span class="ident" id="6187346">output</span><span class="op" id="6187352">,</span>&nbsp;<span class="ident" id="6187354"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6187363">.</span><span class="ident" id="6187364">Escape</span><span class="op" id="6187370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187373">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187377">if</span>&nbsp;<span class="ident" id="6187380"><a href="/go/printer/printer.go.html#6178937">debug</a></span>&nbsp;<span class="op" id="6187386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187390"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187391">.</span><span class="ident" id="6187392">output</span>&nbsp;<span class="op" id="6187399">=</span>&nbsp;<span class="builtinfunc" id="6187401">append</span><span class="op" id="6187407">(</span><span class="ident" id="6187408"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187409">.</span><span class="ident" id="6187410">output</span><span class="op" id="6187416">,</span>&nbsp;<span class="ident" id="6187418"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6187421">.</span><span class="ident" id="6187422">Sprintf</span><span class="op" id="6187429">(</span><span class="string" id="6187430">&#34;/*%s*/&#34;</span><span class="op" id="6187438">,</span>&nbsp;<span class="ident" id="6187440"><a href="/go/printer/printer.go.html#6186758">pos</a></span><span class="op" id="6187443">)</span><span class="op" id="6187444">...</span><span class="op" id="6187447">)</span>&nbsp;<span class="comment" id="6187449">//&nbsp;do&nbsp;not&nbsp;update&nbsp;p.pos!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187477"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187478">.</span><span class="ident" id="6187479">output</span>&nbsp;<span class="op" id="6187486">=</span>&nbsp;<span class="builtinfunc" id="6187488">append</span><span class="op" id="6187494">(</span><span class="ident" id="6187495"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187496">.</span><span class="ident" id="6187497">output</span><span class="op" id="6187503">,</span>&nbsp;<span class="ident" id="6187505"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187506">...</span><span class="op" id="6187509">)</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187513">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187534">nlines</span>&nbsp;<span class="op" id="6187541">:=</span>&nbsp;<span class="num" id="6187544">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187547">var</span>&nbsp;<span class="ident" id="6187551">li</span>&nbsp;<span class="builtintype" id="6187554">int</span>&nbsp;<span class="comment" id="6187558">//&nbsp;index&nbsp;of&nbsp;last&nbsp;newline;&nbsp;valid&nbsp;if&nbsp;nlines&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187605">for</span>&nbsp;<span class="ident" id="6187609">i</span>&nbsp;<span class="op" id="6187611">:=</span>&nbsp;<span class="num" id="6187614">0</span><span class="op" id="6187615">;</span>&nbsp;<span class="ident" id="6187617"><a href="/go/printer/printer.go.html#6187609">i</a></span>&nbsp;<span class="op" id="6187619">&lt;</span>&nbsp;<span class="builtinfunc" id="6187621">len</span><span class="op" id="6187624">(</span><span class="ident" id="6187625"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187626">)</span><span class="op" id="6187627">;</span>&nbsp;<span class="ident" id="6187629"><a href="/go/printer/printer.go.html#6187609">i</a></span><span class="op" id="6187630">++</span>&nbsp;<span class="op" id="6187633">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6187637">//&nbsp;Go&nbsp;tokens&nbsp;cannot&nbsp;contain&nbsp;&#39;\f&#39;&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;look&nbsp;for&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187697">if</span>&nbsp;<span class="ident" id="6187700"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187701">[</span><span class="ident" id="6187702"><a href="/go/printer/printer.go.html#6187609">i</a></span><span class="op" id="6187703">]</span>&nbsp;<span class="op" id="6187705">==</span>&nbsp;<span class="string" id="6187708">&#39;\n&#39;</span>&nbsp;<span class="op" id="6187713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187718"><a href="/go/printer/printer.go.html#6187534">nlines</a></span><span class="op" id="6187724">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187730"><a href="/go/printer/printer.go.html#6187551">li</a></span>&nbsp;<span class="op" id="6187733">=</span>&nbsp;<span class="ident" id="6187735"><a href="/go/printer/printer.go.html#6187609">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187739">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187745"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187746">.</span><span class="ident" id="6187747">pos</span><span class="op" id="6187750">.</span><span class="ident" id="6187751">Offset</span>&nbsp;<span class="op" id="6187758">+=</span>&nbsp;<span class="builtinfunc" id="6187761">len</span><span class="op" id="6187764">(</span><span class="ident" id="6187765"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187769">if</span>&nbsp;<span class="ident" id="6187772"><a href="/go/printer/printer.go.html#6187534">nlines</a></span>&nbsp;<span class="op" id="6187779">&gt;</span>&nbsp;<span class="num" id="6187781">0</span>&nbsp;<span class="op" id="6187783">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187787"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187788">.</span><span class="ident" id="6187789">pos</span><span class="op" id="6187792">.</span><span class="ident" id="6187793">Line</span>&nbsp;<span class="op" id="6187798">+=</span>&nbsp;<span class="ident" id="6187801"><a href="/go/printer/printer.go.html#6187534">nlines</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187810"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187811">.</span><span class="ident" id="6187812">out</span><span class="op" id="6187815">.</span><span class="ident" id="6187816">Line</span>&nbsp;<span class="op" id="6187821">+=</span>&nbsp;<span class="ident" id="6187824"><a href="/go/printer/printer.go.html#6187534">nlines</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187833">c</span>&nbsp;<span class="op" id="6187835">:=</span>&nbsp;<span class="builtinfunc" id="6187838">len</span><span class="op" id="6187841">(</span><span class="ident" id="6187842"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187843">)</span>&nbsp;<span class="op" id="6187845">-</span>&nbsp;<span class="ident" id="6187847"><a href="/go/printer/printer.go.html#6187551">li</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187852"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187853">.</span><span class="ident" id="6187854">pos</span><span class="op" id="6187857">.</span><span class="ident" id="6187858">Column</span>&nbsp;<span class="op" id="6187865">=</span>&nbsp;<span class="ident" id="6187867"><a href="/go/printer/printer.go.html#6187833">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187871"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187872">.</span><span class="ident" id="6187873">out</span><span class="op" id="6187876">.</span><span class="ident" id="6187877">Column</span>&nbsp;<span class="op" id="6187884">=</span>&nbsp;<span class="ident" id="6187886"><a href="/go/printer/printer.go.html#6187833">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187889">}</span>&nbsp;<span class="keyword" id="6187891">else</span>&nbsp;<span class="op" id="6187896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187900"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187901">.</span><span class="ident" id="6187902">pos</span><span class="op" id="6187905">.</span><span class="ident" id="6187906">Column</span>&nbsp;<span class="op" id="6187913">+=</span>&nbsp;<span class="builtinfunc" id="6187916">len</span><span class="op" id="6187919">(</span><span class="ident" id="6187920"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187921">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187925"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187926">.</span><span class="ident" id="6187927">out</span><span class="op" id="6187930">.</span><span class="ident" id="6187931">Column</span>&nbsp;<span class="op" id="6187938">+=</span>&nbsp;<span class="builtinfunc" id="6187941">len</span><span class="op" id="6187944">(</span><span class="ident" id="6187945"><a href="/go/printer/printer.go.html#6186778">s</a></span><span class="op" id="6187946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6187949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6187953">if</span>&nbsp;<span class="ident" id="6187956"><a href="/go/printer/printer.go.html#6186788">isLit</a></span>&nbsp;<span class="op" id="6187962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6187966"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187967">.</span><span class="ident" id="6187968">output</span>&nbsp;<span class="op" id="6187975">=</span>&nbsp;<span class="builtinfunc" id="6187977">append</span><span class="op" id="6187983">(</span><span class="ident" id="6187984"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6187985">.</span><span class="ident" id="6187986">output</span><span class="op" id="6187992">,</span>&nbsp;<span class="ident" id="6187994"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6188003">.</span><span class="ident" id="6188004">Escape</span><span class="op" id="6188010">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188017"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6188018">.</span><span class="ident" id="6188019">last</span>&nbsp;<span class="op" id="6188024">=</span>&nbsp;<span class="ident" id="6188026"><a href="/go/printer/printer.go.html#6186734">p</a></span><span class="op" id="6188027">.</span><span class="ident" id="6188028">pos</span><br>
<span class="lineno"></span><span class="op" id="6188032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="6188035">//&nbsp;writeCommentPrefix&nbsp;writes&nbsp;the&nbsp;whitespace&nbsp;before&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="6188097">//&nbsp;If&nbsp;there&nbsp;is&nbsp;any&nbsp;pending&nbsp;whitespace,&nbsp;it&nbsp;consumes&nbsp;as&nbsp;much&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6188159">//&nbsp;it&nbsp;as&nbsp;is&nbsp;likely&nbsp;to&nbsp;help&nbsp;position&nbsp;the&nbsp;comment&nbsp;nicely.</span><br>
<span class="lineno"></span><span class="comment" id="6188215">//&nbsp;pos&nbsp;is&nbsp;the&nbsp;comment&nbsp;position,&nbsp;next&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;item</span><br>
<span class="lineno"></span><span class="comment" id="6188277">//&nbsp;after&nbsp;all&nbsp;pending&nbsp;comments,&nbsp;prev&nbsp;is&nbsp;the&nbsp;previous&nbsp;comment&nbsp;in</span><br>
<span class="lineno">325</span><span class="comment" id="6188340">//&nbsp;a&nbsp;group&nbsp;of&nbsp;comments&nbsp;(or&nbsp;nil),&nbsp;and&nbsp;tok&nbsp;is&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="6188400">//</span><br>
<span class="lineno"></span><span class="keyword" id="6188403">func</span>&nbsp;<span class="op" id="6188408">(</span><span class="ident" id="6188409">p</span>&nbsp;<span class="op" id="6188411">*</span><span class="ident" id="6188412"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6188419">)</span>&nbsp;<span class="ident" id="6188421">writeCommentPrefix</span><span class="op" id="6188439">(</span><span class="ident" id="6188440">pos</span><span class="op" id="6188443">,</span>&nbsp;<span class="ident" id="6188445">next</span>&nbsp;<span class="ident" id="6188450"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6188455">.</span><span class="ident" id="6188456">Position</span><span class="op" id="6188464">,</span>&nbsp;<span class="ident" id="6188466">prev</span><span class="op" id="6188470">,</span>&nbsp;<span class="ident" id="6188472">comment</span>&nbsp;<span class="op" id="6188480">*</span><span class="ident" id="6188481"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6188484">.</span><span class="ident" id="6188485">Comment</span><span class="op" id="6188492">,</span>&nbsp;<span class="ident" id="6188494">tok</span>&nbsp;<span class="ident" id="6188498"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6188503">.</span><span class="ident" id="6188504">Token</span><span class="op" id="6188509">)</span>&nbsp;<span class="op" id="6188511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188514">if</span>&nbsp;<span class="builtinfunc" id="6188517">len</span><span class="op" id="6188520">(</span><span class="ident" id="6188521"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6188522">.</span><span class="ident" id="6188523">output</span><span class="op" id="6188529">)</span>&nbsp;<span class="op" id="6188531">==</span>&nbsp;<span class="num" id="6188534">0</span>&nbsp;<span class="op" id="6188536">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188540">//&nbsp;the&nbsp;comment&nbsp;is&nbsp;the&nbsp;first&nbsp;item&nbsp;to&nbsp;be&nbsp;printed&nbsp;-&nbsp;don&#39;t&nbsp;write&nbsp;any&nbsp;whitespace</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188618">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188630">if</span>&nbsp;<span class="ident" id="6188633"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6188636">.</span><span class="ident" id="6188637">IsValid</span><span class="op" id="6188644">(</span><span class="op" id="6188645">)</span>&nbsp;<span class="op" id="6188647">&amp;&amp;</span>&nbsp;<span class="ident" id="6188650"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6188653">.</span><span class="ident" id="6188654">Filename</span>&nbsp;<span class="op" id="6188663">!=</span>&nbsp;<span class="ident" id="6188666"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6188667">.</span><span class="ident" id="6188668">last</span><span class="op" id="6188672">.</span><span class="ident" id="6188673">Filename</span>&nbsp;<span class="op" id="6188682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188686">//&nbsp;comment&nbsp;in&nbsp;a&nbsp;different&nbsp;file&nbsp;-&nbsp;separate&nbsp;with&nbsp;newlines</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188744"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6188745">.</span><span class="ident" id="6188746">writeByte</span><span class="op" id="6188755">(</span><span class="string" id="6188756">&#39;\f&#39;</span><span class="op" id="6188760">,</span>&nbsp;<span class="ident" id="6188762"><a href="/go/printer/printer.go.html#6178869">maxNewlines</a></span><span class="op" id="6188773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188777">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6188785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188789">if</span>&nbsp;<span class="ident" id="6188792"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6188795">.</span><span class="ident" id="6188796">Line</span>&nbsp;<span class="op" id="6188801">==</span>&nbsp;<span class="ident" id="6188804"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6188805">.</span><span class="ident" id="6188806">last</span><span class="op" id="6188810">.</span><span class="ident" id="6188811">Line</span>&nbsp;<span class="op" id="6188816">&amp;&amp;</span>&nbsp;<span class="op" id="6188819">(</span><span class="ident" id="6188820"><a href="/go/printer/printer.go.html#6188466">prev</a></span>&nbsp;<span class="op" id="6188825">==</span>&nbsp;<span class="ident" id="6188828">nil</span>&nbsp;<span class="op" id="6188832">||</span>&nbsp;<span class="ident" id="6188835"><a href="/go/printer/printer.go.html#6188466">prev</a></span><span class="op" id="6188839">.</span><span class="ident" id="6188840">Text</span><span class="op" id="6188844">[</span><span class="num" id="6188845">1</span><span class="op" id="6188846">]</span>&nbsp;<span class="op" id="6188848">!=</span>&nbsp;<span class="string" id="6188851">&#39;/&#39;</span><span class="op" id="6188854">)</span>&nbsp;<span class="op" id="6188856">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188860">//&nbsp;comment&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;last&nbsp;item:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188904">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6188946">hasSep</span>&nbsp;<span class="op" id="6188953">:=</span>&nbsp;<span class="ident" id="6188956">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6188964">if</span>&nbsp;<span class="ident" id="6188967"><a href="/go/printer/printer.go.html#6188466">prev</a></span>&nbsp;<span class="op" id="6188972">==</span>&nbsp;<span class="ident" id="6188975">nil</span>&nbsp;<span class="op" id="6188979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6188984">//&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;comment&nbsp;group</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189023">j</span>&nbsp;<span class="op" id="6189025">:=</span>&nbsp;<span class="num" id="6189028">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189033">for</span>&nbsp;<span class="ident" id="6189037">i</span><span class="op" id="6189038">,</span>&nbsp;<span class="ident" id="6189040">ch</span>&nbsp;<span class="op" id="6189043">:=</span>&nbsp;<span class="keyword" id="6189046">range</span>&nbsp;<span class="ident" id="6189052"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189053">.</span><span class="ident" id="6189054">wsbuf</span>&nbsp;<span class="op" id="6189060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189066">switch</span>&nbsp;<span class="ident" id="6189073"><a href="/go/printer/printer.go.html#6189040">ch</a></span>&nbsp;<span class="op" id="6189076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189082">case</span>&nbsp;<span class="ident" id="6189087"><a href="/go/printer/printer.go.html#6179064">blank</a></span><span class="op" id="6189092">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189099">//&nbsp;ignore&nbsp;any&nbsp;blanks&nbsp;before&nbsp;a&nbsp;comment</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189142"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189143">.</span><span class="ident" id="6189144">wsbuf</span><span class="op" id="6189149">[</span><span class="ident" id="6189150"><a href="/go/printer/printer.go.html#6189037">i</a></span><span class="op" id="6189151">]</span>&nbsp;<span class="op" id="6189153">=</span>&nbsp;<span class="ident" id="6189155"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189167">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189180">case</span>&nbsp;<span class="ident" id="6189185"><a href="/go/printer/printer.go.html#6179092">vtab</a></span><span class="op" id="6189189">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189196">//&nbsp;respect&nbsp;existing&nbsp;tabs&nbsp;-&nbsp;important</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189238">//&nbsp;for&nbsp;proper&nbsp;formatting&nbsp;of&nbsp;commented&nbsp;structs</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189289"><a href="/go/printer/printer.go.html#6188946">hasSep</a></span>&nbsp;<span class="op" id="6189296">=</span>&nbsp;<span class="ident" id="6189298">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189308">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189321">case</span>&nbsp;<span class="ident" id="6189326"><a href="/go/printer/printer.go.html#6179179">indent</a></span><span class="op" id="6189332">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189339">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189373">continue</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189392"><a href="/go/printer/printer.go.html#6189023">j</a></span>&nbsp;<span class="op" id="6189394">=</span>&nbsp;<span class="ident" id="6189396"><a href="/go/printer/printer.go.html#6189037">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189402">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189416"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189417">.</span><span class="ident" id="6189418">writeWhitespace</span><span class="op" id="6189433">(</span><span class="ident" id="6189434"><a href="/go/printer/printer.go.html#6189023">j</a></span><span class="op" id="6189435">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189443">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189490">if</span>&nbsp;<span class="op" id="6189493">!</span><span class="ident" id="6189494"><a href="/go/printer/printer.go.html#6188946">hasSep</a></span>&nbsp;<span class="op" id="6189501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189506">sep</span>&nbsp;<span class="op" id="6189510">:=</span>&nbsp;<span class="builtintype" id="6189513">byte</span><span class="op" id="6189517">(</span><span class="string" id="6189518">&#39;\t&#39;</span><span class="op" id="6189522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189527">if</span>&nbsp;<span class="ident" id="6189530"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6189533">.</span><span class="ident" id="6189534">Line</span>&nbsp;<span class="op" id="6189539">==</span>&nbsp;<span class="ident" id="6189542"><a href="/go/printer/printer.go.html#6188445">next</a></span><span class="op" id="6189546">.</span><span class="ident" id="6189547">Line</span>&nbsp;<span class="op" id="6189552">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189558">//&nbsp;next&nbsp;item&nbsp;is&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189610">//&nbsp;(which&nbsp;must&nbsp;be&nbsp;a&nbsp;/*-style&nbsp;comment):&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189662">//&nbsp;with&nbsp;a&nbsp;blank&nbsp;instead&nbsp;of&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189699"><a href="/go/printer/printer.go.html#6189506">sep</a></span>&nbsp;<span class="op" id="6189703">=</span>&nbsp;<span class="string" id="6189705">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189712">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189717"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189718">.</span><span class="ident" id="6189719">writeByte</span><span class="op" id="6189728">(</span><span class="ident" id="6189729"><a href="/go/printer/printer.go.html#6189506">sep</a></span><span class="op" id="6189732">,</span>&nbsp;<span class="num" id="6189734">1</span><span class="op" id="6189735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6189743">}</span>&nbsp;<span class="keyword" id="6189745">else</span>&nbsp;<span class="op" id="6189750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189754">//&nbsp;comment&nbsp;on&nbsp;a&nbsp;different&nbsp;line:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189788">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189831">droppedLinebreak</span>&nbsp;<span class="op" id="6189848">:=</span>&nbsp;<span class="ident" id="6189851">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189859">j</span>&nbsp;<span class="op" id="6189861">:=</span>&nbsp;<span class="num" id="6189864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189868">for</span>&nbsp;<span class="ident" id="6189872">i</span><span class="op" id="6189873">,</span>&nbsp;<span class="ident" id="6189875">ch</span>&nbsp;<span class="op" id="6189878">:=</span>&nbsp;<span class="keyword" id="6189881">range</span>&nbsp;<span class="ident" id="6189887"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189888">.</span><span class="ident" id="6189889">wsbuf</span>&nbsp;<span class="op" id="6189895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189900">switch</span>&nbsp;<span class="ident" id="6189907"><a href="/go/printer/printer.go.html#6189875">ch</a></span>&nbsp;<span class="op" id="6189910">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6189915">case</span>&nbsp;<span class="ident" id="6189920"><a href="/go/printer/printer.go.html#6179064">blank</a></span><span class="op" id="6189925">,</span>&nbsp;<span class="ident" id="6189927"><a href="/go/printer/printer.go.html#6179092">vtab</a></span><span class="op" id="6189931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6189937">//&nbsp;ignore&nbsp;any&nbsp;horizontal&nbsp;whitespace&nbsp;before&nbsp;line&nbsp;breaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6189996"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6189997">.</span><span class="ident" id="6189998">wsbuf</span><span class="op" id="6190003">[</span><span class="ident" id="6190004"><a href="/go/printer/printer.go.html#6189872">i</a></span><span class="op" id="6190005">]</span>&nbsp;<span class="op" id="6190007">=</span>&nbsp;<span class="ident" id="6190009"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190020">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190032">case</span>&nbsp;<span class="ident" id="6190037"><a href="/go/printer/printer.go.html#6179179">indent</a></span><span class="op" id="6190043">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190049">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190082">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190094">case</span>&nbsp;<span class="ident" id="6190099"><a href="/go/printer/printer.go.html#6179207">unindent</a></span><span class="op" id="6190107">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190113">//&nbsp;if&nbsp;this&nbsp;is&nbsp;not&nbsp;the&nbsp;last&nbsp;unindent,&nbsp;apply&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190163">//&nbsp;as&nbsp;it&nbsp;is&nbsp;(likely)&nbsp;belonging&nbsp;to&nbsp;the&nbsp;last</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190210">//&nbsp;construct&nbsp;(e.g.,&nbsp;a&nbsp;multi-line&nbsp;expression&nbsp;list)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190264">//&nbsp;and&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;closing&nbsp;a&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190306">if</span>&nbsp;<span class="ident" id="6190309"><a href="/go/printer/printer.go.html#6189872">i</a></span><span class="op" id="6190310">+</span><span class="num" id="6190311">1</span>&nbsp;<span class="op" id="6190313">&lt;</span>&nbsp;<span class="builtinfunc" id="6190315">len</span><span class="op" id="6190318">(</span><span class="ident" id="6190319"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6190320">.</span><span class="ident" id="6190321">wsbuf</span><span class="op" id="6190326">)</span>&nbsp;<span class="op" id="6190328">&amp;&amp;</span>&nbsp;<span class="ident" id="6190331"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6190332">.</span><span class="ident" id="6190333">wsbuf</span><span class="op" id="6190338">[</span><span class="ident" id="6190339"><a href="/go/printer/printer.go.html#6189872">i</a></span><span class="op" id="6190340">+</span><span class="num" id="6190341">1</span><span class="op" id="6190342">]</span>&nbsp;<span class="op" id="6190344">==</span>&nbsp;<span class="ident" id="6190347"><a href="/go/printer/printer.go.html#6179207">unindent</a></span>&nbsp;<span class="op" id="6190356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190363">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190376">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190382">//&nbsp;if&nbsp;the&nbsp;next&nbsp;token&nbsp;is&nbsp;not&nbsp;a&nbsp;closing&nbsp;},&nbsp;apply&nbsp;the&nbsp;unindent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190446">//&nbsp;if&nbsp;it&nbsp;appears&nbsp;that&nbsp;the&nbsp;comment&nbsp;is&nbsp;aligned&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190504">//&nbsp;token;&nbsp;otherwise&nbsp;assume&nbsp;the&nbsp;unindent&nbsp;is&nbsp;part&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190561">//&nbsp;closing&nbsp;block&nbsp;and&nbsp;stop&nbsp;(this&nbsp;scenario&nbsp;appears&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190619">//&nbsp;comments&nbsp;before&nbsp;a&nbsp;case&nbsp;label&nbsp;where&nbsp;the&nbsp;comments</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190674">//&nbsp;apply&nbsp;to&nbsp;the&nbsp;next&nbsp;case&nbsp;instead&nbsp;of&nbsp;the&nbsp;current&nbsp;one)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190732">if</span>&nbsp;<span class="ident" id="6190735"><a href="/go/printer/printer.go.html#6188494">tok</a></span>&nbsp;<span class="op" id="6190739">!=</span>&nbsp;<span class="ident" id="6190742"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6190747">.</span><span class="ident" id="6190748">RBRACE</span>&nbsp;<span class="op" id="6190755">&amp;&amp;</span>&nbsp;<span class="ident" id="6190758"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6190761">.</span><span class="ident" id="6190762">Column</span>&nbsp;<span class="op" id="6190769">==</span>&nbsp;<span class="ident" id="6190772"><a href="/go/printer/printer.go.html#6188445">next</a></span><span class="op" id="6190776">.</span><span class="ident" id="6190777">Column</span>&nbsp;<span class="op" id="6190784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190809">case</span>&nbsp;<span class="ident" id="6190814"><a href="/go/printer/printer.go.html#6179121">newline</a></span><span class="op" id="6190821">,</span>&nbsp;<span class="ident" id="6190823"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span><span class="op" id="6190831">:</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190837"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6190838">.</span><span class="ident" id="6190839">wsbuf</span><span class="op" id="6190844">[</span><span class="ident" id="6190845"><a href="/go/printer/printer.go.html#6189872">i</a></span><span class="op" id="6190846">]</span>&nbsp;<span class="op" id="6190848">=</span>&nbsp;<span class="ident" id="6190850"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190861"><a href="/go/printer/printer.go.html#6189831">droppedLinebreak</a></span>&nbsp;<span class="op" id="6190878">=</span>&nbsp;<span class="ident" id="6190880"><a href="/go/printer/printer.go.html#6188466">prev</a></span>&nbsp;<span class="op" id="6190885">==</span>&nbsp;<span class="ident" id="6190888">nil</span>&nbsp;<span class="comment" id="6190892">//&nbsp;record&nbsp;only&nbsp;if&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190943"><a href="/go/printer/printer.go.html#6189859">j</a></span>&nbsp;<span class="op" id="6190945">=</span>&nbsp;<span class="ident" id="6190947"><a href="/go/printer/printer.go.html#6189872">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6190952">break</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6190960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6190964"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6190965">.</span><span class="ident" id="6190966">writeWhitespace</span><span class="op" id="6190981">(</span><span class="ident" id="6190982"><a href="/go/printer/printer.go.html#6189859">j</a></span><span class="op" id="6190983">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6190988">//&nbsp;determine&nbsp;number&nbsp;of&nbsp;linebreaks&nbsp;before&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191043">n</span>&nbsp;<span class="op" id="6191045">:=</span>&nbsp;<span class="num" id="6191048">0</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191052">if</span>&nbsp;<span class="ident" id="6191055"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6191058">.</span><span class="ident" id="6191059">IsValid</span><span class="op" id="6191066">(</span><span class="op" id="6191067">)</span>&nbsp;<span class="op" id="6191069">&amp;&amp;</span>&nbsp;<span class="ident" id="6191072"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6191073">.</span><span class="ident" id="6191074">last</span><span class="op" id="6191078">.</span><span class="ident" id="6191079">IsValid</span><span class="op" id="6191086">(</span><span class="op" id="6191087">)</span>&nbsp;<span class="op" id="6191089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191094"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191096">=</span>&nbsp;<span class="ident" id="6191098"><a href="/go/printer/printer.go.html#6188440">pos</a></span><span class="op" id="6191101">.</span><span class="ident" id="6191102">Line</span>&nbsp;<span class="op" id="6191107">-</span>&nbsp;<span class="ident" id="6191109"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6191110">.</span><span class="ident" id="6191111">last</span><span class="op" id="6191115">.</span><span class="ident" id="6191116">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191124">if</span>&nbsp;<span class="ident" id="6191127"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191129">&lt;</span>&nbsp;<span class="num" id="6191131">0</span>&nbsp;<span class="op" id="6191133">{</span>&nbsp;<span class="comment" id="6191135">//&nbsp;should&nbsp;never&nbsp;happen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191162"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191164">=</span>&nbsp;<span class="num" id="6191166">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191171">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191175">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191180">//&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;only&nbsp;(p.indent&nbsp;==&nbsp;0),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191234">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;newline&nbsp;if&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191286">//&nbsp;this&nbsp;preserves&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;documentation</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191340">//&nbsp;comments&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;(issue&nbsp;2570)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191394">if</span>&nbsp;<span class="ident" id="6191397"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6191398">.</span><span class="ident" id="6191399">indent</span>&nbsp;<span class="op" id="6191406">==</span>&nbsp;<span class="num" id="6191409">0</span>&nbsp;<span class="op" id="6191411">&amp;&amp;</span>&nbsp;<span class="ident" id="6191414"><a href="/go/printer/printer.go.html#6189831">droppedLinebreak</a></span>&nbsp;<span class="op" id="6191431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191436"><a href="/go/printer/printer.go.html#6191043">n</a></span><span class="op" id="6191437">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191442">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191447">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191495">//&nbsp;if&nbsp;the&nbsp;previous&nbsp;comment&nbsp;was&nbsp;a&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191543">if</span>&nbsp;<span class="ident" id="6191546"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191548">==</span>&nbsp;<span class="num" id="6191551">0</span>&nbsp;<span class="op" id="6191553">&amp;&amp;</span>&nbsp;<span class="ident" id="6191556"><a href="/go/printer/printer.go.html#6188466">prev</a></span>&nbsp;<span class="op" id="6191561">!=</span>&nbsp;<span class="ident" id="6191564">nil</span>&nbsp;<span class="op" id="6191568">&amp;&amp;</span>&nbsp;<span class="ident" id="6191571"><a href="/go/printer/printer.go.html#6188466">prev</a></span><span class="op" id="6191575">.</span><span class="ident" id="6191576">Text</span><span class="op" id="6191580">[</span><span class="num" id="6191581">1</span><span class="op" id="6191582">]</span>&nbsp;<span class="op" id="6191584">==</span>&nbsp;<span class="string" id="6191587">&#39;/&#39;</span>&nbsp;<span class="op" id="6191591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191596"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191598">=</span>&nbsp;<span class="num" id="6191600">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191604">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191609">if</span>&nbsp;<span class="ident" id="6191612"><a href="/go/printer/printer.go.html#6191043">n</a></span>&nbsp;<span class="op" id="6191614">&gt;</span>&nbsp;<span class="num" id="6191616">0</span>&nbsp;<span class="op" id="6191618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191623">//&nbsp;use&nbsp;formfeeds&nbsp;to&nbsp;break&nbsp;columns&nbsp;before&nbsp;a&nbsp;comment;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191678">//&nbsp;this&nbsp;is&nbsp;analogous&nbsp;to&nbsp;using&nbsp;formfeeds&nbsp;to&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6191733">//&nbsp;individual&nbsp;lines&nbsp;of&nbsp;/*-style&nbsp;comments</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6191777"><a href="/go/printer/printer.go.html#6188409">p</a></span><span class="op" id="6191778">.</span><span class="ident" id="6191779">writeByte</span><span class="op" id="6191788">(</span><span class="string" id="6191789">&#39;\f&#39;</span><span class="op" id="6191793">,</span>&nbsp;<span class="ident" id="6191795"><a href="/go/printer/printer.go.html#6202923">nlimit</a></span><span class="op" id="6191801">(</span><span class="ident" id="6191802"><a href="/go/printer/printer.go.html#6191043">n</a></span><span class="op" id="6191803">)</span><span class="op" id="6191804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6191811">}</span><br>
<span class="lineno"></span><span class="op" id="6191813">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span><span class="comment" id="6191816">//&nbsp;Returns&nbsp;true&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="6191863">//&nbsp;(only&nbsp;tabs&nbsp;and&nbsp;blanks&nbsp;can&nbsp;appear&nbsp;in&nbsp;the&nbsp;printer&#39;s&nbsp;context).</span><br>
<span class="lineno"></span><span class="comment" id="6191926">//</span><br>
<span class="lineno"></span><span class="keyword" id="6191929">func</span>&nbsp;<span class="ident" id="6191934">isBlank</span><span class="op" id="6191941">(</span><span class="ident" id="6191942">s</span>&nbsp;<span class="builtintype" id="6191944">string</span><span class="op" id="6191950">)</span>&nbsp;<span class="builtintype" id="6191952">bool</span>&nbsp;<span class="op" id="6191957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191960">for</span>&nbsp;<span class="ident" id="6191964">i</span>&nbsp;<span class="op" id="6191966">:=</span>&nbsp;<span class="num" id="6191969">0</span><span class="op" id="6191970">;</span>&nbsp;<span class="ident" id="6191972"><a href="/go/printer/printer.go.html#6191964">i</a></span>&nbsp;<span class="op" id="6191974">&lt;</span>&nbsp;<span class="builtinfunc" id="6191976">len</span><span class="op" id="6191979">(</span><span class="ident" id="6191980"><a href="/go/printer/printer.go.html#6191942">s</a></span><span class="op" id="6191981">)</span><span class="op" id="6191982">;</span>&nbsp;<span class="ident" id="6191984"><a href="/go/printer/printer.go.html#6191964">i</a></span><span class="op" id="6191985">++</span>&nbsp;<span class="op" id="6191988">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6191992">if</span>&nbsp;<span class="ident" id="6191995"><a href="/go/printer/printer.go.html#6191942">s</a></span><span class="op" id="6191996">[</span><span class="ident" id="6191997"><a href="/go/printer/printer.go.html#6191964">i</a></span><span class="op" id="6191998">]</span>&nbsp;<span class="op" id="6192000">&gt;</span>&nbsp;<span class="string" id="6192002">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6192006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192011">return</span>&nbsp;<span class="ident" id="6192018">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192032">return</span>&nbsp;<span class="ident" id="6192039">true</span><br>
<span class="lineno">460</span><span class="op" id="6192044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6192047">//&nbsp;commonPrefix&nbsp;returns&nbsp;the&nbsp;common&nbsp;prefix&nbsp;of&nbsp;a&nbsp;and&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="6192101">func</span>&nbsp;<span class="ident" id="6192106">commonPrefix</span><span class="op" id="6192118">(</span><span class="ident" id="6192119">a</span><span class="op" id="6192120">,</span>&nbsp;<span class="ident" id="6192122">b</span>&nbsp;<span class="builtintype" id="6192124">string</span><span class="op" id="6192130">)</span>&nbsp;<span class="builtintype" id="6192132">string</span>&nbsp;<span class="op" id="6192139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192142">i</span>&nbsp;<span class="op" id="6192144">:=</span>&nbsp;<span class="num" id="6192147">0</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192150">for</span>&nbsp;<span class="ident" id="6192154"><a href="/go/printer/printer.go.html#6192142">i</a></span>&nbsp;<span class="op" id="6192156">&lt;</span>&nbsp;<span class="builtinfunc" id="6192158">len</span><span class="op" id="6192161">(</span><span class="ident" id="6192162"><a href="/go/printer/printer.go.html#6192119">a</a></span><span class="op" id="6192163">)</span>&nbsp;<span class="op" id="6192165">&amp;&amp;</span>&nbsp;<span class="ident" id="6192168"><a href="/go/printer/printer.go.html#6192142">i</a></span>&nbsp;<span class="op" id="6192170">&lt;</span>&nbsp;<span class="builtinfunc" id="6192172">len</span><span class="op" id="6192175">(</span><span class="ident" id="6192176"><a href="/go/printer/printer.go.html#6192122">b</a></span><span class="op" id="6192177">)</span>&nbsp;<span class="op" id="6192179">&amp;&amp;</span>&nbsp;<span class="ident" id="6192182"><a href="/go/printer/printer.go.html#6192119">a</a></span><span class="op" id="6192183">[</span><span class="ident" id="6192184"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192185">]</span>&nbsp;<span class="op" id="6192187">==</span>&nbsp;<span class="ident" id="6192190"><a href="/go/printer/printer.go.html#6192122">b</a></span><span class="op" id="6192191">[</span><span class="ident" id="6192192"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192193">]</span>&nbsp;<span class="op" id="6192195">&amp;&amp;</span>&nbsp;<span class="op" id="6192198">(</span><span class="ident" id="6192199"><a href="/go/printer/printer.go.html#6192119">a</a></span><span class="op" id="6192200">[</span><span class="ident" id="6192201"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192202">]</span>&nbsp;<span class="op" id="6192204">&lt;=</span>&nbsp;<span class="string" id="6192207">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6192211">||</span>&nbsp;<span class="ident" id="6192214"><a href="/go/printer/printer.go.html#6192119">a</a></span><span class="op" id="6192215">[</span><span class="ident" id="6192216"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192217">]</span>&nbsp;<span class="op" id="6192219">==</span>&nbsp;<span class="string" id="6192222">&#39;*&#39;</span><span class="op" id="6192225">)</span>&nbsp;<span class="op" id="6192227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6192231"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192232">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192236">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192239">return</span>&nbsp;<span class="ident" id="6192246"><a href="/go/printer/printer.go.html#6192119">a</a></span><span class="op" id="6192247">[</span><span class="num" id="6192248">0</span><span class="op" id="6192249">:</span><span class="ident" id="6192250"><a href="/go/printer/printer.go.html#6192142">i</a></span><span class="op" id="6192251">]</span><br>
<span class="lineno"></span><span class="op" id="6192253">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="6192256">//&nbsp;trimRight&nbsp;returns&nbsp;s&nbsp;with&nbsp;trailing&nbsp;whitespace&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="6192313">func</span>&nbsp;<span class="ident" id="6192318">trimRight</span><span class="op" id="6192327">(</span><span class="ident" id="6192328">s</span>&nbsp;<span class="builtintype" id="6192330">string</span><span class="op" id="6192336">)</span>&nbsp;<span class="builtintype" id="6192338">string</span>&nbsp;<span class="op" id="6192345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192348">return</span>&nbsp;<span class="ident" id="6192355"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6192362">.</span><span class="ident" id="6192363">TrimRightFunc</span><span class="op" id="6192376">(</span><span class="ident" id="6192377"><a href="/go/printer/printer.go.html#6192328">s</a></span><span class="op" id="6192378">,</span>&nbsp;<span class="ident" id="6192380"><a href="/go/printer/printer.go.html#6178847">unicode</a></span><span class="op" id="6192387">.</span><span class="ident" id="6192388">IsSpace</span><span class="op" id="6192395">)</span><br>
<span class="lineno"></span><span class="op" id="6192397">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="6192400">//&nbsp;stripCommonPrefix&nbsp;removes&nbsp;a&nbsp;common&nbsp;prefix&nbsp;from&nbsp;/*-style&nbsp;comment&nbsp;lines&nbsp;(unless&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6192484">//&nbsp;comment&nbsp;line&nbsp;is&nbsp;indented,&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;line&nbsp;have&nbsp;some&nbsp;form&nbsp;of&nbsp;space&nbsp;prefix).</span><br>
<span class="lineno"></span><span class="comment" id="6192569">//&nbsp;The&nbsp;prefix&nbsp;is&nbsp;computed&nbsp;using&nbsp;heuristics&nbsp;such&nbsp;that&nbsp;is&nbsp;likely&nbsp;that&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span><span class="comment" id="6192649">//&nbsp;contents&nbsp;are&nbsp;nicely&nbsp;laid&nbsp;out&nbsp;after&nbsp;re-printing&nbsp;each&nbsp;line&nbsp;using&nbsp;the&nbsp;printer&#39;s</span><br>
<span class="lineno">480</span><span class="comment" id="6192729">//&nbsp;current&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="comment" id="6192753">//</span><br>
<span class="lineno"></span><span class="keyword" id="6192756">func</span>&nbsp;<span class="ident" id="6192761">stripCommonPrefix</span><span class="op" id="6192778">(</span><span class="ident" id="6192779">lines</span>&nbsp;<span class="op" id="6192785">[</span><span class="op" id="6192786">]</span><span class="builtintype" id="6192787">string</span><span class="op" id="6192793">)</span>&nbsp;<span class="op" id="6192795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192798">if</span>&nbsp;<span class="builtinfunc" id="6192801">len</span><span class="op" id="6192804">(</span><span class="ident" id="6192805"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6192810">)</span>&nbsp;<span class="op" id="6192812">&lt;=</span>&nbsp;<span class="num" id="6192815">1</span>&nbsp;<span class="op" id="6192817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6192821">return</span>&nbsp;<span class="comment" id="6192828">//&nbsp;at&nbsp;most&nbsp;one&nbsp;line&nbsp;-&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6192865">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6192868">//&nbsp;len(lines)&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6192888">//&nbsp;The&nbsp;heuristic&nbsp;in&nbsp;this&nbsp;function&nbsp;tries&nbsp;to&nbsp;handle&nbsp;a&nbsp;few</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6192945">//&nbsp;common&nbsp;patterns&nbsp;of&nbsp;/*-style&nbsp;comments:&nbsp;Comments&nbsp;where</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193002">//&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;are&nbsp;aligned&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193056">//&nbsp;rest&nbsp;of&nbsp;the&nbsp;comment&nbsp;text&nbsp;is&nbsp;aligned&nbsp;and&nbsp;indented&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193114">//&nbsp;blanks&nbsp;or&nbsp;tabs,&nbsp;cases&nbsp;with&nbsp;a&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193172">//&nbsp;on&nbsp;the&nbsp;left,&nbsp;and&nbsp;cases&nbsp;where&nbsp;the&nbsp;closing&nbsp;*/&nbsp;is&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193230">//&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;last&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193271">//&nbsp;Compute&nbsp;maximum&nbsp;common&nbsp;white&nbsp;prefix&nbsp;of&nbsp;all&nbsp;but&nbsp;the&nbsp;first,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193333">//&nbsp;last,&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;and&nbsp;replace&nbsp;blank&nbsp;lines&nbsp;with&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193395">//&nbsp;lines&nbsp;(the&nbsp;first&nbsp;line&nbsp;starts&nbsp;with&nbsp;/*&nbsp;and&nbsp;has&nbsp;no&nbsp;prefix).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193456">//&nbsp;In&nbsp;case&nbsp;of&nbsp;two-line&nbsp;comments,&nbsp;consider&nbsp;the&nbsp;last&nbsp;line&nbsp;for</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193517">//&nbsp;the&nbsp;prefix&nbsp;computation&nbsp;since&nbsp;otherwise&nbsp;the&nbsp;prefix&nbsp;would</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193577">//&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193591">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193595">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;line&nbsp;are&nbsp;never&nbsp;empty&nbsp;(they</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193655">//&nbsp;contain&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;respectively)&nbsp;and</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6193715">//&nbsp;thus&nbsp;they&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by&nbsp;the&nbsp;blank&nbsp;line&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193769">var</span>&nbsp;<span class="ident" id="6193773">prefix</span>&nbsp;<span class="builtintype" id="6193780">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193788">if</span>&nbsp;<span class="builtinfunc" id="6193791">len</span><span class="op" id="6193794">(</span><span class="ident" id="6193795"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6193800">)</span>&nbsp;<span class="op" id="6193802">&gt;</span>&nbsp;<span class="num" id="6193804">2</span>&nbsp;<span class="op" id="6193806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193810">first</span>&nbsp;<span class="op" id="6193816">:=</span>&nbsp;<span class="ident" id="6193819">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193826">for</span>&nbsp;<span class="ident" id="6193830">i</span><span class="op" id="6193831">,</span>&nbsp;<span class="ident" id="6193833">line</span>&nbsp;<span class="op" id="6193838">:=</span>&nbsp;<span class="keyword" id="6193841">range</span>&nbsp;<span class="ident" id="6193847"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6193852">[</span><span class="num" id="6193853">1</span>&nbsp;<span class="op" id="6193855">:</span>&nbsp;<span class="builtinfunc" id="6193857">len</span><span class="op" id="6193860">(</span><span class="ident" id="6193861"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6193866">)</span><span class="op" id="6193867">-</span><span class="num" id="6193868">1</span><span class="op" id="6193869">]</span>&nbsp;<span class="op" id="6193871">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193876">switch</span>&nbsp;<span class="op" id="6193883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193888">case</span>&nbsp;<span class="ident" id="6193893"><a href="/go/printer/printer.go.html#6191934">isBlank</a></span><span class="op" id="6193900">(</span><span class="ident" id="6193901"><a href="/go/printer/printer.go.html#6193833">line</a></span><span class="op" id="6193905">)</span><span class="op" id="6193906">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193912"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6193917">[</span><span class="num" id="6193918">1</span><span class="op" id="6193919">+</span><span class="ident" id="6193920"><a href="/go/printer/printer.go.html#6193830">i</a></span><span class="op" id="6193921">]</span>&nbsp;<span class="op" id="6193923">=</span>&nbsp;<span class="string" id="6193925">&#34;&#34;</span>&nbsp;<span class="comment" id="6193928">//&nbsp;range&nbsp;starts&nbsp;with&nbsp;lines[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6193961">case</span>&nbsp;<span class="ident" id="6193966"><a href="/go/printer/printer.go.html#6193810">first</a></span><span class="op" id="6193971">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6193977"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6193984">=</span>&nbsp;<span class="ident" id="6193986"><a href="/go/printer/printer.go.html#6192106">commonPrefix</a></span><span class="op" id="6193998">(</span><span class="ident" id="6193999"><a href="/go/printer/printer.go.html#6193833">line</a></span><span class="op" id="6194003">,</span>&nbsp;<span class="ident" id="6194005"><a href="/go/printer/printer.go.html#6193833">line</a></span><span class="op" id="6194009">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194015"><a href="/go/printer/printer.go.html#6193810">first</a></span>&nbsp;<span class="op" id="6194021">=</span>&nbsp;<span class="ident" id="6194023">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6194032">default</span><span class="op" id="6194039">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194045"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6194052">=</span>&nbsp;<span class="ident" id="6194054"><a href="/go/printer/printer.go.html#6192106">commonPrefix</a></span><span class="op" id="6194066">(</span><span class="ident" id="6194067"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6194073">,</span>&nbsp;<span class="ident" id="6194075"><a href="/go/printer/printer.go.html#6193833">line</a></span><span class="op" id="6194079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194088">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194091">}</span>&nbsp;<span class="keyword" id="6194093">else</span>&nbsp;<span class="op" id="6194098">{</span>&nbsp;<span class="comment" id="6194100">//&nbsp;len(lines)&nbsp;==&nbsp;2,&nbsp;lines&nbsp;cannot&nbsp;be&nbsp;blank&nbsp;(contain&nbsp;/*&nbsp;and&nbsp;*/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194164">line</span>&nbsp;<span class="op" id="6194169">:=</span>&nbsp;<span class="ident" id="6194172"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6194177">[</span><span class="num" id="6194178">1</span><span class="op" id="6194179">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194183"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6194190">=</span>&nbsp;<span class="ident" id="6194192"><a href="/go/printer/printer.go.html#6192106">commonPrefix</a></span><span class="op" id="6194204">(</span><span class="ident" id="6194205"><a href="/go/printer/printer.go.html#6194164">line</a></span><span class="op" id="6194209">,</span>&nbsp;<span class="ident" id="6194211"><a href="/go/printer/printer.go.html#6194164">line</a></span><span class="op" id="6194215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194218">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194222">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*&nbsp;Check&nbsp;for&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;&nbsp;and&nbsp;correct&nbsp;prefix&nbsp;accordingly.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194302">lineOfStars</span>&nbsp;<span class="op" id="6194314">:=</span>&nbsp;<span class="ident" id="6194317">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6194324">if</span>&nbsp;<span class="ident" id="6194327">i</span>&nbsp;<span class="op" id="6194329">:=</span>&nbsp;<span class="ident" id="6194332"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6194339">.</span><span class="ident" id="6194340">Index</span><span class="op" id="6194345">(</span><span class="ident" id="6194346"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6194352">,</span>&nbsp;<span class="string" id="6194354">&#34;*&#34;</span><span class="op" id="6194357">)</span><span class="op" id="6194358">;</span>&nbsp;<span class="ident" id="6194360"><a href="/go/printer/printer.go.html#6194327">i</a></span>&nbsp;<span class="op" id="6194362">&gt;=</span>&nbsp;<span class="num" id="6194365">0</span>&nbsp;<span class="op" id="6194367">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194371">//&nbsp;Line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6194399">if</span>&nbsp;<span class="ident" id="6194402"><a href="/go/printer/printer.go.html#6194327">i</a></span>&nbsp;<span class="op" id="6194404">&gt;</span>&nbsp;<span class="num" id="6194406">0</span>&nbsp;<span class="op" id="6194408">&amp;&amp;</span>&nbsp;<span class="ident" id="6194411"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6194417">[</span><span class="ident" id="6194418"><a href="/go/printer/printer.go.html#6194327">i</a></span><span class="op" id="6194419">-</span><span class="num" id="6194420">1</span><span class="op" id="6194421">]</span>&nbsp;<span class="op" id="6194423">==</span>&nbsp;<span class="string" id="6194426">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6194430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194435"><a href="/go/printer/printer.go.html#6194327">i</a></span><span class="op" id="6194436">--</span>&nbsp;<span class="comment" id="6194439">//&nbsp;remove&nbsp;trailing&nbsp;blank&nbsp;from&nbsp;prefix&nbsp;so&nbsp;stars&nbsp;remain&nbsp;aligned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194502">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194506"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6194513">=</span>&nbsp;<span class="ident" id="6194515"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6194521">[</span><span class="num" id="6194522">0</span><span class="op" id="6194523">:</span><span class="ident" id="6194524"><a href="/go/printer/printer.go.html#6194327">i</a></span><span class="op" id="6194525">]</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194529"><a href="/go/printer/printer.go.html#6194302">lineOfStars</a></span>&nbsp;<span class="op" id="6194541">=</span>&nbsp;<span class="ident" id="6194543">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6194549">}</span>&nbsp;<span class="keyword" id="6194551">else</span>&nbsp;<span class="op" id="6194556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194560">//&nbsp;No&nbsp;line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194591">//&nbsp;Determine&nbsp;the&nbsp;white&nbsp;space&nbsp;on&nbsp;the&nbsp;first&nbsp;line&nbsp;after&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194653">//&nbsp;and&nbsp;before&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment&nbsp;text,&nbsp;assume&nbsp;two</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194715">//&nbsp;blanks&nbsp;instead&nbsp;of&nbsp;the&nbsp;/*&nbsp;unless&nbsp;the&nbsp;first&nbsp;character&nbsp;after</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194778">//&nbsp;the&nbsp;/*&nbsp;is&nbsp;a&nbsp;tab.&nbsp;If&nbsp;the&nbsp;first&nbsp;comment&nbsp;line&nbsp;is&nbsp;empty&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194839">//&nbsp;for&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;assume&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab.&nbsp;This</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6194901">//&nbsp;whitespace&nbsp;may&nbsp;be&nbsp;found&nbsp;as&nbsp;suffix&nbsp;in&nbsp;the&nbsp;common&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6194962">first</span>&nbsp;<span class="op" id="6194968">:=</span>&nbsp;<span class="ident" id="6194971"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6194976">[</span><span class="num" id="6194977">0</span><span class="op" id="6194978">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6194982">if</span>&nbsp;<span class="ident" id="6194985"><a href="/go/printer/printer.go.html#6191934">isBlank</a></span><span class="op" id="6194992">(</span><span class="ident" id="6194993"><a href="/go/printer/printer.go.html#6194962">first</a></span><span class="op" id="6194998">[</span><span class="num" id="6194999">2</span><span class="op" id="6195000">:</span><span class="op" id="6195001">]</span><span class="op" id="6195002">)</span>&nbsp;<span class="op" id="6195004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195009">//&nbsp;no&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195050">//&nbsp;reduce&nbsp;prefix&nbsp;by&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195097">//&nbsp;if&nbsp;present&nbsp;-&nbsp;this&nbsp;keeps&nbsp;comment&nbsp;text&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195149">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;/*&nbsp;and&nbsp;*/&#39;s&nbsp;if&nbsp;it&nbsp;was&nbsp;indented</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195202">//&nbsp;in&nbsp;the&nbsp;first&nbsp;place</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195227">i</span>&nbsp;<span class="op" id="6195229">:=</span>&nbsp;<span class="builtinfunc" id="6195232">len</span><span class="op" id="6195235">(</span><span class="ident" id="6195236"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195247">for</span>&nbsp;<span class="ident" id="6195251">n</span>&nbsp;<span class="op" id="6195253">:=</span>&nbsp;<span class="num" id="6195256">0</span><span class="op" id="6195257">;</span>&nbsp;<span class="ident" id="6195259"><a href="/go/printer/printer.go.html#6195251">n</a></span>&nbsp;<span class="op" id="6195261">&lt;</span>&nbsp;<span class="num" id="6195263">3</span>&nbsp;<span class="op" id="6195265">&amp;&amp;</span>&nbsp;<span class="ident" id="6195268"><a href="/go/printer/printer.go.html#6195227">i</a></span>&nbsp;<span class="op" id="6195270">&gt;</span>&nbsp;<span class="num" id="6195272">0</span>&nbsp;<span class="op" id="6195274">&amp;&amp;</span>&nbsp;<span class="ident" id="6195277"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195283">[</span><span class="ident" id="6195284"><a href="/go/printer/printer.go.html#6195227">i</a></span><span class="op" id="6195285">-</span><span class="num" id="6195286">1</span><span class="op" id="6195287">]</span>&nbsp;<span class="op" id="6195289">==</span>&nbsp;<span class="string" id="6195292">&#39;&nbsp;&#39;</span><span class="op" id="6195295">;</span>&nbsp;<span class="ident" id="6195297"><a href="/go/printer/printer.go.html#6195251">n</a></span><span class="op" id="6195298">++</span>&nbsp;<span class="op" id="6195301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195307"><a href="/go/printer/printer.go.html#6195227">i</a></span><span class="op" id="6195308">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195314">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195319">if</span>&nbsp;<span class="ident" id="6195322"><a href="/go/printer/printer.go.html#6195227">i</a></span>&nbsp;<span class="op" id="6195324">==</span>&nbsp;<span class="builtinfunc" id="6195327">len</span><span class="op" id="6195330">(</span><span class="ident" id="6195331"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195337">)</span>&nbsp;<span class="op" id="6195339">&amp;&amp;</span>&nbsp;<span class="ident" id="6195342"><a href="/go/printer/printer.go.html#6195227">i</a></span>&nbsp;<span class="op" id="6195344">&gt;</span>&nbsp;<span class="num" id="6195346">0</span>&nbsp;<span class="op" id="6195348">&amp;&amp;</span>&nbsp;<span class="ident" id="6195351"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195357">[</span><span class="ident" id="6195358"><a href="/go/printer/printer.go.html#6195227">i</a></span><span class="op" id="6195359">-</span><span class="num" id="6195360">1</span><span class="op" id="6195361">]</span>&nbsp;<span class="op" id="6195363">==</span>&nbsp;<span class="string" id="6195366">&#39;\t&#39;</span>&nbsp;<span class="op" id="6195371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195377"><a href="/go/printer/printer.go.html#6195227">i</a></span><span class="op" id="6195378">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195389"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6195396">=</span>&nbsp;<span class="ident" id="6195398"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195404">[</span><span class="num" id="6195405">0</span><span class="op" id="6195406">:</span><span class="ident" id="6195407"><a href="/go/printer/printer.go.html#6195227">i</a></span><span class="op" id="6195408">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195412">}</span>&nbsp;<span class="keyword" id="6195414">else</span>&nbsp;<span class="op" id="6195419">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195424">//&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195461">suffix</span>&nbsp;<span class="op" id="6195468">:=</span>&nbsp;<span class="builtinfunc" id="6195471">make</span><span class="op" id="6195475">(</span><span class="op" id="6195476">[</span><span class="op" id="6195477">]</span><span class="builtintype" id="6195478">byte</span><span class="op" id="6195482">,</span>&nbsp;<span class="builtinfunc" id="6195484">len</span><span class="op" id="6195487">(</span><span class="ident" id="6195488"><a href="/go/printer/printer.go.html#6194962">first</a></span><span class="op" id="6195493">)</span><span class="op" id="6195494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195499">n</span>&nbsp;<span class="op" id="6195501">:=</span>&nbsp;<span class="num" id="6195504">2</span>&nbsp;<span class="comment" id="6195506">//&nbsp;start&nbsp;after&nbsp;opening&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195535">for</span>&nbsp;<span class="ident" id="6195539"><a href="/go/printer/printer.go.html#6195499">n</a></span>&nbsp;<span class="op" id="6195541">&lt;</span>&nbsp;<span class="builtinfunc" id="6195543">len</span><span class="op" id="6195546">(</span><span class="ident" id="6195547"><a href="/go/printer/printer.go.html#6194962">first</a></span><span class="op" id="6195552">)</span>&nbsp;<span class="op" id="6195554">&amp;&amp;</span>&nbsp;<span class="ident" id="6195557"><a href="/go/printer/printer.go.html#6194962">first</a></span><span class="op" id="6195562">[</span><span class="ident" id="6195563"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195564">]</span>&nbsp;<span class="op" id="6195566">&lt;=</span>&nbsp;<span class="string" id="6195569">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="6195573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195579"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195585">[</span><span class="ident" id="6195586"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195587">]</span>&nbsp;<span class="op" id="6195589">=</span>&nbsp;<span class="ident" id="6195591"><a href="/go/printer/printer.go.html#6194962">first</a></span><span class="op" id="6195596">[</span><span class="ident" id="6195597"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195598">]</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195604"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195605">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195611">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6195616">if</span>&nbsp;<span class="ident" id="6195619"><a href="/go/printer/printer.go.html#6195499">n</a></span>&nbsp;<span class="op" id="6195621">&gt;</span>&nbsp;<span class="num" id="6195623">2</span>&nbsp;<span class="op" id="6195625">&amp;&amp;</span>&nbsp;<span class="ident" id="6195628"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195634">[</span><span class="num" id="6195635">2</span><span class="op" id="6195636">]</span>&nbsp;<span class="op" id="6195638">==</span>&nbsp;<span class="string" id="6195641">&#39;\t&#39;</span>&nbsp;<span class="op" id="6195646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195652">//&nbsp;assume&nbsp;the&nbsp;&#39;\t&#39;&nbsp;compensates&nbsp;for&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195698"><a href="/go/printer/printer.go.html#6195461">suffix</a></span>&nbsp;<span class="op" id="6195705">=</span>&nbsp;<span class="ident" id="6195707"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195713">[</span><span class="num" id="6195714">2</span><span class="op" id="6195715">:</span><span class="ident" id="6195716"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195717">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195722">}</span>&nbsp;<span class="keyword" id="6195724">else</span>&nbsp;<span class="op" id="6195729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195735">//&nbsp;otherwise&nbsp;assume&nbsp;two&nbsp;blanks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195770"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195776">[</span><span class="num" id="6195777">0</span><span class="op" id="6195778">]</span><span class="op" id="6195779">,</span>&nbsp;<span class="ident" id="6195781"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195787">[</span><span class="num" id="6195788">1</span><span class="op" id="6195789">]</span>&nbsp;<span class="op" id="6195791">=</span>&nbsp;<span class="string" id="6195793">&#39;&nbsp;&#39;</span><span class="op" id="6195796">,</span>&nbsp;<span class="string" id="6195798">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195806"><a href="/go/printer/printer.go.html#6195461">suffix</a></span>&nbsp;<span class="op" id="6195813">=</span>&nbsp;<span class="ident" id="6195815"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195821">[</span><span class="num" id="6195822">0</span><span class="op" id="6195823">:</span><span class="ident" id="6195824"><a href="/go/printer/printer.go.html#6195499">n</a></span><span class="op" id="6195825">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6195830">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195835">//&nbsp;Shorten&nbsp;the&nbsp;computed&nbsp;common&nbsp;prefix&nbsp;by&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6195893">//&nbsp;suffix,&nbsp;if&nbsp;it&nbsp;is&nbsp;found&nbsp;as&nbsp;suffix&nbsp;of&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6195947"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6195954">=</span>&nbsp;<span class="ident" id="6195956"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6195963">.</span><span class="ident" id="6195964">TrimSuffix</span><span class="op" id="6195974">(</span><span class="ident" id="6195975"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6195981">,</span>&nbsp;<span class="builtintype" id="6195983">string</span><span class="op" id="6195989">(</span><span class="ident" id="6195990"><a href="/go/printer/printer.go.html#6195461">suffix</a></span><span class="op" id="6195996">)</span><span class="op" id="6195997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196004">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196008">//&nbsp;Handle&nbsp;last&nbsp;line:&nbsp;If&nbsp;it&nbsp;only&nbsp;contains&nbsp;a&nbsp;closing&nbsp;*/,&nbsp;align&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196073">//&nbsp;with&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;otherwise&nbsp;align&nbsp;the&nbsp;text&nbsp;with&nbsp;the&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196138">//&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196149">last</span>&nbsp;<span class="op" id="6196154">:=</span>&nbsp;<span class="ident" id="6196157"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6196162">[</span><span class="builtinfunc" id="6196163">len</span><span class="op" id="6196166">(</span><span class="ident" id="6196167"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6196172">)</span><span class="op" id="6196173">-</span><span class="num" id="6196174">1</span><span class="op" id="6196175">]</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196178">closing</span>&nbsp;<span class="op" id="6196186">:=</span>&nbsp;<span class="string" id="6196189">&#34;*/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196195">i</span>&nbsp;<span class="op" id="6196197">:=</span>&nbsp;<span class="ident" id="6196200"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6196207">.</span><span class="ident" id="6196208">Index</span><span class="op" id="6196213">(</span><span class="ident" id="6196214"><a href="/go/printer/printer.go.html#6196149">last</a></span><span class="op" id="6196218">,</span>&nbsp;<span class="ident" id="6196220"><a href="/go/printer/printer.go.html#6196178">closing</a></span><span class="op" id="6196227">)</span>&nbsp;<span class="comment" id="6196229">//&nbsp;i&nbsp;&gt;=&nbsp;0&nbsp;(closing&nbsp;is&nbsp;always&nbsp;present)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196268">if</span>&nbsp;<span class="ident" id="6196271"><a href="/go/printer/printer.go.html#6191934">isBlank</a></span><span class="op" id="6196278">(</span><span class="ident" id="6196279"><a href="/go/printer/printer.go.html#6196149">last</a></span><span class="op" id="6196283">[</span><span class="num" id="6196284">0</span><span class="op" id="6196285">:</span><span class="ident" id="6196286"><a href="/go/printer/printer.go.html#6196195">i</a></span><span class="op" id="6196287">]</span><span class="op" id="6196288">)</span>&nbsp;<span class="op" id="6196290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196294">//&nbsp;last&nbsp;line&nbsp;only&nbsp;contains&nbsp;closing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196334">if</span>&nbsp;<span class="ident" id="6196337"><a href="/go/printer/printer.go.html#6194302">lineOfStars</a></span>&nbsp;<span class="op" id="6196349">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196354"><a href="/go/printer/printer.go.html#6196178">closing</a></span>&nbsp;<span class="op" id="6196362">=</span>&nbsp;<span class="string" id="6196364">&#34;&nbsp;*/&#34;</span>&nbsp;<span class="comment" id="6196370">//&nbsp;add&nbsp;blank&nbsp;to&nbsp;align&nbsp;final&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196405">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196409"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6196414">[</span><span class="builtinfunc" id="6196415">len</span><span class="op" id="6196418">(</span><span class="ident" id="6196419"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6196424">)</span><span class="op" id="6196425">-</span><span class="num" id="6196426">1</span><span class="op" id="6196427">]</span>&nbsp;<span class="op" id="6196429">=</span>&nbsp;<span class="ident" id="6196431"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6196438">+</span>&nbsp;<span class="ident" id="6196440"><a href="/go/printer/printer.go.html#6196178">closing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196449">}</span>&nbsp;<span class="keyword" id="6196451">else</span>&nbsp;<span class="op" id="6196456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196460">//&nbsp;last&nbsp;line&nbsp;contains&nbsp;more&nbsp;comment&nbsp;text&nbsp;-&nbsp;assume</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196511">//&nbsp;it&nbsp;is&nbsp;aligned&nbsp;like&nbsp;the&nbsp;other&nbsp;lines&nbsp;and&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196563">//&nbsp;in&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196590"><a href="/go/printer/printer.go.html#6193773">prefix</a></span>&nbsp;<span class="op" id="6196597">=</span>&nbsp;<span class="ident" id="6196599"><a href="/go/printer/printer.go.html#6192106">commonPrefix</a></span><span class="op" id="6196611">(</span><span class="ident" id="6196612"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6196618">,</span>&nbsp;<span class="ident" id="6196620"><a href="/go/printer/printer.go.html#6196149">last</a></span><span class="op" id="6196624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6196631">//&nbsp;Remove&nbsp;the&nbsp;common&nbsp;prefix&nbsp;from&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;and&nbsp;empty&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196700">for</span>&nbsp;<span class="ident" id="6196704">i</span><span class="op" id="6196705">,</span>&nbsp;<span class="ident" id="6196707">line</span>&nbsp;<span class="op" id="6196712">:=</span>&nbsp;<span class="keyword" id="6196715">range</span>&nbsp;<span class="ident" id="6196721"><a href="/go/printer/printer.go.html#6192779">lines</a></span>&nbsp;<span class="op" id="6196727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196731">if</span>&nbsp;<span class="ident" id="6196734"><a href="/go/printer/printer.go.html#6196704">i</a></span>&nbsp;<span class="op" id="6196736">&gt;</span>&nbsp;<span class="num" id="6196738">0</span>&nbsp;<span class="op" id="6196740">&amp;&amp;</span>&nbsp;<span class="ident" id="6196743"><a href="/go/printer/printer.go.html#6196707">line</a></span>&nbsp;<span class="op" id="6196748">!=</span>&nbsp;<span class="string" id="6196751">&#34;&#34;</span>&nbsp;<span class="op" id="6196754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196759"><a href="/go/printer/printer.go.html#6192779">lines</a></span><span class="op" id="6196764">[</span><span class="ident" id="6196765"><a href="/go/printer/printer.go.html#6196704">i</a></span><span class="op" id="6196766">]</span>&nbsp;<span class="op" id="6196768">=</span>&nbsp;<span class="ident" id="6196770"><a href="/go/printer/printer.go.html#6196707">line</a></span><span class="op" id="6196774">[</span><span class="builtinfunc" id="6196775">len</span><span class="op" id="6196778">(</span><span class="ident" id="6196779"><a href="/go/printer/printer.go.html#6193773">prefix</a></span><span class="op" id="6196785">)</span><span class="op" id="6196786">:</span><span class="op" id="6196787">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196791">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6196794">}</span><br>
<span class="lineno"></span><span class="op" id="6196796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6196799">func</span>&nbsp;<span class="op" id="6196804">(</span><span class="ident" id="6196805">p</span>&nbsp;<span class="op" id="6196807">*</span><span class="ident" id="6196808"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6196815">)</span>&nbsp;<span class="ident" id="6196817">writeComment</span><span class="op" id="6196829">(</span><span class="ident" id="6196830">comment</span>&nbsp;<span class="op" id="6196838">*</span><span class="ident" id="6196839"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6196842">.</span><span class="ident" id="6196843">Comment</span><span class="op" id="6196850">)</span>&nbsp;<span class="op" id="6196852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196855">text</span>&nbsp;<span class="op" id="6196860">:=</span>&nbsp;<span class="ident" id="6196863"><a href="/go/printer/printer.go.html#6196830">comment</a></span><span class="op" id="6196870">.</span><span class="ident" id="6196871">Text</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6196877">pos</span>&nbsp;<span class="op" id="6196881">:=</span>&nbsp;<span class="ident" id="6196884"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6196885">.</span><span class="ident" id="6196886">posFor</span><span class="op" id="6196892">(</span><span class="ident" id="6196893"><a href="/go/printer/printer.go.html#6196830">comment</a></span><span class="op" id="6196900">.</span><span class="ident" id="6196901">Pos</span><span class="op" id="6196904">(</span><span class="op" id="6196905">)</span><span class="op" id="6196906">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196910">const</span>&nbsp;<span class="ident" id="6196916">linePrefix</span>&nbsp;<span class="op" id="6196927">=</span>&nbsp;<span class="string" id="6196929">&#34;//line&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6196940">if</span>&nbsp;<span class="ident" id="6196943"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6196950">.</span><span class="ident" id="6196951">HasPrefix</span><span class="op" id="6196960">(</span><span class="ident" id="6196961"><a href="/go/printer/printer.go.html#6196855">text</a></span><span class="op" id="6196965">,</span>&nbsp;<span class="ident" id="6196967"><a href="/go/printer/printer.go.html#6196916">linePrefix</a></span><span class="op" id="6196977">)</span>&nbsp;<span class="op" id="6196979">&amp;&amp;</span>&nbsp;<span class="op" id="6196982">(</span><span class="op" id="6196983">!</span><span class="ident" id="6196984"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6196987">.</span><span class="ident" id="6196988">IsValid</span><span class="op" id="6196995">(</span><span class="op" id="6196996">)</span>&nbsp;<span class="op" id="6196998">||</span>&nbsp;<span class="ident" id="6197001"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6197004">.</span><span class="ident" id="6197005">Column</span>&nbsp;<span class="op" id="6197012">==</span>&nbsp;<span class="num" id="6197015">1</span><span class="op" id="6197016">)</span>&nbsp;<span class="op" id="6197018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197022">//&nbsp;possibly&nbsp;a&nbsp;line&nbsp;directive</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197053">ldir</span>&nbsp;<span class="op" id="6197058">:=</span>&nbsp;<span class="ident" id="6197061"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6197068">.</span><span class="ident" id="6197069">TrimSpace</span><span class="op" id="6197078">(</span><span class="ident" id="6197079"><a href="/go/printer/printer.go.html#6196855">text</a></span><span class="op" id="6197083">[</span><span class="builtinfunc" id="6197084">len</span><span class="op" id="6197087">(</span><span class="ident" id="6197088"><a href="/go/printer/printer.go.html#6196916">linePrefix</a></span><span class="op" id="6197098">)</span><span class="op" id="6197099">:</span><span class="op" id="6197100">]</span><span class="op" id="6197101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197105">if</span>&nbsp;<span class="ident" id="6197108">i</span>&nbsp;<span class="op" id="6197110">:=</span>&nbsp;<span class="ident" id="6197113"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6197120">.</span><span class="ident" id="6197121">LastIndex</span><span class="op" id="6197130">(</span><span class="ident" id="6197131"><a href="/go/printer/printer.go.html#6197053">ldir</a></span><span class="op" id="6197135">,</span>&nbsp;<span class="string" id="6197137">&#34;:&#34;</span><span class="op" id="6197140">)</span><span class="op" id="6197141">;</span>&nbsp;<span class="ident" id="6197143"><a href="/go/printer/printer.go.html#6197108">i</a></span>&nbsp;<span class="op" id="6197145">&gt;=</span>&nbsp;<span class="num" id="6197148">0</span>&nbsp;<span class="op" id="6197150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197155">if</span>&nbsp;<span class="ident" id="6197158">line</span><span class="op" id="6197162">,</span>&nbsp;<span class="ident" id="6197164">err</span>&nbsp;<span class="op" id="6197168">:=</span>&nbsp;<span class="ident" id="6197171"><a href="/go/printer/printer.go.html#6178807">strconv</a></span><span class="op" id="6197178">.</span><span class="ident" id="6197179">Atoi</span><span class="op" id="6197183">(</span><span class="ident" id="6197184"><a href="/go/printer/printer.go.html#6197053">ldir</a></span><span class="op" id="6197188">[</span><span class="ident" id="6197189"><a href="/go/printer/printer.go.html#6197108">i</a></span><span class="op" id="6197190">+</span><span class="num" id="6197191">1</span><span class="op" id="6197192">:</span><span class="op" id="6197193">]</span><span class="op" id="6197194">)</span><span class="op" id="6197195">;</span>&nbsp;<span class="ident" id="6197197"><a href="/go/printer/printer.go.html#6197164">err</a></span>&nbsp;<span class="op" id="6197201">==</span>&nbsp;<span class="ident" id="6197204">nil</span>&nbsp;<span class="op" id="6197208">&amp;&amp;</span>&nbsp;<span class="ident" id="6197211"><a href="/go/printer/printer.go.html#6197158">line</a></span>&nbsp;<span class="op" id="6197216">&gt;</span>&nbsp;<span class="num" id="6197218">0</span>&nbsp;<span class="op" id="6197220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197226">//&nbsp;The&nbsp;line&nbsp;directive&nbsp;we&nbsp;are&nbsp;about&nbsp;to&nbsp;print&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197282">//&nbsp;the&nbsp;Filename&nbsp;and&nbsp;Line&nbsp;number&nbsp;used&nbsp;for&nbsp;subsequent</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197338">//&nbsp;tokens.&nbsp;We&nbsp;have&nbsp;to&nbsp;update&nbsp;our&nbsp;AST-space&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197394">//&nbsp;accordingly&nbsp;and&nbsp;suspend&nbsp;indentation&nbsp;temporarily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197450">indent</span>&nbsp;<span class="op" id="6197457">:=</span>&nbsp;<span class="ident" id="6197460"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197461">.</span><span class="ident" id="6197462">indent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197473"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197474">.</span><span class="ident" id="6197475">indent</span>&nbsp;<span class="op" id="6197482">=</span>&nbsp;<span class="num" id="6197484">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197490">defer</span>&nbsp;<span class="keyword" id="6197496">func</span><span class="op" id="6197500">(</span><span class="op" id="6197501">)</span>&nbsp;<span class="op" id="6197503">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197510"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197511">.</span><span class="ident" id="6197512">pos</span><span class="op" id="6197515">.</span><span class="ident" id="6197516">Filename</span>&nbsp;<span class="op" id="6197525">=</span>&nbsp;<span class="ident" id="6197527"><a href="/go/printer/printer.go.html#6197053">ldir</a></span><span class="op" id="6197531">[</span><span class="op" id="6197532">:</span><span class="ident" id="6197533"><a href="/go/printer/printer.go.html#6197108">i</a></span><span class="op" id="6197534">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197541"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197542">.</span><span class="ident" id="6197543">pos</span><span class="op" id="6197546">.</span><span class="ident" id="6197547">Line</span>&nbsp;<span class="op" id="6197552">=</span>&nbsp;<span class="ident" id="6197554"><a href="/go/printer/printer.go.html#6197158">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197564"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197565">.</span><span class="ident" id="6197566">pos</span><span class="op" id="6197569">.</span><span class="ident" id="6197570">Column</span>&nbsp;<span class="op" id="6197577">=</span>&nbsp;<span class="num" id="6197579">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197586"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197587">.</span><span class="ident" id="6197588">indent</span>&nbsp;<span class="op" id="6197595">=</span>&nbsp;<span class="ident" id="6197597"><a href="/go/printer/printer.go.html#6197450">indent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197608">}</span><span class="op" id="6197609">(</span><span class="op" id="6197610">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197622">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197626">//&nbsp;shortcut&nbsp;common&nbsp;case&nbsp;of&nbsp;//-style&nbsp;comments</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197672">if</span>&nbsp;<span class="ident" id="6197675"><a href="/go/printer/printer.go.html#6196855">text</a></span><span class="op" id="6197679">[</span><span class="num" id="6197680">1</span><span class="op" id="6197681">]</span>&nbsp;<span class="op" id="6197683">==</span>&nbsp;<span class="string" id="6197686">&#39;/&#39;</span>&nbsp;<span class="op" id="6197690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197694"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6197695">.</span><span class="ident" id="6197696">writeString</span><span class="op" id="6197707">(</span><span class="ident" id="6197708"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6197711">,</span>&nbsp;<span class="ident" id="6197713"><a href="/go/printer/printer.go.html#6192318">trimRight</a></span><span class="op" id="6197722">(</span><span class="ident" id="6197723"><a href="/go/printer/printer.go.html#6196855">text</a></span><span class="op" id="6197727">)</span><span class="op" id="6197728">,</span>&nbsp;<span class="ident" id="6197730">true</span><span class="op" id="6197734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6197738">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6197746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197750">//&nbsp;for&nbsp;/*-style&nbsp;comments,&nbsp;print&nbsp;line&nbsp;by&nbsp;line&nbsp;and&nbsp;let&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197808">//&nbsp;write&nbsp;function&nbsp;take&nbsp;care&nbsp;of&nbsp;the&nbsp;proper&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6197863">lines</span>&nbsp;<span class="op" id="6197869">:=</span>&nbsp;<span class="ident" id="6197872"><a href="/go/printer/printer.go.html#6178818">strings</a></span><span class="op" id="6197879">.</span><span class="ident" id="6197880">Split</span><span class="op" id="6197885">(</span><span class="ident" id="6197886"><a href="/go/printer/printer.go.html#6196855">text</a></span><span class="op" id="6197890">,</span>&nbsp;<span class="string" id="6197892">&#34;\n&#34;</span><span class="op" id="6197896">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197900">//&nbsp;The&nbsp;comment&nbsp;started&nbsp;in&nbsp;the&nbsp;first&nbsp;column&nbsp;but&nbsp;is&nbsp;going</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6197957">//&nbsp;to&nbsp;be&nbsp;indented.&nbsp;For&nbsp;an&nbsp;idempotent&nbsp;result,&nbsp;add&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198019">//&nbsp;to&nbsp;all&nbsp;lines&nbsp;such&nbsp;that&nbsp;they&nbsp;look&nbsp;like&nbsp;they&nbsp;were&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198080">//&nbsp;before&nbsp;-&nbsp;this&nbsp;will&nbsp;make&nbsp;sure&nbsp;the&nbsp;common&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198143">//&nbsp;is&nbsp;the&nbsp;same&nbsp;independent&nbsp;of&nbsp;how&nbsp;many&nbsp;times&nbsp;formatting&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198203">//&nbsp;applied&nbsp;(was&nbsp;issue&nbsp;1835).</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198233">if</span>&nbsp;<span class="ident" id="6198236"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6198239">.</span><span class="ident" id="6198240">IsValid</span><span class="op" id="6198247">(</span><span class="op" id="6198248">)</span>&nbsp;<span class="op" id="6198250">&amp;&amp;</span>&nbsp;<span class="ident" id="6198253"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6198256">.</span><span class="ident" id="6198257">Column</span>&nbsp;<span class="op" id="6198264">==</span>&nbsp;<span class="num" id="6198267">1</span>&nbsp;<span class="op" id="6198269">&amp;&amp;</span>&nbsp;<span class="ident" id="6198272"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6198273">.</span><span class="ident" id="6198274">indent</span>&nbsp;<span class="op" id="6198281">&gt;</span>&nbsp;<span class="num" id="6198283">0</span>&nbsp;<span class="op" id="6198285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198289">for</span>&nbsp;<span class="ident" id="6198293">i</span><span class="op" id="6198294">,</span>&nbsp;<span class="ident" id="6198296">line</span>&nbsp;<span class="op" id="6198301">:=</span>&nbsp;<span class="keyword" id="6198304">range</span>&nbsp;<span class="ident" id="6198310"><a href="/go/printer/printer.go.html#6197863">lines</a></span><span class="op" id="6198315">[</span><span class="num" id="6198316">1</span><span class="op" id="6198317">:</span><span class="op" id="6198318">]</span>&nbsp;<span class="op" id="6198320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198325"><a href="/go/printer/printer.go.html#6197863">lines</a></span><span class="op" id="6198330">[</span><span class="num" id="6198331">1</span><span class="op" id="6198332">+</span><span class="ident" id="6198333"><a href="/go/printer/printer.go.html#6198293">i</a></span><span class="op" id="6198334">]</span>&nbsp;<span class="op" id="6198336">=</span>&nbsp;<span class="string" id="6198338">&#34;&nbsp;&nbsp;&nbsp;&#34;</span>&nbsp;<span class="op" id="6198344">+</span>&nbsp;<span class="ident" id="6198346"><a href="/go/printer/printer.go.html#6198296">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198356">}</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198360"><a href="/go/printer/printer.go.html#6192761">stripCommonPrefix</a></span><span class="op" id="6198377">(</span><span class="ident" id="6198378"><a href="/go/printer/printer.go.html#6197863">lines</a></span><span class="op" id="6198383">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198387">//&nbsp;write&nbsp;comment&nbsp;lines,&nbsp;separated&nbsp;by&nbsp;formfeed,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6198435">//&nbsp;without&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;the&nbsp;last&nbsp;line</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198480">for</span>&nbsp;<span class="ident" id="6198484">i</span><span class="op" id="6198485">,</span>&nbsp;<span class="ident" id="6198487">line</span>&nbsp;<span class="op" id="6198492">:=</span>&nbsp;<span class="keyword" id="6198495">range</span>&nbsp;<span class="ident" id="6198501"><a href="/go/printer/printer.go.html#6197863">lines</a></span>&nbsp;<span class="op" id="6198507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198511">if</span>&nbsp;<span class="ident" id="6198514"><a href="/go/printer/printer.go.html#6198484">i</a></span>&nbsp;<span class="op" id="6198516">&gt;</span>&nbsp;<span class="num" id="6198518">0</span>&nbsp;<span class="op" id="6198520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198525"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6198526">.</span><span class="ident" id="6198527">writeByte</span><span class="op" id="6198536">(</span><span class="string" id="6198537">&#39;\f&#39;</span><span class="op" id="6198541">,</span>&nbsp;<span class="num" id="6198543">1</span><span class="op" id="6198544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198549"><a href="/go/printer/printer.go.html#6196877">pos</a></span>&nbsp;<span class="op" id="6198553">=</span>&nbsp;<span class="ident" id="6198555"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6198556">.</span><span class="ident" id="6198557">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198563">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6198567">if</span>&nbsp;<span class="builtinfunc" id="6198570">len</span><span class="op" id="6198573">(</span><span class="ident" id="6198574"><a href="/go/printer/printer.go.html#6198487">line</a></span><span class="op" id="6198578">)</span>&nbsp;<span class="op" id="6198580">&gt;</span>&nbsp;<span class="num" id="6198582">0</span>&nbsp;<span class="op" id="6198584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6198589"><a href="/go/printer/printer.go.html#6196805">p</a></span><span class="op" id="6198590">.</span><span class="ident" id="6198591">writeString</span><span class="op" id="6198602">(</span><span class="ident" id="6198603"><a href="/go/printer/printer.go.html#6196877">pos</a></span><span class="op" id="6198606">,</span>&nbsp;<span class="ident" id="6198608"><a href="/go/printer/printer.go.html#6192318">trimRight</a></span><span class="op" id="6198617">(</span><span class="ident" id="6198618"><a href="/go/printer/printer.go.html#6198487">line</a></span><span class="op" id="6198622">)</span><span class="op" id="6198623">,</span>&nbsp;<span class="ident" id="6198625">true</span><span class="op" id="6198629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6198636">}</span><br>
<span class="lineno"></span><span class="op" id="6198638">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6198641">//&nbsp;writeCommentSuffix&nbsp;writes&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;comment&nbsp;if&nbsp;indicated</span><br>
<span class="lineno"></span><span class="comment" id="6198712">//&nbsp;and&nbsp;processes&nbsp;any&nbsp;leftover&nbsp;indentation&nbsp;information.&nbsp;If&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span><span class="comment" id="6198783">//&nbsp;is&nbsp;needed,&nbsp;the&nbsp;kind&nbsp;of&nbsp;break&nbsp;(newline&nbsp;vs&nbsp;formfeed)&nbsp;depends&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6198852">//&nbsp;pending&nbsp;whitespace.&nbsp;The&nbsp;writeCommentSuffix&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">675</span><span class="comment" id="6198920">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="6198992">//&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="6199003">//</span><br>
<span class="lineno"></span><span class="keyword" id="6199006">func</span>&nbsp;<span class="op" id="6199011">(</span><span class="ident" id="6199012">p</span>&nbsp;<span class="op" id="6199014">*</span><span class="ident" id="6199015"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6199022">)</span>&nbsp;<span class="ident" id="6199024">writeCommentSuffix</span><span class="op" id="6199042">(</span><span class="ident" id="6199043">needsLinebreak</span>&nbsp;<span class="builtintype" id="6199058">bool</span><span class="op" id="6199062">)</span>&nbsp;<span class="op" id="6199064">(</span><span class="ident" id="6199065">wroteNewline</span><span class="op" id="6199077">,</span>&nbsp;<span class="ident" id="6199079">droppedFF</span>&nbsp;<span class="builtintype" id="6199089">bool</span><span class="op" id="6199093">)</span>&nbsp;<span class="op" id="6199095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199098">for</span>&nbsp;<span class="ident" id="6199102">i</span><span class="op" id="6199103">,</span>&nbsp;<span class="ident" id="6199105">ch</span>&nbsp;<span class="op" id="6199108">:=</span>&nbsp;<span class="keyword" id="6199111">range</span>&nbsp;<span class="ident" id="6199117"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199118">.</span><span class="ident" id="6199119">wsbuf</span>&nbsp;<span class="op" id="6199125">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199129">switch</span>&nbsp;<span class="ident" id="6199136"><a href="/go/printer/printer.go.html#6199105">ch</a></span>&nbsp;<span class="op" id="6199139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199143">case</span>&nbsp;<span class="ident" id="6199148"><a href="/go/printer/printer.go.html#6179064">blank</a></span><span class="op" id="6199153">,</span>&nbsp;<span class="ident" id="6199155"><a href="/go/printer/printer.go.html#6179092">vtab</a></span><span class="op" id="6199159">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6199164">//&nbsp;ignore&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199197"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199198">.</span><span class="ident" id="6199199">wsbuf</span><span class="op" id="6199204">[</span><span class="ident" id="6199205"><a href="/go/printer/printer.go.html#6199102">i</a></span><span class="op" id="6199206">]</span>&nbsp;<span class="op" id="6199208">=</span>&nbsp;<span class="ident" id="6199210"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199219">case</span>&nbsp;<span class="ident" id="6199224"><a href="/go/printer/printer.go.html#6179179">indent</a></span><span class="op" id="6199230">,</span>&nbsp;<span class="ident" id="6199232"><a href="/go/printer/printer.go.html#6179207">unindent</a></span><span class="op" id="6199240">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6199245">//&nbsp;don&#39;t&nbsp;lose&nbsp;indentation&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199285">case</span>&nbsp;<span class="ident" id="6199290"><a href="/go/printer/printer.go.html#6179121">newline</a></span><span class="op" id="6199297">,</span>&nbsp;<span class="ident" id="6199299"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span><span class="op" id="6199307">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6199312">//&nbsp;if&nbsp;we&nbsp;need&nbsp;a&nbsp;line&nbsp;break,&nbsp;keep&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6199360">//&nbsp;but&nbsp;remember&nbsp;if&nbsp;we&nbsp;dropped&nbsp;any&nbsp;formfeeds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199407">if</span>&nbsp;<span class="ident" id="6199410"><a href="/go/printer/printer.go.html#6199043">needsLinebreak</a></span>&nbsp;<span class="op" id="6199425">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199431"><a href="/go/printer/printer.go.html#6199043">needsLinebreak</a></span>&nbsp;<span class="op" id="6199446">=</span>&nbsp;<span class="ident" id="6199448">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199458"><a href="/go/printer/printer.go.html#6199065">wroteNewline</a></span>&nbsp;<span class="op" id="6199471">=</span>&nbsp;<span class="ident" id="6199473">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199481">}</span>&nbsp;<span class="keyword" id="6199483">else</span>&nbsp;<span class="op" id="6199488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199494">if</span>&nbsp;<span class="ident" id="6199497"><a href="/go/printer/printer.go.html#6199105">ch</a></span>&nbsp;<span class="op" id="6199500">==</span>&nbsp;<span class="ident" id="6199503"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span>&nbsp;<span class="op" id="6199512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199519"><a href="/go/printer/printer.go.html#6199079">droppedFF</a></span>&nbsp;<span class="op" id="6199529">=</span>&nbsp;<span class="ident" id="6199531">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199546"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199547">.</span><span class="ident" id="6199548">wsbuf</span><span class="op" id="6199553">[</span><span class="ident" id="6199554"><a href="/go/printer/printer.go.html#6199102">i</a></span><span class="op" id="6199555">]</span>&nbsp;<span class="op" id="6199557">=</span>&nbsp;<span class="ident" id="6199559"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199576">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199579"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199580">.</span><span class="ident" id="6199581">writeWhitespace</span><span class="op" id="6199596">(</span><span class="builtinfunc" id="6199597">len</span><span class="op" id="6199600">(</span><span class="ident" id="6199601"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199602">.</span><span class="ident" id="6199603">wsbuf</span><span class="op" id="6199608">)</span><span class="op" id="6199609">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6199613">//&nbsp;make&nbsp;sure&nbsp;we&nbsp;have&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199648">if</span>&nbsp;<span class="ident" id="6199651"><a href="/go/printer/printer.go.html#6199043">needsLinebreak</a></span>&nbsp;<span class="op" id="6199666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199670"><a href="/go/printer/printer.go.html#6199012">p</a></span><span class="op" id="6199671">.</span><span class="ident" id="6199672">writeByte</span><span class="op" id="6199681">(</span><span class="string" id="6199682">&#39;\n&#39;</span><span class="op" id="6199686">,</span>&nbsp;<span class="num" id="6199688">1</span><span class="op" id="6199689">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6199693"><a href="/go/printer/printer.go.html#6199065">wroteNewline</a></span>&nbsp;<span class="op" id="6199706">=</span>&nbsp;<span class="ident" id="6199708">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6199714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6199718">return</span><br>
<span class="lineno"></span><span class="op" id="6199725">}</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span><span class="comment" id="6199728">//&nbsp;intersperseComments&nbsp;consumes&nbsp;all&nbsp;comments&nbsp;that&nbsp;appear&nbsp;before&nbsp;the&nbsp;next&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="6199807">//&nbsp;tok&nbsp;and&nbsp;prints&nbsp;it&nbsp;together&nbsp;with&nbsp;the&nbsp;buffered&nbsp;whitespace&nbsp;(i.e.,&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="6199888">//&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;written&nbsp;before&nbsp;the&nbsp;next&nbsp;token).&nbsp;A&nbsp;heuristic&nbsp;is&nbsp;used&nbsp;to&nbsp;mix</span><br>
<span class="lineno"></span><span class="comment" id="6199967">//&nbsp;the&nbsp;comments&nbsp;and&nbsp;whitespace.&nbsp;The&nbsp;intersperseComments&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">715</span><span class="comment" id="6200045">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="6200125">//</span><br>
<span class="lineno"></span><span class="keyword" id="6200128">func</span>&nbsp;<span class="op" id="6200133">(</span><span class="ident" id="6200134">p</span>&nbsp;<span class="op" id="6200136">*</span><span class="ident" id="6200137"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6200144">)</span>&nbsp;<span class="ident" id="6200146">intersperseComments</span><span class="op" id="6200165">(</span><span class="ident" id="6200166">next</span>&nbsp;<span class="ident" id="6200171"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200176">.</span><span class="ident" id="6200177">Position</span><span class="op" id="6200185">,</span>&nbsp;<span class="ident" id="6200187">tok</span>&nbsp;<span class="ident" id="6200191"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200196">.</span><span class="ident" id="6200197">Token</span><span class="op" id="6200202">)</span>&nbsp;<span class="op" id="6200204">(</span><span class="ident" id="6200205">wroteNewline</span><span class="op" id="6200217">,</span>&nbsp;<span class="ident" id="6200219">droppedFF</span>&nbsp;<span class="builtintype" id="6200229">bool</span><span class="op" id="6200233">)</span>&nbsp;<span class="op" id="6200235">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6200238">var</span>&nbsp;<span class="ident" id="6200242">last</span>&nbsp;<span class="op" id="6200247">*</span><span class="ident" id="6200248"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6200251">.</span><span class="ident" id="6200252">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6200261">for</span>&nbsp;<span class="ident" id="6200265"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200266">.</span><span class="ident" id="6200267">commentBefore</span><span class="op" id="6200280">(</span><span class="ident" id="6200281"><a href="/go/printer/printer.go.html#6200166">next</a></span><span class="op" id="6200285">)</span>&nbsp;<span class="op" id="6200287">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6200291">for</span>&nbsp;<span class="ident" id="6200295">_</span><span class="op" id="6200296">,</span>&nbsp;<span class="ident" id="6200298">c</span>&nbsp;<span class="op" id="6200300">:=</span>&nbsp;<span class="keyword" id="6200303">range</span>&nbsp;<span class="ident" id="6200309"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200310">.</span><span class="ident" id="6200311">comment</span><span class="op" id="6200318">.</span><span class="ident" id="6200319">List</span>&nbsp;<span class="op" id="6200324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200329"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200330">.</span><span class="ident" id="6200331">writeCommentPrefix</span><span class="op" id="6200349">(</span><span class="ident" id="6200350"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200351">.</span><span class="ident" id="6200352">posFor</span><span class="op" id="6200358">(</span><span class="ident" id="6200359"><a href="/go/printer/printer.go.html#6200298">c</a></span><span class="op" id="6200360">.</span><span class="ident" id="6200361">Pos</span><span class="op" id="6200364">(</span><span class="op" id="6200365">)</span><span class="op" id="6200366">)</span><span class="op" id="6200367">,</span>&nbsp;<span class="ident" id="6200369"><a href="/go/printer/printer.go.html#6200166">next</a></span><span class="op" id="6200373">,</span>&nbsp;<span class="ident" id="6200375"><a href="/go/printer/printer.go.html#6200242">last</a></span><span class="op" id="6200379">,</span>&nbsp;<span class="ident" id="6200381"><a href="/go/printer/printer.go.html#6200298">c</a></span><span class="op" id="6200382">,</span>&nbsp;<span class="ident" id="6200384"><a href="/go/printer/printer.go.html#6200187">tok</a></span><span class="op" id="6200387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200392"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200393">.</span><span class="ident" id="6200394">writeComment</span><span class="op" id="6200406">(</span><span class="ident" id="6200407"><a href="/go/printer/printer.go.html#6200298">c</a></span><span class="op" id="6200408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200413"><a href="/go/printer/printer.go.html#6200242">last</a></span>&nbsp;<span class="op" id="6200418">=</span>&nbsp;<span class="ident" id="6200420"><a href="/go/printer/printer.go.html#6200298">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6200424">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200428"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200429">.</span><span class="ident" id="6200430">nextComment</span><span class="op" id="6200441">(</span><span class="op" id="6200442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6200445">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6200449">if</span>&nbsp;<span class="ident" id="6200452"><a href="/go/printer/printer.go.html#6200242">last</a></span>&nbsp;<span class="op" id="6200457">!=</span>&nbsp;<span class="ident" id="6200460">nil</span>&nbsp;<span class="op" id="6200464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6200468">//&nbsp;if&nbsp;the&nbsp;last&nbsp;comment&nbsp;is&nbsp;a&nbsp;/*-style&nbsp;comment&nbsp;and&nbsp;the&nbsp;next&nbsp;item</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6200533">//&nbsp;follows&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;but&nbsp;is&nbsp;not&nbsp;a&nbsp;comma,&nbsp;and&nbsp;not&nbsp;a&nbsp;&#34;closing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6200603">//&nbsp;token&nbsp;immediately&nbsp;following&nbsp;its&nbsp;corresponding&nbsp;&#34;opening&#34;&nbsp;token,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6200671">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;blank&nbsp;for&nbsp;separation&nbsp;unless&nbsp;explicitly&nbsp;disabled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6200737">if</span>&nbsp;<span class="ident" id="6200740"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200741">.</span><span class="ident" id="6200742">mode</span><span class="op" id="6200746">&amp;</span><span class="ident" id="6200747"><a href="/go/printer/printer.go.html#6179316">noExtraBlank</a></span>&nbsp;<span class="op" id="6200760">==</span>&nbsp;<span class="num" id="6200763">0</span>&nbsp;<span class="op" id="6200765">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200771"><a href="/go/printer/printer.go.html#6200242">last</a></span><span class="op" id="6200775">.</span><span class="ident" id="6200776">Text</span><span class="op" id="6200780">[</span><span class="num" id="6200781">1</span><span class="op" id="6200782">]</span>&nbsp;<span class="op" id="6200784">==</span>&nbsp;<span class="string" id="6200787">&#39;*&#39;</span>&nbsp;<span class="op" id="6200791">&amp;&amp;</span>&nbsp;<span class="ident" id="6200794"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200795">.</span><span class="ident" id="6200796">lineFor</span><span class="op" id="6200803">(</span><span class="ident" id="6200804"><a href="/go/printer/printer.go.html#6200242">last</a></span><span class="op" id="6200808">.</span><span class="ident" id="6200809">Pos</span><span class="op" id="6200812">(</span><span class="op" id="6200813">)</span><span class="op" id="6200814">)</span>&nbsp;<span class="op" id="6200816">==</span>&nbsp;<span class="ident" id="6200819"><a href="/go/printer/printer.go.html#6200166">next</a></span><span class="op" id="6200823">.</span><span class="ident" id="6200824">Line</span>&nbsp;<span class="op" id="6200829">&amp;&amp;</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200835"><a href="/go/printer/printer.go.html#6200187">tok</a></span>&nbsp;<span class="op" id="6200839">!=</span>&nbsp;<span class="ident" id="6200842"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200847">.</span><span class="ident" id="6200848">COMMA</span>&nbsp;<span class="op" id="6200854">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6200860">(</span><span class="ident" id="6200861"><a href="/go/printer/printer.go.html#6200187">tok</a></span>&nbsp;<span class="op" id="6200865">!=</span>&nbsp;<span class="ident" id="6200868"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200873">.</span><span class="ident" id="6200874">RPAREN</span>&nbsp;<span class="op" id="6200881">||</span>&nbsp;<span class="ident" id="6200884"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200885">.</span><span class="ident" id="6200886">prevOpen</span>&nbsp;<span class="op" id="6200895">==</span>&nbsp;<span class="ident" id="6200898"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200903">.</span><span class="ident" id="6200904">LPAREN</span><span class="op" id="6200910">)</span>&nbsp;<span class="op" id="6200912">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6200918">(</span><span class="ident" id="6200919"><a href="/go/printer/printer.go.html#6200187">tok</a></span>&nbsp;<span class="op" id="6200923">!=</span>&nbsp;<span class="ident" id="6200926"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200931">.</span><span class="ident" id="6200932">RBRACK</span>&nbsp;<span class="op" id="6200939">||</span>&nbsp;<span class="ident" id="6200942"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200943">.</span><span class="ident" id="6200944">prevOpen</span>&nbsp;<span class="op" id="6200953">==</span>&nbsp;<span class="ident" id="6200956"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6200961">.</span><span class="ident" id="6200962">LBRACK</span><span class="op" id="6200968">)</span>&nbsp;<span class="op" id="6200970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6200975"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6200976">.</span><span class="ident" id="6200977">writeByte</span><span class="op" id="6200986">(</span><span class="string" id="6200987">&#39;&nbsp;&#39;</span><span class="op" id="6200990">,</span>&nbsp;<span class="num" id="6200992">1</span><span class="op" id="6200993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6200997">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201001">//&nbsp;ensure&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;//-style&nbsp;comment,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201066">//&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#39;}&#39;&nbsp;unless&nbsp;explicitly&nbsp;disabled,&nbsp;or&nbsp;at&nbsp;eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201130">needsLinebreak</span>&nbsp;<span class="op" id="6201145">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201151"><a href="/go/printer/printer.go.html#6200242">last</a></span><span class="op" id="6201155">.</span><span class="ident" id="6201156">Text</span><span class="op" id="6201160">[</span><span class="num" id="6201161">1</span><span class="op" id="6201162">]</span>&nbsp;<span class="op" id="6201164">==</span>&nbsp;<span class="string" id="6201167">&#39;/&#39;</span>&nbsp;<span class="op" id="6201171">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201178"><a href="/go/printer/printer.go.html#6200187">tok</a></span>&nbsp;<span class="op" id="6201182">==</span>&nbsp;<span class="ident" id="6201185"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6201190">.</span><span class="ident" id="6201191">RBRACE</span>&nbsp;<span class="op" id="6201198">&amp;&amp;</span>&nbsp;<span class="ident" id="6201201"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6201202">.</span><span class="ident" id="6201203">mode</span><span class="op" id="6201207">&amp;</span><span class="ident" id="6201208"><a href="/go/printer/printer.go.html#6179399">noExtraLinebreak</a></span>&nbsp;<span class="op" id="6201225">==</span>&nbsp;<span class="num" id="6201228">0</span>&nbsp;<span class="op" id="6201230">||</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201237"><a href="/go/printer/printer.go.html#6200187">tok</a></span>&nbsp;<span class="op" id="6201241">==</span>&nbsp;<span class="ident" id="6201244"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6201249">.</span><span class="ident" id="6201250">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201256">return</span>&nbsp;<span class="ident" id="6201263"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6201264">.</span><span class="ident" id="6201265">writeCommentSuffix</span><span class="op" id="6201283">(</span><span class="ident" id="6201284"><a href="/go/printer/printer.go.html#6201130">needsLinebreak</a></span><span class="op" id="6201298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6201301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201305">//&nbsp;no&nbsp;comment&nbsp;was&nbsp;written&nbsp;-&nbsp;we&nbsp;should&nbsp;never&nbsp;reach&nbsp;here&nbsp;since</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201367">//&nbsp;intersperseComments&nbsp;should&nbsp;not&nbsp;be&nbsp;called&nbsp;in&nbsp;that&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201425"><a href="/go/printer/printer.go.html#6200134">p</a></span><span class="op" id="6201426">.</span><span class="ident" id="6201427">internalError</span><span class="op" id="6201440">(</span><span class="string" id="6201441">&#34;intersperseComments&nbsp;called&nbsp;without&nbsp;pending&nbsp;comments&#34;</span><span class="op" id="6201494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201497">return</span><br>
<span class="lineno"></span><span class="op" id="6201504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="6201507">//&nbsp;whiteWhitespace&nbsp;writes&nbsp;the&nbsp;first&nbsp;n&nbsp;whitespace&nbsp;entries.</span><br>
<span class="lineno"></span><span class="keyword" id="6201565">func</span>&nbsp;<span class="op" id="6201570">(</span><span class="ident" id="6201571">p</span>&nbsp;<span class="op" id="6201573">*</span><span class="ident" id="6201574"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6201581">)</span>&nbsp;<span class="ident" id="6201583">writeWhitespace</span><span class="op" id="6201598">(</span><span class="ident" id="6201599">n</span>&nbsp;<span class="builtintype" id="6201601">int</span><span class="op" id="6201604">)</span>&nbsp;<span class="op" id="6201606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201609">//&nbsp;write&nbsp;entries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201627">for</span>&nbsp;<span class="ident" id="6201631">i</span>&nbsp;<span class="op" id="6201633">:=</span>&nbsp;<span class="num" id="6201636">0</span><span class="op" id="6201637">;</span>&nbsp;<span class="ident" id="6201639"><a href="/go/printer/printer.go.html#6201631">i</a></span>&nbsp;<span class="op" id="6201641">&lt;</span>&nbsp;<span class="ident" id="6201643"><a href="/go/printer/printer.go.html#6201599">n</a></span><span class="op" id="6201644">;</span>&nbsp;<span class="ident" id="6201646"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6201647">++</span>&nbsp;<span class="op" id="6201650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201654">switch</span>&nbsp;<span class="ident" id="6201661">ch</span>&nbsp;<span class="op" id="6201664">:=</span>&nbsp;<span class="ident" id="6201667"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201668">.</span><span class="ident" id="6201669">wsbuf</span><span class="op" id="6201674">[</span><span class="ident" id="6201675"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6201676">]</span><span class="op" id="6201677">;</span>&nbsp;<span class="ident" id="6201679"><a href="/go/printer/printer.go.html#6201661">ch</a></span>&nbsp;<span class="op" id="6201682">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201686">case</span>&nbsp;<span class="ident" id="6201691"><a href="/go/printer/printer.go.html#6179038">ignore</a></span><span class="op" id="6201697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201702">//&nbsp;ignore!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201715">case</span>&nbsp;<span class="ident" id="6201720"><a href="/go/printer/printer.go.html#6179179">indent</a></span><span class="op" id="6201726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201731"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201732">.</span><span class="ident" id="6201733">indent</span><span class="op" id="6201739">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201744">case</span>&nbsp;<span class="ident" id="6201749"><a href="/go/printer/printer.go.html#6179207">unindent</a></span><span class="op" id="6201757">:</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201762"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201763">.</span><span class="ident" id="6201764">indent</span><span class="op" id="6201770">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201776">if</span>&nbsp;<span class="ident" id="6201779"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201780">.</span><span class="ident" id="6201781">indent</span>&nbsp;<span class="op" id="6201788">&lt;</span>&nbsp;<span class="num" id="6201790">0</span>&nbsp;<span class="op" id="6201792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201798"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201799">.</span><span class="ident" id="6201800">internalError</span><span class="op" id="6201813">(</span><span class="string" id="6201814">&#34;negative&nbsp;indentation:&#34;</span><span class="op" id="6201837">,</span>&nbsp;<span class="ident" id="6201839"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201840">.</span><span class="ident" id="6201841">indent</span><span class="op" id="6201847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6201853"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6201854">.</span><span class="ident" id="6201855">indent</span>&nbsp;<span class="op" id="6201862">=</span>&nbsp;<span class="num" id="6201864">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6201869">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6201873">case</span>&nbsp;<span class="ident" id="6201878"><a href="/go/printer/printer.go.html#6179121">newline</a></span><span class="op" id="6201885">,</span>&nbsp;<span class="ident" id="6201887"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span><span class="op" id="6201895">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201900">//&nbsp;A&nbsp;line&nbsp;break&nbsp;immediately&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#34;correcting&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6201958">//&nbsp;unindent&nbsp;is&nbsp;swapped&nbsp;with&nbsp;the&nbsp;unindent&nbsp;-&nbsp;this&nbsp;permits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202017">//&nbsp;proper&nbsp;label&nbsp;positioning.&nbsp;If&nbsp;a&nbsp;comment&nbsp;is&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202073">//&nbsp;the&nbsp;line&nbsp;break&nbsp;and&nbsp;the&nbsp;label,&nbsp;the&nbsp;unindent&nbsp;is&nbsp;not</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202129">//&nbsp;part&nbsp;of&nbsp;the&nbsp;comment&nbsp;whitespace&nbsp;prefix&nbsp;and&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202189">//&nbsp;will&nbsp;be&nbsp;positioned&nbsp;correctly&nbsp;indented.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202234">if</span>&nbsp;<span class="ident" id="6202237"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6202238">+</span><span class="num" id="6202239">1</span>&nbsp;<span class="op" id="6202241">&lt;</span>&nbsp;<span class="ident" id="6202243"><a href="/go/printer/printer.go.html#6201599">n</a></span>&nbsp;<span class="op" id="6202245">&amp;&amp;</span>&nbsp;<span class="ident" id="6202248"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202249">.</span><span class="ident" id="6202250">wsbuf</span><span class="op" id="6202255">[</span><span class="ident" id="6202256"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6202257">+</span><span class="num" id="6202258">1</span><span class="op" id="6202259">]</span>&nbsp;<span class="op" id="6202261">==</span>&nbsp;<span class="ident" id="6202264"><a href="/go/printer/printer.go.html#6179207">unindent</a></span>&nbsp;<span class="op" id="6202273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202279">//&nbsp;Use&nbsp;a&nbsp;formfeed&nbsp;to&nbsp;terminate&nbsp;the&nbsp;current&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202335">//&nbsp;Otherwise,&nbsp;a&nbsp;long&nbsp;label&nbsp;name&nbsp;on&nbsp;the&nbsp;next&nbsp;line&nbsp;leading</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202396">//&nbsp;to&nbsp;a&nbsp;wide&nbsp;column&nbsp;may&nbsp;increase&nbsp;the&nbsp;indentation&nbsp;column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202456">//&nbsp;of&nbsp;lines&nbsp;before&nbsp;the&nbsp;label;&nbsp;effectively&nbsp;leading&nbsp;to&nbsp;wrong</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202519">//&nbsp;indentation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202539"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202540">.</span><span class="ident" id="6202541">wsbuf</span><span class="op" id="6202546">[</span><span class="ident" id="6202547"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6202548">]</span><span class="op" id="6202549">,</span>&nbsp;<span class="ident" id="6202551"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202552">.</span><span class="ident" id="6202553">wsbuf</span><span class="op" id="6202558">[</span><span class="ident" id="6202559"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6202560">+</span><span class="num" id="6202561">1</span><span class="op" id="6202562">]</span>&nbsp;<span class="op" id="6202564">=</span>&nbsp;<span class="ident" id="6202566"><a href="/go/printer/printer.go.html#6179207">unindent</a></span><span class="op" id="6202574">,</span>&nbsp;<span class="ident" id="6202576"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202589"><a href="/go/printer/printer.go.html#6201631">i</a></span><span class="op" id="6202590">--</span>&nbsp;<span class="comment" id="6202593">//&nbsp;do&nbsp;it&nbsp;again</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202612">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6202624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202629">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202643">default</span><span class="op" id="6202650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202655"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202656">.</span><span class="ident" id="6202657">writeByte</span><span class="op" id="6202666">(</span><span class="builtintype" id="6202667">byte</span><span class="op" id="6202671">(</span><span class="ident" id="6202672"><a href="/go/printer/printer.go.html#6201661">ch</a></span><span class="op" id="6202674">)</span><span class="op" id="6202675">,</span>&nbsp;<span class="num" id="6202677">1</span><span class="op" id="6202678">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6202682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6202685">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6202689">//&nbsp;shift&nbsp;remaining&nbsp;entries&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202722">l</span>&nbsp;<span class="op" id="6202724">:=</span>&nbsp;<span class="builtinfunc" id="6202727">copy</span><span class="op" id="6202731">(</span><span class="ident" id="6202732"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202733">.</span><span class="ident" id="6202734">wsbuf</span><span class="op" id="6202739">,</span>&nbsp;<span class="ident" id="6202741"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202742">.</span><span class="ident" id="6202743">wsbuf</span><span class="op" id="6202748">[</span><span class="ident" id="6202749"><a href="/go/printer/printer.go.html#6201599">n</a></span><span class="op" id="6202750">:</span><span class="op" id="6202751">]</span><span class="op" id="6202752">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202755"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202756">.</span><span class="ident" id="6202757">wsbuf</span>&nbsp;<span class="op" id="6202763">=</span>&nbsp;<span class="ident" id="6202765"><a href="/go/printer/printer.go.html#6201571">p</a></span><span class="op" id="6202766">.</span><span class="ident" id="6202767">wsbuf</span><span class="op" id="6202772">[</span><span class="op" id="6202773">:</span><span class="ident" id="6202774"><a href="/go/printer/printer.go.html#6202722">l</a></span><span class="op" id="6202775">]</span><br>
<span class="lineno"></span><span class="op" id="6202777">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6202780">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6202860">//&nbsp;Printing&nbsp;interface</span><br>
<span class="lineno">800</span><br>
<span class="lineno"></span><span class="comment" id="6202883">//&nbsp;nlines&nbsp;limits&nbsp;n&nbsp;to&nbsp;maxNewlines.</span><br>
<span class="lineno"></span><span class="keyword" id="6202918">func</span>&nbsp;<span class="ident" id="6202923">nlimit</span><span class="op" id="6202929">(</span><span class="ident" id="6202930">n</span>&nbsp;<span class="builtintype" id="6202932">int</span><span class="op" id="6202935">)</span>&nbsp;<span class="builtintype" id="6202937">int</span>&nbsp;<span class="op" id="6202941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202944">if</span>&nbsp;<span class="ident" id="6202947"><a href="/go/printer/printer.go.html#6202930">n</a></span>&nbsp;<span class="op" id="6202949">&gt;</span>&nbsp;<span class="ident" id="6202951"><a href="/go/printer/printer.go.html#6178869">maxNewlines</a></span>&nbsp;<span class="op" id="6202963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6202967"><a href="/go/printer/printer.go.html#6202930">n</a></span>&nbsp;<span class="op" id="6202969">=</span>&nbsp;<span class="ident" id="6202971"><a href="/go/printer/printer.go.html#6178869">maxNewlines</a></span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6202984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6202987">return</span>&nbsp;<span class="ident" id="6202994"><a href="/go/printer/printer.go.html#6202930">n</a></span><br>
<span class="lineno"></span><span class="op" id="6202996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6202999">func</span>&nbsp;<span class="ident" id="6203004">mayCombine</span><span class="op" id="6203014">(</span><span class="ident" id="6203015">prev</span>&nbsp;<span class="ident" id="6203020"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203025">.</span><span class="ident" id="6203026">Token</span><span class="op" id="6203031">,</span>&nbsp;<span class="ident" id="6203033">next</span>&nbsp;<span class="builtintype" id="6203038">byte</span><span class="op" id="6203042">)</span>&nbsp;<span class="op" id="6203044">(</span><span class="ident" id="6203045">b</span>&nbsp;<span class="builtintype" id="6203047">bool</span><span class="op" id="6203051">)</span>&nbsp;<span class="op" id="6203053">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203056">switch</span>&nbsp;<span class="ident" id="6203063"><a href="/go/printer/printer.go.html#6203015">prev</a></span>&nbsp;<span class="op" id="6203068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203071">case</span>&nbsp;<span class="ident" id="6203076"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203081">.</span><span class="ident" id="6203082">INT</span><span class="op" id="6203085">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203089"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203091">=</span>&nbsp;<span class="ident" id="6203093"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203098">==</span>&nbsp;<span class="string" id="6203101">&#39;.&#39;</span>&nbsp;<span class="comment" id="6203105">//&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203112">case</span>&nbsp;<span class="ident" id="6203117"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203122">.</span><span class="ident" id="6203123">ADD</span><span class="op" id="6203126">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203130"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203132">=</span>&nbsp;<span class="ident" id="6203134"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203139">==</span>&nbsp;<span class="string" id="6203142">&#39;+&#39;</span>&nbsp;<span class="comment" id="6203146">//&nbsp;++</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203153">case</span>&nbsp;<span class="ident" id="6203158"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203163">.</span><span class="ident" id="6203164">SUB</span><span class="op" id="6203167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203171"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203173">=</span>&nbsp;<span class="ident" id="6203175"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203180">==</span>&nbsp;<span class="string" id="6203183">&#39;-&#39;</span>&nbsp;<span class="comment" id="6203187">//&nbsp;--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203194">case</span>&nbsp;<span class="ident" id="6203199"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203204">.</span><span class="ident" id="6203205">QUO</span><span class="op" id="6203208">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203212"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203214">=</span>&nbsp;<span class="ident" id="6203216"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203221">==</span>&nbsp;<span class="string" id="6203224">&#39;*&#39;</span>&nbsp;<span class="comment" id="6203228">//&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203235">case</span>&nbsp;<span class="ident" id="6203240"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203245">.</span><span class="ident" id="6203246">LSS</span><span class="op" id="6203249">:</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203253"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203255">=</span>&nbsp;<span class="ident" id="6203257"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203262">==</span>&nbsp;<span class="string" id="6203265">&#39;-&#39;</span>&nbsp;<span class="op" id="6203269">||</span>&nbsp;<span class="ident" id="6203272"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203277">==</span>&nbsp;<span class="string" id="6203280">&#39;&lt;&#39;</span>&nbsp;<span class="comment" id="6203284">//&nbsp;&lt;-&nbsp;or&nbsp;&lt;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203297">case</span>&nbsp;<span class="ident" id="6203302"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6203307">.</span><span class="ident" id="6203308">AND</span><span class="op" id="6203311">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6203315"><a href="/go/printer/printer.go.html#6203045">b</a></span>&nbsp;<span class="op" id="6203317">=</span>&nbsp;<span class="ident" id="6203319"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203324">==</span>&nbsp;<span class="string" id="6203327">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="6203331">||</span>&nbsp;<span class="ident" id="6203334"><a href="/go/printer/printer.go.html#6203033">next</a></span>&nbsp;<span class="op" id="6203339">==</span>&nbsp;<span class="string" id="6203342">&#39;^&#39;</span>&nbsp;<span class="comment" id="6203346">//&nbsp;&amp;&amp;&nbsp;or&nbsp;&amp;^</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6203359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6203362">return</span><br>
<span class="lineno">825</span><span class="op" id="6203369">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6203372">//&nbsp;print&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;&#34;items&#34;&nbsp;(roughly&nbsp;corresponding&nbsp;to&nbsp;syntactic</span><br>
<span class="lineno"></span><span class="comment" id="6203442">//&nbsp;tokens,&nbsp;but&nbsp;also&nbsp;including&nbsp;whitespace&nbsp;and&nbsp;formatting&nbsp;information).</span><br>
<span class="lineno"></span><span class="comment" id="6203512">//&nbsp;It&nbsp;is&nbsp;the&nbsp;only&nbsp;print&nbsp;function&nbsp;that&nbsp;should&nbsp;be&nbsp;called&nbsp;directly&nbsp;from</span><br>
<span class="lineno">830</span><span class="comment" id="6203581">//&nbsp;any&nbsp;of&nbsp;the&nbsp;AST&nbsp;printing&nbsp;functions&nbsp;in&nbsp;nodes.go.</span><br>
<span class="lineno"></span><span class="comment" id="6203631">//</span><br>
<span class="lineno"></span><span class="comment" id="6203634">//&nbsp;Whitespace&nbsp;is&nbsp;accumulated&nbsp;until&nbsp;a&nbsp;non-whitespace&nbsp;token&nbsp;appears.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="6203705">//&nbsp;comments&nbsp;that&nbsp;need&nbsp;to&nbsp;appear&nbsp;before&nbsp;that&nbsp;token&nbsp;are&nbsp;printed&nbsp;first,</span><br>
<span class="lineno"></span><span class="comment" id="6203774">//&nbsp;taking&nbsp;into&nbsp;account&nbsp;the&nbsp;amount&nbsp;and&nbsp;structure&nbsp;of&nbsp;any&nbsp;pending&nbsp;white-</span><br>
<span class="lineno">835</span><span class="comment" id="6203844">//&nbsp;space&nbsp;for&nbsp;best&nbsp;comment&nbsp;placement.&nbsp;Then,&nbsp;any&nbsp;leftover&nbsp;whitespace&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6203914">//&nbsp;printed,&nbsp;followed&nbsp;by&nbsp;the&nbsp;actual&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="6203956">//</span><br>
<span class="lineno"></span><span class="keyword" id="6203959">func</span>&nbsp;<span class="op" id="6203964">(</span><span class="ident" id="6203965">p</span>&nbsp;<span class="op" id="6203967">*</span><span class="ident" id="6203968"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6203975">)</span>&nbsp;<span class="builtinfunc" id="6203977">print</span><span class="op" id="6203982">(</span><span class="ident" id="6203983">args</span>&nbsp;<span class="op" id="6203988">...</span><span class="keyword" id="6203991">interface</span><span class="op" id="6204000">{</span><span class="op" id="6204001">}</span><span class="op" id="6204002">)</span>&nbsp;<span class="op" id="6204004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204007">for</span>&nbsp;<span class="ident" id="6204011">_</span><span class="op" id="6204012">,</span>&nbsp;<span class="ident" id="6204014">arg</span>&nbsp;<span class="op" id="6204018">:=</span>&nbsp;<span class="keyword" id="6204021">range</span>&nbsp;<span class="ident" id="6204027"><a href="/go/printer/printer.go.html#6203983">args</a></span>&nbsp;<span class="op" id="6204032">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204036">//&nbsp;information&nbsp;about&nbsp;the&nbsp;current&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204075">var</span>&nbsp;<span class="ident" id="6204079">data</span>&nbsp;<span class="builtintype" id="6204084">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204093">var</span>&nbsp;<span class="ident" id="6204097">isLit</span>&nbsp;<span class="builtintype" id="6204103">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204110">var</span>&nbsp;<span class="ident" id="6204114">impliedSemi</span>&nbsp;<span class="builtintype" id="6204126">bool</span>&nbsp;<span class="comment" id="6204131">//&nbsp;value&nbsp;for&nbsp;p.impliedSemi&nbsp;after&nbsp;this&nbsp;arg</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204176">//&nbsp;record&nbsp;previous&nbsp;opening&nbsp;token,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204219">switch</span>&nbsp;<span class="ident" id="6204226"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204227">.</span><span class="ident" id="6204228">lastTok</span>&nbsp;<span class="op" id="6204236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204240">case</span>&nbsp;<span class="ident" id="6204245"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6204250">.</span><span class="ident" id="6204251">ILLEGAL</span><span class="op" id="6204258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204263">//&nbsp;ignore&nbsp;(white&nbsp;space)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204289">case</span>&nbsp;<span class="ident" id="6204294"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6204299">.</span><span class="ident" id="6204300">LPAREN</span><span class="op" id="6204306">,</span>&nbsp;<span class="ident" id="6204308"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6204313">.</span><span class="ident" id="6204314">LBRACK</span><span class="op" id="6204320">:</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204325"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204326">.</span><span class="ident" id="6204327">prevOpen</span>&nbsp;<span class="op" id="6204336">=</span>&nbsp;<span class="ident" id="6204338"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204339">.</span><span class="ident" id="6204340">lastTok</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204350">default</span><span class="op" id="6204357">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204362">//&nbsp;other&nbsp;tokens&nbsp;followed&nbsp;any&nbsp;opening&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204408"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204409">.</span><span class="ident" id="6204410">prevOpen</span>&nbsp;<span class="op" id="6204419">=</span>&nbsp;<span class="ident" id="6204421"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6204426">.</span><span class="ident" id="6204427">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204437">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204442">switch</span>&nbsp;<span class="ident" id="6204449">x</span>&nbsp;<span class="op" id="6204451">:=</span>&nbsp;<span class="ident" id="6204454"><a href="/go/printer/printer.go.html#6204014">arg</a></span><span class="op" id="6204457">.</span><span class="op" id="6204458">(</span><span class="keyword" id="6204459">type</span><span class="op" id="6204463">)</span>&nbsp;<span class="op" id="6204465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204469">case</span>&nbsp;<span class="ident" id="6204474"><a href="/go/printer/printer.go.html#6179296">pmode</a></span><span class="op" id="6204479">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204484">//&nbsp;toggle&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204510"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204511">.</span><span class="ident" id="6204512">mode</span>&nbsp;<span class="op" id="6204517">^=</span>&nbsp;<span class="ident" id="6204520"><a href="/go/printer/printer.go.html#6204449">x</a></span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204525">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204537">case</span>&nbsp;<span class="ident" id="6204542"><a href="/go/printer/printer.go.html#6179012">whiteSpace</a></span><span class="op" id="6204552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204557">if</span>&nbsp;<span class="ident" id="6204560"><a href="/go/printer/printer.go.html#6204449">x</a></span>&nbsp;<span class="op" id="6204562">==</span>&nbsp;<span class="ident" id="6204565"><a href="/go/printer/printer.go.html#6179038">ignore</a></span>&nbsp;<span class="op" id="6204572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204578">//&nbsp;don&#39;t&nbsp;add&nbsp;ignore&#39;s&nbsp;to&nbsp;the&nbsp;buffer;&nbsp;they</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204624">//&nbsp;may&nbsp;screw&nbsp;up&nbsp;&#34;correcting&#34;&nbsp;unindents&nbsp;(see</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204672">//&nbsp;LabeledStmt)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204692">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204709">i</span>&nbsp;<span class="op" id="6204711">:=</span>&nbsp;<span class="builtinfunc" id="6204714">len</span><span class="op" id="6204717">(</span><span class="ident" id="6204718"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204719">.</span><span class="ident" id="6204720">wsbuf</span><span class="op" id="6204725">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6204730">if</span>&nbsp;<span class="ident" id="6204733"><a href="/go/printer/printer.go.html#6204709">i</a></span>&nbsp;<span class="op" id="6204735">==</span>&nbsp;<span class="builtinfunc" id="6204738">cap</span><span class="op" id="6204741">(</span><span class="ident" id="6204742"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204743">.</span><span class="ident" id="6204744">wsbuf</span><span class="op" id="6204749">)</span>&nbsp;<span class="op" id="6204751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204757">//&nbsp;Whitespace&nbsp;sequences&nbsp;are&nbsp;very&nbsp;short&nbsp;so&nbsp;this&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204815">//&nbsp;never&nbsp;happen.&nbsp;Handle&nbsp;gracefully&nbsp;(but&nbsp;possibly&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6204873">//&nbsp;bad&nbsp;comment&nbsp;placement)&nbsp;if&nbsp;it&nbsp;does&nbsp;happen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204922"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204923">.</span><span class="ident" id="6204924">writeWhitespace</span><span class="op" id="6204939">(</span><span class="ident" id="6204940"><a href="/go/printer/printer.go.html#6204709">i</a></span><span class="op" id="6204941">)</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204947"><a href="/go/printer/printer.go.html#6204709">i</a></span>&nbsp;<span class="op" id="6204949">=</span>&nbsp;<span class="num" id="6204951">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6204956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204961"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204962">.</span><span class="ident" id="6204963">wsbuf</span>&nbsp;<span class="op" id="6204969">=</span>&nbsp;<span class="ident" id="6204971"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204972">.</span><span class="ident" id="6204973">wsbuf</span><span class="op" id="6204978">[</span><span class="num" id="6204979">0</span>&nbsp;<span class="op" id="6204981">:</span>&nbsp;<span class="ident" id="6204983"><a href="/go/printer/printer.go.html#6204709">i</a></span><span class="op" id="6204984">+</span><span class="num" id="6204985">1</span><span class="op" id="6204986">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6204991"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6204992">.</span><span class="ident" id="6204993">wsbuf</span><span class="op" id="6204998">[</span><span class="ident" id="6204999"><a href="/go/printer/printer.go.html#6204709">i</a></span><span class="op" id="6205000">]</span>&nbsp;<span class="op" id="6205002">=</span>&nbsp;<span class="ident" id="6205004"><a href="/go/printer/printer.go.html#6204449">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205009">if</span>&nbsp;<span class="ident" id="6205012"><a href="/go/printer/printer.go.html#6204449">x</a></span>&nbsp;<span class="op" id="6205014">==</span>&nbsp;<span class="ident" id="6205017"><a href="/go/printer/printer.go.html#6179121">newline</a></span>&nbsp;<span class="op" id="6205025">||</span>&nbsp;<span class="ident" id="6205028"><a href="/go/printer/printer.go.html#6204449">x</a></span>&nbsp;<span class="op" id="6205030">==</span>&nbsp;<span class="ident" id="6205033"><a href="/go/printer/printer.go.html#6179150">formfeed</a></span>&nbsp;<span class="op" id="6205042">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205048">//&nbsp;newlines&nbsp;affect&nbsp;the&nbsp;current&nbsp;state&nbsp;(p.impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205105">//&nbsp;and&nbsp;not&nbsp;the&nbsp;state&nbsp;after&nbsp;printing&nbsp;arg&nbsp;(impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205163">//&nbsp;because&nbsp;comments&nbsp;can&nbsp;be&nbsp;interspersed&nbsp;before&nbsp;the&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205222">//&nbsp;in&nbsp;this&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205242"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205243">.</span><span class="ident" id="6205244">impliedSemi</span>&nbsp;<span class="op" id="6205256">=</span>&nbsp;<span class="ident" id="6205258">false</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205272"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205273">.</span><span class="ident" id="6205274">lastTok</span>&nbsp;<span class="op" id="6205282">=</span>&nbsp;<span class="ident" id="6205284"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6205289">.</span><span class="ident" id="6205290">ILLEGAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205301">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205313">case</span>&nbsp;<span class="op" id="6205318">*</span><span class="ident" id="6205319"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6205322">.</span><span class="ident" id="6205323">Ident</span><span class="op" id="6205328">:</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205333"><a href="/go/printer/printer.go.html#6204079">data</a></span>&nbsp;<span class="op" id="6205338">=</span>&nbsp;<span class="ident" id="6205340"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6205341">.</span><span class="ident" id="6205342">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205350"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span>&nbsp;<span class="op" id="6205362">=</span>&nbsp;<span class="ident" id="6205364">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205372"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205373">.</span><span class="ident" id="6205374">lastTok</span>&nbsp;<span class="op" id="6205382">=</span>&nbsp;<span class="ident" id="6205384"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6205389">.</span><span class="ident" id="6205390">IDENT</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205399">case</span>&nbsp;<span class="op" id="6205404">*</span><span class="ident" id="6205405"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6205408">.</span><span class="ident" id="6205409">BasicLit</span><span class="op" id="6205417">:</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205422"><a href="/go/printer/printer.go.html#6204079">data</a></span>&nbsp;<span class="op" id="6205427">=</span>&nbsp;<span class="ident" id="6205429"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6205430">.</span><span class="ident" id="6205431">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205440"><a href="/go/printer/printer.go.html#6204097">isLit</a></span>&nbsp;<span class="op" id="6205446">=</span>&nbsp;<span class="ident" id="6205448">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205456"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span>&nbsp;<span class="op" id="6205468">=</span>&nbsp;<span class="ident" id="6205470">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205478"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205479">.</span><span class="ident" id="6205480">lastTok</span>&nbsp;<span class="op" id="6205488">=</span>&nbsp;<span class="ident" id="6205490"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6205491">.</span><span class="ident" id="6205492">Kind</span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205500">case</span>&nbsp;<span class="ident" id="6205505"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6205510">.</span><span class="ident" id="6205511">Token</span><span class="op" id="6205516">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205521">s</span>&nbsp;<span class="op" id="6205523">:=</span>&nbsp;<span class="ident" id="6205526"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6205527">.</span><span class="ident" id="6205528">String</span><span class="op" id="6205534">(</span><span class="op" id="6205535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205540">if</span>&nbsp;<span class="ident" id="6205543"><a href="/go/printer/printer.go.html#6203004">mayCombine</a></span><span class="op" id="6205553">(</span><span class="ident" id="6205554"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205555">.</span><span class="ident" id="6205556">lastTok</span><span class="op" id="6205563">,</span>&nbsp;<span class="ident" id="6205565"><a href="/go/printer/printer.go.html#6205521">s</a></span><span class="op" id="6205566">[</span><span class="num" id="6205567">0</span><span class="op" id="6205568">]</span><span class="op" id="6205569">)</span>&nbsp;<span class="op" id="6205571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205577">//&nbsp;the&nbsp;previous&nbsp;and&nbsp;the&nbsp;current&nbsp;token&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205627">//&nbsp;separated&nbsp;by&nbsp;a&nbsp;blank&nbsp;otherwise&nbsp;they&nbsp;combine</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205678">//&nbsp;into&nbsp;a&nbsp;different&nbsp;incorrect&nbsp;token&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205727">//&nbsp;(except&nbsp;for&nbsp;token.INT&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#39;.&#39;&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205779">//&nbsp;should&nbsp;never&nbsp;happen&nbsp;because&nbsp;it&nbsp;is&nbsp;taken&nbsp;care</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6205831">//&nbsp;of&nbsp;via&nbsp;binary&nbsp;expression&nbsp;formatting)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6205875">if</span>&nbsp;<span class="builtinfunc" id="6205878">len</span><span class="op" id="6205881">(</span><span class="ident" id="6205882"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205883">.</span><span class="ident" id="6205884">wsbuf</span><span class="op" id="6205889">)</span>&nbsp;<span class="op" id="6205891">!=</span>&nbsp;<span class="num" id="6205894">0</span>&nbsp;<span class="op" id="6205896">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205903"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205904">.</span><span class="ident" id="6205905">internalError</span><span class="op" id="6205918">(</span><span class="string" id="6205919">&#34;whitespace&nbsp;buffer&nbsp;not&nbsp;empty&#34;</span><span class="op" id="6205948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6205954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205960"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205961">.</span><span class="ident" id="6205962">wsbuf</span>&nbsp;<span class="op" id="6205968">=</span>&nbsp;<span class="ident" id="6205970"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205971">.</span><span class="ident" id="6205972">wsbuf</span><span class="op" id="6205977">[</span><span class="num" id="6205978">0</span><span class="op" id="6205979">:</span><span class="num" id="6205980">1</span><span class="op" id="6205981">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6205987"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6205988">.</span><span class="ident" id="6205989">wsbuf</span><span class="op" id="6205994">[</span><span class="num" id="6205995">0</span><span class="op" id="6205996">]</span>&nbsp;<span class="op" id="6205998">=</span>&nbsp;<span class="string" id="6206000">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206007">}</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206012"><a href="/go/printer/printer.go.html#6204079">data</a></span>&nbsp;<span class="op" id="6206017">=</span>&nbsp;<span class="ident" id="6206019"><a href="/go/printer/printer.go.html#6205521">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206024">//&nbsp;some&nbsp;keywords&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;imply&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206084">switch</span>&nbsp;<span class="ident" id="6206091"><a href="/go/printer/printer.go.html#6204449">x</a></span>&nbsp;<span class="op" id="6206093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206098">case</span>&nbsp;<span class="ident" id="6206103"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206108">.</span><span class="ident" id="6206109">BREAK</span><span class="op" id="6206114">,</span>&nbsp;<span class="ident" id="6206116"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206121">.</span><span class="ident" id="6206122">CONTINUE</span><span class="op" id="6206130">,</span>&nbsp;<span class="ident" id="6206132"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206137">.</span><span class="ident" id="6206138">FALLTHROUGH</span><span class="op" id="6206149">,</span>&nbsp;<span class="ident" id="6206151"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206156">.</span><span class="ident" id="6206157">RETURN</span><span class="op" id="6206163">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206169"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206174">.</span><span class="ident" id="6206175">INC</span><span class="op" id="6206178">,</span>&nbsp;<span class="ident" id="6206180"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206185">.</span><span class="ident" id="6206186">DEC</span><span class="op" id="6206189">,</span>&nbsp;<span class="ident" id="6206191"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206196">.</span><span class="ident" id="6206197">RPAREN</span><span class="op" id="6206203">,</span>&nbsp;<span class="ident" id="6206205"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206210">.</span><span class="ident" id="6206211">RBRACK</span><span class="op" id="6206217">,</span>&nbsp;<span class="ident" id="6206219"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206224">.</span><span class="ident" id="6206225">RBRACE</span><span class="op" id="6206231">:</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206237"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span>&nbsp;<span class="op" id="6206249">=</span>&nbsp;<span class="ident" id="6206251">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206264"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206265">.</span><span class="ident" id="6206266">lastTok</span>&nbsp;<span class="op" id="6206274">=</span>&nbsp;<span class="ident" id="6206276"><a href="/go/printer/printer.go.html#6204449">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206281">case</span>&nbsp;<span class="ident" id="6206286"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206291">.</span><span class="ident" id="6206292">Pos</span><span class="op" id="6206295">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206300">if</span>&nbsp;<span class="ident" id="6206303"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6206304">.</span><span class="ident" id="6206305">IsValid</span><span class="op" id="6206312">(</span><span class="op" id="6206313">)</span>&nbsp;<span class="op" id="6206315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206321"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206322">.</span><span class="ident" id="6206323">pos</span>&nbsp;<span class="op" id="6206327">=</span>&nbsp;<span class="ident" id="6206329"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206330">.</span><span class="ident" id="6206331">posFor</span><span class="op" id="6206337">(</span><span class="ident" id="6206338"><a href="/go/printer/printer.go.html#6204449">x</a></span><span class="op" id="6206339">)</span>&nbsp;<span class="comment" id="6206341">//&nbsp;accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206383">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206395">case</span>&nbsp;<span class="builtintype" id="6206400">string</span><span class="op" id="6206406">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206411">//&nbsp;incorrect&nbsp;AST&nbsp;-&nbsp;print&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206453"><a href="/go/printer/printer.go.html#6204079">data</a></span>&nbsp;<span class="op" id="6206458">=</span>&nbsp;<span class="ident" id="6206460"><a href="/go/printer/printer.go.html#6204449">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206465"><a href="/go/printer/printer.go.html#6204097">isLit</a></span>&nbsp;<span class="op" id="6206471">=</span>&nbsp;<span class="ident" id="6206473">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206481"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span>&nbsp;<span class="op" id="6206493">=</span>&nbsp;<span class="ident" id="6206495">true</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206503"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206504">.</span><span class="ident" id="6206505">lastTok</span>&nbsp;<span class="op" id="6206513">=</span>&nbsp;<span class="ident" id="6206515"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6206520">.</span><span class="ident" id="6206521">STRING</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206531">default</span><span class="op" id="6206538">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206543"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6206546">.</span><span class="ident" id="6206547">Fprintf</span><span class="op" id="6206554">(</span><span class="ident" id="6206555"><a href="/go/printer/printer.go.html#6178801">os</a></span><span class="op" id="6206557">.</span><span class="ident" id="6206558">Stderr</span><span class="op" id="6206564">,</span>&nbsp;<span class="string" id="6206566">&#34;print:&nbsp;unsupported&nbsp;argument&nbsp;%v&nbsp;(%T)\n&#34;</span><span class="op" id="6206605">,</span>&nbsp;<span class="ident" id="6206607"><a href="/go/printer/printer.go.html#6204014">arg</a></span><span class="op" id="6206610">,</span>&nbsp;<span class="ident" id="6206612"><a href="/go/printer/printer.go.html#6204014">arg</a></span><span class="op" id="6206615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6206620">panic</span><span class="op" id="6206625">(</span><span class="string" id="6206626">&#34;go/printer&nbsp;type&#34;</span><span class="op" id="6206643">)</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6206647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206651">//&nbsp;data&nbsp;!=&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206668">next</span>&nbsp;<span class="op" id="6206673">:=</span>&nbsp;<span class="ident" id="6206676"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206677">.</span><span class="ident" id="6206678">pos</span>&nbsp;<span class="comment" id="6206682">//&nbsp;estimated/accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206728">wroteNewline</span><span class="op" id="6206740">,</span>&nbsp;<span class="ident" id="6206742">droppedFF</span>&nbsp;<span class="op" id="6206752">:=</span>&nbsp;<span class="ident" id="6206755"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206756">.</span><span class="ident" id="6206757">flush</span><span class="op" id="6206762">(</span><span class="ident" id="6206763"><a href="/go/printer/printer.go.html#6206668">next</a></span><span class="op" id="6206767">,</span>&nbsp;<span class="ident" id="6206769"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206770">.</span><span class="ident" id="6206771">lastTok</span><span class="op" id="6206778">)</span><br>
<span class="lineno">945</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206783">//&nbsp;intersperse&nbsp;extra&nbsp;newlines&nbsp;if&nbsp;present&nbsp;in&nbsp;the&nbsp;source&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206844">//&nbsp;if&nbsp;they&nbsp;don&#39;t&nbsp;cause&nbsp;extra&nbsp;semicolons&nbsp;(don&#39;t&nbsp;do&nbsp;this&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6206904">//&nbsp;flush&nbsp;as&nbsp;it&nbsp;will&nbsp;cause&nbsp;extra&nbsp;newlines&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;file)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6206969">if</span>&nbsp;<span class="op" id="6206972">!</span><span class="ident" id="6206973"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6206974">.</span><span class="ident" id="6206975">impliedSemi</span>&nbsp;<span class="op" id="6206987">{</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6206992">n</span>&nbsp;<span class="op" id="6206994">:=</span>&nbsp;<span class="ident" id="6206997"><a href="/go/printer/printer.go.html#6202923">nlimit</a></span><span class="op" id="6207003">(</span><span class="ident" id="6207004"><a href="/go/printer/printer.go.html#6206668">next</a></span><span class="op" id="6207008">.</span><span class="ident" id="6207009">Line</span>&nbsp;<span class="op" id="6207014">-</span>&nbsp;<span class="ident" id="6207016"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207017">.</span><span class="ident" id="6207018">pos</span><span class="op" id="6207021">.</span><span class="ident" id="6207022">Line</span><span class="op" id="6207026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207031">//&nbsp;don&#39;t&nbsp;exceed&nbsp;maxNewlines&nbsp;if&nbsp;we&nbsp;already&nbsp;wrote&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207086">if</span>&nbsp;<span class="ident" id="6207089"><a href="/go/printer/printer.go.html#6206728">wroteNewline</a></span>&nbsp;<span class="op" id="6207102">&amp;&amp;</span>&nbsp;<span class="ident" id="6207105"><a href="/go/printer/printer.go.html#6206992">n</a></span>&nbsp;<span class="op" id="6207107">==</span>&nbsp;<span class="ident" id="6207110"><a href="/go/printer/printer.go.html#6178869">maxNewlines</a></span>&nbsp;<span class="op" id="6207122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207128"><a href="/go/printer/printer.go.html#6206992">n</a></span>&nbsp;<span class="op" id="6207130">=</span>&nbsp;<span class="ident" id="6207132"><a href="/go/printer/printer.go.html#6178869">maxNewlines</a></span>&nbsp;<span class="op" id="6207144">-</span>&nbsp;<span class="num" id="6207146">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207151">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207156">if</span>&nbsp;<span class="ident" id="6207159"><a href="/go/printer/printer.go.html#6206992">n</a></span>&nbsp;<span class="op" id="6207161">&gt;</span>&nbsp;<span class="num" id="6207163">0</span>&nbsp;<span class="op" id="6207165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207171">ch</span>&nbsp;<span class="op" id="6207174">:=</span>&nbsp;<span class="builtintype" id="6207177">byte</span><span class="op" id="6207181">(</span><span class="string" id="6207182">&#39;\n&#39;</span><span class="op" id="6207186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207192">if</span>&nbsp;<span class="ident" id="6207195"><a href="/go/printer/printer.go.html#6206742">droppedFF</a></span>&nbsp;<span class="op" id="6207205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207212"><a href="/go/printer/printer.go.html#6207171">ch</a></span>&nbsp;<span class="op" id="6207215">=</span>&nbsp;<span class="string" id="6207217">&#39;\f&#39;</span>&nbsp;<span class="comment" id="6207222">//&nbsp;use&nbsp;formfeed&nbsp;since&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207270">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207276"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207277">.</span><span class="ident" id="6207278">writeByte</span><span class="op" id="6207287">(</span><span class="ident" id="6207288"><a href="/go/printer/printer.go.html#6207171">ch</a></span><span class="op" id="6207290">,</span>&nbsp;<span class="ident" id="6207292"><a href="/go/printer/printer.go.html#6206992">n</a></span><span class="op" id="6207293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207299"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span>&nbsp;<span class="op" id="6207311">=</span>&nbsp;<span class="ident" id="6207313">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207322">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207326">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207331">//&nbsp;the&nbsp;next&nbsp;token&nbsp;starts&nbsp;now&nbsp;-&nbsp;record&nbsp;its&nbsp;line&nbsp;number&nbsp;if&nbsp;requested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207400">if</span>&nbsp;<span class="ident" id="6207403"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207404">.</span><span class="ident" id="6207405">linePtr</span>&nbsp;<span class="op" id="6207413">!=</span>&nbsp;<span class="ident" id="6207416">nil</span>&nbsp;<span class="op" id="6207420">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207425">*</span><span class="ident" id="6207426"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207427">.</span><span class="ident" id="6207428">linePtr</span>&nbsp;<span class="op" id="6207436">=</span>&nbsp;<span class="ident" id="6207438"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207439">.</span><span class="ident" id="6207440">out</span><span class="op" id="6207443">.</span><span class="ident" id="6207444">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207452"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207453">.</span><span class="ident" id="6207454">linePtr</span>&nbsp;<span class="op" id="6207462">=</span>&nbsp;<span class="ident" id="6207464">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207470">}</span><br>
<span class="lineno">970</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207475"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207476">.</span><span class="ident" id="6207477">writeString</span><span class="op" id="6207488">(</span><span class="ident" id="6207489"><a href="/go/printer/printer.go.html#6206668">next</a></span><span class="op" id="6207493">,</span>&nbsp;<span class="ident" id="6207495"><a href="/go/printer/printer.go.html#6204079">data</a></span><span class="op" id="6207499">,</span>&nbsp;<span class="ident" id="6207501"><a href="/go/printer/printer.go.html#6204097">isLit</a></span><span class="op" id="6207506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207510"><a href="/go/printer/printer.go.html#6203965">p</a></span><span class="op" id="6207511">.</span><span class="ident" id="6207512">impliedSemi</span>&nbsp;<span class="op" id="6207524">=</span>&nbsp;<span class="ident" id="6207526"><a href="/go/printer/printer.go.html#6204114">impliedSemi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6207539">}</span><br>
<span class="lineno"></span><span class="op" id="6207541">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span><span class="comment" id="6207544">//&nbsp;flush&nbsp;prints&nbsp;any&nbsp;pending&nbsp;comments&nbsp;and&nbsp;whitespace&nbsp;occurring&nbsp;textually</span><br>
<span class="lineno"></span><span class="comment" id="6207616">//&nbsp;before&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;next&nbsp;token&nbsp;tok.&nbsp;The&nbsp;flush&nbsp;result&nbsp;indicates</span><br>
<span class="lineno"></span><span class="comment" id="6207689">//&nbsp;if&nbsp;a&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="6207766">//&nbsp;buffer.</span><br>
<span class="lineno">980</span><span class="comment" id="6207777">//</span><br>
<span class="lineno"></span><span class="keyword" id="6207780">func</span>&nbsp;<span class="op" id="6207785">(</span><span class="ident" id="6207786">p</span>&nbsp;<span class="op" id="6207788">*</span><span class="ident" id="6207789"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6207796">)</span>&nbsp;<span class="ident" id="6207798">flush</span><span class="op" id="6207803">(</span><span class="ident" id="6207804">next</span>&nbsp;<span class="ident" id="6207809"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6207814">.</span><span class="ident" id="6207815">Position</span><span class="op" id="6207823">,</span>&nbsp;<span class="ident" id="6207825">tok</span>&nbsp;<span class="ident" id="6207829"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6207834">.</span><span class="ident" id="6207835">Token</span><span class="op" id="6207840">)</span>&nbsp;<span class="op" id="6207842">(</span><span class="ident" id="6207843">wroteNewline</span><span class="op" id="6207855">,</span>&nbsp;<span class="ident" id="6207857">droppedFF</span>&nbsp;<span class="builtintype" id="6207867">bool</span><span class="op" id="6207871">)</span>&nbsp;<span class="op" id="6207873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6207876">if</span>&nbsp;<span class="ident" id="6207879"><a href="/go/printer/printer.go.html#6207786">p</a></span><span class="op" id="6207880">.</span><span class="ident" id="6207881">commentBefore</span><span class="op" id="6207894">(</span><span class="ident" id="6207895"><a href="/go/printer/printer.go.html#6207804">next</a></span><span class="op" id="6207899">)</span>&nbsp;<span class="op" id="6207901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6207905">//&nbsp;if&nbsp;there&nbsp;are&nbsp;comments&nbsp;before&nbsp;the&nbsp;next&nbsp;item,&nbsp;intersperse&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6207971"><a href="/go/printer/printer.go.html#6207843">wroteNewline</a></span><span class="op" id="6207983">,</span>&nbsp;<span class="ident" id="6207985"><a href="/go/printer/printer.go.html#6207857">droppedFF</a></span>&nbsp;<span class="op" id="6207995">=</span>&nbsp;<span class="ident" id="6207997"><a href="/go/printer/printer.go.html#6207786">p</a></span><span class="op" id="6207998">.</span><span class="ident" id="6207999">intersperseComments</span><span class="op" id="6208018">(</span><span class="ident" id="6208019"><a href="/go/printer/printer.go.html#6207804">next</a></span><span class="op" id="6208023">,</span>&nbsp;<span class="ident" id="6208025"><a href="/go/printer/printer.go.html#6207825">tok</a></span><span class="op" id="6208028">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208031">}</span>&nbsp;<span class="keyword" id="6208033">else</span>&nbsp;<span class="op" id="6208038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208042">//&nbsp;otherwise,&nbsp;write&nbsp;any&nbsp;leftover&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208088"><a href="/go/printer/printer.go.html#6207786">p</a></span><span class="op" id="6208089">.</span><span class="ident" id="6208090">writeWhitespace</span><span class="op" id="6208105">(</span><span class="builtinfunc" id="6208106">len</span><span class="op" id="6208109">(</span><span class="ident" id="6208110"><a href="/go/printer/printer.go.html#6207786">p</a></span><span class="op" id="6208111">.</span><span class="ident" id="6208112">wsbuf</span><span class="op" id="6208117">)</span><span class="op" id="6208118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208121">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208124">return</span><br>
<span class="lineno">990</span><span class="op" id="6208131">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6208134">//&nbsp;getNode&nbsp;returns&nbsp;the&nbsp;ast.CommentGroup&nbsp;associated&nbsp;with&nbsp;n,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="6208201">func</span>&nbsp;<span class="ident" id="6208206">getDoc</span><span class="op" id="6208212">(</span><span class="ident" id="6208213">n</span>&nbsp;<span class="ident" id="6208215"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208218">.</span><span class="ident" id="6208219">Node</span><span class="op" id="6208223">)</span>&nbsp;<span class="op" id="6208225">*</span><span class="ident" id="6208226"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208229">.</span><span class="ident" id="6208230">CommentGroup</span>&nbsp;<span class="op" id="6208243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208246">switch</span>&nbsp;<span class="ident" id="6208253">n</span>&nbsp;<span class="op" id="6208255">:=</span>&nbsp;<span class="ident" id="6208258"><a href="/go/printer/printer.go.html#6208213">n</a></span><span class="op" id="6208259">.</span><span class="op" id="6208260">(</span><span class="keyword" id="6208261">type</span><span class="op" id="6208265">)</span>&nbsp;<span class="op" id="6208267">{</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208270">case</span>&nbsp;<span class="op" id="6208275">*</span><span class="ident" id="6208276"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208279">.</span><span class="ident" id="6208280">Field</span><span class="op" id="6208285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208289">return</span>&nbsp;<span class="ident" id="6208296"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208297">.</span><span class="ident" id="6208298">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208303">case</span>&nbsp;<span class="op" id="6208308">*</span><span class="ident" id="6208309"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208312">.</span><span class="ident" id="6208313">ImportSpec</span><span class="op" id="6208323">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208327">return</span>&nbsp;<span class="ident" id="6208334"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208335">.</span><span class="ident" id="6208336">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208341">case</span>&nbsp;<span class="op" id="6208346">*</span><span class="ident" id="6208347"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208350">.</span><span class="ident" id="6208351">ValueSpec</span><span class="op" id="6208360">:</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208364">return</span>&nbsp;<span class="ident" id="6208371"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208372">.</span><span class="ident" id="6208373">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208378">case</span>&nbsp;<span class="op" id="6208383">*</span><span class="ident" id="6208384"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208387">.</span><span class="ident" id="6208388">TypeSpec</span><span class="op" id="6208396">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208400">return</span>&nbsp;<span class="ident" id="6208407"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208408">.</span><span class="ident" id="6208409">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208414">case</span>&nbsp;<span class="op" id="6208419">*</span><span class="ident" id="6208420"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208423">.</span><span class="ident" id="6208424">GenDecl</span><span class="op" id="6208431">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208435">return</span>&nbsp;<span class="ident" id="6208442"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208443">.</span><span class="ident" id="6208444">Doc</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208449">case</span>&nbsp;<span class="op" id="6208454">*</span><span class="ident" id="6208455"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208458">.</span><span class="ident" id="6208459">FuncDecl</span><span class="op" id="6208467">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208471">return</span>&nbsp;<span class="ident" id="6208478"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208479">.</span><span class="ident" id="6208480">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208485">case</span>&nbsp;<span class="op" id="6208490">*</span><span class="ident" id="6208491"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208494">.</span><span class="ident" id="6208495">File</span><span class="op" id="6208499">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208503">return</span>&nbsp;<span class="ident" id="6208510"><a href="/go/printer/printer.go.html#6208253">n</a></span><span class="op" id="6208511">.</span><span class="ident" id="6208512">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208517">}</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208520">return</span>&nbsp;<span class="ident" id="6208527">nil</span><br>
<span class="lineno"></span><span class="op" id="6208531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6208534">func</span>&nbsp;<span class="op" id="6208539">(</span><span class="ident" id="6208540">p</span>&nbsp;<span class="op" id="6208542">*</span><span class="ident" id="6208543"><a href="/go/printer/printer.go.html#6179849">printer</a></span><span class="op" id="6208550">)</span>&nbsp;<span class="ident" id="6208552">printNode</span><span class="op" id="6208561">(</span><span class="ident" id="6208562">node</span>&nbsp;<span class="keyword" id="6208567">interface</span><span class="op" id="6208576">{</span><span class="op" id="6208577">}</span><span class="op" id="6208578">)</span>&nbsp;<span class="builtintype" id="6208580">error</span>&nbsp;<span class="op" id="6208586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208589">//&nbsp;unpack&nbsp;*CommentedNode,&nbsp;if&nbsp;any</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208623">var</span>&nbsp;<span class="ident" id="6208627">comments</span>&nbsp;<span class="op" id="6208636">[</span><span class="op" id="6208637">]</span><span class="op" id="6208638">*</span><span class="ident" id="6208639"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208642">.</span><span class="ident" id="6208643">CommentGroup</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208657">if</span>&nbsp;<span class="ident" id="6208660">cnode</span><span class="op" id="6208665">,</span>&nbsp;<span class="ident" id="6208667">ok</span>&nbsp;<span class="op" id="6208670">:=</span>&nbsp;<span class="ident" id="6208673"><a href="/go/printer/printer.go.html#6208562">node</a></span><span class="op" id="6208677">.</span><span class="op" id="6208678">(</span><span class="op" id="6208679">*</span><span class="ident" id="6208680"><a href="/go/printer/printer.go.html#6215296">CommentedNode</a></span><span class="op" id="6208693">)</span><span class="op" id="6208694">;</span>&nbsp;<span class="ident" id="6208696"><a href="/go/printer/printer.go.html#6208667">ok</a></span>&nbsp;<span class="op" id="6208699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208703"><a href="/go/printer/printer.go.html#6208562">node</a></span>&nbsp;<span class="op" id="6208708">=</span>&nbsp;<span class="ident" id="6208710"><a href="/go/printer/printer.go.html#6208660">cnode</a></span><span class="op" id="6208715">.</span><span class="ident" id="6208716">Node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208723"><a href="/go/printer/printer.go.html#6208627">comments</a></span>&nbsp;<span class="op" id="6208732">=</span>&nbsp;<span class="ident" id="6208734"><a href="/go/printer/printer.go.html#6208660">cnode</a></span><span class="op" id="6208739">.</span><span class="ident" id="6208740">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208750">}</span><br>
<span class="lineno">1020</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208754">if</span>&nbsp;<span class="ident" id="6208757"><a href="/go/printer/printer.go.html#6208627">comments</a></span>&nbsp;<span class="op" id="6208766">!=</span>&nbsp;<span class="ident" id="6208769">nil</span>&nbsp;<span class="op" id="6208773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208777">//&nbsp;commented&nbsp;node&nbsp;-&nbsp;restrict&nbsp;comment&nbsp;list&nbsp;to&nbsp;relevant&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208839">n</span><span class="op" id="6208840">,</span>&nbsp;<span class="ident" id="6208842">ok</span>&nbsp;<span class="op" id="6208845">:=</span>&nbsp;<span class="ident" id="6208848"><a href="/go/printer/printer.go.html#6208562">node</a></span><span class="op" id="6208852">.</span><span class="op" id="6208853">(</span><span class="ident" id="6208854"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6208857">.</span><span class="ident" id="6208858">Node</span><span class="op" id="6208862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208866">if</span>&nbsp;<span class="op" id="6208869">!</span><span class="ident" id="6208870"><a href="/go/printer/printer.go.html#6208842">ok</a></span>&nbsp;<span class="op" id="6208873">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6208878">goto</span>&nbsp;<span class="ident" id="6208883">unsupported</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6208897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208901">beg</span>&nbsp;<span class="op" id="6208905">:=</span>&nbsp;<span class="ident" id="6208908"><a href="/go/printer/printer.go.html#6208839">n</a></span><span class="op" id="6208909">.</span><span class="ident" id="6208910">Pos</span><span class="op" id="6208913">(</span><span class="op" id="6208914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6208918">end</span>&nbsp;<span class="op" id="6208922">:=</span>&nbsp;<span class="ident" id="6208925"><a href="/go/printer/printer.go.html#6208839">n</a></span><span class="op" id="6208926">.</span><span class="ident" id="6208927">End</span><span class="op" id="6208930">(</span><span class="op" id="6208931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208935">//&nbsp;if&nbsp;the&nbsp;node&nbsp;has&nbsp;associated&nbsp;documentation,</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6208982">//&nbsp;include&nbsp;that&nbsp;commentgroup&nbsp;in&nbsp;the&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209026">//&nbsp;(the&nbsp;comment&nbsp;list&nbsp;is&nbsp;sorted&nbsp;in&nbsp;the&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209072">//&nbsp;of&nbsp;the&nbsp;comment&nbsp;appearance&nbsp;in&nbsp;the&nbsp;source&nbsp;code)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209123">if</span>&nbsp;<span class="ident" id="6209126">doc</span>&nbsp;<span class="op" id="6209130">:=</span>&nbsp;<span class="ident" id="6209133"><a href="/go/printer/printer.go.html#6208206">getDoc</a></span><span class="op" id="6209139">(</span><span class="ident" id="6209140"><a href="/go/printer/printer.go.html#6208839">n</a></span><span class="op" id="6209141">)</span><span class="op" id="6209142">;</span>&nbsp;<span class="ident" id="6209144"><a href="/go/printer/printer.go.html#6209126">doc</a></span>&nbsp;<span class="op" id="6209148">!=</span>&nbsp;<span class="ident" id="6209151">nil</span>&nbsp;<span class="op" id="6209155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209160"><a href="/go/printer/printer.go.html#6208901">beg</a></span>&nbsp;<span class="op" id="6209164">=</span>&nbsp;<span class="ident" id="6209166"><a href="/go/printer/printer.go.html#6209126">doc</a></span><span class="op" id="6209169">.</span><span class="ident" id="6209170">Pos</span><span class="op" id="6209173">(</span><span class="op" id="6209174">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209182">//&nbsp;token.Pos&nbsp;values&nbsp;are&nbsp;global&nbsp;offsets,&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209231">//&nbsp;compare&nbsp;them&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209258">i</span>&nbsp;<span class="op" id="6209260">:=</span>&nbsp;<span class="num" id="6209263">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209267">for</span>&nbsp;<span class="ident" id="6209271"><a href="/go/printer/printer.go.html#6209258">i</a></span>&nbsp;<span class="op" id="6209273">&lt;</span>&nbsp;<span class="builtinfunc" id="6209275">len</span><span class="op" id="6209278">(</span><span class="ident" id="6209279"><a href="/go/printer/printer.go.html#6208627">comments</a></span><span class="op" id="6209287">)</span>&nbsp;<span class="op" id="6209289">&amp;&amp;</span>&nbsp;<span class="ident" id="6209292"><a href="/go/printer/printer.go.html#6208627">comments</a></span><span class="op" id="6209300">[</span><span class="ident" id="6209301"><a href="/go/printer/printer.go.html#6209258">i</a></span><span class="op" id="6209302">]</span><span class="op" id="6209303">.</span><span class="ident" id="6209304">End</span><span class="op" id="6209307">(</span><span class="op" id="6209308">)</span>&nbsp;<span class="op" id="6209310">&lt;</span>&nbsp;<span class="ident" id="6209312"><a href="/go/printer/printer.go.html#6208901">beg</a></span>&nbsp;<span class="op" id="6209316">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209321"><a href="/go/printer/printer.go.html#6209258">i</a></span><span class="op" id="6209322">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209331">j</span>&nbsp;<span class="op" id="6209333">:=</span>&nbsp;<span class="ident" id="6209336"><a href="/go/printer/printer.go.html#6209258">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209340">for</span>&nbsp;<span class="ident" id="6209344"><a href="/go/printer/printer.go.html#6209331">j</a></span>&nbsp;<span class="op" id="6209346">&lt;</span>&nbsp;<span class="builtinfunc" id="6209348">len</span><span class="op" id="6209351">(</span><span class="ident" id="6209352"><a href="/go/printer/printer.go.html#6208627">comments</a></span><span class="op" id="6209360">)</span>&nbsp;<span class="op" id="6209362">&amp;&amp;</span>&nbsp;<span class="ident" id="6209365"><a href="/go/printer/printer.go.html#6208627">comments</a></span><span class="op" id="6209373">[</span><span class="ident" id="6209374"><a href="/go/printer/printer.go.html#6209331">j</a></span><span class="op" id="6209375">]</span><span class="op" id="6209376">.</span><span class="ident" id="6209377">Pos</span><span class="op" id="6209380">(</span><span class="op" id="6209381">)</span>&nbsp;<span class="op" id="6209383">&lt;</span>&nbsp;<span class="ident" id="6209385"><a href="/go/printer/printer.go.html#6208918">end</a></span>&nbsp;<span class="op" id="6209389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209394"><a href="/go/printer/printer.go.html#6209331">j</a></span><span class="op" id="6209395">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209404">if</span>&nbsp;<span class="ident" id="6209407"><a href="/go/printer/printer.go.html#6209258">i</a></span>&nbsp;<span class="op" id="6209409">&lt;</span>&nbsp;<span class="ident" id="6209411"><a href="/go/printer/printer.go.html#6209331">j</a></span>&nbsp;<span class="op" id="6209413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209418"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209419">.</span><span class="ident" id="6209420">comments</span>&nbsp;<span class="op" id="6209429">=</span>&nbsp;<span class="ident" id="6209431"><a href="/go/printer/printer.go.html#6208627">comments</a></span><span class="op" id="6209439">[</span><span class="ident" id="6209440"><a href="/go/printer/printer.go.html#6209258">i</a></span><span class="op" id="6209441">:</span><span class="ident" id="6209442"><a href="/go/printer/printer.go.html#6209331">j</a></span><span class="op" id="6209443">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209450">}</span>&nbsp;<span class="keyword" id="6209452">else</span>&nbsp;<span class="keyword" id="6209457">if</span>&nbsp;<span class="ident" id="6209460">n</span><span class="op" id="6209461">,</span>&nbsp;<span class="ident" id="6209463">ok</span>&nbsp;<span class="op" id="6209466">:=</span>&nbsp;<span class="ident" id="6209469"><a href="/go/printer/printer.go.html#6208562">node</a></span><span class="op" id="6209473">.</span><span class="op" id="6209474">(</span><span class="op" id="6209475">*</span><span class="ident" id="6209476"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6209479">.</span><span class="ident" id="6209480">File</span><span class="op" id="6209484">)</span><span class="op" id="6209485">;</span>&nbsp;<span class="ident" id="6209487"><a href="/go/printer/printer.go.html#6209463">ok</a></span>&nbsp;<span class="op" id="6209490">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209494">//&nbsp;use&nbsp;ast.File&nbsp;comments,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209529"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209530">.</span><span class="ident" id="6209531">comments</span>&nbsp;<span class="op" id="6209540">=</span>&nbsp;<span class="ident" id="6209542"><a href="/go/printer/printer.go.html#6209460">n</a></span><span class="op" id="6209543">.</span><span class="ident" id="6209544">Comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209558">//&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;comments,&nbsp;use&nbsp;node&nbsp;comments</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209606"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209607">.</span><span class="ident" id="6209608">useNodeComments</span>&nbsp;<span class="op" id="6209624">=</span>&nbsp;<span class="ident" id="6209626"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209627">.</span><span class="ident" id="6209628">comments</span>&nbsp;<span class="op" id="6209637">==</span>&nbsp;<span class="ident" id="6209640">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209646">//&nbsp;get&nbsp;comments&nbsp;ready&nbsp;for&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209677"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209678">.</span><span class="ident" id="6209679">nextComment</span><span class="op" id="6209690">(</span><span class="op" id="6209691">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209695">//&nbsp;format&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209711">switch</span>&nbsp;<span class="ident" id="6209718">n</span>&nbsp;<span class="op" id="6209720">:=</span>&nbsp;<span class="ident" id="6209723"><a href="/go/printer/printer.go.html#6208562">node</a></span><span class="op" id="6209727">.</span><span class="op" id="6209728">(</span><span class="keyword" id="6209729">type</span><span class="op" id="6209733">)</span>&nbsp;<span class="op" id="6209735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209738">case</span>&nbsp;<span class="ident" id="6209743"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6209746">.</span><span class="ident" id="6209747">Expr</span><span class="op" id="6209751">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209755"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209756">.</span><span class="ident" id="6209757">expr</span><span class="op" id="6209761">(</span><span class="ident" id="6209762"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6209763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209766">case</span>&nbsp;<span class="ident" id="6209771"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6209774">.</span><span class="ident" id="6209775">Stmt</span><span class="op" id="6209779">:</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209783">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6209846">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209905">if</span>&nbsp;<span class="ident" id="6209908">_</span><span class="op" id="6209909">,</span>&nbsp;<span class="ident" id="6209911">ok</span>&nbsp;<span class="op" id="6209914">:=</span>&nbsp;<span class="ident" id="6209917"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6209918">.</span><span class="op" id="6209919">(</span><span class="op" id="6209920">*</span><span class="ident" id="6209921"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6209924">.</span><span class="ident" id="6209925">LabeledStmt</span><span class="op" id="6209936">)</span><span class="op" id="6209937">;</span>&nbsp;<span class="ident" id="6209939"><a href="/go/printer/printer.go.html#6209911">ok</a></span>&nbsp;<span class="op" id="6209942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209947"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209948">.</span><span class="ident" id="6209949">indent</span>&nbsp;<span class="op" id="6209956">=</span>&nbsp;<span class="num" id="6209958">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6209962">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6209966"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6209967">.</span><span class="ident" id="6209968">stmt</span><span class="op" id="6209972">(</span><span class="ident" id="6209973"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6209974">,</span>&nbsp;<span class="ident" id="6209976">false</span><span class="op" id="6209981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6209984">case</span>&nbsp;<span class="ident" id="6209989"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6209992">.</span><span class="ident" id="6209993">Decl</span><span class="op" id="6209997">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210001"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210002">.</span><span class="ident" id="6210003">decl</span><span class="op" id="6210007">(</span><span class="ident" id="6210008"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6210009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210012">case</span>&nbsp;<span class="ident" id="6210017"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6210020">.</span><span class="ident" id="6210021">Spec</span><span class="op" id="6210025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210029"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210030">.</span><span class="ident" id="6210031">spec</span><span class="op" id="6210035">(</span><span class="ident" id="6210036"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6210037">,</span>&nbsp;<span class="num" id="6210039">1</span><span class="op" id="6210040">,</span>&nbsp;<span class="ident" id="6210042">false</span><span class="op" id="6210047">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210050">case</span>&nbsp;<span class="op" id="6210055">[</span><span class="op" id="6210056">]</span><span class="ident" id="6210057"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6210060">.</span><span class="ident" id="6210061">Stmt</span><span class="op" id="6210065">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6210069">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6210132">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210191">for</span>&nbsp;<span class="ident" id="6210195">_</span><span class="op" id="6210196">,</span>&nbsp;<span class="ident" id="6210198">s</span>&nbsp;<span class="op" id="6210200">:=</span>&nbsp;<span class="keyword" id="6210203">range</span>&nbsp;<span class="ident" id="6210209"><a href="/go/printer/printer.go.html#6209718">n</a></span>&nbsp;<span class="op" id="6210211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210216">if</span>&nbsp;<span class="ident" id="6210219">_</span><span class="op" id="6210220">,</span>&nbsp;<span class="ident" id="6210222">ok</span>&nbsp;<span class="op" id="6210225">:=</span>&nbsp;<span class="ident" id="6210228"><a href="/go/printer/printer.go.html#6210198">s</a></span><span class="op" id="6210229">.</span><span class="op" id="6210230">(</span><span class="op" id="6210231">*</span><span class="ident" id="6210232"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6210235">.</span><span class="ident" id="6210236">LabeledStmt</span><span class="op" id="6210247">)</span><span class="op" id="6210248">;</span>&nbsp;<span class="ident" id="6210250"><a href="/go/printer/printer.go.html#6210222">ok</a></span>&nbsp;<span class="op" id="6210253">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210259"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210260">.</span><span class="ident" id="6210261">indent</span>&nbsp;<span class="op" id="6210268">=</span>&nbsp;<span class="num" id="6210270">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6210275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6210279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210283"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210284">.</span><span class="ident" id="6210285">stmtList</span><span class="op" id="6210293">(</span><span class="ident" id="6210294"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6210295">,</span>&nbsp;<span class="num" id="6210297">0</span><span class="op" id="6210298">,</span>&nbsp;<span class="ident" id="6210300">false</span><span class="op" id="6210305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210308">case</span>&nbsp;<span class="op" id="6210313">[</span><span class="op" id="6210314">]</span><span class="ident" id="6210315"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6210318">.</span><span class="ident" id="6210319">Decl</span><span class="op" id="6210323">:</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210327"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210328">.</span><span class="ident" id="6210329">declList</span><span class="op" id="6210337">(</span><span class="ident" id="6210338"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6210339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210342">case</span>&nbsp;<span class="op" id="6210347">*</span><span class="ident" id="6210348"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6210351">.</span><span class="ident" id="6210352">File</span><span class="op" id="6210356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210360"><a href="/go/printer/printer.go.html#6208540">p</a></span><span class="op" id="6210361">.</span><span class="ident" id="6210362">file</span><span class="op" id="6210366">(</span><span class="ident" id="6210367"><a href="/go/printer/printer.go.html#6209718">n</a></span><span class="op" id="6210368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210371">default</span><span class="op" id="6210378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210382">goto</span>&nbsp;<span class="ident" id="6210387">unsupported</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6210400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210404">return</span>&nbsp;<span class="ident" id="6210411">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="6210416">unsupported</span><span class="op" id="6210427">:</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6210430">return</span>&nbsp;<span class="ident" id="6210437"><a href="/go/printer/printer.go.html#6178766">fmt</a></span><span class="op" id="6210440">.</span><span class="ident" id="6210441">Errorf</span><span class="op" id="6210447">(</span><span class="string" id="6210448">&#34;go/printer:&nbsp;unsupported&nbsp;node&nbsp;type&nbsp;%T&#34;</span><span class="op" id="6210486">,</span>&nbsp;<span class="ident" id="6210488"><a href="/go/printer/printer.go.html#6208562">node</a></span><span class="op" id="6210492">)</span><br>
<span class="lineno"></span><span class="op" id="6210494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210497">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6210577">//&nbsp;Trimmer</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="6210589">//&nbsp;A&nbsp;trimmer&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;filter&nbsp;for&nbsp;stripping&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span><span class="comment" id="6210656">//&nbsp;characters,&nbsp;trailing&nbsp;blanks&nbsp;and&nbsp;tabs,&nbsp;and&nbsp;for&nbsp;converting&nbsp;formfeed</span><br>
<span class="lineno"></span><span class="comment" id="6210725">//&nbsp;and&nbsp;vtab&nbsp;characters&nbsp;into&nbsp;newlines&nbsp;and&nbsp;htabs&nbsp;(in&nbsp;case&nbsp;no&nbsp;tabwriter</span><br>
<span class="lineno"></span><span class="comment" id="6210794">//&nbsp;is&nbsp;used).&nbsp;Text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escape&nbsp;characters&nbsp;is&nbsp;passed</span><br>
<span class="lineno">1105</span><span class="comment" id="6210863">//&nbsp;through&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="6210885">//</span><br>
<span class="lineno"></span><span class="keyword" id="6210888">type</span>&nbsp;<span class="ident" id="6210893">trimmer</span>&nbsp;<span class="keyword" id="6210901">struct</span>&nbsp;<span class="op" id="6210908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210911">output</span>&nbsp;<span class="ident" id="6210918"><a href="/go/printer/printer.go.html#6178795">io</a></span><span class="op" id="6210920">.</span><span class="ident" id="6210921">Writer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210929">state</span>&nbsp;&nbsp;<span class="builtintype" id="6210936">int</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6210941">space</span>&nbsp;&nbsp;<span class="op" id="6210948">[</span><span class="op" id="6210949">]</span><span class="builtintype" id="6210950">byte</span><br>
<span class="lineno"></span><span class="op" id="6210955">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6210958">//&nbsp;trimmer&nbsp;is&nbsp;implemented&nbsp;as&nbsp;a&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="6211004">//&nbsp;It&nbsp;can&nbsp;be&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;states:</span><br>
<span class="lineno">1115</span><span class="keyword" id="6211049">const</span>&nbsp;<span class="op" id="6211055">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211058">inSpace</span>&nbsp;&nbsp;<span class="op" id="6211067">=</span>&nbsp;<span class="ident" id="6211069">iota</span>&nbsp;<span class="comment" id="6211074">//&nbsp;inside&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211091">inEscape</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211107">//&nbsp;inside&nbsp;text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escapes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211154">inText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6211170">//&nbsp;inside&nbsp;text</span><br>
<span class="lineno"></span><span class="op" id="6211185">)</span><br>
<span class="lineno">1120</span><br>
<span class="lineno"></span><span class="keyword" id="6211188">func</span>&nbsp;<span class="op" id="6211193">(</span><span class="ident" id="6211194">p</span>&nbsp;<span class="op" id="6211196">*</span><span class="ident" id="6211197"><a href="/go/printer/printer.go.html#6210893">trimmer</a></span><span class="op" id="6211204">)</span>&nbsp;<span class="ident" id="6211206">resetSpace</span><span class="op" id="6211216">(</span><span class="op" id="6211217">)</span>&nbsp;<span class="op" id="6211219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211222"><a href="/go/printer/printer.go.html#6211194">p</a></span><span class="op" id="6211223">.</span><span class="ident" id="6211224">state</span>&nbsp;<span class="op" id="6211230">=</span>&nbsp;<span class="ident" id="6211232"><a href="/go/printer/printer.go.html#6211058">inSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211241"><a href="/go/printer/printer.go.html#6211194">p</a></span><span class="op" id="6211242">.</span><span class="ident" id="6211243">space</span>&nbsp;<span class="op" id="6211249">=</span>&nbsp;<span class="ident" id="6211251"><a href="/go/printer/printer.go.html#6211194">p</a></span><span class="op" id="6211252">.</span><span class="ident" id="6211253">space</span><span class="op" id="6211258">[</span><span class="num" id="6211259">0</span><span class="op" id="6211260">:</span><span class="num" id="6211261">0</span><span class="op" id="6211262">]</span><br>
<span class="lineno"></span><span class="op" id="6211264">}</span><br>
<span class="lineno">1125</span><br>
<span class="lineno"></span><span class="comment" id="6211267">//&nbsp;Design&nbsp;note:&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;eliminate&nbsp;extra&nbsp;blanks&nbsp;occurring&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6211337">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whitespace&nbsp;in&nbsp;this&nbsp;function&nbsp;as&nbsp;it&nbsp;could&nbsp;simplify&nbsp;some</span><br>
<span class="lineno"></span><span class="comment" id="6211407">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;blanks&nbsp;logic&nbsp;in&nbsp;the&nbsp;node&nbsp;printing&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="6211475">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;this&nbsp;would&nbsp;mess&nbsp;up&nbsp;any&nbsp;formatting&nbsp;done&nbsp;by</span><br>
<span class="lineno">1130</span><span class="comment" id="6211542">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6211574">var</span>&nbsp;<span class="ident" id="6211578">aNewline</span>&nbsp;<span class="op" id="6211587">=</span>&nbsp;<span class="op" id="6211589">[</span><span class="op" id="6211590">]</span><span class="builtintype" id="6211591">byte</span><span class="op" id="6211595">(</span><span class="string" id="6211596">&#34;\n&#34;</span><span class="op" id="6211600">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6211603">func</span>&nbsp;<span class="op" id="6211608">(</span><span class="ident" id="6211609">p</span>&nbsp;<span class="op" id="6211611">*</span><span class="ident" id="6211612"><a href="/go/printer/printer.go.html#6210893">trimmer</a></span><span class="op" id="6211619">)</span>&nbsp;<span class="ident" id="6211621">Write</span><span class="op" id="6211626">(</span><span class="ident" id="6211627">data</span>&nbsp;<span class="op" id="6211632">[</span><span class="op" id="6211633">]</span><span class="builtintype" id="6211634">byte</span><span class="op" id="6211638">)</span>&nbsp;<span class="op" id="6211640">(</span><span class="ident" id="6211641">n</span>&nbsp;<span class="builtintype" id="6211643">int</span><span class="op" id="6211646">,</span>&nbsp;<span class="ident" id="6211648">err</span>&nbsp;<span class="builtintype" id="6211652">error</span><span class="op" id="6211657">)</span>&nbsp;<span class="op" id="6211659">{</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6211662">//&nbsp;invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6211678">//&nbsp;p.state&nbsp;==&nbsp;inSpace:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6211702">//&nbsp;&nbsp;&nbsp;&nbspp.space&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6211727">//&nbsp;p.state&nbsp;==&nbsp;inEscape,&nbsp;inText:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6211760">//&nbsp;&nbsp;&nbsp;&nbspdata[m:n]&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211787">m</span>&nbsp;<span class="op" id="6211789">:=</span>&nbsp;<span class="num" id="6211792">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211795">var</span>&nbsp;<span class="ident" id="6211799">b</span>&nbsp;<span class="builtintype" id="6211801">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211807">for</span>&nbsp;<span class="ident" id="6211811"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6211812">,</span>&nbsp;<span class="ident" id="6211814"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6211816">=</span>&nbsp;<span class="keyword" id="6211818">range</span>&nbsp;<span class="ident" id="6211824"><a href="/go/printer/printer.go.html#6211627">data</a></span>&nbsp;<span class="op" id="6211829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211833">if</span>&nbsp;<span class="ident" id="6211836"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6211838">==</span>&nbsp;<span class="string" id="6211841">&#39;\v&#39;</span>&nbsp;<span class="op" id="6211846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211851"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6211853">=</span>&nbsp;<span class="string" id="6211855">&#39;\t&#39;</span>&nbsp;<span class="comment" id="6211860">//&nbsp;convert&nbsp;to&nbsp;htab</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6211881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211885">switch</span>&nbsp;<span class="ident" id="6211892"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6211893">.</span><span class="ident" id="6211894">state</span>&nbsp;<span class="op" id="6211900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211904">case</span>&nbsp;<span class="ident" id="6211909"><a href="/go/printer/printer.go.html#6211058">inSpace</a></span><span class="op" id="6211916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211921">switch</span>&nbsp;<span class="ident" id="6211928"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6211930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211935">case</span>&nbsp;<span class="string" id="6211940">&#39;\t&#39;</span><span class="op" id="6211944">,</span>&nbsp;<span class="string" id="6211946">&#39;&nbsp;&#39;</span><span class="op" id="6211949">:</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6211955"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6211956">.</span><span class="ident" id="6211957">space</span>&nbsp;<span class="op" id="6211963">=</span>&nbsp;<span class="builtinfunc" id="6211965">append</span><span class="op" id="6211971">(</span><span class="ident" id="6211972"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6211973">.</span><span class="ident" id="6211974">space</span><span class="op" id="6211979">,</span>&nbsp;<span class="ident" id="6211981"><a href="/go/printer/printer.go.html#6211799">b</a></span><span class="op" id="6211982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6211987">case</span>&nbsp;<span class="string" id="6211992">&#39;\n&#39;</span><span class="op" id="6211996">,</span>&nbsp;<span class="string" id="6211998">&#39;\f&#39;</span><span class="op" id="6212002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212008"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212009">.</span><span class="ident" id="6212010">resetSpace</span><span class="op" id="6212020">(</span><span class="op" id="6212021">)</span>&nbsp;<span class="comment" id="6212023">//&nbsp;discard&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212053">_</span><span class="op" id="6212054">,</span>&nbsp;<span class="ident" id="6212056"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212060">=</span>&nbsp;<span class="ident" id="6212062"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212063">.</span><span class="ident" id="6212064">output</span><span class="op" id="6212070">.</span><span class="ident" id="6212071">Write</span><span class="op" id="6212076">(</span><span class="ident" id="6212077"><a href="/go/printer/printer.go.html#6211578">aNewline</a></span><span class="op" id="6212085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212090">case</span>&nbsp;<span class="ident" id="6212095"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6212104">.</span><span class="ident" id="6212105">Escape</span><span class="op" id="6212111">:</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212117">_</span><span class="op" id="6212118">,</span>&nbsp;<span class="ident" id="6212120"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212124">=</span>&nbsp;<span class="ident" id="6212126"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212127">.</span><span class="ident" id="6212128">output</span><span class="op" id="6212134">.</span><span class="ident" id="6212135">Write</span><span class="op" id="6212140">(</span><span class="ident" id="6212141"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212142">.</span><span class="ident" id="6212143">space</span><span class="op" id="6212148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212154"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212155">.</span><span class="ident" id="6212156">state</span>&nbsp;<span class="op" id="6212162">=</span>&nbsp;<span class="ident" id="6212164"><a href="/go/printer/printer.go.html#6211091">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212177"><a href="/go/printer/printer.go.html#6211787">m</a></span>&nbsp;<span class="op" id="6212179">=</span>&nbsp;<span class="ident" id="6212181"><a href="/go/printer/printer.go.html#6211641">n</a></span>&nbsp;<span class="op" id="6212183">+</span>&nbsp;<span class="num" id="6212185">1</span>&nbsp;<span class="comment" id="6212187">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212219">default</span><span class="op" id="6212226">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212232">_</span><span class="op" id="6212233">,</span>&nbsp;<span class="ident" id="6212235"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212239">=</span>&nbsp;<span class="ident" id="6212241"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212242">.</span><span class="ident" id="6212243">output</span><span class="op" id="6212249">.</span><span class="ident" id="6212250">Write</span><span class="op" id="6212255">(</span><span class="ident" id="6212256"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212257">.</span><span class="ident" id="6212258">space</span><span class="op" id="6212263">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212269"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212270">.</span><span class="ident" id="6212271">state</span>&nbsp;<span class="op" id="6212277">=</span>&nbsp;<span class="ident" id="6212279"><a href="/go/printer/printer.go.html#6211154">inText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212290"><a href="/go/printer/printer.go.html#6211787">m</a></span>&nbsp;<span class="op" id="6212292">=</span>&nbsp;<span class="ident" id="6212294"><a href="/go/printer/printer.go.html#6211641">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212303">case</span>&nbsp;<span class="ident" id="6212308"><a href="/go/printer/printer.go.html#6211091">inEscape</a></span><span class="op" id="6212316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212321">if</span>&nbsp;<span class="ident" id="6212324"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6212326">==</span>&nbsp;<span class="ident" id="6212329"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6212338">.</span><span class="ident" id="6212339">Escape</span>&nbsp;<span class="op" id="6212346">{</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212352">_</span><span class="op" id="6212353">,</span>&nbsp;<span class="ident" id="6212355"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212359">=</span>&nbsp;<span class="ident" id="6212361"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212362">.</span><span class="ident" id="6212363">output</span><span class="op" id="6212369">.</span><span class="ident" id="6212370">Write</span><span class="op" id="6212375">(</span><span class="ident" id="6212376"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212380">[</span><span class="ident" id="6212381"><a href="/go/printer/printer.go.html#6211787">m</a></span><span class="op" id="6212382">:</span><span class="ident" id="6212383"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6212384">]</span><span class="op" id="6212385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212391"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212392">.</span><span class="ident" id="6212393">resetSpace</span><span class="op" id="6212403">(</span><span class="op" id="6212404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212413">case</span>&nbsp;<span class="ident" id="6212418"><a href="/go/printer/printer.go.html#6211154">inText</a></span><span class="op" id="6212424">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212429">switch</span>&nbsp;<span class="ident" id="6212436"><a href="/go/printer/printer.go.html#6211799">b</a></span>&nbsp;<span class="op" id="6212438">{</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212443">case</span>&nbsp;<span class="string" id="6212448">&#39;\t&#39;</span><span class="op" id="6212452">,</span>&nbsp;<span class="string" id="6212454">&#39;&nbsp;&#39;</span><span class="op" id="6212457">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212463">_</span><span class="op" id="6212464">,</span>&nbsp;<span class="ident" id="6212466"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212470">=</span>&nbsp;<span class="ident" id="6212472"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212473">.</span><span class="ident" id="6212474">output</span><span class="op" id="6212480">.</span><span class="ident" id="6212481">Write</span><span class="op" id="6212486">(</span><span class="ident" id="6212487"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212491">[</span><span class="ident" id="6212492"><a href="/go/printer/printer.go.html#6211787">m</a></span><span class="op" id="6212493">:</span><span class="ident" id="6212494"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6212495">]</span><span class="op" id="6212496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212502"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212503">.</span><span class="ident" id="6212504">resetSpace</span><span class="op" id="6212514">(</span><span class="op" id="6212515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212521"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212522">.</span><span class="ident" id="6212523">space</span>&nbsp;<span class="op" id="6212529">=</span>&nbsp;<span class="builtinfunc" id="6212531">append</span><span class="op" id="6212537">(</span><span class="ident" id="6212538"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212539">.</span><span class="ident" id="6212540">space</span><span class="op" id="6212545">,</span>&nbsp;<span class="ident" id="6212547"><a href="/go/printer/printer.go.html#6211799">b</a></span><span class="op" id="6212548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212553">case</span>&nbsp;<span class="string" id="6212558">&#39;\n&#39;</span><span class="op" id="6212562">,</span>&nbsp;<span class="string" id="6212564">&#39;\f&#39;</span><span class="op" id="6212568">:</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212574">_</span><span class="op" id="6212575">,</span>&nbsp;<span class="ident" id="6212577"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212581">=</span>&nbsp;<span class="ident" id="6212583"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212584">.</span><span class="ident" id="6212585">output</span><span class="op" id="6212591">.</span><span class="ident" id="6212592">Write</span><span class="op" id="6212597">(</span><span class="ident" id="6212598"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212602">[</span><span class="ident" id="6212603"><a href="/go/printer/printer.go.html#6211787">m</a></span><span class="op" id="6212604">:</span><span class="ident" id="6212605"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6212606">]</span><span class="op" id="6212607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212613"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212614">.</span><span class="ident" id="6212615">resetSpace</span><span class="op" id="6212625">(</span><span class="op" id="6212626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212632">_</span><span class="op" id="6212633">,</span>&nbsp;<span class="ident" id="6212635"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212639">=</span>&nbsp;<span class="ident" id="6212641"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212642">.</span><span class="ident" id="6212643">output</span><span class="op" id="6212649">.</span><span class="ident" id="6212650">Write</span><span class="op" id="6212655">(</span><span class="ident" id="6212656"><a href="/go/printer/printer.go.html#6211578">aNewline</a></span><span class="op" id="6212664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212669">case</span>&nbsp;<span class="ident" id="6212674"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6212683">.</span><span class="ident" id="6212684">Escape</span><span class="op" id="6212690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212696">_</span><span class="op" id="6212697">,</span>&nbsp;<span class="ident" id="6212699"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212703">=</span>&nbsp;<span class="ident" id="6212705"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212706">.</span><span class="ident" id="6212707">output</span><span class="op" id="6212713">.</span><span class="ident" id="6212714">Write</span><span class="op" id="6212719">(</span><span class="ident" id="6212720"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212724">[</span><span class="ident" id="6212725"><a href="/go/printer/printer.go.html#6211787">m</a></span><span class="op" id="6212726">:</span><span class="ident" id="6212727"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6212728">]</span><span class="op" id="6212729">)</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212735"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212736">.</span><span class="ident" id="6212737">state</span>&nbsp;<span class="op" id="6212743">=</span>&nbsp;<span class="ident" id="6212745"><a href="/go/printer/printer.go.html#6211091">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212758"><a href="/go/printer/printer.go.html#6211787">m</a></span>&nbsp;<span class="op" id="6212760">=</span>&nbsp;<span class="ident" id="6212762"><a href="/go/printer/printer.go.html#6211641">n</a></span>&nbsp;<span class="op" id="6212764">+</span>&nbsp;<span class="num" id="6212766">1</span>&nbsp;<span class="comment" id="6212768">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212804">default</span><span class="op" id="6212811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6212816">panic</span><span class="op" id="6212821">(</span><span class="string" id="6212822">&#34;unreachable&#34;</span><span class="op" id="6212835">)</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212843">if</span>&nbsp;<span class="ident" id="6212846"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212850">!=</span>&nbsp;<span class="ident" id="6212853">nil</span>&nbsp;<span class="op" id="6212857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212862">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212874">}</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212877"><a href="/go/printer/printer.go.html#6211641">n</a></span>&nbsp;<span class="op" id="6212879">=</span>&nbsp;<span class="builtinfunc" id="6212881">len</span><span class="op" id="6212884">(</span><span class="ident" id="6212885"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212889">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212893">switch</span>&nbsp;<span class="ident" id="6212900"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212901">.</span><span class="ident" id="6212902">state</span>&nbsp;<span class="op" id="6212908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212911">case</span>&nbsp;<span class="ident" id="6212916"><a href="/go/printer/printer.go.html#6211091">inEscape</a></span><span class="op" id="6212924">,</span>&nbsp;<span class="ident" id="6212926"><a href="/go/printer/printer.go.html#6211154">inText</a></span><span class="op" id="6212932">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212936">_</span><span class="op" id="6212937">,</span>&nbsp;<span class="ident" id="6212939"><a href="/go/printer/printer.go.html#6211648">err</a></span>&nbsp;<span class="op" id="6212943">=</span>&nbsp;<span class="ident" id="6212945"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212946">.</span><span class="ident" id="6212947">output</span><span class="op" id="6212953">.</span><span class="ident" id="6212954">Write</span><span class="op" id="6212959">(</span><span class="ident" id="6212960"><a href="/go/printer/printer.go.html#6211627">data</a></span><span class="op" id="6212964">[</span><span class="ident" id="6212965"><a href="/go/printer/printer.go.html#6211787">m</a></span><span class="op" id="6212966">:</span><span class="ident" id="6212967"><a href="/go/printer/printer.go.html#6211641">n</a></span><span class="op" id="6212968">]</span><span class="op" id="6212969">)</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6212973"><a href="/go/printer/printer.go.html#6211609">p</a></span><span class="op" id="6212974">.</span><span class="ident" id="6212975">resetSpace</span><span class="op" id="6212985">(</span><span class="op" id="6212986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6212989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6212993">return</span><br>
<span class="lineno"></span><span class="op" id="6213000">}</span><br>
<span class="lineno">1200</span><br>
<span class="lineno"></span><span class="comment" id="6213003">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="6213083">//&nbsp;Public&nbsp;interface</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6213104">//&nbsp;A&nbsp;Mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).&nbsp;They&nbsp;control&nbsp;printing.</span><br>
<span class="lineno">1205</span><span class="keyword" id="6213169">type</span>&nbsp;<span class="ident" id="6213174">Mode</span>&nbsp;<span class="builtintype" id="6213179">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6213185">const</span>&nbsp;<span class="op" id="6213191">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213194">RawFormat</span>&nbsp;<span class="ident" id="6213204"><a href="/go/printer/printer.go.html#6213174">Mode</a></span>&nbsp;<span class="op" id="6213209">=</span>&nbsp;<span class="num" id="6213211">1</span>&nbsp;<span class="op" id="6213213">&lt;&lt;</span>&nbsp;<span class="ident" id="6213216">iota</span>&nbsp;<span class="comment" id="6213221">//&nbsp;do&nbsp;not&nbsp;use&nbsp;a&nbsp;tabwriter;&nbsp;if&nbsp;set,&nbsp;UseSpaces&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213278">TabIndent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213305">//&nbsp;use&nbsp;tabs&nbsp;for&nbsp;indentation&nbsp;independent&nbsp;of&nbsp;UseSpaces</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213359">UseSpaces</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213386">//&nbsp;use&nbsp;spaces&nbsp;instead&nbsp;of&nbsp;tabs&nbsp;for&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213431">SourcePos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6213458">//&nbsp;emit&nbsp;//line&nbsp;comments&nbsp;to&nbsp;preserve&nbsp;original&nbsp;source&nbsp;positions</span><br>
<span class="lineno"></span><span class="op" id="6213520">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6213523">//&nbsp;A&nbsp;Config&nbsp;node&nbsp;controls&nbsp;the&nbsp;output&nbsp;of&nbsp;Fprint.</span><br>
<span class="lineno">1215</span><span class="keyword" id="6213571">type</span>&nbsp;<span class="ident" id="6213576">Config</span>&nbsp;<span class="keyword" id="6213583">struct</span>&nbsp;<span class="op" id="6213590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213593">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6213602"><a href="/go/printer/printer.go.html#6213174">Mode</a></span>&nbsp;<span class="comment" id="6213607">//&nbsp;default:&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213622">Tabwidth</span>&nbsp;<span class="builtintype" id="6213631">int</span>&nbsp;&nbsp;<span class="comment" id="6213636">//&nbsp;default:&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213651">Indent</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6213660">int</span>&nbsp;&nbsp;<span class="comment" id="6213665">//&nbsp;default:&nbsp;0&nbsp;(all&nbsp;code&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;by&nbsp;this&nbsp;much)</span><br>
<span class="lineno"></span><span class="op" id="6213724">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="6213727">//&nbsp;fprint&nbsp;implements&nbsp;Fprint&nbsp;and&nbsp;takes&nbsp;a&nbsp;nodesSizes&nbsp;map&nbsp;for&nbsp;setting&nbsp;up&nbsp;the&nbsp;printer&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="6213816">func</span>&nbsp;<span class="op" id="6213821">(</span><span class="ident" id="6213822">cfg</span>&nbsp;<span class="op" id="6213826">*</span><span class="ident" id="6213827"><a href="/go/printer/printer.go.html#6213576">Config</a></span><span class="op" id="6213833">)</span>&nbsp;<span class="ident" id="6213835">fprint</span><span class="op" id="6213841">(</span><span class="ident" id="6213842">output</span>&nbsp;<span class="ident" id="6213849"><a href="/go/printer/printer.go.html#6178795">io</a></span><span class="op" id="6213851">.</span><span class="ident" id="6213852">Writer</span><span class="op" id="6213858">,</span>&nbsp;<span class="ident" id="6213860">fset</span>&nbsp;<span class="op" id="6213865">*</span><span class="ident" id="6213866"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6213871">.</span><span class="ident" id="6213872">FileSet</span><span class="op" id="6213879">,</span>&nbsp;<span class="ident" id="6213881">node</span>&nbsp;<span class="keyword" id="6213886">interface</span><span class="op" id="6213895">{</span><span class="op" id="6213896">}</span><span class="op" id="6213897">,</span>&nbsp;<span class="ident" id="6213899">nodeSizes</span>&nbsp;<span class="keyword" id="6213909">map</span><span class="op" id="6213912">[</span><span class="ident" id="6213913"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6213916">.</span><span class="ident" id="6213917">Node</span><span class="op" id="6213921">]</span><span class="builtintype" id="6213922">int</span><span class="op" id="6213925">)</span>&nbsp;<span class="op" id="6213927">(</span><span class="ident" id="6213928">err</span>&nbsp;<span class="builtintype" id="6213932">error</span><span class="op" id="6213937">)</span>&nbsp;<span class="op" id="6213939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6213942">//&nbsp;print&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6213957">var</span>&nbsp;<span class="ident" id="6213961">p</span>&nbsp;<span class="ident" id="6213963"><a href="/go/printer/printer.go.html#6179849">printer</a></span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6213972"><a href="/go/printer/printer.go.html#6213961">p</a></span><span class="op" id="6213973">.</span><span class="ident" id="6213974">init</span><span class="op" id="6213978">(</span><span class="ident" id="6213979"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6213982">,</span>&nbsp;<span class="ident" id="6213984"><a href="/go/printer/printer.go.html#6213860">fset</a></span><span class="op" id="6213988">,</span>&nbsp;<span class="ident" id="6213990"><a href="/go/printer/printer.go.html#6213899">nodeSizes</a></span><span class="op" id="6213999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214002">if</span>&nbsp;<span class="ident" id="6214005"><a href="/go/printer/printer.go.html#6213928">err</a></span>&nbsp;<span class="op" id="6214009">=</span>&nbsp;<span class="ident" id="6214011"><a href="/go/printer/printer.go.html#6213961">p</a></span><span class="op" id="6214012">.</span><span class="ident" id="6214013">printNode</span><span class="op" id="6214022">(</span><span class="ident" id="6214023"><a href="/go/printer/printer.go.html#6213881">node</a></span><span class="op" id="6214027">)</span><span class="op" id="6214028">;</span>&nbsp;<span class="ident" id="6214030"><a href="/go/printer/printer.go.html#6213928">err</a></span>&nbsp;<span class="op" id="6214034">!=</span>&nbsp;<span class="ident" id="6214037">nil</span>&nbsp;<span class="op" id="6214041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214045">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6214053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214056">//&nbsp;print&nbsp;outstanding&nbsp;comments</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214087"><a href="/go/printer/printer.go.html#6213961">p</a></span><span class="op" id="6214088">.</span><span class="ident" id="6214089">impliedSemi</span>&nbsp;<span class="op" id="6214101">=</span>&nbsp;<span class="ident" id="6214103">false</span>&nbsp;<span class="comment" id="6214109">//&nbsp;EOF&nbsp;acts&nbsp;like&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214137"><a href="/go/printer/printer.go.html#6213961">p</a></span><span class="op" id="6214138">.</span><span class="ident" id="6214139">flush</span><span class="op" id="6214144">(</span><span class="ident" id="6214145"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6214150">.</span><span class="ident" id="6214151">Position</span><span class="op" id="6214159">{</span><span class="ident" id="6214160">Offset</span><span class="op" id="6214166">:</span>&nbsp;<span class="ident" id="6214168"><a href="/go/printer/printer.go.html#6178982">infinity</a></span><span class="op" id="6214176">,</span>&nbsp;<span class="ident" id="6214178">Line</span><span class="op" id="6214182">:</span>&nbsp;<span class="ident" id="6214184"><a href="/go/printer/printer.go.html#6178982">infinity</a></span><span class="op" id="6214192">}</span><span class="op" id="6214193">,</span>&nbsp;<span class="ident" id="6214195"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6214200">.</span><span class="ident" id="6214201">EOF</span><span class="op" id="6214204">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214208">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;trimmer&nbsp;to&nbsp;eliminate&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214279">//&nbsp;(Input&nbsp;to&nbsp;a&nbsp;tabwriter&nbsp;must&nbsp;be&nbsp;untrimmed&nbsp;since&nbsp;trailing&nbsp;tabs&nbsp;provide</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214351">//&nbsp;formatting&nbsp;information.&nbsp;The&nbsp;tabwriter&nbsp;could&nbsp;provide&nbsp;trimming</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214416">//&nbsp;functionality&nbsp;but&nbsp;no&nbsp;tabwriter&nbsp;is&nbsp;used&nbsp;when&nbsp;RawFormat&nbsp;is&nbsp;set.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214483"><a href="/go/printer/printer.go.html#6213842">output</a></span>&nbsp;<span class="op" id="6214490">=</span>&nbsp;<span class="op" id="6214492">&amp;</span><span class="ident" id="6214493"><a href="/go/printer/printer.go.html#6210893">trimmer</a></span><span class="op" id="6214500">{</span><span class="ident" id="6214501">output</span><span class="op" id="6214507">:</span>&nbsp;<span class="ident" id="6214509"><a href="/go/printer/printer.go.html#6213842">output</a></span><span class="op" id="6214515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214519">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;tabwriter&nbsp;if&nbsp;necessary</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214572">if</span>&nbsp;<span class="ident" id="6214575"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6214578">.</span><span class="ident" id="6214579">Mode</span><span class="op" id="6214583">&amp;</span><span class="ident" id="6214584"><a href="/go/printer/printer.go.html#6213194">RawFormat</a></span>&nbsp;<span class="op" id="6214594">==</span>&nbsp;<span class="num" id="6214597">0</span>&nbsp;<span class="op" id="6214599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214603">minwidth</span>&nbsp;<span class="op" id="6214612">:=</span>&nbsp;<span class="ident" id="6214615"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6214618">.</span><span class="ident" id="6214619">Tabwidth</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214631">padchar</span>&nbsp;<span class="op" id="6214639">:=</span>&nbsp;<span class="builtintype" id="6214642">byte</span><span class="op" id="6214646">(</span><span class="string" id="6214647">&#39;\t&#39;</span><span class="op" id="6214651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214655">if</span>&nbsp;<span class="ident" id="6214658"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6214661">.</span><span class="ident" id="6214662">Mode</span><span class="op" id="6214666">&amp;</span><span class="ident" id="6214667"><a href="/go/printer/printer.go.html#6213359">UseSpaces</a></span>&nbsp;<span class="op" id="6214677">!=</span>&nbsp;<span class="num" id="6214680">0</span>&nbsp;<span class="op" id="6214682">{</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214687"><a href="/go/printer/printer.go.html#6214631">padchar</a></span>&nbsp;<span class="op" id="6214695">=</span>&nbsp;<span class="string" id="6214697">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6214703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214708">twmode</span>&nbsp;<span class="op" id="6214715">:=</span>&nbsp;<span class="ident" id="6214718"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6214727">.</span><span class="ident" id="6214728">DiscardEmptyColumns</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214750">if</span>&nbsp;<span class="ident" id="6214753"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6214756">.</span><span class="ident" id="6214757">Mode</span><span class="op" id="6214761">&amp;</span><span class="ident" id="6214762"><a href="/go/printer/printer.go.html#6213278">TabIndent</a></span>&nbsp;<span class="op" id="6214772">!=</span>&nbsp;<span class="num" id="6214775">0</span>&nbsp;<span class="op" id="6214777">{</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214782"><a href="/go/printer/printer.go.html#6214603">minwidth</a></span>&nbsp;<span class="op" id="6214791">=</span>&nbsp;<span class="num" id="6214793">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214798"><a href="/go/printer/printer.go.html#6214708">twmode</a></span>&nbsp;<span class="op" id="6214805">|=</span>&nbsp;<span class="ident" id="6214808"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6214817">.</span><span class="ident" id="6214818">TabIndent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6214830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6214835"><a href="/go/printer/printer.go.html#6213842">output</a></span>&nbsp;<span class="op" id="6214842">=</span>&nbsp;<span class="ident" id="6214844"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6214853">.</span><span class="ident" id="6214854">NewWriter</span><span class="op" id="6214863">(</span><span class="ident" id="6214864"><a href="/go/printer/printer.go.html#6213842">output</a></span><span class="op" id="6214870">,</span>&nbsp;<span class="ident" id="6214872"><a href="/go/printer/printer.go.html#6214603">minwidth</a></span><span class="op" id="6214880">,</span>&nbsp;<span class="ident" id="6214882"><a href="/go/printer/printer.go.html#6213822">cfg</a></span><span class="op" id="6214885">.</span><span class="ident" id="6214886">Tabwidth</span><span class="op" id="6214894">,</span>&nbsp;<span class="num" id="6214896">1</span><span class="op" id="6214897">,</span>&nbsp;<span class="ident" id="6214899"><a href="/go/printer/printer.go.html#6214631">padchar</a></span><span class="op" id="6214906">,</span>&nbsp;<span class="ident" id="6214908"><a href="/go/printer/printer.go.html#6214708">twmode</a></span><span class="op" id="6214914">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6214917">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6214921">//&nbsp;write&nbsp;printer&nbsp;result&nbsp;via&nbsp;tabwriter/trimmer&nbsp;to&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6214978">if</span>&nbsp;<span class="ident" id="6214981">_</span><span class="op" id="6214982">,</span>&nbsp;<span class="ident" id="6214984"><a href="/go/printer/printer.go.html#6213928">err</a></span>&nbsp;<span class="op" id="6214988">=</span>&nbsp;<span class="ident" id="6214990"><a href="/go/printer/printer.go.html#6213842">output</a></span><span class="op" id="6214996">.</span><span class="ident" id="6214997">Write</span><span class="op" id="6215002">(</span><span class="ident" id="6215003"><a href="/go/printer/printer.go.html#6213961">p</a></span><span class="op" id="6215004">.</span><span class="ident" id="6215005">output</span><span class="op" id="6215011">)</span><span class="op" id="6215012">;</span>&nbsp;<span class="ident" id="6215014"><a href="/go/printer/printer.go.html#6213928">err</a></span>&nbsp;<span class="op" id="6215018">!=</span>&nbsp;<span class="ident" id="6215021">nil</span>&nbsp;<span class="op" id="6215025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215029">return</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6215037">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6215041">//&nbsp;flush&nbsp;tabwriter,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215069">if</span>&nbsp;<span class="ident" id="6215072">tw</span><span class="op" id="6215074">,</span>&nbsp;<span class="ident" id="6215076">_</span>&nbsp;<span class="op" id="6215078">:=</span>&nbsp;<span class="ident" id="6215081"><a href="/go/printer/printer.go.html#6213842">output</a></span><span class="op" id="6215087">.</span><span class="op" id="6215088">(</span><span class="op" id="6215089">*</span><span class="ident" id="6215090"><a href="/go/printer/printer.go.html#6178829">tabwriter</a></span><span class="op" id="6215099">.</span><span class="ident" id="6215100">Writer</span><span class="op" id="6215106">)</span><span class="op" id="6215107">;</span>&nbsp;<span class="ident" id="6215109"><a href="/go/printer/printer.go.html#6215072">tw</a></span>&nbsp;<span class="op" id="6215112">!=</span>&nbsp;<span class="ident" id="6215115">nil</span>&nbsp;<span class="op" id="6215119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6215123"><a href="/go/printer/printer.go.html#6213928">err</a></span>&nbsp;<span class="op" id="6215127">=</span>&nbsp;<span class="ident" id="6215129"><a href="/go/printer/printer.go.html#6215072">tw</a></span><span class="op" id="6215131">.</span><span class="ident" id="6215132">Flush</span><span class="op" id="6215137">(</span><span class="op" id="6215138">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6215141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215145">return</span><br>
<span class="lineno"></span><span class="op" id="6215152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="6215155">//&nbsp;A&nbsp;CommentedNode&nbsp;bundles&nbsp;an&nbsp;AST&nbsp;node&nbsp;and&nbsp;corresponding&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="6215222">//&nbsp;It&nbsp;may&nbsp;be&nbsp;provided&nbsp;as&nbsp;argument&nbsp;to&nbsp;any&nbsp;of&nbsp;the&nbsp;Fprint&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="6215288">//</span><br>
<span class="lineno"></span><span class="keyword" id="6215291">type</span>&nbsp;<span class="ident" id="6215296">CommentedNode</span>&nbsp;<span class="keyword" id="6215310">struct</span>&nbsp;<span class="op" id="6215317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6215320">Node</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6215329">interface</span><span class="op" id="6215338">{</span><span class="op" id="6215339">}</span>&nbsp;<span class="comment" id="6215341">//&nbsp;*ast.File,&nbsp;or&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6215401">Comments</span>&nbsp;<span class="op" id="6215410">[</span><span class="op" id="6215411">]</span><span class="op" id="6215412">*</span><span class="ident" id="6215413"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6215416">.</span><span class="ident" id="6215417">CommentGroup</span><br>
<span class="lineno"></span><span class="op" id="6215430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6215433">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output&nbsp;for&nbsp;a&nbsp;given&nbsp;configuration&nbsp;cfg.</span><br>
<span class="lineno"></span><span class="comment" id="6215512">//&nbsp;Position&nbsp;information&nbsp;is&nbsp;interpreted&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set&nbsp;fset.</span><br>
<span class="lineno">1280</span><span class="comment" id="6215582">//&nbsp;The&nbsp;node&nbsp;type&nbsp;must&nbsp;be&nbsp;*ast.File,&nbsp;*CommentedNode,&nbsp;[]ast.Decl,&nbsp;[]ast.Stmt,</span><br>
<span class="lineno"></span><span class="comment" id="6215658">//&nbsp;or&nbsp;assignment-compatible&nbsp;to&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt.</span><br>
<span class="lineno"></span><span class="comment" id="6215732">//</span><br>
<span class="lineno"></span><span class="keyword" id="6215735">func</span>&nbsp;<span class="op" id="6215740">(</span><span class="ident" id="6215741">cfg</span>&nbsp;<span class="op" id="6215745">*</span><span class="ident" id="6215746"><a href="/go/printer/printer.go.html#6213576">Config</a></span><span class="op" id="6215752">)</span>&nbsp;<span class="ident" id="6215754">Fprint</span><span class="op" id="6215760">(</span><span class="ident" id="6215761">output</span>&nbsp;<span class="ident" id="6215768"><a href="/go/printer/printer.go.html#6178795">io</a></span><span class="op" id="6215770">.</span><span class="ident" id="6215771">Writer</span><span class="op" id="6215777">,</span>&nbsp;<span class="ident" id="6215779">fset</span>&nbsp;<span class="op" id="6215784">*</span><span class="ident" id="6215785"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6215790">.</span><span class="ident" id="6215791">FileSet</span><span class="op" id="6215798">,</span>&nbsp;<span class="ident" id="6215800">node</span>&nbsp;<span class="keyword" id="6215805">interface</span><span class="op" id="6215814">{</span><span class="op" id="6215815">}</span><span class="op" id="6215816">)</span>&nbsp;<span class="builtintype" id="6215818">error</span>&nbsp;<span class="op" id="6215824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6215827">return</span>&nbsp;<span class="ident" id="6215834"><a href="/go/printer/printer.go.html#6215741">cfg</a></span><span class="op" id="6215837">.</span><span class="ident" id="6215838">fprint</span><span class="op" id="6215844">(</span><span class="ident" id="6215845"><a href="/go/printer/printer.go.html#6215761">output</a></span><span class="op" id="6215851">,</span>&nbsp;<span class="ident" id="6215853"><a href="/go/printer/printer.go.html#6215779">fset</a></span><span class="op" id="6215857">,</span>&nbsp;<span class="ident" id="6215859"><a href="/go/printer/printer.go.html#6215800">node</a></span><span class="op" id="6215863">,</span>&nbsp;<span class="builtinfunc" id="6215865">make</span><span class="op" id="6215869">(</span><span class="keyword" id="6215870">map</span><span class="op" id="6215873">[</span><span class="ident" id="6215874"><a href="/go/printer/printer.go.html#6178773">ast</a></span><span class="op" id="6215877">.</span><span class="ident" id="6215878">Node</span><span class="op" id="6215882">]</span><span class="builtintype" id="6215883">int</span><span class="op" id="6215886">)</span><span class="op" id="6215887">)</span><br>
<span class="lineno">1285</span><span class="op" id="6215889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6215892">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="6215941">//&nbsp;It&nbsp;calls&nbsp;Config.Fprint&nbsp;with&nbsp;default&nbsp;settings.</span><br>
<span class="lineno"></span><span class="comment" id="6215990">//</span><br>
<span class="lineno">1290</span><span class="keyword" id="6215993">func</span>&nbsp;<span class="ident" id="6215998">Fprint</span><span class="op" id="6216004">(</span><span class="ident" id="6216005">output</span>&nbsp;<span class="ident" id="6216012"><a href="/go/printer/printer.go.html#6178795">io</a></span><span class="op" id="6216014">.</span><span class="ident" id="6216015">Writer</span><span class="op" id="6216021">,</span>&nbsp;<span class="ident" id="6216023">fset</span>&nbsp;<span class="op" id="6216028">*</span><span class="ident" id="6216029"><a href="/go/printer/printer.go.html#6178783">token</a></span><span class="op" id="6216034">.</span><span class="ident" id="6216035">FileSet</span><span class="op" id="6216042">,</span>&nbsp;<span class="ident" id="6216044">node</span>&nbsp;<span class="keyword" id="6216049">interface</span><span class="op" id="6216058">{</span><span class="op" id="6216059">}</span><span class="op" id="6216060">)</span>&nbsp;<span class="builtintype" id="6216062">error</span>&nbsp;<span class="op" id="6216068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6216071">return</span>&nbsp;<span class="op" id="6216078">(</span><span class="op" id="6216079">&amp;</span><span class="ident" id="6216080"><a href="/go/printer/printer.go.html#6213576">Config</a></span><span class="op" id="6216086">{</span><span class="ident" id="6216087">Tabwidth</span><span class="op" id="6216095">:</span>&nbsp;<span class="num" id="6216097">8</span><span class="op" id="6216098">}</span><span class="op" id="6216099">)</span><span class="op" id="6216100">.</span><span class="ident" id="6216101">Fprint</span><span class="op" id="6216107">(</span><span class="ident" id="6216108"><a href="/go/printer/printer.go.html#6216005">output</a></span><span class="op" id="6216114">,</span>&nbsp;<span class="ident" id="6216116"><a href="/go/printer/printer.go.html#6216023">fset</a></span><span class="op" id="6216120">,</span>&nbsp;<span class="ident" id="6216122"><a href="/go/printer/printer.go.html#6216044">node</a></span><span class="op" id="6216126">)</span><br>
<span class="lineno"></span><span class="op" id="6216128">}</span>
</div>
</body>
</html>
