<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="4860766">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4860821">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4860875">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4860926">//&nbsp;Package&nbsp;png&nbsp;implements&nbsp;a&nbsp;PNG&nbsp;image&nbsp;decoder&nbsp;and&nbsp;encoder.</span><br>
<span class="lineno"></span><span class="comment" id="4860985">//</span><br>
<span class="lineno"></span><span class="comment" id="4860988">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;is&nbsp;at&nbsp;http://www.w3.org/TR/PNG/.</span><br>
<span class="lineno"></span><span class="keyword" id="4861046">package</span>&nbsp;<span class="ident" id="4861054">png</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4861059">import</span>&nbsp;<span class="op" id="4861066">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861069">&#34;compress/zlib&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861086">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861105">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861112">&#34;hash&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861120">&#34;hash/crc32&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861134">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861143">&#34;image/color&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4861158">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="4861163">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="comment" id="4861166">//&nbsp;Color&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="4861202">const</span>&nbsp;<span class="op" id="4861208">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861211">ctGrayscale</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861228">=</span>&nbsp;<span class="num" id="4861230">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861233">ctTrueColor</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861250">=</span>&nbsp;<span class="num" id="4861252">2</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861255">ctPaletted</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861272">=</span>&nbsp;<span class="num" id="4861274">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861277">ctGrayscaleAlpha</span>&nbsp;<span class="op" id="4861294">=</span>&nbsp;<span class="num" id="4861296">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861299">ctTrueColorAlpha</span>&nbsp;<span class="op" id="4861316">=</span>&nbsp;<span class="num" id="4861318">6</span><br>
<span class="lineno"></span><span class="op" id="4861320">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4861323">//&nbsp;A&nbsp;cb&nbsp;is&nbsp;a&nbsp;combination&nbsp;of&nbsp;color&nbsp;type&nbsp;and&nbsp;bit&nbsp;depth.</span><br>
<span class="lineno"></span><span class="keyword" id="4861377">const</span>&nbsp;<span class="op" id="4861383">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861386">cbInvalid</span>&nbsp;<span class="op" id="4861396">=</span>&nbsp;<span class="ident" id="4861398">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861404">cbG1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861410">cbG2</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861416">cbG4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861422">cbG8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861428">cbGA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861435">cbTC8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861442">cbP1</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861448">cbP2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861454">cbP4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861460">cbP8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861466">cbTCA8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861474">cbG16</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861481">cbGA16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861489">cbTC16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861497">cbTCA16</span><br>
<span class="lineno"></span><span class="op" id="4861505">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="4861508">//&nbsp;Filter&nbsp;type,&nbsp;as&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec.</span><br>
<span class="lineno"></span><span class="keyword" id="4861545">const</span>&nbsp;<span class="op" id="4861551">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861554">ftNone</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861564">=</span>&nbsp;<span class="num" id="4861566">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861569">ftSub</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861579">=</span>&nbsp;<span class="num" id="4861581">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861584">ftUp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4861594">=</span>&nbsp;<span class="num" id="4861596">2</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861599">ftAverage</span>&nbsp;<span class="op" id="4861609">=</span>&nbsp;<span class="num" id="4861611">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861614">ftPaeth</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4861624">=</span>&nbsp;<span class="num" id="4861626">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861629">nFilter</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4861639">=</span>&nbsp;<span class="num" id="4861641">5</span><br>
<span class="lineno"></span><span class="op" id="4861643">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="4861646">//&nbsp;Interlace&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="4861665">const</span>&nbsp;<span class="op" id="4861671">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861674">itNone</span>&nbsp;&nbsp;<span class="op" id="4861682">=</span>&nbsp;<span class="num" id="4861684">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861687">itAdam7</span>&nbsp;<span class="op" id="4861695">=</span>&nbsp;<span class="num" id="4861697">1</span><br>
<span class="lineno"></span><span class="op" id="4861699">)</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="comment" id="4861702">//&nbsp;interlaceScan&nbsp;defines&nbsp;the&nbsp;placement&nbsp;and&nbsp;size&nbsp;of&nbsp;a&nbsp;pass&nbsp;for&nbsp;Adam7&nbsp;interlacing.</span><br>
<span class="lineno"></span><span class="keyword" id="4861783">type</span>&nbsp;<span class="ident" id="4861788">interlaceScan</span>&nbsp;<span class="keyword" id="4861802">struct</span>&nbsp;<span class="op" id="4861809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4861812">xFactor</span><span class="op" id="4861819">,</span>&nbsp;<span class="ident" id="4861821">yFactor</span><span class="op" id="4861828">,</span>&nbsp;<span class="ident" id="4861830">xOffset</span><span class="op" id="4861837">,</span>&nbsp;<span class="ident" id="4861839">yOffset</span>&nbsp;<span class="builtintype" id="4861847">int</span><br>
<span class="lineno"></span><span class="op" id="4861851">}</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span><span class="comment" id="4861854">//&nbsp;interlacing&nbsp;defines&nbsp;Adam7&nbsp;interlacing,&nbsp;with&nbsp;7&nbsp;passes&nbsp;of&nbsp;reduced&nbsp;images.</span><br>
<span class="lineno"></span><span class="comment" id="4861929">//&nbsp;See&nbsp;http://www.w3.org/TR/PNG/#8Interlace</span><br>
<span class="lineno"></span><span class="keyword" id="4861973">var</span>&nbsp;<span class="ident" id="4861977">interlacing</span>&nbsp;<span class="op" id="4861989">=</span>&nbsp;<span class="op" id="4861991">[</span><span class="op" id="4861992">]</span><span class="ident" id="4861993"><a href="/image/png/reader.go.html#4861788">interlaceScan</a></span><span class="op" id="4862006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862009">{</span><span class="num" id="4862010">8</span><span class="op" id="4862011">,</span>&nbsp;<span class="num" id="4862013">8</span><span class="op" id="4862014">,</span>&nbsp;<span class="num" id="4862016">0</span><span class="op" id="4862017">,</span>&nbsp;<span class="num" id="4862019">0</span><span class="op" id="4862020">}</span><span class="op" id="4862021">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862024">{</span><span class="num" id="4862025">8</span><span class="op" id="4862026">,</span>&nbsp;<span class="num" id="4862028">8</span><span class="op" id="4862029">,</span>&nbsp;<span class="num" id="4862031">4</span><span class="op" id="4862032">,</span>&nbsp;<span class="num" id="4862034">0</span><span class="op" id="4862035">}</span><span class="op" id="4862036">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862039">{</span><span class="num" id="4862040">4</span><span class="op" id="4862041">,</span>&nbsp;<span class="num" id="4862043">8</span><span class="op" id="4862044">,</span>&nbsp;<span class="num" id="4862046">0</span><span class="op" id="4862047">,</span>&nbsp;<span class="num" id="4862049">4</span><span class="op" id="4862050">}</span><span class="op" id="4862051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862054">{</span><span class="num" id="4862055">4</span><span class="op" id="4862056">,</span>&nbsp;<span class="num" id="4862058">4</span><span class="op" id="4862059">,</span>&nbsp;<span class="num" id="4862061">2</span><span class="op" id="4862062">,</span>&nbsp;<span class="num" id="4862064">0</span><span class="op" id="4862065">}</span><span class="op" id="4862066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862069">{</span><span class="num" id="4862070">2</span><span class="op" id="4862071">,</span>&nbsp;<span class="num" id="4862073">4</span><span class="op" id="4862074">,</span>&nbsp;<span class="num" id="4862076">0</span><span class="op" id="4862077">,</span>&nbsp;<span class="num" id="4862079">2</span><span class="op" id="4862080">}</span><span class="op" id="4862081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862084">{</span><span class="num" id="4862085">2</span><span class="op" id="4862086">,</span>&nbsp;<span class="num" id="4862088">2</span><span class="op" id="4862089">,</span>&nbsp;<span class="num" id="4862091">1</span><span class="op" id="4862092">,</span>&nbsp;<span class="num" id="4862094">0</span><span class="op" id="4862095">}</span><span class="op" id="4862096">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4862099">{</span><span class="num" id="4862100">1</span><span class="op" id="4862101">,</span>&nbsp;<span class="num" id="4862103">2</span><span class="op" id="4862104">,</span>&nbsp;<span class="num" id="4862106">0</span><span class="op" id="4862107">,</span>&nbsp;<span class="num" id="4862109">1</span><span class="op" id="4862110">}</span><span class="op" id="4862111">,</span><br>
<span class="lineno"></span><span class="op" id="4862113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4862116">//&nbsp;Decoding&nbsp;stage.</span><br>
<span class="lineno"></span><span class="comment" id="4862135">//&nbsp;The&nbsp;PNG&nbsp;specification&nbsp;says&nbsp;that&nbsp;the&nbsp;IHDR,&nbsp;PLTE&nbsp;(if&nbsp;present),&nbsp;IDAT&nbsp;and&nbsp;IEND</span><br>
<span class="lineno">85</span><span class="comment" id="4862213">//&nbsp;chunks&nbsp;must&nbsp;appear&nbsp;in&nbsp;that&nbsp;order.&nbsp;There&nbsp;may&nbsp;be&nbsp;multiple&nbsp;IDAT&nbsp;chunks,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="4862289">//&nbsp;IDAT&nbsp;chunks&nbsp;must&nbsp;be&nbsp;sequential&nbsp;(i.e.&nbsp;they&nbsp;may&nbsp;not&nbsp;have&nbsp;any&nbsp;other&nbsp;chunks</span><br>
<span class="lineno"></span><span class="comment" id="4862364">//&nbsp;between&nbsp;them).</span><br>
<span class="lineno"></span><span class="comment" id="4862382">//&nbsp;http://www.w3.org/TR/PNG/#5ChunkOrdering</span><br>
<span class="lineno"></span><span class="keyword" id="4862426">const</span>&nbsp;<span class="op" id="4862432">(</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862435">dsStart</span>&nbsp;<span class="op" id="4862443">=</span>&nbsp;<span class="ident" id="4862445">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862451">dsSeenIHDR</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862463">dsSeenPLTE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862475">dsSeenIDAT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862487">dsSeenIEND</span><br>
<span class="lineno">95</span><span class="op" id="4862498">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862501">const</span>&nbsp;<span class="ident" id="4862507">pngHeader</span>&nbsp;<span class="op" id="4862517">=</span>&nbsp;<span class="string" id="4862519">&#34;\x89PNG\r\n\x1a\n&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862540">type</span>&nbsp;<span class="ident" id="4862545">decoder</span>&nbsp;<span class="keyword" id="4862553">struct</span>&nbsp;<span class="op" id="4862560">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862563">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4862577"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4862579">.</span><span class="ident" id="4862580">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862588">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4862602"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4862607">.</span><span class="ident" id="4862608">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862615">crc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4862629"><a href="/image/png/reader.go.html#4861112">hash</a></span><span class="op" id="4862633">.</span><span class="ident" id="4862634">Hash32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862642">width</span><span class="op" id="4862647">,</span>&nbsp;<span class="ident" id="4862649">height</span>&nbsp;<span class="builtintype" id="4862656">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862661">depth</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4862675">int</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862680">palette</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4862694"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4862699">.</span><span class="ident" id="4862700">Palette</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862709">cb</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4862723">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862728">stage</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4862742">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862747">idatLength</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4862761">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862769">tmp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4862783">[</span><span class="num" id="4862784">3</span>&nbsp;<span class="op" id="4862786">*</span>&nbsp;<span class="num" id="4862788">256</span><span class="op" id="4862791">]</span><span class="builtintype" id="4862792">byte</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4862798">interlace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4862812">int</span><br>
<span class="lineno"></span><span class="op" id="4862816">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4862819">//&nbsp;A&nbsp;FormatError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;is&nbsp;not&nbsp;a&nbsp;valid&nbsp;PNG.</span><br>
<span class="lineno"></span><span class="keyword" id="4862879">type</span>&nbsp;<span class="ident" id="4862884">FormatError</span>&nbsp;<span class="builtintype" id="4862896">string</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="keyword" id="4862904">func</span>&nbsp;<span class="op" id="4862909">(</span><span class="ident" id="4862910">e</span>&nbsp;<span class="ident" id="4862912"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4862923">)</span>&nbsp;<span class="ident" id="4862925">Error</span><span class="op" id="4862930">(</span><span class="op" id="4862931">)</span>&nbsp;<span class="builtintype" id="4862933">string</span>&nbsp;<span class="op" id="4862940">{</span>&nbsp;<span class="keyword" id="4862942">return</span>&nbsp;<span class="string" id="4862949">&#34;png:&nbsp;invalid&nbsp;format:&nbsp;&#34;</span>&nbsp;<span class="op" id="4862973">+</span>&nbsp;<span class="builtintype" id="4862975">string</span><span class="op" id="4862981">(</span><span class="ident" id="4862982"><a href="/image/png/reader.go.html#4862910">e</a></span><span class="op" id="4862983">)</span>&nbsp;<span class="op" id="4862985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4862988">var</span>&nbsp;<span class="ident" id="4862992">chunkOrderError</span>&nbsp;<span class="op" id="4863008">=</span>&nbsp;<span class="ident" id="4863010"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4863021">(</span><span class="string" id="4863022">&#34;chunk&nbsp;out&nbsp;of&nbsp;order&#34;</span><span class="op" id="4863042">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="4863045">//&nbsp;An&nbsp;UnsupportedError&nbsp;reports&nbsp;that&nbsp;the&nbsp;input&nbsp;uses&nbsp;a&nbsp;valid&nbsp;but&nbsp;unimplemented&nbsp;PNG&nbsp;feature.</span><br>
<span class="lineno"></span><span class="keyword" id="4863135">type</span>&nbsp;<span class="ident" id="4863140">UnsupportedError</span>&nbsp;<span class="builtintype" id="4863157">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4863165">func</span>&nbsp;<span class="op" id="4863170">(</span><span class="ident" id="4863171">e</span>&nbsp;<span class="ident" id="4863173"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4863189">)</span>&nbsp;<span class="ident" id="4863191">Error</span><span class="op" id="4863196">(</span><span class="op" id="4863197">)</span>&nbsp;<span class="builtintype" id="4863199">string</span>&nbsp;<span class="op" id="4863206">{</span>&nbsp;<span class="keyword" id="4863208">return</span>&nbsp;<span class="string" id="4863215">&#34;png:&nbsp;unsupported&nbsp;feature:&nbsp;&#34;</span>&nbsp;<span class="op" id="4863244">+</span>&nbsp;<span class="builtintype" id="4863246">string</span><span class="op" id="4863252">(</span><span class="ident" id="4863253"><a href="/image/png/reader.go.html#4863171">e</a></span><span class="op" id="4863254">)</span>&nbsp;<span class="op" id="4863256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="4863259">func</span>&nbsp;<span class="ident" id="4863264">min</span><span class="op" id="4863267">(</span><span class="ident" id="4863268">a</span><span class="op" id="4863269">,</span>&nbsp;<span class="ident" id="4863271">b</span>&nbsp;<span class="builtintype" id="4863273">int</span><span class="op" id="4863276">)</span>&nbsp;<span class="builtintype" id="4863278">int</span>&nbsp;<span class="op" id="4863282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863285">if</span>&nbsp;<span class="ident" id="4863288"><a href="/image/png/reader.go.html#4863268">a</a></span>&nbsp;<span class="op" id="4863290">&lt;</span>&nbsp;<span class="ident" id="4863292"><a href="/image/png/reader.go.html#4863271">b</a></span>&nbsp;<span class="op" id="4863294">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863298">return</span>&nbsp;<span class="ident" id="4863305"><a href="/image/png/reader.go.html#4863268">a</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863308">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863311">return</span>&nbsp;<span class="ident" id="4863318"><a href="/image/png/reader.go.html#4863271">b</a></span><br>
<span class="lineno">130</span><span class="op" id="4863320">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4863323">func</span>&nbsp;<span class="op" id="4863328">(</span><span class="ident" id="4863329">d</span>&nbsp;<span class="op" id="4863331">*</span><span class="ident" id="4863332"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4863339">)</span>&nbsp;<span class="ident" id="4863341">parseIHDR</span><span class="op" id="4863350">(</span><span class="ident" id="4863351">length</span>&nbsp;<span class="builtintype" id="4863358">uint32</span><span class="op" id="4863364">)</span>&nbsp;<span class="builtintype" id="4863366">error</span>&nbsp;<span class="op" id="4863372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863375">if</span>&nbsp;<span class="ident" id="4863378"><a href="/image/png/reader.go.html#4863351">length</a></span>&nbsp;<span class="op" id="4863385">!=</span>&nbsp;<span class="num" id="4863388">13</span>&nbsp;<span class="op" id="4863391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863395">return</span>&nbsp;<span class="ident" id="4863402"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4863413">(</span><span class="string" id="4863414">&#34;bad&nbsp;IHDR&nbsp;length&#34;</span><span class="op" id="4863431">)</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863437">if</span>&nbsp;<span class="ident" id="4863440">_</span><span class="op" id="4863441">,</span>&nbsp;<span class="ident" id="4863443">err</span>&nbsp;<span class="op" id="4863447">:=</span>&nbsp;<span class="ident" id="4863450"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4863452">.</span><span class="ident" id="4863453">ReadFull</span><span class="op" id="4863461">(</span><span class="ident" id="4863462"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863463">.</span><span class="ident" id="4863464">r</span><span class="op" id="4863465">,</span>&nbsp;<span class="ident" id="4863467"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863468">.</span><span class="ident" id="4863469">tmp</span><span class="op" id="4863472">[</span><span class="op" id="4863473">:</span><span class="num" id="4863474">13</span><span class="op" id="4863476">]</span><span class="op" id="4863477">)</span><span class="op" id="4863478">;</span>&nbsp;<span class="ident" id="4863480"><a href="/image/png/reader.go.html#4863443">err</a></span>&nbsp;<span class="op" id="4863484">!=</span>&nbsp;<span class="ident" id="4863487">nil</span>&nbsp;<span class="op" id="4863491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863495">return</span>&nbsp;<span class="ident" id="4863502"><a href="/image/png/reader.go.html#4863443">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863510"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863511">.</span><span class="ident" id="4863512">crc</span><span class="op" id="4863515">.</span><span class="ident" id="4863516">Write</span><span class="op" id="4863521">(</span><span class="ident" id="4863522"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863523">.</span><span class="ident" id="4863524">tmp</span><span class="op" id="4863527">[</span><span class="op" id="4863528">:</span><span class="num" id="4863529">13</span><span class="op" id="4863531">]</span><span class="op" id="4863532">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863535">if</span>&nbsp;<span class="ident" id="4863538"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863539">.</span><span class="ident" id="4863540">tmp</span><span class="op" id="4863543">[</span><span class="num" id="4863544">10</span><span class="op" id="4863546">]</span>&nbsp;<span class="op" id="4863548">!=</span>&nbsp;<span class="num" id="4863551">0</span>&nbsp;<span class="op" id="4863553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863557">return</span>&nbsp;<span class="ident" id="4863564"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4863580">(</span><span class="string" id="4863581">&#34;compression&nbsp;method&#34;</span><span class="op" id="4863601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863607">if</span>&nbsp;<span class="ident" id="4863610"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863611">.</span><span class="ident" id="4863612">tmp</span><span class="op" id="4863615">[</span><span class="num" id="4863616">11</span><span class="op" id="4863618">]</span>&nbsp;<span class="op" id="4863620">!=</span>&nbsp;<span class="num" id="4863623">0</span>&nbsp;<span class="op" id="4863625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863629">return</span>&nbsp;<span class="ident" id="4863636"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4863652">(</span><span class="string" id="4863653">&#34;filter&nbsp;method&#34;</span><span class="op" id="4863668">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863671">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863674">if</span>&nbsp;<span class="ident" id="4863677"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863678">.</span><span class="ident" id="4863679">tmp</span><span class="op" id="4863682">[</span><span class="num" id="4863683">12</span><span class="op" id="4863685">]</span>&nbsp;<span class="op" id="4863687">!=</span>&nbsp;<span class="ident" id="4863690"><a href="/image/png/reader.go.html#4861674">itNone</a></span>&nbsp;<span class="op" id="4863697">&amp;&amp;</span>&nbsp;<span class="ident" id="4863700"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863701">.</span><span class="ident" id="4863702">tmp</span><span class="op" id="4863705">[</span><span class="num" id="4863706">12</span><span class="op" id="4863708">]</span>&nbsp;<span class="op" id="4863710">!=</span>&nbsp;<span class="ident" id="4863713"><a href="/image/png/reader.go.html#4861687">itAdam7</a></span>&nbsp;<span class="op" id="4863721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863725">return</span>&nbsp;<span class="ident" id="4863732"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4863743">(</span><span class="string" id="4863744">&#34;invalid&nbsp;interlace&nbsp;method&#34;</span><span class="op" id="4863770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863776"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863777">.</span><span class="ident" id="4863778">interlace</span>&nbsp;<span class="op" id="4863788">=</span>&nbsp;<span class="builtintype" id="4863790">int</span><span class="op" id="4863793">(</span><span class="ident" id="4863794"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863795">.</span><span class="ident" id="4863796">tmp</span><span class="op" id="4863799">[</span><span class="num" id="4863800">12</span><span class="op" id="4863802">]</span><span class="op" id="4863803">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863806">w</span>&nbsp;<span class="op" id="4863808">:=</span>&nbsp;<span class="builtintype" id="4863811">int32</span><span class="op" id="4863816">(</span><span class="ident" id="4863817"><a href="/image/png/reader.go.html#4861086">binary</a></span><span class="op" id="4863823">.</span><span class="ident" id="4863824">BigEndian</span><span class="op" id="4863833">.</span><span class="ident" id="4863834">Uint32</span><span class="op" id="4863840">(</span><span class="ident" id="4863841"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863842">.</span><span class="ident" id="4863843">tmp</span><span class="op" id="4863846">[</span><span class="num" id="4863847">0</span><span class="op" id="4863848">:</span><span class="num" id="4863849">4</span><span class="op" id="4863850">]</span><span class="op" id="4863851">)</span><span class="op" id="4863852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863855">h</span>&nbsp;<span class="op" id="4863857">:=</span>&nbsp;<span class="builtintype" id="4863860">int32</span><span class="op" id="4863865">(</span><span class="ident" id="4863866"><a href="/image/png/reader.go.html#4861086">binary</a></span><span class="op" id="4863872">.</span><span class="ident" id="4863873">BigEndian</span><span class="op" id="4863882">.</span><span class="ident" id="4863883">Uint32</span><span class="op" id="4863889">(</span><span class="ident" id="4863890"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4863891">.</span><span class="ident" id="4863892">tmp</span><span class="op" id="4863895">[</span><span class="num" id="4863896">4</span><span class="op" id="4863897">:</span><span class="num" id="4863898">8</span><span class="op" id="4863899">]</span><span class="op" id="4863900">)</span><span class="op" id="4863901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863904">if</span>&nbsp;<span class="ident" id="4863907"><a href="/image/png/reader.go.html#4863806">w</a></span>&nbsp;<span class="op" id="4863909">&lt;</span>&nbsp;<span class="num" id="4863911">0</span>&nbsp;<span class="op" id="4863913">||</span>&nbsp;<span class="ident" id="4863916"><a href="/image/png/reader.go.html#4863855">h</a></span>&nbsp;<span class="op" id="4863918">&lt;</span>&nbsp;<span class="num" id="4863920">0</span>&nbsp;<span class="op" id="4863922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4863926">return</span>&nbsp;<span class="ident" id="4863933"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4863944">(</span><span class="string" id="4863945">&#34;negative&nbsp;dimension&#34;</span><span class="op" id="4863965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4863968">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4863971">nPixels</span>&nbsp;<span class="op" id="4863979">:=</span>&nbsp;<span class="ident" id="4863982">int64</span><span class="op" id="4863987">(</span><span class="ident" id="4863988"><a href="/image/png/reader.go.html#4863806">w</a></span><span class="op" id="4863989">)</span>&nbsp;<span class="op" id="4863991">*</span>&nbsp;<span class="ident" id="4863993">int64</span><span class="op" id="4863998">(</span><span class="ident" id="4863999"><a href="/image/png/reader.go.html#4863855">h</a></span><span class="op" id="4864000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864003">if</span>&nbsp;<span class="ident" id="4864006"><a href="/image/png/reader.go.html#4863971">nPixels</a></span>&nbsp;<span class="op" id="4864014">!=</span>&nbsp;<span class="ident" id="4864017">int64</span><span class="op" id="4864022">(</span><span class="builtintype" id="4864023">int</span><span class="op" id="4864026">(</span><span class="ident" id="4864027"><a href="/image/png/reader.go.html#4863971">nPixels</a></span><span class="op" id="4864034">)</span><span class="op" id="4864035">)</span>&nbsp;<span class="op" id="4864037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864041">return</span>&nbsp;<span class="ident" id="4864048"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4864064">(</span><span class="string" id="4864065">&#34;dimension&nbsp;overflow&#34;</span><span class="op" id="4864085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864091"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864092">.</span><span class="ident" id="4864093">cb</span>&nbsp;<span class="op" id="4864096">=</span>&nbsp;<span class="ident" id="4864098"><a href="/image/png/reader.go.html#4861386">cbInvalid</a></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864109"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864110">.</span><span class="ident" id="4864111">depth</span>&nbsp;<span class="op" id="4864117">=</span>&nbsp;<span class="builtintype" id="4864119">int</span><span class="op" id="4864122">(</span><span class="ident" id="4864123"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864124">.</span><span class="ident" id="4864125">tmp</span><span class="op" id="4864128">[</span><span class="num" id="4864129">8</span><span class="op" id="4864130">]</span><span class="op" id="4864131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864134">switch</span>&nbsp;<span class="ident" id="4864141"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864142">.</span><span class="ident" id="4864143">depth</span>&nbsp;<span class="op" id="4864149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864152">case</span>&nbsp;<span class="num" id="4864157">1</span><span class="op" id="4864158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864162">switch</span>&nbsp;<span class="ident" id="4864169"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864170">.</span><span class="ident" id="4864171">tmp</span><span class="op" id="4864174">[</span><span class="num" id="4864175">9</span><span class="op" id="4864176">]</span>&nbsp;<span class="op" id="4864178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864182">case</span>&nbsp;<span class="ident" id="4864187"><a href="/image/png/reader.go.html#4861211">ctGrayscale</a></span><span class="op" id="4864198">:</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864203"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864204">.</span><span class="ident" id="4864205">cb</span>&nbsp;<span class="op" id="4864208">=</span>&nbsp;<span class="ident" id="4864210"><a href="/image/png/reader.go.html#4861404">cbG1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864217">case</span>&nbsp;<span class="ident" id="4864222"><a href="/image/png/reader.go.html#4861255">ctPaletted</a></span><span class="op" id="4864232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864237"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864238">.</span><span class="ident" id="4864239">cb</span>&nbsp;<span class="op" id="4864242">=</span>&nbsp;<span class="ident" id="4864244"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864254">case</span>&nbsp;<span class="num" id="4864259">2</span><span class="op" id="4864260">:</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864264">switch</span>&nbsp;<span class="ident" id="4864271"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864272">.</span><span class="ident" id="4864273">tmp</span><span class="op" id="4864276">[</span><span class="num" id="4864277">9</span><span class="op" id="4864278">]</span>&nbsp;<span class="op" id="4864280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864284">case</span>&nbsp;<span class="ident" id="4864289"><a href="/image/png/reader.go.html#4861211">ctGrayscale</a></span><span class="op" id="4864300">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864305"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864306">.</span><span class="ident" id="4864307">cb</span>&nbsp;<span class="op" id="4864310">=</span>&nbsp;<span class="ident" id="4864312"><a href="/image/png/reader.go.html#4861410">cbG2</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864319">case</span>&nbsp;<span class="ident" id="4864324"><a href="/image/png/reader.go.html#4861255">ctPaletted</a></span><span class="op" id="4864334">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864339"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864340">.</span><span class="ident" id="4864341">cb</span>&nbsp;<span class="op" id="4864344">=</span>&nbsp;<span class="ident" id="4864346"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864353">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864356">case</span>&nbsp;<span class="num" id="4864361">4</span><span class="op" id="4864362">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864366">switch</span>&nbsp;<span class="ident" id="4864373"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864374">.</span><span class="ident" id="4864375">tmp</span><span class="op" id="4864378">[</span><span class="num" id="4864379">9</span><span class="op" id="4864380">]</span>&nbsp;<span class="op" id="4864382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864386">case</span>&nbsp;<span class="ident" id="4864391"><a href="/image/png/reader.go.html#4861211">ctGrayscale</a></span><span class="op" id="4864402">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864407"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864408">.</span><span class="ident" id="4864409">cb</span>&nbsp;<span class="op" id="4864412">=</span>&nbsp;<span class="ident" id="4864414"><a href="/image/png/reader.go.html#4861416">cbG4</a></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864421">case</span>&nbsp;<span class="ident" id="4864426"><a href="/image/png/reader.go.html#4861255">ctPaletted</a></span><span class="op" id="4864436">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864441"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864442">.</span><span class="ident" id="4864443">cb</span>&nbsp;<span class="op" id="4864446">=</span>&nbsp;<span class="ident" id="4864448"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864458">case</span>&nbsp;<span class="num" id="4864463">8</span><span class="op" id="4864464">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864468">switch</span>&nbsp;<span class="ident" id="4864475"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864476">.</span><span class="ident" id="4864477">tmp</span><span class="op" id="4864480">[</span><span class="num" id="4864481">9</span><span class="op" id="4864482">]</span>&nbsp;<span class="op" id="4864484">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864488">case</span>&nbsp;<span class="ident" id="4864493"><a href="/image/png/reader.go.html#4861211">ctGrayscale</a></span><span class="op" id="4864504">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864509"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864510">.</span><span class="ident" id="4864511">cb</span>&nbsp;<span class="op" id="4864514">=</span>&nbsp;<span class="ident" id="4864516"><a href="/image/png/reader.go.html#4861422">cbG8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864523">case</span>&nbsp;<span class="ident" id="4864528"><a href="/image/png/reader.go.html#4861233">ctTrueColor</a></span><span class="op" id="4864539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864544"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864545">.</span><span class="ident" id="4864546">cb</span>&nbsp;<span class="op" id="4864549">=</span>&nbsp;<span class="ident" id="4864551"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864559">case</span>&nbsp;<span class="ident" id="4864564"><a href="/image/png/reader.go.html#4861255">ctPaletted</a></span><span class="op" id="4864574">:</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864579"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864580">.</span><span class="ident" id="4864581">cb</span>&nbsp;<span class="op" id="4864584">=</span>&nbsp;<span class="ident" id="4864586"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864593">case</span>&nbsp;<span class="ident" id="4864598"><a href="/image/png/reader.go.html#4861277">ctGrayscaleAlpha</a></span><span class="op" id="4864614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864619"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864620">.</span><span class="ident" id="4864621">cb</span>&nbsp;<span class="op" id="4864624">=</span>&nbsp;<span class="ident" id="4864626"><a href="/image/png/reader.go.html#4861428">cbGA8</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864634">case</span>&nbsp;<span class="ident" id="4864639"><a href="/image/png/reader.go.html#4861299">ctTrueColorAlpha</a></span><span class="op" id="4864655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864660"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864661">.</span><span class="ident" id="4864662">cb</span>&nbsp;<span class="op" id="4864665">=</span>&nbsp;<span class="ident" id="4864667"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864679">case</span>&nbsp;<span class="num" id="4864684">16</span><span class="op" id="4864686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864690">switch</span>&nbsp;<span class="ident" id="4864697"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864698">.</span><span class="ident" id="4864699">tmp</span><span class="op" id="4864702">[</span><span class="num" id="4864703">9</span><span class="op" id="4864704">]</span>&nbsp;<span class="op" id="4864706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864710">case</span>&nbsp;<span class="ident" id="4864715"><a href="/image/png/reader.go.html#4861211">ctGrayscale</a></span><span class="op" id="4864726">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864731"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864732">.</span><span class="ident" id="4864733">cb</span>&nbsp;<span class="op" id="4864736">=</span>&nbsp;<span class="ident" id="4864738"><a href="/image/png/reader.go.html#4861474">cbG16</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864746">case</span>&nbsp;<span class="ident" id="4864751"><a href="/image/png/reader.go.html#4861233">ctTrueColor</a></span><span class="op" id="4864762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864767"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864768">.</span><span class="ident" id="4864769">cb</span>&nbsp;<span class="op" id="4864772">=</span>&nbsp;<span class="ident" id="4864774"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864783">case</span>&nbsp;<span class="ident" id="4864788"><a href="/image/png/reader.go.html#4861277">ctGrayscaleAlpha</a></span><span class="op" id="4864804">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864809"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864810">.</span><span class="ident" id="4864811">cb</span>&nbsp;<span class="op" id="4864814">=</span>&nbsp;<span class="ident" id="4864816"><a href="/image/png/reader.go.html#4861481">cbGA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864825">case</span>&nbsp;<span class="ident" id="4864830"><a href="/image/png/reader.go.html#4861299">ctTrueColorAlpha</a></span><span class="op" id="4864846">:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864851"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864852">.</span><span class="ident" id="4864853">cb</span>&nbsp;<span class="op" id="4864856">=</span>&nbsp;<span class="ident" id="4864858"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864874">if</span>&nbsp;<span class="ident" id="4864877"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864878">.</span><span class="ident" id="4864879">cb</span>&nbsp;<span class="op" id="4864882">==</span>&nbsp;<span class="ident" id="4864885"><a href="/image/png/reader.go.html#4861386">cbInvalid</a></span>&nbsp;<span class="op" id="4864895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4864899">return</span>&nbsp;<span class="ident" id="4864906"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4864922">(</span><span class="ident" id="4864923"><a href="/image/png/reader.go.html#4861105">fmt</a></span><span class="op" id="4864926">.</span><span class="ident" id="4864927">Sprintf</span><span class="op" id="4864934">(</span><span class="string" id="4864935">&#34;bit&nbsp;depth&nbsp;%d,&nbsp;color&nbsp;type&nbsp;%d&#34;</span><span class="op" id="4864964">,</span>&nbsp;<span class="ident" id="4864966"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864967">.</span><span class="ident" id="4864968">tmp</span><span class="op" id="4864971">[</span><span class="num" id="4864972">8</span><span class="op" id="4864973">]</span><span class="op" id="4864974">,</span>&nbsp;<span class="ident" id="4864976"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864977">.</span><span class="ident" id="4864978">tmp</span><span class="op" id="4864981">[</span><span class="num" id="4864982">9</span><span class="op" id="4864983">]</span><span class="op" id="4864984">)</span><span class="op" id="4864985">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4864988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4864991"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4864992">.</span><span class="ident" id="4864993">width</span><span class="op" id="4864998">,</span>&nbsp;<span class="ident" id="4865000"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4865001">.</span><span class="ident" id="4865002">height</span>&nbsp;<span class="op" id="4865009">=</span>&nbsp;<span class="builtintype" id="4865011">int</span><span class="op" id="4865014">(</span><span class="ident" id="4865015"><a href="/image/png/reader.go.html#4863806">w</a></span><span class="op" id="4865016">)</span><span class="op" id="4865017">,</span>&nbsp;<span class="builtintype" id="4865019">int</span><span class="op" id="4865022">(</span><span class="ident" id="4865023"><a href="/image/png/reader.go.html#4863855">h</a></span><span class="op" id="4865024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865027">return</span>&nbsp;<span class="ident" id="4865034"><a href="/image/png/reader.go.html#4863329">d</a></span><span class="op" id="4865035">.</span><span class="ident" id="4865036">verifyChecksum</span><span class="op" id="4865050">(</span><span class="op" id="4865051">)</span><br>
<span class="lineno"></span><span class="op" id="4865053">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="4865056">func</span>&nbsp;<span class="op" id="4865061">(</span><span class="ident" id="4865062">d</span>&nbsp;<span class="op" id="4865064">*</span><span class="ident" id="4865065"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4865072">)</span>&nbsp;<span class="ident" id="4865074">parsePLTE</span><span class="op" id="4865083">(</span><span class="ident" id="4865084">length</span>&nbsp;<span class="builtintype" id="4865091">uint32</span><span class="op" id="4865097">)</span>&nbsp;<span class="builtintype" id="4865099">error</span>&nbsp;<span class="op" id="4865105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865108">np</span>&nbsp;<span class="op" id="4865111">:=</span>&nbsp;<span class="builtintype" id="4865114">int</span><span class="op" id="4865117">(</span><span class="ident" id="4865118"><a href="/image/png/reader.go.html#4865084">length</a></span>&nbsp;<span class="op" id="4865125">/</span>&nbsp;<span class="num" id="4865127">3</span><span class="op" id="4865128">)</span>&nbsp;<span class="comment" id="4865130">//&nbsp;The&nbsp;number&nbsp;of&nbsp;palette&nbsp;entries.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865165">if</span>&nbsp;<span class="ident" id="4865168"><a href="/image/png/reader.go.html#4865084">length</a></span><span class="op" id="4865174">%</span><span class="num" id="4865175">3</span>&nbsp;<span class="op" id="4865177">!=</span>&nbsp;<span class="num" id="4865180">0</span>&nbsp;<span class="op" id="4865182">||</span>&nbsp;<span class="ident" id="4865185"><a href="/image/png/reader.go.html#4865108">np</a></span>&nbsp;<span class="op" id="4865188">&lt;=</span>&nbsp;<span class="num" id="4865191">0</span>&nbsp;<span class="op" id="4865193">||</span>&nbsp;<span class="ident" id="4865196"><a href="/image/png/reader.go.html#4865108">np</a></span>&nbsp;<span class="op" id="4865199">&gt;</span>&nbsp;<span class="num" id="4865201">256</span>&nbsp;<span class="op" id="4865205">||</span>&nbsp;<span class="ident" id="4865208"><a href="/image/png/reader.go.html#4865108">np</a></span>&nbsp;<span class="op" id="4865211">&gt;</span>&nbsp;<span class="num" id="4865213">1</span><span class="op" id="4865214">&lt;&lt;</span><span class="builtintype" id="4865216">uint</span><span class="op" id="4865220">(</span><span class="ident" id="4865221"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865222">.</span><span class="ident" id="4865223">depth</span><span class="op" id="4865228">)</span>&nbsp;<span class="op" id="4865230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865234">return</span>&nbsp;<span class="ident" id="4865241"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4865252">(</span><span class="string" id="4865253">&#34;bad&nbsp;PLTE&nbsp;length&#34;</span><span class="op" id="4865270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4865273">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865276">n</span><span class="op" id="4865277">,</span>&nbsp;<span class="ident" id="4865279">err</span>&nbsp;<span class="op" id="4865283">:=</span>&nbsp;<span class="ident" id="4865286"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4865288">.</span><span class="ident" id="4865289">ReadFull</span><span class="op" id="4865297">(</span><span class="ident" id="4865298"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865299">.</span><span class="ident" id="4865300">r</span><span class="op" id="4865301">,</span>&nbsp;<span class="ident" id="4865303"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865304">.</span><span class="ident" id="4865305">tmp</span><span class="op" id="4865308">[</span><span class="op" id="4865309">:</span><span class="num" id="4865310">3</span><span class="op" id="4865311">*</span><span class="ident" id="4865312"><a href="/image/png/reader.go.html#4865108">np</a></span><span class="op" id="4865314">]</span><span class="op" id="4865315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865318">if</span>&nbsp;<span class="ident" id="4865321"><a href="/image/png/reader.go.html#4865279">err</a></span>&nbsp;<span class="op" id="4865325">!=</span>&nbsp;<span class="ident" id="4865328">nil</span>&nbsp;<span class="op" id="4865332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865336">return</span>&nbsp;<span class="ident" id="4865343"><a href="/image/png/reader.go.html#4865279">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4865348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865351"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865352">.</span><span class="ident" id="4865353">crc</span><span class="op" id="4865356">.</span><span class="ident" id="4865357">Write</span><span class="op" id="4865362">(</span><span class="ident" id="4865363"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865364">.</span><span class="ident" id="4865365">tmp</span><span class="op" id="4865368">[</span><span class="op" id="4865369">:</span><span class="ident" id="4865370"><a href="/image/png/reader.go.html#4865276">n</a></span><span class="op" id="4865371">]</span><span class="op" id="4865372">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865375">switch</span>&nbsp;<span class="ident" id="4865382"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865383">.</span><span class="ident" id="4865384">cb</span>&nbsp;<span class="op" id="4865387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865390">case</span>&nbsp;<span class="ident" id="4865395"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><span class="op" id="4865399">,</span>&nbsp;<span class="ident" id="4865401"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><span class="op" id="4865405">,</span>&nbsp;<span class="ident" id="4865407"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><span class="op" id="4865411">,</span>&nbsp;<span class="ident" id="4865413"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><span class="op" id="4865417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865421"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865422">.</span><span class="ident" id="4865423">palette</span>&nbsp;<span class="op" id="4865431">=</span>&nbsp;<span class="builtinfunc" id="4865433">make</span><span class="op" id="4865437">(</span><span class="ident" id="4865438"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4865443">.</span><span class="ident" id="4865444">Palette</span><span class="op" id="4865451">,</span>&nbsp;<span class="num" id="4865453">256</span><span class="op" id="4865456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865460">for</span>&nbsp;<span class="ident" id="4865464">i</span>&nbsp;<span class="op" id="4865466">:=</span>&nbsp;<span class="num" id="4865469">0</span><span class="op" id="4865470">;</span>&nbsp;<span class="ident" id="4865472"><a href="/image/png/reader.go.html#4865464">i</a></span>&nbsp;<span class="op" id="4865474">&lt;</span>&nbsp;<span class="ident" id="4865476"><a href="/image/png/reader.go.html#4865108">np</a></span><span class="op" id="4865478">;</span>&nbsp;<span class="ident" id="4865480"><a href="/image/png/reader.go.html#4865464">i</a></span><span class="op" id="4865481">++</span>&nbsp;<span class="op" id="4865484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865489"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865490">.</span><span class="ident" id="4865491">palette</span><span class="op" id="4865498">[</span><span class="ident" id="4865499"><a href="/image/png/reader.go.html#4865464">i</a></span><span class="op" id="4865500">]</span>&nbsp;<span class="op" id="4865502">=</span>&nbsp;<span class="ident" id="4865504"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4865509">.</span><span class="ident" id="4865510">RGBA</span><span class="op" id="4865514">{</span><span class="ident" id="4865515"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865516">.</span><span class="ident" id="4865517">tmp</span><span class="op" id="4865520">[</span><span class="num" id="4865521">3</span><span class="op" id="4865522">*</span><span class="ident" id="4865523"><a href="/image/png/reader.go.html#4865464">i</a></span><span class="op" id="4865524">+</span><span class="num" id="4865525">0</span><span class="op" id="4865526">]</span><span class="op" id="4865527">,</span>&nbsp;<span class="ident" id="4865529"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865530">.</span><span class="ident" id="4865531">tmp</span><span class="op" id="4865534">[</span><span class="num" id="4865535">3</span><span class="op" id="4865536">*</span><span class="ident" id="4865537"><a href="/image/png/reader.go.html#4865464">i</a></span><span class="op" id="4865538">+</span><span class="num" id="4865539">1</span><span class="op" id="4865540">]</span><span class="op" id="4865541">,</span>&nbsp;<span class="ident" id="4865543"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865544">.</span><span class="ident" id="4865545">tmp</span><span class="op" id="4865548">[</span><span class="num" id="4865549">3</span><span class="op" id="4865550">*</span><span class="ident" id="4865551"><a href="/image/png/reader.go.html#4865464">i</a></span><span class="op" id="4865552">+</span><span class="num" id="4865553">2</span><span class="op" id="4865554">]</span><span class="op" id="4865555">,</span>&nbsp;<span class="num" id="4865557">0xff</span><span class="op" id="4865561">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4865565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4865569">for</span>&nbsp;<span class="ident" id="4865573">i</span>&nbsp;<span class="op" id="4865575">:=</span>&nbsp;<span class="ident" id="4865578"><a href="/image/png/reader.go.html#4865108">np</a></span><span class="op" id="4865580">;</span>&nbsp;<span class="ident" id="4865582"><a href="/image/png/reader.go.html#4865573">i</a></span>&nbsp;<span class="op" id="4865584">&lt;</span>&nbsp;<span class="num" id="4865586">256</span><span class="op" id="4865589">;</span>&nbsp;<span class="ident" id="4865591"><a href="/image/png/reader.go.html#4865573">i</a></span><span class="op" id="4865592">++</span>&nbsp;<span class="op" id="4865595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865600">//&nbsp;Initialize&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;palette&nbsp;to&nbsp;opaque&nbsp;black.&nbsp;The&nbsp;spec&nbsp;(section</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865676">//&nbsp;11.2.3)&nbsp;says&nbsp;that&nbsp;&#34;any&nbsp;out-of-range&nbsp;pixel&nbsp;value&nbsp;found&nbsp;in&nbsp;the&nbsp;image&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865754">//&nbsp;is&nbsp;an&nbsp;error&#34;,&nbsp;but&nbsp;some&nbsp;real-world&nbsp;PNG&nbsp;files&nbsp;have&nbsp;out-of-range&nbsp;pixel</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865828">//&nbsp;values.&nbsp;We&nbsp;fall&nbsp;back&nbsp;to&nbsp;opaque&nbsp;black,&nbsp;the&nbsp;same&nbsp;as&nbsp;libpng&nbsp;1.5.13;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4865899">//&nbsp;ImageMagick&nbsp;6.5.7&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865941"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865942">.</span><span class="ident" id="4865943">palette</span><span class="op" id="4865950">[</span><span class="ident" id="4865951"><a href="/image/png/reader.go.html#4865573">i</a></span><span class="op" id="4865952">]</span>&nbsp;<span class="op" id="4865954">=</span>&nbsp;<span class="ident" id="4865956"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4865961">.</span><span class="ident" id="4865962">RGBA</span><span class="op" id="4865966">{</span><span class="num" id="4865967">0x00</span><span class="op" id="4865971">,</span>&nbsp;<span class="num" id="4865973">0x00</span><span class="op" id="4865977">,</span>&nbsp;<span class="num" id="4865979">0x00</span><span class="op" id="4865983">,</span>&nbsp;<span class="num" id="4865985">0xff</span><span class="op" id="4865989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4865993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4865997"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4865998">.</span><span class="ident" id="4865999">palette</span>&nbsp;<span class="op" id="4866007">=</span>&nbsp;<span class="ident" id="4866009"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4866010">.</span><span class="ident" id="4866011">palette</span><span class="op" id="4866018">[</span><span class="op" id="4866019">:</span><span class="ident" id="4866020"><a href="/image/png/reader.go.html#4865108">np</a></span><span class="op" id="4866022">]</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866025">case</span>&nbsp;<span class="ident" id="4866030"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><span class="op" id="4866035">,</span>&nbsp;<span class="ident" id="4866037"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><span class="op" id="4866043">,</span>&nbsp;<span class="ident" id="4866045"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><span class="op" id="4866051">,</span>&nbsp;<span class="ident" id="4866053"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><span class="op" id="4866060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4866064">//&nbsp;As&nbsp;per&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;a&nbsp;PLTE&nbsp;chunk&nbsp;is&nbsp;optional&nbsp;(and&nbsp;for&nbsp;practical&nbsp;purposes,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4866144">//&nbsp;ignorable)&nbsp;for&nbsp;the&nbsp;ctTrueColor&nbsp;and&nbsp;ctTrueColorAlpha&nbsp;color&nbsp;types&nbsp;(section&nbsp;4.1.2).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866229">default</span><span class="op" id="4866236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866240">return</span>&nbsp;<span class="ident" id="4866247"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4866258">(</span><span class="string" id="4866259">&#34;PLTE,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="4866286">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4866289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866292">return</span>&nbsp;<span class="ident" id="4866299"><a href="/image/png/reader.go.html#4865062">d</a></span><span class="op" id="4866300">.</span><span class="ident" id="4866301">verifyChecksum</span><span class="op" id="4866315">(</span><span class="op" id="4866316">)</span><br>
<span class="lineno"></span><span class="op" id="4866318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4866321">func</span>&nbsp;<span class="op" id="4866326">(</span><span class="ident" id="4866327">d</span>&nbsp;<span class="op" id="4866329">*</span><span class="ident" id="4866330"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4866337">)</span>&nbsp;<span class="ident" id="4866339">parsetRNS</span><span class="op" id="4866348">(</span><span class="ident" id="4866349">length</span>&nbsp;<span class="builtintype" id="4866356">uint32</span><span class="op" id="4866362">)</span>&nbsp;<span class="builtintype" id="4866364">error</span>&nbsp;<span class="op" id="4866370">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866373">if</span>&nbsp;<span class="ident" id="4866376"><a href="/image/png/reader.go.html#4866349">length</a></span>&nbsp;<span class="op" id="4866383">&gt;</span>&nbsp;<span class="num" id="4866385">256</span>&nbsp;<span class="op" id="4866389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866393">return</span>&nbsp;<span class="ident" id="4866400"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4866411">(</span><span class="string" id="4866412">&#34;bad&nbsp;tRNS&nbsp;length&#34;</span><span class="op" id="4866429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4866432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4866435">n</span><span class="op" id="4866436">,</span>&nbsp;<span class="ident" id="4866438">err</span>&nbsp;<span class="op" id="4866442">:=</span>&nbsp;<span class="ident" id="4866445"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4866447">.</span><span class="ident" id="4866448">ReadFull</span><span class="op" id="4866456">(</span><span class="ident" id="4866457"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866458">.</span><span class="ident" id="4866459">r</span><span class="op" id="4866460">,</span>&nbsp;<span class="ident" id="4866462"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866463">.</span><span class="ident" id="4866464">tmp</span><span class="op" id="4866467">[</span><span class="op" id="4866468">:</span><span class="ident" id="4866469"><a href="/image/png/reader.go.html#4866349">length</a></span><span class="op" id="4866475">]</span><span class="op" id="4866476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866479">if</span>&nbsp;<span class="ident" id="4866482"><a href="/image/png/reader.go.html#4866438">err</a></span>&nbsp;<span class="op" id="4866486">!=</span>&nbsp;<span class="ident" id="4866489">nil</span>&nbsp;<span class="op" id="4866493">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866497">return</span>&nbsp;<span class="ident" id="4866504"><a href="/image/png/reader.go.html#4866438">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4866509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4866512"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866513">.</span><span class="ident" id="4866514">crc</span><span class="op" id="4866517">.</span><span class="ident" id="4866518">Write</span><span class="op" id="4866523">(</span><span class="ident" id="4866524"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866525">.</span><span class="ident" id="4866526">tmp</span><span class="op" id="4866529">[</span><span class="op" id="4866530">:</span><span class="ident" id="4866531"><a href="/image/png/reader.go.html#4866435">n</a></span><span class="op" id="4866532">]</span><span class="op" id="4866533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866536">switch</span>&nbsp;<span class="ident" id="4866543"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866544">.</span><span class="ident" id="4866545">cb</span>&nbsp;<span class="op" id="4866548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866551">case</span>&nbsp;<span class="ident" id="4866556"><a href="/image/png/reader.go.html#4861422">cbG8</a></span><span class="op" id="4866560">,</span>&nbsp;<span class="ident" id="4866562"><a href="/image/png/reader.go.html#4861474">cbG16</a></span><span class="op" id="4866567">:</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866571">return</span>&nbsp;<span class="ident" id="4866578"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4866594">(</span><span class="string" id="4866595">&#34;grayscale&nbsp;transparency&#34;</span><span class="op" id="4866619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866622">case</span>&nbsp;<span class="ident" id="4866627"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><span class="op" id="4866632">,</span>&nbsp;<span class="ident" id="4866634"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><span class="op" id="4866640">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866644">return</span>&nbsp;<span class="ident" id="4866651"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4866667">(</span><span class="string" id="4866668">&#34;truecolor&nbsp;transparency&#34;</span><span class="op" id="4866692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866695">case</span>&nbsp;<span class="ident" id="4866700"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><span class="op" id="4866704">,</span>&nbsp;<span class="ident" id="4866706"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><span class="op" id="4866710">,</span>&nbsp;<span class="ident" id="4866712"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><span class="op" id="4866716">,</span>&nbsp;<span class="ident" id="4866718"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><span class="op" id="4866722">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866726">if</span>&nbsp;<span class="builtinfunc" id="4866729">len</span><span class="op" id="4866732">(</span><span class="ident" id="4866733"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866734">.</span><span class="ident" id="4866735">palette</span><span class="op" id="4866742">)</span>&nbsp;<span class="op" id="4866744">&lt;</span>&nbsp;<span class="ident" id="4866746"><a href="/image/png/reader.go.html#4866435">n</a></span>&nbsp;<span class="op" id="4866748">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4866753"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866754">.</span><span class="ident" id="4866755">palette</span>&nbsp;<span class="op" id="4866763">=</span>&nbsp;<span class="ident" id="4866765"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866766">.</span><span class="ident" id="4866767">palette</span><span class="op" id="4866774">[</span><span class="op" id="4866775">:</span><span class="ident" id="4866776"><a href="/image/png/reader.go.html#4866435">n</a></span><span class="op" id="4866777">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4866781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866785">for</span>&nbsp;<span class="ident" id="4866789">i</span>&nbsp;<span class="op" id="4866791">:=</span>&nbsp;<span class="num" id="4866794">0</span><span class="op" id="4866795">;</span>&nbsp;<span class="ident" id="4866797"><a href="/image/png/reader.go.html#4866789">i</a></span>&nbsp;<span class="op" id="4866799">&lt;</span>&nbsp;<span class="ident" id="4866801"><a href="/image/png/reader.go.html#4866435">n</a></span><span class="op" id="4866802">;</span>&nbsp;<span class="ident" id="4866804"><a href="/image/png/reader.go.html#4866789">i</a></span><span class="op" id="4866805">++</span>&nbsp;<span class="op" id="4866808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4866813">rgba</span>&nbsp;<span class="op" id="4866818">:=</span>&nbsp;<span class="ident" id="4866821"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866822">.</span><span class="ident" id="4866823">palette</span><span class="op" id="4866830">[</span><span class="ident" id="4866831"><a href="/image/png/reader.go.html#4866789">i</a></span><span class="op" id="4866832">]</span><span class="op" id="4866833">.</span><span class="op" id="4866834">(</span><span class="ident" id="4866835"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4866840">.</span><span class="ident" id="4866841">RGBA</span><span class="op" id="4866845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4866850"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866851">.</span><span class="ident" id="4866852">palette</span><span class="op" id="4866859">[</span><span class="ident" id="4866860"><a href="/image/png/reader.go.html#4866789">i</a></span><span class="op" id="4866861">]</span>&nbsp;<span class="op" id="4866863">=</span>&nbsp;<span class="ident" id="4866865"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4866870">.</span><span class="ident" id="4866871">NRGBA</span><span class="op" id="4866876">{</span><span class="ident" id="4866877"><a href="/image/png/reader.go.html#4866813">rgba</a></span><span class="op" id="4866881">.</span><span class="ident" id="4866882">R</span><span class="op" id="4866883">,</span>&nbsp;<span class="ident" id="4866885"><a href="/image/png/reader.go.html#4866813">rgba</a></span><span class="op" id="4866889">.</span><span class="ident" id="4866890">G</span><span class="op" id="4866891">,</span>&nbsp;<span class="ident" id="4866893"><a href="/image/png/reader.go.html#4866813">rgba</a></span><span class="op" id="4866897">.</span><span class="ident" id="4866898">B</span><span class="op" id="4866899">,</span>&nbsp;<span class="ident" id="4866901"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4866902">.</span><span class="ident" id="4866903">tmp</span><span class="op" id="4866906">[</span><span class="ident" id="4866907"><a href="/image/png/reader.go.html#4866789">i</a></span><span class="op" id="4866908">]</span><span class="op" id="4866909">}</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4866913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866916">case</span>&nbsp;<span class="ident" id="4866921"><a href="/image/png/reader.go.html#4861428">cbGA8</a></span><span class="op" id="4866926">,</span>&nbsp;<span class="ident" id="4866928"><a href="/image/png/reader.go.html#4861481">cbGA16</a></span><span class="op" id="4866934">,</span>&nbsp;<span class="ident" id="4866936"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><span class="op" id="4866942">,</span>&nbsp;<span class="ident" id="4866944"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><span class="op" id="4866951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4866955">return</span>&nbsp;<span class="ident" id="4866962"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4866973">(</span><span class="string" id="4866974">&#34;tRNS,&nbsp;color&nbsp;type&nbsp;mismatch&#34;</span><span class="op" id="4867001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4867004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867007">return</span>&nbsp;<span class="ident" id="4867014"><a href="/image/png/reader.go.html#4866327">d</a></span><span class="op" id="4867015">.</span><span class="ident" id="4867016">verifyChecksum</span><span class="op" id="4867030">(</span><span class="op" id="4867031">)</span><br>
<span class="lineno">275</span><span class="op" id="4867033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4867036">//&nbsp;Read&nbsp;presents&nbsp;one&nbsp;or&nbsp;more&nbsp;IDAT&nbsp;chunks&nbsp;as&nbsp;one&nbsp;continuous&nbsp;stream&nbsp;(minus&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4867113">//&nbsp;intermediate&nbsp;chunk&nbsp;headers&nbsp;and&nbsp;footers).&nbsp;If&nbsp;the&nbsp;PNG&nbsp;data&nbsp;looked&nbsp;like:</span><br>
<span class="lineno"></span><span class="comment" id="4867186">//&nbsp;&nbsp;&nbsp;...&nbsp;len0&nbsp;IDAT&nbsp;xxx&nbsp;crc0&nbsp;len1&nbsp;IDAT&nbsp;yy&nbsp;crc1&nbsp;len2&nbsp;IEND&nbsp;crc2</span><br>
<span class="lineno">280</span><span class="comment" id="4867247">//&nbsp;then&nbsp;this&nbsp;reader&nbsp;presents&nbsp;xxxyy.&nbsp;For&nbsp;well-formed&nbsp;PNG&nbsp;data,&nbsp;the&nbsp;decoder&nbsp;state</span><br>
<span class="lineno"></span><span class="comment" id="4867327">//&nbsp;immediately&nbsp;before&nbsp;the&nbsp;first&nbsp;Read&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4867407">//&nbsp;first&nbsp;IDAT&nbsp;and&nbsp;xxx,&nbsp;and&nbsp;the&nbsp;decoder&nbsp;state&nbsp;immediately&nbsp;after&nbsp;the&nbsp;last&nbsp;Read</span><br>
<span class="lineno"></span><span class="comment" id="4867484">//&nbsp;call&nbsp;is&nbsp;that&nbsp;d.r&nbsp;is&nbsp;positioned&nbsp;between&nbsp;yy&nbsp;and&nbsp;crc1.</span><br>
<span class="lineno"></span><span class="keyword" id="4867539">func</span>&nbsp;<span class="op" id="4867544">(</span><span class="ident" id="4867545">d</span>&nbsp;<span class="op" id="4867547">*</span><span class="ident" id="4867548"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4867555">)</span>&nbsp;<span class="ident" id="4867557">Read</span><span class="op" id="4867561">(</span><span class="ident" id="4867562">p</span>&nbsp;<span class="op" id="4867564">[</span><span class="op" id="4867565">]</span><span class="builtintype" id="4867566">byte</span><span class="op" id="4867570">)</span>&nbsp;<span class="op" id="4867572">(</span><span class="builtintype" id="4867573">int</span><span class="op" id="4867576">,</span>&nbsp;<span class="builtintype" id="4867578">error</span><span class="op" id="4867583">)</span>&nbsp;<span class="op" id="4867585">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867588">if</span>&nbsp;<span class="builtinfunc" id="4867591">len</span><span class="op" id="4867594">(</span><span class="ident" id="4867595"><a href="/image/png/reader.go.html#4867562">p</a></span><span class="op" id="4867596">)</span>&nbsp;<span class="op" id="4867598">==</span>&nbsp;<span class="num" id="4867601">0</span>&nbsp;<span class="op" id="4867603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867607">return</span>&nbsp;<span class="num" id="4867614">0</span><span class="op" id="4867615">,</span>&nbsp;<span class="ident" id="4867617">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4867622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867625">for</span>&nbsp;<span class="ident" id="4867629"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4867630">.</span><span class="ident" id="4867631">idatLength</span>&nbsp;<span class="op" id="4867642">==</span>&nbsp;<span class="num" id="4867645">0</span>&nbsp;<span class="op" id="4867647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4867651">//&nbsp;We&nbsp;have&nbsp;exhausted&nbsp;an&nbsp;IDAT&nbsp;chunk.&nbsp;Verify&nbsp;the&nbsp;checksum&nbsp;of&nbsp;that&nbsp;chunk.</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867724">if</span>&nbsp;<span class="ident" id="4867727">err</span>&nbsp;<span class="op" id="4867731">:=</span>&nbsp;<span class="ident" id="4867734"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4867735">.</span><span class="ident" id="4867736">verifyChecksum</span><span class="op" id="4867750">(</span><span class="op" id="4867751">)</span><span class="op" id="4867752">;</span>&nbsp;<span class="ident" id="4867754"><a href="/image/png/reader.go.html#4867727">err</a></span>&nbsp;<span class="op" id="4867758">!=</span>&nbsp;<span class="ident" id="4867761">nil</span>&nbsp;<span class="op" id="4867765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867770">return</span>&nbsp;<span class="num" id="4867777">0</span><span class="op" id="4867778">,</span>&nbsp;<span class="ident" id="4867780"><a href="/image/png/reader.go.html#4867727">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4867786">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4867790">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type&nbsp;of&nbsp;the&nbsp;next&nbsp;chunk,&nbsp;and&nbsp;check&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4867860">//&nbsp;it&nbsp;is&nbsp;an&nbsp;IDAT&nbsp;chunk.</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867886">if</span>&nbsp;<span class="ident" id="4867889">_</span><span class="op" id="4867890">,</span>&nbsp;<span class="ident" id="4867892">err</span>&nbsp;<span class="op" id="4867896">:=</span>&nbsp;<span class="ident" id="4867899"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4867901">.</span><span class="ident" id="4867902">ReadFull</span><span class="op" id="4867910">(</span><span class="ident" id="4867911"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4867912">.</span><span class="ident" id="4867913">r</span><span class="op" id="4867914">,</span>&nbsp;<span class="ident" id="4867916"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4867917">.</span><span class="ident" id="4867918">tmp</span><span class="op" id="4867921">[</span><span class="op" id="4867922">:</span><span class="num" id="4867923">8</span><span class="op" id="4867924">]</span><span class="op" id="4867925">)</span><span class="op" id="4867926">;</span>&nbsp;<span class="ident" id="4867928"><a href="/image/png/reader.go.html#4867892">err</a></span>&nbsp;<span class="op" id="4867932">!=</span>&nbsp;<span class="ident" id="4867935">nil</span>&nbsp;<span class="op" id="4867939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4867944">return</span>&nbsp;<span class="num" id="4867951">0</span><span class="op" id="4867952">,</span>&nbsp;<span class="ident" id="4867954"><a href="/image/png/reader.go.html#4867892">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4867960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4867964"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4867965">.</span><span class="ident" id="4867966">idatLength</span>&nbsp;<span class="op" id="4867977">=</span>&nbsp;<span class="ident" id="4867979"><a href="/image/png/reader.go.html#4861086">binary</a></span><span class="op" id="4867985">.</span><span class="ident" id="4867986">BigEndian</span><span class="op" id="4867995">.</span><span class="ident" id="4867996">Uint32</span><span class="op" id="4868002">(</span><span class="ident" id="4868003"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868004">.</span><span class="ident" id="4868005">tmp</span><span class="op" id="4868008">[</span><span class="op" id="4868009">:</span><span class="num" id="4868010">4</span><span class="op" id="4868011">]</span><span class="op" id="4868012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868016">if</span>&nbsp;<span class="builtintype" id="4868019">string</span><span class="op" id="4868025">(</span><span class="ident" id="4868026"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868027">.</span><span class="ident" id="4868028">tmp</span><span class="op" id="4868031">[</span><span class="num" id="4868032">4</span><span class="op" id="4868033">:</span><span class="num" id="4868034">8</span><span class="op" id="4868035">]</span><span class="op" id="4868036">)</span>&nbsp;<span class="op" id="4868038">!=</span>&nbsp;<span class="string" id="4868041">&#34;IDAT&#34;</span>&nbsp;<span class="op" id="4868048">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868053">return</span>&nbsp;<span class="num" id="4868060">0</span><span class="op" id="4868061">,</span>&nbsp;<span class="ident" id="4868063"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4868074">(</span><span class="string" id="4868075">&#34;not&nbsp;enough&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="4868098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868102">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868106"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868107">.</span><span class="ident" id="4868108">crc</span><span class="op" id="4868111">.</span><span class="ident" id="4868112">Reset</span><span class="op" id="4868117">(</span><span class="op" id="4868118">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868122"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868123">.</span><span class="ident" id="4868124">crc</span><span class="op" id="4868127">.</span><span class="ident" id="4868128">Write</span><span class="op" id="4868133">(</span><span class="ident" id="4868134"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868135">.</span><span class="ident" id="4868136">tmp</span><span class="op" id="4868139">[</span><span class="num" id="4868140">4</span><span class="op" id="4868141">:</span><span class="num" id="4868142">8</span><span class="op" id="4868143">]</span><span class="op" id="4868144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868147">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868150">if</span>&nbsp;<span class="builtintype" id="4868153">int</span><span class="op" id="4868156">(</span><span class="ident" id="4868157"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868158">.</span><span class="ident" id="4868159">idatLength</span><span class="op" id="4868169">)</span>&nbsp;<span class="op" id="4868171">&lt;</span>&nbsp;<span class="num" id="4868173">0</span>&nbsp;<span class="op" id="4868175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868179">return</span>&nbsp;<span class="num" id="4868186">0</span><span class="op" id="4868187">,</span>&nbsp;<span class="ident" id="4868189"><a href="/image/png/reader.go.html#4863140">UnsupportedError</a></span><span class="op" id="4868205">(</span><span class="string" id="4868206">&#34;IDAT&nbsp;chunk&nbsp;length&nbsp;overflow&#34;</span><span class="op" id="4868234">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868240">n</span><span class="op" id="4868241">,</span>&nbsp;<span class="ident" id="4868243">err</span>&nbsp;<span class="op" id="4868247">:=</span>&nbsp;<span class="ident" id="4868250"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868251">.</span><span class="ident" id="4868252">r</span><span class="op" id="4868253">.</span><span class="ident" id="4868254">Read</span><span class="op" id="4868258">(</span><span class="ident" id="4868259"><a href="/image/png/reader.go.html#4867562">p</a></span><span class="op" id="4868260">[</span><span class="op" id="4868261">:</span><span class="ident" id="4868262"><a href="/image/png/reader.go.html#4863264">min</a></span><span class="op" id="4868265">(</span><span class="builtinfunc" id="4868266">len</span><span class="op" id="4868269">(</span><span class="ident" id="4868270"><a href="/image/png/reader.go.html#4867562">p</a></span><span class="op" id="4868271">)</span><span class="op" id="4868272">,</span>&nbsp;<span class="builtintype" id="4868274">int</span><span class="op" id="4868277">(</span><span class="ident" id="4868278"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868279">.</span><span class="ident" id="4868280">idatLength</span><span class="op" id="4868290">)</span><span class="op" id="4868291">)</span><span class="op" id="4868292">]</span><span class="op" id="4868293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868296"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868297">.</span><span class="ident" id="4868298">crc</span><span class="op" id="4868301">.</span><span class="ident" id="4868302">Write</span><span class="op" id="4868307">(</span><span class="ident" id="4868308"><a href="/image/png/reader.go.html#4867562">p</a></span><span class="op" id="4868309">[</span><span class="op" id="4868310">:</span><span class="ident" id="4868311"><a href="/image/png/reader.go.html#4868240">n</a></span><span class="op" id="4868312">]</span><span class="op" id="4868313">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868316"><a href="/image/png/reader.go.html#4867545">d</a></span><span class="op" id="4868317">.</span><span class="ident" id="4868318">idatLength</span>&nbsp;<span class="op" id="4868329">-=</span>&nbsp;<span class="builtintype" id="4868332">uint32</span><span class="op" id="4868338">(</span><span class="ident" id="4868339"><a href="/image/png/reader.go.html#4868240">n</a></span><span class="op" id="4868340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868343">return</span>&nbsp;<span class="ident" id="4868350"><a href="/image/png/reader.go.html#4868240">n</a></span><span class="op" id="4868351">,</span>&nbsp;<span class="ident" id="4868353"><a href="/image/png/reader.go.html#4868243">err</a></span><br>
<span class="lineno"></span><span class="op" id="4868357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4868360">//&nbsp;decode&nbsp;decodes&nbsp;the&nbsp;IDAT&nbsp;data&nbsp;into&nbsp;an&nbsp;image.</span><br>
<span class="lineno">315</span><span class="keyword" id="4868407">func</span>&nbsp;<span class="op" id="4868412">(</span><span class="ident" id="4868413">d</span>&nbsp;<span class="op" id="4868415">*</span><span class="ident" id="4868416"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4868423">)</span>&nbsp;<span class="ident" id="4868425">decode</span><span class="op" id="4868431">(</span><span class="op" id="4868432">)</span>&nbsp;<span class="op" id="4868434">(</span><span class="ident" id="4868435"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4868440">.</span><span class="ident" id="4868441">Image</span><span class="op" id="4868446">,</span>&nbsp;<span class="builtintype" id="4868448">error</span><span class="op" id="4868453">)</span>&nbsp;<span class="op" id="4868455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868458">r</span><span class="op" id="4868459">,</span>&nbsp;<span class="ident" id="4868461">err</span>&nbsp;<span class="op" id="4868465">:=</span>&nbsp;<span class="ident" id="4868468"><a href="/image/png/reader.go.html#4861069">zlib</a></span><span class="op" id="4868472">.</span><span class="ident" id="4868473">NewReader</span><span class="op" id="4868482">(</span><span class="ident" id="4868483"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868487">if</span>&nbsp;<span class="ident" id="4868490"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4868494">!=</span>&nbsp;<span class="ident" id="4868497">nil</span>&nbsp;<span class="op" id="4868501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868505">return</span>&nbsp;<span class="ident" id="4868512">nil</span><span class="op" id="4868515">,</span>&nbsp;<span class="ident" id="4868517"><a href="/image/png/reader.go.html#4868461">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868522">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868525">defer</span>&nbsp;<span class="ident" id="4868531"><a href="/image/png/reader.go.html#4868458">r</a></span><span class="op" id="4868532">.</span><span class="ident" id="4868533">Close</span><span class="op" id="4868538">(</span><span class="op" id="4868539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868542">var</span>&nbsp;<span class="ident" id="4868546">img</span>&nbsp;<span class="ident" id="4868550"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4868555">.</span><span class="ident" id="4868556">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868563">if</span>&nbsp;<span class="ident" id="4868566"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868567">.</span><span class="ident" id="4868568">interlace</span>&nbsp;<span class="op" id="4868578">==</span>&nbsp;<span class="ident" id="4868581"><a href="/image/png/reader.go.html#4861674">itNone</a></span>&nbsp;<span class="op" id="4868588">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868592"><a href="/image/png/reader.go.html#4868546">img</a></span><span class="op" id="4868595">,</span>&nbsp;<span class="ident" id="4868597"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4868601">=</span>&nbsp;<span class="ident" id="4868603"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868604">.</span><span class="ident" id="4868605">readImagePass</span><span class="op" id="4868618">(</span><span class="ident" id="4868619"><a href="/image/png/reader.go.html#4868458">r</a></span><span class="op" id="4868620">,</span>&nbsp;<span class="num" id="4868622">0</span><span class="op" id="4868623">,</span>&nbsp;<span class="builtintype" id="4868625">false</span><span class="op" id="4868630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868633">}</span>&nbsp;<span class="keyword" id="4868635">else</span>&nbsp;<span class="keyword" id="4868640">if</span>&nbsp;<span class="ident" id="4868643"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868644">.</span><span class="ident" id="4868645">interlace</span>&nbsp;<span class="op" id="4868655">==</span>&nbsp;<span class="ident" id="4868658"><a href="/image/png/reader.go.html#4861687">itAdam7</a></span>&nbsp;<span class="op" id="4868666">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4868670">//&nbsp;Allocate&nbsp;a&nbsp;blank&nbsp;image&nbsp;of&nbsp;the&nbsp;full&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868716"><a href="/image/png/reader.go.html#4868546">img</a></span><span class="op" id="4868719">,</span>&nbsp;<span class="ident" id="4868721"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4868725">=</span>&nbsp;<span class="ident" id="4868727"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868728">.</span><span class="ident" id="4868729">readImagePass</span><span class="op" id="4868742">(</span><span class="ident" id="4868743">nil</span><span class="op" id="4868746">,</span>&nbsp;<span class="num" id="4868748">0</span><span class="op" id="4868749">,</span>&nbsp;<span class="builtintype" id="4868751">true</span><span class="op" id="4868755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868759">for</span>&nbsp;<span class="ident" id="4868763">pass</span>&nbsp;<span class="op" id="4868768">:=</span>&nbsp;<span class="num" id="4868771">0</span><span class="op" id="4868772">;</span>&nbsp;<span class="ident" id="4868774"><a href="/image/png/reader.go.html#4868763">pass</a></span>&nbsp;<span class="op" id="4868779">&lt;</span>&nbsp;<span class="num" id="4868781">7</span><span class="op" id="4868782">;</span>&nbsp;<span class="ident" id="4868784"><a href="/image/png/reader.go.html#4868763">pass</a></span><span class="op" id="4868788">++</span>&nbsp;<span class="op" id="4868791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868796">imagePass</span><span class="op" id="4868805">,</span>&nbsp;<span class="ident" id="4868807">err</span>&nbsp;<span class="op" id="4868811">:=</span>&nbsp;<span class="ident" id="4868814"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868815">.</span><span class="ident" id="4868816">readImagePass</span><span class="op" id="4868829">(</span><span class="ident" id="4868830"><a href="/image/png/reader.go.html#4868458">r</a></span><span class="op" id="4868831">,</span>&nbsp;<span class="ident" id="4868833"><a href="/image/png/reader.go.html#4868763">pass</a></span><span class="op" id="4868837">,</span>&nbsp;<span class="builtintype" id="4868839">false</span><span class="op" id="4868844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868849">if</span>&nbsp;<span class="ident" id="4868852"><a href="/image/png/reader.go.html#4868807">err</a></span>&nbsp;<span class="op" id="4868856">!=</span>&nbsp;<span class="ident" id="4868859">nil</span>&nbsp;<span class="op" id="4868863">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868869">return</span>&nbsp;<span class="ident" id="4868876">nil</span><span class="op" id="4868879">,</span>&nbsp;<span class="ident" id="4868881"><a href="/image/png/reader.go.html#4868807">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868893"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4868894">.</span><span class="ident" id="4868895">mergePassInto</span><span class="op" id="4868908">(</span><span class="ident" id="4868909"><a href="/image/png/reader.go.html#4868546">img</a></span><span class="op" id="4868912">,</span>&nbsp;<span class="ident" id="4868914"><a href="/image/png/reader.go.html#4868796">imagePass</a></span><span class="op" id="4868923">,</span>&nbsp;<span class="ident" id="4868925"><a href="/image/png/reader.go.html#4868763">pass</a></span><span class="op" id="4868929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4868936">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4868940">//&nbsp;Check&nbsp;for&nbsp;EOF,&nbsp;to&nbsp;verify&nbsp;the&nbsp;zlib&nbsp;checksum.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4868988">n</span>&nbsp;<span class="op" id="4868990">:=</span>&nbsp;<span class="num" id="4868993">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4868996">for</span>&nbsp;<span class="ident" id="4869000">i</span>&nbsp;<span class="op" id="4869002">:=</span>&nbsp;<span class="num" id="4869005">0</span><span class="op" id="4869006">;</span>&nbsp;<span class="ident" id="4869008"><a href="/image/png/reader.go.html#4868988">n</a></span>&nbsp;<span class="op" id="4869010">==</span>&nbsp;<span class="num" id="4869013">0</span>&nbsp;<span class="op" id="4869015">&amp;&amp;</span>&nbsp;<span class="ident" id="4869018"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4869022">==</span>&nbsp;<span class="ident" id="4869025">nil</span><span class="op" id="4869028">;</span>&nbsp;<span class="ident" id="4869030"><a href="/image/png/reader.go.html#4869000">i</a></span><span class="op" id="4869031">++</span>&nbsp;<span class="op" id="4869034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869038">if</span>&nbsp;<span class="ident" id="4869041"><a href="/image/png/reader.go.html#4869000">i</a></span>&nbsp;<span class="op" id="4869043">==</span>&nbsp;<span class="num" id="4869046">100</span>&nbsp;<span class="op" id="4869050">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869055">return</span>&nbsp;<span class="ident" id="4869062">nil</span><span class="op" id="4869065">,</span>&nbsp;<span class="ident" id="4869067"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4869069">.</span><span class="ident" id="4869070">ErrNoProgress</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4869086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869090"><a href="/image/png/reader.go.html#4868988">n</a></span><span class="op" id="4869091">,</span>&nbsp;<span class="ident" id="4869093"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4869097">=</span>&nbsp;<span class="ident" id="4869099"><a href="/image/png/reader.go.html#4868458">r</a></span><span class="op" id="4869100">.</span><span class="ident" id="4869101">Read</span><span class="op" id="4869105">(</span><span class="ident" id="4869106"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4869107">.</span><span class="ident" id="4869108">tmp</span><span class="op" id="4869111">[</span><span class="op" id="4869112">:</span><span class="num" id="4869113">1</span><span class="op" id="4869114">]</span><span class="op" id="4869115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4869118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869121">if</span>&nbsp;<span class="ident" id="4869124"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4869128">!=</span>&nbsp;<span class="ident" id="4869131">nil</span>&nbsp;<span class="op" id="4869135">&amp;&amp;</span>&nbsp;<span class="ident" id="4869138"><a href="/image/png/reader.go.html#4868461">err</a></span>&nbsp;<span class="op" id="4869142">!=</span>&nbsp;<span class="ident" id="4869145"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4869147">.</span><span class="ident" id="4869148">EOF</span>&nbsp;<span class="op" id="4869152">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869156">return</span>&nbsp;<span class="ident" id="4869163">nil</span><span class="op" id="4869166">,</span>&nbsp;<span class="ident" id="4869168"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4869179">(</span><span class="ident" id="4869180"><a href="/image/png/reader.go.html#4868461">err</a></span><span class="op" id="4869183">.</span><span class="ident" id="4869184">Error</span><span class="op" id="4869189">(</span><span class="op" id="4869190">)</span><span class="op" id="4869191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4869194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869197">if</span>&nbsp;<span class="ident" id="4869200"><a href="/image/png/reader.go.html#4868988">n</a></span>&nbsp;<span class="op" id="4869202">!=</span>&nbsp;<span class="num" id="4869205">0</span>&nbsp;<span class="op" id="4869207">||</span>&nbsp;<span class="ident" id="4869210"><a href="/image/png/reader.go.html#4868413">d</a></span><span class="op" id="4869211">.</span><span class="ident" id="4869212">idatLength</span>&nbsp;<span class="op" id="4869223">!=</span>&nbsp;<span class="num" id="4869226">0</span>&nbsp;<span class="op" id="4869228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869232">return</span>&nbsp;<span class="ident" id="4869239">nil</span><span class="op" id="4869242">,</span>&nbsp;<span class="ident" id="4869244"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4869255">(</span><span class="string" id="4869256">&#34;too&nbsp;much&nbsp;pixel&nbsp;data&#34;</span><span class="op" id="4869277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4869280">}</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869284">return</span>&nbsp;<span class="ident" id="4869291"><a href="/image/png/reader.go.html#4868546">img</a></span><span class="op" id="4869294">,</span>&nbsp;<span class="ident" id="4869296">nil</span><br>
<span class="lineno"></span><span class="op" id="4869300">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4869303">//&nbsp;readImagePass&nbsp;reads&nbsp;a&nbsp;single&nbsp;image&nbsp;pass,&nbsp;sized&nbsp;according&nbsp;to&nbsp;the&nbsp;pass&nbsp;number.</span><br>
<span class="lineno">355</span><span class="keyword" id="4869383">func</span>&nbsp;<span class="op" id="4869388">(</span><span class="ident" id="4869389">d</span>&nbsp;<span class="op" id="4869391">*</span><span class="ident" id="4869392"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4869399">)</span>&nbsp;<span class="ident" id="4869401">readImagePass</span><span class="op" id="4869414">(</span><span class="ident" id="4869415">r</span>&nbsp;<span class="ident" id="4869417"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4869419">.</span><span class="ident" id="4869420">Reader</span><span class="op" id="4869426">,</span>&nbsp;<span class="ident" id="4869428">pass</span>&nbsp;<span class="builtintype" id="4869433">int</span><span class="op" id="4869436">,</span>&nbsp;<span class="ident" id="4869438">allocateOnly</span>&nbsp;<span class="builtintype" id="4869451">bool</span><span class="op" id="4869455">)</span>&nbsp;<span class="op" id="4869457">(</span><span class="ident" id="4869458"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869463">.</span><span class="ident" id="4869464">Image</span><span class="op" id="4869469">,</span>&nbsp;<span class="builtintype" id="4869471">error</span><span class="op" id="4869476">)</span>&nbsp;<span class="op" id="4869478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869481">var</span>&nbsp;<span class="ident" id="4869485">bitsPerPixel</span>&nbsp;<span class="builtintype" id="4869498">int</span>&nbsp;<span class="op" id="4869502">=</span>&nbsp;<span class="num" id="4869504">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869507">pixOffset</span>&nbsp;<span class="op" id="4869517">:=</span>&nbsp;<span class="num" id="4869520">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869523">var</span>&nbsp;<span class="op" id="4869527">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869531">gray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4869540">*</span><span class="ident" id="4869541"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869546">.</span><span class="ident" id="4869547">Gray</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869554">rgba</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4869563">*</span><span class="ident" id="4869564"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869569">.</span><span class="ident" id="4869570">RGBA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869577">paletted</span>&nbsp;<span class="op" id="4869586">*</span><span class="ident" id="4869587"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869592">.</span><span class="ident" id="4869593">Paletted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869604">nrgba</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4869613">*</span><span class="ident" id="4869614"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869619">.</span><span class="ident" id="4869620">NRGBA</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869628">gray16</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4869637">*</span><span class="ident" id="4869638"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869643">.</span><span class="ident" id="4869644">Gray16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869653">rgba64</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4869662">*</span><span class="ident" id="4869663"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869668">.</span><span class="ident" id="4869669">RGBA64</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869678">nrgba64</span>&nbsp;&nbsp;<span class="op" id="4869687">*</span><span class="ident" id="4869688"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869693">.</span><span class="ident" id="4869694">NRGBA64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869704">img</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4869713"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4869718">.</span><span class="ident" id="4869719">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4869726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869729">width</span><span class="op" id="4869734">,</span>&nbsp;<span class="ident" id="4869736">height</span>&nbsp;<span class="op" id="4869743">:=</span>&nbsp;<span class="ident" id="4869746"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4869747">.</span><span class="ident" id="4869748">width</span><span class="op" id="4869753">,</span>&nbsp;<span class="ident" id="4869755"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4869756">.</span><span class="ident" id="4869757">height</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4869765">if</span>&nbsp;<span class="ident" id="4869768"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4869769">.</span><span class="ident" id="4869770">interlace</span>&nbsp;<span class="op" id="4869780">==</span>&nbsp;<span class="ident" id="4869783"><a href="/image/png/reader.go.html#4861687">itAdam7</a></span>&nbsp;<span class="op" id="4869791">&amp;&amp;</span>&nbsp;<span class="op" id="4869794">!</span><span class="ident" id="4869795"><a href="/image/png/reader.go.html#4869438">allocateOnly</a></span>&nbsp;<span class="op" id="4869808">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869812">p</span>&nbsp;<span class="op" id="4869814">:=</span>&nbsp;<span class="ident" id="4869817"><a href="/image/png/reader.go.html#4861977">interlacing</a></span><span class="op" id="4869828">[</span><span class="ident" id="4869829"><a href="/image/png/reader.go.html#4869428">pass</a></span><span class="op" id="4869833">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4869837">//&nbsp;Add&nbsp;the&nbsp;multiplication&nbsp;factor&nbsp;and&nbsp;subtract&nbsp;one,&nbsp;effectively&nbsp;rounding&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869915"><a href="/image/png/reader.go.html#4869729">width</a></span>&nbsp;<span class="op" id="4869921">=</span>&nbsp;<span class="op" id="4869923">(</span><span class="ident" id="4869924"><a href="/image/png/reader.go.html#4869729">width</a></span>&nbsp;<span class="op" id="4869930">-</span>&nbsp;<span class="ident" id="4869932"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4869933">.</span><span class="ident" id="4869934">xOffset</span>&nbsp;<span class="op" id="4869942">+</span>&nbsp;<span class="ident" id="4869944"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4869945">.</span><span class="ident" id="4869946">xFactor</span>&nbsp;<span class="op" id="4869954">-</span>&nbsp;<span class="num" id="4869956">1</span><span class="op" id="4869957">)</span>&nbsp;<span class="op" id="4869959">/</span>&nbsp;<span class="ident" id="4869961"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4869962">.</span><span class="ident" id="4869963">xFactor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4869973"><a href="/image/png/reader.go.html#4869736">height</a></span>&nbsp;<span class="op" id="4869980">=</span>&nbsp;<span class="op" id="4869982">(</span><span class="ident" id="4869983"><a href="/image/png/reader.go.html#4869736">height</a></span>&nbsp;<span class="op" id="4869990">-</span>&nbsp;<span class="ident" id="4869992"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4869993">.</span><span class="ident" id="4869994">yOffset</span>&nbsp;<span class="op" id="4870002">+</span>&nbsp;<span class="ident" id="4870004"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4870005">.</span><span class="ident" id="4870006">yFactor</span>&nbsp;<span class="op" id="4870014">-</span>&nbsp;<span class="num" id="4870016">1</span><span class="op" id="4870017">)</span>&nbsp;<span class="op" id="4870019">/</span>&nbsp;<span class="ident" id="4870021"><a href="/image/png/reader.go.html#4869812">p</a></span><span class="op" id="4870022">.</span><span class="ident" id="4870023">yFactor</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4870032">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870035">switch</span>&nbsp;<span class="ident" id="4870042"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4870043">.</span><span class="ident" id="4870044">cb</span>&nbsp;<span class="op" id="4870047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870050">case</span>&nbsp;<span class="ident" id="4870055"><a href="/image/png/reader.go.html#4861404">cbG1</a></span><span class="op" id="4870059">,</span>&nbsp;<span class="ident" id="4870061"><a href="/image/png/reader.go.html#4861410">cbG2</a></span><span class="op" id="4870065">,</span>&nbsp;<span class="ident" id="4870067"><a href="/image/png/reader.go.html#4861416">cbG4</a></span><span class="op" id="4870071">,</span>&nbsp;<span class="ident" id="4870073"><a href="/image/png/reader.go.html#4861422">cbG8</a></span><span class="op" id="4870077">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870081"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870094">=</span>&nbsp;<span class="ident" id="4870096"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4870097">.</span><span class="ident" id="4870098">depth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870106"><a href="/image/png/reader.go.html#4869531">gray</a></span>&nbsp;<span class="op" id="4870111">=</span>&nbsp;<span class="ident" id="4870113"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870118">.</span><span class="ident" id="4870119">NewGray</span><span class="op" id="4870126">(</span><span class="ident" id="4870127"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870132">.</span><span class="ident" id="4870133">Rect</span><span class="op" id="4870137">(</span><span class="num" id="4870138">0</span><span class="op" id="4870139">,</span>&nbsp;<span class="num" id="4870141">0</span><span class="op" id="4870142">,</span>&nbsp;<span class="ident" id="4870144"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870149">,</span>&nbsp;<span class="ident" id="4870151"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870157">)</span><span class="op" id="4870158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870162"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870166">=</span>&nbsp;<span class="ident" id="4870168"><a href="/image/png/reader.go.html#4869531">gray</a></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870174">case</span>&nbsp;<span class="ident" id="4870179"><a href="/image/png/reader.go.html#4861428">cbGA8</a></span><span class="op" id="4870184">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870188"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870201">=</span>&nbsp;<span class="num" id="4870203">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870208"><a href="/image/png/reader.go.html#4869604">nrgba</a></span>&nbsp;<span class="op" id="4870214">=</span>&nbsp;<span class="ident" id="4870216"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870221">.</span><span class="ident" id="4870222">NewNRGBA</span><span class="op" id="4870230">(</span><span class="ident" id="4870231"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870236">.</span><span class="ident" id="4870237">Rect</span><span class="op" id="4870241">(</span><span class="num" id="4870242">0</span><span class="op" id="4870243">,</span>&nbsp;<span class="num" id="4870245">0</span><span class="op" id="4870246">,</span>&nbsp;<span class="ident" id="4870248"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870253">,</span>&nbsp;<span class="ident" id="4870255"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870261">)</span><span class="op" id="4870262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870266"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870270">=</span>&nbsp;<span class="ident" id="4870272"><a href="/image/png/reader.go.html#4869604">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870279">case</span>&nbsp;<span class="ident" id="4870284"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><span class="op" id="4870289">:</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870293"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870306">=</span>&nbsp;<span class="num" id="4870308">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870313"><a href="/image/png/reader.go.html#4869554">rgba</a></span>&nbsp;<span class="op" id="4870318">=</span>&nbsp;<span class="ident" id="4870320"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870325">.</span><span class="ident" id="4870326">NewRGBA</span><span class="op" id="4870333">(</span><span class="ident" id="4870334"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870339">.</span><span class="ident" id="4870340">Rect</span><span class="op" id="4870344">(</span><span class="num" id="4870345">0</span><span class="op" id="4870346">,</span>&nbsp;<span class="num" id="4870348">0</span><span class="op" id="4870349">,</span>&nbsp;<span class="ident" id="4870351"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870356">,</span>&nbsp;<span class="ident" id="4870358"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870364">)</span><span class="op" id="4870365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870369"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870373">=</span>&nbsp;<span class="ident" id="4870375"><a href="/image/png/reader.go.html#4869554">rgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870381">case</span>&nbsp;<span class="ident" id="4870386"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><span class="op" id="4870390">,</span>&nbsp;<span class="ident" id="4870392"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><span class="op" id="4870396">,</span>&nbsp;<span class="ident" id="4870398"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><span class="op" id="4870402">,</span>&nbsp;<span class="ident" id="4870404"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><span class="op" id="4870408">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870412"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870425">=</span>&nbsp;<span class="ident" id="4870427"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4870428">.</span><span class="ident" id="4870429">depth</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870437"><a href="/image/png/reader.go.html#4869577">paletted</a></span>&nbsp;<span class="op" id="4870446">=</span>&nbsp;<span class="ident" id="4870448"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870453">.</span><span class="ident" id="4870454">NewPaletted</span><span class="op" id="4870465">(</span><span class="ident" id="4870466"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870471">.</span><span class="ident" id="4870472">Rect</span><span class="op" id="4870476">(</span><span class="num" id="4870477">0</span><span class="op" id="4870478">,</span>&nbsp;<span class="num" id="4870480">0</span><span class="op" id="4870481">,</span>&nbsp;<span class="ident" id="4870483"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870488">,</span>&nbsp;<span class="ident" id="4870490"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870496">)</span><span class="op" id="4870497">,</span>&nbsp;<span class="ident" id="4870499"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4870500">.</span><span class="ident" id="4870501">palette</span><span class="op" id="4870508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870512"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870516">=</span>&nbsp;<span class="ident" id="4870518"><a href="/image/png/reader.go.html#4869577">paletted</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870528">case</span>&nbsp;<span class="ident" id="4870533"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><span class="op" id="4870539">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870543"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870556">=</span>&nbsp;<span class="num" id="4870558">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870563"><a href="/image/png/reader.go.html#4869604">nrgba</a></span>&nbsp;<span class="op" id="4870569">=</span>&nbsp;<span class="ident" id="4870571"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870576">.</span><span class="ident" id="4870577">NewNRGBA</span><span class="op" id="4870585">(</span><span class="ident" id="4870586"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870591">.</span><span class="ident" id="4870592">Rect</span><span class="op" id="4870596">(</span><span class="num" id="4870597">0</span><span class="op" id="4870598">,</span>&nbsp;<span class="num" id="4870600">0</span><span class="op" id="4870601">,</span>&nbsp;<span class="ident" id="4870603"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870608">,</span>&nbsp;<span class="ident" id="4870610"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870616">)</span><span class="op" id="4870617">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870621"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870625">=</span>&nbsp;<span class="ident" id="4870627"><a href="/image/png/reader.go.html#4869604">nrgba</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870634">case</span>&nbsp;<span class="ident" id="4870639"><a href="/image/png/reader.go.html#4861474">cbG16</a></span><span class="op" id="4870644">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870648"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870661">=</span>&nbsp;<span class="num" id="4870663">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870668"><a href="/image/png/reader.go.html#4869628">gray16</a></span>&nbsp;<span class="op" id="4870675">=</span>&nbsp;<span class="ident" id="4870677"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870682">.</span><span class="ident" id="4870683">NewGray16</span><span class="op" id="4870692">(</span><span class="ident" id="4870693"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870698">.</span><span class="ident" id="4870699">Rect</span><span class="op" id="4870703">(</span><span class="num" id="4870704">0</span><span class="op" id="4870705">,</span>&nbsp;<span class="num" id="4870707">0</span><span class="op" id="4870708">,</span>&nbsp;<span class="ident" id="4870710"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870715">,</span>&nbsp;<span class="ident" id="4870717"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870723">)</span><span class="op" id="4870724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870728"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870732">=</span>&nbsp;<span class="ident" id="4870734"><a href="/image/png/reader.go.html#4869628">gray16</a></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870742">case</span>&nbsp;<span class="ident" id="4870747"><a href="/image/png/reader.go.html#4861481">cbGA16</a></span><span class="op" id="4870753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870757"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870770">=</span>&nbsp;<span class="num" id="4870772">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870777"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span>&nbsp;<span class="op" id="4870785">=</span>&nbsp;<span class="ident" id="4870787"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870792">.</span><span class="ident" id="4870793">NewNRGBA64</span><span class="op" id="4870803">(</span><span class="ident" id="4870804"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870809">.</span><span class="ident" id="4870810">Rect</span><span class="op" id="4870814">(</span><span class="num" id="4870815">0</span><span class="op" id="4870816">,</span>&nbsp;<span class="num" id="4870818">0</span><span class="op" id="4870819">,</span>&nbsp;<span class="ident" id="4870821"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870826">,</span>&nbsp;<span class="ident" id="4870828"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870834">)</span><span class="op" id="4870835">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870839"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870843">=</span>&nbsp;<span class="ident" id="4870845"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870854">case</span>&nbsp;<span class="ident" id="4870859"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><span class="op" id="4870865">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870869"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870882">=</span>&nbsp;<span class="num" id="4870884">48</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870889"><a href="/image/png/reader.go.html#4869653">rgba64</a></span>&nbsp;<span class="op" id="4870896">=</span>&nbsp;<span class="ident" id="4870898"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870903">.</span><span class="ident" id="4870904">NewRGBA64</span><span class="op" id="4870913">(</span><span class="ident" id="4870914"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4870919">.</span><span class="ident" id="4870920">Rect</span><span class="op" id="4870924">(</span><span class="num" id="4870925">0</span><span class="op" id="4870926">,</span>&nbsp;<span class="num" id="4870928">0</span><span class="op" id="4870929">,</span>&nbsp;<span class="ident" id="4870931"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4870936">,</span>&nbsp;<span class="ident" id="4870938"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4870944">)</span><span class="op" id="4870945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870949"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4870953">=</span>&nbsp;<span class="ident" id="4870955"><a href="/image/png/reader.go.html#4869653">rgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4870963">case</span>&nbsp;<span class="ident" id="4870968"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><span class="op" id="4870975">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870979"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4870992">=</span>&nbsp;<span class="num" id="4870994">64</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4870999"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span>&nbsp;<span class="op" id="4871007">=</span>&nbsp;<span class="ident" id="4871009"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4871014">.</span><span class="ident" id="4871015">NewNRGBA64</span><span class="op" id="4871025">(</span><span class="ident" id="4871026"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4871031">.</span><span class="ident" id="4871032">Rect</span><span class="op" id="4871036">(</span><span class="num" id="4871037">0</span><span class="op" id="4871038">,</span>&nbsp;<span class="num" id="4871040">0</span><span class="op" id="4871041">,</span>&nbsp;<span class="ident" id="4871043"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4871048">,</span>&nbsp;<span class="ident" id="4871050"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4871056">)</span><span class="op" id="4871057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871061"><a href="/image/png/reader.go.html#4869704">img</a></span>&nbsp;<span class="op" id="4871065">=</span>&nbsp;<span class="ident" id="4871067"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871079">if</span>&nbsp;<span class="ident" id="4871082"><a href="/image/png/reader.go.html#4869438">allocateOnly</a></span>&nbsp;<span class="op" id="4871095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871099">return</span>&nbsp;<span class="ident" id="4871106"><a href="/image/png/reader.go.html#4869704">img</a></span><span class="op" id="4871109">,</span>&nbsp;<span class="ident" id="4871111">nil</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871119">bytesPerPixel</span>&nbsp;<span class="op" id="4871133">:=</span>&nbsp;<span class="op" id="4871136">(</span><span class="ident" id="4871137"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span>&nbsp;<span class="op" id="4871150">+</span>&nbsp;<span class="num" id="4871152">7</span><span class="op" id="4871153">)</span>&nbsp;<span class="op" id="4871155">/</span>&nbsp;<span class="num" id="4871157">8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4871161">//&nbsp;The&nbsp;+1&nbsp;is&nbsp;for&nbsp;the&nbsp;per-row&nbsp;filter&nbsp;type,&nbsp;which&nbsp;is&nbsp;at&nbsp;cr[0].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871223">rowSize</span>&nbsp;<span class="op" id="4871231">:=</span>&nbsp;<span class="num" id="4871234">1</span>&nbsp;<span class="op" id="4871236">+</span>&nbsp;<span class="op" id="4871238">(</span><span class="ident" id="4871239"><a href="/image/png/reader.go.html#4869485">bitsPerPixel</a></span><span class="op" id="4871251">*</span><span class="ident" id="4871252"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4871257">+</span><span class="num" id="4871258">7</span><span class="op" id="4871259">)</span><span class="op" id="4871260">/</span><span class="num" id="4871261">8</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4871264">//&nbsp;cr&nbsp;and&nbsp;pr&nbsp;are&nbsp;the&nbsp;bytes&nbsp;for&nbsp;the&nbsp;current&nbsp;and&nbsp;previous&nbsp;row.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871326">cr</span>&nbsp;<span class="op" id="4871329">:=</span>&nbsp;<span class="builtinfunc" id="4871332">make</span><span class="op" id="4871336">(</span><span class="op" id="4871337">[</span><span class="op" id="4871338">]</span><span class="builtintype" id="4871339">uint8</span><span class="op" id="4871344">,</span>&nbsp;<span class="ident" id="4871346"><a href="/image/png/reader.go.html#4871223">rowSize</a></span><span class="op" id="4871353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871356">pr</span>&nbsp;<span class="op" id="4871359">:=</span>&nbsp;<span class="builtinfunc" id="4871362">make</span><span class="op" id="4871366">(</span><span class="op" id="4871367">[</span><span class="op" id="4871368">]</span><span class="builtintype" id="4871369">uint8</span><span class="op" id="4871374">,</span>&nbsp;<span class="ident" id="4871376"><a href="/image/png/reader.go.html#4871223">rowSize</a></span><span class="op" id="4871383">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871387">for</span>&nbsp;<span class="ident" id="4871391">y</span>&nbsp;<span class="op" id="4871393">:=</span>&nbsp;<span class="num" id="4871396">0</span><span class="op" id="4871397">;</span>&nbsp;<span class="ident" id="4871399"><a href="/image/png/reader.go.html#4871391">y</a></span>&nbsp;<span class="op" id="4871401">&lt;</span>&nbsp;<span class="ident" id="4871403"><a href="/image/png/reader.go.html#4869736">height</a></span><span class="op" id="4871409">;</span>&nbsp;<span class="ident" id="4871411"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4871412">++</span>&nbsp;<span class="op" id="4871415">{</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4871419">//&nbsp;Read&nbsp;the&nbsp;decompressed&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871453">_</span><span class="op" id="4871454">,</span>&nbsp;<span class="ident" id="4871456">err</span>&nbsp;<span class="op" id="4871460">:=</span>&nbsp;<span class="ident" id="4871463"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4871465">.</span><span class="ident" id="4871466">ReadFull</span><span class="op" id="4871474">(</span><span class="ident" id="4871475"><a href="/image/png/reader.go.html#4869415">r</a></span><span class="op" id="4871476">,</span>&nbsp;<span class="ident" id="4871478"><a href="/image/png/reader.go.html#4871326">cr</a></span><span class="op" id="4871480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871484">if</span>&nbsp;<span class="ident" id="4871487"><a href="/image/png/reader.go.html#4871456">err</a></span>&nbsp;<span class="op" id="4871491">!=</span>&nbsp;<span class="ident" id="4871494">nil</span>&nbsp;<span class="op" id="4871498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871503">return</span>&nbsp;<span class="ident" id="4871510">nil</span><span class="op" id="4871513">,</span>&nbsp;<span class="ident" id="4871515"><a href="/image/png/reader.go.html#4871456">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871521">}</span><br>
<span class="lineno">430</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4871526">//&nbsp;Apply&nbsp;the&nbsp;filter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871549">cdat</span>&nbsp;<span class="op" id="4871554">:=</span>&nbsp;<span class="ident" id="4871557"><a href="/image/png/reader.go.html#4871326">cr</a></span><span class="op" id="4871559">[</span><span class="num" id="4871560">1</span><span class="op" id="4871561">:</span><span class="op" id="4871562">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871566">pdat</span>&nbsp;<span class="op" id="4871571">:=</span>&nbsp;<span class="ident" id="4871574"><a href="/image/png/reader.go.html#4871356">pr</a></span><span class="op" id="4871576">[</span><span class="num" id="4871577">1</span><span class="op" id="4871578">:</span><span class="op" id="4871579">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871583">switch</span>&nbsp;<span class="ident" id="4871590"><a href="/image/png/reader.go.html#4871326">cr</a></span><span class="op" id="4871592">[</span><span class="num" id="4871593">0</span><span class="op" id="4871594">]</span>&nbsp;<span class="op" id="4871596">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871600">case</span>&nbsp;<span class="ident" id="4871605"><a href="/image/png/reader.go.html#4861554">ftNone</a></span><span class="op" id="4871611">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4871616">//&nbsp;No-op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871628">case</span>&nbsp;<span class="ident" id="4871633"><a href="/image/png/reader.go.html#4861569">ftSub</a></span><span class="op" id="4871638">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871643">for</span>&nbsp;<span class="ident" id="4871647">i</span>&nbsp;<span class="op" id="4871649">:=</span>&nbsp;<span class="ident" id="4871652"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4871665">;</span>&nbsp;<span class="ident" id="4871667"><a href="/image/png/reader.go.html#4871647">i</a></span>&nbsp;<span class="op" id="4871669">&lt;</span>&nbsp;<span class="builtinfunc" id="4871671">len</span><span class="op" id="4871674">(</span><span class="ident" id="4871675"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871679">)</span><span class="op" id="4871680">;</span>&nbsp;<span class="ident" id="4871682"><a href="/image/png/reader.go.html#4871647">i</a></span><span class="op" id="4871683">++</span>&nbsp;<span class="op" id="4871686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871692"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871696">[</span><span class="ident" id="4871697"><a href="/image/png/reader.go.html#4871647">i</a></span><span class="op" id="4871698">]</span>&nbsp;<span class="op" id="4871700">+=</span>&nbsp;<span class="ident" id="4871703"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871707">[</span><span class="ident" id="4871708"><a href="/image/png/reader.go.html#4871647">i</a></span><span class="op" id="4871709">-</span><span class="ident" id="4871710"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4871723">]</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871732">case</span>&nbsp;<span class="ident" id="4871737"><a href="/image/png/reader.go.html#4861584">ftUp</a></span><span class="op" id="4871741">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871746">for</span>&nbsp;<span class="ident" id="4871750">i</span><span class="op" id="4871751">,</span>&nbsp;<span class="ident" id="4871753">p</span>&nbsp;<span class="op" id="4871755">:=</span>&nbsp;<span class="keyword" id="4871758">range</span>&nbsp;<span class="ident" id="4871764"><a href="/image/png/reader.go.html#4871566">pdat</a></span>&nbsp;<span class="op" id="4871769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871775"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871779">[</span><span class="ident" id="4871780"><a href="/image/png/reader.go.html#4871750">i</a></span><span class="op" id="4871781">]</span>&nbsp;<span class="op" id="4871783">+=</span>&nbsp;<span class="ident" id="4871786"><a href="/image/png/reader.go.html#4871753">p</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871791">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871795">case</span>&nbsp;<span class="ident" id="4871800"><a href="/image/png/reader.go.html#4861599">ftAverage</a></span><span class="op" id="4871809">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871814">for</span>&nbsp;<span class="ident" id="4871818">i</span>&nbsp;<span class="op" id="4871820">:=</span>&nbsp;<span class="num" id="4871823">0</span><span class="op" id="4871824">;</span>&nbsp;<span class="ident" id="4871826"><a href="/image/png/reader.go.html#4871818">i</a></span>&nbsp;<span class="op" id="4871828">&lt;</span>&nbsp;<span class="ident" id="4871830"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4871843">;</span>&nbsp;<span class="ident" id="4871845"><a href="/image/png/reader.go.html#4871818">i</a></span><span class="op" id="4871846">++</span>&nbsp;<span class="op" id="4871849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871855"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871859">[</span><span class="ident" id="4871860"><a href="/image/png/reader.go.html#4871818">i</a></span><span class="op" id="4871861">]</span>&nbsp;<span class="op" id="4871863">+=</span>&nbsp;<span class="ident" id="4871866"><a href="/image/png/reader.go.html#4871566">pdat</a></span><span class="op" id="4871870">[</span><span class="ident" id="4871871"><a href="/image/png/reader.go.html#4871818">i</a></span><span class="op" id="4871872">]</span>&nbsp;<span class="op" id="4871874">/</span>&nbsp;<span class="num" id="4871876">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4871881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4871886">for</span>&nbsp;<span class="ident" id="4871890">i</span>&nbsp;<span class="op" id="4871892">:=</span>&nbsp;<span class="ident" id="4871895"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4871908">;</span>&nbsp;<span class="ident" id="4871910"><a href="/image/png/reader.go.html#4871890">i</a></span>&nbsp;<span class="op" id="4871912">&lt;</span>&nbsp;<span class="builtinfunc" id="4871914">len</span><span class="op" id="4871917">(</span><span class="ident" id="4871918"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871922">)</span><span class="op" id="4871923">;</span>&nbsp;<span class="ident" id="4871925"><a href="/image/png/reader.go.html#4871890">i</a></span><span class="op" id="4871926">++</span>&nbsp;<span class="op" id="4871929">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4871935"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871939">[</span><span class="ident" id="4871940"><a href="/image/png/reader.go.html#4871890">i</a></span><span class="op" id="4871941">]</span>&nbsp;<span class="op" id="4871943">+=</span>&nbsp;<span class="builtintype" id="4871946">uint8</span><span class="op" id="4871951">(</span><span class="op" id="4871952">(</span><span class="builtintype" id="4871953">int</span><span class="op" id="4871956">(</span><span class="ident" id="4871957"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4871961">[</span><span class="ident" id="4871962"><a href="/image/png/reader.go.html#4871890">i</a></span><span class="op" id="4871963">-</span><span class="ident" id="4871964"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4871977">]</span><span class="op" id="4871978">)</span>&nbsp;<span class="op" id="4871980">+</span>&nbsp;<span class="builtintype" id="4871982">int</span><span class="op" id="4871985">(</span><span class="ident" id="4871986"><a href="/image/png/reader.go.html#4871566">pdat</a></span><span class="op" id="4871990">[</span><span class="ident" id="4871991"><a href="/image/png/reader.go.html#4871890">i</a></span><span class="op" id="4871992">]</span><span class="op" id="4871993">)</span><span class="op" id="4871994">)</span>&nbsp;<span class="op" id="4871996">/</span>&nbsp;<span class="num" id="4871998">2</span><span class="op" id="4871999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872008">case</span>&nbsp;<span class="ident" id="4872013"><a href="/image/png/reader.go.html#4861614">ftPaeth</a></span><span class="op" id="4872020">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872025"><a href="/image/png/paeth.go.html#4860303">filterPaeth</a></span><span class="op" id="4872036">(</span><span class="ident" id="4872037"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872041">,</span>&nbsp;<span class="ident" id="4872043"><a href="/image/png/reader.go.html#4871566">pdat</a></span><span class="op" id="4872047">,</span>&nbsp;<span class="ident" id="4872049"><a href="/image/png/reader.go.html#4871119">bytesPerPixel</a></span><span class="op" id="4872062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872066">default</span><span class="op" id="4872073">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872078">return</span>&nbsp;<span class="ident" id="4872085">nil</span><span class="op" id="4872088">,</span>&nbsp;<span class="ident" id="4872090"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4872101">(</span><span class="string" id="4872102">&#34;bad&nbsp;filter&nbsp;type&#34;</span><span class="op" id="4872119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4872128">//&nbsp;Convert&nbsp;from&nbsp;bytes&nbsp;to&nbsp;colors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872163">switch</span>&nbsp;<span class="ident" id="4872170"><a href="/image/png/reader.go.html#4869389">d</a></span><span class="op" id="4872171">.</span><span class="ident" id="4872172">cb</span>&nbsp;<span class="op" id="4872175">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872179">case</span>&nbsp;<span class="ident" id="4872184"><a href="/image/png/reader.go.html#4861404">cbG1</a></span><span class="op" id="4872188">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872193">for</span>&nbsp;<span class="ident" id="4872197">x</span>&nbsp;<span class="op" id="4872199">:=</span>&nbsp;<span class="num" id="4872202">0</span><span class="op" id="4872203">;</span>&nbsp;<span class="ident" id="4872205"><a href="/image/png/reader.go.html#4872197">x</a></span>&nbsp;<span class="op" id="4872207">&lt;</span>&nbsp;<span class="ident" id="4872209"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872214">;</span>&nbsp;<span class="ident" id="4872216"><a href="/image/png/reader.go.html#4872197">x</a></span>&nbsp;<span class="op" id="4872218">+=</span>&nbsp;<span class="num" id="4872221">8</span>&nbsp;<span class="op" id="4872223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872229">b</span>&nbsp;<span class="op" id="4872231">:=</span>&nbsp;<span class="ident" id="4872234"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872238">[</span><span class="ident" id="4872239"><a href="/image/png/reader.go.html#4872197">x</a></span><span class="op" id="4872240">/</span><span class="num" id="4872241">8</span><span class="op" id="4872242">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872248">for</span>&nbsp;<span class="ident" id="4872252">x2</span>&nbsp;<span class="op" id="4872255">:=</span>&nbsp;<span class="num" id="4872258">0</span><span class="op" id="4872259">;</span>&nbsp;<span class="ident" id="4872261"><a href="/image/png/reader.go.html#4872252">x2</a></span>&nbsp;<span class="op" id="4872264">&lt;</span>&nbsp;<span class="num" id="4872266">8</span>&nbsp;<span class="op" id="4872268">&amp;&amp;</span>&nbsp;<span class="ident" id="4872271"><a href="/image/png/reader.go.html#4872197">x</a></span><span class="op" id="4872272">+</span><span class="ident" id="4872273"><a href="/image/png/reader.go.html#4872252">x2</a></span>&nbsp;<span class="op" id="4872276">&lt;</span>&nbsp;<span class="ident" id="4872278"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872283">;</span>&nbsp;<span class="ident" id="4872285"><a href="/image/png/reader.go.html#4872252">x2</a></span><span class="op" id="4872287">++</span>&nbsp;<span class="op" id="4872290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872297"><a href="/image/png/reader.go.html#4869531">gray</a></span><span class="op" id="4872301">.</span><span class="ident" id="4872302">SetGray</span><span class="op" id="4872309">(</span><span class="ident" id="4872310"><a href="/image/png/reader.go.html#4872197">x</a></span><span class="op" id="4872311">+</span><span class="ident" id="4872312"><a href="/image/png/reader.go.html#4872252">x2</a></span><span class="op" id="4872314">,</span>&nbsp;<span class="ident" id="4872316"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4872317">,</span>&nbsp;<span class="ident" id="4872319"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4872324">.</span><span class="ident" id="4872325">Gray</span><span class="op" id="4872329">{</span><span class="op" id="4872330">(</span><span class="ident" id="4872331"><a href="/image/png/reader.go.html#4872229">b</a></span>&nbsp;<span class="op" id="4872333">&gt;&gt;</span>&nbsp;<span class="num" id="4872336">7</span><span class="op" id="4872337">)</span>&nbsp;<span class="op" id="4872339">*</span>&nbsp;<span class="num" id="4872341">0xff</span><span class="op" id="4872345">}</span><span class="op" id="4872346">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872353"><a href="/image/png/reader.go.html#4872229">b</a></span>&nbsp;<span class="op" id="4872355">&lt;&lt;=</span>&nbsp;<span class="num" id="4872359">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872374">case</span>&nbsp;<span class="ident" id="4872379"><a href="/image/png/reader.go.html#4861410">cbG2</a></span><span class="op" id="4872383">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872388">for</span>&nbsp;<span class="ident" id="4872392">x</span>&nbsp;<span class="op" id="4872394">:=</span>&nbsp;<span class="num" id="4872397">0</span><span class="op" id="4872398">;</span>&nbsp;<span class="ident" id="4872400"><a href="/image/png/reader.go.html#4872392">x</a></span>&nbsp;<span class="op" id="4872402">&lt;</span>&nbsp;<span class="ident" id="4872404"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872409">;</span>&nbsp;<span class="ident" id="4872411"><a href="/image/png/reader.go.html#4872392">x</a></span>&nbsp;<span class="op" id="4872413">+=</span>&nbsp;<span class="num" id="4872416">4</span>&nbsp;<span class="op" id="4872418">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872424">b</span>&nbsp;<span class="op" id="4872426">:=</span>&nbsp;<span class="ident" id="4872429"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872433">[</span><span class="ident" id="4872434"><a href="/image/png/reader.go.html#4872392">x</a></span><span class="op" id="4872435">/</span><span class="num" id="4872436">4</span><span class="op" id="4872437">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872443">for</span>&nbsp;<span class="ident" id="4872447">x2</span>&nbsp;<span class="op" id="4872450">:=</span>&nbsp;<span class="num" id="4872453">0</span><span class="op" id="4872454">;</span>&nbsp;<span class="ident" id="4872456"><a href="/image/png/reader.go.html#4872447">x2</a></span>&nbsp;<span class="op" id="4872459">&lt;</span>&nbsp;<span class="num" id="4872461">4</span>&nbsp;<span class="op" id="4872463">&amp;&amp;</span>&nbsp;<span class="ident" id="4872466"><a href="/image/png/reader.go.html#4872392">x</a></span><span class="op" id="4872467">+</span><span class="ident" id="4872468"><a href="/image/png/reader.go.html#4872447">x2</a></span>&nbsp;<span class="op" id="4872471">&lt;</span>&nbsp;<span class="ident" id="4872473"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872478">;</span>&nbsp;<span class="ident" id="4872480"><a href="/image/png/reader.go.html#4872447">x2</a></span><span class="op" id="4872482">++</span>&nbsp;<span class="op" id="4872485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872492"><a href="/image/png/reader.go.html#4869531">gray</a></span><span class="op" id="4872496">.</span><span class="ident" id="4872497">SetGray</span><span class="op" id="4872504">(</span><span class="ident" id="4872505"><a href="/image/png/reader.go.html#4872392">x</a></span><span class="op" id="4872506">+</span><span class="ident" id="4872507"><a href="/image/png/reader.go.html#4872447">x2</a></span><span class="op" id="4872509">,</span>&nbsp;<span class="ident" id="4872511"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4872512">,</span>&nbsp;<span class="ident" id="4872514"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4872519">.</span><span class="ident" id="4872520">Gray</span><span class="op" id="4872524">{</span><span class="op" id="4872525">(</span><span class="ident" id="4872526"><a href="/image/png/reader.go.html#4872424">b</a></span>&nbsp;<span class="op" id="4872528">&gt;&gt;</span>&nbsp;<span class="num" id="4872531">6</span><span class="op" id="4872532">)</span>&nbsp;<span class="op" id="4872534">*</span>&nbsp;<span class="num" id="4872536">0x55</span><span class="op" id="4872540">}</span><span class="op" id="4872541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872548"><a href="/image/png/reader.go.html#4872424">b</a></span>&nbsp;<span class="op" id="4872550">&lt;&lt;=</span>&nbsp;<span class="num" id="4872554">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872560">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872569">case</span>&nbsp;<span class="ident" id="4872574"><a href="/image/png/reader.go.html#4861416">cbG4</a></span><span class="op" id="4872578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872583">for</span>&nbsp;<span class="ident" id="4872587">x</span>&nbsp;<span class="op" id="4872589">:=</span>&nbsp;<span class="num" id="4872592">0</span><span class="op" id="4872593">;</span>&nbsp;<span class="ident" id="4872595"><a href="/image/png/reader.go.html#4872587">x</a></span>&nbsp;<span class="op" id="4872597">&lt;</span>&nbsp;<span class="ident" id="4872599"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872604">;</span>&nbsp;<span class="ident" id="4872606"><a href="/image/png/reader.go.html#4872587">x</a></span>&nbsp;<span class="op" id="4872608">+=</span>&nbsp;<span class="num" id="4872611">2</span>&nbsp;<span class="op" id="4872613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872619">b</span>&nbsp;<span class="op" id="4872621">:=</span>&nbsp;<span class="ident" id="4872624"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872628">[</span><span class="ident" id="4872629"><a href="/image/png/reader.go.html#4872587">x</a></span><span class="op" id="4872630">/</span><span class="num" id="4872631">2</span><span class="op" id="4872632">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872638">for</span>&nbsp;<span class="ident" id="4872642">x2</span>&nbsp;<span class="op" id="4872645">:=</span>&nbsp;<span class="num" id="4872648">0</span><span class="op" id="4872649">;</span>&nbsp;<span class="ident" id="4872651"><a href="/image/png/reader.go.html#4872642">x2</a></span>&nbsp;<span class="op" id="4872654">&lt;</span>&nbsp;<span class="num" id="4872656">2</span>&nbsp;<span class="op" id="4872658">&amp;&amp;</span>&nbsp;<span class="ident" id="4872661"><a href="/image/png/reader.go.html#4872587">x</a></span><span class="op" id="4872662">+</span><span class="ident" id="4872663"><a href="/image/png/reader.go.html#4872642">x2</a></span>&nbsp;<span class="op" id="4872666">&lt;</span>&nbsp;<span class="ident" id="4872668"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872673">;</span>&nbsp;<span class="ident" id="4872675"><a href="/image/png/reader.go.html#4872642">x2</a></span><span class="op" id="4872677">++</span>&nbsp;<span class="op" id="4872680">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872687"><a href="/image/png/reader.go.html#4869531">gray</a></span><span class="op" id="4872691">.</span><span class="ident" id="4872692">SetGray</span><span class="op" id="4872699">(</span><span class="ident" id="4872700"><a href="/image/png/reader.go.html#4872587">x</a></span><span class="op" id="4872701">+</span><span class="ident" id="4872702"><a href="/image/png/reader.go.html#4872642">x2</a></span><span class="op" id="4872704">,</span>&nbsp;<span class="ident" id="4872706"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4872707">,</span>&nbsp;<span class="ident" id="4872709"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4872714">.</span><span class="ident" id="4872715">Gray</span><span class="op" id="4872719">{</span><span class="op" id="4872720">(</span><span class="ident" id="4872721"><a href="/image/png/reader.go.html#4872619">b</a></span>&nbsp;<span class="op" id="4872723">&gt;&gt;</span>&nbsp;<span class="num" id="4872726">4</span><span class="op" id="4872727">)</span>&nbsp;<span class="op" id="4872729">*</span>&nbsp;<span class="num" id="4872731">0x11</span><span class="op" id="4872735">}</span><span class="op" id="4872736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872743"><a href="/image/png/reader.go.html#4872619">b</a></span>&nbsp;<span class="op" id="4872745">&lt;&lt;=</span>&nbsp;<span class="num" id="4872749">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872755">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872764">case</span>&nbsp;<span class="ident" id="4872769"><a href="/image/png/reader.go.html#4861422">cbG8</a></span><span class="op" id="4872773">:</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4872778">copy</span><span class="op" id="4872782">(</span><span class="ident" id="4872783"><a href="/image/png/reader.go.html#4869531">gray</a></span><span class="op" id="4872787">.</span><span class="ident" id="4872788">Pix</span><span class="op" id="4872791">[</span><span class="ident" id="4872792"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span><span class="op" id="4872801">:</span><span class="op" id="4872802">]</span><span class="op" id="4872803">,</span>&nbsp;<span class="ident" id="4872805"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872814"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span>&nbsp;<span class="op" id="4872824">+=</span>&nbsp;<span class="ident" id="4872827"><a href="/image/png/reader.go.html#4869531">gray</a></span><span class="op" id="4872831">.</span><span class="ident" id="4872832">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872841">case</span>&nbsp;<span class="ident" id="4872846"><a href="/image/png/reader.go.html#4861428">cbGA8</a></span><span class="op" id="4872851">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872856">for</span>&nbsp;<span class="ident" id="4872860">x</span>&nbsp;<span class="op" id="4872862">:=</span>&nbsp;<span class="num" id="4872865">0</span><span class="op" id="4872866">;</span>&nbsp;<span class="ident" id="4872868"><a href="/image/png/reader.go.html#4872860">x</a></span>&nbsp;<span class="op" id="4872870">&lt;</span>&nbsp;<span class="ident" id="4872872"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4872877">;</span>&nbsp;<span class="ident" id="4872879"><a href="/image/png/reader.go.html#4872860">x</a></span><span class="op" id="4872880">++</span>&nbsp;<span class="op" id="4872883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872889">ycol</span>&nbsp;<span class="op" id="4872894">:=</span>&nbsp;<span class="ident" id="4872897"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872901">[</span><span class="num" id="4872902">2</span><span class="op" id="4872903">*</span><span class="ident" id="4872904"><a href="/image/png/reader.go.html#4872860">x</a></span><span class="op" id="4872905">+</span><span class="num" id="4872906">0</span><span class="op" id="4872907">]</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4872913"><a href="/image/png/reader.go.html#4869604">nrgba</a></span><span class="op" id="4872918">.</span><span class="ident" id="4872919">SetNRGBA</span><span class="op" id="4872927">(</span><span class="ident" id="4872928"><a href="/image/png/reader.go.html#4872860">x</a></span><span class="op" id="4872929">,</span>&nbsp;<span class="ident" id="4872931"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4872932">,</span>&nbsp;<span class="ident" id="4872934"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4872939">.</span><span class="ident" id="4872940">NRGBA</span><span class="op" id="4872945">{</span><span class="ident" id="4872946"><a href="/image/png/reader.go.html#4872889">ycol</a></span><span class="op" id="4872950">,</span>&nbsp;<span class="ident" id="4872952"><a href="/image/png/reader.go.html#4872889">ycol</a></span><span class="op" id="4872956">,</span>&nbsp;<span class="ident" id="4872958"><a href="/image/png/reader.go.html#4872889">ycol</a></span><span class="op" id="4872962">,</span>&nbsp;<span class="ident" id="4872964"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4872968">[</span><span class="num" id="4872969">2</span><span class="op" id="4872970">*</span><span class="ident" id="4872971"><a href="/image/png/reader.go.html#4872860">x</a></span><span class="op" id="4872972">+</span><span class="num" id="4872973">1</span><span class="op" id="4872974">]</span><span class="op" id="4872975">}</span><span class="op" id="4872976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4872981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4872985">case</span>&nbsp;<span class="ident" id="4872990"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><span class="op" id="4872995">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873000">pix</span><span class="op" id="4873003">,</span>&nbsp;<span class="ident" id="4873005">i</span><span class="op" id="4873006">,</span>&nbsp;<span class="ident" id="4873008">j</span>&nbsp;<span class="op" id="4873010">:=</span>&nbsp;<span class="ident" id="4873013"><a href="/image/png/reader.go.html#4869554">rgba</a></span><span class="op" id="4873017">.</span><span class="ident" id="4873018">Pix</span><span class="op" id="4873021">,</span>&nbsp;<span class="ident" id="4873023"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span><span class="op" id="4873032">,</span>&nbsp;<span class="num" id="4873034">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873039">for</span>&nbsp;<span class="ident" id="4873043">x</span>&nbsp;<span class="op" id="4873045">:=</span>&nbsp;<span class="num" id="4873048">0</span><span class="op" id="4873049">;</span>&nbsp;<span class="ident" id="4873051"><a href="/image/png/reader.go.html#4873043">x</a></span>&nbsp;<span class="op" id="4873053">&lt;</span>&nbsp;<span class="ident" id="4873055"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873060">;</span>&nbsp;<span class="ident" id="4873062"><a href="/image/png/reader.go.html#4873043">x</a></span><span class="op" id="4873063">++</span>&nbsp;<span class="op" id="4873066">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873072"><a href="/image/png/reader.go.html#4873000">pix</a></span><span class="op" id="4873075">[</span><span class="ident" id="4873076"><a href="/image/png/reader.go.html#4873005">i</a></span><span class="op" id="4873077">+</span><span class="num" id="4873078">0</span><span class="op" id="4873079">]</span>&nbsp;<span class="op" id="4873081">=</span>&nbsp;<span class="ident" id="4873083"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873087">[</span><span class="ident" id="4873088"><a href="/image/png/reader.go.html#4873008">j</a></span><span class="op" id="4873089">+</span><span class="num" id="4873090">0</span><span class="op" id="4873091">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873097"><a href="/image/png/reader.go.html#4873000">pix</a></span><span class="op" id="4873100">[</span><span class="ident" id="4873101"><a href="/image/png/reader.go.html#4873005">i</a></span><span class="op" id="4873102">+</span><span class="num" id="4873103">1</span><span class="op" id="4873104">]</span>&nbsp;<span class="op" id="4873106">=</span>&nbsp;<span class="ident" id="4873108"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873112">[</span><span class="ident" id="4873113"><a href="/image/png/reader.go.html#4873008">j</a></span><span class="op" id="4873114">+</span><span class="num" id="4873115">1</span><span class="op" id="4873116">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873122"><a href="/image/png/reader.go.html#4873000">pix</a></span><span class="op" id="4873125">[</span><span class="ident" id="4873126"><a href="/image/png/reader.go.html#4873005">i</a></span><span class="op" id="4873127">+</span><span class="num" id="4873128">2</span><span class="op" id="4873129">]</span>&nbsp;<span class="op" id="4873131">=</span>&nbsp;<span class="ident" id="4873133"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873137">[</span><span class="ident" id="4873138"><a href="/image/png/reader.go.html#4873008">j</a></span><span class="op" id="4873139">+</span><span class="num" id="4873140">2</span><span class="op" id="4873141">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873147"><a href="/image/png/reader.go.html#4873000">pix</a></span><span class="op" id="4873150">[</span><span class="ident" id="4873151"><a href="/image/png/reader.go.html#4873005">i</a></span><span class="op" id="4873152">+</span><span class="num" id="4873153">3</span><span class="op" id="4873154">]</span>&nbsp;<span class="op" id="4873156">=</span>&nbsp;<span class="num" id="4873158">0xff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873167"><a href="/image/png/reader.go.html#4873005">i</a></span>&nbsp;<span class="op" id="4873169">+=</span>&nbsp;<span class="num" id="4873172">4</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873178"><a href="/image/png/reader.go.html#4873008">j</a></span>&nbsp;<span class="op" id="4873180">+=</span>&nbsp;<span class="num" id="4873183">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873193"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span>&nbsp;<span class="op" id="4873203">+=</span>&nbsp;<span class="ident" id="4873206"><a href="/image/png/reader.go.html#4869554">rgba</a></span><span class="op" id="4873210">.</span><span class="ident" id="4873211">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873220">case</span>&nbsp;<span class="ident" id="4873225"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><span class="op" id="4873229">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873234">for</span>&nbsp;<span class="ident" id="4873238">x</span>&nbsp;<span class="op" id="4873240">:=</span>&nbsp;<span class="num" id="4873243">0</span><span class="op" id="4873244">;</span>&nbsp;<span class="ident" id="4873246"><a href="/image/png/reader.go.html#4873238">x</a></span>&nbsp;<span class="op" id="4873248">&lt;</span>&nbsp;<span class="ident" id="4873250"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873255">;</span>&nbsp;<span class="ident" id="4873257"><a href="/image/png/reader.go.html#4873238">x</a></span>&nbsp;<span class="op" id="4873259">+=</span>&nbsp;<span class="num" id="4873262">8</span>&nbsp;<span class="op" id="4873264">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873270">b</span>&nbsp;<span class="op" id="4873272">:=</span>&nbsp;<span class="ident" id="4873275"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873279">[</span><span class="ident" id="4873280"><a href="/image/png/reader.go.html#4873238">x</a></span><span class="op" id="4873281">/</span><span class="num" id="4873282">8</span><span class="op" id="4873283">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873289">for</span>&nbsp;<span class="ident" id="4873293">x2</span>&nbsp;<span class="op" id="4873296">:=</span>&nbsp;<span class="num" id="4873299">0</span><span class="op" id="4873300">;</span>&nbsp;<span class="ident" id="4873302"><a href="/image/png/reader.go.html#4873293">x2</a></span>&nbsp;<span class="op" id="4873305">&lt;</span>&nbsp;<span class="num" id="4873307">8</span>&nbsp;<span class="op" id="4873309">&amp;&amp;</span>&nbsp;<span class="ident" id="4873312"><a href="/image/png/reader.go.html#4873238">x</a></span><span class="op" id="4873313">+</span><span class="ident" id="4873314"><a href="/image/png/reader.go.html#4873293">x2</a></span>&nbsp;<span class="op" id="4873317">&lt;</span>&nbsp;<span class="ident" id="4873319"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873324">;</span>&nbsp;<span class="ident" id="4873326"><a href="/image/png/reader.go.html#4873293">x2</a></span><span class="op" id="4873328">++</span>&nbsp;<span class="op" id="4873331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873338">idx</span>&nbsp;<span class="op" id="4873342">:=</span>&nbsp;<span class="ident" id="4873345"><a href="/image/png/reader.go.html#4873270">b</a></span>&nbsp;<span class="op" id="4873347">&gt;&gt;</span>&nbsp;<span class="num" id="4873350">7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873357">if</span>&nbsp;<span class="builtinfunc" id="4873360">len</span><span class="op" id="4873363">(</span><span class="ident" id="4873364"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873372">.</span><span class="ident" id="4873373">Palette</span><span class="op" id="4873380">)</span>&nbsp;<span class="op" id="4873382">&lt;=</span>&nbsp;<span class="builtintype" id="4873385">int</span><span class="op" id="4873388">(</span><span class="ident" id="4873389"><a href="/image/png/reader.go.html#4873338">idx</a></span><span class="op" id="4873392">)</span>&nbsp;<span class="op" id="4873394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873402"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873410">.</span><span class="ident" id="4873411">Palette</span>&nbsp;<span class="op" id="4873419">=</span>&nbsp;<span class="ident" id="4873421"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873429">.</span><span class="ident" id="4873430">Palette</span><span class="op" id="4873437">[</span><span class="op" id="4873438">:</span><span class="builtintype" id="4873439">int</span><span class="op" id="4873442">(</span><span class="ident" id="4873443"><a href="/image/png/reader.go.html#4873338">idx</a></span><span class="op" id="4873446">)</span><span class="op" id="4873447">+</span><span class="num" id="4873448">1</span><span class="op" id="4873449">]</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873463"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873471">.</span><span class="ident" id="4873472">SetColorIndex</span><span class="op" id="4873485">(</span><span class="ident" id="4873486"><a href="/image/png/reader.go.html#4873238">x</a></span><span class="op" id="4873487">+</span><span class="ident" id="4873488"><a href="/image/png/reader.go.html#4873293">x2</a></span><span class="op" id="4873490">,</span>&nbsp;<span class="ident" id="4873492"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4873493">,</span>&nbsp;<span class="ident" id="4873495"><a href="/image/png/reader.go.html#4873338">idx</a></span><span class="op" id="4873498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873505"><a href="/image/png/reader.go.html#4873270">b</a></span>&nbsp;<span class="op" id="4873507">&lt;&lt;=</span>&nbsp;<span class="num" id="4873511">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873522">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873526">case</span>&nbsp;<span class="ident" id="4873531"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><span class="op" id="4873535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873540">for</span>&nbsp;<span class="ident" id="4873544">x</span>&nbsp;<span class="op" id="4873546">:=</span>&nbsp;<span class="num" id="4873549">0</span><span class="op" id="4873550">;</span>&nbsp;<span class="ident" id="4873552"><a href="/image/png/reader.go.html#4873544">x</a></span>&nbsp;<span class="op" id="4873554">&lt;</span>&nbsp;<span class="ident" id="4873556"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873561">;</span>&nbsp;<span class="ident" id="4873563"><a href="/image/png/reader.go.html#4873544">x</a></span>&nbsp;<span class="op" id="4873565">+=</span>&nbsp;<span class="num" id="4873568">4</span>&nbsp;<span class="op" id="4873570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873576">b</span>&nbsp;<span class="op" id="4873578">:=</span>&nbsp;<span class="ident" id="4873581"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873585">[</span><span class="ident" id="4873586"><a href="/image/png/reader.go.html#4873544">x</a></span><span class="op" id="4873587">/</span><span class="num" id="4873588">4</span><span class="op" id="4873589">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873595">for</span>&nbsp;<span class="ident" id="4873599">x2</span>&nbsp;<span class="op" id="4873602">:=</span>&nbsp;<span class="num" id="4873605">0</span><span class="op" id="4873606">;</span>&nbsp;<span class="ident" id="4873608"><a href="/image/png/reader.go.html#4873599">x2</a></span>&nbsp;<span class="op" id="4873611">&lt;</span>&nbsp;<span class="num" id="4873613">4</span>&nbsp;<span class="op" id="4873615">&amp;&amp;</span>&nbsp;<span class="ident" id="4873618"><a href="/image/png/reader.go.html#4873544">x</a></span><span class="op" id="4873619">+</span><span class="ident" id="4873620"><a href="/image/png/reader.go.html#4873599">x2</a></span>&nbsp;<span class="op" id="4873623">&lt;</span>&nbsp;<span class="ident" id="4873625"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873630">;</span>&nbsp;<span class="ident" id="4873632"><a href="/image/png/reader.go.html#4873599">x2</a></span><span class="op" id="4873634">++</span>&nbsp;<span class="op" id="4873637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873644">idx</span>&nbsp;<span class="op" id="4873648">:=</span>&nbsp;<span class="ident" id="4873651"><a href="/image/png/reader.go.html#4873576">b</a></span>&nbsp;<span class="op" id="4873653">&gt;&gt;</span>&nbsp;<span class="num" id="4873656">6</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873663">if</span>&nbsp;<span class="builtinfunc" id="4873666">len</span><span class="op" id="4873669">(</span><span class="ident" id="4873670"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873678">.</span><span class="ident" id="4873679">Palette</span><span class="op" id="4873686">)</span>&nbsp;<span class="op" id="4873688">&lt;=</span>&nbsp;<span class="builtintype" id="4873691">int</span><span class="op" id="4873694">(</span><span class="ident" id="4873695"><a href="/image/png/reader.go.html#4873644">idx</a></span><span class="op" id="4873698">)</span>&nbsp;<span class="op" id="4873700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873708"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873716">.</span><span class="ident" id="4873717">Palette</span>&nbsp;<span class="op" id="4873725">=</span>&nbsp;<span class="ident" id="4873727"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873735">.</span><span class="ident" id="4873736">Palette</span><span class="op" id="4873743">[</span><span class="op" id="4873744">:</span><span class="builtintype" id="4873745">int</span><span class="op" id="4873748">(</span><span class="ident" id="4873749"><a href="/image/png/reader.go.html#4873644">idx</a></span><span class="op" id="4873752">)</span><span class="op" id="4873753">+</span><span class="num" id="4873754">1</span><span class="op" id="4873755">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873769"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873777">.</span><span class="ident" id="4873778">SetColorIndex</span><span class="op" id="4873791">(</span><span class="ident" id="4873792"><a href="/image/png/reader.go.html#4873544">x</a></span><span class="op" id="4873793">+</span><span class="ident" id="4873794"><a href="/image/png/reader.go.html#4873599">x2</a></span><span class="op" id="4873796">,</span>&nbsp;<span class="ident" id="4873798"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4873799">,</span>&nbsp;<span class="ident" id="4873801"><a href="/image/png/reader.go.html#4873644">idx</a></span><span class="op" id="4873804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873811"><a href="/image/png/reader.go.html#4873576">b</a></span>&nbsp;<span class="op" id="4873813">&lt;&lt;=</span>&nbsp;<span class="num" id="4873817">2</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873823">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4873828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873832">case</span>&nbsp;<span class="ident" id="4873837"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><span class="op" id="4873841">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873846">for</span>&nbsp;<span class="ident" id="4873850">x</span>&nbsp;<span class="op" id="4873852">:=</span>&nbsp;<span class="num" id="4873855">0</span><span class="op" id="4873856">;</span>&nbsp;<span class="ident" id="4873858"><a href="/image/png/reader.go.html#4873850">x</a></span>&nbsp;<span class="op" id="4873860">&lt;</span>&nbsp;<span class="ident" id="4873862"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873867">;</span>&nbsp;<span class="ident" id="4873869"><a href="/image/png/reader.go.html#4873850">x</a></span>&nbsp;<span class="op" id="4873871">+=</span>&nbsp;<span class="num" id="4873874">2</span>&nbsp;<span class="op" id="4873876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873882">b</span>&nbsp;<span class="op" id="4873884">:=</span>&nbsp;<span class="ident" id="4873887"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4873891">[</span><span class="ident" id="4873892"><a href="/image/png/reader.go.html#4873850">x</a></span><span class="op" id="4873893">/</span><span class="num" id="4873894">2</span><span class="op" id="4873895">]</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873901">for</span>&nbsp;<span class="ident" id="4873905">x2</span>&nbsp;<span class="op" id="4873908">:=</span>&nbsp;<span class="num" id="4873911">0</span><span class="op" id="4873912">;</span>&nbsp;<span class="ident" id="4873914"><a href="/image/png/reader.go.html#4873905">x2</a></span>&nbsp;<span class="op" id="4873917">&lt;</span>&nbsp;<span class="num" id="4873919">2</span>&nbsp;<span class="op" id="4873921">&amp;&amp;</span>&nbsp;<span class="ident" id="4873924"><a href="/image/png/reader.go.html#4873850">x</a></span><span class="op" id="4873925">+</span><span class="ident" id="4873926"><a href="/image/png/reader.go.html#4873905">x2</a></span>&nbsp;<span class="op" id="4873929">&lt;</span>&nbsp;<span class="ident" id="4873931"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4873936">;</span>&nbsp;<span class="ident" id="4873938"><a href="/image/png/reader.go.html#4873905">x2</a></span><span class="op" id="4873940">++</span>&nbsp;<span class="op" id="4873943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4873950">idx</span>&nbsp;<span class="op" id="4873954">:=</span>&nbsp;<span class="ident" id="4873957"><a href="/image/png/reader.go.html#4873882">b</a></span>&nbsp;<span class="op" id="4873959">&gt;&gt;</span>&nbsp;<span class="num" id="4873962">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4873969">if</span>&nbsp;<span class="builtinfunc" id="4873972">len</span><span class="op" id="4873975">(</span><span class="ident" id="4873976"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4873984">.</span><span class="ident" id="4873985">Palette</span><span class="op" id="4873992">)</span>&nbsp;<span class="op" id="4873994">&lt;=</span>&nbsp;<span class="builtintype" id="4873997">int</span><span class="op" id="4874000">(</span><span class="ident" id="4874001"><a href="/image/png/reader.go.html#4873950">idx</a></span><span class="op" id="4874004">)</span>&nbsp;<span class="op" id="4874006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874014"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874022">.</span><span class="ident" id="4874023">Palette</span>&nbsp;<span class="op" id="4874031">=</span>&nbsp;<span class="ident" id="4874033"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874041">.</span><span class="ident" id="4874042">Palette</span><span class="op" id="4874049">[</span><span class="op" id="4874050">:</span><span class="builtintype" id="4874051">int</span><span class="op" id="4874054">(</span><span class="ident" id="4874055"><a href="/image/png/reader.go.html#4873950">idx</a></span><span class="op" id="4874058">)</span><span class="op" id="4874059">+</span><span class="num" id="4874060">1</span><span class="op" id="4874061">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874068">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874075"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874083">.</span><span class="ident" id="4874084">SetColorIndex</span><span class="op" id="4874097">(</span><span class="ident" id="4874098"><a href="/image/png/reader.go.html#4873850">x</a></span><span class="op" id="4874099">+</span><span class="ident" id="4874100"><a href="/image/png/reader.go.html#4873905">x2</a></span><span class="op" id="4874102">,</span>&nbsp;<span class="ident" id="4874104"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4874105">,</span>&nbsp;<span class="ident" id="4874107"><a href="/image/png/reader.go.html#4873950">idx</a></span><span class="op" id="4874110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874117"><a href="/image/png/reader.go.html#4873882">b</a></span>&nbsp;<span class="op" id="4874119">&lt;&lt;=</span>&nbsp;<span class="num" id="4874123">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874138">case</span>&nbsp;<span class="ident" id="4874143"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><span class="op" id="4874147">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874152">if</span>&nbsp;<span class="builtinfunc" id="4874155">len</span><span class="op" id="4874158">(</span><span class="ident" id="4874159"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874167">.</span><span class="ident" id="4874168">Palette</span><span class="op" id="4874175">)</span>&nbsp;<span class="op" id="4874177">!=</span>&nbsp;<span class="num" id="4874180">255</span>&nbsp;<span class="op" id="4874184">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874190">for</span>&nbsp;<span class="ident" id="4874194">x</span>&nbsp;<span class="op" id="4874196">:=</span>&nbsp;<span class="num" id="4874199">0</span><span class="op" id="4874200">;</span>&nbsp;<span class="ident" id="4874202"><a href="/image/png/reader.go.html#4874194">x</a></span>&nbsp;<span class="op" id="4874204">&lt;</span>&nbsp;<span class="ident" id="4874206"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4874211">;</span>&nbsp;<span class="ident" id="4874213"><a href="/image/png/reader.go.html#4874194">x</a></span><span class="op" id="4874214">++</span>&nbsp;<span class="op" id="4874217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874224">if</span>&nbsp;<span class="builtinfunc" id="4874227">len</span><span class="op" id="4874230">(</span><span class="ident" id="4874231"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874239">.</span><span class="ident" id="4874240">Palette</span><span class="op" id="4874247">)</span>&nbsp;<span class="op" id="4874249">&lt;=</span>&nbsp;<span class="builtintype" id="4874252">int</span><span class="op" id="4874255">(</span><span class="ident" id="4874256"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874260">[</span><span class="ident" id="4874261"><a href="/image/png/reader.go.html#4874194">x</a></span><span class="op" id="4874262">]</span><span class="op" id="4874263">)</span>&nbsp;<span class="op" id="4874265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874273"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874281">.</span><span class="ident" id="4874282">Palette</span>&nbsp;<span class="op" id="4874290">=</span>&nbsp;<span class="ident" id="4874292"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874300">.</span><span class="ident" id="4874301">Palette</span><span class="op" id="4874308">[</span><span class="op" id="4874309">:</span><span class="builtintype" id="4874310">int</span><span class="op" id="4874313">(</span><span class="ident" id="4874314"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874318">[</span><span class="ident" id="4874319"><a href="/image/png/reader.go.html#4874194">x</a></span><span class="op" id="4874320">]</span><span class="op" id="4874321">)</span><span class="op" id="4874322">+</span><span class="num" id="4874323">1</span><span class="op" id="4874324">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874331">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4874347">copy</span><span class="op" id="4874351">(</span><span class="ident" id="4874352"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874360">.</span><span class="ident" id="4874361">Pix</span><span class="op" id="4874364">[</span><span class="ident" id="4874365"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span><span class="op" id="4874374">:</span><span class="op" id="4874375">]</span><span class="op" id="4874376">,</span>&nbsp;<span class="ident" id="4874378"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874387"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span>&nbsp;<span class="op" id="4874397">+=</span>&nbsp;<span class="ident" id="4874400"><a href="/image/png/reader.go.html#4869577">paletted</a></span><span class="op" id="4874408">.</span><span class="ident" id="4874409">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874418">case</span>&nbsp;<span class="ident" id="4874423"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><span class="op" id="4874429">:</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4874434">copy</span><span class="op" id="4874438">(</span><span class="ident" id="4874439"><a href="/image/png/reader.go.html#4869604">nrgba</a></span><span class="op" id="4874444">.</span><span class="ident" id="4874445">Pix</span><span class="op" id="4874448">[</span><span class="ident" id="4874449"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span><span class="op" id="4874458">:</span><span class="op" id="4874459">]</span><span class="op" id="4874460">,</span>&nbsp;<span class="ident" id="4874462"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874471"><a href="/image/png/reader.go.html#4869507">pixOffset</a></span>&nbsp;<span class="op" id="4874481">+=</span>&nbsp;<span class="ident" id="4874484"><a href="/image/png/reader.go.html#4869604">nrgba</a></span><span class="op" id="4874489">.</span><span class="ident" id="4874490">Stride</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874499">case</span>&nbsp;<span class="ident" id="4874504"><a href="/image/png/reader.go.html#4861474">cbG16</a></span><span class="op" id="4874509">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874514">for</span>&nbsp;<span class="ident" id="4874518">x</span>&nbsp;<span class="op" id="4874520">:=</span>&nbsp;<span class="num" id="4874523">0</span><span class="op" id="4874524">;</span>&nbsp;<span class="ident" id="4874526"><a href="/image/png/reader.go.html#4874518">x</a></span>&nbsp;<span class="op" id="4874528">&lt;</span>&nbsp;<span class="ident" id="4874530"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4874535">;</span>&nbsp;<span class="ident" id="4874537"><a href="/image/png/reader.go.html#4874518">x</a></span><span class="op" id="4874538">++</span>&nbsp;<span class="op" id="4874541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874547">ycol</span>&nbsp;<span class="op" id="4874552">:=</span>&nbsp;<span class="builtintype" id="4874555">uint16</span><span class="op" id="4874561">(</span><span class="ident" id="4874562"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874566">[</span><span class="num" id="4874567">2</span><span class="op" id="4874568">*</span><span class="ident" id="4874569"><a href="/image/png/reader.go.html#4874518">x</a></span><span class="op" id="4874570">+</span><span class="num" id="4874571">0</span><span class="op" id="4874572">]</span><span class="op" id="4874573">)</span><span class="op" id="4874574">&lt;&lt;</span><span class="num" id="4874576">8</span>&nbsp;<span class="op" id="4874578">|</span>&nbsp;<span class="builtintype" id="4874580">uint16</span><span class="op" id="4874586">(</span><span class="ident" id="4874587"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874591">[</span><span class="num" id="4874592">2</span><span class="op" id="4874593">*</span><span class="ident" id="4874594"><a href="/image/png/reader.go.html#4874518">x</a></span><span class="op" id="4874595">+</span><span class="num" id="4874596">1</span><span class="op" id="4874597">]</span><span class="op" id="4874598">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874604"><a href="/image/png/reader.go.html#4869628">gray16</a></span><span class="op" id="4874610">.</span><span class="ident" id="4874611">SetGray16</span><span class="op" id="4874620">(</span><span class="ident" id="4874621"><a href="/image/png/reader.go.html#4874518">x</a></span><span class="op" id="4874622">,</span>&nbsp;<span class="ident" id="4874624"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4874625">,</span>&nbsp;<span class="ident" id="4874627"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4874632">.</span><span class="ident" id="4874633">Gray16</span><span class="op" id="4874639">{</span><span class="ident" id="4874640"><a href="/image/png/reader.go.html#4874547">ycol</a></span><span class="op" id="4874644">}</span><span class="op" id="4874645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874654">case</span>&nbsp;<span class="ident" id="4874659"><a href="/image/png/reader.go.html#4861481">cbGA16</a></span><span class="op" id="4874665">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874670">for</span>&nbsp;<span class="ident" id="4874674">x</span>&nbsp;<span class="op" id="4874676">:=</span>&nbsp;<span class="num" id="4874679">0</span><span class="op" id="4874680">;</span>&nbsp;<span class="ident" id="4874682"><a href="/image/png/reader.go.html#4874674">x</a></span>&nbsp;<span class="op" id="4874684">&lt;</span>&nbsp;<span class="ident" id="4874686"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4874691">;</span>&nbsp;<span class="ident" id="4874693"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874694">++</span>&nbsp;<span class="op" id="4874697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874703">ycol</span>&nbsp;<span class="op" id="4874708">:=</span>&nbsp;<span class="builtintype" id="4874711">uint16</span><span class="op" id="4874717">(</span><span class="ident" id="4874718"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874722">[</span><span class="num" id="4874723">4</span><span class="op" id="4874724">*</span><span class="ident" id="4874725"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874726">+</span><span class="num" id="4874727">0</span><span class="op" id="4874728">]</span><span class="op" id="4874729">)</span><span class="op" id="4874730">&lt;&lt;</span><span class="num" id="4874732">8</span>&nbsp;<span class="op" id="4874734">|</span>&nbsp;<span class="builtintype" id="4874736">uint16</span><span class="op" id="4874742">(</span><span class="ident" id="4874743"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874747">[</span><span class="num" id="4874748">4</span><span class="op" id="4874749">*</span><span class="ident" id="4874750"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874751">+</span><span class="num" id="4874752">1</span><span class="op" id="4874753">]</span><span class="op" id="4874754">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874760">acol</span>&nbsp;<span class="op" id="4874765">:=</span>&nbsp;<span class="builtintype" id="4874768">uint16</span><span class="op" id="4874774">(</span><span class="ident" id="4874775"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874779">[</span><span class="num" id="4874780">4</span><span class="op" id="4874781">*</span><span class="ident" id="4874782"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874783">+</span><span class="num" id="4874784">2</span><span class="op" id="4874785">]</span><span class="op" id="4874786">)</span><span class="op" id="4874787">&lt;&lt;</span><span class="num" id="4874789">8</span>&nbsp;<span class="op" id="4874791">|</span>&nbsp;<span class="builtintype" id="4874793">uint16</span><span class="op" id="4874799">(</span><span class="ident" id="4874800"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874804">[</span><span class="num" id="4874805">4</span><span class="op" id="4874806">*</span><span class="ident" id="4874807"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874808">+</span><span class="num" id="4874809">3</span><span class="op" id="4874810">]</span><span class="op" id="4874811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874817"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span><span class="op" id="4874824">.</span><span class="ident" id="4874825">SetNRGBA64</span><span class="op" id="4874835">(</span><span class="ident" id="4874836"><a href="/image/png/reader.go.html#4874674">x</a></span><span class="op" id="4874837">,</span>&nbsp;<span class="ident" id="4874839"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4874840">,</span>&nbsp;<span class="ident" id="4874842"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4874847">.</span><span class="ident" id="4874848">NRGBA64</span><span class="op" id="4874855">{</span><span class="ident" id="4874856"><a href="/image/png/reader.go.html#4874703">ycol</a></span><span class="op" id="4874860">,</span>&nbsp;<span class="ident" id="4874862"><a href="/image/png/reader.go.html#4874703">ycol</a></span><span class="op" id="4874866">,</span>&nbsp;<span class="ident" id="4874868"><a href="/image/png/reader.go.html#4874703">ycol</a></span><span class="op" id="4874872">,</span>&nbsp;<span class="ident" id="4874874"><a href="/image/png/reader.go.html#4874760">acol</a></span><span class="op" id="4874878">}</span><span class="op" id="4874879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4874884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874888">case</span>&nbsp;<span class="ident" id="4874893"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><span class="op" id="4874899">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4874904">for</span>&nbsp;<span class="ident" id="4874908">x</span>&nbsp;<span class="op" id="4874910">:=</span>&nbsp;<span class="num" id="4874913">0</span><span class="op" id="4874914">;</span>&nbsp;<span class="ident" id="4874916"><a href="/image/png/reader.go.html#4874908">x</a></span>&nbsp;<span class="op" id="4874918">&lt;</span>&nbsp;<span class="ident" id="4874920"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4874925">;</span>&nbsp;<span class="ident" id="4874927"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4874928">++</span>&nbsp;<span class="op" id="4874931">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874937">rcol</span>&nbsp;<span class="op" id="4874942">:=</span>&nbsp;<span class="builtintype" id="4874945">uint16</span><span class="op" id="4874951">(</span><span class="ident" id="4874952"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874956">[</span><span class="num" id="4874957">6</span><span class="op" id="4874958">*</span><span class="ident" id="4874959"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4874960">+</span><span class="num" id="4874961">0</span><span class="op" id="4874962">]</span><span class="op" id="4874963">)</span><span class="op" id="4874964">&lt;&lt;</span><span class="num" id="4874966">8</span>&nbsp;<span class="op" id="4874968">|</span>&nbsp;<span class="builtintype" id="4874970">uint16</span><span class="op" id="4874976">(</span><span class="ident" id="4874977"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4874981">[</span><span class="num" id="4874982">6</span><span class="op" id="4874983">*</span><span class="ident" id="4874984"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4874985">+</span><span class="num" id="4874986">1</span><span class="op" id="4874987">]</span><span class="op" id="4874988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4874994">gcol</span>&nbsp;<span class="op" id="4874999">:=</span>&nbsp;<span class="builtintype" id="4875002">uint16</span><span class="op" id="4875008">(</span><span class="ident" id="4875009"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875013">[</span><span class="num" id="4875014">6</span><span class="op" id="4875015">*</span><span class="ident" id="4875016"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4875017">+</span><span class="num" id="4875018">2</span><span class="op" id="4875019">]</span><span class="op" id="4875020">)</span><span class="op" id="4875021">&lt;&lt;</span><span class="num" id="4875023">8</span>&nbsp;<span class="op" id="4875025">|</span>&nbsp;<span class="builtintype" id="4875027">uint16</span><span class="op" id="4875033">(</span><span class="ident" id="4875034"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875038">[</span><span class="num" id="4875039">6</span><span class="op" id="4875040">*</span><span class="ident" id="4875041"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4875042">+</span><span class="num" id="4875043">3</span><span class="op" id="4875044">]</span><span class="op" id="4875045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875051">bcol</span>&nbsp;<span class="op" id="4875056">:=</span>&nbsp;<span class="builtintype" id="4875059">uint16</span><span class="op" id="4875065">(</span><span class="ident" id="4875066"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875070">[</span><span class="num" id="4875071">6</span><span class="op" id="4875072">*</span><span class="ident" id="4875073"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4875074">+</span><span class="num" id="4875075">4</span><span class="op" id="4875076">]</span><span class="op" id="4875077">)</span><span class="op" id="4875078">&lt;&lt;</span><span class="num" id="4875080">8</span>&nbsp;<span class="op" id="4875082">|</span>&nbsp;<span class="builtintype" id="4875084">uint16</span><span class="op" id="4875090">(</span><span class="ident" id="4875091"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875095">[</span><span class="num" id="4875096">6</span><span class="op" id="4875097">*</span><span class="ident" id="4875098"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4875099">+</span><span class="num" id="4875100">5</span><span class="op" id="4875101">]</span><span class="op" id="4875102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875108"><a href="/image/png/reader.go.html#4869653">rgba64</a></span><span class="op" id="4875114">.</span><span class="ident" id="4875115">SetRGBA64</span><span class="op" id="4875124">(</span><span class="ident" id="4875125"><a href="/image/png/reader.go.html#4874908">x</a></span><span class="op" id="4875126">,</span>&nbsp;<span class="ident" id="4875128"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4875129">,</span>&nbsp;<span class="ident" id="4875131"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4875136">.</span><span class="ident" id="4875137">RGBA64</span><span class="op" id="4875143">{</span><span class="ident" id="4875144"><a href="/image/png/reader.go.html#4874937">rcol</a></span><span class="op" id="4875148">,</span>&nbsp;<span class="ident" id="4875150"><a href="/image/png/reader.go.html#4874994">gcol</a></span><span class="op" id="4875154">,</span>&nbsp;<span class="ident" id="4875156"><a href="/image/png/reader.go.html#4875051">bcol</a></span><span class="op" id="4875160">,</span>&nbsp;<span class="num" id="4875162">0xffff</span><span class="op" id="4875168">}</span><span class="op" id="4875169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875174">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875178">case</span>&nbsp;<span class="ident" id="4875183"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><span class="op" id="4875190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875195">for</span>&nbsp;<span class="ident" id="4875199">x</span>&nbsp;<span class="op" id="4875201">:=</span>&nbsp;<span class="num" id="4875204">0</span><span class="op" id="4875205">;</span>&nbsp;<span class="ident" id="4875207"><a href="/image/png/reader.go.html#4875199">x</a></span>&nbsp;<span class="op" id="4875209">&lt;</span>&nbsp;<span class="ident" id="4875211"><a href="/image/png/reader.go.html#4869729">width</a></span><span class="op" id="4875216">;</span>&nbsp;<span class="ident" id="4875218"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875219">++</span>&nbsp;<span class="op" id="4875222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875228">rcol</span>&nbsp;<span class="op" id="4875233">:=</span>&nbsp;<span class="builtintype" id="4875236">uint16</span><span class="op" id="4875242">(</span><span class="ident" id="4875243"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875247">[</span><span class="num" id="4875248">8</span><span class="op" id="4875249">*</span><span class="ident" id="4875250"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875251">+</span><span class="num" id="4875252">0</span><span class="op" id="4875253">]</span><span class="op" id="4875254">)</span><span class="op" id="4875255">&lt;&lt;</span><span class="num" id="4875257">8</span>&nbsp;<span class="op" id="4875259">|</span>&nbsp;<span class="builtintype" id="4875261">uint16</span><span class="op" id="4875267">(</span><span class="ident" id="4875268"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875272">[</span><span class="num" id="4875273">8</span><span class="op" id="4875274">*</span><span class="ident" id="4875275"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875276">+</span><span class="num" id="4875277">1</span><span class="op" id="4875278">]</span><span class="op" id="4875279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875285">gcol</span>&nbsp;<span class="op" id="4875290">:=</span>&nbsp;<span class="builtintype" id="4875293">uint16</span><span class="op" id="4875299">(</span><span class="ident" id="4875300"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875304">[</span><span class="num" id="4875305">8</span><span class="op" id="4875306">*</span><span class="ident" id="4875307"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875308">+</span><span class="num" id="4875309">2</span><span class="op" id="4875310">]</span><span class="op" id="4875311">)</span><span class="op" id="4875312">&lt;&lt;</span><span class="num" id="4875314">8</span>&nbsp;<span class="op" id="4875316">|</span>&nbsp;<span class="builtintype" id="4875318">uint16</span><span class="op" id="4875324">(</span><span class="ident" id="4875325"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875329">[</span><span class="num" id="4875330">8</span><span class="op" id="4875331">*</span><span class="ident" id="4875332"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875333">+</span><span class="num" id="4875334">3</span><span class="op" id="4875335">]</span><span class="op" id="4875336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875342">bcol</span>&nbsp;<span class="op" id="4875347">:=</span>&nbsp;<span class="builtintype" id="4875350">uint16</span><span class="op" id="4875356">(</span><span class="ident" id="4875357"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875361">[</span><span class="num" id="4875362">8</span><span class="op" id="4875363">*</span><span class="ident" id="4875364"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875365">+</span><span class="num" id="4875366">4</span><span class="op" id="4875367">]</span><span class="op" id="4875368">)</span><span class="op" id="4875369">&lt;&lt;</span><span class="num" id="4875371">8</span>&nbsp;<span class="op" id="4875373">|</span>&nbsp;<span class="builtintype" id="4875375">uint16</span><span class="op" id="4875381">(</span><span class="ident" id="4875382"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875386">[</span><span class="num" id="4875387">8</span><span class="op" id="4875388">*</span><span class="ident" id="4875389"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875390">+</span><span class="num" id="4875391">5</span><span class="op" id="4875392">]</span><span class="op" id="4875393">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875399">acol</span>&nbsp;<span class="op" id="4875404">:=</span>&nbsp;<span class="builtintype" id="4875407">uint16</span><span class="op" id="4875413">(</span><span class="ident" id="4875414"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875418">[</span><span class="num" id="4875419">8</span><span class="op" id="4875420">*</span><span class="ident" id="4875421"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875422">+</span><span class="num" id="4875423">6</span><span class="op" id="4875424">]</span><span class="op" id="4875425">)</span><span class="op" id="4875426">&lt;&lt;</span><span class="num" id="4875428">8</span>&nbsp;<span class="op" id="4875430">|</span>&nbsp;<span class="builtintype" id="4875432">uint16</span><span class="op" id="4875438">(</span><span class="ident" id="4875439"><a href="/image/png/reader.go.html#4871549">cdat</a></span><span class="op" id="4875443">[</span><span class="num" id="4875444">8</span><span class="op" id="4875445">*</span><span class="ident" id="4875446"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875447">+</span><span class="num" id="4875448">7</span><span class="op" id="4875449">]</span><span class="op" id="4875450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875456"><a href="/image/png/reader.go.html#4869678">nrgba64</a></span><span class="op" id="4875463">.</span><span class="ident" id="4875464">SetNRGBA64</span><span class="op" id="4875474">(</span><span class="ident" id="4875475"><a href="/image/png/reader.go.html#4875199">x</a></span><span class="op" id="4875476">,</span>&nbsp;<span class="ident" id="4875478"><a href="/image/png/reader.go.html#4871391">y</a></span><span class="op" id="4875479">,</span>&nbsp;<span class="ident" id="4875481"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4875486">.</span><span class="ident" id="4875487">NRGBA64</span><span class="op" id="4875494">{</span><span class="ident" id="4875495"><a href="/image/png/reader.go.html#4875228">rcol</a></span><span class="op" id="4875499">,</span>&nbsp;<span class="ident" id="4875501"><a href="/image/png/reader.go.html#4875285">gcol</a></span><span class="op" id="4875505">,</span>&nbsp;<span class="ident" id="4875507"><a href="/image/png/reader.go.html#4875342">bcol</a></span><span class="op" id="4875511">,</span>&nbsp;<span class="ident" id="4875513"><a href="/image/png/reader.go.html#4875399">acol</a></span><span class="op" id="4875517">}</span><span class="op" id="4875518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4875532">//&nbsp;The&nbsp;current&nbsp;row&nbsp;for&nbsp;y&nbsp;is&nbsp;the&nbsp;previous&nbsp;row&nbsp;for&nbsp;y+1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875588"><a href="/image/png/reader.go.html#4871356">pr</a></span><span class="op" id="4875590">,</span>&nbsp;<span class="ident" id="4875592"><a href="/image/png/reader.go.html#4871326">cr</a></span>&nbsp;<span class="op" id="4875595">=</span>&nbsp;<span class="ident" id="4875597"><a href="/image/png/reader.go.html#4871326">cr</a></span><span class="op" id="4875599">,</span>&nbsp;<span class="ident" id="4875601"><a href="/image/png/reader.go.html#4871356">pr</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875605">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875609">return</span>&nbsp;<span class="ident" id="4875616"><a href="/image/png/reader.go.html#4869704">img</a></span><span class="op" id="4875619">,</span>&nbsp;<span class="ident" id="4875621">nil</span><br>
<span class="lineno">585</span><span class="op" id="4875625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4875628">//&nbsp;mergePassInto&nbsp;merges&nbsp;a&nbsp;single&nbsp;pass&nbsp;into&nbsp;a&nbsp;full&nbsp;sized&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="4875691">func</span>&nbsp;<span class="op" id="4875696">(</span><span class="ident" id="4875697">d</span>&nbsp;<span class="op" id="4875699">*</span><span class="ident" id="4875700"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4875707">)</span>&nbsp;<span class="ident" id="4875709">mergePassInto</span><span class="op" id="4875722">(</span><span class="ident" id="4875723">dst</span>&nbsp;<span class="ident" id="4875727"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4875732">.</span><span class="ident" id="4875733">Image</span><span class="op" id="4875738">,</span>&nbsp;<span class="ident" id="4875740">src</span>&nbsp;<span class="ident" id="4875744"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4875749">.</span><span class="ident" id="4875750">Image</span><span class="op" id="4875755">,</span>&nbsp;<span class="ident" id="4875757">pass</span>&nbsp;<span class="builtintype" id="4875762">int</span><span class="op" id="4875765">)</span>&nbsp;<span class="op" id="4875767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875770">p</span>&nbsp;<span class="op" id="4875772">:=</span>&nbsp;<span class="ident" id="4875775"><a href="/image/png/reader.go.html#4861977">interlacing</a></span><span class="op" id="4875786">[</span><span class="ident" id="4875787"><a href="/image/png/reader.go.html#4875757">pass</a></span><span class="op" id="4875791">]</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875794">var</span>&nbsp;<span class="op" id="4875798">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875802">srcPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4875816">[</span><span class="op" id="4875817">]</span><span class="builtintype" id="4875818">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875826">dstPix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4875840">[</span><span class="op" id="4875841">]</span><span class="builtintype" id="4875842">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875850">stride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4875864">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875870">rect</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4875884"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4875889">.</span><span class="ident" id="4875890">Rectangle</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875902">bytesPerPixel</span>&nbsp;<span class="builtintype" id="4875916">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4875921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875924">switch</span>&nbsp;<span class="ident" id="4875931">target</span>&nbsp;<span class="op" id="4875938">:=</span>&nbsp;<span class="ident" id="4875941"><a href="/image/png/reader.go.html#4875723">dst</a></span><span class="op" id="4875944">.</span><span class="op" id="4875945">(</span><span class="keyword" id="4875946">type</span><span class="op" id="4875950">)</span>&nbsp;<span class="op" id="4875952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4875955">case</span>&nbsp;<span class="op" id="4875960">*</span><span class="ident" id="4875961"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4875966">.</span><span class="ident" id="4875967">Alpha</span><span class="op" id="4875972">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4875976"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4875983">=</span>&nbsp;<span class="ident" id="4875985"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4875988">.</span><span class="op" id="4875989">(</span><span class="op" id="4875990">*</span><span class="ident" id="4875991"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4875996">.</span><span class="ident" id="4875997">Alpha</span><span class="op" id="4876002">)</span><span class="op" id="4876003">.</span><span class="ident" id="4876004">Pix</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876010"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876016">,</span>&nbsp;<span class="ident" id="4876018"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876024">,</span>&nbsp;<span class="ident" id="4876026"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876031">=</span>&nbsp;<span class="ident" id="4876033"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876039">.</span><span class="ident" id="4876040">Pix</span><span class="op" id="4876043">,</span>&nbsp;<span class="ident" id="4876045"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876051">.</span><span class="ident" id="4876052">Stride</span><span class="op" id="4876058">,</span>&nbsp;<span class="ident" id="4876060"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876066">.</span><span class="ident" id="4876067">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876074"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876088">=</span>&nbsp;<span class="num" id="4876090">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876093">case</span>&nbsp;<span class="op" id="4876098">*</span><span class="ident" id="4876099"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876104">.</span><span class="ident" id="4876105">Alpha16</span><span class="op" id="4876112">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876116"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876123">=</span>&nbsp;<span class="ident" id="4876125"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876128">.</span><span class="op" id="4876129">(</span><span class="op" id="4876130">*</span><span class="ident" id="4876131"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876136">.</span><span class="ident" id="4876137">Alpha16</span><span class="op" id="4876144">)</span><span class="op" id="4876145">.</span><span class="ident" id="4876146">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876152"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876158">,</span>&nbsp;<span class="ident" id="4876160"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876166">,</span>&nbsp;<span class="ident" id="4876168"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876173">=</span>&nbsp;<span class="ident" id="4876175"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876181">.</span><span class="ident" id="4876182">Pix</span><span class="op" id="4876185">,</span>&nbsp;<span class="ident" id="4876187"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876193">.</span><span class="ident" id="4876194">Stride</span><span class="op" id="4876200">,</span>&nbsp;<span class="ident" id="4876202"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876208">.</span><span class="ident" id="4876209">Rect</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876216"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876230">=</span>&nbsp;<span class="num" id="4876232">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876235">case</span>&nbsp;<span class="op" id="4876240">*</span><span class="ident" id="4876241"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876246">.</span><span class="ident" id="4876247">Gray</span><span class="op" id="4876251">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876255"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876262">=</span>&nbsp;<span class="ident" id="4876264"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876267">.</span><span class="op" id="4876268">(</span><span class="op" id="4876269">*</span><span class="ident" id="4876270"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876275">.</span><span class="ident" id="4876276">Gray</span><span class="op" id="4876280">)</span><span class="op" id="4876281">.</span><span class="ident" id="4876282">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876288"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876294">,</span>&nbsp;<span class="ident" id="4876296"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876302">,</span>&nbsp;<span class="ident" id="4876304"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876309">=</span>&nbsp;<span class="ident" id="4876311"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876317">.</span><span class="ident" id="4876318">Pix</span><span class="op" id="4876321">,</span>&nbsp;<span class="ident" id="4876323"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876329">.</span><span class="ident" id="4876330">Stride</span><span class="op" id="4876336">,</span>&nbsp;<span class="ident" id="4876338"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876344">.</span><span class="ident" id="4876345">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876352"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876366">=</span>&nbsp;<span class="num" id="4876368">1</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876371">case</span>&nbsp;<span class="op" id="4876376">*</span><span class="ident" id="4876377"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876382">.</span><span class="ident" id="4876383">Gray16</span><span class="op" id="4876389">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876393"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876400">=</span>&nbsp;<span class="ident" id="4876402"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876405">.</span><span class="op" id="4876406">(</span><span class="op" id="4876407">*</span><span class="ident" id="4876408"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876413">.</span><span class="ident" id="4876414">Gray16</span><span class="op" id="4876420">)</span><span class="op" id="4876421">.</span><span class="ident" id="4876422">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876428"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876434">,</span>&nbsp;<span class="ident" id="4876436"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876442">,</span>&nbsp;<span class="ident" id="4876444"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876449">=</span>&nbsp;<span class="ident" id="4876451"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876457">.</span><span class="ident" id="4876458">Pix</span><span class="op" id="4876461">,</span>&nbsp;<span class="ident" id="4876463"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876469">.</span><span class="ident" id="4876470">Stride</span><span class="op" id="4876476">,</span>&nbsp;<span class="ident" id="4876478"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876484">.</span><span class="ident" id="4876485">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876492"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876506">=</span>&nbsp;<span class="num" id="4876508">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876511">case</span>&nbsp;<span class="op" id="4876516">*</span><span class="ident" id="4876517"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876522">.</span><span class="ident" id="4876523">NRGBA</span><span class="op" id="4876528">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876532"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876539">=</span>&nbsp;<span class="ident" id="4876541"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876544">.</span><span class="op" id="4876545">(</span><span class="op" id="4876546">*</span><span class="ident" id="4876547"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876552">.</span><span class="ident" id="4876553">NRGBA</span><span class="op" id="4876558">)</span><span class="op" id="4876559">.</span><span class="ident" id="4876560">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876566"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876572">,</span>&nbsp;<span class="ident" id="4876574"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876580">,</span>&nbsp;<span class="ident" id="4876582"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876587">=</span>&nbsp;<span class="ident" id="4876589"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876595">.</span><span class="ident" id="4876596">Pix</span><span class="op" id="4876599">,</span>&nbsp;<span class="ident" id="4876601"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876607">.</span><span class="ident" id="4876608">Stride</span><span class="op" id="4876614">,</span>&nbsp;<span class="ident" id="4876616"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876622">.</span><span class="ident" id="4876623">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876630"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876644">=</span>&nbsp;<span class="num" id="4876646">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876649">case</span>&nbsp;<span class="op" id="4876654">*</span><span class="ident" id="4876655"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876660">.</span><span class="ident" id="4876661">NRGBA64</span><span class="op" id="4876668">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876672"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876679">=</span>&nbsp;<span class="ident" id="4876681"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876684">.</span><span class="op" id="4876685">(</span><span class="op" id="4876686">*</span><span class="ident" id="4876687"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876692">.</span><span class="ident" id="4876693">NRGBA64</span><span class="op" id="4876700">)</span><span class="op" id="4876701">.</span><span class="ident" id="4876702">Pix</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876708"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876714">,</span>&nbsp;<span class="ident" id="4876716"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876722">,</span>&nbsp;<span class="ident" id="4876724"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876729">=</span>&nbsp;<span class="ident" id="4876731"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876737">.</span><span class="ident" id="4876738">Pix</span><span class="op" id="4876741">,</span>&nbsp;<span class="ident" id="4876743"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876749">.</span><span class="ident" id="4876750">Stride</span><span class="op" id="4876756">,</span>&nbsp;<span class="ident" id="4876758"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876764">.</span><span class="ident" id="4876765">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876772"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876786">=</span>&nbsp;<span class="num" id="4876788">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876791">case</span>&nbsp;<span class="op" id="4876796">*</span><span class="ident" id="4876797"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876802">.</span><span class="ident" id="4876803">Paletted</span><span class="op" id="4876811">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876815"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876822">=</span>&nbsp;<span class="ident" id="4876824"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876827">.</span><span class="op" id="4876828">(</span><span class="op" id="4876829">*</span><span class="ident" id="4876830"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876835">.</span><span class="ident" id="4876836">Paletted</span><span class="op" id="4876844">)</span><span class="op" id="4876845">.</span><span class="ident" id="4876846">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876852"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876858">,</span>&nbsp;<span class="ident" id="4876860"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4876866">,</span>&nbsp;<span class="ident" id="4876868"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4876873">=</span>&nbsp;<span class="ident" id="4876875"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876881">.</span><span class="ident" id="4876882">Pix</span><span class="op" id="4876885">,</span>&nbsp;<span class="ident" id="4876887"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876893">.</span><span class="ident" id="4876894">Stride</span><span class="op" id="4876900">,</span>&nbsp;<span class="ident" id="4876902"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4876908">.</span><span class="ident" id="4876909">Rect</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876916"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4876930">=</span>&nbsp;<span class="num" id="4876932">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4876935">case</span>&nbsp;<span class="op" id="4876940">*</span><span class="ident" id="4876941"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876946">.</span><span class="ident" id="4876947">RGBA</span><span class="op" id="4876951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876955"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4876962">=</span>&nbsp;<span class="ident" id="4876964"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4876967">.</span><span class="op" id="4876968">(</span><span class="op" id="4876969">*</span><span class="ident" id="4876970"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4876975">.</span><span class="ident" id="4876976">RGBA</span><span class="op" id="4876980">)</span><span class="op" id="4876981">.</span><span class="ident" id="4876982">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4876988"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4876994">,</span>&nbsp;<span class="ident" id="4876996"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4877002">,</span>&nbsp;<span class="ident" id="4877004"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4877009">=</span>&nbsp;<span class="ident" id="4877011"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877017">.</span><span class="ident" id="4877018">Pix</span><span class="op" id="4877021">,</span>&nbsp;<span class="ident" id="4877023"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877029">.</span><span class="ident" id="4877030">Stride</span><span class="op" id="4877036">,</span>&nbsp;<span class="ident" id="4877038"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877044">.</span><span class="ident" id="4877045">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877052"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4877066">=</span>&nbsp;<span class="num" id="4877068">4</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877071">case</span>&nbsp;<span class="op" id="4877076">*</span><span class="ident" id="4877077"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4877082">.</span><span class="ident" id="4877083">RGBA64</span><span class="op" id="4877089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877093"><a href="/image/png/reader.go.html#4875802">srcPix</a></span>&nbsp;<span class="op" id="4877100">=</span>&nbsp;<span class="ident" id="4877102"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4877105">.</span><span class="op" id="4877106">(</span><span class="op" id="4877107">*</span><span class="ident" id="4877108"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4877113">.</span><span class="ident" id="4877114">RGBA64</span><span class="op" id="4877120">)</span><span class="op" id="4877121">.</span><span class="ident" id="4877122">Pix</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877128"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4877134">,</span>&nbsp;<span class="ident" id="4877136"><a href="/image/png/reader.go.html#4875850">stride</a></span><span class="op" id="4877142">,</span>&nbsp;<span class="ident" id="4877144"><a href="/image/png/reader.go.html#4875870">rect</a></span>&nbsp;<span class="op" id="4877149">=</span>&nbsp;<span class="ident" id="4877151"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877157">.</span><span class="ident" id="4877158">Pix</span><span class="op" id="4877161">,</span>&nbsp;<span class="ident" id="4877163"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877169">.</span><span class="ident" id="4877170">Stride</span><span class="op" id="4877176">,</span>&nbsp;<span class="ident" id="4877178"><a href="/image/png/reader.go.html#4875931">target</a></span><span class="op" id="4877184">.</span><span class="ident" id="4877185">Rect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877192"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span>&nbsp;<span class="op" id="4877206">=</span>&nbsp;<span class="num" id="4877208">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877211">}</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877214">s</span><span class="op" id="4877215">,</span>&nbsp;<span class="ident" id="4877217">bounds</span>&nbsp;<span class="op" id="4877224">:=</span>&nbsp;<span class="num" id="4877227">0</span><span class="op" id="4877228">,</span>&nbsp;<span class="ident" id="4877230"><a href="/image/png/reader.go.html#4875740">src</a></span><span class="op" id="4877233">.</span><span class="ident" id="4877234">Bounds</span><span class="op" id="4877240">(</span><span class="op" id="4877241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877244">for</span>&nbsp;<span class="ident" id="4877248">y</span>&nbsp;<span class="op" id="4877250">:=</span>&nbsp;<span class="ident" id="4877253"><a href="/image/png/reader.go.html#4877217">bounds</a></span><span class="op" id="4877259">.</span><span class="ident" id="4877260">Min</span><span class="op" id="4877263">.</span><span class="ident" id="4877264">Y</span><span class="op" id="4877265">;</span>&nbsp;<span class="ident" id="4877267"><a href="/image/png/reader.go.html#4877248">y</a></span>&nbsp;<span class="op" id="4877269">&lt;</span>&nbsp;<span class="ident" id="4877271"><a href="/image/png/reader.go.html#4877217">bounds</a></span><span class="op" id="4877277">.</span><span class="ident" id="4877278">Max</span><span class="op" id="4877281">.</span><span class="ident" id="4877282">Y</span><span class="op" id="4877283">;</span>&nbsp;<span class="ident" id="4877285"><a href="/image/png/reader.go.html#4877248">y</a></span><span class="op" id="4877286">++</span>&nbsp;<span class="op" id="4877289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877293">dBase</span>&nbsp;<span class="op" id="4877299">:=</span>&nbsp;<span class="op" id="4877302">(</span><span class="ident" id="4877303"><a href="/image/png/reader.go.html#4877248">y</a></span><span class="op" id="4877304">*</span><span class="ident" id="4877305"><a href="/image/png/reader.go.html#4875770">p</a></span><span class="op" id="4877306">.</span><span class="ident" id="4877307">yFactor</span><span class="op" id="4877314">+</span><span class="ident" id="4877315"><a href="/image/png/reader.go.html#4875770">p</a></span><span class="op" id="4877316">.</span><span class="ident" id="4877317">yOffset</span><span class="op" id="4877324">-</span><span class="ident" id="4877325"><a href="/image/png/reader.go.html#4875870">rect</a></span><span class="op" id="4877329">.</span><span class="ident" id="4877330">Min</span><span class="op" id="4877333">.</span><span class="ident" id="4877334">Y</span><span class="op" id="4877335">)</span><span class="op" id="4877336">*</span><span class="ident" id="4877337"><a href="/image/png/reader.go.html#4875850">stride</a></span>&nbsp;<span class="op" id="4877344">+</span>&nbsp;<span class="op" id="4877346">(</span><span class="ident" id="4877347"><a href="/image/png/reader.go.html#4875770">p</a></span><span class="op" id="4877348">.</span><span class="ident" id="4877349">xOffset</span><span class="op" id="4877356">-</span><span class="ident" id="4877357"><a href="/image/png/reader.go.html#4875870">rect</a></span><span class="op" id="4877361">.</span><span class="ident" id="4877362">Min</span><span class="op" id="4877365">.</span><span class="ident" id="4877366">X</span><span class="op" id="4877367">)</span><span class="op" id="4877368">*</span><span class="ident" id="4877369"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877385">for</span>&nbsp;<span class="ident" id="4877389">x</span>&nbsp;<span class="op" id="4877391">:=</span>&nbsp;<span class="ident" id="4877394"><a href="/image/png/reader.go.html#4877217">bounds</a></span><span class="op" id="4877400">.</span><span class="ident" id="4877401">Min</span><span class="op" id="4877404">.</span><span class="ident" id="4877405">X</span><span class="op" id="4877406">;</span>&nbsp;<span class="ident" id="4877408"><a href="/image/png/reader.go.html#4877389">x</a></span>&nbsp;<span class="op" id="4877410">&lt;</span>&nbsp;<span class="ident" id="4877412"><a href="/image/png/reader.go.html#4877217">bounds</a></span><span class="op" id="4877418">.</span><span class="ident" id="4877419">Max</span><span class="op" id="4877422">.</span><span class="ident" id="4877423">X</span><span class="op" id="4877424">;</span>&nbsp;<span class="ident" id="4877426"><a href="/image/png/reader.go.html#4877389">x</a></span><span class="op" id="4877427">++</span>&nbsp;<span class="op" id="4877430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877435">d</span>&nbsp;<span class="op" id="4877437">:=</span>&nbsp;<span class="ident" id="4877440"><a href="/image/png/reader.go.html#4877293">dBase</a></span>&nbsp;<span class="op" id="4877446">+</span>&nbsp;<span class="ident" id="4877448"><a href="/image/png/reader.go.html#4877389">x</a></span><span class="op" id="4877449">*</span><span class="ident" id="4877450"><a href="/image/png/reader.go.html#4875770">p</a></span><span class="op" id="4877451">.</span><span class="ident" id="4877452">xFactor</span><span class="op" id="4877459">*</span><span class="ident" id="4877460"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4877477">copy</span><span class="op" id="4877481">(</span><span class="ident" id="4877482"><a href="/image/png/reader.go.html#4875826">dstPix</a></span><span class="op" id="4877488">[</span><span class="ident" id="4877489"><a href="/image/png/reader.go.html#4877435">d</a></span><span class="op" id="4877490">:</span><span class="op" id="4877491">]</span><span class="op" id="4877492">,</span>&nbsp;<span class="ident" id="4877494"><a href="/image/png/reader.go.html#4875802">srcPix</a></span><span class="op" id="4877500">[</span><span class="ident" id="4877501"><a href="/image/png/reader.go.html#4877214">s</a></span><span class="op" id="4877502">:</span><span class="ident" id="4877503"><a href="/image/png/reader.go.html#4877214">s</a></span><span class="op" id="4877504">+</span><span class="ident" id="4877505"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span><span class="op" id="4877518">]</span><span class="op" id="4877519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877524"><a href="/image/png/reader.go.html#4877214">s</a></span>&nbsp;<span class="op" id="4877526">+=</span>&nbsp;<span class="ident" id="4877529"><a href="/image/png/reader.go.html#4875902">bytesPerPixel</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877548">}</span><br>
<span class="lineno"></span><span class="op" id="4877550">}</span><br>
<span class="lineno">645</span><br>
<span class="lineno"></span><span class="keyword" id="4877553">func</span>&nbsp;<span class="op" id="4877558">(</span><span class="ident" id="4877559">d</span>&nbsp;<span class="op" id="4877561">*</span><span class="ident" id="4877562"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4877569">)</span>&nbsp;<span class="ident" id="4877571">parseIDAT</span><span class="op" id="4877580">(</span><span class="ident" id="4877581">length</span>&nbsp;<span class="builtintype" id="4877588">uint32</span><span class="op" id="4877594">)</span>&nbsp;<span class="op" id="4877596">(</span><span class="ident" id="4877597">err</span>&nbsp;<span class="builtintype" id="4877601">error</span><span class="op" id="4877606">)</span>&nbsp;<span class="op" id="4877608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877611"><a href="/image/png/reader.go.html#4877559">d</a></span><span class="op" id="4877612">.</span><span class="ident" id="4877613">idatLength</span>&nbsp;<span class="op" id="4877624">=</span>&nbsp;<span class="ident" id="4877626"><a href="/image/png/reader.go.html#4877581">length</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877634"><a href="/image/png/reader.go.html#4877559">d</a></span><span class="op" id="4877635">.</span><span class="ident" id="4877636">img</span><span class="op" id="4877639">,</span>&nbsp;<span class="ident" id="4877641"><a href="/image/png/reader.go.html#4877597">err</a></span>&nbsp;<span class="op" id="4877645">=</span>&nbsp;<span class="ident" id="4877647"><a href="/image/png/reader.go.html#4877559">d</a></span><span class="op" id="4877648">.</span><span class="ident" id="4877649">decode</span><span class="op" id="4877655">(</span><span class="op" id="4877656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877659">if</span>&nbsp;<span class="ident" id="4877662"><a href="/image/png/reader.go.html#4877597">err</a></span>&nbsp;<span class="op" id="4877666">!=</span>&nbsp;<span class="ident" id="4877669">nil</span>&nbsp;<span class="op" id="4877673">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877677">return</span>&nbsp;<span class="ident" id="4877684"><a href="/image/png/reader.go.html#4877597">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877689">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877692">return</span>&nbsp;<span class="ident" id="4877699"><a href="/image/png/reader.go.html#4877559">d</a></span><span class="op" id="4877700">.</span><span class="ident" id="4877701">verifyChecksum</span><span class="op" id="4877715">(</span><span class="op" id="4877716">)</span><br>
<span class="lineno"></span><span class="op" id="4877718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">655</span><span class="keyword" id="4877721">func</span>&nbsp;<span class="op" id="4877726">(</span><span class="ident" id="4877727">d</span>&nbsp;<span class="op" id="4877729">*</span><span class="ident" id="4877730"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4877737">)</span>&nbsp;<span class="ident" id="4877739">parseIEND</span><span class="op" id="4877748">(</span><span class="ident" id="4877749">length</span>&nbsp;<span class="builtintype" id="4877756">uint32</span><span class="op" id="4877762">)</span>&nbsp;<span class="builtintype" id="4877764">error</span>&nbsp;<span class="op" id="4877770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877773">if</span>&nbsp;<span class="ident" id="4877776"><a href="/image/png/reader.go.html#4877749">length</a></span>&nbsp;<span class="op" id="4877783">!=</span>&nbsp;<span class="num" id="4877786">0</span>&nbsp;<span class="op" id="4877788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877792">return</span>&nbsp;<span class="ident" id="4877799"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4877810">(</span><span class="string" id="4877811">&#34;bad&nbsp;IEND&nbsp;length&#34;</span><span class="op" id="4877828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4877831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877834">return</span>&nbsp;<span class="ident" id="4877841"><a href="/image/png/reader.go.html#4877727">d</a></span><span class="op" id="4877842">.</span><span class="ident" id="4877843">verifyChecksum</span><span class="op" id="4877857">(</span><span class="op" id="4877858">)</span><br>
<span class="lineno">660</span><span class="op" id="4877860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4877863">func</span>&nbsp;<span class="op" id="4877868">(</span><span class="ident" id="4877869">d</span>&nbsp;<span class="op" id="4877871">*</span><span class="ident" id="4877872"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4877879">)</span>&nbsp;<span class="ident" id="4877881">parseChunk</span><span class="op" id="4877891">(</span><span class="op" id="4877892">)</span>&nbsp;<span class="builtintype" id="4877894">error</span>&nbsp;<span class="op" id="4877900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4877903">//&nbsp;Read&nbsp;the&nbsp;length&nbsp;and&nbsp;chunk&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4877939">n</span><span class="op" id="4877940">,</span>&nbsp;<span class="ident" id="4877942">err</span>&nbsp;<span class="op" id="4877946">:=</span>&nbsp;<span class="ident" id="4877949"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4877951">.</span><span class="ident" id="4877952">ReadFull</span><span class="op" id="4877960">(</span><span class="ident" id="4877961"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4877962">.</span><span class="ident" id="4877963">r</span><span class="op" id="4877964">,</span>&nbsp;<span class="ident" id="4877966"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4877967">.</span><span class="ident" id="4877968">tmp</span><span class="op" id="4877971">[</span><span class="op" id="4877972">:</span><span class="num" id="4877973">8</span><span class="op" id="4877974">]</span><span class="op" id="4877975">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877978">if</span>&nbsp;<span class="ident" id="4877981"><a href="/image/png/reader.go.html#4877942">err</a></span>&nbsp;<span class="op" id="4877985">!=</span>&nbsp;<span class="ident" id="4877988">nil</span>&nbsp;<span class="op" id="4877992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4877996">return</span>&nbsp;<span class="ident" id="4878003"><a href="/image/png/reader.go.html#4877942">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878011">length</span>&nbsp;<span class="op" id="4878018">:=</span>&nbsp;<span class="ident" id="4878021"><a href="/image/png/reader.go.html#4861086">binary</a></span><span class="op" id="4878027">.</span><span class="ident" id="4878028">BigEndian</span><span class="op" id="4878037">.</span><span class="ident" id="4878038">Uint32</span><span class="op" id="4878044">(</span><span class="ident" id="4878045"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878046">.</span><span class="ident" id="4878047">tmp</span><span class="op" id="4878050">[</span><span class="op" id="4878051">:</span><span class="num" id="4878052">4</span><span class="op" id="4878053">]</span><span class="op" id="4878054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878057"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878058">.</span><span class="ident" id="4878059">crc</span><span class="op" id="4878062">.</span><span class="ident" id="4878063">Reset</span><span class="op" id="4878068">(</span><span class="op" id="4878069">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878072"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878073">.</span><span class="ident" id="4878074">crc</span><span class="op" id="4878077">.</span><span class="ident" id="4878078">Write</span><span class="op" id="4878083">(</span><span class="ident" id="4878084"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878085">.</span><span class="ident" id="4878086">tmp</span><span class="op" id="4878089">[</span><span class="num" id="4878090">4</span><span class="op" id="4878091">:</span><span class="num" id="4878092">8</span><span class="op" id="4878093">]</span><span class="op" id="4878094">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4878098">//&nbsp;Read&nbsp;the&nbsp;chunk&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878123">switch</span>&nbsp;<span class="builtintype" id="4878130">string</span><span class="op" id="4878136">(</span><span class="ident" id="4878137"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878138">.</span><span class="ident" id="4878139">tmp</span><span class="op" id="4878142">[</span><span class="num" id="4878143">4</span><span class="op" id="4878144">:</span><span class="num" id="4878145">8</span><span class="op" id="4878146">]</span><span class="op" id="4878147">)</span>&nbsp;<span class="op" id="4878149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878152">case</span>&nbsp;<span class="string" id="4878157">&#34;IHDR&#34;</span><span class="op" id="4878163">:</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878167">if</span>&nbsp;<span class="ident" id="4878170"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878171">.</span><span class="ident" id="4878172">stage</span>&nbsp;<span class="op" id="4878178">!=</span>&nbsp;<span class="ident" id="4878181"><a href="/image/png/reader.go.html#4862435">dsStart</a></span>&nbsp;<span class="op" id="4878189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878194">return</span>&nbsp;<span class="ident" id="4878201"><a href="/image/png/reader.go.html#4862992">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878223"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878224">.</span><span class="ident" id="4878225">stage</span>&nbsp;<span class="op" id="4878231">=</span>&nbsp;<span class="ident" id="4878233"><a href="/image/png/reader.go.html#4862451">dsSeenIHDR</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878246">return</span>&nbsp;<span class="ident" id="4878253"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878254">.</span><span class="ident" id="4878255">parseIHDR</span><span class="op" id="4878264">(</span><span class="ident" id="4878265"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878271">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878274">case</span>&nbsp;<span class="string" id="4878279">&#34;PLTE&#34;</span><span class="op" id="4878285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878289">if</span>&nbsp;<span class="ident" id="4878292"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878293">.</span><span class="ident" id="4878294">stage</span>&nbsp;<span class="op" id="4878300">!=</span>&nbsp;<span class="ident" id="4878303"><a href="/image/png/reader.go.html#4862451">dsSeenIHDR</a></span>&nbsp;<span class="op" id="4878314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878319">return</span>&nbsp;<span class="ident" id="4878326"><a href="/image/png/reader.go.html#4862992">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878348"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878349">.</span><span class="ident" id="4878350">stage</span>&nbsp;<span class="op" id="4878356">=</span>&nbsp;<span class="ident" id="4878358"><a href="/image/png/reader.go.html#4862463">dsSeenPLTE</a></span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878371">return</span>&nbsp;<span class="ident" id="4878378"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878379">.</span><span class="ident" id="4878380">parsePLTE</span><span class="op" id="4878389">(</span><span class="ident" id="4878390"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878399">case</span>&nbsp;<span class="string" id="4878404">&#34;tRNS&#34;</span><span class="op" id="4878410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878414">if</span>&nbsp;<span class="ident" id="4878417"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878418">.</span><span class="ident" id="4878419">stage</span>&nbsp;<span class="op" id="4878425">!=</span>&nbsp;<span class="ident" id="4878428"><a href="/image/png/reader.go.html#4862463">dsSeenPLTE</a></span>&nbsp;<span class="op" id="4878439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878444">return</span>&nbsp;<span class="ident" id="4878451"><a href="/image/png/reader.go.html#4862992">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878469">}</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878473">return</span>&nbsp;<span class="ident" id="4878480"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878481">.</span><span class="ident" id="4878482">parsetRNS</span><span class="op" id="4878491">(</span><span class="ident" id="4878492"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878501">case</span>&nbsp;<span class="string" id="4878506">&#34;IDAT&#34;</span><span class="op" id="4878512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878516">if</span>&nbsp;<span class="ident" id="4878519"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878520">.</span><span class="ident" id="4878521">stage</span>&nbsp;<span class="op" id="4878527">&lt;</span>&nbsp;<span class="ident" id="4878529"><a href="/image/png/reader.go.html#4862451">dsSeenIHDR</a></span>&nbsp;<span class="op" id="4878540">||</span>&nbsp;<span class="ident" id="4878543"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878544">.</span><span class="ident" id="4878545">stage</span>&nbsp;<span class="op" id="4878551">&gt;</span>&nbsp;<span class="ident" id="4878553"><a href="/image/png/reader.go.html#4862475">dsSeenIDAT</a></span>&nbsp;<span class="op" id="4878564">||</span>&nbsp;<span class="op" id="4878567">(</span><span class="ident" id="4878568"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878569">.</span><span class="ident" id="4878570">cb</span>&nbsp;<span class="op" id="4878573">==</span>&nbsp;<span class="ident" id="4878576"><a href="/image/png/reader.go.html#4861460">cbP8</a></span>&nbsp;<span class="op" id="4878581">&amp;&amp;</span>&nbsp;<span class="ident" id="4878584"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878585">.</span><span class="ident" id="4878586">stage</span>&nbsp;<span class="op" id="4878592">==</span>&nbsp;<span class="ident" id="4878595"><a href="/image/png/reader.go.html#4862451">dsSeenIHDR</a></span><span class="op" id="4878605">)</span>&nbsp;<span class="op" id="4878607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878612">return</span>&nbsp;<span class="ident" id="4878619"><a href="/image/png/reader.go.html#4862992">chunkOrderError</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878637">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878641"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878642">.</span><span class="ident" id="4878643">stage</span>&nbsp;<span class="op" id="4878649">=</span>&nbsp;<span class="ident" id="4878651"><a href="/image/png/reader.go.html#4862475">dsSeenIDAT</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878664">return</span>&nbsp;<span class="ident" id="4878671"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878672">.</span><span class="ident" id="4878673">parseIDAT</span><span class="op" id="4878682">(</span><span class="ident" id="4878683"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878692">case</span>&nbsp;<span class="string" id="4878697">&#34;IEND&#34;</span><span class="op" id="4878703">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878707">if</span>&nbsp;<span class="ident" id="4878710"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878711">.</span><span class="ident" id="4878712">stage</span>&nbsp;<span class="op" id="4878718">!=</span>&nbsp;<span class="ident" id="4878721"><a href="/image/png/reader.go.html#4862475">dsSeenIDAT</a></span>&nbsp;<span class="op" id="4878732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878737">return</span>&nbsp;<span class="ident" id="4878744"><a href="/image/png/reader.go.html#4862992">chunkOrderError</a></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878766"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878767">.</span><span class="ident" id="4878768">stage</span>&nbsp;<span class="op" id="4878774">=</span>&nbsp;<span class="ident" id="4878776"><a href="/image/png/reader.go.html#4862487">dsSeenIEND</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878789">return</span>&nbsp;<span class="ident" id="4878796"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878797">.</span><span class="ident" id="4878798">parseIEND</span><span class="op" id="4878807">(</span><span class="ident" id="4878808"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4878817">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4878820">//&nbsp;Ignore&nbsp;this&nbsp;chunk&nbsp;(of&nbsp;a&nbsp;known&nbsp;length).</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878863">var</span>&nbsp;<span class="ident" id="4878867">ignored</span>&nbsp;<span class="op" id="4878875">[</span><span class="num" id="4878876">4096</span><span class="op" id="4878880">]</span><span class="builtintype" id="4878881">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878887">for</span>&nbsp;<span class="ident" id="4878891"><a href="/image/png/reader.go.html#4878011">length</a></span>&nbsp;<span class="op" id="4878898">&gt;</span>&nbsp;<span class="num" id="4878900">0</span>&nbsp;<span class="op" id="4878902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4878906"><a href="/image/png/reader.go.html#4877939">n</a></span><span class="op" id="4878907">,</span>&nbsp;<span class="ident" id="4878909"><a href="/image/png/reader.go.html#4877942">err</a></span>&nbsp;<span class="op" id="4878913">=</span>&nbsp;<span class="ident" id="4878915"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4878917">.</span><span class="ident" id="4878918">ReadFull</span><span class="op" id="4878926">(</span><span class="ident" id="4878927"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4878928">.</span><span class="ident" id="4878929">r</span><span class="op" id="4878930">,</span>&nbsp;<span class="ident" id="4878932"><a href="/image/png/reader.go.html#4878867">ignored</a></span><span class="op" id="4878939">[</span><span class="op" id="4878940">:</span><span class="ident" id="4878941"><a href="/image/png/reader.go.html#4863264">min</a></span><span class="op" id="4878944">(</span><span class="builtinfunc" id="4878945">len</span><span class="op" id="4878948">(</span><span class="ident" id="4878949"><a href="/image/png/reader.go.html#4878867">ignored</a></span><span class="op" id="4878956">)</span><span class="op" id="4878957">,</span>&nbsp;<span class="builtintype" id="4878959">int</span><span class="op" id="4878962">(</span><span class="ident" id="4878963"><a href="/image/png/reader.go.html#4878011">length</a></span><span class="op" id="4878969">)</span><span class="op" id="4878970">)</span><span class="op" id="4878971">]</span><span class="op" id="4878972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878976">if</span>&nbsp;<span class="ident" id="4878979"><a href="/image/png/reader.go.html#4877942">err</a></span>&nbsp;<span class="op" id="4878983">!=</span>&nbsp;<span class="ident" id="4878986">nil</span>&nbsp;<span class="op" id="4878990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4878995">return</span>&nbsp;<span class="ident" id="4879002"><a href="/image/png/reader.go.html#4877942">err</a></span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879012"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4879013">.</span><span class="ident" id="4879014">crc</span><span class="op" id="4879017">.</span><span class="ident" id="4879018">Write</span><span class="op" id="4879023">(</span><span class="ident" id="4879024"><a href="/image/png/reader.go.html#4878867">ignored</a></span><span class="op" id="4879031">[</span><span class="op" id="4879032">:</span><span class="ident" id="4879033"><a href="/image/png/reader.go.html#4877939">n</a></span><span class="op" id="4879034">]</span><span class="op" id="4879035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879039"><a href="/image/png/reader.go.html#4878011">length</a></span>&nbsp;<span class="op" id="4879046">-=</span>&nbsp;<span class="builtintype" id="4879049">uint32</span><span class="op" id="4879055">(</span><span class="ident" id="4879056"><a href="/image/png/reader.go.html#4877939">n</a></span><span class="op" id="4879057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879063">return</span>&nbsp;<span class="ident" id="4879070"><a href="/image/png/reader.go.html#4877869">d</a></span><span class="op" id="4879071">.</span><span class="ident" id="4879072">verifyChecksum</span><span class="op" id="4879086">(</span><span class="op" id="4879087">)</span><br>
<span class="lineno">715</span><span class="op" id="4879089">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4879092">func</span>&nbsp;<span class="op" id="4879097">(</span><span class="ident" id="4879098">d</span>&nbsp;<span class="op" id="4879100">*</span><span class="ident" id="4879101"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4879108">)</span>&nbsp;<span class="ident" id="4879110">verifyChecksum</span><span class="op" id="4879124">(</span><span class="op" id="4879125">)</span>&nbsp;<span class="builtintype" id="4879127">error</span>&nbsp;<span class="op" id="4879133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879136">if</span>&nbsp;<span class="ident" id="4879139">_</span><span class="op" id="4879140">,</span>&nbsp;<span class="ident" id="4879142">err</span>&nbsp;<span class="op" id="4879146">:=</span>&nbsp;<span class="ident" id="4879149"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879151">.</span><span class="ident" id="4879152">ReadFull</span><span class="op" id="4879160">(</span><span class="ident" id="4879161"><a href="/image/png/reader.go.html#4879098">d</a></span><span class="op" id="4879162">.</span><span class="ident" id="4879163">r</span><span class="op" id="4879164">,</span>&nbsp;<span class="ident" id="4879166"><a href="/image/png/reader.go.html#4879098">d</a></span><span class="op" id="4879167">.</span><span class="ident" id="4879168">tmp</span><span class="op" id="4879171">[</span><span class="op" id="4879172">:</span><span class="num" id="4879173">4</span><span class="op" id="4879174">]</span><span class="op" id="4879175">)</span><span class="op" id="4879176">;</span>&nbsp;<span class="ident" id="4879178"><a href="/image/png/reader.go.html#4879142">err</a></span>&nbsp;<span class="op" id="4879182">!=</span>&nbsp;<span class="ident" id="4879185">nil</span>&nbsp;<span class="op" id="4879189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879193">return</span>&nbsp;<span class="ident" id="4879200"><a href="/image/png/reader.go.html#4879142">err</a></span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879208">if</span>&nbsp;<span class="ident" id="4879211"><a href="/image/png/reader.go.html#4861086">binary</a></span><span class="op" id="4879217">.</span><span class="ident" id="4879218">BigEndian</span><span class="op" id="4879227">.</span><span class="ident" id="4879228">Uint32</span><span class="op" id="4879234">(</span><span class="ident" id="4879235"><a href="/image/png/reader.go.html#4879098">d</a></span><span class="op" id="4879236">.</span><span class="ident" id="4879237">tmp</span><span class="op" id="4879240">[</span><span class="op" id="4879241">:</span><span class="num" id="4879242">4</span><span class="op" id="4879243">]</span><span class="op" id="4879244">)</span>&nbsp;<span class="op" id="4879246">!=</span>&nbsp;<span class="ident" id="4879249"><a href="/image/png/reader.go.html#4879098">d</a></span><span class="op" id="4879250">.</span><span class="ident" id="4879251">crc</span><span class="op" id="4879254">.</span><span class="ident" id="4879255">Sum32</span><span class="op" id="4879260">(</span><span class="op" id="4879261">)</span>&nbsp;<span class="op" id="4879263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879267">return</span>&nbsp;<span class="ident" id="4879274"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4879285">(</span><span class="string" id="4879286">&#34;invalid&nbsp;checksum&#34;</span><span class="op" id="4879304">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879310">return</span>&nbsp;<span class="ident" id="4879317">nil</span><br>
<span class="lineno">725</span><span class="op" id="4879321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4879324">func</span>&nbsp;<span class="op" id="4879329">(</span><span class="ident" id="4879330">d</span>&nbsp;<span class="op" id="4879332">*</span><span class="ident" id="4879333"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4879340">)</span>&nbsp;<span class="ident" id="4879342">checkHeader</span><span class="op" id="4879353">(</span><span class="op" id="4879354">)</span>&nbsp;<span class="builtintype" id="4879356">error</span>&nbsp;<span class="op" id="4879362">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879365">_</span><span class="op" id="4879366">,</span>&nbsp;<span class="ident" id="4879368">err</span>&nbsp;<span class="op" id="4879372">:=</span>&nbsp;<span class="ident" id="4879375"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879377">.</span><span class="ident" id="4879378">ReadFull</span><span class="op" id="4879386">(</span><span class="ident" id="4879387"><a href="/image/png/reader.go.html#4879330">d</a></span><span class="op" id="4879388">.</span><span class="ident" id="4879389">r</span><span class="op" id="4879390">,</span>&nbsp;<span class="ident" id="4879392"><a href="/image/png/reader.go.html#4879330">d</a></span><span class="op" id="4879393">.</span><span class="ident" id="4879394">tmp</span><span class="op" id="4879397">[</span><span class="op" id="4879398">:</span><span class="builtinfunc" id="4879399">len</span><span class="op" id="4879402">(</span><span class="ident" id="4879403"><a href="/image/png/reader.go.html#4862507">pngHeader</a></span><span class="op" id="4879412">)</span><span class="op" id="4879413">]</span><span class="op" id="4879414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879417">if</span>&nbsp;<span class="ident" id="4879420"><a href="/image/png/reader.go.html#4879368">err</a></span>&nbsp;<span class="op" id="4879424">!=</span>&nbsp;<span class="ident" id="4879427">nil</span>&nbsp;<span class="op" id="4879431">{</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879435">return</span>&nbsp;<span class="ident" id="4879442"><a href="/image/png/reader.go.html#4879368">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879450">if</span>&nbsp;<span class="builtintype" id="4879453">string</span><span class="op" id="4879459">(</span><span class="ident" id="4879460"><a href="/image/png/reader.go.html#4879330">d</a></span><span class="op" id="4879461">.</span><span class="ident" id="4879462">tmp</span><span class="op" id="4879465">[</span><span class="op" id="4879466">:</span><span class="builtinfunc" id="4879467">len</span><span class="op" id="4879470">(</span><span class="ident" id="4879471"><a href="/image/png/reader.go.html#4862507">pngHeader</a></span><span class="op" id="4879480">)</span><span class="op" id="4879481">]</span><span class="op" id="4879482">)</span>&nbsp;<span class="op" id="4879484">!=</span>&nbsp;<span class="ident" id="4879487"><a href="/image/png/reader.go.html#4862507">pngHeader</a></span>&nbsp;<span class="op" id="4879497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879501">return</span>&nbsp;<span class="ident" id="4879508"><a href="/image/png/reader.go.html#4862884">FormatError</a></span><span class="op" id="4879519">(</span><span class="string" id="4879520">&#34;not&nbsp;a&nbsp;PNG&nbsp;file&#34;</span><span class="op" id="4879536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879539">}</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879542">return</span>&nbsp;<span class="ident" id="4879549">nil</span><br>
<span class="lineno"></span><span class="op" id="4879553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4879556">//&nbsp;Decode&nbsp;reads&nbsp;a&nbsp;PNG&nbsp;image&nbsp;from&nbsp;r&nbsp;and&nbsp;returns&nbsp;it&nbsp;as&nbsp;an&nbsp;image.Image.</span><br>
<span class="lineno"></span><span class="comment" id="4879625">//&nbsp;The&nbsp;type&nbsp;of&nbsp;Image&nbsp;returned&nbsp;depends&nbsp;on&nbsp;the&nbsp;PNG&nbsp;contents.</span><br>
<span class="lineno">740</span><span class="keyword" id="4879684">func</span>&nbsp;<span class="ident" id="4879689">Decode</span><span class="op" id="4879695">(</span><span class="ident" id="4879696">r</span>&nbsp;<span class="ident" id="4879698"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879700">.</span><span class="ident" id="4879701">Reader</span><span class="op" id="4879707">)</span>&nbsp;<span class="op" id="4879709">(</span><span class="ident" id="4879710"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4879715">.</span><span class="ident" id="4879716">Image</span><span class="op" id="4879721">,</span>&nbsp;<span class="builtintype" id="4879723">error</span><span class="op" id="4879728">)</span>&nbsp;<span class="op" id="4879730">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879733">d</span>&nbsp;<span class="op" id="4879735">:=</span>&nbsp;<span class="op" id="4879738">&amp;</span><span class="ident" id="4879739"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4879746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879750">r</span><span class="op" id="4879751">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4879755"><a href="/image/png/reader.go.html#4879696">r</a></span><span class="op" id="4879756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879760">crc</span><span class="op" id="4879763">:</span>&nbsp;<span class="ident" id="4879765"><a href="/image/png/reader.go.html#4861120">crc32</a></span><span class="op" id="4879770">.</span><span class="ident" id="4879771">NewIEEE</span><span class="op" id="4879778">(</span><span class="op" id="4879779">)</span><span class="op" id="4879780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879783">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879786">if</span>&nbsp;<span class="ident" id="4879789">err</span>&nbsp;<span class="op" id="4879793">:=</span>&nbsp;<span class="ident" id="4879796"><a href="/image/png/reader.go.html#4879733">d</a></span><span class="op" id="4879797">.</span><span class="ident" id="4879798">checkHeader</span><span class="op" id="4879809">(</span><span class="op" id="4879810">)</span><span class="op" id="4879811">;</span>&nbsp;<span class="ident" id="4879813"><a href="/image/png/reader.go.html#4879789">err</a></span>&nbsp;<span class="op" id="4879817">!=</span>&nbsp;<span class="ident" id="4879820">nil</span>&nbsp;<span class="op" id="4879824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879828">if</span>&nbsp;<span class="ident" id="4879831"><a href="/image/png/reader.go.html#4879789">err</a></span>&nbsp;<span class="op" id="4879835">==</span>&nbsp;<span class="ident" id="4879838"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879840">.</span><span class="ident" id="4879841">EOF</span>&nbsp;<span class="op" id="4879845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879850"><a href="/image/png/reader.go.html#4879789">err</a></span>&nbsp;<span class="op" id="4879854">=</span>&nbsp;<span class="ident" id="4879856"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879858">.</span><span class="ident" id="4879859">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879882">return</span>&nbsp;<span class="ident" id="4879889">nil</span><span class="op" id="4879892">,</span>&nbsp;<span class="ident" id="4879894"><a href="/image/png/reader.go.html#4879789">err</a></span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4879899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879902">for</span>&nbsp;<span class="ident" id="4879906"><a href="/image/png/reader.go.html#4879733">d</a></span><span class="op" id="4879907">.</span><span class="ident" id="4879908">stage</span>&nbsp;<span class="op" id="4879914">!=</span>&nbsp;<span class="ident" id="4879917"><a href="/image/png/reader.go.html#4862487">dsSeenIEND</a></span>&nbsp;<span class="op" id="4879928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879932">if</span>&nbsp;<span class="ident" id="4879935">err</span>&nbsp;<span class="op" id="4879939">:=</span>&nbsp;<span class="ident" id="4879942"><a href="/image/png/reader.go.html#4879733">d</a></span><span class="op" id="4879943">.</span><span class="ident" id="4879944">parseChunk</span><span class="op" id="4879954">(</span><span class="op" id="4879955">)</span><span class="op" id="4879956">;</span>&nbsp;<span class="ident" id="4879958"><a href="/image/png/reader.go.html#4879935">err</a></span>&nbsp;<span class="op" id="4879962">!=</span>&nbsp;<span class="ident" id="4879965">nil</span>&nbsp;<span class="op" id="4879969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4879974">if</span>&nbsp;<span class="ident" id="4879977"><a href="/image/png/reader.go.html#4879935">err</a></span>&nbsp;<span class="op" id="4879981">==</span>&nbsp;<span class="ident" id="4879984"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4879986">.</span><span class="ident" id="4879987">EOF</span>&nbsp;<span class="op" id="4879991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4879997"><a href="/image/png/reader.go.html#4879935">err</a></span>&nbsp;<span class="op" id="4880001">=</span>&nbsp;<span class="ident" id="4880003"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880005">.</span><span class="ident" id="4880006">ErrUnexpectedEOF</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880031">return</span>&nbsp;<span class="ident" id="4880038">nil</span><span class="op" id="4880041">,</span>&nbsp;<span class="ident" id="4880043"><a href="/image/png/reader.go.html#4879935">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880055">return</span>&nbsp;<span class="ident" id="4880062"><a href="/image/png/reader.go.html#4879733">d</a></span><span class="op" id="4880063">.</span><span class="ident" id="4880064">img</span><span class="op" id="4880067">,</span>&nbsp;<span class="ident" id="4880069">nil</span><br>
<span class="lineno">760</span><span class="op" id="4880073">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4880076">//&nbsp;DecodeConfig&nbsp;returns&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;a&nbsp;PNG&nbsp;image&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="4880154">//&nbsp;decoding&nbsp;the&nbsp;entire&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="4880184">func</span>&nbsp;<span class="ident" id="4880189">DecodeConfig</span><span class="op" id="4880201">(</span><span class="ident" id="4880202">r</span>&nbsp;<span class="ident" id="4880204"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880206">.</span><span class="ident" id="4880207">Reader</span><span class="op" id="4880213">)</span>&nbsp;<span class="op" id="4880215">(</span><span class="ident" id="4880216"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4880221">.</span><span class="ident" id="4880222">Config</span><span class="op" id="4880228">,</span>&nbsp;<span class="builtintype" id="4880230">error</span><span class="op" id="4880235">)</span>&nbsp;<span class="op" id="4880237">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880240">d</span>&nbsp;<span class="op" id="4880242">:=</span>&nbsp;<span class="op" id="4880245">&amp;</span><span class="ident" id="4880246"><a href="/image/png/reader.go.html#4862545">decoder</a></span><span class="op" id="4880253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880257">r</span><span class="op" id="4880258">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4880262"><a href="/image/png/reader.go.html#4880202">r</a></span><span class="op" id="4880263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880267">crc</span><span class="op" id="4880270">:</span>&nbsp;<span class="ident" id="4880272"><a href="/image/png/reader.go.html#4861120">crc32</a></span><span class="op" id="4880277">.</span><span class="ident" id="4880278">NewIEEE</span><span class="op" id="4880285">(</span><span class="op" id="4880286">)</span><span class="op" id="4880287">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880293">if</span>&nbsp;<span class="ident" id="4880296">err</span>&nbsp;<span class="op" id="4880300">:=</span>&nbsp;<span class="ident" id="4880303"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880304">.</span><span class="ident" id="4880305">checkHeader</span><span class="op" id="4880316">(</span><span class="op" id="4880317">)</span><span class="op" id="4880318">;</span>&nbsp;<span class="ident" id="4880320"><a href="/image/png/reader.go.html#4880296">err</a></span>&nbsp;<span class="op" id="4880324">!=</span>&nbsp;<span class="ident" id="4880327">nil</span>&nbsp;<span class="op" id="4880331">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880335">if</span>&nbsp;<span class="ident" id="4880338"><a href="/image/png/reader.go.html#4880296">err</a></span>&nbsp;<span class="op" id="4880342">==</span>&nbsp;<span class="ident" id="4880345"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880347">.</span><span class="ident" id="4880348">EOF</span>&nbsp;<span class="op" id="4880352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880357"><a href="/image/png/reader.go.html#4880296">err</a></span>&nbsp;<span class="op" id="4880361">=</span>&nbsp;<span class="ident" id="4880363"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880365">.</span><span class="ident" id="4880366">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880389">return</span>&nbsp;<span class="ident" id="4880396"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4880401">.</span><span class="ident" id="4880402">Config</span><span class="op" id="4880408">{</span><span class="op" id="4880409">}</span><span class="op" id="4880410">,</span>&nbsp;<span class="ident" id="4880412"><a href="/image/png/reader.go.html#4880296">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880417">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880420">for</span>&nbsp;<span class="op" id="4880424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880428">if</span>&nbsp;<span class="ident" id="4880431">err</span>&nbsp;<span class="op" id="4880435">:=</span>&nbsp;<span class="ident" id="4880438"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880439">.</span><span class="ident" id="4880440">parseChunk</span><span class="op" id="4880450">(</span><span class="op" id="4880451">)</span><span class="op" id="4880452">;</span>&nbsp;<span class="ident" id="4880454"><a href="/image/png/reader.go.html#4880431">err</a></span>&nbsp;<span class="op" id="4880458">!=</span>&nbsp;<span class="ident" id="4880461">nil</span>&nbsp;<span class="op" id="4880465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880470">if</span>&nbsp;<span class="ident" id="4880473"><a href="/image/png/reader.go.html#4880431">err</a></span>&nbsp;<span class="op" id="4880477">==</span>&nbsp;<span class="ident" id="4880480"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880482">.</span><span class="ident" id="4880483">EOF</span>&nbsp;<span class="op" id="4880487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880493"><a href="/image/png/reader.go.html#4880431">err</a></span>&nbsp;<span class="op" id="4880497">=</span>&nbsp;<span class="ident" id="4880499"><a href="/image/png/reader.go.html#4861158">io</a></span><span class="op" id="4880501">.</span><span class="ident" id="4880502">ErrUnexpectedEOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880522">}</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880527">return</span>&nbsp;<span class="ident" id="4880534"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4880539">.</span><span class="ident" id="4880540">Config</span><span class="op" id="4880546">{</span><span class="op" id="4880547">}</span><span class="op" id="4880548">,</span>&nbsp;<span class="ident" id="4880550"><a href="/image/png/reader.go.html#4880431">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880560">paletted</span>&nbsp;<span class="op" id="4880569">:=</span>&nbsp;<span class="ident" id="4880572"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880573">.</span><span class="ident" id="4880574">cb</span>&nbsp;<span class="op" id="4880577">==</span>&nbsp;<span class="ident" id="4880580"><a href="/image/png/reader.go.html#4861460">cbP8</a></span>&nbsp;<span class="op" id="4880585">||</span>&nbsp;<span class="ident" id="4880588"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880589">.</span><span class="ident" id="4880590">cb</span>&nbsp;<span class="op" id="4880593">==</span>&nbsp;<span class="ident" id="4880596"><a href="/image/png/reader.go.html#4861454">cbP4</a></span>&nbsp;<span class="op" id="4880601">||</span>&nbsp;<span class="ident" id="4880604"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880605">.</span><span class="ident" id="4880606">cb</span>&nbsp;<span class="op" id="4880609">==</span>&nbsp;<span class="ident" id="4880612"><a href="/image/png/reader.go.html#4861448">cbP2</a></span>&nbsp;<span class="op" id="4880617">||</span>&nbsp;<span class="ident" id="4880620"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880621">.</span><span class="ident" id="4880622">cb</span>&nbsp;<span class="op" id="4880625">==</span>&nbsp;<span class="ident" id="4880628"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880635">if</span>&nbsp;<span class="ident" id="4880638"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880639">.</span><span class="ident" id="4880640">stage</span>&nbsp;<span class="op" id="4880646">==</span>&nbsp;<span class="ident" id="4880649"><a href="/image/png/reader.go.html#4862451">dsSeenIHDR</a></span>&nbsp;<span class="op" id="4880660">&amp;&amp;</span>&nbsp;<span class="op" id="4880663">!</span><span class="ident" id="4880664"><a href="/image/png/reader.go.html#4880560">paletted</a></span>&nbsp;<span class="op" id="4880673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880678">break</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880690">if</span>&nbsp;<span class="ident" id="4880693"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880694">.</span><span class="ident" id="4880695">stage</span>&nbsp;<span class="op" id="4880701">==</span>&nbsp;<span class="ident" id="4880704"><a href="/image/png/reader.go.html#4862463">dsSeenPLTE</a></span>&nbsp;<span class="op" id="4880715">&amp;&amp;</span>&nbsp;<span class="ident" id="4880718"><a href="/image/png/reader.go.html#4880560">paletted</a></span>&nbsp;<span class="op" id="4880727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880732">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4880743">}</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880746">var</span>&nbsp;<span class="ident" id="4880750">cm</span>&nbsp;<span class="ident" id="4880753"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4880758">.</span><span class="ident" id="4880759">Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880766">switch</span>&nbsp;<span class="ident" id="4880773"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880774">.</span><span class="ident" id="4880775">cb</span>&nbsp;<span class="op" id="4880778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880781">case</span>&nbsp;<span class="ident" id="4880786"><a href="/image/png/reader.go.html#4861404">cbG1</a></span><span class="op" id="4880790">,</span>&nbsp;<span class="ident" id="4880792"><a href="/image/png/reader.go.html#4861410">cbG2</a></span><span class="op" id="4880796">,</span>&nbsp;<span class="ident" id="4880798"><a href="/image/png/reader.go.html#4861416">cbG4</a></span><span class="op" id="4880802">,</span>&nbsp;<span class="ident" id="4880804"><a href="/image/png/reader.go.html#4861422">cbG8</a></span><span class="op" id="4880808">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880812"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4880815">=</span>&nbsp;<span class="ident" id="4880817"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4880822">.</span><span class="ident" id="4880823">GrayModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880834">case</span>&nbsp;<span class="ident" id="4880839"><a href="/image/png/reader.go.html#4861428">cbGA8</a></span><span class="op" id="4880844">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880848"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4880851">=</span>&nbsp;<span class="ident" id="4880853"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4880858">.</span><span class="ident" id="4880859">NRGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880871">case</span>&nbsp;<span class="ident" id="4880876"><a href="/image/png/reader.go.html#4861435">cbTC8</a></span><span class="op" id="4880881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880885"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4880888">=</span>&nbsp;<span class="ident" id="4880890"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4880895">.</span><span class="ident" id="4880896">RGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880907">case</span>&nbsp;<span class="ident" id="4880912"><a href="/image/png/reader.go.html#4861442">cbP1</a></span><span class="op" id="4880916">,</span>&nbsp;<span class="ident" id="4880918"><a href="/image/png/reader.go.html#4861448">cbP2</a></span><span class="op" id="4880922">,</span>&nbsp;<span class="ident" id="4880924"><a href="/image/png/reader.go.html#4861454">cbP4</a></span><span class="op" id="4880928">,</span>&nbsp;<span class="ident" id="4880930"><a href="/image/png/reader.go.html#4861460">cbP8</a></span><span class="op" id="4880934">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880938"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4880941">=</span>&nbsp;<span class="ident" id="4880943"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4880944">.</span><span class="ident" id="4880945">palette</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880954">case</span>&nbsp;<span class="ident" id="4880959"><a href="/image/png/reader.go.html#4861466">cbTCA8</a></span><span class="op" id="4880965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4880969"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4880972">=</span>&nbsp;<span class="ident" id="4880974"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4880979">.</span><span class="ident" id="4880980">NRGBAModel</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4880992">case</span>&nbsp;<span class="ident" id="4880997"><a href="/image/png/reader.go.html#4861474">cbG16</a></span><span class="op" id="4881002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881006"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4881009">=</span>&nbsp;<span class="ident" id="4881011"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4881016">.</span><span class="ident" id="4881017">Gray16Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881030">case</span>&nbsp;<span class="ident" id="4881035"><a href="/image/png/reader.go.html#4861481">cbGA16</a></span><span class="op" id="4881041">:</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881045"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4881048">=</span>&nbsp;<span class="ident" id="4881050"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4881055">.</span><span class="ident" id="4881056">NRGBA64Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881070">case</span>&nbsp;<span class="ident" id="4881075"><a href="/image/png/reader.go.html#4861489">cbTC16</a></span><span class="op" id="4881081">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881085"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4881088">=</span>&nbsp;<span class="ident" id="4881090"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4881095">.</span><span class="ident" id="4881096">RGBA64Model</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881109">case</span>&nbsp;<span class="ident" id="4881114"><a href="/image/png/reader.go.html#4861497">cbTCA16</a></span><span class="op" id="4881121">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881125"><a href="/image/png/reader.go.html#4880750">cm</a></span>&nbsp;<span class="op" id="4881128">=</span>&nbsp;<span class="ident" id="4881130"><a href="/image/png/reader.go.html#4861143">color</a></span><span class="op" id="4881135">.</span><span class="ident" id="4881136">NRGBA64Model</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4881153">return</span>&nbsp;<span class="ident" id="4881160"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4881165">.</span><span class="ident" id="4881166">Config</span><span class="op" id="4881172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881176">ColorModel</span><span class="op" id="4881186">:</span>&nbsp;<span class="ident" id="4881188"><a href="/image/png/reader.go.html#4880750">cm</a></span><span class="op" id="4881190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881194">Width</span><span class="op" id="4881199">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4881206"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4881207">.</span><span class="ident" id="4881208">width</span><span class="op" id="4881213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881217">Height</span><span class="op" id="4881223">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4881229"><a href="/image/png/reader.go.html#4880240">d</a></span><span class="op" id="4881230">.</span><span class="ident" id="4881231">height</span><span class="op" id="4881237">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4881240">}</span><span class="op" id="4881241">,</span>&nbsp;<span class="ident" id="4881243">nil</span><br>
<span class="lineno"></span><span class="op" id="4881247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4881250">func</span>&nbsp;<span class="ident" id="4881255">init</span><span class="op" id="4881259">(</span><span class="op" id="4881260">)</span>&nbsp;<span class="op" id="4881262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4881265"><a href="/image/png/reader.go.html#4861134">image</a></span><span class="op" id="4881270">.</span><span class="ident" id="4881271">RegisterFormat</span><span class="op" id="4881285">(</span><span class="string" id="4881286">&#34;png&#34;</span><span class="op" id="4881291">,</span>&nbsp;<span class="ident" id="4881293"><a href="/image/png/reader.go.html#4862507">pngHeader</a></span><span class="op" id="4881302">,</span>&nbsp;<span class="ident" id="4881304"><a href="/image/png/reader.go.html#4879689">Decode</a></span><span class="op" id="4881310">,</span>&nbsp;<span class="ident" id="4881312"><a href="/image/png/reader.go.html#4880189">DecodeConfig</a></span><span class="op" id="4881324">)</span><br>
<span class="lineno">820</span><span class="op" id="4881326">}</span>
</div>
</body>
</html>
