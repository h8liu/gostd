<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>math</h2>
<ul>
<li><a href="/gostd/math/abs.go.html">abs.go</a></li>
<li><a href="/gostd/math/acosh.go.html">acosh.go</a></li>
<li><a href="/gostd/math/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/math/asin.go.html">asin.go</a></li>
<li><a href="/gostd/math/asinh.go.html">asinh.go</a></li>
<li><a href="/gostd/math/atan.go.html">atan.go</a></li>
<li><a href="/gostd/math/atan2.go.html">atan2.go</a></li>
<li><a href="/gostd/math/atanh.go.html">atanh.go</a></li>
<li><a href="/gostd/math/bits.go.html">bits.go</a></li>
<li><a href="/gostd/math/cbrt.go.html">cbrt.go</a></li>
<li><a href="/gostd/math/const.go.html">const.go</a></li>
<li><a href="/gostd/math/copysign.go.html">copysign.go</a></li>
<li><a href="/gostd/math/dim.go.html">dim.go</a></li>
<li><a href="/gostd/math/erf.go.html">erf.go</a></li>
<li><a href="/gostd/math/exp.go.html">exp.go</a></li>
<li><a href="/gostd/math/expm1.go.html">expm1.go</a></li>
<li><a href="/gostd/math/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/math/floor.go.html">floor.go</a></li>
<li><a href="/gostd/math/frexp.go.html">frexp.go</a></li>
<li><a href="/gostd/math/gamma.go.html">gamma.go</a></li>
<li><a href="/gostd/math/hypot.go.html">hypot.go</a></li>
<li><a href="/gostd/math/j0.go.html">j0.go</a></li>
<li><a href="/gostd/math/j1.go.html">j1.go</a></li>
<li><a href="/gostd/math/jn.go.html">jn.go</a></li>
<li><a href="/gostd/math/ldexp.go.html">ldexp.go</a></li>
<li><a href="/gostd/math/lgamma.go.html">lgamma.go</a></li>
<li><a href="/gostd/math/log.go.html">log.go</a></li>
<li><a href="/gostd/math/log10.go.html">log10.go</a></li>
<li><a href="/gostd/math/log1p.go.html">log1p.go</a></li>
<li><a href="/gostd/math/logb.go.html">logb.go</a></li>
<li><a href="/gostd/math/mod.go.html">mod.go</a></li>
<li><a href="/gostd/math/modf.go.html">modf.go</a></li>
<li><a href="/gostd/math/nextafter.go.html">nextafter.go</a></li>
<li><a href="/gostd/math/pow.go.html" class="current">pow.go</a></li>
<li><a href="/gostd/math/pow10.go.html">pow10.go</a></li>
<li><a href="/gostd/math/remainder.go.html">remainder.go</a></li>
<li><a href="/gostd/math/signbit.go.html">signbit.go</a></li>
<li><a href="/gostd/math/sin.go.html">sin.go</a></li>
<li><a href="/gostd/math/sincos.go.html">sincos.go</a></li>
<li><a href="/gostd/math/sinh.go.html">sinh.go</a></li>
<li><a href="/gostd/math/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/math/tan.go.html">tan.go</a></li>
<li><a href="/gostd/math/tanh.go.html">tanh.go</a></li>
<li><a href="/gostd/math/unsafe.go.html">unsafe.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2202665">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2202720">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2202774">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2202825">package</span>&nbsp;<span class="ident" id="2202833">math</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2202839">func</span>&nbsp;<span class="ident" id="2202844">isOddInt</span><span class="op" id="2202852">(</span><span class="ident" id="2202853">x</span>&nbsp;<span class="builtintype" id="2202855">float64</span><span class="op" id="2202862">)</span>&nbsp;<span class="builtintype" id="2202864">bool</span>&nbsp;<span class="op" id="2202869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2202872">xi</span><span class="op" id="2202874">,</span>&nbsp;<span class="ident" id="2202876">xf</span>&nbsp;<span class="op" id="2202879">:=</span>&nbsp;<span class="ident" id="2202882">Modf</span><span class="op" id="2202886">(</span><span class="ident" id="2202887">x</span><span class="op" id="2202888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2202891">return</span>&nbsp;<span class="ident" id="2202898">xf</span>&nbsp;<span class="op" id="2202901">==</span>&nbsp;<span class="num" id="2202904">0</span>&nbsp;<span class="op" id="2202906">&amp;&amp;</span>&nbsp;<span class="ident" id="2202909">int64</span><span class="op" id="2202914">(</span><span class="ident" id="2202915">xi</span><span class="op" id="2202917">)</span><span class="op" id="2202918">&amp;</span><span class="num" id="2202919">1</span>&nbsp;<span class="op" id="2202921">==</span>&nbsp;<span class="num" id="2202924">1</span><br>
<span class="lineno">10</span><span class="op" id="2202926">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2202929">//&nbsp;Special&nbsp;cases&nbsp;taken&nbsp;from&nbsp;FreeBSD&#39;s&nbsp;/usr/src/lib/msun/src/e_pow.c</span><br>
<span class="lineno"></span><span class="comment" id="2202997">//&nbsp;updated&nbsp;by&nbsp;IEEE&nbsp;Std.&nbsp;754-2008&nbsp;&#34;Section&nbsp;9.2.1&nbsp;Special&nbsp;values&#34;.</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2203063">//&nbsp;Pow&nbsp;returns&nbsp;x**y,&nbsp;the&nbsp;base-x&nbsp;exponential&nbsp;of&nbsp;y.</span><br>
<span class="lineno"></span><span class="comment" id="2203113">//</span><br>
<span class="lineno"></span><span class="comment" id="2203116">//&nbsp;Special&nbsp;cases&nbsp;are&nbsp;(in&nbsp;order):</span><br>
<span class="lineno"></span><span class="comment" id="2203149">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;±0)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2203178">//&nbsp;&nbsp;&nbsp;&nbspPow(1,&nbsp;y)&nbsp;=&nbsp;1&nbsp;for&nbsp;any&nbsp;y</span><br>
<span class="lineno">20</span><span class="comment" id="2203205">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;1)&nbsp;=&nbsp;x&nbsp;for&nbsp;any&nbsp;x</span><br>
<span class="lineno"></span><span class="comment" id="2203232">//&nbsp;&nbsp;&nbsp;&nbspPow(NaN,&nbsp;y)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2203253">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;NaN)&nbsp;=&nbsp;NaN</span><br>
<span class="lineno"></span><span class="comment" id="2203274">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±Inf&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2203322">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;-Inf)&nbsp;=&nbsp;+Inf</span><br>
<span class="lineno">25</span><span class="comment" id="2203347">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;+Inf)&nbsp;=&nbsp;+0</span><br>
<span class="lineno"></span><span class="comment" id="2203370">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;finite&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2203432">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;±0&nbsp;for&nbsp;y&nbsp;an&nbsp;odd&nbsp;integer&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2203478">//&nbsp;&nbsp;&nbsp;&nbspPow(±0,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;finite&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;and&nbsp;not&nbsp;an&nbsp;odd&nbsp;integer</span><br>
<span class="lineno"></span><span class="comment" id="2203538">//&nbsp;&nbsp;&nbsp;&nbspPow(-1,&nbsp;±Inf)&nbsp;=&nbsp;1</span><br>
<span class="lineno">30</span><span class="comment" id="2203560">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2203595">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2203628">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;+Inf)&nbsp;=&nbsp;+0&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2203661">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;-Inf)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;|x|&nbsp;&lt;&nbsp;1</span><br>
<span class="lineno"></span><span class="comment" id="2203696">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+Inf&nbsp;for&nbsp;y&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno">35</span><span class="comment" id="2203729">//&nbsp;&nbsp;&nbsp;&nbspPow(+Inf,&nbsp;y)&nbsp;=&nbsp;+0&nbsp;for&nbsp;y&nbsp;&lt;&nbsp;0</span><br>
<span class="lineno"></span><span class="comment" id="2203760">//&nbsp;&nbsp;&nbsp;&nbspPow(-Inf,&nbsp;y)&nbsp;=&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno"></span><span class="comment" id="2203790">//&nbsp;&nbsp;&nbsp;&nbspPow(x,&nbsp;y)&nbsp;=&nbsp;NaN&nbsp;for&nbsp;finite&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;and&nbsp;finite&nbsp;non-integer&nbsp;y</span><br>
<span class="lineno"></span><span class="keyword" id="2203851">func</span>&nbsp;<span class="ident" id="2203856">Pow</span><span class="op" id="2203859">(</span><span class="ident" id="2203860">x</span><span class="op" id="2203861">,</span>&nbsp;<span class="ident" id="2203863">y</span>&nbsp;<span class="builtintype" id="2203865">float64</span><span class="op" id="2203872">)</span>&nbsp;<span class="builtintype" id="2203874">float64</span>&nbsp;<span class="op" id="2203882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203885">switch</span>&nbsp;<span class="op" id="2203892">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203895">case</span>&nbsp;<span class="ident" id="2203900">y</span>&nbsp;<span class="op" id="2203902">==</span>&nbsp;<span class="num" id="2203905">0</span>&nbsp;<span class="op" id="2203907">||</span>&nbsp;<span class="ident" id="2203910">x</span>&nbsp;<span class="op" id="2203912">==</span>&nbsp;<span class="num" id="2203915">1</span><span class="op" id="2203916">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203920">return</span>&nbsp;<span class="num" id="2203927">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203930">case</span>&nbsp;<span class="ident" id="2203935">y</span>&nbsp;<span class="op" id="2203937">==</span>&nbsp;<span class="num" id="2203940">1</span><span class="op" id="2203941">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203945">return</span>&nbsp;<span class="ident" id="2203952">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203955">case</span>&nbsp;<span class="ident" id="2203960">y</span>&nbsp;<span class="op" id="2203962">==</span>&nbsp;<span class="num" id="2203965">0.5</span><span class="op" id="2203968">:</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203972">return</span>&nbsp;<span class="ident" id="2203979">Sqrt</span><span class="op" id="2203983">(</span><span class="ident" id="2203984">x</span><span class="op" id="2203985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2203988">case</span>&nbsp;<span class="ident" id="2203993">y</span>&nbsp;<span class="op" id="2203995">==</span>&nbsp;<span class="op" id="2203998">-</span><span class="num" id="2203999">0.5</span><span class="op" id="2204002">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204006">return</span>&nbsp;<span class="num" id="2204013">1</span>&nbsp;<span class="op" id="2204015">/</span>&nbsp;<span class="ident" id="2204017">Sqrt</span><span class="op" id="2204021">(</span><span class="ident" id="2204022">x</span><span class="op" id="2204023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204026">case</span>&nbsp;<span class="ident" id="2204031">IsNaN</span><span class="op" id="2204036">(</span><span class="ident" id="2204037">x</span><span class="op" id="2204038">)</span>&nbsp;<span class="op" id="2204040">||</span>&nbsp;<span class="ident" id="2204043">IsNaN</span><span class="op" id="2204048">(</span><span class="ident" id="2204049">y</span><span class="op" id="2204050">)</span><span class="op" id="2204051">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204055">return</span>&nbsp;<span class="ident" id="2204062">NaN</span><span class="op" id="2204065">(</span><span class="op" id="2204066">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204069">case</span>&nbsp;<span class="ident" id="2204074">x</span>&nbsp;<span class="op" id="2204076">==</span>&nbsp;<span class="num" id="2204079">0</span><span class="op" id="2204080">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204084">switch</span>&nbsp;<span class="op" id="2204091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204095">case</span>&nbsp;<span class="ident" id="2204100">y</span>&nbsp;<span class="op" id="2204102">&lt;</span>&nbsp;<span class="num" id="2204104">0</span><span class="op" id="2204105">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204110">if</span>&nbsp;<span class="ident" id="2204113">isOddInt</span><span class="op" id="2204121">(</span><span class="ident" id="2204122">y</span><span class="op" id="2204123">)</span>&nbsp;<span class="op" id="2204125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204131">return</span>&nbsp;<span class="ident" id="2204138">Copysign</span><span class="op" id="2204146">(</span><span class="ident" id="2204147">Inf</span><span class="op" id="2204150">(</span><span class="num" id="2204151">1</span><span class="op" id="2204152">)</span><span class="op" id="2204153">,</span>&nbsp;<span class="ident" id="2204155">x</span><span class="op" id="2204156">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204166">return</span>&nbsp;<span class="ident" id="2204173">Inf</span><span class="op" id="2204176">(</span><span class="num" id="2204177">1</span><span class="op" id="2204178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204182">case</span>&nbsp;<span class="ident" id="2204187">y</span>&nbsp;<span class="op" id="2204189">&gt;</span>&nbsp;<span class="num" id="2204191">0</span><span class="op" id="2204192">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204197">if</span>&nbsp;<span class="ident" id="2204200">isOddInt</span><span class="op" id="2204208">(</span><span class="ident" id="2204209">y</span><span class="op" id="2204210">)</span>&nbsp;<span class="op" id="2204212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204218">return</span>&nbsp;<span class="ident" id="2204225">x</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204235">return</span>&nbsp;<span class="num" id="2204242">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204249">case</span>&nbsp;<span class="ident" id="2204254">IsInf</span><span class="op" id="2204259">(</span><span class="ident" id="2204260">y</span><span class="op" id="2204261">,</span>&nbsp;<span class="num" id="2204263">0</span><span class="op" id="2204264">)</span><span class="op" id="2204265">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204269">switch</span>&nbsp;<span class="op" id="2204276">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204280">case</span>&nbsp;<span class="ident" id="2204285">x</span>&nbsp;<span class="op" id="2204287">==</span>&nbsp;<span class="op" id="2204290">-</span><span class="num" id="2204291">1</span><span class="op" id="2204292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204297">return</span>&nbsp;<span class="num" id="2204304">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204308">case</span>&nbsp;<span class="op" id="2204313">(</span><span class="ident" id="2204314">Abs</span><span class="op" id="2204317">(</span><span class="ident" id="2204318">x</span><span class="op" id="2204319">)</span>&nbsp;<span class="op" id="2204321">&lt;</span>&nbsp;<span class="num" id="2204323">1</span><span class="op" id="2204324">)</span>&nbsp;<span class="op" id="2204326">==</span>&nbsp;<span class="ident" id="2204329">IsInf</span><span class="op" id="2204334">(</span><span class="ident" id="2204335">y</span><span class="op" id="2204336">,</span>&nbsp;<span class="num" id="2204338">1</span><span class="op" id="2204339">)</span><span class="op" id="2204340">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204345">return</span>&nbsp;<span class="num" id="2204352">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204356">default</span><span class="op" id="2204363">:</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204368">return</span>&nbsp;<span class="ident" id="2204375">Inf</span><span class="op" id="2204378">(</span><span class="num" id="2204379">1</span><span class="op" id="2204380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204387">case</span>&nbsp;<span class="ident" id="2204392">IsInf</span><span class="op" id="2204397">(</span><span class="ident" id="2204398">x</span><span class="op" id="2204399">,</span>&nbsp;<span class="num" id="2204401">0</span><span class="op" id="2204402">)</span><span class="op" id="2204403">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204407">if</span>&nbsp;<span class="ident" id="2204410">IsInf</span><span class="op" id="2204415">(</span><span class="ident" id="2204416">x</span><span class="op" id="2204417">,</span>&nbsp;<span class="op" id="2204419">-</span><span class="num" id="2204420">1</span><span class="op" id="2204421">)</span>&nbsp;<span class="op" id="2204423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204428">return</span>&nbsp;<span class="ident" id="2204435">Pow</span><span class="op" id="2204438">(</span><span class="num" id="2204439">1</span><span class="op" id="2204440">/</span><span class="ident" id="2204441">x</span><span class="op" id="2204442">,</span>&nbsp;<span class="op" id="2204444">-</span><span class="ident" id="2204445">y</span><span class="op" id="2204446">)</span>&nbsp;<span class="comment" id="2204448">//&nbsp;Pow(-0,&nbsp;-y)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204469">switch</span>&nbsp;<span class="op" id="2204476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204480">case</span>&nbsp;<span class="ident" id="2204485">y</span>&nbsp;<span class="op" id="2204487">&lt;</span>&nbsp;<span class="num" id="2204489">0</span><span class="op" id="2204490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204495">return</span>&nbsp;<span class="num" id="2204502">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204506">case</span>&nbsp;<span class="ident" id="2204511">y</span>&nbsp;<span class="op" id="2204513">&gt;</span>&nbsp;<span class="num" id="2204515">0</span><span class="op" id="2204516">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204521">return</span>&nbsp;<span class="ident" id="2204528">Inf</span><span class="op" id="2204531">(</span><span class="num" id="2204532">1</span><span class="op" id="2204533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204544">absy</span>&nbsp;<span class="op" id="2204549">:=</span>&nbsp;<span class="ident" id="2204552">y</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204555">flip</span>&nbsp;<span class="op" id="2204560">:=</span>&nbsp;<span class="builtintype" id="2204563">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204570">if</span>&nbsp;<span class="ident" id="2204573">absy</span>&nbsp;<span class="op" id="2204578">&lt;</span>&nbsp;<span class="num" id="2204580">0</span>&nbsp;<span class="op" id="2204582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204586">absy</span>&nbsp;<span class="op" id="2204591">=</span>&nbsp;<span class="op" id="2204593">-</span><span class="ident" id="2204594">absy</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204601">flip</span>&nbsp;<span class="op" id="2204606">=</span>&nbsp;<span class="builtintype" id="2204608">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204614">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204617">yi</span><span class="op" id="2204619">,</span>&nbsp;<span class="ident" id="2204621">yf</span>&nbsp;<span class="op" id="2204624">:=</span>&nbsp;<span class="ident" id="2204627">Modf</span><span class="op" id="2204631">(</span><span class="ident" id="2204632">absy</span><span class="op" id="2204636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204639">if</span>&nbsp;<span class="ident" id="2204642">yf</span>&nbsp;<span class="op" id="2204645">!=</span>&nbsp;<span class="num" id="2204648">0</span>&nbsp;<span class="op" id="2204650">&amp;&amp;</span>&nbsp;<span class="ident" id="2204653">x</span>&nbsp;<span class="op" id="2204655">&lt;</span>&nbsp;<span class="num" id="2204657">0</span>&nbsp;<span class="op" id="2204659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204663">return</span>&nbsp;<span class="ident" id="2204670">NaN</span><span class="op" id="2204673">(</span><span class="op" id="2204674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204680">if</span>&nbsp;<span class="ident" id="2204683">yi</span>&nbsp;<span class="op" id="2204686">&gt;=</span>&nbsp;<span class="num" id="2204689">1</span><span class="op" id="2204690">&lt;&lt;</span><span class="num" id="2204692">63</span>&nbsp;<span class="op" id="2204695">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204699">return</span>&nbsp;<span class="ident" id="2204706">Exp</span><span class="op" id="2204709">(</span><span class="ident" id="2204710">y</span>&nbsp;<span class="op" id="2204712">*</span>&nbsp;<span class="ident" id="2204714">Log</span><span class="op" id="2204717">(</span><span class="ident" id="2204718">x</span><span class="op" id="2204719">)</span><span class="op" id="2204720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204727">//&nbsp;ans&nbsp;=&nbsp;a1&nbsp;*&nbsp;2**ae&nbsp;(=&nbsp;1&nbsp;for&nbsp;now).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204763">a1</span>&nbsp;<span class="op" id="2204766">:=</span>&nbsp;<span class="num" id="2204769">1.0</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204774">ae</span>&nbsp;<span class="op" id="2204777">:=</span>&nbsp;<span class="num" id="2204780">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204784">//&nbsp;ans&nbsp;*=&nbsp;x**yf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204801">if</span>&nbsp;<span class="ident" id="2204804">yf</span>&nbsp;<span class="op" id="2204807">!=</span>&nbsp;<span class="num" id="2204810">0</span>&nbsp;<span class="op" id="2204812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2204816">if</span>&nbsp;<span class="ident" id="2204819">yf</span>&nbsp;<span class="op" id="2204822">&gt;</span>&nbsp;<span class="num" id="2204824">0.5</span>&nbsp;<span class="op" id="2204828">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204833">yf</span><span class="op" id="2204835">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204841">yi</span><span class="op" id="2204843">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2204852">a1</span>&nbsp;<span class="op" id="2204855">=</span>&nbsp;<span class="ident" id="2204857">Exp</span><span class="op" id="2204860">(</span><span class="ident" id="2204861">yf</span>&nbsp;<span class="op" id="2204864">*</span>&nbsp;<span class="ident" id="2204866">Log</span><span class="op" id="2204869">(</span><span class="ident" id="2204870">x</span><span class="op" id="2204871">)</span><span class="op" id="2204872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2204875">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204879">//&nbsp;ans&nbsp;*=&nbsp;x**yi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204896">//&nbsp;by&nbsp;multiplying&nbsp;in&nbsp;successive&nbsp;squarings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204939">//&nbsp;of&nbsp;x&nbsp;according&nbsp;to&nbsp;bits&nbsp;of&nbsp;yi.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2204973">//&nbsp;accumulate&nbsp;powers&nbsp;of&nbsp;two&nbsp;into&nbsp;exp.</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205012">x1</span><span class="op" id="2205014">,</span>&nbsp;<span class="ident" id="2205016">xe</span>&nbsp;<span class="op" id="2205019">:=</span>&nbsp;<span class="ident" id="2205022">Frexp</span><span class="op" id="2205027">(</span><span class="ident" id="2205028">x</span><span class="op" id="2205029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2205032">for</span>&nbsp;<span class="ident" id="2205036">i</span>&nbsp;<span class="op" id="2205038">:=</span>&nbsp;<span class="ident" id="2205041">int64</span><span class="op" id="2205046">(</span><span class="ident" id="2205047">yi</span><span class="op" id="2205049">)</span><span class="op" id="2205050">;</span>&nbsp;<span class="ident" id="2205052">i</span>&nbsp;<span class="op" id="2205054">!=</span>&nbsp;<span class="num" id="2205057">0</span><span class="op" id="2205058">;</span>&nbsp;<span class="ident" id="2205060">i</span>&nbsp;<span class="op" id="2205062">&gt;&gt;=</span>&nbsp;<span class="num" id="2205066">1</span>&nbsp;<span class="op" id="2205068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2205072">if</span>&nbsp;<span class="ident" id="2205075">i</span><span class="op" id="2205076">&amp;</span><span class="num" id="2205077">1</span>&nbsp;<span class="op" id="2205079">==</span>&nbsp;<span class="num" id="2205082">1</span>&nbsp;<span class="op" id="2205084">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205089">a1</span>&nbsp;<span class="op" id="2205092">*=</span>&nbsp;<span class="ident" id="2205095">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205101">ae</span>&nbsp;<span class="op" id="2205104">+=</span>&nbsp;<span class="ident" id="2205107">xe</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2205112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205116">x1</span>&nbsp;<span class="op" id="2205119">*=</span>&nbsp;<span class="ident" id="2205122">x1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205127">xe</span>&nbsp;<span class="op" id="2205130">&lt;&lt;=</span>&nbsp;<span class="num" id="2205134">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2205138">if</span>&nbsp;<span class="ident" id="2205141">x1</span>&nbsp;<span class="op" id="2205144">&lt;</span>&nbsp;<span class="num" id="2205146">.5</span>&nbsp;<span class="op" id="2205149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205154">x1</span>&nbsp;<span class="op" id="2205157">+=</span>&nbsp;<span class="ident" id="2205160">x1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205166">xe</span><span class="op" id="2205168">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2205173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2205176">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2205180">//&nbsp;ans&nbsp;=&nbsp;a1*2**ae</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2205199">//&nbsp;if&nbsp;flip&nbsp;{&nbsp;ans&nbsp;=&nbsp;1&nbsp;/&nbsp;ans&nbsp;}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2205229">//&nbsp;but&nbsp;in&nbsp;the&nbsp;opposite&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2205259">if</span>&nbsp;<span class="ident" id="2205262">flip</span>&nbsp;<span class="op" id="2205267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205271">a1</span>&nbsp;<span class="op" id="2205274">=</span>&nbsp;<span class="num" id="2205276">1</span>&nbsp;<span class="op" id="2205278">/</span>&nbsp;<span class="ident" id="2205280">a1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2205285">ae</span>&nbsp;<span class="op" id="2205288">=</span>&nbsp;<span class="op" id="2205290">-</span><span class="ident" id="2205291">ae</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2205295">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2205298">return</span>&nbsp;<span class="ident" id="2205305">Ldexp</span><span class="op" id="2205310">(</span><span class="ident" id="2205311">a1</span><span class="op" id="2205313">,</span>&nbsp;<span class="ident" id="2205315">ae</span><span class="op" id="2205317">)</span><br>
<span class="lineno"></span><span class="op" id="2205319">}</span>
</div>
</body>
</html>
