<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html" class="current">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3688877">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3688932">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3688986">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3689037">//&nbsp;Represents&nbsp;JSON&nbsp;data&nbsp;structure&nbsp;using&nbsp;native&nbsp;Go&nbsp;types:&nbsp;booleans,&nbsp;floats,</span><br>
<span class="lineno"></span><span class="comment" id="3689112">//&nbsp;strings,&nbsp;arrays,&nbsp;and&nbsp;maps.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3689143">package</span>&nbsp;<span class="ident" id="3689151">json</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3689157">import</span>&nbsp;<span class="op" id="3689164">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689167">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689176">&#34;encoding&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689188">&#34;encoding/base64&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689207">&#34;errors&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689217">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689224">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689235">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689246">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689257">&#34;unicode&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689268">&#34;unicode/utf16&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3689285">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3689300">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3689303">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;JSON-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result</span><br>
<span class="lineno">25</span><span class="comment" id="3689367">//&nbsp;in&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3689400">//</span><br>
<span class="lineno"></span><span class="comment" id="3689403">//&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;inverse&nbsp;of&nbsp;the&nbsp;encodings&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3689455">//&nbsp;Marshal&nbsp;uses,&nbsp;allocating&nbsp;maps,&nbsp;slices,&nbsp;and&nbsp;pointers&nbsp;as&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3689524">//&nbsp;with&nbsp;the&nbsp;following&nbsp;additional&nbsp;rules:</span><br>
<span class="lineno">30</span><span class="comment" id="3689564">//</span><br>
<span class="lineno"></span><span class="comment" id="3689567">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;pointer,&nbsp;Unmarshal&nbsp;first&nbsp;handles&nbsp;the&nbsp;case&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3689640">//&nbsp;the&nbsp;JSON&nbsp;being&nbsp;the&nbsp;JSON&nbsp;literal&nbsp;null.&nbsp;&nbsp;In&nbsp;that&nbsp;case,&nbsp;Unmarshal&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="3689711">//&nbsp;the&nbsp;pointer&nbsp;to&nbsp;nil.&nbsp;&nbsp;Otherwise,&nbsp;Unmarshal&nbsp;unmarshals&nbsp;the&nbsp;JSON&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3689781">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;at&nbsp;by&nbsp;the&nbsp;pointer.&nbsp;&nbsp;If&nbsp;the&nbsp;pointer&nbsp;is&nbsp;nil,&nbsp;Unmarshal</span><br>
<span class="lineno">35</span><span class="comment" id="3689855">//&nbsp;allocates&nbsp;a&nbsp;new&nbsp;value&nbsp;for&nbsp;it&nbsp;to&nbsp;point&nbsp;to.</span><br>
<span class="lineno"></span><span class="comment" id="3689900">//</span><br>
<span class="lineno"></span><span class="comment" id="3689903">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;a&nbsp;struct,&nbsp;Unmarshal&nbsp;matches&nbsp;incoming&nbsp;object</span><br>
<span class="lineno"></span><span class="comment" id="3689973">//&nbsp;keys&nbsp;to&nbsp;the&nbsp;keys&nbsp;used&nbsp;by&nbsp;Marshal&nbsp;(either&nbsp;the&nbsp;struct&nbsp;field&nbsp;name&nbsp;or&nbsp;its&nbsp;tag),</span><br>
<span class="lineno"></span><span class="comment" id="3690052">//&nbsp;preferring&nbsp;an&nbsp;exact&nbsp;match&nbsp;but&nbsp;also&nbsp;accepting&nbsp;a&nbsp;case-insensitive&nbsp;match.</span><br>
<span class="lineno">40</span><span class="comment" id="3690126">//</span><br>
<span class="lineno"></span><span class="comment" id="3690129">//&nbsp;To&nbsp;unmarshal&nbsp;JSON&nbsp;into&nbsp;an&nbsp;interface&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3690175">//&nbsp;Unmarshal&nbsp;stores&nbsp;one&nbsp;of&nbsp;these&nbsp;in&nbsp;the&nbsp;interface&nbsp;value:</span><br>
<span class="lineno"></span><span class="comment" id="3690232">//</span><br>
<span class="lineno"></span><span class="comment" id="3690235">//&nbsp;&nbsp;&nbsp;&nbspbool,&nbsp;for&nbsp;JSON&nbsp;booleans</span><br>
<span class="lineno">45</span><span class="comment" id="3690262">//&nbsp;&nbsp;&nbsp;&nbspfloat64,&nbsp;for&nbsp;JSON&nbsp;numbers</span><br>
<span class="lineno"></span><span class="comment" id="3690291">//&nbsp;&nbsp;&nbsp;&nbspstring,&nbsp;for&nbsp;JSON&nbsp;strings</span><br>
<span class="lineno"></span><span class="comment" id="3690319">//&nbsp;&nbsp;&nbsp;&nbsp[]interface{},&nbsp;for&nbsp;JSON&nbsp;arrays</span><br>
<span class="lineno"></span><span class="comment" id="3690353">//&nbsp;&nbsp;&nbsp;&nbspmap[string]interface{},&nbsp;for&nbsp;JSON&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3690397">//&nbsp;&nbsp;&nbsp;&nbspnil&nbsp;for&nbsp;JSON&nbsp;null</span><br>
<span class="lineno">50</span><span class="comment" id="3690418">//</span><br>
<span class="lineno"></span><span class="comment" id="3690421">//&nbsp;If&nbsp;a&nbsp;JSON&nbsp;value&nbsp;is&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;given&nbsp;target&nbsp;type,</span><br>
<span class="lineno"></span><span class="comment" id="3690484">//&nbsp;or&nbsp;if&nbsp;a&nbsp;JSON&nbsp;number&nbsp;overflows&nbsp;the&nbsp;target&nbsp;type,&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="3690544">//&nbsp;skips&nbsp;that&nbsp;field&nbsp;and&nbsp;completes&nbsp;the&nbsp;unmarshalling&nbsp;as&nbsp;best&nbsp;it&nbsp;can.</span><br>
<span class="lineno"></span><span class="comment" id="3690612">//&nbsp;If&nbsp;no&nbsp;more&nbsp;serious&nbsp;errors&nbsp;are&nbsp;encountered,&nbsp;Unmarshal&nbsp;returns</span><br>
<span class="lineno">55</span><span class="comment" id="3690676">//&nbsp;an&nbsp;UnmarshalTypeError&nbsp;describing&nbsp;the&nbsp;earliest&nbsp;such&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3690737">//</span><br>
<span class="lineno"></span><span class="comment" id="3690740">//&nbsp;The&nbsp;JSON&nbsp;null&nbsp;value&nbsp;unmarshals&nbsp;into&nbsp;an&nbsp;interface,&nbsp;map,&nbsp;pointer,&nbsp;or&nbsp;slice</span><br>
<span class="lineno"></span><span class="comment" id="3690816">//&nbsp;by&nbsp;setting&nbsp;that&nbsp;Go&nbsp;value&nbsp;to&nbsp;nil.&nbsp;Because&nbsp;null&nbsp;is&nbsp;often&nbsp;used&nbsp;in&nbsp;JSON&nbsp;to&nbsp;mean</span><br>
<span class="lineno"></span><span class="comment" id="3690895">//&nbsp;``not&nbsp;present,&#39;&#39;&nbsp;unmarshaling&nbsp;a&nbsp;JSON&nbsp;null&nbsp;into&nbsp;any&nbsp;other&nbsp;Go&nbsp;type&nbsp;has&nbsp;no&nbsp;effect</span><br>
<span class="lineno">60</span><span class="comment" id="3690977">//&nbsp;on&nbsp;the&nbsp;value&nbsp;and&nbsp;produces&nbsp;no&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3691016">//</span><br>
<span class="lineno"></span><span class="comment" id="3691019">//&nbsp;When&nbsp;unmarshaling&nbsp;quoted&nbsp;strings,&nbsp;invalid&nbsp;UTF-8&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3691073">//&nbsp;invalid&nbsp;UTF-16&nbsp;surrogate&nbsp;pairs&nbsp;are&nbsp;not&nbsp;treated&nbsp;as&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3691136">//&nbsp;Instead,&nbsp;they&nbsp;are&nbsp;replaced&nbsp;by&nbsp;the&nbsp;Unicode&nbsp;replacement</span><br>
<span class="lineno">65</span><span class="comment" id="3691193">//&nbsp;character&nbsp;U+FFFD.</span><br>
<span class="lineno"></span><span class="comment" id="3691214">//</span><br>
<span class="lineno"></span><span class="keyword" id="3691217">func</span>&nbsp;<span class="ident" id="3691222">Unmarshal</span><span class="op" id="3691231">(</span><span class="ident" id="3691232">data</span>&nbsp;<span class="op" id="3691237">[</span><span class="op" id="3691238">]</span><span class="builtintype" id="3691239">byte</span><span class="op" id="3691243">,</span>&nbsp;<span class="ident" id="3691245">v</span>&nbsp;<span class="keyword" id="3691247">interface</span><span class="op" id="3691256">{</span><span class="op" id="3691257">}</span><span class="op" id="3691258">)</span>&nbsp;<span class="builtintype" id="3691260">error</span>&nbsp;<span class="op" id="3691266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3691269">//&nbsp;Check&nbsp;for&nbsp;well-formedness.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3691300">//&nbsp;Avoids&nbsp;filling&nbsp;out&nbsp;half&nbsp;a&nbsp;data&nbsp;structure</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3691345">//&nbsp;before&nbsp;discovering&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691389">var</span>&nbsp;<span class="ident" id="3691393">d</span>&nbsp;<span class="ident" id="3691395">decodeState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3691408">err</span>&nbsp;<span class="op" id="3691412">:=</span>&nbsp;<span class="ident" id="3691415">checkValid</span><span class="op" id="3691425">(</span><span class="ident" id="3691426">data</span><span class="op" id="3691430">,</span>&nbsp;<span class="op" id="3691432">&amp;</span><span class="ident" id="3691433">d</span><span class="op" id="3691434">.</span><span class="ident" id="3691435">scan</span><span class="op" id="3691439">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691442">if</span>&nbsp;<span class="ident" id="3691445">err</span>&nbsp;<span class="op" id="3691449">!=</span>&nbsp;<span class="ident" id="3691452">nil</span>&nbsp;<span class="op" id="3691456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691460">return</span>&nbsp;<span class="ident" id="3691467">err</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3691472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3691476">d</span><span class="op" id="3691477">.</span><span class="ident" id="3691478">init</span><span class="op" id="3691482">(</span><span class="ident" id="3691483">data</span><span class="op" id="3691487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3691490">return</span>&nbsp;<span class="ident" id="3691497">d</span><span class="op" id="3691498">.</span><span class="ident" id="3691499">unmarshal</span><span class="op" id="3691508">(</span><span class="ident" id="3691509">v</span><span class="op" id="3691510">)</span><br>
<span class="lineno"></span><span class="op" id="3691512">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="3691515">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects</span><br>
<span class="lineno"></span><span class="comment" id="3691570">//&nbsp;that&nbsp;can&nbsp;unmarshal&nbsp;a&nbsp;JSON&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="3691626">//&nbsp;The&nbsp;input&nbsp;can&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3691680">//&nbsp;a&nbsp;JSON&nbsp;value.&nbsp;UnmarshalJSON&nbsp;must&nbsp;copy&nbsp;the&nbsp;JSON&nbsp;data</span><br>
<span class="lineno">85</span><span class="comment" id="3691735">//&nbsp;if&nbsp;it&nbsp;wishes&nbsp;to&nbsp;retain&nbsp;the&nbsp;data&nbsp;after&nbsp;returning.</span><br>
<span class="lineno"></span><span class="keyword" id="3691787">type</span>&nbsp;<span class="ident" id="3691792">Unmarshaler</span>&nbsp;<span class="keyword" id="3691804">interface</span>&nbsp;<span class="op" id="3691814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3691817">UnmarshalJSON</span><span class="op" id="3691830">(</span><span class="op" id="3691831">[</span><span class="op" id="3691832">]</span><span class="builtintype" id="3691833">byte</span><span class="op" id="3691837">)</span>&nbsp;<span class="builtintype" id="3691839">error</span><br>
<span class="lineno"></span><span class="op" id="3691845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="3691848">//&nbsp;An&nbsp;UnmarshalTypeError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;that&nbsp;was</span><br>
<span class="lineno"></span><span class="comment" id="3691905">//&nbsp;not&nbsp;appropriate&nbsp;for&nbsp;a&nbsp;value&nbsp;of&nbsp;a&nbsp;specific&nbsp;Go&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="3691959">type</span>&nbsp;<span class="ident" id="3691964">UnmarshalTypeError</span>&nbsp;<span class="keyword" id="3691983">struct</span>&nbsp;<span class="op" id="3691990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3691993">Value</span>&nbsp;<span class="builtintype" id="3691999">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3692012">//&nbsp;description&nbsp;of&nbsp;JSON&nbsp;value&nbsp;-&nbsp;&#34;bool&#34;,&nbsp;&#34;array&#34;,&nbsp;&#34;number&nbsp;-5&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3692073">Type</span>&nbsp;&nbsp;<span class="ident" id="3692079">reflect</span><span class="op" id="3692086">.</span><span class="ident" id="3692087">Type</span>&nbsp;<span class="comment" id="3692092">//&nbsp;type&nbsp;of&nbsp;Go&nbsp;value&nbsp;it&nbsp;could&nbsp;not&nbsp;be&nbsp;assigned&nbsp;to</span><br>
<span class="lineno">95</span><span class="op" id="3692140">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3692143">func</span>&nbsp;<span class="op" id="3692148">(</span><span class="ident" id="3692149">e</span>&nbsp;<span class="op" id="3692151">*</span><span class="ident" id="3692152">UnmarshalTypeError</span><span class="op" id="3692170">)</span>&nbsp;<span class="ident" id="3692172">Error</span><span class="op" id="3692177">(</span><span class="op" id="3692178">)</span>&nbsp;<span class="builtintype" id="3692180">string</span>&nbsp;<span class="op" id="3692187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3692190">return</span>&nbsp;<span class="string" id="3692197">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;&#34;</span>&nbsp;<span class="op" id="3692223">+</span>&nbsp;<span class="ident" id="3692225">e</span><span class="op" id="3692226">.</span><span class="ident" id="3692227">Value</span>&nbsp;<span class="op" id="3692233">+</span>&nbsp;<span class="string" id="3692235">&#34;&nbsp;into&nbsp;Go&nbsp;value&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3692261">+</span>&nbsp;<span class="ident" id="3692263">e</span><span class="op" id="3692264">.</span><span class="ident" id="3692265">Type</span><span class="op" id="3692269">.</span><span class="ident" id="3692270">String</span><span class="op" id="3692276">(</span><span class="op" id="3692277">)</span><br>
<span class="lineno"></span><span class="op" id="3692279">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3692282">//&nbsp;An&nbsp;UnmarshalFieldError&nbsp;describes&nbsp;a&nbsp;JSON&nbsp;object&nbsp;key&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3692341">//&nbsp;led&nbsp;to&nbsp;an&nbsp;unexported&nbsp;(and&nbsp;therefore&nbsp;unwritable)&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="3692406">//&nbsp;(No&nbsp;longer&nbsp;used;&nbsp;kept&nbsp;for&nbsp;compatibility.)</span><br>
<span class="lineno"></span><span class="keyword" id="3692451">type</span>&nbsp;<span class="ident" id="3692456">UnmarshalFieldError</span>&nbsp;<span class="keyword" id="3692476">struct</span>&nbsp;<span class="op" id="3692483">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3692486">Key</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3692492">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3692500">Type</span>&nbsp;&nbsp;<span class="ident" id="3692506">reflect</span><span class="op" id="3692513">.</span><span class="ident" id="3692514">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3692520">Field</span>&nbsp;<span class="ident" id="3692526">reflect</span><span class="op" id="3692533">.</span><span class="ident" id="3692534">StructField</span><br>
<span class="lineno"></span><span class="op" id="3692546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="keyword" id="3692549">func</span>&nbsp;<span class="op" id="3692554">(</span><span class="ident" id="3692555">e</span>&nbsp;<span class="op" id="3692557">*</span><span class="ident" id="3692558">UnmarshalFieldError</span><span class="op" id="3692577">)</span>&nbsp;<span class="ident" id="3692579">Error</span><span class="op" id="3692584">(</span><span class="op" id="3692585">)</span>&nbsp;<span class="builtintype" id="3692587">string</span>&nbsp;<span class="op" id="3692594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3692597">return</span>&nbsp;<span class="string" id="3692604">&#34;json:&nbsp;cannot&nbsp;unmarshal&nbsp;object&nbsp;key&nbsp;&#34;</span>&nbsp;<span class="op" id="3692641">+</span>&nbsp;<span class="ident" id="3692643">strconv</span><span class="op" id="3692650">.</span><span class="ident" id="3692651">Quote</span><span class="op" id="3692656">(</span><span class="ident" id="3692657">e</span><span class="op" id="3692658">.</span><span class="ident" id="3692659">Key</span><span class="op" id="3692662">)</span>&nbsp;<span class="op" id="3692664">+</span>&nbsp;<span class="string" id="3692666">&#34;&nbsp;into&nbsp;unexported&nbsp;field&nbsp;&#34;</span>&nbsp;<span class="op" id="3692692">+</span>&nbsp;<span class="ident" id="3692694">e</span><span class="op" id="3692695">.</span><span class="ident" id="3692696">Field</span><span class="op" id="3692701">.</span><span class="ident" id="3692702">Name</span>&nbsp;<span class="op" id="3692707">+</span>&nbsp;<span class="string" id="3692709">&#34;&nbsp;of&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="3692721">+</span>&nbsp;<span class="ident" id="3692723">e</span><span class="op" id="3692724">.</span><span class="ident" id="3692725">Type</span><span class="op" id="3692729">.</span><span class="ident" id="3692730">String</span><span class="op" id="3692736">(</span><span class="op" id="3692737">)</span><br>
<span class="lineno"></span><span class="op" id="3692739">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3692742">//&nbsp;An&nbsp;InvalidUnmarshalError&nbsp;describes&nbsp;an&nbsp;invalid&nbsp;argument&nbsp;passed&nbsp;to&nbsp;Unmarshal.</span><br>
<span class="lineno">115</span><span class="comment" id="3692821">//&nbsp;(The&nbsp;argument&nbsp;to&nbsp;Unmarshal&nbsp;must&nbsp;be&nbsp;a&nbsp;non-nil&nbsp;pointer.)</span><br>
<span class="lineno"></span><span class="keyword" id="3692879">type</span>&nbsp;<span class="ident" id="3692884">InvalidUnmarshalError</span>&nbsp;<span class="keyword" id="3692906">struct</span>&nbsp;<span class="op" id="3692913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3692916">Type</span>&nbsp;<span class="ident" id="3692921">reflect</span><span class="op" id="3692928">.</span><span class="ident" id="3692929">Type</span><br>
<span class="lineno"></span><span class="op" id="3692934">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="3692937">func</span>&nbsp;<span class="op" id="3692942">(</span><span class="ident" id="3692943">e</span>&nbsp;<span class="op" id="3692945">*</span><span class="ident" id="3692946">InvalidUnmarshalError</span><span class="op" id="3692967">)</span>&nbsp;<span class="ident" id="3692969">Error</span><span class="op" id="3692974">(</span><span class="op" id="3692975">)</span>&nbsp;<span class="builtintype" id="3692977">string</span>&nbsp;<span class="op" id="3692984">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3692987">if</span>&nbsp;<span class="ident" id="3692990">e</span><span class="op" id="3692991">.</span><span class="ident" id="3692992">Type</span>&nbsp;<span class="op" id="3692997">==</span>&nbsp;<span class="ident" id="3693000">nil</span>&nbsp;<span class="op" id="3693004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693008">return</span>&nbsp;<span class="string" id="3693015">&#34;json:&nbsp;Unmarshal(nil)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693043">if</span>&nbsp;<span class="ident" id="3693046">e</span><span class="op" id="3693047">.</span><span class="ident" id="3693048">Type</span><span class="op" id="3693052">.</span><span class="ident" id="3693053">Kind</span><span class="op" id="3693057">(</span><span class="op" id="3693058">)</span>&nbsp;<span class="op" id="3693060">!=</span>&nbsp;<span class="ident" id="3693063">reflect</span><span class="op" id="3693070">.</span><span class="ident" id="3693071">Ptr</span>&nbsp;<span class="op" id="3693075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693079">return</span>&nbsp;<span class="string" id="3693086">&#34;json:&nbsp;Unmarshal(non-pointer&nbsp;&#34;</span>&nbsp;<span class="op" id="3693117">+</span>&nbsp;<span class="ident" id="3693119">e</span><span class="op" id="3693120">.</span><span class="ident" id="3693121">Type</span><span class="op" id="3693125">.</span><span class="ident" id="3693126">String</span><span class="op" id="3693132">(</span><span class="op" id="3693133">)</span>&nbsp;<span class="op" id="3693135">+</span>&nbsp;<span class="string" id="3693137">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693145">return</span>&nbsp;<span class="string" id="3693152">&#34;json:&nbsp;Unmarshal(nil&nbsp;&#34;</span>&nbsp;<span class="op" id="3693175">+</span>&nbsp;<span class="ident" id="3693177">e</span><span class="op" id="3693178">.</span><span class="ident" id="3693179">Type</span><span class="op" id="3693183">.</span><span class="ident" id="3693184">String</span><span class="op" id="3693190">(</span><span class="op" id="3693191">)</span>&nbsp;<span class="op" id="3693193">+</span>&nbsp;<span class="string" id="3693195">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="3693199">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="3693202">func</span>&nbsp;<span class="op" id="3693207">(</span><span class="ident" id="3693208">d</span>&nbsp;<span class="op" id="3693210">*</span><span class="ident" id="3693211">decodeState</span><span class="op" id="3693222">)</span>&nbsp;<span class="ident" id="3693224">unmarshal</span><span class="op" id="3693233">(</span><span class="ident" id="3693234">v</span>&nbsp;<span class="keyword" id="3693236">interface</span><span class="op" id="3693245">{</span><span class="op" id="3693246">}</span><span class="op" id="3693247">)</span>&nbsp;<span class="op" id="3693249">(</span><span class="ident" id="3693250">err</span>&nbsp;<span class="builtintype" id="3693254">error</span><span class="op" id="3693259">)</span>&nbsp;<span class="op" id="3693261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693264">defer</span>&nbsp;<span class="keyword" id="3693270">func</span><span class="op" id="3693274">(</span><span class="op" id="3693275">)</span>&nbsp;<span class="op" id="3693277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693281">if</span>&nbsp;<span class="ident" id="3693284">r</span>&nbsp;<span class="op" id="3693286">:=</span>&nbsp;<span class="builtinfunc" id="3693289">recover</span><span class="op" id="3693296">(</span><span class="op" id="3693297">)</span><span class="op" id="3693298">;</span>&nbsp;<span class="ident" id="3693300">r</span>&nbsp;<span class="op" id="3693302">!=</span>&nbsp;<span class="ident" id="3693305">nil</span>&nbsp;<span class="op" id="3693309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693314">if</span>&nbsp;<span class="ident" id="3693317">_</span><span class="op" id="3693318">,</span>&nbsp;<span class="ident" id="3693320">ok</span>&nbsp;<span class="op" id="3693323">:=</span>&nbsp;<span class="ident" id="3693326">r</span><span class="op" id="3693327">.</span><span class="op" id="3693328">(</span><span class="ident" id="3693329">runtime</span><span class="op" id="3693336">.</span><span class="ident" id="3693337">Error</span><span class="op" id="3693342">)</span><span class="op" id="3693343">;</span>&nbsp;<span class="ident" id="3693345">ok</span>&nbsp;<span class="op" id="3693348">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3693354">panic</span><span class="op" id="3693359">(</span><span class="ident" id="3693360">r</span><span class="op" id="3693361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3693371">err</span>&nbsp;<span class="op" id="3693375">=</span>&nbsp;<span class="ident" id="3693377">r</span><span class="op" id="3693378">.</span><span class="op" id="3693379">(</span><span class="builtintype" id="3693380">error</span><span class="op" id="3693385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693392">}</span><span class="op" id="3693393">(</span><span class="op" id="3693394">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3693398">rv</span>&nbsp;<span class="op" id="3693401">:=</span>&nbsp;<span class="ident" id="3693404">reflect</span><span class="op" id="3693411">.</span><span class="ident" id="3693412">ValueOf</span><span class="op" id="3693419">(</span><span class="ident" id="3693420">v</span><span class="op" id="3693421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693424">if</span>&nbsp;<span class="ident" id="3693427">rv</span><span class="op" id="3693429">.</span><span class="ident" id="3693430">Kind</span><span class="op" id="3693434">(</span><span class="op" id="3693435">)</span>&nbsp;<span class="op" id="3693437">!=</span>&nbsp;<span class="ident" id="3693440">reflect</span><span class="op" id="3693447">.</span><span class="ident" id="3693448">Ptr</span>&nbsp;<span class="op" id="3693452">||</span>&nbsp;<span class="ident" id="3693455">rv</span><span class="op" id="3693457">.</span><span class="ident" id="3693458">IsNil</span><span class="op" id="3693463">(</span><span class="op" id="3693464">)</span>&nbsp;<span class="op" id="3693466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693470">return</span>&nbsp;<span class="op" id="3693477">&amp;</span><span class="ident" id="3693478">InvalidUnmarshalError</span><span class="op" id="3693499">{</span><span class="ident" id="3693500">reflect</span><span class="op" id="3693507">.</span><span class="ident" id="3693508">TypeOf</span><span class="op" id="3693514">(</span><span class="ident" id="3693515">v</span><span class="op" id="3693516">)</span><span class="op" id="3693517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3693520">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3693524">d</span><span class="op" id="3693525">.</span><span class="ident" id="3693526">scan</span><span class="op" id="3693530">.</span><span class="ident" id="3693531">reset</span><span class="op" id="3693536">(</span><span class="op" id="3693537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3693540">//&nbsp;We&nbsp;decode&nbsp;rv&nbsp;not&nbsp;rv.Elem&nbsp;because&nbsp;the&nbsp;Unmarshaler&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3693603">//&nbsp;test&nbsp;must&nbsp;be&nbsp;applied&nbsp;at&nbsp;the&nbsp;top&nbsp;level&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3693659">d</span><span class="op" id="3693660">.</span><span class="ident" id="3693661">value</span><span class="op" id="3693666">(</span><span class="ident" id="3693667">rv</span><span class="op" id="3693669">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693672">return</span>&nbsp;<span class="ident" id="3693679">d</span><span class="op" id="3693680">.</span><span class="ident" id="3693681">savedError</span><br>
<span class="lineno"></span><span class="op" id="3693692">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3693695">//&nbsp;A&nbsp;Number&nbsp;represents&nbsp;a&nbsp;JSON&nbsp;number&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3693741">type</span>&nbsp;<span class="ident" id="3693746">Number</span>&nbsp;<span class="builtintype" id="3693753">string</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="3693761">//&nbsp;String&nbsp;returns&nbsp;the&nbsp;literal&nbsp;text&nbsp;of&nbsp;the&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="3693811">func</span>&nbsp;<span class="op" id="3693816">(</span><span class="ident" id="3693817">n</span>&nbsp;<span class="ident" id="3693819">Number</span><span class="op" id="3693825">)</span>&nbsp;<span class="ident" id="3693827">String</span><span class="op" id="3693833">(</span><span class="op" id="3693834">)</span>&nbsp;<span class="builtintype" id="3693836">string</span>&nbsp;<span class="op" id="3693843">{</span>&nbsp;<span class="keyword" id="3693845">return</span>&nbsp;<span class="builtintype" id="3693852">string</span><span class="op" id="3693858">(</span><span class="ident" id="3693859">n</span><span class="op" id="3693860">)</span>&nbsp;<span class="op" id="3693862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3693865">//&nbsp;Float64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;a&nbsp;float64.</span><br>
<span class="lineno">160</span><span class="keyword" id="3693909">func</span>&nbsp;<span class="op" id="3693914">(</span><span class="ident" id="3693915">n</span>&nbsp;<span class="ident" id="3693917">Number</span><span class="op" id="3693923">)</span>&nbsp;<span class="ident" id="3693925">Float64</span><span class="op" id="3693932">(</span><span class="op" id="3693933">)</span>&nbsp;<span class="op" id="3693935">(</span><span class="builtintype" id="3693936">float64</span><span class="op" id="3693943">,</span>&nbsp;<span class="builtintype" id="3693945">error</span><span class="op" id="3693950">)</span>&nbsp;<span class="op" id="3693952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3693955">return</span>&nbsp;<span class="ident" id="3693962">strconv</span><span class="op" id="3693969">.</span><span class="ident" id="3693970">ParseFloat</span><span class="op" id="3693980">(</span><span class="builtintype" id="3693981">string</span><span class="op" id="3693987">(</span><span class="ident" id="3693988">n</span><span class="op" id="3693989">)</span><span class="op" id="3693990">,</span>&nbsp;<span class="num" id="3693992">64</span><span class="op" id="3693994">)</span><br>
<span class="lineno"></span><span class="op" id="3693996">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3693999">//&nbsp;Int64&nbsp;returns&nbsp;the&nbsp;number&nbsp;as&nbsp;an&nbsp;int64.</span><br>
<span class="lineno">165</span><span class="keyword" id="3694040">func</span>&nbsp;<span class="op" id="3694045">(</span><span class="ident" id="3694046">n</span>&nbsp;<span class="ident" id="3694048">Number</span><span class="op" id="3694054">)</span>&nbsp;<span class="ident" id="3694056">Int64</span><span class="op" id="3694061">(</span><span class="op" id="3694062">)</span>&nbsp;<span class="op" id="3694064">(</span><span class="ident" id="3694065">int64</span><span class="op" id="3694070">,</span>&nbsp;<span class="builtintype" id="3694072">error</span><span class="op" id="3694077">)</span>&nbsp;<span class="op" id="3694079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3694082">return</span>&nbsp;<span class="ident" id="3694089">strconv</span><span class="op" id="3694096">.</span><span class="ident" id="3694097">ParseInt</span><span class="op" id="3694105">(</span><span class="builtintype" id="3694106">string</span><span class="op" id="3694112">(</span><span class="ident" id="3694113">n</span><span class="op" id="3694114">)</span><span class="op" id="3694115">,</span>&nbsp;<span class="num" id="3694117">10</span><span class="op" id="3694119">,</span>&nbsp;<span class="num" id="3694121">64</span><span class="op" id="3694123">)</span><br>
<span class="lineno"></span><span class="op" id="3694125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3694128">//&nbsp;decodeState&nbsp;represents&nbsp;the&nbsp;state&nbsp;while&nbsp;decoding&nbsp;a&nbsp;JSON&nbsp;value.</span><br>
<span class="lineno">170</span><span class="keyword" id="3694193">type</span>&nbsp;<span class="ident" id="3694198">decodeState</span>&nbsp;<span class="keyword" id="3694210">struct</span>&nbsp;<span class="op" id="3694217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694220">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3694231">[</span><span class="op" id="3694232">]</span><span class="builtintype" id="3694233">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694239">off</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3694250">int</span>&nbsp;<span class="comment" id="3694254">//&nbsp;read&nbsp;offset&nbsp;in&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694278">scan</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3694289">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694298">nextscan</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3694309">scanner</span>&nbsp;<span class="comment" id="3694317">//&nbsp;for&nbsp;calls&nbsp;to&nbsp;nextValue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694344">savedError</span>&nbsp;<span class="builtintype" id="3694355">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694362">useNumber</span>&nbsp;&nbsp;<span class="builtintype" id="3694373">bool</span><br>
<span class="lineno"></span><span class="op" id="3694378">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3694381">//&nbsp;errPhase&nbsp;is&nbsp;used&nbsp;for&nbsp;errors&nbsp;that&nbsp;should&nbsp;not&nbsp;happen&nbsp;unless</span><br>
<span class="lineno">180</span><span class="comment" id="3694442">//&nbsp;there&nbsp;is&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;JSON&nbsp;decoder&nbsp;or&nbsp;something&nbsp;is&nbsp;editing</span><br>
<span class="lineno"></span><span class="comment" id="3694504">//&nbsp;the&nbsp;data&nbsp;slice&nbsp;while&nbsp;the&nbsp;decoder&nbsp;executes.</span><br>
<span class="lineno"></span><span class="keyword" id="3694550">var</span>&nbsp;<span class="ident" id="3694554">errPhase</span>&nbsp;<span class="op" id="3694563">=</span>&nbsp;<span class="ident" id="3694565">errors</span><span class="op" id="3694571">.</span><span class="ident" id="3694572">New</span><span class="op" id="3694575">(</span><span class="string" id="3694576">&#34;JSON&nbsp;decoder&nbsp;out&nbsp;of&nbsp;sync&nbsp;-&nbsp;data&nbsp;changing&nbsp;underfoot?&#34;</span><span class="op" id="3694629">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3694632">func</span>&nbsp;<span class="op" id="3694637">(</span><span class="ident" id="3694638">d</span>&nbsp;<span class="op" id="3694640">*</span><span class="ident" id="3694641">decodeState</span><span class="op" id="3694652">)</span>&nbsp;<span class="ident" id="3694654">init</span><span class="op" id="3694658">(</span><span class="ident" id="3694659">data</span>&nbsp;<span class="op" id="3694664">[</span><span class="op" id="3694665">]</span><span class="builtintype" id="3694666">byte</span><span class="op" id="3694670">)</span>&nbsp;<span class="op" id="3694672">*</span><span class="ident" id="3694673">decodeState</span>&nbsp;<span class="op" id="3694685">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694688">d</span><span class="op" id="3694689">.</span><span class="ident" id="3694690">data</span>&nbsp;<span class="op" id="3694695">=</span>&nbsp;<span class="ident" id="3694697">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694703">d</span><span class="op" id="3694704">.</span><span class="ident" id="3694705">off</span>&nbsp;<span class="op" id="3694709">=</span>&nbsp;<span class="num" id="3694711">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3694714">d</span><span class="op" id="3694715">.</span><span class="ident" id="3694716">savedError</span>&nbsp;<span class="op" id="3694727">=</span>&nbsp;<span class="ident" id="3694729">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3694734">return</span>&nbsp;<span class="ident" id="3694741">d</span><br>
<span class="lineno"></span><span class="op" id="3694743">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3694746">//&nbsp;error&nbsp;aborts&nbsp;the&nbsp;decoding&nbsp;by&nbsp;panicking&nbsp;with&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="3694798">func</span>&nbsp;<span class="op" id="3694803">(</span><span class="ident" id="3694804">d</span>&nbsp;<span class="op" id="3694806">*</span><span class="ident" id="3694807">decodeState</span><span class="op" id="3694818">)</span>&nbsp;<span class="builtintype" id="3694820">error</span><span class="op" id="3694825">(</span><span class="ident" id="3694826">err</span>&nbsp;<span class="builtintype" id="3694830">error</span><span class="op" id="3694835">)</span>&nbsp;<span class="op" id="3694837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3694840">panic</span><span class="op" id="3694845">(</span><span class="ident" id="3694846">err</span><span class="op" id="3694849">)</span><br>
<span class="lineno"></span><span class="op" id="3694851">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="3694854">//&nbsp;saveError&nbsp;saves&nbsp;the&nbsp;first&nbsp;err&nbsp;it&nbsp;is&nbsp;called&nbsp;with,</span><br>
<span class="lineno"></span><span class="comment" id="3694906">//&nbsp;for&nbsp;reporting&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;unmarshal.</span><br>
<span class="lineno"></span><span class="keyword" id="3694952">func</span>&nbsp;<span class="op" id="3694957">(</span><span class="ident" id="3694958">d</span>&nbsp;<span class="op" id="3694960">*</span><span class="ident" id="3694961">decodeState</span><span class="op" id="3694972">)</span>&nbsp;<span class="ident" id="3694974">saveError</span><span class="op" id="3694983">(</span><span class="ident" id="3694984">err</span>&nbsp;<span class="builtintype" id="3694988">error</span><span class="op" id="3694993">)</span>&nbsp;<span class="op" id="3694995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3694998">if</span>&nbsp;<span class="ident" id="3695001">d</span><span class="op" id="3695002">.</span><span class="ident" id="3695003">savedError</span>&nbsp;<span class="op" id="3695014">==</span>&nbsp;<span class="ident" id="3695017">nil</span>&nbsp;<span class="op" id="3695021">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695025">d</span><span class="op" id="3695026">.</span><span class="ident" id="3695027">savedError</span>&nbsp;<span class="op" id="3695038">=</span>&nbsp;<span class="ident" id="3695040">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3695045">}</span><br>
<span class="lineno"></span><span class="op" id="3695047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3695050">//&nbsp;next&nbsp;cuts&nbsp;off&nbsp;and&nbsp;returns&nbsp;the&nbsp;next&nbsp;full&nbsp;JSON&nbsp;value&nbsp;in&nbsp;d.data[d.off:].</span><br>
<span class="lineno">205</span><span class="comment" id="3695123">//&nbsp;The&nbsp;next&nbsp;value&nbsp;is&nbsp;known&nbsp;to&nbsp;be&nbsp;an&nbsp;object&nbsp;or&nbsp;array,&nbsp;not&nbsp;a&nbsp;literal.</span><br>
<span class="lineno"></span><span class="keyword" id="3695191">func</span>&nbsp;<span class="op" id="3695196">(</span><span class="ident" id="3695197">d</span>&nbsp;<span class="op" id="3695199">*</span><span class="ident" id="3695200">decodeState</span><span class="op" id="3695211">)</span>&nbsp;<span class="ident" id="3695213">next</span><span class="op" id="3695217">(</span><span class="op" id="3695218">)</span>&nbsp;<span class="op" id="3695220">[</span><span class="op" id="3695221">]</span><span class="builtintype" id="3695222">byte</span>&nbsp;<span class="op" id="3695227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695230">c</span>&nbsp;<span class="op" id="3695232">:=</span>&nbsp;<span class="ident" id="3695235">d</span><span class="op" id="3695236">.</span><span class="ident" id="3695237">data</span><span class="op" id="3695241">[</span><span class="ident" id="3695242">d</span><span class="op" id="3695243">.</span><span class="ident" id="3695244">off</span><span class="op" id="3695247">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695250">item</span><span class="op" id="3695254">,</span>&nbsp;<span class="ident" id="3695256">rest</span><span class="op" id="3695260">,</span>&nbsp;<span class="ident" id="3695262">err</span>&nbsp;<span class="op" id="3695266">:=</span>&nbsp;<span class="ident" id="3695269">nextValue</span><span class="op" id="3695278">(</span><span class="ident" id="3695279">d</span><span class="op" id="3695280">.</span><span class="ident" id="3695281">data</span><span class="op" id="3695285">[</span><span class="ident" id="3695286">d</span><span class="op" id="3695287">.</span><span class="ident" id="3695288">off</span><span class="op" id="3695291">:</span><span class="op" id="3695292">]</span><span class="op" id="3695293">,</span>&nbsp;<span class="op" id="3695295">&amp;</span><span class="ident" id="3695296">d</span><span class="op" id="3695297">.</span><span class="ident" id="3695298">nextscan</span><span class="op" id="3695306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695309">if</span>&nbsp;<span class="ident" id="3695312">err</span>&nbsp;<span class="op" id="3695316">!=</span>&nbsp;<span class="ident" id="3695319">nil</span>&nbsp;<span class="op" id="3695323">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695327">d</span><span class="op" id="3695328">.</span><span class="builtintype" id="3695329">error</span><span class="op" id="3695334">(</span><span class="ident" id="3695335">err</span><span class="op" id="3695338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3695341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695344">d</span><span class="op" id="3695345">.</span><span class="ident" id="3695346">off</span>&nbsp;<span class="op" id="3695350">=</span>&nbsp;<span class="builtinfunc" id="3695352">len</span><span class="op" id="3695355">(</span><span class="ident" id="3695356">d</span><span class="op" id="3695357">.</span><span class="ident" id="3695358">data</span><span class="op" id="3695362">)</span>&nbsp;<span class="op" id="3695364">-</span>&nbsp;<span class="builtinfunc" id="3695366">len</span><span class="op" id="3695369">(</span><span class="ident" id="3695370">rest</span><span class="op" id="3695374">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3695378">//&nbsp;Our&nbsp;scanner&nbsp;has&nbsp;seen&nbsp;the&nbsp;opening&nbsp;brace/bracket</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3695429">//&nbsp;and&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;object.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3695485">//&nbsp;invent&nbsp;a&nbsp;closing&nbsp;brace/bracket&nbsp;to&nbsp;get&nbsp;it&nbsp;out.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695535">if</span>&nbsp;<span class="ident" id="3695538">c</span>&nbsp;<span class="op" id="3695540">==</span>&nbsp;<span class="string" id="3695543">&#39;{&#39;</span>&nbsp;<span class="op" id="3695547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695551">d</span><span class="op" id="3695552">.</span><span class="ident" id="3695553">scan</span><span class="op" id="3695557">.</span><span class="ident" id="3695558">step</span><span class="op" id="3695562">(</span><span class="op" id="3695563">&amp;</span><span class="ident" id="3695564">d</span><span class="op" id="3695565">.</span><span class="ident" id="3695566">scan</span><span class="op" id="3695570">,</span>&nbsp;<span class="string" id="3695572">&#39;}&#39;</span><span class="op" id="3695575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3695578">}</span>&nbsp;<span class="keyword" id="3695580">else</span>&nbsp;<span class="op" id="3695585">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695589">d</span><span class="op" id="3695590">.</span><span class="ident" id="3695591">scan</span><span class="op" id="3695595">.</span><span class="ident" id="3695596">step</span><span class="op" id="3695600">(</span><span class="op" id="3695601">&amp;</span><span class="ident" id="3695602">d</span><span class="op" id="3695603">.</span><span class="ident" id="3695604">scan</span><span class="op" id="3695608">,</span>&nbsp;<span class="string" id="3695610">&#39;]&#39;</span><span class="op" id="3695613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3695616">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695620">return</span>&nbsp;<span class="ident" id="3695627">item</span><br>
<span class="lineno"></span><span class="op" id="3695632">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3695635">//&nbsp;scanWhile&nbsp;processes&nbsp;bytes&nbsp;in&nbsp;d.data[d.off:]&nbsp;until&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3695691">//&nbsp;receives&nbsp;a&nbsp;scan&nbsp;code&nbsp;not&nbsp;equal&nbsp;to&nbsp;op.</span><br>
<span class="lineno"></span><span class="comment" id="3695732">//&nbsp;It&nbsp;updates&nbsp;d.off&nbsp;and&nbsp;returns&nbsp;the&nbsp;new&nbsp;scan&nbsp;code.</span><br>
<span class="lineno"></span><span class="keyword" id="3695783">func</span>&nbsp;<span class="op" id="3695788">(</span><span class="ident" id="3695789">d</span>&nbsp;<span class="op" id="3695791">*</span><span class="ident" id="3695792">decodeState</span><span class="op" id="3695803">)</span>&nbsp;<span class="ident" id="3695805">scanWhile</span><span class="op" id="3695814">(</span><span class="ident" id="3695815">op</span>&nbsp;<span class="builtintype" id="3695818">int</span><span class="op" id="3695821">)</span>&nbsp;<span class="builtintype" id="3695823">int</span>&nbsp;<span class="op" id="3695827">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695830">var</span>&nbsp;<span class="ident" id="3695834">newOp</span>&nbsp;<span class="builtintype" id="3695840">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695845">for</span>&nbsp;<span class="op" id="3695849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3695853">if</span>&nbsp;<span class="ident" id="3695856">d</span><span class="op" id="3695857">.</span><span class="ident" id="3695858">off</span>&nbsp;<span class="op" id="3695862">&gt;=</span>&nbsp;<span class="builtinfunc" id="3695865">len</span><span class="op" id="3695868">(</span><span class="ident" id="3695869">d</span><span class="op" id="3695870">.</span><span class="ident" id="3695871">data</span><span class="op" id="3695875">)</span>&nbsp;<span class="op" id="3695877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695882">newOp</span>&nbsp;<span class="op" id="3695888">=</span>&nbsp;<span class="ident" id="3695890">d</span><span class="op" id="3695891">.</span><span class="ident" id="3695892">scan</span><span class="op" id="3695896">.</span><span class="ident" id="3695897">eof</span><span class="op" id="3695900">(</span><span class="op" id="3695901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695906">d</span><span class="op" id="3695907">.</span><span class="ident" id="3695908">off</span>&nbsp;<span class="op" id="3695912">=</span>&nbsp;<span class="builtinfunc" id="3695914">len</span><span class="op" id="3695917">(</span><span class="ident" id="3695918">d</span><span class="op" id="3695919">.</span><span class="ident" id="3695920">data</span><span class="op" id="3695924">)</span>&nbsp;<span class="op" id="3695926">+</span>&nbsp;<span class="num" id="3695928">1</span>&nbsp;<span class="comment" id="3695930">//&nbsp;mark&nbsp;processed&nbsp;EOF&nbsp;with&nbsp;len+1</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3695965">}</span>&nbsp;<span class="keyword" id="3695967">else</span>&nbsp;<span class="op" id="3695972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3695977">c</span>&nbsp;<span class="op" id="3695979">:=</span>&nbsp;<span class="builtintype" id="3695982">int</span><span class="op" id="3695985">(</span><span class="ident" id="3695986">d</span><span class="op" id="3695987">.</span><span class="ident" id="3695988">data</span><span class="op" id="3695992">[</span><span class="ident" id="3695993">d</span><span class="op" id="3695994">.</span><span class="ident" id="3695995">off</span><span class="op" id="3695998">]</span><span class="op" id="3695999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696004">d</span><span class="op" id="3696005">.</span><span class="ident" id="3696006">off</span><span class="op" id="3696009">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696015">newOp</span>&nbsp;<span class="op" id="3696021">=</span>&nbsp;<span class="ident" id="3696023">d</span><span class="op" id="3696024">.</span><span class="ident" id="3696025">scan</span><span class="op" id="3696029">.</span><span class="ident" id="3696030">step</span><span class="op" id="3696034">(</span><span class="op" id="3696035">&amp;</span><span class="ident" id="3696036">d</span><span class="op" id="3696037">.</span><span class="ident" id="3696038">scan</span><span class="op" id="3696042">,</span>&nbsp;<span class="ident" id="3696044">c</span><span class="op" id="3696045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696049">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696053">if</span>&nbsp;<span class="ident" id="3696056">newOp</span>&nbsp;<span class="op" id="3696062">!=</span>&nbsp;<span class="ident" id="3696065">op</span>&nbsp;<span class="op" id="3696068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696073">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696084">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696087">return</span>&nbsp;<span class="ident" id="3696094">newOp</span><br>
<span class="lineno">245</span><span class="op" id="3696100">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3696103">//&nbsp;value&nbsp;decodes&nbsp;a&nbsp;JSON&nbsp;value&nbsp;from&nbsp;d.data[d.off:]&nbsp;into&nbsp;the&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3696169">//&nbsp;it&nbsp;updates&nbsp;d.off&nbsp;to&nbsp;point&nbsp;past&nbsp;the&nbsp;decoded&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="3696222">func</span>&nbsp;<span class="op" id="3696227">(</span><span class="ident" id="3696228">d</span>&nbsp;<span class="op" id="3696230">*</span><span class="ident" id="3696231">decodeState</span><span class="op" id="3696242">)</span>&nbsp;<span class="ident" id="3696244">value</span><span class="op" id="3696249">(</span><span class="ident" id="3696250">v</span>&nbsp;<span class="ident" id="3696252">reflect</span><span class="op" id="3696259">.</span><span class="ident" id="3696260">Value</span><span class="op" id="3696265">)</span>&nbsp;<span class="op" id="3696267">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696270">if</span>&nbsp;<span class="op" id="3696273">!</span><span class="ident" id="3696274">v</span><span class="op" id="3696275">.</span><span class="ident" id="3696276">IsValid</span><span class="op" id="3696283">(</span><span class="op" id="3696284">)</span>&nbsp;<span class="op" id="3696286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696290">_</span><span class="op" id="3696291">,</span>&nbsp;<span class="ident" id="3696293">rest</span><span class="op" id="3696297">,</span>&nbsp;<span class="ident" id="3696299">err</span>&nbsp;<span class="op" id="3696303">:=</span>&nbsp;<span class="ident" id="3696306">nextValue</span><span class="op" id="3696315">(</span><span class="ident" id="3696316">d</span><span class="op" id="3696317">.</span><span class="ident" id="3696318">data</span><span class="op" id="3696322">[</span><span class="ident" id="3696323">d</span><span class="op" id="3696324">.</span><span class="ident" id="3696325">off</span><span class="op" id="3696328">:</span><span class="op" id="3696329">]</span><span class="op" id="3696330">,</span>&nbsp;<span class="op" id="3696332">&amp;</span><span class="ident" id="3696333">d</span><span class="op" id="3696334">.</span><span class="ident" id="3696335">nextscan</span><span class="op" id="3696343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696347">if</span>&nbsp;<span class="ident" id="3696350">err</span>&nbsp;<span class="op" id="3696354">!=</span>&nbsp;<span class="ident" id="3696357">nil</span>&nbsp;<span class="op" id="3696361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696366">d</span><span class="op" id="3696367">.</span><span class="builtintype" id="3696368">error</span><span class="op" id="3696373">(</span><span class="ident" id="3696374">err</span><span class="op" id="3696377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696381">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696385">d</span><span class="op" id="3696386">.</span><span class="ident" id="3696387">off</span>&nbsp;<span class="op" id="3696391">=</span>&nbsp;<span class="builtinfunc" id="3696393">len</span><span class="op" id="3696396">(</span><span class="ident" id="3696397">d</span><span class="op" id="3696398">.</span><span class="ident" id="3696399">data</span><span class="op" id="3696403">)</span>&nbsp;<span class="op" id="3696405">-</span>&nbsp;<span class="builtinfunc" id="3696407">len</span><span class="op" id="3696410">(</span><span class="ident" id="3696411">rest</span><span class="op" id="3696415">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696420">//&nbsp;d.scan&nbsp;thinks&nbsp;we&#39;re&nbsp;still&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;item.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696481">//&nbsp;Feed&nbsp;in&nbsp;an&nbsp;empty&nbsp;string&nbsp;-&nbsp;the&nbsp;shortest,&nbsp;simplest&nbsp;value&nbsp;-</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696543">//&nbsp;so&nbsp;that&nbsp;it&nbsp;knows&nbsp;we&nbsp;got&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;value.</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696597">if</span>&nbsp;<span class="ident" id="3696600">d</span><span class="op" id="3696601">.</span><span class="ident" id="3696602">scan</span><span class="op" id="3696606">.</span><span class="ident" id="3696607">redo</span>&nbsp;<span class="op" id="3696612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696617">//&nbsp;rewind.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696631">d</span><span class="op" id="3696632">.</span><span class="ident" id="3696633">scan</span><span class="op" id="3696637">.</span><span class="ident" id="3696638">redo</span>&nbsp;<span class="op" id="3696643">=</span>&nbsp;<span class="builtintype" id="3696645">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696654">d</span><span class="op" id="3696655">.</span><span class="ident" id="3696656">scan</span><span class="op" id="3696660">.</span><span class="ident" id="3696661">step</span>&nbsp;<span class="op" id="3696666">=</span>&nbsp;<span class="ident" id="3696668">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3696686">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696690">d</span><span class="op" id="3696691">.</span><span class="ident" id="3696692">scan</span><span class="op" id="3696696">.</span><span class="ident" id="3696697">step</span><span class="op" id="3696701">(</span><span class="op" id="3696702">&amp;</span><span class="ident" id="3696703">d</span><span class="op" id="3696704">.</span><span class="ident" id="3696705">scan</span><span class="op" id="3696709">,</span>&nbsp;<span class="string" id="3696711">&#39;&#34;&#39;</span><span class="op" id="3696714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696718">d</span><span class="op" id="3696719">.</span><span class="ident" id="3696720">scan</span><span class="op" id="3696724">.</span><span class="ident" id="3696725">step</span><span class="op" id="3696729">(</span><span class="op" id="3696730">&amp;</span><span class="ident" id="3696731">d</span><span class="op" id="3696732">.</span><span class="ident" id="3696733">scan</span><span class="op" id="3696737">,</span>&nbsp;<span class="string" id="3696739">&#39;&#34;&#39;</span><span class="op" id="3696742">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696747">n</span>&nbsp;<span class="op" id="3696749">:=</span>&nbsp;<span class="builtinfunc" id="3696752">len</span><span class="op" id="3696755">(</span><span class="ident" id="3696756">d</span><span class="op" id="3696757">.</span><span class="ident" id="3696758">scan</span><span class="op" id="3696762">.</span><span class="ident" id="3696763">parseState</span><span class="op" id="3696773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3696777">if</span>&nbsp;<span class="ident" id="3696780">n</span>&nbsp;<span class="op" id="3696782">&gt;</span>&nbsp;<span class="num" id="3696784">0</span>&nbsp;<span class="op" id="3696786">&amp;&amp;</span>&nbsp;<span class="ident" id="3696789">d</span><span class="op" id="3696790">.</span><span class="ident" id="3696791">scan</span><span class="op" id="3696795">.</span><span class="ident" id="3696796">parseState</span><span class="op" id="3696806">[</span><span class="ident" id="3696807">n</span><span class="op" id="3696808">-</span><span class="num" id="3696809">1</span><span class="op" id="3696810">]</span>&nbsp;<span class="op" id="3696812">==</span>&nbsp;<span class="ident" id="3696815">parseObjectKey</span>&nbsp;<span class="op" id="3696830">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3696835">//&nbsp;d.scan&nbsp;thinks&nbsp;we&nbsp;just&nbsp;read&nbsp;an&nbsp;object&nbsp;key;&nbsp;finish&nbsp;the&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696901">d</span><span class="op" id="3696902">.</span><span class="ident" id="3696903">scan</span><span class="op" id="3696907">.</span><span class="ident" id="3696908">step</span><span class="op" id="3696912">(</span><span class="op" id="3696913">&amp;</span><span class="ident" id="3696914">d</span><span class="op" id="3696915">.</span><span class="ident" id="3696916">scan</span><span class="op" id="3696920">,</span>&nbsp;<span class="string" id="3696922">&#39;:&#39;</span><span class="op" id="3696925">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696930">d</span><span class="op" id="3696931">.</span><span class="ident" id="3696932">scan</span><span class="op" id="3696936">.</span><span class="ident" id="3696937">step</span><span class="op" id="3696941">(</span><span class="op" id="3696942">&amp;</span><span class="ident" id="3696943">d</span><span class="op" id="3696944">.</span><span class="ident" id="3696945">scan</span><span class="op" id="3696949">,</span>&nbsp;<span class="string" id="3696951">&#39;&#34;&#39;</span><span class="op" id="3696954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696959">d</span><span class="op" id="3696960">.</span><span class="ident" id="3696961">scan</span><span class="op" id="3696965">.</span><span class="ident" id="3696966">step</span><span class="op" id="3696970">(</span><span class="op" id="3696971">&amp;</span><span class="ident" id="3696972">d</span><span class="op" id="3696973">.</span><span class="ident" id="3696974">scan</span><span class="op" id="3696978">,</span>&nbsp;<span class="string" id="3696980">&#39;&#34;&#39;</span><span class="op" id="3696983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3696988">d</span><span class="op" id="3696989">.</span><span class="ident" id="3696990">scan</span><span class="op" id="3696994">.</span><span class="ident" id="3696995">step</span><span class="op" id="3696999">(</span><span class="op" id="3697000">&amp;</span><span class="ident" id="3697001">d</span><span class="op" id="3697002">.</span><span class="ident" id="3697003">scan</span><span class="op" id="3697007">,</span>&nbsp;<span class="string" id="3697009">&#39;}&#39;</span><span class="op" id="3697012">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697021">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697033">switch</span>&nbsp;<span class="ident" id="3697040">op</span>&nbsp;<span class="op" id="3697043">:=</span>&nbsp;<span class="ident" id="3697046">d</span><span class="op" id="3697047">.</span><span class="ident" id="3697048">scanWhile</span><span class="op" id="3697057">(</span><span class="ident" id="3697058">scanSkipSpace</span><span class="op" id="3697071">)</span><span class="op" id="3697072">;</span>&nbsp;<span class="ident" id="3697074">op</span>&nbsp;<span class="op" id="3697077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697080">default</span><span class="op" id="3697087">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697091">d</span><span class="op" id="3697092">.</span><span class="builtintype" id="3697093">error</span><span class="op" id="3697098">(</span><span class="ident" id="3697099">errPhase</span><span class="op" id="3697107">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697111">case</span>&nbsp;<span class="ident" id="3697116">scanBeginArray</span><span class="op" id="3697130">:</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697134">d</span><span class="op" id="3697135">.</span><span class="ident" id="3697136">array</span><span class="op" id="3697141">(</span><span class="ident" id="3697142">v</span><span class="op" id="3697143">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697147">case</span>&nbsp;<span class="ident" id="3697152">scanBeginObject</span><span class="op" id="3697167">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697171">d</span><span class="op" id="3697172">.</span><span class="ident" id="3697173">object</span><span class="op" id="3697179">(</span><span class="ident" id="3697180">v</span><span class="op" id="3697181">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697185">case</span>&nbsp;<span class="ident" id="3697190">scanBeginLiteral</span><span class="op" id="3697206">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697210">d</span><span class="op" id="3697211">.</span><span class="ident" id="3697212">literal</span><span class="op" id="3697219">(</span><span class="ident" id="3697220">v</span><span class="op" id="3697221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697224">}</span><br>
<span class="lineno"></span><span class="op" id="3697226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span><span class="keyword" id="3697229">type</span>&nbsp;<span class="ident" id="3697234">unquotedValue</span>&nbsp;<span class="keyword" id="3697248">struct</span><span class="op" id="3697254">{</span><span class="op" id="3697255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3697258">//&nbsp;valueQuoted&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;decodes&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3697301">//&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;literal&nbsp;null&nbsp;into&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="3697367">//&nbsp;If&nbsp;it&nbsp;finds&nbsp;anything&nbsp;other&nbsp;than&nbsp;a&nbsp;quoted&nbsp;string&nbsp;literal&nbsp;or&nbsp;null,</span><br>
<span class="lineno">300</span><span class="comment" id="3697435">//&nbsp;valueQuoted&nbsp;returns&nbsp;unquotedValue{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3697475">func</span>&nbsp;<span class="op" id="3697480">(</span><span class="ident" id="3697481">d</span>&nbsp;<span class="op" id="3697483">*</span><span class="ident" id="3697484">decodeState</span><span class="op" id="3697495">)</span>&nbsp;<span class="ident" id="3697497">valueQuoted</span><span class="op" id="3697508">(</span><span class="op" id="3697509">)</span>&nbsp;<span class="keyword" id="3697511">interface</span><span class="op" id="3697520">{</span><span class="op" id="3697521">}</span>&nbsp;<span class="op" id="3697523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697526">switch</span>&nbsp;<span class="ident" id="3697533">op</span>&nbsp;<span class="op" id="3697536">:=</span>&nbsp;<span class="ident" id="3697539">d</span><span class="op" id="3697540">.</span><span class="ident" id="3697541">scanWhile</span><span class="op" id="3697550">(</span><span class="ident" id="3697551">scanSkipSpace</span><span class="op" id="3697564">)</span><span class="op" id="3697565">;</span>&nbsp;<span class="ident" id="3697567">op</span>&nbsp;<span class="op" id="3697570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697573">default</span><span class="op" id="3697580">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697584">d</span><span class="op" id="3697585">.</span><span class="builtintype" id="3697586">error</span><span class="op" id="3697591">(</span><span class="ident" id="3697592">errPhase</span><span class="op" id="3697600">)</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697604">case</span>&nbsp;<span class="ident" id="3697609">scanBeginArray</span><span class="op" id="3697623">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697627">d</span><span class="op" id="3697628">.</span><span class="ident" id="3697629">array</span><span class="op" id="3697634">(</span><span class="ident" id="3697635">reflect</span><span class="op" id="3697642">.</span><span class="ident" id="3697643">Value</span><span class="op" id="3697648">{</span><span class="op" id="3697649">}</span><span class="op" id="3697650">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697654">case</span>&nbsp;<span class="ident" id="3697659">scanBeginObject</span><span class="op" id="3697674">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3697678">d</span><span class="op" id="3697679">.</span><span class="ident" id="3697680">object</span><span class="op" id="3697686">(</span><span class="ident" id="3697687">reflect</span><span class="op" id="3697694">.</span><span class="ident" id="3697695">Value</span><span class="op" id="3697700">{</span><span class="op" id="3697701">}</span><span class="op" id="3697702">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697706">case</span>&nbsp;<span class="ident" id="3697711">scanBeginLiteral</span><span class="op" id="3697727">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697731">switch</span>&nbsp;<span class="ident" id="3697738">v</span>&nbsp;<span class="op" id="3697740">:=</span>&nbsp;<span class="ident" id="3697743">d</span><span class="op" id="3697744">.</span><span class="ident" id="3697745">literalInterface</span><span class="op" id="3697761">(</span><span class="op" id="3697762">)</span><span class="op" id="3697763">.</span><span class="op" id="3697764">(</span><span class="keyword" id="3697765">type</span><span class="op" id="3697769">)</span>&nbsp;<span class="op" id="3697771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697775">case</span>&nbsp;<span class="ident" id="3697780">nil</span><span class="op" id="3697783">,</span>&nbsp;<span class="builtintype" id="3697785">string</span><span class="op" id="3697791">:</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697796">return</span>&nbsp;<span class="ident" id="3697803">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3697810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3697813">return</span>&nbsp;<span class="ident" id="3697820">unquotedValue</span><span class="op" id="3697833">{</span><span class="op" id="3697834">}</span><br>
<span class="lineno"></span><span class="op" id="3697836">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3697839">//&nbsp;indirect&nbsp;walks&nbsp;down&nbsp;v&nbsp;allocating&nbsp;pointers&nbsp;as&nbsp;needed,</span><br>
<span class="lineno"></span><span class="comment" id="3697895">//&nbsp;until&nbsp;it&nbsp;gets&nbsp;to&nbsp;a&nbsp;non-pointer.</span><br>
<span class="lineno"></span><span class="comment" id="3697930">//&nbsp;if&nbsp;it&nbsp;encounters&nbsp;an&nbsp;Unmarshaler,&nbsp;indirect&nbsp;stops&nbsp;and&nbsp;returns&nbsp;that.</span><br>
<span class="lineno"></span><span class="comment" id="3697999">//&nbsp;if&nbsp;decodingNull&nbsp;is&nbsp;true,&nbsp;indirect&nbsp;stops&nbsp;at&nbsp;the&nbsp;last&nbsp;pointer&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;set&nbsp;to&nbsp;nil.</span><br>
<span class="lineno">325</span><span class="keyword" id="3698087">func</span>&nbsp;<span class="op" id="3698092">(</span><span class="ident" id="3698093">d</span>&nbsp;<span class="op" id="3698095">*</span><span class="ident" id="3698096">decodeState</span><span class="op" id="3698107">)</span>&nbsp;<span class="ident" id="3698109">indirect</span><span class="op" id="3698117">(</span><span class="ident" id="3698118">v</span>&nbsp;<span class="ident" id="3698120">reflect</span><span class="op" id="3698127">.</span><span class="ident" id="3698128">Value</span><span class="op" id="3698133">,</span>&nbsp;<span class="ident" id="3698135">decodingNull</span>&nbsp;<span class="builtintype" id="3698148">bool</span><span class="op" id="3698152">)</span>&nbsp;<span class="op" id="3698154">(</span><span class="ident" id="3698155">Unmarshaler</span><span class="op" id="3698166">,</span>&nbsp;<span class="ident" id="3698168">encoding</span><span class="op" id="3698176">.</span><span class="ident" id="3698177">TextUnmarshaler</span><span class="op" id="3698192">,</span>&nbsp;<span class="ident" id="3698194">reflect</span><span class="op" id="3698201">.</span><span class="ident" id="3698202">Value</span><span class="op" id="3698207">)</span>&nbsp;<span class="op" id="3698209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698212">//&nbsp;If&nbsp;v&nbsp;is&nbsp;a&nbsp;named&nbsp;type&nbsp;and&nbsp;is&nbsp;addressable,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698257">//&nbsp;start&nbsp;with&nbsp;its&nbsp;address,&nbsp;so&nbsp;that&nbsp;if&nbsp;the&nbsp;type&nbsp;has&nbsp;pointer&nbsp;methods,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698326">//&nbsp;we&nbsp;find&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698344">if</span>&nbsp;<span class="ident" id="3698347">v</span><span class="op" id="3698348">.</span><span class="ident" id="3698349">Kind</span><span class="op" id="3698353">(</span><span class="op" id="3698354">)</span>&nbsp;<span class="op" id="3698356">!=</span>&nbsp;<span class="ident" id="3698359">reflect</span><span class="op" id="3698366">.</span><span class="ident" id="3698367">Ptr</span>&nbsp;<span class="op" id="3698371">&amp;&amp;</span>&nbsp;<span class="ident" id="3698374">v</span><span class="op" id="3698375">.</span><span class="ident" id="3698376">Type</span><span class="op" id="3698380">(</span><span class="op" id="3698381">)</span><span class="op" id="3698382">.</span><span class="ident" id="3698383">Name</span><span class="op" id="3698387">(</span><span class="op" id="3698388">)</span>&nbsp;<span class="op" id="3698390">!=</span>&nbsp;<span class="string" id="3698393">&#34;&#34;</span>&nbsp;<span class="op" id="3698396">&amp;&amp;</span>&nbsp;<span class="ident" id="3698399">v</span><span class="op" id="3698400">.</span><span class="ident" id="3698401">CanAddr</span><span class="op" id="3698408">(</span><span class="op" id="3698409">)</span>&nbsp;<span class="op" id="3698411">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698415">v</span>&nbsp;<span class="op" id="3698417">=</span>&nbsp;<span class="ident" id="3698419">v</span><span class="op" id="3698420">.</span><span class="ident" id="3698421">Addr</span><span class="op" id="3698425">(</span><span class="op" id="3698426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698432">for</span>&nbsp;<span class="op" id="3698436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698440">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3698503">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698530">if</span>&nbsp;<span class="ident" id="3698533">v</span><span class="op" id="3698534">.</span><span class="ident" id="3698535">Kind</span><span class="op" id="3698539">(</span><span class="op" id="3698540">)</span>&nbsp;<span class="op" id="3698542">==</span>&nbsp;<span class="ident" id="3698545">reflect</span><span class="op" id="3698552">.</span><span class="ident" id="3698553">Interface</span>&nbsp;<span class="op" id="3698563">&amp;&amp;</span>&nbsp;<span class="op" id="3698566">!</span><span class="ident" id="3698567">v</span><span class="op" id="3698568">.</span><span class="ident" id="3698569">IsNil</span><span class="op" id="3698574">(</span><span class="op" id="3698575">)</span>&nbsp;<span class="op" id="3698577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698582">e</span>&nbsp;<span class="op" id="3698584">:=</span>&nbsp;<span class="ident" id="3698587">v</span><span class="op" id="3698588">.</span><span class="ident" id="3698589">Elem</span><span class="op" id="3698593">(</span><span class="op" id="3698594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698599">if</span>&nbsp;<span class="ident" id="3698602">e</span><span class="op" id="3698603">.</span><span class="ident" id="3698604">Kind</span><span class="op" id="3698608">(</span><span class="op" id="3698609">)</span>&nbsp;<span class="op" id="3698611">==</span>&nbsp;<span class="ident" id="3698614">reflect</span><span class="op" id="3698621">.</span><span class="ident" id="3698622">Ptr</span>&nbsp;<span class="op" id="3698626">&amp;&amp;</span>&nbsp;<span class="op" id="3698629">!</span><span class="ident" id="3698630">e</span><span class="op" id="3698631">.</span><span class="ident" id="3698632">IsNil</span><span class="op" id="3698637">(</span><span class="op" id="3698638">)</span>&nbsp;<span class="op" id="3698640">&amp;&amp;</span>&nbsp;<span class="op" id="3698643">(</span><span class="op" id="3698644">!</span><span class="ident" id="3698645">decodingNull</span>&nbsp;<span class="op" id="3698658">||</span>&nbsp;<span class="ident" id="3698661">e</span><span class="op" id="3698662">.</span><span class="ident" id="3698663">Elem</span><span class="op" id="3698667">(</span><span class="op" id="3698668">)</span><span class="op" id="3698669">.</span><span class="ident" id="3698670">Kind</span><span class="op" id="3698674">(</span><span class="op" id="3698675">)</span>&nbsp;<span class="op" id="3698677">==</span>&nbsp;<span class="ident" id="3698680">reflect</span><span class="op" id="3698687">.</span><span class="ident" id="3698688">Ptr</span><span class="op" id="3698691">)</span>&nbsp;<span class="op" id="3698693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698699">v</span>&nbsp;<span class="op" id="3698701">=</span>&nbsp;<span class="ident" id="3698703">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698709">continue</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698730">if</span>&nbsp;<span class="ident" id="3698733">v</span><span class="op" id="3698734">.</span><span class="ident" id="3698735">Kind</span><span class="op" id="3698739">(</span><span class="op" id="3698740">)</span>&nbsp;<span class="op" id="3698742">!=</span>&nbsp;<span class="ident" id="3698745">reflect</span><span class="op" id="3698752">.</span><span class="ident" id="3698753">Ptr</span>&nbsp;<span class="op" id="3698757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698762">break</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698775">if</span>&nbsp;<span class="ident" id="3698778">v</span><span class="op" id="3698779">.</span><span class="ident" id="3698780">Elem</span><span class="op" id="3698784">(</span><span class="op" id="3698785">)</span><span class="op" id="3698786">.</span><span class="ident" id="3698787">Kind</span><span class="op" id="3698791">(</span><span class="op" id="3698792">)</span>&nbsp;<span class="op" id="3698794">!=</span>&nbsp;<span class="ident" id="3698797">reflect</span><span class="op" id="3698804">.</span><span class="ident" id="3698805">Ptr</span>&nbsp;<span class="op" id="3698809">&amp;&amp;</span>&nbsp;<span class="ident" id="3698812">decodingNull</span>&nbsp;<span class="op" id="3698825">&amp;&amp;</span>&nbsp;<span class="ident" id="3698828">v</span><span class="op" id="3698829">.</span><span class="ident" id="3698830">CanSet</span><span class="op" id="3698836">(</span><span class="op" id="3698837">)</span>&nbsp;<span class="op" id="3698839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698844">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698852">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698856">if</span>&nbsp;<span class="ident" id="3698859">v</span><span class="op" id="3698860">.</span><span class="ident" id="3698861">IsNil</span><span class="op" id="3698866">(</span><span class="op" id="3698867">)</span>&nbsp;<span class="op" id="3698869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3698874">v</span><span class="op" id="3698875">.</span><span class="ident" id="3698876">Set</span><span class="op" id="3698879">(</span><span class="ident" id="3698880">reflect</span><span class="op" id="3698887">.</span><span class="ident" id="3698888">New</span><span class="op" id="3698891">(</span><span class="ident" id="3698892">v</span><span class="op" id="3698893">.</span><span class="ident" id="3698894">Type</span><span class="op" id="3698898">(</span><span class="op" id="3698899">)</span><span class="op" id="3698900">.</span><span class="ident" id="3698901">Elem</span><span class="op" id="3698905">(</span><span class="op" id="3698906">)</span><span class="op" id="3698907">)</span><span class="op" id="3698908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3698912">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698916">if</span>&nbsp;<span class="ident" id="3698919">v</span><span class="op" id="3698920">.</span><span class="ident" id="3698921">Type</span><span class="op" id="3698925">(</span><span class="op" id="3698926">)</span><span class="op" id="3698927">.</span><span class="ident" id="3698928">NumMethod</span><span class="op" id="3698937">(</span><span class="op" id="3698938">)</span>&nbsp;<span class="op" id="3698940">&gt;</span>&nbsp;<span class="num" id="3698942">0</span>&nbsp;<span class="op" id="3698944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698949">if</span>&nbsp;<span class="ident" id="3698952">u</span><span class="op" id="3698953">,</span>&nbsp;<span class="ident" id="3698955">ok</span>&nbsp;<span class="op" id="3698958">:=</span>&nbsp;<span class="ident" id="3698961">v</span><span class="op" id="3698962">.</span><span class="ident" id="3698963">Interface</span><span class="op" id="3698972">(</span><span class="op" id="3698973">)</span><span class="op" id="3698974">.</span><span class="op" id="3698975">(</span><span class="ident" id="3698976">Unmarshaler</span><span class="op" id="3698987">)</span><span class="op" id="3698988">;</span>&nbsp;<span class="ident" id="3698990">ok</span>&nbsp;<span class="op" id="3698993">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3698999">return</span>&nbsp;<span class="ident" id="3699006">u</span><span class="op" id="3699007">,</span>&nbsp;<span class="ident" id="3699009">nil</span><span class="op" id="3699012">,</span>&nbsp;<span class="ident" id="3699014">reflect</span><span class="op" id="3699021">.</span><span class="ident" id="3699022">Value</span><span class="op" id="3699027">{</span><span class="op" id="3699028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699038">if</span>&nbsp;<span class="ident" id="3699041">u</span><span class="op" id="3699042">,</span>&nbsp;<span class="ident" id="3699044">ok</span>&nbsp;<span class="op" id="3699047">:=</span>&nbsp;<span class="ident" id="3699050">v</span><span class="op" id="3699051">.</span><span class="ident" id="3699052">Interface</span><span class="op" id="3699061">(</span><span class="op" id="3699062">)</span><span class="op" id="3699063">.</span><span class="op" id="3699064">(</span><span class="ident" id="3699065">encoding</span><span class="op" id="3699073">.</span><span class="ident" id="3699074">TextUnmarshaler</span><span class="op" id="3699089">)</span><span class="op" id="3699090">;</span>&nbsp;<span class="ident" id="3699092">ok</span>&nbsp;<span class="op" id="3699095">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699101">return</span>&nbsp;<span class="ident" id="3699108">nil</span><span class="op" id="3699111">,</span>&nbsp;<span class="ident" id="3699113">u</span><span class="op" id="3699114">,</span>&nbsp;<span class="ident" id="3699116">reflect</span><span class="op" id="3699123">.</span><span class="ident" id="3699124">Value</span><span class="op" id="3699129">{</span><span class="op" id="3699130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699135">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699143">v</span>&nbsp;<span class="op" id="3699145">=</span>&nbsp;<span class="ident" id="3699147">v</span><span class="op" id="3699148">.</span><span class="ident" id="3699149">Elem</span><span class="op" id="3699153">(</span><span class="op" id="3699154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699157">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699160">return</span>&nbsp;<span class="ident" id="3699167">nil</span><span class="op" id="3699170">,</span>&nbsp;<span class="ident" id="3699172">nil</span><span class="op" id="3699175">,</span>&nbsp;<span class="ident" id="3699177">v</span><br>
<span class="lineno"></span><span class="op" id="3699179">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="comment" id="3699182">//&nbsp;array&nbsp;consumes&nbsp;an&nbsp;array&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3699259">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;array&nbsp;(&#39;[&#39;)&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3699319">func</span>&nbsp;<span class="op" id="3699324">(</span><span class="ident" id="3699325">d</span>&nbsp;<span class="op" id="3699327">*</span><span class="ident" id="3699328">decodeState</span><span class="op" id="3699339">)</span>&nbsp;<span class="ident" id="3699341">array</span><span class="op" id="3699346">(</span><span class="ident" id="3699347">v</span>&nbsp;<span class="ident" id="3699349">reflect</span><span class="op" id="3699356">.</span><span class="ident" id="3699357">Value</span><span class="op" id="3699362">)</span>&nbsp;<span class="op" id="3699364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3699367">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699394">u</span><span class="op" id="3699395">,</span>&nbsp;<span class="ident" id="3699397">ut</span><span class="op" id="3699399">,</span>&nbsp;<span class="ident" id="3699401">pv</span>&nbsp;<span class="op" id="3699404">:=</span>&nbsp;<span class="ident" id="3699407">d</span><span class="op" id="3699408">.</span><span class="ident" id="3699409">indirect</span><span class="op" id="3699417">(</span><span class="ident" id="3699418">v</span><span class="op" id="3699419">,</span>&nbsp;<span class="builtintype" id="3699421">false</span><span class="op" id="3699426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699429">if</span>&nbsp;<span class="ident" id="3699432">u</span>&nbsp;<span class="op" id="3699434">!=</span>&nbsp;<span class="ident" id="3699437">nil</span>&nbsp;<span class="op" id="3699441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699445">d</span><span class="op" id="3699446">.</span><span class="ident" id="3699447">off</span><span class="op" id="3699450">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699455">err</span>&nbsp;<span class="op" id="3699459">:=</span>&nbsp;<span class="ident" id="3699462">u</span><span class="op" id="3699463">.</span><span class="ident" id="3699464">UnmarshalJSON</span><span class="op" id="3699477">(</span><span class="ident" id="3699478">d</span><span class="op" id="3699479">.</span><span class="ident" id="3699480">next</span><span class="op" id="3699484">(</span><span class="op" id="3699485">)</span><span class="op" id="3699486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699490">if</span>&nbsp;<span class="ident" id="3699493">err</span>&nbsp;<span class="op" id="3699497">!=</span>&nbsp;<span class="ident" id="3699500">nil</span>&nbsp;<span class="op" id="3699504">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699509">d</span><span class="op" id="3699510">.</span><span class="builtintype" id="3699511">error</span><span class="op" id="3699516">(</span><span class="ident" id="3699517">err</span><span class="op" id="3699520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699524">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699528">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699539">if</span>&nbsp;<span class="ident" id="3699542">ut</span>&nbsp;<span class="op" id="3699545">!=</span>&nbsp;<span class="ident" id="3699548">nil</span>&nbsp;<span class="op" id="3699552">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699556">d</span><span class="op" id="3699557">.</span><span class="ident" id="3699558">saveError</span><span class="op" id="3699567">(</span><span class="op" id="3699568">&amp;</span><span class="ident" id="3699569">UnmarshalTypeError</span><span class="op" id="3699587">{</span><span class="string" id="3699588">&#34;array&#34;</span><span class="op" id="3699595">,</span>&nbsp;<span class="ident" id="3699597">v</span><span class="op" id="3699598">.</span><span class="ident" id="3699599">Type</span><span class="op" id="3699603">(</span><span class="op" id="3699604">)</span><span class="op" id="3699605">}</span><span class="op" id="3699606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699610">d</span><span class="op" id="3699611">.</span><span class="ident" id="3699612">off</span><span class="op" id="3699615">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699620">d</span><span class="op" id="3699621">.</span><span class="ident" id="3699622">next</span><span class="op" id="3699626">(</span><span class="op" id="3699627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699631">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699639">}</span><br>
<span class="lineno">385</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699643">v</span>&nbsp;<span class="op" id="3699645">=</span>&nbsp;<span class="ident" id="3699647">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3699652">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699678">switch</span>&nbsp;<span class="ident" id="3699685">v</span><span class="op" id="3699686">.</span><span class="ident" id="3699687">Kind</span><span class="op" id="3699691">(</span><span class="op" id="3699692">)</span>&nbsp;<span class="op" id="3699694">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699697">case</span>&nbsp;<span class="ident" id="3699702">reflect</span><span class="op" id="3699709">.</span><span class="ident" id="3699710">Interface</span><span class="op" id="3699719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699723">if</span>&nbsp;<span class="ident" id="3699726">v</span><span class="op" id="3699727">.</span><span class="ident" id="3699728">NumMethod</span><span class="op" id="3699737">(</span><span class="op" id="3699738">)</span>&nbsp;<span class="op" id="3699740">==</span>&nbsp;<span class="num" id="3699743">0</span>&nbsp;<span class="op" id="3699745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3699750">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699814">v</span><span class="op" id="3699815">.</span><span class="ident" id="3699816">Set</span><span class="op" id="3699819">(</span><span class="ident" id="3699820">reflect</span><span class="op" id="3699827">.</span><span class="ident" id="3699828">ValueOf</span><span class="op" id="3699835">(</span><span class="ident" id="3699836">d</span><span class="op" id="3699837">.</span><span class="ident" id="3699838">arrayInterface</span><span class="op" id="3699852">(</span><span class="op" id="3699853">)</span><span class="op" id="3699854">)</span><span class="op" id="3699855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699860">return</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3699869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3699873">//&nbsp;Otherwise&nbsp;it&#39;s&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699902">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3699915">default</span><span class="op" id="3699922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699926">d</span><span class="op" id="3699927">.</span><span class="ident" id="3699928">saveError</span><span class="op" id="3699937">(</span><span class="op" id="3699938">&amp;</span><span class="ident" id="3699939">UnmarshalTypeError</span><span class="op" id="3699957">{</span><span class="string" id="3699958">&#34;array&#34;</span><span class="op" id="3699965">,</span>&nbsp;<span class="ident" id="3699967">v</span><span class="op" id="3699968">.</span><span class="ident" id="3699969">Type</span><span class="op" id="3699973">(</span><span class="op" id="3699974">)</span><span class="op" id="3699975">}</span><span class="op" id="3699976">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699980">d</span><span class="op" id="3699981">.</span><span class="ident" id="3699982">off</span><span class="op" id="3699985">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3699990">d</span><span class="op" id="3699991">.</span><span class="ident" id="3699992">next</span><span class="op" id="3699996">(</span><span class="op" id="3699997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700001">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700009">case</span>&nbsp;<span class="ident" id="3700014">reflect</span><span class="op" id="3700021">.</span><span class="ident" id="3700022">Array</span><span class="op" id="3700027">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700030">case</span>&nbsp;<span class="ident" id="3700035">reflect</span><span class="op" id="3700042">.</span><span class="ident" id="3700043">Slice</span><span class="op" id="3700048">:</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700052">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700059">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700063">i</span>&nbsp;<span class="op" id="3700065">:=</span>&nbsp;<span class="num" id="3700068">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700071">for</span>&nbsp;<span class="op" id="3700075">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700079">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700139">op</span>&nbsp;<span class="op" id="3700142">:=</span>&nbsp;<span class="ident" id="3700145">d</span><span class="op" id="3700146">.</span><span class="ident" id="3700147">scanWhile</span><span class="op" id="3700156">(</span><span class="ident" id="3700157">scanSkipSpace</span><span class="op" id="3700170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700174">if</span>&nbsp;<span class="ident" id="3700177">op</span>&nbsp;<span class="op" id="3700180">==</span>&nbsp;<span class="ident" id="3700183">scanEndArray</span>&nbsp;<span class="op" id="3700196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700201">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700209">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700214">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700270">d</span><span class="op" id="3700271">.</span><span class="ident" id="3700272">off</span><span class="op" id="3700275">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700280">d</span><span class="op" id="3700281">.</span><span class="ident" id="3700282">scan</span><span class="op" id="3700286">.</span><span class="ident" id="3700287">undo</span><span class="op" id="3700291">(</span><span class="ident" id="3700292">op</span><span class="op" id="3700294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700299">//&nbsp;Get&nbsp;element&nbsp;of&nbsp;array,&nbsp;growing&nbsp;if&nbsp;necessary.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700348">if</span>&nbsp;<span class="ident" id="3700351">v</span><span class="op" id="3700352">.</span><span class="ident" id="3700353">Kind</span><span class="op" id="3700357">(</span><span class="op" id="3700358">)</span>&nbsp;<span class="op" id="3700360">==</span>&nbsp;<span class="ident" id="3700363">reflect</span><span class="op" id="3700370">.</span><span class="ident" id="3700371">Slice</span>&nbsp;<span class="op" id="3700377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700382">//&nbsp;Grow&nbsp;slice&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700412">if</span>&nbsp;<span class="ident" id="3700415">i</span>&nbsp;<span class="op" id="3700417">&gt;=</span>&nbsp;<span class="ident" id="3700420">v</span><span class="op" id="3700421">.</span><span class="ident" id="3700422">Cap</span><span class="op" id="3700425">(</span><span class="op" id="3700426">)</span>&nbsp;<span class="op" id="3700428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700434">newcap</span>&nbsp;<span class="op" id="3700441">:=</span>&nbsp;<span class="ident" id="3700444">v</span><span class="op" id="3700445">.</span><span class="ident" id="3700446">Cap</span><span class="op" id="3700449">(</span><span class="op" id="3700450">)</span>&nbsp;<span class="op" id="3700452">+</span>&nbsp;<span class="ident" id="3700454">v</span><span class="op" id="3700455">.</span><span class="ident" id="3700456">Cap</span><span class="op" id="3700459">(</span><span class="op" id="3700460">)</span><span class="op" id="3700461">/</span><span class="num" id="3700462">2</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700468">if</span>&nbsp;<span class="ident" id="3700471">newcap</span>&nbsp;<span class="op" id="3700478">&lt;</span>&nbsp;<span class="num" id="3700480">4</span>&nbsp;<span class="op" id="3700482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700489">newcap</span>&nbsp;<span class="op" id="3700496">=</span>&nbsp;<span class="num" id="3700498">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700510">newv</span>&nbsp;<span class="op" id="3700515">:=</span>&nbsp;<span class="ident" id="3700518">reflect</span><span class="op" id="3700525">.</span><span class="ident" id="3700526">MakeSlice</span><span class="op" id="3700535">(</span><span class="ident" id="3700536">v</span><span class="op" id="3700537">.</span><span class="ident" id="3700538">Type</span><span class="op" id="3700542">(</span><span class="op" id="3700543">)</span><span class="op" id="3700544">,</span>&nbsp;<span class="ident" id="3700546">v</span><span class="op" id="3700547">.</span><span class="ident" id="3700548">Len</span><span class="op" id="3700551">(</span><span class="op" id="3700552">)</span><span class="op" id="3700553">,</span>&nbsp;<span class="ident" id="3700555">newcap</span><span class="op" id="3700561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700567">reflect</span><span class="op" id="3700574">.</span><span class="ident" id="3700575">Copy</span><span class="op" id="3700579">(</span><span class="ident" id="3700580">newv</span><span class="op" id="3700584">,</span>&nbsp;<span class="ident" id="3700586">v</span><span class="op" id="3700587">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700593">v</span><span class="op" id="3700594">.</span><span class="ident" id="3700595">Set</span><span class="op" id="3700598">(</span><span class="ident" id="3700599">newv</span><span class="op" id="3700603">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700613">if</span>&nbsp;<span class="ident" id="3700616">i</span>&nbsp;<span class="op" id="3700618">&gt;=</span>&nbsp;<span class="ident" id="3700621">v</span><span class="op" id="3700622">.</span><span class="ident" id="3700623">Len</span><span class="op" id="3700626">(</span><span class="op" id="3700627">)</span>&nbsp;<span class="op" id="3700629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700635">v</span><span class="op" id="3700636">.</span><span class="ident" id="3700637">SetLen</span><span class="op" id="3700643">(</span><span class="ident" id="3700644">i</span>&nbsp;<span class="op" id="3700646">+</span>&nbsp;<span class="num" id="3700648">1</span><span class="op" id="3700649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700654">}</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700663">if</span>&nbsp;<span class="ident" id="3700666">i</span>&nbsp;<span class="op" id="3700668">&lt;</span>&nbsp;<span class="ident" id="3700670">v</span><span class="op" id="3700671">.</span><span class="ident" id="3700672">Len</span><span class="op" id="3700675">(</span><span class="op" id="3700676">)</span>&nbsp;<span class="op" id="3700678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700683">//&nbsp;Decode&nbsp;into&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700710">d</span><span class="op" id="3700711">.</span><span class="ident" id="3700712">value</span><span class="op" id="3700717">(</span><span class="ident" id="3700718">v</span><span class="op" id="3700719">.</span><span class="ident" id="3700720">Index</span><span class="op" id="3700725">(</span><span class="ident" id="3700726">i</span><span class="op" id="3700727">)</span><span class="op" id="3700728">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700732">}</span>&nbsp;<span class="keyword" id="3700734">else</span>&nbsp;<span class="op" id="3700739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700744">//&nbsp;Ran&nbsp;out&nbsp;of&nbsp;fixed&nbsp;array:&nbsp;skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700780">d</span><span class="op" id="3700781">.</span><span class="ident" id="3700782">value</span><span class="op" id="3700787">(</span><span class="ident" id="3700788">reflect</span><span class="op" id="3700795">.</span><span class="ident" id="3700796">Value</span><span class="op" id="3700801">{</span><span class="op" id="3700802">}</span><span class="op" id="3700803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700811">i</span><span class="op" id="3700812">++</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3700818">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700850">op</span>&nbsp;<span class="op" id="3700853">=</span>&nbsp;<span class="ident" id="3700855">d</span><span class="op" id="3700856">.</span><span class="ident" id="3700857">scanWhile</span><span class="op" id="3700866">(</span><span class="ident" id="3700867">scanSkipSpace</span><span class="op" id="3700880">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700884">if</span>&nbsp;<span class="ident" id="3700887">op</span>&nbsp;<span class="op" id="3700890">==</span>&nbsp;<span class="ident" id="3700893">scanEndArray</span>&nbsp;<span class="op" id="3700906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700911">break</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700923">if</span>&nbsp;<span class="ident" id="3700926">op</span>&nbsp;<span class="op" id="3700929">!=</span>&nbsp;<span class="ident" id="3700932">scanArrayValue</span>&nbsp;<span class="op" id="3700947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3700952">d</span><span class="op" id="3700953">.</span><span class="builtintype" id="3700954">error</span><span class="op" id="3700959">(</span><span class="ident" id="3700960">errPhase</span><span class="op" id="3700968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3700975">}</span><br>
<span class="lineno">455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700979">if</span>&nbsp;<span class="ident" id="3700982">i</span>&nbsp;<span class="op" id="3700984">&lt;</span>&nbsp;<span class="ident" id="3700986">v</span><span class="op" id="3700987">.</span><span class="ident" id="3700988">Len</span><span class="op" id="3700991">(</span><span class="op" id="3700992">)</span>&nbsp;<span class="op" id="3700994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3700998">if</span>&nbsp;<span class="ident" id="3701001">v</span><span class="op" id="3701002">.</span><span class="ident" id="3701003">Kind</span><span class="op" id="3701007">(</span><span class="op" id="3701008">)</span>&nbsp;<span class="op" id="3701010">==</span>&nbsp;<span class="ident" id="3701013">reflect</span><span class="op" id="3701020">.</span><span class="ident" id="3701021">Array</span>&nbsp;<span class="op" id="3701027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3701032">//&nbsp;Array.&nbsp;&nbsp;Zero&nbsp;the&nbsp;rest.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701061">z</span>&nbsp;<span class="op" id="3701063">:=</span>&nbsp;<span class="ident" id="3701066">reflect</span><span class="op" id="3701073">.</span><span class="ident" id="3701074">Zero</span><span class="op" id="3701078">(</span><span class="ident" id="3701079">v</span><span class="op" id="3701080">.</span><span class="ident" id="3701081">Type</span><span class="op" id="3701085">(</span><span class="op" id="3701086">)</span><span class="op" id="3701087">.</span><span class="ident" id="3701088">Elem</span><span class="op" id="3701092">(</span><span class="op" id="3701093">)</span><span class="op" id="3701094">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701099">for</span>&nbsp;<span class="op" id="3701103">;</span>&nbsp;<span class="ident" id="3701105">i</span>&nbsp;<span class="op" id="3701107">&lt;</span>&nbsp;<span class="ident" id="3701109">v</span><span class="op" id="3701110">.</span><span class="ident" id="3701111">Len</span><span class="op" id="3701114">(</span><span class="op" id="3701115">)</span><span class="op" id="3701116">;</span>&nbsp;<span class="ident" id="3701118">i</span><span class="op" id="3701119">++</span>&nbsp;<span class="op" id="3701122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701128">v</span><span class="op" id="3701129">.</span><span class="ident" id="3701130">Index</span><span class="op" id="3701135">(</span><span class="ident" id="3701136">i</span><span class="op" id="3701137">)</span><span class="op" id="3701138">.</span><span class="ident" id="3701139">Set</span><span class="op" id="3701142">(</span><span class="ident" id="3701143">z</span><span class="op" id="3701144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701149">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701153">}</span>&nbsp;<span class="keyword" id="3701155">else</span>&nbsp;<span class="op" id="3701160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701165">v</span><span class="op" id="3701166">.</span><span class="ident" id="3701167">SetLen</span><span class="op" id="3701173">(</span><span class="ident" id="3701174">i</span><span class="op" id="3701175">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701185">if</span>&nbsp;<span class="ident" id="3701188">i</span>&nbsp;<span class="op" id="3701190">==</span>&nbsp;<span class="num" id="3701193">0</span>&nbsp;<span class="op" id="3701195">&amp;&amp;</span>&nbsp;<span class="ident" id="3701198">v</span><span class="op" id="3701199">.</span><span class="ident" id="3701200">Kind</span><span class="op" id="3701204">(</span><span class="op" id="3701205">)</span>&nbsp;<span class="op" id="3701207">==</span>&nbsp;<span class="ident" id="3701210">reflect</span><span class="op" id="3701217">.</span><span class="ident" id="3701218">Slice</span>&nbsp;<span class="op" id="3701224">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701228">v</span><span class="op" id="3701229">.</span><span class="ident" id="3701230">Set</span><span class="op" id="3701233">(</span><span class="ident" id="3701234">reflect</span><span class="op" id="3701241">.</span><span class="ident" id="3701242">MakeSlice</span><span class="op" id="3701251">(</span><span class="ident" id="3701252">v</span><span class="op" id="3701253">.</span><span class="ident" id="3701254">Type</span><span class="op" id="3701258">(</span><span class="op" id="3701259">)</span><span class="op" id="3701260">,</span>&nbsp;<span class="num" id="3701262">0</span><span class="op" id="3701263">,</span>&nbsp;<span class="num" id="3701265">0</span><span class="op" id="3701266">)</span><span class="op" id="3701267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701270">}</span><br>
<span class="lineno">470</span><span class="op" id="3701272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3701275">var</span>&nbsp;<span class="ident" id="3701279">nullLiteral</span>&nbsp;<span class="op" id="3701291">=</span>&nbsp;<span class="op" id="3701293">[</span><span class="op" id="3701294">]</span><span class="builtintype" id="3701295">byte</span><span class="op" id="3701299">(</span><span class="string" id="3701300">&#34;null&#34;</span><span class="op" id="3701306">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3701309">//&nbsp;object&nbsp;consumes&nbsp;an&nbsp;object&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno">475</span><span class="comment" id="3701388">//&nbsp;the&nbsp;first&nbsp;byte&nbsp;(&#39;{&#39;)&nbsp;of&nbsp;the&nbsp;object&nbsp;has&nbsp;been&nbsp;read&nbsp;already.</span><br>
<span class="lineno"></span><span class="keyword" id="3701449">func</span>&nbsp;<span class="op" id="3701454">(</span><span class="ident" id="3701455">d</span>&nbsp;<span class="op" id="3701457">*</span><span class="ident" id="3701458">decodeState</span><span class="op" id="3701469">)</span>&nbsp;<span class="ident" id="3701471">object</span><span class="op" id="3701477">(</span><span class="ident" id="3701478">v</span>&nbsp;<span class="ident" id="3701480">reflect</span><span class="op" id="3701487">.</span><span class="ident" id="3701488">Value</span><span class="op" id="3701493">)</span>&nbsp;<span class="op" id="3701495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3701498">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701525">u</span><span class="op" id="3701526">,</span>&nbsp;<span class="ident" id="3701528">ut</span><span class="op" id="3701530">,</span>&nbsp;<span class="ident" id="3701532">pv</span>&nbsp;<span class="op" id="3701535">:=</span>&nbsp;<span class="ident" id="3701538">d</span><span class="op" id="3701539">.</span><span class="ident" id="3701540">indirect</span><span class="op" id="3701548">(</span><span class="ident" id="3701549">v</span><span class="op" id="3701550">,</span>&nbsp;<span class="builtintype" id="3701552">false</span><span class="op" id="3701557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701560">if</span>&nbsp;<span class="ident" id="3701563">u</span>&nbsp;<span class="op" id="3701565">!=</span>&nbsp;<span class="ident" id="3701568">nil</span>&nbsp;<span class="op" id="3701572">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701576">d</span><span class="op" id="3701577">.</span><span class="ident" id="3701578">off</span><span class="op" id="3701581">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701586">err</span>&nbsp;<span class="op" id="3701590">:=</span>&nbsp;<span class="ident" id="3701593">u</span><span class="op" id="3701594">.</span><span class="ident" id="3701595">UnmarshalJSON</span><span class="op" id="3701608">(</span><span class="ident" id="3701609">d</span><span class="op" id="3701610">.</span><span class="ident" id="3701611">next</span><span class="op" id="3701615">(</span><span class="op" id="3701616">)</span><span class="op" id="3701617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701621">if</span>&nbsp;<span class="ident" id="3701624">err</span>&nbsp;<span class="op" id="3701628">!=</span>&nbsp;<span class="ident" id="3701631">nil</span>&nbsp;<span class="op" id="3701635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701640">d</span><span class="op" id="3701641">.</span><span class="builtintype" id="3701642">error</span><span class="op" id="3701647">(</span><span class="ident" id="3701648">err</span><span class="op" id="3701651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701655">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701659">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701670">if</span>&nbsp;<span class="ident" id="3701673">ut</span>&nbsp;<span class="op" id="3701676">!=</span>&nbsp;<span class="ident" id="3701679">nil</span>&nbsp;<span class="op" id="3701683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701687">d</span><span class="op" id="3701688">.</span><span class="ident" id="3701689">saveError</span><span class="op" id="3701698">(</span><span class="op" id="3701699">&amp;</span><span class="ident" id="3701700">UnmarshalTypeError</span><span class="op" id="3701718">{</span><span class="string" id="3701719">&#34;object&#34;</span><span class="op" id="3701727">,</span>&nbsp;<span class="ident" id="3701729">v</span><span class="op" id="3701730">.</span><span class="ident" id="3701731">Type</span><span class="op" id="3701735">(</span><span class="op" id="3701736">)</span><span class="op" id="3701737">}</span><span class="op" id="3701738">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701742">d</span><span class="op" id="3701743">.</span><span class="ident" id="3701744">off</span><span class="op" id="3701747">--</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701752">d</span><span class="op" id="3701753">.</span><span class="ident" id="3701754">next</span><span class="op" id="3701758">(</span><span class="op" id="3701759">)</span>&nbsp;<span class="comment" id="3701761">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701789">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701800">v</span>&nbsp;<span class="op" id="3701802">=</span>&nbsp;<span class="ident" id="3701804">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3701809">//&nbsp;Decoding&nbsp;into&nbsp;nil&nbsp;interface?&nbsp;&nbsp;Switch&nbsp;to&nbsp;non-reflect&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701871">if</span>&nbsp;<span class="ident" id="3701874">v</span><span class="op" id="3701875">.</span><span class="ident" id="3701876">Kind</span><span class="op" id="3701880">(</span><span class="op" id="3701881">)</span>&nbsp;<span class="op" id="3701883">==</span>&nbsp;<span class="ident" id="3701886">reflect</span><span class="op" id="3701893">.</span><span class="ident" id="3701894">Interface</span>&nbsp;<span class="op" id="3701904">&amp;&amp;</span>&nbsp;<span class="ident" id="3701907">v</span><span class="op" id="3701908">.</span><span class="ident" id="3701909">NumMethod</span><span class="op" id="3701918">(</span><span class="op" id="3701919">)</span>&nbsp;<span class="op" id="3701921">==</span>&nbsp;<span class="num" id="3701924">0</span>&nbsp;<span class="op" id="3701926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3701930">v</span><span class="op" id="3701931">.</span><span class="ident" id="3701932">Set</span><span class="op" id="3701935">(</span><span class="ident" id="3701936">reflect</span><span class="op" id="3701943">.</span><span class="ident" id="3701944">ValueOf</span><span class="op" id="3701951">(</span><span class="ident" id="3701952">d</span><span class="op" id="3701953">.</span><span class="ident" id="3701954">objectInterface</span><span class="op" id="3701969">(</span><span class="op" id="3701970">)</span><span class="op" id="3701971">)</span><span class="op" id="3701972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3701976">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3701984">}</span><br>
<span class="lineno">500</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3701988">//&nbsp;Check&nbsp;type&nbsp;of&nbsp;target:&nbsp;struct&nbsp;or&nbsp;map[string]T</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702037">switch</span>&nbsp;<span class="ident" id="3702044">v</span><span class="op" id="3702045">.</span><span class="ident" id="3702046">Kind</span><span class="op" id="3702050">(</span><span class="op" id="3702051">)</span>&nbsp;<span class="op" id="3702053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702056">case</span>&nbsp;<span class="ident" id="3702061">reflect</span><span class="op" id="3702068">.</span><span class="ident" id="3702069">Map</span><span class="op" id="3702072">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3702076">//&nbsp;map&nbsp;must&nbsp;have&nbsp;string&nbsp;kind</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702107">t</span>&nbsp;<span class="op" id="3702109">:=</span>&nbsp;<span class="ident" id="3702112">v</span><span class="op" id="3702113">.</span><span class="ident" id="3702114">Type</span><span class="op" id="3702118">(</span><span class="op" id="3702119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702123">if</span>&nbsp;<span class="ident" id="3702126">t</span><span class="op" id="3702127">.</span><span class="ident" id="3702128">Key</span><span class="op" id="3702131">(</span><span class="op" id="3702132">)</span><span class="op" id="3702133">.</span><span class="ident" id="3702134">Kind</span><span class="op" id="3702138">(</span><span class="op" id="3702139">)</span>&nbsp;<span class="op" id="3702141">!=</span>&nbsp;<span class="ident" id="3702144">reflect</span><span class="op" id="3702151">.</span><span class="ident" id="3702152">String</span>&nbsp;<span class="op" id="3702159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702164">d</span><span class="op" id="3702165">.</span><span class="ident" id="3702166">saveError</span><span class="op" id="3702175">(</span><span class="op" id="3702176">&amp;</span><span class="ident" id="3702177">UnmarshalTypeError</span><span class="op" id="3702195">{</span><span class="string" id="3702196">&#34;object&#34;</span><span class="op" id="3702204">,</span>&nbsp;<span class="ident" id="3702206">v</span><span class="op" id="3702207">.</span><span class="ident" id="3702208">Type</span><span class="op" id="3702212">(</span><span class="op" id="3702213">)</span><span class="op" id="3702214">}</span><span class="op" id="3702215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702220">d</span><span class="op" id="3702221">.</span><span class="ident" id="3702222">off</span><span class="op" id="3702225">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702231">d</span><span class="op" id="3702232">.</span><span class="ident" id="3702233">next</span><span class="op" id="3702237">(</span><span class="op" id="3702238">)</span>&nbsp;<span class="comment" id="3702240">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702269">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702282">if</span>&nbsp;<span class="ident" id="3702285">v</span><span class="op" id="3702286">.</span><span class="ident" id="3702287">IsNil</span><span class="op" id="3702292">(</span><span class="op" id="3702293">)</span>&nbsp;<span class="op" id="3702295">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702300">v</span><span class="op" id="3702301">.</span><span class="ident" id="3702302">Set</span><span class="op" id="3702305">(</span><span class="ident" id="3702306">reflect</span><span class="op" id="3702313">.</span><span class="ident" id="3702314">MakeMap</span><span class="op" id="3702321">(</span><span class="ident" id="3702322">t</span><span class="op" id="3702323">)</span><span class="op" id="3702324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702328">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702331">case</span>&nbsp;<span class="ident" id="3702336">reflect</span><span class="op" id="3702343">.</span><span class="ident" id="3702344">Struct</span><span class="op" id="3702350">:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702354">default</span><span class="op" id="3702361">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702365">d</span><span class="op" id="3702366">.</span><span class="ident" id="3702367">saveError</span><span class="op" id="3702376">(</span><span class="op" id="3702377">&amp;</span><span class="ident" id="3702378">UnmarshalTypeError</span><span class="op" id="3702396">{</span><span class="string" id="3702397">&#34;object&#34;</span><span class="op" id="3702405">,</span>&nbsp;<span class="ident" id="3702407">v</span><span class="op" id="3702408">.</span><span class="ident" id="3702409">Type</span><span class="op" id="3702413">(</span><span class="op" id="3702414">)</span><span class="op" id="3702415">}</span><span class="op" id="3702416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702420">d</span><span class="op" id="3702421">.</span><span class="ident" id="3702422">off</span><span class="op" id="3702425">--</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702430">d</span><span class="op" id="3702431">.</span><span class="ident" id="3702432">next</span><span class="op" id="3702436">(</span><span class="op" id="3702437">)</span>&nbsp;<span class="comment" id="3702439">//&nbsp;skip&nbsp;over&nbsp;{&nbsp;}&nbsp;in&nbsp;input</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702467">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702479">var</span>&nbsp;<span class="ident" id="3702483">mapElem</span>&nbsp;<span class="ident" id="3702491">reflect</span><span class="op" id="3702498">.</span><span class="ident" id="3702499">Value</span><br>
<span class="lineno">525</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702507">for</span>&nbsp;<span class="op" id="3702511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3702515">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702563">op</span>&nbsp;<span class="op" id="3702566">:=</span>&nbsp;<span class="ident" id="3702569">d</span><span class="op" id="3702570">.</span><span class="ident" id="3702571">scanWhile</span><span class="op" id="3702580">(</span><span class="ident" id="3702581">scanSkipSpace</span><span class="op" id="3702594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702598">if</span>&nbsp;<span class="ident" id="3702601">op</span>&nbsp;<span class="op" id="3702604">==</span>&nbsp;<span class="ident" id="3702607">scanEndObject</span>&nbsp;<span class="op" id="3702621">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3702626">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702680">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702692">if</span>&nbsp;<span class="ident" id="3702695">op</span>&nbsp;<span class="op" id="3702698">!=</span>&nbsp;<span class="ident" id="3702701">scanBeginLiteral</span>&nbsp;<span class="op" id="3702718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702723">d</span><span class="op" id="3702724">.</span><span class="builtintype" id="3702725">error</span><span class="op" id="3702730">(</span><span class="ident" id="3702731">errPhase</span><span class="op" id="3702739">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3702748">//&nbsp;Read&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702763">start</span>&nbsp;<span class="op" id="3702769">:=</span>&nbsp;<span class="ident" id="3702772">d</span><span class="op" id="3702773">.</span><span class="ident" id="3702774">off</span>&nbsp;<span class="op" id="3702778">-</span>&nbsp;<span class="num" id="3702780">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702784">op</span>&nbsp;<span class="op" id="3702787">=</span>&nbsp;<span class="ident" id="3702789">d</span><span class="op" id="3702790">.</span><span class="ident" id="3702791">scanWhile</span><span class="op" id="3702800">(</span><span class="ident" id="3702801">scanContinue</span><span class="op" id="3702813">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702817">item</span>&nbsp;<span class="op" id="3702822">:=</span>&nbsp;<span class="ident" id="3702825">d</span><span class="op" id="3702826">.</span><span class="ident" id="3702827">data</span><span class="op" id="3702831">[</span><span class="ident" id="3702832">start</span>&nbsp;<span class="op" id="3702838">:</span>&nbsp;<span class="ident" id="3702840">d</span><span class="op" id="3702841">.</span><span class="ident" id="3702842">off</span><span class="op" id="3702845">-</span><span class="num" id="3702846">1</span><span class="op" id="3702847">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702851">key</span><span class="op" id="3702854">,</span>&nbsp;<span class="ident" id="3702856">ok</span>&nbsp;<span class="op" id="3702859">:=</span>&nbsp;<span class="ident" id="3702862">unquoteBytes</span><span class="op" id="3702874">(</span><span class="ident" id="3702875">item</span><span class="op" id="3702879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702883">if</span>&nbsp;<span class="op" id="3702886">!</span><span class="ident" id="3702887">ok</span>&nbsp;<span class="op" id="3702890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702895">d</span><span class="op" id="3702896">.</span><span class="builtintype" id="3702897">error</span><span class="op" id="3702902">(</span><span class="ident" id="3702903">errPhase</span><span class="op" id="3702911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3702915">}</span><br>
<span class="lineno">545</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3702920">//&nbsp;Figure&nbsp;out&nbsp;field&nbsp;corresponding&nbsp;to&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3702964">var</span>&nbsp;<span class="ident" id="3702968">subv</span>&nbsp;<span class="ident" id="3702973">reflect</span><span class="op" id="3702980">.</span><span class="ident" id="3702981">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3702989">destring</span>&nbsp;<span class="op" id="3702998">:=</span>&nbsp;<span class="builtintype" id="3703001">false</span>&nbsp;<span class="comment" id="3703007">//&nbsp;whether&nbsp;the&nbsp;value&nbsp;is&nbsp;wrapped&nbsp;in&nbsp;a&nbsp;string&nbsp;to&nbsp;be&nbsp;decoded&nbsp;first</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703074">if</span>&nbsp;<span class="ident" id="3703077">v</span><span class="op" id="3703078">.</span><span class="ident" id="3703079">Kind</span><span class="op" id="3703083">(</span><span class="op" id="3703084">)</span>&nbsp;<span class="op" id="3703086">==</span>&nbsp;<span class="ident" id="3703089">reflect</span><span class="op" id="3703096">.</span><span class="ident" id="3703097">Map</span>&nbsp;<span class="op" id="3703101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703106">elemType</span>&nbsp;<span class="op" id="3703115">:=</span>&nbsp;<span class="ident" id="3703118">v</span><span class="op" id="3703119">.</span><span class="ident" id="3703120">Type</span><span class="op" id="3703124">(</span><span class="op" id="3703125">)</span><span class="op" id="3703126">.</span><span class="ident" id="3703127">Elem</span><span class="op" id="3703131">(</span><span class="op" id="3703132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703137">if</span>&nbsp;<span class="op" id="3703140">!</span><span class="ident" id="3703141">mapElem</span><span class="op" id="3703148">.</span><span class="ident" id="3703149">IsValid</span><span class="op" id="3703156">(</span><span class="op" id="3703157">)</span>&nbsp;<span class="op" id="3703159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703165">mapElem</span>&nbsp;<span class="op" id="3703173">=</span>&nbsp;<span class="ident" id="3703175">reflect</span><span class="op" id="3703182">.</span><span class="ident" id="3703183">New</span><span class="op" id="3703186">(</span><span class="ident" id="3703187">elemType</span><span class="op" id="3703195">)</span><span class="op" id="3703196">.</span><span class="ident" id="3703197">Elem</span><span class="op" id="3703201">(</span><span class="op" id="3703202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703207">}</span>&nbsp;<span class="keyword" id="3703209">else</span>&nbsp;<span class="op" id="3703214">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703220">mapElem</span><span class="op" id="3703227">.</span><span class="ident" id="3703228">Set</span><span class="op" id="3703231">(</span><span class="ident" id="3703232">reflect</span><span class="op" id="3703239">.</span><span class="ident" id="3703240">Zero</span><span class="op" id="3703244">(</span><span class="ident" id="3703245">elemType</span><span class="op" id="3703253">)</span><span class="op" id="3703254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703264">subv</span>&nbsp;<span class="op" id="3703269">=</span>&nbsp;<span class="ident" id="3703271">mapElem</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703281">}</span>&nbsp;<span class="keyword" id="3703283">else</span>&nbsp;<span class="op" id="3703288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703293">var</span>&nbsp;<span class="ident" id="3703297">f</span>&nbsp;<span class="op" id="3703299">*</span><span class="ident" id="3703300">field</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703309">fields</span>&nbsp;<span class="op" id="3703316">:=</span>&nbsp;<span class="ident" id="3703319">cachedTypeFields</span><span class="op" id="3703335">(</span><span class="ident" id="3703336">v</span><span class="op" id="3703337">.</span><span class="ident" id="3703338">Type</span><span class="op" id="3703342">(</span><span class="op" id="3703343">)</span><span class="op" id="3703344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703349">for</span>&nbsp;<span class="ident" id="3703353">i</span>&nbsp;<span class="op" id="3703355">:=</span>&nbsp;<span class="keyword" id="3703358">range</span>&nbsp;<span class="ident" id="3703364">fields</span>&nbsp;<span class="op" id="3703371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703377">ff</span>&nbsp;<span class="op" id="3703380">:=</span>&nbsp;<span class="op" id="3703383">&amp;</span><span class="ident" id="3703384">fields</span><span class="op" id="3703390">[</span><span class="ident" id="3703391">i</span><span class="op" id="3703392">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703398">if</span>&nbsp;<span class="ident" id="3703401">bytes</span><span class="op" id="3703406">.</span><span class="ident" id="3703407">Equal</span><span class="op" id="3703412">(</span><span class="ident" id="3703413">ff</span><span class="op" id="3703415">.</span><span class="ident" id="3703416">nameBytes</span><span class="op" id="3703425">,</span>&nbsp;<span class="ident" id="3703427">key</span><span class="op" id="3703430">)</span>&nbsp;<span class="op" id="3703432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703439">f</span>&nbsp;<span class="op" id="3703441">=</span>&nbsp;<span class="ident" id="3703443">ff</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703451">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703467">if</span>&nbsp;<span class="ident" id="3703470">f</span>&nbsp;<span class="op" id="3703472">==</span>&nbsp;<span class="ident" id="3703475">nil</span>&nbsp;<span class="op" id="3703479">&amp;&amp;</span>&nbsp;<span class="ident" id="3703482">ff</span><span class="op" id="3703484">.</span><span class="ident" id="3703485">equalFold</span><span class="op" id="3703494">(</span><span class="ident" id="3703495">ff</span><span class="op" id="3703497">.</span><span class="ident" id="3703498">nameBytes</span><span class="op" id="3703507">,</span>&nbsp;<span class="ident" id="3703509">key</span><span class="op" id="3703512">)</span>&nbsp;<span class="op" id="3703514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703521">f</span>&nbsp;<span class="op" id="3703523">=</span>&nbsp;<span class="ident" id="3703525">ff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703532">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703542">if</span>&nbsp;<span class="ident" id="3703545">f</span>&nbsp;<span class="op" id="3703547">!=</span>&nbsp;<span class="ident" id="3703550">nil</span>&nbsp;<span class="op" id="3703554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703560">subv</span>&nbsp;<span class="op" id="3703565">=</span>&nbsp;<span class="ident" id="3703567">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703573">destring</span>&nbsp;<span class="op" id="3703582">=</span>&nbsp;<span class="ident" id="3703584">f</span><span class="op" id="3703585">.</span><span class="ident" id="3703586">quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703597">for</span>&nbsp;<span class="ident" id="3703601">_</span><span class="op" id="3703602">,</span>&nbsp;<span class="ident" id="3703604">i</span>&nbsp;<span class="op" id="3703606">:=</span>&nbsp;<span class="keyword" id="3703609">range</span>&nbsp;<span class="ident" id="3703615">f</span><span class="op" id="3703616">.</span><span class="ident" id="3703617">index</span>&nbsp;<span class="op" id="3703623">{</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703630">if</span>&nbsp;<span class="ident" id="3703633">subv</span><span class="op" id="3703637">.</span><span class="ident" id="3703638">Kind</span><span class="op" id="3703642">(</span><span class="op" id="3703643">)</span>&nbsp;<span class="op" id="3703645">==</span>&nbsp;<span class="ident" id="3703648">reflect</span><span class="op" id="3703655">.</span><span class="ident" id="3703656">Ptr</span>&nbsp;<span class="op" id="3703660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703668">if</span>&nbsp;<span class="ident" id="3703671">subv</span><span class="op" id="3703675">.</span><span class="ident" id="3703676">IsNil</span><span class="op" id="3703681">(</span><span class="op" id="3703682">)</span>&nbsp;<span class="op" id="3703684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703693">subv</span><span class="op" id="3703697">.</span><span class="ident" id="3703698">Set</span><span class="op" id="3703701">(</span><span class="ident" id="3703702">reflect</span><span class="op" id="3703709">.</span><span class="ident" id="3703710">New</span><span class="op" id="3703713">(</span><span class="ident" id="3703714">subv</span><span class="op" id="3703718">.</span><span class="ident" id="3703719">Type</span><span class="op" id="3703723">(</span><span class="op" id="3703724">)</span><span class="op" id="3703725">.</span><span class="ident" id="3703726">Elem</span><span class="op" id="3703730">(</span><span class="op" id="3703731">)</span><span class="op" id="3703732">)</span><span class="op" id="3703733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703749">subv</span>&nbsp;<span class="op" id="3703754">=</span>&nbsp;<span class="ident" id="3703756">subv</span><span class="op" id="3703760">.</span><span class="ident" id="3703761">Elem</span><span class="op" id="3703765">(</span><span class="op" id="3703766">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703773">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703780">subv</span>&nbsp;<span class="op" id="3703785">=</span>&nbsp;<span class="ident" id="3703787">subv</span><span class="op" id="3703791">.</span><span class="ident" id="3703792">Field</span><span class="op" id="3703797">(</span><span class="ident" id="3703798">i</span><span class="op" id="3703799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703814">}</span><br>
<span class="lineno">585</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3703819">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703845">if</span>&nbsp;<span class="ident" id="3703848">op</span>&nbsp;<span class="op" id="3703851">==</span>&nbsp;<span class="ident" id="3703854">scanSkipSpace</span>&nbsp;<span class="op" id="3703868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703873">op</span>&nbsp;<span class="op" id="3703876">=</span>&nbsp;<span class="ident" id="3703878">d</span><span class="op" id="3703879">.</span><span class="ident" id="3703880">scanWhile</span><span class="op" id="3703889">(</span><span class="ident" id="3703890">scanSkipSpace</span><span class="op" id="3703903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703907">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703911">if</span>&nbsp;<span class="ident" id="3703914">op</span>&nbsp;<span class="op" id="3703917">!=</span>&nbsp;<span class="ident" id="3703920">scanObjectKey</span>&nbsp;<span class="op" id="3703934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3703939">d</span><span class="op" id="3703940">.</span><span class="builtintype" id="3703941">error</span><span class="op" id="3703946">(</span><span class="ident" id="3703947">errPhase</span><span class="op" id="3703955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3703959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3703964">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703981">if</span>&nbsp;<span class="ident" id="3703984">destring</span>&nbsp;<span class="op" id="3703993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3703998">switch</span>&nbsp;<span class="ident" id="3704005">qv</span>&nbsp;<span class="op" id="3704008">:=</span>&nbsp;<span class="ident" id="3704011">d</span><span class="op" id="3704012">.</span><span class="ident" id="3704013">valueQuoted</span><span class="op" id="3704024">(</span><span class="op" id="3704025">)</span><span class="op" id="3704026">.</span><span class="op" id="3704027">(</span><span class="keyword" id="3704028">type</span><span class="op" id="3704032">)</span>&nbsp;<span class="op" id="3704034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704039">case</span>&nbsp;<span class="ident" id="3704044">nil</span><span class="op" id="3704047">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704053">d</span><span class="op" id="3704054">.</span><span class="ident" id="3704055">literalStore</span><span class="op" id="3704067">(</span><span class="ident" id="3704068">nullLiteral</span><span class="op" id="3704079">,</span>&nbsp;<span class="ident" id="3704081">subv</span><span class="op" id="3704085">,</span>&nbsp;<span class="builtintype" id="3704087">false</span><span class="op" id="3704092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704097">case</span>&nbsp;<span class="builtintype" id="3704102">string</span><span class="op" id="3704108">:</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704114">d</span><span class="op" id="3704115">.</span><span class="ident" id="3704116">literalStore</span><span class="op" id="3704128">(</span><span class="op" id="3704129">[</span><span class="op" id="3704130">]</span><span class="builtintype" id="3704131">byte</span><span class="op" id="3704135">(</span><span class="ident" id="3704136">qv</span><span class="op" id="3704138">)</span><span class="op" id="3704139">,</span>&nbsp;<span class="ident" id="3704141">subv</span><span class="op" id="3704145">,</span>&nbsp;<span class="builtintype" id="3704147">true</span><span class="op" id="3704151">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704156">default</span><span class="op" id="3704163">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704169">d</span><span class="op" id="3704170">.</span><span class="ident" id="3704171">saveError</span><span class="op" id="3704180">(</span><span class="ident" id="3704181">fmt</span><span class="op" id="3704184">.</span><span class="ident" id="3704185">Errorf</span><span class="op" id="3704191">(</span><span class="string" id="3704192">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;unquoted&nbsp;value&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3704277">,</span>&nbsp;<span class="ident" id="3704279">item</span><span class="op" id="3704283">,</span>&nbsp;<span class="ident" id="3704285">v</span><span class="op" id="3704286">.</span><span class="ident" id="3704287">Type</span><span class="op" id="3704291">(</span><span class="op" id="3704292">)</span><span class="op" id="3704293">)</span><span class="op" id="3704294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704299">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704303">}</span>&nbsp;<span class="keyword" id="3704305">else</span>&nbsp;<span class="op" id="3704310">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704315">d</span><span class="op" id="3704316">.</span><span class="ident" id="3704317">value</span><span class="op" id="3704322">(</span><span class="ident" id="3704323">subv</span><span class="op" id="3704327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3704336">//&nbsp;Write&nbsp;value&nbsp;back&nbsp;to&nbsp;map;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3704366">//&nbsp;if&nbsp;using&nbsp;struct,&nbsp;subv&nbsp;points&nbsp;into&nbsp;struct&nbsp;already.</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704421">if</span>&nbsp;<span class="ident" id="3704424">v</span><span class="op" id="3704425">.</span><span class="ident" id="3704426">Kind</span><span class="op" id="3704430">(</span><span class="op" id="3704431">)</span>&nbsp;<span class="op" id="3704433">==</span>&nbsp;<span class="ident" id="3704436">reflect</span><span class="op" id="3704443">.</span><span class="ident" id="3704444">Map</span>&nbsp;<span class="op" id="3704448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704453">kv</span>&nbsp;<span class="op" id="3704456">:=</span>&nbsp;<span class="ident" id="3704459">reflect</span><span class="op" id="3704466">.</span><span class="ident" id="3704467">ValueOf</span><span class="op" id="3704474">(</span><span class="ident" id="3704475">key</span><span class="op" id="3704478">)</span><span class="op" id="3704479">.</span><span class="ident" id="3704480">Convert</span><span class="op" id="3704487">(</span><span class="ident" id="3704488">v</span><span class="op" id="3704489">.</span><span class="ident" id="3704490">Type</span><span class="op" id="3704494">(</span><span class="op" id="3704495">)</span><span class="op" id="3704496">.</span><span class="ident" id="3704497">Key</span><span class="op" id="3704500">(</span><span class="op" id="3704501">)</span><span class="op" id="3704502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704507">v</span><span class="op" id="3704508">.</span><span class="ident" id="3704509">SetMapIndex</span><span class="op" id="3704520">(</span><span class="ident" id="3704521">kv</span><span class="op" id="3704523">,</span>&nbsp;<span class="ident" id="3704525">subv</span><span class="op" id="3704529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3704538">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704570">op</span>&nbsp;<span class="op" id="3704573">=</span>&nbsp;<span class="ident" id="3704575">d</span><span class="op" id="3704576">.</span><span class="ident" id="3704577">scanWhile</span><span class="op" id="3704586">(</span><span class="ident" id="3704587">scanSkipSpace</span><span class="op" id="3704600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704604">if</span>&nbsp;<span class="ident" id="3704607">op</span>&nbsp;<span class="op" id="3704610">==</span>&nbsp;<span class="ident" id="3704613">scanEndObject</span>&nbsp;<span class="op" id="3704627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704632">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704640">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3704644">if</span>&nbsp;<span class="ident" id="3704647">op</span>&nbsp;<span class="op" id="3704650">!=</span>&nbsp;<span class="ident" id="3704653">scanObjectValue</span>&nbsp;<span class="op" id="3704669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704674">d</span><span class="op" id="3704675">.</span><span class="builtintype" id="3704676">error</span><span class="op" id="3704681">(</span><span class="ident" id="3704682">errPhase</span><span class="op" id="3704690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3704697">}</span><br>
<span class="lineno"></span><span class="op" id="3704699">}</span><br>
<span class="lineno">625</span><br>
<span class="lineno"></span><span class="comment" id="3704702">//&nbsp;literal&nbsp;consumes&nbsp;a&nbsp;literal&nbsp;from&nbsp;d.data[d.off-1:],&nbsp;decoding&nbsp;into&nbsp;the&nbsp;value&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3704782">//&nbsp;The&nbsp;first&nbsp;byte&nbsp;of&nbsp;the&nbsp;literal&nbsp;has&nbsp;been&nbsp;read&nbsp;already</span><br>
<span class="lineno"></span><span class="comment" id="3704837">//&nbsp;(that&#39;s&nbsp;how&nbsp;the&nbsp;caller&nbsp;knows&nbsp;it&#39;s&nbsp;a&nbsp;literal).</span><br>
<span class="lineno"></span><span class="keyword" id="3704886">func</span>&nbsp;<span class="op" id="3704891">(</span><span class="ident" id="3704892">d</span>&nbsp;<span class="op" id="3704894">*</span><span class="ident" id="3704895">decodeState</span><span class="op" id="3704906">)</span>&nbsp;<span class="ident" id="3704908">literal</span><span class="op" id="3704915">(</span><span class="ident" id="3704916">v</span>&nbsp;<span class="ident" id="3704918">reflect</span><span class="op" id="3704925">.</span><span class="ident" id="3704926">Value</span><span class="op" id="3704931">)</span>&nbsp;<span class="op" id="3704933">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3704936">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3704994">start</span>&nbsp;<span class="op" id="3705000">:=</span>&nbsp;<span class="ident" id="3705003">d</span><span class="op" id="3705004">.</span><span class="ident" id="3705005">off</span>&nbsp;<span class="op" id="3705009">-</span>&nbsp;<span class="num" id="3705011">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705014">op</span>&nbsp;<span class="op" id="3705017">:=</span>&nbsp;<span class="ident" id="3705020">d</span><span class="op" id="3705021">.</span><span class="ident" id="3705022">scanWhile</span><span class="op" id="3705031">(</span><span class="ident" id="3705032">scanContinue</span><span class="op" id="3705044">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3705048">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705089">d</span><span class="op" id="3705090">.</span><span class="ident" id="3705091">off</span><span class="op" id="3705094">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705098">d</span><span class="op" id="3705099">.</span><span class="ident" id="3705100">scan</span><span class="op" id="3705104">.</span><span class="ident" id="3705105">undo</span><span class="op" id="3705109">(</span><span class="ident" id="3705110">op</span><span class="op" id="3705112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705116">d</span><span class="op" id="3705117">.</span><span class="ident" id="3705118">literalStore</span><span class="op" id="3705130">(</span><span class="ident" id="3705131">d</span><span class="op" id="3705132">.</span><span class="ident" id="3705133">data</span><span class="op" id="3705137">[</span><span class="ident" id="3705138">start</span><span class="op" id="3705143">:</span><span class="ident" id="3705144">d</span><span class="op" id="3705145">.</span><span class="ident" id="3705146">off</span><span class="op" id="3705149">]</span><span class="op" id="3705150">,</span>&nbsp;<span class="ident" id="3705152">v</span><span class="op" id="3705153">,</span>&nbsp;<span class="builtintype" id="3705155">false</span><span class="op" id="3705160">)</span><br>
<span class="lineno"></span><span class="op" id="3705162">}</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span><span class="comment" id="3705165">//&nbsp;convertNumber&nbsp;converts&nbsp;the&nbsp;number&nbsp;literal&nbsp;s&nbsp;to&nbsp;a&nbsp;float64&nbsp;or&nbsp;a&nbsp;Number</span><br>
<span class="lineno"></span><span class="comment" id="3705237">//&nbsp;depending&nbsp;on&nbsp;the&nbsp;setting&nbsp;of&nbsp;d.useNumber.</span><br>
<span class="lineno"></span><span class="keyword" id="3705281">func</span>&nbsp;<span class="op" id="3705286">(</span><span class="ident" id="3705287">d</span>&nbsp;<span class="op" id="3705289">*</span><span class="ident" id="3705290">decodeState</span><span class="op" id="3705301">)</span>&nbsp;<span class="ident" id="3705303">convertNumber</span><span class="op" id="3705316">(</span><span class="ident" id="3705317">s</span>&nbsp;<span class="builtintype" id="3705319">string</span><span class="op" id="3705325">)</span>&nbsp;<span class="op" id="3705327">(</span><span class="keyword" id="3705328">interface</span><span class="op" id="3705337">{</span><span class="op" id="3705338">}</span><span class="op" id="3705339">,</span>&nbsp;<span class="builtintype" id="3705341">error</span><span class="op" id="3705346">)</span>&nbsp;<span class="op" id="3705348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705351">if</span>&nbsp;<span class="ident" id="3705354">d</span><span class="op" id="3705355">.</span><span class="ident" id="3705356">useNumber</span>&nbsp;<span class="op" id="3705366">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705370">return</span>&nbsp;<span class="ident" id="3705377">Number</span><span class="op" id="3705383">(</span><span class="ident" id="3705384">s</span><span class="op" id="3705385">)</span><span class="op" id="3705386">,</span>&nbsp;<span class="ident" id="3705388">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705396">f</span><span class="op" id="3705397">,</span>&nbsp;<span class="ident" id="3705399">err</span>&nbsp;<span class="op" id="3705403">:=</span>&nbsp;<span class="ident" id="3705406">strconv</span><span class="op" id="3705413">.</span><span class="ident" id="3705414">ParseFloat</span><span class="op" id="3705424">(</span><span class="ident" id="3705425">s</span><span class="op" id="3705426">,</span>&nbsp;<span class="num" id="3705428">64</span><span class="op" id="3705430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705433">if</span>&nbsp;<span class="ident" id="3705436">err</span>&nbsp;<span class="op" id="3705440">!=</span>&nbsp;<span class="ident" id="3705443">nil</span>&nbsp;<span class="op" id="3705447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705451">return</span>&nbsp;<span class="ident" id="3705458">nil</span><span class="op" id="3705461">,</span>&nbsp;<span class="op" id="3705463">&amp;</span><span class="ident" id="3705464">UnmarshalTypeError</span><span class="op" id="3705482">{</span><span class="string" id="3705483">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3705493">+</span>&nbsp;<span class="ident" id="3705495">s</span><span class="op" id="3705496">,</span>&nbsp;<span class="ident" id="3705498">reflect</span><span class="op" id="3705505">.</span><span class="ident" id="3705506">TypeOf</span><span class="op" id="3705512">(</span><span class="num" id="3705513">0.0</span><span class="op" id="3705516">)</span><span class="op" id="3705517">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3705520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705523">return</span>&nbsp;<span class="ident" id="3705530">f</span><span class="op" id="3705531">,</span>&nbsp;<span class="ident" id="3705533">nil</span><br>
<span class="lineno"></span><span class="op" id="3705537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3705540">var</span>&nbsp;<span class="ident" id="3705544">numberType</span>&nbsp;<span class="op" id="3705555">=</span>&nbsp;<span class="ident" id="3705557">reflect</span><span class="op" id="3705564">.</span><span class="ident" id="3705565">TypeOf</span><span class="op" id="3705571">(</span><span class="ident" id="3705572">Number</span><span class="op" id="3705578">(</span><span class="string" id="3705579">&#34;&#34;</span><span class="op" id="3705581">)</span><span class="op" id="3705582">)</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span><span class="comment" id="3705585">//&nbsp;literalStore&nbsp;decodes&nbsp;a&nbsp;literal&nbsp;stored&nbsp;in&nbsp;item&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="3705642">//</span><br>
<span class="lineno"></span><span class="comment" id="3705645">//&nbsp;fromQuoted&nbsp;indicates&nbsp;whether&nbsp;this&nbsp;literal&nbsp;came&nbsp;from&nbsp;unwrapping&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3705713">//&nbsp;string&nbsp;from&nbsp;the&nbsp;&#34;,string&#34;&nbsp;struct&nbsp;tag&nbsp;option.&nbsp;this&nbsp;is&nbsp;used&nbsp;only&nbsp;to</span><br>
<span class="lineno">660</span><span class="comment" id="3705782">//&nbsp;produce&nbsp;more&nbsp;helpful&nbsp;error&nbsp;messages.</span><br>
<span class="lineno"></span><span class="keyword" id="3705822">func</span>&nbsp;<span class="op" id="3705827">(</span><span class="ident" id="3705828">d</span>&nbsp;<span class="op" id="3705830">*</span><span class="ident" id="3705831">decodeState</span><span class="op" id="3705842">)</span>&nbsp;<span class="ident" id="3705844">literalStore</span><span class="op" id="3705856">(</span><span class="ident" id="3705857">item</span>&nbsp;<span class="op" id="3705862">[</span><span class="op" id="3705863">]</span><span class="builtintype" id="3705864">byte</span><span class="op" id="3705868">,</span>&nbsp;<span class="ident" id="3705870">v</span>&nbsp;<span class="ident" id="3705872">reflect</span><span class="op" id="3705879">.</span><span class="ident" id="3705880">Value</span><span class="op" id="3705885">,</span>&nbsp;<span class="ident" id="3705887">fromQuoted</span>&nbsp;<span class="builtintype" id="3705898">bool</span><span class="op" id="3705902">)</span>&nbsp;<span class="op" id="3705904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3705907">//&nbsp;Check&nbsp;for&nbsp;unmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3705934">if</span>&nbsp;<span class="builtinfunc" id="3705937">len</span><span class="op" id="3705940">(</span><span class="ident" id="3705941">item</span><span class="op" id="3705945">)</span>&nbsp;<span class="op" id="3705947">==</span>&nbsp;<span class="num" id="3705950">0</span>&nbsp;<span class="op" id="3705952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3705956">//Empty&nbsp;string&nbsp;given</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3705979">d</span><span class="op" id="3705980">.</span><span class="ident" id="3705981">saveError</span><span class="op" id="3705990">(</span><span class="ident" id="3705991">fmt</span><span class="op" id="3705994">.</span><span class="ident" id="3705995">Errorf</span><span class="op" id="3706001">(</span><span class="string" id="3706002">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3706075">,</span>&nbsp;<span class="ident" id="3706077">item</span><span class="op" id="3706081">,</span>&nbsp;<span class="ident" id="3706083">v</span><span class="op" id="3706084">.</span><span class="ident" id="3706085">Type</span><span class="op" id="3706089">(</span><span class="op" id="3706090">)</span><span class="op" id="3706091">)</span><span class="op" id="3706092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706096">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706107">wantptr</span>&nbsp;<span class="op" id="3706115">:=</span>&nbsp;<span class="ident" id="3706118">item</span><span class="op" id="3706122">[</span><span class="num" id="3706123">0</span><span class="op" id="3706124">]</span>&nbsp;<span class="op" id="3706126">==</span>&nbsp;<span class="string" id="3706129">&#39;n&#39;</span>&nbsp;<span class="comment" id="3706133">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706142">u</span><span class="op" id="3706143">,</span>&nbsp;<span class="ident" id="3706145">ut</span><span class="op" id="3706147">,</span>&nbsp;<span class="ident" id="3706149">pv</span>&nbsp;<span class="op" id="3706152">:=</span>&nbsp;<span class="ident" id="3706155">d</span><span class="op" id="3706156">.</span><span class="ident" id="3706157">indirect</span><span class="op" id="3706165">(</span><span class="ident" id="3706166">v</span><span class="op" id="3706167">,</span>&nbsp;<span class="ident" id="3706169">wantptr</span><span class="op" id="3706176">)</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706179">if</span>&nbsp;<span class="ident" id="3706182">u</span>&nbsp;<span class="op" id="3706184">!=</span>&nbsp;<span class="ident" id="3706187">nil</span>&nbsp;<span class="op" id="3706191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706195">err</span>&nbsp;<span class="op" id="3706199">:=</span>&nbsp;<span class="ident" id="3706202">u</span><span class="op" id="3706203">.</span><span class="ident" id="3706204">UnmarshalJSON</span><span class="op" id="3706217">(</span><span class="ident" id="3706218">item</span><span class="op" id="3706222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706226">if</span>&nbsp;<span class="ident" id="3706229">err</span>&nbsp;<span class="op" id="3706233">!=</span>&nbsp;<span class="ident" id="3706236">nil</span>&nbsp;<span class="op" id="3706240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706245">d</span><span class="op" id="3706246">.</span><span class="builtintype" id="3706247">error</span><span class="op" id="3706252">(</span><span class="ident" id="3706253">err</span><span class="op" id="3706256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706260">}</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706264">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706275">if</span>&nbsp;<span class="ident" id="3706278">ut</span>&nbsp;<span class="op" id="3706281">!=</span>&nbsp;<span class="ident" id="3706284">nil</span>&nbsp;<span class="op" id="3706288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706292">if</span>&nbsp;<span class="ident" id="3706295">item</span><span class="op" id="3706299">[</span><span class="num" id="3706300">0</span><span class="op" id="3706301">]</span>&nbsp;<span class="op" id="3706303">!=</span>&nbsp;<span class="string" id="3706306">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3706310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706315">if</span>&nbsp;<span class="ident" id="3706318">fromQuoted</span>&nbsp;<span class="op" id="3706329">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706335">d</span><span class="op" id="3706336">.</span><span class="ident" id="3706337">saveError</span><span class="op" id="3706346">(</span><span class="ident" id="3706347">fmt</span><span class="op" id="3706350">.</span><span class="ident" id="3706351">Errorf</span><span class="op" id="3706357">(</span><span class="string" id="3706358">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3706431">,</span>&nbsp;<span class="ident" id="3706433">item</span><span class="op" id="3706437">,</span>&nbsp;<span class="ident" id="3706439">v</span><span class="op" id="3706440">.</span><span class="ident" id="3706441">Type</span><span class="op" id="3706445">(</span><span class="op" id="3706446">)</span><span class="op" id="3706447">)</span><span class="op" id="3706448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706453">}</span>&nbsp;<span class="keyword" id="3706455">else</span>&nbsp;<span class="op" id="3706460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706466">d</span><span class="op" id="3706467">.</span><span class="ident" id="3706468">saveError</span><span class="op" id="3706477">(</span><span class="op" id="3706478">&amp;</span><span class="ident" id="3706479">UnmarshalTypeError</span><span class="op" id="3706497">{</span><span class="string" id="3706498">&#34;string&#34;</span><span class="op" id="3706506">,</span>&nbsp;<span class="ident" id="3706508">v</span><span class="op" id="3706509">.</span><span class="ident" id="3706510">Type</span><span class="op" id="3706514">(</span><span class="op" id="3706515">)</span><span class="op" id="3706516">}</span><span class="op" id="3706517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706526">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706530">s</span><span class="op" id="3706531">,</span>&nbsp;<span class="ident" id="3706533">ok</span>&nbsp;<span class="op" id="3706536">:=</span>&nbsp;<span class="ident" id="3706539">unquoteBytes</span><span class="op" id="3706551">(</span><span class="ident" id="3706552">item</span><span class="op" id="3706556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706560">if</span>&nbsp;<span class="op" id="3706563">!</span><span class="ident" id="3706564">ok</span>&nbsp;<span class="op" id="3706567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706572">if</span>&nbsp;<span class="ident" id="3706575">fromQuoted</span>&nbsp;<span class="op" id="3706586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706592">d</span><span class="op" id="3706593">.</span><span class="builtintype" id="3706594">error</span><span class="op" id="3706599">(</span><span class="ident" id="3706600">fmt</span><span class="op" id="3706603">.</span><span class="ident" id="3706604">Errorf</span><span class="op" id="3706610">(</span><span class="string" id="3706611">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3706684">,</span>&nbsp;<span class="ident" id="3706686">item</span><span class="op" id="3706690">,</span>&nbsp;<span class="ident" id="3706692">v</span><span class="op" id="3706693">.</span><span class="ident" id="3706694">Type</span><span class="op" id="3706698">(</span><span class="op" id="3706699">)</span><span class="op" id="3706700">)</span><span class="op" id="3706701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706706">}</span>&nbsp;<span class="keyword" id="3706708">else</span>&nbsp;<span class="op" id="3706713">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706719">d</span><span class="op" id="3706720">.</span><span class="builtintype" id="3706721">error</span><span class="op" id="3706726">(</span><span class="ident" id="3706727">errPhase</span><span class="op" id="3706735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706748">err</span>&nbsp;<span class="op" id="3706752">:=</span>&nbsp;<span class="ident" id="3706755">ut</span><span class="op" id="3706757">.</span><span class="ident" id="3706758">UnmarshalText</span><span class="op" id="3706771">(</span><span class="ident" id="3706772">s</span><span class="op" id="3706773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706777">if</span>&nbsp;<span class="ident" id="3706780">err</span>&nbsp;<span class="op" id="3706784">!=</span>&nbsp;<span class="ident" id="3706787">nil</span>&nbsp;<span class="op" id="3706791">{</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706796">d</span><span class="op" id="3706797">.</span><span class="builtintype" id="3706798">error</span><span class="op" id="3706803">(</span><span class="ident" id="3706804">err</span><span class="op" id="3706807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706815">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3706823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706827">v</span>&nbsp;<span class="op" id="3706829">=</span>&nbsp;<span class="ident" id="3706831">pv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706836">switch</span>&nbsp;<span class="ident" id="3706843">c</span>&nbsp;<span class="op" id="3706845">:=</span>&nbsp;<span class="ident" id="3706848">item</span><span class="op" id="3706852">[</span><span class="num" id="3706853">0</span><span class="op" id="3706854">]</span><span class="op" id="3706855">;</span>&nbsp;<span class="ident" id="3706857">c</span>&nbsp;<span class="op" id="3706859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706862">case</span>&nbsp;<span class="string" id="3706867">&#39;n&#39;</span><span class="op" id="3706870">:</span>&nbsp;<span class="comment" id="3706872">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706882">switch</span>&nbsp;<span class="ident" id="3706889">v</span><span class="op" id="3706890">.</span><span class="ident" id="3706891">Kind</span><span class="op" id="3706895">(</span><span class="op" id="3706896">)</span>&nbsp;<span class="op" id="3706898">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3706902">case</span>&nbsp;<span class="ident" id="3706907">reflect</span><span class="op" id="3706914">.</span><span class="ident" id="3706915">Interface</span><span class="op" id="3706924">,</span>&nbsp;<span class="ident" id="3706926">reflect</span><span class="op" id="3706933">.</span><span class="ident" id="3706934">Ptr</span><span class="op" id="3706937">,</span>&nbsp;<span class="ident" id="3706939">reflect</span><span class="op" id="3706946">.</span><span class="ident" id="3706947">Map</span><span class="op" id="3706950">,</span>&nbsp;<span class="ident" id="3706952">reflect</span><span class="op" id="3706959">.</span><span class="ident" id="3706960">Slice</span><span class="op" id="3706965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3706970">v</span><span class="op" id="3706971">.</span><span class="ident" id="3706972">Set</span><span class="op" id="3706975">(</span><span class="ident" id="3706976">reflect</span><span class="op" id="3706983">.</span><span class="ident" id="3706984">Zero</span><span class="op" id="3706988">(</span><span class="ident" id="3706989">v</span><span class="op" id="3706990">.</span><span class="ident" id="3706991">Type</span><span class="op" id="3706995">(</span><span class="op" id="3706996">)</span><span class="op" id="3706997">)</span><span class="op" id="3706998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3707003">//&nbsp;otherwise,&nbsp;ignore&nbsp;null&nbsp;for&nbsp;primitives/string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707056">case</span>&nbsp;<span class="string" id="3707061">&#39;t&#39;</span><span class="op" id="3707064">,</span>&nbsp;<span class="string" id="3707066">&#39;f&#39;</span><span class="op" id="3707069">:</span>&nbsp;<span class="comment" id="3707071">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707088">value</span>&nbsp;<span class="op" id="3707094">:=</span>&nbsp;<span class="ident" id="3707097">c</span>&nbsp;<span class="op" id="3707099">==</span>&nbsp;<span class="string" id="3707102">&#39;t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707108">switch</span>&nbsp;<span class="ident" id="3707115">v</span><span class="op" id="3707116">.</span><span class="ident" id="3707117">Kind</span><span class="op" id="3707121">(</span><span class="op" id="3707122">)</span>&nbsp;<span class="op" id="3707124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707128">default</span><span class="op" id="3707135">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707140">if</span>&nbsp;<span class="ident" id="3707143">fromQuoted</span>&nbsp;<span class="op" id="3707154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707160">d</span><span class="op" id="3707161">.</span><span class="ident" id="3707162">saveError</span><span class="op" id="3707171">(</span><span class="ident" id="3707172">fmt</span><span class="op" id="3707175">.</span><span class="ident" id="3707176">Errorf</span><span class="op" id="3707182">(</span><span class="string" id="3707183">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3707256">,</span>&nbsp;<span class="ident" id="3707258">item</span><span class="op" id="3707262">,</span>&nbsp;<span class="ident" id="3707264">v</span><span class="op" id="3707265">.</span><span class="ident" id="3707266">Type</span><span class="op" id="3707270">(</span><span class="op" id="3707271">)</span><span class="op" id="3707272">)</span><span class="op" id="3707273">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707278">}</span>&nbsp;<span class="keyword" id="3707280">else</span>&nbsp;<span class="op" id="3707285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707291">d</span><span class="op" id="3707292">.</span><span class="ident" id="3707293">saveError</span><span class="op" id="3707302">(</span><span class="op" id="3707303">&amp;</span><span class="ident" id="3707304">UnmarshalTypeError</span><span class="op" id="3707322">{</span><span class="string" id="3707323">&#34;bool&#34;</span><span class="op" id="3707329">,</span>&nbsp;<span class="ident" id="3707331">v</span><span class="op" id="3707332">.</span><span class="ident" id="3707333">Type</span><span class="op" id="3707337">(</span><span class="op" id="3707338">)</span><span class="op" id="3707339">}</span><span class="op" id="3707340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707349">case</span>&nbsp;<span class="ident" id="3707354">reflect</span><span class="op" id="3707361">.</span><span class="ident" id="3707362">Bool</span><span class="op" id="3707366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707371">v</span><span class="op" id="3707372">.</span><span class="ident" id="3707373">SetBool</span><span class="op" id="3707380">(</span><span class="ident" id="3707381">value</span><span class="op" id="3707386">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707390">case</span>&nbsp;<span class="ident" id="3707395">reflect</span><span class="op" id="3707402">.</span><span class="ident" id="3707403">Interface</span><span class="op" id="3707412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707417">if</span>&nbsp;<span class="ident" id="3707420">v</span><span class="op" id="3707421">.</span><span class="ident" id="3707422">NumMethod</span><span class="op" id="3707431">(</span><span class="op" id="3707432">)</span>&nbsp;<span class="op" id="3707434">==</span>&nbsp;<span class="num" id="3707437">0</span>&nbsp;<span class="op" id="3707439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707445">v</span><span class="op" id="3707446">.</span><span class="ident" id="3707447">Set</span><span class="op" id="3707450">(</span><span class="ident" id="3707451">reflect</span><span class="op" id="3707458">.</span><span class="ident" id="3707459">ValueOf</span><span class="op" id="3707466">(</span><span class="ident" id="3707467">value</span><span class="op" id="3707472">)</span><span class="op" id="3707473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707478">}</span>&nbsp;<span class="keyword" id="3707480">else</span>&nbsp;<span class="op" id="3707485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707491">d</span><span class="op" id="3707492">.</span><span class="ident" id="3707493">saveError</span><span class="op" id="3707502">(</span><span class="op" id="3707503">&amp;</span><span class="ident" id="3707504">UnmarshalTypeError</span><span class="op" id="3707522">{</span><span class="string" id="3707523">&#34;bool&#34;</span><span class="op" id="3707529">,</span>&nbsp;<span class="ident" id="3707531">v</span><span class="op" id="3707532">.</span><span class="ident" id="3707533">Type</span><span class="op" id="3707537">(</span><span class="op" id="3707538">)</span><span class="op" id="3707539">}</span><span class="op" id="3707540">)</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707553">case</span>&nbsp;<span class="string" id="3707558">&#39;&#34;&#39;</span><span class="op" id="3707561">:</span>&nbsp;<span class="comment" id="3707563">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707575">s</span><span class="op" id="3707576">,</span>&nbsp;<span class="ident" id="3707578">ok</span>&nbsp;<span class="op" id="3707581">:=</span>&nbsp;<span class="ident" id="3707584">unquoteBytes</span><span class="op" id="3707596">(</span><span class="ident" id="3707597">item</span><span class="op" id="3707601">)</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707605">if</span>&nbsp;<span class="op" id="3707608">!</span><span class="ident" id="3707609">ok</span>&nbsp;<span class="op" id="3707612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707617">if</span>&nbsp;<span class="ident" id="3707620">fromQuoted</span>&nbsp;<span class="op" id="3707631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707637">d</span><span class="op" id="3707638">.</span><span class="builtintype" id="3707639">error</span><span class="op" id="3707644">(</span><span class="ident" id="3707645">fmt</span><span class="op" id="3707648">.</span><span class="ident" id="3707649">Errorf</span><span class="op" id="3707655">(</span><span class="string" id="3707656">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3707729">,</span>&nbsp;<span class="ident" id="3707731">item</span><span class="op" id="3707735">,</span>&nbsp;<span class="ident" id="3707737">v</span><span class="op" id="3707738">.</span><span class="ident" id="3707739">Type</span><span class="op" id="3707743">(</span><span class="op" id="3707744">)</span><span class="op" id="3707745">)</span><span class="op" id="3707746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707751">}</span>&nbsp;<span class="keyword" id="3707753">else</span>&nbsp;<span class="op" id="3707758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707764">d</span><span class="op" id="3707765">.</span><span class="builtintype" id="3707766">error</span><span class="op" id="3707771">(</span><span class="ident" id="3707772">errPhase</span><span class="op" id="3707780">)</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3707789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707793">switch</span>&nbsp;<span class="ident" id="3707800">v</span><span class="op" id="3707801">.</span><span class="ident" id="3707802">Kind</span><span class="op" id="3707806">(</span><span class="op" id="3707807">)</span>&nbsp;<span class="op" id="3707809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707813">default</span><span class="op" id="3707820">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707825">d</span><span class="op" id="3707826">.</span><span class="ident" id="3707827">saveError</span><span class="op" id="3707836">(</span><span class="op" id="3707837">&amp;</span><span class="ident" id="3707838">UnmarshalTypeError</span><span class="op" id="3707856">{</span><span class="string" id="3707857">&#34;string&#34;</span><span class="op" id="3707865">,</span>&nbsp;<span class="ident" id="3707867">v</span><span class="op" id="3707868">.</span><span class="ident" id="3707869">Type</span><span class="op" id="3707873">(</span><span class="op" id="3707874">)</span><span class="op" id="3707875">}</span><span class="op" id="3707876">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707880">case</span>&nbsp;<span class="ident" id="3707885">reflect</span><span class="op" id="3707892">.</span><span class="ident" id="3707893">Slice</span><span class="op" id="3707898">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707903">if</span>&nbsp;<span class="ident" id="3707906">v</span><span class="op" id="3707907">.</span><span class="ident" id="3707908">Type</span><span class="op" id="3707912">(</span><span class="op" id="3707913">)</span>&nbsp;<span class="op" id="3707915">!=</span>&nbsp;<span class="ident" id="3707918">byteSliceType</span>&nbsp;<span class="op" id="3707932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3707938">d</span><span class="op" id="3707939">.</span><span class="ident" id="3707940">saveError</span><span class="op" id="3707949">(</span><span class="op" id="3707950">&amp;</span><span class="ident" id="3707951">UnmarshalTypeError</span><span class="op" id="3707969">{</span><span class="string" id="3707970">&#34;string&#34;</span><span class="op" id="3707978">,</span>&nbsp;<span class="ident" id="3707980">v</span><span class="op" id="3707981">.</span><span class="ident" id="3707982">Type</span><span class="op" id="3707986">(</span><span class="op" id="3707987">)</span><span class="op" id="3707988">}</span><span class="op" id="3707989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3707995">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708004">}</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708009">b</span>&nbsp;<span class="op" id="3708011">:=</span>&nbsp;<span class="builtinfunc" id="3708014">make</span><span class="op" id="3708018">(</span><span class="op" id="3708019">[</span><span class="op" id="3708020">]</span><span class="builtintype" id="3708021">byte</span><span class="op" id="3708025">,</span>&nbsp;<span class="ident" id="3708027">base64</span><span class="op" id="3708033">.</span><span class="ident" id="3708034">StdEncoding</span><span class="op" id="3708045">.</span><span class="ident" id="3708046">DecodedLen</span><span class="op" id="3708056">(</span><span class="builtinfunc" id="3708057">len</span><span class="op" id="3708060">(</span><span class="ident" id="3708061">s</span><span class="op" id="3708062">)</span><span class="op" id="3708063">)</span><span class="op" id="3708064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708069">n</span><span class="op" id="3708070">,</span>&nbsp;<span class="ident" id="3708072">err</span>&nbsp;<span class="op" id="3708076">:=</span>&nbsp;<span class="ident" id="3708079">base64</span><span class="op" id="3708085">.</span><span class="ident" id="3708086">StdEncoding</span><span class="op" id="3708097">.</span><span class="ident" id="3708098">Decode</span><span class="op" id="3708104">(</span><span class="ident" id="3708105">b</span><span class="op" id="3708106">,</span>&nbsp;<span class="ident" id="3708108">s</span><span class="op" id="3708109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708114">if</span>&nbsp;<span class="ident" id="3708117">err</span>&nbsp;<span class="op" id="3708121">!=</span>&nbsp;<span class="ident" id="3708124">nil</span>&nbsp;<span class="op" id="3708128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708134">d</span><span class="op" id="3708135">.</span><span class="ident" id="3708136">saveError</span><span class="op" id="3708145">(</span><span class="ident" id="3708146">err</span><span class="op" id="3708149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708155">break</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708164">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708169">v</span><span class="op" id="3708170">.</span><span class="ident" id="3708171">Set</span><span class="op" id="3708174">(</span><span class="ident" id="3708175">reflect</span><span class="op" id="3708182">.</span><span class="ident" id="3708183">ValueOf</span><span class="op" id="3708190">(</span><span class="ident" id="3708191">b</span><span class="op" id="3708192">[</span><span class="num" id="3708193">0</span><span class="op" id="3708194">:</span><span class="ident" id="3708195">n</span><span class="op" id="3708196">]</span><span class="op" id="3708197">)</span><span class="op" id="3708198">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708202">case</span>&nbsp;<span class="ident" id="3708207">reflect</span><span class="op" id="3708214">.</span><span class="ident" id="3708215">String</span><span class="op" id="3708221">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708226">v</span><span class="op" id="3708227">.</span><span class="ident" id="3708228">SetString</span><span class="op" id="3708237">(</span><span class="builtintype" id="3708238">string</span><span class="op" id="3708244">(</span><span class="ident" id="3708245">s</span><span class="op" id="3708246">)</span><span class="op" id="3708247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708251">case</span>&nbsp;<span class="ident" id="3708256">reflect</span><span class="op" id="3708263">.</span><span class="ident" id="3708264">Interface</span><span class="op" id="3708273">:</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708278">if</span>&nbsp;<span class="ident" id="3708281">v</span><span class="op" id="3708282">.</span><span class="ident" id="3708283">NumMethod</span><span class="op" id="3708292">(</span><span class="op" id="3708293">)</span>&nbsp;<span class="op" id="3708295">==</span>&nbsp;<span class="num" id="3708298">0</span>&nbsp;<span class="op" id="3708300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708306">v</span><span class="op" id="3708307">.</span><span class="ident" id="3708308">Set</span><span class="op" id="3708311">(</span><span class="ident" id="3708312">reflect</span><span class="op" id="3708319">.</span><span class="ident" id="3708320">ValueOf</span><span class="op" id="3708327">(</span><span class="builtintype" id="3708328">string</span><span class="op" id="3708334">(</span><span class="ident" id="3708335">s</span><span class="op" id="3708336">)</span><span class="op" id="3708337">)</span><span class="op" id="3708338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708343">}</span>&nbsp;<span class="keyword" id="3708345">else</span>&nbsp;<span class="op" id="3708350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708356">d</span><span class="op" id="3708357">.</span><span class="ident" id="3708358">saveError</span><span class="op" id="3708367">(</span><span class="op" id="3708368">&amp;</span><span class="ident" id="3708369">UnmarshalTypeError</span><span class="op" id="3708387">{</span><span class="string" id="3708388">&#34;string&#34;</span><span class="op" id="3708396">,</span>&nbsp;<span class="ident" id="3708398">v</span><span class="op" id="3708399">.</span><span class="ident" id="3708400">Type</span><span class="op" id="3708404">(</span><span class="op" id="3708405">)</span><span class="op" id="3708406">}</span><span class="op" id="3708407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708412">}</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708420">default</span><span class="op" id="3708427">:</span>&nbsp;<span class="comment" id="3708429">//&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708441">if</span>&nbsp;<span class="ident" id="3708444">c</span>&nbsp;<span class="op" id="3708446">!=</span>&nbsp;<span class="string" id="3708449">&#39;-&#39;</span>&nbsp;<span class="op" id="3708453">&amp;&amp;</span>&nbsp;<span class="op" id="3708456">(</span><span class="ident" id="3708457">c</span>&nbsp;<span class="op" id="3708459">&lt;</span>&nbsp;<span class="string" id="3708461">&#39;0&#39;</span>&nbsp;<span class="op" id="3708465">||</span>&nbsp;<span class="ident" id="3708468">c</span>&nbsp;<span class="op" id="3708470">&gt;</span>&nbsp;<span class="string" id="3708472">&#39;9&#39;</span><span class="op" id="3708475">)</span>&nbsp;<span class="op" id="3708477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708482">if</span>&nbsp;<span class="ident" id="3708485">fromQuoted</span>&nbsp;<span class="op" id="3708496">{</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708502">d</span><span class="op" id="3708503">.</span><span class="builtintype" id="3708504">error</span><span class="op" id="3708509">(</span><span class="ident" id="3708510">fmt</span><span class="op" id="3708513">.</span><span class="ident" id="3708514">Errorf</span><span class="op" id="3708520">(</span><span class="string" id="3708521">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3708594">,</span>&nbsp;<span class="ident" id="3708596">item</span><span class="op" id="3708600">,</span>&nbsp;<span class="ident" id="3708602">v</span><span class="op" id="3708603">.</span><span class="ident" id="3708604">Type</span><span class="op" id="3708608">(</span><span class="op" id="3708609">)</span><span class="op" id="3708610">)</span><span class="op" id="3708611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708616">}</span>&nbsp;<span class="keyword" id="3708618">else</span>&nbsp;<span class="op" id="3708623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708629">d</span><span class="op" id="3708630">.</span><span class="builtintype" id="3708631">error</span><span class="op" id="3708636">(</span><span class="ident" id="3708637">errPhase</span><span class="op" id="3708645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708654">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708658">s</span>&nbsp;<span class="op" id="3708660">:=</span>&nbsp;<span class="builtintype" id="3708663">string</span><span class="op" id="3708669">(</span><span class="ident" id="3708670">item</span><span class="op" id="3708674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708678">switch</span>&nbsp;<span class="ident" id="3708685">v</span><span class="op" id="3708686">.</span><span class="ident" id="3708687">Kind</span><span class="op" id="3708691">(</span><span class="op" id="3708692">)</span>&nbsp;<span class="op" id="3708694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708698">default</span><span class="op" id="3708705">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708710">if</span>&nbsp;<span class="ident" id="3708713">v</span><span class="op" id="3708714">.</span><span class="ident" id="3708715">Kind</span><span class="op" id="3708719">(</span><span class="op" id="3708720">)</span>&nbsp;<span class="op" id="3708722">==</span>&nbsp;<span class="ident" id="3708725">reflect</span><span class="op" id="3708732">.</span><span class="ident" id="3708733">String</span>&nbsp;<span class="op" id="3708740">&amp;&amp;</span>&nbsp;<span class="ident" id="3708743">v</span><span class="op" id="3708744">.</span><span class="ident" id="3708745">Type</span><span class="op" id="3708749">(</span><span class="op" id="3708750">)</span>&nbsp;<span class="op" id="3708752">==</span>&nbsp;<span class="ident" id="3708755">numberType</span>&nbsp;<span class="op" id="3708766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708772">v</span><span class="op" id="3708773">.</span><span class="ident" id="3708774">SetString</span><span class="op" id="3708783">(</span><span class="ident" id="3708784">s</span><span class="op" id="3708785">)</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708791">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708800">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3708805">if</span>&nbsp;<span class="ident" id="3708808">fromQuoted</span>&nbsp;<span class="op" id="3708819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708825">d</span><span class="op" id="3708826">.</span><span class="builtintype" id="3708827">error</span><span class="op" id="3708832">(</span><span class="ident" id="3708833">fmt</span><span class="op" id="3708836">.</span><span class="ident" id="3708837">Errorf</span><span class="op" id="3708843">(</span><span class="string" id="3708844">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;,string&nbsp;struct&nbsp;tag,&nbsp;trying&nbsp;to&nbsp;unmarshal&nbsp;%q&nbsp;into&nbsp;%v&#34;</span><span class="op" id="3708917">,</span>&nbsp;<span class="ident" id="3708919">item</span><span class="op" id="3708923">,</span>&nbsp;<span class="ident" id="3708925">v</span><span class="op" id="3708926">.</span><span class="ident" id="3708927">Type</span><span class="op" id="3708931">(</span><span class="op" id="3708932">)</span><span class="op" id="3708933">)</span><span class="op" id="3708934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3708939">}</span>&nbsp;<span class="keyword" id="3708941">else</span>&nbsp;<span class="op" id="3708946">{</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3708952">d</span><span class="op" id="3708953">.</span><span class="builtintype" id="3708954">error</span><span class="op" id="3708959">(</span><span class="op" id="3708960">&amp;</span><span class="ident" id="3708961">UnmarshalTypeError</span><span class="op" id="3708979">{</span><span class="string" id="3708980">&#34;number&#34;</span><span class="op" id="3708988">,</span>&nbsp;<span class="ident" id="3708990">v</span><span class="op" id="3708991">.</span><span class="ident" id="3708992">Type</span><span class="op" id="3708996">(</span><span class="op" id="3708997">)</span><span class="op" id="3708998">}</span><span class="op" id="3708999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709008">case</span>&nbsp;<span class="ident" id="3709013">reflect</span><span class="op" id="3709020">.</span><span class="ident" id="3709021">Interface</span><span class="op" id="3709030">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709035">n</span><span class="op" id="3709036">,</span>&nbsp;<span class="ident" id="3709038">err</span>&nbsp;<span class="op" id="3709042">:=</span>&nbsp;<span class="ident" id="3709045">d</span><span class="op" id="3709046">.</span><span class="ident" id="3709047">convertNumber</span><span class="op" id="3709060">(</span><span class="ident" id="3709061">s</span><span class="op" id="3709062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709067">if</span>&nbsp;<span class="ident" id="3709070">err</span>&nbsp;<span class="op" id="3709074">!=</span>&nbsp;<span class="ident" id="3709077">nil</span>&nbsp;<span class="op" id="3709081">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709087">d</span><span class="op" id="3709088">.</span><span class="ident" id="3709089">saveError</span><span class="op" id="3709098">(</span><span class="ident" id="3709099">err</span><span class="op" id="3709102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709108">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709117">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709122">if</span>&nbsp;<span class="ident" id="3709125">v</span><span class="op" id="3709126">.</span><span class="ident" id="3709127">NumMethod</span><span class="op" id="3709136">(</span><span class="op" id="3709137">)</span>&nbsp;<span class="op" id="3709139">!=</span>&nbsp;<span class="num" id="3709142">0</span>&nbsp;<span class="op" id="3709144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709150">d</span><span class="op" id="3709151">.</span><span class="ident" id="3709152">saveError</span><span class="op" id="3709161">(</span><span class="op" id="3709162">&amp;</span><span class="ident" id="3709163">UnmarshalTypeError</span><span class="op" id="3709181">{</span><span class="string" id="3709182">&#34;number&#34;</span><span class="op" id="3709190">,</span>&nbsp;<span class="ident" id="3709192">v</span><span class="op" id="3709193">.</span><span class="ident" id="3709194">Type</span><span class="op" id="3709198">(</span><span class="op" id="3709199">)</span><span class="op" id="3709200">}</span><span class="op" id="3709201">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709207">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709216">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709221">v</span><span class="op" id="3709222">.</span><span class="ident" id="3709223">Set</span><span class="op" id="3709226">(</span><span class="ident" id="3709227">reflect</span><span class="op" id="3709234">.</span><span class="ident" id="3709235">ValueOf</span><span class="op" id="3709242">(</span><span class="ident" id="3709243">n</span><span class="op" id="3709244">)</span><span class="op" id="3709245">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709250">case</span>&nbsp;<span class="ident" id="3709255">reflect</span><span class="op" id="3709262">.</span><span class="ident" id="3709263">Int</span><span class="op" id="3709266">,</span>&nbsp;<span class="ident" id="3709268">reflect</span><span class="op" id="3709275">.</span><span class="ident" id="3709276">Int8</span><span class="op" id="3709280">,</span>&nbsp;<span class="ident" id="3709282">reflect</span><span class="op" id="3709289">.</span><span class="ident" id="3709290">Int16</span><span class="op" id="3709295">,</span>&nbsp;<span class="ident" id="3709297">reflect</span><span class="op" id="3709304">.</span><span class="ident" id="3709305">Int32</span><span class="op" id="3709310">,</span>&nbsp;<span class="ident" id="3709312">reflect</span><span class="op" id="3709319">.</span><span class="ident" id="3709320">Int64</span><span class="op" id="3709325">:</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709330">n</span><span class="op" id="3709331">,</span>&nbsp;<span class="ident" id="3709333">err</span>&nbsp;<span class="op" id="3709337">:=</span>&nbsp;<span class="ident" id="3709340">strconv</span><span class="op" id="3709347">.</span><span class="ident" id="3709348">ParseInt</span><span class="op" id="3709356">(</span><span class="ident" id="3709357">s</span><span class="op" id="3709358">,</span>&nbsp;<span class="num" id="3709360">10</span><span class="op" id="3709362">,</span>&nbsp;<span class="num" id="3709364">64</span><span class="op" id="3709366">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709371">if</span>&nbsp;<span class="ident" id="3709374">err</span>&nbsp;<span class="op" id="3709378">!=</span>&nbsp;<span class="ident" id="3709381">nil</span>&nbsp;<span class="op" id="3709385">||</span>&nbsp;<span class="ident" id="3709388">v</span><span class="op" id="3709389">.</span><span class="ident" id="3709390">OverflowInt</span><span class="op" id="3709401">(</span><span class="ident" id="3709402">n</span><span class="op" id="3709403">)</span>&nbsp;<span class="op" id="3709405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709411">d</span><span class="op" id="3709412">.</span><span class="ident" id="3709413">saveError</span><span class="op" id="3709422">(</span><span class="op" id="3709423">&amp;</span><span class="ident" id="3709424">UnmarshalTypeError</span><span class="op" id="3709442">{</span><span class="string" id="3709443">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3709453">+</span>&nbsp;<span class="ident" id="3709455">s</span><span class="op" id="3709456">,</span>&nbsp;<span class="ident" id="3709458">v</span><span class="op" id="3709459">.</span><span class="ident" id="3709460">Type</span><span class="op" id="3709464">(</span><span class="op" id="3709465">)</span><span class="op" id="3709466">}</span><span class="op" id="3709467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709473">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709482">}</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709487">v</span><span class="op" id="3709488">.</span><span class="ident" id="3709489">SetInt</span><span class="op" id="3709495">(</span><span class="ident" id="3709496">n</span><span class="op" id="3709497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709502">case</span>&nbsp;<span class="ident" id="3709507">reflect</span><span class="op" id="3709514">.</span><span class="ident" id="3709515">Uint</span><span class="op" id="3709519">,</span>&nbsp;<span class="ident" id="3709521">reflect</span><span class="op" id="3709528">.</span><span class="ident" id="3709529">Uint8</span><span class="op" id="3709534">,</span>&nbsp;<span class="ident" id="3709536">reflect</span><span class="op" id="3709543">.</span><span class="ident" id="3709544">Uint16</span><span class="op" id="3709550">,</span>&nbsp;<span class="ident" id="3709552">reflect</span><span class="op" id="3709559">.</span><span class="ident" id="3709560">Uint32</span><span class="op" id="3709566">,</span>&nbsp;<span class="ident" id="3709568">reflect</span><span class="op" id="3709575">.</span><span class="ident" id="3709576">Uint64</span><span class="op" id="3709582">,</span>&nbsp;<span class="ident" id="3709584">reflect</span><span class="op" id="3709591">.</span><span class="ident" id="3709592">Uintptr</span><span class="op" id="3709599">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709604">n</span><span class="op" id="3709605">,</span>&nbsp;<span class="ident" id="3709607">err</span>&nbsp;<span class="op" id="3709611">:=</span>&nbsp;<span class="ident" id="3709614">strconv</span><span class="op" id="3709621">.</span><span class="ident" id="3709622">ParseUint</span><span class="op" id="3709631">(</span><span class="ident" id="3709632">s</span><span class="op" id="3709633">,</span>&nbsp;<span class="num" id="3709635">10</span><span class="op" id="3709637">,</span>&nbsp;<span class="num" id="3709639">64</span><span class="op" id="3709641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709646">if</span>&nbsp;<span class="ident" id="3709649">err</span>&nbsp;<span class="op" id="3709653">!=</span>&nbsp;<span class="ident" id="3709656">nil</span>&nbsp;<span class="op" id="3709660">||</span>&nbsp;<span class="ident" id="3709663">v</span><span class="op" id="3709664">.</span><span class="ident" id="3709665">OverflowUint</span><span class="op" id="3709677">(</span><span class="ident" id="3709678">n</span><span class="op" id="3709679">)</span>&nbsp;<span class="op" id="3709681">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709687">d</span><span class="op" id="3709688">.</span><span class="ident" id="3709689">saveError</span><span class="op" id="3709698">(</span><span class="op" id="3709699">&amp;</span><span class="ident" id="3709700">UnmarshalTypeError</span><span class="op" id="3709718">{</span><span class="string" id="3709719">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3709729">+</span>&nbsp;<span class="ident" id="3709731">s</span><span class="op" id="3709732">,</span>&nbsp;<span class="ident" id="3709734">v</span><span class="op" id="3709735">.</span><span class="ident" id="3709736">Type</span><span class="op" id="3709740">(</span><span class="op" id="3709741">)</span><span class="op" id="3709742">}</span><span class="op" id="3709743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709749">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709763">v</span><span class="op" id="3709764">.</span><span class="ident" id="3709765">SetUint</span><span class="op" id="3709772">(</span><span class="ident" id="3709773">n</span><span class="op" id="3709774">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709779">case</span>&nbsp;<span class="ident" id="3709784">reflect</span><span class="op" id="3709791">.</span><span class="ident" id="3709792">Float32</span><span class="op" id="3709799">,</span>&nbsp;<span class="ident" id="3709801">reflect</span><span class="op" id="3709808">.</span><span class="ident" id="3709809">Float64</span><span class="op" id="3709816">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709821">n</span><span class="op" id="3709822">,</span>&nbsp;<span class="ident" id="3709824">err</span>&nbsp;<span class="op" id="3709828">:=</span>&nbsp;<span class="ident" id="3709831">strconv</span><span class="op" id="3709838">.</span><span class="ident" id="3709839">ParseFloat</span><span class="op" id="3709849">(</span><span class="ident" id="3709850">s</span><span class="op" id="3709851">,</span>&nbsp;<span class="ident" id="3709853">v</span><span class="op" id="3709854">.</span><span class="ident" id="3709855">Type</span><span class="op" id="3709859">(</span><span class="op" id="3709860">)</span><span class="op" id="3709861">.</span><span class="ident" id="3709862">Bits</span><span class="op" id="3709866">(</span><span class="op" id="3709867">)</span><span class="op" id="3709868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709873">if</span>&nbsp;<span class="ident" id="3709876">err</span>&nbsp;<span class="op" id="3709880">!=</span>&nbsp;<span class="ident" id="3709883">nil</span>&nbsp;<span class="op" id="3709887">||</span>&nbsp;<span class="ident" id="3709890">v</span><span class="op" id="3709891">.</span><span class="ident" id="3709892">OverflowFloat</span><span class="op" id="3709905">(</span><span class="ident" id="3709906">n</span><span class="op" id="3709907">)</span>&nbsp;<span class="op" id="3709909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709915">d</span><span class="op" id="3709916">.</span><span class="ident" id="3709917">saveError</span><span class="op" id="3709926">(</span><span class="op" id="3709927">&amp;</span><span class="ident" id="3709928">UnmarshalTypeError</span><span class="op" id="3709946">{</span><span class="string" id="3709947">&#34;number&nbsp;&#34;</span>&nbsp;<span class="op" id="3709957">+</span>&nbsp;<span class="ident" id="3709959">s</span><span class="op" id="3709960">,</span>&nbsp;<span class="ident" id="3709962">v</span><span class="op" id="3709963">.</span><span class="ident" id="3709964">Type</span><span class="op" id="3709968">(</span><span class="op" id="3709969">)</span><span class="op" id="3709970">}</span><span class="op" id="3709971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3709977">break</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3709986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3709991">v</span><span class="op" id="3709992">.</span><span class="ident" id="3709993">SetFloat</span><span class="op" id="3710001">(</span><span class="ident" id="3710002">n</span><span class="op" id="3710003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3710007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3710010">}</span><br>
<span class="lineno"></span><span class="op" id="3710012">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="comment" id="3710015">//&nbsp;The&nbsp;xxxInterface&nbsp;routines&nbsp;build&nbsp;up&nbsp;a&nbsp;value&nbsp;to&nbsp;be&nbsp;stored</span><br>
<span class="lineno"></span><span class="comment" id="3710074">//&nbsp;in&nbsp;an&nbsp;empty&nbsp;interface.&nbsp;&nbsp;They&nbsp;are&nbsp;not&nbsp;strictly&nbsp;necessary,</span><br>
<span class="lineno"></span><span class="comment" id="3710134">//&nbsp;but&nbsp;they&nbsp;avoid&nbsp;the&nbsp;weight&nbsp;of&nbsp;reflection&nbsp;in&nbsp;this&nbsp;common&nbsp;case.</span><br>
<span class="lineno"></span><br>
<span class="lineno">825</span><span class="comment" id="3710199">//&nbsp;valueInterface&nbsp;is&nbsp;like&nbsp;value&nbsp;but&nbsp;returns&nbsp;interface{}</span><br>
<span class="lineno"></span><span class="keyword" id="3710255">func</span>&nbsp;<span class="op" id="3710260">(</span><span class="ident" id="3710261">d</span>&nbsp;<span class="op" id="3710263">*</span><span class="ident" id="3710264">decodeState</span><span class="op" id="3710275">)</span>&nbsp;<span class="ident" id="3710277">valueInterface</span><span class="op" id="3710291">(</span><span class="op" id="3710292">)</span>&nbsp;<span class="keyword" id="3710294">interface</span><span class="op" id="3710303">{</span><span class="op" id="3710304">}</span>&nbsp;<span class="op" id="3710306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710309">switch</span>&nbsp;<span class="ident" id="3710316">d</span><span class="op" id="3710317">.</span><span class="ident" id="3710318">scanWhile</span><span class="op" id="3710327">(</span><span class="ident" id="3710328">scanSkipSpace</span><span class="op" id="3710341">)</span>&nbsp;<span class="op" id="3710343">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710346">default</span><span class="op" id="3710353">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3710357">d</span><span class="op" id="3710358">.</span><span class="builtintype" id="3710359">error</span><span class="op" id="3710364">(</span><span class="ident" id="3710365">errPhase</span><span class="op" id="3710373">)</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3710377">panic</span><span class="op" id="3710382">(</span><span class="string" id="3710383">&#34;unreachable&#34;</span><span class="op" id="3710396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710399">case</span>&nbsp;<span class="ident" id="3710404">scanBeginArray</span><span class="op" id="3710418">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710422">return</span>&nbsp;<span class="ident" id="3710429">d</span><span class="op" id="3710430">.</span><span class="ident" id="3710431">arrayInterface</span><span class="op" id="3710445">(</span><span class="op" id="3710446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710449">case</span>&nbsp;<span class="ident" id="3710454">scanBeginObject</span><span class="op" id="3710469">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710473">return</span>&nbsp;<span class="ident" id="3710480">d</span><span class="op" id="3710481">.</span><span class="ident" id="3710482">objectInterface</span><span class="op" id="3710497">(</span><span class="op" id="3710498">)</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710501">case</span>&nbsp;<span class="ident" id="3710506">scanBeginLiteral</span><span class="op" id="3710522">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710526">return</span>&nbsp;<span class="ident" id="3710533">d</span><span class="op" id="3710534">.</span><span class="ident" id="3710535">literalInterface</span><span class="op" id="3710551">(</span><span class="op" id="3710552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3710555">}</span><br>
<span class="lineno"></span><span class="op" id="3710557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">840</span><span class="comment" id="3710560">//&nbsp;arrayInterface&nbsp;is&nbsp;like&nbsp;array&nbsp;but&nbsp;returns&nbsp;[]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3710619">func</span>&nbsp;<span class="op" id="3710624">(</span><span class="ident" id="3710625">d</span>&nbsp;<span class="op" id="3710627">*</span><span class="ident" id="3710628">decodeState</span><span class="op" id="3710639">)</span>&nbsp;<span class="ident" id="3710641">arrayInterface</span><span class="op" id="3710655">(</span><span class="op" id="3710656">)</span>&nbsp;<span class="op" id="3710658">[</span><span class="op" id="3710659">]</span><span class="keyword" id="3710660">interface</span><span class="op" id="3710669">{</span><span class="op" id="3710670">}</span>&nbsp;<span class="op" id="3710672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710675">var</span>&nbsp;<span class="ident" id="3710679">v</span>&nbsp;<span class="op" id="3710681">=</span>&nbsp;<span class="builtinfunc" id="3710683">make</span><span class="op" id="3710687">(</span><span class="op" id="3710688">[</span><span class="op" id="3710689">]</span><span class="keyword" id="3710690">interface</span><span class="op" id="3710699">{</span><span class="op" id="3710700">}</span><span class="op" id="3710701">,</span>&nbsp;<span class="num" id="3710703">0</span><span class="op" id="3710704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710707">for</span>&nbsp;<span class="op" id="3710711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3710715">//&nbsp;Look&nbsp;ahead&nbsp;for&nbsp;]&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3710775">op</span>&nbsp;<span class="op" id="3710778">:=</span>&nbsp;<span class="ident" id="3710781">d</span><span class="op" id="3710782">.</span><span class="ident" id="3710783">scanWhile</span><span class="op" id="3710792">(</span><span class="ident" id="3710793">scanSkipSpace</span><span class="op" id="3710806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710810">if</span>&nbsp;<span class="ident" id="3710813">op</span>&nbsp;<span class="op" id="3710816">==</span>&nbsp;<span class="ident" id="3710819">scanEndArray</span>&nbsp;<span class="op" id="3710832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3710837">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3710845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3710850">//&nbsp;Back&nbsp;up&nbsp;so&nbsp;d.value&nbsp;can&nbsp;have&nbsp;the&nbsp;byte&nbsp;we&nbsp;just&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3710906">d</span><span class="op" id="3710907">.</span><span class="ident" id="3710908">off</span><span class="op" id="3710911">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3710916">d</span><span class="op" id="3710917">.</span><span class="ident" id="3710918">scan</span><span class="op" id="3710922">.</span><span class="ident" id="3710923">undo</span><span class="op" id="3710927">(</span><span class="ident" id="3710928">op</span><span class="op" id="3710930">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3710935">v</span>&nbsp;<span class="op" id="3710937">=</span>&nbsp;<span class="builtinfunc" id="3710939">append</span><span class="op" id="3710945">(</span><span class="ident" id="3710946">v</span><span class="op" id="3710947">,</span>&nbsp;<span class="ident" id="3710949">d</span><span class="op" id="3710950">.</span><span class="ident" id="3710951">valueInterface</span><span class="op" id="3710965">(</span><span class="op" id="3710966">)</span><span class="op" id="3710967">)</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3710972">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711004">op</span>&nbsp;<span class="op" id="3711007">=</span>&nbsp;<span class="ident" id="3711009">d</span><span class="op" id="3711010">.</span><span class="ident" id="3711011">scanWhile</span><span class="op" id="3711020">(</span><span class="ident" id="3711021">scanSkipSpace</span><span class="op" id="3711034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711038">if</span>&nbsp;<span class="ident" id="3711041">op</span>&nbsp;<span class="op" id="3711044">==</span>&nbsp;<span class="ident" id="3711047">scanEndArray</span>&nbsp;<span class="op" id="3711060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711065">break</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711077">if</span>&nbsp;<span class="ident" id="3711080">op</span>&nbsp;<span class="op" id="3711083">!=</span>&nbsp;<span class="ident" id="3711086">scanArrayValue</span>&nbsp;<span class="op" id="3711101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711106">d</span><span class="op" id="3711107">.</span><span class="builtintype" id="3711108">error</span><span class="op" id="3711113">(</span><span class="ident" id="3711114">errPhase</span><span class="op" id="3711122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711126">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711129">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711132">return</span>&nbsp;<span class="ident" id="3711139">v</span><br>
<span class="lineno"></span><span class="op" id="3711141">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3711144">//&nbsp;objectInterface&nbsp;is&nbsp;like&nbsp;object&nbsp;but&nbsp;returns&nbsp;map[string]interface{}.</span><br>
<span class="lineno"></span><span class="keyword" id="3711214">func</span>&nbsp;<span class="op" id="3711219">(</span><span class="ident" id="3711220">d</span>&nbsp;<span class="op" id="3711222">*</span><span class="ident" id="3711223">decodeState</span><span class="op" id="3711234">)</span>&nbsp;<span class="ident" id="3711236">objectInterface</span><span class="op" id="3711251">(</span><span class="op" id="3711252">)</span>&nbsp;<span class="keyword" id="3711254">map</span><span class="op" id="3711257">[</span><span class="builtintype" id="3711258">string</span><span class="op" id="3711264">]</span><span class="keyword" id="3711265">interface</span><span class="op" id="3711274">{</span><span class="op" id="3711275">}</span>&nbsp;<span class="op" id="3711277">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711280">m</span>&nbsp;<span class="op" id="3711282">:=</span>&nbsp;<span class="builtinfunc" id="3711285">make</span><span class="op" id="3711289">(</span><span class="keyword" id="3711290">map</span><span class="op" id="3711293">[</span><span class="builtintype" id="3711294">string</span><span class="op" id="3711300">]</span><span class="keyword" id="3711301">interface</span><span class="op" id="3711310">{</span><span class="op" id="3711311">}</span><span class="op" id="3711312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711315">for</span>&nbsp;<span class="op" id="3711319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711323">//&nbsp;Read&nbsp;opening&nbsp;&#34;&nbsp;of&nbsp;string&nbsp;key&nbsp;or&nbsp;closing&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711371">op</span>&nbsp;<span class="op" id="3711374">:=</span>&nbsp;<span class="ident" id="3711377">d</span><span class="op" id="3711378">.</span><span class="ident" id="3711379">scanWhile</span><span class="op" id="3711388">(</span><span class="ident" id="3711389">scanSkipSpace</span><span class="op" id="3711402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711406">if</span>&nbsp;<span class="ident" id="3711409">op</span>&nbsp;<span class="op" id="3711412">==</span>&nbsp;<span class="ident" id="3711415">scanEndObject</span>&nbsp;<span class="op" id="3711429">{</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711434">//&nbsp;closing&nbsp;}&nbsp;-&nbsp;can&nbsp;only&nbsp;happen&nbsp;on&nbsp;first&nbsp;iteration.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711488">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711500">if</span>&nbsp;<span class="ident" id="3711503">op</span>&nbsp;<span class="op" id="3711506">!=</span>&nbsp;<span class="ident" id="3711509">scanBeginLiteral</span>&nbsp;<span class="op" id="3711526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711531">d</span><span class="op" id="3711532">.</span><span class="builtintype" id="3711533">error</span><span class="op" id="3711538">(</span><span class="ident" id="3711539">errPhase</span><span class="op" id="3711547">)</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711551">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711556">//&nbsp;Read&nbsp;string&nbsp;key.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711578">start</span>&nbsp;<span class="op" id="3711584">:=</span>&nbsp;<span class="ident" id="3711587">d</span><span class="op" id="3711588">.</span><span class="ident" id="3711589">off</span>&nbsp;<span class="op" id="3711593">-</span>&nbsp;<span class="num" id="3711595">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711599">op</span>&nbsp;<span class="op" id="3711602">=</span>&nbsp;<span class="ident" id="3711604">d</span><span class="op" id="3711605">.</span><span class="ident" id="3711606">scanWhile</span><span class="op" id="3711615">(</span><span class="ident" id="3711616">scanContinue</span><span class="op" id="3711628">)</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711632">item</span>&nbsp;<span class="op" id="3711637">:=</span>&nbsp;<span class="ident" id="3711640">d</span><span class="op" id="3711641">.</span><span class="ident" id="3711642">data</span><span class="op" id="3711646">[</span><span class="ident" id="3711647">start</span>&nbsp;<span class="op" id="3711653">:</span>&nbsp;<span class="ident" id="3711655">d</span><span class="op" id="3711656">.</span><span class="ident" id="3711657">off</span><span class="op" id="3711660">-</span><span class="num" id="3711661">1</span><span class="op" id="3711662">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711666">key</span><span class="op" id="3711669">,</span>&nbsp;<span class="ident" id="3711671">ok</span>&nbsp;<span class="op" id="3711674">:=</span>&nbsp;<span class="ident" id="3711677">unquote</span><span class="op" id="3711684">(</span><span class="ident" id="3711685">item</span><span class="op" id="3711689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711693">if</span>&nbsp;<span class="op" id="3711696">!</span><span class="ident" id="3711697">ok</span>&nbsp;<span class="op" id="3711700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711705">d</span><span class="op" id="3711706">.</span><span class="builtintype" id="3711707">error</span><span class="op" id="3711712">(</span><span class="ident" id="3711713">errPhase</span><span class="op" id="3711721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711725">}</span><br>
<span class="lineno">890</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711730">//&nbsp;Read&nbsp;:&nbsp;before&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711756">if</span>&nbsp;<span class="ident" id="3711759">op</span>&nbsp;<span class="op" id="3711762">==</span>&nbsp;<span class="ident" id="3711765">scanSkipSpace</span>&nbsp;<span class="op" id="3711779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711784">op</span>&nbsp;<span class="op" id="3711787">=</span>&nbsp;<span class="ident" id="3711789">d</span><span class="op" id="3711790">.</span><span class="ident" id="3711791">scanWhile</span><span class="op" id="3711800">(</span><span class="ident" id="3711801">scanSkipSpace</span><span class="op" id="3711814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711818">}</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711822">if</span>&nbsp;<span class="ident" id="3711825">op</span>&nbsp;<span class="op" id="3711828">!=</span>&nbsp;<span class="ident" id="3711831">scanObjectKey</span>&nbsp;<span class="op" id="3711845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711850">d</span><span class="op" id="3711851">.</span><span class="builtintype" id="3711852">error</span><span class="op" id="3711857">(</span><span class="ident" id="3711858">errPhase</span><span class="op" id="3711866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3711870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711875">//&nbsp;Read&nbsp;value.</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711892">m</span><span class="op" id="3711893">[</span><span class="ident" id="3711894">key</span><span class="op" id="3711897">]</span>&nbsp;<span class="op" id="3711899">=</span>&nbsp;<span class="ident" id="3711901">d</span><span class="op" id="3711902">.</span><span class="ident" id="3711903">valueInterface</span><span class="op" id="3711917">(</span><span class="op" id="3711918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3711923">//&nbsp;Next&nbsp;token&nbsp;must&nbsp;be&nbsp;,&nbsp;or&nbsp;}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3711955">op</span>&nbsp;<span class="op" id="3711958">=</span>&nbsp;<span class="ident" id="3711960">d</span><span class="op" id="3711961">.</span><span class="ident" id="3711962">scanWhile</span><span class="op" id="3711971">(</span><span class="ident" id="3711972">scanSkipSpace</span><span class="op" id="3711985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3711989">if</span>&nbsp;<span class="ident" id="3711992">op</span>&nbsp;<span class="op" id="3711995">==</span>&nbsp;<span class="ident" id="3711998">scanEndObject</span>&nbsp;<span class="op" id="3712012">{</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712017">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712029">if</span>&nbsp;<span class="ident" id="3712032">op</span>&nbsp;<span class="op" id="3712035">!=</span>&nbsp;<span class="ident" id="3712038">scanObjectValue</span>&nbsp;<span class="op" id="3712054">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712059">d</span><span class="op" id="3712060">.</span><span class="builtintype" id="3712061">error</span><span class="op" id="3712066">(</span><span class="ident" id="3712067">errPhase</span><span class="op" id="3712075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712079">}</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712085">return</span>&nbsp;<span class="ident" id="3712092">m</span><br>
<span class="lineno"></span><span class="op" id="3712094">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3712097">//&nbsp;literalInterface&nbsp;is&nbsp;like&nbsp;literal&nbsp;but&nbsp;returns&nbsp;an&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">915</span><span class="keyword" id="3712165">func</span>&nbsp;<span class="op" id="3712170">(</span><span class="ident" id="3712171">d</span>&nbsp;<span class="op" id="3712173">*</span><span class="ident" id="3712174">decodeState</span><span class="op" id="3712185">)</span>&nbsp;<span class="ident" id="3712187">literalInterface</span><span class="op" id="3712203">(</span><span class="op" id="3712204">)</span>&nbsp;<span class="keyword" id="3712206">interface</span><span class="op" id="3712215">{</span><span class="op" id="3712216">}</span>&nbsp;<span class="op" id="3712218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3712221">//&nbsp;All&nbsp;bytes&nbsp;inside&nbsp;literal&nbsp;return&nbsp;scanContinue&nbsp;op&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712279">start</span>&nbsp;<span class="op" id="3712285">:=</span>&nbsp;<span class="ident" id="3712288">d</span><span class="op" id="3712289">.</span><span class="ident" id="3712290">off</span>&nbsp;<span class="op" id="3712294">-</span>&nbsp;<span class="num" id="3712296">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712299">op</span>&nbsp;<span class="op" id="3712302">:=</span>&nbsp;<span class="ident" id="3712305">d</span><span class="op" id="3712306">.</span><span class="ident" id="3712307">scanWhile</span><span class="op" id="3712316">(</span><span class="ident" id="3712317">scanContinue</span><span class="op" id="3712329">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3712333">//&nbsp;Scan&nbsp;read&nbsp;one&nbsp;byte&nbsp;too&nbsp;far;&nbsp;back&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712374">d</span><span class="op" id="3712375">.</span><span class="ident" id="3712376">off</span><span class="op" id="3712379">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712383">d</span><span class="op" id="3712384">.</span><span class="ident" id="3712385">scan</span><span class="op" id="3712389">.</span><span class="ident" id="3712390">undo</span><span class="op" id="3712394">(</span><span class="ident" id="3712395">op</span><span class="op" id="3712397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712400">item</span>&nbsp;<span class="op" id="3712405">:=</span>&nbsp;<span class="ident" id="3712408">d</span><span class="op" id="3712409">.</span><span class="ident" id="3712410">data</span><span class="op" id="3712414">[</span><span class="ident" id="3712415">start</span><span class="op" id="3712420">:</span><span class="ident" id="3712421">d</span><span class="op" id="3712422">.</span><span class="ident" id="3712423">off</span><span class="op" id="3712426">]</span><br>
<span class="lineno"></span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712430">switch</span>&nbsp;<span class="ident" id="3712437">c</span>&nbsp;<span class="op" id="3712439">:=</span>&nbsp;<span class="ident" id="3712442">item</span><span class="op" id="3712446">[</span><span class="num" id="3712447">0</span><span class="op" id="3712448">]</span><span class="op" id="3712449">;</span>&nbsp;<span class="ident" id="3712451">c</span>&nbsp;<span class="op" id="3712453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712456">case</span>&nbsp;<span class="string" id="3712461">&#39;n&#39;</span><span class="op" id="3712464">:</span>&nbsp;<span class="comment" id="3712466">//&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712476">return</span>&nbsp;<span class="ident" id="3712483">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712489">case</span>&nbsp;<span class="string" id="3712494">&#39;t&#39;</span><span class="op" id="3712497">,</span>&nbsp;<span class="string" id="3712499">&#39;f&#39;</span><span class="op" id="3712502">:</span>&nbsp;<span class="comment" id="3712504">//&nbsp;true,&nbsp;false</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712521">return</span>&nbsp;<span class="ident" id="3712528">c</span>&nbsp;<span class="op" id="3712530">==</span>&nbsp;<span class="string" id="3712533">&#39;t&#39;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712539">case</span>&nbsp;<span class="string" id="3712544">&#39;&#34;&#39;</span><span class="op" id="3712547">:</span>&nbsp;<span class="comment" id="3712549">//&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712561">s</span><span class="op" id="3712562">,</span>&nbsp;<span class="ident" id="3712564">ok</span>&nbsp;<span class="op" id="3712567">:=</span>&nbsp;<span class="ident" id="3712570">unquote</span><span class="op" id="3712577">(</span><span class="ident" id="3712578">item</span><span class="op" id="3712582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712586">if</span>&nbsp;<span class="op" id="3712589">!</span><span class="ident" id="3712590">ok</span>&nbsp;<span class="op" id="3712593">{</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712598">d</span><span class="op" id="3712599">.</span><span class="builtintype" id="3712600">error</span><span class="op" id="3712605">(</span><span class="ident" id="3712606">errPhase</span><span class="op" id="3712614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712622">return</span>&nbsp;<span class="ident" id="3712629">s</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712633">default</span><span class="op" id="3712640">:</span>&nbsp;<span class="comment" id="3712642">//&nbsp;number</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712654">if</span>&nbsp;<span class="ident" id="3712657">c</span>&nbsp;<span class="op" id="3712659">!=</span>&nbsp;<span class="string" id="3712662">&#39;-&#39;</span>&nbsp;<span class="op" id="3712666">&amp;&amp;</span>&nbsp;<span class="op" id="3712669">(</span><span class="ident" id="3712670">c</span>&nbsp;<span class="op" id="3712672">&lt;</span>&nbsp;<span class="string" id="3712674">&#39;0&#39;</span>&nbsp;<span class="op" id="3712678">||</span>&nbsp;<span class="ident" id="3712681">c</span>&nbsp;<span class="op" id="3712683">&gt;</span>&nbsp;<span class="string" id="3712685">&#39;9&#39;</span><span class="op" id="3712688">)</span>&nbsp;<span class="op" id="3712690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712695">d</span><span class="op" id="3712696">.</span><span class="builtintype" id="3712697">error</span><span class="op" id="3712702">(</span><span class="ident" id="3712703">errPhase</span><span class="op" id="3712711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712715">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712719">n</span><span class="op" id="3712720">,</span>&nbsp;<span class="ident" id="3712722">err</span>&nbsp;<span class="op" id="3712726">:=</span>&nbsp;<span class="ident" id="3712729">d</span><span class="op" id="3712730">.</span><span class="ident" id="3712731">convertNumber</span><span class="op" id="3712744">(</span><span class="builtintype" id="3712745">string</span><span class="op" id="3712751">(</span><span class="ident" id="3712752">item</span><span class="op" id="3712756">)</span><span class="op" id="3712757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712761">if</span>&nbsp;<span class="ident" id="3712764">err</span>&nbsp;<span class="op" id="3712768">!=</span>&nbsp;<span class="ident" id="3712771">nil</span>&nbsp;<span class="op" id="3712775">{</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3712780">d</span><span class="op" id="3712781">.</span><span class="ident" id="3712782">saveError</span><span class="op" id="3712791">(</span><span class="ident" id="3712792">err</span><span class="op" id="3712795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712803">return</span>&nbsp;<span class="ident" id="3712810">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3712813">}</span><br>
<span class="lineno"></span><span class="op" id="3712815">}</span><br>
<span class="lineno">950</span><br>
<span class="lineno"></span><span class="comment" id="3712818">//&nbsp;getu4&nbsp;decodes&nbsp;\uXXXX&nbsp;from&nbsp;the&nbsp;beginning&nbsp;of&nbsp;s,&nbsp;returning&nbsp;the&nbsp;hex&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3712892">//&nbsp;or&nbsp;it&nbsp;returns&nbsp;-1.</span><br>
<span class="lineno"></span><span class="keyword" id="3712913">func</span>&nbsp;<span class="ident" id="3712918">getu4</span><span class="op" id="3712923">(</span><span class="ident" id="3712924">s</span>&nbsp;<span class="op" id="3712926">[</span><span class="op" id="3712927">]</span><span class="builtintype" id="3712928">byte</span><span class="op" id="3712932">)</span>&nbsp;<span class="builtintype" id="3712934">rune</span>&nbsp;<span class="op" id="3712939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712942">if</span>&nbsp;<span class="builtinfunc" id="3712945">len</span><span class="op" id="3712948">(</span><span class="ident" id="3712949">s</span><span class="op" id="3712950">)</span>&nbsp;<span class="op" id="3712952">&lt;</span>&nbsp;<span class="num" id="3712954">6</span>&nbsp;<span class="op" id="3712956">||</span>&nbsp;<span class="ident" id="3712959">s</span><span class="op" id="3712960">[</span><span class="num" id="3712961">0</span><span class="op" id="3712962">]</span>&nbsp;<span class="op" id="3712964">!=</span>&nbsp;<span class="string" id="3712967">&#39;\\&#39;</span>&nbsp;<span class="op" id="3712972">||</span>&nbsp;<span class="ident" id="3712975">s</span><span class="op" id="3712976">[</span><span class="num" id="3712977">1</span><span class="op" id="3712978">]</span>&nbsp;<span class="op" id="3712980">!=</span>&nbsp;<span class="string" id="3712983">&#39;u&#39;</span>&nbsp;<span class="op" id="3712987">{</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3712991">return</span>&nbsp;<span class="op" id="3712998">-</span><span class="num" id="3712999">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713005">r</span><span class="op" id="3713006">,</span>&nbsp;<span class="ident" id="3713008">err</span>&nbsp;<span class="op" id="3713012">:=</span>&nbsp;<span class="ident" id="3713015">strconv</span><span class="op" id="3713022">.</span><span class="ident" id="3713023">ParseUint</span><span class="op" id="3713032">(</span><span class="builtintype" id="3713033">string</span><span class="op" id="3713039">(</span><span class="ident" id="3713040">s</span><span class="op" id="3713041">[</span><span class="num" id="3713042">2</span><span class="op" id="3713043">:</span><span class="num" id="3713044">6</span><span class="op" id="3713045">]</span><span class="op" id="3713046">)</span><span class="op" id="3713047">,</span>&nbsp;<span class="num" id="3713049">16</span><span class="op" id="3713051">,</span>&nbsp;<span class="num" id="3713053">64</span><span class="op" id="3713055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713058">if</span>&nbsp;<span class="ident" id="3713061">err</span>&nbsp;<span class="op" id="3713065">!=</span>&nbsp;<span class="ident" id="3713068">nil</span>&nbsp;<span class="op" id="3713072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713076">return</span>&nbsp;<span class="op" id="3713083">-</span><span class="num" id="3713084">1</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713090">return</span>&nbsp;<span class="builtintype" id="3713097">rune</span><span class="op" id="3713101">(</span><span class="ident" id="3713102">r</span><span class="op" id="3713103">)</span><br>
<span class="lineno"></span><span class="op" id="3713105">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3713108">//&nbsp;unquote&nbsp;converts&nbsp;a&nbsp;quoted&nbsp;JSON&nbsp;string&nbsp;literal&nbsp;s&nbsp;into&nbsp;an&nbsp;actual&nbsp;string&nbsp;t.</span><br>
<span class="lineno">965</span><span class="comment" id="3713184">//&nbsp;The&nbsp;rules&nbsp;are&nbsp;different&nbsp;than&nbsp;for&nbsp;Go,&nbsp;so&nbsp;cannot&nbsp;use&nbsp;strconv.Unquote.</span><br>
<span class="lineno"></span><span class="keyword" id="3713255">func</span>&nbsp;<span class="ident" id="3713260">unquote</span><span class="op" id="3713267">(</span><span class="ident" id="3713268">s</span>&nbsp;<span class="op" id="3713270">[</span><span class="op" id="3713271">]</span><span class="builtintype" id="3713272">byte</span><span class="op" id="3713276">)</span>&nbsp;<span class="op" id="3713278">(</span><span class="ident" id="3713279">t</span>&nbsp;<span class="builtintype" id="3713281">string</span><span class="op" id="3713287">,</span>&nbsp;<span class="ident" id="3713289">ok</span>&nbsp;<span class="builtintype" id="3713292">bool</span><span class="op" id="3713296">)</span>&nbsp;<span class="op" id="3713298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713301">s</span><span class="op" id="3713302">,</span>&nbsp;<span class="ident" id="3713304">ok</span>&nbsp;<span class="op" id="3713307">=</span>&nbsp;<span class="ident" id="3713309">unquoteBytes</span><span class="op" id="3713321">(</span><span class="ident" id="3713322">s</span><span class="op" id="3713323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713326">t</span>&nbsp;<span class="op" id="3713328">=</span>&nbsp;<span class="builtintype" id="3713330">string</span><span class="op" id="3713336">(</span><span class="ident" id="3713337">s</span><span class="op" id="3713338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713341">return</span><br>
<span class="lineno">970</span><span class="op" id="3713348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3713351">func</span>&nbsp;<span class="ident" id="3713356">unquoteBytes</span><span class="op" id="3713368">(</span><span class="ident" id="3713369">s</span>&nbsp;<span class="op" id="3713371">[</span><span class="op" id="3713372">]</span><span class="builtintype" id="3713373">byte</span><span class="op" id="3713377">)</span>&nbsp;<span class="op" id="3713379">(</span><span class="ident" id="3713380">t</span>&nbsp;<span class="op" id="3713382">[</span><span class="op" id="3713383">]</span><span class="builtintype" id="3713384">byte</span><span class="op" id="3713388">,</span>&nbsp;<span class="ident" id="3713390">ok</span>&nbsp;<span class="builtintype" id="3713393">bool</span><span class="op" id="3713397">)</span>&nbsp;<span class="op" id="3713399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713402">if</span>&nbsp;<span class="builtinfunc" id="3713405">len</span><span class="op" id="3713408">(</span><span class="ident" id="3713409">s</span><span class="op" id="3713410">)</span>&nbsp;<span class="op" id="3713412">&lt;</span>&nbsp;<span class="num" id="3713414">2</span>&nbsp;<span class="op" id="3713416">||</span>&nbsp;<span class="ident" id="3713419">s</span><span class="op" id="3713420">[</span><span class="num" id="3713421">0</span><span class="op" id="3713422">]</span>&nbsp;<span class="op" id="3713424">!=</span>&nbsp;<span class="string" id="3713427">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3713431">||</span>&nbsp;<span class="ident" id="3713434">s</span><span class="op" id="3713435">[</span><span class="builtinfunc" id="3713436">len</span><span class="op" id="3713439">(</span><span class="ident" id="3713440">s</span><span class="op" id="3713441">)</span><span class="op" id="3713442">-</span><span class="num" id="3713443">1</span><span class="op" id="3713444">]</span>&nbsp;<span class="op" id="3713446">!=</span>&nbsp;<span class="string" id="3713449">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3713453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713457">return</span><br>
<span class="lineno">975</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713468">s</span>&nbsp;<span class="op" id="3713470">=</span>&nbsp;<span class="ident" id="3713472">s</span><span class="op" id="3713473">[</span><span class="num" id="3713474">1</span>&nbsp;<span class="op" id="3713476">:</span>&nbsp;<span class="builtinfunc" id="3713478">len</span><span class="op" id="3713481">(</span><span class="ident" id="3713482">s</span><span class="op" id="3713483">)</span><span class="op" id="3713484">-</span><span class="num" id="3713485">1</span><span class="op" id="3713486">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3713490">//&nbsp;Check&nbsp;for&nbsp;unusual&nbsp;characters.&nbsp;If&nbsp;there&nbsp;are&nbsp;none,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3713543">//&nbsp;then&nbsp;no&nbsp;unquoting&nbsp;is&nbsp;needed,&nbsp;so&nbsp;return&nbsp;a&nbsp;slice&nbsp;of&nbsp;the</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3713601">//&nbsp;original&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713621">r</span>&nbsp;<span class="op" id="3713623">:=</span>&nbsp;<span class="num" id="3713626">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713629">for</span>&nbsp;<span class="ident" id="3713633">r</span>&nbsp;<span class="op" id="3713635">&lt;</span>&nbsp;<span class="builtinfunc" id="3713637">len</span><span class="op" id="3713640">(</span><span class="ident" id="3713641">s</span><span class="op" id="3713642">)</span>&nbsp;<span class="op" id="3713644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713648">c</span>&nbsp;<span class="op" id="3713650">:=</span>&nbsp;<span class="ident" id="3713653">s</span><span class="op" id="3713654">[</span><span class="ident" id="3713655">r</span><span class="op" id="3713656">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713660">if</span>&nbsp;<span class="ident" id="3713663">c</span>&nbsp;<span class="op" id="3713665">==</span>&nbsp;<span class="string" id="3713668">&#39;\\&#39;</span>&nbsp;<span class="op" id="3713673">||</span>&nbsp;<span class="ident" id="3713676">c</span>&nbsp;<span class="op" id="3713678">==</span>&nbsp;<span class="string" id="3713681">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3713685">||</span>&nbsp;<span class="ident" id="3713688">c</span>&nbsp;<span class="op" id="3713690">&lt;</span>&nbsp;<span class="string" id="3713692">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3713696">{</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713701">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713713">if</span>&nbsp;<span class="ident" id="3713716">c</span>&nbsp;<span class="op" id="3713718">&lt;</span>&nbsp;<span class="ident" id="3713720">utf8</span><span class="op" id="3713724">.</span><span class="ident" id="3713725">RuneSelf</span>&nbsp;<span class="op" id="3713734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713739">r</span><span class="op" id="3713740">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713746">continue</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713761">rr</span><span class="op" id="3713763">,</span>&nbsp;<span class="ident" id="3713765">size</span>&nbsp;<span class="op" id="3713770">:=</span>&nbsp;<span class="ident" id="3713773">utf8</span><span class="op" id="3713777">.</span><span class="ident" id="3713778">DecodeRune</span><span class="op" id="3713788">(</span><span class="ident" id="3713789">s</span><span class="op" id="3713790">[</span><span class="ident" id="3713791">r</span><span class="op" id="3713792">:</span><span class="op" id="3713793">]</span><span class="op" id="3713794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713798">if</span>&nbsp;<span class="ident" id="3713801">rr</span>&nbsp;<span class="op" id="3713804">==</span>&nbsp;<span class="ident" id="3713807">utf8</span><span class="op" id="3713811">.</span><span class="ident" id="3713812">RuneError</span>&nbsp;<span class="op" id="3713822">&amp;&amp;</span>&nbsp;<span class="ident" id="3713825">size</span>&nbsp;<span class="op" id="3713830">==</span>&nbsp;<span class="num" id="3713833">1</span>&nbsp;<span class="op" id="3713835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713840">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713848">}</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713852">r</span>&nbsp;<span class="op" id="3713854">+=</span>&nbsp;<span class="ident" id="3713857">size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713866">if</span>&nbsp;<span class="ident" id="3713869">r</span>&nbsp;<span class="op" id="3713871">==</span>&nbsp;<span class="builtinfunc" id="3713874">len</span><span class="op" id="3713877">(</span><span class="ident" id="3713878">s</span><span class="op" id="3713879">)</span>&nbsp;<span class="op" id="3713881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713885">return</span>&nbsp;<span class="ident" id="3713892">s</span><span class="op" id="3713893">,</span>&nbsp;<span class="builtintype" id="3713895">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3713901">}</span><br>
<span class="lineno">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713905">b</span>&nbsp;<span class="op" id="3713907">:=</span>&nbsp;<span class="builtinfunc" id="3713910">make</span><span class="op" id="3713914">(</span><span class="op" id="3713915">[</span><span class="op" id="3713916">]</span><span class="builtintype" id="3713917">byte</span><span class="op" id="3713921">,</span>&nbsp;<span class="builtinfunc" id="3713923">len</span><span class="op" id="3713926">(</span><span class="ident" id="3713927">s</span><span class="op" id="3713928">)</span><span class="op" id="3713929">+</span><span class="num" id="3713930">2</span><span class="op" id="3713931">*</span><span class="ident" id="3713932">utf8</span><span class="op" id="3713936">.</span><span class="ident" id="3713937">UTFMax</span><span class="op" id="3713943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3713946">w</span>&nbsp;<span class="op" id="3713948">:=</span>&nbsp;<span class="builtinfunc" id="3713951">copy</span><span class="op" id="3713955">(</span><span class="ident" id="3713956">b</span><span class="op" id="3713957">,</span>&nbsp;<span class="ident" id="3713959">s</span><span class="op" id="3713960">[</span><span class="num" id="3713961">0</span><span class="op" id="3713962">:</span><span class="ident" id="3713963">r</span><span class="op" id="3713964">]</span><span class="op" id="3713965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3713968">for</span>&nbsp;<span class="ident" id="3713972">r</span>&nbsp;<span class="op" id="3713974">&lt;</span>&nbsp;<span class="builtinfunc" id="3713976">len</span><span class="op" id="3713979">(</span><span class="ident" id="3713980">s</span><span class="op" id="3713981">)</span>&nbsp;<span class="op" id="3713983">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3713987">//&nbsp;Out&nbsp;of&nbsp;room?&nbsp;&nbsp;Can&nbsp;only&nbsp;happen&nbsp;if&nbsp;s&nbsp;is&nbsp;full&nbsp;of</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3714038">//&nbsp;malformed&nbsp;UTF-8&nbsp;and&nbsp;we&#39;re&nbsp;replacing&nbsp;each</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3714084">//&nbsp;byte&nbsp;with&nbsp;RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714110">if</span>&nbsp;<span class="ident" id="3714113">w</span>&nbsp;<span class="op" id="3714115">&gt;=</span>&nbsp;<span class="builtinfunc" id="3714118">len</span><span class="op" id="3714121">(</span><span class="ident" id="3714122">b</span><span class="op" id="3714123">)</span><span class="op" id="3714124">-</span><span class="num" id="3714125">2</span><span class="op" id="3714126">*</span><span class="ident" id="3714127">utf8</span><span class="op" id="3714131">.</span><span class="ident" id="3714132">UTFMax</span>&nbsp;<span class="op" id="3714139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714144">nb</span>&nbsp;<span class="op" id="3714147">:=</span>&nbsp;<span class="builtinfunc" id="3714150">make</span><span class="op" id="3714154">(</span><span class="op" id="3714155">[</span><span class="op" id="3714156">]</span><span class="builtintype" id="3714157">byte</span><span class="op" id="3714161">,</span>&nbsp;<span class="op" id="3714163">(</span><span class="builtinfunc" id="3714164">len</span><span class="op" id="3714167">(</span><span class="ident" id="3714168">b</span><span class="op" id="3714169">)</span><span class="op" id="3714170">+</span><span class="ident" id="3714171">utf8</span><span class="op" id="3714175">.</span><span class="ident" id="3714176">UTFMax</span><span class="op" id="3714182">)</span><span class="op" id="3714183">*</span><span class="num" id="3714184">2</span><span class="op" id="3714185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3714190">copy</span><span class="op" id="3714194">(</span><span class="ident" id="3714195">nb</span><span class="op" id="3714197">,</span>&nbsp;<span class="ident" id="3714199">b</span><span class="op" id="3714200">[</span><span class="num" id="3714201">0</span><span class="op" id="3714202">:</span><span class="ident" id="3714203">w</span><span class="op" id="3714204">]</span><span class="op" id="3714205">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714210">b</span>&nbsp;<span class="op" id="3714212">=</span>&nbsp;<span class="ident" id="3714214">nb</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3714219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714223">switch</span>&nbsp;<span class="ident" id="3714230">c</span>&nbsp;<span class="op" id="3714232">:=</span>&nbsp;<span class="ident" id="3714235">s</span><span class="op" id="3714236">[</span><span class="ident" id="3714237">r</span><span class="op" id="3714238">]</span><span class="op" id="3714239">;</span>&nbsp;<span class="op" id="3714241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714245">case</span>&nbsp;<span class="ident" id="3714250">c</span>&nbsp;<span class="op" id="3714252">==</span>&nbsp;<span class="string" id="3714255">&#39;\\&#39;</span><span class="op" id="3714259">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714264">r</span><span class="op" id="3714265">++</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714271">if</span>&nbsp;<span class="ident" id="3714274">r</span>&nbsp;<span class="op" id="3714276">&gt;=</span>&nbsp;<span class="builtinfunc" id="3714279">len</span><span class="op" id="3714282">(</span><span class="ident" id="3714283">s</span><span class="op" id="3714284">)</span>&nbsp;<span class="op" id="3714286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714292">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3714302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714307">switch</span>&nbsp;<span class="ident" id="3714314">s</span><span class="op" id="3714315">[</span><span class="ident" id="3714316">r</span><span class="op" id="3714317">]</span>&nbsp;<span class="op" id="3714319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714324">default</span><span class="op" id="3714331">:</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714337">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714347">case</span>&nbsp;<span class="string" id="3714352">&#39;&#34;&#39;</span><span class="op" id="3714355">,</span>&nbsp;<span class="string" id="3714357">&#39;\\&#39;</span><span class="op" id="3714361">,</span>&nbsp;<span class="string" id="3714363">&#39;/&#39;</span><span class="op" id="3714366">,</span>&nbsp;<span class="string" id="3714368">&#39;\&#39;&#39;</span><span class="op" id="3714372">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714378">b</span><span class="op" id="3714379">[</span><span class="ident" id="3714380">w</span><span class="op" id="3714381">]</span>&nbsp;<span class="op" id="3714383">=</span>&nbsp;<span class="ident" id="3714385">s</span><span class="op" id="3714386">[</span><span class="ident" id="3714387">r</span><span class="op" id="3714388">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714394">r</span><span class="op" id="3714395">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714402">w</span><span class="op" id="3714403">++</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714409">case</span>&nbsp;<span class="string" id="3714414">&#39;b&#39;</span><span class="op" id="3714417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714423">b</span><span class="op" id="3714424">[</span><span class="ident" id="3714425">w</span><span class="op" id="3714426">]</span>&nbsp;<span class="op" id="3714428">=</span>&nbsp;<span class="string" id="3714430">&#39;\b&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714439">r</span><span class="op" id="3714440">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714447">w</span><span class="op" id="3714448">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714454">case</span>&nbsp;<span class="string" id="3714459">&#39;f&#39;</span><span class="op" id="3714462">:</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714468">b</span><span class="op" id="3714469">[</span><span class="ident" id="3714470">w</span><span class="op" id="3714471">]</span>&nbsp;<span class="op" id="3714473">=</span>&nbsp;<span class="string" id="3714475">&#39;\f&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714484">r</span><span class="op" id="3714485">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714492">w</span><span class="op" id="3714493">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714499">case</span>&nbsp;<span class="string" id="3714504">&#39;n&#39;</span><span class="op" id="3714507">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714513">b</span><span class="op" id="3714514">[</span><span class="ident" id="3714515">w</span><span class="op" id="3714516">]</span>&nbsp;<span class="op" id="3714518">=</span>&nbsp;<span class="string" id="3714520">&#39;\n&#39;</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714529">r</span><span class="op" id="3714530">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714537">w</span><span class="op" id="3714538">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714544">case</span>&nbsp;<span class="string" id="3714549">&#39;r&#39;</span><span class="op" id="3714552">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714558">b</span><span class="op" id="3714559">[</span><span class="ident" id="3714560">w</span><span class="op" id="3714561">]</span>&nbsp;<span class="op" id="3714563">=</span>&nbsp;<span class="string" id="3714565">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714574">r</span><span class="op" id="3714575">++</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714582">w</span><span class="op" id="3714583">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714589">case</span>&nbsp;<span class="string" id="3714594">&#39;t&#39;</span><span class="op" id="3714597">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714603">b</span><span class="op" id="3714604">[</span><span class="ident" id="3714605">w</span><span class="op" id="3714606">]</span>&nbsp;<span class="op" id="3714608">=</span>&nbsp;<span class="string" id="3714610">&#39;\t&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714619">r</span><span class="op" id="3714620">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714627">w</span><span class="op" id="3714628">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714634">case</span>&nbsp;<span class="string" id="3714639">&#39;u&#39;</span><span class="op" id="3714642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714648">r</span><span class="op" id="3714649">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714656">rr</span>&nbsp;<span class="op" id="3714659">:=</span>&nbsp;<span class="ident" id="3714662">getu4</span><span class="op" id="3714667">(</span><span class="ident" id="3714668">s</span><span class="op" id="3714669">[</span><span class="ident" id="3714670">r</span><span class="op" id="3714671">:</span><span class="op" id="3714672">]</span><span class="op" id="3714673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714679">if</span>&nbsp;<span class="ident" id="3714682">rr</span>&nbsp;<span class="op" id="3714685">&lt;</span>&nbsp;<span class="num" id="3714687">0</span>&nbsp;<span class="op" id="3714689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714696">return</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3714707">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714713">r</span>&nbsp;<span class="op" id="3714715">+=</span>&nbsp;<span class="num" id="3714718">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714724">if</span>&nbsp;<span class="ident" id="3714727">utf16</span><span class="op" id="3714732">.</span><span class="ident" id="3714733">IsSurrogate</span><span class="op" id="3714744">(</span><span class="ident" id="3714745">rr</span><span class="op" id="3714747">)</span>&nbsp;<span class="op" id="3714749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714756">rr1</span>&nbsp;<span class="op" id="3714760">:=</span>&nbsp;<span class="ident" id="3714763">getu4</span><span class="op" id="3714768">(</span><span class="ident" id="3714769">s</span><span class="op" id="3714770">[</span><span class="ident" id="3714771">r</span><span class="op" id="3714772">:</span><span class="op" id="3714773">]</span><span class="op" id="3714774">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714781">if</span>&nbsp;<span class="ident" id="3714784">dec</span>&nbsp;<span class="op" id="3714788">:=</span>&nbsp;<span class="ident" id="3714791">utf16</span><span class="op" id="3714796">.</span><span class="ident" id="3714797">DecodeRune</span><span class="op" id="3714807">(</span><span class="ident" id="3714808">rr</span><span class="op" id="3714810">,</span>&nbsp;<span class="ident" id="3714812">rr1</span><span class="op" id="3714815">)</span><span class="op" id="3714816">;</span>&nbsp;<span class="ident" id="3714818">dec</span>&nbsp;<span class="op" id="3714822">!=</span>&nbsp;<span class="ident" id="3714825">unicode</span><span class="op" id="3714832">.</span><span class="ident" id="3714833">ReplacementChar</span>&nbsp;<span class="op" id="3714849">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3714857">//&nbsp;A&nbsp;valid&nbsp;pair;&nbsp;consume.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714889">r</span>&nbsp;<span class="op" id="3714891">+=</span>&nbsp;<span class="num" id="3714894">6</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3714902">w</span>&nbsp;<span class="op" id="3714904">+=</span>&nbsp;<span class="ident" id="3714907">utf8</span><span class="op" id="3714911">.</span><span class="ident" id="3714912">EncodeRune</span><span class="op" id="3714922">(</span><span class="ident" id="3714923">b</span><span class="op" id="3714924">[</span><span class="ident" id="3714925">w</span><span class="op" id="3714926">:</span><span class="op" id="3714927">]</span><span class="op" id="3714928">,</span>&nbsp;<span class="ident" id="3714930">dec</span><span class="op" id="3714933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3714941">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3714952">}</span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3714959">//&nbsp;Invalid&nbsp;surrogate;&nbsp;fall&nbsp;back&nbsp;to&nbsp;replacement&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715017">rr</span>&nbsp;<span class="op" id="3715020">=</span>&nbsp;<span class="ident" id="3715022">unicode</span><span class="op" id="3715029">.</span><span class="ident" id="3715030">ReplacementChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715056">w</span>&nbsp;<span class="op" id="3715058">+=</span>&nbsp;<span class="ident" id="3715061">utf8</span><span class="op" id="3715065">.</span><span class="ident" id="3715066">EncodeRune</span><span class="op" id="3715076">(</span><span class="ident" id="3715077">b</span><span class="op" id="3715078">[</span><span class="ident" id="3715079">w</span><span class="op" id="3715080">:</span><span class="op" id="3715081">]</span><span class="op" id="3715082">,</span>&nbsp;<span class="ident" id="3715084">rr</span><span class="op" id="3715086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715091">}</span><br>
<span class="lineno">1065</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3715096">//&nbsp;Quote,&nbsp;control&nbsp;characters&nbsp;are&nbsp;invalid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715140">case</span>&nbsp;<span class="ident" id="3715145">c</span>&nbsp;<span class="op" id="3715147">==</span>&nbsp;<span class="string" id="3715150">&#39;&#34;&#39;</span><span class="op" id="3715153">,</span>&nbsp;<span class="ident" id="3715155">c</span>&nbsp;<span class="op" id="3715157">&lt;</span>&nbsp;<span class="string" id="3715159">&#39;&nbsp;&#39;</span><span class="op" id="3715162">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715167">return</span><br>
<span class="lineno"></span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3715177">//&nbsp;ASCII</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715188">case</span>&nbsp;<span class="ident" id="3715193">c</span>&nbsp;<span class="op" id="3715195">&lt;</span>&nbsp;<span class="ident" id="3715197">utf8</span><span class="op" id="3715201">.</span><span class="ident" id="3715202">RuneSelf</span><span class="op" id="3715210">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715215">b</span><span class="op" id="3715216">[</span><span class="ident" id="3715217">w</span><span class="op" id="3715218">]</span>&nbsp;<span class="op" id="3715220">=</span>&nbsp;<span class="ident" id="3715222">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715227">r</span><span class="op" id="3715228">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715234">w</span><span class="op" id="3715235">++</span><br>
<span class="lineno">1075</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3715241">//&nbsp;Coerce&nbsp;to&nbsp;well-formed&nbsp;UTF-8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715275">default</span><span class="op" id="3715282">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715287">rr</span><span class="op" id="3715289">,</span>&nbsp;<span class="ident" id="3715291">size</span>&nbsp;<span class="op" id="3715296">:=</span>&nbsp;<span class="ident" id="3715299">utf8</span><span class="op" id="3715303">.</span><span class="ident" id="3715304">DecodeRune</span><span class="op" id="3715314">(</span><span class="ident" id="3715315">s</span><span class="op" id="3715316">[</span><span class="ident" id="3715317">r</span><span class="op" id="3715318">:</span><span class="op" id="3715319">]</span><span class="op" id="3715320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715325">r</span>&nbsp;<span class="op" id="3715327">+=</span>&nbsp;<span class="ident" id="3715330">size</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3715338">w</span>&nbsp;<span class="op" id="3715340">+=</span>&nbsp;<span class="ident" id="3715343">utf8</span><span class="op" id="3715347">.</span><span class="ident" id="3715348">EncodeRune</span><span class="op" id="3715358">(</span><span class="ident" id="3715359">b</span><span class="op" id="3715360">[</span><span class="ident" id="3715361">w</span><span class="op" id="3715362">:</span><span class="op" id="3715363">]</span><span class="op" id="3715364">,</span>&nbsp;<span class="ident" id="3715366">rr</span><span class="op" id="3715368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3715375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3715378">return</span>&nbsp;<span class="ident" id="3715385">b</span><span class="op" id="3715386">[</span><span class="num" id="3715387">0</span><span class="op" id="3715388">:</span><span class="ident" id="3715389">w</span><span class="op" id="3715390">]</span><span class="op" id="3715391">,</span>&nbsp;<span class="builtintype" id="3715393">true</span><br>
<span class="lineno"></span><span class="op" id="3715398">}</span>
</div>
</body>
</html>
