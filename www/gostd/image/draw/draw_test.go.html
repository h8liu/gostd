<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/draw</h2>
<ul>
<li><a href="/gostd/image/draw/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/image/draw/clip_test.go.html">clip_test.go</a></li>
<li><a href="/gostd/image/draw/draw.go.html">draw.go</a></li>
<li><a href="/gostd/image/draw/draw_test.go.html" class="current">draw_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8098659">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8098714">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8098768">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8098819">package</span>&nbsp;<span class="ident" id="8098827">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8098833">import</span>&nbsp;<span class="op" id="8098840">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8098843">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8098852">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8098867">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8098880">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8098886">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8098896">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8098899">func</span>&nbsp;<span class="ident" id="8098904">eq</span><span class="op" id="8098906">(</span><span class="ident" id="8098907">c0</span><span class="op" id="8098909">,</span>&nbsp;<span class="ident" id="8098911">c1</span>&nbsp;<span class="ident" id="8098914">color</span><span class="op" id="8098919">.</span><span class="ident" id="8098920">Color</span><span class="op" id="8098925">)</span>&nbsp;<span class="builtintype" id="8098927">bool</span>&nbsp;<span class="op" id="8098932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098935">r0</span><span class="op" id="8098937">,</span>&nbsp;<span class="ident" id="8098939">g0</span><span class="op" id="8098941">,</span>&nbsp;<span class="ident" id="8098943">b0</span><span class="op" id="8098945">,</span>&nbsp;<span class="ident" id="8098947">a0</span>&nbsp;<span class="op" id="8098950">:=</span>&nbsp;<span class="ident" id="8098953">c0</span><span class="op" id="8098955">.</span><span class="ident" id="8098956">RGBA</span><span class="op" id="8098960">(</span><span class="op" id="8098961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8098964">r1</span><span class="op" id="8098966">,</span>&nbsp;<span class="ident" id="8098968">g1</span><span class="op" id="8098970">,</span>&nbsp;<span class="ident" id="8098972">b1</span><span class="op" id="8098974">,</span>&nbsp;<span class="ident" id="8098976">a1</span>&nbsp;<span class="op" id="8098979">:=</span>&nbsp;<span class="ident" id="8098982">c1</span><span class="op" id="8098984">.</span><span class="ident" id="8098985">RGBA</span><span class="op" id="8098989">(</span><span class="op" id="8098990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8098993">return</span>&nbsp;<span class="ident" id="8099000">r0</span>&nbsp;<span class="op" id="8099003">==</span>&nbsp;<span class="ident" id="8099006">r1</span>&nbsp;<span class="op" id="8099009">&amp;&amp;</span>&nbsp;<span class="ident" id="8099012">g0</span>&nbsp;<span class="op" id="8099015">==</span>&nbsp;<span class="ident" id="8099018">g1</span>&nbsp;<span class="op" id="8099021">&amp;&amp;</span>&nbsp;<span class="ident" id="8099024">b0</span>&nbsp;<span class="op" id="8099027">==</span>&nbsp;<span class="ident" id="8099030">b1</span>&nbsp;<span class="op" id="8099033">&amp;&amp;</span>&nbsp;<span class="ident" id="8099036">a0</span>&nbsp;<span class="op" id="8099039">==</span>&nbsp;<span class="ident" id="8099042">a1</span><br>
<span class="lineno"></span><span class="op" id="8099045">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="8099048">func</span>&nbsp;<span class="ident" id="8099053">fillBlue</span><span class="op" id="8099061">(</span><span class="ident" id="8099062">alpha</span>&nbsp;<span class="builtintype" id="8099068">int</span><span class="op" id="8099071">)</span>&nbsp;<span class="ident" id="8099073">image</span><span class="op" id="8099078">.</span><span class="ident" id="8099079">Image</span>&nbsp;<span class="op" id="8099085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099088">return</span>&nbsp;<span class="ident" id="8099095">image</span><span class="op" id="8099100">.</span><span class="ident" id="8099101">NewUniform</span><span class="op" id="8099111">(</span><span class="ident" id="8099112">color</span><span class="op" id="8099117">.</span><span class="ident" id="8099118">RGBA</span><span class="op" id="8099122">{</span><span class="num" id="8099123">0</span><span class="op" id="8099124">,</span>&nbsp;<span class="num" id="8099126">0</span><span class="op" id="8099127">,</span>&nbsp;<span class="builtintype" id="8099129">uint8</span><span class="op" id="8099134">(</span><span class="ident" id="8099135">alpha</span><span class="op" id="8099140">)</span><span class="op" id="8099141">,</span>&nbsp;<span class="builtintype" id="8099143">uint8</span><span class="op" id="8099148">(</span><span class="ident" id="8099149">alpha</span><span class="op" id="8099154">)</span><span class="op" id="8099155">}</span><span class="op" id="8099156">)</span><br>
<span class="lineno"></span><span class="op" id="8099158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="8099161">func</span>&nbsp;<span class="ident" id="8099166">fillAlpha</span><span class="op" id="8099175">(</span><span class="ident" id="8099176">alpha</span>&nbsp;<span class="builtintype" id="8099182">int</span><span class="op" id="8099185">)</span>&nbsp;<span class="ident" id="8099187">image</span><span class="op" id="8099192">.</span><span class="ident" id="8099193">Image</span>&nbsp;<span class="op" id="8099199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099202">return</span>&nbsp;<span class="ident" id="8099209">image</span><span class="op" id="8099214">.</span><span class="ident" id="8099215">NewUniform</span><span class="op" id="8099225">(</span><span class="ident" id="8099226">color</span><span class="op" id="8099231">.</span><span class="ident" id="8099232">Alpha</span><span class="op" id="8099237">{</span><span class="builtintype" id="8099238">uint8</span><span class="op" id="8099243">(</span><span class="ident" id="8099244">alpha</span><span class="op" id="8099249">)</span><span class="op" id="8099250">}</span><span class="op" id="8099251">)</span><br>
<span class="lineno"></span><span class="op" id="8099253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8099256">func</span>&nbsp;<span class="ident" id="8099261">vgradGreen</span><span class="op" id="8099271">(</span><span class="ident" id="8099272">alpha</span>&nbsp;<span class="builtintype" id="8099278">int</span><span class="op" id="8099281">)</span>&nbsp;<span class="ident" id="8099283">image</span><span class="op" id="8099288">.</span><span class="ident" id="8099289">Image</span>&nbsp;<span class="op" id="8099295">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099298">m</span>&nbsp;<span class="op" id="8099300">:=</span>&nbsp;<span class="ident" id="8099303">image</span><span class="op" id="8099308">.</span><span class="ident" id="8099309">NewRGBA</span><span class="op" id="8099316">(</span><span class="ident" id="8099317">image</span><span class="op" id="8099322">.</span><span class="ident" id="8099323">Rect</span><span class="op" id="8099327">(</span><span class="num" id="8099328">0</span><span class="op" id="8099329">,</span>&nbsp;<span class="num" id="8099331">0</span><span class="op" id="8099332">,</span>&nbsp;<span class="num" id="8099334">16</span><span class="op" id="8099336">,</span>&nbsp;<span class="num" id="8099338">16</span><span class="op" id="8099340">)</span><span class="op" id="8099341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099344">for</span>&nbsp;<span class="ident" id="8099348">y</span>&nbsp;<span class="op" id="8099350">:=</span>&nbsp;<span class="num" id="8099353">0</span><span class="op" id="8099354">;</span>&nbsp;<span class="ident" id="8099356">y</span>&nbsp;<span class="op" id="8099358">&lt;</span>&nbsp;<span class="num" id="8099360">16</span><span class="op" id="8099362">;</span>&nbsp;<span class="ident" id="8099364">y</span><span class="op" id="8099365">++</span>&nbsp;<span class="op" id="8099368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099372">for</span>&nbsp;<span class="ident" id="8099376">x</span>&nbsp;<span class="op" id="8099378">:=</span>&nbsp;<span class="num" id="8099381">0</span><span class="op" id="8099382">;</span>&nbsp;<span class="ident" id="8099384">x</span>&nbsp;<span class="op" id="8099386">&lt;</span>&nbsp;<span class="num" id="8099388">16</span><span class="op" id="8099390">;</span>&nbsp;<span class="ident" id="8099392">x</span><span class="op" id="8099393">++</span>&nbsp;<span class="op" id="8099396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099401">m</span><span class="op" id="8099402">.</span><span class="ident" id="8099403">Set</span><span class="op" id="8099406">(</span><span class="ident" id="8099407">x</span><span class="op" id="8099408">,</span>&nbsp;<span class="ident" id="8099410">y</span><span class="op" id="8099411">,</span>&nbsp;<span class="ident" id="8099413">color</span><span class="op" id="8099418">.</span><span class="ident" id="8099419">RGBA</span><span class="op" id="8099423">{</span><span class="num" id="8099424">0</span><span class="op" id="8099425">,</span>&nbsp;<span class="builtintype" id="8099427">uint8</span><span class="op" id="8099432">(</span><span class="ident" id="8099433">y</span>&nbsp;<span class="op" id="8099435">*</span>&nbsp;<span class="ident" id="8099437">alpha</span>&nbsp;<span class="op" id="8099443">/</span>&nbsp;<span class="num" id="8099445">15</span><span class="op" id="8099447">)</span><span class="op" id="8099448">,</span>&nbsp;<span class="num" id="8099450">0</span><span class="op" id="8099451">,</span>&nbsp;<span class="builtintype" id="8099453">uint8</span><span class="op" id="8099458">(</span><span class="ident" id="8099459">alpha</span><span class="op" id="8099464">)</span><span class="op" id="8099465">}</span><span class="op" id="8099466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099470">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099476">return</span>&nbsp;<span class="ident" id="8099483">m</span><br>
<span class="lineno"></span><span class="op" id="8099485">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8099488">func</span>&nbsp;<span class="ident" id="8099493">vgradAlpha</span><span class="op" id="8099503">(</span><span class="ident" id="8099504">alpha</span>&nbsp;<span class="builtintype" id="8099510">int</span><span class="op" id="8099513">)</span>&nbsp;<span class="ident" id="8099515">image</span><span class="op" id="8099520">.</span><span class="ident" id="8099521">Image</span>&nbsp;<span class="op" id="8099527">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099530">m</span>&nbsp;<span class="op" id="8099532">:=</span>&nbsp;<span class="ident" id="8099535">image</span><span class="op" id="8099540">.</span><span class="ident" id="8099541">NewAlpha</span><span class="op" id="8099549">(</span><span class="ident" id="8099550">image</span><span class="op" id="8099555">.</span><span class="ident" id="8099556">Rect</span><span class="op" id="8099560">(</span><span class="num" id="8099561">0</span><span class="op" id="8099562">,</span>&nbsp;<span class="num" id="8099564">0</span><span class="op" id="8099565">,</span>&nbsp;<span class="num" id="8099567">16</span><span class="op" id="8099569">,</span>&nbsp;<span class="num" id="8099571">16</span><span class="op" id="8099573">)</span><span class="op" id="8099574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099577">for</span>&nbsp;<span class="ident" id="8099581">y</span>&nbsp;<span class="op" id="8099583">:=</span>&nbsp;<span class="num" id="8099586">0</span><span class="op" id="8099587">;</span>&nbsp;<span class="ident" id="8099589">y</span>&nbsp;<span class="op" id="8099591">&lt;</span>&nbsp;<span class="num" id="8099593">16</span><span class="op" id="8099595">;</span>&nbsp;<span class="ident" id="8099597">y</span><span class="op" id="8099598">++</span>&nbsp;<span class="op" id="8099601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099605">for</span>&nbsp;<span class="ident" id="8099609">x</span>&nbsp;<span class="op" id="8099611">:=</span>&nbsp;<span class="num" id="8099614">0</span><span class="op" id="8099615">;</span>&nbsp;<span class="ident" id="8099617">x</span>&nbsp;<span class="op" id="8099619">&lt;</span>&nbsp;<span class="num" id="8099621">16</span><span class="op" id="8099623">;</span>&nbsp;<span class="ident" id="8099625">x</span><span class="op" id="8099626">++</span>&nbsp;<span class="op" id="8099629">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099634">m</span><span class="op" id="8099635">.</span><span class="ident" id="8099636">Set</span><span class="op" id="8099639">(</span><span class="ident" id="8099640">x</span><span class="op" id="8099641">,</span>&nbsp;<span class="ident" id="8099643">y</span><span class="op" id="8099644">,</span>&nbsp;<span class="ident" id="8099646">color</span><span class="op" id="8099651">.</span><span class="ident" id="8099652">Alpha</span><span class="op" id="8099657">{</span><span class="builtintype" id="8099658">uint8</span><span class="op" id="8099663">(</span><span class="ident" id="8099664">y</span>&nbsp;<span class="op" id="8099666">*</span>&nbsp;<span class="ident" id="8099668">alpha</span>&nbsp;<span class="op" id="8099674">/</span>&nbsp;<span class="num" id="8099676">15</span><span class="op" id="8099678">)</span><span class="op" id="8099679">}</span><span class="op" id="8099680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099684">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099690">return</span>&nbsp;<span class="ident" id="8099697">m</span><br>
<span class="lineno"></span><span class="op" id="8099699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8099702">func</span>&nbsp;<span class="ident" id="8099707">vgradGreenNRGBA</span><span class="op" id="8099722">(</span><span class="ident" id="8099723">alpha</span>&nbsp;<span class="builtintype" id="8099729">int</span><span class="op" id="8099732">)</span>&nbsp;<span class="ident" id="8099734">image</span><span class="op" id="8099739">.</span><span class="ident" id="8099740">Image</span>&nbsp;<span class="op" id="8099746">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099749">m</span>&nbsp;<span class="op" id="8099751">:=</span>&nbsp;<span class="ident" id="8099754">image</span><span class="op" id="8099759">.</span><span class="ident" id="8099760">NewNRGBA</span><span class="op" id="8099768">(</span><span class="ident" id="8099769">image</span><span class="op" id="8099774">.</span><span class="ident" id="8099775">Rect</span><span class="op" id="8099779">(</span><span class="num" id="8099780">0</span><span class="op" id="8099781">,</span>&nbsp;<span class="num" id="8099783">0</span><span class="op" id="8099784">,</span>&nbsp;<span class="num" id="8099786">16</span><span class="op" id="8099788">,</span>&nbsp;<span class="num" id="8099790">16</span><span class="op" id="8099792">)</span><span class="op" id="8099793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099796">for</span>&nbsp;<span class="ident" id="8099800">y</span>&nbsp;<span class="op" id="8099802">:=</span>&nbsp;<span class="num" id="8099805">0</span><span class="op" id="8099806">;</span>&nbsp;<span class="ident" id="8099808">y</span>&nbsp;<span class="op" id="8099810">&lt;</span>&nbsp;<span class="num" id="8099812">16</span><span class="op" id="8099814">;</span>&nbsp;<span class="ident" id="8099816">y</span><span class="op" id="8099817">++</span>&nbsp;<span class="op" id="8099820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099824">for</span>&nbsp;<span class="ident" id="8099828">x</span>&nbsp;<span class="op" id="8099830">:=</span>&nbsp;<span class="num" id="8099833">0</span><span class="op" id="8099834">;</span>&nbsp;<span class="ident" id="8099836">x</span>&nbsp;<span class="op" id="8099838">&lt;</span>&nbsp;<span class="num" id="8099840">16</span><span class="op" id="8099842">;</span>&nbsp;<span class="ident" id="8099844">x</span><span class="op" id="8099845">++</span>&nbsp;<span class="op" id="8099848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099853">m</span><span class="op" id="8099854">.</span><span class="ident" id="8099855">Set</span><span class="op" id="8099858">(</span><span class="ident" id="8099859">x</span><span class="op" id="8099860">,</span>&nbsp;<span class="ident" id="8099862">y</span><span class="op" id="8099863">,</span>&nbsp;<span class="ident" id="8099865">color</span><span class="op" id="8099870">.</span><span class="ident" id="8099871">RGBA</span><span class="op" id="8099875">{</span><span class="num" id="8099876">0</span><span class="op" id="8099877">,</span>&nbsp;<span class="builtintype" id="8099879">uint8</span><span class="op" id="8099884">(</span><span class="ident" id="8099885">y</span>&nbsp;<span class="op" id="8099887">*</span>&nbsp;<span class="num" id="8099889">0x11</span><span class="op" id="8099893">)</span><span class="op" id="8099894">,</span>&nbsp;<span class="num" id="8099896">0</span><span class="op" id="8099897">,</span>&nbsp;<span class="builtintype" id="8099899">uint8</span><span class="op" id="8099904">(</span><span class="ident" id="8099905">alpha</span><span class="op" id="8099910">)</span><span class="op" id="8099911">}</span><span class="op" id="8099912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099916">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8099919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8099922">return</span>&nbsp;<span class="ident" id="8099929">m</span><br>
<span class="lineno"></span><span class="op" id="8099931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8099934">func</span>&nbsp;<span class="ident" id="8099939">vgradCr</span><span class="op" id="8099946">(</span><span class="op" id="8099947">)</span>&nbsp;<span class="ident" id="8099949">image</span><span class="op" id="8099954">.</span><span class="ident" id="8099955">Image</span>&nbsp;<span class="op" id="8099961">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099964">m</span>&nbsp;<span class="op" id="8099966">:=</span>&nbsp;<span class="op" id="8099969">&amp;</span><span class="ident" id="8099970">image</span><span class="op" id="8099975">.</span><span class="ident" id="8099976">YCbCr</span><span class="op" id="8099981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8099985">Y</span><span class="op" id="8099986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8100001">make</span><span class="op" id="8100005">(</span><span class="op" id="8100006">[</span><span class="op" id="8100007">]</span><span class="builtintype" id="8100008">byte</span><span class="op" id="8100012">,</span>&nbsp;<span class="num" id="8100014">16</span><span class="op" id="8100016">*</span><span class="num" id="8100017">16</span><span class="op" id="8100019">)</span><span class="op" id="8100020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100024">Cb</span><span class="op" id="8100026">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8100040">make</span><span class="op" id="8100044">(</span><span class="op" id="8100045">[</span><span class="op" id="8100046">]</span><span class="builtintype" id="8100047">byte</span><span class="op" id="8100051">,</span>&nbsp;<span class="num" id="8100053">16</span><span class="op" id="8100055">*</span><span class="num" id="8100056">16</span><span class="op" id="8100058">)</span><span class="op" id="8100059">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100063">Cr</span><span class="op" id="8100065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="8100079">make</span><span class="op" id="8100083">(</span><span class="op" id="8100084">[</span><span class="op" id="8100085">]</span><span class="builtintype" id="8100086">byte</span><span class="op" id="8100090">,</span>&nbsp;<span class="num" id="8100092">16</span><span class="op" id="8100094">*</span><span class="num" id="8100095">16</span><span class="op" id="8100097">)</span><span class="op" id="8100098">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100102">YStride</span><span class="op" id="8100109">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8100118">16</span><span class="op" id="8100120">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100124">CStride</span><span class="op" id="8100131">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8100140">16</span><span class="op" id="8100142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100146">SubsampleRatio</span><span class="op" id="8100160">:</span>&nbsp;<span class="ident" id="8100162">image</span><span class="op" id="8100167">.</span><span class="ident" id="8100168">YCbCrSubsampleRatio444</span><span class="op" id="8100190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100194">Rect</span><span class="op" id="8100198">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100210">image</span><span class="op" id="8100215">.</span><span class="ident" id="8100216">Rect</span><span class="op" id="8100220">(</span><span class="num" id="8100221">0</span><span class="op" id="8100222">,</span>&nbsp;<span class="num" id="8100224">0</span><span class="op" id="8100225">,</span>&nbsp;<span class="num" id="8100227">16</span><span class="op" id="8100229">,</span>&nbsp;<span class="num" id="8100231">16</span><span class="op" id="8100233">)</span><span class="op" id="8100234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100237">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100240">for</span>&nbsp;<span class="ident" id="8100244">y</span>&nbsp;<span class="op" id="8100246">:=</span>&nbsp;<span class="num" id="8100249">0</span><span class="op" id="8100250">;</span>&nbsp;<span class="ident" id="8100252">y</span>&nbsp;<span class="op" id="8100254">&lt;</span>&nbsp;<span class="num" id="8100256">16</span><span class="op" id="8100258">;</span>&nbsp;<span class="ident" id="8100260">y</span><span class="op" id="8100261">++</span>&nbsp;<span class="op" id="8100264">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100268">for</span>&nbsp;<span class="ident" id="8100272">x</span>&nbsp;<span class="op" id="8100274">:=</span>&nbsp;<span class="num" id="8100277">0</span><span class="op" id="8100278">;</span>&nbsp;<span class="ident" id="8100280">x</span>&nbsp;<span class="op" id="8100282">&lt;</span>&nbsp;<span class="num" id="8100284">16</span><span class="op" id="8100286">;</span>&nbsp;<span class="ident" id="8100288">x</span><span class="op" id="8100289">++</span>&nbsp;<span class="op" id="8100292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100297">m</span><span class="op" id="8100298">.</span><span class="ident" id="8100299">Cr</span><span class="op" id="8100301">[</span><span class="ident" id="8100302">y</span><span class="op" id="8100303">*</span><span class="ident" id="8100304">m</span><span class="op" id="8100305">.</span><span class="ident" id="8100306">CStride</span><span class="op" id="8100313">+</span><span class="ident" id="8100314">x</span><span class="op" id="8100315">]</span>&nbsp;<span class="op" id="8100317">=</span>&nbsp;<span class="builtintype" id="8100319">uint8</span><span class="op" id="8100324">(</span><span class="ident" id="8100325">y</span>&nbsp;<span class="op" id="8100327">*</span>&nbsp;<span class="num" id="8100329">0x11</span><span class="op" id="8100333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100343">return</span>&nbsp;<span class="ident" id="8100350">m</span><br>
<span class="lineno">75</span><span class="op" id="8100352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8100355">func</span>&nbsp;<span class="ident" id="8100360">hgradRed</span><span class="op" id="8100368">(</span><span class="ident" id="8100369">alpha</span>&nbsp;<span class="builtintype" id="8100375">int</span><span class="op" id="8100378">)</span>&nbsp;<span class="ident" id="8100380">Image</span>&nbsp;<span class="op" id="8100386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100389">m</span>&nbsp;<span class="op" id="8100391">:=</span>&nbsp;<span class="ident" id="8100394">image</span><span class="op" id="8100399">.</span><span class="ident" id="8100400">NewRGBA</span><span class="op" id="8100407">(</span><span class="ident" id="8100408">image</span><span class="op" id="8100413">.</span><span class="ident" id="8100414">Rect</span><span class="op" id="8100418">(</span><span class="num" id="8100419">0</span><span class="op" id="8100420">,</span>&nbsp;<span class="num" id="8100422">0</span><span class="op" id="8100423">,</span>&nbsp;<span class="num" id="8100425">16</span><span class="op" id="8100427">,</span>&nbsp;<span class="num" id="8100429">16</span><span class="op" id="8100431">)</span><span class="op" id="8100432">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100435">for</span>&nbsp;<span class="ident" id="8100439">y</span>&nbsp;<span class="op" id="8100441">:=</span>&nbsp;<span class="num" id="8100444">0</span><span class="op" id="8100445">;</span>&nbsp;<span class="ident" id="8100447">y</span>&nbsp;<span class="op" id="8100449">&lt;</span>&nbsp;<span class="num" id="8100451">16</span><span class="op" id="8100453">;</span>&nbsp;<span class="ident" id="8100455">y</span><span class="op" id="8100456">++</span>&nbsp;<span class="op" id="8100459">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100463">for</span>&nbsp;<span class="ident" id="8100467">x</span>&nbsp;<span class="op" id="8100469">:=</span>&nbsp;<span class="num" id="8100472">0</span><span class="op" id="8100473">;</span>&nbsp;<span class="ident" id="8100475">x</span>&nbsp;<span class="op" id="8100477">&lt;</span>&nbsp;<span class="num" id="8100479">16</span><span class="op" id="8100481">;</span>&nbsp;<span class="ident" id="8100483">x</span><span class="op" id="8100484">++</span>&nbsp;<span class="op" id="8100487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100492">m</span><span class="op" id="8100493">.</span><span class="ident" id="8100494">Set</span><span class="op" id="8100497">(</span><span class="ident" id="8100498">x</span><span class="op" id="8100499">,</span>&nbsp;<span class="ident" id="8100501">y</span><span class="op" id="8100502">,</span>&nbsp;<span class="ident" id="8100504">color</span><span class="op" id="8100509">.</span><span class="ident" id="8100510">RGBA</span><span class="op" id="8100514">{</span><span class="builtintype" id="8100515">uint8</span><span class="op" id="8100520">(</span><span class="ident" id="8100521">x</span>&nbsp;<span class="op" id="8100523">*</span>&nbsp;<span class="ident" id="8100525">alpha</span>&nbsp;<span class="op" id="8100531">/</span>&nbsp;<span class="num" id="8100533">15</span><span class="op" id="8100535">)</span><span class="op" id="8100536">,</span>&nbsp;<span class="num" id="8100538">0</span><span class="op" id="8100539">,</span>&nbsp;<span class="num" id="8100541">0</span><span class="op" id="8100542">,</span>&nbsp;<span class="builtintype" id="8100544">uint8</span><span class="op" id="8100549">(</span><span class="ident" id="8100550">alpha</span><span class="op" id="8100555">)</span><span class="op" id="8100556">}</span><span class="op" id="8100557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100561">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100567">return</span>&nbsp;<span class="ident" id="8100574">m</span><br>
<span class="lineno">85</span><span class="op" id="8100576">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8100579">func</span>&nbsp;<span class="ident" id="8100584">gradYellow</span><span class="op" id="8100594">(</span><span class="ident" id="8100595">alpha</span>&nbsp;<span class="builtintype" id="8100601">int</span><span class="op" id="8100604">)</span>&nbsp;<span class="ident" id="8100606">Image</span>&nbsp;<span class="op" id="8100612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100615">m</span>&nbsp;<span class="op" id="8100617">:=</span>&nbsp;<span class="ident" id="8100620">image</span><span class="op" id="8100625">.</span><span class="ident" id="8100626">NewRGBA</span><span class="op" id="8100633">(</span><span class="ident" id="8100634">image</span><span class="op" id="8100639">.</span><span class="ident" id="8100640">Rect</span><span class="op" id="8100644">(</span><span class="num" id="8100645">0</span><span class="op" id="8100646">,</span>&nbsp;<span class="num" id="8100648">0</span><span class="op" id="8100649">,</span>&nbsp;<span class="num" id="8100651">16</span><span class="op" id="8100653">,</span>&nbsp;<span class="num" id="8100655">16</span><span class="op" id="8100657">)</span><span class="op" id="8100658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100661">for</span>&nbsp;<span class="ident" id="8100665">y</span>&nbsp;<span class="op" id="8100667">:=</span>&nbsp;<span class="num" id="8100670">0</span><span class="op" id="8100671">;</span>&nbsp;<span class="ident" id="8100673">y</span>&nbsp;<span class="op" id="8100675">&lt;</span>&nbsp;<span class="num" id="8100677">16</span><span class="op" id="8100679">;</span>&nbsp;<span class="ident" id="8100681">y</span><span class="op" id="8100682">++</span>&nbsp;<span class="op" id="8100685">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100689">for</span>&nbsp;<span class="ident" id="8100693">x</span>&nbsp;<span class="op" id="8100695">:=</span>&nbsp;<span class="num" id="8100698">0</span><span class="op" id="8100699">;</span>&nbsp;<span class="ident" id="8100701">x</span>&nbsp;<span class="op" id="8100703">&lt;</span>&nbsp;<span class="num" id="8100705">16</span><span class="op" id="8100707">;</span>&nbsp;<span class="ident" id="8100709">x</span><span class="op" id="8100710">++</span>&nbsp;<span class="op" id="8100713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100718">m</span><span class="op" id="8100719">.</span><span class="ident" id="8100720">Set</span><span class="op" id="8100723">(</span><span class="ident" id="8100724">x</span><span class="op" id="8100725">,</span>&nbsp;<span class="ident" id="8100727">y</span><span class="op" id="8100728">,</span>&nbsp;<span class="ident" id="8100730">color</span><span class="op" id="8100735">.</span><span class="ident" id="8100736">RGBA</span><span class="op" id="8100740">{</span><span class="builtintype" id="8100741">uint8</span><span class="op" id="8100746">(</span><span class="ident" id="8100747">x</span>&nbsp;<span class="op" id="8100749">*</span>&nbsp;<span class="ident" id="8100751">alpha</span>&nbsp;<span class="op" id="8100757">/</span>&nbsp;<span class="num" id="8100759">15</span><span class="op" id="8100761">)</span><span class="op" id="8100762">,</span>&nbsp;<span class="builtintype" id="8100764">uint8</span><span class="op" id="8100769">(</span><span class="ident" id="8100770">y</span>&nbsp;<span class="op" id="8100772">*</span>&nbsp;<span class="ident" id="8100774">alpha</span>&nbsp;<span class="op" id="8100780">/</span>&nbsp;<span class="num" id="8100782">15</span><span class="op" id="8100784">)</span><span class="op" id="8100785">,</span>&nbsp;<span class="num" id="8100787">0</span><span class="op" id="8100788">,</span>&nbsp;<span class="builtintype" id="8100790">uint8</span><span class="op" id="8100795">(</span><span class="ident" id="8100796">alpha</span><span class="op" id="8100801">)</span><span class="op" id="8100802">}</span><span class="op" id="8100803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8100810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8100813">return</span>&nbsp;<span class="ident" id="8100820">m</span><br>
<span class="lineno">95</span><span class="op" id="8100822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8100825">type</span>&nbsp;<span class="ident" id="8100830">drawTest</span>&nbsp;<span class="keyword" id="8100839">struct</span>&nbsp;<span class="op" id="8100846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100849">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8100858">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100866">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100875">image</span><span class="op" id="8100880">.</span><span class="ident" id="8100881">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100888">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100897">image</span><span class="op" id="8100902">.</span><span class="ident" id="8100903">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100910">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100919">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8100923">expected</span>&nbsp;<span class="ident" id="8100932">color</span><span class="op" id="8100937">.</span><span class="ident" id="8100938">Color</span><br>
<span class="lineno"></span><span class="op" id="8100944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="8100947">var</span>&nbsp;<span class="ident" id="8100951">drawTests</span>&nbsp;<span class="op" id="8100961">=</span>&nbsp;<span class="op" id="8100963">[</span><span class="op" id="8100964">]</span><span class="ident" id="8100965">drawTest</span><span class="op" id="8100973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8100976">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101006">{</span><span class="string" id="8101007">&#34;nop&#34;</span><span class="op" id="8101012">,</span>&nbsp;<span class="ident" id="8101014">vgradGreen</span><span class="op" id="8101024">(</span><span class="num" id="8101025">255</span><span class="op" id="8101028">)</span><span class="op" id="8101029">,</span>&nbsp;<span class="ident" id="8101031">fillAlpha</span><span class="op" id="8101040">(</span><span class="num" id="8101041">0</span><span class="op" id="8101042">)</span><span class="op" id="8101043">,</span>&nbsp;<span class="ident" id="8101045">Over</span><span class="op" id="8101049">,</span>&nbsp;<span class="ident" id="8101051">color</span><span class="op" id="8101056">.</span><span class="ident" id="8101057">RGBA</span><span class="op" id="8101061">{</span><span class="num" id="8101062">136</span><span class="op" id="8101065">,</span>&nbsp;<span class="num" id="8101067">0</span><span class="op" id="8101068">,</span>&nbsp;<span class="num" id="8101070">0</span><span class="op" id="8101071">,</span>&nbsp;<span class="num" id="8101073">255</span><span class="op" id="8101076">}</span><span class="op" id="8101077">}</span><span class="op" id="8101078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101081">{</span><span class="string" id="8101082">&#34;clear&#34;</span><span class="op" id="8101089">,</span>&nbsp;<span class="ident" id="8101091">vgradGreen</span><span class="op" id="8101101">(</span><span class="num" id="8101102">255</span><span class="op" id="8101105">)</span><span class="op" id="8101106">,</span>&nbsp;<span class="ident" id="8101108">fillAlpha</span><span class="op" id="8101117">(</span><span class="num" id="8101118">0</span><span class="op" id="8101119">)</span><span class="op" id="8101120">,</span>&nbsp;<span class="ident" id="8101122">Src</span><span class="op" id="8101125">,</span>&nbsp;<span class="ident" id="8101127">color</span><span class="op" id="8101132">.</span><span class="ident" id="8101133">RGBA</span><span class="op" id="8101137">{</span><span class="num" id="8101138">0</span><span class="op" id="8101139">,</span>&nbsp;<span class="num" id="8101141">0</span><span class="op" id="8101142">,</span>&nbsp;<span class="num" id="8101144">0</span><span class="op" id="8101145">,</span>&nbsp;<span class="num" id="8101147">0</span><span class="op" id="8101148">}</span><span class="op" id="8101149">}</span><span class="op" id="8101150">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101153">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101207">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101232">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101279">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101319">{</span><span class="string" id="8101320">&#34;fill&#34;</span><span class="op" id="8101326">,</span>&nbsp;<span class="ident" id="8101328">fillBlue</span><span class="op" id="8101336">(</span><span class="num" id="8101337">90</span><span class="op" id="8101339">)</span><span class="op" id="8101340">,</span>&nbsp;<span class="ident" id="8101342">fillAlpha</span><span class="op" id="8101351">(</span><span class="num" id="8101352">255</span><span class="op" id="8101355">)</span><span class="op" id="8101356">,</span>&nbsp;<span class="ident" id="8101358">Over</span><span class="op" id="8101362">,</span>&nbsp;<span class="ident" id="8101364">color</span><span class="op" id="8101369">.</span><span class="ident" id="8101370">RGBA</span><span class="op" id="8101374">{</span><span class="num" id="8101375">88</span><span class="op" id="8101377">,</span>&nbsp;<span class="num" id="8101379">0</span><span class="op" id="8101380">,</span>&nbsp;<span class="num" id="8101382">90</span><span class="op" id="8101384">,</span>&nbsp;<span class="num" id="8101386">255</span><span class="op" id="8101389">}</span><span class="op" id="8101390">}</span><span class="op" id="8101391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101394">{</span><span class="string" id="8101395">&#34;fillSrc&#34;</span><span class="op" id="8101404">,</span>&nbsp;<span class="ident" id="8101406">fillBlue</span><span class="op" id="8101414">(</span><span class="num" id="8101415">90</span><span class="op" id="8101417">)</span><span class="op" id="8101418">,</span>&nbsp;<span class="ident" id="8101420">fillAlpha</span><span class="op" id="8101429">(</span><span class="num" id="8101430">255</span><span class="op" id="8101433">)</span><span class="op" id="8101434">,</span>&nbsp;<span class="ident" id="8101436">Src</span><span class="op" id="8101439">,</span>&nbsp;<span class="ident" id="8101441">color</span><span class="op" id="8101446">.</span><span class="ident" id="8101447">RGBA</span><span class="op" id="8101451">{</span><span class="num" id="8101452">0</span><span class="op" id="8101453">,</span>&nbsp;<span class="num" id="8101455">0</span><span class="op" id="8101456">,</span>&nbsp;<span class="num" id="8101458">90</span><span class="op" id="8101460">,</span>&nbsp;<span class="num" id="8101462">90</span><span class="op" id="8101464">}</span><span class="op" id="8101465">}</span><span class="op" id="8101466">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101469">{</span><span class="string" id="8101470">&#34;fillAlpha&#34;</span><span class="op" id="8101481">,</span>&nbsp;<span class="ident" id="8101483">fillBlue</span><span class="op" id="8101491">(</span><span class="num" id="8101492">90</span><span class="op" id="8101494">)</span><span class="op" id="8101495">,</span>&nbsp;<span class="ident" id="8101497">fillAlpha</span><span class="op" id="8101506">(</span><span class="num" id="8101507">192</span><span class="op" id="8101510">)</span><span class="op" id="8101511">,</span>&nbsp;<span class="ident" id="8101513">Over</span><span class="op" id="8101517">,</span>&nbsp;<span class="ident" id="8101519">color</span><span class="op" id="8101524">.</span><span class="ident" id="8101525">RGBA</span><span class="op" id="8101529">{</span><span class="num" id="8101530">100</span><span class="op" id="8101533">,</span>&nbsp;<span class="num" id="8101535">0</span><span class="op" id="8101536">,</span>&nbsp;<span class="num" id="8101538">68</span><span class="op" id="8101540">,</span>&nbsp;<span class="num" id="8101542">255</span><span class="op" id="8101545">}</span><span class="op" id="8101546">}</span><span class="op" id="8101547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101550">{</span><span class="string" id="8101551">&#34;fillAlphaSrc&#34;</span><span class="op" id="8101565">,</span>&nbsp;<span class="ident" id="8101567">fillBlue</span><span class="op" id="8101575">(</span><span class="num" id="8101576">90</span><span class="op" id="8101578">)</span><span class="op" id="8101579">,</span>&nbsp;<span class="ident" id="8101581">fillAlpha</span><span class="op" id="8101590">(</span><span class="num" id="8101591">192</span><span class="op" id="8101594">)</span><span class="op" id="8101595">,</span>&nbsp;<span class="ident" id="8101597">Src</span><span class="op" id="8101600">,</span>&nbsp;<span class="ident" id="8101602">color</span><span class="op" id="8101607">.</span><span class="ident" id="8101608">RGBA</span><span class="op" id="8101612">{</span><span class="num" id="8101613">0</span><span class="op" id="8101614">,</span>&nbsp;<span class="num" id="8101616">0</span><span class="op" id="8101617">,</span>&nbsp;<span class="num" id="8101619">68</span><span class="op" id="8101621">,</span>&nbsp;<span class="num" id="8101623">68</span><span class="op" id="8101625">}</span><span class="op" id="8101626">}</span><span class="op" id="8101627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101630">{</span><span class="string" id="8101631">&#34;fillNil&#34;</span><span class="op" id="8101640">,</span>&nbsp;<span class="ident" id="8101642">fillBlue</span><span class="op" id="8101650">(</span><span class="num" id="8101651">90</span><span class="op" id="8101653">)</span><span class="op" id="8101654">,</span>&nbsp;<span class="builtintype" id="8101656">nil</span><span class="op" id="8101659">,</span>&nbsp;<span class="ident" id="8101661">Over</span><span class="op" id="8101665">,</span>&nbsp;<span class="ident" id="8101667">color</span><span class="op" id="8101672">.</span><span class="ident" id="8101673">RGBA</span><span class="op" id="8101677">{</span><span class="num" id="8101678">88</span><span class="op" id="8101680">,</span>&nbsp;<span class="num" id="8101682">0</span><span class="op" id="8101683">,</span>&nbsp;<span class="num" id="8101685">90</span><span class="op" id="8101687">,</span>&nbsp;<span class="num" id="8101689">255</span><span class="op" id="8101692">}</span><span class="op" id="8101693">}</span><span class="op" id="8101694">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101697">{</span><span class="string" id="8101698">&#34;fillNilSrc&#34;</span><span class="op" id="8101710">,</span>&nbsp;<span class="ident" id="8101712">fillBlue</span><span class="op" id="8101720">(</span><span class="num" id="8101721">90</span><span class="op" id="8101723">)</span><span class="op" id="8101724">,</span>&nbsp;<span class="builtintype" id="8101726">nil</span><span class="op" id="8101729">,</span>&nbsp;<span class="ident" id="8101731">Src</span><span class="op" id="8101734">,</span>&nbsp;<span class="ident" id="8101736">color</span><span class="op" id="8101741">.</span><span class="ident" id="8101742">RGBA</span><span class="op" id="8101746">{</span><span class="num" id="8101747">0</span><span class="op" id="8101748">,</span>&nbsp;<span class="num" id="8101750">0</span><span class="op" id="8101751">,</span>&nbsp;<span class="num" id="8101753">90</span><span class="op" id="8101755">,</span>&nbsp;<span class="num" id="8101757">90</span><span class="op" id="8101759">}</span><span class="op" id="8101760">}</span><span class="op" id="8101761">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101764">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101819">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101844">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8101891">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8101931">{</span><span class="string" id="8101932">&#34;copy&#34;</span><span class="op" id="8101938">,</span>&nbsp;<span class="ident" id="8101940">vgradGreen</span><span class="op" id="8101950">(</span><span class="num" id="8101951">90</span><span class="op" id="8101953">)</span><span class="op" id="8101954">,</span>&nbsp;<span class="ident" id="8101956">fillAlpha</span><span class="op" id="8101965">(</span><span class="num" id="8101966">255</span><span class="op" id="8101969">)</span><span class="op" id="8101970">,</span>&nbsp;<span class="ident" id="8101972">Over</span><span class="op" id="8101976">,</span>&nbsp;<span class="ident" id="8101978">color</span><span class="op" id="8101983">.</span><span class="ident" id="8101984">RGBA</span><span class="op" id="8101988">{</span><span class="num" id="8101989">88</span><span class="op" id="8101991">,</span>&nbsp;<span class="num" id="8101993">48</span><span class="op" id="8101995">,</span>&nbsp;<span class="num" id="8101997">0</span><span class="op" id="8101998">,</span>&nbsp;<span class="num" id="8102000">255</span><span class="op" id="8102003">}</span><span class="op" id="8102004">}</span><span class="op" id="8102005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102008">{</span><span class="string" id="8102009">&#34;copySrc&#34;</span><span class="op" id="8102018">,</span>&nbsp;<span class="ident" id="8102020">vgradGreen</span><span class="op" id="8102030">(</span><span class="num" id="8102031">90</span><span class="op" id="8102033">)</span><span class="op" id="8102034">,</span>&nbsp;<span class="ident" id="8102036">fillAlpha</span><span class="op" id="8102045">(</span><span class="num" id="8102046">255</span><span class="op" id="8102049">)</span><span class="op" id="8102050">,</span>&nbsp;<span class="ident" id="8102052">Src</span><span class="op" id="8102055">,</span>&nbsp;<span class="ident" id="8102057">color</span><span class="op" id="8102062">.</span><span class="ident" id="8102063">RGBA</span><span class="op" id="8102067">{</span><span class="num" id="8102068">0</span><span class="op" id="8102069">,</span>&nbsp;<span class="num" id="8102071">48</span><span class="op" id="8102073">,</span>&nbsp;<span class="num" id="8102075">0</span><span class="op" id="8102076">,</span>&nbsp;<span class="num" id="8102078">90</span><span class="op" id="8102080">}</span><span class="op" id="8102081">}</span><span class="op" id="8102082">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102085">{</span><span class="string" id="8102086">&#34;copyAlpha&#34;</span><span class="op" id="8102097">,</span>&nbsp;<span class="ident" id="8102099">vgradGreen</span><span class="op" id="8102109">(</span><span class="num" id="8102110">90</span><span class="op" id="8102112">)</span><span class="op" id="8102113">,</span>&nbsp;<span class="ident" id="8102115">fillAlpha</span><span class="op" id="8102124">(</span><span class="num" id="8102125">192</span><span class="op" id="8102128">)</span><span class="op" id="8102129">,</span>&nbsp;<span class="ident" id="8102131">Over</span><span class="op" id="8102135">,</span>&nbsp;<span class="ident" id="8102137">color</span><span class="op" id="8102142">.</span><span class="ident" id="8102143">RGBA</span><span class="op" id="8102147">{</span><span class="num" id="8102148">100</span><span class="op" id="8102151">,</span>&nbsp;<span class="num" id="8102153">36</span><span class="op" id="8102155">,</span>&nbsp;<span class="num" id="8102157">0</span><span class="op" id="8102158">,</span>&nbsp;<span class="num" id="8102160">255</span><span class="op" id="8102163">}</span><span class="op" id="8102164">}</span><span class="op" id="8102165">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102168">{</span><span class="string" id="8102169">&#34;copyAlphaSrc&#34;</span><span class="op" id="8102183">,</span>&nbsp;<span class="ident" id="8102185">vgradGreen</span><span class="op" id="8102195">(</span><span class="num" id="8102196">90</span><span class="op" id="8102198">)</span><span class="op" id="8102199">,</span>&nbsp;<span class="ident" id="8102201">fillAlpha</span><span class="op" id="8102210">(</span><span class="num" id="8102211">192</span><span class="op" id="8102214">)</span><span class="op" id="8102215">,</span>&nbsp;<span class="ident" id="8102217">Src</span><span class="op" id="8102220">,</span>&nbsp;<span class="ident" id="8102222">color</span><span class="op" id="8102227">.</span><span class="ident" id="8102228">RGBA</span><span class="op" id="8102232">{</span><span class="num" id="8102233">0</span><span class="op" id="8102234">,</span>&nbsp;<span class="num" id="8102236">36</span><span class="op" id="8102238">,</span>&nbsp;<span class="num" id="8102240">0</span><span class="op" id="8102241">,</span>&nbsp;<span class="num" id="8102243">68</span><span class="op" id="8102245">}</span><span class="op" id="8102246">}</span><span class="op" id="8102247">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102250">{</span><span class="string" id="8102251">&#34;copyNil&#34;</span><span class="op" id="8102260">,</span>&nbsp;<span class="ident" id="8102262">vgradGreen</span><span class="op" id="8102272">(</span><span class="num" id="8102273">90</span><span class="op" id="8102275">)</span><span class="op" id="8102276">,</span>&nbsp;<span class="builtintype" id="8102278">nil</span><span class="op" id="8102281">,</span>&nbsp;<span class="ident" id="8102283">Over</span><span class="op" id="8102287">,</span>&nbsp;<span class="ident" id="8102289">color</span><span class="op" id="8102294">.</span><span class="ident" id="8102295">RGBA</span><span class="op" id="8102299">{</span><span class="num" id="8102300">88</span><span class="op" id="8102302">,</span>&nbsp;<span class="num" id="8102304">48</span><span class="op" id="8102306">,</span>&nbsp;<span class="num" id="8102308">0</span><span class="op" id="8102309">,</span>&nbsp;<span class="num" id="8102311">255</span><span class="op" id="8102314">}</span><span class="op" id="8102315">}</span><span class="op" id="8102316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102319">{</span><span class="string" id="8102320">&#34;copyNilSrc&#34;</span><span class="op" id="8102332">,</span>&nbsp;<span class="ident" id="8102334">vgradGreen</span><span class="op" id="8102344">(</span><span class="num" id="8102345">90</span><span class="op" id="8102347">)</span><span class="op" id="8102348">,</span>&nbsp;<span class="builtintype" id="8102350">nil</span><span class="op" id="8102353">,</span>&nbsp;<span class="ident" id="8102355">Src</span><span class="op" id="8102358">,</span>&nbsp;<span class="ident" id="8102360">color</span><span class="op" id="8102365">.</span><span class="ident" id="8102366">RGBA</span><span class="op" id="8102370">{</span><span class="num" id="8102371">0</span><span class="op" id="8102372">,</span>&nbsp;<span class="num" id="8102374">48</span><span class="op" id="8102376">,</span>&nbsp;<span class="num" id="8102378">0</span><span class="op" id="8102379">,</span>&nbsp;<span class="num" id="8102381">90</span><span class="op" id="8102383">}</span><span class="op" id="8102384">}</span><span class="op" id="8102385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8102388">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8102449">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8102474">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8102521">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8102616">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102709">{</span><span class="string" id="8102710">&#34;nrgba&#34;</span><span class="op" id="8102717">,</span>&nbsp;<span class="ident" id="8102719">vgradGreenNRGBA</span><span class="op" id="8102734">(</span><span class="num" id="8102735">90</span><span class="op" id="8102737">)</span><span class="op" id="8102738">,</span>&nbsp;<span class="ident" id="8102740">fillAlpha</span><span class="op" id="8102749">(</span><span class="num" id="8102750">255</span><span class="op" id="8102753">)</span><span class="op" id="8102754">,</span>&nbsp;<span class="ident" id="8102756">Over</span><span class="op" id="8102760">,</span>&nbsp;<span class="ident" id="8102762">color</span><span class="op" id="8102767">.</span><span class="ident" id="8102768">RGBA</span><span class="op" id="8102772">{</span><span class="num" id="8102773">88</span><span class="op" id="8102775">,</span>&nbsp;<span class="num" id="8102777">46</span><span class="op" id="8102779">,</span>&nbsp;<span class="num" id="8102781">0</span><span class="op" id="8102782">,</span>&nbsp;<span class="num" id="8102784">255</span><span class="op" id="8102787">}</span><span class="op" id="8102788">}</span><span class="op" id="8102789">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102792">{</span><span class="string" id="8102793">&#34;nrgbaSrc&#34;</span><span class="op" id="8102803">,</span>&nbsp;<span class="ident" id="8102805">vgradGreenNRGBA</span><span class="op" id="8102820">(</span><span class="num" id="8102821">90</span><span class="op" id="8102823">)</span><span class="op" id="8102824">,</span>&nbsp;<span class="ident" id="8102826">fillAlpha</span><span class="op" id="8102835">(</span><span class="num" id="8102836">255</span><span class="op" id="8102839">)</span><span class="op" id="8102840">,</span>&nbsp;<span class="ident" id="8102842">Src</span><span class="op" id="8102845">,</span>&nbsp;<span class="ident" id="8102847">color</span><span class="op" id="8102852">.</span><span class="ident" id="8102853">RGBA</span><span class="op" id="8102857">{</span><span class="num" id="8102858">0</span><span class="op" id="8102859">,</span>&nbsp;<span class="num" id="8102861">46</span><span class="op" id="8102863">,</span>&nbsp;<span class="num" id="8102865">0</span><span class="op" id="8102866">,</span>&nbsp;<span class="num" id="8102868">90</span><span class="op" id="8102870">}</span><span class="op" id="8102871">}</span><span class="op" id="8102872">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102875">{</span><span class="string" id="8102876">&#34;nrgbaAlpha&#34;</span><span class="op" id="8102888">,</span>&nbsp;<span class="ident" id="8102890">vgradGreenNRGBA</span><span class="op" id="8102905">(</span><span class="num" id="8102906">90</span><span class="op" id="8102908">)</span><span class="op" id="8102909">,</span>&nbsp;<span class="ident" id="8102911">fillAlpha</span><span class="op" id="8102920">(</span><span class="num" id="8102921">192</span><span class="op" id="8102924">)</span><span class="op" id="8102925">,</span>&nbsp;<span class="ident" id="8102927">Over</span><span class="op" id="8102931">,</span>&nbsp;<span class="ident" id="8102933">color</span><span class="op" id="8102938">.</span><span class="ident" id="8102939">RGBA</span><span class="op" id="8102943">{</span><span class="num" id="8102944">100</span><span class="op" id="8102947">,</span>&nbsp;<span class="num" id="8102949">34</span><span class="op" id="8102951">,</span>&nbsp;<span class="num" id="8102953">0</span><span class="op" id="8102954">,</span>&nbsp;<span class="num" id="8102956">255</span><span class="op" id="8102959">}</span><span class="op" id="8102960">}</span><span class="op" id="8102961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8102964">{</span><span class="string" id="8102965">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="8102980">,</span>&nbsp;<span class="ident" id="8102982">vgradGreenNRGBA</span><span class="op" id="8102997">(</span><span class="num" id="8102998">90</span><span class="op" id="8103000">)</span><span class="op" id="8103001">,</span>&nbsp;<span class="ident" id="8103003">fillAlpha</span><span class="op" id="8103012">(</span><span class="num" id="8103013">192</span><span class="op" id="8103016">)</span><span class="op" id="8103017">,</span>&nbsp;<span class="ident" id="8103019">Src</span><span class="op" id="8103022">,</span>&nbsp;<span class="ident" id="8103024">color</span><span class="op" id="8103029">.</span><span class="ident" id="8103030">RGBA</span><span class="op" id="8103034">{</span><span class="num" id="8103035">0</span><span class="op" id="8103036">,</span>&nbsp;<span class="num" id="8103038">34</span><span class="op" id="8103040">,</span>&nbsp;<span class="num" id="8103042">0</span><span class="op" id="8103043">,</span>&nbsp;<span class="num" id="8103045">68</span><span class="op" id="8103047">}</span><span class="op" id="8103048">}</span><span class="op" id="8103049">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103052">{</span><span class="string" id="8103053">&#34;nrgbaNil&#34;</span><span class="op" id="8103063">,</span>&nbsp;<span class="ident" id="8103065">vgradGreenNRGBA</span><span class="op" id="8103080">(</span><span class="num" id="8103081">90</span><span class="op" id="8103083">)</span><span class="op" id="8103084">,</span>&nbsp;<span class="builtintype" id="8103086">nil</span><span class="op" id="8103089">,</span>&nbsp;<span class="ident" id="8103091">Over</span><span class="op" id="8103095">,</span>&nbsp;<span class="ident" id="8103097">color</span><span class="op" id="8103102">.</span><span class="ident" id="8103103">RGBA</span><span class="op" id="8103107">{</span><span class="num" id="8103108">88</span><span class="op" id="8103110">,</span>&nbsp;<span class="num" id="8103112">46</span><span class="op" id="8103114">,</span>&nbsp;<span class="num" id="8103116">0</span><span class="op" id="8103117">,</span>&nbsp;<span class="num" id="8103119">255</span><span class="op" id="8103122">}</span><span class="op" id="8103123">}</span><span class="op" id="8103124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103127">{</span><span class="string" id="8103128">&#34;nrgbaNilSrc&#34;</span><span class="op" id="8103141">,</span>&nbsp;<span class="ident" id="8103143">vgradGreenNRGBA</span><span class="op" id="8103158">(</span><span class="num" id="8103159">90</span><span class="op" id="8103161">)</span><span class="op" id="8103162">,</span>&nbsp;<span class="builtintype" id="8103164">nil</span><span class="op" id="8103167">,</span>&nbsp;<span class="ident" id="8103169">Src</span><span class="op" id="8103172">,</span>&nbsp;<span class="ident" id="8103174">color</span><span class="op" id="8103179">.</span><span class="ident" id="8103180">RGBA</span><span class="op" id="8103184">{</span><span class="num" id="8103185">0</span><span class="op" id="8103186">,</span>&nbsp;<span class="num" id="8103188">46</span><span class="op" id="8103190">,</span>&nbsp;<span class="num" id="8103192">0</span><span class="op" id="8103193">,</span>&nbsp;<span class="num" id="8103195">90</span><span class="op" id="8103197">}</span><span class="op" id="8103198">}</span><span class="op" id="8103199">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103202">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103263">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103288">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103335">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103427">{</span><span class="string" id="8103428">&#34;ycbcr&#34;</span><span class="op" id="8103435">,</span>&nbsp;<span class="ident" id="8103437">vgradCr</span><span class="op" id="8103444">(</span><span class="op" id="8103445">)</span><span class="op" id="8103446">,</span>&nbsp;<span class="ident" id="8103448">fillAlpha</span><span class="op" id="8103457">(</span><span class="num" id="8103458">255</span><span class="op" id="8103461">)</span><span class="op" id="8103462">,</span>&nbsp;<span class="ident" id="8103464">Over</span><span class="op" id="8103468">,</span>&nbsp;<span class="ident" id="8103470">color</span><span class="op" id="8103475">.</span><span class="ident" id="8103476">RGBA</span><span class="op" id="8103480">{</span><span class="num" id="8103481">11</span><span class="op" id="8103483">,</span>&nbsp;<span class="num" id="8103485">38</span><span class="op" id="8103487">,</span>&nbsp;<span class="num" id="8103489">0</span><span class="op" id="8103490">,</span>&nbsp;<span class="num" id="8103492">255</span><span class="op" id="8103495">}</span><span class="op" id="8103496">}</span><span class="op" id="8103497">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103500">{</span><span class="string" id="8103501">&#34;ycbcrSrc&#34;</span><span class="op" id="8103511">,</span>&nbsp;<span class="ident" id="8103513">vgradCr</span><span class="op" id="8103520">(</span><span class="op" id="8103521">)</span><span class="op" id="8103522">,</span>&nbsp;<span class="ident" id="8103524">fillAlpha</span><span class="op" id="8103533">(</span><span class="num" id="8103534">255</span><span class="op" id="8103537">)</span><span class="op" id="8103538">,</span>&nbsp;<span class="ident" id="8103540">Src</span><span class="op" id="8103543">,</span>&nbsp;<span class="ident" id="8103545">color</span><span class="op" id="8103550">.</span><span class="ident" id="8103551">RGBA</span><span class="op" id="8103555">{</span><span class="num" id="8103556">11</span><span class="op" id="8103558">,</span>&nbsp;<span class="num" id="8103560">38</span><span class="op" id="8103562">,</span>&nbsp;<span class="num" id="8103564">0</span><span class="op" id="8103565">,</span>&nbsp;<span class="num" id="8103567">255</span><span class="op" id="8103570">}</span><span class="op" id="8103571">}</span><span class="op" id="8103572">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103575">{</span><span class="string" id="8103576">&#34;ycbcrAlpha&#34;</span><span class="op" id="8103588">,</span>&nbsp;<span class="ident" id="8103590">vgradCr</span><span class="op" id="8103597">(</span><span class="op" id="8103598">)</span><span class="op" id="8103599">,</span>&nbsp;<span class="ident" id="8103601">fillAlpha</span><span class="op" id="8103610">(</span><span class="num" id="8103611">192</span><span class="op" id="8103614">)</span><span class="op" id="8103615">,</span>&nbsp;<span class="ident" id="8103617">Over</span><span class="op" id="8103621">,</span>&nbsp;<span class="ident" id="8103623">color</span><span class="op" id="8103628">.</span><span class="ident" id="8103629">RGBA</span><span class="op" id="8103633">{</span><span class="num" id="8103634">42</span><span class="op" id="8103636">,</span>&nbsp;<span class="num" id="8103638">28</span><span class="op" id="8103640">,</span>&nbsp;<span class="num" id="8103642">0</span><span class="op" id="8103643">,</span>&nbsp;<span class="num" id="8103645">255</span><span class="op" id="8103648">}</span><span class="op" id="8103649">}</span><span class="op" id="8103650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103653">{</span><span class="string" id="8103654">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="8103669">,</span>&nbsp;<span class="ident" id="8103671">vgradCr</span><span class="op" id="8103678">(</span><span class="op" id="8103679">)</span><span class="op" id="8103680">,</span>&nbsp;<span class="ident" id="8103682">fillAlpha</span><span class="op" id="8103691">(</span><span class="num" id="8103692">192</span><span class="op" id="8103695">)</span><span class="op" id="8103696">,</span>&nbsp;<span class="ident" id="8103698">Src</span><span class="op" id="8103701">,</span>&nbsp;<span class="ident" id="8103703">color</span><span class="op" id="8103708">.</span><span class="ident" id="8103709">RGBA</span><span class="op" id="8103713">{</span><span class="num" id="8103714">8</span><span class="op" id="8103715">,</span>&nbsp;<span class="num" id="8103717">28</span><span class="op" id="8103719">,</span>&nbsp;<span class="num" id="8103721">0</span><span class="op" id="8103722">,</span>&nbsp;<span class="num" id="8103724">192</span><span class="op" id="8103727">}</span><span class="op" id="8103728">}</span><span class="op" id="8103729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103732">{</span><span class="string" id="8103733">&#34;ycbcrNil&#34;</span><span class="op" id="8103743">,</span>&nbsp;<span class="ident" id="8103745">vgradCr</span><span class="op" id="8103752">(</span><span class="op" id="8103753">)</span><span class="op" id="8103754">,</span>&nbsp;<span class="builtintype" id="8103756">nil</span><span class="op" id="8103759">,</span>&nbsp;<span class="ident" id="8103761">Over</span><span class="op" id="8103765">,</span>&nbsp;<span class="ident" id="8103767">color</span><span class="op" id="8103772">.</span><span class="ident" id="8103773">RGBA</span><span class="op" id="8103777">{</span><span class="num" id="8103778">11</span><span class="op" id="8103780">,</span>&nbsp;<span class="num" id="8103782">38</span><span class="op" id="8103784">,</span>&nbsp;<span class="num" id="8103786">0</span><span class="op" id="8103787">,</span>&nbsp;<span class="num" id="8103789">255</span><span class="op" id="8103792">}</span><span class="op" id="8103793">}</span><span class="op" id="8103794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8103797">{</span><span class="string" id="8103798">&#34;ycbcrNilSrc&#34;</span><span class="op" id="8103811">,</span>&nbsp;<span class="ident" id="8103813">vgradCr</span><span class="op" id="8103820">(</span><span class="op" id="8103821">)</span><span class="op" id="8103822">,</span>&nbsp;<span class="builtintype" id="8103824">nil</span><span class="op" id="8103827">,</span>&nbsp;<span class="ident" id="8103829">Src</span><span class="op" id="8103832">,</span>&nbsp;<span class="ident" id="8103834">color</span><span class="op" id="8103839">.</span><span class="ident" id="8103840">RGBA</span><span class="op" id="8103844">{</span><span class="num" id="8103845">11</span><span class="op" id="8103847">,</span>&nbsp;<span class="num" id="8103849">38</span><span class="op" id="8103851">,</span>&nbsp;<span class="num" id="8103853">0</span><span class="op" id="8103854">,</span>&nbsp;<span class="num" id="8103856">255</span><span class="op" id="8103859">}</span><span class="op" id="8103860">}</span><span class="op" id="8103861">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103864">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103903">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103928">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8103975">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8104017">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104060">{</span><span class="string" id="8104061">&#34;generic&#34;</span><span class="op" id="8104070">,</span>&nbsp;<span class="ident" id="8104072">fillBlue</span><span class="op" id="8104080">(</span><span class="num" id="8104081">255</span><span class="op" id="8104084">)</span><span class="op" id="8104085">,</span>&nbsp;<span class="ident" id="8104087">vgradAlpha</span><span class="op" id="8104097">(</span><span class="num" id="8104098">192</span><span class="op" id="8104101">)</span><span class="op" id="8104102">,</span>&nbsp;<span class="ident" id="8104104">Over</span><span class="op" id="8104108">,</span>&nbsp;<span class="ident" id="8104110">color</span><span class="op" id="8104115">.</span><span class="ident" id="8104116">RGBA</span><span class="op" id="8104120">{</span><span class="num" id="8104121">81</span><span class="op" id="8104123">,</span>&nbsp;<span class="num" id="8104125">0</span><span class="op" id="8104126">,</span>&nbsp;<span class="num" id="8104128">102</span><span class="op" id="8104131">,</span>&nbsp;<span class="num" id="8104133">255</span><span class="op" id="8104136">}</span><span class="op" id="8104137">}</span><span class="op" id="8104138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104141">{</span><span class="string" id="8104142">&#34;genericSrc&#34;</span><span class="op" id="8104154">,</span>&nbsp;<span class="ident" id="8104156">fillBlue</span><span class="op" id="8104164">(</span><span class="num" id="8104165">255</span><span class="op" id="8104168">)</span><span class="op" id="8104169">,</span>&nbsp;<span class="ident" id="8104171">vgradAlpha</span><span class="op" id="8104181">(</span><span class="num" id="8104182">192</span><span class="op" id="8104185">)</span><span class="op" id="8104186">,</span>&nbsp;<span class="ident" id="8104188">Src</span><span class="op" id="8104191">,</span>&nbsp;<span class="ident" id="8104193">color</span><span class="op" id="8104198">.</span><span class="ident" id="8104199">RGBA</span><span class="op" id="8104203">{</span><span class="num" id="8104204">0</span><span class="op" id="8104205">,</span>&nbsp;<span class="num" id="8104207">0</span><span class="op" id="8104208">,</span>&nbsp;<span class="num" id="8104210">102</span><span class="op" id="8104213">,</span>&nbsp;<span class="num" id="8104215">102</span><span class="op" id="8104218">}</span><span class="op" id="8104219">}</span><span class="op" id="8104220">,</span><br>
<span class="lineno"></span><span class="op" id="8104222">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8104225">func</span>&nbsp;<span class="ident" id="8104230">makeGolden</span><span class="op" id="8104240">(</span><span class="ident" id="8104241">dst</span>&nbsp;<span class="ident" id="8104245">image</span><span class="op" id="8104250">.</span><span class="ident" id="8104251">Image</span><span class="op" id="8104256">,</span>&nbsp;<span class="ident" id="8104258">r</span>&nbsp;<span class="ident" id="8104260">image</span><span class="op" id="8104265">.</span><span class="ident" id="8104266">Rectangle</span><span class="op" id="8104275">,</span>&nbsp;<span class="ident" id="8104277">src</span>&nbsp;<span class="ident" id="8104281">image</span><span class="op" id="8104286">.</span><span class="ident" id="8104287">Image</span><span class="op" id="8104292">,</span>&nbsp;<span class="ident" id="8104294">sp</span>&nbsp;<span class="ident" id="8104297">image</span><span class="op" id="8104302">.</span><span class="ident" id="8104303">Point</span><span class="op" id="8104308">,</span>&nbsp;<span class="ident" id="8104310">mask</span>&nbsp;<span class="ident" id="8104315">image</span><span class="op" id="8104320">.</span><span class="ident" id="8104321">Image</span><span class="op" id="8104326">,</span>&nbsp;<span class="ident" id="8104328">mp</span>&nbsp;<span class="ident" id="8104331">image</span><span class="op" id="8104336">.</span><span class="ident" id="8104337">Point</span><span class="op" id="8104342">,</span>&nbsp;<span class="ident" id="8104344">op</span>&nbsp;<span class="ident" id="8104347">Op</span><span class="op" id="8104349">)</span>&nbsp;<span class="ident" id="8104351">image</span><span class="op" id="8104356">.</span><span class="ident" id="8104357">Image</span>&nbsp;<span class="op" id="8104363">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8104366">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8104441">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104511">b</span>&nbsp;<span class="op" id="8104513">:=</span>&nbsp;<span class="ident" id="8104516">dst</span><span class="op" id="8104519">.</span><span class="ident" id="8104520">Bounds</span><span class="op" id="8104526">(</span><span class="op" id="8104527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104530">sb</span>&nbsp;<span class="op" id="8104533">:=</span>&nbsp;<span class="ident" id="8104536">src</span><span class="op" id="8104539">.</span><span class="ident" id="8104540">Bounds</span><span class="op" id="8104546">(</span><span class="op" id="8104547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104550">mb</span>&nbsp;<span class="op" id="8104553">:=</span>&nbsp;<span class="ident" id="8104556">image</span><span class="op" id="8104561">.</span><span class="ident" id="8104562">Rect</span><span class="op" id="8104566">(</span><span class="op" id="8104567">-</span><span class="num" id="8104568">1e9</span><span class="op" id="8104571">,</span>&nbsp;<span class="op" id="8104573">-</span><span class="num" id="8104574">1e9</span><span class="op" id="8104577">,</span>&nbsp;<span class="num" id="8104579">1e9</span><span class="op" id="8104582">,</span>&nbsp;<span class="num" id="8104584">1e9</span><span class="op" id="8104587">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104590">if</span>&nbsp;<span class="ident" id="8104593">mask</span>&nbsp;<span class="op" id="8104598">!=</span>&nbsp;<span class="builtintype" id="8104601">nil</span>&nbsp;<span class="op" id="8104605">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104609">mb</span>&nbsp;<span class="op" id="8104612">=</span>&nbsp;<span class="ident" id="8104614">mask</span><span class="op" id="8104618">.</span><span class="ident" id="8104619">Bounds</span><span class="op" id="8104625">(</span><span class="op" id="8104626">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104629">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104632">golden</span>&nbsp;<span class="op" id="8104639">:=</span>&nbsp;<span class="ident" id="8104642">image</span><span class="op" id="8104647">.</span><span class="ident" id="8104648">NewRGBA</span><span class="op" id="8104655">(</span><span class="ident" id="8104656">image</span><span class="op" id="8104661">.</span><span class="ident" id="8104662">Rect</span><span class="op" id="8104666">(</span><span class="num" id="8104667">0</span><span class="op" id="8104668">,</span>&nbsp;<span class="num" id="8104670">0</span><span class="op" id="8104671">,</span>&nbsp;<span class="ident" id="8104673">b</span><span class="op" id="8104674">.</span><span class="ident" id="8104675">Max</span><span class="op" id="8104678">.</span><span class="ident" id="8104679">X</span><span class="op" id="8104680">,</span>&nbsp;<span class="ident" id="8104682">b</span><span class="op" id="8104683">.</span><span class="ident" id="8104684">Max</span><span class="op" id="8104687">.</span><span class="ident" id="8104688">Y</span><span class="op" id="8104689">)</span><span class="op" id="8104690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104693">for</span>&nbsp;<span class="ident" id="8104697">y</span>&nbsp;<span class="op" id="8104699">:=</span>&nbsp;<span class="ident" id="8104702">r</span><span class="op" id="8104703">.</span><span class="ident" id="8104704">Min</span><span class="op" id="8104707">.</span><span class="ident" id="8104708">Y</span><span class="op" id="8104709">;</span>&nbsp;<span class="ident" id="8104711">y</span>&nbsp;<span class="op" id="8104713">&lt;</span>&nbsp;<span class="ident" id="8104715">r</span><span class="op" id="8104716">.</span><span class="ident" id="8104717">Max</span><span class="op" id="8104720">.</span><span class="ident" id="8104721">Y</span><span class="op" id="8104722">;</span>&nbsp;<span class="ident" id="8104724">y</span><span class="op" id="8104725">++</span>&nbsp;<span class="op" id="8104728">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104732">sy</span>&nbsp;<span class="op" id="8104735">:=</span>&nbsp;<span class="ident" id="8104738">y</span>&nbsp;<span class="op" id="8104740">+</span>&nbsp;<span class="ident" id="8104742">sp</span><span class="op" id="8104744">.</span><span class="ident" id="8104745">Y</span>&nbsp;<span class="op" id="8104747">-</span>&nbsp;<span class="ident" id="8104749">r</span><span class="op" id="8104750">.</span><span class="ident" id="8104751">Min</span><span class="op" id="8104754">.</span><span class="ident" id="8104755">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104759">my</span>&nbsp;<span class="op" id="8104762">:=</span>&nbsp;<span class="ident" id="8104765">y</span>&nbsp;<span class="op" id="8104767">+</span>&nbsp;<span class="ident" id="8104769">mp</span><span class="op" id="8104771">.</span><span class="ident" id="8104772">Y</span>&nbsp;<span class="op" id="8104774">-</span>&nbsp;<span class="ident" id="8104776">r</span><span class="op" id="8104777">.</span><span class="ident" id="8104778">Min</span><span class="op" id="8104781">.</span><span class="ident" id="8104782">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104786">for</span>&nbsp;<span class="ident" id="8104790">x</span>&nbsp;<span class="op" id="8104792">:=</span>&nbsp;<span class="ident" id="8104795">r</span><span class="op" id="8104796">.</span><span class="ident" id="8104797">Min</span><span class="op" id="8104800">.</span><span class="ident" id="8104801">X</span><span class="op" id="8104802">;</span>&nbsp;<span class="ident" id="8104804">x</span>&nbsp;<span class="op" id="8104806">&lt;</span>&nbsp;<span class="ident" id="8104808">r</span><span class="op" id="8104809">.</span><span class="ident" id="8104810">Max</span><span class="op" id="8104813">.</span><span class="ident" id="8104814">X</span><span class="op" id="8104815">;</span>&nbsp;<span class="ident" id="8104817">x</span><span class="op" id="8104818">++</span>&nbsp;<span class="op" id="8104821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104826">if</span>&nbsp;<span class="op" id="8104829">!</span><span class="op" id="8104830">(</span><span class="ident" id="8104831">image</span><span class="op" id="8104836">.</span><span class="ident" id="8104837">Pt</span><span class="op" id="8104839">(</span><span class="ident" id="8104840">x</span><span class="op" id="8104841">,</span>&nbsp;<span class="ident" id="8104843">y</span><span class="op" id="8104844">)</span><span class="op" id="8104845">.</span><span class="ident" id="8104846">In</span><span class="op" id="8104848">(</span><span class="ident" id="8104849">b</span><span class="op" id="8104850">)</span><span class="op" id="8104851">)</span>&nbsp;<span class="op" id="8104853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104859">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104876">sx</span>&nbsp;<span class="op" id="8104879">:=</span>&nbsp;<span class="ident" id="8104882">x</span>&nbsp;<span class="op" id="8104884">+</span>&nbsp;<span class="ident" id="8104886">sp</span><span class="op" id="8104888">.</span><span class="ident" id="8104889">X</span>&nbsp;<span class="op" id="8104891">-</span>&nbsp;<span class="ident" id="8104893">r</span><span class="op" id="8104894">.</span><span class="ident" id="8104895">Min</span><span class="op" id="8104898">.</span><span class="ident" id="8104899">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104904">if</span>&nbsp;<span class="op" id="8104907">!</span><span class="op" id="8104908">(</span><span class="ident" id="8104909">image</span><span class="op" id="8104914">.</span><span class="ident" id="8104915">Pt</span><span class="op" id="8104917">(</span><span class="ident" id="8104918">sx</span><span class="op" id="8104920">,</span>&nbsp;<span class="ident" id="8104922">sy</span><span class="op" id="8104924">)</span><span class="op" id="8104925">.</span><span class="ident" id="8104926">In</span><span class="op" id="8104928">(</span><span class="ident" id="8104929">sb</span><span class="op" id="8104931">)</span><span class="op" id="8104932">)</span>&nbsp;<span class="op" id="8104934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104940">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8104952">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8104957">mx</span>&nbsp;<span class="op" id="8104960">:=</span>&nbsp;<span class="ident" id="8104963">x</span>&nbsp;<span class="op" id="8104965">+</span>&nbsp;<span class="ident" id="8104967">mp</span><span class="op" id="8104969">.</span><span class="ident" id="8104970">X</span>&nbsp;<span class="op" id="8104972">-</span>&nbsp;<span class="ident" id="8104974">r</span><span class="op" id="8104975">.</span><span class="ident" id="8104976">Min</span><span class="op" id="8104979">.</span><span class="ident" id="8104980">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8104985">if</span>&nbsp;<span class="op" id="8104988">!</span><span class="op" id="8104989">(</span><span class="ident" id="8104990">image</span><span class="op" id="8104995">.</span><span class="ident" id="8104996">Pt</span><span class="op" id="8104998">(</span><span class="ident" id="8104999">mx</span><span class="op" id="8105001">,</span>&nbsp;<span class="ident" id="8105003">my</span><span class="op" id="8105005">)</span><span class="op" id="8105006">.</span><span class="ident" id="8105007">In</span><span class="op" id="8105009">(</span><span class="ident" id="8105010">mb</span><span class="op" id="8105012">)</span><span class="op" id="8105013">)</span>&nbsp;<span class="op" id="8105015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105021">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105039">const</span>&nbsp;<span class="ident" id="8105045">M</span>&nbsp;<span class="op" id="8105047">=</span>&nbsp;<span class="num" id="8105049">1</span><span class="op" id="8105050">&lt;&lt;</span><span class="num" id="8105052">16</span>&nbsp;<span class="op" id="8105055">-</span>&nbsp;<span class="num" id="8105057">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105062">var</span>&nbsp;<span class="ident" id="8105066">dr</span><span class="op" id="8105068">,</span>&nbsp;<span class="ident" id="8105070">dg</span><span class="op" id="8105072">,</span>&nbsp;<span class="ident" id="8105074">db</span><span class="op" id="8105076">,</span>&nbsp;<span class="ident" id="8105078">da</span>&nbsp;<span class="builtintype" id="8105081">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105091">if</span>&nbsp;<span class="ident" id="8105094">op</span>&nbsp;<span class="op" id="8105097">==</span>&nbsp;<span class="ident" id="8105100">Over</span>&nbsp;<span class="op" id="8105105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105111">dr</span><span class="op" id="8105113">,</span>&nbsp;<span class="ident" id="8105115">dg</span><span class="op" id="8105117">,</span>&nbsp;<span class="ident" id="8105119">db</span><span class="op" id="8105121">,</span>&nbsp;<span class="ident" id="8105123">da</span>&nbsp;<span class="op" id="8105126">=</span>&nbsp;<span class="ident" id="8105128">dst</span><span class="op" id="8105131">.</span><span class="ident" id="8105132">At</span><span class="op" id="8105134">(</span><span class="ident" id="8105135">x</span><span class="op" id="8105136">,</span>&nbsp;<span class="ident" id="8105138">y</span><span class="op" id="8105139">)</span><span class="op" id="8105140">.</span><span class="ident" id="8105141">RGBA</span><span class="op" id="8105145">(</span><span class="op" id="8105146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105151">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105156">sr</span><span class="op" id="8105158">,</span>&nbsp;<span class="ident" id="8105160">sg</span><span class="op" id="8105162">,</span>&nbsp;<span class="ident" id="8105164">sb</span><span class="op" id="8105166">,</span>&nbsp;<span class="ident" id="8105168">sa</span>&nbsp;<span class="op" id="8105171">:=</span>&nbsp;<span class="ident" id="8105174">src</span><span class="op" id="8105177">.</span><span class="ident" id="8105178">At</span><span class="op" id="8105180">(</span><span class="ident" id="8105181">sx</span><span class="op" id="8105183">,</span>&nbsp;<span class="ident" id="8105185">sy</span><span class="op" id="8105187">)</span><span class="op" id="8105188">.</span><span class="ident" id="8105189">RGBA</span><span class="op" id="8105193">(</span><span class="op" id="8105194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105199">ma</span>&nbsp;<span class="op" id="8105202">:=</span>&nbsp;<span class="builtintype" id="8105205">uint32</span><span class="op" id="8105211">(</span><span class="ident" id="8105212">M</span><span class="op" id="8105213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105218">if</span>&nbsp;<span class="ident" id="8105221">mask</span>&nbsp;<span class="op" id="8105226">!=</span>&nbsp;<span class="builtintype" id="8105229">nil</span>&nbsp;<span class="op" id="8105233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105239">_</span><span class="op" id="8105240">,</span>&nbsp;<span class="ident" id="8105242">_</span><span class="op" id="8105243">,</span>&nbsp;<span class="ident" id="8105245">_</span><span class="op" id="8105246">,</span>&nbsp;<span class="ident" id="8105248">ma</span>&nbsp;<span class="op" id="8105251">=</span>&nbsp;<span class="ident" id="8105253">mask</span><span class="op" id="8105257">.</span><span class="ident" id="8105258">At</span><span class="op" id="8105260">(</span><span class="ident" id="8105261">mx</span><span class="op" id="8105263">,</span>&nbsp;<span class="ident" id="8105265">my</span><span class="op" id="8105267">)</span><span class="op" id="8105268">.</span><span class="ident" id="8105269">RGBA</span><span class="op" id="8105273">(</span><span class="op" id="8105274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105279">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105284">a</span>&nbsp;<span class="op" id="8105286">:=</span>&nbsp;<span class="ident" id="8105289">M</span>&nbsp;<span class="op" id="8105291">-</span>&nbsp;<span class="op" id="8105293">(</span><span class="ident" id="8105294">sa</span>&nbsp;<span class="op" id="8105297">*</span>&nbsp;<span class="ident" id="8105299">ma</span>&nbsp;<span class="op" id="8105302">/</span>&nbsp;<span class="ident" id="8105304">M</span><span class="op" id="8105305">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105310">golden</span><span class="op" id="8105316">.</span><span class="ident" id="8105317">Set</span><span class="op" id="8105320">(</span><span class="ident" id="8105321">x</span><span class="op" id="8105322">,</span>&nbsp;<span class="ident" id="8105324">y</span><span class="op" id="8105325">,</span>&nbsp;<span class="ident" id="8105327">color</span><span class="op" id="8105332">.</span><span class="ident" id="8105333">RGBA64</span><span class="op" id="8105339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8105345">uint16</span><span class="op" id="8105351">(</span><span class="op" id="8105352">(</span><span class="ident" id="8105353">dr</span><span class="op" id="8105355">*</span><span class="ident" id="8105356">a</span>&nbsp;<span class="op" id="8105358">+</span>&nbsp;<span class="ident" id="8105360">sr</span><span class="op" id="8105362">*</span><span class="ident" id="8105363">ma</span><span class="op" id="8105365">)</span>&nbsp;<span class="op" id="8105367">/</span>&nbsp;<span class="ident" id="8105369">M</span><span class="op" id="8105370">)</span><span class="op" id="8105371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8105377">uint16</span><span class="op" id="8105383">(</span><span class="op" id="8105384">(</span><span class="ident" id="8105385">dg</span><span class="op" id="8105387">*</span><span class="ident" id="8105388">a</span>&nbsp;<span class="op" id="8105390">+</span>&nbsp;<span class="ident" id="8105392">sg</span><span class="op" id="8105394">*</span><span class="ident" id="8105395">ma</span><span class="op" id="8105397">)</span>&nbsp;<span class="op" id="8105399">/</span>&nbsp;<span class="ident" id="8105401">M</span><span class="op" id="8105402">)</span><span class="op" id="8105403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8105409">uint16</span><span class="op" id="8105415">(</span><span class="op" id="8105416">(</span><span class="ident" id="8105417">db</span><span class="op" id="8105419">*</span><span class="ident" id="8105420">a</span>&nbsp;<span class="op" id="8105422">+</span>&nbsp;<span class="ident" id="8105424">sb</span><span class="op" id="8105426">*</span><span class="ident" id="8105427">ma</span><span class="op" id="8105429">)</span>&nbsp;<span class="op" id="8105431">/</span>&nbsp;<span class="ident" id="8105433">M</span><span class="op" id="8105434">)</span><span class="op" id="8105435">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8105441">uint16</span><span class="op" id="8105447">(</span><span class="op" id="8105448">(</span><span class="ident" id="8105449">da</span><span class="op" id="8105451">*</span><span class="ident" id="8105452">a</span>&nbsp;<span class="op" id="8105454">+</span>&nbsp;<span class="ident" id="8105456">sa</span><span class="op" id="8105458">*</span><span class="ident" id="8105459">ma</span><span class="op" id="8105461">)</span>&nbsp;<span class="op" id="8105463">/</span>&nbsp;<span class="ident" id="8105465">M</span><span class="op" id="8105466">)</span><span class="op" id="8105467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105472">}</span><span class="op" id="8105473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105480">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105483">return</span>&nbsp;<span class="ident" id="8105490">golden</span><span class="op" id="8105496">.</span><span class="ident" id="8105497">SubImage</span><span class="op" id="8105505">(</span><span class="ident" id="8105506">b</span><span class="op" id="8105507">)</span><br>
<span class="lineno">205</span><span class="op" id="8105509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8105512">func</span>&nbsp;<span class="ident" id="8105517">TestDraw</span><span class="op" id="8105525">(</span><span class="ident" id="8105526">t</span>&nbsp;<span class="op" id="8105528">*</span><span class="ident" id="8105529">testing</span><span class="op" id="8105536">.</span><span class="ident" id="8105537">T</span><span class="op" id="8105538">)</span>&nbsp;<span class="op" id="8105540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105543">rr</span>&nbsp;<span class="op" id="8105546">:=</span>&nbsp;<span class="op" id="8105549">[</span><span class="op" id="8105550">]</span><span class="ident" id="8105551">image</span><span class="op" id="8105556">.</span><span class="ident" id="8105557">Rectangle</span><span class="op" id="8105566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105570">image</span><span class="op" id="8105575">.</span><span class="ident" id="8105576">Rect</span><span class="op" id="8105580">(</span><span class="num" id="8105581">0</span><span class="op" id="8105582">,</span>&nbsp;<span class="num" id="8105584">0</span><span class="op" id="8105585">,</span>&nbsp;<span class="num" id="8105587">0</span><span class="op" id="8105588">,</span>&nbsp;<span class="num" id="8105590">0</span><span class="op" id="8105591">)</span><span class="op" id="8105592">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105596">image</span><span class="op" id="8105601">.</span><span class="ident" id="8105602">Rect</span><span class="op" id="8105606">(</span><span class="num" id="8105607">0</span><span class="op" id="8105608">,</span>&nbsp;<span class="num" id="8105610">0</span><span class="op" id="8105611">,</span>&nbsp;<span class="num" id="8105613">16</span><span class="op" id="8105615">,</span>&nbsp;<span class="num" id="8105617">16</span><span class="op" id="8105619">)</span><span class="op" id="8105620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105624">image</span><span class="op" id="8105629">.</span><span class="ident" id="8105630">Rect</span><span class="op" id="8105634">(</span><span class="num" id="8105635">3</span><span class="op" id="8105636">,</span>&nbsp;<span class="num" id="8105638">5</span><span class="op" id="8105639">,</span>&nbsp;<span class="num" id="8105641">12</span><span class="op" id="8105643">,</span>&nbsp;<span class="num" id="8105645">10</span><span class="op" id="8105647">)</span><span class="op" id="8105648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105652">image</span><span class="op" id="8105657">.</span><span class="ident" id="8105658">Rect</span><span class="op" id="8105662">(</span><span class="num" id="8105663">0</span><span class="op" id="8105664">,</span>&nbsp;<span class="num" id="8105666">0</span><span class="op" id="8105667">,</span>&nbsp;<span class="num" id="8105669">9</span><span class="op" id="8105670">,</span>&nbsp;<span class="num" id="8105672">9</span><span class="op" id="8105673">)</span><span class="op" id="8105674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105678">image</span><span class="op" id="8105683">.</span><span class="ident" id="8105684">Rect</span><span class="op" id="8105688">(</span><span class="num" id="8105689">8</span><span class="op" id="8105690">,</span>&nbsp;<span class="num" id="8105692">8</span><span class="op" id="8105693">,</span>&nbsp;<span class="num" id="8105695">16</span><span class="op" id="8105697">,</span>&nbsp;<span class="num" id="8105699">16</span><span class="op" id="8105701">)</span><span class="op" id="8105702">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105706">image</span><span class="op" id="8105711">.</span><span class="ident" id="8105712">Rect</span><span class="op" id="8105716">(</span><span class="num" id="8105717">8</span><span class="op" id="8105718">,</span>&nbsp;<span class="num" id="8105720">0</span><span class="op" id="8105721">,</span>&nbsp;<span class="num" id="8105723">9</span><span class="op" id="8105724">,</span>&nbsp;<span class="num" id="8105726">16</span><span class="op" id="8105728">)</span><span class="op" id="8105729">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105733">image</span><span class="op" id="8105738">.</span><span class="ident" id="8105739">Rect</span><span class="op" id="8105743">(</span><span class="num" id="8105744">0</span><span class="op" id="8105745">,</span>&nbsp;<span class="num" id="8105747">8</span><span class="op" id="8105748">,</span>&nbsp;<span class="num" id="8105750">16</span><span class="op" id="8105752">,</span>&nbsp;<span class="num" id="8105754">9</span><span class="op" id="8105755">)</span><span class="op" id="8105756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105760">image</span><span class="op" id="8105765">.</span><span class="ident" id="8105766">Rect</span><span class="op" id="8105770">(</span><span class="num" id="8105771">8</span><span class="op" id="8105772">,</span>&nbsp;<span class="num" id="8105774">8</span><span class="op" id="8105775">,</span>&nbsp;<span class="num" id="8105777">9</span><span class="op" id="8105778">,</span>&nbsp;<span class="num" id="8105780">9</span><span class="op" id="8105781">)</span><span class="op" id="8105782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105786">image</span><span class="op" id="8105791">.</span><span class="ident" id="8105792">Rect</span><span class="op" id="8105796">(</span><span class="num" id="8105797">8</span><span class="op" id="8105798">,</span>&nbsp;<span class="num" id="8105800">8</span><span class="op" id="8105801">,</span>&nbsp;<span class="num" id="8105803">8</span><span class="op" id="8105804">,</span>&nbsp;<span class="num" id="8105806">8</span><span class="op" id="8105807">)</span><span class="op" id="8105808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8105811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105814">for</span>&nbsp;<span class="ident" id="8105818">_</span><span class="op" id="8105819">,</span>&nbsp;<span class="ident" id="8105821">r</span>&nbsp;<span class="op" id="8105823">:=</span>&nbsp;<span class="keyword" id="8105826">range</span>&nbsp;<span class="ident" id="8105832">rr</span>&nbsp;<span class="op" id="8105835">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105838">loop</span><span class="op" id="8105842">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8105846">for</span>&nbsp;<span class="ident" id="8105850">_</span><span class="op" id="8105851">,</span>&nbsp;<span class="ident" id="8105853">test</span>&nbsp;<span class="op" id="8105858">:=</span>&nbsp;<span class="keyword" id="8105861">range</span>&nbsp;<span class="ident" id="8105867">drawTests</span>&nbsp;<span class="op" id="8105877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8105882">dst</span>&nbsp;<span class="op" id="8105886">:=</span>&nbsp;<span class="ident" id="8105889">hgradRed</span><span class="op" id="8105897">(</span><span class="num" id="8105898">255</span><span class="op" id="8105901">)</span><span class="op" id="8105902">.</span><span class="op" id="8105903">(</span><span class="op" id="8105904">*</span><span class="ident" id="8105905">image</span><span class="op" id="8105910">.</span><span class="ident" id="8105911">RGBA</span><span class="op" id="8105915">)</span><span class="op" id="8105916">.</span><span class="ident" id="8105917">SubImage</span><span class="op" id="8105925">(</span><span class="ident" id="8105926">r</span><span class="op" id="8105927">)</span><span class="op" id="8105928">.</span><span class="op" id="8105929">(</span><span class="ident" id="8105930">Image</span><span class="op" id="8105935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8105940">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8106041">golden</span>&nbsp;<span class="op" id="8106048">:=</span>&nbsp;<span class="ident" id="8106051">makeGolden</span><span class="op" id="8106061">(</span><span class="ident" id="8106062">dst</span><span class="op" id="8106065">,</span>&nbsp;<span class="ident" id="8106067">image</span><span class="op" id="8106072">.</span><span class="ident" id="8106073">Rect</span><span class="op" id="8106077">(</span><span class="num" id="8106078">0</span><span class="op" id="8106079">,</span>&nbsp;<span class="num" id="8106081">0</span><span class="op" id="8106082">,</span>&nbsp;<span class="num" id="8106084">16</span><span class="op" id="8106086">,</span>&nbsp;<span class="num" id="8106088">16</span><span class="op" id="8106090">)</span><span class="op" id="8106091">,</span>&nbsp;<span class="ident" id="8106093">test</span><span class="op" id="8106097">.</span><span class="ident" id="8106098">src</span><span class="op" id="8106101">,</span>&nbsp;<span class="ident" id="8106103">image</span><span class="op" id="8106108">.</span><span class="ident" id="8106109">ZP</span><span class="op" id="8106111">,</span>&nbsp;<span class="ident" id="8106113">test</span><span class="op" id="8106117">.</span><span class="ident" id="8106118">mask</span><span class="op" id="8106122">,</span>&nbsp;<span class="ident" id="8106124">image</span><span class="op" id="8106129">.</span><span class="ident" id="8106130">ZP</span><span class="op" id="8106132">,</span>&nbsp;<span class="ident" id="8106134">test</span><span class="op" id="8106138">.</span><span class="ident" id="8106139">op</span><span class="op" id="8106141">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8106146">b</span>&nbsp;<span class="op" id="8106148">:=</span>&nbsp;<span class="ident" id="8106151">dst</span><span class="op" id="8106154">.</span><span class="ident" id="8106155">Bounds</span><span class="op" id="8106161">(</span><span class="op" id="8106162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106167">if</span>&nbsp;<span class="op" id="8106170">!</span><span class="ident" id="8106171">b</span><span class="op" id="8106172">.</span><span class="ident" id="8106173">Eq</span><span class="op" id="8106175">(</span><span class="ident" id="8106176">golden</span><span class="op" id="8106182">.</span><span class="ident" id="8106183">Bounds</span><span class="op" id="8106189">(</span><span class="op" id="8106190">)</span><span class="op" id="8106191">)</span>&nbsp;<span class="op" id="8106193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8106199">t</span><span class="op" id="8106200">.</span><span class="ident" id="8106201">Errorf</span><span class="op" id="8106207">(</span><span class="string" id="8106208">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8106241">,</span>&nbsp;<span class="ident" id="8106243">r</span><span class="op" id="8106244">,</span>&nbsp;<span class="ident" id="8106246">test</span><span class="op" id="8106250">.</span><span class="ident" id="8106251">desc</span><span class="op" id="8106255">,</span>&nbsp;<span class="ident" id="8106257">dst</span><span class="op" id="8106260">.</span><span class="ident" id="8106261">Bounds</span><span class="op" id="8106267">(</span><span class="op" id="8106268">)</span><span class="op" id="8106269">,</span>&nbsp;<span class="ident" id="8106271">golden</span><span class="op" id="8106277">.</span><span class="ident" id="8106278">Bounds</span><span class="op" id="8106284">(</span><span class="op" id="8106285">)</span><span class="op" id="8106286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106292">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8106304">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8106309">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8106406">DrawMask</span><span class="op" id="8106414">(</span><span class="ident" id="8106415">dst</span><span class="op" id="8106418">,</span>&nbsp;<span class="ident" id="8106420">image</span><span class="op" id="8106425">.</span><span class="ident" id="8106426">Rect</span><span class="op" id="8106430">(</span><span class="num" id="8106431">0</span><span class="op" id="8106432">,</span>&nbsp;<span class="num" id="8106434">0</span><span class="op" id="8106435">,</span>&nbsp;<span class="num" id="8106437">16</span><span class="op" id="8106439">,</span>&nbsp;<span class="num" id="8106441">16</span><span class="op" id="8106443">)</span><span class="op" id="8106444">,</span>&nbsp;<span class="ident" id="8106446">test</span><span class="op" id="8106450">.</span><span class="ident" id="8106451">src</span><span class="op" id="8106454">,</span>&nbsp;<span class="ident" id="8106456">image</span><span class="op" id="8106461">.</span><span class="ident" id="8106462">ZP</span><span class="op" id="8106464">,</span>&nbsp;<span class="ident" id="8106466">test</span><span class="op" id="8106470">.</span><span class="ident" id="8106471">mask</span><span class="op" id="8106475">,</span>&nbsp;<span class="ident" id="8106477">image</span><span class="op" id="8106482">.</span><span class="ident" id="8106483">ZP</span><span class="op" id="8106485">,</span>&nbsp;<span class="ident" id="8106487">test</span><span class="op" id="8106491">.</span><span class="ident" id="8106492">op</span><span class="op" id="8106494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106499">if</span>&nbsp;<span class="ident" id="8106502">image</span><span class="op" id="8106507">.</span><span class="ident" id="8106508">Pt</span><span class="op" id="8106510">(</span><span class="num" id="8106511">8</span><span class="op" id="8106512">,</span>&nbsp;<span class="num" id="8106514">8</span><span class="op" id="8106515">)</span><span class="op" id="8106516">.</span><span class="ident" id="8106517">In</span><span class="op" id="8106519">(</span><span class="ident" id="8106520">r</span><span class="op" id="8106521">)</span>&nbsp;<span class="op" id="8106523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8106529">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8106600">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106653">if</span>&nbsp;<span class="op" id="8106656">!</span><span class="ident" id="8106657">eq</span><span class="op" id="8106659">(</span><span class="ident" id="8106660">dst</span><span class="op" id="8106663">.</span><span class="ident" id="8106664">At</span><span class="op" id="8106666">(</span><span class="num" id="8106667">8</span><span class="op" id="8106668">,</span>&nbsp;<span class="num" id="8106670">8</span><span class="op" id="8106671">)</span><span class="op" id="8106672">,</span>&nbsp;<span class="ident" id="8106674">test</span><span class="op" id="8106678">.</span><span class="ident" id="8106679">expected</span><span class="op" id="8106687">)</span>&nbsp;<span class="op" id="8106689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8106696">t</span><span class="op" id="8106697">.</span><span class="ident" id="8106698">Errorf</span><span class="op" id="8106704">(</span><span class="string" id="8106705">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8106741">,</span>&nbsp;<span class="ident" id="8106743">r</span><span class="op" id="8106744">,</span>&nbsp;<span class="ident" id="8106746">test</span><span class="op" id="8106750">.</span><span class="ident" id="8106751">desc</span><span class="op" id="8106755">,</span>&nbsp;<span class="ident" id="8106757">dst</span><span class="op" id="8106760">.</span><span class="ident" id="8106761">At</span><span class="op" id="8106763">(</span><span class="num" id="8106764">8</span><span class="op" id="8106765">,</span>&nbsp;<span class="num" id="8106767">8</span><span class="op" id="8106768">)</span><span class="op" id="8106769">,</span>&nbsp;<span class="ident" id="8106771">test</span><span class="op" id="8106775">.</span><span class="ident" id="8106776">expected</span><span class="op" id="8106784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8106804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8106809">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8106814">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106882">for</span>&nbsp;<span class="ident" id="8106886">y</span>&nbsp;<span class="op" id="8106888">:=</span>&nbsp;<span class="ident" id="8106891">b</span><span class="op" id="8106892">.</span><span class="ident" id="8106893">Min</span><span class="op" id="8106896">.</span><span class="ident" id="8106897">Y</span><span class="op" id="8106898">;</span>&nbsp;<span class="ident" id="8106900">y</span>&nbsp;<span class="op" id="8106902">&lt;</span>&nbsp;<span class="ident" id="8106904">b</span><span class="op" id="8106905">.</span><span class="ident" id="8106906">Max</span><span class="op" id="8106909">.</span><span class="ident" id="8106910">Y</span><span class="op" id="8106911">;</span>&nbsp;<span class="ident" id="8106913">y</span><span class="op" id="8106914">++</span>&nbsp;<span class="op" id="8106917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106923">for</span>&nbsp;<span class="ident" id="8106927">x</span>&nbsp;<span class="op" id="8106929">:=</span>&nbsp;<span class="ident" id="8106932">b</span><span class="op" id="8106933">.</span><span class="ident" id="8106934">Min</span><span class="op" id="8106937">.</span><span class="ident" id="8106938">X</span><span class="op" id="8106939">;</span>&nbsp;<span class="ident" id="8106941">x</span>&nbsp;<span class="op" id="8106943">&lt;</span>&nbsp;<span class="ident" id="8106945">b</span><span class="op" id="8106946">.</span><span class="ident" id="8106947">Max</span><span class="op" id="8106950">.</span><span class="ident" id="8106951">X</span><span class="op" id="8106952">;</span>&nbsp;<span class="ident" id="8106954">x</span><span class="op" id="8106955">++</span>&nbsp;<span class="op" id="8106958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8106965">if</span>&nbsp;<span class="op" id="8106968">!</span><span class="ident" id="8106969">eq</span><span class="op" id="8106971">(</span><span class="ident" id="8106972">dst</span><span class="op" id="8106975">.</span><span class="ident" id="8106976">At</span><span class="op" id="8106978">(</span><span class="ident" id="8106979">x</span><span class="op" id="8106980">,</span>&nbsp;<span class="ident" id="8106982">y</span><span class="op" id="8106983">)</span><span class="op" id="8106984">,</span>&nbsp;<span class="ident" id="8106986">golden</span><span class="op" id="8106992">.</span><span class="ident" id="8106993">At</span><span class="op" id="8106995">(</span><span class="ident" id="8106996">x</span><span class="op" id="8106997">,</span>&nbsp;<span class="ident" id="8106999">y</span><span class="op" id="8107000">)</span><span class="op" id="8107001">)</span>&nbsp;<span class="op" id="8107003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107011">t</span><span class="op" id="8107012">.</span><span class="ident" id="8107013">Errorf</span><span class="op" id="8107019">(</span><span class="string" id="8107020">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8107066">,</span>&nbsp;<span class="ident" id="8107068">r</span><span class="op" id="8107069">,</span>&nbsp;<span class="ident" id="8107071">test</span><span class="op" id="8107075">.</span><span class="ident" id="8107076">desc</span><span class="op" id="8107080">,</span>&nbsp;<span class="ident" id="8107082">x</span><span class="op" id="8107083">,</span>&nbsp;<span class="ident" id="8107085">y</span><span class="op" id="8107086">,</span>&nbsp;<span class="ident" id="8107088">dst</span><span class="op" id="8107091">.</span><span class="ident" id="8107092">At</span><span class="op" id="8107094">(</span><span class="ident" id="8107095">x</span><span class="op" id="8107096">,</span>&nbsp;<span class="ident" id="8107098">y</span><span class="op" id="8107099">)</span><span class="op" id="8107100">,</span>&nbsp;<span class="ident" id="8107102">golden</span><span class="op" id="8107108">.</span><span class="ident" id="8107109">At</span><span class="op" id="8107111">(</span><span class="ident" id="8107112">x</span><span class="op" id="8107113">,</span>&nbsp;<span class="ident" id="8107115">y</span><span class="op" id="8107116">)</span><span class="op" id="8107117">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107125">continue</span>&nbsp;<span class="ident" id="8107134">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107159">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107162">}</span><br>
<span class="lineno"></span><span class="op" id="8107164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8107167">func</span>&nbsp;<span class="ident" id="8107172">TestDrawOverlap</span><span class="op" id="8107187">(</span><span class="ident" id="8107188">t</span>&nbsp;<span class="op" id="8107190">*</span><span class="ident" id="8107191">testing</span><span class="op" id="8107198">.</span><span class="ident" id="8107199">T</span><span class="op" id="8107200">)</span>&nbsp;<span class="op" id="8107202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107205">for</span>&nbsp;<span class="ident" id="8107209">_</span><span class="op" id="8107210">,</span>&nbsp;<span class="ident" id="8107212">op</span>&nbsp;<span class="op" id="8107215">:=</span>&nbsp;<span class="keyword" id="8107218">range</span>&nbsp;<span class="op" id="8107224">[</span><span class="op" id="8107225">]</span><span class="ident" id="8107226">Op</span><span class="op" id="8107228">{</span><span class="ident" id="8107229">Over</span><span class="op" id="8107233">,</span>&nbsp;<span class="ident" id="8107235">Src</span><span class="op" id="8107238">}</span>&nbsp;<span class="op" id="8107240">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107244">for</span>&nbsp;<span class="ident" id="8107248">yoff</span>&nbsp;<span class="op" id="8107253">:=</span>&nbsp;<span class="op" id="8107256">-</span><span class="num" id="8107257">2</span><span class="op" id="8107258">;</span>&nbsp;<span class="ident" id="8107260">yoff</span>&nbsp;<span class="op" id="8107265">&lt;=</span>&nbsp;<span class="num" id="8107268">2</span><span class="op" id="8107269">;</span>&nbsp;<span class="ident" id="8107271">yoff</span><span class="op" id="8107275">++</span>&nbsp;<span class="op" id="8107278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107282">loop</span><span class="op" id="8107286">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107291">for</span>&nbsp;<span class="ident" id="8107295">xoff</span>&nbsp;<span class="op" id="8107300">:=</span>&nbsp;<span class="op" id="8107303">-</span><span class="num" id="8107304">2</span><span class="op" id="8107305">;</span>&nbsp;<span class="ident" id="8107307">xoff</span>&nbsp;<span class="op" id="8107312">&lt;=</span>&nbsp;<span class="num" id="8107315">2</span><span class="op" id="8107316">;</span>&nbsp;<span class="ident" id="8107318">xoff</span><span class="op" id="8107322">++</span>&nbsp;<span class="op" id="8107325">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107331">m</span>&nbsp;<span class="op" id="8107333">:=</span>&nbsp;<span class="ident" id="8107336">gradYellow</span><span class="op" id="8107346">(</span><span class="num" id="8107347">127</span><span class="op" id="8107350">)</span><span class="op" id="8107351">.</span><span class="op" id="8107352">(</span><span class="op" id="8107353">*</span><span class="ident" id="8107354">image</span><span class="op" id="8107359">.</span><span class="ident" id="8107360">RGBA</span><span class="op" id="8107364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107370">dst</span>&nbsp;<span class="op" id="8107374">:=</span>&nbsp;<span class="ident" id="8107377">m</span><span class="op" id="8107378">.</span><span class="ident" id="8107379">SubImage</span><span class="op" id="8107387">(</span><span class="ident" id="8107388">image</span><span class="op" id="8107393">.</span><span class="ident" id="8107394">Rect</span><span class="op" id="8107398">(</span><span class="num" id="8107399">5</span><span class="op" id="8107400">,</span>&nbsp;<span class="num" id="8107402">5</span><span class="op" id="8107403">,</span>&nbsp;<span class="num" id="8107405">10</span><span class="op" id="8107407">,</span>&nbsp;<span class="num" id="8107409">10</span><span class="op" id="8107411">)</span><span class="op" id="8107412">)</span><span class="op" id="8107413">.</span><span class="op" id="8107414">(</span><span class="op" id="8107415">*</span><span class="ident" id="8107416">image</span><span class="op" id="8107421">.</span><span class="ident" id="8107422">RGBA</span><span class="op" id="8107426">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107432">src</span>&nbsp;<span class="op" id="8107436">:=</span>&nbsp;<span class="ident" id="8107439">m</span><span class="op" id="8107440">.</span><span class="ident" id="8107441">SubImage</span><span class="op" id="8107449">(</span><span class="ident" id="8107450">image</span><span class="op" id="8107455">.</span><span class="ident" id="8107456">Rect</span><span class="op" id="8107460">(</span><span class="num" id="8107461">5</span><span class="op" id="8107462">+</span><span class="ident" id="8107463">xoff</span><span class="op" id="8107467">,</span>&nbsp;<span class="num" id="8107469">5</span><span class="op" id="8107470">+</span><span class="ident" id="8107471">yoff</span><span class="op" id="8107475">,</span>&nbsp;<span class="num" id="8107477">10</span><span class="op" id="8107479">+</span><span class="ident" id="8107480">xoff</span><span class="op" id="8107484">,</span>&nbsp;<span class="num" id="8107486">10</span><span class="op" id="8107488">+</span><span class="ident" id="8107489">yoff</span><span class="op" id="8107493">)</span><span class="op" id="8107494">)</span><span class="op" id="8107495">.</span><span class="op" id="8107496">(</span><span class="op" id="8107497">*</span><span class="ident" id="8107498">image</span><span class="op" id="8107503">.</span><span class="ident" id="8107504">RGBA</span><span class="op" id="8107508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107514">b</span>&nbsp;<span class="op" id="8107516">:=</span>&nbsp;<span class="ident" id="8107519">dst</span><span class="op" id="8107522">.</span><span class="ident" id="8107523">Bounds</span><span class="op" id="8107529">(</span><span class="op" id="8107530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8107536">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107638">golden</span>&nbsp;<span class="op" id="8107645">:=</span>&nbsp;<span class="ident" id="8107648">makeGolden</span><span class="op" id="8107658">(</span><span class="ident" id="8107659">dst</span><span class="op" id="8107662">,</span>&nbsp;<span class="ident" id="8107664">b</span><span class="op" id="8107665">,</span>&nbsp;<span class="ident" id="8107667">src</span><span class="op" id="8107670">,</span>&nbsp;<span class="ident" id="8107672">src</span><span class="op" id="8107675">.</span><span class="ident" id="8107676">Bounds</span><span class="op" id="8107682">(</span><span class="op" id="8107683">)</span><span class="op" id="8107684">.</span><span class="ident" id="8107685">Min</span><span class="op" id="8107688">,</span>&nbsp;<span class="builtintype" id="8107690">nil</span><span class="op" id="8107693">,</span>&nbsp;<span class="ident" id="8107695">image</span><span class="op" id="8107700">.</span><span class="ident" id="8107701">ZP</span><span class="op" id="8107703">,</span>&nbsp;<span class="ident" id="8107705">op</span><span class="op" id="8107707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107713">if</span>&nbsp;<span class="op" id="8107716">!</span><span class="ident" id="8107717">b</span><span class="op" id="8107718">.</span><span class="ident" id="8107719">Eq</span><span class="op" id="8107721">(</span><span class="ident" id="8107722">golden</span><span class="op" id="8107728">.</span><span class="ident" id="8107729">Bounds</span><span class="op" id="8107735">(</span><span class="op" id="8107736">)</span><span class="op" id="8107737">)</span>&nbsp;<span class="op" id="8107739">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107746">t</span><span class="op" id="8107747">.</span><span class="ident" id="8107748">Errorf</span><span class="op" id="8107754">(</span><span class="string" id="8107755">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8107805">,</span>&nbsp;<span class="ident" id="8107807">xoff</span><span class="op" id="8107811">,</span>&nbsp;<span class="ident" id="8107813">yoff</span><span class="op" id="8107817">,</span>&nbsp;<span class="ident" id="8107819">dst</span><span class="op" id="8107822">.</span><span class="ident" id="8107823">Bounds</span><span class="op" id="8107829">(</span><span class="op" id="8107830">)</span><span class="op" id="8107831">,</span>&nbsp;<span class="ident" id="8107833">golden</span><span class="op" id="8107839">.</span><span class="ident" id="8107840">Bounds</span><span class="op" id="8107846">(</span><span class="op" id="8107847">)</span><span class="op" id="8107848">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8107855">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8107868">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8107874">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8107972">DrawMask</span><span class="op" id="8107980">(</span><span class="ident" id="8107981">dst</span><span class="op" id="8107984">,</span>&nbsp;<span class="ident" id="8107986">b</span><span class="op" id="8107987">,</span>&nbsp;<span class="ident" id="8107989">src</span><span class="op" id="8107992">,</span>&nbsp;<span class="ident" id="8107994">src</span><span class="op" id="8107997">.</span><span class="ident" id="8107998">Bounds</span><span class="op" id="8108004">(</span><span class="op" id="8108005">)</span><span class="op" id="8108006">.</span><span class="ident" id="8108007">Min</span><span class="op" id="8108010">,</span>&nbsp;<span class="builtintype" id="8108012">nil</span><span class="op" id="8108015">,</span>&nbsp;<span class="ident" id="8108017">image</span><span class="op" id="8108022">.</span><span class="ident" id="8108023">ZP</span><span class="op" id="8108025">,</span>&nbsp;<span class="ident" id="8108027">op</span><span class="op" id="8108029">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8108035">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108104">for</span>&nbsp;<span class="ident" id="8108108">y</span>&nbsp;<span class="op" id="8108110">:=</span>&nbsp;<span class="ident" id="8108113">b</span><span class="op" id="8108114">.</span><span class="ident" id="8108115">Min</span><span class="op" id="8108118">.</span><span class="ident" id="8108119">Y</span><span class="op" id="8108120">;</span>&nbsp;<span class="ident" id="8108122">y</span>&nbsp;<span class="op" id="8108124">&lt;</span>&nbsp;<span class="ident" id="8108126">b</span><span class="op" id="8108127">.</span><span class="ident" id="8108128">Max</span><span class="op" id="8108131">.</span><span class="ident" id="8108132">Y</span><span class="op" id="8108133">;</span>&nbsp;<span class="ident" id="8108135">y</span><span class="op" id="8108136">++</span>&nbsp;<span class="op" id="8108139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108146">for</span>&nbsp;<span class="ident" id="8108150">x</span>&nbsp;<span class="op" id="8108152">:=</span>&nbsp;<span class="ident" id="8108155">b</span><span class="op" id="8108156">.</span><span class="ident" id="8108157">Min</span><span class="op" id="8108160">.</span><span class="ident" id="8108161">X</span><span class="op" id="8108162">;</span>&nbsp;<span class="ident" id="8108164">x</span>&nbsp;<span class="op" id="8108166">&lt;</span>&nbsp;<span class="ident" id="8108168">b</span><span class="op" id="8108169">.</span><span class="ident" id="8108170">Max</span><span class="op" id="8108173">.</span><span class="ident" id="8108174">X</span><span class="op" id="8108175">;</span>&nbsp;<span class="ident" id="8108177">x</span><span class="op" id="8108178">++</span>&nbsp;<span class="op" id="8108181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108189">if</span>&nbsp;<span class="op" id="8108192">!</span><span class="ident" id="8108193">eq</span><span class="op" id="8108195">(</span><span class="ident" id="8108196">dst</span><span class="op" id="8108199">.</span><span class="ident" id="8108200">At</span><span class="op" id="8108202">(</span><span class="ident" id="8108203">x</span><span class="op" id="8108204">,</span>&nbsp;<span class="ident" id="8108206">y</span><span class="op" id="8108207">)</span><span class="op" id="8108208">,</span>&nbsp;<span class="ident" id="8108210">golden</span><span class="op" id="8108216">.</span><span class="ident" id="8108217">At</span><span class="op" id="8108219">(</span><span class="ident" id="8108220">x</span><span class="op" id="8108221">,</span>&nbsp;<span class="ident" id="8108223">y</span><span class="op" id="8108224">)</span><span class="op" id="8108225">)</span>&nbsp;<span class="op" id="8108227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108236">t</span><span class="op" id="8108237">.</span><span class="ident" id="8108238">Errorf</span><span class="op" id="8108244">(</span><span class="string" id="8108245">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="8108308">,</span>&nbsp;<span class="ident" id="8108310">xoff</span><span class="op" id="8108314">,</span>&nbsp;<span class="ident" id="8108316">yoff</span><span class="op" id="8108320">,</span>&nbsp;<span class="ident" id="8108322">x</span><span class="op" id="8108323">,</span>&nbsp;<span class="ident" id="8108325">y</span><span class="op" id="8108326">,</span>&nbsp;<span class="ident" id="8108328">dst</span><span class="op" id="8108331">.</span><span class="ident" id="8108332">At</span><span class="op" id="8108334">(</span><span class="ident" id="8108335">x</span><span class="op" id="8108336">,</span>&nbsp;<span class="ident" id="8108338">y</span><span class="op" id="8108339">)</span><span class="op" id="8108340">,</span>&nbsp;<span class="ident" id="8108342">golden</span><span class="op" id="8108348">.</span><span class="ident" id="8108349">At</span><span class="op" id="8108351">(</span><span class="ident" id="8108352">x</span><span class="op" id="8108353">,</span>&nbsp;<span class="ident" id="8108355">y</span><span class="op" id="8108356">)</span><span class="op" id="8108357">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108366">continue</span>&nbsp;<span class="ident" id="8108375">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108404">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108408">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108411">}</span><br>
<span class="lineno"></span><span class="op" id="8108413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8108416">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="8108488">func</span>&nbsp;<span class="ident" id="8108493">TestNonZeroSrcPt</span><span class="op" id="8108509">(</span><span class="ident" id="8108510">t</span>&nbsp;<span class="op" id="8108512">*</span><span class="ident" id="8108513">testing</span><span class="op" id="8108520">.</span><span class="ident" id="8108521">T</span><span class="op" id="8108522">)</span>&nbsp;<span class="op" id="8108524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108527">a</span>&nbsp;<span class="op" id="8108529">:=</span>&nbsp;<span class="ident" id="8108532">image</span><span class="op" id="8108537">.</span><span class="ident" id="8108538">NewRGBA</span><span class="op" id="8108545">(</span><span class="ident" id="8108546">image</span><span class="op" id="8108551">.</span><span class="ident" id="8108552">Rect</span><span class="op" id="8108556">(</span><span class="num" id="8108557">0</span><span class="op" id="8108558">,</span>&nbsp;<span class="num" id="8108560">0</span><span class="op" id="8108561">,</span>&nbsp;<span class="num" id="8108563">1</span><span class="op" id="8108564">,</span>&nbsp;<span class="num" id="8108566">1</span><span class="op" id="8108567">)</span><span class="op" id="8108568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108571">b</span>&nbsp;<span class="op" id="8108573">:=</span>&nbsp;<span class="ident" id="8108576">image</span><span class="op" id="8108581">.</span><span class="ident" id="8108582">NewRGBA</span><span class="op" id="8108589">(</span><span class="ident" id="8108590">image</span><span class="op" id="8108595">.</span><span class="ident" id="8108596">Rect</span><span class="op" id="8108600">(</span><span class="num" id="8108601">0</span><span class="op" id="8108602">,</span>&nbsp;<span class="num" id="8108604">0</span><span class="op" id="8108605">,</span>&nbsp;<span class="num" id="8108607">2</span><span class="op" id="8108608">,</span>&nbsp;<span class="num" id="8108610">2</span><span class="op" id="8108611">)</span><span class="op" id="8108612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108615">b</span><span class="op" id="8108616">.</span><span class="ident" id="8108617">Set</span><span class="op" id="8108620">(</span><span class="num" id="8108621">0</span><span class="op" id="8108622">,</span>&nbsp;<span class="num" id="8108624">0</span><span class="op" id="8108625">,</span>&nbsp;<span class="ident" id="8108627">color</span><span class="op" id="8108632">.</span><span class="ident" id="8108633">RGBA</span><span class="op" id="8108637">{</span><span class="num" id="8108638">0</span><span class="op" id="8108639">,</span>&nbsp;<span class="num" id="8108641">0</span><span class="op" id="8108642">,</span>&nbsp;<span class="num" id="8108644">0</span><span class="op" id="8108645">,</span>&nbsp;<span class="num" id="8108647">5</span><span class="op" id="8108648">}</span><span class="op" id="8108649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108652">b</span><span class="op" id="8108653">.</span><span class="ident" id="8108654">Set</span><span class="op" id="8108657">(</span><span class="num" id="8108658">1</span><span class="op" id="8108659">,</span>&nbsp;<span class="num" id="8108661">0</span><span class="op" id="8108662">,</span>&nbsp;<span class="ident" id="8108664">color</span><span class="op" id="8108669">.</span><span class="ident" id="8108670">RGBA</span><span class="op" id="8108674">{</span><span class="num" id="8108675">0</span><span class="op" id="8108676">,</span>&nbsp;<span class="num" id="8108678">0</span><span class="op" id="8108679">,</span>&nbsp;<span class="num" id="8108681">5</span><span class="op" id="8108682">,</span>&nbsp;<span class="num" id="8108684">5</span><span class="op" id="8108685">}</span><span class="op" id="8108686">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108689">b</span><span class="op" id="8108690">.</span><span class="ident" id="8108691">Set</span><span class="op" id="8108694">(</span><span class="num" id="8108695">0</span><span class="op" id="8108696">,</span>&nbsp;<span class="num" id="8108698">1</span><span class="op" id="8108699">,</span>&nbsp;<span class="ident" id="8108701">color</span><span class="op" id="8108706">.</span><span class="ident" id="8108707">RGBA</span><span class="op" id="8108711">{</span><span class="num" id="8108712">0</span><span class="op" id="8108713">,</span>&nbsp;<span class="num" id="8108715">5</span><span class="op" id="8108716">,</span>&nbsp;<span class="num" id="8108718">0</span><span class="op" id="8108719">,</span>&nbsp;<span class="num" id="8108721">5</span><span class="op" id="8108722">}</span><span class="op" id="8108723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108726">b</span><span class="op" id="8108727">.</span><span class="ident" id="8108728">Set</span><span class="op" id="8108731">(</span><span class="num" id="8108732">1</span><span class="op" id="8108733">,</span>&nbsp;<span class="num" id="8108735">1</span><span class="op" id="8108736">,</span>&nbsp;<span class="ident" id="8108738">color</span><span class="op" id="8108743">.</span><span class="ident" id="8108744">RGBA</span><span class="op" id="8108748">{</span><span class="num" id="8108749">5</span><span class="op" id="8108750">,</span>&nbsp;<span class="num" id="8108752">0</span><span class="op" id="8108753">,</span>&nbsp;<span class="num" id="8108755">0</span><span class="op" id="8108756">,</span>&nbsp;<span class="num" id="8108758">5</span><span class="op" id="8108759">}</span><span class="op" id="8108760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108763">Draw</span><span class="op" id="8108767">(</span><span class="ident" id="8108768">a</span><span class="op" id="8108769">,</span>&nbsp;<span class="ident" id="8108771">image</span><span class="op" id="8108776">.</span><span class="ident" id="8108777">Rect</span><span class="op" id="8108781">(</span><span class="num" id="8108782">0</span><span class="op" id="8108783">,</span>&nbsp;<span class="num" id="8108785">0</span><span class="op" id="8108786">,</span>&nbsp;<span class="num" id="8108788">1</span><span class="op" id="8108789">,</span>&nbsp;<span class="num" id="8108791">1</span><span class="op" id="8108792">)</span><span class="op" id="8108793">,</span>&nbsp;<span class="ident" id="8108795">b</span><span class="op" id="8108796">,</span>&nbsp;<span class="ident" id="8108798">image</span><span class="op" id="8108803">.</span><span class="ident" id="8108804">Pt</span><span class="op" id="8108806">(</span><span class="num" id="8108807">1</span><span class="op" id="8108808">,</span>&nbsp;<span class="num" id="8108810">1</span><span class="op" id="8108811">)</span><span class="op" id="8108812">,</span>&nbsp;<span class="ident" id="8108814">Over</span><span class="op" id="8108818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8108821">if</span>&nbsp;<span class="op" id="8108824">!</span><span class="ident" id="8108825">eq</span><span class="op" id="8108827">(</span><span class="ident" id="8108828">color</span><span class="op" id="8108833">.</span><span class="ident" id="8108834">RGBA</span><span class="op" id="8108838">{</span><span class="num" id="8108839">5</span><span class="op" id="8108840">,</span>&nbsp;<span class="num" id="8108842">0</span><span class="op" id="8108843">,</span>&nbsp;<span class="num" id="8108845">0</span><span class="op" id="8108846">,</span>&nbsp;<span class="num" id="8108848">5</span><span class="op" id="8108849">}</span><span class="op" id="8108850">,</span>&nbsp;<span class="ident" id="8108852">a</span><span class="op" id="8108853">.</span><span class="ident" id="8108854">At</span><span class="op" id="8108856">(</span><span class="num" id="8108857">0</span><span class="op" id="8108858">,</span>&nbsp;<span class="num" id="8108860">0</span><span class="op" id="8108861">)</span><span class="op" id="8108862">)</span>&nbsp;<span class="op" id="8108864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108868">t</span><span class="op" id="8108869">.</span><span class="ident" id="8108870">Errorf</span><span class="op" id="8108876">(</span><span class="string" id="8108877">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8108910">,</span>&nbsp;<span class="ident" id="8108912">color</span><span class="op" id="8108917">.</span><span class="ident" id="8108918">RGBA</span><span class="op" id="8108922">{</span><span class="num" id="8108923">5</span><span class="op" id="8108924">,</span>&nbsp;<span class="num" id="8108926">0</span><span class="op" id="8108927">,</span>&nbsp;<span class="num" id="8108929">0</span><span class="op" id="8108930">,</span>&nbsp;<span class="num" id="8108932">5</span><span class="op" id="8108933">}</span><span class="op" id="8108934">,</span>&nbsp;<span class="ident" id="8108936">a</span><span class="op" id="8108937">.</span><span class="ident" id="8108938">At</span><span class="op" id="8108940">(</span><span class="num" id="8108941">0</span><span class="op" id="8108942">,</span>&nbsp;<span class="num" id="8108944">0</span><span class="op" id="8108945">)</span><span class="op" id="8108946">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8108949">}</span><br>
<span class="lineno"></span><span class="op" id="8108951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8108954">func</span>&nbsp;<span class="ident" id="8108959">TestFill</span><span class="op" id="8108967">(</span><span class="ident" id="8108968">t</span>&nbsp;<span class="op" id="8108970">*</span><span class="ident" id="8108971">testing</span><span class="op" id="8108978">.</span><span class="ident" id="8108979">T</span><span class="op" id="8108980">)</span>&nbsp;<span class="op" id="8108982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8108985">rr</span>&nbsp;<span class="op" id="8108988">:=</span>&nbsp;<span class="op" id="8108991">[</span><span class="op" id="8108992">]</span><span class="ident" id="8108993">image</span><span class="op" id="8108998">.</span><span class="ident" id="8108999">Rectangle</span><span class="op" id="8109008">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109012">image</span><span class="op" id="8109017">.</span><span class="ident" id="8109018">Rect</span><span class="op" id="8109022">(</span><span class="num" id="8109023">0</span><span class="op" id="8109024">,</span>&nbsp;<span class="num" id="8109026">0</span><span class="op" id="8109027">,</span>&nbsp;<span class="num" id="8109029">0</span><span class="op" id="8109030">,</span>&nbsp;<span class="num" id="8109032">0</span><span class="op" id="8109033">)</span><span class="op" id="8109034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109038">image</span><span class="op" id="8109043">.</span><span class="ident" id="8109044">Rect</span><span class="op" id="8109048">(</span><span class="num" id="8109049">0</span><span class="op" id="8109050">,</span>&nbsp;<span class="num" id="8109052">0</span><span class="op" id="8109053">,</span>&nbsp;<span class="num" id="8109055">40</span><span class="op" id="8109057">,</span>&nbsp;<span class="num" id="8109059">30</span><span class="op" id="8109061">)</span><span class="op" id="8109062">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109066">image</span><span class="op" id="8109071">.</span><span class="ident" id="8109072">Rect</span><span class="op" id="8109076">(</span><span class="num" id="8109077">10</span><span class="op" id="8109079">,</span>&nbsp;<span class="num" id="8109081">0</span><span class="op" id="8109082">,</span>&nbsp;<span class="num" id="8109084">40</span><span class="op" id="8109086">,</span>&nbsp;<span class="num" id="8109088">30</span><span class="op" id="8109090">)</span><span class="op" id="8109091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109095">image</span><span class="op" id="8109100">.</span><span class="ident" id="8109101">Rect</span><span class="op" id="8109105">(</span><span class="num" id="8109106">0</span><span class="op" id="8109107">,</span>&nbsp;<span class="num" id="8109109">20</span><span class="op" id="8109111">,</span>&nbsp;<span class="num" id="8109113">40</span><span class="op" id="8109115">,</span>&nbsp;<span class="num" id="8109117">30</span><span class="op" id="8109119">)</span><span class="op" id="8109120">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109124">image</span><span class="op" id="8109129">.</span><span class="ident" id="8109130">Rect</span><span class="op" id="8109134">(</span><span class="num" id="8109135">10</span><span class="op" id="8109137">,</span>&nbsp;<span class="num" id="8109139">20</span><span class="op" id="8109141">,</span>&nbsp;<span class="num" id="8109143">40</span><span class="op" id="8109145">,</span>&nbsp;<span class="num" id="8109147">30</span><span class="op" id="8109149">)</span><span class="op" id="8109150">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109154">image</span><span class="op" id="8109159">.</span><span class="ident" id="8109160">Rect</span><span class="op" id="8109164">(</span><span class="num" id="8109165">10</span><span class="op" id="8109167">,</span>&nbsp;<span class="num" id="8109169">20</span><span class="op" id="8109171">,</span>&nbsp;<span class="num" id="8109173">15</span><span class="op" id="8109175">,</span>&nbsp;<span class="num" id="8109177">25</span><span class="op" id="8109179">)</span><span class="op" id="8109180">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109184">image</span><span class="op" id="8109189">.</span><span class="ident" id="8109190">Rect</span><span class="op" id="8109194">(</span><span class="num" id="8109195">10</span><span class="op" id="8109197">,</span>&nbsp;<span class="num" id="8109199">0</span><span class="op" id="8109200">,</span>&nbsp;<span class="num" id="8109202">35</span><span class="op" id="8109204">,</span>&nbsp;<span class="num" id="8109206">30</span><span class="op" id="8109208">)</span><span class="op" id="8109209">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109213">image</span><span class="op" id="8109218">.</span><span class="ident" id="8109219">Rect</span><span class="op" id="8109223">(</span><span class="num" id="8109224">0</span><span class="op" id="8109225">,</span>&nbsp;<span class="num" id="8109227">15</span><span class="op" id="8109229">,</span>&nbsp;<span class="num" id="8109231">40</span><span class="op" id="8109233">,</span>&nbsp;<span class="num" id="8109235">16</span><span class="op" id="8109237">)</span><span class="op" id="8109238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109242">image</span><span class="op" id="8109247">.</span><span class="ident" id="8109248">Rect</span><span class="op" id="8109252">(</span><span class="num" id="8109253">24</span><span class="op" id="8109255">,</span>&nbsp;<span class="num" id="8109257">24</span><span class="op" id="8109259">,</span>&nbsp;<span class="num" id="8109261">25</span><span class="op" id="8109263">,</span>&nbsp;<span class="num" id="8109265">25</span><span class="op" id="8109267">)</span><span class="op" id="8109268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109272">image</span><span class="op" id="8109277">.</span><span class="ident" id="8109278">Rect</span><span class="op" id="8109282">(</span><span class="num" id="8109283">23</span><span class="op" id="8109285">,</span>&nbsp;<span class="num" id="8109287">23</span><span class="op" id="8109289">,</span>&nbsp;<span class="num" id="8109291">26</span><span class="op" id="8109293">,</span>&nbsp;<span class="num" id="8109295">26</span><span class="op" id="8109297">)</span><span class="op" id="8109298">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109302">image</span><span class="op" id="8109307">.</span><span class="ident" id="8109308">Rect</span><span class="op" id="8109312">(</span><span class="num" id="8109313">22</span><span class="op" id="8109315">,</span>&nbsp;<span class="num" id="8109317">22</span><span class="op" id="8109319">,</span>&nbsp;<span class="num" id="8109321">27</span><span class="op" id="8109323">,</span>&nbsp;<span class="num" id="8109325">27</span><span class="op" id="8109327">)</span><span class="op" id="8109328">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109332">image</span><span class="op" id="8109337">.</span><span class="ident" id="8109338">Rect</span><span class="op" id="8109342">(</span><span class="num" id="8109343">21</span><span class="op" id="8109345">,</span>&nbsp;<span class="num" id="8109347">21</span><span class="op" id="8109349">,</span>&nbsp;<span class="num" id="8109351">28</span><span class="op" id="8109353">,</span>&nbsp;<span class="num" id="8109355">28</span><span class="op" id="8109357">)</span><span class="op" id="8109358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109362">image</span><span class="op" id="8109367">.</span><span class="ident" id="8109368">Rect</span><span class="op" id="8109372">(</span><span class="num" id="8109373">20</span><span class="op" id="8109375">,</span>&nbsp;<span class="num" id="8109377">20</span><span class="op" id="8109379">,</span>&nbsp;<span class="num" id="8109381">29</span><span class="op" id="8109383">,</span>&nbsp;<span class="num" id="8109385">29</span><span class="op" id="8109387">)</span><span class="op" id="8109388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109391">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109394">for</span>&nbsp;<span class="ident" id="8109398">_</span><span class="op" id="8109399">,</span>&nbsp;<span class="ident" id="8109401">r</span>&nbsp;<span class="op" id="8109403">:=</span>&nbsp;<span class="keyword" id="8109406">range</span>&nbsp;<span class="ident" id="8109412">rr</span>&nbsp;<span class="op" id="8109415">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109419">m</span>&nbsp;<span class="op" id="8109421">:=</span>&nbsp;<span class="ident" id="8109424">image</span><span class="op" id="8109429">.</span><span class="ident" id="8109430">NewRGBA</span><span class="op" id="8109437">(</span><span class="ident" id="8109438">image</span><span class="op" id="8109443">.</span><span class="ident" id="8109444">Rect</span><span class="op" id="8109448">(</span><span class="num" id="8109449">0</span><span class="op" id="8109450">,</span>&nbsp;<span class="num" id="8109452">0</span><span class="op" id="8109453">,</span>&nbsp;<span class="num" id="8109455">40</span><span class="op" id="8109457">,</span>&nbsp;<span class="num" id="8109459">30</span><span class="op" id="8109461">)</span><span class="op" id="8109462">)</span><span class="op" id="8109463">.</span><span class="ident" id="8109464">SubImage</span><span class="op" id="8109472">(</span><span class="ident" id="8109473">r</span><span class="op" id="8109474">)</span><span class="op" id="8109475">.</span><span class="op" id="8109476">(</span><span class="op" id="8109477">*</span><span class="ident" id="8109478">image</span><span class="op" id="8109483">.</span><span class="ident" id="8109484">RGBA</span><span class="op" id="8109488">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109492">b</span>&nbsp;<span class="op" id="8109494">:=</span>&nbsp;<span class="ident" id="8109497">m</span><span class="op" id="8109498">.</span><span class="ident" id="8109499">Bounds</span><span class="op" id="8109505">(</span><span class="op" id="8109506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109510">c</span>&nbsp;<span class="op" id="8109512">:=</span>&nbsp;<span class="ident" id="8109515">color</span><span class="op" id="8109520">.</span><span class="ident" id="8109521">RGBA</span><span class="op" id="8109525">{</span><span class="num" id="8109526">11</span><span class="op" id="8109528">,</span>&nbsp;<span class="num" id="8109530">0</span><span class="op" id="8109531">,</span>&nbsp;<span class="num" id="8109533">0</span><span class="op" id="8109534">,</span>&nbsp;<span class="num" id="8109536">255</span><span class="op" id="8109539">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109543">src</span>&nbsp;<span class="op" id="8109547">:=</span>&nbsp;<span class="op" id="8109550">&amp;</span><span class="ident" id="8109551">image</span><span class="op" id="8109556">.</span><span class="ident" id="8109557">Uniform</span><span class="op" id="8109564">{</span><span class="ident" id="8109565">C</span><span class="op" id="8109566">:</span>&nbsp;<span class="ident" id="8109568">c</span><span class="op" id="8109569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109573">check</span>&nbsp;<span class="op" id="8109579">:=</span>&nbsp;<span class="keyword" id="8109582">func</span><span class="op" id="8109586">(</span><span class="ident" id="8109587">desc</span>&nbsp;<span class="builtintype" id="8109592">string</span><span class="op" id="8109598">)</span>&nbsp;<span class="op" id="8109600">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109605">for</span>&nbsp;<span class="ident" id="8109609">y</span>&nbsp;<span class="op" id="8109611">:=</span>&nbsp;<span class="ident" id="8109614">b</span><span class="op" id="8109615">.</span><span class="ident" id="8109616">Min</span><span class="op" id="8109619">.</span><span class="ident" id="8109620">Y</span><span class="op" id="8109621">;</span>&nbsp;<span class="ident" id="8109623">y</span>&nbsp;<span class="op" id="8109625">&lt;</span>&nbsp;<span class="ident" id="8109627">b</span><span class="op" id="8109628">.</span><span class="ident" id="8109629">Max</span><span class="op" id="8109632">.</span><span class="ident" id="8109633">Y</span><span class="op" id="8109634">;</span>&nbsp;<span class="ident" id="8109636">y</span><span class="op" id="8109637">++</span>&nbsp;<span class="op" id="8109640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109646">for</span>&nbsp;<span class="ident" id="8109650">x</span>&nbsp;<span class="op" id="8109652">:=</span>&nbsp;<span class="ident" id="8109655">b</span><span class="op" id="8109656">.</span><span class="ident" id="8109657">Min</span><span class="op" id="8109660">.</span><span class="ident" id="8109661">X</span><span class="op" id="8109662">;</span>&nbsp;<span class="ident" id="8109664">x</span>&nbsp;<span class="op" id="8109666">&lt;</span>&nbsp;<span class="ident" id="8109668">b</span><span class="op" id="8109669">.</span><span class="ident" id="8109670">Max</span><span class="op" id="8109673">.</span><span class="ident" id="8109674">X</span><span class="op" id="8109675">;</span>&nbsp;<span class="ident" id="8109677">x</span><span class="op" id="8109678">++</span>&nbsp;<span class="op" id="8109681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109688">if</span>&nbsp;<span class="op" id="8109691">!</span><span class="ident" id="8109692">eq</span><span class="op" id="8109694">(</span><span class="ident" id="8109695">c</span><span class="op" id="8109696">,</span>&nbsp;<span class="ident" id="8109698">m</span><span class="op" id="8109699">.</span><span class="ident" id="8109700">At</span><span class="op" id="8109702">(</span><span class="ident" id="8109703">x</span><span class="op" id="8109704">,</span>&nbsp;<span class="ident" id="8109706">y</span><span class="op" id="8109707">)</span><span class="op" id="8109708">)</span>&nbsp;<span class="op" id="8109710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109718">t</span><span class="op" id="8109719">.</span><span class="ident" id="8109720">Errorf</span><span class="op" id="8109726">(</span><span class="string" id="8109727">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8109786">,</span>&nbsp;<span class="ident" id="8109788">desc</span><span class="op" id="8109792">,</span>&nbsp;<span class="ident" id="8109794">x</span><span class="op" id="8109795">,</span>&nbsp;<span class="ident" id="8109797">y</span><span class="op" id="8109798">,</span>&nbsp;<span class="ident" id="8109800">r</span><span class="op" id="8109801">,</span>&nbsp;<span class="ident" id="8109803">c</span><span class="op" id="8109804">,</span>&nbsp;<span class="ident" id="8109806">m</span><span class="op" id="8109807">.</span><span class="ident" id="8109808">At</span><span class="op" id="8109810">(</span><span class="ident" id="8109811">x</span><span class="op" id="8109812">,</span>&nbsp;<span class="ident" id="8109814">y</span><span class="op" id="8109815">)</span><span class="op" id="8109816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109824">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109847">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8109851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8109855">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109884">for</span>&nbsp;<span class="ident" id="8109888">y</span>&nbsp;<span class="op" id="8109890">:=</span>&nbsp;<span class="ident" id="8109893">b</span><span class="op" id="8109894">.</span><span class="ident" id="8109895">Min</span><span class="op" id="8109898">.</span><span class="ident" id="8109899">Y</span><span class="op" id="8109900">;</span>&nbsp;<span class="ident" id="8109902">y</span>&nbsp;<span class="op" id="8109904">&lt;</span>&nbsp;<span class="ident" id="8109906">b</span><span class="op" id="8109907">.</span><span class="ident" id="8109908">Max</span><span class="op" id="8109911">.</span><span class="ident" id="8109912">Y</span><span class="op" id="8109913">;</span>&nbsp;<span class="ident" id="8109915">y</span><span class="op" id="8109916">++</span>&nbsp;<span class="op" id="8109919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8109924">for</span>&nbsp;<span class="ident" id="8109928">x</span>&nbsp;<span class="op" id="8109930">:=</span>&nbsp;<span class="ident" id="8109933">b</span><span class="op" id="8109934">.</span><span class="ident" id="8109935">Min</span><span class="op" id="8109938">.</span><span class="ident" id="8109939">X</span><span class="op" id="8109940">;</span>&nbsp;<span class="ident" id="8109942">x</span>&nbsp;<span class="op" id="8109944">&lt;</span>&nbsp;<span class="ident" id="8109946">b</span><span class="op" id="8109947">.</span><span class="ident" id="8109948">Max</span><span class="op" id="8109951">.</span><span class="ident" id="8109952">X</span><span class="op" id="8109953">;</span>&nbsp;<span class="ident" id="8109955">x</span><span class="op" id="8109956">++</span>&nbsp;<span class="op" id="8109959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8109965">DrawMask</span><span class="op" id="8109973">(</span><span class="ident" id="8109974">m</span><span class="op" id="8109975">,</span>&nbsp;<span class="ident" id="8109977">image</span><span class="op" id="8109982">.</span><span class="ident" id="8109983">Rect</span><span class="op" id="8109987">(</span><span class="ident" id="8109988">x</span><span class="op" id="8109989">,</span>&nbsp;<span class="ident" id="8109991">y</span><span class="op" id="8109992">,</span>&nbsp;<span class="ident" id="8109994">x</span><span class="op" id="8109995">+</span><span class="num" id="8109996">1</span><span class="op" id="8109997">,</span>&nbsp;<span class="ident" id="8109999">y</span><span class="op" id="8110000">+</span><span class="num" id="8110001">1</span><span class="op" id="8110002">)</span><span class="op" id="8110003">,</span>&nbsp;<span class="ident" id="8110005">src</span><span class="op" id="8110008">,</span>&nbsp;<span class="ident" id="8110010">image</span><span class="op" id="8110015">.</span><span class="ident" id="8110016">ZP</span><span class="op" id="8110018">,</span>&nbsp;<span class="builtintype" id="8110020">nil</span><span class="op" id="8110023">,</span>&nbsp;<span class="ident" id="8110025">image</span><span class="op" id="8110030">.</span><span class="ident" id="8110031">ZP</span><span class="op" id="8110033">,</span>&nbsp;<span class="ident" id="8110035">Src</span><span class="op" id="8110038">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110043">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110047">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110051">check</span><span class="op" id="8110056">(</span><span class="string" id="8110057">&#34;pixel&#34;</span><span class="op" id="8110064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8110068">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110095">c</span>&nbsp;<span class="op" id="8110097">=</span>&nbsp;<span class="ident" id="8110099">color</span><span class="op" id="8110104">.</span><span class="ident" id="8110105">RGBA</span><span class="op" id="8110109">{</span><span class="num" id="8110110">0</span><span class="op" id="8110111">,</span>&nbsp;<span class="num" id="8110113">22</span><span class="op" id="8110115">,</span>&nbsp;<span class="num" id="8110117">0</span><span class="op" id="8110118">,</span>&nbsp;<span class="num" id="8110120">255</span><span class="op" id="8110123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110127">src</span>&nbsp;<span class="op" id="8110131">=</span>&nbsp;<span class="op" id="8110133">&amp;</span><span class="ident" id="8110134">image</span><span class="op" id="8110139">.</span><span class="ident" id="8110140">Uniform</span><span class="op" id="8110147">{</span><span class="ident" id="8110148">C</span><span class="op" id="8110149">:</span>&nbsp;<span class="ident" id="8110151">c</span><span class="op" id="8110152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110156">for</span>&nbsp;<span class="ident" id="8110160">y</span>&nbsp;<span class="op" id="8110162">:=</span>&nbsp;<span class="ident" id="8110165">b</span><span class="op" id="8110166">.</span><span class="ident" id="8110167">Min</span><span class="op" id="8110170">.</span><span class="ident" id="8110171">Y</span><span class="op" id="8110172">;</span>&nbsp;<span class="ident" id="8110174">y</span>&nbsp;<span class="op" id="8110176">&lt;</span>&nbsp;<span class="ident" id="8110178">b</span><span class="op" id="8110179">.</span><span class="ident" id="8110180">Max</span><span class="op" id="8110183">.</span><span class="ident" id="8110184">Y</span><span class="op" id="8110185">;</span>&nbsp;<span class="ident" id="8110187">y</span><span class="op" id="8110188">++</span>&nbsp;<span class="op" id="8110191">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110196">DrawMask</span><span class="op" id="8110204">(</span><span class="ident" id="8110205">m</span><span class="op" id="8110206">,</span>&nbsp;<span class="ident" id="8110208">image</span><span class="op" id="8110213">.</span><span class="ident" id="8110214">Rect</span><span class="op" id="8110218">(</span><span class="ident" id="8110219">b</span><span class="op" id="8110220">.</span><span class="ident" id="8110221">Min</span><span class="op" id="8110224">.</span><span class="ident" id="8110225">X</span><span class="op" id="8110226">,</span>&nbsp;<span class="ident" id="8110228">y</span><span class="op" id="8110229">,</span>&nbsp;<span class="ident" id="8110231">b</span><span class="op" id="8110232">.</span><span class="ident" id="8110233">Max</span><span class="op" id="8110236">.</span><span class="ident" id="8110237">X</span><span class="op" id="8110238">,</span>&nbsp;<span class="ident" id="8110240">y</span><span class="op" id="8110241">+</span><span class="num" id="8110242">1</span><span class="op" id="8110243">)</span><span class="op" id="8110244">,</span>&nbsp;<span class="ident" id="8110246">src</span><span class="op" id="8110249">,</span>&nbsp;<span class="ident" id="8110251">image</span><span class="op" id="8110256">.</span><span class="ident" id="8110257">ZP</span><span class="op" id="8110259">,</span>&nbsp;<span class="builtintype" id="8110261">nil</span><span class="op" id="8110264">,</span>&nbsp;<span class="ident" id="8110266">image</span><span class="op" id="8110271">.</span><span class="ident" id="8110272">ZP</span><span class="op" id="8110274">,</span>&nbsp;<span class="ident" id="8110276">Src</span><span class="op" id="8110279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110287">check</span><span class="op" id="8110292">(</span><span class="string" id="8110293">&#34;row&#34;</span><span class="op" id="8110298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8110302">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110332">c</span>&nbsp;<span class="op" id="8110334">=</span>&nbsp;<span class="ident" id="8110336">color</span><span class="op" id="8110341">.</span><span class="ident" id="8110342">RGBA</span><span class="op" id="8110346">{</span><span class="num" id="8110347">0</span><span class="op" id="8110348">,</span>&nbsp;<span class="num" id="8110350">0</span><span class="op" id="8110351">,</span>&nbsp;<span class="num" id="8110353">33</span><span class="op" id="8110355">,</span>&nbsp;<span class="num" id="8110357">255</span><span class="op" id="8110360">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110364">src</span>&nbsp;<span class="op" id="8110368">=</span>&nbsp;<span class="op" id="8110370">&amp;</span><span class="ident" id="8110371">image</span><span class="op" id="8110376">.</span><span class="ident" id="8110377">Uniform</span><span class="op" id="8110384">{</span><span class="ident" id="8110385">C</span><span class="op" id="8110386">:</span>&nbsp;<span class="ident" id="8110388">c</span><span class="op" id="8110389">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8110393">for</span>&nbsp;<span class="ident" id="8110397">x</span>&nbsp;<span class="op" id="8110399">:=</span>&nbsp;<span class="ident" id="8110402">b</span><span class="op" id="8110403">.</span><span class="ident" id="8110404">Min</span><span class="op" id="8110407">.</span><span class="ident" id="8110408">X</span><span class="op" id="8110409">;</span>&nbsp;<span class="ident" id="8110411">x</span>&nbsp;<span class="op" id="8110413">&lt;</span>&nbsp;<span class="ident" id="8110415">b</span><span class="op" id="8110416">.</span><span class="ident" id="8110417">Max</span><span class="op" id="8110420">.</span><span class="ident" id="8110421">X</span><span class="op" id="8110422">;</span>&nbsp;<span class="ident" id="8110424">x</span><span class="op" id="8110425">++</span>&nbsp;<span class="op" id="8110428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110433">DrawMask</span><span class="op" id="8110441">(</span><span class="ident" id="8110442">m</span><span class="op" id="8110443">,</span>&nbsp;<span class="ident" id="8110445">image</span><span class="op" id="8110450">.</span><span class="ident" id="8110451">Rect</span><span class="op" id="8110455">(</span><span class="ident" id="8110456">x</span><span class="op" id="8110457">,</span>&nbsp;<span class="ident" id="8110459">b</span><span class="op" id="8110460">.</span><span class="ident" id="8110461">Min</span><span class="op" id="8110464">.</span><span class="ident" id="8110465">Y</span><span class="op" id="8110466">,</span>&nbsp;<span class="ident" id="8110468">x</span><span class="op" id="8110469">+</span><span class="num" id="8110470">1</span><span class="op" id="8110471">,</span>&nbsp;<span class="ident" id="8110473">b</span><span class="op" id="8110474">.</span><span class="ident" id="8110475">Max</span><span class="op" id="8110478">.</span><span class="ident" id="8110479">Y</span><span class="op" id="8110480">)</span><span class="op" id="8110481">,</span>&nbsp;<span class="ident" id="8110483">src</span><span class="op" id="8110486">,</span>&nbsp;<span class="ident" id="8110488">image</span><span class="op" id="8110493">.</span><span class="ident" id="8110494">ZP</span><span class="op" id="8110496">,</span>&nbsp;<span class="builtintype" id="8110498">nil</span><span class="op" id="8110501">,</span>&nbsp;<span class="ident" id="8110503">image</span><span class="op" id="8110508">.</span><span class="ident" id="8110509">ZP</span><span class="op" id="8110511">,</span>&nbsp;<span class="ident" id="8110513">Src</span><span class="op" id="8110516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110524">check</span><span class="op" id="8110529">(</span><span class="string" id="8110530">&#34;column&#34;</span><span class="op" id="8110538">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8110542">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110577">c</span>&nbsp;<span class="op" id="8110579">=</span>&nbsp;<span class="ident" id="8110581">color</span><span class="op" id="8110586">.</span><span class="ident" id="8110587">RGBA</span><span class="op" id="8110591">{</span><span class="num" id="8110592">44</span><span class="op" id="8110594">,</span>&nbsp;<span class="num" id="8110596">55</span><span class="op" id="8110598">,</span>&nbsp;<span class="num" id="8110600">66</span><span class="op" id="8110602">,</span>&nbsp;<span class="num" id="8110604">77</span><span class="op" id="8110606">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110610">src</span>&nbsp;<span class="op" id="8110614">=</span>&nbsp;<span class="op" id="8110616">&amp;</span><span class="ident" id="8110617">image</span><span class="op" id="8110622">.</span><span class="ident" id="8110623">Uniform</span><span class="op" id="8110630">{</span><span class="ident" id="8110631">C</span><span class="op" id="8110632">:</span>&nbsp;<span class="ident" id="8110634">c</span><span class="op" id="8110635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110639">DrawMask</span><span class="op" id="8110647">(</span><span class="ident" id="8110648">m</span><span class="op" id="8110649">,</span>&nbsp;<span class="ident" id="8110651">b</span><span class="op" id="8110652">,</span>&nbsp;<span class="ident" id="8110654">src</span><span class="op" id="8110657">,</span>&nbsp;<span class="ident" id="8110659">image</span><span class="op" id="8110664">.</span><span class="ident" id="8110665">ZP</span><span class="op" id="8110667">,</span>&nbsp;<span class="builtintype" id="8110669">nil</span><span class="op" id="8110672">,</span>&nbsp;<span class="ident" id="8110674">image</span><span class="op" id="8110679">.</span><span class="ident" id="8110680">ZP</span><span class="op" id="8110682">,</span>&nbsp;<span class="ident" id="8110684">Src</span><span class="op" id="8110687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110691">check</span><span class="op" id="8110696">(</span><span class="string" id="8110697">&#34;whole&#34;</span><span class="op" id="8110704">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8110707">}</span><br>
<span class="lineno"></span><span class="op" id="8110709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8110712">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="8110787">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="8110864">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="8110902">func</span>&nbsp;<span class="ident" id="8110907">TestFloydSteinbergCheckerboard</span><span class="op" id="8110937">(</span><span class="ident" id="8110938">t</span>&nbsp;<span class="op" id="8110940">*</span><span class="ident" id="8110941">testing</span><span class="op" id="8110948">.</span><span class="ident" id="8110949">T</span><span class="op" id="8110950">)</span>&nbsp;<span class="op" id="8110952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8110955">b</span>&nbsp;<span class="op" id="8110957">:=</span>&nbsp;<span class="ident" id="8110960">image</span><span class="op" id="8110965">.</span><span class="ident" id="8110966">Rect</span><span class="op" id="8110970">(</span><span class="num" id="8110971">0</span><span class="op" id="8110972">,</span>&nbsp;<span class="num" id="8110974">0</span><span class="op" id="8110975">,</span>&nbsp;<span class="num" id="8110977">640</span><span class="op" id="8110980">,</span>&nbsp;<span class="num" id="8110982">480</span><span class="op" id="8110985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8110988">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111061">src</span>&nbsp;<span class="op" id="8111065">:=</span>&nbsp;<span class="op" id="8111068">&amp;</span><span class="ident" id="8111069">image</span><span class="op" id="8111074">.</span><span class="ident" id="8111075">Uniform</span><span class="op" id="8111082">{</span><span class="ident" id="8111083">color</span><span class="op" id="8111088">.</span><span class="ident" id="8111089">Gray16</span><span class="op" id="8111095">{</span><span class="num" id="8111096">0x7fff</span><span class="op" id="8111102">}</span><span class="op" id="8111103">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111106">dst</span>&nbsp;<span class="op" id="8111110">:=</span>&nbsp;<span class="ident" id="8111113">image</span><span class="op" id="8111118">.</span><span class="ident" id="8111119">NewPaletted</span><span class="op" id="8111130">(</span><span class="ident" id="8111131">b</span><span class="op" id="8111132">,</span>&nbsp;<span class="ident" id="8111134">color</span><span class="op" id="8111139">.</span><span class="ident" id="8111140">Palette</span><span class="op" id="8111147">{</span><span class="ident" id="8111148">color</span><span class="op" id="8111153">.</span><span class="ident" id="8111154">Black</span><span class="op" id="8111159">,</span>&nbsp;<span class="ident" id="8111161">color</span><span class="op" id="8111166">.</span><span class="ident" id="8111167">White</span><span class="op" id="8111172">}</span><span class="op" id="8111173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111176">FloydSteinberg</span><span class="op" id="8111190">.</span><span class="ident" id="8111191">Draw</span><span class="op" id="8111195">(</span><span class="ident" id="8111196">dst</span><span class="op" id="8111199">,</span>&nbsp;<span class="ident" id="8111201">b</span><span class="op" id="8111202">,</span>&nbsp;<span class="ident" id="8111204">src</span><span class="op" id="8111207">,</span>&nbsp;<span class="ident" id="8111209">image</span><span class="op" id="8111214">.</span><span class="ident" id="8111215">Point</span><span class="op" id="8111220">{</span><span class="op" id="8111221">}</span><span class="op" id="8111222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111225">nErr</span>&nbsp;<span class="op" id="8111230">:=</span>&nbsp;<span class="num" id="8111233">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111236">for</span>&nbsp;<span class="ident" id="8111240">y</span>&nbsp;<span class="op" id="8111242">:=</span>&nbsp;<span class="ident" id="8111245">b</span><span class="op" id="8111246">.</span><span class="ident" id="8111247">Min</span><span class="op" id="8111250">.</span><span class="ident" id="8111251">Y</span><span class="op" id="8111252">;</span>&nbsp;<span class="ident" id="8111254">y</span>&nbsp;<span class="op" id="8111256">&lt;</span>&nbsp;<span class="ident" id="8111258">b</span><span class="op" id="8111259">.</span><span class="ident" id="8111260">Max</span><span class="op" id="8111263">.</span><span class="ident" id="8111264">Y</span><span class="op" id="8111265">;</span>&nbsp;<span class="ident" id="8111267">y</span><span class="op" id="8111268">++</span>&nbsp;<span class="op" id="8111271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111275">for</span>&nbsp;<span class="ident" id="8111279">x</span>&nbsp;<span class="op" id="8111281">:=</span>&nbsp;<span class="ident" id="8111284">b</span><span class="op" id="8111285">.</span><span class="ident" id="8111286">Min</span><span class="op" id="8111289">.</span><span class="ident" id="8111290">X</span><span class="op" id="8111291">;</span>&nbsp;<span class="ident" id="8111293">x</span>&nbsp;<span class="op" id="8111295">&lt;</span>&nbsp;<span class="ident" id="8111297">b</span><span class="op" id="8111298">.</span><span class="ident" id="8111299">Max</span><span class="op" id="8111302">.</span><span class="ident" id="8111303">X</span><span class="op" id="8111304">;</span>&nbsp;<span class="ident" id="8111306">x</span><span class="op" id="8111307">++</span>&nbsp;<span class="op" id="8111310">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111315">got</span>&nbsp;<span class="op" id="8111319">:=</span>&nbsp;<span class="ident" id="8111322">dst</span><span class="op" id="8111325">.</span><span class="ident" id="8111326">Pix</span><span class="op" id="8111329">[</span><span class="ident" id="8111330">dst</span><span class="op" id="8111333">.</span><span class="ident" id="8111334">PixOffset</span><span class="op" id="8111343">(</span><span class="ident" id="8111344">x</span><span class="op" id="8111345">,</span>&nbsp;<span class="ident" id="8111347">y</span><span class="op" id="8111348">)</span><span class="op" id="8111349">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111354">want</span>&nbsp;<span class="op" id="8111359">:=</span>&nbsp;<span class="builtintype" id="8111362">uint8</span><span class="op" id="8111367">(</span><span class="ident" id="8111368">x</span><span class="op" id="8111369">+</span><span class="ident" id="8111370">y</span><span class="op" id="8111371">)</span>&nbsp;<span class="op" id="8111373">%</span>&nbsp;<span class="num" id="8111375">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111380">if</span>&nbsp;<span class="ident" id="8111383">got</span>&nbsp;<span class="op" id="8111387">!=</span>&nbsp;<span class="ident" id="8111390">want</span>&nbsp;<span class="op" id="8111395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111401">t</span><span class="op" id="8111402">.</span><span class="ident" id="8111403">Errorf</span><span class="op" id="8111409">(</span><span class="string" id="8111410">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="8111440">,</span>&nbsp;<span class="ident" id="8111442">x</span><span class="op" id="8111443">,</span>&nbsp;<span class="ident" id="8111445">y</span><span class="op" id="8111446">,</span>&nbsp;<span class="ident" id="8111448">got</span><span class="op" id="8111451">,</span>&nbsp;<span class="ident" id="8111453">want</span><span class="op" id="8111457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111463">if</span>&nbsp;<span class="ident" id="8111466">nErr</span><span class="op" id="8111470">++</span><span class="op" id="8111472">;</span>&nbsp;<span class="ident" id="8111474">nErr</span>&nbsp;<span class="op" id="8111479">==</span>&nbsp;<span class="num" id="8111482">10</span>&nbsp;<span class="op" id="8111485">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111492">t</span><span class="op" id="8111493">.</span><span class="ident" id="8111494">Fatal</span><span class="op" id="8111499">(</span><span class="string" id="8111500">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="8111526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111537">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111544">}</span><br>
<span class="lineno">380</span><span class="op" id="8111546">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8111549">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="8111628">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="8111660">type</span>&nbsp;<span class="ident" id="8111665">embeddedPaletted</span>&nbsp;<span class="keyword" id="8111682">struct</span>&nbsp;<span class="op" id="8111689">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111692">*</span><span class="ident" id="8111693">image</span><span class="op" id="8111698">.</span><span class="ident" id="8111699">Paletted</span><br>
<span class="lineno"></span><span class="op" id="8111708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8111711">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="8111781">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="8111833">func</span>&nbsp;<span class="ident" id="8111838">TestPaletted</span><span class="op" id="8111850">(</span><span class="ident" id="8111851">t</span>&nbsp;<span class="op" id="8111853">*</span><span class="ident" id="8111854">testing</span><span class="op" id="8111861">.</span><span class="ident" id="8111862">T</span><span class="op" id="8111863">)</span>&nbsp;<span class="op" id="8111865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111868">f</span><span class="op" id="8111869">,</span>&nbsp;<span class="ident" id="8111871">err</span>&nbsp;<span class="op" id="8111875">:=</span>&nbsp;<span class="ident" id="8111878">os</span><span class="op" id="8111880">.</span><span class="ident" id="8111881">Open</span><span class="op" id="8111885">(</span><span class="string" id="8111886">&#34;../testdata/video-001.png&#34;</span><span class="op" id="8111913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111916">if</span>&nbsp;<span class="ident" id="8111919">err</span>&nbsp;<span class="op" id="8111923">!=</span>&nbsp;<span class="builtintype" id="8111926">nil</span>&nbsp;<span class="op" id="8111930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111934">t</span><span class="op" id="8111935">.</span><span class="ident" id="8111936">Fatalf</span><span class="op" id="8111942">(</span><span class="string" id="8111943">&#34;open:&nbsp;%v&#34;</span><span class="op" id="8111953">,</span>&nbsp;<span class="ident" id="8111955">err</span><span class="op" id="8111958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8111961">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8111964">defer</span>&nbsp;<span class="ident" id="8111970">f</span><span class="op" id="8111971">.</span><span class="ident" id="8111972">Close</span><span class="op" id="8111977">(</span><span class="op" id="8111978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8111981">src</span><span class="op" id="8111984">,</span>&nbsp;<span class="ident" id="8111986">err</span>&nbsp;<span class="op" id="8111990">:=</span>&nbsp;<span class="ident" id="8111993">png</span><span class="op" id="8111996">.</span><span class="ident" id="8111997">Decode</span><span class="op" id="8112003">(</span><span class="ident" id="8112004">f</span><span class="op" id="8112005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112008">if</span>&nbsp;<span class="ident" id="8112011">err</span>&nbsp;<span class="op" id="8112015">!=</span>&nbsp;<span class="builtintype" id="8112018">nil</span>&nbsp;<span class="op" id="8112022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112026">t</span><span class="op" id="8112027">.</span><span class="ident" id="8112028">Fatalf</span><span class="op" id="8112034">(</span><span class="string" id="8112035">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8112047">,</span>&nbsp;<span class="ident" id="8112049">err</span><span class="op" id="8112052">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112055">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112058">b</span>&nbsp;<span class="op" id="8112060">:=</span>&nbsp;<span class="ident" id="8112063">src</span><span class="op" id="8112066">.</span><span class="ident" id="8112067">Bounds</span><span class="op" id="8112073">(</span><span class="op" id="8112074">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112078">cgaPalette</span>&nbsp;<span class="op" id="8112089">:=</span>&nbsp;<span class="ident" id="8112092">color</span><span class="op" id="8112097">.</span><span class="ident" id="8112098">Palette</span><span class="op" id="8112105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112109">color</span><span class="op" id="8112114">.</span><span class="ident" id="8112115">RGBA</span><span class="op" id="8112119">{</span><span class="num" id="8112120">0x00</span><span class="op" id="8112124">,</span>&nbsp;<span class="num" id="8112126">0x00</span><span class="op" id="8112130">,</span>&nbsp;<span class="num" id="8112132">0x00</span><span class="op" id="8112136">,</span>&nbsp;<span class="num" id="8112138">0xff</span><span class="op" id="8112142">}</span><span class="op" id="8112143">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112147">color</span><span class="op" id="8112152">.</span><span class="ident" id="8112153">RGBA</span><span class="op" id="8112157">{</span><span class="num" id="8112158">0x55</span><span class="op" id="8112162">,</span>&nbsp;<span class="num" id="8112164">0xff</span><span class="op" id="8112168">,</span>&nbsp;<span class="num" id="8112170">0xff</span><span class="op" id="8112174">,</span>&nbsp;<span class="num" id="8112176">0xff</span><span class="op" id="8112180">}</span><span class="op" id="8112181">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112185">color</span><span class="op" id="8112190">.</span><span class="ident" id="8112191">RGBA</span><span class="op" id="8112195">{</span><span class="num" id="8112196">0xff</span><span class="op" id="8112200">,</span>&nbsp;<span class="num" id="8112202">0x55</span><span class="op" id="8112206">,</span>&nbsp;<span class="num" id="8112208">0xff</span><span class="op" id="8112212">,</span>&nbsp;<span class="num" id="8112214">0xff</span><span class="op" id="8112218">}</span><span class="op" id="8112219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112223">color</span><span class="op" id="8112228">.</span><span class="ident" id="8112229">RGBA</span><span class="op" id="8112233">{</span><span class="num" id="8112234">0xff</span><span class="op" id="8112238">,</span>&nbsp;<span class="num" id="8112240">0xff</span><span class="op" id="8112244">,</span>&nbsp;<span class="num" id="8112246">0xff</span><span class="op" id="8112250">,</span>&nbsp;<span class="num" id="8112252">0xff</span><span class="op" id="8112256">}</span><span class="op" id="8112257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112263">drawers</span>&nbsp;<span class="op" id="8112271">:=</span>&nbsp;<span class="keyword" id="8112274">map</span><span class="op" id="8112277">[</span><span class="builtintype" id="8112278">string</span><span class="op" id="8112284">]</span><span class="ident" id="8112285">Drawer</span><span class="op" id="8112291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8112295">&#34;src&#34;</span><span class="op" id="8112300">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112314">Src</span><span class="op" id="8112317">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8112321">&#34;floyd-steinberg&#34;</span><span class="op" id="8112338">:</span>&nbsp;<span class="ident" id="8112340">FloydSteinberg</span><span class="op" id="8112354">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="8112360">loop</span><span class="op" id="8112364">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112367">for</span>&nbsp;<span class="ident" id="8112371">dName</span><span class="op" id="8112376">,</span>&nbsp;<span class="ident" id="8112378">d</span>&nbsp;<span class="op" id="8112380">:=</span>&nbsp;<span class="keyword" id="8112383">range</span>&nbsp;<span class="ident" id="8112389">drawers</span>&nbsp;<span class="op" id="8112397">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112401">dst0</span>&nbsp;<span class="op" id="8112406">:=</span>&nbsp;<span class="ident" id="8112409">image</span><span class="op" id="8112414">.</span><span class="ident" id="8112415">NewPaletted</span><span class="op" id="8112426">(</span><span class="ident" id="8112427">b</span><span class="op" id="8112428">,</span>&nbsp;<span class="ident" id="8112430">cgaPalette</span><span class="op" id="8112440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112444">dst1</span>&nbsp;<span class="op" id="8112449">:=</span>&nbsp;<span class="ident" id="8112452">image</span><span class="op" id="8112457">.</span><span class="ident" id="8112458">NewPaletted</span><span class="op" id="8112469">(</span><span class="ident" id="8112470">b</span><span class="op" id="8112471">,</span>&nbsp;<span class="ident" id="8112473">cgaPalette</span><span class="op" id="8112483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112487">d</span><span class="op" id="8112488">.</span><span class="ident" id="8112489">Draw</span><span class="op" id="8112493">(</span><span class="ident" id="8112494">dst0</span><span class="op" id="8112498">,</span>&nbsp;<span class="ident" id="8112500">b</span><span class="op" id="8112501">,</span>&nbsp;<span class="ident" id="8112503">src</span><span class="op" id="8112506">,</span>&nbsp;<span class="ident" id="8112508">image</span><span class="op" id="8112513">.</span><span class="ident" id="8112514">Point</span><span class="op" id="8112519">{</span><span class="op" id="8112520">}</span><span class="op" id="8112521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112525">d</span><span class="op" id="8112526">.</span><span class="ident" id="8112527">Draw</span><span class="op" id="8112531">(</span><span class="ident" id="8112532">embeddedPaletted</span><span class="op" id="8112548">{</span><span class="ident" id="8112549">dst1</span><span class="op" id="8112553">}</span><span class="op" id="8112554">,</span>&nbsp;<span class="ident" id="8112556">b</span><span class="op" id="8112557">,</span>&nbsp;<span class="ident" id="8112559">src</span><span class="op" id="8112562">,</span>&nbsp;<span class="ident" id="8112564">image</span><span class="op" id="8112569">.</span><span class="ident" id="8112570">Point</span><span class="op" id="8112575">{</span><span class="op" id="8112576">}</span><span class="op" id="8112577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112581">for</span>&nbsp;<span class="ident" id="8112585">y</span>&nbsp;<span class="op" id="8112587">:=</span>&nbsp;<span class="ident" id="8112590">b</span><span class="op" id="8112591">.</span><span class="ident" id="8112592">Min</span><span class="op" id="8112595">.</span><span class="ident" id="8112596">Y</span><span class="op" id="8112597">;</span>&nbsp;<span class="ident" id="8112599">y</span>&nbsp;<span class="op" id="8112601">&lt;</span>&nbsp;<span class="ident" id="8112603">b</span><span class="op" id="8112604">.</span><span class="ident" id="8112605">Max</span><span class="op" id="8112608">.</span><span class="ident" id="8112609">Y</span><span class="op" id="8112610">;</span>&nbsp;<span class="ident" id="8112612">y</span><span class="op" id="8112613">++</span>&nbsp;<span class="op" id="8112616">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112621">for</span>&nbsp;<span class="ident" id="8112625">x</span>&nbsp;<span class="op" id="8112627">:=</span>&nbsp;<span class="ident" id="8112630">b</span><span class="op" id="8112631">.</span><span class="ident" id="8112632">Min</span><span class="op" id="8112635">.</span><span class="ident" id="8112636">X</span><span class="op" id="8112637">;</span>&nbsp;<span class="ident" id="8112639">x</span>&nbsp;<span class="op" id="8112641">&lt;</span>&nbsp;<span class="ident" id="8112643">b</span><span class="op" id="8112644">.</span><span class="ident" id="8112645">Max</span><span class="op" id="8112648">.</span><span class="ident" id="8112649">X</span><span class="op" id="8112650">;</span>&nbsp;<span class="ident" id="8112652">x</span><span class="op" id="8112653">++</span>&nbsp;<span class="op" id="8112656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112662">if</span>&nbsp;<span class="op" id="8112665">!</span><span class="ident" id="8112666">eq</span><span class="op" id="8112668">(</span><span class="ident" id="8112669">dst0</span><span class="op" id="8112673">.</span><span class="ident" id="8112674">At</span><span class="op" id="8112676">(</span><span class="ident" id="8112677">x</span><span class="op" id="8112678">,</span>&nbsp;<span class="ident" id="8112680">y</span><span class="op" id="8112681">)</span><span class="op" id="8112682">,</span>&nbsp;<span class="ident" id="8112684">dst1</span><span class="op" id="8112688">.</span><span class="ident" id="8112689">At</span><span class="op" id="8112691">(</span><span class="ident" id="8112692">x</span><span class="op" id="8112693">,</span>&nbsp;<span class="ident" id="8112695">y</span><span class="op" id="8112696">)</span><span class="op" id="8112697">)</span>&nbsp;<span class="op" id="8112699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112706">t</span><span class="op" id="8112707">.</span><span class="ident" id="8112708">Errorf</span><span class="op" id="8112714">(</span><span class="string" id="8112715">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="8112746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8112754">dName</span><span class="op" id="8112759">,</span>&nbsp;<span class="ident" id="8112761">x</span><span class="op" id="8112762">,</span>&nbsp;<span class="ident" id="8112764">y</span><span class="op" id="8112765">,</span>&nbsp;<span class="ident" id="8112767">dst0</span><span class="op" id="8112771">.</span><span class="ident" id="8112772">At</span><span class="op" id="8112774">(</span><span class="ident" id="8112775">x</span><span class="op" id="8112776">,</span>&nbsp;<span class="ident" id="8112778">y</span><span class="op" id="8112779">)</span><span class="op" id="8112780">,</span>&nbsp;<span class="ident" id="8112782">dst1</span><span class="op" id="8112786">.</span><span class="ident" id="8112787">At</span><span class="op" id="8112789">(</span><span class="ident" id="8112790">x</span><span class="op" id="8112791">,</span>&nbsp;<span class="ident" id="8112793">y</span><span class="op" id="8112794">)</span><span class="op" id="8112795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8112802">continue</span>&nbsp;<span class="ident" id="8112811">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8112832">}</span><br>
<span class="lineno"></span><span class="op" id="8112834">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
