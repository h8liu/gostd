<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3720225">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3720280">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3720334">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3720385">package</span>&nbsp;<span class="ident" id="3720393">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3720399">import</span>&nbsp;<span class="op" id="3720406">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3720409">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3720419">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3720422">//&nbsp;tagOptions&nbsp;is&nbsp;the&nbsp;string&nbsp;following&nbsp;a&nbsp;comma&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;&#34;json&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3720495">//&nbsp;tag,&nbsp;or&nbsp;the&nbsp;empty&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;include&nbsp;the&nbsp;leading&nbsp;comma.</span><br>
<span class="lineno"></span><span class="keyword" id="3720563">type</span>&nbsp;<span class="ident" id="3720568">tagOptions</span>&nbsp;<span class="builtintype" id="3720579">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3720587">//&nbsp;parseTag&nbsp;splits&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;json&nbsp;tag&nbsp;into&nbsp;its&nbsp;name&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3720650">//&nbsp;comma-separated&nbsp;options.</span><br>
<span class="lineno"></span><span class="keyword" id="3720678">func</span>&nbsp;<span class="ident" id="3720683">parseTag</span><span class="op" id="3720691">(</span><span class="ident" id="3720692">tag</span>&nbsp;<span class="builtintype" id="3720696">string</span><span class="op" id="3720702">)</span>&nbsp;<span class="op" id="3720704">(</span><span class="builtintype" id="3720705">string</span><span class="op" id="3720711">,</span>&nbsp;<span class="ident" id="3720713"><a href="/encoding/json/tags.go.html#3720568">tagOptions</a></span><span class="op" id="3720723">)</span>&nbsp;<span class="op" id="3720725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3720728">if</span>&nbsp;<span class="ident" id="3720731">idx</span>&nbsp;<span class="op" id="3720735">:=</span>&nbsp;<span class="ident" id="3720738"><a href="/encoding/json/tags.go.html#3720409">strings</a></span><span class="op" id="3720745">.</span><span class="ident" id="3720746">Index</span><span class="op" id="3720751">(</span><span class="ident" id="3720752"><a href="/encoding/json/tags.go.html#3720692">tag</a></span><span class="op" id="3720755">,</span>&nbsp;<span class="string" id="3720757">&#34;,&#34;</span><span class="op" id="3720760">)</span><span class="op" id="3720761">;</span>&nbsp;<span class="ident" id="3720763"><a href="/encoding/json/tags.go.html#3720731">idx</a></span>&nbsp;<span class="op" id="3720767">!=</span>&nbsp;<span class="op" id="3720770">-</span><span class="num" id="3720771">1</span>&nbsp;<span class="op" id="3720773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3720777">return</span>&nbsp;<span class="ident" id="3720784"><a href="/encoding/json/tags.go.html#3720692">tag</a></span><span class="op" id="3720787">[</span><span class="op" id="3720788">:</span><span class="ident" id="3720789"><a href="/encoding/json/tags.go.html#3720731">idx</a></span><span class="op" id="3720792">]</span><span class="op" id="3720793">,</span>&nbsp;<span class="ident" id="3720795"><a href="/encoding/json/tags.go.html#3720568">tagOptions</a></span><span class="op" id="3720805">(</span><span class="ident" id="3720806"><a href="/encoding/json/tags.go.html#3720692">tag</a></span><span class="op" id="3720809">[</span><span class="ident" id="3720810"><a href="/encoding/json/tags.go.html#3720731">idx</a></span><span class="op" id="3720813">+</span><span class="num" id="3720814">1</span><span class="op" id="3720815">:</span><span class="op" id="3720816">]</span><span class="op" id="3720817">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3720820">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3720823">return</span>&nbsp;<span class="ident" id="3720830"><a href="/encoding/json/tags.go.html#3720692">tag</a></span><span class="op" id="3720833">,</span>&nbsp;<span class="ident" id="3720835"><a href="/encoding/json/tags.go.html#3720568">tagOptions</a></span><span class="op" id="3720845">(</span><span class="string" id="3720846">&#34;&#34;</span><span class="op" id="3720848">)</span><br>
<span class="lineno"></span><span class="op" id="3720850">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3720853">//&nbsp;Contains&nbsp;reports&nbsp;whether&nbsp;a&nbsp;comma-separated&nbsp;list&nbsp;of&nbsp;options</span><br>
<span class="lineno">25</span><span class="comment" id="3720915">//&nbsp;contains&nbsp;a&nbsp;particular&nbsp;substr&nbsp;flag.&nbsp;substr&nbsp;must&nbsp;be&nbsp;surrounded&nbsp;by&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3720984">//&nbsp;string&nbsp;boundary&nbsp;or&nbsp;commas.</span><br>
<span class="lineno"></span><span class="keyword" id="3721014">func</span>&nbsp;<span class="op" id="3721019">(</span><span class="ident" id="3721020">o</span>&nbsp;<span class="ident" id="3721022"><a href="/encoding/json/tags.go.html#3720568">tagOptions</a></span><span class="op" id="3721032">)</span>&nbsp;<span class="ident" id="3721034">Contains</span><span class="op" id="3721042">(</span><span class="ident" id="3721043">optionName</span>&nbsp;<span class="builtintype" id="3721054">string</span><span class="op" id="3721060">)</span>&nbsp;<span class="builtintype" id="3721062">bool</span>&nbsp;<span class="op" id="3721067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721070">if</span>&nbsp;<span class="builtinfunc" id="3721073">len</span><span class="op" id="3721076">(</span><span class="ident" id="3721077"><a href="/encoding/json/tags.go.html#3721020">o</a></span><span class="op" id="3721078">)</span>&nbsp;<span class="op" id="3721080">==</span>&nbsp;<span class="num" id="3721083">0</span>&nbsp;<span class="op" id="3721085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721089">return</span>&nbsp;<span class="ident" id="3721096">false</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3721103">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3721106">s</span>&nbsp;<span class="op" id="3721108">:=</span>&nbsp;<span class="builtintype" id="3721111">string</span><span class="op" id="3721117">(</span><span class="ident" id="3721118"><a href="/encoding/json/tags.go.html#3721020">o</a></span><span class="op" id="3721119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721122">for</span>&nbsp;<span class="ident" id="3721126"><a href="/encoding/json/tags.go.html#3721106">s</a></span>&nbsp;<span class="op" id="3721128">!=</span>&nbsp;<span class="string" id="3721131">&#34;&#34;</span>&nbsp;<span class="op" id="3721134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721138">var</span>&nbsp;<span class="ident" id="3721142">next</span>&nbsp;<span class="builtintype" id="3721147">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3721156">i</span>&nbsp;<span class="op" id="3721158">:=</span>&nbsp;<span class="ident" id="3721161"><a href="/encoding/json/tags.go.html#3720409">strings</a></span><span class="op" id="3721168">.</span><span class="ident" id="3721169">Index</span><span class="op" id="3721174">(</span><span class="ident" id="3721175"><a href="/encoding/json/tags.go.html#3721106">s</a></span><span class="op" id="3721176">,</span>&nbsp;<span class="string" id="3721178">&#34;,&#34;</span><span class="op" id="3721181">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721185">if</span>&nbsp;<span class="ident" id="3721188"><a href="/encoding/json/tags.go.html#3721156">i</a></span>&nbsp;<span class="op" id="3721190">&gt;=</span>&nbsp;<span class="num" id="3721193">0</span>&nbsp;<span class="op" id="3721195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3721200"><a href="/encoding/json/tags.go.html#3721106">s</a></span><span class="op" id="3721201">,</span>&nbsp;<span class="ident" id="3721203"><a href="/encoding/json/tags.go.html#3721142">next</a></span>&nbsp;<span class="op" id="3721208">=</span>&nbsp;<span class="ident" id="3721210"><a href="/encoding/json/tags.go.html#3721106">s</a></span><span class="op" id="3721211">[</span><span class="op" id="3721212">:</span><span class="ident" id="3721213"><a href="/encoding/json/tags.go.html#3721156">i</a></span><span class="op" id="3721214">]</span><span class="op" id="3721215">,</span>&nbsp;<span class="ident" id="3721217"><a href="/encoding/json/tags.go.html#3721106">s</a></span><span class="op" id="3721218">[</span><span class="ident" id="3721219"><a href="/encoding/json/tags.go.html#3721156">i</a></span><span class="op" id="3721220">+</span><span class="num" id="3721221">1</span><span class="op" id="3721222">:</span><span class="op" id="3721223">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3721227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721231">if</span>&nbsp;<span class="ident" id="3721234"><a href="/encoding/json/tags.go.html#3721106">s</a></span>&nbsp;<span class="op" id="3721236">==</span>&nbsp;<span class="ident" id="3721239"><a href="/encoding/json/tags.go.html#3721043">optionName</a></span>&nbsp;<span class="op" id="3721250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721255">return</span>&nbsp;<span class="ident" id="3721262">true</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3721269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3721273"><a href="/encoding/json/tags.go.html#3721106">s</a></span>&nbsp;<span class="op" id="3721275">=</span>&nbsp;<span class="ident" id="3721277"><a href="/encoding/json/tags.go.html#3721142">next</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3721283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3721286">return</span>&nbsp;<span class="ident" id="3721293">false</span><br>
<span class="lineno"></span><span class="op" id="3721299">}</span>
</div>
</body>
</html>
