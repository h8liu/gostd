<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5309151">package</span>&nbsp;<span class="ident" id="5309159">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5309166">//&nbsp;PhyMemory&nbsp;is&nbsp;a&nbsp;collection&nbsp;of&nbsp;contiguous&nbsp;pages.</span><br>
<span class="lineno"></span><span class="keyword" id="5309216">type</span>&nbsp;<span class="ident" id="5309221">phyMemory</span>&nbsp;<span class="keyword" id="5309231">struct</span>&nbsp;<span class="op" id="5309238">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309241">npage</span>&nbsp;<span class="builtintype" id="5309247">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309255">pages</span>&nbsp;<span class="keyword" id="5309261">map</span><span class="op" id="5309264">[</span><span class="builtintype" id="5309265">uint32</span><span class="op" id="5309271">]</span><span class="op" id="5309272">*</span><span class="ident" id="5309273"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><br>
<span class="lineno"></span><span class="op" id="5309278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5309281">const</span>&nbsp;<span class="op" id="5309287">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309290">pageVoid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5309304">=</span>&nbsp;<span class="num" id="5309306">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309309">pageInterrupt</span>&nbsp;<span class="op" id="5309323">=</span>&nbsp;<span class="num" id="5309325">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309328">pageBasicIO</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5309342">=</span>&nbsp;<span class="num" id="5309344">2</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309348">pageBootImage</span>&nbsp;<span class="op" id="5309362">=</span>&nbsp;<span class="num" id="5309364">8</span><br>
<span class="lineno">15</span><span class="op" id="5309366">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5309369">//&nbsp;NewPhyMemory&nbsp;creates&nbsp;a&nbsp;physical&nbsp;memory&nbsp;of&nbsp;size&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="5309426">func</span>&nbsp;<span class="ident" id="5309431">newPhyMemory</span><span class="op" id="5309443">(</span><span class="ident" id="5309444">size</span>&nbsp;<span class="builtintype" id="5309449">uint32</span><span class="op" id="5309455">)</span>&nbsp;<span class="op" id="5309457">*</span><span class="ident" id="5309458"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span>&nbsp;<span class="op" id="5309468">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309471">if</span>&nbsp;<span class="ident" id="5309474"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309444">size</a></span><span class="op" id="5309478">%</span><span class="ident" id="5309479"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span>&nbsp;<span class="op" id="5309488">!=</span>&nbsp;<span class="num" id="5309491">0</span>&nbsp;<span class="op" id="5309493">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5309497">panic</span><span class="op" id="5309502">(</span><span class="string" id="5309503">&#34;size&nbsp;misaligned&#34;</span><span class="op" id="5309520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5309523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309527">ret</span>&nbsp;<span class="op" id="5309531">:=</span>&nbsp;<span class="builtinfunc" id="5309534">new</span><span class="op" id="5309537">(</span><span class="ident" id="5309538"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5309547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309550"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309527">ret</a></span><span class="op" id="5309553">.</span><span class="ident" id="5309554">pages</span>&nbsp;<span class="op" id="5309560">=</span>&nbsp;<span class="builtinfunc" id="5309562">make</span><span class="op" id="5309566">(</span><span class="keyword" id="5309567">map</span><span class="op" id="5309570">[</span><span class="builtintype" id="5309571">uint32</span><span class="op" id="5309577">]</span><span class="op" id="5309578">*</span><span class="ident" id="5309579"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><span class="op" id="5309583">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309586"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309527">ret</a></span><span class="op" id="5309589">.</span><span class="ident" id="5309590">npage</span>&nbsp;<span class="op" id="5309596">=</span>&nbsp;<span class="ident" id="5309598"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309444">size</a></span>&nbsp;<span class="op" id="5309603">/</span>&nbsp;<span class="ident" id="5309605"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309616">return</span>&nbsp;<span class="ident" id="5309623"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309527">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5309627">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="5309630">//&nbsp;Size&nbsp;returns&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;physical&nbsp;memory.</span><br>
<span class="lineno"></span><span class="keyword" id="5309679">func</span>&nbsp;<span class="op" id="5309684">(</span><span class="ident" id="5309685">pm</span>&nbsp;<span class="op" id="5309688">*</span><span class="ident" id="5309689"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5309698">)</span>&nbsp;<span class="ident" id="5309700">Size</span><span class="op" id="5309704">(</span><span class="op" id="5309705">)</span>&nbsp;<span class="builtintype" id="5309707">uint32</span>&nbsp;<span class="op" id="5309714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309717">return</span>&nbsp;<span class="ident" id="5309724"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309685">pm</a></span><span class="op" id="5309726">.</span><span class="ident" id="5309727">npage</span>&nbsp;<span class="op" id="5309733">*</span>&nbsp;<span class="ident" id="5309735"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><br>
<span class="lineno"></span><span class="op" id="5309744">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5309747">//&nbsp;Page&nbsp;returns&nbsp;the&nbsp;page&nbsp;for&nbsp;the&nbsp;particular&nbsp;page&nbsp;number</span><br>
<span class="lineno"></span><span class="comment" id="5309803">//&nbsp;Returns&nbsp;nil&nbsp;when&nbsp;the&nbsp;page&nbsp;number&nbsp;is&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno"></span><span class="keyword" id="5309855">func</span>&nbsp;<span class="op" id="5309860">(</span><span class="ident" id="5309861">pm</span>&nbsp;<span class="op" id="5309864">*</span><span class="ident" id="5309865"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5309874">)</span>&nbsp;<span class="ident" id="5309876">Page</span><span class="op" id="5309880">(</span><span class="ident" id="5309881">pn</span>&nbsp;<span class="builtintype" id="5309884">uint32</span><span class="op" id="5309890">)</span>&nbsp;<span class="op" id="5309892">*</span><span class="ident" id="5309893"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span>&nbsp;<span class="op" id="5309898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309901">if</span>&nbsp;<span class="ident" id="5309904"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309881">pn</a></span>&nbsp;<span class="op" id="5309907">&gt;=</span>&nbsp;<span class="ident" id="5309910"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309861">pm</a></span><span class="op" id="5309912">.</span><span class="ident" id="5309913">npage</span>&nbsp;<span class="op" id="5309919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309923">return</span>&nbsp;<span class="ident" id="5309930">nil</span>&nbsp;<span class="comment" id="5309934">//&nbsp;out&nbsp;of&nbsp;range</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5309951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5309955">ret</span><span class="op" id="5309958">,</span>&nbsp;<span class="ident" id="5309960">found</span>&nbsp;<span class="op" id="5309966">:=</span>&nbsp;<span class="ident" id="5309969"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309861">pm</a></span><span class="op" id="5309971">.</span><span class="ident" id="5309972">pages</span><span class="op" id="5309977">[</span><span class="ident" id="5309978"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309881">pn</a></span><span class="op" id="5309980">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5309983">if</span>&nbsp;<span class="op" id="5309986">!</span><span class="ident" id="5309987"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309960">found</a></span>&nbsp;<span class="op" id="5309993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5309997">//&nbsp;create&nbsp;an&nbsp;empty&nbsp;page&nbsp;on&nbsp;demand</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310033"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309955">ret</a></span>&nbsp;<span class="op" id="5310037">=</span>&nbsp;<span class="ident" id="5310039"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304769">newPage</a></span><span class="op" id="5310046">(</span><span class="op" id="5310047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310051"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309861">pm</a></span><span class="op" id="5310053">.</span><span class="ident" id="5310054">pages</span><span class="op" id="5310059">[</span><span class="ident" id="5310060"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309881">pn</a></span><span class="op" id="5310062">]</span>&nbsp;<span class="op" id="5310064">=</span>&nbsp;<span class="ident" id="5310066"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309955">ret</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5310071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310075">return</span>&nbsp;<span class="ident" id="5310082"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309955">ret</a></span><br>
<span class="lineno">50</span><span class="op" id="5310086">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5310089">func</span>&nbsp;<span class="op" id="5310094">(</span><span class="ident" id="5310095">pm</span>&nbsp;<span class="op" id="5310098">*</span><span class="ident" id="5310099"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5310108">)</span>&nbsp;<span class="ident" id="5310110">pageForByte</span><span class="op" id="5310121">(</span><span class="ident" id="5310122">addr</span>&nbsp;<span class="builtintype" id="5310127">uint32</span><span class="op" id="5310133">)</span>&nbsp;<span class="op" id="5310135">(</span><span class="op" id="5310136">*</span><span class="ident" id="5310137"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><span class="op" id="5310141">,</span>&nbsp;<span class="op" id="5310143">*</span><span class="ident" id="5310144"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5310149">)</span>&nbsp;<span class="op" id="5310151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310154">p</span>&nbsp;<span class="op" id="5310156">:=</span>&nbsp;<span class="ident" id="5310159"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310095">pm</a></span><span class="op" id="5310161">.</span><span class="ident" id="5310162">Page</span><span class="op" id="5310166">(</span><span class="ident" id="5310167"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310122">addr</a></span>&nbsp;<span class="op" id="5310172">/</span>&nbsp;<span class="ident" id="5310174"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304619">PageSize</a></span><span class="op" id="5310182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310185">if</span>&nbsp;<span class="ident" id="5310188"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310154">p</a></span>&nbsp;<span class="op" id="5310190">==</span>&nbsp;<span class="ident" id="5310193">nil</span>&nbsp;<span class="op" id="5310197">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310201">return</span>&nbsp;<span class="ident" id="5310208">nil</span><span class="op" id="5310211">,</span>&nbsp;<span class="ident" id="5310213"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290972">errOutOfRange</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5310228">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310231">return</span>&nbsp;<span class="ident" id="5310238"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310154">p</a></span><span class="op" id="5310239">,</span>&nbsp;<span class="ident" id="5310241">nil</span><br>
<span class="lineno"></span><span class="op" id="5310245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5310248">func</span>&nbsp;<span class="op" id="5310253">(</span><span class="ident" id="5310254">pm</span>&nbsp;<span class="op" id="5310257">*</span><span class="ident" id="5310258"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5310267">)</span>&nbsp;<span class="ident" id="5310269">pageForWord</span><span class="op" id="5310280">(</span><span class="ident" id="5310281">addr</span>&nbsp;<span class="builtintype" id="5310286">uint32</span><span class="op" id="5310292">)</span>&nbsp;<span class="op" id="5310294">(</span><span class="op" id="5310295">*</span><span class="ident" id="5310296"><a href="/lonnie.io/e8vm/arch8/page.go.html#5304696">page</a></span><span class="op" id="5310300">,</span>&nbsp;<span class="op" id="5310302">*</span><span class="ident" id="5310303"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5310308">)</span>&nbsp;<span class="op" id="5310310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310313">if</span>&nbsp;<span class="ident" id="5310316"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310281">addr</a></span><span class="op" id="5310320">%</span><span class="num" id="5310321">4</span>&nbsp;<span class="op" id="5310323">!=</span>&nbsp;<span class="num" id="5310326">0</span>&nbsp;<span class="op" id="5310328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310332">return</span>&nbsp;<span class="ident" id="5310339">nil</span><span class="op" id="5310342">,</span>&nbsp;<span class="ident" id="5310344"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5291029">errMisalign</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5310357">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310360">return</span>&nbsp;<span class="ident" id="5310367"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310254">pm</a></span><span class="op" id="5310369">.</span><span class="ident" id="5310370">pageForByte</span><span class="op" id="5310381">(</span><span class="ident" id="5310382"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310281">addr</a></span><span class="op" id="5310386">)</span><br>
<span class="lineno">65</span><span class="op" id="5310388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5310391">//&nbsp;ReadByte&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5310440">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;out&nbsp;of&nbsp;range,&nbsp;it&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5310496">func</span>&nbsp;<span class="op" id="5310501">(</span><span class="ident" id="5310502">pm</span>&nbsp;<span class="op" id="5310505">*</span><span class="ident" id="5310506"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5310515">)</span>&nbsp;<span class="ident" id="5310517">ReadByte</span><span class="op" id="5310525">(</span><span class="ident" id="5310526">addr</span>&nbsp;<span class="builtintype" id="5310531">uint32</span><span class="op" id="5310537">)</span>&nbsp;<span class="op" id="5310539">(</span><span class="builtintype" id="5310540">byte</span><span class="op" id="5310544">,</span>&nbsp;<span class="op" id="5310546">*</span><span class="ident" id="5310547"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5310552">)</span>&nbsp;<span class="op" id="5310554">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310557">p</span><span class="op" id="5310558">,</span>&nbsp;<span class="ident" id="5310560">e</span>&nbsp;<span class="op" id="5310562">:=</span>&nbsp;<span class="ident" id="5310565"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310502">pm</a></span><span class="op" id="5310567">.</span><span class="ident" id="5310568">pageForByte</span><span class="op" id="5310579">(</span><span class="ident" id="5310580"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310526">addr</a></span><span class="op" id="5310584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310587">if</span>&nbsp;<span class="ident" id="5310590"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310560">e</a></span>&nbsp;<span class="op" id="5310592">!=</span>&nbsp;<span class="ident" id="5310595">nil</span>&nbsp;<span class="op" id="5310599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310603">return</span>&nbsp;<span class="num" id="5310610">0</span><span class="op" id="5310611">,</span>&nbsp;<span class="ident" id="5310613"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310560">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5310616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310619">return</span>&nbsp;<span class="ident" id="5310626"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310557">p</a></span><span class="op" id="5310627">.</span><span class="ident" id="5310628">ReadByte</span><span class="op" id="5310636">(</span><span class="ident" id="5310637"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310526">addr</a></span><span class="op" id="5310641">)</span><span class="op" id="5310642">,</span>&nbsp;<span class="ident" id="5310644">nil</span><br>
<span class="lineno">75</span><span class="op" id="5310648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5310651">//&nbsp;WriteByte&nbsp;writes&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5310702">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;out&nbsp;of&nbsp;range,&nbsp;it&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5310758">func</span>&nbsp;<span class="op" id="5310763">(</span><span class="ident" id="5310764">pm</span>&nbsp;<span class="op" id="5310767">*</span><span class="ident" id="5310768"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5310777">)</span>&nbsp;<span class="ident" id="5310779">WriteByte</span><span class="op" id="5310788">(</span><span class="ident" id="5310789">addr</span>&nbsp;<span class="builtintype" id="5310794">uint32</span><span class="op" id="5310800">,</span>&nbsp;<span class="ident" id="5310802">v</span>&nbsp;<span class="builtintype" id="5310804">byte</span><span class="op" id="5310808">)</span>&nbsp;<span class="op" id="5310810">*</span><span class="ident" id="5310811"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5310817">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310820">p</span><span class="op" id="5310821">,</span>&nbsp;<span class="ident" id="5310823">e</span>&nbsp;<span class="op" id="5310825">:=</span>&nbsp;<span class="ident" id="5310828"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310764">pm</a></span><span class="op" id="5310830">.</span><span class="ident" id="5310831">pageForByte</span><span class="op" id="5310842">(</span><span class="ident" id="5310843"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310789">addr</a></span><span class="op" id="5310847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310850">if</span>&nbsp;<span class="ident" id="5310853"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310823">e</a></span>&nbsp;<span class="op" id="5310855">!=</span>&nbsp;<span class="ident" id="5310858">nil</span>&nbsp;<span class="op" id="5310862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310866">return</span>&nbsp;<span class="ident" id="5310873"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310823">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5310876">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5310879"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310820">p</a></span><span class="op" id="5310880">.</span><span class="ident" id="5310881">WriteByte</span><span class="op" id="5310890">(</span><span class="ident" id="5310891"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310789">addr</a></span><span class="op" id="5310895">,</span>&nbsp;<span class="ident" id="5310897"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310802">v</a></span><span class="op" id="5310898">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5310901">return</span>&nbsp;<span class="ident" id="5310908"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5310823">e</a></span><br>
<span class="lineno"></span><span class="op" id="5310910">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5310913">//&nbsp;ReadWord&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5310962">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;not&nbsp;4-byte&nbsp;aligned,&nbsp;it&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">90</span><span class="keyword" id="5311040">func</span>&nbsp;<span class="op" id="5311045">(</span><span class="ident" id="5311046">pm</span>&nbsp;<span class="op" id="5311049">*</span><span class="ident" id="5311050"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5311059">)</span>&nbsp;<span class="ident" id="5311061">ReadWord</span><span class="op" id="5311069">(</span><span class="ident" id="5311070">addr</span>&nbsp;<span class="builtintype" id="5311075">uint32</span><span class="op" id="5311081">)</span>&nbsp;<span class="op" id="5311083">(</span><span class="builtintype" id="5311084">uint32</span><span class="op" id="5311090">,</span>&nbsp;<span class="op" id="5311092">*</span><span class="ident" id="5311093"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span><span class="op" id="5311098">)</span>&nbsp;<span class="op" id="5311100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5311103">p</span><span class="op" id="5311104">,</span>&nbsp;<span class="ident" id="5311106">e</span>&nbsp;<span class="op" id="5311108">:=</span>&nbsp;<span class="ident" id="5311111"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311046">pm</a></span><span class="op" id="5311113">.</span><span class="ident" id="5311114">pageForWord</span><span class="op" id="5311125">(</span><span class="ident" id="5311126"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311070">addr</a></span><span class="op" id="5311130">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311133">if</span>&nbsp;<span class="ident" id="5311136"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311106">e</a></span>&nbsp;<span class="op" id="5311138">!=</span>&nbsp;<span class="ident" id="5311141">nil</span>&nbsp;<span class="op" id="5311145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311149">return</span>&nbsp;<span class="num" id="5311156">0</span><span class="op" id="5311157">,</span>&nbsp;<span class="ident" id="5311159"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311106">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5311162">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311165">return</span>&nbsp;<span class="ident" id="5311172"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311103">p</a></span><span class="op" id="5311173">.</span><span class="ident" id="5311174">ReadWord</span><span class="op" id="5311182">(</span><span class="ident" id="5311183"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311070">addr</a></span><span class="op" id="5311187">)</span><span class="op" id="5311188">,</span>&nbsp;<span class="ident" id="5311190">nil</span><br>
<span class="lineno"></span><span class="op" id="5311194">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5311197">//&nbsp;WriteWord&nbsp;reads&nbsp;the&nbsp;byte&nbsp;at&nbsp;the&nbsp;given&nbsp;address.</span><br>
<span class="lineno"></span><span class="comment" id="5311247">//&nbsp;If&nbsp;the&nbsp;address&nbsp;is&nbsp;out&nbsp;of&nbsp;range&nbsp;or&nbsp;not&nbsp;4-byte&nbsp;aligned,&nbsp;it&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno">100</span><span class="keyword" id="5311325">func</span>&nbsp;<span class="op" id="5311330">(</span><span class="ident" id="5311331">pm</span>&nbsp;<span class="op" id="5311334">*</span><span class="ident" id="5311335"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5309221">phyMemory</a></span><span class="op" id="5311344">)</span>&nbsp;<span class="ident" id="5311346">WriteWord</span><span class="op" id="5311355">(</span><span class="ident" id="5311356">addr</span>&nbsp;<span class="builtintype" id="5311361">uint32</span><span class="op" id="5311367">,</span>&nbsp;<span class="ident" id="5311369">v</span>&nbsp;<span class="builtintype" id="5311371">uint32</span><span class="op" id="5311377">)</span>&nbsp;<span class="op" id="5311379">*</span><span class="ident" id="5311380"><a href="/lonnie.io/e8vm/arch8/exception.go.html#5290324">Excep</a></span>&nbsp;<span class="op" id="5311386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5311389">p</span><span class="op" id="5311390">,</span>&nbsp;<span class="ident" id="5311392">e</span>&nbsp;<span class="op" id="5311394">:=</span>&nbsp;<span class="ident" id="5311397"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311331">pm</a></span><span class="op" id="5311399">.</span><span class="ident" id="5311400">pageForWord</span><span class="op" id="5311411">(</span><span class="ident" id="5311412"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311356">addr</a></span><span class="op" id="5311416">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311419">if</span>&nbsp;<span class="ident" id="5311422"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311392">e</a></span>&nbsp;<span class="op" id="5311424">!=</span>&nbsp;<span class="ident" id="5311427">nil</span>&nbsp;<span class="op" id="5311431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311435">return</span>&nbsp;<span class="ident" id="5311442"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311392">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5311445">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5311448"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311389">p</a></span><span class="op" id="5311449">.</span><span class="ident" id="5311450">WriteWord</span><span class="op" id="5311459">(</span><span class="ident" id="5311460"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311356">addr</a></span><span class="op" id="5311464">,</span>&nbsp;<span class="ident" id="5311466"><a href="/lonnie.io/e8vm/arch8/phy_memory.go.html#5311369">v</a></span><span class="op" id="5311467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5311470">return</span>&nbsp;<span class="ident" id="5311477">nil</span><br>
<span class="lineno"></span><span class="op" id="5311481">}</span>
</div>
</body>
</html>
