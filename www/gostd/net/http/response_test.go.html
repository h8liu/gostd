<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html" class="current">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8268069">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8268125">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8268179">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8268230">package</span>&nbsp;<span class="ident" id="8268238">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268244">import</span>&nbsp;<span class="op" id="8268251">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268254">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268263">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268272">&#34;compress/gzip&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268289">&#34;crypto/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268304">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268311">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268317">&#34;io/ioutil&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268330">&#34;net/http/internal&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268351">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268362">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268373">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268383">&#34;strings&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268394">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8268404">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268407">type</span>&nbsp;<span class="ident" id="8268412">respTest</span>&nbsp;<span class="keyword" id="8268421">struct</span>&nbsp;<span class="op" id="8268428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268431">Raw</span>&nbsp;&nbsp;<span class="builtintype" id="8268436">string</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268444">Resp</span>&nbsp;<span class="ident" id="8268449">Response</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268459">Body</span>&nbsp;<span class="builtintype" id="8268464">string</span><br>
<span class="lineno"></span><span class="op" id="8268471">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268474">func</span>&nbsp;<span class="ident" id="8268479">dummyReq</span><span class="op" id="8268487">(</span><span class="ident" id="8268488">method</span>&nbsp;<span class="builtintype" id="8268495">string</span><span class="op" id="8268501">)</span>&nbsp;<span class="op" id="8268503">*</span><span class="ident" id="8268504">Request</span>&nbsp;<span class="op" id="8268512">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8268515">return</span>&nbsp;<span class="op" id="8268522">&amp;</span><span class="ident" id="8268523">Request</span><span class="op" id="8268530">{</span><span class="ident" id="8268531">Method</span><span class="op" id="8268537">:</span>&nbsp;<span class="ident" id="8268539">method</span><span class="op" id="8268545">}</span><br>
<span class="lineno"></span><span class="op" id="8268547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268550">func</span>&nbsp;<span class="ident" id="8268555">dummyReq11</span><span class="op" id="8268565">(</span><span class="ident" id="8268566">method</span>&nbsp;<span class="builtintype" id="8268573">string</span><span class="op" id="8268579">)</span>&nbsp;<span class="op" id="8268581">*</span><span class="ident" id="8268582">Request</span>&nbsp;<span class="op" id="8268590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8268593">return</span>&nbsp;<span class="op" id="8268600">&amp;</span><span class="ident" id="8268601">Request</span><span class="op" id="8268608">{</span><span class="ident" id="8268609">Method</span><span class="op" id="8268615">:</span>&nbsp;<span class="ident" id="8268617">method</span><span class="op" id="8268623">,</span>&nbsp;<span class="ident" id="8268625">Proto</span><span class="op" id="8268630">:</span>&nbsp;<span class="string" id="8268632">&#34;HTTP/1.1&#34;</span><span class="op" id="8268642">,</span>&nbsp;<span class="ident" id="8268644">ProtoMajor</span><span class="op" id="8268654">:</span>&nbsp;<span class="num" id="8268656">1</span><span class="op" id="8268657">,</span>&nbsp;<span class="ident" id="8268659">ProtoMinor</span><span class="op" id="8268669">:</span>&nbsp;<span class="num" id="8268671">1</span><span class="op" id="8268672">}</span><br>
<span class="lineno">35</span><span class="op" id="8268674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8268677">var</span>&nbsp;<span class="ident" id="8268681">respTests</span>&nbsp;<span class="op" id="8268691">=</span>&nbsp;<span class="op" id="8268693">[</span><span class="op" id="8268694">]</span><span class="ident" id="8268695">respTest</span><span class="op" id="8268703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8268706">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8268753">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268757">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8268779">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268784">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8268808">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268813">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8268820">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268825">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8268838">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268843">Response</span><span class="op" id="8268851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268856">Status</span><span class="op" id="8268862">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268868">&#34;200&nbsp;OK&#34;</span><span class="op" id="8268876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268881">StatusCode</span><span class="op" id="8268891">:</span>&nbsp;<span class="num" id="8268893">200</span><span class="op" id="8268896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268901">Proto</span><span class="op" id="8268906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8268913">&#34;HTTP/1.0&#34;</span><span class="op" id="8268923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268928">ProtoMajor</span><span class="op" id="8268938">:</span>&nbsp;<span class="num" id="8268940">1</span><span class="op" id="8268941">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268946">ProtoMinor</span><span class="op" id="8268956">:</span>&nbsp;<span class="num" id="8268958">0</span><span class="op" id="8268959">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268964">Request</span><span class="op" id="8268971">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268976">dummyReq</span><span class="op" id="8268984">(</span><span class="string" id="8268985">&#34;GET&#34;</span><span class="op" id="8268990">)</span><span class="op" id="8268991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8268996">Header</span><span class="op" id="8269002">:</span>&nbsp;<span class="ident" id="8269004">Header</span><span class="op" id="8269010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269016">&#34;Connection&#34;</span><span class="op" id="8269028">:</span>&nbsp;<span class="op" id="8269030">{</span><span class="string" id="8269031">&#34;close&#34;</span><span class="op" id="8269038">}</span><span class="op" id="8269039">,</span>&nbsp;<span class="comment" id="8269041">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269066">}</span><span class="op" id="8269067">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269072">Close</span><span class="op" id="8269077">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8269087">true</span><span class="op" id="8269091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269096">ContentLength</span><span class="op" id="8269109">:</span>&nbsp;<span class="op" id="8269111">-</span><span class="num" id="8269112">1</span><span class="op" id="8269113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269117">}</span><span class="op" id="8269118">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269123">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8269136">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269139">}</span><span class="op" id="8269140">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8269144">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;response&nbsp;without&nbsp;Content-Length&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8269202">//&nbsp;Connection&nbsp;headers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269226">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269230">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8269252">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269257">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8269264">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269269">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8269282">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269287">Response</span><span class="op" id="8269295">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269300">Status</span><span class="op" id="8269306">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269315">&#34;200&nbsp;OK&#34;</span><span class="op" id="8269323">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269328">StatusCode</span><span class="op" id="8269338">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269343">200</span><span class="op" id="8269346">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269351">Proto</span><span class="op" id="8269356">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269366">&#34;HTTP/1.1&#34;</span><span class="op" id="8269376">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269381">ProtoMajor</span><span class="op" id="8269391">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269396">1</span><span class="op" id="8269397">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269402">ProtoMinor</span><span class="op" id="8269412">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269417">1</span><span class="op" id="8269418">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269423">Header</span><span class="op" id="8269429">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269438">Header</span><span class="op" id="8269444">{</span><span class="op" id="8269445">}</span><span class="op" id="8269446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269451">Request</span><span class="op" id="8269458">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269466">dummyReq</span><span class="op" id="8269474">(</span><span class="string" id="8269475">&#34;GET&#34;</span><span class="op" id="8269480">)</span><span class="op" id="8269481">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269486">Close</span><span class="op" id="8269491">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8269501">true</span><span class="op" id="8269505">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269510">ContentLength</span><span class="op" id="8269523">:</span>&nbsp;<span class="op" id="8269525">-</span><span class="num" id="8269526">1</span><span class="op" id="8269527">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269531">}</span><span class="op" id="8269532">,</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269537">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8269550">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269553">}</span><span class="op" id="8269554">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8269558">//&nbsp;Unchunked&nbsp;HTTP/1.1&nbsp;204&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269622">&#34;HTTP/1.1&nbsp;204&nbsp;No&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="8269652">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269657">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8269664">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269669">&#34;Body&nbsp;should&nbsp;not&nbsp;be&nbsp;read!\n&#34;</span><span class="op" id="8269697">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269702">Response</span><span class="op" id="8269710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269715">Status</span><span class="op" id="8269721">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269730">&#34;204&nbsp;No&nbsp;Content&#34;</span><span class="op" id="8269746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269751">StatusCode</span><span class="op" id="8269761">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269766">204</span><span class="op" id="8269769">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269774">Proto</span><span class="op" id="8269779">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269789">&#34;HTTP/1.1&#34;</span><span class="op" id="8269799">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269804">ProtoMajor</span><span class="op" id="8269814">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269819">1</span><span class="op" id="8269820">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269825">ProtoMinor</span><span class="op" id="8269835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8269840">1</span><span class="op" id="8269841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269846">Header</span><span class="op" id="8269852">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269861">Header</span><span class="op" id="8269867">{</span><span class="op" id="8269868">}</span><span class="op" id="8269869">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269874">Request</span><span class="op" id="8269881">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269889">dummyReq</span><span class="op" id="8269897">(</span><span class="string" id="8269898">&#34;GET&#34;</span><span class="op" id="8269903">)</span><span class="op" id="8269904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269909">Close</span><span class="op" id="8269914">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8269924">false</span><span class="op" id="8269929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8269934">ContentLength</span><span class="op" id="8269947">:</span>&nbsp;<span class="num" id="8269949">0</span><span class="op" id="8269950">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269954">}</span><span class="op" id="8269955">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8269960">&#34;&#34;</span><span class="op" id="8269962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8269965">}</span><span class="op" id="8269966">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8269970">//&nbsp;Unchunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270018">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8270040">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270045">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="8270070">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270075">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8270099">+</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270104">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8270111">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270116">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8270129">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270134">Response</span><span class="op" id="8270142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270147">Status</span><span class="op" id="8270153">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270159">&#34;200&nbsp;OK&#34;</span><span class="op" id="8270167">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270172">StatusCode</span><span class="op" id="8270182">:</span>&nbsp;<span class="num" id="8270184">200</span><span class="op" id="8270187">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270192">Proto</span><span class="op" id="8270197">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270204">&#34;HTTP/1.0&#34;</span><span class="op" id="8270214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270219">ProtoMajor</span><span class="op" id="8270229">:</span>&nbsp;<span class="num" id="8270231">1</span><span class="op" id="8270232">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270237">ProtoMinor</span><span class="op" id="8270247">:</span>&nbsp;<span class="num" id="8270249">0</span><span class="op" id="8270250">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270255">Request</span><span class="op" id="8270262">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270267">dummyReq</span><span class="op" id="8270275">(</span><span class="string" id="8270276">&#34;GET&#34;</span><span class="op" id="8270281">)</span><span class="op" id="8270282">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270287">Header</span><span class="op" id="8270293">:</span>&nbsp;<span class="ident" id="8270295">Header</span><span class="op" id="8270301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270307">&#34;Connection&#34;</span><span class="op" id="8270319">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270325">{</span><span class="string" id="8270326">&#34;close&#34;</span><span class="op" id="8270333">}</span><span class="op" id="8270334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270340">&#34;Content-Length&#34;</span><span class="op" id="8270356">:</span>&nbsp;<span class="op" id="8270358">{</span><span class="string" id="8270359">&#34;10&#34;</span><span class="op" id="8270363">}</span><span class="op" id="8270364">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270369">}</span><span class="op" id="8270370">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270375">Close</span><span class="op" id="8270380">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8270390">true</span><span class="op" id="8270394">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270399">ContentLength</span><span class="op" id="8270412">:</span>&nbsp;<span class="num" id="8270414">10</span><span class="op" id="8270416">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270420">}</span><span class="op" id="8270421">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270426">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8270439">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270442">}</span><span class="op" id="8270443">,</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8270447">//&nbsp;Chunked&nbsp;response&nbsp;without&nbsp;Content-Length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270496">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8270518">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270523">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="8270556">+</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270561">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8270568">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270573">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="8270582">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270587">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="8270605">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270610">&#34;09\r\n&#34;</span>&nbsp;<span class="op" id="8270619">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270624">&#34;continued\r\n&#34;</span>&nbsp;<span class="op" id="8270640">+</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270645">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8270653">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270658">&#34;\r\n&#34;</span><span class="op" id="8270664">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270669">Response</span><span class="op" id="8270677">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270682">Status</span><span class="op" id="8270688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270700">&#34;200&nbsp;OK&#34;</span><span class="op" id="8270708">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270713">StatusCode</span><span class="op" id="8270723">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8270731">200</span><span class="op" id="8270734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270739">Proto</span><span class="op" id="8270744">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270757">&#34;HTTP/1.1&#34;</span><span class="op" id="8270767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270772">ProtoMajor</span><span class="op" id="8270782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8270790">1</span><span class="op" id="8270791">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270796">ProtoMinor</span><span class="op" id="8270806">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8270814">1</span><span class="op" id="8270815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270820">Request</span><span class="op" id="8270827">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270838">dummyReq</span><span class="op" id="8270846">(</span><span class="string" id="8270847">&#34;GET&#34;</span><span class="op" id="8270852">)</span><span class="op" id="8270853">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270858">Header</span><span class="op" id="8270864">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270876">Header</span><span class="op" id="8270882">{</span><span class="op" id="8270883">}</span><span class="op" id="8270884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270889">Close</span><span class="op" id="8270894">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8270907">false</span><span class="op" id="8270912">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270917">ContentLength</span><span class="op" id="8270930">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270935">-</span><span class="num" id="8270936">1</span><span class="op" id="8270937">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8270942">TransferEncoding</span><span class="op" id="8270958">:</span>&nbsp;<span class="op" id="8270960">[</span><span class="op" id="8270961">]</span><span class="builtintype" id="8270962">string</span><span class="op" id="8270968">{</span><span class="string" id="8270969">&#34;chunked&#34;</span><span class="op" id="8270978">}</span><span class="op" id="8270979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8270983">}</span><span class="op" id="8270984">,</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8270989">&#34;Body&nbsp;here\ncontinued&#34;</span><span class="op" id="8271011">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271014">}</span><span class="op" id="8271015">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271019">//&nbsp;Chunked&nbsp;response&nbsp;with&nbsp;Content-Length.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271065">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8271087">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271092">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="8271125">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271130">&#34;Content-Length:&nbsp;10\r\n&#34;</span>&nbsp;<span class="op" id="8271155">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271160">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8271167">+</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271172">&#34;0a\r\n&#34;</span>&nbsp;<span class="op" id="8271181">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271186">&#34;Body&nbsp;here\n\r\n&#34;</span>&nbsp;<span class="op" id="8271204">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271209">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8271217">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271222">&#34;\r\n&#34;</span><span class="op" id="8271228">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271233">Response</span><span class="op" id="8271241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271246">Status</span><span class="op" id="8271252">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271264">&#34;200&nbsp;OK&#34;</span><span class="op" id="8271272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271277">StatusCode</span><span class="op" id="8271287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271295">200</span><span class="op" id="8271298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271303">Proto</span><span class="op" id="8271308">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271321">&#34;HTTP/1.1&#34;</span><span class="op" id="8271331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271336">ProtoMajor</span><span class="op" id="8271346">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271354">1</span><span class="op" id="8271355">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271360">ProtoMinor</span><span class="op" id="8271370">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271378">1</span><span class="op" id="8271379">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271384">Request</span><span class="op" id="8271391">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271402">dummyReq</span><span class="op" id="8271410">(</span><span class="string" id="8271411">&#34;GET&#34;</span><span class="op" id="8271416">)</span><span class="op" id="8271417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271422">Header</span><span class="op" id="8271428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271440">Header</span><span class="op" id="8271446">{</span><span class="op" id="8271447">}</span><span class="op" id="8271448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271453">Close</span><span class="op" id="8271458">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8271471">false</span><span class="op" id="8271476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271481">ContentLength</span><span class="op" id="8271494">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271499">-</span><span class="num" id="8271500">1</span><span class="op" id="8271501">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271506">TransferEncoding</span><span class="op" id="8271522">:</span>&nbsp;<span class="op" id="8271524">[</span><span class="op" id="8271525">]</span><span class="builtintype" id="8271526">string</span><span class="op" id="8271532">{</span><span class="string" id="8271533">&#34;chunked&#34;</span><span class="op" id="8271542">}</span><span class="op" id="8271543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271547">}</span><span class="op" id="8271548">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271553">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8271566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271569">}</span><span class="op" id="8271570">,</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8271574">//&nbsp;Chunked&nbsp;response&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8271625">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271629">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8271651">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271656">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span>&nbsp;<span class="op" id="8271689">+</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271694">&#34;\r\n&#34;</span><span class="op" id="8271700">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271705">Response</span><span class="op" id="8271713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271718">Status</span><span class="op" id="8271724">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271736">&#34;200&nbsp;OK&#34;</span><span class="op" id="8271744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271749">StatusCode</span><span class="op" id="8271759">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271767">200</span><span class="op" id="8271770">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271775">Proto</span><span class="op" id="8271780">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8271793">&#34;HTTP/1.1&#34;</span><span class="op" id="8271803">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271808">ProtoMajor</span><span class="op" id="8271818">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271826">1</span><span class="op" id="8271827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271832">ProtoMinor</span><span class="op" id="8271842">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8271850">1</span><span class="op" id="8271851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271856">Request</span><span class="op" id="8271863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271874">dummyReq</span><span class="op" id="8271882">(</span><span class="string" id="8271883">&#34;HEAD&#34;</span><span class="op" id="8271889">)</span><span class="op" id="8271890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271895">Header</span><span class="op" id="8271901">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271913">Header</span><span class="op" id="8271919">{</span><span class="op" id="8271920">}</span><span class="op" id="8271921">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271926">TransferEncoding</span><span class="op" id="8271942">:</span>&nbsp;<span class="op" id="8271944">[</span><span class="op" id="8271945">]</span><span class="builtintype" id="8271946">string</span><span class="op" id="8271952">{</span><span class="string" id="8271953">&#34;chunked&#34;</span><span class="op" id="8271962">}</span><span class="op" id="8271963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271968">Close</span><span class="op" id="8271973">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8271986">false</span><span class="op" id="8271991">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8271996">ContentLength</span><span class="op" id="8272009">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272014">-</span><span class="num" id="8272015">1</span><span class="op" id="8272016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272020">}</span><span class="op" id="8272021">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272026">&#34;&#34;</span><span class="op" id="8272028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272031">}</span><span class="op" id="8272032">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272036">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272085">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272089">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8272111">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272116">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="8272142">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272147">&#34;\r\n&#34;</span><span class="op" id="8272153">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272158">Response</span><span class="op" id="8272166">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272171">Status</span><span class="op" id="8272177">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272189">&#34;200&nbsp;OK&#34;</span><span class="op" id="8272197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272202">StatusCode</span><span class="op" id="8272212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272220">200</span><span class="op" id="8272223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272228">Proto</span><span class="op" id="8272233">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272246">&#34;HTTP/1.0&#34;</span><span class="op" id="8272256">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272261">ProtoMajor</span><span class="op" id="8272271">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272279">1</span><span class="op" id="8272280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272285">ProtoMinor</span><span class="op" id="8272295">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272303">0</span><span class="op" id="8272304">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272309">Request</span><span class="op" id="8272316">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272327">dummyReq</span><span class="op" id="8272335">(</span><span class="string" id="8272336">&#34;HEAD&#34;</span><span class="op" id="8272342">)</span><span class="op" id="8272343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272348">Header</span><span class="op" id="8272354">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272366">Header</span><span class="op" id="8272372">{</span><span class="string" id="8272373">&#34;Content-Length&#34;</span><span class="op" id="8272389">:</span>&nbsp;<span class="op" id="8272391">{</span><span class="string" id="8272392">&#34;256&#34;</span><span class="op" id="8272397">}</span><span class="op" id="8272398">}</span><span class="op" id="8272399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272404">TransferEncoding</span><span class="op" id="8272420">:</span>&nbsp;<span class="ident" id="8272422">nil</span><span class="op" id="8272425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272430">Close</span><span class="op" id="8272435">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8272448">true</span><span class="op" id="8272452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272457">ContentLength</span><span class="op" id="8272470">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272475">256</span><span class="op" id="8272478">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272482">}</span><span class="op" id="8272483">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272488">&#34;&#34;</span><span class="op" id="8272490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272493">}</span><span class="op" id="8272494">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272498">//&nbsp;Content-Length&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request&nbsp;with&nbsp;HTTP/1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272565">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8272587">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272592">&#34;Content-Length:&nbsp;256\r\n&#34;</span>&nbsp;<span class="op" id="8272618">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272623">&#34;\r\n&#34;</span><span class="op" id="8272629">,</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272634">Response</span><span class="op" id="8272642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272647">Status</span><span class="op" id="8272653">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272665">&#34;200&nbsp;OK&#34;</span><span class="op" id="8272673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272678">StatusCode</span><span class="op" id="8272688">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272696">200</span><span class="op" id="8272699">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272704">Proto</span><span class="op" id="8272709">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272722">&#34;HTTP/1.1&#34;</span><span class="op" id="8272732">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272737">ProtoMajor</span><span class="op" id="8272747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272755">1</span><span class="op" id="8272756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272761">ProtoMinor</span><span class="op" id="8272771">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272779">1</span><span class="op" id="8272780">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272785">Request</span><span class="op" id="8272792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272803">dummyReq</span><span class="op" id="8272811">(</span><span class="string" id="8272812">&#34;HEAD&#34;</span><span class="op" id="8272818">)</span><span class="op" id="8272819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272824">Header</span><span class="op" id="8272830">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272842">Header</span><span class="op" id="8272848">{</span><span class="string" id="8272849">&#34;Content-Length&#34;</span><span class="op" id="8272865">:</span>&nbsp;<span class="op" id="8272867">{</span><span class="string" id="8272868">&#34;256&#34;</span><span class="op" id="8272873">}</span><span class="op" id="8272874">}</span><span class="op" id="8272875">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272880">TransferEncoding</span><span class="op" id="8272896">:</span>&nbsp;<span class="ident" id="8272898">nil</span><span class="op" id="8272901">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272906">Close</span><span class="op" id="8272911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8272924">false</span><span class="op" id="8272929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8272934">ContentLength</span><span class="op" id="8272947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8272952">256</span><span class="op" id="8272955">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272959">}</span><span class="op" id="8272960">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8272965">&#34;&#34;</span><span class="op" id="8272967">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8272970">}</span><span class="op" id="8272971">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8272975">//&nbsp;No&nbsp;Content-Length&nbsp;or&nbsp;Chunked&nbsp;in&nbsp;response&nbsp;to&nbsp;a&nbsp;HEAD&nbsp;request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273042">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8273064">+</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273069">&#34;\r\n&#34;</span><span class="op" id="8273075">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273080">Response</span><span class="op" id="8273088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273093">Status</span><span class="op" id="8273099">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273111">&#34;200&nbsp;OK&#34;</span><span class="op" id="8273119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273124">StatusCode</span><span class="op" id="8273134">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8273142">200</span><span class="op" id="8273145">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273150">Proto</span><span class="op" id="8273155">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273168">&#34;HTTP/1.0&#34;</span><span class="op" id="8273178">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273183">ProtoMajor</span><span class="op" id="8273193">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8273201">1</span><span class="op" id="8273202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273207">ProtoMinor</span><span class="op" id="8273217">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8273225">0</span><span class="op" id="8273226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273231">Request</span><span class="op" id="8273238">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273249">dummyReq</span><span class="op" id="8273257">(</span><span class="string" id="8273258">&#34;HEAD&#34;</span><span class="op" id="8273264">)</span><span class="op" id="8273265">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273270">Header</span><span class="op" id="8273276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273288">Header</span><span class="op" id="8273294">{</span><span class="op" id="8273295">}</span><span class="op" id="8273296">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273301">TransferEncoding</span><span class="op" id="8273317">:</span>&nbsp;<span class="ident" id="8273319">nil</span><span class="op" id="8273322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273327">Close</span><span class="op" id="8273332">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8273345">true</span><span class="op" id="8273349">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273354">ContentLength</span><span class="op" id="8273367">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273372">-</span><span class="num" id="8273373">1</span><span class="op" id="8273374">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273378">}</span><span class="op" id="8273379">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273384">&#34;&#34;</span><span class="op" id="8273386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273389">}</span><span class="op" id="8273390">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273394">//&nbsp;explicit&nbsp;Content-Length&nbsp;of&nbsp;0.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273428">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273432">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8273454">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273459">&#34;Content-Length:&nbsp;0\r\n&#34;</span>&nbsp;<span class="op" id="8273483">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273488">&#34;\r\n&#34;</span><span class="op" id="8273494">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273499">Response</span><span class="op" id="8273507">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273512">Status</span><span class="op" id="8273518">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273524">&#34;200&nbsp;OK&#34;</span><span class="op" id="8273532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273537">StatusCode</span><span class="op" id="8273547">:</span>&nbsp;<span class="num" id="8273549">200</span><span class="op" id="8273552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273557">Proto</span><span class="op" id="8273562">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273569">&#34;HTTP/1.1&#34;</span><span class="op" id="8273579">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273584">ProtoMajor</span><span class="op" id="8273594">:</span>&nbsp;<span class="num" id="8273596">1</span><span class="op" id="8273597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273602">ProtoMinor</span><span class="op" id="8273612">:</span>&nbsp;<span class="num" id="8273614">1</span><span class="op" id="8273615">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273620">Request</span><span class="op" id="8273627">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273632">dummyReq</span><span class="op" id="8273640">(</span><span class="string" id="8273641">&#34;GET&#34;</span><span class="op" id="8273646">)</span><span class="op" id="8273647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273652">Header</span><span class="op" id="8273658">:</span>&nbsp;<span class="ident" id="8273660">Header</span><span class="op" id="8273666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273672">&#34;Content-Length&#34;</span><span class="op" id="8273688">:</span>&nbsp;<span class="op" id="8273690">{</span><span class="string" id="8273691">&#34;0&#34;</span><span class="op" id="8273694">}</span><span class="op" id="8273695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273700">}</span><span class="op" id="8273701">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273706">Close</span><span class="op" id="8273711">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8273721">false</span><span class="op" id="8273726">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273731">ContentLength</span><span class="op" id="8273744">:</span>&nbsp;<span class="num" id="8273746">0</span><span class="op" id="8273747">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273751">}</span><span class="op" id="8273752">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273757">&#34;&#34;</span><span class="op" id="8273759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273762">}</span><span class="op" id="8273763">,</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273767">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;but&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8273828">//&nbsp;(permitted&nbsp;by&nbsp;RFC&nbsp;2616)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8273856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273860">&#34;HTTP/1.0&nbsp;303&nbsp;\r\n\r\n&#34;</span><span class="op" id="8273883">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273887">Response</span><span class="op" id="8273895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273900">Status</span><span class="op" id="8273906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273915">&#34;303&nbsp;&#34;</span><span class="op" id="8273921">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273926">StatusCode</span><span class="op" id="8273936">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8273941">303</span><span class="op" id="8273944">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273949">Proto</span><span class="op" id="8273954">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8273964">&#34;HTTP/1.0&#34;</span><span class="op" id="8273974">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8273979">ProtoMajor</span><span class="op" id="8273989">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8273994">1</span><span class="op" id="8273995">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274000">ProtoMinor</span><span class="op" id="8274010">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8274015">0</span><span class="op" id="8274016">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274021">Request</span><span class="op" id="8274028">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274036">dummyReq</span><span class="op" id="8274044">(</span><span class="string" id="8274045">&#34;GET&#34;</span><span class="op" id="8274050">)</span><span class="op" id="8274051">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274056">Header</span><span class="op" id="8274062">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274071">Header</span><span class="op" id="8274077">{</span><span class="op" id="8274078">}</span><span class="op" id="8274079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274084">Close</span><span class="op" id="8274089">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8274099">true</span><span class="op" id="8274103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274108">ContentLength</span><span class="op" id="8274121">:</span>&nbsp;<span class="op" id="8274123">-</span><span class="num" id="8274124">1</span><span class="op" id="8274125">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274129">}</span><span class="op" id="8274130">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274135">&#34;&#34;</span><span class="op" id="8274137">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274140">}</span><span class="op" id="8274141">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8274145">//&nbsp;Status&nbsp;line&nbsp;without&nbsp;a&nbsp;Reason-Phrase,&nbsp;and&nbsp;no&nbsp;trailing&nbsp;space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8274209">//&nbsp;(not&nbsp;permitted&nbsp;by&nbsp;RFC&nbsp;2616,&nbsp;but&nbsp;we&#39;ll&nbsp;accept&nbsp;it&nbsp;anyway)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274273">&#34;HTTP/1.0&nbsp;303\r\n\r\n&#34;</span><span class="op" id="8274295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274299">Response</span><span class="op" id="8274307">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274312">Status</span><span class="op" id="8274318">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274327">&#34;303&nbsp;&#34;</span><span class="op" id="8274333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274338">StatusCode</span><span class="op" id="8274348">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8274353">303</span><span class="op" id="8274356">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274361">Proto</span><span class="op" id="8274366">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274376">&#34;HTTP/1.0&#34;</span><span class="op" id="8274386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274391">ProtoMajor</span><span class="op" id="8274401">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8274406">1</span><span class="op" id="8274407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274412">ProtoMinor</span><span class="op" id="8274422">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8274427">0</span><span class="op" id="8274428">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274433">Request</span><span class="op" id="8274440">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274448">dummyReq</span><span class="op" id="8274456">(</span><span class="string" id="8274457">&#34;GET&#34;</span><span class="op" id="8274462">)</span><span class="op" id="8274463">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274468">Header</span><span class="op" id="8274474">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274483">Header</span><span class="op" id="8274489">{</span><span class="op" id="8274490">}</span><span class="op" id="8274491">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274496">Close</span><span class="op" id="8274501">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8274511">true</span><span class="op" id="8274515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274520">ContentLength</span><span class="op" id="8274533">:</span>&nbsp;<span class="op" id="8274535">-</span><span class="num" id="8274536">1</span><span class="op" id="8274537">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274541">}</span><span class="op" id="8274542">,</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274547">&#34;&#34;</span><span class="op" id="8274549">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274552">}</span><span class="op" id="8274553">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8274557">//&nbsp;golang.org/issue/4767:&nbsp;don&#39;t&nbsp;special-case&nbsp;multipart/byteranges&nbsp;responses</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8274634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274638">`HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content<br>
<span class="lineno"></span>Connection:&nbsp;close<br>
<span class="lineno"></span>Content-Type:&nbsp;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef<br>
<span class="lineno"></span><br>
<span class="lineno">340</span>some&nbsp;body`</span><span class="op" id="8274759">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274763">Response</span><span class="op" id="8274771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274776">Status</span><span class="op" id="8274782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274788">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="8274809">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274814">StatusCode</span><span class="op" id="8274824">:</span>&nbsp;<span class="num" id="8274826">206</span><span class="op" id="8274829">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274834">Proto</span><span class="op" id="8274839">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274846">&#34;HTTP/1.1&#34;</span><span class="op" id="8274856">,</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274861">ProtoMajor</span><span class="op" id="8274871">:</span>&nbsp;<span class="num" id="8274873">1</span><span class="op" id="8274874">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274879">ProtoMinor</span><span class="op" id="8274889">:</span>&nbsp;<span class="num" id="8274891">1</span><span class="op" id="8274892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274897">Request</span><span class="op" id="8274904">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274909">dummyReq</span><span class="op" id="8274917">(</span><span class="string" id="8274918">&#34;GET&#34;</span><span class="op" id="8274923">)</span><span class="op" id="8274924">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8274929">Header</span><span class="op" id="8274935">:</span>&nbsp;<span class="ident" id="8274937">Header</span><span class="op" id="8274943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8274949">&#34;Content-Type&#34;</span><span class="op" id="8274963">:</span>&nbsp;<span class="op" id="8274965">[</span><span class="op" id="8274966">]</span><span class="builtintype" id="8274967">string</span><span class="op" id="8274973">{</span><span class="string" id="8274974">&#34;multipart/byteranges;&nbsp;boundary=18a75608c8f47cef&#34;</span><span class="op" id="8275023">}</span><span class="op" id="8275024">,</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275029">}</span><span class="op" id="8275030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275035">Close</span><span class="op" id="8275040">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8275050">true</span><span class="op" id="8275054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275059">ContentLength</span><span class="op" id="8275072">:</span>&nbsp;<span class="op" id="8275074">-</span><span class="num" id="8275075">1</span><span class="op" id="8275076">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275080">}</span><span class="op" id="8275081">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275086">&#34;some&nbsp;body&#34;</span><span class="op" id="8275097">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275100">}</span><span class="op" id="8275101">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8275105">//&nbsp;Unchunked&nbsp;response&nbsp;without&nbsp;Content-Length,&nbsp;Request&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275167">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275171">&#34;HTTP/1.0&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8275193">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275198">&#34;Connection:&nbsp;close\r\n&#34;</span>&nbsp;<span class="op" id="8275222">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275227">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8275234">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275239">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8275252">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275257">Response</span><span class="op" id="8275265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275270">Status</span><span class="op" id="8275276">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275282">&#34;200&nbsp;OK&#34;</span><span class="op" id="8275290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275295">StatusCode</span><span class="op" id="8275305">:</span>&nbsp;<span class="num" id="8275307">200</span><span class="op" id="8275310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275315">Proto</span><span class="op" id="8275320">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275327">&#34;HTTP/1.0&#34;</span><span class="op" id="8275337">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275342">ProtoMajor</span><span class="op" id="8275352">:</span>&nbsp;<span class="num" id="8275354">1</span><span class="op" id="8275355">,</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275360">ProtoMinor</span><span class="op" id="8275370">:</span>&nbsp;<span class="num" id="8275372">0</span><span class="op" id="8275373">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275378">Header</span><span class="op" id="8275384">:</span>&nbsp;<span class="ident" id="8275386">Header</span><span class="op" id="8275392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275398">&#34;Connection&#34;</span><span class="op" id="8275410">:</span>&nbsp;<span class="op" id="8275412">{</span><span class="string" id="8275413">&#34;close&#34;</span><span class="op" id="8275420">}</span><span class="op" id="8275421">,</span>&nbsp;<span class="comment" id="8275423">//&nbsp;TODO(rsc):&nbsp;Delete?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275448">}</span><span class="op" id="8275449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275454">Close</span><span class="op" id="8275459">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8275469">true</span><span class="op" id="8275473">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275478">ContentLength</span><span class="op" id="8275491">:</span>&nbsp;<span class="op" id="8275493">-</span><span class="num" id="8275494">1</span><span class="op" id="8275495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275499">}</span><span class="op" id="8275500">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275505">&#34;Body&nbsp;here\n&#34;</span><span class="op" id="8275518">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275521">}</span><span class="op" id="8275522">,</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8275526">//&nbsp;206&nbsp;Partial&nbsp;Content.&nbsp;golang.org/issue/8923</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8275573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275577">&#34;HTTP/1.1&nbsp;206&nbsp;Partial&nbsp;Content\r\n&#34;</span>&nbsp;<span class="op" id="8275612">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275617">&#34;Content-Type:&nbsp;text/plain;&nbsp;charset=utf-8\r\n&#34;</span>&nbsp;<span class="op" id="8275663">+</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275668">&#34;Accept-Ranges:&nbsp;bytes\r\n&#34;</span>&nbsp;<span class="op" id="8275695">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275700">&#34;Content-Range:&nbsp;bytes&nbsp;0-5/1862\r\n&#34;</span>&nbsp;<span class="op" id="8275736">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275741">&#34;Content-Length:&nbsp;6\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8275769">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275774">&#34;foobar&#34;</span><span class="op" id="8275782">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275787">Response</span><span class="op" id="8275795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275800">Status</span><span class="op" id="8275806">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275812">&#34;206&nbsp;Partial&nbsp;Content&#34;</span><span class="op" id="8275833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275838">StatusCode</span><span class="op" id="8275848">:</span>&nbsp;<span class="num" id="8275850">206</span><span class="op" id="8275853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275858">Proto</span><span class="op" id="8275863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275870">&#34;HTTP/1.1&#34;</span><span class="op" id="8275880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275885">ProtoMajor</span><span class="op" id="8275895">:</span>&nbsp;<span class="num" id="8275897">1</span><span class="op" id="8275898">,</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275903">ProtoMinor</span><span class="op" id="8275913">:</span>&nbsp;<span class="num" id="8275915">1</span><span class="op" id="8275916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275921">Request</span><span class="op" id="8275928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275933">dummyReq</span><span class="op" id="8275941">(</span><span class="string" id="8275942">&#34;GET&#34;</span><span class="op" id="8275947">)</span><span class="op" id="8275948">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8275953">Header</span><span class="op" id="8275959">:</span>&nbsp;<span class="ident" id="8275961">Header</span><span class="op" id="8275967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8275973">&#34;Accept-Ranges&#34;</span><span class="op" id="8275988">:</span>&nbsp;&nbsp;<span class="op" id="8275991">[</span><span class="op" id="8275992">]</span><span class="builtintype" id="8275993">string</span><span class="op" id="8275999">{</span><span class="string" id="8276000">&#34;bytes&#34;</span><span class="op" id="8276007">}</span><span class="op" id="8276008">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276014">&#34;Content-Length&#34;</span><span class="op" id="8276030">:</span>&nbsp;<span class="op" id="8276032">[</span><span class="op" id="8276033">]</span><span class="builtintype" id="8276034">string</span><span class="op" id="8276040">{</span><span class="string" id="8276041">&#34;6&#34;</span><span class="op" id="8276044">}</span><span class="op" id="8276045">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276051">&#34;Content-Type&#34;</span><span class="op" id="8276065">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8276069">[</span><span class="op" id="8276070">]</span><span class="builtintype" id="8276071">string</span><span class="op" id="8276077">{</span><span class="string" id="8276078">&#34;text/plain;&nbsp;charset=utf-8&#34;</span><span class="op" id="8276105">}</span><span class="op" id="8276106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276112">&#34;Content-Range&#34;</span><span class="op" id="8276127">:</span>&nbsp;&nbsp;<span class="op" id="8276130">[</span><span class="op" id="8276131">]</span><span class="builtintype" id="8276132">string</span><span class="op" id="8276138">{</span><span class="string" id="8276139">&#34;bytes&nbsp;0-5/1862&#34;</span><span class="op" id="8276155">}</span><span class="op" id="8276156">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276161">}</span><span class="op" id="8276162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276167">ContentLength</span><span class="op" id="8276180">:</span>&nbsp;<span class="num" id="8276182">6</span><span class="op" id="8276183">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276187">}</span><span class="op" id="8276188">,</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8276193">&#34;foobar&#34;</span><span class="op" id="8276201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276204">}</span><span class="op" id="8276205">,</span><br>
<span class="lineno"></span><span class="op" id="8276207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="8276210">func</span>&nbsp;<span class="ident" id="8276215">TestReadResponse</span><span class="op" id="8276231">(</span><span class="ident" id="8276232">t</span>&nbsp;<span class="op" id="8276234">*</span><span class="ident" id="8276235">testing</span><span class="op" id="8276242">.</span><span class="ident" id="8276243">T</span><span class="op" id="8276244">)</span>&nbsp;<span class="op" id="8276246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276249">for</span>&nbsp;<span class="ident" id="8276253">i</span><span class="op" id="8276254">,</span>&nbsp;<span class="ident" id="8276256">tt</span>&nbsp;<span class="op" id="8276259">:=</span>&nbsp;<span class="keyword" id="8276262">range</span>&nbsp;<span class="ident" id="8276268">respTests</span>&nbsp;<span class="op" id="8276278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276282">resp</span><span class="op" id="8276286">,</span>&nbsp;<span class="ident" id="8276288">err</span>&nbsp;<span class="op" id="8276292">:=</span>&nbsp;<span class="ident" id="8276295">ReadResponse</span><span class="op" id="8276307">(</span><span class="ident" id="8276308">bufio</span><span class="op" id="8276313">.</span><span class="ident" id="8276314">NewReader</span><span class="op" id="8276323">(</span><span class="ident" id="8276324">strings</span><span class="op" id="8276331">.</span><span class="ident" id="8276332">NewReader</span><span class="op" id="8276341">(</span><span class="ident" id="8276342">tt</span><span class="op" id="8276344">.</span><span class="ident" id="8276345">Raw</span><span class="op" id="8276348">)</span><span class="op" id="8276349">)</span><span class="op" id="8276350">,</span>&nbsp;<span class="ident" id="8276352">tt</span><span class="op" id="8276354">.</span><span class="ident" id="8276355">Resp</span><span class="op" id="8276359">.</span><span class="ident" id="8276360">Request</span><span class="op" id="8276367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276371">if</span>&nbsp;<span class="ident" id="8276374">err</span>&nbsp;<span class="op" id="8276378">!=</span>&nbsp;<span class="ident" id="8276381">nil</span>&nbsp;<span class="op" id="8276385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276390">t</span><span class="op" id="8276391">.</span><span class="ident" id="8276392">Errorf</span><span class="op" id="8276398">(</span><span class="string" id="8276399">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="8276408">,</span>&nbsp;<span class="ident" id="8276410">i</span><span class="op" id="8276411">,</span>&nbsp;<span class="ident" id="8276413">err</span><span class="op" id="8276416">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276421">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276436">rbody</span>&nbsp;<span class="op" id="8276442">:=</span>&nbsp;<span class="ident" id="8276445">resp</span><span class="op" id="8276449">.</span><span class="ident" id="8276450">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276457">resp</span><span class="op" id="8276461">.</span><span class="ident" id="8276462">Body</span>&nbsp;<span class="op" id="8276467">=</span>&nbsp;<span class="ident" id="8276469">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276475">diff</span><span class="op" id="8276479">(</span><span class="ident" id="8276480">t</span><span class="op" id="8276481">,</span>&nbsp;<span class="ident" id="8276483">fmt</span><span class="op" id="8276486">.</span><span class="ident" id="8276487">Sprintf</span><span class="op" id="8276494">(</span><span class="string" id="8276495">&#34;#%d&nbsp;Response&#34;</span><span class="op" id="8276509">,</span>&nbsp;<span class="ident" id="8276511">i</span><span class="op" id="8276512">)</span><span class="op" id="8276513">,</span>&nbsp;<span class="ident" id="8276515">resp</span><span class="op" id="8276519">,</span>&nbsp;<span class="op" id="8276521">&amp;</span><span class="ident" id="8276522">tt</span><span class="op" id="8276524">.</span><span class="ident" id="8276525">Resp</span><span class="op" id="8276529">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276533">var</span>&nbsp;<span class="ident" id="8276537">bout</span>&nbsp;<span class="ident" id="8276542">bytes</span><span class="op" id="8276547">.</span><span class="ident" id="8276548">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276557">if</span>&nbsp;<span class="ident" id="8276560">rbody</span>&nbsp;<span class="op" id="8276566">!=</span>&nbsp;<span class="ident" id="8276569">nil</span>&nbsp;<span class="op" id="8276573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276578">_</span><span class="op" id="8276579">,</span>&nbsp;<span class="ident" id="8276581">err</span>&nbsp;<span class="op" id="8276585">=</span>&nbsp;<span class="ident" id="8276587">io</span><span class="op" id="8276589">.</span><span class="ident" id="8276590">Copy</span><span class="op" id="8276594">(</span><span class="op" id="8276595">&amp;</span><span class="ident" id="8276596">bout</span><span class="op" id="8276600">,</span>&nbsp;<span class="ident" id="8276602">rbody</span><span class="op" id="8276607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276612">if</span>&nbsp;<span class="ident" id="8276615">err</span>&nbsp;<span class="op" id="8276619">!=</span>&nbsp;<span class="ident" id="8276622">nil</span>&nbsp;<span class="op" id="8276626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276632">t</span><span class="op" id="8276633">.</span><span class="ident" id="8276634">Errorf</span><span class="op" id="8276640">(</span><span class="string" id="8276641">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="8276650">,</span>&nbsp;<span class="ident" id="8276652">i</span><span class="op" id="8276653">,</span>&nbsp;<span class="ident" id="8276655">err</span><span class="op" id="8276658">)</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276664">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276676">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276681">rbody</span><span class="op" id="8276686">.</span><span class="ident" id="8276687">Close</span><span class="op" id="8276692">(</span><span class="op" id="8276693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276701">body</span>&nbsp;<span class="op" id="8276706">:=</span>&nbsp;<span class="ident" id="8276709">bout</span><span class="op" id="8276713">.</span><span class="ident" id="8276714">String</span><span class="op" id="8276720">(</span><span class="op" id="8276721">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276725">if</span>&nbsp;<span class="ident" id="8276728">body</span>&nbsp;<span class="op" id="8276733">!=</span>&nbsp;<span class="ident" id="8276736">tt</span><span class="op" id="8276738">.</span><span class="ident" id="8276739">Body</span>&nbsp;<span class="op" id="8276744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276749">t</span><span class="op" id="8276750">.</span><span class="ident" id="8276751">Errorf</span><span class="op" id="8276757">(</span><span class="string" id="8276758">&#34;#%d:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8276782">,</span>&nbsp;<span class="ident" id="8276784">i</span><span class="op" id="8276785">,</span>&nbsp;<span class="ident" id="8276787">body</span><span class="op" id="8276791">,</span>&nbsp;<span class="ident" id="8276793">tt</span><span class="op" id="8276795">.</span><span class="ident" id="8276796">Body</span><span class="op" id="8276800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8276807">}</span><br>
<span class="lineno"></span><span class="op" id="8276809">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="8276812">func</span>&nbsp;<span class="ident" id="8276817">TestWriteResponse</span><span class="op" id="8276834">(</span><span class="ident" id="8276835">t</span>&nbsp;<span class="op" id="8276837">*</span><span class="ident" id="8276838">testing</span><span class="op" id="8276845">.</span><span class="ident" id="8276846">T</span><span class="op" id="8276847">)</span>&nbsp;<span class="op" id="8276849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276852">for</span>&nbsp;<span class="ident" id="8276856">i</span><span class="op" id="8276857">,</span>&nbsp;<span class="ident" id="8276859">tt</span>&nbsp;<span class="op" id="8276862">:=</span>&nbsp;<span class="keyword" id="8276865">range</span>&nbsp;<span class="ident" id="8276871">respTests</span>&nbsp;<span class="op" id="8276881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276885">resp</span><span class="op" id="8276889">,</span>&nbsp;<span class="ident" id="8276891">err</span>&nbsp;<span class="op" id="8276895">:=</span>&nbsp;<span class="ident" id="8276898">ReadResponse</span><span class="op" id="8276910">(</span><span class="ident" id="8276911">bufio</span><span class="op" id="8276916">.</span><span class="ident" id="8276917">NewReader</span><span class="op" id="8276926">(</span><span class="ident" id="8276927">strings</span><span class="op" id="8276934">.</span><span class="ident" id="8276935">NewReader</span><span class="op" id="8276944">(</span><span class="ident" id="8276945">tt</span><span class="op" id="8276947">.</span><span class="ident" id="8276948">Raw</span><span class="op" id="8276951">)</span><span class="op" id="8276952">)</span><span class="op" id="8276953">,</span>&nbsp;<span class="ident" id="8276955">tt</span><span class="op" id="8276957">.</span><span class="ident" id="8276958">Resp</span><span class="op" id="8276962">.</span><span class="ident" id="8276963">Request</span><span class="op" id="8276970">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8276974">if</span>&nbsp;<span class="ident" id="8276977">err</span>&nbsp;<span class="op" id="8276981">!=</span>&nbsp;<span class="ident" id="8276984">nil</span>&nbsp;<span class="op" id="8276988">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8276993">t</span><span class="op" id="8276994">.</span><span class="ident" id="8276995">Errorf</span><span class="op" id="8277001">(</span><span class="string" id="8277002">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="8277011">,</span>&nbsp;<span class="ident" id="8277013">i</span><span class="op" id="8277014">,</span>&nbsp;<span class="ident" id="8277016">err</span><span class="op" id="8277019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277024">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277039">err</span>&nbsp;<span class="op" id="8277043">=</span>&nbsp;<span class="ident" id="8277045">resp</span><span class="op" id="8277049">.</span><span class="ident" id="8277050">Write</span><span class="op" id="8277055">(</span><span class="ident" id="8277056">ioutil</span><span class="op" id="8277062">.</span><span class="ident" id="8277063">Discard</span><span class="op" id="8277070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277074">if</span>&nbsp;<span class="ident" id="8277077">err</span>&nbsp;<span class="op" id="8277081">!=</span>&nbsp;<span class="ident" id="8277084">nil</span>&nbsp;<span class="op" id="8277088">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277093">t</span><span class="op" id="8277094">.</span><span class="ident" id="8277095">Errorf</span><span class="op" id="8277101">(</span><span class="string" id="8277102">&#34;#%d:&nbsp;%v&#34;</span><span class="op" id="8277111">,</span>&nbsp;<span class="ident" id="8277113">i</span><span class="op" id="8277114">,</span>&nbsp;<span class="ident" id="8277116">err</span><span class="op" id="8277119">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277124">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277135">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277138">}</span><br>
<span class="lineno"></span><span class="op" id="8277140">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="keyword" id="8277143">var</span>&nbsp;<span class="ident" id="8277147">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="8277178">=</span>&nbsp;<span class="op" id="8277180">[</span><span class="op" id="8277181">]</span><span class="keyword" id="8277182">struct</span>&nbsp;<span class="op" id="8277189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277192">chunked</span><span class="op" id="8277199">,</span>&nbsp;<span class="ident" id="8277201">compressed</span>&nbsp;<span class="builtintype" id="8277212">bool</span><br>
<span class="lineno"></span><span class="op" id="8277217">}</span><span class="op" id="8277218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277221">{</span><span class="builtintype" id="8277222">false</span><span class="op" id="8277227">,</span>&nbsp;<span class="builtintype" id="8277229">false</span><span class="op" id="8277234">}</span><span class="op" id="8277235">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277238">{</span><span class="builtintype" id="8277239">true</span><span class="op" id="8277243">,</span>&nbsp;<span class="builtintype" id="8277245">false</span><span class="op" id="8277250">}</span><span class="op" id="8277251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277254">{</span><span class="builtintype" id="8277255">true</span><span class="op" id="8277259">,</span>&nbsp;<span class="builtintype" id="8277261">true</span><span class="op" id="8277265">}</span><span class="op" id="8277266">,</span><br>
<span class="lineno"></span><span class="op" id="8277268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8277271">//&nbsp;TestReadResponseCloseInMiddle&nbsp;tests&nbsp;that&nbsp;closing&nbsp;a&nbsp;body&nbsp;after</span><br>
<span class="lineno">460</span><span class="comment" id="8277336">//&nbsp;reading&nbsp;only&nbsp;part&nbsp;of&nbsp;its&nbsp;contents&nbsp;advances&nbsp;the&nbsp;read&nbsp;to&nbsp;the&nbsp;end&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="8277405">//&nbsp;the&nbsp;request,&nbsp;right&nbsp;up&nbsp;until&nbsp;the&nbsp;next&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="8277454">func</span>&nbsp;<span class="ident" id="8277459">TestReadResponseCloseInMiddle</span><span class="op" id="8277488">(</span><span class="ident" id="8277489">t</span>&nbsp;<span class="op" id="8277491">*</span><span class="ident" id="8277492">testing</span><span class="op" id="8277499">.</span><span class="ident" id="8277500">T</span><span class="op" id="8277501">)</span>&nbsp;<span class="op" id="8277503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277506">for</span>&nbsp;<span class="ident" id="8277510">_</span><span class="op" id="8277511">,</span>&nbsp;<span class="ident" id="8277513">test</span>&nbsp;<span class="op" id="8277518">:=</span>&nbsp;<span class="keyword" id="8277521">range</span>&nbsp;<span class="ident" id="8277527">readResponseCloseInMiddleTests</span>&nbsp;<span class="op" id="8277558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277562">fatalf</span>&nbsp;<span class="op" id="8277569">:=</span>&nbsp;<span class="keyword" id="8277572">func</span><span class="op" id="8277576">(</span><span class="ident" id="8277577">format</span>&nbsp;<span class="builtintype" id="8277584">string</span><span class="op" id="8277590">,</span>&nbsp;<span class="ident" id="8277592">args</span>&nbsp;<span class="op" id="8277597">...</span><span class="keyword" id="8277600">interface</span><span class="op" id="8277609">{</span><span class="op" id="8277610">}</span><span class="op" id="8277611">)</span>&nbsp;<span class="op" id="8277613">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277618">args</span>&nbsp;<span class="op" id="8277623">=</span>&nbsp;<span class="builtinfunc" id="8277625">append</span><span class="op" id="8277631">(</span><span class="op" id="8277632">[</span><span class="op" id="8277633">]</span><span class="keyword" id="8277634">interface</span><span class="op" id="8277643">{</span><span class="op" id="8277644">}</span><span class="op" id="8277645">{</span><span class="ident" id="8277646">test</span><span class="op" id="8277650">.</span><span class="ident" id="8277651">chunked</span><span class="op" id="8277658">,</span>&nbsp;<span class="ident" id="8277660">test</span><span class="op" id="8277664">.</span><span class="ident" id="8277665">compressed</span><span class="op" id="8277675">}</span><span class="op" id="8277676">,</span>&nbsp;<span class="ident" id="8277678">args</span><span class="op" id="8277682">...</span><span class="op" id="8277685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277690">t</span><span class="op" id="8277691">.</span><span class="ident" id="8277692">Fatalf</span><span class="op" id="8277698">(</span><span class="string" id="8277699">&#34;on&nbsp;test&nbsp;chunked=%v,&nbsp;compressed=%v:&nbsp;&#34;</span><span class="op" id="8277736">+</span><span class="ident" id="8277737">format</span><span class="op" id="8277743">,</span>&nbsp;<span class="ident" id="8277745">args</span><span class="op" id="8277749">...</span><span class="op" id="8277752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277760">checkErr</span>&nbsp;<span class="op" id="8277769">:=</span>&nbsp;<span class="keyword" id="8277772">func</span><span class="op" id="8277776">(</span><span class="ident" id="8277777">err</span>&nbsp;<span class="builtintype" id="8277781">error</span><span class="op" id="8277786">,</span>&nbsp;<span class="ident" id="8277788">msg</span>&nbsp;<span class="builtintype" id="8277792">string</span><span class="op" id="8277798">)</span>&nbsp;<span class="op" id="8277800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277805">if</span>&nbsp;<span class="ident" id="8277808">err</span>&nbsp;<span class="op" id="8277812">==</span>&nbsp;<span class="ident" id="8277815">nil</span>&nbsp;<span class="op" id="8277819">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277825">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277840">fatalf</span><span class="op" id="8277846">(</span><span class="ident" id="8277847">msg</span><span class="op" id="8277850">+</span><span class="string" id="8277851">&#34;:&nbsp;%v&#34;</span><span class="op" id="8277857">,</span>&nbsp;<span class="ident" id="8277859">err</span><span class="op" id="8277862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8277866">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277870">var</span>&nbsp;<span class="ident" id="8277874">buf</span>&nbsp;<span class="ident" id="8277878">bytes</span><span class="op" id="8277883">.</span><span class="ident" id="8277884">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277893">buf</span><span class="op" id="8277896">.</span><span class="ident" id="8277897">WriteString</span><span class="op" id="8277908">(</span><span class="string" id="8277909">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span><span class="op" id="8277930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8277934">if</span>&nbsp;<span class="ident" id="8277937">test</span><span class="op" id="8277941">.</span><span class="ident" id="8277942">chunked</span>&nbsp;<span class="op" id="8277950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8277955">buf</span><span class="op" id="8277958">.</span><span class="ident" id="8277959">WriteString</span><span class="op" id="8277970">(</span><span class="string" id="8277971">&#34;Transfer-Encoding:&nbsp;chunked\r\n&#34;</span><span class="op" id="8278003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278007">}</span>&nbsp;<span class="keyword" id="8278009">else</span>&nbsp;<span class="op" id="8278014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278019">buf</span><span class="op" id="8278022">.</span><span class="ident" id="8278023">WriteString</span><span class="op" id="8278034">(</span><span class="string" id="8278035">&#34;Content-Length:&nbsp;1000000\r\n&#34;</span><span class="op" id="8278064">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278072">var</span>&nbsp;<span class="ident" id="8278076">wr</span>&nbsp;<span class="ident" id="8278079">io</span><span class="op" id="8278081">.</span><span class="ident" id="8278082">Writer</span>&nbsp;<span class="op" id="8278089">=</span>&nbsp;<span class="op" id="8278091">&amp;</span><span class="ident" id="8278092">buf</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278098">if</span>&nbsp;<span class="ident" id="8278101">test</span><span class="op" id="8278105">.</span><span class="ident" id="8278106">chunked</span>&nbsp;<span class="op" id="8278114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278119">wr</span>&nbsp;<span class="op" id="8278122">=</span>&nbsp;<span class="ident" id="8278124">internal</span><span class="op" id="8278132">.</span><span class="ident" id="8278133">NewChunkedWriter</span><span class="op" id="8278149">(</span><span class="ident" id="8278150">wr</span><span class="op" id="8278152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278156">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278160">if</span>&nbsp;<span class="ident" id="8278163">test</span><span class="op" id="8278167">.</span><span class="ident" id="8278168">compressed</span>&nbsp;<span class="op" id="8278179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278184">buf</span><span class="op" id="8278187">.</span><span class="ident" id="8278188">WriteString</span><span class="op" id="8278199">(</span><span class="string" id="8278200">&#34;Content-Encoding:&nbsp;gzip\r\n&#34;</span><span class="op" id="8278228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278233">wr</span>&nbsp;<span class="op" id="8278236">=</span>&nbsp;<span class="ident" id="8278238">gzip</span><span class="op" id="8278242">.</span><span class="ident" id="8278243">NewWriter</span><span class="op" id="8278252">(</span><span class="ident" id="8278253">wr</span><span class="op" id="8278255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278263">buf</span><span class="op" id="8278266">.</span><span class="ident" id="8278267">WriteString</span><span class="op" id="8278278">(</span><span class="string" id="8278279">&#34;\r\n&#34;</span><span class="op" id="8278285">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278290">chunk</span>&nbsp;<span class="op" id="8278296">:=</span>&nbsp;<span class="ident" id="8278299">bytes</span><span class="op" id="8278304">.</span><span class="ident" id="8278305">Repeat</span><span class="op" id="8278311">(</span><span class="op" id="8278312">[</span><span class="op" id="8278313">]</span><span class="builtintype" id="8278314">byte</span><span class="op" id="8278318">{</span><span class="string" id="8278319">&#39;x&#39;</span><span class="op" id="8278322">}</span><span class="op" id="8278323">,</span>&nbsp;<span class="num" id="8278325">1000</span><span class="op" id="8278329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278333">for</span>&nbsp;<span class="ident" id="8278337">i</span>&nbsp;<span class="op" id="8278339">:=</span>&nbsp;<span class="num" id="8278342">0</span><span class="op" id="8278343">;</span>&nbsp;<span class="ident" id="8278345">i</span>&nbsp;<span class="op" id="8278347">&lt;</span>&nbsp;<span class="num" id="8278349">1000</span><span class="op" id="8278353">;</span>&nbsp;<span class="ident" id="8278355">i</span><span class="op" id="8278356">++</span>&nbsp;<span class="op" id="8278359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278364">if</span>&nbsp;<span class="ident" id="8278367">test</span><span class="op" id="8278371">.</span><span class="ident" id="8278372">compressed</span>&nbsp;<span class="op" id="8278383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8278389">//&nbsp;Otherwise&nbsp;this&nbsp;compresses&nbsp;too&nbsp;well.</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278432">_</span><span class="op" id="8278433">,</span>&nbsp;<span class="ident" id="8278435">err</span>&nbsp;<span class="op" id="8278439">:=</span>&nbsp;<span class="ident" id="8278442">io</span><span class="op" id="8278444">.</span><span class="ident" id="8278445">ReadFull</span><span class="op" id="8278453">(</span><span class="ident" id="8278454">rand</span><span class="op" id="8278458">.</span><span class="ident" id="8278459">Reader</span><span class="op" id="8278465">,</span>&nbsp;<span class="ident" id="8278467">chunk</span><span class="op" id="8278472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278478">checkErr</span><span class="op" id="8278486">(</span><span class="ident" id="8278487">err</span><span class="op" id="8278490">,</span>&nbsp;<span class="string" id="8278492">&#34;rand.Reader&nbsp;ReadFull&#34;</span><span class="op" id="8278514">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278524">wr</span><span class="op" id="8278526">.</span><span class="ident" id="8278527">Write</span><span class="op" id="8278532">(</span><span class="ident" id="8278533">chunk</span><span class="op" id="8278538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278542">}</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278546">if</span>&nbsp;<span class="ident" id="8278549">test</span><span class="op" id="8278553">.</span><span class="ident" id="8278554">compressed</span>&nbsp;<span class="op" id="8278565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278570">err</span>&nbsp;<span class="op" id="8278574">:=</span>&nbsp;<span class="ident" id="8278577">wr</span><span class="op" id="8278579">.</span><span class="op" id="8278580">(</span><span class="op" id="8278581">*</span><span class="ident" id="8278582">gzip</span><span class="op" id="8278586">.</span><span class="ident" id="8278587">Writer</span><span class="op" id="8278593">)</span><span class="op" id="8278594">.</span><span class="ident" id="8278595">Close</span><span class="op" id="8278600">(</span><span class="op" id="8278601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278606">checkErr</span><span class="op" id="8278614">(</span><span class="ident" id="8278615">err</span><span class="op" id="8278618">,</span>&nbsp;<span class="string" id="8278620">&#34;compressor&nbsp;close&#34;</span><span class="op" id="8278638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278646">if</span>&nbsp;<span class="ident" id="8278649">test</span><span class="op" id="8278653">.</span><span class="ident" id="8278654">chunked</span>&nbsp;<span class="op" id="8278662">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278667">buf</span><span class="op" id="8278670">.</span><span class="ident" id="8278671">WriteString</span><span class="op" id="8278682">(</span><span class="string" id="8278683">&#34;0\r\n\r\n&#34;</span><span class="op" id="8278694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278698">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278702">buf</span><span class="op" id="8278705">.</span><span class="ident" id="8278706">WriteString</span><span class="op" id="8278717">(</span><span class="string" id="8278718">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="8278737">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278742">bufr</span>&nbsp;<span class="op" id="8278747">:=</span>&nbsp;<span class="ident" id="8278750">bufio</span><span class="op" id="8278755">.</span><span class="ident" id="8278756">NewReader</span><span class="op" id="8278765">(</span><span class="op" id="8278766">&amp;</span><span class="ident" id="8278767">buf</span><span class="op" id="8278770">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278774">resp</span><span class="op" id="8278778">,</span>&nbsp;<span class="ident" id="8278780">err</span>&nbsp;<span class="op" id="8278784">:=</span>&nbsp;<span class="ident" id="8278787">ReadResponse</span><span class="op" id="8278799">(</span><span class="ident" id="8278800">bufr</span><span class="op" id="8278804">,</span>&nbsp;<span class="ident" id="8278806">dummyReq</span><span class="op" id="8278814">(</span><span class="string" id="8278815">&#34;GET&#34;</span><span class="op" id="8278820">)</span><span class="op" id="8278821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278825">checkErr</span><span class="op" id="8278833">(</span><span class="ident" id="8278834">err</span><span class="op" id="8278837">,</span>&nbsp;<span class="string" id="8278839">&#34;ReadResponse&#34;</span><span class="op" id="8278853">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278857">expectedLength</span>&nbsp;<span class="op" id="8278872">:=</span>&nbsp;<span class="ident" id="8278875">int64</span><span class="op" id="8278880">(</span><span class="op" id="8278881">-</span><span class="num" id="8278882">1</span><span class="op" id="8278883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278887">if</span>&nbsp;<span class="op" id="8278890">!</span><span class="ident" id="8278891">test</span><span class="op" id="8278895">.</span><span class="ident" id="8278896">chunked</span>&nbsp;<span class="op" id="8278904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278909">expectedLength</span>&nbsp;<span class="op" id="8278924">=</span>&nbsp;<span class="num" id="8278926">1000000</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8278936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8278940">if</span>&nbsp;<span class="ident" id="8278943">resp</span><span class="op" id="8278947">.</span><span class="ident" id="8278948">ContentLength</span>&nbsp;<span class="op" id="8278962">!=</span>&nbsp;<span class="ident" id="8278965">expectedLength</span>&nbsp;<span class="op" id="8278980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8278985">fatalf</span><span class="op" id="8278991">(</span><span class="string" id="8278992">&#34;expected&nbsp;response&nbsp;length&nbsp;%d,&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8279029">,</span>&nbsp;<span class="ident" id="8279031">expectedLength</span><span class="op" id="8279045">,</span>&nbsp;<span class="ident" id="8279047">resp</span><span class="op" id="8279051">.</span><span class="ident" id="8279052">ContentLength</span><span class="op" id="8279065">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279073">if</span>&nbsp;<span class="ident" id="8279076">resp</span><span class="op" id="8279080">.</span><span class="ident" id="8279081">Body</span>&nbsp;<span class="op" id="8279086">==</span>&nbsp;<span class="ident" id="8279089">nil</span>&nbsp;<span class="op" id="8279093">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279098">fatalf</span><span class="op" id="8279104">(</span><span class="string" id="8279105">&#34;nil&nbsp;body&#34;</span><span class="op" id="8279115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279123">if</span>&nbsp;<span class="ident" id="8279126">test</span><span class="op" id="8279130">.</span><span class="ident" id="8279131">compressed</span>&nbsp;<span class="op" id="8279142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279147">gzReader</span><span class="op" id="8279155">,</span>&nbsp;<span class="ident" id="8279157">err</span>&nbsp;<span class="op" id="8279161">:=</span>&nbsp;<span class="ident" id="8279164">gzip</span><span class="op" id="8279168">.</span><span class="ident" id="8279169">NewReader</span><span class="op" id="8279178">(</span><span class="ident" id="8279179">resp</span><span class="op" id="8279183">.</span><span class="ident" id="8279184">Body</span><span class="op" id="8279188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279193">checkErr</span><span class="op" id="8279201">(</span><span class="ident" id="8279202">err</span><span class="op" id="8279205">,</span>&nbsp;<span class="string" id="8279207">&#34;gzip.NewReader&#34;</span><span class="op" id="8279223">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279228">resp</span><span class="op" id="8279232">.</span><span class="ident" id="8279233">Body</span>&nbsp;<span class="op" id="8279238">=</span>&nbsp;<span class="op" id="8279240">&amp;</span><span class="ident" id="8279241">readerAndCloser</span><span class="op" id="8279256">{</span><span class="ident" id="8279257">gzReader</span><span class="op" id="8279265">,</span>&nbsp;<span class="ident" id="8279267">resp</span><span class="op" id="8279271">.</span><span class="ident" id="8279272">Body</span><span class="op" id="8279276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279280">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279285">rbuf</span>&nbsp;<span class="op" id="8279290">:=</span>&nbsp;<span class="builtinfunc" id="8279293">make</span><span class="op" id="8279297">(</span><span class="op" id="8279298">[</span><span class="op" id="8279299">]</span><span class="builtintype" id="8279300">byte</span><span class="op" id="8279304">,</span>&nbsp;<span class="num" id="8279306">2500</span><span class="op" id="8279310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279314">n</span><span class="op" id="8279315">,</span>&nbsp;<span class="ident" id="8279317">err</span>&nbsp;<span class="op" id="8279321">:=</span>&nbsp;<span class="ident" id="8279324">io</span><span class="op" id="8279326">.</span><span class="ident" id="8279327">ReadFull</span><span class="op" id="8279335">(</span><span class="ident" id="8279336">resp</span><span class="op" id="8279340">.</span><span class="ident" id="8279341">Body</span><span class="op" id="8279345">,</span>&nbsp;<span class="ident" id="8279347">rbuf</span><span class="op" id="8279351">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279355">checkErr</span><span class="op" id="8279363">(</span><span class="ident" id="8279364">err</span><span class="op" id="8279367">,</span>&nbsp;<span class="string" id="8279369">&#34;2500&nbsp;byte&nbsp;ReadFull&#34;</span><span class="op" id="8279389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279393">if</span>&nbsp;<span class="ident" id="8279396">n</span>&nbsp;<span class="op" id="8279398">!=</span>&nbsp;<span class="num" id="8279401">2500</span>&nbsp;<span class="op" id="8279406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279411">fatalf</span><span class="op" id="8279417">(</span><span class="string" id="8279418">&#34;ReadFull&nbsp;only&nbsp;read&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="8279447">,</span>&nbsp;<span class="ident" id="8279449">n</span><span class="op" id="8279450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279454">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279458">if</span>&nbsp;<span class="ident" id="8279461">test</span><span class="op" id="8279465">.</span><span class="ident" id="8279466">compressed</span>&nbsp;<span class="op" id="8279477">==</span>&nbsp;<span class="builtintype" id="8279480">false</span>&nbsp;<span class="op" id="8279486">&amp;&amp;</span>&nbsp;<span class="op" id="8279489">!</span><span class="ident" id="8279490">bytes</span><span class="op" id="8279495">.</span><span class="ident" id="8279496">Equal</span><span class="op" id="8279501">(</span><span class="ident" id="8279502">bytes</span><span class="op" id="8279507">.</span><span class="ident" id="8279508">Repeat</span><span class="op" id="8279514">(</span><span class="op" id="8279515">[</span><span class="op" id="8279516">]</span><span class="builtintype" id="8279517">byte</span><span class="op" id="8279521">{</span><span class="string" id="8279522">&#39;x&#39;</span><span class="op" id="8279525">}</span><span class="op" id="8279526">,</span>&nbsp;<span class="num" id="8279528">2500</span><span class="op" id="8279532">)</span><span class="op" id="8279533">,</span>&nbsp;<span class="ident" id="8279535">rbuf</span><span class="op" id="8279539">)</span>&nbsp;<span class="op" id="8279541">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279546">fatalf</span><span class="op" id="8279552">(</span><span class="string" id="8279553">&#34;ReadFull&nbsp;didn&#39;t&nbsp;read&nbsp;2500&nbsp;&#39;x&#39;;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8279592">,</span>&nbsp;<span class="builtintype" id="8279594">string</span><span class="op" id="8279600">(</span><span class="ident" id="8279601">rbuf</span><span class="op" id="8279605">)</span><span class="op" id="8279606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279614">resp</span><span class="op" id="8279618">.</span><span class="ident" id="8279619">Body</span><span class="op" id="8279623">.</span><span class="ident" id="8279624">Close</span><span class="op" id="8279629">(</span><span class="op" id="8279630">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279635">rest</span><span class="op" id="8279639">,</span>&nbsp;<span class="ident" id="8279641">err</span>&nbsp;<span class="op" id="8279645">:=</span>&nbsp;<span class="ident" id="8279648">ioutil</span><span class="op" id="8279654">.</span><span class="ident" id="8279655">ReadAll</span><span class="op" id="8279662">(</span><span class="ident" id="8279663">bufr</span><span class="op" id="8279667">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279671">checkErr</span><span class="op" id="8279679">(</span><span class="ident" id="8279680">err</span><span class="op" id="8279683">,</span>&nbsp;<span class="string" id="8279685">&#34;ReadAll&nbsp;on&nbsp;remainder&#34;</span><span class="op" id="8279707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279711">if</span>&nbsp;<span class="ident" id="8279714">e</span><span class="op" id="8279715">,</span>&nbsp;<span class="ident" id="8279717">g</span>&nbsp;<span class="op" id="8279719">:=</span>&nbsp;<span class="string" id="8279722">&#34;Next&nbsp;Request&nbsp;Here&#34;</span><span class="op" id="8279741">,</span>&nbsp;<span class="builtintype" id="8279743">string</span><span class="op" id="8279749">(</span><span class="ident" id="8279750">rest</span><span class="op" id="8279754">)</span><span class="op" id="8279755">;</span>&nbsp;<span class="ident" id="8279757">e</span>&nbsp;<span class="op" id="8279759">!=</span>&nbsp;<span class="ident" id="8279762">g</span>&nbsp;<span class="op" id="8279764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279769">g</span>&nbsp;<span class="op" id="8279771">=</span>&nbsp;<span class="ident" id="8279773">regexp</span><span class="op" id="8279779">.</span><span class="ident" id="8279780">MustCompile</span><span class="op" id="8279791">(</span><span class="string" id="8279792">`(xx+)`</span><span class="op" id="8279799">)</span><span class="op" id="8279800">.</span><span class="ident" id="8279801">ReplaceAllStringFunc</span><span class="op" id="8279821">(</span><span class="ident" id="8279822">g</span><span class="op" id="8279823">,</span>&nbsp;<span class="keyword" id="8279825">func</span><span class="op" id="8279829">(</span><span class="ident" id="8279830">match</span>&nbsp;<span class="builtintype" id="8279836">string</span><span class="op" id="8279842">)</span>&nbsp;<span class="builtintype" id="8279844">string</span>&nbsp;<span class="op" id="8279851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8279857">return</span>&nbsp;<span class="ident" id="8279864">fmt</span><span class="op" id="8279867">.</span><span class="ident" id="8279868">Sprintf</span><span class="op" id="8279875">(</span><span class="string" id="8279876">&#34;x(repeated&nbsp;x%d)&#34;</span><span class="op" id="8279893">,</span>&nbsp;<span class="builtinfunc" id="8279895">len</span><span class="op" id="8279898">(</span><span class="ident" id="8279899">match</span><span class="op" id="8279904">)</span><span class="op" id="8279905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279910">}</span><span class="op" id="8279911">)</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8279916">fatalf</span><span class="op" id="8279922">(</span><span class="string" id="8279923">&#34;remainder&nbsp;=&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8279952">,</span>&nbsp;<span class="ident" id="8279954">g</span><span class="op" id="8279955">,</span>&nbsp;<span class="ident" id="8279957">e</span><span class="op" id="8279958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8279965">}</span><br>
<span class="lineno"></span><span class="op" id="8279967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="keyword" id="8279970">func</span>&nbsp;<span class="ident" id="8279975">diff</span><span class="op" id="8279979">(</span><span class="ident" id="8279980">t</span>&nbsp;<span class="op" id="8279982">*</span><span class="ident" id="8279983">testing</span><span class="op" id="8279990">.</span><span class="ident" id="8279991">T</span><span class="op" id="8279992">,</span>&nbsp;<span class="ident" id="8279994">prefix</span>&nbsp;<span class="builtintype" id="8280001">string</span><span class="op" id="8280007">,</span>&nbsp;<span class="ident" id="8280009">have</span><span class="op" id="8280013">,</span>&nbsp;<span class="ident" id="8280015">want</span>&nbsp;<span class="keyword" id="8280020">interface</span><span class="op" id="8280029">{</span><span class="op" id="8280030">}</span><span class="op" id="8280031">)</span>&nbsp;<span class="op" id="8280033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280036">hv</span>&nbsp;<span class="op" id="8280039">:=</span>&nbsp;<span class="ident" id="8280042">reflect</span><span class="op" id="8280049">.</span><span class="ident" id="8280050">ValueOf</span><span class="op" id="8280057">(</span><span class="ident" id="8280058">have</span><span class="op" id="8280062">)</span><span class="op" id="8280063">.</span><span class="ident" id="8280064">Elem</span><span class="op" id="8280068">(</span><span class="op" id="8280069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280072">wv</span>&nbsp;<span class="op" id="8280075">:=</span>&nbsp;<span class="ident" id="8280078">reflect</span><span class="op" id="8280085">.</span><span class="ident" id="8280086">ValueOf</span><span class="op" id="8280093">(</span><span class="ident" id="8280094">want</span><span class="op" id="8280098">)</span><span class="op" id="8280099">.</span><span class="ident" id="8280100">Elem</span><span class="op" id="8280104">(</span><span class="op" id="8280105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280108">if</span>&nbsp;<span class="ident" id="8280111">hv</span><span class="op" id="8280113">.</span><span class="ident" id="8280114">Type</span><span class="op" id="8280118">(</span><span class="op" id="8280119">)</span>&nbsp;<span class="op" id="8280121">!=</span>&nbsp;<span class="ident" id="8280124">wv</span><span class="op" id="8280126">.</span><span class="ident" id="8280127">Type</span><span class="op" id="8280131">(</span><span class="op" id="8280132">)</span>&nbsp;<span class="op" id="8280134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280138">t</span><span class="op" id="8280139">.</span><span class="ident" id="8280140">Errorf</span><span class="op" id="8280146">(</span><span class="string" id="8280147">&#34;%s:&nbsp;type&nbsp;mismatch&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8280177">,</span>&nbsp;<span class="ident" id="8280179">prefix</span><span class="op" id="8280185">,</span>&nbsp;<span class="ident" id="8280187">hv</span><span class="op" id="8280189">.</span><span class="ident" id="8280190">Type</span><span class="op" id="8280194">(</span><span class="op" id="8280195">)</span><span class="op" id="8280196">,</span>&nbsp;<span class="ident" id="8280198">wv</span><span class="op" id="8280200">.</span><span class="ident" id="8280201">Type</span><span class="op" id="8280205">(</span><span class="op" id="8280206">)</span><span class="op" id="8280207">)</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280213">for</span>&nbsp;<span class="ident" id="8280217">i</span>&nbsp;<span class="op" id="8280219">:=</span>&nbsp;<span class="num" id="8280222">0</span><span class="op" id="8280223">;</span>&nbsp;<span class="ident" id="8280225">i</span>&nbsp;<span class="op" id="8280227">&lt;</span>&nbsp;<span class="ident" id="8280229">hv</span><span class="op" id="8280231">.</span><span class="ident" id="8280232">NumField</span><span class="op" id="8280240">(</span><span class="op" id="8280241">)</span><span class="op" id="8280242">;</span>&nbsp;<span class="ident" id="8280244">i</span><span class="op" id="8280245">++</span>&nbsp;<span class="op" id="8280248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280252">hf</span>&nbsp;<span class="op" id="8280255">:=</span>&nbsp;<span class="ident" id="8280258">hv</span><span class="op" id="8280260">.</span><span class="ident" id="8280261">Field</span><span class="op" id="8280266">(</span><span class="ident" id="8280267">i</span><span class="op" id="8280268">)</span><span class="op" id="8280269">.</span><span class="ident" id="8280270">Interface</span><span class="op" id="8280279">(</span><span class="op" id="8280280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280284">wf</span>&nbsp;<span class="op" id="8280287">:=</span>&nbsp;<span class="ident" id="8280290">wv</span><span class="op" id="8280292">.</span><span class="ident" id="8280293">Field</span><span class="op" id="8280298">(</span><span class="ident" id="8280299">i</span><span class="op" id="8280300">)</span><span class="op" id="8280301">.</span><span class="ident" id="8280302">Interface</span><span class="op" id="8280311">(</span><span class="op" id="8280312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280316">if</span>&nbsp;<span class="op" id="8280319">!</span><span class="ident" id="8280320">reflect</span><span class="op" id="8280327">.</span><span class="ident" id="8280328">DeepEqual</span><span class="op" id="8280337">(</span><span class="ident" id="8280338">hf</span><span class="op" id="8280340">,</span>&nbsp;<span class="ident" id="8280342">wf</span><span class="op" id="8280344">)</span>&nbsp;<span class="op" id="8280346">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280351">t</span><span class="op" id="8280352">.</span><span class="ident" id="8280353">Errorf</span><span class="op" id="8280359">(</span><span class="string" id="8280360">&#34;%s:&nbsp;%s&nbsp;=&nbsp;%v&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8280381">,</span>&nbsp;<span class="ident" id="8280383">prefix</span><span class="op" id="8280389">,</span>&nbsp;<span class="ident" id="8280391">hv</span><span class="op" id="8280393">.</span><span class="ident" id="8280394">Type</span><span class="op" id="8280398">(</span><span class="op" id="8280399">)</span><span class="op" id="8280400">.</span><span class="ident" id="8280401">Field</span><span class="op" id="8280406">(</span><span class="ident" id="8280407">i</span><span class="op" id="8280408">)</span><span class="op" id="8280409">.</span><span class="ident" id="8280410">Name</span><span class="op" id="8280414">,</span>&nbsp;<span class="ident" id="8280416">hf</span><span class="op" id="8280418">,</span>&nbsp;<span class="ident" id="8280420">wf</span><span class="op" id="8280422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280429">}</span><br>
<span class="lineno"></span><span class="op" id="8280431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span><span class="keyword" id="8280434">type</span>&nbsp;<span class="ident" id="8280439">responseLocationTest</span>&nbsp;<span class="keyword" id="8280460">struct</span>&nbsp;<span class="op" id="8280467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280470">location</span>&nbsp;<span class="builtintype" id="8280479">string</span>&nbsp;<span class="comment" id="8280486">//&nbsp;Response&#39;s&nbsp;Location&nbsp;header&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280523">requrl</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8280532">string</span>&nbsp;<span class="comment" id="8280539">//&nbsp;Response.Request.URL&nbsp;or&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280570">want</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8280579">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280587">wantErr</span>&nbsp;&nbsp;<span class="builtintype" id="8280596">error</span><br>
<span class="lineno">570</span><span class="op" id="8280602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8280605">var</span>&nbsp;<span class="ident" id="8280609">responseLocationTests</span>&nbsp;<span class="op" id="8280631">=</span>&nbsp;<span class="op" id="8280633">[</span><span class="op" id="8280634">]</span><span class="ident" id="8280635">responseLocationTest</span><span class="op" id="8280655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280658">{</span><span class="string" id="8280659">&#34;/foo&#34;</span><span class="op" id="8280665">,</span>&nbsp;<span class="string" id="8280667">&#34;http://bar.com/baz&#34;</span><span class="op" id="8280687">,</span>&nbsp;<span class="string" id="8280689">&#34;http://bar.com/foo&#34;</span><span class="op" id="8280709">,</span>&nbsp;<span class="ident" id="8280711">nil</span><span class="op" id="8280714">}</span><span class="op" id="8280715">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280718">{</span><span class="string" id="8280719">&#34;http://foo.com/&#34;</span><span class="op" id="8280736">,</span>&nbsp;<span class="string" id="8280738">&#34;http://bar.com/baz&#34;</span><span class="op" id="8280758">,</span>&nbsp;<span class="string" id="8280760">&#34;http://foo.com/&#34;</span><span class="op" id="8280777">,</span>&nbsp;<span class="ident" id="8280779">nil</span><span class="op" id="8280782">}</span><span class="op" id="8280783">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8280786">{</span><span class="string" id="8280787">&#34;&#34;</span><span class="op" id="8280789">,</span>&nbsp;<span class="string" id="8280791">&#34;http://bar.com/baz&#34;</span><span class="op" id="8280811">,</span>&nbsp;<span class="string" id="8280813">&#34;&#34;</span><span class="op" id="8280815">,</span>&nbsp;<span class="ident" id="8280817">ErrNoLocation</span><span class="op" id="8280830">}</span><span class="op" id="8280831">,</span><br>
<span class="lineno"></span><span class="op" id="8280833">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8280836">func</span>&nbsp;<span class="ident" id="8280841">TestLocationResponse</span><span class="op" id="8280861">(</span><span class="ident" id="8280862">t</span>&nbsp;<span class="op" id="8280864">*</span><span class="ident" id="8280865">testing</span><span class="op" id="8280872">.</span><span class="ident" id="8280873">T</span><span class="op" id="8280874">)</span>&nbsp;<span class="op" id="8280876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8280879">for</span>&nbsp;<span class="ident" id="8280883">i</span><span class="op" id="8280884">,</span>&nbsp;<span class="ident" id="8280886">tt</span>&nbsp;<span class="op" id="8280889">:=</span>&nbsp;<span class="keyword" id="8280892">range</span>&nbsp;<span class="ident" id="8280898">responseLocationTests</span>&nbsp;<span class="op" id="8280920">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280924">res</span>&nbsp;<span class="op" id="8280928">:=</span>&nbsp;<span class="builtinfunc" id="8280931">new</span><span class="op" id="8280934">(</span><span class="ident" id="8280935">Response</span><span class="op" id="8280943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280947">res</span><span class="op" id="8280950">.</span><span class="ident" id="8280951">Header</span>&nbsp;<span class="op" id="8280958">=</span>&nbsp;<span class="builtinfunc" id="8280960">make</span><span class="op" id="8280964">(</span><span class="ident" id="8280965">Header</span><span class="op" id="8280971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8280975">res</span><span class="op" id="8280978">.</span><span class="ident" id="8280979">Header</span><span class="op" id="8280985">.</span><span class="ident" id="8280986">Set</span><span class="op" id="8280989">(</span><span class="string" id="8280990">&#34;Location&#34;</span><span class="op" id="8281000">,</span>&nbsp;<span class="ident" id="8281002">tt</span><span class="op" id="8281004">.</span><span class="ident" id="8281005">location</span><span class="op" id="8281013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281017">if</span>&nbsp;<span class="ident" id="8281020">tt</span><span class="op" id="8281022">.</span><span class="ident" id="8281023">requrl</span>&nbsp;<span class="op" id="8281030">!=</span>&nbsp;<span class="string" id="8281033">&#34;&#34;</span>&nbsp;<span class="op" id="8281036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281041">res</span><span class="op" id="8281044">.</span><span class="ident" id="8281045">Request</span>&nbsp;<span class="op" id="8281053">=</span>&nbsp;<span class="op" id="8281055">&amp;</span><span class="ident" id="8281056">Request</span><span class="op" id="8281063">{</span><span class="op" id="8281064">}</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281069">var</span>&nbsp;<span class="ident" id="8281073">err</span>&nbsp;<span class="builtintype" id="8281077">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281086">res</span><span class="op" id="8281089">.</span><span class="ident" id="8281090">Request</span><span class="op" id="8281097">.</span><span class="ident" id="8281098">URL</span><span class="op" id="8281101">,</span>&nbsp;<span class="ident" id="8281103">err</span>&nbsp;<span class="op" id="8281107">=</span>&nbsp;<span class="ident" id="8281109">url</span><span class="op" id="8281112">.</span><span class="ident" id="8281113">Parse</span><span class="op" id="8281118">(</span><span class="ident" id="8281119">tt</span><span class="op" id="8281121">.</span><span class="ident" id="8281122">requrl</span><span class="op" id="8281128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281133">if</span>&nbsp;<span class="ident" id="8281136">err</span>&nbsp;<span class="op" id="8281140">!=</span>&nbsp;<span class="ident" id="8281143">nil</span>&nbsp;<span class="op" id="8281147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281153">t</span><span class="op" id="8281154">.</span><span class="ident" id="8281155">Fatalf</span><span class="op" id="8281161">(</span><span class="string" id="8281162">&#34;bad&nbsp;test&nbsp;URL&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="8281183">,</span>&nbsp;<span class="ident" id="8281185">tt</span><span class="op" id="8281187">.</span><span class="ident" id="8281188">requrl</span><span class="op" id="8281194">,</span>&nbsp;<span class="ident" id="8281196">err</span><span class="op" id="8281199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281204">}</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281213">got</span><span class="op" id="8281216">,</span>&nbsp;<span class="ident" id="8281218">err</span>&nbsp;<span class="op" id="8281222">:=</span>&nbsp;<span class="ident" id="8281225">res</span><span class="op" id="8281228">.</span><span class="ident" id="8281229">Location</span><span class="op" id="8281237">(</span><span class="op" id="8281238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281242">if</span>&nbsp;<span class="ident" id="8281245">tt</span><span class="op" id="8281247">.</span><span class="ident" id="8281248">wantErr</span>&nbsp;<span class="op" id="8281256">!=</span>&nbsp;<span class="ident" id="8281259">nil</span>&nbsp;<span class="op" id="8281263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281268">if</span>&nbsp;<span class="ident" id="8281271">err</span>&nbsp;<span class="op" id="8281275">==</span>&nbsp;<span class="ident" id="8281278">nil</span>&nbsp;<span class="op" id="8281282">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281288">t</span><span class="op" id="8281289">.</span><span class="ident" id="8281290">Errorf</span><span class="op" id="8281296">(</span><span class="string" id="8281297">&#34;%d.&nbsp;err=nil;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8281319">,</span>&nbsp;<span class="ident" id="8281321">i</span><span class="op" id="8281322">,</span>&nbsp;<span class="ident" id="8281324">tt</span><span class="op" id="8281326">.</span><span class="ident" id="8281327">wantErr</span><span class="op" id="8281334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281340">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281352">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281357">if</span>&nbsp;<span class="ident" id="8281360">g</span><span class="op" id="8281361">,</span>&nbsp;<span class="ident" id="8281363">e</span>&nbsp;<span class="op" id="8281365">:=</span>&nbsp;<span class="ident" id="8281368">err</span><span class="op" id="8281371">.</span><span class="ident" id="8281372">Error</span><span class="op" id="8281377">(</span><span class="op" id="8281378">)</span><span class="op" id="8281379">,</span>&nbsp;<span class="ident" id="8281381">tt</span><span class="op" id="8281383">.</span><span class="ident" id="8281384">wantErr</span><span class="op" id="8281391">.</span><span class="ident" id="8281392">Error</span><span class="op" id="8281397">(</span><span class="op" id="8281398">)</span><span class="op" id="8281399">;</span>&nbsp;<span class="ident" id="8281401">g</span>&nbsp;<span class="op" id="8281403">!=</span>&nbsp;<span class="ident" id="8281406">e</span>&nbsp;<span class="op" id="8281408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281414">t</span><span class="op" id="8281415">.</span><span class="ident" id="8281416">Errorf</span><span class="op" id="8281422">(</span><span class="string" id="8281423">&#34;%d.&nbsp;err=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8281444">,</span>&nbsp;<span class="ident" id="8281446">i</span><span class="op" id="8281447">,</span>&nbsp;<span class="ident" id="8281449">g</span><span class="op" id="8281450">,</span>&nbsp;<span class="ident" id="8281452">e</span><span class="op" id="8281453">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281459">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281476">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281491">if</span>&nbsp;<span class="ident" id="8281494">err</span>&nbsp;<span class="op" id="8281498">!=</span>&nbsp;<span class="ident" id="8281501">nil</span>&nbsp;<span class="op" id="8281505">{</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281510">t</span><span class="op" id="8281511">.</span><span class="ident" id="8281512">Errorf</span><span class="op" id="8281518">(</span><span class="string" id="8281519">&#34;%d.&nbsp;err=%q&#34;</span><span class="op" id="8281531">,</span>&nbsp;<span class="ident" id="8281533">i</span><span class="op" id="8281534">,</span>&nbsp;<span class="ident" id="8281536">err</span><span class="op" id="8281539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281544">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281559">if</span>&nbsp;<span class="ident" id="8281562">g</span><span class="op" id="8281563">,</span>&nbsp;<span class="ident" id="8281565">e</span>&nbsp;<span class="op" id="8281567">:=</span>&nbsp;<span class="ident" id="8281570">got</span><span class="op" id="8281573">.</span><span class="ident" id="8281574">String</span><span class="op" id="8281580">(</span><span class="op" id="8281581">)</span><span class="op" id="8281582">,</span>&nbsp;<span class="ident" id="8281584">tt</span><span class="op" id="8281586">.</span><span class="ident" id="8281587">want</span><span class="op" id="8281591">;</span>&nbsp;<span class="ident" id="8281593">g</span>&nbsp;<span class="op" id="8281595">!=</span>&nbsp;<span class="ident" id="8281598">e</span>&nbsp;<span class="op" id="8281600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281605">t</span><span class="op" id="8281606">.</span><span class="ident" id="8281607">Errorf</span><span class="op" id="8281613">(</span><span class="string" id="8281614">&#34;%d.&nbsp;Location=%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8281640">,</span>&nbsp;<span class="ident" id="8281642">i</span><span class="op" id="8281643">,</span>&nbsp;<span class="ident" id="8281645">g</span><span class="op" id="8281646">,</span>&nbsp;<span class="ident" id="8281648">e</span><span class="op" id="8281649">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281656">}</span><br>
<span class="lineno"></span><span class="op" id="8281658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8281661">func</span>&nbsp;<span class="ident" id="8281666">TestResponseStatusStutter</span><span class="op" id="8281691">(</span><span class="ident" id="8281692">t</span>&nbsp;<span class="op" id="8281694">*</span><span class="ident" id="8281695">testing</span><span class="op" id="8281702">.</span><span class="ident" id="8281703">T</span><span class="op" id="8281704">)</span>&nbsp;<span class="op" id="8281706">{</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281709">r</span>&nbsp;<span class="op" id="8281711">:=</span>&nbsp;<span class="op" id="8281714">&amp;</span><span class="ident" id="8281715">Response</span><span class="op" id="8281723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281727">Status</span><span class="op" id="8281733">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8281739">&#34;123&nbsp;some&nbsp;status&#34;</span><span class="op" id="8281756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281760">StatusCode</span><span class="op" id="8281770">:</span>&nbsp;<span class="num" id="8281772">123</span><span class="op" id="8281775">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281779">ProtoMajor</span><span class="op" id="8281789">:</span>&nbsp;<span class="num" id="8281791">1</span><span class="op" id="8281792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281796">ProtoMinor</span><span class="op" id="8281806">:</span>&nbsp;<span class="num" id="8281808">3</span><span class="op" id="8281809">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281812">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281815">var</span>&nbsp;<span class="ident" id="8281819">buf</span>&nbsp;<span class="ident" id="8281823">bytes</span><span class="op" id="8281828">.</span><span class="ident" id="8281829">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281837">r</span><span class="op" id="8281838">.</span><span class="ident" id="8281839">Write</span><span class="op" id="8281844">(</span><span class="op" id="8281845">&amp;</span><span class="ident" id="8281846">buf</span><span class="op" id="8281849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8281852">if</span>&nbsp;<span class="ident" id="8281855">strings</span><span class="op" id="8281862">.</span><span class="ident" id="8281863">Contains</span><span class="op" id="8281871">(</span><span class="ident" id="8281872">buf</span><span class="op" id="8281875">.</span><span class="ident" id="8281876">String</span><span class="op" id="8281882">(</span><span class="op" id="8281883">)</span><span class="op" id="8281884">,</span>&nbsp;<span class="string" id="8281886">&#34;123&nbsp;123&#34;</span><span class="op" id="8281895">)</span>&nbsp;<span class="op" id="8281897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8281901">t</span><span class="op" id="8281902">.</span><span class="ident" id="8281903">Errorf</span><span class="op" id="8281909">(</span><span class="string" id="8281910">&#34;stutter&nbsp;in&nbsp;status:&nbsp;%s&#34;</span><span class="op" id="8281933">,</span>&nbsp;<span class="ident" id="8281935">buf</span><span class="op" id="8281938">.</span><span class="ident" id="8281939">String</span><span class="op" id="8281945">(</span><span class="op" id="8281946">)</span><span class="op" id="8281947">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8281950">}</span><br>
<span class="lineno"></span><span class="op" id="8281952">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8281955">func</span>&nbsp;<span class="ident" id="8281960">TestResponseContentLengthShortBody</span><span class="op" id="8281994">(</span><span class="ident" id="8281995">t</span>&nbsp;<span class="op" id="8281997">*</span><span class="ident" id="8281998">testing</span><span class="op" id="8282005">.</span><span class="ident" id="8282006">T</span><span class="op" id="8282007">)</span>&nbsp;<span class="op" id="8282009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282012">const</span>&nbsp;<span class="ident" id="8282018">shortBody</span>&nbsp;<span class="op" id="8282028">=</span>&nbsp;<span class="string" id="8282030">&#34;Short&nbsp;body,&nbsp;not&nbsp;123&nbsp;bytes.&#34;</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282060">br</span>&nbsp;<span class="op" id="8282063">:=</span>&nbsp;<span class="ident" id="8282066">bufio</span><span class="op" id="8282071">.</span><span class="ident" id="8282072">NewReader</span><span class="op" id="8282081">(</span><span class="ident" id="8282082">strings</span><span class="op" id="8282089">.</span><span class="ident" id="8282090">NewReader</span><span class="op" id="8282099">(</span><span class="string" id="8282100">&#34;HTTP/1.1&nbsp;200&nbsp;OK\r\n&#34;</span>&nbsp;<span class="op" id="8282122">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8282126">&#34;Content-Length:&nbsp;123\r\n&#34;</span>&nbsp;<span class="op" id="8282152">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8282156">&#34;\r\n&#34;</span>&nbsp;<span class="op" id="8282163">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282167">shortBody</span><span class="op" id="8282176">)</span><span class="op" id="8282177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282180">res</span><span class="op" id="8282183">,</span>&nbsp;<span class="ident" id="8282185">err</span>&nbsp;<span class="op" id="8282189">:=</span>&nbsp;<span class="ident" id="8282192">ReadResponse</span><span class="op" id="8282204">(</span><span class="ident" id="8282205">br</span><span class="op" id="8282207">,</span>&nbsp;<span class="op" id="8282209">&amp;</span><span class="ident" id="8282210">Request</span><span class="op" id="8282217">{</span><span class="ident" id="8282218">Method</span><span class="op" id="8282224">:</span>&nbsp;<span class="string" id="8282226">&#34;GET&#34;</span><span class="op" id="8282231">}</span><span class="op" id="8282232">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282235">if</span>&nbsp;<span class="ident" id="8282238">err</span>&nbsp;<span class="op" id="8282242">!=</span>&nbsp;<span class="ident" id="8282245">nil</span>&nbsp;<span class="op" id="8282249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282253">t</span><span class="op" id="8282254">.</span><span class="ident" id="8282255">Fatal</span><span class="op" id="8282260">(</span><span class="ident" id="8282261">err</span><span class="op" id="8282264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8282267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282270">if</span>&nbsp;<span class="ident" id="8282273">res</span><span class="op" id="8282276">.</span><span class="ident" id="8282277">ContentLength</span>&nbsp;<span class="op" id="8282291">!=</span>&nbsp;<span class="num" id="8282294">123</span>&nbsp;<span class="op" id="8282298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282302">t</span><span class="op" id="8282303">.</span><span class="ident" id="8282304">Fatalf</span><span class="op" id="8282310">(</span><span class="string" id="8282311">&#34;Content-Length&nbsp;=&nbsp;%d;&nbsp;want&nbsp;123&#34;</span><span class="op" id="8282342">,</span>&nbsp;<span class="ident" id="8282344">res</span><span class="op" id="8282347">.</span><span class="ident" id="8282348">ContentLength</span><span class="op" id="8282361">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8282364">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282367">var</span>&nbsp;<span class="ident" id="8282371">buf</span>&nbsp;<span class="ident" id="8282375">bytes</span><span class="op" id="8282380">.</span><span class="ident" id="8282381">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282389">n</span><span class="op" id="8282390">,</span>&nbsp;<span class="ident" id="8282392">err</span>&nbsp;<span class="op" id="8282396">:=</span>&nbsp;<span class="ident" id="8282399">io</span><span class="op" id="8282401">.</span><span class="ident" id="8282402">Copy</span><span class="op" id="8282406">(</span><span class="op" id="8282407">&amp;</span><span class="ident" id="8282408">buf</span><span class="op" id="8282411">,</span>&nbsp;<span class="ident" id="8282413">res</span><span class="op" id="8282416">.</span><span class="ident" id="8282417">Body</span><span class="op" id="8282421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282424">if</span>&nbsp;<span class="ident" id="8282427">n</span>&nbsp;<span class="op" id="8282429">!=</span>&nbsp;<span class="ident" id="8282432">int64</span><span class="op" id="8282437">(</span><span class="builtinfunc" id="8282438">len</span><span class="op" id="8282441">(</span><span class="ident" id="8282442">shortBody</span><span class="op" id="8282451">)</span><span class="op" id="8282452">)</span>&nbsp;<span class="op" id="8282454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282458">t</span><span class="op" id="8282459">.</span><span class="ident" id="8282460">Errorf</span><span class="op" id="8282466">(</span><span class="string" id="8282467">&#34;Copied&nbsp;%d&nbsp;bytes;&nbsp;want&nbsp;%d,&nbsp;len(%q)&#34;</span><span class="op" id="8282502">,</span>&nbsp;<span class="ident" id="8282504">n</span><span class="op" id="8282505">,</span>&nbsp;<span class="builtinfunc" id="8282507">len</span><span class="op" id="8282510">(</span><span class="ident" id="8282511">shortBody</span><span class="op" id="8282520">)</span><span class="op" id="8282521">,</span>&nbsp;<span class="ident" id="8282523">shortBody</span><span class="op" id="8282532">)</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8282535">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282538">if</span>&nbsp;<span class="ident" id="8282541">buf</span><span class="op" id="8282544">.</span><span class="ident" id="8282545">String</span><span class="op" id="8282551">(</span><span class="op" id="8282552">)</span>&nbsp;<span class="op" id="8282554">!=</span>&nbsp;<span class="ident" id="8282557">shortBody</span>&nbsp;<span class="op" id="8282567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282571">t</span><span class="op" id="8282572">.</span><span class="ident" id="8282573">Errorf</span><span class="op" id="8282579">(</span><span class="string" id="8282580">&#34;Read&nbsp;body&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8282603">,</span>&nbsp;<span class="ident" id="8282605">buf</span><span class="op" id="8282608">.</span><span class="ident" id="8282609">String</span><span class="op" id="8282615">(</span><span class="op" id="8282616">)</span><span class="op" id="8282617">,</span>&nbsp;<span class="ident" id="8282619">shortBody</span><span class="op" id="8282628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8282631">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282634">if</span>&nbsp;<span class="ident" id="8282637">err</span>&nbsp;<span class="op" id="8282641">!=</span>&nbsp;<span class="ident" id="8282644">io</span><span class="op" id="8282646">.</span><span class="ident" id="8282647">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="8282664">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282668">t</span><span class="op" id="8282669">.</span><span class="ident" id="8282670">Errorf</span><span class="op" id="8282676">(</span><span class="string" id="8282677">&#34;io.Copy&nbsp;error&nbsp;=&nbsp;%#v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="8282724">,</span>&nbsp;<span class="ident" id="8282726">err</span><span class="op" id="8282729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8282732">}</span><br>
<span class="lineno"></span><span class="op" id="8282734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8282737">func</span>&nbsp;<span class="ident" id="8282742">TestReadResponseUnexpectedEOF</span><span class="op" id="8282771">(</span><span class="ident" id="8282772">t</span>&nbsp;<span class="op" id="8282774">*</span><span class="ident" id="8282775">testing</span><span class="op" id="8282782">.</span><span class="ident" id="8282783">T</span><span class="op" id="8282784">)</span>&nbsp;<span class="op" id="8282786">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282789">br</span>&nbsp;<span class="op" id="8282792">:=</span>&nbsp;<span class="ident" id="8282795">bufio</span><span class="op" id="8282800">.</span><span class="ident" id="8282801">NewReader</span><span class="op" id="8282810">(</span><span class="ident" id="8282811">strings</span><span class="op" id="8282818">.</span><span class="ident" id="8282819">NewReader</span><span class="op" id="8282828">(</span><span class="string" id="8282829">&#34;HTTP/1.1&nbsp;301&nbsp;Moved&nbsp;Permanently\r\n&#34;</span>&nbsp;<span class="op" id="8282866">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8282870">&#34;Location:&nbsp;http://example.com&#34;</span><span class="op" id="8282900">)</span><span class="op" id="8282901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282904">_</span><span class="op" id="8282905">,</span>&nbsp;<span class="ident" id="8282907">err</span>&nbsp;<span class="op" id="8282911">:=</span>&nbsp;<span class="ident" id="8282914">ReadResponse</span><span class="op" id="8282926">(</span><span class="ident" id="8282927">br</span><span class="op" id="8282929">,</span>&nbsp;<span class="ident" id="8282931">nil</span><span class="op" id="8282934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8282937">if</span>&nbsp;<span class="ident" id="8282940">err</span>&nbsp;<span class="op" id="8282944">!=</span>&nbsp;<span class="ident" id="8282947">io</span><span class="op" id="8282949">.</span><span class="ident" id="8282950">ErrUnexpectedEOF</span>&nbsp;<span class="op" id="8282967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8282971">t</span><span class="op" id="8282972">.</span><span class="ident" id="8282973">Errorf</span><span class="op" id="8282979">(</span><span class="string" id="8282980">&#34;ReadResponse&nbsp;=&nbsp;%v;&nbsp;want&nbsp;io.ErrUnexpectedEOF&#34;</span><span class="op" id="8283025">,</span>&nbsp;<span class="ident" id="8283027">err</span><span class="op" id="8283030">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8283033">}</span><br>
<span class="lineno"></span><span class="op" id="8283035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8283038">func</span>&nbsp;<span class="ident" id="8283043">TestNeedsSniff</span><span class="op" id="8283057">(</span><span class="ident" id="8283058">t</span>&nbsp;<span class="op" id="8283060">*</span><span class="ident" id="8283061">testing</span><span class="op" id="8283068">.</span><span class="ident" id="8283069">T</span><span class="op" id="8283070">)</span>&nbsp;<span class="op" id="8283072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8283075">//&nbsp;needsSniff&nbsp;returns&nbsp;true&nbsp;with&nbsp;an&nbsp;empty&nbsp;response.</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8283127">r</span>&nbsp;<span class="op" id="8283129">:=</span>&nbsp;<span class="op" id="8283132">&amp;</span><span class="ident" id="8283133">response</span><span class="op" id="8283141">{</span><span class="op" id="8283142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8283145">if</span>&nbsp;<span class="ident" id="8283148">got</span><span class="op" id="8283151">,</span>&nbsp;<span class="ident" id="8283153">want</span>&nbsp;<span class="op" id="8283158">:=</span>&nbsp;<span class="ident" id="8283161">r</span><span class="op" id="8283162">.</span><span class="ident" id="8283163">needsSniff</span><span class="op" id="8283173">(</span><span class="op" id="8283174">)</span><span class="op" id="8283175">,</span>&nbsp;<span class="builtintype" id="8283177">true</span><span class="op" id="8283181">;</span>&nbsp;<span class="ident" id="8283183">got</span>&nbsp;<span class="op" id="8283187">!=</span>&nbsp;<span class="ident" id="8283190">want</span>&nbsp;<span class="op" id="8283195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8283199">t</span><span class="op" id="8283200">.</span><span class="ident" id="8283201">Errorf</span><span class="op" id="8283207">(</span><span class="string" id="8283208">&#34;needsSniff&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="8283234">,</span>&nbsp;<span class="ident" id="8283236">got</span><span class="op" id="8283239">,</span>&nbsp;<span class="ident" id="8283241">want</span><span class="op" id="8283245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8283248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8283251">//&nbsp;needsSniff&nbsp;returns&nbsp;false&nbsp;when&nbsp;Content-Type&nbsp;=&nbsp;nil.</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8283305">r</span><span class="op" id="8283306">.</span><span class="ident" id="8283307">handlerHeader</span>&nbsp;<span class="op" id="8283321">=</span>&nbsp;<span class="ident" id="8283323">Header</span><span class="op" id="8283329">{</span><span class="string" id="8283330">&#34;Content-Type&#34;</span><span class="op" id="8283344">:</span>&nbsp;<span class="ident" id="8283346">nil</span><span class="op" id="8283349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8283352">if</span>&nbsp;<span class="ident" id="8283355">got</span><span class="op" id="8283358">,</span>&nbsp;<span class="ident" id="8283360">want</span>&nbsp;<span class="op" id="8283365">:=</span>&nbsp;<span class="ident" id="8283368">r</span><span class="op" id="8283369">.</span><span class="ident" id="8283370">needsSniff</span><span class="op" id="8283380">(</span><span class="op" id="8283381">)</span><span class="op" id="8283382">,</span>&nbsp;<span class="builtintype" id="8283384">false</span><span class="op" id="8283389">;</span>&nbsp;<span class="ident" id="8283391">got</span>&nbsp;<span class="op" id="8283395">!=</span>&nbsp;<span class="ident" id="8283398">want</span>&nbsp;<span class="op" id="8283403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8283407">t</span><span class="op" id="8283408">.</span><span class="ident" id="8283409">Errorf</span><span class="op" id="8283415">(</span><span class="string" id="8283416">&#34;needsSniff&nbsp;empty&nbsp;Content-Type&nbsp;=&nbsp;%t;&nbsp;want&nbsp;%t&#34;</span><span class="op" id="8283461">,</span>&nbsp;<span class="ident" id="8283463">got</span><span class="op" id="8283466">,</span>&nbsp;<span class="ident" id="8283468">want</span><span class="op" id="8283472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8283475">}</span><br>
<span class="lineno"></span><span class="op" id="8283477">}</span>
</div>
</body>
</html>
