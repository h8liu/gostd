<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="8580493">package</span>&nbsp;<span class="ident" id="8580501">arch8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8580508">import</span>&nbsp;<span class="op" id="8580515">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8580518">&#34;testing&#34;</span><br>
<span class="lineno">5</span><span class="op" id="8580528">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8580531">func</span>&nbsp;<span class="ident" id="8580536">TestPage</span><span class="op" id="8580544">(</span><span class="ident" id="8580545">t</span>&nbsp;<span class="op" id="8580547">*</span><span class="ident" id="8580548">testing</span><span class="op" id="8580555">.</span><span class="ident" id="8580556">T</span><span class="op" id="8580557">)</span>&nbsp;<span class="op" id="8580559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580562">e</span>&nbsp;<span class="op" id="8580564">:=</span>&nbsp;<span class="keyword" id="8580567">func</span><span class="op" id="8580571">(</span><span class="ident" id="8580572">cond</span>&nbsp;<span class="builtintype" id="8580577">bool</span><span class="op" id="8580581">,</span>&nbsp;<span class="ident" id="8580583">s</span>&nbsp;<span class="builtintype" id="8580585">string</span><span class="op" id="8580591">,</span>&nbsp;<span class="ident" id="8580593">args</span>&nbsp;<span class="op" id="8580598">...</span><span class="keyword" id="8580601">interface</span><span class="op" id="8580610">{</span><span class="op" id="8580611">}</span><span class="op" id="8580612">)</span>&nbsp;<span class="op" id="8580614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8580618">if</span>&nbsp;<span class="ident" id="8580621">cond</span>&nbsp;<span class="op" id="8580626">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580631">t</span><span class="op" id="8580632">.</span><span class="ident" id="8580633">Fatalf</span><span class="op" id="8580639">(</span><span class="ident" id="8580640">s</span><span class="op" id="8580641">,</span>&nbsp;<span class="ident" id="8580643">args</span><span class="op" id="8580647">...</span><span class="op" id="8580650">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580661">e</span><span class="op" id="8580662">(</span><span class="ident" id="8580663">PageSize</span>&nbsp;<span class="op" id="8580672">&lt;</span>&nbsp;<span class="num" id="8580674">4</span><span class="op" id="8580675">,</span>&nbsp;<span class="string" id="8580677">&#34;page&nbsp;size&nbsp;too&nbsp;small&#34;</span><span class="op" id="8580698">)</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580701">p</span>&nbsp;<span class="op" id="8580703">:=</span>&nbsp;<span class="ident" id="8580706">newPage</span><span class="op" id="8580713">(</span><span class="op" id="8580714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580717">e</span><span class="op" id="8580718">(</span><span class="builtinfunc" id="8580719">len</span><span class="op" id="8580722">(</span><span class="ident" id="8580723">p</span><span class="op" id="8580724">.</span><span class="ident" id="8580725">Bytes</span><span class="op" id="8580730">)</span>&nbsp;<span class="op" id="8580732">!=</span>&nbsp;<span class="ident" id="8580735">PageSize</span><span class="op" id="8580743">,</span>&nbsp;<span class="string" id="8580745">&#34;page&nbsp;size&nbsp;incorrect&#34;</span><span class="op" id="8580766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580769">e</span><span class="op" id="8580770">(</span><span class="op" id="8580771">(</span><span class="op" id="8580772">(</span><span class="ident" id="8580773">PageSize</span><span class="op" id="8580781">-</span><span class="num" id="8580782">1</span><span class="op" id="8580783">)</span><span class="op" id="8580784">&amp;</span><span class="ident" id="8580785">PageSize</span><span class="op" id="8580793">)</span>&nbsp;<span class="op" id="8580795">!=</span>&nbsp;<span class="num" id="8580798">0</span><span class="op" id="8580799">,</span>&nbsp;<span class="string" id="8580801">&#34;page&nbsp;size&nbsp;not&nbsp;exponential&nbsp;of&nbsp;2&#34;</span><span class="op" id="8580833">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8580837">for</span>&nbsp;<span class="ident" id="8580841">i</span>&nbsp;<span class="op" id="8580843">:=</span>&nbsp;<span class="builtintype" id="8580846">uint32</span><span class="op" id="8580852">(</span><span class="num" id="8580853">0</span><span class="op" id="8580854">)</span><span class="op" id="8580855">;</span>&nbsp;<span class="ident" id="8580857">i</span>&nbsp;<span class="op" id="8580859">&lt;</span>&nbsp;<span class="ident" id="8580861">PageSize</span><span class="op" id="8580869">;</span>&nbsp;<span class="ident" id="8580871">i</span><span class="op" id="8580872">++</span>&nbsp;<span class="op" id="8580875">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580879">b</span>&nbsp;<span class="op" id="8580881">:=</span>&nbsp;<span class="ident" id="8580884">p</span><span class="op" id="8580885">.</span><span class="ident" id="8580886">ReadByte</span><span class="op" id="8580894">(</span><span class="ident" id="8580895">i</span><span class="op" id="8580896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580900">e</span><span class="op" id="8580901">(</span><span class="ident" id="8580902">b</span>&nbsp;<span class="op" id="8580904">!=</span>&nbsp;<span class="num" id="8580907">0</span><span class="op" id="8580908">,</span>&nbsp;<span class="string" id="8580910">&#34;byte&nbsp;%d&nbsp;not&nbsp;zero&nbsp;on&nbsp;new&nbsp;page&#34;</span><span class="op" id="8580940">,</span>&nbsp;<span class="ident" id="8580942">i</span><span class="op" id="8580943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8580946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8580950">for</span>&nbsp;<span class="ident" id="8580954">i</span>&nbsp;<span class="op" id="8580956">:=</span>&nbsp;<span class="builtintype" id="8580959">uint32</span><span class="op" id="8580965">(</span><span class="num" id="8580966">0</span><span class="op" id="8580967">)</span><span class="op" id="8580968">;</span>&nbsp;<span class="ident" id="8580970">i</span>&nbsp;<span class="op" id="8580972">&lt;</span>&nbsp;<span class="ident" id="8580974">PageSize</span><span class="op" id="8580982">/</span><span class="num" id="8580983">4</span><span class="op" id="8580984">;</span>&nbsp;<span class="ident" id="8580986">i</span><span class="op" id="8580987">++</span>&nbsp;<span class="op" id="8580990">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8580994">b</span>&nbsp;<span class="op" id="8580996">:=</span>&nbsp;<span class="ident" id="8580999">p</span><span class="op" id="8581000">.</span><span class="ident" id="8581001">ReadWord</span><span class="op" id="8581009">(</span><span class="ident" id="8581010">i</span>&nbsp;<span class="op" id="8581012">*</span>&nbsp;<span class="num" id="8581014">4</span><span class="op" id="8581015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581019">e</span><span class="op" id="8581020">(</span><span class="ident" id="8581021">b</span>&nbsp;<span class="op" id="8581023">!=</span>&nbsp;<span class="num" id="8581026">0</span><span class="op" id="8581027">,</span>&nbsp;<span class="string" id="8581029">&#34;word&nbsp;%d&nbsp;not&nbsp;zero&nbsp;on&nbsp;new&nbsp;page&#34;</span><span class="op" id="8581059">,</span>&nbsp;<span class="ident" id="8581061">i</span><span class="op" id="8581062">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8581065">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581069">off</span>&nbsp;<span class="op" id="8581073">:=</span>&nbsp;<span class="builtintype" id="8581076">uint32</span><span class="op" id="8581082">(</span><span class="num" id="8581083">56</span><span class="op" id="8581085">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581088">p</span><span class="op" id="8581089">.</span><span class="ident" id="8581090">WriteByte</span><span class="op" id="8581099">(</span><span class="ident" id="8581100">off</span><span class="op" id="8581103">+</span><span class="num" id="8581104">0</span><span class="op" id="8581105">,</span>&nbsp;<span class="num" id="8581107">0x37</span><span class="op" id="8581111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581114">p</span><span class="op" id="8581115">.</span><span class="ident" id="8581116">WriteByte</span><span class="op" id="8581125">(</span><span class="ident" id="8581126">off</span><span class="op" id="8581129">+</span><span class="num" id="8581130">1</span><span class="op" id="8581131">,</span>&nbsp;<span class="num" id="8581133">0x21</span><span class="op" id="8581137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581140">p</span><span class="op" id="8581141">.</span><span class="ident" id="8581142">WriteByte</span><span class="op" id="8581151">(</span><span class="ident" id="8581152">off</span><span class="op" id="8581155">+</span><span class="num" id="8581156">2</span><span class="op" id="8581157">,</span>&nbsp;<span class="num" id="8581159">0x5a</span><span class="op" id="8581163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581166">p</span><span class="op" id="8581167">.</span><span class="ident" id="8581168">WriteByte</span><span class="op" id="8581177">(</span><span class="ident" id="8581178">off</span><span class="op" id="8581181">+</span><span class="num" id="8581182">3</span><span class="op" id="8581183">,</span>&nbsp;<span class="num" id="8581185">0x70</span><span class="op" id="8581189">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581193">exp</span>&nbsp;<span class="op" id="8581197">:=</span>&nbsp;<span class="builtintype" id="8581200">uint32</span><span class="op" id="8581206">(</span><span class="num" id="8581207">0x705a2137</span><span class="op" id="8581217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581220">w</span>&nbsp;<span class="op" id="8581222">:=</span>&nbsp;<span class="ident" id="8581225">p</span><span class="op" id="8581226">.</span><span class="ident" id="8581227">ReadWord</span><span class="op" id="8581235">(</span><span class="ident" id="8581236">off</span><span class="op" id="8581239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581242">e</span><span class="op" id="8581243">(</span><span class="ident" id="8581244">w</span>&nbsp;<span class="op" id="8581246">!=</span>&nbsp;<span class="ident" id="8581249">exp</span><span class="op" id="8581252">,</span>&nbsp;<span class="string" id="8581254">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8581280">,</span>&nbsp;<span class="ident" id="8581282">exp</span><span class="op" id="8581285">,</span>&nbsp;<span class="ident" id="8581287">w</span><span class="op" id="8581288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581291">w</span>&nbsp;<span class="op" id="8581293">=</span>&nbsp;<span class="ident" id="8581295">p</span><span class="op" id="8581296">.</span><span class="ident" id="8581297">ReadWord</span><span class="op" id="8581305">(</span><span class="ident" id="8581306">off</span>&nbsp;<span class="op" id="8581310">+</span>&nbsp;<span class="num" id="8581312">3</span><span class="op" id="8581313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581316">e</span><span class="op" id="8581317">(</span><span class="ident" id="8581318">w</span>&nbsp;<span class="op" id="8581320">!=</span>&nbsp;<span class="ident" id="8581323">exp</span><span class="op" id="8581326">,</span>&nbsp;<span class="string" id="8581328">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8581354">,</span>&nbsp;<span class="ident" id="8581356">exp</span><span class="op" id="8581359">,</span>&nbsp;<span class="ident" id="8581361">w</span><span class="op" id="8581362">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581365">w</span>&nbsp;<span class="op" id="8581367">=</span>&nbsp;<span class="ident" id="8581369">p</span><span class="op" id="8581370">.</span><span class="ident" id="8581371">ReadWord</span><span class="op" id="8581379">(</span><span class="ident" id="8581380">off</span>&nbsp;<span class="op" id="8581384">+</span>&nbsp;<span class="num" id="8581386">3</span>&nbsp;<span class="op" id="8581388">+</span>&nbsp;<span class="num" id="8581390">2</span><span class="op" id="8581391">*</span><span class="ident" id="8581392">PageSize</span><span class="op" id="8581400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581403">e</span><span class="op" id="8581404">(</span><span class="ident" id="8581405">w</span>&nbsp;<span class="op" id="8581407">!=</span>&nbsp;<span class="ident" id="8581410">exp</span><span class="op" id="8581413">,</span>&nbsp;<span class="string" id="8581415">&#34;expect&nbsp;0x%08x&nbsp;got&nbsp;0x%08x&#34;</span><span class="op" id="8581441">,</span>&nbsp;<span class="ident" id="8581443">exp</span><span class="op" id="8581446">,</span>&nbsp;<span class="ident" id="8581448">w</span><span class="op" id="8581449">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581453">b</span>&nbsp;<span class="op" id="8581455">:=</span>&nbsp;<span class="ident" id="8581458">p</span><span class="op" id="8581459">.</span><span class="ident" id="8581460">ReadByte</span><span class="op" id="8581468">(</span><span class="ident" id="8581469">off</span>&nbsp;<span class="op" id="8581473">+</span>&nbsp;<span class="num" id="8581475">2</span><span class="op" id="8581476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581479">e</span><span class="op" id="8581480">(</span><span class="ident" id="8581481">b</span>&nbsp;<span class="op" id="8581483">!=</span>&nbsp;<span class="num" id="8581486">0x5a</span><span class="op" id="8581490">,</span>&nbsp;<span class="string" id="8581492">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8581519">,</span>&nbsp;<span class="ident" id="8581521">b</span><span class="op" id="8581522">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581525">b</span>&nbsp;<span class="op" id="8581527">=</span>&nbsp;<span class="ident" id="8581529">p</span><span class="op" id="8581530">.</span><span class="ident" id="8581531">ReadByte</span><span class="op" id="8581539">(</span><span class="ident" id="8581540">off</span>&nbsp;<span class="op" id="8581544">+</span>&nbsp;<span class="num" id="8581546">2</span>&nbsp;<span class="op" id="8581548">+</span>&nbsp;<span class="num" id="8581550">2</span><span class="op" id="8581551">*</span><span class="ident" id="8581552">PageSize</span><span class="op" id="8581560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581563">e</span><span class="op" id="8581564">(</span><span class="ident" id="8581565">b</span>&nbsp;<span class="op" id="8581567">!=</span>&nbsp;<span class="num" id="8581570">0x5a</span><span class="op" id="8581574">,</span>&nbsp;<span class="string" id="8581576">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8581603">,</span>&nbsp;<span class="ident" id="8581605">b</span><span class="op" id="8581606">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581610">p</span><span class="op" id="8581611">.</span><span class="ident" id="8581612">WriteWord</span><span class="op" id="8581621">(</span><span class="ident" id="8581622">off</span><span class="op" id="8581625">+</span><span class="num" id="8581626">3</span><span class="op" id="8581627">+</span><span class="num" id="8581628">2</span><span class="op" id="8581629">*</span><span class="ident" id="8581630">PageSize</span><span class="op" id="8581638">,</span>&nbsp;<span class="ident" id="8581640">exp</span><span class="op" id="8581643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581646">b</span>&nbsp;<span class="op" id="8581648">=</span>&nbsp;<span class="ident" id="8581650">p</span><span class="op" id="8581651">.</span><span class="ident" id="8581652">ReadByte</span><span class="op" id="8581660">(</span><span class="ident" id="8581661">off</span>&nbsp;<span class="op" id="8581665">+</span>&nbsp;<span class="num" id="8581667">2</span><span class="op" id="8581668">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8581671">e</span><span class="op" id="8581672">(</span><span class="ident" id="8581673">b</span>&nbsp;<span class="op" id="8581675">!=</span>&nbsp;<span class="num" id="8581678">0x5a</span><span class="op" id="8581682">,</span>&nbsp;<span class="string" id="8581684">&#34;got&nbsp;incorrect&nbsp;byte&nbsp;0x%02x&#34;</span><span class="op" id="8581711">,</span>&nbsp;<span class="ident" id="8581713">b</span><span class="op" id="8581714">)</span><br>
<span class="lineno"></span><span class="op" id="8581716">}</span>
</div>
</body>
</html>
