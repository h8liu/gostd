<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6507868">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6507923">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6507977">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6508028">package</span>&nbsp;<span class="ident" id="6508036">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508043">import</span>&nbsp;<span class="op" id="6508050">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508053">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508062">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508069">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508075">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508088">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508099">&#34;sync&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6508107">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6508117">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508120">type</span>&nbsp;<span class="ident" id="6508125">deflateTest</span>&nbsp;<span class="keyword" id="6508137">struct</span>&nbsp;<span class="op" id="6508144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508147">in</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6508153">[</span><span class="op" id="6508154">]</span><span class="builtintype" id="6508155">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508161">level</span>&nbsp;<span class="builtintype" id="6508167">int</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508172">out</span>&nbsp;&nbsp;&nbsp;<span class="op" id="6508178">[</span><span class="op" id="6508179">]</span><span class="builtintype" id="6508180">byte</span><br>
<span class="lineno"></span><span class="op" id="6508185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508188">type</span>&nbsp;<span class="ident" id="6508193">deflateInflateTest</span>&nbsp;<span class="keyword" id="6508212">struct</span>&nbsp;<span class="op" id="6508219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508222">in</span>&nbsp;<span class="op" id="6508225">[</span><span class="op" id="6508226">]</span><span class="builtintype" id="6508227">byte</span><br>
<span class="lineno">25</span><span class="op" id="6508232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508235">type</span>&nbsp;<span class="ident" id="6508240">reverseBitsTest</span>&nbsp;<span class="keyword" id="6508256">struct</span>&nbsp;<span class="op" id="6508263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508266">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6508275">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508283">bitCount</span>&nbsp;<span class="builtintype" id="6508292">uint8</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6508299">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6508308">uint16</span><br>
<span class="lineno"></span><span class="op" id="6508315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6508318">var</span>&nbsp;<span class="ident" id="6508322">deflateTests</span>&nbsp;<span class="op" id="6508335">=</span>&nbsp;<span class="op" id="6508337">[</span><span class="op" id="6508338">]</span><span class="op" id="6508339">*</span><span class="ident" id="6508340"><a href="/compress/flate/deflate_test.go.html#6508125">deflateTest</a></span><span class="op" id="6508351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508354">{</span><span class="op" id="6508355">[</span><span class="op" id="6508356">]</span><span class="builtintype" id="6508357">byte</span><span class="op" id="6508361">{</span><span class="op" id="6508362">}</span><span class="op" id="6508363">,</span>&nbsp;<span class="num" id="6508365">0</span><span class="op" id="6508366">,</span>&nbsp;<span class="op" id="6508368">[</span><span class="op" id="6508369">]</span><span class="builtintype" id="6508370">byte</span><span class="op" id="6508374">{</span><span class="num" id="6508375">1</span><span class="op" id="6508376">,</span>&nbsp;<span class="num" id="6508378">0</span><span class="op" id="6508379">,</span>&nbsp;<span class="num" id="6508381">0</span><span class="op" id="6508382">,</span>&nbsp;<span class="num" id="6508384">255</span><span class="op" id="6508387">,</span>&nbsp;<span class="num" id="6508389">255</span><span class="op" id="6508392">}</span><span class="op" id="6508393">}</span><span class="op" id="6508394">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508397">{</span><span class="op" id="6508398">[</span><span class="op" id="6508399">]</span><span class="builtintype" id="6508400">byte</span><span class="op" id="6508404">{</span><span class="num" id="6508405">0x11</span><span class="op" id="6508409">}</span><span class="op" id="6508410">,</span>&nbsp;<span class="op" id="6508412">-</span><span class="num" id="6508413">1</span><span class="op" id="6508414">,</span>&nbsp;<span class="op" id="6508416">[</span><span class="op" id="6508417">]</span><span class="builtintype" id="6508418">byte</span><span class="op" id="6508422">{</span><span class="num" id="6508423">18</span><span class="op" id="6508425">,</span>&nbsp;<span class="num" id="6508427">4</span><span class="op" id="6508428">,</span>&nbsp;<span class="num" id="6508430">4</span><span class="op" id="6508431">,</span>&nbsp;<span class="num" id="6508433">0</span><span class="op" id="6508434">,</span>&nbsp;<span class="num" id="6508436">0</span><span class="op" id="6508437">,</span>&nbsp;<span class="num" id="6508439">255</span><span class="op" id="6508442">,</span>&nbsp;<span class="num" id="6508444">255</span><span class="op" id="6508447">}</span><span class="op" id="6508448">}</span><span class="op" id="6508449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508452">{</span><span class="op" id="6508453">[</span><span class="op" id="6508454">]</span><span class="builtintype" id="6508455">byte</span><span class="op" id="6508459">{</span><span class="num" id="6508460">0x11</span><span class="op" id="6508464">}</span><span class="op" id="6508465">,</span>&nbsp;<span class="ident" id="6508467"><a href="/compress/flate/deflate.go.html#4552541">DefaultCompression</a></span><span class="op" id="6508485">,</span>&nbsp;<span class="op" id="6508487">[</span><span class="op" id="6508488">]</span><span class="builtintype" id="6508489">byte</span><span class="op" id="6508493">{</span><span class="num" id="6508494">18</span><span class="op" id="6508496">,</span>&nbsp;<span class="num" id="6508498">4</span><span class="op" id="6508499">,</span>&nbsp;<span class="num" id="6508501">4</span><span class="op" id="6508502">,</span>&nbsp;<span class="num" id="6508504">0</span><span class="op" id="6508505">,</span>&nbsp;<span class="num" id="6508507">0</span><span class="op" id="6508508">,</span>&nbsp;<span class="num" id="6508510">255</span><span class="op" id="6508513">,</span>&nbsp;<span class="num" id="6508515">255</span><span class="op" id="6508518">}</span><span class="op" id="6508519">}</span><span class="op" id="6508520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508523">{</span><span class="op" id="6508524">[</span><span class="op" id="6508525">]</span><span class="builtintype" id="6508526">byte</span><span class="op" id="6508530">{</span><span class="num" id="6508531">0x11</span><span class="op" id="6508535">}</span><span class="op" id="6508536">,</span>&nbsp;<span class="num" id="6508538">4</span><span class="op" id="6508539">,</span>&nbsp;<span class="op" id="6508541">[</span><span class="op" id="6508542">]</span><span class="builtintype" id="6508543">byte</span><span class="op" id="6508547">{</span><span class="num" id="6508548">18</span><span class="op" id="6508550">,</span>&nbsp;<span class="num" id="6508552">4</span><span class="op" id="6508553">,</span>&nbsp;<span class="num" id="6508555">4</span><span class="op" id="6508556">,</span>&nbsp;<span class="num" id="6508558">0</span><span class="op" id="6508559">,</span>&nbsp;<span class="num" id="6508561">0</span><span class="op" id="6508562">,</span>&nbsp;<span class="num" id="6508564">255</span><span class="op" id="6508567">,</span>&nbsp;<span class="num" id="6508569">255</span><span class="op" id="6508572">}</span><span class="op" id="6508573">}</span><span class="op" id="6508574">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508578">{</span><span class="op" id="6508579">[</span><span class="op" id="6508580">]</span><span class="builtintype" id="6508581">byte</span><span class="op" id="6508585">{</span><span class="num" id="6508586">0x11</span><span class="op" id="6508590">}</span><span class="op" id="6508591">,</span>&nbsp;<span class="num" id="6508593">0</span><span class="op" id="6508594">,</span>&nbsp;<span class="op" id="6508596">[</span><span class="op" id="6508597">]</span><span class="builtintype" id="6508598">byte</span><span class="op" id="6508602">{</span><span class="num" id="6508603">0</span><span class="op" id="6508604">,</span>&nbsp;<span class="num" id="6508606">1</span><span class="op" id="6508607">,</span>&nbsp;<span class="num" id="6508609">0</span><span class="op" id="6508610">,</span>&nbsp;<span class="num" id="6508612">254</span><span class="op" id="6508615">,</span>&nbsp;<span class="num" id="6508617">255</span><span class="op" id="6508620">,</span>&nbsp;<span class="num" id="6508622">17</span><span class="op" id="6508624">,</span>&nbsp;<span class="num" id="6508626">1</span><span class="op" id="6508627">,</span>&nbsp;<span class="num" id="6508629">0</span><span class="op" id="6508630">,</span>&nbsp;<span class="num" id="6508632">0</span><span class="op" id="6508633">,</span>&nbsp;<span class="num" id="6508635">255</span><span class="op" id="6508638">,</span>&nbsp;<span class="num" id="6508640">255</span><span class="op" id="6508643">}</span><span class="op" id="6508644">}</span><span class="op" id="6508645">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508648">{</span><span class="op" id="6508649">[</span><span class="op" id="6508650">]</span><span class="builtintype" id="6508651">byte</span><span class="op" id="6508655">{</span><span class="num" id="6508656">0x11</span><span class="op" id="6508660">,</span>&nbsp;<span class="num" id="6508662">0x12</span><span class="op" id="6508666">}</span><span class="op" id="6508667">,</span>&nbsp;<span class="num" id="6508669">0</span><span class="op" id="6508670">,</span>&nbsp;<span class="op" id="6508672">[</span><span class="op" id="6508673">]</span><span class="builtintype" id="6508674">byte</span><span class="op" id="6508678">{</span><span class="num" id="6508679">0</span><span class="op" id="6508680">,</span>&nbsp;<span class="num" id="6508682">2</span><span class="op" id="6508683">,</span>&nbsp;<span class="num" id="6508685">0</span><span class="op" id="6508686">,</span>&nbsp;<span class="num" id="6508688">253</span><span class="op" id="6508691">,</span>&nbsp;<span class="num" id="6508693">255</span><span class="op" id="6508696">,</span>&nbsp;<span class="num" id="6508698">17</span><span class="op" id="6508700">,</span>&nbsp;<span class="num" id="6508702">18</span><span class="op" id="6508704">,</span>&nbsp;<span class="num" id="6508706">1</span><span class="op" id="6508707">,</span>&nbsp;<span class="num" id="6508709">0</span><span class="op" id="6508710">,</span>&nbsp;<span class="num" id="6508712">0</span><span class="op" id="6508713">,</span>&nbsp;<span class="num" id="6508715">255</span><span class="op" id="6508718">,</span>&nbsp;<span class="num" id="6508720">255</span><span class="op" id="6508723">}</span><span class="op" id="6508724">}</span><span class="op" id="6508725">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508728">{</span><span class="op" id="6508729">[</span><span class="op" id="6508730">]</span><span class="builtintype" id="6508731">byte</span><span class="op" id="6508735">{</span><span class="num" id="6508736">0x11</span><span class="op" id="6508740">,</span>&nbsp;<span class="num" id="6508742">0x11</span><span class="op" id="6508746">,</span>&nbsp;<span class="num" id="6508748">0x11</span><span class="op" id="6508752">,</span>&nbsp;<span class="num" id="6508754">0x11</span><span class="op" id="6508758">,</span>&nbsp;<span class="num" id="6508760">0x11</span><span class="op" id="6508764">,</span>&nbsp;<span class="num" id="6508766">0x11</span><span class="op" id="6508770">,</span>&nbsp;<span class="num" id="6508772">0x11</span><span class="op" id="6508776">,</span>&nbsp;<span class="num" id="6508778">0x11</span><span class="op" id="6508782">}</span><span class="op" id="6508783">,</span>&nbsp;<span class="num" id="6508785">0</span><span class="op" id="6508786">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508790">[</span><span class="op" id="6508791">]</span><span class="builtintype" id="6508792">byte</span><span class="op" id="6508796">{</span><span class="num" id="6508797">0</span><span class="op" id="6508798">,</span>&nbsp;<span class="num" id="6508800">8</span><span class="op" id="6508801">,</span>&nbsp;<span class="num" id="6508803">0</span><span class="op" id="6508804">,</span>&nbsp;<span class="num" id="6508806">247</span><span class="op" id="6508809">,</span>&nbsp;<span class="num" id="6508811">255</span><span class="op" id="6508814">,</span>&nbsp;<span class="num" id="6508816">17</span><span class="op" id="6508818">,</span>&nbsp;<span class="num" id="6508820">17</span><span class="op" id="6508822">,</span>&nbsp;<span class="num" id="6508824">17</span><span class="op" id="6508826">,</span>&nbsp;<span class="num" id="6508828">17</span><span class="op" id="6508830">,</span>&nbsp;<span class="num" id="6508832">17</span><span class="op" id="6508834">,</span>&nbsp;<span class="num" id="6508836">17</span><span class="op" id="6508838">,</span>&nbsp;<span class="num" id="6508840">17</span><span class="op" id="6508842">,</span>&nbsp;<span class="num" id="6508844">17</span><span class="op" id="6508846">,</span>&nbsp;<span class="num" id="6508848">1</span><span class="op" id="6508849">,</span>&nbsp;<span class="num" id="6508851">0</span><span class="op" id="6508852">,</span>&nbsp;<span class="num" id="6508854">0</span><span class="op" id="6508855">,</span>&nbsp;<span class="num" id="6508857">255</span><span class="op" id="6508860">,</span>&nbsp;<span class="num" id="6508862">255</span><span class="op" id="6508865">}</span><span class="op" id="6508866">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508869">}</span><span class="op" id="6508870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508873">{</span><span class="op" id="6508874">[</span><span class="op" id="6508875">]</span><span class="builtintype" id="6508876">byte</span><span class="op" id="6508880">{</span><span class="op" id="6508881">}</span><span class="op" id="6508882">,</span>&nbsp;<span class="num" id="6508884">1</span><span class="op" id="6508885">,</span>&nbsp;<span class="op" id="6508887">[</span><span class="op" id="6508888">]</span><span class="builtintype" id="6508889">byte</span><span class="op" id="6508893">{</span><span class="num" id="6508894">1</span><span class="op" id="6508895">,</span>&nbsp;<span class="num" id="6508897">0</span><span class="op" id="6508898">,</span>&nbsp;<span class="num" id="6508900">0</span><span class="op" id="6508901">,</span>&nbsp;<span class="num" id="6508903">255</span><span class="op" id="6508906">,</span>&nbsp;<span class="num" id="6508908">255</span><span class="op" id="6508911">}</span><span class="op" id="6508912">}</span><span class="op" id="6508913">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508916">{</span><span class="op" id="6508917">[</span><span class="op" id="6508918">]</span><span class="builtintype" id="6508919">byte</span><span class="op" id="6508923">{</span><span class="num" id="6508924">0x11</span><span class="op" id="6508928">}</span><span class="op" id="6508929">,</span>&nbsp;<span class="num" id="6508931">1</span><span class="op" id="6508932">,</span>&nbsp;<span class="op" id="6508934">[</span><span class="op" id="6508935">]</span><span class="builtintype" id="6508936">byte</span><span class="op" id="6508940">{</span><span class="num" id="6508941">18</span><span class="op" id="6508943">,</span>&nbsp;<span class="num" id="6508945">4</span><span class="op" id="6508946">,</span>&nbsp;<span class="num" id="6508948">4</span><span class="op" id="6508949">,</span>&nbsp;<span class="num" id="6508951">0</span><span class="op" id="6508952">,</span>&nbsp;<span class="num" id="6508954">0</span><span class="op" id="6508955">,</span>&nbsp;<span class="num" id="6508957">255</span><span class="op" id="6508960">,</span>&nbsp;<span class="num" id="6508962">255</span><span class="op" id="6508965">}</span><span class="op" id="6508966">}</span><span class="op" id="6508967">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6508970">{</span><span class="op" id="6508971">[</span><span class="op" id="6508972">]</span><span class="builtintype" id="6508973">byte</span><span class="op" id="6508977">{</span><span class="num" id="6508978">0x11</span><span class="op" id="6508982">,</span>&nbsp;<span class="num" id="6508984">0x12</span><span class="op" id="6508988">}</span><span class="op" id="6508989">,</span>&nbsp;<span class="num" id="6508991">1</span><span class="op" id="6508992">,</span>&nbsp;<span class="op" id="6508994">[</span><span class="op" id="6508995">]</span><span class="builtintype" id="6508996">byte</span><span class="op" id="6509000">{</span><span class="num" id="6509001">18</span><span class="op" id="6509003">,</span>&nbsp;<span class="num" id="6509005">20</span><span class="op" id="6509007">,</span>&nbsp;<span class="num" id="6509009">2</span><span class="op" id="6509010">,</span>&nbsp;<span class="num" id="6509012">4</span><span class="op" id="6509013">,</span>&nbsp;<span class="num" id="6509015">0</span><span class="op" id="6509016">,</span>&nbsp;<span class="num" id="6509018">0</span><span class="op" id="6509019">,</span>&nbsp;<span class="num" id="6509021">255</span><span class="op" id="6509024">,</span>&nbsp;<span class="num" id="6509026">255</span><span class="op" id="6509029">}</span><span class="op" id="6509030">}</span><span class="op" id="6509031">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509034">{</span><span class="op" id="6509035">[</span><span class="op" id="6509036">]</span><span class="builtintype" id="6509037">byte</span><span class="op" id="6509041">{</span><span class="num" id="6509042">0x11</span><span class="op" id="6509046">,</span>&nbsp;<span class="num" id="6509048">0x11</span><span class="op" id="6509052">,</span>&nbsp;<span class="num" id="6509054">0x11</span><span class="op" id="6509058">,</span>&nbsp;<span class="num" id="6509060">0x11</span><span class="op" id="6509064">,</span>&nbsp;<span class="num" id="6509066">0x11</span><span class="op" id="6509070">,</span>&nbsp;<span class="num" id="6509072">0x11</span><span class="op" id="6509076">,</span>&nbsp;<span class="num" id="6509078">0x11</span><span class="op" id="6509082">,</span>&nbsp;<span class="num" id="6509084">0x11</span><span class="op" id="6509088">}</span><span class="op" id="6509089">,</span>&nbsp;<span class="num" id="6509091">1</span><span class="op" id="6509092">,</span>&nbsp;<span class="op" id="6509094">[</span><span class="op" id="6509095">]</span><span class="builtintype" id="6509096">byte</span><span class="op" id="6509100">{</span><span class="num" id="6509101">18</span><span class="op" id="6509103">,</span>&nbsp;<span class="num" id="6509105">132</span><span class="op" id="6509108">,</span>&nbsp;<span class="num" id="6509110">2</span><span class="op" id="6509111">,</span>&nbsp;<span class="num" id="6509113">64</span><span class="op" id="6509115">,</span>&nbsp;<span class="num" id="6509117">0</span><span class="op" id="6509118">,</span>&nbsp;<span class="num" id="6509120">0</span><span class="op" id="6509121">,</span>&nbsp;<span class="num" id="6509123">0</span><span class="op" id="6509124">,</span>&nbsp;<span class="num" id="6509126">255</span><span class="op" id="6509129">,</span>&nbsp;<span class="num" id="6509131">255</span><span class="op" id="6509134">}</span><span class="op" id="6509135">}</span><span class="op" id="6509136">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509139">{</span><span class="op" id="6509140">[</span><span class="op" id="6509141">]</span><span class="builtintype" id="6509142">byte</span><span class="op" id="6509146">{</span><span class="op" id="6509147">}</span><span class="op" id="6509148">,</span>&nbsp;<span class="num" id="6509150">9</span><span class="op" id="6509151">,</span>&nbsp;<span class="op" id="6509153">[</span><span class="op" id="6509154">]</span><span class="builtintype" id="6509155">byte</span><span class="op" id="6509159">{</span><span class="num" id="6509160">1</span><span class="op" id="6509161">,</span>&nbsp;<span class="num" id="6509163">0</span><span class="op" id="6509164">,</span>&nbsp;<span class="num" id="6509166">0</span><span class="op" id="6509167">,</span>&nbsp;<span class="num" id="6509169">255</span><span class="op" id="6509172">,</span>&nbsp;<span class="num" id="6509174">255</span><span class="op" id="6509177">}</span><span class="op" id="6509178">}</span><span class="op" id="6509179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509182">{</span><span class="op" id="6509183">[</span><span class="op" id="6509184">]</span><span class="builtintype" id="6509185">byte</span><span class="op" id="6509189">{</span><span class="num" id="6509190">0x11</span><span class="op" id="6509194">}</span><span class="op" id="6509195">,</span>&nbsp;<span class="num" id="6509197">9</span><span class="op" id="6509198">,</span>&nbsp;<span class="op" id="6509200">[</span><span class="op" id="6509201">]</span><span class="builtintype" id="6509202">byte</span><span class="op" id="6509206">{</span><span class="num" id="6509207">18</span><span class="op" id="6509209">,</span>&nbsp;<span class="num" id="6509211">4</span><span class="op" id="6509212">,</span>&nbsp;<span class="num" id="6509214">4</span><span class="op" id="6509215">,</span>&nbsp;<span class="num" id="6509217">0</span><span class="op" id="6509218">,</span>&nbsp;<span class="num" id="6509220">0</span><span class="op" id="6509221">,</span>&nbsp;<span class="num" id="6509223">255</span><span class="op" id="6509226">,</span>&nbsp;<span class="num" id="6509228">255</span><span class="op" id="6509231">}</span><span class="op" id="6509232">}</span><span class="op" id="6509233">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509236">{</span><span class="op" id="6509237">[</span><span class="op" id="6509238">]</span><span class="builtintype" id="6509239">byte</span><span class="op" id="6509243">{</span><span class="num" id="6509244">0x11</span><span class="op" id="6509248">,</span>&nbsp;<span class="num" id="6509250">0x12</span><span class="op" id="6509254">}</span><span class="op" id="6509255">,</span>&nbsp;<span class="num" id="6509257">9</span><span class="op" id="6509258">,</span>&nbsp;<span class="op" id="6509260">[</span><span class="op" id="6509261">]</span><span class="builtintype" id="6509262">byte</span><span class="op" id="6509266">{</span><span class="num" id="6509267">18</span><span class="op" id="6509269">,</span>&nbsp;<span class="num" id="6509271">20</span><span class="op" id="6509273">,</span>&nbsp;<span class="num" id="6509275">2</span><span class="op" id="6509276">,</span>&nbsp;<span class="num" id="6509278">4</span><span class="op" id="6509279">,</span>&nbsp;<span class="num" id="6509281">0</span><span class="op" id="6509282">,</span>&nbsp;<span class="num" id="6509284">0</span><span class="op" id="6509285">,</span>&nbsp;<span class="num" id="6509287">255</span><span class="op" id="6509290">,</span>&nbsp;<span class="num" id="6509292">255</span><span class="op" id="6509295">}</span><span class="op" id="6509296">}</span><span class="op" id="6509297">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509300">{</span><span class="op" id="6509301">[</span><span class="op" id="6509302">]</span><span class="builtintype" id="6509303">byte</span><span class="op" id="6509307">{</span><span class="num" id="6509308">0x11</span><span class="op" id="6509312">,</span>&nbsp;<span class="num" id="6509314">0x11</span><span class="op" id="6509318">,</span>&nbsp;<span class="num" id="6509320">0x11</span><span class="op" id="6509324">,</span>&nbsp;<span class="num" id="6509326">0x11</span><span class="op" id="6509330">,</span>&nbsp;<span class="num" id="6509332">0x11</span><span class="op" id="6509336">,</span>&nbsp;<span class="num" id="6509338">0x11</span><span class="op" id="6509342">,</span>&nbsp;<span class="num" id="6509344">0x11</span><span class="op" id="6509348">,</span>&nbsp;<span class="num" id="6509350">0x11</span><span class="op" id="6509354">}</span><span class="op" id="6509355">,</span>&nbsp;<span class="num" id="6509357">9</span><span class="op" id="6509358">,</span>&nbsp;<span class="op" id="6509360">[</span><span class="op" id="6509361">]</span><span class="builtintype" id="6509362">byte</span><span class="op" id="6509366">{</span><span class="num" id="6509367">18</span><span class="op" id="6509369">,</span>&nbsp;<span class="num" id="6509371">132</span><span class="op" id="6509374">,</span>&nbsp;<span class="num" id="6509376">2</span><span class="op" id="6509377">,</span>&nbsp;<span class="num" id="6509379">64</span><span class="op" id="6509381">,</span>&nbsp;<span class="num" id="6509383">0</span><span class="op" id="6509384">,</span>&nbsp;<span class="num" id="6509386">0</span><span class="op" id="6509387">,</span>&nbsp;<span class="num" id="6509389">0</span><span class="op" id="6509390">,</span>&nbsp;<span class="num" id="6509392">255</span><span class="op" id="6509395">,</span>&nbsp;<span class="num" id="6509397">255</span><span class="op" id="6509400">}</span><span class="op" id="6509401">}</span><span class="op" id="6509402">,</span><br>
<span class="lineno"></span><span class="op" id="6509404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6509407">var</span>&nbsp;<span class="ident" id="6509411">deflateInflateTests</span>&nbsp;<span class="op" id="6509431">=</span>&nbsp;<span class="op" id="6509433">[</span><span class="op" id="6509434">]</span><span class="op" id="6509435">*</span><span class="ident" id="6509436"><a href="/compress/flate/deflate_test.go.html#6508193">deflateInflateTest</a></span><span class="op" id="6509454">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509457">{</span><span class="op" id="6509458">[</span><span class="op" id="6509459">]</span><span class="builtintype" id="6509460">byte</span><span class="op" id="6509464">{</span><span class="op" id="6509465">}</span><span class="op" id="6509466">}</span><span class="op" id="6509467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509470">{</span><span class="op" id="6509471">[</span><span class="op" id="6509472">]</span><span class="builtintype" id="6509473">byte</span><span class="op" id="6509477">{</span><span class="num" id="6509478">0x11</span><span class="op" id="6509482">}</span><span class="op" id="6509483">}</span><span class="op" id="6509484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509487">{</span><span class="op" id="6509488">[</span><span class="op" id="6509489">]</span><span class="builtintype" id="6509490">byte</span><span class="op" id="6509494">{</span><span class="num" id="6509495">0x11</span><span class="op" id="6509499">,</span>&nbsp;<span class="num" id="6509501">0x12</span><span class="op" id="6509505">}</span><span class="op" id="6509506">}</span><span class="op" id="6509507">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509510">{</span><span class="op" id="6509511">[</span><span class="op" id="6509512">]</span><span class="builtintype" id="6509513">byte</span><span class="op" id="6509517">{</span><span class="num" id="6509518">0x11</span><span class="op" id="6509522">,</span>&nbsp;<span class="num" id="6509524">0x11</span><span class="op" id="6509528">,</span>&nbsp;<span class="num" id="6509530">0x11</span><span class="op" id="6509534">,</span>&nbsp;<span class="num" id="6509536">0x11</span><span class="op" id="6509540">,</span>&nbsp;<span class="num" id="6509542">0x11</span><span class="op" id="6509546">,</span>&nbsp;<span class="num" id="6509548">0x11</span><span class="op" id="6509552">,</span>&nbsp;<span class="num" id="6509554">0x11</span><span class="op" id="6509558">,</span>&nbsp;<span class="num" id="6509560">0x11</span><span class="op" id="6509564">}</span><span class="op" id="6509565">}</span><span class="op" id="6509566">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509569">{</span><span class="op" id="6509570">[</span><span class="op" id="6509571">]</span><span class="builtintype" id="6509572">byte</span><span class="op" id="6509576">{</span><span class="num" id="6509577">0x11</span><span class="op" id="6509581">,</span>&nbsp;<span class="num" id="6509583">0x10</span><span class="op" id="6509587">,</span>&nbsp;<span class="num" id="6509589">0x13</span><span class="op" id="6509593">,</span>&nbsp;<span class="num" id="6509595">0x41</span><span class="op" id="6509599">,</span>&nbsp;<span class="num" id="6509601">0x21</span><span class="op" id="6509605">,</span>&nbsp;<span class="num" id="6509607">0x21</span><span class="op" id="6509611">,</span>&nbsp;<span class="num" id="6509613">0x41</span><span class="op" id="6509617">,</span>&nbsp;<span class="num" id="6509619">0x13</span><span class="op" id="6509623">,</span>&nbsp;<span class="num" id="6509625">0x87</span><span class="op" id="6509629">,</span>&nbsp;<span class="num" id="6509631">0x78</span><span class="op" id="6509635">,</span>&nbsp;<span class="num" id="6509637">0x13</span><span class="op" id="6509641">}</span><span class="op" id="6509642">}</span><span class="op" id="6509643">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509646">{</span><span class="ident" id="6509647"><a href="/compress/flate/deflate_test.go.html#6509825">largeDataChunk</a></span><span class="op" id="6509661">(</span><span class="op" id="6509662">)</span><span class="op" id="6509663">}</span><span class="op" id="6509664">,</span><br>
<span class="lineno"></span><span class="op" id="6509666">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6509669">var</span>&nbsp;<span class="ident" id="6509673">reverseBitsTests</span>&nbsp;<span class="op" id="6509690">=</span>&nbsp;<span class="op" id="6509692">[</span><span class="op" id="6509693">]</span><span class="op" id="6509694">*</span><span class="ident" id="6509695"><a href="/compress/flate/deflate_test.go.html#6508240">reverseBitsTest</a></span><span class="op" id="6509710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509713">{</span><span class="num" id="6509714">1</span><span class="op" id="6509715">,</span>&nbsp;<span class="num" id="6509717">1</span><span class="op" id="6509718">,</span>&nbsp;<span class="num" id="6509720">1</span><span class="op" id="6509721">}</span><span class="op" id="6509722">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509725">{</span><span class="num" id="6509726">1</span><span class="op" id="6509727">,</span>&nbsp;<span class="num" id="6509729">2</span><span class="op" id="6509730">,</span>&nbsp;<span class="num" id="6509732">2</span><span class="op" id="6509733">}</span><span class="op" id="6509734">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509737">{</span><span class="num" id="6509738">1</span><span class="op" id="6509739">,</span>&nbsp;<span class="num" id="6509741">3</span><span class="op" id="6509742">,</span>&nbsp;<span class="num" id="6509744">4</span><span class="op" id="6509745">}</span><span class="op" id="6509746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509749">{</span><span class="num" id="6509750">1</span><span class="op" id="6509751">,</span>&nbsp;<span class="num" id="6509753">4</span><span class="op" id="6509754">,</span>&nbsp;<span class="num" id="6509756">8</span><span class="op" id="6509757">}</span><span class="op" id="6509758">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509761">{</span><span class="num" id="6509762">1</span><span class="op" id="6509763">,</span>&nbsp;<span class="num" id="6509765">5</span><span class="op" id="6509766">,</span>&nbsp;<span class="num" id="6509768">16</span><span class="op" id="6509770">}</span><span class="op" id="6509771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509774">{</span><span class="num" id="6509775">17</span><span class="op" id="6509777">,</span>&nbsp;<span class="num" id="6509779">5</span><span class="op" id="6509780">,</span>&nbsp;<span class="num" id="6509782">17</span><span class="op" id="6509784">}</span><span class="op" id="6509785">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509788">{</span><span class="num" id="6509789">257</span><span class="op" id="6509792">,</span>&nbsp;<span class="num" id="6509794">9</span><span class="op" id="6509795">,</span>&nbsp;<span class="num" id="6509797">257</span><span class="op" id="6509800">}</span><span class="op" id="6509801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509804">{</span><span class="num" id="6509805">29</span><span class="op" id="6509807">,</span>&nbsp;<span class="num" id="6509809">5</span><span class="op" id="6509810">,</span>&nbsp;<span class="num" id="6509812">23</span><span class="op" id="6509814">}</span><span class="op" id="6509815">,</span><br>
<span class="lineno"></span><span class="op" id="6509817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6509820">func</span>&nbsp;<span class="ident" id="6509825">largeDataChunk</span><span class="op" id="6509839">(</span><span class="op" id="6509840">)</span>&nbsp;<span class="op" id="6509842">[</span><span class="op" id="6509843">]</span><span class="builtintype" id="6509844">byte</span>&nbsp;<span class="op" id="6509849">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6509852">result</span>&nbsp;<span class="op" id="6509859">:=</span>&nbsp;<span class="builtinfunc" id="6509862">make</span><span class="op" id="6509866">(</span><span class="op" id="6509867">[</span><span class="op" id="6509868">]</span><span class="builtintype" id="6509869">byte</span><span class="op" id="6509873">,</span>&nbsp;<span class="num" id="6509875">100000</span><span class="op" id="6509881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6509884">for</span>&nbsp;<span class="ident" id="6509888">i</span>&nbsp;<span class="op" id="6509890">:=</span>&nbsp;<span class="keyword" id="6509893">range</span>&nbsp;<span class="ident" id="6509899"><a href="/compress/flate/deflate_test.go.html#6509852">result</a></span>&nbsp;<span class="op" id="6509906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6509910"><a href="/compress/flate/deflate_test.go.html#6509852">result</a></span><span class="op" id="6509916">[</span><span class="ident" id="6509917"><a href="/compress/flate/deflate_test.go.html#6509888">i</a></span><span class="op" id="6509918">]</span>&nbsp;<span class="op" id="6509920">=</span>&nbsp;<span class="builtintype" id="6509922">byte</span><span class="op" id="6509926">(</span><span class="ident" id="6509927"><a href="/compress/flate/deflate_test.go.html#6509888">i</a></span>&nbsp;<span class="op" id="6509929">*</span>&nbsp;<span class="ident" id="6509931"><a href="/compress/flate/deflate_test.go.html#6509888">i</a></span>&nbsp;<span class="op" id="6509933">&amp;</span>&nbsp;<span class="num" id="6509935">0xFF</span><span class="op" id="6509939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6509942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6509945">return</span>&nbsp;<span class="ident" id="6509952"><a href="/compress/flate/deflate_test.go.html#6509852">result</a></span><br>
<span class="lineno">80</span><span class="op" id="6509959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6509962">func</span>&nbsp;<span class="ident" id="6509967">TestDeflate</span><span class="op" id="6509978">(</span><span class="ident" id="6509979">t</span>&nbsp;<span class="op" id="6509981">*</span><span class="ident" id="6509982"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6509989">.</span><span class="ident" id="6509990">T</span><span class="op" id="6509991">)</span>&nbsp;<span class="op" id="6509993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6509996">for</span>&nbsp;<span class="ident" id="6510000">_</span><span class="op" id="6510001">,</span>&nbsp;<span class="ident" id="6510003">h</span>&nbsp;<span class="op" id="6510005">:=</span>&nbsp;<span class="keyword" id="6510008">range</span>&nbsp;<span class="ident" id="6510014"><a href="/compress/flate/deflate_test.go.html#6508322">deflateTests</a></span>&nbsp;<span class="op" id="6510027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510031">var</span>&nbsp;<span class="ident" id="6510035">buf</span>&nbsp;<span class="ident" id="6510039"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6510044">.</span><span class="ident" id="6510045">Buffer</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510054">w</span><span class="op" id="6510055">,</span>&nbsp;<span class="ident" id="6510057">err</span>&nbsp;<span class="op" id="6510061">:=</span>&nbsp;<span class="ident" id="6510064"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6510073">(</span><span class="op" id="6510074">&amp;</span><span class="ident" id="6510075"><a href="/compress/flate/deflate_test.go.html#6510035">buf</a></span><span class="op" id="6510078">,</span>&nbsp;<span class="ident" id="6510080"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510081">.</span><span class="ident" id="6510082">level</span><span class="op" id="6510087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510091">if</span>&nbsp;<span class="ident" id="6510094"><a href="/compress/flate/deflate_test.go.html#6510057">err</a></span>&nbsp;<span class="op" id="6510098">!=</span>&nbsp;<span class="ident" id="6510101">nil</span>&nbsp;<span class="op" id="6510105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510110"><a href="/compress/flate/deflate_test.go.html#6509979">t</a></span><span class="op" id="6510111">.</span><span class="ident" id="6510112">Errorf</span><span class="op" id="6510118">(</span><span class="string" id="6510119">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6510134">,</span>&nbsp;<span class="ident" id="6510136"><a href="/compress/flate/deflate_test.go.html#6510057">err</a></span><span class="op" id="6510139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510144">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510155">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510159"><a href="/compress/flate/deflate_test.go.html#6510054">w</a></span><span class="op" id="6510160">.</span><span class="ident" id="6510161">Write</span><span class="op" id="6510166">(</span><span class="ident" id="6510167"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510168">.</span><span class="ident" id="6510169">in</span><span class="op" id="6510171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510175"><a href="/compress/flate/deflate_test.go.html#6510054">w</a></span><span class="op" id="6510176">.</span><span class="ident" id="6510177">Close</span><span class="op" id="6510182">(</span><span class="op" id="6510183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510187">if</span>&nbsp;<span class="op" id="6510190">!</span><span class="ident" id="6510191"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6510196">.</span><span class="ident" id="6510197">Equal</span><span class="op" id="6510202">(</span><span class="ident" id="6510203"><a href="/compress/flate/deflate_test.go.html#6510035">buf</a></span><span class="op" id="6510206">.</span><span class="ident" id="6510207">Bytes</span><span class="op" id="6510212">(</span><span class="op" id="6510213">)</span><span class="op" id="6510214">,</span>&nbsp;<span class="ident" id="6510216"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510217">.</span><span class="ident" id="6510218">out</span><span class="op" id="6510221">)</span>&nbsp;<span class="op" id="6510223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510228"><a href="/compress/flate/deflate_test.go.html#6509979">t</a></span><span class="op" id="6510229">.</span><span class="ident" id="6510230">Errorf</span><span class="op" id="6510236">(</span><span class="string" id="6510237">&#34;Deflate(%d,&nbsp;%x)&nbsp;=&nbsp;%x,&nbsp;want&nbsp;%x&#34;</span><span class="op" id="6510268">,</span>&nbsp;<span class="ident" id="6510270"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510271">.</span><span class="ident" id="6510272">level</span><span class="op" id="6510277">,</span>&nbsp;<span class="ident" id="6510279"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510280">.</span><span class="ident" id="6510281">in</span><span class="op" id="6510283">,</span>&nbsp;<span class="ident" id="6510285"><a href="/compress/flate/deflate_test.go.html#6510035">buf</a></span><span class="op" id="6510288">.</span><span class="ident" id="6510289">Bytes</span><span class="op" id="6510294">(</span><span class="op" id="6510295">)</span><span class="op" id="6510296">,</span>&nbsp;<span class="ident" id="6510298"><a href="/compress/flate/deflate_test.go.html#6510003">h</a></span><span class="op" id="6510299">.</span><span class="ident" id="6510300">out</span><span class="op" id="6510303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510307">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510310">}</span><br>
<span class="lineno"></span><span class="op" id="6510312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6510315">//&nbsp;A&nbsp;sparseReader&nbsp;returns&nbsp;a&nbsp;stream&nbsp;consisting&nbsp;of&nbsp;0s&nbsp;followed&nbsp;by&nbsp;1&lt;&lt;16&nbsp;1s.</span><br>
<span class="lineno"></span><span class="comment" id="6510389">//&nbsp;This&nbsp;tests&nbsp;missing&nbsp;hash&nbsp;references&nbsp;in&nbsp;a&nbsp;very&nbsp;large&nbsp;input.</span><br>
<span class="lineno">100</span><span class="keyword" id="6510450">type</span>&nbsp;<span class="ident" id="6510455">sparseReader</span>&nbsp;<span class="keyword" id="6510468">struct</span>&nbsp;<span class="op" id="6510475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510478">l</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6510482">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510489">cur</span>&nbsp;<span class="ident" id="6510493">int64</span><br>
<span class="lineno"></span><span class="op" id="6510499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="6510502">func</span>&nbsp;<span class="op" id="6510507">(</span><span class="ident" id="6510508">r</span>&nbsp;<span class="op" id="6510510">*</span><span class="ident" id="6510511"><a href="/compress/flate/deflate_test.go.html#6510455">sparseReader</a></span><span class="op" id="6510523">)</span>&nbsp;<span class="ident" id="6510525">Read</span><span class="op" id="6510529">(</span><span class="ident" id="6510530">b</span>&nbsp;<span class="op" id="6510532">[</span><span class="op" id="6510533">]</span><span class="builtintype" id="6510534">byte</span><span class="op" id="6510538">)</span>&nbsp;<span class="op" id="6510540">(</span><span class="ident" id="6510541">n</span>&nbsp;<span class="builtintype" id="6510543">int</span><span class="op" id="6510546">,</span>&nbsp;<span class="ident" id="6510548">err</span>&nbsp;<span class="builtintype" id="6510552">error</span><span class="op" id="6510557">)</span>&nbsp;<span class="op" id="6510559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510562">if</span>&nbsp;<span class="ident" id="6510565"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510566">.</span><span class="ident" id="6510567">cur</span>&nbsp;<span class="op" id="6510571">&gt;=</span>&nbsp;<span class="ident" id="6510574"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510575">.</span><span class="ident" id="6510576">l</span>&nbsp;<span class="op" id="6510578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510582">return</span>&nbsp;<span class="num" id="6510589">0</span><span class="op" id="6510590">,</span>&nbsp;<span class="ident" id="6510592"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6510594">.</span><span class="ident" id="6510595">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510603"><a href="/compress/flate/deflate_test.go.html#6510541">n</a></span>&nbsp;<span class="op" id="6510605">=</span>&nbsp;<span class="builtinfunc" id="6510607">len</span><span class="op" id="6510610">(</span><span class="ident" id="6510611"><a href="/compress/flate/deflate_test.go.html#6510530">b</a></span><span class="op" id="6510612">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510615">cur</span>&nbsp;<span class="op" id="6510619">:=</span>&nbsp;<span class="ident" id="6510622"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510623">.</span><span class="ident" id="6510624">cur</span>&nbsp;<span class="op" id="6510628">+</span>&nbsp;<span class="ident" id="6510630">int64</span><span class="op" id="6510635">(</span><span class="ident" id="6510636"><a href="/compress/flate/deflate_test.go.html#6510541">n</a></span><span class="op" id="6510637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510640">if</span>&nbsp;<span class="ident" id="6510643"><a href="/compress/flate/deflate_test.go.html#6510615">cur</a></span>&nbsp;<span class="op" id="6510647">&gt;</span>&nbsp;<span class="ident" id="6510649"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510650">.</span><span class="ident" id="6510651">l</span>&nbsp;<span class="op" id="6510653">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510657"><a href="/compress/flate/deflate_test.go.html#6510541">n</a></span>&nbsp;<span class="op" id="6510659">-=</span>&nbsp;<span class="builtintype" id="6510662">int</span><span class="op" id="6510665">(</span><span class="ident" id="6510666"><a href="/compress/flate/deflate_test.go.html#6510615">cur</a></span>&nbsp;<span class="op" id="6510670">-</span>&nbsp;<span class="ident" id="6510672"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510673">.</span><span class="ident" id="6510674">l</span><span class="op" id="6510675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510679"><a href="/compress/flate/deflate_test.go.html#6510615">cur</a></span>&nbsp;<span class="op" id="6510683">=</span>&nbsp;<span class="ident" id="6510685"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510686">.</span><span class="ident" id="6510687">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510690">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510693">for</span>&nbsp;<span class="ident" id="6510697">i</span>&nbsp;<span class="op" id="6510699">:=</span>&nbsp;<span class="keyword" id="6510702">range</span>&nbsp;<span class="ident" id="6510708"><a href="/compress/flate/deflate_test.go.html#6510530">b</a></span><span class="op" id="6510709">[</span><span class="num" id="6510710">0</span><span class="op" id="6510711">:</span><span class="ident" id="6510712"><a href="/compress/flate/deflate_test.go.html#6510541">n</a></span><span class="op" id="6510713">]</span>&nbsp;<span class="op" id="6510715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510719">if</span>&nbsp;<span class="ident" id="6510722"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510723">.</span><span class="ident" id="6510724">cur</span><span class="op" id="6510727">+</span><span class="ident" id="6510728">int64</span><span class="op" id="6510733">(</span><span class="ident" id="6510734"><a href="/compress/flate/deflate_test.go.html#6510697">i</a></span><span class="op" id="6510735">)</span>&nbsp;<span class="op" id="6510737">&gt;=</span>&nbsp;<span class="ident" id="6510740"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510741">.</span><span class="ident" id="6510742">l</span><span class="op" id="6510743">-</span><span class="num" id="6510744">1</span><span class="op" id="6510745">&lt;&lt;</span><span class="num" id="6510747">16</span>&nbsp;<span class="op" id="6510750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510755"><a href="/compress/flate/deflate_test.go.html#6510530">b</a></span><span class="op" id="6510756">[</span><span class="ident" id="6510757"><a href="/compress/flate/deflate_test.go.html#6510697">i</a></span><span class="op" id="6510758">]</span>&nbsp;<span class="op" id="6510760">=</span>&nbsp;<span class="num" id="6510762">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510766">}</span>&nbsp;<span class="keyword" id="6510768">else</span>&nbsp;<span class="op" id="6510773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510778"><a href="/compress/flate/deflate_test.go.html#6510530">b</a></span><span class="op" id="6510779">[</span><span class="ident" id="6510780"><a href="/compress/flate/deflate_test.go.html#6510697">i</a></span><span class="op" id="6510781">]</span>&nbsp;<span class="op" id="6510783">=</span>&nbsp;<span class="num" id="6510785">0</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510795"><a href="/compress/flate/deflate_test.go.html#6510508">r</a></span><span class="op" id="6510796">.</span><span class="ident" id="6510797">cur</span>&nbsp;<span class="op" id="6510801">=</span>&nbsp;<span class="ident" id="6510803"><a href="/compress/flate/deflate_test.go.html#6510615">cur</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510808">return</span><br>
<span class="lineno"></span><span class="op" id="6510815">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="6510818">func</span>&nbsp;<span class="ident" id="6510823">TestVeryLongSparseChunk</span><span class="op" id="6510846">(</span><span class="ident" id="6510847">t</span>&nbsp;<span class="op" id="6510849">*</span><span class="ident" id="6510850"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6510857">.</span><span class="ident" id="6510858">T</span><span class="op" id="6510859">)</span>&nbsp;<span class="op" id="6510861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510864">if</span>&nbsp;<span class="ident" id="6510867"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6510874">.</span><span class="ident" id="6510875">Short</span><span class="op" id="6510880">(</span><span class="op" id="6510881">)</span>&nbsp;<span class="op" id="6510883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510887"><a href="/compress/flate/deflate_test.go.html#6510847">t</a></span><span class="op" id="6510888">.</span><span class="ident" id="6510889">Skip</span><span class="op" id="6510893">(</span><span class="string" id="6510894">&#34;skipping&nbsp;sparse&nbsp;chunk&nbsp;during&nbsp;short&nbsp;test&#34;</span><span class="op" id="6510935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6510938">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510941">w</span><span class="op" id="6510942">,</span>&nbsp;<span class="ident" id="6510944">err</span>&nbsp;<span class="op" id="6510948">:=</span>&nbsp;<span class="ident" id="6510951"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6510960">(</span><span class="ident" id="6510961"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6510967">.</span><span class="ident" id="6510968">Discard</span><span class="op" id="6510975">,</span>&nbsp;<span class="num" id="6510977">1</span><span class="op" id="6510978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6510981">if</span>&nbsp;<span class="ident" id="6510984"><a href="/compress/flate/deflate_test.go.html#6510944">err</a></span>&nbsp;<span class="op" id="6510988">!=</span>&nbsp;<span class="ident" id="6510991">nil</span>&nbsp;<span class="op" id="6510995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6510999"><a href="/compress/flate/deflate_test.go.html#6510847">t</a></span><span class="op" id="6511000">.</span><span class="ident" id="6511001">Errorf</span><span class="op" id="6511007">(</span><span class="string" id="6511008">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6511023">,</span>&nbsp;<span class="ident" id="6511025"><a href="/compress/flate/deflate_test.go.html#6510944">err</a></span><span class="op" id="6511028">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511032">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511040">}</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511043">if</span>&nbsp;<span class="ident" id="6511046">_</span><span class="op" id="6511047">,</span>&nbsp;<span class="ident" id="6511049"><a href="/compress/flate/deflate_test.go.html#6510944">err</a></span>&nbsp;<span class="op" id="6511053">=</span>&nbsp;<span class="ident" id="6511055"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6511057">.</span><span class="ident" id="6511058">Copy</span><span class="op" id="6511062">(</span><span class="ident" id="6511063"><a href="/compress/flate/deflate_test.go.html#6510941">w</a></span><span class="op" id="6511064">,</span>&nbsp;<span class="op" id="6511066">&amp;</span><span class="ident" id="6511067"><a href="/compress/flate/deflate_test.go.html#6510455">sparseReader</a></span><span class="op" id="6511079">{</span><span class="ident" id="6511080">l</span><span class="op" id="6511081">:</span>&nbsp;<span class="num" id="6511083">23E8</span><span class="op" id="6511087">}</span><span class="op" id="6511088">)</span><span class="op" id="6511089">;</span>&nbsp;<span class="ident" id="6511091"><a href="/compress/flate/deflate_test.go.html#6510944">err</a></span>&nbsp;<span class="op" id="6511095">!=</span>&nbsp;<span class="ident" id="6511098">nil</span>&nbsp;<span class="op" id="6511102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511106"><a href="/compress/flate/deflate_test.go.html#6510847">t</a></span><span class="op" id="6511107">.</span><span class="ident" id="6511108">Errorf</span><span class="op" id="6511114">(</span><span class="string" id="6511115">&#34;Compress&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6511136">,</span>&nbsp;<span class="ident" id="6511138"><a href="/compress/flate/deflate_test.go.html#6510944">err</a></span><span class="op" id="6511141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511145">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511153">}</span><br>
<span class="lineno"></span><span class="op" id="6511155">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="keyword" id="6511158">type</span>&nbsp;<span class="ident" id="6511163">syncBuffer</span>&nbsp;<span class="keyword" id="6511174">struct</span>&nbsp;<span class="op" id="6511181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511184">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6511191"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6511196">.</span><span class="ident" id="6511197">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511205">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6511212"><a href="/compress/flate/deflate_test.go.html#6508099">sync</a></span><span class="op" id="6511216">.</span><span class="ident" id="6511217">RWMutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511226">closed</span>&nbsp;<span class="builtintype" id="6511233">bool</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511239">ready</span>&nbsp;&nbsp;<span class="keyword" id="6511246">chan</span>&nbsp;<span class="builtintype" id="6511251">bool</span><br>
<span class="lineno"></span><span class="op" id="6511256">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511259">func</span>&nbsp;<span class="ident" id="6511264">newSyncBuffer</span><span class="op" id="6511277">(</span><span class="op" id="6511278">)</span>&nbsp;<span class="op" id="6511280">*</span><span class="ident" id="6511281"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span>&nbsp;<span class="op" id="6511292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511295">return</span>&nbsp;<span class="op" id="6511302">&amp;</span><span class="ident" id="6511303"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511313">{</span><span class="ident" id="6511314">ready</span><span class="op" id="6511319">:</span>&nbsp;<span class="builtinfunc" id="6511321">make</span><span class="op" id="6511325">(</span><span class="keyword" id="6511326">chan</span>&nbsp;<span class="builtintype" id="6511331">bool</span><span class="op" id="6511335">,</span>&nbsp;<span class="num" id="6511337">1</span><span class="op" id="6511338">)</span><span class="op" id="6511339">}</span><br>
<span class="lineno">150</span><span class="op" id="6511341">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511344">func</span>&nbsp;<span class="op" id="6511349">(</span><span class="ident" id="6511350">b</span>&nbsp;<span class="op" id="6511352">*</span><span class="ident" id="6511353"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511363">)</span>&nbsp;<span class="ident" id="6511365">Read</span><span class="op" id="6511369">(</span><span class="ident" id="6511370">p</span>&nbsp;<span class="op" id="6511372">[</span><span class="op" id="6511373">]</span><span class="builtintype" id="6511374">byte</span><span class="op" id="6511378">)</span>&nbsp;<span class="op" id="6511380">(</span><span class="ident" id="6511381">n</span>&nbsp;<span class="builtintype" id="6511383">int</span><span class="op" id="6511386">,</span>&nbsp;<span class="ident" id="6511388">err</span>&nbsp;<span class="builtintype" id="6511392">error</span><span class="op" id="6511397">)</span>&nbsp;<span class="op" id="6511399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511402">for</span>&nbsp;<span class="op" id="6511406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511410"><a href="/compress/flate/deflate_test.go.html#6511350">b</a></span><span class="op" id="6511411">.</span><span class="ident" id="6511412">mu</span><span class="op" id="6511414">.</span><span class="ident" id="6511415">RLock</span><span class="op" id="6511420">(</span><span class="op" id="6511421">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511425"><a href="/compress/flate/deflate_test.go.html#6511381">n</a></span><span class="op" id="6511426">,</span>&nbsp;<span class="ident" id="6511428"><a href="/compress/flate/deflate_test.go.html#6511388">err</a></span>&nbsp;<span class="op" id="6511432">=</span>&nbsp;<span class="ident" id="6511434"><a href="/compress/flate/deflate_test.go.html#6511350">b</a></span><span class="op" id="6511435">.</span><span class="ident" id="6511436">buf</span><span class="op" id="6511439">.</span><span class="ident" id="6511440">Read</span><span class="op" id="6511444">(</span><span class="ident" id="6511445"><a href="/compress/flate/deflate_test.go.html#6511370">p</a></span><span class="op" id="6511446">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511450"><a href="/compress/flate/deflate_test.go.html#6511350">b</a></span><span class="op" id="6511451">.</span><span class="ident" id="6511452">mu</span><span class="op" id="6511454">.</span><span class="ident" id="6511455">RUnlock</span><span class="op" id="6511462">(</span><span class="op" id="6511463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511467">if</span>&nbsp;<span class="ident" id="6511470"><a href="/compress/flate/deflate_test.go.html#6511381">n</a></span>&nbsp;<span class="op" id="6511472">&gt;</span>&nbsp;<span class="num" id="6511474">0</span>&nbsp;<span class="op" id="6511476">||</span>&nbsp;<span class="ident" id="6511479"><a href="/compress/flate/deflate_test.go.html#6511350">b</a></span><span class="op" id="6511480">.</span><span class="ident" id="6511481">closed</span>&nbsp;<span class="op" id="6511488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511493">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511502">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511506">&lt;-</span><span class="ident" id="6511508"><a href="/compress/flate/deflate_test.go.html#6511350">b</a></span><span class="op" id="6511509">.</span><span class="ident" id="6511510">ready</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511517">}</span><br>
<span class="lineno"></span><span class="op" id="6511519">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511522">func</span>&nbsp;<span class="op" id="6511527">(</span><span class="ident" id="6511528">b</span>&nbsp;<span class="op" id="6511530">*</span><span class="ident" id="6511531"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511541">)</span>&nbsp;<span class="ident" id="6511543">signal</span><span class="op" id="6511549">(</span><span class="op" id="6511550">)</span>&nbsp;<span class="op" id="6511552">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511555">select</span>&nbsp;<span class="op" id="6511562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511565">case</span>&nbsp;<span class="ident" id="6511570"><a href="/compress/flate/deflate_test.go.html#6511528">b</a></span><span class="op" id="6511571">.</span><span class="ident" id="6511572">ready</span>&nbsp;<span class="op" id="6511578">&lt;-</span>&nbsp;<span class="ident" id="6511581">true</span><span class="op" id="6511585">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511588">default</span><span class="op" id="6511595">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6511598">}</span><br>
<span class="lineno"></span><span class="op" id="6511600">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="keyword" id="6511603">func</span>&nbsp;<span class="op" id="6511608">(</span><span class="ident" id="6511609">b</span>&nbsp;<span class="op" id="6511611">*</span><span class="ident" id="6511612"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511622">)</span>&nbsp;<span class="ident" id="6511624">Write</span><span class="op" id="6511629">(</span><span class="ident" id="6511630">p</span>&nbsp;<span class="op" id="6511632">[</span><span class="op" id="6511633">]</span><span class="builtintype" id="6511634">byte</span><span class="op" id="6511638">)</span>&nbsp;<span class="op" id="6511640">(</span><span class="ident" id="6511641">n</span>&nbsp;<span class="builtintype" id="6511643">int</span><span class="op" id="6511646">,</span>&nbsp;<span class="ident" id="6511648">err</span>&nbsp;<span class="builtintype" id="6511652">error</span><span class="op" id="6511657">)</span>&nbsp;<span class="op" id="6511659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511662"><a href="/compress/flate/deflate_test.go.html#6511641">n</a></span><span class="op" id="6511663">,</span>&nbsp;<span class="ident" id="6511665"><a href="/compress/flate/deflate_test.go.html#6511648">err</a></span>&nbsp;<span class="op" id="6511669">=</span>&nbsp;<span class="ident" id="6511671"><a href="/compress/flate/deflate_test.go.html#6511609">b</a></span><span class="op" id="6511672">.</span><span class="ident" id="6511673">buf</span><span class="op" id="6511676">.</span><span class="ident" id="6511677">Write</span><span class="op" id="6511682">(</span><span class="ident" id="6511683"><a href="/compress/flate/deflate_test.go.html#6511630">p</a></span><span class="op" id="6511684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511687"><a href="/compress/flate/deflate_test.go.html#6511609">b</a></span><span class="op" id="6511688">.</span><span class="ident" id="6511689">signal</span><span class="op" id="6511695">(</span><span class="op" id="6511696">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511699">return</span><br>
<span class="lineno">175</span><span class="op" id="6511706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511709">func</span>&nbsp;<span class="op" id="6511714">(</span><span class="ident" id="6511715">b</span>&nbsp;<span class="op" id="6511717">*</span><span class="ident" id="6511718"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511728">)</span>&nbsp;<span class="ident" id="6511730">WriteMode</span><span class="op" id="6511739">(</span><span class="op" id="6511740">)</span>&nbsp;<span class="op" id="6511742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511745"><a href="/compress/flate/deflate_test.go.html#6511715">b</a></span><span class="op" id="6511746">.</span><span class="ident" id="6511747">mu</span><span class="op" id="6511749">.</span><span class="ident" id="6511750">Lock</span><span class="op" id="6511754">(</span><span class="op" id="6511755">)</span><br>
<span class="lineno"></span><span class="op" id="6511757">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="keyword" id="6511760">func</span>&nbsp;<span class="op" id="6511765">(</span><span class="ident" id="6511766">b</span>&nbsp;<span class="op" id="6511768">*</span><span class="ident" id="6511769"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511779">)</span>&nbsp;<span class="ident" id="6511781">ReadMode</span><span class="op" id="6511789">(</span><span class="op" id="6511790">)</span>&nbsp;<span class="op" id="6511792">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511795"><a href="/compress/flate/deflate_test.go.html#6511766">b</a></span><span class="op" id="6511796">.</span><span class="ident" id="6511797">mu</span><span class="op" id="6511799">.</span><span class="ident" id="6511800">Unlock</span><span class="op" id="6511806">(</span><span class="op" id="6511807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511810"><a href="/compress/flate/deflate_test.go.html#6511766">b</a></span><span class="op" id="6511811">.</span><span class="ident" id="6511812">signal</span><span class="op" id="6511818">(</span><span class="op" id="6511819">)</span><br>
<span class="lineno"></span><span class="op" id="6511821">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="keyword" id="6511824">func</span>&nbsp;<span class="op" id="6511829">(</span><span class="ident" id="6511830">b</span>&nbsp;<span class="op" id="6511832">*</span><span class="ident" id="6511833"><a href="/compress/flate/deflate_test.go.html#6511163">syncBuffer</a></span><span class="op" id="6511843">)</span>&nbsp;<span class="ident" id="6511845">Close</span><span class="op" id="6511850">(</span><span class="op" id="6511851">)</span>&nbsp;<span class="builtintype" id="6511853">error</span>&nbsp;<span class="op" id="6511859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511862"><a href="/compress/flate/deflate_test.go.html#6511830">b</a></span><span class="op" id="6511863">.</span><span class="ident" id="6511864">closed</span>&nbsp;<span class="op" id="6511871">=</span>&nbsp;<span class="ident" id="6511873">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6511879"><a href="/compress/flate/deflate_test.go.html#6511830">b</a></span><span class="op" id="6511880">.</span><span class="ident" id="6511881">signal</span><span class="op" id="6511887">(</span><span class="op" id="6511888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511891">return</span>&nbsp;<span class="ident" id="6511898">nil</span><br>
<span class="lineno">190</span><span class="op" id="6511902">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6511905">func</span>&nbsp;<span class="ident" id="6511910">testSync</span><span class="op" id="6511918">(</span><span class="ident" id="6511919">t</span>&nbsp;<span class="op" id="6511921">*</span><span class="ident" id="6511922"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6511929">.</span><span class="ident" id="6511930">T</span><span class="op" id="6511931">,</span>&nbsp;<span class="ident" id="6511933">level</span>&nbsp;<span class="builtintype" id="6511939">int</span><span class="op" id="6511942">,</span>&nbsp;<span class="ident" id="6511944">input</span>&nbsp;<span class="op" id="6511950">[</span><span class="op" id="6511951">]</span><span class="builtintype" id="6511952">byte</span><span class="op" id="6511956">,</span>&nbsp;<span class="ident" id="6511958">name</span>&nbsp;<span class="builtintype" id="6511963">string</span><span class="op" id="6511969">)</span>&nbsp;<span class="op" id="6511971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511974">if</span>&nbsp;<span class="builtinfunc" id="6511977">len</span><span class="op" id="6511980">(</span><span class="ident" id="6511981"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6511986">)</span>&nbsp;<span class="op" id="6511988">==</span>&nbsp;<span class="num" id="6511991">0</span>&nbsp;<span class="op" id="6511993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6511997">return</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512009"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512010">.</span><span class="ident" id="6512011">Logf</span><span class="op" id="6512015">(</span><span class="string" id="6512016">&#34;--testSync&nbsp;%d,&nbsp;%d,&nbsp;%s&#34;</span><span class="op" id="6512039">,</span>&nbsp;<span class="ident" id="6512041"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6512046">,</span>&nbsp;<span class="builtinfunc" id="6512048">len</span><span class="op" id="6512051">(</span><span class="ident" id="6512052"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6512057">)</span><span class="op" id="6512058">,</span>&nbsp;<span class="ident" id="6512060"><a href="/compress/flate/deflate_test.go.html#6511958">name</a></span><span class="op" id="6512064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512067">buf</span>&nbsp;<span class="op" id="6512071">:=</span>&nbsp;<span class="ident" id="6512074"><a href="/compress/flate/deflate_test.go.html#6511264">newSyncBuffer</a></span><span class="op" id="6512087">(</span><span class="op" id="6512088">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512091">buf1</span>&nbsp;<span class="op" id="6512096">:=</span>&nbsp;<span class="builtinfunc" id="6512099">new</span><span class="op" id="6512102">(</span><span class="ident" id="6512103"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6512108">.</span><span class="ident" id="6512109">Buffer</span><span class="op" id="6512115">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512118"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6512121">.</span><span class="ident" id="6512122">WriteMode</span><span class="op" id="6512131">(</span><span class="op" id="6512132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512135">w</span><span class="op" id="6512136">,</span>&nbsp;<span class="ident" id="6512138">err</span>&nbsp;<span class="op" id="6512142">:=</span>&nbsp;<span class="ident" id="6512145"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6512154">(</span><span class="ident" id="6512155"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6512157">.</span><span class="ident" id="6512158">MultiWriter</span><span class="op" id="6512169">(</span><span class="ident" id="6512170"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6512173">,</span>&nbsp;<span class="ident" id="6512175"><a href="/compress/flate/deflate_test.go.html#6512091">buf1</a></span><span class="op" id="6512179">)</span><span class="op" id="6512180">,</span>&nbsp;<span class="ident" id="6512182"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6512187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512190">if</span>&nbsp;<span class="ident" id="6512193"><a href="/compress/flate/deflate_test.go.html#6512138">err</a></span>&nbsp;<span class="op" id="6512197">!=</span>&nbsp;<span class="ident" id="6512200">nil</span>&nbsp;<span class="op" id="6512204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512208"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512209">.</span><span class="ident" id="6512210">Errorf</span><span class="op" id="6512216">(</span><span class="string" id="6512217">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6512232">,</span>&nbsp;<span class="ident" id="6512234"><a href="/compress/flate/deflate_test.go.html#6512138">err</a></span><span class="op" id="6512237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512241">return</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512252">r</span>&nbsp;<span class="op" id="6512254">:=</span>&nbsp;<span class="ident" id="6512257"><a href="/compress/flate/inflate.go.html#4610722">NewReader</a></span><span class="op" id="6512266">(</span><span class="ident" id="6512267"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6512270">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6512274">//&nbsp;Write&nbsp;half&nbsp;the&nbsp;input&nbsp;and&nbsp;read&nbsp;back.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512314">for</span>&nbsp;<span class="ident" id="6512318">i</span>&nbsp;<span class="op" id="6512320">:=</span>&nbsp;<span class="num" id="6512323">0</span><span class="op" id="6512324">;</span>&nbsp;<span class="ident" id="6512326"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span>&nbsp;<span class="op" id="6512328">&lt;</span>&nbsp;<span class="num" id="6512330">2</span><span class="op" id="6512331">;</span>&nbsp;<span class="ident" id="6512333"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span><span class="op" id="6512334">++</span>&nbsp;<span class="op" id="6512337">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512341">var</span>&nbsp;<span class="ident" id="6512345">lo</span><span class="op" id="6512347">,</span>&nbsp;<span class="ident" id="6512349">hi</span>&nbsp;<span class="builtintype" id="6512352">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512358">if</span>&nbsp;<span class="ident" id="6512361"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span>&nbsp;<span class="op" id="6512363">==</span>&nbsp;<span class="num" id="6512366">0</span>&nbsp;<span class="op" id="6512368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512373"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512375">,</span>&nbsp;<span class="ident" id="6512377"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span>&nbsp;<span class="op" id="6512380">=</span>&nbsp;<span class="num" id="6512382">0</span><span class="op" id="6512383">,</span>&nbsp;<span class="op" id="6512385">(</span><span class="builtinfunc" id="6512386">len</span><span class="op" id="6512389">(</span><span class="ident" id="6512390"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6512395">)</span><span class="op" id="6512396">+</span><span class="num" id="6512397">1</span><span class="op" id="6512398">)</span><span class="op" id="6512399">/</span><span class="num" id="6512400">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512404">}</span>&nbsp;<span class="keyword" id="6512406">else</span>&nbsp;<span class="op" id="6512411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512416"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512418">,</span>&nbsp;<span class="ident" id="6512420"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span>&nbsp;<span class="op" id="6512423">=</span>&nbsp;<span class="op" id="6512425">(</span><span class="builtinfunc" id="6512426">len</span><span class="op" id="6512429">(</span><span class="ident" id="6512430"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6512435">)</span><span class="op" id="6512436">+</span><span class="num" id="6512437">1</span><span class="op" id="6512438">)</span><span class="op" id="6512439">/</span><span class="num" id="6512440">2</span><span class="op" id="6512441">,</span>&nbsp;<span class="builtinfunc" id="6512443">len</span><span class="op" id="6512446">(</span><span class="ident" id="6512447"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6512452">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512460"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512461">.</span><span class="ident" id="6512462">Logf</span><span class="op" id="6512466">(</span><span class="string" id="6512467">&#34;#%d:&nbsp;write&nbsp;%d-%d&#34;</span><span class="op" id="6512485">,</span>&nbsp;<span class="ident" id="6512487"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span><span class="op" id="6512488">,</span>&nbsp;<span class="ident" id="6512490"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512492">,</span>&nbsp;<span class="ident" id="6512494"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6512496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512500">if</span>&nbsp;<span class="ident" id="6512503">_</span><span class="op" id="6512504">,</span>&nbsp;<span class="ident" id="6512506">err</span>&nbsp;<span class="op" id="6512510">:=</span>&nbsp;<span class="ident" id="6512513"><a href="/compress/flate/deflate_test.go.html#6512135">w</a></span><span class="op" id="6512514">.</span><span class="ident" id="6512515">Write</span><span class="op" id="6512520">(</span><span class="ident" id="6512521"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6512526">[</span><span class="ident" id="6512527"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512529">:</span><span class="ident" id="6512530"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6512532">]</span><span class="op" id="6512533">)</span><span class="op" id="6512534">;</span>&nbsp;<span class="ident" id="6512536"><a href="/compress/flate/deflate_test.go.html#6512506">err</a></span>&nbsp;<span class="op" id="6512540">!=</span>&nbsp;<span class="ident" id="6512543">nil</span>&nbsp;<span class="op" id="6512547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512552"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512553">.</span><span class="ident" id="6512554">Errorf</span><span class="op" id="6512560">(</span><span class="string" id="6512561">&#34;testSync:&nbsp;write:&nbsp;%v&#34;</span><span class="op" id="6512582">,</span>&nbsp;<span class="ident" id="6512584"><a href="/compress/flate/deflate_test.go.html#6512506">err</a></span><span class="op" id="6512587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512592">return</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512605">if</span>&nbsp;<span class="ident" id="6512608"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span>&nbsp;<span class="op" id="6512610">==</span>&nbsp;<span class="num" id="6512613">0</span>&nbsp;<span class="op" id="6512615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512620">if</span>&nbsp;<span class="ident" id="6512623">err</span>&nbsp;<span class="op" id="6512627">:=</span>&nbsp;<span class="ident" id="6512630"><a href="/compress/flate/deflate_test.go.html#6512135">w</a></span><span class="op" id="6512631">.</span><span class="ident" id="6512632">Flush</span><span class="op" id="6512637">(</span><span class="op" id="6512638">)</span><span class="op" id="6512639">;</span>&nbsp;<span class="ident" id="6512641"><a href="/compress/flate/deflate_test.go.html#6512623">err</a></span>&nbsp;<span class="op" id="6512645">!=</span>&nbsp;<span class="ident" id="6512648">nil</span>&nbsp;<span class="op" id="6512652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512658"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512659">.</span><span class="ident" id="6512660">Errorf</span><span class="op" id="6512666">(</span><span class="string" id="6512667">&#34;testSync:&nbsp;flush:&nbsp;%v&#34;</span><span class="op" id="6512688">,</span>&nbsp;<span class="ident" id="6512690"><a href="/compress/flate/deflate_test.go.html#6512623">err</a></span><span class="op" id="6512693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512699">return</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512709">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512713">}</span>&nbsp;<span class="keyword" id="6512715">else</span>&nbsp;<span class="op" id="6512720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512725">if</span>&nbsp;<span class="ident" id="6512728">err</span>&nbsp;<span class="op" id="6512732">:=</span>&nbsp;<span class="ident" id="6512735"><a href="/compress/flate/deflate_test.go.html#6512135">w</a></span><span class="op" id="6512736">.</span><span class="ident" id="6512737">Close</span><span class="op" id="6512742">(</span><span class="op" id="6512743">)</span><span class="op" id="6512744">;</span>&nbsp;<span class="ident" id="6512746"><a href="/compress/flate/deflate_test.go.html#6512728">err</a></span>&nbsp;<span class="op" id="6512750">!=</span>&nbsp;<span class="ident" id="6512753">nil</span>&nbsp;<span class="op" id="6512757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512763"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512764">.</span><span class="ident" id="6512765">Errorf</span><span class="op" id="6512771">(</span><span class="string" id="6512772">&#34;testSync:&nbsp;close:&nbsp;%v&#34;</span><span class="op" id="6512793">,</span>&nbsp;<span class="ident" id="6512795"><a href="/compress/flate/deflate_test.go.html#6512728">err</a></span><span class="op" id="6512798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512803">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6512807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512811"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6512814">.</span><span class="ident" id="6512815">ReadMode</span><span class="op" id="6512823">(</span><span class="op" id="6512824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512828">out</span>&nbsp;<span class="op" id="6512832">:=</span>&nbsp;<span class="builtinfunc" id="6512835">make</span><span class="op" id="6512839">(</span><span class="op" id="6512840">[</span><span class="op" id="6512841">]</span><span class="builtintype" id="6512842">byte</span><span class="op" id="6512846">,</span>&nbsp;<span class="ident" id="6512848"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6512850">-</span><span class="ident" id="6512851"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512853">+</span><span class="num" id="6512854">1</span><span class="op" id="6512855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512859">m</span><span class="op" id="6512860">,</span>&nbsp;<span class="ident" id="6512862">err</span>&nbsp;<span class="op" id="6512866">:=</span>&nbsp;<span class="ident" id="6512869"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6512871">.</span><span class="ident" id="6512872">ReadAtLeast</span><span class="op" id="6512883">(</span><span class="ident" id="6512884"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span><span class="op" id="6512885">,</span>&nbsp;<span class="ident" id="6512887"><a href="/compress/flate/deflate_test.go.html#6512828">out</a></span><span class="op" id="6512890">,</span>&nbsp;<span class="ident" id="6512892"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6512894">-</span><span class="ident" id="6512895"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6512897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512901"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512902">.</span><span class="ident" id="6512903">Logf</span><span class="op" id="6512907">(</span><span class="string" id="6512908">&#34;#%d:&nbsp;read&nbsp;%d&#34;</span><span class="op" id="6512922">,</span>&nbsp;<span class="ident" id="6512924"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span><span class="op" id="6512925">,</span>&nbsp;<span class="ident" id="6512927"><a href="/compress/flate/deflate_test.go.html#6512859">m</a></span><span class="op" id="6512928">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6512932">if</span>&nbsp;<span class="ident" id="6512935"><a href="/compress/flate/deflate_test.go.html#6512859">m</a></span>&nbsp;<span class="op" id="6512937">!=</span>&nbsp;<span class="ident" id="6512940"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6512942">-</span><span class="ident" id="6512943"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span>&nbsp;<span class="op" id="6512946">||</span>&nbsp;<span class="ident" id="6512949"><a href="/compress/flate/deflate_test.go.html#6512862">err</a></span>&nbsp;<span class="op" id="6512953">!=</span>&nbsp;<span class="ident" id="6512956">nil</span>&nbsp;<span class="op" id="6512960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6512965"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6512966">.</span><span class="ident" id="6512967">Errorf</span><span class="op" id="6512973">(</span><span class="string" id="6512974">&#34;testSync/%d&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;read&nbsp;%d:&nbsp;%d,&nbsp;%v&nbsp;(%d&nbsp;left)&#34;</span><span class="op" id="6513027">,</span>&nbsp;<span class="ident" id="6513029"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span><span class="op" id="6513030">,</span>&nbsp;<span class="ident" id="6513032"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6513037">,</span>&nbsp;<span class="builtinfunc" id="6513039">len</span><span class="op" id="6513042">(</span><span class="ident" id="6513043"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6513048">)</span><span class="op" id="6513049">,</span>&nbsp;<span class="ident" id="6513051"><a href="/compress/flate/deflate_test.go.html#6511958">name</a></span><span class="op" id="6513055">,</span>&nbsp;<span class="ident" id="6513057"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6513059">-</span><span class="ident" id="6513060"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6513062">,</span>&nbsp;<span class="ident" id="6513064"><a href="/compress/flate/deflate_test.go.html#6512859">m</a></span><span class="op" id="6513065">,</span>&nbsp;<span class="ident" id="6513067"><a href="/compress/flate/deflate_test.go.html#6512862">err</a></span><span class="op" id="6513070">,</span>&nbsp;<span class="ident" id="6513072"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6513075">.</span><span class="ident" id="6513076">buf</span><span class="op" id="6513079">.</span><span class="ident" id="6513080">Len</span><span class="op" id="6513083">(</span><span class="op" id="6513084">)</span><span class="op" id="6513085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513090">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513103">if</span>&nbsp;<span class="op" id="6513106">!</span><span class="ident" id="6513107"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6513112">.</span><span class="ident" id="6513113">Equal</span><span class="op" id="6513118">(</span><span class="ident" id="6513119"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6513124">[</span><span class="ident" id="6513125"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6513127">:</span><span class="ident" id="6513128"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6513130">]</span><span class="op" id="6513131">,</span>&nbsp;<span class="ident" id="6513133"><a href="/compress/flate/deflate_test.go.html#6512828">out</a></span><span class="op" id="6513136">[</span><span class="op" id="6513137">:</span><span class="ident" id="6513138"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6513140">-</span><span class="ident" id="6513141"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6513143">]</span><span class="op" id="6513144">)</span>&nbsp;<span class="op" id="6513146">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513151"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6513152">.</span><span class="ident" id="6513153">Errorf</span><span class="op" id="6513159">(</span><span class="string" id="6513160">&#34;testSync/%d:&nbsp;read&nbsp;wrong&nbsp;bytes:&nbsp;%x&nbsp;vs&nbsp;%x&#34;</span><span class="op" id="6513201">,</span>&nbsp;<span class="ident" id="6513203"><a href="/compress/flate/deflate_test.go.html#6512318">i</a></span><span class="op" id="6513204">,</span>&nbsp;<span class="ident" id="6513206"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6513211">[</span><span class="ident" id="6513212"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6513214">:</span><span class="ident" id="6513215"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6513217">]</span><span class="op" id="6513218">,</span>&nbsp;<span class="ident" id="6513220"><a href="/compress/flate/deflate_test.go.html#6512828">out</a></span><span class="op" id="6513223">[</span><span class="op" id="6513224">:</span><span class="ident" id="6513225"><a href="/compress/flate/deflate_test.go.html#6512349">hi</a></span><span class="op" id="6513227">-</span><span class="ident" id="6513228"><a href="/compress/flate/deflate_test.go.html#6512345">lo</a></span><span class="op" id="6513230">]</span><span class="op" id="6513231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513236">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513249">//&nbsp;This&nbsp;test&nbsp;originally&nbsp;checked&nbsp;that&nbsp;after&nbsp;reading</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513302">//&nbsp;the&nbsp;first&nbsp;half&nbsp;of&nbsp;the&nbsp;input,&nbsp;there&nbsp;was&nbsp;nothing&nbsp;left</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513359">//&nbsp;in&nbsp;the&nbsp;read&nbsp;buffer&nbsp;(buf.buf.Len()&nbsp;!=&nbsp;0)&nbsp;but&nbsp;that&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513416">//&nbsp;not&nbsp;necessarily&nbsp;the&nbsp;case:&nbsp;the&nbsp;write&nbsp;Flush&nbsp;may&nbsp;emit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513472">//&nbsp;some&nbsp;extra&nbsp;framing&nbsp;bits&nbsp;that&nbsp;are&nbsp;not&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513524">//&nbsp;to&nbsp;process&nbsp;to&nbsp;obtain&nbsp;the&nbsp;first&nbsp;half&nbsp;of&nbsp;the&nbsp;uncompressed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513585">//&nbsp;data.&nbsp;&nbsp;The&nbsp;test&nbsp;ran&nbsp;correctly&nbsp;most&nbsp;of&nbsp;the&nbsp;time,&nbsp;because</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513646">//&nbsp;the&nbsp;background&nbsp;goroutine&nbsp;had&nbsp;usually&nbsp;read&nbsp;even</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513698">//&nbsp;those&nbsp;extra&nbsp;bits&nbsp;by&nbsp;now,&nbsp;but&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;useful&nbsp;thing&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6513759">//&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513771"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6513774">.</span><span class="ident" id="6513775">WriteMode</span><span class="op" id="6513784">(</span><span class="op" id="6513785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513788">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513791"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6513794">.</span><span class="ident" id="6513795">ReadMode</span><span class="op" id="6513803">(</span><span class="op" id="6513804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513807">out</span>&nbsp;<span class="op" id="6513811">:=</span>&nbsp;<span class="builtinfunc" id="6513814">make</span><span class="op" id="6513818">(</span><span class="op" id="6513819">[</span><span class="op" id="6513820">]</span><span class="builtintype" id="6513821">byte</span><span class="op" id="6513825">,</span>&nbsp;<span class="num" id="6513827">10</span><span class="op" id="6513829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513832">if</span>&nbsp;<span class="ident" id="6513835">n</span><span class="op" id="6513836">,</span>&nbsp;<span class="ident" id="6513838">err</span>&nbsp;<span class="op" id="6513842">:=</span>&nbsp;<span class="ident" id="6513845"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span><span class="op" id="6513846">.</span><span class="ident" id="6513847">Read</span><span class="op" id="6513851">(</span><span class="ident" id="6513852"><a href="/compress/flate/deflate_test.go.html#6513807">out</a></span><span class="op" id="6513855">)</span><span class="op" id="6513856">;</span>&nbsp;<span class="ident" id="6513858"><a href="/compress/flate/deflate_test.go.html#6513835">n</a></span>&nbsp;<span class="op" id="6513860">&gt;</span>&nbsp;<span class="num" id="6513862">0</span>&nbsp;<span class="op" id="6513864">||</span>&nbsp;<span class="ident" id="6513867"><a href="/compress/flate/deflate_test.go.html#6513838">err</a></span>&nbsp;<span class="op" id="6513871">!=</span>&nbsp;<span class="ident" id="6513874"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6513876">.</span><span class="ident" id="6513877">EOF</span>&nbsp;<span class="op" id="6513881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6513885"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6513886">.</span><span class="ident" id="6513887">Errorf</span><span class="op" id="6513893">(</span><span class="string" id="6513894">&#34;testSync&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;final&nbsp;Read:&nbsp;%d,&nbsp;%v&nbsp;(hex:&nbsp;%x)&#34;</span><span class="op" id="6513947">,</span>&nbsp;<span class="ident" id="6513949"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6513954">,</span>&nbsp;<span class="builtinfunc" id="6513956">len</span><span class="op" id="6513959">(</span><span class="ident" id="6513960"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6513965">)</span><span class="op" id="6513966">,</span>&nbsp;<span class="ident" id="6513968"><a href="/compress/flate/deflate_test.go.html#6511958">name</a></span><span class="op" id="6513972">,</span>&nbsp;<span class="ident" id="6513974"><a href="/compress/flate/deflate_test.go.html#6513835">n</a></span><span class="op" id="6513975">,</span>&nbsp;<span class="ident" id="6513977"><a href="/compress/flate/deflate_test.go.html#6513838">err</a></span><span class="op" id="6513980">,</span>&nbsp;<span class="ident" id="6513982"><a href="/compress/flate/deflate_test.go.html#6513807">out</a></span><span class="op" id="6513985">[</span><span class="num" id="6513986">0</span><span class="op" id="6513987">:</span><span class="ident" id="6513988"><a href="/compress/flate/deflate_test.go.html#6513835">n</a></span><span class="op" id="6513989">]</span><span class="op" id="6513990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6513993">}</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6513996">if</span>&nbsp;<span class="ident" id="6513999"><a href="/compress/flate/deflate_test.go.html#6512067">buf</a></span><span class="op" id="6514002">.</span><span class="ident" id="6514003">buf</span><span class="op" id="6514006">.</span><span class="ident" id="6514007">Len</span><span class="op" id="6514010">(</span><span class="op" id="6514011">)</span>&nbsp;<span class="op" id="6514013">!=</span>&nbsp;<span class="num" id="6514016">0</span>&nbsp;<span class="op" id="6514018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514022"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6514023">.</span><span class="ident" id="6514024">Errorf</span><span class="op" id="6514030">(</span><span class="string" id="6514031">&#34;testSync&nbsp;(%d,&nbsp;%d,&nbsp;%s):&nbsp;extra&nbsp;data&nbsp;at&nbsp;end&#34;</span><span class="op" id="6514073">,</span>&nbsp;<span class="ident" id="6514075"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6514080">,</span>&nbsp;<span class="builtinfunc" id="6514082">len</span><span class="op" id="6514085">(</span><span class="ident" id="6514086"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6514091">)</span><span class="op" id="6514092">,</span>&nbsp;<span class="ident" id="6514094"><a href="/compress/flate/deflate_test.go.html#6511958">name</a></span><span class="op" id="6514098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514101">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514104"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span><span class="op" id="6514105">.</span><span class="ident" id="6514106">Close</span><span class="op" id="6514111">(</span><span class="op" id="6514112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6514116">//&nbsp;stream&nbsp;should&nbsp;work&nbsp;for&nbsp;ordinary&nbsp;reader&nbsp;too</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514163"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span>&nbsp;<span class="op" id="6514165">=</span>&nbsp;<span class="ident" id="6514167"><a href="/compress/flate/inflate.go.html#4610722">NewReader</a></span><span class="op" id="6514176">(</span><span class="ident" id="6514177"><a href="/compress/flate/deflate_test.go.html#6512091">buf1</a></span><span class="op" id="6514181">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514184"><a href="/compress/flate/deflate_test.go.html#6513807">out</a></span><span class="op" id="6514187">,</span>&nbsp;<span class="ident" id="6514189"><a href="/compress/flate/deflate_test.go.html#6512138">err</a></span>&nbsp;<span class="op" id="6514193">=</span>&nbsp;<span class="ident" id="6514195"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6514201">.</span><span class="ident" id="6514202">ReadAll</span><span class="op" id="6514209">(</span><span class="ident" id="6514210"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span><span class="op" id="6514211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514214">if</span>&nbsp;<span class="ident" id="6514217"><a href="/compress/flate/deflate_test.go.html#6512138">err</a></span>&nbsp;<span class="op" id="6514221">!=</span>&nbsp;<span class="ident" id="6514224">nil</span>&nbsp;<span class="op" id="6514228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514232"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6514233">.</span><span class="ident" id="6514234">Errorf</span><span class="op" id="6514240">(</span><span class="string" id="6514241">&#34;testSync:&nbsp;read:&nbsp;%s&#34;</span><span class="op" id="6514261">,</span>&nbsp;<span class="ident" id="6514263"><a href="/compress/flate/deflate_test.go.html#6512138">err</a></span><span class="op" id="6514266">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514270">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514281"><a href="/compress/flate/deflate_test.go.html#6512252">r</a></span><span class="op" id="6514282">.</span><span class="ident" id="6514283">Close</span><span class="op" id="6514288">(</span><span class="op" id="6514289">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514292">if</span>&nbsp;<span class="op" id="6514295">!</span><span class="ident" id="6514296"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6514301">.</span><span class="ident" id="6514302">Equal</span><span class="op" id="6514307">(</span><span class="ident" id="6514308"><a href="/compress/flate/deflate_test.go.html#6511944">input</a></span><span class="op" id="6514313">,</span>&nbsp;<span class="ident" id="6514315"><a href="/compress/flate/deflate_test.go.html#6513807">out</a></span><span class="op" id="6514318">)</span>&nbsp;<span class="op" id="6514320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514324"><a href="/compress/flate/deflate_test.go.html#6511919">t</a></span><span class="op" id="6514325">.</span><span class="ident" id="6514326">Errorf</span><span class="op" id="6514332">(</span><span class="string" id="6514333">&#34;testSync:&nbsp;decompress(compress(data))&nbsp;!=&nbsp;data:&nbsp;level=%d&nbsp;input=%s&#34;</span><span class="op" id="6514398">,</span>&nbsp;<span class="ident" id="6514400"><a href="/compress/flate/deflate_test.go.html#6511933">level</a></span><span class="op" id="6514405">,</span>&nbsp;<span class="ident" id="6514407"><a href="/compress/flate/deflate_test.go.html#6511958">name</a></span><span class="op" id="6514411">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514414">}</span><br>
<span class="lineno"></span><span class="op" id="6514416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6514419">func</span>&nbsp;<span class="ident" id="6514424">testToFromWithLevelAndLimit</span><span class="op" id="6514451">(</span><span class="ident" id="6514452">t</span>&nbsp;<span class="op" id="6514454">*</span><span class="ident" id="6514455"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6514462">.</span><span class="ident" id="6514463">T</span><span class="op" id="6514464">,</span>&nbsp;<span class="ident" id="6514466">level</span>&nbsp;<span class="builtintype" id="6514472">int</span><span class="op" id="6514475">,</span>&nbsp;<span class="ident" id="6514477">input</span>&nbsp;<span class="op" id="6514483">[</span><span class="op" id="6514484">]</span><span class="builtintype" id="6514485">byte</span><span class="op" id="6514489">,</span>&nbsp;<span class="ident" id="6514491">name</span>&nbsp;<span class="builtintype" id="6514496">string</span><span class="op" id="6514502">,</span>&nbsp;<span class="ident" id="6514504">limit</span>&nbsp;<span class="builtintype" id="6514510">int</span><span class="op" id="6514513">)</span>&nbsp;<span class="op" id="6514515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514518">var</span>&nbsp;<span class="ident" id="6514522">buffer</span>&nbsp;<span class="ident" id="6514529"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6514534">.</span><span class="ident" id="6514535">Buffer</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514543">w</span><span class="op" id="6514544">,</span>&nbsp;<span class="ident" id="6514546">err</span>&nbsp;<span class="op" id="6514550">:=</span>&nbsp;<span class="ident" id="6514553"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6514562">(</span><span class="op" id="6514563">&amp;</span><span class="ident" id="6514564"><a href="/compress/flate/deflate_test.go.html#6514522">buffer</a></span><span class="op" id="6514570">,</span>&nbsp;<span class="ident" id="6514572"><a href="/compress/flate/deflate_test.go.html#6514466">level</a></span><span class="op" id="6514577">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514580">if</span>&nbsp;<span class="ident" id="6514583"><a href="/compress/flate/deflate_test.go.html#6514546">err</a></span>&nbsp;<span class="op" id="6514587">!=</span>&nbsp;<span class="ident" id="6514590">nil</span>&nbsp;<span class="op" id="6514594">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514598"><a href="/compress/flate/deflate_test.go.html#6514452">t</a></span><span class="op" id="6514599">.</span><span class="ident" id="6514600">Errorf</span><span class="op" id="6514606">(</span><span class="string" id="6514607">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6514622">,</span>&nbsp;<span class="ident" id="6514624"><a href="/compress/flate/deflate_test.go.html#6514546">err</a></span><span class="op" id="6514627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514631">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514639">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514642"><a href="/compress/flate/deflate_test.go.html#6514543">w</a></span><span class="op" id="6514643">.</span><span class="ident" id="6514644">Write</span><span class="op" id="6514649">(</span><span class="ident" id="6514650"><a href="/compress/flate/deflate_test.go.html#6514477">input</a></span><span class="op" id="6514655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514658"><a href="/compress/flate/deflate_test.go.html#6514543">w</a></span><span class="op" id="6514659">.</span><span class="ident" id="6514660">Close</span><span class="op" id="6514665">(</span><span class="op" id="6514666">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514669">if</span>&nbsp;<span class="ident" id="6514672"><a href="/compress/flate/deflate_test.go.html#6514504">limit</a></span>&nbsp;<span class="op" id="6514678">&gt;</span>&nbsp;<span class="num" id="6514680">0</span>&nbsp;<span class="op" id="6514682">&amp;&amp;</span>&nbsp;<span class="ident" id="6514685"><a href="/compress/flate/deflate_test.go.html#6514522">buffer</a></span><span class="op" id="6514691">.</span><span class="ident" id="6514692">Len</span><span class="op" id="6514695">(</span><span class="op" id="6514696">)</span>&nbsp;<span class="op" id="6514698">&gt;</span>&nbsp;<span class="ident" id="6514700"><a href="/compress/flate/deflate_test.go.html#6514504">limit</a></span>&nbsp;<span class="op" id="6514706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514710"><a href="/compress/flate/deflate_test.go.html#6514452">t</a></span><span class="op" id="6514711">.</span><span class="ident" id="6514712">Errorf</span><span class="op" id="6514718">(</span><span class="string" id="6514719">&#34;level:&nbsp;%d,&nbsp;len(compress(data))&nbsp;=&nbsp;%d&nbsp;&gt;&nbsp;limit&nbsp;=&nbsp;%d&#34;</span><span class="op" id="6514769">,</span>&nbsp;<span class="ident" id="6514771"><a href="/compress/flate/deflate_test.go.html#6514466">level</a></span><span class="op" id="6514776">,</span>&nbsp;<span class="ident" id="6514778"><a href="/compress/flate/deflate_test.go.html#6514522">buffer</a></span><span class="op" id="6514784">.</span><span class="ident" id="6514785">Len</span><span class="op" id="6514788">(</span><span class="op" id="6514789">)</span><span class="op" id="6514790">,</span>&nbsp;<span class="ident" id="6514792"><a href="/compress/flate/deflate_test.go.html#6514504">limit</a></span><span class="op" id="6514797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514801">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514812">r</span>&nbsp;<span class="op" id="6514814">:=</span>&nbsp;<span class="ident" id="6514817"><a href="/compress/flate/inflate.go.html#4610722">NewReader</a></span><span class="op" id="6514826">(</span><span class="op" id="6514827">&amp;</span><span class="ident" id="6514828"><a href="/compress/flate/deflate_test.go.html#6514522">buffer</a></span><span class="op" id="6514834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514837">out</span><span class="op" id="6514840">,</span>&nbsp;<span class="ident" id="6514842"><a href="/compress/flate/deflate_test.go.html#6514546">err</a></span>&nbsp;<span class="op" id="6514846">:=</span>&nbsp;<span class="ident" id="6514849"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6514855">.</span><span class="ident" id="6514856">ReadAll</span><span class="op" id="6514863">(</span><span class="ident" id="6514864"><a href="/compress/flate/deflate_test.go.html#6514812">r</a></span><span class="op" id="6514865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514868">if</span>&nbsp;<span class="ident" id="6514871"><a href="/compress/flate/deflate_test.go.html#6514546">err</a></span>&nbsp;<span class="op" id="6514875">!=</span>&nbsp;<span class="ident" id="6514878">nil</span>&nbsp;<span class="op" id="6514882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514886"><a href="/compress/flate/deflate_test.go.html#6514452">t</a></span><span class="op" id="6514887">.</span><span class="ident" id="6514888">Errorf</span><span class="op" id="6514894">(</span><span class="string" id="6514895">&#34;read:&nbsp;%s&#34;</span><span class="op" id="6514905">,</span>&nbsp;<span class="ident" id="6514907"><a href="/compress/flate/deflate_test.go.html#6514546">err</a></span><span class="op" id="6514910">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514914">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6514922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514925"><a href="/compress/flate/deflate_test.go.html#6514812">r</a></span><span class="op" id="6514926">.</span><span class="ident" id="6514927">Close</span><span class="op" id="6514932">(</span><span class="op" id="6514933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6514936">if</span>&nbsp;<span class="op" id="6514939">!</span><span class="ident" id="6514940"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6514945">.</span><span class="ident" id="6514946">Equal</span><span class="op" id="6514951">(</span><span class="ident" id="6514952"><a href="/compress/flate/deflate_test.go.html#6514477">input</a></span><span class="op" id="6514957">,</span>&nbsp;<span class="ident" id="6514959"><a href="/compress/flate/deflate_test.go.html#6514837">out</a></span><span class="op" id="6514962">)</span>&nbsp;<span class="op" id="6514964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6514968"><a href="/compress/flate/deflate_test.go.html#6514452">t</a></span><span class="op" id="6514969">.</span><span class="ident" id="6514970">Errorf</span><span class="op" id="6514976">(</span><span class="string" id="6514977">&#34;decompress(compress(data))&nbsp;!=&nbsp;data:&nbsp;level=%d&nbsp;input=%s&#34;</span><span class="op" id="6515032">,</span>&nbsp;<span class="ident" id="6515034"><a href="/compress/flate/deflate_test.go.html#6514466">level</a></span><span class="op" id="6515039">,</span>&nbsp;<span class="ident" id="6515041"><a href="/compress/flate/deflate_test.go.html#6514491">name</a></span><span class="op" id="6515045">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515049">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515060"><a href="/compress/flate/deflate_test.go.html#6511910">testSync</a></span><span class="op" id="6515068">(</span><span class="ident" id="6515069"><a href="/compress/flate/deflate_test.go.html#6514452">t</a></span><span class="op" id="6515070">,</span>&nbsp;<span class="ident" id="6515072"><a href="/compress/flate/deflate_test.go.html#6514466">level</a></span><span class="op" id="6515077">,</span>&nbsp;<span class="ident" id="6515079"><a href="/compress/flate/deflate_test.go.html#6514477">input</a></span><span class="op" id="6515084">,</span>&nbsp;<span class="ident" id="6515086"><a href="/compress/flate/deflate_test.go.html#6514491">name</a></span><span class="op" id="6515090">)</span><br>
<span class="lineno"></span><span class="op" id="6515092">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span><span class="keyword" id="6515095">func</span>&nbsp;<span class="ident" id="6515100">testToFromWithLimit</span><span class="op" id="6515119">(</span><span class="ident" id="6515120">t</span>&nbsp;<span class="op" id="6515122">*</span><span class="ident" id="6515123"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6515130">.</span><span class="ident" id="6515131">T</span><span class="op" id="6515132">,</span>&nbsp;<span class="ident" id="6515134">input</span>&nbsp;<span class="op" id="6515140">[</span><span class="op" id="6515141">]</span><span class="builtintype" id="6515142">byte</span><span class="op" id="6515146">,</span>&nbsp;<span class="ident" id="6515148">name</span>&nbsp;<span class="builtintype" id="6515153">string</span><span class="op" id="6515159">,</span>&nbsp;<span class="ident" id="6515161">limit</span>&nbsp;<span class="op" id="6515167">[</span><span class="num" id="6515168">10</span><span class="op" id="6515170">]</span><span class="builtintype" id="6515171">int</span><span class="op" id="6515174">)</span>&nbsp;<span class="op" id="6515176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515179">for</span>&nbsp;<span class="ident" id="6515183">i</span>&nbsp;<span class="op" id="6515185">:=</span>&nbsp;<span class="num" id="6515188">0</span><span class="op" id="6515189">;</span>&nbsp;<span class="ident" id="6515191"><a href="/compress/flate/deflate_test.go.html#6515183">i</a></span>&nbsp;<span class="op" id="6515193">&lt;</span>&nbsp;<span class="num" id="6515195">10</span><span class="op" id="6515197">;</span>&nbsp;<span class="ident" id="6515199"><a href="/compress/flate/deflate_test.go.html#6515183">i</a></span><span class="op" id="6515200">++</span>&nbsp;<span class="op" id="6515203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515207"><a href="/compress/flate/deflate_test.go.html#6514424">testToFromWithLevelAndLimit</a></span><span class="op" id="6515234">(</span><span class="ident" id="6515235"><a href="/compress/flate/deflate_test.go.html#6515120">t</a></span><span class="op" id="6515236">,</span>&nbsp;<span class="ident" id="6515238"><a href="/compress/flate/deflate_test.go.html#6515183">i</a></span><span class="op" id="6515239">,</span>&nbsp;<span class="ident" id="6515241"><a href="/compress/flate/deflate_test.go.html#6515134">input</a></span><span class="op" id="6515246">,</span>&nbsp;<span class="ident" id="6515248"><a href="/compress/flate/deflate_test.go.html#6515148">name</a></span><span class="op" id="6515252">,</span>&nbsp;<span class="ident" id="6515254"><a href="/compress/flate/deflate_test.go.html#6515161">limit</a></span><span class="op" id="6515259">[</span><span class="ident" id="6515260"><a href="/compress/flate/deflate_test.go.html#6515183">i</a></span><span class="op" id="6515261">]</span><span class="op" id="6515262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515265">}</span><br>
<span class="lineno"></span><span class="op" id="6515267">}</span><br>
<span class="lineno">310</span><br>
<span class="lineno"></span><span class="keyword" id="6515270">func</span>&nbsp;<span class="ident" id="6515275">TestDeflateInflate</span><span class="op" id="6515293">(</span><span class="ident" id="6515294">t</span>&nbsp;<span class="op" id="6515296">*</span><span class="ident" id="6515297"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6515304">.</span><span class="ident" id="6515305">T</span><span class="op" id="6515306">)</span>&nbsp;<span class="op" id="6515308">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515311">for</span>&nbsp;<span class="ident" id="6515315">i</span><span class="op" id="6515316">,</span>&nbsp;<span class="ident" id="6515318">h</span>&nbsp;<span class="op" id="6515320">:=</span>&nbsp;<span class="keyword" id="6515323">range</span>&nbsp;<span class="ident" id="6515329"><a href="/compress/flate/deflate_test.go.html#6509411">deflateInflateTests</a></span>&nbsp;<span class="op" id="6515349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515353"><a href="/compress/flate/deflate_test.go.html#6515100">testToFromWithLimit</a></span><span class="op" id="6515372">(</span><span class="ident" id="6515373"><a href="/compress/flate/deflate_test.go.html#6515294">t</a></span><span class="op" id="6515374">,</span>&nbsp;<span class="ident" id="6515376"><a href="/compress/flate/deflate_test.go.html#6515318">h</a></span><span class="op" id="6515377">.</span><span class="ident" id="6515378">in</span><span class="op" id="6515380">,</span>&nbsp;<span class="ident" id="6515382"><a href="/compress/flate/deflate_test.go.html#6508062">fmt</a></span><span class="op" id="6515385">.</span><span class="ident" id="6515386">Sprintf</span><span class="op" id="6515393">(</span><span class="string" id="6515394">&#34;#%d&#34;</span><span class="op" id="6515399">,</span>&nbsp;<span class="ident" id="6515401"><a href="/compress/flate/deflate_test.go.html#6515315">i</a></span><span class="op" id="6515402">)</span><span class="op" id="6515403">,</span>&nbsp;<span class="op" id="6515405">[</span><span class="num" id="6515406">10</span><span class="op" id="6515408">]</span><span class="builtintype" id="6515409">int</span><span class="op" id="6515412">{</span><span class="op" id="6515413">}</span><span class="op" id="6515414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515417">}</span><br>
<span class="lineno">315</span><span class="op" id="6515419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6515422">func</span>&nbsp;<span class="ident" id="6515427">TestReverseBits</span><span class="op" id="6515442">(</span><span class="ident" id="6515443">t</span>&nbsp;<span class="op" id="6515445">*</span><span class="ident" id="6515446"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6515453">.</span><span class="ident" id="6515454">T</span><span class="op" id="6515455">)</span>&nbsp;<span class="op" id="6515457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515460">for</span>&nbsp;<span class="ident" id="6515464">_</span><span class="op" id="6515465">,</span>&nbsp;<span class="ident" id="6515467">h</span>&nbsp;<span class="op" id="6515469">:=</span>&nbsp;<span class="keyword" id="6515472">range</span>&nbsp;<span class="ident" id="6515478"><a href="/compress/flate/deflate_test.go.html#6509673">reverseBitsTests</a></span>&nbsp;<span class="op" id="6515495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6515499">if</span>&nbsp;<span class="ident" id="6515502">v</span>&nbsp;<span class="op" id="6515504">:=</span>&nbsp;<span class="ident" id="6515507"><a href="/compress/flate/reverse_bits.go.html#4613479">reverseBits</a></span><span class="op" id="6515518">(</span><span class="ident" id="6515519"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515520">.</span><span class="ident" id="6515521">in</span><span class="op" id="6515523">,</span>&nbsp;<span class="ident" id="6515525"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515526">.</span><span class="ident" id="6515527">bitCount</span><span class="op" id="6515535">)</span><span class="op" id="6515536">;</span>&nbsp;<span class="ident" id="6515538"><a href="/compress/flate/deflate_test.go.html#6515502">v</a></span>&nbsp;<span class="op" id="6515540">!=</span>&nbsp;<span class="ident" id="6515543"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515544">.</span><span class="ident" id="6515545">out</span>&nbsp;<span class="op" id="6515549">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515554"><a href="/compress/flate/deflate_test.go.html#6515443">t</a></span><span class="op" id="6515555">.</span><span class="ident" id="6515556">Errorf</span><span class="op" id="6515562">(</span><span class="string" id="6515563">&#34;reverseBits(%v,%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6515597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515603"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515604">.</span><span class="ident" id="6515605">in</span><span class="op" id="6515607">,</span>&nbsp;<span class="ident" id="6515609"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515610">.</span><span class="ident" id="6515611">bitCount</span><span class="op" id="6515619">,</span>&nbsp;<span class="ident" id="6515621"><a href="/compress/flate/deflate_test.go.html#6515502">v</a></span><span class="op" id="6515622">,</span>&nbsp;<span class="ident" id="6515624"><a href="/compress/flate/deflate_test.go.html#6515467">h</a></span><span class="op" id="6515625">.</span><span class="ident" id="6515626">out</span><span class="op" id="6515629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515636">}</span><br>
<span class="lineno"></span><span class="op" id="6515638">}</span><br>
<span class="lineno">325</span><br>
<span class="lineno"></span><span class="keyword" id="6515641">type</span>&nbsp;<span class="ident" id="6515646">deflateInflateStringTest</span>&nbsp;<span class="keyword" id="6515671">struct</span>&nbsp;<span class="op" id="6515678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515681">filename</span>&nbsp;<span class="builtintype" id="6515690">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515698">label</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6515707">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6515715">limit</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6515724">[</span><span class="num" id="6515725">10</span><span class="op" id="6515727">]</span><span class="builtintype" id="6515728">int</span><br>
<span class="lineno">330</span><span class="op" id="6515732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6515735">var</span>&nbsp;<span class="ident" id="6515739">deflateInflateStringTests</span>&nbsp;<span class="op" id="6515765">=</span>&nbsp;<span class="op" id="6515767">[</span><span class="op" id="6515768">]</span><span class="ident" id="6515769"><a href="/compress/flate/deflate_test.go.html#6515646">deflateInflateStringTest</a></span><span class="op" id="6515793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6515800">&#34;../testdata/e.txt&#34;</span><span class="op" id="6515819">,</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6515823">&#34;2.718281828...&#34;</span><span class="op" id="6515839">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515843">[</span><span class="op" id="6515844">...</span><span class="op" id="6515847">]</span><span class="builtintype" id="6515848">int</span><span class="op" id="6515851">{</span><span class="num" id="6515852">100018</span><span class="op" id="6515858">,</span>&nbsp;<span class="num" id="6515860">50650</span><span class="op" id="6515865">,</span>&nbsp;<span class="num" id="6515867">50960</span><span class="op" id="6515872">,</span>&nbsp;<span class="num" id="6515874">51150</span><span class="op" id="6515879">,</span>&nbsp;<span class="num" id="6515881">50930</span><span class="op" id="6515886">,</span>&nbsp;<span class="num" id="6515888">50790</span><span class="op" id="6515893">,</span>&nbsp;<span class="num" id="6515895">50790</span><span class="op" id="6515900">,</span>&nbsp;<span class="num" id="6515902">50790</span><span class="op" id="6515907">,</span>&nbsp;<span class="num" id="6515909">50790</span><span class="op" id="6515914">,</span>&nbsp;<span class="num" id="6515916">50790</span><span class="op" id="6515921">}</span><span class="op" id="6515922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515925">}</span><span class="op" id="6515926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6515929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6515933">&#34;../testdata/Mark.Twain-Tom.Sawyer.txt&#34;</span><span class="op" id="6515972">,</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6515976">&#34;Mark.Twain-Tom.Sawyer&#34;</span><span class="op" id="6515999">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516003">[</span><span class="op" id="6516004">...</span><span class="op" id="6516007">]</span><span class="builtintype" id="6516008">int</span><span class="op" id="6516011">{</span><span class="num" id="6516012">407330</span><span class="op" id="6516018">,</span>&nbsp;<span class="num" id="6516020">187598</span><span class="op" id="6516026">,</span>&nbsp;<span class="num" id="6516028">180361</span><span class="op" id="6516034">,</span>&nbsp;<span class="num" id="6516036">172974</span><span class="op" id="6516042">,</span>&nbsp;<span class="num" id="6516044">169160</span><span class="op" id="6516050">,</span>&nbsp;<span class="num" id="6516052">163476</span><span class="op" id="6516058">,</span>&nbsp;<span class="num" id="6516060">160936</span><span class="op" id="6516066">,</span>&nbsp;<span class="num" id="6516068">160506</span><span class="op" id="6516074">,</span>&nbsp;<span class="num" id="6516076">160295</span><span class="op" id="6516082">,</span>&nbsp;<span class="num" id="6516084">160295</span><span class="op" id="6516090">}</span><span class="op" id="6516091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516094">}</span><span class="op" id="6516095">,</span><br>
<span class="lineno"></span><span class="op" id="6516097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="6516100">func</span>&nbsp;<span class="ident" id="6516105">TestDeflateInflateString</span><span class="op" id="6516129">(</span><span class="ident" id="6516130">t</span>&nbsp;<span class="op" id="6516132">*</span><span class="ident" id="6516133"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6516140">.</span><span class="ident" id="6516141">T</span><span class="op" id="6516142">)</span>&nbsp;<span class="op" id="6516144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516147">for</span>&nbsp;<span class="ident" id="6516151">_</span><span class="op" id="6516152">,</span>&nbsp;<span class="ident" id="6516154">test</span>&nbsp;<span class="op" id="6516159">:=</span>&nbsp;<span class="keyword" id="6516162">range</span>&nbsp;<span class="ident" id="6516168"><a href="/compress/flate/deflate_test.go.html#6515739">deflateInflateStringTests</a></span>&nbsp;<span class="op" id="6516194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516198">gold</span><span class="op" id="6516202">,</span>&nbsp;<span class="ident" id="6516204">err</span>&nbsp;<span class="op" id="6516208">:=</span>&nbsp;<span class="ident" id="6516211"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6516217">.</span><span class="ident" id="6516218">ReadFile</span><span class="op" id="6516226">(</span><span class="ident" id="6516227"><a href="/compress/flate/deflate_test.go.html#6516154">test</a></span><span class="op" id="6516231">.</span><span class="ident" id="6516232">filename</span><span class="op" id="6516240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516244">if</span>&nbsp;<span class="ident" id="6516247"><a href="/compress/flate/deflate_test.go.html#6516204">err</a></span>&nbsp;<span class="op" id="6516251">!=</span>&nbsp;<span class="ident" id="6516254">nil</span>&nbsp;<span class="op" id="6516258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516263"><a href="/compress/flate/deflate_test.go.html#6516130">t</a></span><span class="op" id="6516264">.</span><span class="ident" id="6516265">Error</span><span class="op" id="6516270">(</span><span class="ident" id="6516271"><a href="/compress/flate/deflate_test.go.html#6516204">err</a></span><span class="op" id="6516274">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516278">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516282"><a href="/compress/flate/deflate_test.go.html#6515100">testToFromWithLimit</a></span><span class="op" id="6516301">(</span><span class="ident" id="6516302"><a href="/compress/flate/deflate_test.go.html#6516130">t</a></span><span class="op" id="6516303">,</span>&nbsp;<span class="ident" id="6516305"><a href="/compress/flate/deflate_test.go.html#6516198">gold</a></span><span class="op" id="6516309">,</span>&nbsp;<span class="ident" id="6516311"><a href="/compress/flate/deflate_test.go.html#6516154">test</a></span><span class="op" id="6516315">.</span><span class="ident" id="6516316">label</span><span class="op" id="6516321">,</span>&nbsp;<span class="ident" id="6516323"><a href="/compress/flate/deflate_test.go.html#6516154">test</a></span><span class="op" id="6516327">.</span><span class="ident" id="6516328">limit</span><span class="op" id="6516333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516337">if</span>&nbsp;<span class="ident" id="6516340"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6516347">.</span><span class="ident" id="6516348">Short</span><span class="op" id="6516353">(</span><span class="op" id="6516354">)</span>&nbsp;<span class="op" id="6516356">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516361">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516369">}</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516372">}</span><br>
<span class="lineno"></span><span class="op" id="6516374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6516377">func</span>&nbsp;<span class="ident" id="6516382">TestReaderDict</span><span class="op" id="6516396">(</span><span class="ident" id="6516397">t</span>&nbsp;<span class="op" id="6516399">*</span><span class="ident" id="6516400"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6516407">.</span><span class="ident" id="6516408">T</span><span class="op" id="6516409">)</span>&nbsp;<span class="op" id="6516411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516414">const</span>&nbsp;<span class="op" id="6516420">(</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516424">dict</span>&nbsp;<span class="op" id="6516429">=</span>&nbsp;<span class="string" id="6516431">&#34;hello&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516447">text</span>&nbsp;<span class="op" id="6516452">=</span>&nbsp;<span class="string" id="6516454">&#34;hello&nbsp;again&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516478">var</span>&nbsp;<span class="ident" id="6516482">b</span>&nbsp;<span class="ident" id="6516484"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6516489">.</span><span class="ident" id="6516490">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516498">w</span><span class="op" id="6516499">,</span>&nbsp;<span class="ident" id="6516501">err</span>&nbsp;<span class="op" id="6516505">:=</span>&nbsp;<span class="ident" id="6516508"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6516517">(</span><span class="op" id="6516518">&amp;</span><span class="ident" id="6516519"><a href="/compress/flate/deflate_test.go.html#6516482">b</a></span><span class="op" id="6516520">,</span>&nbsp;<span class="num" id="6516522">5</span><span class="op" id="6516523">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516526">if</span>&nbsp;<span class="ident" id="6516529"><a href="/compress/flate/deflate_test.go.html#6516501">err</a></span>&nbsp;<span class="op" id="6516533">!=</span>&nbsp;<span class="ident" id="6516536">nil</span>&nbsp;<span class="op" id="6516540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516544"><a href="/compress/flate/deflate_test.go.html#6516397">t</a></span><span class="op" id="6516545">.</span><span class="ident" id="6516546">Fatalf</span><span class="op" id="6516552">(</span><span class="string" id="6516553">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6516568">,</span>&nbsp;<span class="ident" id="6516570"><a href="/compress/flate/deflate_test.go.html#6516501">err</a></span><span class="op" id="6516573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516576">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516579"><a href="/compress/flate/deflate_test.go.html#6516498">w</a></span><span class="op" id="6516580">.</span><span class="ident" id="6516581">Write</span><span class="op" id="6516586">(</span><span class="op" id="6516587">[</span><span class="op" id="6516588">]</span><span class="builtintype" id="6516589">byte</span><span class="op" id="6516593">(</span><span class="ident" id="6516594"><a href="/compress/flate/deflate_test.go.html#6516424">dict</a></span><span class="op" id="6516598">)</span><span class="op" id="6516599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516602"><a href="/compress/flate/deflate_test.go.html#6516498">w</a></span><span class="op" id="6516603">.</span><span class="ident" id="6516604">Flush</span><span class="op" id="6516609">(</span><span class="op" id="6516610">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516613"><a href="/compress/flate/deflate_test.go.html#6516482">b</a></span><span class="op" id="6516614">.</span><span class="ident" id="6516615">Reset</span><span class="op" id="6516620">(</span><span class="op" id="6516621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516624"><a href="/compress/flate/deflate_test.go.html#6516498">w</a></span><span class="op" id="6516625">.</span><span class="ident" id="6516626">Write</span><span class="op" id="6516631">(</span><span class="op" id="6516632">[</span><span class="op" id="6516633">]</span><span class="builtintype" id="6516634">byte</span><span class="op" id="6516638">(</span><span class="ident" id="6516639"><a href="/compress/flate/deflate_test.go.html#6516447">text</a></span><span class="op" id="6516643">)</span><span class="op" id="6516644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516647"><a href="/compress/flate/deflate_test.go.html#6516498">w</a></span><span class="op" id="6516648">.</span><span class="ident" id="6516649">Close</span><span class="op" id="6516654">(</span><span class="op" id="6516655">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516659">r</span>&nbsp;<span class="op" id="6516661">:=</span>&nbsp;<span class="ident" id="6516664"><a href="/compress/flate/inflate.go.html#4611328">NewReaderDict</a></span><span class="op" id="6516677">(</span><span class="op" id="6516678">&amp;</span><span class="ident" id="6516679"><a href="/compress/flate/deflate_test.go.html#6516482">b</a></span><span class="op" id="6516680">,</span>&nbsp;<span class="op" id="6516682">[</span><span class="op" id="6516683">]</span><span class="builtintype" id="6516684">byte</span><span class="op" id="6516688">(</span><span class="ident" id="6516689"><a href="/compress/flate/deflate_test.go.html#6516424">dict</a></span><span class="op" id="6516693">)</span><span class="op" id="6516694">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516697">data</span><span class="op" id="6516701">,</span>&nbsp;<span class="ident" id="6516703"><a href="/compress/flate/deflate_test.go.html#6516501">err</a></span>&nbsp;<span class="op" id="6516707">:=</span>&nbsp;<span class="ident" id="6516710"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6516716">.</span><span class="ident" id="6516717">ReadAll</span><span class="op" id="6516724">(</span><span class="ident" id="6516725"><a href="/compress/flate/deflate_test.go.html#6516659">r</a></span><span class="op" id="6516726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516729">if</span>&nbsp;<span class="ident" id="6516732"><a href="/compress/flate/deflate_test.go.html#6516501">err</a></span>&nbsp;<span class="op" id="6516736">!=</span>&nbsp;<span class="ident" id="6516739">nil</span>&nbsp;<span class="op" id="6516743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516747"><a href="/compress/flate/deflate_test.go.html#6516397">t</a></span><span class="op" id="6516748">.</span><span class="ident" id="6516749">Fatal</span><span class="op" id="6516754">(</span><span class="ident" id="6516755"><a href="/compress/flate/deflate_test.go.html#6516501">err</a></span><span class="op" id="6516758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516764">if</span>&nbsp;<span class="builtintype" id="6516767">string</span><span class="op" id="6516773">(</span><span class="ident" id="6516774"><a href="/compress/flate/deflate_test.go.html#6516697">data</a></span><span class="op" id="6516778">)</span>&nbsp;<span class="op" id="6516780">!=</span>&nbsp;<span class="string" id="6516783">&#34;hello&nbsp;again&nbsp;world&#34;</span>&nbsp;<span class="op" id="6516803">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516807"><a href="/compress/flate/deflate_test.go.html#6516397">t</a></span><span class="op" id="6516808">.</span><span class="ident" id="6516809">Fatalf</span><span class="op" id="6516815">(</span><span class="string" id="6516816">&#34;read&nbsp;returned&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6516842">,</span>&nbsp;<span class="builtintype" id="6516844">string</span><span class="op" id="6516850">(</span><span class="ident" id="6516851"><a href="/compress/flate/deflate_test.go.html#6516697">data</a></span><span class="op" id="6516855">)</span><span class="op" id="6516856">,</span>&nbsp;<span class="ident" id="6516858"><a href="/compress/flate/deflate_test.go.html#6516447">text</a></span><span class="op" id="6516862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516865">}</span><br>
<span class="lineno"></span><span class="op" id="6516867">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6516870">func</span>&nbsp;<span class="ident" id="6516875">TestWriterDict</span><span class="op" id="6516889">(</span><span class="ident" id="6516890">t</span>&nbsp;<span class="op" id="6516892">*</span><span class="ident" id="6516893"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6516900">.</span><span class="ident" id="6516901">T</span><span class="op" id="6516902">)</span>&nbsp;<span class="op" id="6516904">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516907">const</span>&nbsp;<span class="op" id="6516913">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516917">dict</span>&nbsp;<span class="op" id="6516922">=</span>&nbsp;<span class="string" id="6516924">&#34;hello&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516940">text</span>&nbsp;<span class="op" id="6516945">=</span>&nbsp;<span class="string" id="6516947">&#34;hello&nbsp;again&nbsp;world&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6516968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6516971">var</span>&nbsp;<span class="ident" id="6516975">b</span>&nbsp;<span class="ident" id="6516977"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6516982">.</span><span class="ident" id="6516983">Buffer</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6516991">w</span><span class="op" id="6516992">,</span>&nbsp;<span class="ident" id="6516994">err</span>&nbsp;<span class="op" id="6516998">:=</span>&nbsp;<span class="ident" id="6517001"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6517010">(</span><span class="op" id="6517011">&amp;</span><span class="ident" id="6517012"><a href="/compress/flate/deflate_test.go.html#6516975">b</a></span><span class="op" id="6517013">,</span>&nbsp;<span class="num" id="6517015">5</span><span class="op" id="6517016">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517019">if</span>&nbsp;<span class="ident" id="6517022"><a href="/compress/flate/deflate_test.go.html#6516994">err</a></span>&nbsp;<span class="op" id="6517026">!=</span>&nbsp;<span class="ident" id="6517029">nil</span>&nbsp;<span class="op" id="6517033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517037"><a href="/compress/flate/deflate_test.go.html#6516890">t</a></span><span class="op" id="6517038">.</span><span class="ident" id="6517039">Fatalf</span><span class="op" id="6517045">(</span><span class="string" id="6517046">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6517061">,</span>&nbsp;<span class="ident" id="6517063"><a href="/compress/flate/deflate_test.go.html#6516994">err</a></span><span class="op" id="6517066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517072"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517073">.</span><span class="ident" id="6517074">Write</span><span class="op" id="6517079">(</span><span class="op" id="6517080">[</span><span class="op" id="6517081">]</span><span class="builtintype" id="6517082">byte</span><span class="op" id="6517086">(</span><span class="ident" id="6517087"><a href="/compress/flate/deflate_test.go.html#6516917">dict</a></span><span class="op" id="6517091">)</span><span class="op" id="6517092">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517095"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517096">.</span><span class="ident" id="6517097">Flush</span><span class="op" id="6517102">(</span><span class="op" id="6517103">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517106"><a href="/compress/flate/deflate_test.go.html#6516975">b</a></span><span class="op" id="6517107">.</span><span class="ident" id="6517108">Reset</span><span class="op" id="6517113">(</span><span class="op" id="6517114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517117"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517118">.</span><span class="ident" id="6517119">Write</span><span class="op" id="6517124">(</span><span class="op" id="6517125">[</span><span class="op" id="6517126">]</span><span class="builtintype" id="6517127">byte</span><span class="op" id="6517131">(</span><span class="ident" id="6517132"><a href="/compress/flate/deflate_test.go.html#6516940">text</a></span><span class="op" id="6517136">)</span><span class="op" id="6517137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517140"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517141">.</span><span class="ident" id="6517142">Close</span><span class="op" id="6517147">(</span><span class="op" id="6517148">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517152">var</span>&nbsp;<span class="ident" id="6517156">b1</span>&nbsp;<span class="ident" id="6517159"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6517164">.</span><span class="ident" id="6517165">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517173"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517174">,</span>&nbsp;<span class="ident" id="6517176">_</span>&nbsp;<span class="op" id="6517178">=</span>&nbsp;<span class="ident" id="6517180"><a href="/compress/flate/deflate.go.html#4565557">NewWriterDict</a></span><span class="op" id="6517193">(</span><span class="op" id="6517194">&amp;</span><span class="ident" id="6517195"><a href="/compress/flate/deflate_test.go.html#6517156">b1</a></span><span class="op" id="6517197">,</span>&nbsp;<span class="num" id="6517199">5</span><span class="op" id="6517200">,</span>&nbsp;<span class="op" id="6517202">[</span><span class="op" id="6517203">]</span><span class="builtintype" id="6517204">byte</span><span class="op" id="6517208">(</span><span class="ident" id="6517209"><a href="/compress/flate/deflate_test.go.html#6516917">dict</a></span><span class="op" id="6517213">)</span><span class="op" id="6517214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517217"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517218">.</span><span class="ident" id="6517219">Write</span><span class="op" id="6517224">(</span><span class="op" id="6517225">[</span><span class="op" id="6517226">]</span><span class="builtintype" id="6517227">byte</span><span class="op" id="6517231">(</span><span class="ident" id="6517232"><a href="/compress/flate/deflate_test.go.html#6516940">text</a></span><span class="op" id="6517236">)</span><span class="op" id="6517237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517240"><a href="/compress/flate/deflate_test.go.html#6516991">w</a></span><span class="op" id="6517241">.</span><span class="ident" id="6517242">Close</span><span class="op" id="6517247">(</span><span class="op" id="6517248">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517252">if</span>&nbsp;<span class="op" id="6517255">!</span><span class="ident" id="6517256"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6517261">.</span><span class="ident" id="6517262">Equal</span><span class="op" id="6517267">(</span><span class="ident" id="6517268"><a href="/compress/flate/deflate_test.go.html#6517156">b1</a></span><span class="op" id="6517270">.</span><span class="ident" id="6517271">Bytes</span><span class="op" id="6517276">(</span><span class="op" id="6517277">)</span><span class="op" id="6517278">,</span>&nbsp;<span class="ident" id="6517280"><a href="/compress/flate/deflate_test.go.html#6516975">b</a></span><span class="op" id="6517281">.</span><span class="ident" id="6517282">Bytes</span><span class="op" id="6517287">(</span><span class="op" id="6517288">)</span><span class="op" id="6517289">)</span>&nbsp;<span class="op" id="6517291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517295"><a href="/compress/flate/deflate_test.go.html#6516890">t</a></span><span class="op" id="6517296">.</span><span class="ident" id="6517297">Fatalf</span><span class="op" id="6517303">(</span><span class="string" id="6517304">&#34;writer&nbsp;wrote&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="6517329">,</span>&nbsp;<span class="ident" id="6517331"><a href="/compress/flate/deflate_test.go.html#6517156">b1</a></span><span class="op" id="6517333">.</span><span class="ident" id="6517334">Bytes</span><span class="op" id="6517339">(</span><span class="op" id="6517340">)</span><span class="op" id="6517341">,</span>&nbsp;<span class="ident" id="6517343"><a href="/compress/flate/deflate_test.go.html#6516975">b</a></span><span class="op" id="6517344">.</span><span class="ident" id="6517345">Bytes</span><span class="op" id="6517350">(</span><span class="op" id="6517351">)</span><span class="op" id="6517352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517355">}</span><br>
<span class="lineno"></span><span class="op" id="6517357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="comment" id="6517360">//&nbsp;See&nbsp;http://code.google.com/p/go/issues/detail?id=2508</span><br>
<span class="lineno"></span><span class="keyword" id="6517417">func</span>&nbsp;<span class="ident" id="6517422">TestRegression2508</span><span class="op" id="6517440">(</span><span class="ident" id="6517441">t</span>&nbsp;<span class="op" id="6517443">*</span><span class="ident" id="6517444"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6517451">.</span><span class="ident" id="6517452">T</span><span class="op" id="6517453">)</span>&nbsp;<span class="op" id="6517455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517458">if</span>&nbsp;<span class="ident" id="6517461"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6517468">.</span><span class="ident" id="6517469">Short</span><span class="op" id="6517474">(</span><span class="op" id="6517475">)</span>&nbsp;<span class="op" id="6517477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517481"><a href="/compress/flate/deflate_test.go.html#6517441">t</a></span><span class="op" id="6517482">.</span><span class="ident" id="6517483">Logf</span><span class="op" id="6517487">(</span><span class="string" id="6517488">&#34;test&nbsp;disabled&nbsp;with&nbsp;-short&#34;</span><span class="op" id="6517515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517519">return</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517530">w</span><span class="op" id="6517531">,</span>&nbsp;<span class="ident" id="6517533">err</span>&nbsp;<span class="op" id="6517537">:=</span>&nbsp;<span class="ident" id="6517540"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6517549">(</span><span class="ident" id="6517550"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6517556">.</span><span class="ident" id="6517557">Discard</span><span class="op" id="6517564">,</span>&nbsp;<span class="num" id="6517566">1</span><span class="op" id="6517567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517570">if</span>&nbsp;<span class="ident" id="6517573"><a href="/compress/flate/deflate_test.go.html#6517533">err</a></span>&nbsp;<span class="op" id="6517577">!=</span>&nbsp;<span class="ident" id="6517580">nil</span>&nbsp;<span class="op" id="6517584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517588"><a href="/compress/flate/deflate_test.go.html#6517441">t</a></span><span class="op" id="6517589">.</span><span class="ident" id="6517590">Fatalf</span><span class="op" id="6517596">(</span><span class="string" id="6517597">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6517612">,</span>&nbsp;<span class="ident" id="6517614"><a href="/compress/flate/deflate_test.go.html#6517533">err</a></span><span class="op" id="6517617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517620">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517623">buf</span>&nbsp;<span class="op" id="6517627">:=</span>&nbsp;<span class="builtinfunc" id="6517630">make</span><span class="op" id="6517634">(</span><span class="op" id="6517635">[</span><span class="op" id="6517636">]</span><span class="builtintype" id="6517637">byte</span><span class="op" id="6517641">,</span>&nbsp;<span class="num" id="6517643">1024</span><span class="op" id="6517647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517650">for</span>&nbsp;<span class="ident" id="6517654">i</span>&nbsp;<span class="op" id="6517656">:=</span>&nbsp;<span class="num" id="6517659">0</span><span class="op" id="6517660">;</span>&nbsp;<span class="ident" id="6517662"><a href="/compress/flate/deflate_test.go.html#6517654">i</a></span>&nbsp;<span class="op" id="6517664">&lt;</span>&nbsp;<span class="num" id="6517666">131072</span><span class="op" id="6517672">;</span>&nbsp;<span class="ident" id="6517674"><a href="/compress/flate/deflate_test.go.html#6517654">i</a></span><span class="op" id="6517675">++</span>&nbsp;<span class="op" id="6517678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517682">if</span>&nbsp;<span class="ident" id="6517685">_</span><span class="op" id="6517686">,</span>&nbsp;<span class="ident" id="6517688">err</span>&nbsp;<span class="op" id="6517692">:=</span>&nbsp;<span class="ident" id="6517695"><a href="/compress/flate/deflate_test.go.html#6517530">w</a></span><span class="op" id="6517696">.</span><span class="ident" id="6517697">Write</span><span class="op" id="6517702">(</span><span class="ident" id="6517703"><a href="/compress/flate/deflate_test.go.html#6517623">buf</a></span><span class="op" id="6517706">)</span><span class="op" id="6517707">;</span>&nbsp;<span class="ident" id="6517709"><a href="/compress/flate/deflate_test.go.html#6517688">err</a></span>&nbsp;<span class="op" id="6517713">!=</span>&nbsp;<span class="ident" id="6517716">nil</span>&nbsp;<span class="op" id="6517720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517725"><a href="/compress/flate/deflate_test.go.html#6517441">t</a></span><span class="op" id="6517726">.</span><span class="ident" id="6517727">Fatalf</span><span class="op" id="6517733">(</span><span class="string" id="6517734">&#34;writer&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="6517753">,</span>&nbsp;<span class="ident" id="6517755"><a href="/compress/flate/deflate_test.go.html#6517688">err</a></span><span class="op" id="6517758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517762">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517765">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517768"><a href="/compress/flate/deflate_test.go.html#6517530">w</a></span><span class="op" id="6517769">.</span><span class="ident" id="6517770">Close</span><span class="op" id="6517775">(</span><span class="op" id="6517776">)</span><br>
<span class="lineno"></span><span class="op" id="6517778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6517781">func</span>&nbsp;<span class="ident" id="6517786">TestWriterReset</span><span class="op" id="6517801">(</span><span class="ident" id="6517802">t</span>&nbsp;<span class="op" id="6517804">*</span><span class="ident" id="6517805"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6517812">.</span><span class="ident" id="6517813">T</span><span class="op" id="6517814">)</span>&nbsp;<span class="op" id="6517816">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517819">for</span>&nbsp;<span class="ident" id="6517823">level</span>&nbsp;<span class="op" id="6517829">:=</span>&nbsp;<span class="num" id="6517832">0</span><span class="op" id="6517833">;</span>&nbsp;<span class="ident" id="6517835"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span>&nbsp;<span class="op" id="6517841">&lt;=</span>&nbsp;<span class="num" id="6517844">9</span><span class="op" id="6517845">;</span>&nbsp;<span class="ident" id="6517847"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span><span class="op" id="6517852">++</span>&nbsp;<span class="op" id="6517855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517859">if</span>&nbsp;<span class="ident" id="6517862"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6517869">.</span><span class="ident" id="6517870">Short</span><span class="op" id="6517875">(</span><span class="op" id="6517876">)</span>&nbsp;<span class="op" id="6517878">&amp;&amp;</span>&nbsp;<span class="ident" id="6517881"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span>&nbsp;<span class="op" id="6517887">&gt;</span>&nbsp;<span class="num" id="6517889">1</span>&nbsp;<span class="op" id="6517891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517896">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6517904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517908">w</span><span class="op" id="6517909">,</span>&nbsp;<span class="ident" id="6517911">err</span>&nbsp;<span class="op" id="6517915">:=</span>&nbsp;<span class="ident" id="6517918"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6517927">(</span><span class="ident" id="6517928"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6517934">.</span><span class="ident" id="6517935">Discard</span><span class="op" id="6517942">,</span>&nbsp;<span class="ident" id="6517944"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span><span class="op" id="6517949">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6517953">if</span>&nbsp;<span class="ident" id="6517956"><a href="/compress/flate/deflate_test.go.html#6517911">err</a></span>&nbsp;<span class="op" id="6517960">!=</span>&nbsp;<span class="ident" id="6517963">nil</span>&nbsp;<span class="op" id="6517967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6517972"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6517973">.</span><span class="ident" id="6517974">Fatalf</span><span class="op" id="6517980">(</span><span class="string" id="6517981">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6517996">,</span>&nbsp;<span class="ident" id="6517998"><a href="/compress/flate/deflate_test.go.html#6517911">err</a></span><span class="op" id="6518001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6518005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518009">buf</span>&nbsp;<span class="op" id="6518013">:=</span>&nbsp;<span class="op" id="6518016">[</span><span class="op" id="6518017">]</span><span class="builtintype" id="6518018">byte</span><span class="op" id="6518022">(</span><span class="string" id="6518023">&#34;hello&nbsp;world&#34;</span><span class="op" id="6518036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6518040">for</span>&nbsp;<span class="ident" id="6518044">i</span>&nbsp;<span class="op" id="6518046">:=</span>&nbsp;<span class="num" id="6518049">0</span><span class="op" id="6518050">;</span>&nbsp;<span class="ident" id="6518052"><a href="/compress/flate/deflate_test.go.html#6518044">i</a></span>&nbsp;<span class="op" id="6518054">&lt;</span>&nbsp;<span class="num" id="6518056">1024</span><span class="op" id="6518060">;</span>&nbsp;<span class="ident" id="6518062"><a href="/compress/flate/deflate_test.go.html#6518044">i</a></span><span class="op" id="6518063">++</span>&nbsp;<span class="op" id="6518066">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518071"><a href="/compress/flate/deflate_test.go.html#6517908">w</a></span><span class="op" id="6518072">.</span><span class="ident" id="6518073">Write</span><span class="op" id="6518078">(</span><span class="ident" id="6518079"><a href="/compress/flate/deflate_test.go.html#6518009">buf</a></span><span class="op" id="6518082">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6518086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518090"><a href="/compress/flate/deflate_test.go.html#6517908">w</a></span><span class="op" id="6518091">.</span><span class="ident" id="6518092">Reset</span><span class="op" id="6518097">(</span><span class="ident" id="6518098"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6518104">.</span><span class="ident" id="6518105">Discard</span><span class="op" id="6518112">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518117">wref</span><span class="op" id="6518121">,</span>&nbsp;<span class="ident" id="6518123"><a href="/compress/flate/deflate_test.go.html#6517911">err</a></span>&nbsp;<span class="op" id="6518127">:=</span>&nbsp;<span class="ident" id="6518130"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6518139">(</span><span class="ident" id="6518140"><a href="/compress/flate/deflate_test.go.html#6508075">ioutil</a></span><span class="op" id="6518146">.</span><span class="ident" id="6518147">Discard</span><span class="op" id="6518154">,</span>&nbsp;<span class="ident" id="6518156"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span><span class="op" id="6518161">)</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6518165">if</span>&nbsp;<span class="ident" id="6518168"><a href="/compress/flate/deflate_test.go.html#6517911">err</a></span>&nbsp;<span class="op" id="6518172">!=</span>&nbsp;<span class="ident" id="6518175">nil</span>&nbsp;<span class="op" id="6518179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518184"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518185">.</span><span class="ident" id="6518186">Fatalf</span><span class="op" id="6518192">(</span><span class="string" id="6518193">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6518208">,</span>&nbsp;<span class="ident" id="6518210"><a href="/compress/flate/deflate_test.go.html#6517911">err</a></span><span class="op" id="6518213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6518217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6518222">//&nbsp;DeepEqual&nbsp;doesn&#39;t&nbsp;compare&nbsp;functions.</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518264"><a href="/compress/flate/deflate_test.go.html#6517908">w</a></span><span class="op" id="6518265">.</span><span class="ident" id="6518266">d</span><span class="op" id="6518267">.</span><span class="ident" id="6518268">fill</span><span class="op" id="6518272">,</span>&nbsp;<span class="ident" id="6518274"><a href="/compress/flate/deflate_test.go.html#6518117">wref</a></span><span class="op" id="6518278">.</span><span class="ident" id="6518279">d</span><span class="op" id="6518280">.</span><span class="ident" id="6518281">fill</span>&nbsp;<span class="op" id="6518286">=</span>&nbsp;<span class="ident" id="6518288">nil</span><span class="op" id="6518291">,</span>&nbsp;<span class="ident" id="6518293">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518299"><a href="/compress/flate/deflate_test.go.html#6517908">w</a></span><span class="op" id="6518300">.</span><span class="ident" id="6518301">d</span><span class="op" id="6518302">.</span><span class="ident" id="6518303">step</span><span class="op" id="6518307">,</span>&nbsp;<span class="ident" id="6518309"><a href="/compress/flate/deflate_test.go.html#6518117">wref</a></span><span class="op" id="6518313">.</span><span class="ident" id="6518314">d</span><span class="op" id="6518315">.</span><span class="ident" id="6518316">step</span>&nbsp;<span class="op" id="6518321">=</span>&nbsp;<span class="ident" id="6518323">nil</span><span class="op" id="6518326">,</span>&nbsp;<span class="ident" id="6518328">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6518334">if</span>&nbsp;<span class="op" id="6518337">!</span><span class="ident" id="6518338"><a href="/compress/flate/deflate_test.go.html#6508088">reflect</a></span><span class="op" id="6518345">.</span><span class="ident" id="6518346">DeepEqual</span><span class="op" id="6518355">(</span><span class="ident" id="6518356"><a href="/compress/flate/deflate_test.go.html#6517908">w</a></span><span class="op" id="6518357">,</span>&nbsp;<span class="ident" id="6518359"><a href="/compress/flate/deflate_test.go.html#6518117">wref</a></span><span class="op" id="6518363">)</span>&nbsp;<span class="op" id="6518365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518370"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518371">.</span><span class="ident" id="6518372">Errorf</span><span class="op" id="6518378">(</span><span class="string" id="6518379">&#34;level&nbsp;%d&nbsp;Writer&nbsp;not&nbsp;reset&nbsp;after&nbsp;Reset&#34;</span><span class="op" id="6518418">,</span>&nbsp;<span class="ident" id="6518420"><a href="/compress/flate/deflate_test.go.html#6517823">level</a></span><span class="op" id="6518425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6518429">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6518432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518435"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518450">(</span><span class="ident" id="6518451"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518452">,</span>&nbsp;<span class="keyword" id="6518454">func</span><span class="op" id="6518458">(</span><span class="ident" id="6518459">w</span>&nbsp;<span class="ident" id="6518461"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6518463">.</span><span class="ident" id="6518464">Writer</span><span class="op" id="6518470">)</span>&nbsp;<span class="op" id="6518472">(</span><span class="op" id="6518473">*</span><span class="ident" id="6518474"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6518480">,</span>&nbsp;<span class="builtintype" id="6518482">error</span><span class="op" id="6518487">)</span>&nbsp;<span class="op" id="6518489">{</span>&nbsp;<span class="keyword" id="6518491">return</span>&nbsp;<span class="ident" id="6518498"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6518507">(</span><span class="ident" id="6518508"><a href="/compress/flate/deflate_test.go.html#6518459">w</a></span><span class="op" id="6518509">,</span>&nbsp;<span class="ident" id="6518511"><a href="/compress/flate/deflate.go.html#4552445">NoCompression</a></span><span class="op" id="6518524">)</span>&nbsp;<span class="op" id="6518526">}</span><span class="op" id="6518527">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518530"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518545">(</span><span class="ident" id="6518546"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518547">,</span>&nbsp;<span class="keyword" id="6518549">func</span><span class="op" id="6518553">(</span><span class="ident" id="6518554">w</span>&nbsp;<span class="ident" id="6518556"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6518558">.</span><span class="ident" id="6518559">Writer</span><span class="op" id="6518565">)</span>&nbsp;<span class="op" id="6518567">(</span><span class="op" id="6518568">*</span><span class="ident" id="6518569"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6518575">,</span>&nbsp;<span class="builtintype" id="6518577">error</span><span class="op" id="6518582">)</span>&nbsp;<span class="op" id="6518584">{</span>&nbsp;<span class="keyword" id="6518586">return</span>&nbsp;<span class="ident" id="6518593"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6518602">(</span><span class="ident" id="6518603"><a href="/compress/flate/deflate_test.go.html#6518554">w</a></span><span class="op" id="6518604">,</span>&nbsp;<span class="ident" id="6518606"><a href="/compress/flate/deflate.go.html#4552541">DefaultCompression</a></span><span class="op" id="6518624">)</span>&nbsp;<span class="op" id="6518626">}</span><span class="op" id="6518627">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518630"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518645">(</span><span class="ident" id="6518646"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518647">,</span>&nbsp;<span class="keyword" id="6518649">func</span><span class="op" id="6518653">(</span><span class="ident" id="6518654">w</span>&nbsp;<span class="ident" id="6518656"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6518658">.</span><span class="ident" id="6518659">Writer</span><span class="op" id="6518665">)</span>&nbsp;<span class="op" id="6518667">(</span><span class="op" id="6518668">*</span><span class="ident" id="6518669"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6518675">,</span>&nbsp;<span class="builtintype" id="6518677">error</span><span class="op" id="6518682">)</span>&nbsp;<span class="op" id="6518684">{</span>&nbsp;<span class="keyword" id="6518686">return</span>&nbsp;<span class="ident" id="6518693"><a href="/compress/flate/deflate.go.html#4565068">NewWriter</a></span><span class="op" id="6518702">(</span><span class="ident" id="6518703"><a href="/compress/flate/deflate_test.go.html#6518654">w</a></span><span class="op" id="6518704">,</span>&nbsp;<span class="ident" id="6518706"><a href="/compress/flate/deflate.go.html#4552517">BestCompression</a></span><span class="op" id="6518721">)</span>&nbsp;<span class="op" id="6518723">}</span><span class="op" id="6518724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518727">dict</span>&nbsp;<span class="op" id="6518732">:=</span>&nbsp;<span class="op" id="6518735">[</span><span class="op" id="6518736">]</span><span class="builtintype" id="6518737">byte</span><span class="op" id="6518741">(</span><span class="string" id="6518742">&#34;we&nbsp;are&nbsp;the&nbsp;world&#34;</span><span class="op" id="6518760">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518763"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518778">(</span><span class="ident" id="6518779"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518780">,</span>&nbsp;<span class="keyword" id="6518782">func</span><span class="op" id="6518786">(</span><span class="ident" id="6518787">w</span>&nbsp;<span class="ident" id="6518789"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6518791">.</span><span class="ident" id="6518792">Writer</span><span class="op" id="6518798">)</span>&nbsp;<span class="op" id="6518800">(</span><span class="op" id="6518801">*</span><span class="ident" id="6518802"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6518808">,</span>&nbsp;<span class="builtintype" id="6518810">error</span><span class="op" id="6518815">)</span>&nbsp;<span class="op" id="6518817">{</span>&nbsp;<span class="keyword" id="6518819">return</span>&nbsp;<span class="ident" id="6518826"><a href="/compress/flate/deflate.go.html#4565557">NewWriterDict</a></span><span class="op" id="6518839">(</span><span class="ident" id="6518840"><a href="/compress/flate/deflate_test.go.html#6518787">w</a></span><span class="op" id="6518841">,</span>&nbsp;<span class="ident" id="6518843"><a href="/compress/flate/deflate.go.html#4552445">NoCompression</a></span><span class="op" id="6518856">,</span>&nbsp;<span class="ident" id="6518858"><a href="/compress/flate/deflate_test.go.html#6518727">dict</a></span><span class="op" id="6518862">)</span>&nbsp;<span class="op" id="6518864">}</span><span class="op" id="6518865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518868"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518883">(</span><span class="ident" id="6518884"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518885">,</span>&nbsp;<span class="keyword" id="6518887">func</span><span class="op" id="6518891">(</span><span class="ident" id="6518892">w</span>&nbsp;<span class="ident" id="6518894"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6518896">.</span><span class="ident" id="6518897">Writer</span><span class="op" id="6518903">)</span>&nbsp;<span class="op" id="6518905">(</span><span class="op" id="6518906">*</span><span class="ident" id="6518907"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6518913">,</span>&nbsp;<span class="builtintype" id="6518915">error</span><span class="op" id="6518920">)</span>&nbsp;<span class="op" id="6518922">{</span>&nbsp;<span class="keyword" id="6518924">return</span>&nbsp;<span class="ident" id="6518931"><a href="/compress/flate/deflate.go.html#4565557">NewWriterDict</a></span><span class="op" id="6518944">(</span><span class="ident" id="6518945"><a href="/compress/flate/deflate_test.go.html#6518892">w</a></span><span class="op" id="6518946">,</span>&nbsp;<span class="ident" id="6518948"><a href="/compress/flate/deflate.go.html#4552541">DefaultCompression</a></span><span class="op" id="6518966">,</span>&nbsp;<span class="ident" id="6518968"><a href="/compress/flate/deflate_test.go.html#6518727">dict</a></span><span class="op" id="6518972">)</span>&nbsp;<span class="op" id="6518974">}</span><span class="op" id="6518975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6518978"><a href="/compress/flate/deflate_test.go.html#6519092">testResetOutput</a></span><span class="op" id="6518993">(</span><span class="ident" id="6518994"><a href="/compress/flate/deflate_test.go.html#6517802">t</a></span><span class="op" id="6518995">,</span>&nbsp;<span class="keyword" id="6518997">func</span><span class="op" id="6519001">(</span><span class="ident" id="6519002">w</span>&nbsp;<span class="ident" id="6519004"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6519006">.</span><span class="ident" id="6519007">Writer</span><span class="op" id="6519013">)</span>&nbsp;<span class="op" id="6519015">(</span><span class="op" id="6519016">*</span><span class="ident" id="6519017"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6519023">,</span>&nbsp;<span class="builtintype" id="6519025">error</span><span class="op" id="6519030">)</span>&nbsp;<span class="op" id="6519032">{</span>&nbsp;<span class="keyword" id="6519034">return</span>&nbsp;<span class="ident" id="6519041"><a href="/compress/flate/deflate.go.html#4565557">NewWriterDict</a></span><span class="op" id="6519054">(</span><span class="ident" id="6519055"><a href="/compress/flate/deflate_test.go.html#6519002">w</a></span><span class="op" id="6519056">,</span>&nbsp;<span class="ident" id="6519058"><a href="/compress/flate/deflate.go.html#4552517">BestCompression</a></span><span class="op" id="6519073">,</span>&nbsp;<span class="ident" id="6519075"><a href="/compress/flate/deflate_test.go.html#6518727">dict</a></span><span class="op" id="6519079">)</span>&nbsp;<span class="op" id="6519081">}</span><span class="op" id="6519082">)</span><br>
<span class="lineno"></span><span class="op" id="6519084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span><span class="keyword" id="6519087">func</span>&nbsp;<span class="ident" id="6519092">testResetOutput</span><span class="op" id="6519107">(</span><span class="ident" id="6519108">t</span>&nbsp;<span class="op" id="6519110">*</span><span class="ident" id="6519111"><a href="/compress/flate/deflate_test.go.html#6508107">testing</a></span><span class="op" id="6519118">.</span><span class="ident" id="6519119">T</span><span class="op" id="6519120">,</span>&nbsp;<span class="ident" id="6519122">newWriter</span>&nbsp;<span class="keyword" id="6519132">func</span><span class="op" id="6519136">(</span><span class="ident" id="6519137">w</span>&nbsp;<span class="ident" id="6519139"><a href="/compress/flate/deflate_test.go.html#6508069">io</a></span><span class="op" id="6519141">.</span><span class="ident" id="6519142">Writer</span><span class="op" id="6519148">)</span>&nbsp;<span class="op" id="6519150">(</span><span class="op" id="6519151">*</span><span class="ident" id="6519152"><a href="/compress/flate/deflate.go.html#4566184">Writer</a></span><span class="op" id="6519158">,</span>&nbsp;<span class="builtintype" id="6519160">error</span><span class="op" id="6519165">)</span><span class="op" id="6519166">)</span>&nbsp;<span class="op" id="6519168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519171">buf</span>&nbsp;<span class="op" id="6519175">:=</span>&nbsp;<span class="builtinfunc" id="6519178">new</span><span class="op" id="6519181">(</span><span class="ident" id="6519182"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6519187">.</span><span class="ident" id="6519188">Buffer</span><span class="op" id="6519194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519197">w</span><span class="op" id="6519198">,</span>&nbsp;<span class="ident" id="6519200">err</span>&nbsp;<span class="op" id="6519204">:=</span>&nbsp;<span class="ident" id="6519207"><a href="/compress/flate/deflate_test.go.html#6519122">newWriter</a></span><span class="op" id="6519216">(</span><span class="ident" id="6519217"><a href="/compress/flate/deflate_test.go.html#6519171">buf</a></span><span class="op" id="6519220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6519223">if</span>&nbsp;<span class="ident" id="6519226"><a href="/compress/flate/deflate_test.go.html#6519200">err</a></span>&nbsp;<span class="op" id="6519230">!=</span>&nbsp;<span class="ident" id="6519233">nil</span>&nbsp;<span class="op" id="6519237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519241"><a href="/compress/flate/deflate_test.go.html#6519108">t</a></span><span class="op" id="6519242">.</span><span class="ident" id="6519243">Fatalf</span><span class="op" id="6519249">(</span><span class="string" id="6519250">&#34;NewWriter:&nbsp;%v&#34;</span><span class="op" id="6519265">,</span>&nbsp;<span class="ident" id="6519267"><a href="/compress/flate/deflate_test.go.html#6519200">err</a></span><span class="op" id="6519270">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6519273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519276">b</span>&nbsp;<span class="op" id="6519278">:=</span>&nbsp;<span class="op" id="6519281">[</span><span class="op" id="6519282">]</span><span class="builtintype" id="6519283">byte</span><span class="op" id="6519287">(</span><span class="string" id="6519288">&#34;hello&nbsp;world&#34;</span><span class="op" id="6519301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6519304">for</span>&nbsp;<span class="ident" id="6519308">i</span>&nbsp;<span class="op" id="6519310">:=</span>&nbsp;<span class="num" id="6519313">0</span><span class="op" id="6519314">;</span>&nbsp;<span class="ident" id="6519316"><a href="/compress/flate/deflate_test.go.html#6519308">i</a></span>&nbsp;<span class="op" id="6519318">&lt;</span>&nbsp;<span class="num" id="6519320">1024</span><span class="op" id="6519324">;</span>&nbsp;<span class="ident" id="6519326"><a href="/compress/flate/deflate_test.go.html#6519308">i</a></span><span class="op" id="6519327">++</span>&nbsp;<span class="op" id="6519330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519334"><a href="/compress/flate/deflate_test.go.html#6519197">w</a></span><span class="op" id="6519335">.</span><span class="ident" id="6519336">Write</span><span class="op" id="6519341">(</span><span class="ident" id="6519342"><a href="/compress/flate/deflate_test.go.html#6519276">b</a></span><span class="op" id="6519343">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6519346">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519349"><a href="/compress/flate/deflate_test.go.html#6519197">w</a></span><span class="op" id="6519350">.</span><span class="ident" id="6519351">Close</span><span class="op" id="6519356">(</span><span class="op" id="6519357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519360">out1</span>&nbsp;<span class="op" id="6519365">:=</span>&nbsp;<span class="ident" id="6519368"><a href="/compress/flate/deflate_test.go.html#6519171">buf</a></span><span class="op" id="6519371">.</span><span class="ident" id="6519372">String</span><span class="op" id="6519378">(</span><span class="op" id="6519379">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519383">buf2</span>&nbsp;<span class="op" id="6519388">:=</span>&nbsp;<span class="builtinfunc" id="6519391">new</span><span class="op" id="6519394">(</span><span class="ident" id="6519395"><a href="/compress/flate/deflate_test.go.html#6508053">bytes</a></span><span class="op" id="6519400">.</span><span class="ident" id="6519401">Buffer</span><span class="op" id="6519407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519410"><a href="/compress/flate/deflate_test.go.html#6519197">w</a></span><span class="op" id="6519411">.</span><span class="ident" id="6519412">Reset</span><span class="op" id="6519417">(</span><span class="ident" id="6519418"><a href="/compress/flate/deflate_test.go.html#6519383">buf2</a></span><span class="op" id="6519422">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6519425">for</span>&nbsp;<span class="ident" id="6519429">i</span>&nbsp;<span class="op" id="6519431">:=</span>&nbsp;<span class="num" id="6519434">0</span><span class="op" id="6519435">;</span>&nbsp;<span class="ident" id="6519437"><a href="/compress/flate/deflate_test.go.html#6519429">i</a></span>&nbsp;<span class="op" id="6519439">&lt;</span>&nbsp;<span class="num" id="6519441">1024</span><span class="op" id="6519445">;</span>&nbsp;<span class="ident" id="6519447"><a href="/compress/flate/deflate_test.go.html#6519429">i</a></span><span class="op" id="6519448">++</span>&nbsp;<span class="op" id="6519451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519455"><a href="/compress/flate/deflate_test.go.html#6519197">w</a></span><span class="op" id="6519456">.</span><span class="ident" id="6519457">Write</span><span class="op" id="6519462">(</span><span class="ident" id="6519463"><a href="/compress/flate/deflate_test.go.html#6519276">b</a></span><span class="op" id="6519464">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6519467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519470"><a href="/compress/flate/deflate_test.go.html#6519197">w</a></span><span class="op" id="6519471">.</span><span class="ident" id="6519472">Close</span><span class="op" id="6519477">(</span><span class="op" id="6519478">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519481">out2</span>&nbsp;<span class="op" id="6519486">:=</span>&nbsp;<span class="ident" id="6519489"><a href="/compress/flate/deflate_test.go.html#6519383">buf2</a></span><span class="op" id="6519493">.</span><span class="ident" id="6519494">String</span><span class="op" id="6519500">(</span><span class="op" id="6519501">)</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6519505">if</span>&nbsp;<span class="ident" id="6519508"><a href="/compress/flate/deflate_test.go.html#6519360">out1</a></span>&nbsp;<span class="op" id="6519513">!=</span>&nbsp;<span class="ident" id="6519516"><a href="/compress/flate/deflate_test.go.html#6519481">out2</a></span>&nbsp;<span class="op" id="6519521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519525"><a href="/compress/flate/deflate_test.go.html#6519108">t</a></span><span class="op" id="6519526">.</span><span class="ident" id="6519527">Errorf</span><span class="op" id="6519533">(</span><span class="string" id="6519534">&#34;got&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6519555">,</span>&nbsp;<span class="ident" id="6519557"><a href="/compress/flate/deflate_test.go.html#6519481">out2</a></span><span class="op" id="6519561">,</span>&nbsp;<span class="ident" id="6519563"><a href="/compress/flate/deflate_test.go.html#6519360">out1</a></span><span class="op" id="6519567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6519570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6519573"><a href="/compress/flate/deflate_test.go.html#6519108">t</a></span><span class="op" id="6519574">.</span><span class="ident" id="6519575">Logf</span><span class="op" id="6519579">(</span><span class="string" id="6519580">&#34;got&nbsp;%d&nbsp;bytes&#34;</span><span class="op" id="6519594">,</span>&nbsp;<span class="builtinfunc" id="6519596">len</span><span class="op" id="6519599">(</span><span class="ident" id="6519600"><a href="/compress/flate/deflate_test.go.html#6519360">out1</a></span><span class="op" id="6519604">)</span><span class="op" id="6519605">)</span><br>
<span class="lineno">490</span><span class="op" id="6519607">}</span>
</div>
</body>
</html>
