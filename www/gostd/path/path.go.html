<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>path</h2>
<ul>
<li><a href="/gostd/path/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/path/match.go.html">match.go</a></li>
<li><a href="/gostd/path/match_test.go.html">match_test.go</a></li>
<li><a href="/gostd/path/path.go.html" class="current">path.go</a></li>
<li><a href="/gostd/path/path_test.go.html">path_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3920176">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3920231">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3920285">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3920336">//&nbsp;Package&nbsp;path&nbsp;implements&nbsp;utility&nbsp;routines&nbsp;for&nbsp;manipulating&nbsp;slash-separated</span><br>
<span class="lineno"></span><span class="comment" id="3920413">//&nbsp;paths.</span><br>
<span class="lineno"></span><span class="keyword" id="3920423">package</span>&nbsp;<span class="ident" id="3920431">path</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3920437">import</span>&nbsp;<span class="op" id="3920444">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3920447">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="3920457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3920460">//&nbsp;A&nbsp;lazybuf&nbsp;is&nbsp;a&nbsp;lazily&nbsp;constructed&nbsp;path&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="3920510">//&nbsp;It&nbsp;supports&nbsp;append,&nbsp;reading&nbsp;previously&nbsp;appended&nbsp;bytes,</span><br>
<span class="lineno">15</span><span class="comment" id="3920568">//&nbsp;and&nbsp;retrieving&nbsp;the&nbsp;final&nbsp;string.&nbsp;It&nbsp;does&nbsp;not&nbsp;allocate&nbsp;a&nbsp;buffer</span><br>
<span class="lineno"></span><span class="comment" id="3920634">//&nbsp;to&nbsp;hold&nbsp;the&nbsp;output&nbsp;until&nbsp;that&nbsp;output&nbsp;diverges&nbsp;from&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3920691">type</span>&nbsp;<span class="ident" id="3920696">lazybuf</span>&nbsp;<span class="keyword" id="3920704">struct</span>&nbsp;<span class="op" id="3920711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3920714">s</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3920718">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3920726">buf</span>&nbsp;<span class="op" id="3920730">[</span><span class="op" id="3920731">]</span><span class="builtintype" id="3920732">byte</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3920738">w</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3920742">int</span><br>
<span class="lineno"></span><span class="op" id="3920746">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3920749">func</span>&nbsp;<span class="op" id="3920754">(</span><span class="ident" id="3920755">b</span>&nbsp;<span class="op" id="3920757">*</span><span class="ident" id="3920758"><a href="/gostd/path/path.go.html#3920696">lazybuf</a></span><span class="op" id="3920765">)</span>&nbsp;<span class="ident" id="3920767">index</span><span class="op" id="3920772">(</span><span class="ident" id="3920773">i</span>&nbsp;<span class="builtintype" id="3920775">int</span><span class="op" id="3920778">)</span>&nbsp;<span class="builtintype" id="3920780">byte</span>&nbsp;<span class="op" id="3920785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920788">if</span>&nbsp;<span class="ident" id="3920791"><a href="/gostd/path/path.go.html#3920755">b</a></span><span class="op" id="3920792">.</span><span class="ident" id="3920793"><a href="/gostd/path/path.go.html#3920726">buf</a></span>&nbsp;<span class="op" id="3920797">!=</span>&nbsp;<span class="builtintype" id="3920800">nil</span>&nbsp;<span class="op" id="3920804">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920808">return</span>&nbsp;<span class="ident" id="3920815"><a href="/gostd/path/path.go.html#3920755">b</a></span><span class="op" id="3920816">.</span><span class="ident" id="3920817"><a href="/gostd/path/path.go.html#3920726">buf</a></span><span class="op" id="3920820">[</span><span class="ident" id="3920821"><a href="/gostd/path/path.go.html#3920773">i</a></span><span class="op" id="3920822">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3920825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920828">return</span>&nbsp;<span class="ident" id="3920835"><a href="/gostd/path/path.go.html#3920755">b</a></span><span class="op" id="3920836">.</span><span class="ident" id="3920837"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3920838">[</span><span class="ident" id="3920839"><a href="/gostd/path/path.go.html#3920773">i</a></span><span class="op" id="3920840">]</span><br>
<span class="lineno"></span><span class="op" id="3920842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="3920845">func</span>&nbsp;<span class="op" id="3920850">(</span><span class="ident" id="3920851">b</span>&nbsp;<span class="op" id="3920853">*</span><span class="ident" id="3920854"><a href="/gostd/path/path.go.html#3920696">lazybuf</a></span><span class="op" id="3920861">)</span>&nbsp;<span class="builtinfunc" id="3920863">append</span><span class="op" id="3920869">(</span><span class="ident" id="3920870">c</span>&nbsp;<span class="builtintype" id="3920872">byte</span><span class="op" id="3920876">)</span>&nbsp;<span class="op" id="3920878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920881">if</span>&nbsp;<span class="ident" id="3920884"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920885">.</span><span class="ident" id="3920886"><a href="/gostd/path/path.go.html#3920726">buf</a></span>&nbsp;<span class="op" id="3920890">==</span>&nbsp;<span class="builtintype" id="3920893">nil</span>&nbsp;<span class="op" id="3920897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920901">if</span>&nbsp;<span class="ident" id="3920904"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920905">.</span><span class="ident" id="3920906"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3920908">&lt;</span>&nbsp;<span class="builtinfunc" id="3920910">len</span><span class="op" id="3920913">(</span><span class="ident" id="3920914"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920915">.</span><span class="ident" id="3920916"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3920917">)</span>&nbsp;<span class="op" id="3920919">&amp;&amp;</span>&nbsp;<span class="ident" id="3920922"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920923">.</span><span class="ident" id="3920924"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3920925">[</span><span class="ident" id="3920926"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920927">.</span><span class="ident" id="3920928"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3920929">]</span>&nbsp;<span class="op" id="3920931">==</span>&nbsp;<span class="ident" id="3920934"><a href="/gostd/path/path.go.html#3920870">c</a></span>&nbsp;<span class="op" id="3920936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3920941"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920942">.</span><span class="ident" id="3920943"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3920944">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3920950">return</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3920959">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3920963"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920964">.</span><span class="ident" id="3920965"><a href="/gostd/path/path.go.html#3920726">buf</a></span>&nbsp;<span class="op" id="3920969">=</span>&nbsp;<span class="builtinfunc" id="3920971">make</span><span class="op" id="3920975">(</span><span class="op" id="3920976">[</span><span class="op" id="3920977">]</span><span class="builtintype" id="3920978">byte</span><span class="op" id="3920982">,</span>&nbsp;<span class="builtinfunc" id="3920984">len</span><span class="op" id="3920987">(</span><span class="ident" id="3920988"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3920989">.</span><span class="ident" id="3920990"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3920991">)</span><span class="op" id="3920992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3920996">copy</span><span class="op" id="3921000">(</span><span class="ident" id="3921001"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921002">.</span><span class="ident" id="3921003"><a href="/gostd/path/path.go.html#3920726">buf</a></span><span class="op" id="3921006">,</span>&nbsp;<span class="ident" id="3921008"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921009">.</span><span class="ident" id="3921010"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3921011">[</span><span class="op" id="3921012">:</span><span class="ident" id="3921013"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921014">.</span><span class="ident" id="3921015"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3921016">]</span><span class="op" id="3921017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3921020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3921023"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921024">.</span><span class="ident" id="3921025"><a href="/gostd/path/path.go.html#3920726">buf</a></span><span class="op" id="3921028">[</span><span class="ident" id="3921029"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921030">.</span><span class="ident" id="3921031"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3921032">]</span>&nbsp;<span class="op" id="3921034">=</span>&nbsp;<span class="ident" id="3921036"><a href="/gostd/path/path.go.html#3920870">c</a></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3921039"><a href="/gostd/path/path.go.html#3920851">b</a></span><span class="op" id="3921040">.</span><span class="ident" id="3921041"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3921042">++</span><br>
<span class="lineno"></span><span class="op" id="3921045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3921048">func</span>&nbsp;<span class="op" id="3921053">(</span><span class="ident" id="3921054">b</span>&nbsp;<span class="op" id="3921056">*</span><span class="ident" id="3921057"><a href="/gostd/path/path.go.html#3920696">lazybuf</a></span><span class="op" id="3921064">)</span>&nbsp;<span class="builtintype" id="3921066">string</span><span class="op" id="3921072">(</span><span class="op" id="3921073">)</span>&nbsp;<span class="builtintype" id="3921075">string</span>&nbsp;<span class="op" id="3921082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3921085">if</span>&nbsp;<span class="ident" id="3921088"><a href="/gostd/path/path.go.html#3921054">b</a></span><span class="op" id="3921089">.</span><span class="ident" id="3921090"><a href="/gostd/path/path.go.html#3920726">buf</a></span>&nbsp;<span class="op" id="3921094">==</span>&nbsp;<span class="builtintype" id="3921097">nil</span>&nbsp;<span class="op" id="3921101">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3921105">return</span>&nbsp;<span class="ident" id="3921112"><a href="/gostd/path/path.go.html#3921054">b</a></span><span class="op" id="3921113">.</span><span class="ident" id="3921114"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3921115">[</span><span class="op" id="3921116">:</span><span class="ident" id="3921117"><a href="/gostd/path/path.go.html#3921054">b</a></span><span class="op" id="3921118">.</span><span class="ident" id="3921119"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3921120">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3921123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3921126">return</span>&nbsp;<span class="builtintype" id="3921133">string</span><span class="op" id="3921139">(</span><span class="ident" id="3921140"><a href="/gostd/path/path.go.html#3921054">b</a></span><span class="op" id="3921141">.</span><span class="ident" id="3921142"><a href="/gostd/path/path.go.html#3920726">buf</a></span><span class="op" id="3921145">[</span><span class="op" id="3921146">:</span><span class="ident" id="3921147"><a href="/gostd/path/path.go.html#3921054">b</a></span><span class="op" id="3921148">.</span><span class="ident" id="3921149"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3921150">]</span><span class="op" id="3921151">)</span><br>
<span class="lineno"></span><span class="op" id="3921153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="3921156">//&nbsp;Clean&nbsp;returns&nbsp;the&nbsp;shortest&nbsp;path&nbsp;name&nbsp;equivalent&nbsp;to&nbsp;path</span><br>
<span class="lineno"></span><span class="comment" id="3921215">//&nbsp;by&nbsp;purely&nbsp;lexical&nbsp;processing.&nbsp;&nbsp;It&nbsp;applies&nbsp;the&nbsp;following&nbsp;rules</span><br>
<span class="lineno"></span><span class="comment" id="3921280">//&nbsp;iteratively&nbsp;until&nbsp;no&nbsp;further&nbsp;processing&nbsp;can&nbsp;be&nbsp;done:</span><br>
<span class="lineno"></span><span class="comment" id="3921336">//</span><br>
<span class="lineno"></span><span class="comment" id="3921339">//&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;Replace&nbsp;multiple&nbsp;slashes&nbsp;with&nbsp;a&nbsp;single&nbsp;slash.</span><br>
<span class="lineno">55</span><span class="comment" id="3921391">//&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;Eliminate&nbsp;each&nbsp;.&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;current&nbsp;directory).</span><br>
<span class="lineno"></span><span class="comment" id="3921457">//&nbsp;&nbsp;&nbsp;&nbsp;3.&nbsp;Eliminate&nbsp;each&nbsp;inner&nbsp;..&nbsp;path&nbsp;name&nbsp;element&nbsp;(the&nbsp;parent&nbsp;directory)</span><br>
<span class="lineno"></span><span class="comment" id="3921528">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;along&nbsp;with&nbsp;the&nbsp;non-..&nbsp;element&nbsp;that&nbsp;precedes&nbsp;it.</span><br>
<span class="lineno"></span><span class="comment" id="3921582">//&nbsp;&nbsp;&nbsp;&nbsp;4.&nbsp;Eliminate&nbsp;..&nbsp;elements&nbsp;that&nbsp;begin&nbsp;a&nbsp;rooted&nbsp;path:</span><br>
<span class="lineno"></span><span class="comment" id="3921636">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;is,&nbsp;replace&nbsp;&#34;/..&#34;&nbsp;by&nbsp;&#34;/&#34;&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;path.</span><br>
<span class="lineno">60</span><span class="comment" id="3921700">//</span><br>
<span class="lineno"></span><span class="comment" id="3921703">//&nbsp;The&nbsp;returned&nbsp;path&nbsp;ends&nbsp;in&nbsp;a&nbsp;slash&nbsp;only&nbsp;if&nbsp;it&nbsp;is&nbsp;the&nbsp;root&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3921768">//</span><br>
<span class="lineno"></span><span class="comment" id="3921771">//&nbsp;If&nbsp;the&nbsp;result&nbsp;of&nbsp;this&nbsp;process&nbsp;is&nbsp;an&nbsp;empty&nbsp;string,&nbsp;Clean</span><br>
<span class="lineno"></span><span class="comment" id="3921830">//&nbsp;returns&nbsp;the&nbsp;string&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">65</span><span class="comment" id="3921857">//</span><br>
<span class="lineno"></span><span class="comment" id="3921860">//&nbsp;See&nbsp;also&nbsp;Rob&nbsp;Pike,&nbsp;``Lexical&nbsp;File&nbsp;Names&nbsp;in&nbsp;Plan&nbsp;9&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="3921916">//&nbsp;Getting&nbsp;Dot-Dot&nbsp;Right,&#39;&#39;</span><br>
<span class="lineno"></span><span class="comment" id="3921944">//&nbsp;http://plan9.bell-labs.com/sys/doc/lexnames.html</span><br>
<span class="lineno"></span><span class="keyword" id="3921996">func</span>&nbsp;<span class="ident" id="3922001">Clean</span><span class="op" id="3922006">(</span><span class="ident" id="3922007">path</span>&nbsp;<span class="builtintype" id="3922012">string</span><span class="op" id="3922018">)</span>&nbsp;<span class="builtintype" id="3922020">string</span>&nbsp;<span class="op" id="3922027">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922030">if</span>&nbsp;<span class="ident" id="3922033"><a href="/gostd/path/path.go.html#3922007">path</a></span>&nbsp;<span class="op" id="3922038">==</span>&nbsp;<span class="string" id="3922041">&#34;&#34;</span>&nbsp;<span class="op" id="3922044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922048">return</span>&nbsp;<span class="string" id="3922055">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3922060">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922064">rooted</span>&nbsp;<span class="op" id="3922071">:=</span>&nbsp;<span class="ident" id="3922074"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922078">[</span><span class="num" id="3922079">0</span><span class="op" id="3922080">]</span>&nbsp;<span class="op" id="3922082">==</span>&nbsp;<span class="string" id="3922085">&#39;/&#39;</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922090">n</span>&nbsp;<span class="op" id="3922092">:=</span>&nbsp;<span class="builtinfunc" id="3922095">len</span><span class="op" id="3922098">(</span><span class="ident" id="3922099"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922103">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922107">//&nbsp;Invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922123">//&nbsp;&nbsp;&nbsp;&nbsp;reading&nbsp;from&nbsp;path;&nbsp;r&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;process.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922182">//&nbsp;&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;buf;&nbsp;w&nbsp;is&nbsp;index&nbsp;of&nbsp;next&nbsp;byte&nbsp;to&nbsp;write.</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922236">//&nbsp;&nbsp;&nbsp;&nbsp;dotdot&nbsp;is&nbsp;index&nbsp;in&nbsp;buf&nbsp;where&nbsp;..&nbsp;must&nbsp;stop,&nbsp;either&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922298">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;is&nbsp;the&nbsp;leading&nbsp;slash&nbsp;or&nbsp;it&nbsp;is&nbsp;a&nbsp;leading&nbsp;../../..&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922363">out</span>&nbsp;<span class="op" id="3922367">:=</span>&nbsp;<span class="ident" id="3922370"><a href="/gostd/path/path.go.html#3920696">lazybuf</a></span><span class="op" id="3922377">{</span><span class="ident" id="3922378"><a href="/gostd/path/path.go.html#3920714">s</a></span><span class="op" id="3922379">:</span>&nbsp;<span class="ident" id="3922381"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922388">r</span><span class="op" id="3922389">,</span>&nbsp;<span class="ident" id="3922391">dotdot</span>&nbsp;<span class="op" id="3922398">:=</span>&nbsp;<span class="num" id="3922401">0</span><span class="op" id="3922402">,</span>&nbsp;<span class="num" id="3922404">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922407">if</span>&nbsp;<span class="ident" id="3922410"><a href="/gostd/path/path.go.html#3922064">rooted</a></span>&nbsp;<span class="op" id="3922417">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922421"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922424">.</span><span class="builtinfunc" id="3922425"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3922431">(</span><span class="string" id="3922432">&#39;/&#39;</span><span class="op" id="3922435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922439"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922440">,</span>&nbsp;<span class="ident" id="3922442"><a href="/gostd/path/path.go.html#3922391">dotdot</a></span>&nbsp;<span class="op" id="3922449">=</span>&nbsp;<span class="num" id="3922451">1</span><span class="op" id="3922452">,</span>&nbsp;<span class="num" id="3922454">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3922457">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922461">for</span>&nbsp;<span class="ident" id="3922465"><a href="/gostd/path/path.go.html#3922388">r</a></span>&nbsp;<span class="op" id="3922467">&lt;</span>&nbsp;<span class="ident" id="3922469"><a href="/gostd/path/path.go.html#3922090">n</a></span>&nbsp;<span class="op" id="3922471">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922475">switch</span>&nbsp;<span class="op" id="3922482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922486">case</span>&nbsp;<span class="ident" id="3922491"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922495">[</span><span class="ident" id="3922496"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922497">]</span>&nbsp;<span class="op" id="3922499">==</span>&nbsp;<span class="string" id="3922502">&#39;/&#39;</span><span class="op" id="3922505">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922510">//&nbsp;empty&nbsp;path&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922535"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922536">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922541">case</span>&nbsp;<span class="ident" id="3922546"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922550">[</span><span class="ident" id="3922551"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922552">]</span>&nbsp;<span class="op" id="3922554">==</span>&nbsp;<span class="string" id="3922557">&#39;.&#39;</span>&nbsp;<span class="op" id="3922561">&amp;&amp;</span>&nbsp;<span class="op" id="3922564">(</span><span class="ident" id="3922565"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922566">+</span><span class="num" id="3922567">1</span>&nbsp;<span class="op" id="3922569">==</span>&nbsp;<span class="ident" id="3922572"><a href="/gostd/path/path.go.html#3922090">n</a></span>&nbsp;<span class="op" id="3922574">||</span>&nbsp;<span class="ident" id="3922577"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922581">[</span><span class="ident" id="3922582"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922583">+</span><span class="num" id="3922584">1</span><span class="op" id="3922585">]</span>&nbsp;<span class="op" id="3922587">==</span>&nbsp;<span class="string" id="3922590">&#39;/&#39;</span><span class="op" id="3922593">)</span><span class="op" id="3922594">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922599">//&nbsp;.&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922615"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922616">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922621">case</span>&nbsp;<span class="ident" id="3922626"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922630">[</span><span class="ident" id="3922631"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922632">]</span>&nbsp;<span class="op" id="3922634">==</span>&nbsp;<span class="string" id="3922637">&#39;.&#39;</span>&nbsp;<span class="op" id="3922641">&amp;&amp;</span>&nbsp;<span class="ident" id="3922644"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922648">[</span><span class="ident" id="3922649"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922650">+</span><span class="num" id="3922651">1</span><span class="op" id="3922652">]</span>&nbsp;<span class="op" id="3922654">==</span>&nbsp;<span class="string" id="3922657">&#39;.&#39;</span>&nbsp;<span class="op" id="3922661">&amp;&amp;</span>&nbsp;<span class="op" id="3922664">(</span><span class="ident" id="3922665"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922666">+</span><span class="num" id="3922667">2</span>&nbsp;<span class="op" id="3922669">==</span>&nbsp;<span class="ident" id="3922672"><a href="/gostd/path/path.go.html#3922090">n</a></span>&nbsp;<span class="op" id="3922674">||</span>&nbsp;<span class="ident" id="3922677"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3922681">[</span><span class="ident" id="3922682"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3922683">+</span><span class="num" id="3922684">2</span><span class="op" id="3922685">]</span>&nbsp;<span class="op" id="3922687">==</span>&nbsp;<span class="string" id="3922690">&#39;/&#39;</span><span class="op" id="3922693">)</span><span class="op" id="3922694">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922699">//&nbsp;..&nbsp;element:&nbsp;remove&nbsp;to&nbsp;last&nbsp;/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922734"><a href="/gostd/path/path.go.html#3922388">r</a></span>&nbsp;<span class="op" id="3922736">+=</span>&nbsp;<span class="num" id="3922739">2</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922744">switch</span>&nbsp;<span class="op" id="3922751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922756">case</span>&nbsp;<span class="ident" id="3922761"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922764">.</span><span class="ident" id="3922765"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3922767">&gt;</span>&nbsp;<span class="ident" id="3922769"><a href="/gostd/path/path.go.html#3922391">dotdot</a></span><span class="op" id="3922775">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922781">//&nbsp;can&nbsp;backtrack</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922802"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922805">.</span><span class="ident" id="3922806"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3922807">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922814">for</span>&nbsp;<span class="ident" id="3922818"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922821">.</span><span class="ident" id="3922822"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3922824">&gt;</span>&nbsp;<span class="ident" id="3922826"><a href="/gostd/path/path.go.html#3922391">dotdot</a></span>&nbsp;<span class="op" id="3922833">&amp;&amp;</span>&nbsp;<span class="ident" id="3922836"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922839">.</span><span class="ident" id="3922840"><a href="/gostd/path/path.go.html#3920767">index</a></span><span class="op" id="3922845">(</span><span class="ident" id="3922846"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922849">.</span><span class="ident" id="3922850"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3922851">)</span>&nbsp;<span class="op" id="3922853">!=</span>&nbsp;<span class="string" id="3922856">&#39;/&#39;</span>&nbsp;<span class="op" id="3922860">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922867"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922870">.</span><span class="ident" id="3922871"><a href="/gostd/path/path.go.html#3920738">w</a></span><span class="op" id="3922872">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3922879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922884">case</span>&nbsp;<span class="op" id="3922889">!</span><span class="ident" id="3922890"><a href="/gostd/path/path.go.html#3922064">rooted</a></span><span class="op" id="3922896">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3922902">//&nbsp;cannot&nbsp;backtrack,&nbsp;but&nbsp;not&nbsp;rooted,&nbsp;so&nbsp;append&nbsp;..&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3922965">if</span>&nbsp;<span class="ident" id="3922968"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922971">.</span><span class="ident" id="3922972"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3922974">&gt;</span>&nbsp;<span class="num" id="3922976">0</span>&nbsp;<span class="op" id="3922978">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3922985"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3922988">.</span><span class="builtinfunc" id="3922989"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3922995">(</span><span class="string" id="3922996">&#39;/&#39;</span><span class="op" id="3922999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923011"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923014">.</span><span class="builtinfunc" id="3923015"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3923021">(</span><span class="string" id="3923022">&#39;.&#39;</span><span class="op" id="3923025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923031"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923034">.</span><span class="builtinfunc" id="3923035"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3923041">(</span><span class="string" id="3923042">&#39;.&#39;</span><span class="op" id="3923045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923051"><a href="/gostd/path/path.go.html#3922391">dotdot</a></span>&nbsp;<span class="op" id="3923058">=</span>&nbsp;<span class="ident" id="3923060"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923063">.</span><span class="ident" id="3923064"><a href="/gostd/path/path.go.html#3920738">w</a></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923069">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923073">default</span><span class="op" id="3923080">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3923085">//&nbsp;real&nbsp;path&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3923110">//&nbsp;add&nbsp;slash&nbsp;if&nbsp;needed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923136">if</span>&nbsp;<span class="ident" id="3923139"><a href="/gostd/path/path.go.html#3922064">rooted</a></span>&nbsp;<span class="op" id="3923146">&amp;&amp;</span>&nbsp;<span class="ident" id="3923149"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923152">.</span><span class="ident" id="3923153"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3923155">!=</span>&nbsp;<span class="num" id="3923158">1</span>&nbsp;<span class="op" id="3923160">||</span>&nbsp;<span class="op" id="3923163">!</span><span class="ident" id="3923164"><a href="/gostd/path/path.go.html#3922064">rooted</a></span>&nbsp;<span class="op" id="3923171">&amp;&amp;</span>&nbsp;<span class="ident" id="3923174"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923177">.</span><span class="ident" id="3923178"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3923180">!=</span>&nbsp;<span class="num" id="3923183">0</span>&nbsp;<span class="op" id="3923185">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923191"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923194">.</span><span class="builtinfunc" id="3923195"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3923201">(</span><span class="string" id="3923202">&#39;/&#39;</span><span class="op" id="3923205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3923215">//&nbsp;copy&nbsp;element</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923234">for</span>&nbsp;<span class="op" id="3923238">;</span>&nbsp;<span class="ident" id="3923240"><a href="/gostd/path/path.go.html#3922388">r</a></span>&nbsp;<span class="op" id="3923242">&lt;</span>&nbsp;<span class="ident" id="3923244"><a href="/gostd/path/path.go.html#3922090">n</a></span>&nbsp;<span class="op" id="3923246">&amp;&amp;</span>&nbsp;<span class="ident" id="3923249"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3923253">[</span><span class="ident" id="3923254"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3923255">]</span>&nbsp;<span class="op" id="3923257">!=</span>&nbsp;<span class="string" id="3923260">&#39;/&#39;</span><span class="op" id="3923263">;</span>&nbsp;<span class="ident" id="3923265"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3923266">++</span>&nbsp;<span class="op" id="3923269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923275"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923278">.</span><span class="builtinfunc" id="3923279"><a href="/gostd/path/path.go.html#3920863">append</a></span><span class="op" id="3923285">(</span><span class="ident" id="3923286"><a href="/gostd/path/path.go.html#3922007">path</a></span><span class="op" id="3923290">[</span><span class="ident" id="3923291"><a href="/gostd/path/path.go.html#3922388">r</a></span><span class="op" id="3923292">]</span><span class="op" id="3923293">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923302">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3923309">//&nbsp;Turn&nbsp;empty&nbsp;string&nbsp;into&nbsp;&#34;.&#34;</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923340">if</span>&nbsp;<span class="ident" id="3923343"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923346">.</span><span class="ident" id="3923347"><a href="/gostd/path/path.go.html#3920738">w</a></span>&nbsp;<span class="op" id="3923349">==</span>&nbsp;<span class="num" id="3923352">0</span>&nbsp;<span class="op" id="3923354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923358">return</span>&nbsp;<span class="string" id="3923365">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3923370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923374">return</span>&nbsp;<span class="ident" id="3923381"><a href="/gostd/path/path.go.html#3922363">out</a></span><span class="op" id="3923384">.</span><span class="builtintype" id="3923385"><a href="/gostd/path/path.go.html#3921066">string</a></span><span class="op" id="3923391">(</span><span class="op" id="3923392">)</span><br>
<span class="lineno">135</span><span class="op" id="3923394">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3923397">//&nbsp;Split&nbsp;splits&nbsp;path&nbsp;immediately&nbsp;following&nbsp;the&nbsp;final&nbsp;slash.</span><br>
<span class="lineno"></span><span class="comment" id="3923457">//&nbsp;separating&nbsp;it&nbsp;into&nbsp;a&nbsp;directory&nbsp;and&nbsp;file&nbsp;name&nbsp;component.</span><br>
<span class="lineno"></span><span class="comment" id="3923516">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;slash&nbsp;path,&nbsp;Split&nbsp;returns&nbsp;an&nbsp;empty&nbsp;dir&nbsp;and</span><br>
<span class="lineno">140</span><span class="comment" id="3923577">//&nbsp;file&nbsp;set&nbsp;to&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3923598">//&nbsp;The&nbsp;returned&nbsp;values&nbsp;have&nbsp;the&nbsp;property&nbsp;that&nbsp;path&nbsp;=&nbsp;dir+file.</span><br>
<span class="lineno"></span><span class="keyword" id="3923661">func</span>&nbsp;<span class="ident" id="3923666">Split</span><span class="op" id="3923671">(</span><span class="ident" id="3923672">path</span>&nbsp;<span class="builtintype" id="3923677">string</span><span class="op" id="3923683">)</span>&nbsp;<span class="op" id="3923685">(</span><span class="ident" id="3923686">dir</span><span class="op" id="3923689">,</span>&nbsp;<span class="ident" id="3923691">file</span>&nbsp;<span class="builtintype" id="3923696">string</span><span class="op" id="3923702">)</span>&nbsp;<span class="op" id="3923704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3923707">i</span>&nbsp;<span class="op" id="3923709">:=</span>&nbsp;<span class="ident" id="3923712"><a href="/gostd/path/path.go.html#3920447">strings</a></span><span class="op" id="3923719">.</span><span class="ident" id="3923720"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="3923729">(</span><span class="ident" id="3923730"><a href="/gostd/path/path.go.html#3923672">path</a></span><span class="op" id="3923734">,</span>&nbsp;<span class="string" id="3923736">&#34;/&#34;</span><span class="op" id="3923739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923742">return</span>&nbsp;<span class="ident" id="3923749"><a href="/gostd/path/path.go.html#3923672">path</a></span><span class="op" id="3923753">[</span><span class="op" id="3923754">:</span><span class="ident" id="3923755"><a href="/gostd/path/path.go.html#3923707">i</a></span><span class="op" id="3923756">+</span><span class="num" id="3923757">1</span><span class="op" id="3923758">]</span><span class="op" id="3923759">,</span>&nbsp;<span class="ident" id="3923761"><a href="/gostd/path/path.go.html#3923672">path</a></span><span class="op" id="3923765">[</span><span class="ident" id="3923766"><a href="/gostd/path/path.go.html#3923707">i</a></span><span class="op" id="3923767">+</span><span class="num" id="3923768">1</span><span class="op" id="3923769">:</span><span class="op" id="3923770">]</span><br>
<span class="lineno">145</span><span class="op" id="3923772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3923775">//&nbsp;Join&nbsp;joins&nbsp;any&nbsp;number&nbsp;of&nbsp;path&nbsp;elements&nbsp;into&nbsp;a&nbsp;single&nbsp;path,&nbsp;adding&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3923846">//&nbsp;separating&nbsp;slash&nbsp;if&nbsp;necessary.&nbsp;The&nbsp;result&nbsp;is&nbsp;Cleaned;&nbsp;in&nbsp;particular,</span><br>
<span class="lineno"></span><span class="comment" id="3923918">//&nbsp;all&nbsp;empty&nbsp;strings&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno">150</span><span class="keyword" id="3923952">func</span>&nbsp;<span class="ident" id="3923957">Join</span><span class="op" id="3923961">(</span><span class="ident" id="3923962">elem</span>&nbsp;<span class="op" id="3923967">...</span><span class="builtintype" id="3923970">string</span><span class="op" id="3923976">)</span>&nbsp;<span class="builtintype" id="3923978">string</span>&nbsp;<span class="op" id="3923985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3923988">for</span>&nbsp;<span class="ident" id="3923992">i</span><span class="op" id="3923993">,</span>&nbsp;<span class="ident" id="3923995">e</span>&nbsp;<span class="op" id="3923997">:=</span>&nbsp;<span class="keyword" id="3924000">range</span>&nbsp;<span class="ident" id="3924006"><a href="/gostd/path/path.go.html#3923962">elem</a></span>&nbsp;<span class="op" id="3924011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924015">if</span>&nbsp;<span class="ident" id="3924018"><a href="/gostd/path/path.go.html#3923995">e</a></span>&nbsp;<span class="op" id="3924020">!=</span>&nbsp;<span class="string" id="3924023">&#34;&#34;</span>&nbsp;<span class="op" id="3924026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924031">return</span>&nbsp;<span class="ident" id="3924038"><a href="/gostd/path/path.go.html#3922001">Clean</a></span><span class="op" id="3924043">(</span><span class="ident" id="3924044"><a href="/gostd/path/path.go.html#3920447">strings</a></span><span class="op" id="3924051">.</span><span class="ident" id="3924052"><a href="/gostd/strings/strings.go.html#2974969">Join</a></span><span class="op" id="3924056">(</span><span class="ident" id="3924057"><a href="/gostd/path/path.go.html#3923962">elem</a></span><span class="op" id="3924061">[</span><span class="ident" id="3924062"><a href="/gostd/path/path.go.html#3923992">i</a></span><span class="op" id="3924063">:</span><span class="op" id="3924064">]</span><span class="op" id="3924065">,</span>&nbsp;<span class="string" id="3924067">&#34;/&#34;</span><span class="op" id="3924070">)</span><span class="op" id="3924071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924075">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924081">return</span>&nbsp;<span class="string" id="3924088">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3924091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3924094">//&nbsp;Ext&nbsp;returns&nbsp;the&nbsp;file&nbsp;name&nbsp;extension&nbsp;used&nbsp;by&nbsp;path.</span><br>
<span class="lineno">160</span><span class="comment" id="3924147">//&nbsp;The&nbsp;extension&nbsp;is&nbsp;the&nbsp;suffix&nbsp;beginning&nbsp;at&nbsp;the&nbsp;final&nbsp;dot</span><br>
<span class="lineno"></span><span class="comment" id="3924205">//&nbsp;in&nbsp;the&nbsp;final&nbsp;slash-separated&nbsp;element&nbsp;of&nbsp;path;</span><br>
<span class="lineno"></span><span class="comment" id="3924254">//&nbsp;it&nbsp;is&nbsp;empty&nbsp;if&nbsp;there&nbsp;is&nbsp;no&nbsp;dot.</span><br>
<span class="lineno"></span><span class="keyword" id="3924289">func</span>&nbsp;<span class="ident" id="3924294">Ext</span><span class="op" id="3924297">(</span><span class="ident" id="3924298">path</span>&nbsp;<span class="builtintype" id="3924303">string</span><span class="op" id="3924309">)</span>&nbsp;<span class="builtintype" id="3924311">string</span>&nbsp;<span class="op" id="3924318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924321">for</span>&nbsp;<span class="ident" id="3924325">i</span>&nbsp;<span class="op" id="3924327">:=</span>&nbsp;<span class="builtinfunc" id="3924330">len</span><span class="op" id="3924333">(</span><span class="ident" id="3924334"><a href="/gostd/path/path.go.html#3924298">path</a></span><span class="op" id="3924338">)</span>&nbsp;<span class="op" id="3924340">-</span>&nbsp;<span class="num" id="3924342">1</span><span class="op" id="3924343">;</span>&nbsp;<span class="ident" id="3924345"><a href="/gostd/path/path.go.html#3924325">i</a></span>&nbsp;<span class="op" id="3924347">&gt;=</span>&nbsp;<span class="num" id="3924350">0</span>&nbsp;<span class="op" id="3924352">&amp;&amp;</span>&nbsp;<span class="ident" id="3924355"><a href="/gostd/path/path.go.html#3924298">path</a></span><span class="op" id="3924359">[</span><span class="ident" id="3924360"><a href="/gostd/path/path.go.html#3924325">i</a></span><span class="op" id="3924361">]</span>&nbsp;<span class="op" id="3924363">!=</span>&nbsp;<span class="string" id="3924366">&#39;/&#39;</span><span class="op" id="3924369">;</span>&nbsp;<span class="ident" id="3924371"><a href="/gostd/path/path.go.html#3924325">i</a></span><span class="op" id="3924372">--</span>&nbsp;<span class="op" id="3924375">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924379">if</span>&nbsp;<span class="ident" id="3924382"><a href="/gostd/path/path.go.html#3924298">path</a></span><span class="op" id="3924386">[</span><span class="ident" id="3924387"><a href="/gostd/path/path.go.html#3924325">i</a></span><span class="op" id="3924388">]</span>&nbsp;<span class="op" id="3924390">==</span>&nbsp;<span class="string" id="3924393">&#39;.&#39;</span>&nbsp;<span class="op" id="3924397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924402">return</span>&nbsp;<span class="ident" id="3924409"><a href="/gostd/path/path.go.html#3924298">path</a></span><span class="op" id="3924413">[</span><span class="ident" id="3924414"><a href="/gostd/path/path.go.html#3924325">i</a></span><span class="op" id="3924415">:</span><span class="op" id="3924416">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924426">return</span>&nbsp;<span class="string" id="3924433">&#34;&#34;</span><br>
<span class="lineno">170</span><span class="op" id="3924436">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3924439">//&nbsp;Base&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path.</span><br>
<span class="lineno"></span><span class="comment" id="3924481">//&nbsp;Trailing&nbsp;slashes&nbsp;are&nbsp;removed&nbsp;before&nbsp;extracting&nbsp;the&nbsp;last&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="3924549">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Base&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno">175</span><span class="comment" id="3924592">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes,&nbsp;Base&nbsp;returns&nbsp;&#34;/&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="3924655">func</span>&nbsp;<span class="ident" id="3924660">Base</span><span class="op" id="3924664">(</span><span class="ident" id="3924665">path</span>&nbsp;<span class="builtintype" id="3924670">string</span><span class="op" id="3924676">)</span>&nbsp;<span class="builtintype" id="3924678">string</span>&nbsp;<span class="op" id="3924685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924688">if</span>&nbsp;<span class="ident" id="3924691"><a href="/gostd/path/path.go.html#3924665">path</a></span>&nbsp;<span class="op" id="3924696">==</span>&nbsp;<span class="string" id="3924699">&#34;&#34;</span>&nbsp;<span class="op" id="3924702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924706">return</span>&nbsp;<span class="string" id="3924713">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924718">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3924721">//&nbsp;Strip&nbsp;trailing&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924749">for</span>&nbsp;<span class="builtinfunc" id="3924753">len</span><span class="op" id="3924756">(</span><span class="ident" id="3924757"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924761">)</span>&nbsp;<span class="op" id="3924763">&gt;</span>&nbsp;<span class="num" id="3924765">0</span>&nbsp;<span class="op" id="3924767">&amp;&amp;</span>&nbsp;<span class="ident" id="3924770"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924774">[</span><span class="builtinfunc" id="3924775">len</span><span class="op" id="3924778">(</span><span class="ident" id="3924779"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924783">)</span><span class="op" id="3924784">-</span><span class="num" id="3924785">1</span><span class="op" id="3924786">]</span>&nbsp;<span class="op" id="3924788">==</span>&nbsp;<span class="string" id="3924791">&#39;/&#39;</span>&nbsp;<span class="op" id="3924795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3924799"><a href="/gostd/path/path.go.html#3924665">path</a></span>&nbsp;<span class="op" id="3924804">=</span>&nbsp;<span class="ident" id="3924806"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924810">[</span><span class="num" id="3924811">0</span>&nbsp;<span class="op" id="3924813">:</span>&nbsp;<span class="builtinfunc" id="3924815">len</span><span class="op" id="3924818">(</span><span class="ident" id="3924819"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924823">)</span><span class="op" id="3924824">-</span><span class="num" id="3924825">1</span><span class="op" id="3924826">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3924832">//&nbsp;Find&nbsp;the&nbsp;last&nbsp;element</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924858">if</span>&nbsp;<span class="ident" id="3924861">i</span>&nbsp;<span class="op" id="3924863">:=</span>&nbsp;<span class="ident" id="3924866"><a href="/gostd/path/path.go.html#3920447">strings</a></span><span class="op" id="3924873">.</span><span class="ident" id="3924874"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="3924883">(</span><span class="ident" id="3924884"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924888">,</span>&nbsp;<span class="string" id="3924890">&#34;/&#34;</span><span class="op" id="3924893">)</span><span class="op" id="3924894">;</span>&nbsp;<span class="ident" id="3924896"><a href="/gostd/path/path.go.html#3924861">i</a></span>&nbsp;<span class="op" id="3924898">&gt;=</span>&nbsp;<span class="num" id="3924901">0</span>&nbsp;<span class="op" id="3924903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3924907"><a href="/gostd/path/path.go.html#3924665">path</a></span>&nbsp;<span class="op" id="3924912">=</span>&nbsp;<span class="ident" id="3924914"><a href="/gostd/path/path.go.html#3924665">path</a></span><span class="op" id="3924918">[</span><span class="ident" id="3924919"><a href="/gostd/path/path.go.html#3924861">i</a></span><span class="op" id="3924920">+</span><span class="num" id="3924921">1</span><span class="op" id="3924922">:</span><span class="op" id="3924923">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3924929">//&nbsp;If&nbsp;empty&nbsp;now,&nbsp;it&nbsp;had&nbsp;only&nbsp;slashes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924968">if</span>&nbsp;<span class="ident" id="3924971"><a href="/gostd/path/path.go.html#3924665">path</a></span>&nbsp;<span class="op" id="3924976">==</span>&nbsp;<span class="string" id="3924979">&#34;&#34;</span>&nbsp;<span class="op" id="3924982">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3924986">return</span>&nbsp;<span class="string" id="3924993">&#34;/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3924998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925001">return</span>&nbsp;<span class="ident" id="3925008"><a href="/gostd/path/path.go.html#3924665">path</a></span><br>
<span class="lineno"></span><span class="op" id="3925013">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span><span class="comment" id="3925016">//&nbsp;IsAbs&nbsp;returns&nbsp;true&nbsp;if&nbsp;the&nbsp;path&nbsp;is&nbsp;absolute.</span><br>
<span class="lineno"></span><span class="keyword" id="3925063">func</span>&nbsp;<span class="ident" id="3925068">IsAbs</span><span class="op" id="3925073">(</span><span class="ident" id="3925074">path</span>&nbsp;<span class="builtintype" id="3925079">string</span><span class="op" id="3925085">)</span>&nbsp;<span class="builtintype" id="3925087">bool</span>&nbsp;<span class="op" id="3925092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925095">return</span>&nbsp;<span class="builtinfunc" id="3925102">len</span><span class="op" id="3925105">(</span><span class="ident" id="3925106"><a href="/gostd/path/path.go.html#3925074">path</a></span><span class="op" id="3925110">)</span>&nbsp;<span class="op" id="3925112">&gt;</span>&nbsp;<span class="num" id="3925114">0</span>&nbsp;<span class="op" id="3925116">&amp;&amp;</span>&nbsp;<span class="ident" id="3925119"><a href="/gostd/path/path.go.html#3925074">path</a></span><span class="op" id="3925123">[</span><span class="num" id="3925124">0</span><span class="op" id="3925125">]</span>&nbsp;<span class="op" id="3925127">==</span>&nbsp;<span class="string" id="3925130">&#39;/&#39;</span><br>
<span class="lineno"></span><span class="op" id="3925134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="3925137">//&nbsp;Dir&nbsp;returns&nbsp;all&nbsp;but&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;path,&nbsp;typically&nbsp;the&nbsp;path&#39;s&nbsp;directory.</span><br>
<span class="lineno"></span><span class="comment" id="3925218">//&nbsp;After&nbsp;dropping&nbsp;the&nbsp;final&nbsp;element&nbsp;using&nbsp;Split,&nbsp;the&nbsp;path&nbsp;is&nbsp;Cleaned&nbsp;and&nbsp;trailing</span><br>
<span class="lineno"></span><span class="comment" id="3925300">//&nbsp;slashes&nbsp;are&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="3925324">//&nbsp;If&nbsp;the&nbsp;path&nbsp;is&nbsp;empty,&nbsp;Dir&nbsp;returns&nbsp;&#34;.&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3925366">//&nbsp;If&nbsp;the&nbsp;path&nbsp;consists&nbsp;entirely&nbsp;of&nbsp;slashes&nbsp;followed&nbsp;by&nbsp;non-slash&nbsp;bytes,&nbsp;Dir</span><br>
<span class="lineno">205</span><span class="comment" id="3925443">//&nbsp;returns&nbsp;a&nbsp;single&nbsp;slash.&nbsp;In&nbsp;any&nbsp;other&nbsp;case,&nbsp;the&nbsp;returned&nbsp;path&nbsp;does&nbsp;not&nbsp;end&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="3925525">//&nbsp;slash.</span><br>
<span class="lineno"></span><span class="keyword" id="3925535">func</span>&nbsp;<span class="ident" id="3925540">Dir</span><span class="op" id="3925543">(</span><span class="ident" id="3925544">path</span>&nbsp;<span class="builtintype" id="3925549">string</span><span class="op" id="3925555">)</span>&nbsp;<span class="builtintype" id="3925557">string</span>&nbsp;<span class="op" id="3925564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3925567">dir</span><span class="op" id="3925570">,</span>&nbsp;<span class="ident" id="3925572">_</span>&nbsp;<span class="op" id="3925574">:=</span>&nbsp;<span class="ident" id="3925577"><a href="/gostd/path/path.go.html#3923666">Split</a></span><span class="op" id="3925582">(</span><span class="ident" id="3925583"><a href="/gostd/path/path.go.html#3925544">path</a></span><span class="op" id="3925587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3925590">return</span>&nbsp;<span class="ident" id="3925597"><a href="/gostd/path/path.go.html#3922001">Clean</a></span><span class="op" id="3925602">(</span><span class="ident" id="3925603"><a href="/gostd/path/path.go.html#3925567">dir</a></span><span class="op" id="3925606">)</span><br>
<span class="lineno">210</span><span class="op" id="3925608">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
