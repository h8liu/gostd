<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6550125">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6550180">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6550234">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6550285">package</span>&nbsp;<span class="ident" id="6550293">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6550298">import</span>&nbsp;<span class="op" id="6550305">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6550308">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6550317">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6550328">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6550338">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6550341">type</span>&nbsp;<span class="ident" id="6550346">typeT</span>&nbsp;<span class="keyword" id="6550352">struct</span>&nbsp;<span class="op" id="6550359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550362">id</span>&nbsp;&nbsp;<span class="ident" id="6550366">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550374">str</span>&nbsp;<span class="builtintype" id="6550378">string</span><br>
<span class="lineno"></span><span class="op" id="6550385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6550388">var</span>&nbsp;<span class="ident" id="6550392">basicTypes</span>&nbsp;<span class="op" id="6550403">=</span>&nbsp;<span class="op" id="6550405">[</span><span class="op" id="6550406">]</span><span class="ident" id="6550407">typeT</span><span class="op" id="6550412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550415">{</span><span class="ident" id="6550416">tBool</span><span class="op" id="6550421">,</span>&nbsp;<span class="string" id="6550423">&#34;bool&#34;</span><span class="op" id="6550429">}</span><span class="op" id="6550430">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550433">{</span><span class="ident" id="6550434">tInt</span><span class="op" id="6550438">,</span>&nbsp;<span class="string" id="6550440">&#34;int&#34;</span><span class="op" id="6550445">}</span><span class="op" id="6550446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550449">{</span><span class="ident" id="6550450">tUint</span><span class="op" id="6550455">,</span>&nbsp;<span class="string" id="6550457">&#34;uint&#34;</span><span class="op" id="6550463">}</span><span class="op" id="6550464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550467">{</span><span class="ident" id="6550468">tFloat</span><span class="op" id="6550474">,</span>&nbsp;<span class="string" id="6550476">&#34;float&#34;</span><span class="op" id="6550483">}</span><span class="op" id="6550484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550487">{</span><span class="ident" id="6550488">tBytes</span><span class="op" id="6550494">,</span>&nbsp;<span class="string" id="6550496">&#34;bytes&#34;</span><span class="op" id="6550503">}</span><span class="op" id="6550504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550507">{</span><span class="ident" id="6550508">tString</span><span class="op" id="6550515">,</span>&nbsp;<span class="string" id="6550517">&#34;string&#34;</span><span class="op" id="6550525">}</span><span class="op" id="6550526">,</span><br>
<span class="lineno">25</span><span class="op" id="6550528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6550531">func</span>&nbsp;<span class="ident" id="6550536">getTypeUnlocked</span><span class="op" id="6550551">(</span><span class="ident" id="6550552">name</span>&nbsp;<span class="builtintype" id="6550557">string</span><span class="op" id="6550563">,</span>&nbsp;<span class="ident" id="6550565">rt</span>&nbsp;<span class="ident" id="6550568">reflect</span><span class="op" id="6550575">.</span><span class="ident" id="6550576">Type</span><span class="op" id="6550580">)</span>&nbsp;<span class="ident" id="6550582">gobType</span>&nbsp;<span class="op" id="6550590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550593">typeLock</span><span class="op" id="6550601">.</span><span class="ident" id="6550602">Lock</span><span class="op" id="6550606">(</span><span class="op" id="6550607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550610">defer</span>&nbsp;<span class="ident" id="6550616">typeLock</span><span class="op" id="6550624">.</span><span class="ident" id="6550625">Unlock</span><span class="op" id="6550631">(</span><span class="op" id="6550632">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550635">t</span><span class="op" id="6550636">,</span>&nbsp;<span class="ident" id="6550638">err</span>&nbsp;<span class="op" id="6550642">:=</span>&nbsp;<span class="ident" id="6550645">getBaseType</span><span class="op" id="6550656">(</span><span class="ident" id="6550657">name</span><span class="op" id="6550661">,</span>&nbsp;<span class="ident" id="6550663">rt</span><span class="op" id="6550665">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550668">if</span>&nbsp;<span class="ident" id="6550671">err</span>&nbsp;<span class="op" id="6550675">!=</span>&nbsp;<span class="builtintype" id="6550678">nil</span>&nbsp;<span class="op" id="6550682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6550686">panic</span><span class="op" id="6550691">(</span><span class="string" id="6550692">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="6550712">+</span>&nbsp;<span class="ident" id="6550714">err</span><span class="op" id="6550717">.</span><span class="ident" id="6550718">Error</span><span class="op" id="6550723">(</span><span class="op" id="6550724">)</span><span class="op" id="6550725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550731">return</span>&nbsp;<span class="ident" id="6550738">t</span><br>
<span class="lineno">35</span><span class="op" id="6550740">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6550743">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="6550760">func</span>&nbsp;<span class="ident" id="6550765">TestBasic</span><span class="op" id="6550774">(</span><span class="ident" id="6550775">t</span>&nbsp;<span class="op" id="6550777">*</span><span class="ident" id="6550778">testing</span><span class="op" id="6550785">.</span><span class="ident" id="6550786">T</span><span class="op" id="6550787">)</span>&nbsp;<span class="op" id="6550789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550792">for</span>&nbsp;<span class="ident" id="6550796">_</span><span class="op" id="6550797">,</span>&nbsp;<span class="ident" id="6550799">tt</span>&nbsp;<span class="op" id="6550802">:=</span>&nbsp;<span class="keyword" id="6550805">range</span>&nbsp;<span class="ident" id="6550811">basicTypes</span>&nbsp;<span class="op" id="6550822">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550826">if</span>&nbsp;<span class="ident" id="6550829">tt</span><span class="op" id="6550831">.</span><span class="ident" id="6550832">id</span><span class="op" id="6550834">.</span><span class="builtintype" id="6550835">string</span><span class="op" id="6550841">(</span><span class="op" id="6550842">)</span>&nbsp;<span class="op" id="6550844">!=</span>&nbsp;<span class="ident" id="6550847">tt</span><span class="op" id="6550849">.</span><span class="ident" id="6550850">str</span>&nbsp;<span class="op" id="6550854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550859">t</span><span class="op" id="6550860">.</span><span class="ident" id="6550861">Errorf</span><span class="op" id="6550867">(</span><span class="string" id="6550868">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="6550899">,</span>&nbsp;<span class="ident" id="6550901">tt</span><span class="op" id="6550903">.</span><span class="ident" id="6550904">str</span><span class="op" id="6550907">,</span>&nbsp;<span class="ident" id="6550909">tt</span><span class="op" id="6550911">.</span><span class="ident" id="6550912">id</span><span class="op" id="6550914">.</span><span class="builtintype" id="6550915">string</span><span class="op" id="6550921">(</span><span class="op" id="6550922">)</span><span class="op" id="6550923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6550931">if</span>&nbsp;<span class="ident" id="6550934">tt</span><span class="op" id="6550936">.</span><span class="ident" id="6550937">id</span>&nbsp;<span class="op" id="6550940">==</span>&nbsp;<span class="num" id="6550943">0</span>&nbsp;<span class="op" id="6550945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6550950">t</span><span class="op" id="6550951">.</span><span class="ident" id="6550952">Errorf</span><span class="op" id="6550958">(</span><span class="string" id="6550959">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="6550978">,</span>&nbsp;<span class="ident" id="6550980">tt</span><span class="op" id="6550982">.</span><span class="ident" id="6550983">str</span><span class="op" id="6550986">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6550993">}</span><br>
<span class="lineno"></span><span class="op" id="6550995">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6550998">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="6551066">func</span>&nbsp;<span class="ident" id="6551071">TestReregistration</span><span class="op" id="6551089">(</span><span class="ident" id="6551090">t</span>&nbsp;<span class="op" id="6551092">*</span><span class="ident" id="6551093">testing</span><span class="op" id="6551100">.</span><span class="ident" id="6551101">T</span><span class="op" id="6551102">)</span>&nbsp;<span class="op" id="6551104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551107">newtyp</span>&nbsp;<span class="op" id="6551114">:=</span>&nbsp;<span class="ident" id="6551117">getTypeUnlocked</span><span class="op" id="6551132">(</span><span class="string" id="6551133">&#34;int&#34;</span><span class="op" id="6551138">,</span>&nbsp;<span class="ident" id="6551140">reflect</span><span class="op" id="6551147">.</span><span class="ident" id="6551148">TypeOf</span><span class="op" id="6551154">(</span><span class="builtintype" id="6551155">int</span><span class="op" id="6551158">(</span><span class="num" id="6551159">0</span><span class="op" id="6551160">)</span><span class="op" id="6551161">)</span><span class="op" id="6551162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551165">if</span>&nbsp;<span class="ident" id="6551168">newtyp</span>&nbsp;<span class="op" id="6551175">!=</span>&nbsp;<span class="ident" id="6551178">tInt</span><span class="op" id="6551182">.</span><span class="ident" id="6551183">gobType</span><span class="op" id="6551190">(</span><span class="op" id="6551191">)</span>&nbsp;<span class="op" id="6551193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551197">t</span><span class="op" id="6551198">.</span><span class="ident" id="6551199">Errorf</span><span class="op" id="6551205">(</span><span class="string" id="6551206">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6551241">,</span>&nbsp;<span class="ident" id="6551243">newtyp</span><span class="op" id="6551249">.</span><span class="builtintype" id="6551250">string</span><span class="op" id="6551256">(</span><span class="op" id="6551257">)</span><span class="op" id="6551258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6551261">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551264">newtyp</span>&nbsp;<span class="op" id="6551271">=</span>&nbsp;<span class="ident" id="6551273">getTypeUnlocked</span><span class="op" id="6551288">(</span><span class="string" id="6551289">&#34;uint&#34;</span><span class="op" id="6551295">,</span>&nbsp;<span class="ident" id="6551297">reflect</span><span class="op" id="6551304">.</span><span class="ident" id="6551305">TypeOf</span><span class="op" id="6551311">(</span><span class="builtintype" id="6551312">uint</span><span class="op" id="6551316">(</span><span class="num" id="6551317">0</span><span class="op" id="6551318">)</span><span class="op" id="6551319">)</span><span class="op" id="6551320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551323">if</span>&nbsp;<span class="ident" id="6551326">newtyp</span>&nbsp;<span class="op" id="6551333">!=</span>&nbsp;<span class="ident" id="6551336">tUint</span><span class="op" id="6551341">.</span><span class="ident" id="6551342">gobType</span><span class="op" id="6551349">(</span><span class="op" id="6551350">)</span>&nbsp;<span class="op" id="6551352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551356">t</span><span class="op" id="6551357">.</span><span class="ident" id="6551358">Errorf</span><span class="op" id="6551364">(</span><span class="string" id="6551365">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6551400">,</span>&nbsp;<span class="ident" id="6551402">newtyp</span><span class="op" id="6551408">.</span><span class="builtintype" id="6551409">string</span><span class="op" id="6551415">(</span><span class="op" id="6551416">)</span><span class="op" id="6551417">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6551420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551423">newtyp</span>&nbsp;<span class="op" id="6551430">=</span>&nbsp;<span class="ident" id="6551432">getTypeUnlocked</span><span class="op" id="6551447">(</span><span class="string" id="6551448">&#34;string&#34;</span><span class="op" id="6551456">,</span>&nbsp;<span class="ident" id="6551458">reflect</span><span class="op" id="6551465">.</span><span class="ident" id="6551466">TypeOf</span><span class="op" id="6551472">(</span><span class="string" id="6551473">&#34;hello&#34;</span><span class="op" id="6551480">)</span><span class="op" id="6551481">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551484">if</span>&nbsp;<span class="ident" id="6551487">newtyp</span>&nbsp;<span class="op" id="6551494">!=</span>&nbsp;<span class="ident" id="6551497">tString</span><span class="op" id="6551504">.</span><span class="ident" id="6551505">gobType</span><span class="op" id="6551512">(</span><span class="op" id="6551513">)</span>&nbsp;<span class="op" id="6551515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551519">t</span><span class="op" id="6551520">.</span><span class="ident" id="6551521">Errorf</span><span class="op" id="6551527">(</span><span class="string" id="6551528">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="6551563">,</span>&nbsp;<span class="ident" id="6551565">newtyp</span><span class="op" id="6551571">.</span><span class="builtintype" id="6551572">string</span><span class="op" id="6551578">(</span><span class="op" id="6551579">)</span><span class="op" id="6551580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6551583">}</span><br>
<span class="lineno"></span><span class="op" id="6551585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="6551588">func</span>&nbsp;<span class="ident" id="6551593">TestArrayType</span><span class="op" id="6551606">(</span><span class="ident" id="6551607">t</span>&nbsp;<span class="op" id="6551609">*</span><span class="ident" id="6551610">testing</span><span class="op" id="6551617">.</span><span class="ident" id="6551618">T</span><span class="op" id="6551619">)</span>&nbsp;<span class="op" id="6551621">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551624">var</span>&nbsp;<span class="ident" id="6551628">a3</span>&nbsp;<span class="op" id="6551631">[</span><span class="num" id="6551632">3</span><span class="op" id="6551633">]</span><span class="builtintype" id="6551634">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551639">a3int</span>&nbsp;<span class="op" id="6551645">:=</span>&nbsp;<span class="ident" id="6551648">getTypeUnlocked</span><span class="op" id="6551663">(</span><span class="string" id="6551664">&#34;foo&#34;</span><span class="op" id="6551669">,</span>&nbsp;<span class="ident" id="6551671">reflect</span><span class="op" id="6551678">.</span><span class="ident" id="6551679">TypeOf</span><span class="op" id="6551685">(</span><span class="ident" id="6551686">a3</span><span class="op" id="6551688">)</span><span class="op" id="6551689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551692">newa3int</span>&nbsp;<span class="op" id="6551701">:=</span>&nbsp;<span class="ident" id="6551704">getTypeUnlocked</span><span class="op" id="6551719">(</span><span class="string" id="6551720">&#34;bar&#34;</span><span class="op" id="6551725">,</span>&nbsp;<span class="ident" id="6551727">reflect</span><span class="op" id="6551734">.</span><span class="ident" id="6551735">TypeOf</span><span class="op" id="6551741">(</span><span class="ident" id="6551742">a3</span><span class="op" id="6551744">)</span><span class="op" id="6551745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551748">if</span>&nbsp;<span class="ident" id="6551751">a3int</span>&nbsp;<span class="op" id="6551757">!=</span>&nbsp;<span class="ident" id="6551760">newa3int</span>&nbsp;<span class="op" id="6551769">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551773">t</span><span class="op" id="6551774">.</span><span class="ident" id="6551775">Errorf</span><span class="op" id="6551781">(</span><span class="string" id="6551782">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6551830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6551833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551836">var</span>&nbsp;<span class="ident" id="6551840">a4</span>&nbsp;<span class="op" id="6551843">[</span><span class="num" id="6551844">4</span><span class="op" id="6551845">]</span><span class="builtintype" id="6551846">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551851">a4int</span>&nbsp;<span class="op" id="6551857">:=</span>&nbsp;<span class="ident" id="6551860">getTypeUnlocked</span><span class="op" id="6551875">(</span><span class="string" id="6551876">&#34;goo&#34;</span><span class="op" id="6551881">,</span>&nbsp;<span class="ident" id="6551883">reflect</span><span class="op" id="6551890">.</span><span class="ident" id="6551891">TypeOf</span><span class="op" id="6551897">(</span><span class="ident" id="6551898">a4</span><span class="op" id="6551900">)</span><span class="op" id="6551901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551904">if</span>&nbsp;<span class="ident" id="6551907">a3int</span>&nbsp;<span class="op" id="6551913">==</span>&nbsp;<span class="ident" id="6551916">a4int</span>&nbsp;<span class="op" id="6551922">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6551926">t</span><span class="op" id="6551927">.</span><span class="ident" id="6551928">Errorf</span><span class="op" id="6551934">(</span><span class="string" id="6551935">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="6551987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6551990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6551993">var</span>&nbsp;<span class="ident" id="6551997">b3</span>&nbsp;<span class="op" id="6552000">[</span><span class="num" id="6552001">3</span><span class="op" id="6552002">]</span><span class="builtintype" id="6552003">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552009">a3bool</span>&nbsp;<span class="op" id="6552016">:=</span>&nbsp;<span class="ident" id="6552019">getTypeUnlocked</span><span class="op" id="6552034">(</span><span class="string" id="6552035">&#34;&#34;</span><span class="op" id="6552037">,</span>&nbsp;<span class="ident" id="6552039">reflect</span><span class="op" id="6552046">.</span><span class="ident" id="6552047">TypeOf</span><span class="op" id="6552053">(</span><span class="ident" id="6552054">b3</span><span class="op" id="6552056">)</span><span class="op" id="6552057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552060">if</span>&nbsp;<span class="ident" id="6552063">a3int</span>&nbsp;<span class="op" id="6552069">==</span>&nbsp;<span class="ident" id="6552072">a3bool</span>&nbsp;<span class="op" id="6552079">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552083">t</span><span class="op" id="6552084">.</span><span class="ident" id="6552085">Errorf</span><span class="op" id="6552091">(</span><span class="string" id="6552092">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="6552145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6552148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552151">str</span>&nbsp;<span class="op" id="6552155">:=</span>&nbsp;<span class="ident" id="6552158">a3bool</span><span class="op" id="6552164">.</span><span class="builtintype" id="6552165">string</span><span class="op" id="6552171">(</span><span class="op" id="6552172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552175">expected</span>&nbsp;<span class="op" id="6552184">:=</span>&nbsp;<span class="string" id="6552187">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552198">if</span>&nbsp;<span class="ident" id="6552201">str</span>&nbsp;<span class="op" id="6552205">!=</span>&nbsp;<span class="ident" id="6552208">expected</span>&nbsp;<span class="op" id="6552217">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552221">t</span><span class="op" id="6552222">.</span><span class="ident" id="6552223">Errorf</span><span class="op" id="6552229">(</span><span class="string" id="6552230">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6552264">,</span>&nbsp;<span class="ident" id="6552266">str</span><span class="op" id="6552269">,</span>&nbsp;<span class="ident" id="6552271">expected</span><span class="op" id="6552279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6552282">}</span><br>
<span class="lineno"></span><span class="op" id="6552284">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6552287">func</span>&nbsp;<span class="ident" id="6552292">TestSliceType</span><span class="op" id="6552305">(</span><span class="ident" id="6552306">t</span>&nbsp;<span class="op" id="6552308">*</span><span class="ident" id="6552309">testing</span><span class="op" id="6552316">.</span><span class="ident" id="6552317">T</span><span class="op" id="6552318">)</span>&nbsp;<span class="op" id="6552320">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552323">var</span>&nbsp;<span class="ident" id="6552327">s</span>&nbsp;<span class="op" id="6552329">[</span><span class="op" id="6552330">]</span><span class="builtintype" id="6552331">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552336">sint</span>&nbsp;<span class="op" id="6552341">:=</span>&nbsp;<span class="ident" id="6552344">getTypeUnlocked</span><span class="op" id="6552359">(</span><span class="string" id="6552360">&#34;slice&#34;</span><span class="op" id="6552367">,</span>&nbsp;<span class="ident" id="6552369">reflect</span><span class="op" id="6552376">.</span><span class="ident" id="6552377">TypeOf</span><span class="op" id="6552383">(</span><span class="ident" id="6552384">s</span><span class="op" id="6552385">)</span><span class="op" id="6552386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552389">var</span>&nbsp;<span class="ident" id="6552393">news</span>&nbsp;<span class="op" id="6552398">[</span><span class="op" id="6552399">]</span><span class="builtintype" id="6552400">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552405">newsint</span>&nbsp;<span class="op" id="6552413">:=</span>&nbsp;<span class="ident" id="6552416">getTypeUnlocked</span><span class="op" id="6552431">(</span><span class="string" id="6552432">&#34;slice1&#34;</span><span class="op" id="6552440">,</span>&nbsp;<span class="ident" id="6552442">reflect</span><span class="op" id="6552449">.</span><span class="ident" id="6552450">TypeOf</span><span class="op" id="6552456">(</span><span class="ident" id="6552457">news</span><span class="op" id="6552461">)</span><span class="op" id="6552462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552465">if</span>&nbsp;<span class="ident" id="6552468">sint</span>&nbsp;<span class="op" id="6552473">!=</span>&nbsp;<span class="ident" id="6552476">newsint</span>&nbsp;<span class="op" id="6552484">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552488">t</span><span class="op" id="6552489">.</span><span class="ident" id="6552490">Errorf</span><span class="op" id="6552496">(</span><span class="string" id="6552497">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6552544">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6552547">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552550">var</span>&nbsp;<span class="ident" id="6552554">b</span>&nbsp;<span class="op" id="6552556">[</span><span class="op" id="6552557">]</span><span class="builtintype" id="6552558">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552564">sbool</span>&nbsp;<span class="op" id="6552570">:=</span>&nbsp;<span class="ident" id="6552573">getTypeUnlocked</span><span class="op" id="6552588">(</span><span class="string" id="6552589">&#34;&#34;</span><span class="op" id="6552591">,</span>&nbsp;<span class="ident" id="6552593">reflect</span><span class="op" id="6552600">.</span><span class="ident" id="6552601">TypeOf</span><span class="op" id="6552607">(</span><span class="ident" id="6552608">b</span><span class="op" id="6552609">)</span><span class="op" id="6552610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552613">if</span>&nbsp;<span class="ident" id="6552616">sbool</span>&nbsp;<span class="op" id="6552622">==</span>&nbsp;<span class="ident" id="6552625">sint</span>&nbsp;<span class="op" id="6552630">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552634">t</span><span class="op" id="6552635">.</span><span class="ident" id="6552636">Errorf</span><span class="op" id="6552642">(</span><span class="string" id="6552643">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="6552694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6552697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552700">str</span>&nbsp;<span class="op" id="6552704">:=</span>&nbsp;<span class="ident" id="6552707">sbool</span><span class="op" id="6552712">.</span><span class="builtintype" id="6552713">string</span><span class="op" id="6552719">(</span><span class="op" id="6552720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552723">expected</span>&nbsp;<span class="op" id="6552732">:=</span>&nbsp;<span class="string" id="6552735">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552745">if</span>&nbsp;<span class="ident" id="6552748">str</span>&nbsp;<span class="op" id="6552752">!=</span>&nbsp;<span class="ident" id="6552755">expected</span>&nbsp;<span class="op" id="6552764">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552768">t</span><span class="op" id="6552769">.</span><span class="ident" id="6552770">Errorf</span><span class="op" id="6552776">(</span><span class="string" id="6552777">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6552811">,</span>&nbsp;<span class="ident" id="6552813">str</span><span class="op" id="6552816">,</span>&nbsp;<span class="ident" id="6552818">expected</span><span class="op" id="6552826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6552829">}</span><br>
<span class="lineno"></span><span class="op" id="6552831">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6552834">func</span>&nbsp;<span class="ident" id="6552839">TestMapType</span><span class="op" id="6552850">(</span><span class="ident" id="6552851">t</span>&nbsp;<span class="op" id="6552853">*</span><span class="ident" id="6552854">testing</span><span class="op" id="6552861">.</span><span class="ident" id="6552862">T</span><span class="op" id="6552863">)</span>&nbsp;<span class="op" id="6552865">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552868">var</span>&nbsp;<span class="ident" id="6552872">m</span>&nbsp;<span class="keyword" id="6552874">map</span><span class="op" id="6552877">[</span><span class="builtintype" id="6552878">string</span><span class="op" id="6552884">]</span><span class="builtintype" id="6552885">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552890">mapStringInt</span>&nbsp;<span class="op" id="6552903">:=</span>&nbsp;<span class="ident" id="6552906">getTypeUnlocked</span><span class="op" id="6552921">(</span><span class="string" id="6552922">&#34;map&#34;</span><span class="op" id="6552927">,</span>&nbsp;<span class="ident" id="6552929">reflect</span><span class="op" id="6552936">.</span><span class="ident" id="6552937">TypeOf</span><span class="op" id="6552943">(</span><span class="ident" id="6552944">m</span><span class="op" id="6552945">)</span><span class="op" id="6552946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6552949">var</span>&nbsp;<span class="ident" id="6552953">newm</span>&nbsp;<span class="keyword" id="6552958">map</span><span class="op" id="6552961">[</span><span class="builtintype" id="6552962">string</span><span class="op" id="6552968">]</span><span class="builtintype" id="6552969">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6552974">newMapStringInt</span>&nbsp;<span class="op" id="6552990">:=</span>&nbsp;<span class="ident" id="6552993">getTypeUnlocked</span><span class="op" id="6553008">(</span><span class="string" id="6553009">&#34;map1&#34;</span><span class="op" id="6553015">,</span>&nbsp;<span class="ident" id="6553017">reflect</span><span class="op" id="6553024">.</span><span class="ident" id="6553025">TypeOf</span><span class="op" id="6553031">(</span><span class="ident" id="6553032">newm</span><span class="op" id="6553036">)</span><span class="op" id="6553037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6553040">if</span>&nbsp;<span class="ident" id="6553043">mapStringInt</span>&nbsp;<span class="op" id="6553056">!=</span>&nbsp;<span class="ident" id="6553059">newMapStringInt</span>&nbsp;<span class="op" id="6553075">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553079">t</span><span class="op" id="6553080">.</span><span class="ident" id="6553081">Errorf</span><span class="op" id="6553087">(</span><span class="string" id="6553088">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="6553144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6553147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6553150">var</span>&nbsp;<span class="ident" id="6553154">b</span>&nbsp;<span class="keyword" id="6553156">map</span><span class="op" id="6553159">[</span><span class="builtintype" id="6553160">string</span><span class="op" id="6553166">]</span><span class="builtintype" id="6553167">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553173">mapStringBool</span>&nbsp;<span class="op" id="6553187">:=</span>&nbsp;<span class="ident" id="6553190">getTypeUnlocked</span><span class="op" id="6553205">(</span><span class="string" id="6553206">&#34;&#34;</span><span class="op" id="6553208">,</span>&nbsp;<span class="ident" id="6553210">reflect</span><span class="op" id="6553217">.</span><span class="ident" id="6553218">TypeOf</span><span class="op" id="6553224">(</span><span class="ident" id="6553225">b</span><span class="op" id="6553226">)</span><span class="op" id="6553227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6553230">if</span>&nbsp;<span class="ident" id="6553233">mapStringBool</span>&nbsp;<span class="op" id="6553247">==</span>&nbsp;<span class="ident" id="6553250">mapStringInt</span>&nbsp;<span class="op" id="6553263">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553267">t</span><span class="op" id="6553268">.</span><span class="ident" id="6553269">Errorf</span><span class="op" id="6553275">(</span><span class="string" id="6553276">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="6553345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6553348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553351">str</span>&nbsp;<span class="op" id="6553355">:=</span>&nbsp;<span class="ident" id="6553358">mapStringBool</span><span class="op" id="6553371">.</span><span class="builtintype" id="6553372">string</span><span class="op" id="6553378">(</span><span class="op" id="6553379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553382">expected</span>&nbsp;<span class="op" id="6553391">:=</span>&nbsp;<span class="string" id="6553394">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6553413">if</span>&nbsp;<span class="ident" id="6553416">str</span>&nbsp;<span class="op" id="6553420">!=</span>&nbsp;<span class="ident" id="6553423">expected</span>&nbsp;<span class="op" id="6553432">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553436">t</span><span class="op" id="6553437">.</span><span class="ident" id="6553438">Errorf</span><span class="op" id="6553444">(</span><span class="string" id="6553445">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6553477">,</span>&nbsp;<span class="ident" id="6553479">str</span><span class="op" id="6553482">,</span>&nbsp;<span class="ident" id="6553484">expected</span><span class="op" id="6553492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6553495">}</span><br>
<span class="lineno"></span><span class="op" id="6553497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6553500">type</span>&nbsp;<span class="ident" id="6553505">Bar</span>&nbsp;<span class="keyword" id="6553509">struct</span>&nbsp;<span class="op" id="6553516">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553519">X</span>&nbsp;<span class="builtintype" id="6553521">string</span><br>
<span class="lineno"></span><span class="op" id="6553528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6553531">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="6553612">type</span>&nbsp;<span class="ident" id="6553617">Foo</span>&nbsp;<span class="keyword" id="6553621">struct</span>&nbsp;<span class="op" id="6553628">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553631">A</span>&nbsp;<span class="builtintype" id="6553633">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553638">B</span>&nbsp;<span class="builtintype" id="6553640">int32</span>&nbsp;<span class="comment" id="6553646">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553666">C</span>&nbsp;<span class="builtintype" id="6553668">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553676">D</span>&nbsp;<span class="op" id="6553678">[</span><span class="op" id="6553679">]</span><span class="builtintype" id="6553680">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553686">E</span>&nbsp;<span class="op" id="6553688">*</span><span class="builtintype" id="6553689">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6553700">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553724">F</span>&nbsp;<span class="op" id="6553726">*</span><span class="op" id="6553727">*</span><span class="op" id="6553728">*</span><span class="op" id="6553729">*</span><span class="builtintype" id="6553730">float64</span>&nbsp;<span class="comment" id="6553738">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553762">G</span>&nbsp;<span class="op" id="6553764">*</span><span class="ident" id="6553765">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553770">H</span>&nbsp;<span class="op" id="6553772">*</span><span class="ident" id="6553773">Bar</span>&nbsp;<span class="comment" id="6553777">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553832">I</span>&nbsp;<span class="op" id="6553834">*</span><span class="ident" id="6553835">Foo</span>&nbsp;<span class="comment" id="6553839">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="6553859">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="6553862">func</span>&nbsp;<span class="ident" id="6553867">TestStructType</span><span class="op" id="6553881">(</span><span class="ident" id="6553882">t</span>&nbsp;<span class="op" id="6553884">*</span><span class="ident" id="6553885">testing</span><span class="op" id="6553892">.</span><span class="ident" id="6553893">T</span><span class="op" id="6553894">)</span>&nbsp;<span class="op" id="6553896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553899">sstruct</span>&nbsp;<span class="op" id="6553907">:=</span>&nbsp;<span class="ident" id="6553910">getTypeUnlocked</span><span class="op" id="6553925">(</span><span class="string" id="6553926">&#34;Foo&#34;</span><span class="op" id="6553931">,</span>&nbsp;<span class="ident" id="6553933">reflect</span><span class="op" id="6553940">.</span><span class="ident" id="6553941">TypeOf</span><span class="op" id="6553947">(</span><span class="ident" id="6553948">Foo</span><span class="op" id="6553951">{</span><span class="op" id="6553952">}</span><span class="op" id="6553953">)</span><span class="op" id="6553954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6553957">str</span>&nbsp;<span class="op" id="6553961">:=</span>&nbsp;<span class="ident" id="6553964">sstruct</span><span class="op" id="6553971">.</span><span class="builtintype" id="6553972">string</span><span class="op" id="6553978">(</span><span class="op" id="6553979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6553982">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554039">expected</span>&nbsp;<span class="op" id="6554048">:=</span>&nbsp;<span class="string" id="6554051">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6554166">if</span>&nbsp;<span class="ident" id="6554169">str</span>&nbsp;<span class="op" id="6554173">!=</span>&nbsp;<span class="ident" id="6554176">expected</span>&nbsp;<span class="op" id="6554185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554189">t</span><span class="op" id="6554190">.</span><span class="ident" id="6554191">Errorf</span><span class="op" id="6554197">(</span><span class="string" id="6554198">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="6554233">,</span>&nbsp;<span class="ident" id="6554235">str</span><span class="op" id="6554238">,</span>&nbsp;<span class="ident" id="6554240">expected</span><span class="op" id="6554248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554251">}</span><br>
<span class="lineno"></span><span class="op" id="6554253">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6554256">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="6554333">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="6554370">func</span>&nbsp;<span class="ident" id="6554375">TestRegistration</span><span class="op" id="6554391">(</span><span class="ident" id="6554392">t</span>&nbsp;<span class="op" id="6554394">*</span><span class="ident" id="6554395">testing</span><span class="op" id="6554402">.</span><span class="ident" id="6554403">T</span><span class="op" id="6554404">)</span>&nbsp;<span class="op" id="6554406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6554409">type</span>&nbsp;<span class="ident" id="6554414">T</span>&nbsp;<span class="keyword" id="6554416">struct</span><span class="op" id="6554422">{</span>&nbsp;<span class="ident" id="6554424">a</span>&nbsp;<span class="builtintype" id="6554426">int</span>&nbsp;<span class="op" id="6554430">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554433">Register</span><span class="op" id="6554441">(</span><span class="builtinfunc" id="6554442">new</span><span class="op" id="6554445">(</span><span class="ident" id="6554446">T</span><span class="op" id="6554447">)</span><span class="op" id="6554448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554451">Register</span><span class="op" id="6554459">(</span><span class="builtinfunc" id="6554460">new</span><span class="op" id="6554463">(</span><span class="ident" id="6554464">T</span><span class="op" id="6554465">)</span><span class="op" id="6554466">)</span><br>
<span class="lineno"></span><span class="op" id="6554468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6554471">type</span>&nbsp;<span class="ident" id="6554476">N1</span>&nbsp;<span class="keyword" id="6554479">struct</span><span class="op" id="6554485">{</span><span class="op" id="6554486">}</span><br>
<span class="lineno">165</span><span class="keyword" id="6554488">type</span>&nbsp;<span class="ident" id="6554493">N2</span>&nbsp;<span class="keyword" id="6554496">struct</span><span class="op" id="6554502">{</span><span class="op" id="6554503">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6554506">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="6554542">func</span>&nbsp;<span class="ident" id="6554547">TestRegistrationNaming</span><span class="op" id="6554569">(</span><span class="ident" id="6554570">t</span>&nbsp;<span class="op" id="6554572">*</span><span class="ident" id="6554573">testing</span><span class="op" id="6554580">.</span><span class="ident" id="6554581">T</span><span class="op" id="6554582">)</span>&nbsp;<span class="op" id="6554584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554587">testCases</span>&nbsp;<span class="op" id="6554597">:=</span>&nbsp;<span class="op" id="6554600">[</span><span class="op" id="6554601">]</span><span class="keyword" id="6554602">struct</span>&nbsp;<span class="op" id="6554609">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554613">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6554618">interface</span><span class="op" id="6554627">{</span><span class="op" id="6554628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554632">name</span>&nbsp;<span class="builtintype" id="6554637">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554645">}</span><span class="op" id="6554646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554650">{</span><span class="op" id="6554651">&amp;</span><span class="ident" id="6554652">N1</span><span class="op" id="6554654">{</span><span class="op" id="6554655">}</span><span class="op" id="6554656">,</span>&nbsp;<span class="string" id="6554658">&#34;*gob.N1&#34;</span><span class="op" id="6554667">}</span><span class="op" id="6554668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554672">{</span><span class="ident" id="6554673">N2</span><span class="op" id="6554675">{</span><span class="op" id="6554676">}</span><span class="op" id="6554677">,</span>&nbsp;<span class="string" id="6554679">&#34;encoding/gob.N2&#34;</span><span class="op" id="6554696">}</span><span class="op" id="6554697">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554700">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6554704">for</span>&nbsp;<span class="ident" id="6554708">_</span><span class="op" id="6554709">,</span>&nbsp;<span class="ident" id="6554711">tc</span>&nbsp;<span class="op" id="6554714">:=</span>&nbsp;<span class="keyword" id="6554717">range</span>&nbsp;<span class="ident" id="6554723">testCases</span>&nbsp;<span class="op" id="6554733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554737">Register</span><span class="op" id="6554745">(</span><span class="ident" id="6554746">tc</span><span class="op" id="6554748">.</span><span class="ident" id="6554749">t</span><span class="op" id="6554750">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554755">tct</span>&nbsp;<span class="op" id="6554759">:=</span>&nbsp;<span class="ident" id="6554762">reflect</span><span class="op" id="6554769">.</span><span class="ident" id="6554770">TypeOf</span><span class="op" id="6554776">(</span><span class="ident" id="6554777">tc</span><span class="op" id="6554779">.</span><span class="ident" id="6554780">t</span><span class="op" id="6554781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554785">registerLock</span><span class="op" id="6554797">.</span><span class="ident" id="6554798">RLock</span><span class="op" id="6554803">(</span><span class="op" id="6554804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554808">ct</span>&nbsp;<span class="op" id="6554811">:=</span>&nbsp;<span class="ident" id="6554814">nameToConcreteType</span><span class="op" id="6554832">[</span><span class="ident" id="6554833">tc</span><span class="op" id="6554835">.</span><span class="ident" id="6554836">name</span><span class="op" id="6554840">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554844">registerLock</span><span class="op" id="6554856">.</span><span class="ident" id="6554857">RUnlock</span><span class="op" id="6554864">(</span><span class="op" id="6554865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6554869">if</span>&nbsp;<span class="ident" id="6554872">ct</span>&nbsp;<span class="op" id="6554875">!=</span>&nbsp;<span class="ident" id="6554878">tct</span>&nbsp;<span class="op" id="6554882">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6554887">t</span><span class="op" id="6554888">.</span><span class="ident" id="6554889">Errorf</span><span class="op" id="6554895">(</span><span class="string" id="6554896">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6554934">,</span>&nbsp;<span class="ident" id="6554936">tc</span><span class="op" id="6554938">.</span><span class="ident" id="6554939">name</span><span class="op" id="6554943">,</span>&nbsp;<span class="ident" id="6554945">ct</span><span class="op" id="6554947">,</span>&nbsp;<span class="ident" id="6554949">tct</span><span class="op" id="6554952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6554956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6554960">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555012">if</span>&nbsp;<span class="ident" id="6555015">tct</span><span class="op" id="6555018">.</span><span class="ident" id="6555019">Kind</span><span class="op" id="6555023">(</span><span class="op" id="6555024">)</span>&nbsp;<span class="op" id="6555026">==</span>&nbsp;<span class="ident" id="6555029">reflect</span><span class="op" id="6555036">.</span><span class="ident" id="6555037">Ptr</span>&nbsp;<span class="op" id="6555041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555046">tct</span>&nbsp;<span class="op" id="6555050">=</span>&nbsp;<span class="ident" id="6555052">tct</span><span class="op" id="6555055">.</span><span class="ident" id="6555056">Elem</span><span class="op" id="6555060">(</span><span class="op" id="6555061">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555065">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555069">if</span>&nbsp;<span class="ident" id="6555072">n</span>&nbsp;<span class="op" id="6555074">:=</span>&nbsp;<span class="ident" id="6555077">concreteTypeToName</span><span class="op" id="6555095">[</span><span class="ident" id="6555096">tct</span><span class="op" id="6555099">]</span><span class="op" id="6555100">;</span>&nbsp;<span class="ident" id="6555102">n</span>&nbsp;<span class="op" id="6555104">!=</span>&nbsp;<span class="ident" id="6555107">tc</span><span class="op" id="6555109">.</span><span class="ident" id="6555110">name</span>&nbsp;<span class="op" id="6555115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555120">t</span><span class="op" id="6555121">.</span><span class="ident" id="6555122">Errorf</span><span class="op" id="6555128">(</span><span class="string" id="6555129">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="6555169">,</span>&nbsp;<span class="ident" id="6555171">tct</span><span class="op" id="6555174">,</span>&nbsp;<span class="ident" id="6555176">n</span><span class="op" id="6555177">,</span>&nbsp;<span class="ident" id="6555179">tc</span><span class="op" id="6555181">.</span><span class="ident" id="6555182">name</span><span class="op" id="6555186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555190">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555193">}</span><br>
<span class="lineno">195</span><span class="op" id="6555195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6555198">func</span>&nbsp;<span class="ident" id="6555203">TestStressParallel</span><span class="op" id="6555221">(</span><span class="ident" id="6555222">t</span>&nbsp;<span class="op" id="6555224">*</span><span class="ident" id="6555225">testing</span><span class="op" id="6555232">.</span><span class="ident" id="6555233">T</span><span class="op" id="6555234">)</span>&nbsp;<span class="op" id="6555236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555239">type</span>&nbsp;<span class="ident" id="6555244">T2</span>&nbsp;<span class="keyword" id="6555247">struct</span><span class="op" id="6555253">{</span>&nbsp;<span class="ident" id="6555255">A</span>&nbsp;<span class="builtintype" id="6555257">int</span>&nbsp;<span class="op" id="6555261">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555264">c</span>&nbsp;<span class="op" id="6555266">:=</span>&nbsp;<span class="builtinfunc" id="6555269">make</span><span class="op" id="6555273">(</span><span class="keyword" id="6555274">chan</span>&nbsp;<span class="builtintype" id="6555279">bool</span><span class="op" id="6555283">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555286">const</span>&nbsp;<span class="ident" id="6555292">N</span>&nbsp;<span class="op" id="6555294">=</span>&nbsp;<span class="num" id="6555296">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555300">for</span>&nbsp;<span class="ident" id="6555304">i</span>&nbsp;<span class="op" id="6555306">:=</span>&nbsp;<span class="num" id="6555309">0</span><span class="op" id="6555310">;</span>&nbsp;<span class="ident" id="6555312">i</span>&nbsp;<span class="op" id="6555314">&lt;</span>&nbsp;<span class="ident" id="6555316">N</span><span class="op" id="6555317">;</span>&nbsp;<span class="ident" id="6555319">i</span><span class="op" id="6555320">++</span>&nbsp;<span class="op" id="6555323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555327">go</span>&nbsp;<span class="keyword" id="6555330">func</span><span class="op" id="6555334">(</span><span class="op" id="6555335">)</span>&nbsp;<span class="op" id="6555337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555342">p</span>&nbsp;<span class="op" id="6555344">:=</span>&nbsp;<span class="builtinfunc" id="6555347">new</span><span class="op" id="6555350">(</span><span class="ident" id="6555351">T2</span><span class="op" id="6555353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555358">Register</span><span class="op" id="6555366">(</span><span class="ident" id="6555367">p</span><span class="op" id="6555368">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555373">b</span>&nbsp;<span class="op" id="6555375">:=</span>&nbsp;<span class="builtinfunc" id="6555378">new</span><span class="op" id="6555381">(</span><span class="ident" id="6555382">bytes</span><span class="op" id="6555387">.</span><span class="ident" id="6555388">Buffer</span><span class="op" id="6555394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555399">enc</span>&nbsp;<span class="op" id="6555403">:=</span>&nbsp;<span class="ident" id="6555406">NewEncoder</span><span class="op" id="6555416">(</span><span class="ident" id="6555417">b</span><span class="op" id="6555418">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555423">err</span>&nbsp;<span class="op" id="6555427">:=</span>&nbsp;<span class="ident" id="6555430">enc</span><span class="op" id="6555433">.</span><span class="ident" id="6555434">Encode</span><span class="op" id="6555440">(</span><span class="ident" id="6555441">p</span><span class="op" id="6555442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555447">if</span>&nbsp;<span class="ident" id="6555450">err</span>&nbsp;<span class="op" id="6555454">!=</span>&nbsp;<span class="builtintype" id="6555457">nil</span>&nbsp;<span class="op" id="6555461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555467">t</span><span class="op" id="6555468">.</span><span class="ident" id="6555469">Error</span><span class="op" id="6555474">(</span><span class="string" id="6555475">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="6555490">,</span>&nbsp;<span class="ident" id="6555492">err</span><span class="op" id="6555495">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555505">dec</span>&nbsp;<span class="op" id="6555509">:=</span>&nbsp;<span class="ident" id="6555512">NewDecoder</span><span class="op" id="6555522">(</span><span class="ident" id="6555523">b</span><span class="op" id="6555524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555529">err</span>&nbsp;<span class="op" id="6555533">=</span>&nbsp;<span class="ident" id="6555535">dec</span><span class="op" id="6555538">.</span><span class="ident" id="6555539">Decode</span><span class="op" id="6555545">(</span><span class="ident" id="6555546">p</span><span class="op" id="6555547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555552">if</span>&nbsp;<span class="ident" id="6555555">err</span>&nbsp;<span class="op" id="6555559">!=</span>&nbsp;<span class="builtintype" id="6555562">nil</span>&nbsp;<span class="op" id="6555566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555572">t</span><span class="op" id="6555573">.</span><span class="ident" id="6555574">Error</span><span class="op" id="6555579">(</span><span class="string" id="6555580">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="6555595">,</span>&nbsp;<span class="ident" id="6555597">err</span><span class="op" id="6555600">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6555610">c</span>&nbsp;<span class="op" id="6555612">&lt;-</span>&nbsp;<span class="builtintype" id="6555615">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555622">}</span><span class="op" id="6555623">(</span><span class="op" id="6555624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6555630">for</span>&nbsp;<span class="ident" id="6555634">i</span>&nbsp;<span class="op" id="6555636">:=</span>&nbsp;<span class="num" id="6555639">0</span><span class="op" id="6555640">;</span>&nbsp;<span class="ident" id="6555642">i</span>&nbsp;<span class="op" id="6555644">&lt;</span>&nbsp;<span class="ident" id="6555646">N</span><span class="op" id="6555647">;</span>&nbsp;<span class="ident" id="6555649">i</span><span class="op" id="6555650">++</span>&nbsp;<span class="op" id="6555653">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555657">&lt;-</span><span class="ident" id="6555659">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6555662">}</span><br>
<span class="lineno"></span><span class="op" id="6555664">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
