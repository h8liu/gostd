<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/csv</h2>
<ul>
<li><a href="/gostd/encoding/csv/reader.go.html">reader.go</a></li>
<li><a href="/gostd/encoding/csv/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/encoding/csv/writer.go.html">writer.go</a></li>
<li><a href="/gostd/encoding/csv/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6171583">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6171638">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6171692">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6171743">//&nbsp;Package&nbsp;csv&nbsp;reads&nbsp;and&nbsp;writes&nbsp;comma-separated&nbsp;values&nbsp;(CSV)&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6171811">//</span><br>
<span class="lineno"></span><span class="comment" id="6171814">//&nbsp;A&nbsp;csv&nbsp;file&nbsp;contains&nbsp;zero&nbsp;or&nbsp;more&nbsp;records&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;fields&nbsp;per&nbsp;record.</span><br>
<span class="lineno"></span><span class="comment" id="6171892">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;separated&nbsp;by&nbsp;the&nbsp;newline&nbsp;character.&nbsp;The&nbsp;final&nbsp;record&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="6171967">//&nbsp;optionally&nbsp;be&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;character.</span><br>
<span class="lineno">10</span><span class="comment" id="6172017">//</span><br>
<span class="lineno"></span><span class="comment" id="6172020">//&nbsp;&nbsp;&nbsp;&nbspfield1,field2,field3</span><br>
<span class="lineno"></span><span class="comment" id="6172044">//</span><br>
<span class="lineno"></span><span class="comment" id="6172047">//&nbsp;White&nbsp;space&nbsp;is&nbsp;considered&nbsp;part&nbsp;of&nbsp;a&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6172093">//</span><br>
<span class="lineno">15</span><span class="comment" id="6172096">//&nbsp;Carriage&nbsp;returns&nbsp;before&nbsp;newline&nbsp;characters&nbsp;are&nbsp;silently&nbsp;removed.</span><br>
<span class="lineno"></span><span class="comment" id="6172164">//</span><br>
<span class="lineno"></span><span class="comment" id="6172167">//&nbsp;Blank&nbsp;lines&nbsp;are&nbsp;ignored.&nbsp;&nbsp;A&nbsp;line&nbsp;with&nbsp;only&nbsp;whitespace&nbsp;characters&nbsp;(excluding</span><br>
<span class="lineno"></span><span class="comment" id="6172246">//&nbsp;the&nbsp;ending&nbsp;newline&nbsp;character)&nbsp;is&nbsp;not&nbsp;considered&nbsp;a&nbsp;blank&nbsp;line.</span><br>
<span class="lineno"></span><span class="comment" id="6172311">//</span><br>
<span class="lineno">20</span><span class="comment" id="6172314">//&nbsp;Fields&nbsp;which&nbsp;start&nbsp;and&nbsp;stop&nbsp;with&nbsp;the&nbsp;quote&nbsp;character&nbsp;&#34;&nbsp;are&nbsp;called</span><br>
<span class="lineno"></span><span class="comment" id="6172383">//&nbsp;quoted-fields.&nbsp;&nbsp;The&nbsp;beginning&nbsp;and&nbsp;ending&nbsp;quote&nbsp;are&nbsp;not&nbsp;part&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6172453">//&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6172463">//</span><br>
<span class="lineno"></span><span class="comment" id="6172466">//&nbsp;The&nbsp;source:</span><br>
<span class="lineno">25</span><span class="comment" id="6172481">//</span><br>
<span class="lineno"></span><span class="comment" id="6172484">//&nbsp;&nbsp;&nbsp;&nbspnormal&nbsp;string,&#34;quoted-field&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6172516">//</span><br>
<span class="lineno"></span><span class="comment" id="6172519">//&nbsp;results&nbsp;in&nbsp;the&nbsp;fields</span><br>
<span class="lineno"></span><span class="comment" id="6172544">//</span><br>
<span class="lineno">30</span><span class="comment" id="6172547">//&nbsp;&nbsp;&nbsp;&nbsp{`normal&nbsp;string`,&nbsp;`quoted-field`}</span><br>
<span class="lineno"></span><span class="comment" id="6172584">//</span><br>
<span class="lineno"></span><span class="comment" id="6172587">//&nbsp;Within&nbsp;a&nbsp;quoted-field&nbsp;a&nbsp;quote&nbsp;character&nbsp;followed&nbsp;by&nbsp;a&nbsp;second&nbsp;quote</span><br>
<span class="lineno"></span><span class="comment" id="6172657">//&nbsp;character&nbsp;is&nbsp;considered&nbsp;a&nbsp;single&nbsp;quote.</span><br>
<span class="lineno"></span><span class="comment" id="6172700">//</span><br>
<span class="lineno">35</span><span class="comment" id="6172703">//&nbsp;&nbsp;&nbsp;&nbsp&#34;the&nbsp;&#34;&#34;word&#34;&#34;&nbsp;is&nbsp;true&#34;,&#34;a&nbsp;&#34;&#34;quoted-field&#34;&#34;&#34;</span><br>
<span class="lineno"></span><span class="comment" id="6172750">//</span><br>
<span class="lineno"></span><span class="comment" id="6172753">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6172767">//</span><br>
<span class="lineno"></span><span class="comment" id="6172770">//&nbsp;&nbsp;&nbsp;&nbsp{`the&nbsp;&#34;word&#34;&nbsp;is&nbsp;true`,&nbsp;`a&nbsp;&#34;quoted-field&#34;`}</span><br>
<span class="lineno">40</span><span class="comment" id="6172816">//</span><br>
<span class="lineno"></span><span class="comment" id="6172819">//&nbsp;Newlines&nbsp;and&nbsp;commas&nbsp;may&nbsp;be&nbsp;included&nbsp;in&nbsp;a&nbsp;quoted-field</span><br>
<span class="lineno"></span><span class="comment" id="6172876">//</span><br>
<span class="lineno"></span><span class="comment" id="6172879">//&nbsp;&nbsp;&nbsp;&nbsp&#34;Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6172894">//&nbsp;&nbsp;&nbsp;&nbspfield&#34;,&#34;comma&nbsp;is&nbsp;,&#34;</span><br>
<span class="lineno">45</span><span class="comment" id="6172917">//</span><br>
<span class="lineno"></span><span class="comment" id="6172920">//&nbsp;results&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6172934">//</span><br>
<span class="lineno"></span><span class="comment" id="6172937">//&nbsp;&nbsp;&nbsp;&nbsp{`Multi-line</span><br>
<span class="lineno"></span><span class="comment" id="6172953">//&nbsp;&nbsp;&nbsp;&nbspfield`,&nbsp;`comma&nbsp;is&nbsp;,`}</span><br>
<span class="lineno">50</span><span class="keyword" id="6172978">package</span>&nbsp;<span class="ident" id="6172986">csv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6172991">import</span>&nbsp;<span class="op" id="6172998">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173001">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173010">&#34;bytes&#34;</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173019">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173029">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173036">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6173042">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="6173052">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="6173055">//&nbsp;A&nbsp;ParseError&nbsp;is&nbsp;returned&nbsp;for&nbsp;parsing&nbsp;errors.</span><br>
<span class="lineno"></span><span class="comment" id="6173103">//&nbsp;The&nbsp;first&nbsp;line&nbsp;is&nbsp;1.&nbsp;&nbsp;The&nbsp;first&nbsp;column&nbsp;is&nbsp;0.</span><br>
<span class="lineno"></span><span class="keyword" id="6173151">type</span>&nbsp;<span class="ident" id="6173156">ParseError</span>&nbsp;<span class="keyword" id="6173167">struct</span>&nbsp;<span class="op" id="6173174">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173177">Line</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6173184">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6173190">//&nbsp;Line&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173224">Column</span>&nbsp;<span class="builtintype" id="6173231">int</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="6173237">//&nbsp;Column&nbsp;(rune&nbsp;index)&nbsp;where&nbsp;the&nbsp;error&nbsp;occurred</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173286">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6173293">error</span>&nbsp;<span class="comment" id="6173299">//&nbsp;The&nbsp;actual&nbsp;error</span><br>
<span class="lineno"></span><span class="op" id="6173319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6173322">func</span>&nbsp;<span class="op" id="6173327">(</span><span class="ident" id="6173328">e</span>&nbsp;<span class="op" id="6173330">*</span><span class="ident" id="6173331">ParseError</span><span class="op" id="6173341">)</span>&nbsp;<span class="ident" id="6173343">Error</span><span class="op" id="6173348">(</span><span class="op" id="6173349">)</span>&nbsp;<span class="builtintype" id="6173351">string</span>&nbsp;<span class="op" id="6173358">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6173361">return</span>&nbsp;<span class="ident" id="6173368">fmt</span><span class="op" id="6173371">.</span><span class="ident" id="6173372">Sprintf</span><span class="op" id="6173379">(</span><span class="string" id="6173380">&#34;line&nbsp;%d,&nbsp;column&nbsp;%d:&nbsp;%s&#34;</span><span class="op" id="6173404">,</span>&nbsp;<span class="ident" id="6173406">e</span><span class="op" id="6173407">.</span><span class="ident" id="6173408">Line</span><span class="op" id="6173412">,</span>&nbsp;<span class="ident" id="6173414">e</span><span class="op" id="6173415">.</span><span class="ident" id="6173416">Column</span><span class="op" id="6173422">,</span>&nbsp;<span class="ident" id="6173424">e</span><span class="op" id="6173425">.</span><span class="ident" id="6173426">Err</span><span class="op" id="6173429">)</span><br>
<span class="lineno"></span><span class="op" id="6173431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6173434">//&nbsp;These&nbsp;are&nbsp;the&nbsp;errors&nbsp;that&nbsp;can&nbsp;be&nbsp;returned&nbsp;in&nbsp;ParseError.Error</span><br>
<span class="lineno"></span><span class="keyword" id="6173499">var</span>&nbsp;<span class="op" id="6173503">(</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173506">ErrTrailingComma</span>&nbsp;<span class="op" id="6173523">=</span>&nbsp;<span class="ident" id="6173525">errors</span><span class="op" id="6173531">.</span><span class="ident" id="6173532">New</span><span class="op" id="6173535">(</span><span class="string" id="6173536">&#34;extra&nbsp;delimiter&nbsp;at&nbsp;end&nbsp;of&nbsp;line&#34;</span><span class="op" id="6173568">)</span>&nbsp;<span class="comment" id="6173570">//&nbsp;no&nbsp;longer&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173589">ErrBareQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6173606">=</span>&nbsp;<span class="ident" id="6173608">errors</span><span class="op" id="6173614">.</span><span class="ident" id="6173615">New</span><span class="op" id="6173618">(</span><span class="string" id="6173619">&#34;bare&nbsp;\&#34;&nbsp;in&nbsp;non-quoted-field&#34;</span><span class="op" id="6173648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173651">ErrQuote</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6173668">=</span>&nbsp;<span class="ident" id="6173670">errors</span><span class="op" id="6173676">.</span><span class="ident" id="6173677">New</span><span class="op" id="6173680">(</span><span class="string" id="6173681">&#34;extraneous&nbsp;\&#34;&nbsp;in&nbsp;field&#34;</span><span class="op" id="6173705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6173708">ErrFieldCount</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6173725">=</span>&nbsp;<span class="ident" id="6173727">errors</span><span class="op" id="6173733">.</span><span class="ident" id="6173734">New</span><span class="op" id="6173737">(</span><span class="string" id="6173738">&#34;wrong&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;line&#34;</span><span class="op" id="6173770">)</span><br>
<span class="lineno"></span><span class="op" id="6173772">)</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span><span class="comment" id="6173775">//&nbsp;A&nbsp;Reader&nbsp;reads&nbsp;records&nbsp;from&nbsp;a&nbsp;CSV-encoded&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6173826">//</span><br>
<span class="lineno"></span><span class="comment" id="6173829">//&nbsp;As&nbsp;returned&nbsp;by&nbsp;NewReader,&nbsp;a&nbsp;Reader&nbsp;expects&nbsp;input&nbsp;conforming&nbsp;to&nbsp;RFC&nbsp;4180.</span><br>
<span class="lineno"></span><span class="comment" id="6173905">//&nbsp;The&nbsp;exported&nbsp;fields&nbsp;can&nbsp;be&nbsp;changed&nbsp;to&nbsp;customize&nbsp;the&nbsp;details&nbsp;before&nbsp;the</span><br>
<span class="lineno">85</span><span class="comment" id="6173979">//&nbsp;first&nbsp;call&nbsp;to&nbsp;Read&nbsp;or&nbsp;ReadAll.</span><br>
<span class="lineno"></span><span class="comment" id="6174013">//</span><br>
<span class="lineno"></span><span class="comment" id="6174016">//&nbsp;Comma&nbsp;is&nbsp;the&nbsp;field&nbsp;delimiter.&nbsp;&nbsp;It&nbsp;defaults&nbsp;to&nbsp;&#39;,&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="6174070">//</span><br>
<span class="lineno"></span><span class="comment" id="6174073">//&nbsp;Comment,&nbsp;if&nbsp;not&nbsp;0,&nbsp;is&nbsp;the&nbsp;comment&nbsp;character.&nbsp;Lines&nbsp;beginning&nbsp;with&nbsp;the</span><br>
<span class="lineno">90</span><span class="comment" id="6174146">//&nbsp;Comment&nbsp;character&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="6174180">//</span><br>
<span class="lineno"></span><span class="comment" id="6174183">//&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;positive,&nbsp;Read&nbsp;requires&nbsp;each&nbsp;record&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6174247">//&nbsp;have&nbsp;the&nbsp;given&nbsp;number&nbsp;of&nbsp;fields.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;0,&nbsp;Read&nbsp;sets&nbsp;it&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6174325">//&nbsp;the&nbsp;number&nbsp;of&nbsp;fields&nbsp;in&nbsp;the&nbsp;first&nbsp;record,&nbsp;so&nbsp;that&nbsp;future&nbsp;records&nbsp;must</span><br>
<span class="lineno">95</span><span class="comment" id="6174398">//&nbsp;have&nbsp;the&nbsp;same&nbsp;field&nbsp;count.&nbsp;&nbsp;If&nbsp;FieldsPerRecord&nbsp;is&nbsp;negative,&nbsp;no&nbsp;check&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6174473">//&nbsp;made&nbsp;and&nbsp;records&nbsp;may&nbsp;have&nbsp;a&nbsp;variable&nbsp;number&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6174531">//</span><br>
<span class="lineno"></span><span class="comment" id="6174534">//&nbsp;If&nbsp;LazyQuotes&nbsp;is&nbsp;true,&nbsp;a&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;an&nbsp;unquoted&nbsp;field&nbsp;and&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6174606">//&nbsp;non-doubled&nbsp;quote&nbsp;may&nbsp;appear&nbsp;in&nbsp;a&nbsp;quoted&nbsp;field.</span><br>
<span class="lineno">100</span><span class="comment" id="6174657">//</span><br>
<span class="lineno"></span><span class="comment" id="6174660">//&nbsp;If&nbsp;TrimLeadingSpace&nbsp;is&nbsp;true,&nbsp;leading&nbsp;white&nbsp;space&nbsp;in&nbsp;a&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="keyword" id="6174735">type</span>&nbsp;<span class="ident" id="6174740">Reader</span>&nbsp;<span class="keyword" id="6174747">struct</span>&nbsp;<span class="op" id="6174754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174757">Comma</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6174774">rune</span>&nbsp;<span class="comment" id="6174779">//&nbsp;field&nbsp;delimiter&nbsp;(set&nbsp;to&nbsp;&#39;,&#39;&nbsp;by&nbsp;NewReader)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174825">Comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6174842">rune</span>&nbsp;<span class="comment" id="6174847">//&nbsp;comment&nbsp;character&nbsp;for&nbsp;start&nbsp;of&nbsp;line</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174887">FieldsPerRecord</span>&nbsp;&nbsp;<span class="builtintype" id="6174904">int</span>&nbsp;&nbsp;<span class="comment" id="6174909">//&nbsp;number&nbsp;of&nbsp;expected&nbsp;fields&nbsp;per&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174950">LazyQuotes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6174967">bool</span>&nbsp;<span class="comment" id="6174972">//&nbsp;allow&nbsp;lazy&nbsp;quotes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6174994">TrailingComma</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6175011">bool</span>&nbsp;<span class="comment" id="6175016">//&nbsp;ignored;&nbsp;here&nbsp;for&nbsp;backwards&nbsp;compatibility</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175062">TrimLeadingSpace</span>&nbsp;<span class="builtintype" id="6175079">bool</span>&nbsp;<span class="comment" id="6175084">//&nbsp;trim&nbsp;leading&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175107">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6175124">int</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175129">column</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6175146">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175151">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6175168">*</span><span class="ident" id="6175169">bufio</span><span class="op" id="6175174">.</span><span class="ident" id="6175175">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175183">field</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6175200">bytes</span><span class="op" id="6175205">.</span><span class="ident" id="6175206">Buffer</span><br>
<span class="lineno"></span><span class="op" id="6175213">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span><span class="comment" id="6175216">//&nbsp;NewReader&nbsp;returns&nbsp;a&nbsp;new&nbsp;Reader&nbsp;that&nbsp;reads&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="keyword" id="6175269">func</span>&nbsp;<span class="ident" id="6175274">NewReader</span><span class="op" id="6175283">(</span><span class="ident" id="6175284">r</span>&nbsp;<span class="ident" id="6175286">io</span><span class="op" id="6175288">.</span><span class="ident" id="6175289">Reader</span><span class="op" id="6175295">)</span>&nbsp;<span class="op" id="6175297">*</span><span class="ident" id="6175298">Reader</span>&nbsp;<span class="op" id="6175305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175308">return</span>&nbsp;<span class="op" id="6175315">&amp;</span><span class="ident" id="6175316">Reader</span><span class="op" id="6175322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175326">Comma</span><span class="op" id="6175331">:</span>&nbsp;<span class="string" id="6175333">&#39;,&#39;</span><span class="op" id="6175336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175340">r</span><span class="op" id="6175341">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6175347">bufio</span><span class="op" id="6175352">.</span><span class="ident" id="6175353">NewReader</span><span class="op" id="6175362">(</span><span class="ident" id="6175363">r</span><span class="op" id="6175364">)</span><span class="op" id="6175365">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175368">}</span><br>
<span class="lineno"></span><span class="op" id="6175370">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6175373">//&nbsp;error&nbsp;creates&nbsp;a&nbsp;new&nbsp;ParseError&nbsp;based&nbsp;on&nbsp;err.</span><br>
<span class="lineno"></span><span class="keyword" id="6175421">func</span>&nbsp;<span class="op" id="6175426">(</span><span class="ident" id="6175427">r</span>&nbsp;<span class="op" id="6175429">*</span><span class="ident" id="6175430">Reader</span><span class="op" id="6175436">)</span>&nbsp;<span class="builtintype" id="6175438">error</span><span class="op" id="6175443">(</span><span class="ident" id="6175444">err</span>&nbsp;<span class="builtintype" id="6175448">error</span><span class="op" id="6175453">)</span>&nbsp;<span class="builtintype" id="6175455">error</span>&nbsp;<span class="op" id="6175461">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175464">return</span>&nbsp;<span class="op" id="6175471">&amp;</span><span class="ident" id="6175472">ParseError</span><span class="op" id="6175482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175486">Line</span><span class="op" id="6175490">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6175494">r</span><span class="op" id="6175495">.</span><span class="ident" id="6175496">line</span><span class="op" id="6175500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175504">Column</span><span class="op" id="6175510">:</span>&nbsp;<span class="ident" id="6175512">r</span><span class="op" id="6175513">.</span><span class="ident" id="6175514">column</span><span class="op" id="6175520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175524">Err</span><span class="op" id="6175527">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6175532">err</span><span class="op" id="6175535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175538">}</span><br>
<span class="lineno">130</span><span class="op" id="6175540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6175543">//&nbsp;Read&nbsp;reads&nbsp;one&nbsp;record&nbsp;from&nbsp;r.&nbsp;&nbsp;The&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;with&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="6175620">//&nbsp;string&nbsp;representing&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span><span class="keyword" id="6175654">func</span>&nbsp;<span class="op" id="6175659">(</span><span class="ident" id="6175660">r</span>&nbsp;<span class="op" id="6175662">*</span><span class="ident" id="6175663">Reader</span><span class="op" id="6175669">)</span>&nbsp;<span class="ident" id="6175671">Read</span><span class="op" id="6175675">(</span><span class="op" id="6175676">)</span>&nbsp;<span class="op" id="6175678">(</span><span class="ident" id="6175679">record</span>&nbsp;<span class="op" id="6175686">[</span><span class="op" id="6175687">]</span><span class="builtintype" id="6175688">string</span><span class="op" id="6175694">,</span>&nbsp;<span class="ident" id="6175696">err</span>&nbsp;<span class="builtintype" id="6175700">error</span><span class="op" id="6175705">)</span>&nbsp;<span class="op" id="6175707">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175710">for</span>&nbsp;<span class="op" id="6175714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175718">record</span><span class="op" id="6175724">,</span>&nbsp;<span class="ident" id="6175726">err</span>&nbsp;<span class="op" id="6175730">=</span>&nbsp;<span class="ident" id="6175732">r</span><span class="op" id="6175733">.</span><span class="ident" id="6175734">parseRecord</span><span class="op" id="6175745">(</span><span class="op" id="6175746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175750">if</span>&nbsp;<span class="ident" id="6175753">record</span>&nbsp;<span class="op" id="6175760">!=</span>&nbsp;<span class="ident" id="6175763">nil</span>&nbsp;<span class="op" id="6175767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175772">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175780">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175784">if</span>&nbsp;<span class="ident" id="6175787">err</span>&nbsp;<span class="op" id="6175791">!=</span>&nbsp;<span class="ident" id="6175794">nil</span>&nbsp;<span class="op" id="6175798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175803">return</span>&nbsp;<span class="ident" id="6175810">nil</span><span class="op" id="6175813">,</span>&nbsp;<span class="ident" id="6175815">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175821">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175828">if</span>&nbsp;<span class="ident" id="6175831">r</span><span class="op" id="6175832">.</span><span class="ident" id="6175833">FieldsPerRecord</span>&nbsp;<span class="op" id="6175849">&gt;</span>&nbsp;<span class="num" id="6175851">0</span>&nbsp;<span class="op" id="6175853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175857">if</span>&nbsp;<span class="builtinfunc" id="6175860">len</span><span class="op" id="6175863">(</span><span class="ident" id="6175864">record</span><span class="op" id="6175870">)</span>&nbsp;<span class="op" id="6175872">!=</span>&nbsp;<span class="ident" id="6175875">r</span><span class="op" id="6175876">.</span><span class="ident" id="6175877">FieldsPerRecord</span>&nbsp;<span class="op" id="6175893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6175898">r</span><span class="op" id="6175899">.</span><span class="ident" id="6175900">column</span>&nbsp;<span class="op" id="6175907">=</span>&nbsp;<span class="num" id="6175909">0</span>&nbsp;<span class="comment" id="6175911">//&nbsp;report&nbsp;at&nbsp;start&nbsp;of&nbsp;record</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6175943">return</span>&nbsp;<span class="ident" id="6175950">record</span><span class="op" id="6175956">,</span>&nbsp;<span class="ident" id="6175958">r</span><span class="op" id="6175959">.</span><span class="builtintype" id="6175960">error</span><span class="op" id="6175965">(</span><span class="ident" id="6175966">ErrFieldCount</span><span class="op" id="6175979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175983">}</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6175986">}</span>&nbsp;<span class="keyword" id="6175988">else</span>&nbsp;<span class="keyword" id="6175993">if</span>&nbsp;<span class="ident" id="6175996">r</span><span class="op" id="6175997">.</span><span class="ident" id="6175998">FieldsPerRecord</span>&nbsp;<span class="op" id="6176014">==</span>&nbsp;<span class="num" id="6176017">0</span>&nbsp;<span class="op" id="6176019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176023">r</span><span class="op" id="6176024">.</span><span class="ident" id="6176025">FieldsPerRecord</span>&nbsp;<span class="op" id="6176041">=</span>&nbsp;<span class="builtinfunc" id="6176043">len</span><span class="op" id="6176046">(</span><span class="ident" id="6176047">record</span><span class="op" id="6176053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176056">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176059">return</span>&nbsp;<span class="ident" id="6176066">record</span><span class="op" id="6176072">,</span>&nbsp;<span class="ident" id="6176074">nil</span><br>
<span class="lineno"></span><span class="op" id="6176078">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="6176081">//&nbsp;ReadAll&nbsp;reads&nbsp;all&nbsp;the&nbsp;remaining&nbsp;records&nbsp;from&nbsp;r.</span><br>
<span class="lineno"></span><span class="comment" id="6176132">//&nbsp;Each&nbsp;record&nbsp;is&nbsp;a&nbsp;slice&nbsp;of&nbsp;fields.</span><br>
<span class="lineno"></span><span class="comment" id="6176169">//&nbsp;A&nbsp;successful&nbsp;call&nbsp;returns&nbsp;err&nbsp;==&nbsp;nil,&nbsp;not&nbsp;err&nbsp;==&nbsp;EOF.&nbsp;Because&nbsp;ReadAll&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6176245">//&nbsp;defined&nbsp;to&nbsp;read&nbsp;until&nbsp;EOF,&nbsp;it&nbsp;does&nbsp;not&nbsp;treat&nbsp;end&nbsp;of&nbsp;file&nbsp;as&nbsp;an&nbsp;error&nbsp;to&nbsp;be</span><br>
<span class="lineno">160</span><span class="comment" id="6176323">//&nbsp;reported.</span><br>
<span class="lineno"></span><span class="keyword" id="6176336">func</span>&nbsp;<span class="op" id="6176341">(</span><span class="ident" id="6176342">r</span>&nbsp;<span class="op" id="6176344">*</span><span class="ident" id="6176345">Reader</span><span class="op" id="6176351">)</span>&nbsp;<span class="ident" id="6176353">ReadAll</span><span class="op" id="6176360">(</span><span class="op" id="6176361">)</span>&nbsp;<span class="op" id="6176363">(</span><span class="ident" id="6176364">records</span>&nbsp;<span class="op" id="6176372">[</span><span class="op" id="6176373">]</span><span class="op" id="6176374">[</span><span class="op" id="6176375">]</span><span class="builtintype" id="6176376">string</span><span class="op" id="6176382">,</span>&nbsp;<span class="ident" id="6176384">err</span>&nbsp;<span class="builtintype" id="6176388">error</span><span class="op" id="6176393">)</span>&nbsp;<span class="op" id="6176395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176398">for</span>&nbsp;<span class="op" id="6176402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176406">record</span><span class="op" id="6176412">,</span>&nbsp;<span class="ident" id="6176414">err</span>&nbsp;<span class="op" id="6176418">:=</span>&nbsp;<span class="ident" id="6176421">r</span><span class="op" id="6176422">.</span><span class="ident" id="6176423">Read</span><span class="op" id="6176427">(</span><span class="op" id="6176428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176432">if</span>&nbsp;<span class="ident" id="6176435">err</span>&nbsp;<span class="op" id="6176439">==</span>&nbsp;<span class="ident" id="6176442">io</span><span class="op" id="6176444">.</span><span class="ident" id="6176445">EOF</span>&nbsp;<span class="op" id="6176449">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176454">return</span>&nbsp;<span class="ident" id="6176461">records</span><span class="op" id="6176468">,</span>&nbsp;<span class="ident" id="6176470">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176480">if</span>&nbsp;<span class="ident" id="6176483">err</span>&nbsp;<span class="op" id="6176487">!=</span>&nbsp;<span class="ident" id="6176490">nil</span>&nbsp;<span class="op" id="6176494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6176499">return</span>&nbsp;<span class="ident" id="6176506">nil</span><span class="op" id="6176509">,</span>&nbsp;<span class="ident" id="6176511">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176517">}</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176521">records</span>&nbsp;<span class="op" id="6176529">=</span>&nbsp;<span class="builtinfunc" id="6176531">append</span><span class="op" id="6176537">(</span><span class="ident" id="6176538">records</span><span class="op" id="6176545">,</span>&nbsp;<span class="ident" id="6176547">record</span><span class="op" id="6176553">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6176556">}</span><br>
<span class="lineno"></span><span class="op" id="6176558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6176561">//&nbsp;readRune&nbsp;reads&nbsp;one&nbsp;rune&nbsp;from&nbsp;r,&nbsp;folding&nbsp;\r\n&nbsp;to&nbsp;\n&nbsp;and&nbsp;keeping&nbsp;track</span><br>
<span class="lineno">175</span><span class="comment" id="6176633">//&nbsp;of&nbsp;how&nbsp;far&nbsp;into&nbsp;the&nbsp;line&nbsp;we&nbsp;have&nbsp;read.&nbsp;&nbsp;r.column&nbsp;will&nbsp;point&nbsp;to&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6176709">//&nbsp;of&nbsp;this&nbsp;rune,&nbsp;not&nbsp;the&nbsp;end&nbsp;of&nbsp;this&nbsp;rune.</span><br>
<span class="lineno"></span><span class="keyword" id="6176752">func</span>&nbsp;<span class="op" id="6176757">(</span><span class="ident" id="6176758">r</span>&nbsp;<span class="op" id="6176760">*</span><span class="ident" id="6176761">Reader</span><span class="op" id="6176767">)</span>&nbsp;<span class="ident" id="6176769">readRune</span><span class="op" id="6176777">(</span><span class="op" id="6176778">)</span>&nbsp;<span class="op" id="6176780">(</span><span class="builtintype" id="6176781">rune</span><span class="op" id="6176785">,</span>&nbsp;<span class="builtintype" id="6176787">error</span><span class="op" id="6176792">)</span>&nbsp;<span class="op" id="6176794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6176797">r1</span><span class="op" id="6176799">,</span>&nbsp;<span class="ident" id="6176801">_</span><span class="op" id="6176802">,</span>&nbsp;<span class="ident" id="6176804">err</span>&nbsp;<span class="op" id="6176808">:=</span>&nbsp;<span class="ident" id="6176811">r</span><span class="op" id="6176812">.</span><span class="ident" id="6176813">r</span><span class="op" id="6176814">.</span><span class="ident" id="6176815">ReadRune</span><span class="op" id="6176823">(</span><span class="op" id="6176824">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176828">//&nbsp;Handle&nbsp;\r\n&nbsp;here.&nbsp;&nbsp;We&nbsp;make&nbsp;the&nbsp;simplifying&nbsp;assumption&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176891">//&nbsp;anytime&nbsp;\r&nbsp;is&nbsp;followed&nbsp;by&nbsp;\n&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;folded&nbsp;to&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6176953">//&nbsp;We&nbsp;will&nbsp;not&nbsp;detect&nbsp;files&nbsp;which&nbsp;contain&nbsp;both&nbsp;\r\n&nbsp;and&nbsp;bare&nbsp;\n.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177019">if</span>&nbsp;<span class="ident" id="6177022">r1</span>&nbsp;<span class="op" id="6177025">==</span>&nbsp;<span class="string" id="6177028">&#39;\r&#39;</span>&nbsp;<span class="op" id="6177033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177037">r1</span><span class="op" id="6177039">,</span>&nbsp;<span class="ident" id="6177041">_</span><span class="op" id="6177042">,</span>&nbsp;<span class="ident" id="6177044">err</span>&nbsp;<span class="op" id="6177048">=</span>&nbsp;<span class="ident" id="6177050">r</span><span class="op" id="6177051">.</span><span class="ident" id="6177052">r</span><span class="op" id="6177053">.</span><span class="ident" id="6177054">ReadRune</span><span class="op" id="6177062">(</span><span class="op" id="6177063">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177067">if</span>&nbsp;<span class="ident" id="6177070">err</span>&nbsp;<span class="op" id="6177074">==</span>&nbsp;<span class="ident" id="6177077">nil</span>&nbsp;<span class="op" id="6177081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177086">if</span>&nbsp;<span class="ident" id="6177089">r1</span>&nbsp;<span class="op" id="6177092">!=</span>&nbsp;<span class="string" id="6177095">&#39;\n&#39;</span>&nbsp;<span class="op" id="6177100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177106">r</span><span class="op" id="6177107">.</span><span class="ident" id="6177108">r</span><span class="op" id="6177109">.</span><span class="ident" id="6177110">UnreadRune</span><span class="op" id="6177120">(</span><span class="op" id="6177121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177127">r1</span>&nbsp;<span class="op" id="6177130">=</span>&nbsp;<span class="string" id="6177132">&#39;\r&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177140">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177144">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177150">r</span><span class="op" id="6177151">.</span><span class="ident" id="6177152">column</span><span class="op" id="6177158">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177162">return</span>&nbsp;<span class="ident" id="6177169">r1</span><span class="op" id="6177171">,</span>&nbsp;<span class="ident" id="6177173">err</span><br>
<span class="lineno"></span><span class="op" id="6177177">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="comment" id="6177180">//&nbsp;skip&nbsp;reads&nbsp;runes&nbsp;up&nbsp;to&nbsp;and&nbsp;including&nbsp;the&nbsp;rune&nbsp;delim&nbsp;or&nbsp;until&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6177251">func</span>&nbsp;<span class="op" id="6177256">(</span><span class="ident" id="6177257">r</span>&nbsp;<span class="op" id="6177259">*</span><span class="ident" id="6177260">Reader</span><span class="op" id="6177266">)</span>&nbsp;<span class="ident" id="6177268">skip</span><span class="op" id="6177272">(</span><span class="ident" id="6177273">delim</span>&nbsp;<span class="builtintype" id="6177279">rune</span><span class="op" id="6177283">)</span>&nbsp;<span class="builtintype" id="6177285">error</span>&nbsp;<span class="op" id="6177291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177294">for</span>&nbsp;<span class="op" id="6177298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177302">r1</span><span class="op" id="6177304">,</span>&nbsp;<span class="ident" id="6177306">err</span>&nbsp;<span class="op" id="6177310">:=</span>&nbsp;<span class="ident" id="6177313">r</span><span class="op" id="6177314">.</span><span class="ident" id="6177315">readRune</span><span class="op" id="6177323">(</span><span class="op" id="6177324">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177328">if</span>&nbsp;<span class="ident" id="6177331">err</span>&nbsp;<span class="op" id="6177335">!=</span>&nbsp;<span class="ident" id="6177338">nil</span>&nbsp;<span class="op" id="6177342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177347">return</span>&nbsp;<span class="ident" id="6177354">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177364">if</span>&nbsp;<span class="ident" id="6177367">r1</span>&nbsp;<span class="op" id="6177370">==</span>&nbsp;<span class="ident" id="6177373">delim</span>&nbsp;<span class="op" id="6177379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177384">return</span>&nbsp;<span class="ident" id="6177391">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177397">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177400">}</span><br>
<span class="lineno"></span><span class="op" id="6177402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6177405">//&nbsp;parseRecord&nbsp;reads&nbsp;and&nbsp;parses&nbsp;a&nbsp;single&nbsp;csv&nbsp;record&nbsp;from&nbsp;r.</span><br>
<span class="lineno">210</span><span class="keyword" id="6177465">func</span>&nbsp;<span class="op" id="6177470">(</span><span class="ident" id="6177471">r</span>&nbsp;<span class="op" id="6177473">*</span><span class="ident" id="6177474">Reader</span><span class="op" id="6177480">)</span>&nbsp;<span class="ident" id="6177482">parseRecord</span><span class="op" id="6177493">(</span><span class="op" id="6177494">)</span>&nbsp;<span class="op" id="6177496">(</span><span class="ident" id="6177497">fields</span>&nbsp;<span class="op" id="6177504">[</span><span class="op" id="6177505">]</span><span class="builtintype" id="6177506">string</span><span class="op" id="6177512">,</span>&nbsp;<span class="ident" id="6177514">err</span>&nbsp;<span class="builtintype" id="6177518">error</span><span class="op" id="6177523">)</span>&nbsp;<span class="op" id="6177525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177528">//&nbsp;Each&nbsp;record&nbsp;starts&nbsp;on&nbsp;a&nbsp;new&nbsp;line.&nbsp;&nbsp;We&nbsp;increment&nbsp;our&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177589">//&nbsp;number&nbsp;(lines&nbsp;start&nbsp;at&nbsp;1,&nbsp;not&nbsp;0)&nbsp;and&nbsp;set&nbsp;column&nbsp;to&nbsp;-1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177647">//&nbsp;so&nbsp;as&nbsp;we&nbsp;increment&nbsp;in&nbsp;readRune&nbsp;it&nbsp;points&nbsp;to&nbsp;the&nbsp;character&nbsp;we&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177718">r</span><span class="op" id="6177719">.</span><span class="ident" id="6177720">line</span><span class="op" id="6177724">++</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177728">r</span><span class="op" id="6177729">.</span><span class="ident" id="6177730">column</span>&nbsp;<span class="op" id="6177737">=</span>&nbsp;<span class="op" id="6177739">-</span><span class="num" id="6177740">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177744">//&nbsp;Peek&nbsp;at&nbsp;the&nbsp;first&nbsp;rune.&nbsp;&nbsp;If&nbsp;it&nbsp;is&nbsp;an&nbsp;error&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177804">//&nbsp;If&nbsp;we&nbsp;are&nbsp;support&nbsp;comments&nbsp;and&nbsp;it&nbsp;is&nbsp;the&nbsp;comment&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6177867">//&nbsp;then&nbsp;skip&nbsp;to&nbsp;the&nbsp;end&nbsp;of&nbsp;line.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6177902">r1</span><span class="op" id="6177904">,</span>&nbsp;<span class="ident" id="6177906">_</span><span class="op" id="6177907">,</span>&nbsp;<span class="ident" id="6177909">err</span>&nbsp;<span class="op" id="6177913">:=</span>&nbsp;<span class="ident" id="6177916">r</span><span class="op" id="6177917">.</span><span class="ident" id="6177918">r</span><span class="op" id="6177919">.</span><span class="ident" id="6177920">ReadRune</span><span class="op" id="6177928">(</span><span class="op" id="6177929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177932">if</span>&nbsp;<span class="ident" id="6177935">err</span>&nbsp;<span class="op" id="6177939">!=</span>&nbsp;<span class="ident" id="6177942">nil</span>&nbsp;<span class="op" id="6177946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177950">return</span>&nbsp;<span class="ident" id="6177957">nil</span><span class="op" id="6177960">,</span>&nbsp;<span class="ident" id="6177962">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6177967">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6177971">if</span>&nbsp;<span class="ident" id="6177974">r</span><span class="op" id="6177975">.</span><span class="ident" id="6177976">Comment</span>&nbsp;<span class="op" id="6177984">!=</span>&nbsp;<span class="num" id="6177987">0</span>&nbsp;<span class="op" id="6177989">&amp;&amp;</span>&nbsp;<span class="ident" id="6177992">r1</span>&nbsp;<span class="op" id="6177995">==</span>&nbsp;<span class="ident" id="6177998">r</span><span class="op" id="6177999">.</span><span class="ident" id="6178000">Comment</span>&nbsp;<span class="op" id="6178008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178012">return</span>&nbsp;<span class="ident" id="6178019">nil</span><span class="op" id="6178022">,</span>&nbsp;<span class="ident" id="6178024">r</span><span class="op" id="6178025">.</span><span class="ident" id="6178026">skip</span><span class="op" id="6178030">(</span><span class="string" id="6178031">&#39;\n&#39;</span><span class="op" id="6178035">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178041">r</span><span class="op" id="6178042">.</span><span class="ident" id="6178043">r</span><span class="op" id="6178044">.</span><span class="ident" id="6178045">UnreadRune</span><span class="op" id="6178055">(</span><span class="op" id="6178056">)</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6178060">//&nbsp;At&nbsp;this&nbsp;point&nbsp;we&nbsp;have&nbsp;at&nbsp;least&nbsp;one&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178106">for</span>&nbsp;<span class="op" id="6178110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178114">haveField</span><span class="op" id="6178123">,</span>&nbsp;<span class="ident" id="6178125">delim</span><span class="op" id="6178130">,</span>&nbsp;<span class="ident" id="6178132">err</span>&nbsp;<span class="op" id="6178136">:=</span>&nbsp;<span class="ident" id="6178139">r</span><span class="op" id="6178140">.</span><span class="ident" id="6178141">parseField</span><span class="op" id="6178151">(</span><span class="op" id="6178152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178156">if</span>&nbsp;<span class="ident" id="6178159">haveField</span>&nbsp;<span class="op" id="6178169">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178174">fields</span>&nbsp;<span class="op" id="6178181">=</span>&nbsp;<span class="builtinfunc" id="6178183">append</span><span class="op" id="6178189">(</span><span class="ident" id="6178190">fields</span><span class="op" id="6178196">,</span>&nbsp;<span class="ident" id="6178198">r</span><span class="op" id="6178199">.</span><span class="ident" id="6178200">field</span><span class="op" id="6178205">.</span><span class="ident" id="6178206">String</span><span class="op" id="6178212">(</span><span class="op" id="6178213">)</span><span class="op" id="6178214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178222">if</span>&nbsp;<span class="ident" id="6178225">delim</span>&nbsp;<span class="op" id="6178231">==</span>&nbsp;<span class="string" id="6178234">&#39;\n&#39;</span>&nbsp;<span class="op" id="6178239">||</span>&nbsp;<span class="ident" id="6178242">err</span>&nbsp;<span class="op" id="6178246">==</span>&nbsp;<span class="ident" id="6178249">io</span><span class="op" id="6178251">.</span><span class="ident" id="6178252">EOF</span>&nbsp;<span class="op" id="6178256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178261">return</span>&nbsp;<span class="ident" id="6178268">fields</span><span class="op" id="6178274">,</span>&nbsp;<span class="ident" id="6178276">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178282">}</span>&nbsp;<span class="keyword" id="6178284">else</span>&nbsp;<span class="keyword" id="6178289">if</span>&nbsp;<span class="ident" id="6178292">err</span>&nbsp;<span class="op" id="6178296">!=</span>&nbsp;<span class="ident" id="6178299">nil</span>&nbsp;<span class="op" id="6178303">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178308">return</span>&nbsp;<span class="ident" id="6178315">nil</span><span class="op" id="6178318">,</span>&nbsp;<span class="ident" id="6178320">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178329">}</span><br>
<span class="lineno"></span><span class="op" id="6178331">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="comment" id="6178334">//&nbsp;parseField&nbsp;parses&nbsp;the&nbsp;next&nbsp;field&nbsp;in&nbsp;the&nbsp;record.&nbsp;&nbsp;The&nbsp;read&nbsp;field&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6178404">//&nbsp;located&nbsp;in&nbsp;r.field.&nbsp;&nbsp;Delim&nbsp;is&nbsp;the&nbsp;first&nbsp;character&nbsp;not&nbsp;part&nbsp;of&nbsp;the&nbsp;field</span><br>
<span class="lineno"></span><span class="comment" id="6178479">//&nbsp;(r.Comma&nbsp;or&nbsp;&#39;\n&#39;).</span><br>
<span class="lineno"></span><span class="keyword" id="6178501">func</span>&nbsp;<span class="op" id="6178506">(</span><span class="ident" id="6178507">r</span>&nbsp;<span class="op" id="6178509">*</span><span class="ident" id="6178510">Reader</span><span class="op" id="6178516">)</span>&nbsp;<span class="ident" id="6178518">parseField</span><span class="op" id="6178528">(</span><span class="op" id="6178529">)</span>&nbsp;<span class="op" id="6178531">(</span><span class="ident" id="6178532">haveField</span>&nbsp;<span class="builtintype" id="6178542">bool</span><span class="op" id="6178546">,</span>&nbsp;<span class="ident" id="6178548">delim</span>&nbsp;<span class="builtintype" id="6178554">rune</span><span class="op" id="6178558">,</span>&nbsp;<span class="ident" id="6178560">err</span>&nbsp;<span class="builtintype" id="6178564">error</span><span class="op" id="6178569">)</span>&nbsp;<span class="op" id="6178571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178574">r</span><span class="op" id="6178575">.</span><span class="ident" id="6178576">field</span><span class="op" id="6178581">.</span><span class="ident" id="6178582">Reset</span><span class="op" id="6178587">(</span><span class="op" id="6178588">)</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178592">r1</span><span class="op" id="6178594">,</span>&nbsp;<span class="ident" id="6178596">err</span>&nbsp;<span class="op" id="6178600">:=</span>&nbsp;<span class="ident" id="6178603">r</span><span class="op" id="6178604">.</span><span class="ident" id="6178605">readRune</span><span class="op" id="6178613">(</span><span class="op" id="6178614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178617">for</span>&nbsp;<span class="ident" id="6178621">err</span>&nbsp;<span class="op" id="6178625">==</span>&nbsp;<span class="ident" id="6178628">nil</span>&nbsp;<span class="op" id="6178632">&amp;&amp;</span>&nbsp;<span class="ident" id="6178635">r</span><span class="op" id="6178636">.</span><span class="ident" id="6178637">TrimLeadingSpace</span>&nbsp;<span class="op" id="6178654">&amp;&amp;</span>&nbsp;<span class="ident" id="6178657">r1</span>&nbsp;<span class="op" id="6178660">!=</span>&nbsp;<span class="string" id="6178663">&#39;\n&#39;</span>&nbsp;<span class="op" id="6178668">&amp;&amp;</span>&nbsp;<span class="ident" id="6178671">unicode</span><span class="op" id="6178678">.</span><span class="ident" id="6178679">IsSpace</span><span class="op" id="6178686">(</span><span class="ident" id="6178687">r1</span><span class="op" id="6178689">)</span>&nbsp;<span class="op" id="6178691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6178695">r1</span><span class="op" id="6178697">,</span>&nbsp;<span class="ident" id="6178699">err</span>&nbsp;<span class="op" id="6178703">=</span>&nbsp;<span class="ident" id="6178705">r</span><span class="op" id="6178706">.</span><span class="ident" id="6178707">readRune</span><span class="op" id="6178715">(</span><span class="op" id="6178716">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178719">}</span><br>
<span class="lineno">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178723">if</span>&nbsp;<span class="ident" id="6178726">err</span>&nbsp;<span class="op" id="6178730">==</span>&nbsp;<span class="ident" id="6178733">io</span><span class="op" id="6178735">.</span><span class="ident" id="6178736">EOF</span>&nbsp;<span class="op" id="6178740">&amp;&amp;</span>&nbsp;<span class="ident" id="6178743">r</span><span class="op" id="6178744">.</span><span class="ident" id="6178745">column</span>&nbsp;<span class="op" id="6178752">!=</span>&nbsp;<span class="num" id="6178755">0</span>&nbsp;<span class="op" id="6178757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178761">return</span>&nbsp;<span class="builtintype" id="6178768">true</span><span class="op" id="6178772">,</span>&nbsp;<span class="num" id="6178774">0</span><span class="op" id="6178775">,</span>&nbsp;<span class="ident" id="6178777">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178785">if</span>&nbsp;<span class="ident" id="6178788">err</span>&nbsp;<span class="op" id="6178792">!=</span>&nbsp;<span class="ident" id="6178795">nil</span>&nbsp;<span class="op" id="6178799">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178803">return</span>&nbsp;<span class="builtintype" id="6178810">false</span><span class="op" id="6178815">,</span>&nbsp;<span class="num" id="6178817">0</span><span class="op" id="6178818">,</span>&nbsp;<span class="ident" id="6178820">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178829">switch</span>&nbsp;<span class="ident" id="6178836">r1</span>&nbsp;<span class="op" id="6178839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178842">case</span>&nbsp;<span class="ident" id="6178847">r</span><span class="op" id="6178848">.</span><span class="ident" id="6178849">Comma</span><span class="op" id="6178854">:</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6178858">//&nbsp;will&nbsp;check&nbsp;below</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178880">case</span>&nbsp;<span class="string" id="6178885">&#39;\n&#39;</span><span class="op" id="6178889">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6178893">//&nbsp;We&nbsp;are&nbsp;a&nbsp;trailing&nbsp;empty&nbsp;field&nbsp;or&nbsp;a&nbsp;blank&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178944">if</span>&nbsp;<span class="ident" id="6178947">r</span><span class="op" id="6178948">.</span><span class="ident" id="6178949">column</span>&nbsp;<span class="op" id="6178956">==</span>&nbsp;<span class="num" id="6178959">0</span>&nbsp;<span class="op" id="6178961">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178966">return</span>&nbsp;<span class="builtintype" id="6178973">false</span><span class="op" id="6178978">,</span>&nbsp;<span class="ident" id="6178980">r1</span><span class="op" id="6178982">,</span>&nbsp;<span class="ident" id="6178984">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6178990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6178994">return</span>&nbsp;<span class="builtintype" id="6179001">true</span><span class="op" id="6179005">,</span>&nbsp;<span class="ident" id="6179007">r1</span><span class="op" id="6179009">,</span>&nbsp;<span class="ident" id="6179011">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179017">case</span>&nbsp;<span class="string" id="6179022">&#39;&#34;&#39;</span><span class="op" id="6179025">:</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179029">//&nbsp;quoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179046">Quoted</span><span class="op" id="6179052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179056">for</span>&nbsp;<span class="op" id="6179060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179065">r1</span><span class="op" id="6179067">,</span>&nbsp;<span class="ident" id="6179069">err</span>&nbsp;<span class="op" id="6179073">=</span>&nbsp;<span class="ident" id="6179075">r</span><span class="op" id="6179076">.</span><span class="ident" id="6179077">readRune</span><span class="op" id="6179085">(</span><span class="op" id="6179086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179091">if</span>&nbsp;<span class="ident" id="6179094">err</span>&nbsp;<span class="op" id="6179098">!=</span>&nbsp;<span class="ident" id="6179101">nil</span>&nbsp;<span class="op" id="6179105">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179111">if</span>&nbsp;<span class="ident" id="6179114">err</span>&nbsp;<span class="op" id="6179118">==</span>&nbsp;<span class="ident" id="6179121">io</span><span class="op" id="6179123">.</span><span class="ident" id="6179124">EOF</span>&nbsp;<span class="op" id="6179128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179135">if</span>&nbsp;<span class="ident" id="6179138">r</span><span class="op" id="6179139">.</span><span class="ident" id="6179140">LazyQuotes</span>&nbsp;<span class="op" id="6179151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179159">return</span>&nbsp;<span class="builtintype" id="6179166">true</span><span class="op" id="6179170">,</span>&nbsp;<span class="num" id="6179172">0</span><span class="op" id="6179173">,</span>&nbsp;<span class="ident" id="6179175">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179191">return</span>&nbsp;<span class="builtintype" id="6179198">false</span><span class="op" id="6179203">,</span>&nbsp;<span class="num" id="6179205">0</span><span class="op" id="6179206">,</span>&nbsp;<span class="ident" id="6179208">r</span><span class="op" id="6179209">.</span><span class="builtintype" id="6179210">error</span><span class="op" id="6179215">(</span><span class="ident" id="6179216">ErrQuote</span><span class="op" id="6179224">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179236">return</span>&nbsp;<span class="builtintype" id="6179243">false</span><span class="op" id="6179248">,</span>&nbsp;<span class="num" id="6179250">0</span><span class="op" id="6179251">,</span>&nbsp;<span class="ident" id="6179253">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179265">switch</span>&nbsp;<span class="ident" id="6179272">r1</span>&nbsp;<span class="op" id="6179275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179280">case</span>&nbsp;<span class="string" id="6179285">&#39;&#34;&#39;</span><span class="op" id="6179288">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179294">r1</span><span class="op" id="6179296">,</span>&nbsp;<span class="ident" id="6179298">err</span>&nbsp;<span class="op" id="6179302">=</span>&nbsp;<span class="ident" id="6179304">r</span><span class="op" id="6179305">.</span><span class="ident" id="6179306">readRune</span><span class="op" id="6179314">(</span><span class="op" id="6179315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179321">if</span>&nbsp;<span class="ident" id="6179324">err</span>&nbsp;<span class="op" id="6179328">!=</span>&nbsp;<span class="ident" id="6179331">nil</span>&nbsp;<span class="op" id="6179335">||</span>&nbsp;<span class="ident" id="6179338">r1</span>&nbsp;<span class="op" id="6179341">==</span>&nbsp;<span class="ident" id="6179344">r</span><span class="op" id="6179345">.</span><span class="ident" id="6179346">Comma</span>&nbsp;<span class="op" id="6179352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179359">break</span>&nbsp;<span class="ident" id="6179365">Quoted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179382">if</span>&nbsp;<span class="ident" id="6179385">r1</span>&nbsp;<span class="op" id="6179388">==</span>&nbsp;<span class="string" id="6179391">&#39;\n&#39;</span>&nbsp;<span class="op" id="6179396">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179403">return</span>&nbsp;<span class="builtintype" id="6179410">true</span><span class="op" id="6179414">,</span>&nbsp;<span class="ident" id="6179416">r1</span><span class="op" id="6179418">,</span>&nbsp;<span class="ident" id="6179420">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179428">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179434">if</span>&nbsp;<span class="ident" id="6179437">r1</span>&nbsp;<span class="op" id="6179440">!=</span>&nbsp;<span class="string" id="6179443">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6179447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179454">if</span>&nbsp;<span class="op" id="6179457">!</span><span class="ident" id="6179458">r</span><span class="op" id="6179459">.</span><span class="ident" id="6179460">LazyQuotes</span>&nbsp;<span class="op" id="6179471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179479">r</span><span class="op" id="6179480">.</span><span class="ident" id="6179481">column</span><span class="op" id="6179487">--</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179496">return</span>&nbsp;<span class="builtintype" id="6179503">false</span><span class="op" id="6179508">,</span>&nbsp;<span class="num" id="6179510">0</span><span class="op" id="6179511">,</span>&nbsp;<span class="ident" id="6179513">r</span><span class="op" id="6179514">.</span><span class="builtintype" id="6179515">error</span><span class="op" id="6179520">(</span><span class="ident" id="6179521">ErrQuote</span><span class="op" id="6179529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179543">//&nbsp;accept&nbsp;the&nbsp;bare&nbsp;quote</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179573">r</span><span class="op" id="6179574">.</span><span class="ident" id="6179575">field</span><span class="op" id="6179580">.</span><span class="ident" id="6179581">WriteRune</span><span class="op" id="6179590">(</span><span class="string" id="6179591">&#39;&#34;&#39;</span><span class="op" id="6179594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179600">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179605">case</span>&nbsp;<span class="string" id="6179610">&#39;\n&#39;</span><span class="op" id="6179614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179620">r</span><span class="op" id="6179621">.</span><span class="ident" id="6179622">line</span><span class="op" id="6179626">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179633">r</span><span class="op" id="6179634">.</span><span class="ident" id="6179635">column</span>&nbsp;<span class="op" id="6179642">=</span>&nbsp;<span class="op" id="6179644">-</span><span class="num" id="6179645">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179655">r</span><span class="op" id="6179656">.</span><span class="ident" id="6179657">field</span><span class="op" id="6179662">.</span><span class="ident" id="6179663">WriteRune</span><span class="op" id="6179672">(</span><span class="ident" id="6179673">r1</span><span class="op" id="6179675">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179683">default</span><span class="op" id="6179690">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6179694">//&nbsp;unquoted&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179714">for</span>&nbsp;<span class="op" id="6179718">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179723">r</span><span class="op" id="6179724">.</span><span class="ident" id="6179725">field</span><span class="op" id="6179730">.</span><span class="ident" id="6179731">WriteRune</span><span class="op" id="6179740">(</span><span class="ident" id="6179741">r1</span><span class="op" id="6179743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6179748">r1</span><span class="op" id="6179750">,</span>&nbsp;<span class="ident" id="6179752">err</span>&nbsp;<span class="op" id="6179756">=</span>&nbsp;<span class="ident" id="6179758">r</span><span class="op" id="6179759">.</span><span class="ident" id="6179760">readRune</span><span class="op" id="6179768">(</span><span class="op" id="6179769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179774">if</span>&nbsp;<span class="ident" id="6179777">err</span>&nbsp;<span class="op" id="6179781">!=</span>&nbsp;<span class="ident" id="6179784">nil</span>&nbsp;<span class="op" id="6179788">||</span>&nbsp;<span class="ident" id="6179791">r1</span>&nbsp;<span class="op" id="6179794">==</span>&nbsp;<span class="ident" id="6179797">r</span><span class="op" id="6179798">.</span><span class="ident" id="6179799">Comma</span>&nbsp;<span class="op" id="6179805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179811">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179820">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179825">if</span>&nbsp;<span class="ident" id="6179828">r1</span>&nbsp;<span class="op" id="6179831">==</span>&nbsp;<span class="string" id="6179834">&#39;\n&#39;</span>&nbsp;<span class="op" id="6179839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179845">return</span>&nbsp;<span class="builtintype" id="6179852">true</span><span class="op" id="6179856">,</span>&nbsp;<span class="ident" id="6179858">r1</span><span class="op" id="6179860">,</span>&nbsp;<span class="ident" id="6179862">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179874">if</span>&nbsp;<span class="op" id="6179877">!</span><span class="ident" id="6179878">r</span><span class="op" id="6179879">.</span><span class="ident" id="6179880">LazyQuotes</span>&nbsp;<span class="op" id="6179891">&amp;&amp;</span>&nbsp;<span class="ident" id="6179894">r1</span>&nbsp;<span class="op" id="6179897">==</span>&nbsp;<span class="string" id="6179900">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="6179904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179910">return</span>&nbsp;<span class="builtintype" id="6179917">false</span><span class="op" id="6179922">,</span>&nbsp;<span class="num" id="6179924">0</span><span class="op" id="6179925">,</span>&nbsp;<span class="ident" id="6179927">r</span><span class="op" id="6179928">.</span><span class="builtintype" id="6179929">error</span><span class="op" id="6179934">(</span><span class="ident" id="6179935">ErrBareQuote</span><span class="op" id="6179947">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179956">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6179959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179963">if</span>&nbsp;<span class="ident" id="6179966">err</span>&nbsp;<span class="op" id="6179970">!=</span>&nbsp;<span class="ident" id="6179973">nil</span>&nbsp;<span class="op" id="6179977">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6179981">if</span>&nbsp;<span class="ident" id="6179984">err</span>&nbsp;<span class="op" id="6179988">==</span>&nbsp;<span class="ident" id="6179991">io</span><span class="op" id="6179993">.</span><span class="ident" id="6179994">EOF</span>&nbsp;<span class="op" id="6179998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180003">return</span>&nbsp;<span class="builtintype" id="6180010">true</span><span class="op" id="6180014">,</span>&nbsp;<span class="num" id="6180016">0</span><span class="op" id="6180017">,</span>&nbsp;<span class="ident" id="6180019">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180029">return</span>&nbsp;<span class="builtintype" id="6180036">false</span><span class="op" id="6180041">,</span>&nbsp;<span class="num" id="6180043">0</span><span class="op" id="6180044">,</span>&nbsp;<span class="ident" id="6180046">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6180051">}</span><br>
<span class="lineno">335</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6180055">return</span>&nbsp;<span class="builtintype" id="6180062">true</span><span class="op" id="6180066">,</span>&nbsp;<span class="ident" id="6180068">r1</span><span class="op" id="6180070">,</span>&nbsp;<span class="ident" id="6180072">nil</span><br>
<span class="lineno"></span><span class="op" id="6180076">}</span>
</div>
</body>
</html>
