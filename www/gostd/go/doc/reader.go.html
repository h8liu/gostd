<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/doc</h2>
<ul>
<li><a href="/gostd/go/doc/comment.go.html">comment.go</a></li>
<li><a href="/gostd/go/doc/comment_test.go.html">comment_test.go</a></li>
<li><a href="/gostd/go/doc/doc.go.html">doc.go</a></li>
<li><a href="/gostd/go/doc/doc_test.go.html">doc_test.go</a></li>
<li><a href="/gostd/go/doc/example.go.html">example.go</a></li>
<li><a href="/gostd/go/doc/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/doc/exports.go.html">exports.go</a></li>
<li><a href="/gostd/go/doc/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/doc/reader.go.html" class="current">reader.go</a></li>
<li><a href="/gostd/go/doc/synopsis.go.html">synopsis.go</a></li>
<li><a href="/gostd/go/doc/synopsis_test.go.html">synopsis_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3027754">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3027809">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3027863">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3027914">package</span>&nbsp;<span class="ident" id="3027922">doc</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3027927">import</span>&nbsp;<span class="op" id="3027934">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3027937">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3027947">&#34;go/token&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3027959">&#34;regexp&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3027969">&#34;sort&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3027977">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3027987">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="3027990">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3028070">//&nbsp;function/method&nbsp;sets</span><br>
<span class="lineno"></span><span class="comment" id="3028094">//</span><br>
<span class="lineno"></span><span class="comment" id="3028097">//&nbsp;Internally,&nbsp;we&nbsp;treat&nbsp;functions&nbsp;like&nbsp;methods&nbsp;and&nbsp;collect&nbsp;them&nbsp;in&nbsp;method&nbsp;sets.</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="3028178">//&nbsp;A&nbsp;methodSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;methods.&nbsp;Entries&nbsp;where&nbsp;Decl&nbsp;==&nbsp;nil&nbsp;are&nbsp;conflict</span><br>
<span class="lineno"></span><span class="comment" id="3028260">//&nbsp;entries&nbsp;(more&nbsp;then&nbsp;one&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;embedding&nbsp;level).</span><br>
<span class="lineno"></span><span class="comment" id="3028342">//</span><br>
<span class="lineno"></span><span class="keyword" id="3028345">type</span>&nbsp;<span class="ident" id="3028350">methodSet</span>&nbsp;<span class="keyword" id="3028360">map</span><span class="op" id="3028363">[</span><span class="builtintype" id="3028364">string</span><span class="op" id="3028370">]</span><span class="op" id="3028371">*</span><span class="ident" id="3028372">Func</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="comment" id="3028378">//&nbsp;recvString&nbsp;returns&nbsp;a&nbsp;string&nbsp;representation&nbsp;of&nbsp;recv&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3028439">//&nbsp;form&nbsp;&#34;T&#34;,&nbsp;&#34;*T&#34;,&nbsp;or&nbsp;&#34;BADRECV&#34;&nbsp;(if&nbsp;not&nbsp;a&nbsp;proper&nbsp;receiver&nbsp;type).</span><br>
<span class="lineno"></span><span class="comment" id="3028504">//</span><br>
<span class="lineno"></span><span class="keyword" id="3028507">func</span>&nbsp;<span class="ident" id="3028512">recvString</span><span class="op" id="3028522">(</span><span class="ident" id="3028523">recv</span>&nbsp;<span class="ident" id="3028528">ast</span><span class="op" id="3028531">.</span><span class="ident" id="3028532">Expr</span><span class="op" id="3028536">)</span>&nbsp;<span class="builtintype" id="3028538">string</span>&nbsp;<span class="op" id="3028545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028548">switch</span>&nbsp;<span class="ident" id="3028555">t</span>&nbsp;<span class="op" id="3028557">:=</span>&nbsp;<span class="ident" id="3028560">recv</span><span class="op" id="3028564">.</span><span class="op" id="3028565">(</span><span class="keyword" id="3028566">type</span><span class="op" id="3028570">)</span>&nbsp;<span class="op" id="3028572">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028575">case</span>&nbsp;<span class="op" id="3028580">*</span><span class="ident" id="3028581">ast</span><span class="op" id="3028584">.</span><span class="ident" id="3028585">Ident</span><span class="op" id="3028590">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028594">return</span>&nbsp;<span class="ident" id="3028601">t</span><span class="op" id="3028602">.</span><span class="ident" id="3028603">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028609">case</span>&nbsp;<span class="op" id="3028614">*</span><span class="ident" id="3028615">ast</span><span class="op" id="3028618">.</span><span class="ident" id="3028619">StarExpr</span><span class="op" id="3028627">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028631">return</span>&nbsp;<span class="string" id="3028638">&#34;*&#34;</span>&nbsp;<span class="op" id="3028642">+</span>&nbsp;<span class="ident" id="3028644">recvString</span><span class="op" id="3028654">(</span><span class="ident" id="3028655">t</span><span class="op" id="3028656">.</span><span class="ident" id="3028657">X</span><span class="op" id="3028658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3028661">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028664">return</span>&nbsp;<span class="string" id="3028671">&#34;BADRECV&#34;</span><br>
<span class="lineno"></span><span class="op" id="3028681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3028684">//&nbsp;set&nbsp;creates&nbsp;the&nbsp;corresponding&nbsp;Func&nbsp;for&nbsp;f&nbsp;and&nbsp;adds&nbsp;it&nbsp;to&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="3028749">//&nbsp;If&nbsp;there&nbsp;are&nbsp;multiple&nbsp;f&#39;s&nbsp;with&nbsp;the&nbsp;same&nbsp;name,&nbsp;set&nbsp;keeps&nbsp;the&nbsp;first</span><br>
<span class="lineno">40</span><span class="comment" id="3028818">//&nbsp;one&nbsp;with&nbsp;documentation;&nbsp;conflicts&nbsp;are&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="3028868">//</span><br>
<span class="lineno"></span><span class="keyword" id="3028871">func</span>&nbsp;<span class="op" id="3028876">(</span><span class="ident" id="3028877">mset</span>&nbsp;<span class="ident" id="3028882">methodSet</span><span class="op" id="3028891">)</span>&nbsp;<span class="ident" id="3028893">set</span><span class="op" id="3028896">(</span><span class="ident" id="3028897">f</span>&nbsp;<span class="op" id="3028899">*</span><span class="ident" id="3028900">ast</span><span class="op" id="3028903">.</span><span class="ident" id="3028904">FuncDecl</span><span class="op" id="3028912">)</span>&nbsp;<span class="op" id="3028914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3028917">name</span>&nbsp;<span class="op" id="3028922">:=</span>&nbsp;<span class="ident" id="3028925">f</span><span class="op" id="3028926">.</span><span class="ident" id="3028927">Name</span><span class="op" id="3028931">.</span><span class="ident" id="3028932">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3028938">if</span>&nbsp;<span class="ident" id="3028941">g</span>&nbsp;<span class="op" id="3028943">:=</span>&nbsp;<span class="ident" id="3028946">mset</span><span class="op" id="3028950">[</span><span class="ident" id="3028951">name</span><span class="op" id="3028955">]</span><span class="op" id="3028956">;</span>&nbsp;<span class="ident" id="3028958">g</span>&nbsp;<span class="op" id="3028960">!=</span>&nbsp;<span class="ident" id="3028963">nil</span>&nbsp;<span class="op" id="3028967">&amp;&amp;</span>&nbsp;<span class="ident" id="3028970">g</span><span class="op" id="3028971">.</span><span class="ident" id="3028972">Doc</span>&nbsp;<span class="op" id="3028976">!=</span>&nbsp;<span class="string" id="3028979">&#34;&#34;</span>&nbsp;<span class="op" id="3028982">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3028986">//&nbsp;A&nbsp;function&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;has&nbsp;already&nbsp;been&nbsp;registered;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029050">//&nbsp;since&nbsp;it&nbsp;has&nbsp;documentation,&nbsp;assume&nbsp;f&nbsp;is&nbsp;simply&nbsp;another</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029110">//&nbsp;implementation&nbsp;and&nbsp;ignore&nbsp;it.&nbsp;This&nbsp;does&nbsp;not&nbsp;happen&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029173">//&nbsp;caller&nbsp;is&nbsp;using&nbsp;go/build.ScanDir&nbsp;to&nbsp;determine&nbsp;the&nbsp;list&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029236">//&nbsp;files&nbsp;implementing&nbsp;a&nbsp;package.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029271">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029279">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029282">//&nbsp;function&nbsp;doesn&#39;t&nbsp;exist&nbsp;or&nbsp;has&nbsp;no&nbsp;documentation;&nbsp;use&nbsp;f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029340">recv</span>&nbsp;<span class="op" id="3029345">:=</span>&nbsp;<span class="string" id="3029348">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029352">if</span>&nbsp;<span class="ident" id="3029355">f</span><span class="op" id="3029356">.</span><span class="ident" id="3029357">Recv</span>&nbsp;<span class="op" id="3029362">!=</span>&nbsp;<span class="ident" id="3029365">nil</span>&nbsp;<span class="op" id="3029369">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029373">var</span>&nbsp;<span class="ident" id="3029377">typ</span>&nbsp;<span class="ident" id="3029381">ast</span><span class="op" id="3029384">.</span><span class="ident" id="3029385">Expr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3029392">//&nbsp;be&nbsp;careful&nbsp;in&nbsp;case&nbsp;of&nbsp;incorrect&nbsp;ASTs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029434">if</span>&nbsp;<span class="ident" id="3029437">list</span>&nbsp;<span class="op" id="3029442">:=</span>&nbsp;<span class="ident" id="3029445">f</span><span class="op" id="3029446">.</span><span class="ident" id="3029447">Recv</span><span class="op" id="3029451">.</span><span class="ident" id="3029452">List</span><span class="op" id="3029456">;</span>&nbsp;<span class="builtinfunc" id="3029458">len</span><span class="op" id="3029461">(</span><span class="ident" id="3029462">list</span><span class="op" id="3029466">)</span>&nbsp;<span class="op" id="3029468">==</span>&nbsp;<span class="num" id="3029471">1</span>&nbsp;<span class="op" id="3029473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029478">typ</span>&nbsp;<span class="op" id="3029482">=</span>&nbsp;<span class="ident" id="3029484">list</span><span class="op" id="3029488">[</span><span class="num" id="3029489">0</span><span class="op" id="3029490">]</span><span class="op" id="3029491">.</span><span class="ident" id="3029492">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029499">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029503">recv</span>&nbsp;<span class="op" id="3029508">=</span>&nbsp;<span class="ident" id="3029510">recvString</span><span class="op" id="3029520">(</span><span class="ident" id="3029521">typ</span><span class="op" id="3029524">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029530">mset</span><span class="op" id="3029534">[</span><span class="ident" id="3029535">name</span><span class="op" id="3029539">]</span>&nbsp;<span class="op" id="3029541">=</span>&nbsp;<span class="op" id="3029543">&amp;</span><span class="ident" id="3029544">Func</span><span class="op" id="3029548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029552">Doc</span><span class="op" id="3029555">:</span>&nbsp;&nbsp;<span class="ident" id="3029558">f</span><span class="op" id="3029559">.</span><span class="ident" id="3029560">Doc</span><span class="op" id="3029563">.</span><span class="ident" id="3029564">Text</span><span class="op" id="3029568">(</span><span class="op" id="3029569">)</span><span class="op" id="3029570">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029574">Name</span><span class="op" id="3029578">:</span>&nbsp;<span class="ident" id="3029580">name</span><span class="op" id="3029584">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029588">Decl</span><span class="op" id="3029592">:</span>&nbsp;<span class="ident" id="3029594">f</span><span class="op" id="3029595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029599">Recv</span><span class="op" id="3029603">:</span>&nbsp;<span class="ident" id="3029605">recv</span><span class="op" id="3029609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029613">Orig</span><span class="op" id="3029617">:</span>&nbsp;<span class="ident" id="3029619">recv</span><span class="op" id="3029623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029629">f</span><span class="op" id="3029630">.</span><span class="ident" id="3029631">Doc</span>&nbsp;<span class="op" id="3029635">=</span>&nbsp;<span class="ident" id="3029637">nil</span>&nbsp;<span class="comment" id="3029641">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno">70</span><span class="op" id="3029675">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3029678">//&nbsp;add&nbsp;adds&nbsp;method&nbsp;m&nbsp;to&nbsp;the&nbsp;method&nbsp;set;&nbsp;m&nbsp;is&nbsp;ignored&nbsp;if&nbsp;the&nbsp;method&nbsp;set</span><br>
<span class="lineno"></span><span class="comment" id="3029749">//&nbsp;already&nbsp;contains&nbsp;a&nbsp;method&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;at&nbsp;the&nbsp;same&nbsp;or&nbsp;a&nbsp;higher</span><br>
<span class="lineno"></span><span class="comment" id="3029821">//&nbsp;level&nbsp;then&nbsp;m.</span><br>
<span class="lineno">75</span><span class="comment" id="3029838">//</span><br>
<span class="lineno"></span><span class="keyword" id="3029841">func</span>&nbsp;<span class="op" id="3029846">(</span><span class="ident" id="3029847">mset</span>&nbsp;<span class="ident" id="3029852">methodSet</span><span class="op" id="3029861">)</span>&nbsp;<span class="ident" id="3029863">add</span><span class="op" id="3029866">(</span><span class="ident" id="3029867">m</span>&nbsp;<span class="op" id="3029869">*</span><span class="ident" id="3029870">Func</span><span class="op" id="3029874">)</span>&nbsp;<span class="op" id="3029876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029879">old</span>&nbsp;<span class="op" id="3029883">:=</span>&nbsp;<span class="ident" id="3029886">mset</span><span class="op" id="3029890">[</span><span class="ident" id="3029891">m</span><span class="op" id="3029892">.</span><span class="ident" id="3029893">Name</span><span class="op" id="3029897">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029900">if</span>&nbsp;<span class="ident" id="3029903">old</span>&nbsp;<span class="op" id="3029907">==</span>&nbsp;<span class="ident" id="3029910">nil</span>&nbsp;<span class="op" id="3029914">||</span>&nbsp;<span class="ident" id="3029917">m</span><span class="op" id="3029918">.</span><span class="ident" id="3029919">Level</span>&nbsp;<span class="op" id="3029925">&lt;</span>&nbsp;<span class="ident" id="3029927">old</span><span class="op" id="3029930">.</span><span class="ident" id="3029931">Level</span>&nbsp;<span class="op" id="3029937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3029941">mset</span><span class="op" id="3029945">[</span><span class="ident" id="3029946">m</span><span class="op" id="3029947">.</span><span class="ident" id="3029948">Name</span><span class="op" id="3029952">]</span>&nbsp;<span class="op" id="3029954">=</span>&nbsp;<span class="ident" id="3029956">m</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029960">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3029968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3029971">if</span>&nbsp;<span class="ident" id="3029974">old</span>&nbsp;<span class="op" id="3029978">!=</span>&nbsp;<span class="ident" id="3029981">nil</span>&nbsp;<span class="op" id="3029985">&amp;&amp;</span>&nbsp;<span class="ident" id="3029988">m</span><span class="op" id="3029989">.</span><span class="ident" id="3029990">Level</span>&nbsp;<span class="op" id="3029996">==</span>&nbsp;<span class="ident" id="3029999">old</span><span class="op" id="3030002">.</span><span class="ident" id="3030003">Level</span>&nbsp;<span class="op" id="3030009">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3030013">//&nbsp;conflict&nbsp;-&nbsp;mark&nbsp;it&nbsp;using&nbsp;a&nbsp;method&nbsp;with&nbsp;nil&nbsp;Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3030066">mset</span><span class="op" id="3030070">[</span><span class="ident" id="3030071">m</span><span class="op" id="3030072">.</span><span class="ident" id="3030073">Name</span><span class="op" id="3030077">]</span>&nbsp;<span class="op" id="3030079">=</span>&nbsp;<span class="op" id="3030081">&amp;</span><span class="ident" id="3030082">Func</span><span class="op" id="3030086">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3030091">Name</span><span class="op" id="3030095">:</span>&nbsp;&nbsp;<span class="ident" id="3030098">m</span><span class="op" id="3030099">.</span><span class="ident" id="3030100">Name</span><span class="op" id="3030104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3030109">Level</span><span class="op" id="3030114">:</span>&nbsp;<span class="ident" id="3030116">m</span><span class="op" id="3030117">.</span><span class="ident" id="3030118">Level</span><span class="op" id="3030123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3030127">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3030130">}</span><br>
<span class="lineno"></span><span class="op" id="3030132">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="3030135">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3030215">//&nbsp;Named&nbsp;types</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3030231">//&nbsp;baseTypeName&nbsp;returns&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;base&nbsp;type&nbsp;of&nbsp;x&nbsp;(or&nbsp;&#34;&#34;)</span><br>
<span class="lineno">95</span><span class="comment" id="3030294">//&nbsp;and&nbsp;whether&nbsp;the&nbsp;type&nbsp;is&nbsp;imported&nbsp;or&nbsp;not.</span><br>
<span class="lineno"></span><span class="comment" id="3030338">//</span><br>
<span class="lineno"></span><span class="keyword" id="3030341">func</span>&nbsp;<span class="ident" id="3030346">baseTypeName</span><span class="op" id="3030358">(</span><span class="ident" id="3030359">x</span>&nbsp;<span class="ident" id="3030361">ast</span><span class="op" id="3030364">.</span><span class="ident" id="3030365">Expr</span><span class="op" id="3030369">)</span>&nbsp;<span class="op" id="3030371">(</span><span class="ident" id="3030372">name</span>&nbsp;<span class="builtintype" id="3030377">string</span><span class="op" id="3030383">,</span>&nbsp;<span class="ident" id="3030385">imported</span>&nbsp;<span class="builtintype" id="3030394">bool</span><span class="op" id="3030398">)</span>&nbsp;<span class="op" id="3030400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030403">switch</span>&nbsp;<span class="ident" id="3030410">t</span>&nbsp;<span class="op" id="3030412">:=</span>&nbsp;<span class="ident" id="3030415">x</span><span class="op" id="3030416">.</span><span class="op" id="3030417">(</span><span class="keyword" id="3030418">type</span><span class="op" id="3030422">)</span>&nbsp;<span class="op" id="3030424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030427">case</span>&nbsp;<span class="op" id="3030432">*</span><span class="ident" id="3030433">ast</span><span class="op" id="3030436">.</span><span class="ident" id="3030437">Ident</span><span class="op" id="3030442">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030446">return</span>&nbsp;<span class="ident" id="3030453">t</span><span class="op" id="3030454">.</span><span class="ident" id="3030455">Name</span><span class="op" id="3030459">,</span>&nbsp;<span class="builtintype" id="3030461">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030468">case</span>&nbsp;<span class="op" id="3030473">*</span><span class="ident" id="3030474">ast</span><span class="op" id="3030477">.</span><span class="ident" id="3030478">SelectorExpr</span><span class="op" id="3030490">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030494">if</span>&nbsp;<span class="ident" id="3030497">_</span><span class="op" id="3030498">,</span>&nbsp;<span class="ident" id="3030500">ok</span>&nbsp;<span class="op" id="3030503">:=</span>&nbsp;<span class="ident" id="3030506">t</span><span class="op" id="3030507">.</span><span class="ident" id="3030508">X</span><span class="op" id="3030509">.</span><span class="op" id="3030510">(</span><span class="op" id="3030511">*</span><span class="ident" id="3030512">ast</span><span class="op" id="3030515">.</span><span class="ident" id="3030516">Ident</span><span class="op" id="3030521">)</span><span class="op" id="3030522">;</span>&nbsp;<span class="ident" id="3030524">ok</span>&nbsp;<span class="op" id="3030527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3030532">//&nbsp;only&nbsp;possible&nbsp;for&nbsp;qualified&nbsp;type&nbsp;names;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3030578">//&nbsp;assume&nbsp;type&nbsp;is&nbsp;imported</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030608">return</span>&nbsp;<span class="ident" id="3030615">t</span><span class="op" id="3030616">.</span><span class="ident" id="3030617">Sel</span><span class="op" id="3030620">.</span><span class="ident" id="3030621">Name</span><span class="op" id="3030625">,</span>&nbsp;<span class="builtintype" id="3030627">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3030634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030637">case</span>&nbsp;<span class="op" id="3030642">*</span><span class="ident" id="3030643">ast</span><span class="op" id="3030646">.</span><span class="ident" id="3030647">StarExpr</span><span class="op" id="3030655">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030659">return</span>&nbsp;<span class="ident" id="3030666">baseTypeName</span><span class="op" id="3030678">(</span><span class="ident" id="3030679">t</span><span class="op" id="3030680">.</span><span class="ident" id="3030681">X</span><span class="op" id="3030682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3030685">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3030688">return</span><br>
<span class="lineno"></span><span class="op" id="3030695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3030698">//&nbsp;An&nbsp;embeddedSet&nbsp;describes&nbsp;a&nbsp;set&nbsp;of&nbsp;embedded&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="3030751">type</span>&nbsp;<span class="ident" id="3030756">embeddedSet</span>&nbsp;<span class="keyword" id="3030768">map</span><span class="op" id="3030771">[</span><span class="op" id="3030772">*</span><span class="ident" id="3030773">namedType</span><span class="op" id="3030782">]</span><span class="builtintype" id="3030783">bool</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="3030789">//&nbsp;A&nbsp;namedType&nbsp;represents&nbsp;a&nbsp;named&nbsp;unqualified&nbsp;(package&nbsp;local,&nbsp;or&nbsp;possibly</span><br>
<span class="lineno"></span><span class="comment" id="3030863">//&nbsp;predeclared)&nbsp;type.&nbsp;The&nbsp;namedType&nbsp;for&nbsp;a&nbsp;type&nbsp;name&nbsp;is&nbsp;always&nbsp;found&nbsp;via</span><br>
<span class="lineno"></span><span class="comment" id="3030935">//&nbsp;reader.lookupType.</span><br>
<span class="lineno"></span><span class="comment" id="3030957">//</span><br>
<span class="lineno">120</span><span class="keyword" id="3030960">type</span>&nbsp;<span class="ident" id="3030965">namedType</span>&nbsp;<span class="keyword" id="3030975">struct</span>&nbsp;<span class="op" id="3030982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3030985">doc</span>&nbsp;&nbsp;<span class="builtintype" id="3030990">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3031003">//&nbsp;doc&nbsp;comment&nbsp;for&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031028">name</span>&nbsp;<span class="builtintype" id="3031033">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3031046">//&nbsp;type&nbsp;name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031060">decl</span>&nbsp;<span class="op" id="3031065">*</span><span class="ident" id="3031066">ast</span><span class="op" id="3031069">.</span><span class="ident" id="3031070">GenDecl</span>&nbsp;<span class="comment" id="3031078">//&nbsp;nil&nbsp;if&nbsp;declaration&nbsp;hasn&#39;t&nbsp;been&nbsp;seen&nbsp;yet</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031123">isEmbedded</span>&nbsp;<span class="builtintype" id="3031134">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3031146">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031180">isStruct</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3031191">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3031203">//&nbsp;true&nbsp;if&nbsp;this&nbsp;type&nbsp;is&nbsp;a&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031237">embedded</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3031248">embeddedSet</span>&nbsp;<span class="comment" id="3031260">//&nbsp;true&nbsp;if&nbsp;the&nbsp;embedded&nbsp;type&nbsp;is&nbsp;a&nbsp;pointer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3031304">//&nbsp;associated&nbsp;declarations</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031332">values</span>&nbsp;&nbsp;<span class="op" id="3031340">[</span><span class="op" id="3031341">]</span><span class="op" id="3031342">*</span><span class="ident" id="3031343">Value</span>&nbsp;<span class="comment" id="3031349">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031369">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3031377">methodSet</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031388">methods</span>&nbsp;<span class="ident" id="3031396">methodSet</span><br>
<span class="lineno"></span><span class="op" id="3031406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="comment" id="3031409">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3031489">//&nbsp;AST&nbsp;reader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3031504">//&nbsp;reader&nbsp;accumulates&nbsp;documentation&nbsp;for&nbsp;a&nbsp;single&nbsp;package.</span><br>
<span class="lineno"></span><span class="comment" id="3031562">//&nbsp;It&nbsp;modifies&nbsp;the&nbsp;AST:&nbsp;Comments&nbsp;(declaration&nbsp;documentation)</span><br>
<span class="lineno">140</span><span class="comment" id="3031623">//&nbsp;that&nbsp;have&nbsp;been&nbsp;collected&nbsp;by&nbsp;the&nbsp;reader&nbsp;are&nbsp;set&nbsp;to&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="3031680">//&nbsp;in&nbsp;the&nbsp;respective&nbsp;AST&nbsp;nodes&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;printed</span><br>
<span class="lineno"></span><span class="comment" id="3031740">//&nbsp;twice&nbsp;(once&nbsp;when&nbsp;printing&nbsp;the&nbsp;documentation&nbsp;and&nbsp;once&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="3031801">//&nbsp;printing&nbsp;the&nbsp;corresponding&nbsp;AST&nbsp;node).</span><br>
<span class="lineno"></span><span class="comment" id="3031842">//</span><br>
<span class="lineno">145</span><span class="keyword" id="3031845">type</span>&nbsp;<span class="ident" id="3031850">reader</span>&nbsp;<span class="keyword" id="3031857">struct</span>&nbsp;<span class="op" id="3031864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031867">mode</span>&nbsp;<span class="ident" id="3031872">Mode</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3031879">//&nbsp;package&nbsp;properties</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031902">doc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3031912">string</span>&nbsp;<span class="comment" id="3031919">//&nbsp;package&nbsp;documentation,&nbsp;if&nbsp;any</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031953">filenames</span>&nbsp;<span class="op" id="3031963">[</span><span class="op" id="3031964">]</span><span class="builtintype" id="3031965">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3031973">notes</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3031983">map</span><span class="op" id="3031986">[</span><span class="builtintype" id="3031987">string</span><span class="op" id="3031993">]</span><span class="op" id="3031994">[</span><span class="op" id="3031995">]</span><span class="op" id="3031996">*</span><span class="ident" id="3031997">Note</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3032004">//&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032021">imports</span>&nbsp;<span class="keyword" id="3032029">map</span><span class="op" id="3032032">[</span><span class="builtintype" id="3032033">string</span><span class="op" id="3032039">]</span><span class="builtintype" id="3032040">int</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032045">values</span>&nbsp;&nbsp;<span class="op" id="3032053">[</span><span class="op" id="3032054">]</span><span class="op" id="3032055">*</span><span class="ident" id="3032056">Value</span>&nbsp;<span class="comment" id="3032062">//&nbsp;consts&nbsp;and&nbsp;vars</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032082">types</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="3032090">map</span><span class="op" id="3032093">[</span><span class="builtintype" id="3032094">string</span><span class="op" id="3032100">]</span><span class="op" id="3032101">*</span><span class="ident" id="3032102">namedType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032113">funcs</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3032121">methodSet</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3032133">//&nbsp;support&nbsp;for&nbsp;package-local&nbsp;error&nbsp;type&nbsp;declarations</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032187">errorDecl</span>&nbsp;<span class="builtintype" id="3032197">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3032218">//&nbsp;if&nbsp;set,&nbsp;type&nbsp;&#34;error&#34;&nbsp;was&nbsp;declared&nbsp;locally</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032264">fixlist</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3032274">[</span><span class="op" id="3032275">]</span><span class="op" id="3032276">*</span><span class="ident" id="3032277">ast</span><span class="op" id="3032280">.</span><span class="ident" id="3032281">InterfaceType</span>&nbsp;<span class="comment" id="3032295">//&nbsp;list&nbsp;of&nbsp;interfaces&nbsp;containing&nbsp;anonymous&nbsp;field&nbsp;&#34;error&#34;</span><br>
<span class="lineno"></span><span class="op" id="3032352">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3032355">func</span>&nbsp;<span class="op" id="3032360">(</span><span class="ident" id="3032361">r</span>&nbsp;<span class="op" id="3032363">*</span><span class="ident" id="3032364">reader</span><span class="op" id="3032370">)</span>&nbsp;<span class="ident" id="3032372">isVisible</span><span class="op" id="3032381">(</span><span class="ident" id="3032382">name</span>&nbsp;<span class="builtintype" id="3032387">string</span><span class="op" id="3032393">)</span>&nbsp;<span class="builtintype" id="3032395">bool</span>&nbsp;<span class="op" id="3032400">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032403">return</span>&nbsp;<span class="ident" id="3032410">r</span><span class="op" id="3032411">.</span><span class="ident" id="3032412">mode</span><span class="op" id="3032416">&amp;</span><span class="ident" id="3032417">AllDecls</span>&nbsp;<span class="op" id="3032426">!=</span>&nbsp;<span class="num" id="3032429">0</span>&nbsp;<span class="op" id="3032431">||</span>&nbsp;<span class="ident" id="3032434">ast</span><span class="op" id="3032437">.</span><span class="ident" id="3032438">IsExported</span><span class="op" id="3032448">(</span><span class="ident" id="3032449">name</span><span class="op" id="3032453">)</span><br>
<span class="lineno"></span><span class="op" id="3032455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3032458">//&nbsp;lookupType&nbsp;returns&nbsp;the&nbsp;base&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name.</span><br>
<span class="lineno"></span><span class="comment" id="3032515">//&nbsp;If&nbsp;the&nbsp;base&nbsp;type&nbsp;has&nbsp;not&nbsp;been&nbsp;encountered&nbsp;yet,&nbsp;a&nbsp;new</span><br>
<span class="lineno">170</span><span class="comment" id="3032571">//&nbsp;type&nbsp;with&nbsp;the&nbsp;given&nbsp;name&nbsp;but&nbsp;no&nbsp;associated&nbsp;declaration</span><br>
<span class="lineno"></span><span class="comment" id="3032629">//&nbsp;is&nbsp;added&nbsp;to&nbsp;the&nbsp;type&nbsp;map.</span><br>
<span class="lineno"></span><span class="comment" id="3032658">//</span><br>
<span class="lineno"></span><span class="keyword" id="3032661">func</span>&nbsp;<span class="op" id="3032666">(</span><span class="ident" id="3032667">r</span>&nbsp;<span class="op" id="3032669">*</span><span class="ident" id="3032670">reader</span><span class="op" id="3032676">)</span>&nbsp;<span class="ident" id="3032678">lookupType</span><span class="op" id="3032688">(</span><span class="ident" id="3032689">name</span>&nbsp;<span class="builtintype" id="3032694">string</span><span class="op" id="3032700">)</span>&nbsp;<span class="op" id="3032702">*</span><span class="ident" id="3032703">namedType</span>&nbsp;<span class="op" id="3032713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032716">if</span>&nbsp;<span class="ident" id="3032719">name</span>&nbsp;<span class="op" id="3032724">==</span>&nbsp;<span class="string" id="3032727">&#34;&#34;</span>&nbsp;<span class="op" id="3032730">||</span>&nbsp;<span class="ident" id="3032733">name</span>&nbsp;<span class="op" id="3032738">==</span>&nbsp;<span class="string" id="3032741">&#34;_&#34;</span>&nbsp;<span class="op" id="3032745">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032749">return</span>&nbsp;<span class="ident" id="3032756">nil</span>&nbsp;<span class="comment" id="3032760">//&nbsp;no&nbsp;type&nbsp;docs&nbsp;for&nbsp;anonymous&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3032797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032800">if</span>&nbsp;<span class="ident" id="3032803">typ</span><span class="op" id="3032806">,</span>&nbsp;<span class="ident" id="3032808">found</span>&nbsp;<span class="op" id="3032814">:=</span>&nbsp;<span class="ident" id="3032817">r</span><span class="op" id="3032818">.</span><span class="ident" id="3032819">types</span><span class="op" id="3032824">[</span><span class="ident" id="3032825">name</span><span class="op" id="3032829">]</span><span class="op" id="3032830">;</span>&nbsp;<span class="ident" id="3032832">found</span>&nbsp;<span class="op" id="3032838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3032842">return</span>&nbsp;<span class="ident" id="3032849">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3032854">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3032857">//&nbsp;type&nbsp;not&nbsp;found&nbsp;-&nbsp;add&nbsp;one&nbsp;without&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032906">typ</span>&nbsp;<span class="op" id="3032910">:=</span>&nbsp;<span class="op" id="3032913">&amp;</span><span class="ident" id="3032914">namedType</span><span class="op" id="3032923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032927">name</span><span class="op" id="3032931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3032937">name</span><span class="op" id="3032941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032945">embedded</span><span class="op" id="3032953">:</span>&nbsp;<span class="builtinfunc" id="3032955">make</span><span class="op" id="3032959">(</span><span class="ident" id="3032960">embeddedSet</span><span class="op" id="3032971">)</span><span class="op" id="3032972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3032976">funcs</span><span class="op" id="3032981">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3032986">make</span><span class="op" id="3032990">(</span><span class="ident" id="3032991">methodSet</span><span class="op" id="3033000">)</span><span class="op" id="3033001">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033005">methods</span><span class="op" id="3033012">:</span>&nbsp;&nbsp;<span class="builtinfunc" id="3033015">make</span><span class="op" id="3033019">(</span><span class="ident" id="3033020">methodSet</span><span class="op" id="3033029">)</span><span class="op" id="3033030">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033036">r</span><span class="op" id="3033037">.</span><span class="ident" id="3033038">types</span><span class="op" id="3033043">[</span><span class="ident" id="3033044">name</span><span class="op" id="3033048">]</span>&nbsp;<span class="op" id="3033050">=</span>&nbsp;<span class="ident" id="3033052">typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033057">return</span>&nbsp;<span class="ident" id="3033064">typ</span><br>
<span class="lineno"></span><span class="op" id="3033068">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="3033071">//&nbsp;recordAnonymousField&nbsp;registers&nbsp;fieldType&nbsp;as&nbsp;the&nbsp;type&nbsp;of&nbsp;an</span><br>
<span class="lineno"></span><span class="comment" id="3033133">//&nbsp;anonymous&nbsp;field&nbsp;in&nbsp;the&nbsp;parent&nbsp;type.&nbsp;If&nbsp;the&nbsp;field&nbsp;is&nbsp;imported</span><br>
<span class="lineno"></span><span class="comment" id="3033197">//&nbsp;(qualified&nbsp;name)&nbsp;or&nbsp;the&nbsp;parent&nbsp;is&nbsp;nil,&nbsp;the&nbsp;field&nbsp;is&nbsp;ignored.</span><br>
<span class="lineno"></span><span class="comment" id="3033261">//&nbsp;The&nbsp;function&nbsp;returns&nbsp;the&nbsp;field&nbsp;name.</span><br>
<span class="lineno">195</span><span class="comment" id="3033301">//</span><br>
<span class="lineno"></span><span class="keyword" id="3033304">func</span>&nbsp;<span class="op" id="3033309">(</span><span class="ident" id="3033310">r</span>&nbsp;<span class="op" id="3033312">*</span><span class="ident" id="3033313">reader</span><span class="op" id="3033319">)</span>&nbsp;<span class="ident" id="3033321">recordAnonymousField</span><span class="op" id="3033341">(</span><span class="ident" id="3033342">parent</span>&nbsp;<span class="op" id="3033349">*</span><span class="ident" id="3033350">namedType</span><span class="op" id="3033359">,</span>&nbsp;<span class="ident" id="3033361">fieldType</span>&nbsp;<span class="ident" id="3033371">ast</span><span class="op" id="3033374">.</span><span class="ident" id="3033375">Expr</span><span class="op" id="3033379">)</span>&nbsp;<span class="op" id="3033381">(</span><span class="ident" id="3033382">fname</span>&nbsp;<span class="builtintype" id="3033388">string</span><span class="op" id="3033394">)</span>&nbsp;<span class="op" id="3033396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033399">fname</span><span class="op" id="3033404">,</span>&nbsp;<span class="ident" id="3033406">imp</span>&nbsp;<span class="op" id="3033410">:=</span>&nbsp;<span class="ident" id="3033413">baseTypeName</span><span class="op" id="3033425">(</span><span class="ident" id="3033426">fieldType</span><span class="op" id="3033435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033438">if</span>&nbsp;<span class="ident" id="3033441">parent</span>&nbsp;<span class="op" id="3033448">==</span>&nbsp;<span class="ident" id="3033451">nil</span>&nbsp;<span class="op" id="3033455">||</span>&nbsp;<span class="ident" id="3033458">imp</span>&nbsp;<span class="op" id="3033462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033466">return</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033477">if</span>&nbsp;<span class="ident" id="3033480">ftype</span>&nbsp;<span class="op" id="3033486">:=</span>&nbsp;<span class="ident" id="3033489">r</span><span class="op" id="3033490">.</span><span class="ident" id="3033491">lookupType</span><span class="op" id="3033501">(</span><span class="ident" id="3033502">fname</span><span class="op" id="3033507">)</span><span class="op" id="3033508">;</span>&nbsp;<span class="ident" id="3033510">ftype</span>&nbsp;<span class="op" id="3033516">!=</span>&nbsp;<span class="ident" id="3033519">nil</span>&nbsp;<span class="op" id="3033523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033527">ftype</span><span class="op" id="3033532">.</span><span class="ident" id="3033533">isEmbedded</span>&nbsp;<span class="op" id="3033544">=</span>&nbsp;<span class="builtintype" id="3033546">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033553">_</span><span class="op" id="3033554">,</span>&nbsp;<span class="ident" id="3033556">ptr</span>&nbsp;<span class="op" id="3033560">:=</span>&nbsp;<span class="ident" id="3033563">fieldType</span><span class="op" id="3033572">.</span><span class="op" id="3033573">(</span><span class="op" id="3033574">*</span><span class="ident" id="3033575">ast</span><span class="op" id="3033578">.</span><span class="ident" id="3033579">StarExpr</span><span class="op" id="3033587">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033591">parent</span><span class="op" id="3033597">.</span><span class="ident" id="3033598">embedded</span><span class="op" id="3033606">[</span><span class="ident" id="3033607">ftype</span><span class="op" id="3033612">]</span>&nbsp;<span class="op" id="3033614">=</span>&nbsp;<span class="ident" id="3033616">ptr</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033621">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033624">return</span><br>
<span class="lineno"></span><span class="op" id="3033631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3033634">func</span>&nbsp;<span class="op" id="3033639">(</span><span class="ident" id="3033640">r</span>&nbsp;<span class="op" id="3033642">*</span><span class="ident" id="3033643">reader</span><span class="op" id="3033649">)</span>&nbsp;<span class="ident" id="3033651">readDoc</span><span class="op" id="3033658">(</span><span class="ident" id="3033659">comment</span>&nbsp;<span class="op" id="3033667">*</span><span class="ident" id="3033668">ast</span><span class="op" id="3033671">.</span><span class="ident" id="3033672">CommentGroup</span><span class="op" id="3033684">)</span>&nbsp;<span class="op" id="3033686">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033689">//&nbsp;By&nbsp;convention&nbsp;there&nbsp;should&nbsp;be&nbsp;only&nbsp;one&nbsp;package&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3033748">//&nbsp;but&nbsp;collect&nbsp;all&nbsp;of&nbsp;them&nbsp;if&nbsp;there&nbsp;are&nbsp;more&nbsp;then&nbsp;one.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033804">text</span>&nbsp;<span class="op" id="3033809">:=</span>&nbsp;<span class="ident" id="3033812">comment</span><span class="op" id="3033819">.</span><span class="ident" id="3033820">Text</span><span class="op" id="3033824">(</span><span class="op" id="3033825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033828">if</span>&nbsp;<span class="ident" id="3033831">r</span><span class="op" id="3033832">.</span><span class="ident" id="3033833">doc</span>&nbsp;<span class="op" id="3033837">==</span>&nbsp;<span class="string" id="3033840">&#34;&#34;</span>&nbsp;<span class="op" id="3033843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033847">r</span><span class="op" id="3033848">.</span><span class="ident" id="3033849">doc</span>&nbsp;<span class="op" id="3033853">=</span>&nbsp;<span class="ident" id="3033855">text</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3033862">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3033870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033873">r</span><span class="op" id="3033874">.</span><span class="ident" id="3033875">doc</span>&nbsp;<span class="op" id="3033879">+=</span>&nbsp;<span class="string" id="3033882">&#34;\n&#34;</span>&nbsp;<span class="op" id="3033887">+</span>&nbsp;<span class="ident" id="3033889">text</span><br>
<span class="lineno"></span><span class="op" id="3033894">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="3033897">func</span>&nbsp;<span class="op" id="3033902">(</span><span class="ident" id="3033903">r</span>&nbsp;<span class="op" id="3033905">*</span><span class="ident" id="3033906">reader</span><span class="op" id="3033912">)</span>&nbsp;<span class="ident" id="3033914">remember</span><span class="op" id="3033922">(</span><span class="ident" id="3033923">typ</span>&nbsp;<span class="op" id="3033927">*</span><span class="ident" id="3033928">ast</span><span class="op" id="3033931">.</span><span class="ident" id="3033932">InterfaceType</span><span class="op" id="3033945">)</span>&nbsp;<span class="op" id="3033947">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3033950">r</span><span class="op" id="3033951">.</span><span class="ident" id="3033952">fixlist</span>&nbsp;<span class="op" id="3033960">=</span>&nbsp;<span class="builtinfunc" id="3033962">append</span><span class="op" id="3033968">(</span><span class="ident" id="3033969">r</span><span class="op" id="3033970">.</span><span class="ident" id="3033971">fixlist</span><span class="op" id="3033978">,</span>&nbsp;<span class="ident" id="3033980">typ</span><span class="op" id="3033983">)</span><br>
<span class="lineno"></span><span class="op" id="3033985">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3033988">func</span>&nbsp;<span class="ident" id="3033993">specNames</span><span class="op" id="3034002">(</span><span class="ident" id="3034003">specs</span>&nbsp;<span class="op" id="3034009">[</span><span class="op" id="3034010">]</span><span class="ident" id="3034011">ast</span><span class="op" id="3034014">.</span><span class="ident" id="3034015">Spec</span><span class="op" id="3034019">)</span>&nbsp;<span class="op" id="3034021">[</span><span class="op" id="3034022">]</span><span class="builtintype" id="3034023">string</span>&nbsp;<span class="op" id="3034030">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034033">names</span>&nbsp;<span class="op" id="3034039">:=</span>&nbsp;<span class="builtinfunc" id="3034042">make</span><span class="op" id="3034046">(</span><span class="op" id="3034047">[</span><span class="op" id="3034048">]</span><span class="builtintype" id="3034049">string</span><span class="op" id="3034055">,</span>&nbsp;<span class="num" id="3034057">0</span><span class="op" id="3034058">,</span>&nbsp;<span class="builtinfunc" id="3034060">len</span><span class="op" id="3034063">(</span><span class="ident" id="3034064">specs</span><span class="op" id="3034069">)</span><span class="op" id="3034070">)</span>&nbsp;<span class="comment" id="3034072">//&nbsp;reasonable&nbsp;estimate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034096">for</span>&nbsp;<span class="ident" id="3034100">_</span><span class="op" id="3034101">,</span>&nbsp;<span class="ident" id="3034103">s</span>&nbsp;<span class="op" id="3034105">:=</span>&nbsp;<span class="keyword" id="3034108">range</span>&nbsp;<span class="ident" id="3034114">specs</span>&nbsp;<span class="op" id="3034120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034124">//&nbsp;s&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;an&nbsp;*ast.ValueSpec&nbsp;by&nbsp;readValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034179">for</span>&nbsp;<span class="ident" id="3034183">_</span><span class="op" id="3034184">,</span>&nbsp;<span class="ident" id="3034186">ident</span>&nbsp;<span class="op" id="3034192">:=</span>&nbsp;<span class="keyword" id="3034195">range</span>&nbsp;<span class="ident" id="3034201">s</span><span class="op" id="3034202">.</span><span class="op" id="3034203">(</span><span class="op" id="3034204">*</span><span class="ident" id="3034205">ast</span><span class="op" id="3034208">.</span><span class="ident" id="3034209">ValueSpec</span><span class="op" id="3034218">)</span><span class="op" id="3034219">.</span><span class="ident" id="3034220">Names</span>&nbsp;<span class="op" id="3034226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034231">names</span>&nbsp;<span class="op" id="3034237">=</span>&nbsp;<span class="builtinfunc" id="3034239">append</span><span class="op" id="3034245">(</span><span class="ident" id="3034246">names</span><span class="op" id="3034251">,</span>&nbsp;<span class="ident" id="3034253">ident</span><span class="op" id="3034258">.</span><span class="ident" id="3034259">Name</span><span class="op" id="3034263">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034273">return</span>&nbsp;<span class="ident" id="3034280">names</span><br>
<span class="lineno"></span><span class="op" id="3034286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="comment" id="3034289">//&nbsp;readValue&nbsp;processes&nbsp;a&nbsp;const&nbsp;or&nbsp;var&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3034340">//</span><br>
<span class="lineno"></span><span class="keyword" id="3034343">func</span>&nbsp;<span class="op" id="3034348">(</span><span class="ident" id="3034349">r</span>&nbsp;<span class="op" id="3034351">*</span><span class="ident" id="3034352">reader</span><span class="op" id="3034358">)</span>&nbsp;<span class="ident" id="3034360">readValue</span><span class="op" id="3034369">(</span><span class="ident" id="3034370">decl</span>&nbsp;<span class="op" id="3034375">*</span><span class="ident" id="3034376">ast</span><span class="op" id="3034379">.</span><span class="ident" id="3034380">GenDecl</span><span class="op" id="3034387">)</span>&nbsp;<span class="op" id="3034389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034392">//&nbsp;determine&nbsp;if&nbsp;decl&nbsp;should&nbsp;be&nbsp;associated&nbsp;with&nbsp;a&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034447">//&nbsp;Heuristic:&nbsp;For&nbsp;each&nbsp;typed&nbsp;entry,&nbsp;determine&nbsp;the&nbsp;type&nbsp;name,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034517">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;exactly&nbsp;one&nbsp;type&nbsp;name&nbsp;that&nbsp;is&nbsp;sufficiently</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034587">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frequent,&nbsp;associate&nbsp;the&nbsp;decl&nbsp;with&nbsp;the&nbsp;respective&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034657">domName</span>&nbsp;<span class="op" id="3034665">:=</span>&nbsp;<span class="string" id="3034668">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034672">domFreq</span>&nbsp;<span class="op" id="3034680">:=</span>&nbsp;<span class="num" id="3034683">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034686">prev</span>&nbsp;<span class="op" id="3034691">:=</span>&nbsp;<span class="string" id="3034694">&#34;&#34;</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034698">n</span>&nbsp;<span class="op" id="3034700">:=</span>&nbsp;<span class="num" id="3034703">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034706">for</span>&nbsp;<span class="ident" id="3034710">_</span><span class="op" id="3034711">,</span>&nbsp;<span class="ident" id="3034713">spec</span>&nbsp;<span class="op" id="3034718">:=</span>&nbsp;<span class="keyword" id="3034721">range</span>&nbsp;<span class="ident" id="3034727">decl</span><span class="op" id="3034731">.</span><span class="ident" id="3034732">Specs</span>&nbsp;<span class="op" id="3034738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034742">s</span><span class="op" id="3034743">,</span>&nbsp;<span class="ident" id="3034745">ok</span>&nbsp;<span class="op" id="3034748">:=</span>&nbsp;<span class="ident" id="3034751">spec</span><span class="op" id="3034755">.</span><span class="op" id="3034756">(</span><span class="op" id="3034757">*</span><span class="ident" id="3034758">ast</span><span class="op" id="3034761">.</span><span class="ident" id="3034762">ValueSpec</span><span class="op" id="3034771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034775">if</span>&nbsp;<span class="op" id="3034778">!</span><span class="ident" id="3034779">ok</span>&nbsp;<span class="op" id="3034782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034787">continue</span>&nbsp;<span class="comment" id="3034796">//&nbsp;should&nbsp;not&nbsp;happen,&nbsp;but&nbsp;be&nbsp;conservative</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034844">name</span>&nbsp;<span class="op" id="3034849">:=</span>&nbsp;<span class="string" id="3034852">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034857">switch</span>&nbsp;<span class="op" id="3034864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034868">case</span>&nbsp;<span class="ident" id="3034873">s</span><span class="op" id="3034874">.</span><span class="ident" id="3034875">Type</span>&nbsp;<span class="op" id="3034880">!=</span>&nbsp;<span class="ident" id="3034883">nil</span><span class="op" id="3034886">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3034891">//&nbsp;a&nbsp;type&nbsp;is&nbsp;present;&nbsp;determine&nbsp;its&nbsp;name</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034935">if</span>&nbsp;<span class="ident" id="3034938">n</span><span class="op" id="3034939">,</span>&nbsp;<span class="ident" id="3034941">imp</span>&nbsp;<span class="op" id="3034945">:=</span>&nbsp;<span class="ident" id="3034948">baseTypeName</span><span class="op" id="3034960">(</span><span class="ident" id="3034961">s</span><span class="op" id="3034962">.</span><span class="ident" id="3034963">Type</span><span class="op" id="3034967">)</span><span class="op" id="3034968">;</span>&nbsp;<span class="op" id="3034970">!</span><span class="ident" id="3034971">imp</span>&nbsp;<span class="op" id="3034975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3034981">name</span>&nbsp;<span class="op" id="3034986">=</span>&nbsp;<span class="ident" id="3034988">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3034993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3034997">case</span>&nbsp;<span class="ident" id="3035002">decl</span><span class="op" id="3035006">.</span><span class="ident" id="3035007">Tok</span>&nbsp;<span class="op" id="3035011">==</span>&nbsp;<span class="ident" id="3035014">token</span><span class="op" id="3035019">.</span><span class="ident" id="3035020">CONST</span><span class="op" id="3035025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035030">//&nbsp;no&nbsp;type&nbsp;is&nbsp;present&nbsp;but&nbsp;we&nbsp;have&nbsp;a&nbsp;constant&nbsp;declaration;</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035091">//&nbsp;use&nbsp;the&nbsp;previous&nbsp;type&nbsp;name&nbsp;(w/o&nbsp;more&nbsp;type&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035151">//&nbsp;we&nbsp;cannot&nbsp;handle&nbsp;the&nbsp;case&nbsp;of&nbsp;unnamed&nbsp;variables&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035209">//&nbsp;initializer&nbsp;expressions&nbsp;except&nbsp;for&nbsp;some&nbsp;trivial&nbsp;cases)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035270">name</span>&nbsp;<span class="op" id="3035275">=</span>&nbsp;<span class="ident" id="3035277">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035284">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035288">if</span>&nbsp;<span class="ident" id="3035291">name</span>&nbsp;<span class="op" id="3035296">!=</span>&nbsp;<span class="string" id="3035299">&#34;&#34;</span>&nbsp;<span class="op" id="3035302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035307">//&nbsp;entry&nbsp;has&nbsp;a&nbsp;named&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035336">if</span>&nbsp;<span class="ident" id="3035339">domName</span>&nbsp;<span class="op" id="3035347">!=</span>&nbsp;<span class="string" id="3035350">&#34;&#34;</span>&nbsp;<span class="op" id="3035353">&amp;&amp;</span>&nbsp;<span class="ident" id="3035356">domName</span>&nbsp;<span class="op" id="3035364">!=</span>&nbsp;<span class="ident" id="3035367">name</span>&nbsp;<span class="op" id="3035372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035378">//&nbsp;more&nbsp;than&nbsp;one&nbsp;type&nbsp;name&nbsp;-&nbsp;do&nbsp;not&nbsp;associate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035428">//&nbsp;with&nbsp;any&nbsp;type</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035449">domName</span>&nbsp;<span class="op" id="3035457">=</span>&nbsp;<span class="string" id="3035459">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035466">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035475">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035480">domName</span>&nbsp;<span class="op" id="3035488">=</span>&nbsp;<span class="ident" id="3035490">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035498">domFreq</span><span class="op" id="3035505">++</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035514">prev</span>&nbsp;<span class="op" id="3035519">=</span>&nbsp;<span class="ident" id="3035521">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035528">n</span><span class="op" id="3035529">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035533">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035537">//&nbsp;nothing&nbsp;to&nbsp;do&nbsp;w/o&nbsp;a&nbsp;legal&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035579">if</span>&nbsp;<span class="ident" id="3035582">n</span>&nbsp;<span class="op" id="3035584">==</span>&nbsp;<span class="num" id="3035587">0</span>&nbsp;<span class="op" id="3035589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035593">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035605">//&nbsp;determine&nbsp;values&nbsp;list&nbsp;with&nbsp;which&nbsp;to&nbsp;associate&nbsp;the&nbsp;Value&nbsp;for&nbsp;this&nbsp;decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035679">values</span>&nbsp;<span class="op" id="3035686">:=</span>&nbsp;<span class="op" id="3035689">&amp;</span><span class="ident" id="3035690">r</span><span class="op" id="3035691">.</span><span class="ident" id="3035692">values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035700">const</span>&nbsp;<span class="ident" id="3035706">threshold</span>&nbsp;<span class="op" id="3035716">=</span>&nbsp;<span class="num" id="3035718">0.75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035724">if</span>&nbsp;<span class="ident" id="3035727">domName</span>&nbsp;<span class="op" id="3035735">!=</span>&nbsp;<span class="string" id="3035738">&#34;&#34;</span>&nbsp;<span class="op" id="3035741">&amp;&amp;</span>&nbsp;<span class="ident" id="3035744">r</span><span class="op" id="3035745">.</span><span class="ident" id="3035746">isVisible</span><span class="op" id="3035755">(</span><span class="ident" id="3035756">domName</span><span class="op" id="3035763">)</span>&nbsp;<span class="op" id="3035765">&amp;&amp;</span>&nbsp;<span class="ident" id="3035768">domFreq</span>&nbsp;<span class="op" id="3035776">&gt;=</span>&nbsp;<span class="builtintype" id="3035779">int</span><span class="op" id="3035782">(</span><span class="builtintype" id="3035783">float64</span><span class="op" id="3035790">(</span><span class="builtinfunc" id="3035791">len</span><span class="op" id="3035794">(</span><span class="ident" id="3035795">decl</span><span class="op" id="3035799">.</span><span class="ident" id="3035800">Specs</span><span class="op" id="3035805">)</span><span class="op" id="3035806">)</span><span class="op" id="3035807">*</span><span class="ident" id="3035808">threshold</span><span class="op" id="3035817">)</span>&nbsp;<span class="op" id="3035819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3035823">//&nbsp;typed&nbsp;entries&nbsp;are&nbsp;sufficiently&nbsp;frequent</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3035868">if</span>&nbsp;<span class="ident" id="3035871">typ</span>&nbsp;<span class="op" id="3035875">:=</span>&nbsp;<span class="ident" id="3035878">r</span><span class="op" id="3035879">.</span><span class="ident" id="3035880">lookupType</span><span class="op" id="3035890">(</span><span class="ident" id="3035891">domName</span><span class="op" id="3035898">)</span><span class="op" id="3035899">;</span>&nbsp;<span class="ident" id="3035901">typ</span>&nbsp;<span class="op" id="3035905">!=</span>&nbsp;<span class="ident" id="3035908">nil</span>&nbsp;<span class="op" id="3035912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3035917">values</span>&nbsp;<span class="op" id="3035924">=</span>&nbsp;<span class="op" id="3035926">&amp;</span><span class="ident" id="3035927">typ</span><span class="op" id="3035930">.</span><span class="ident" id="3035931">values</span>&nbsp;<span class="comment" id="3035938">//&nbsp;associate&nbsp;with&nbsp;that&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035968">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035971">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3035975">*</span><span class="ident" id="3035976">values</span>&nbsp;<span class="op" id="3035983">=</span>&nbsp;<span class="builtinfunc" id="3035985">append</span><span class="op" id="3035991">(</span><span class="op" id="3035992">*</span><span class="ident" id="3035993">values</span><span class="op" id="3035999">,</span>&nbsp;<span class="op" id="3036001">&amp;</span><span class="ident" id="3036002">Value</span><span class="op" id="3036007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036011">Doc</span><span class="op" id="3036014">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3036018">decl</span><span class="op" id="3036022">.</span><span class="ident" id="3036023">Doc</span><span class="op" id="3036026">.</span><span class="ident" id="3036027">Text</span><span class="op" id="3036031">(</span><span class="op" id="3036032">)</span><span class="op" id="3036033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036037">Names</span><span class="op" id="3036042">:</span>&nbsp;<span class="ident" id="3036044">specNames</span><span class="op" id="3036053">(</span><span class="ident" id="3036054">decl</span><span class="op" id="3036058">.</span><span class="ident" id="3036059">Specs</span><span class="op" id="3036064">)</span><span class="op" id="3036065">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036069">Decl</span><span class="op" id="3036073">:</span>&nbsp;&nbsp;<span class="ident" id="3036076">decl</span><span class="op" id="3036080">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036084">order</span><span class="op" id="3036089">:</span>&nbsp;<span class="builtinfunc" id="3036091">len</span><span class="op" id="3036094">(</span><span class="op" id="3036095">*</span><span class="ident" id="3036096">values</span><span class="op" id="3036102">)</span><span class="op" id="3036103">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036106">}</span><span class="op" id="3036107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036110">decl</span><span class="op" id="3036114">.</span><span class="ident" id="3036115">Doc</span>&nbsp;<span class="op" id="3036119">=</span>&nbsp;<span class="ident" id="3036121">nil</span>&nbsp;<span class="comment" id="3036125">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="3036159">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3036162">//&nbsp;fields&nbsp;returns&nbsp;a&nbsp;struct&#39;s&nbsp;fields&nbsp;or&nbsp;an&nbsp;interface&#39;s&nbsp;methods.</span><br>
<span class="lineno">305</span><span class="comment" id="3036225">//</span><br>
<span class="lineno"></span><span class="keyword" id="3036228">func</span>&nbsp;<span class="ident" id="3036233">fields</span><span class="op" id="3036239">(</span><span class="ident" id="3036240">typ</span>&nbsp;<span class="ident" id="3036244">ast</span><span class="op" id="3036247">.</span><span class="ident" id="3036248">Expr</span><span class="op" id="3036252">)</span>&nbsp;<span class="op" id="3036254">(</span><span class="ident" id="3036255">list</span>&nbsp;<span class="op" id="3036260">[</span><span class="op" id="3036261">]</span><span class="op" id="3036262">*</span><span class="ident" id="3036263">ast</span><span class="op" id="3036266">.</span><span class="ident" id="3036267">Field</span><span class="op" id="3036272">,</span>&nbsp;<span class="ident" id="3036274">isStruct</span>&nbsp;<span class="builtintype" id="3036283">bool</span><span class="op" id="3036287">)</span>&nbsp;<span class="op" id="3036289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036292">var</span>&nbsp;<span class="ident" id="3036296">fields</span>&nbsp;<span class="op" id="3036303">*</span><span class="ident" id="3036304">ast</span><span class="op" id="3036307">.</span><span class="ident" id="3036308">FieldList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036319">switch</span>&nbsp;<span class="ident" id="3036326">t</span>&nbsp;<span class="op" id="3036328">:=</span>&nbsp;<span class="ident" id="3036331">typ</span><span class="op" id="3036334">.</span><span class="op" id="3036335">(</span><span class="keyword" id="3036336">type</span><span class="op" id="3036340">)</span>&nbsp;<span class="op" id="3036342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036345">case</span>&nbsp;<span class="op" id="3036350">*</span><span class="ident" id="3036351">ast</span><span class="op" id="3036354">.</span><span class="ident" id="3036355">StructType</span><span class="op" id="3036365">:</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036369">fields</span>&nbsp;<span class="op" id="3036376">=</span>&nbsp;<span class="ident" id="3036378">t</span><span class="op" id="3036379">.</span><span class="ident" id="3036380">Fields</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036389">isStruct</span>&nbsp;<span class="op" id="3036398">=</span>&nbsp;<span class="builtintype" id="3036400">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036406">case</span>&nbsp;<span class="op" id="3036411">*</span><span class="ident" id="3036412">ast</span><span class="op" id="3036415">.</span><span class="ident" id="3036416">InterfaceType</span><span class="op" id="3036429">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036433">fields</span>&nbsp;<span class="op" id="3036440">=</span>&nbsp;<span class="ident" id="3036442">t</span><span class="op" id="3036443">.</span><span class="ident" id="3036444">Methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036453">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036456">if</span>&nbsp;<span class="ident" id="3036459">fields</span>&nbsp;<span class="op" id="3036466">!=</span>&nbsp;<span class="ident" id="3036469">nil</span>&nbsp;<span class="op" id="3036473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036477">list</span>&nbsp;<span class="op" id="3036482">=</span>&nbsp;<span class="ident" id="3036484">fields</span><span class="op" id="3036490">.</span><span class="ident" id="3036491">List</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036497">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036500">return</span><br>
<span class="lineno"></span><span class="op" id="3036507">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="comment" id="3036510">//&nbsp;readType&nbsp;processes&nbsp;a&nbsp;type&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3036552">//</span><br>
<span class="lineno"></span><span class="keyword" id="3036555">func</span>&nbsp;<span class="op" id="3036560">(</span><span class="ident" id="3036561">r</span>&nbsp;<span class="op" id="3036563">*</span><span class="ident" id="3036564">reader</span><span class="op" id="3036570">)</span>&nbsp;<span class="ident" id="3036572">readType</span><span class="op" id="3036580">(</span><span class="ident" id="3036581">decl</span>&nbsp;<span class="op" id="3036586">*</span><span class="ident" id="3036587">ast</span><span class="op" id="3036590">.</span><span class="ident" id="3036591">GenDecl</span><span class="op" id="3036598">,</span>&nbsp;<span class="ident" id="3036600">spec</span>&nbsp;<span class="op" id="3036605">*</span><span class="ident" id="3036606">ast</span><span class="op" id="3036609">.</span><span class="ident" id="3036610">TypeSpec</span><span class="op" id="3036618">)</span>&nbsp;<span class="op" id="3036620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036623">typ</span>&nbsp;<span class="op" id="3036627">:=</span>&nbsp;<span class="ident" id="3036630">r</span><span class="op" id="3036631">.</span><span class="ident" id="3036632">lookupType</span><span class="op" id="3036642">(</span><span class="ident" id="3036643">spec</span><span class="op" id="3036647">.</span><span class="ident" id="3036648">Name</span><span class="op" id="3036652">.</span><span class="ident" id="3036653">Name</span><span class="op" id="3036657">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036660">if</span>&nbsp;<span class="ident" id="3036663">typ</span>&nbsp;<span class="op" id="3036667">==</span>&nbsp;<span class="ident" id="3036670">nil</span>&nbsp;<span class="op" id="3036674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036678">return</span>&nbsp;<span class="comment" id="3036685">//&nbsp;no&nbsp;name&nbsp;or&nbsp;blank&nbsp;name&nbsp;-&nbsp;ignore&nbsp;the&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3036729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3036733">//&nbsp;A&nbsp;type&nbsp;should&nbsp;be&nbsp;added&nbsp;at&nbsp;most&nbsp;once,&nbsp;so&nbsp;typ.decl</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3036786">//&nbsp;should&nbsp;be&nbsp;nil&nbsp;-&nbsp;if&nbsp;it&nbsp;is&nbsp;not,&nbsp;simply&nbsp;overwrite&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036841">typ</span><span class="op" id="3036844">.</span><span class="ident" id="3036845">decl</span>&nbsp;<span class="op" id="3036850">=</span>&nbsp;<span class="ident" id="3036852">decl</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3036859">//&nbsp;compute&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036885">doc</span>&nbsp;<span class="op" id="3036889">:=</span>&nbsp;<span class="ident" id="3036892">spec</span><span class="op" id="3036896">.</span><span class="ident" id="3036897">Doc</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3036902">spec</span><span class="op" id="3036906">.</span><span class="ident" id="3036907">Doc</span>&nbsp;<span class="op" id="3036911">=</span>&nbsp;<span class="ident" id="3036913">nil</span>&nbsp;<span class="comment" id="3036917">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3036952">if</span>&nbsp;<span class="ident" id="3036955">doc</span>&nbsp;<span class="op" id="3036959">==</span>&nbsp;<span class="ident" id="3036962">nil</span>&nbsp;<span class="op" id="3036966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3036970">//&nbsp;no&nbsp;doc&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec,&nbsp;use&nbsp;the&nbsp;declaration&nbsp;doc,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037040">doc</span>&nbsp;<span class="op" id="3037044">=</span>&nbsp;<span class="ident" id="3037046">decl</span><span class="op" id="3037050">.</span><span class="ident" id="3037051">Doc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037056">}</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037059">decl</span><span class="op" id="3037063">.</span><span class="ident" id="3037064">Doc</span>&nbsp;<span class="op" id="3037068">=</span>&nbsp;<span class="ident" id="3037070">nil</span>&nbsp;<span class="comment" id="3037074">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037109">typ</span><span class="op" id="3037112">.</span><span class="ident" id="3037113">doc</span>&nbsp;<span class="op" id="3037117">=</span>&nbsp;<span class="ident" id="3037119">doc</span><span class="op" id="3037122">.</span><span class="ident" id="3037123">Text</span><span class="op" id="3037127">(</span><span class="op" id="3037128">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037132">//&nbsp;record&nbsp;anonymous&nbsp;fields&nbsp;(they&nbsp;may&nbsp;contribute&nbsp;methods)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037190">//&nbsp;(some&nbsp;fields&nbsp;may&nbsp;have&nbsp;been&nbsp;recorded&nbsp;already&nbsp;when&nbsp;filtering</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037253">//&nbsp;exports,&nbsp;but&nbsp;that&#39;s&nbsp;ok)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037281">var</span>&nbsp;<span class="ident" id="3037285">list</span>&nbsp;<span class="op" id="3037290">[</span><span class="op" id="3037291">]</span><span class="op" id="3037292">*</span><span class="ident" id="3037293">ast</span><span class="op" id="3037296">.</span><span class="ident" id="3037297">Field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037304">list</span><span class="op" id="3037308">,</span>&nbsp;<span class="ident" id="3037310">typ</span><span class="op" id="3037313">.</span><span class="ident" id="3037314">isStruct</span>&nbsp;<span class="op" id="3037323">=</span>&nbsp;<span class="ident" id="3037325">fields</span><span class="op" id="3037331">(</span><span class="ident" id="3037332">spec</span><span class="op" id="3037336">.</span><span class="ident" id="3037337">Type</span><span class="op" id="3037341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037344">for</span>&nbsp;<span class="ident" id="3037348">_</span><span class="op" id="3037349">,</span>&nbsp;<span class="ident" id="3037351">field</span>&nbsp;<span class="op" id="3037357">:=</span>&nbsp;<span class="keyword" id="3037360">range</span>&nbsp;<span class="ident" id="3037366">list</span>&nbsp;<span class="op" id="3037371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037375">if</span>&nbsp;<span class="builtinfunc" id="3037378">len</span><span class="op" id="3037381">(</span><span class="ident" id="3037382">field</span><span class="op" id="3037387">.</span><span class="ident" id="3037388">Names</span><span class="op" id="3037393">)</span>&nbsp;<span class="op" id="3037395">==</span>&nbsp;<span class="num" id="3037398">0</span>&nbsp;<span class="op" id="3037400">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037405">r</span><span class="op" id="3037406">.</span><span class="ident" id="3037407">recordAnonymousField</span><span class="op" id="3037427">(</span><span class="ident" id="3037428">typ</span><span class="op" id="3037431">,</span>&nbsp;<span class="ident" id="3037433">field</span><span class="op" id="3037438">.</span><span class="ident" id="3037439">Type</span><span class="op" id="3037443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037450">}</span><br>
<span class="lineno"></span><span class="op" id="3037452">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span><span class="comment" id="3037455">//&nbsp;readFunc&nbsp;processes&nbsp;a&nbsp;func&nbsp;or&nbsp;method&nbsp;declaration.</span><br>
<span class="lineno"></span><span class="comment" id="3037507">//</span><br>
<span class="lineno"></span><span class="keyword" id="3037510">func</span>&nbsp;<span class="op" id="3037515">(</span><span class="ident" id="3037516">r</span>&nbsp;<span class="op" id="3037518">*</span><span class="ident" id="3037519">reader</span><span class="op" id="3037525">)</span>&nbsp;<span class="ident" id="3037527">readFunc</span><span class="op" id="3037535">(</span><span class="ident" id="3037536">fun</span>&nbsp;<span class="op" id="3037540">*</span><span class="ident" id="3037541">ast</span><span class="op" id="3037544">.</span><span class="ident" id="3037545">FuncDecl</span><span class="op" id="3037553">)</span>&nbsp;<span class="op" id="3037555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037558">//&nbsp;strip&nbsp;function&nbsp;body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037582">fun</span><span class="op" id="3037585">.</span><span class="ident" id="3037586">Body</span>&nbsp;<span class="op" id="3037591">=</span>&nbsp;<span class="ident" id="3037593">nil</span><br>
<span class="lineno">360</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037599">//&nbsp;associate&nbsp;methods&nbsp;with&nbsp;the&nbsp;receiver&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037652">if</span>&nbsp;<span class="ident" id="3037655">fun</span><span class="op" id="3037658">.</span><span class="ident" id="3037659">Recv</span>&nbsp;<span class="op" id="3037664">!=</span>&nbsp;<span class="ident" id="3037667">nil</span>&nbsp;<span class="op" id="3037671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037675">//&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037687">recvTypeName</span><span class="op" id="3037699">,</span>&nbsp;<span class="ident" id="3037701">imp</span>&nbsp;<span class="op" id="3037705">:=</span>&nbsp;<span class="ident" id="3037708">baseTypeName</span><span class="op" id="3037720">(</span><span class="ident" id="3037721">fun</span><span class="op" id="3037724">.</span><span class="ident" id="3037725">Recv</span><span class="op" id="3037729">.</span><span class="ident" id="3037730">List</span><span class="op" id="3037734">[</span><span class="num" id="3037735">0</span><span class="op" id="3037736">]</span><span class="op" id="3037737">.</span><span class="ident" id="3037738">Type</span><span class="op" id="3037742">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037746">if</span>&nbsp;<span class="ident" id="3037749">imp</span>&nbsp;<span class="op" id="3037753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037758">//&nbsp;should&nbsp;not&nbsp;happen&nbsp;(incorrect&nbsp;AST);</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037799">//&nbsp;don&#39;t&nbsp;show&nbsp;this&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037828">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037837">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3037841">if</span>&nbsp;<span class="ident" id="3037844">typ</span>&nbsp;<span class="op" id="3037848">:=</span>&nbsp;<span class="ident" id="3037851">r</span><span class="op" id="3037852">.</span><span class="ident" id="3037853">lookupType</span><span class="op" id="3037863">(</span><span class="ident" id="3037864">recvTypeName</span><span class="op" id="3037876">)</span><span class="op" id="3037877">;</span>&nbsp;<span class="ident" id="3037879">typ</span>&nbsp;<span class="op" id="3037883">!=</span>&nbsp;<span class="ident" id="3037886">nil</span>&nbsp;<span class="op" id="3037890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3037895">typ</span><span class="op" id="3037898">.</span><span class="ident" id="3037899">methods</span><span class="op" id="3037906">.</span><span class="ident" id="3037907">set</span><span class="op" id="3037910">(</span><span class="ident" id="3037911">fun</span><span class="op" id="3037914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3037918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037922">//&nbsp;otherwise&nbsp;ignore&nbsp;the&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3037955">//&nbsp;TODO(gri):&nbsp;There&nbsp;may&nbsp;be&nbsp;exported&nbsp;methods&nbsp;of&nbsp;non-exported&nbsp;types</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038023">//&nbsp;that&nbsp;can&nbsp;be&nbsp;called&nbsp;because&nbsp;of&nbsp;exported&nbsp;values&nbsp;(consts,&nbsp;vars,&nbsp;or</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038092">//&nbsp;function&nbsp;results)&nbsp;of&nbsp;that&nbsp;type.&nbsp;Could&nbsp;determine&nbsp;if&nbsp;that&nbsp;is&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038160">//&nbsp;case&nbsp;and&nbsp;then&nbsp;show&nbsp;those&nbsp;methods&nbsp;in&nbsp;an&nbsp;appropriate&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038225">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038233">}</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038237">//&nbsp;associate&nbsp;factory&nbsp;functions&nbsp;with&nbsp;the&nbsp;first&nbsp;visible&nbsp;result&nbsp;type,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038312">if</span>&nbsp;<span class="ident" id="3038315">fun</span><span class="op" id="3038318">.</span><span class="ident" id="3038319">Type</span><span class="op" id="3038323">.</span><span class="ident" id="3038324">Results</span><span class="op" id="3038331">.</span><span class="ident" id="3038332">NumFields</span><span class="op" id="3038341">(</span><span class="op" id="3038342">)</span>&nbsp;<span class="op" id="3038344">&gt;=</span>&nbsp;<span class="num" id="3038347">1</span>&nbsp;<span class="op" id="3038349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038353">res</span>&nbsp;<span class="op" id="3038357">:=</span>&nbsp;<span class="ident" id="3038360">fun</span><span class="op" id="3038363">.</span><span class="ident" id="3038364">Type</span><span class="op" id="3038368">.</span><span class="ident" id="3038369">Results</span><span class="op" id="3038376">.</span><span class="ident" id="3038377">List</span><span class="op" id="3038381">[</span><span class="num" id="3038382">0</span><span class="op" id="3038383">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038387">if</span>&nbsp;<span class="builtinfunc" id="3038390">len</span><span class="op" id="3038393">(</span><span class="ident" id="3038394">res</span><span class="op" id="3038397">.</span><span class="ident" id="3038398">Names</span><span class="op" id="3038403">)</span>&nbsp;<span class="op" id="3038405">&lt;=</span>&nbsp;<span class="num" id="3038408">1</span>&nbsp;<span class="op" id="3038410">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038415">//&nbsp;exactly&nbsp;one&nbsp;(named&nbsp;or&nbsp;anonymous)&nbsp;result&nbsp;associated</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038472">//&nbsp;with&nbsp;the&nbsp;first&nbsp;type&nbsp;in&nbsp;result&nbsp;signature&nbsp;(there&nbsp;may</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038529">//&nbsp;be&nbsp;more&nbsp;than&nbsp;one&nbsp;result)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038560">if</span>&nbsp;<span class="ident" id="3038563">n</span><span class="op" id="3038564">,</span>&nbsp;<span class="ident" id="3038566">imp</span>&nbsp;<span class="op" id="3038570">:=</span>&nbsp;<span class="ident" id="3038573">baseTypeName</span><span class="op" id="3038585">(</span><span class="ident" id="3038586">res</span><span class="op" id="3038589">.</span><span class="ident" id="3038590">Type</span><span class="op" id="3038594">)</span><span class="op" id="3038595">;</span>&nbsp;<span class="op" id="3038597">!</span><span class="ident" id="3038598">imp</span>&nbsp;<span class="op" id="3038602">&amp;&amp;</span>&nbsp;<span class="ident" id="3038605">r</span><span class="op" id="3038606">.</span><span class="ident" id="3038607">isVisible</span><span class="op" id="3038616">(</span><span class="ident" id="3038617">n</span><span class="op" id="3038618">)</span>&nbsp;<span class="op" id="3038620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038626">if</span>&nbsp;<span class="ident" id="3038629">typ</span>&nbsp;<span class="op" id="3038633">:=</span>&nbsp;<span class="ident" id="3038636">r</span><span class="op" id="3038637">.</span><span class="ident" id="3038638">lookupType</span><span class="op" id="3038648">(</span><span class="ident" id="3038649">n</span><span class="op" id="3038650">)</span><span class="op" id="3038651">;</span>&nbsp;<span class="ident" id="3038653">typ</span>&nbsp;<span class="op" id="3038657">!=</span>&nbsp;<span class="ident" id="3038660">nil</span>&nbsp;<span class="op" id="3038664">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038671">//&nbsp;associate&nbsp;function&nbsp;with&nbsp;typ</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038707">typ</span><span class="op" id="3038710">.</span><span class="ident" id="3038711">funcs</span><span class="op" id="3038716">.</span><span class="ident" id="3038717">set</span><span class="op" id="3038720">(</span><span class="ident" id="3038721">fun</span><span class="op" id="3038724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3038731">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038747">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3038754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3038758">//&nbsp;just&nbsp;an&nbsp;ordinary&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038788">r</span><span class="op" id="3038789">.</span><span class="ident" id="3038790">funcs</span><span class="op" id="3038795">.</span><span class="ident" id="3038796">set</span><span class="op" id="3038799">(</span><span class="ident" id="3038800">fun</span><span class="op" id="3038803">)</span><br>
<span class="lineno">400</span><span class="op" id="3038805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3038808">var</span>&nbsp;<span class="op" id="3038812">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038815">noteMarker</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3038829">=</span>&nbsp;<span class="string" id="3038831">`([A-Z][A-Z]+)\(([^)]+)\):?`</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3038879">//&nbsp;MARKER(uid),&nbsp;MARKER&nbsp;at&nbsp;least&nbsp;2&nbsp;chars,&nbsp;uid&nbsp;at&nbsp;least&nbsp;1&nbsp;char</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3038941">noteMarkerRx</span>&nbsp;&nbsp;<span class="op" id="3038955">=</span>&nbsp;<span class="ident" id="3038957">regexp</span><span class="op" id="3038963">.</span><span class="ident" id="3038964">MustCompile</span><span class="op" id="3038975">(</span><span class="string" id="3038976">`^[&nbsp;\t]*`</span>&nbsp;<span class="op" id="3038986">+</span>&nbsp;<span class="ident" id="3038988">noteMarker</span><span class="op" id="3038998">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3039005">//&nbsp;MARKER(uid)&nbsp;at&nbsp;text&nbsp;start</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039035">noteCommentRx</span>&nbsp;<span class="op" id="3039049">=</span>&nbsp;<span class="ident" id="3039051">regexp</span><span class="op" id="3039057">.</span><span class="ident" id="3039058">MustCompile</span><span class="op" id="3039069">(</span><span class="string" id="3039070">`^/[/*][&nbsp;\t]*`</span>&nbsp;<span class="op" id="3039085">+</span>&nbsp;<span class="ident" id="3039087">noteMarker</span><span class="op" id="3039097">)</span>&nbsp;<span class="comment" id="3039099">//&nbsp;MARKER(uid)&nbsp;at&nbsp;comment&nbsp;start</span><br>
<span class="lineno"></span><span class="op" id="3039131">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3039134">//&nbsp;readNote&nbsp;collects&nbsp;a&nbsp;single&nbsp;note&nbsp;from&nbsp;a&nbsp;sequence&nbsp;of&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="3039198">//</span><br>
<span class="lineno">410</span><span class="keyword" id="3039201">func</span>&nbsp;<span class="op" id="3039206">(</span><span class="ident" id="3039207">r</span>&nbsp;<span class="op" id="3039209">*</span><span class="ident" id="3039210">reader</span><span class="op" id="3039216">)</span>&nbsp;<span class="ident" id="3039218">readNote</span><span class="op" id="3039226">(</span><span class="ident" id="3039227">list</span>&nbsp;<span class="op" id="3039232">[</span><span class="op" id="3039233">]</span><span class="op" id="3039234">*</span><span class="ident" id="3039235">ast</span><span class="op" id="3039238">.</span><span class="ident" id="3039239">Comment</span><span class="op" id="3039246">)</span>&nbsp;<span class="op" id="3039248">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039251">text</span>&nbsp;<span class="op" id="3039256">:=</span>&nbsp;<span class="op" id="3039259">(</span><span class="op" id="3039260">&amp;</span><span class="ident" id="3039261">ast</span><span class="op" id="3039264">.</span><span class="ident" id="3039265">CommentGroup</span><span class="op" id="3039277">{</span><span class="ident" id="3039278">List</span><span class="op" id="3039282">:</span>&nbsp;<span class="ident" id="3039284">list</span><span class="op" id="3039288">}</span><span class="op" id="3039289">)</span><span class="op" id="3039290">.</span><span class="ident" id="3039291">Text</span><span class="op" id="3039295">(</span><span class="op" id="3039296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039299">if</span>&nbsp;<span class="ident" id="3039302">m</span>&nbsp;<span class="op" id="3039304">:=</span>&nbsp;<span class="ident" id="3039307">noteMarkerRx</span><span class="op" id="3039319">.</span><span class="ident" id="3039320">FindStringSubmatchIndex</span><span class="op" id="3039343">(</span><span class="ident" id="3039344">text</span><span class="op" id="3039348">)</span><span class="op" id="3039349">;</span>&nbsp;<span class="ident" id="3039351">m</span>&nbsp;<span class="op" id="3039353">!=</span>&nbsp;<span class="ident" id="3039356">nil</span>&nbsp;<span class="op" id="3039360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039364">//&nbsp;The&nbsp;note&nbsp;body&nbsp;starts&nbsp;after&nbsp;the&nbsp;marker.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039408">//&nbsp;We&nbsp;remove&nbsp;any&nbsp;formatting&nbsp;so&nbsp;that&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039455">//&nbsp;get&nbsp;spurious&nbsp;line&nbsp;breaks/indentation&nbsp;when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3039502">//&nbsp;showing&nbsp;the&nbsp;TODO&nbsp;body.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039530">body</span>&nbsp;<span class="op" id="3039535">:=</span>&nbsp;<span class="ident" id="3039538">clean</span><span class="op" id="3039543">(</span><span class="ident" id="3039544">text</span><span class="op" id="3039548">[</span><span class="ident" id="3039549">m</span><span class="op" id="3039550">[</span><span class="num" id="3039551">1</span><span class="op" id="3039552">]</span><span class="op" id="3039553">:</span><span class="op" id="3039554">]</span><span class="op" id="3039555">,</span>&nbsp;<span class="ident" id="3039557">keepNL</span><span class="op" id="3039563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3039567">if</span>&nbsp;<span class="ident" id="3039570">body</span>&nbsp;<span class="op" id="3039575">!=</span>&nbsp;<span class="string" id="3039578">&#34;&#34;</span>&nbsp;<span class="op" id="3039581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039586">marker</span>&nbsp;<span class="op" id="3039593">:=</span>&nbsp;<span class="ident" id="3039596">text</span><span class="op" id="3039600">[</span><span class="ident" id="3039601">m</span><span class="op" id="3039602">[</span><span class="num" id="3039603">2</span><span class="op" id="3039604">]</span><span class="op" id="3039605">:</span><span class="ident" id="3039606">m</span><span class="op" id="3039607">[</span><span class="num" id="3039608">3</span><span class="op" id="3039609">]</span><span class="op" id="3039610">]</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039615">r</span><span class="op" id="3039616">.</span><span class="ident" id="3039617">notes</span><span class="op" id="3039622">[</span><span class="ident" id="3039623">marker</span><span class="op" id="3039629">]</span>&nbsp;<span class="op" id="3039631">=</span>&nbsp;<span class="builtinfunc" id="3039633">append</span><span class="op" id="3039639">(</span><span class="ident" id="3039640">r</span><span class="op" id="3039641">.</span><span class="ident" id="3039642">notes</span><span class="op" id="3039647">[</span><span class="ident" id="3039648">marker</span><span class="op" id="3039654">]</span><span class="op" id="3039655">,</span>&nbsp;<span class="op" id="3039657">&amp;</span><span class="ident" id="3039658">Note</span><span class="op" id="3039662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039668">Pos</span><span class="op" id="3039671">:</span>&nbsp;&nbsp;<span class="ident" id="3039674">list</span><span class="op" id="3039678">[</span><span class="num" id="3039679">0</span><span class="op" id="3039680">]</span><span class="op" id="3039681">.</span><span class="ident" id="3039682">Pos</span><span class="op" id="3039685">(</span><span class="op" id="3039686">)</span><span class="op" id="3039687">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039693">End</span><span class="op" id="3039696">:</span>&nbsp;&nbsp;<span class="ident" id="3039699">list</span><span class="op" id="3039703">[</span><span class="builtinfunc" id="3039704">len</span><span class="op" id="3039707">(</span><span class="ident" id="3039708">list</span><span class="op" id="3039712">)</span><span class="op" id="3039713">-</span><span class="num" id="3039714">1</span><span class="op" id="3039715">]</span><span class="op" id="3039716">.</span><span class="ident" id="3039717">End</span><span class="op" id="3039720">(</span><span class="op" id="3039721">)</span><span class="op" id="3039722">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039728">UID</span><span class="op" id="3039731">:</span>&nbsp;&nbsp;<span class="ident" id="3039734">text</span><span class="op" id="3039738">[</span><span class="ident" id="3039739">m</span><span class="op" id="3039740">[</span><span class="num" id="3039741">4</span><span class="op" id="3039742">]</span><span class="op" id="3039743">:</span><span class="ident" id="3039744">m</span><span class="op" id="3039745">[</span><span class="num" id="3039746">5</span><span class="op" id="3039747">]</span><span class="op" id="3039748">]</span><span class="op" id="3039749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3039755">Body</span><span class="op" id="3039759">:</span>&nbsp;<span class="ident" id="3039761">body</span><span class="op" id="3039765">,</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039770">}</span><span class="op" id="3039771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3039778">}</span><br>
<span class="lineno"></span><span class="op" id="3039780">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">430</span><span class="comment" id="3039783">//&nbsp;readNotes&nbsp;extracts&nbsp;notes&nbsp;from&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="3039826">//&nbsp;A&nbsp;note&nbsp;must&nbsp;start&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;comment&nbsp;with&nbsp;&#34;MARKER(uid):&#34;</span><br>
<span class="lineno"></span><span class="comment" id="3039897">//&nbsp;and&nbsp;is&nbsp;followed&nbsp;by&nbsp;the&nbsp;note&nbsp;body&nbsp;(e.g.,&nbsp;&#34;//&nbsp;BUG(gri):&nbsp;fix&nbsp;this&#34;).</span><br>
<span class="lineno"></span><span class="comment" id="3039966">//&nbsp;The&nbsp;note&nbsp;ends&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;comment&nbsp;group&nbsp;or&nbsp;at&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3040034">//&nbsp;another&nbsp;note&nbsp;in&nbsp;the&nbsp;same&nbsp;comment&nbsp;group,&nbsp;whichever&nbsp;comes&nbsp;first.</span><br>
<span class="lineno">435</span><span class="comment" id="3040100">//</span><br>
<span class="lineno"></span><span class="keyword" id="3040103">func</span>&nbsp;<span class="op" id="3040108">(</span><span class="ident" id="3040109">r</span>&nbsp;<span class="op" id="3040111">*</span><span class="ident" id="3040112">reader</span><span class="op" id="3040118">)</span>&nbsp;<span class="ident" id="3040120">readNotes</span><span class="op" id="3040129">(</span><span class="ident" id="3040130">comments</span>&nbsp;<span class="op" id="3040139">[</span><span class="op" id="3040140">]</span><span class="op" id="3040141">*</span><span class="ident" id="3040142">ast</span><span class="op" id="3040145">.</span><span class="ident" id="3040146">CommentGroup</span><span class="op" id="3040158">)</span>&nbsp;<span class="op" id="3040160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040163">for</span>&nbsp;<span class="ident" id="3040167">_</span><span class="op" id="3040168">,</span>&nbsp;<span class="ident" id="3040170">group</span>&nbsp;<span class="op" id="3040176">:=</span>&nbsp;<span class="keyword" id="3040179">range</span>&nbsp;<span class="ident" id="3040185">comments</span>&nbsp;<span class="op" id="3040194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040198">i</span>&nbsp;<span class="op" id="3040200">:=</span>&nbsp;<span class="op" id="3040203">-</span><span class="num" id="3040204">1</span>&nbsp;<span class="comment" id="3040206">//&nbsp;comment&nbsp;index&nbsp;of&nbsp;most&nbsp;recent&nbsp;note&nbsp;start,&nbsp;valid&nbsp;if&nbsp;&gt;=&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040266">list</span>&nbsp;<span class="op" id="3040271">:=</span>&nbsp;<span class="ident" id="3040274">group</span><span class="op" id="3040279">.</span><span class="ident" id="3040280">List</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040287">for</span>&nbsp;<span class="ident" id="3040291">j</span><span class="op" id="3040292">,</span>&nbsp;<span class="ident" id="3040294">c</span>&nbsp;<span class="op" id="3040296">:=</span>&nbsp;<span class="keyword" id="3040299">range</span>&nbsp;<span class="ident" id="3040305">list</span>&nbsp;<span class="op" id="3040310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040315">if</span>&nbsp;<span class="ident" id="3040318">noteCommentRx</span><span class="op" id="3040331">.</span><span class="ident" id="3040332">MatchString</span><span class="op" id="3040343">(</span><span class="ident" id="3040344">c</span><span class="op" id="3040345">.</span><span class="ident" id="3040346">Text</span><span class="op" id="3040350">)</span>&nbsp;<span class="op" id="3040352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040358">if</span>&nbsp;<span class="ident" id="3040361">i</span>&nbsp;<span class="op" id="3040363">&gt;=</span>&nbsp;<span class="num" id="3040366">0</span>&nbsp;<span class="op" id="3040368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040375">r</span><span class="op" id="3040376">.</span><span class="ident" id="3040377">readNote</span><span class="op" id="3040385">(</span><span class="ident" id="3040386">list</span><span class="op" id="3040390">[</span><span class="ident" id="3040391">i</span><span class="op" id="3040392">:</span><span class="ident" id="3040393">j</span><span class="op" id="3040394">]</span><span class="op" id="3040395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040401">}</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040407">i</span>&nbsp;<span class="op" id="3040409">=</span>&nbsp;<span class="ident" id="3040411">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040416">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040420">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040424">if</span>&nbsp;<span class="ident" id="3040427">i</span>&nbsp;<span class="op" id="3040429">&gt;=</span>&nbsp;<span class="num" id="3040432">0</span>&nbsp;<span class="op" id="3040434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040439">r</span><span class="op" id="3040440">.</span><span class="ident" id="3040441">readNote</span><span class="op" id="3040449">(</span><span class="ident" id="3040450">list</span><span class="op" id="3040454">[</span><span class="ident" id="3040455">i</span><span class="op" id="3040456">:</span><span class="op" id="3040457">]</span><span class="op" id="3040458">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040465">}</span><br>
<span class="lineno"></span><span class="op" id="3040467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3040470">//&nbsp;readFile&nbsp;adds&nbsp;the&nbsp;AST&nbsp;for&nbsp;a&nbsp;source&nbsp;file&nbsp;to&nbsp;the&nbsp;reader.</span><br>
<span class="lineno">455</span><span class="comment" id="3040528">//</span><br>
<span class="lineno"></span><span class="keyword" id="3040531">func</span>&nbsp;<span class="op" id="3040536">(</span><span class="ident" id="3040537">r</span>&nbsp;<span class="op" id="3040539">*</span><span class="ident" id="3040540">reader</span><span class="op" id="3040546">)</span>&nbsp;<span class="ident" id="3040548">readFile</span><span class="op" id="3040556">(</span><span class="ident" id="3040557">src</span>&nbsp;<span class="op" id="3040561">*</span><span class="ident" id="3040562">ast</span><span class="op" id="3040565">.</span><span class="ident" id="3040566">File</span><span class="op" id="3040570">)</span>&nbsp;<span class="op" id="3040572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3040575">//&nbsp;add&nbsp;package&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040605">if</span>&nbsp;<span class="ident" id="3040608">src</span><span class="op" id="3040611">.</span><span class="ident" id="3040612">Doc</span>&nbsp;<span class="op" id="3040616">!=</span>&nbsp;<span class="ident" id="3040619">nil</span>&nbsp;<span class="op" id="3040623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040627">r</span><span class="op" id="3040628">.</span><span class="ident" id="3040629">readDoc</span><span class="op" id="3040636">(</span><span class="ident" id="3040637">src</span><span class="op" id="3040640">.</span><span class="ident" id="3040641">Doc</span><span class="op" id="3040644">)</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3040648">src</span><span class="op" id="3040651">.</span><span class="ident" id="3040652">Doc</span>&nbsp;<span class="op" id="3040656">=</span>&nbsp;<span class="ident" id="3040658">nil</span>&nbsp;<span class="comment" id="3040662">//&nbsp;doc&nbsp;consumed&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3040697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3040701">//&nbsp;add&nbsp;all&nbsp;declarations</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040726">for</span>&nbsp;<span class="ident" id="3040730">_</span><span class="op" id="3040731">,</span>&nbsp;<span class="ident" id="3040733">decl</span>&nbsp;<span class="op" id="3040738">:=</span>&nbsp;<span class="keyword" id="3040741">range</span>&nbsp;<span class="ident" id="3040747">src</span><span class="op" id="3040750">.</span><span class="ident" id="3040751">Decls</span>&nbsp;<span class="op" id="3040757">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040761">switch</span>&nbsp;<span class="ident" id="3040768">d</span>&nbsp;<span class="op" id="3040770">:=</span>&nbsp;<span class="ident" id="3040773">decl</span><span class="op" id="3040777">.</span><span class="op" id="3040778">(</span><span class="keyword" id="3040779">type</span><span class="op" id="3040783">)</span>&nbsp;<span class="op" id="3040785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040789">case</span>&nbsp;<span class="op" id="3040794">*</span><span class="ident" id="3040795">ast</span><span class="op" id="3040798">.</span><span class="ident" id="3040799">GenDecl</span><span class="op" id="3040806">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040811">switch</span>&nbsp;<span class="ident" id="3040818">d</span><span class="op" id="3040819">.</span><span class="ident" id="3040820">Tok</span>&nbsp;<span class="op" id="3040824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040829">case</span>&nbsp;<span class="ident" id="3040834">token</span><span class="op" id="3040839">.</span><span class="ident" id="3040840">IMPORT</span><span class="op" id="3040846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3040852">//&nbsp;imports&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040892">for</span>&nbsp;<span class="ident" id="3040896">_</span><span class="op" id="3040897">,</span>&nbsp;<span class="ident" id="3040899">spec</span>&nbsp;<span class="op" id="3040904">:=</span>&nbsp;<span class="keyword" id="3040907">range</span>&nbsp;<span class="ident" id="3040913">d</span><span class="op" id="3040914">.</span><span class="ident" id="3040915">Specs</span>&nbsp;<span class="op" id="3040921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040928">if</span>&nbsp;<span class="ident" id="3040931">s</span><span class="op" id="3040932">,</span>&nbsp;<span class="ident" id="3040934">ok</span>&nbsp;<span class="op" id="3040937">:=</span>&nbsp;<span class="ident" id="3040940">spec</span><span class="op" id="3040944">.</span><span class="op" id="3040945">(</span><span class="op" id="3040946">*</span><span class="ident" id="3040947">ast</span><span class="op" id="3040950">.</span><span class="ident" id="3040951">ImportSpec</span><span class="op" id="3040961">)</span><span class="op" id="3040962">;</span>&nbsp;<span class="ident" id="3040964">ok</span>&nbsp;<span class="op" id="3040967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3040975">if</span>&nbsp;<span class="ident" id="3040978">import_</span><span class="op" id="3040985">,</span>&nbsp;<span class="ident" id="3040987">err</span>&nbsp;<span class="op" id="3040991">:=</span>&nbsp;<span class="ident" id="3040994">strconv</span><span class="op" id="3041001">.</span><span class="ident" id="3041002">Unquote</span><span class="op" id="3041009">(</span><span class="ident" id="3041010">s</span><span class="op" id="3041011">.</span><span class="ident" id="3041012">Path</span><span class="op" id="3041016">.</span><span class="ident" id="3041017">Value</span><span class="op" id="3041022">)</span><span class="op" id="3041023">;</span>&nbsp;<span class="ident" id="3041025">err</span>&nbsp;<span class="op" id="3041029">==</span>&nbsp;<span class="ident" id="3041032">nil</span>&nbsp;<span class="op" id="3041036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041045">r</span><span class="op" id="3041046">.</span><span class="ident" id="3041047">imports</span><span class="op" id="3041054">[</span><span class="ident" id="3041055">import_</span><span class="op" id="3041062">]</span>&nbsp;<span class="op" id="3041064">=</span>&nbsp;<span class="num" id="3041066">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041074">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041087">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041092">case</span>&nbsp;<span class="ident" id="3041097">token</span><span class="op" id="3041102">.</span><span class="ident" id="3041103">CONST</span><span class="op" id="3041108">,</span>&nbsp;<span class="ident" id="3041110">token</span><span class="op" id="3041115">.</span><span class="ident" id="3041116">VAR</span><span class="op" id="3041119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041125">//&nbsp;constants&nbsp;and&nbsp;variables&nbsp;are&nbsp;always&nbsp;handled&nbsp;as&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041186">r</span><span class="op" id="3041187">.</span><span class="ident" id="3041188">readValue</span><span class="op" id="3041197">(</span><span class="ident" id="3041198">d</span><span class="op" id="3041199">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041204">case</span>&nbsp;<span class="ident" id="3041209">token</span><span class="op" id="3041214">.</span><span class="ident" id="3041215">TYPE</span><span class="op" id="3041219">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041225">//&nbsp;types&nbsp;are&nbsp;handled&nbsp;individually</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041263">if</span>&nbsp;<span class="builtinfunc" id="3041266">len</span><span class="op" id="3041269">(</span><span class="ident" id="3041270">d</span><span class="op" id="3041271">.</span><span class="ident" id="3041272">Specs</span><span class="op" id="3041277">)</span>&nbsp;<span class="op" id="3041279">==</span>&nbsp;<span class="num" id="3041282">1</span>&nbsp;<span class="op" id="3041284">&amp;&amp;</span>&nbsp;<span class="op" id="3041287">!</span><span class="ident" id="3041288">d</span><span class="op" id="3041289">.</span><span class="ident" id="3041290">Lparen</span><span class="op" id="3041296">.</span><span class="ident" id="3041297">IsValid</span><span class="op" id="3041304">(</span><span class="op" id="3041305">)</span>&nbsp;<span class="op" id="3041307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041314">//&nbsp;common&nbsp;case:&nbsp;single&nbsp;declaration&nbsp;w/o&nbsp;parentheses</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041370">//&nbsp;(if&nbsp;a&nbsp;single&nbsp;declaration&nbsp;is&nbsp;parenthesized,</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041421">//&nbsp;create&nbsp;a&nbsp;new&nbsp;fake&nbsp;declaration&nbsp;below,&nbsp;so&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041474">//&nbsp;go/doc&nbsp;type&nbsp;declarations&nbsp;always&nbsp;appear&nbsp;w/o</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041525">//&nbsp;parentheses)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041546">if</span>&nbsp;<span class="ident" id="3041549">s</span><span class="op" id="3041550">,</span>&nbsp;<span class="ident" id="3041552">ok</span>&nbsp;<span class="op" id="3041555">:=</span>&nbsp;<span class="ident" id="3041558">d</span><span class="op" id="3041559">.</span><span class="ident" id="3041560">Specs</span><span class="op" id="3041565">[</span><span class="num" id="3041566">0</span><span class="op" id="3041567">]</span><span class="op" id="3041568">.</span><span class="op" id="3041569">(</span><span class="op" id="3041570">*</span><span class="ident" id="3041571">ast</span><span class="op" id="3041574">.</span><span class="ident" id="3041575">TypeSpec</span><span class="op" id="3041583">)</span><span class="op" id="3041584">;</span>&nbsp;<span class="ident" id="3041586">ok</span>&nbsp;<span class="op" id="3041589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041597">r</span><span class="op" id="3041598">.</span><span class="ident" id="3041599">readType</span><span class="op" id="3041607">(</span><span class="ident" id="3041608">d</span><span class="op" id="3041609">,</span>&nbsp;<span class="ident" id="3041611">s</span><span class="op" id="3041612">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041626">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3041636">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041642">for</span>&nbsp;<span class="ident" id="3041646">_</span><span class="op" id="3041647">,</span>&nbsp;<span class="ident" id="3041649">spec</span>&nbsp;<span class="op" id="3041654">:=</span>&nbsp;<span class="keyword" id="3041657">range</span>&nbsp;<span class="ident" id="3041663">d</span><span class="op" id="3041664">.</span><span class="ident" id="3041665">Specs</span>&nbsp;<span class="op" id="3041671">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3041678">if</span>&nbsp;<span class="ident" id="3041681">s</span><span class="op" id="3041682">,</span>&nbsp;<span class="ident" id="3041684">ok</span>&nbsp;<span class="op" id="3041687">:=</span>&nbsp;<span class="ident" id="3041690">spec</span><span class="op" id="3041694">.</span><span class="op" id="3041695">(</span><span class="op" id="3041696">*</span><span class="ident" id="3041697">ast</span><span class="op" id="3041700">.</span><span class="ident" id="3041701">TypeSpec</span><span class="op" id="3041709">)</span><span class="op" id="3041710">;</span>&nbsp;<span class="ident" id="3041712">ok</span>&nbsp;<span class="op" id="3041715">{</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041723">//&nbsp;use&nbsp;an&nbsp;individual&nbsp;(possibly&nbsp;fake)&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041778">//&nbsp;for&nbsp;each&nbsp;type;&nbsp;this&nbsp;also&nbsp;ensures&nbsp;that&nbsp;each&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041835">//&nbsp;gets&nbsp;to&nbsp;(re-)use&nbsp;the&nbsp;declaration&nbsp;documentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041891">//&nbsp;if&nbsp;there&#39;s&nbsp;none&nbsp;associated&nbsp;with&nbsp;the&nbsp;spec&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041948">fake</span>&nbsp;<span class="op" id="3041953">:=</span>&nbsp;<span class="op" id="3041956">&amp;</span><span class="ident" id="3041957">ast</span><span class="op" id="3041960">.</span><span class="ident" id="3041961">GenDecl</span><span class="op" id="3041968">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3041977">Doc</span><span class="op" id="3041980">:</span>&nbsp;<span class="ident" id="3041982">d</span><span class="op" id="3041983">.</span><span class="ident" id="3041984">Doc</span><span class="op" id="3041987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3041996">//&nbsp;don&#39;t&nbsp;use&nbsp;the&nbsp;existing&nbsp;TokPos&nbsp;because&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042047">//&nbsp;will&nbsp;lead&nbsp;to&nbsp;the&nbsp;wrong&nbsp;selection&nbsp;range&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042100">//&nbsp;the&nbsp;fake&nbsp;declaration&nbsp;if&nbsp;there&nbsp;are&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042149">//&nbsp;than&nbsp;one&nbsp;type&nbsp;in&nbsp;the&nbsp;group&nbsp;(this&nbsp;affects</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042200">//&nbsp;src/cmd/godoc/godoc.go&#39;s&nbsp;posLink_urlFunc)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042252">TokPos</span><span class="op" id="3042258">:</span>&nbsp;<span class="ident" id="3042260">s</span><span class="op" id="3042261">.</span><span class="ident" id="3042262">Pos</span><span class="op" id="3042265">(</span><span class="op" id="3042266">)</span><span class="op" id="3042267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042276">Tok</span><span class="op" id="3042279">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3042284">token</span><span class="op" id="3042289">.</span><span class="ident" id="3042290">TYPE</span><span class="op" id="3042294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042303">Specs</span><span class="op" id="3042308">:</span>&nbsp;&nbsp;<span class="op" id="3042311">[</span><span class="op" id="3042312">]</span><span class="ident" id="3042313">ast</span><span class="op" id="3042316">.</span><span class="ident" id="3042317">Spec</span><span class="op" id="3042321">{</span><span class="ident" id="3042322">s</span><span class="op" id="3042323">}</span><span class="op" id="3042324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042332">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042340">r</span><span class="op" id="3042341">.</span><span class="ident" id="3042342">readType</span><span class="op" id="3042350">(</span><span class="ident" id="3042351">fake</span><span class="op" id="3042355">,</span>&nbsp;<span class="ident" id="3042357">s</span><span class="op" id="3042358">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042380">case</span>&nbsp;<span class="op" id="3042385">*</span><span class="ident" id="3042386">ast</span><span class="op" id="3042389">.</span><span class="ident" id="3042390">FuncDecl</span><span class="op" id="3042398">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042403">r</span><span class="op" id="3042404">.</span><span class="ident" id="3042405">readFunc</span><span class="op" id="3042413">(</span><span class="ident" id="3042414">d</span><span class="op" id="3042415">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3042422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042426">//&nbsp;collect&nbsp;MARKER(...):&nbsp;annotations</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042463">r</span><span class="op" id="3042464">.</span><span class="ident" id="3042465">readNotes</span><span class="op" id="3042474">(</span><span class="ident" id="3042475">src</span><span class="op" id="3042478">.</span><span class="ident" id="3042479">Comments</span><span class="op" id="3042487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042490">src</span><span class="op" id="3042493">.</span><span class="ident" id="3042494">Comments</span>&nbsp;<span class="op" id="3042503">=</span>&nbsp;<span class="ident" id="3042505">nil</span>&nbsp;<span class="comment" id="3042509">//&nbsp;consumed&nbsp;unassociated&nbsp;comments&nbsp;-&nbsp;remove&nbsp;from&nbsp;AST</span><br>
<span class="lineno"></span><span class="op" id="3042561">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3042564">func</span>&nbsp;<span class="op" id="3042569">(</span><span class="ident" id="3042570">r</span>&nbsp;<span class="op" id="3042572">*</span><span class="ident" id="3042573">reader</span><span class="op" id="3042579">)</span>&nbsp;<span class="ident" id="3042581">readPackage</span><span class="op" id="3042592">(</span><span class="ident" id="3042593">pkg</span>&nbsp;<span class="op" id="3042597">*</span><span class="ident" id="3042598">ast</span><span class="op" id="3042601">.</span><span class="ident" id="3042602">Package</span><span class="op" id="3042609">,</span>&nbsp;<span class="ident" id="3042611">mode</span>&nbsp;<span class="ident" id="3042616">Mode</span><span class="op" id="3042620">)</span>&nbsp;<span class="op" id="3042622">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042625">//&nbsp;initialize&nbsp;reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042647">r</span><span class="op" id="3042648">.</span><span class="ident" id="3042649">filenames</span>&nbsp;<span class="op" id="3042659">=</span>&nbsp;<span class="builtinfunc" id="3042661">make</span><span class="op" id="3042665">(</span><span class="op" id="3042666">[</span><span class="op" id="3042667">]</span><span class="builtintype" id="3042668">string</span><span class="op" id="3042674">,</span>&nbsp;<span class="builtinfunc" id="3042676">len</span><span class="op" id="3042679">(</span><span class="ident" id="3042680">pkg</span><span class="op" id="3042683">.</span><span class="ident" id="3042684">Files</span><span class="op" id="3042689">)</span><span class="op" id="3042690">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042693">r</span><span class="op" id="3042694">.</span><span class="ident" id="3042695">imports</span>&nbsp;<span class="op" id="3042703">=</span>&nbsp;<span class="builtinfunc" id="3042705">make</span><span class="op" id="3042709">(</span><span class="keyword" id="3042710">map</span><span class="op" id="3042713">[</span><span class="builtintype" id="3042714">string</span><span class="op" id="3042720">]</span><span class="builtintype" id="3042721">int</span><span class="op" id="3042724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042727">r</span><span class="op" id="3042728">.</span><span class="ident" id="3042729">mode</span>&nbsp;<span class="op" id="3042734">=</span>&nbsp;<span class="ident" id="3042736">mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042742">r</span><span class="op" id="3042743">.</span><span class="ident" id="3042744">types</span>&nbsp;<span class="op" id="3042750">=</span>&nbsp;<span class="builtinfunc" id="3042752">make</span><span class="op" id="3042756">(</span><span class="keyword" id="3042757">map</span><span class="op" id="3042760">[</span><span class="builtintype" id="3042761">string</span><span class="op" id="3042767">]</span><span class="op" id="3042768">*</span><span class="ident" id="3042769">namedType</span><span class="op" id="3042778">)</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042781">r</span><span class="op" id="3042782">.</span><span class="ident" id="3042783">funcs</span>&nbsp;<span class="op" id="3042789">=</span>&nbsp;<span class="builtinfunc" id="3042791">make</span><span class="op" id="3042795">(</span><span class="ident" id="3042796">methodSet</span><span class="op" id="3042805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042808">r</span><span class="op" id="3042809">.</span><span class="ident" id="3042810">notes</span>&nbsp;<span class="op" id="3042816">=</span>&nbsp;<span class="builtinfunc" id="3042818">make</span><span class="op" id="3042822">(</span><span class="keyword" id="3042823">map</span><span class="op" id="3042826">[</span><span class="builtintype" id="3042827">string</span><span class="op" id="3042833">]</span><span class="op" id="3042834">[</span><span class="op" id="3042835">]</span><span class="op" id="3042836">*</span><span class="ident" id="3042837">Note</span><span class="op" id="3042841">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042845">//&nbsp;sort&nbsp;package&nbsp;files&nbsp;before&nbsp;reading&nbsp;them&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3042900">//&nbsp;result&nbsp;does&nbsp;not&nbsp;depend&nbsp;on&nbsp;map&nbsp;iteration&nbsp;order</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042950">i</span>&nbsp;<span class="op" id="3042952">:=</span>&nbsp;<span class="num" id="3042955">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3042958">for</span>&nbsp;<span class="ident" id="3042962">filename</span>&nbsp;<span class="op" id="3042971">:=</span>&nbsp;<span class="keyword" id="3042974">range</span>&nbsp;<span class="ident" id="3042980">pkg</span><span class="op" id="3042983">.</span><span class="ident" id="3042984">Files</span>&nbsp;<span class="op" id="3042990">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3042994">r</span><span class="op" id="3042995">.</span><span class="ident" id="3042996">filenames</span><span class="op" id="3043005">[</span><span class="ident" id="3043006">i</span><span class="op" id="3043007">]</span>&nbsp;<span class="op" id="3043009">=</span>&nbsp;<span class="ident" id="3043011">filename</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043022">i</span><span class="op" id="3043023">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043027">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043030">sort</span><span class="op" id="3043034">.</span><span class="ident" id="3043035">Strings</span><span class="op" id="3043042">(</span><span class="ident" id="3043043">r</span><span class="op" id="3043044">.</span><span class="ident" id="3043045">filenames</span><span class="op" id="3043054">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3043058">//&nbsp;process&nbsp;files&nbsp;in&nbsp;sorted&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043092">for</span>&nbsp;<span class="ident" id="3043096">_</span><span class="op" id="3043097">,</span>&nbsp;<span class="ident" id="3043099">filename</span>&nbsp;<span class="op" id="3043108">:=</span>&nbsp;<span class="keyword" id="3043111">range</span>&nbsp;<span class="ident" id="3043117">r</span><span class="op" id="3043118">.</span><span class="ident" id="3043119">filenames</span>&nbsp;<span class="op" id="3043129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043133">f</span>&nbsp;<span class="op" id="3043135">:=</span>&nbsp;<span class="ident" id="3043138">pkg</span><span class="op" id="3043141">.</span><span class="ident" id="3043142">Files</span><span class="op" id="3043147">[</span><span class="ident" id="3043148">filename</span><span class="op" id="3043156">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043160">if</span>&nbsp;<span class="ident" id="3043163">mode</span><span class="op" id="3043167">&amp;</span><span class="ident" id="3043168">AllDecls</span>&nbsp;<span class="op" id="3043177">==</span>&nbsp;<span class="num" id="3043180">0</span>&nbsp;<span class="op" id="3043182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043187">r</span><span class="op" id="3043188">.</span><span class="ident" id="3043189">fileExports</span><span class="op" id="3043200">(</span><span class="ident" id="3043201">f</span><span class="op" id="3043202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043206">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043210">r</span><span class="op" id="3043211">.</span><span class="ident" id="3043212">readFile</span><span class="op" id="3043220">(</span><span class="ident" id="3043221">f</span><span class="op" id="3043222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043225">}</span><br>
<span class="lineno">550</span><span class="op" id="3043227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3043230">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3043310">//&nbsp;Types</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="3043320">func</span>&nbsp;<span class="ident" id="3043325">customizeRecv</span><span class="op" id="3043338">(</span><span class="ident" id="3043339">f</span>&nbsp;<span class="op" id="3043341">*</span><span class="ident" id="3043342">Func</span><span class="op" id="3043346">,</span>&nbsp;<span class="ident" id="3043348">recvTypeName</span>&nbsp;<span class="builtintype" id="3043361">string</span><span class="op" id="3043367">,</span>&nbsp;<span class="ident" id="3043369">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="3043383">bool</span><span class="op" id="3043387">,</span>&nbsp;<span class="ident" id="3043389">level</span>&nbsp;<span class="builtintype" id="3043395">int</span><span class="op" id="3043398">)</span>&nbsp;<span class="op" id="3043400">*</span><span class="ident" id="3043401">Func</span>&nbsp;<span class="op" id="3043406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043409">if</span>&nbsp;<span class="ident" id="3043412">f</span>&nbsp;<span class="op" id="3043414">==</span>&nbsp;<span class="ident" id="3043417">nil</span>&nbsp;<span class="op" id="3043421">||</span>&nbsp;<span class="ident" id="3043424">f</span><span class="op" id="3043425">.</span><span class="ident" id="3043426">Decl</span>&nbsp;<span class="op" id="3043431">==</span>&nbsp;<span class="ident" id="3043434">nil</span>&nbsp;<span class="op" id="3043438">||</span>&nbsp;<span class="ident" id="3043441">f</span><span class="op" id="3043442">.</span><span class="ident" id="3043443">Decl</span><span class="op" id="3043447">.</span><span class="ident" id="3043448">Recv</span>&nbsp;<span class="op" id="3043453">==</span>&nbsp;<span class="ident" id="3043456">nil</span>&nbsp;<span class="op" id="3043460">||</span>&nbsp;<span class="builtinfunc" id="3043463">len</span><span class="op" id="3043466">(</span><span class="ident" id="3043467">f</span><span class="op" id="3043468">.</span><span class="ident" id="3043469">Decl</span><span class="op" id="3043473">.</span><span class="ident" id="3043474">Recv</span><span class="op" id="3043478">.</span><span class="ident" id="3043479">List</span><span class="op" id="3043483">)</span>&nbsp;<span class="op" id="3043485">!=</span>&nbsp;<span class="num" id="3043488">1</span>&nbsp;<span class="op" id="3043490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043494">return</span>&nbsp;<span class="ident" id="3043501">f</span>&nbsp;<span class="comment" id="3043503">//&nbsp;shouldn&#39;t&nbsp;happen,&nbsp;but&nbsp;be&nbsp;safe</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043537">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3043541">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;and&nbsp;set&nbsp;new&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043591">newField</span>&nbsp;<span class="op" id="3043600">:=</span>&nbsp;<span class="op" id="3043603">*</span><span class="ident" id="3043604">f</span><span class="op" id="3043605">.</span><span class="ident" id="3043606">Decl</span><span class="op" id="3043610">.</span><span class="ident" id="3043611">Recv</span><span class="op" id="3043615">.</span><span class="ident" id="3043616">List</span><span class="op" id="3043620">[</span><span class="num" id="3043621">0</span><span class="op" id="3043622">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043625">origPos</span>&nbsp;<span class="op" id="3043633">:=</span>&nbsp;<span class="ident" id="3043636">newField</span><span class="op" id="3043644">.</span><span class="ident" id="3043645">Type</span><span class="op" id="3043649">.</span><span class="ident" id="3043650">Pos</span><span class="op" id="3043653">(</span><span class="op" id="3043654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043657">_</span><span class="op" id="3043658">,</span>&nbsp;<span class="ident" id="3043660">origRecvIsPtr</span>&nbsp;<span class="op" id="3043674">:=</span>&nbsp;<span class="ident" id="3043677">newField</span><span class="op" id="3043685">.</span><span class="ident" id="3043686">Type</span><span class="op" id="3043690">.</span><span class="op" id="3043691">(</span><span class="op" id="3043692">*</span><span class="ident" id="3043693">ast</span><span class="op" id="3043696">.</span><span class="ident" id="3043697">StarExpr</span><span class="op" id="3043705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043708">newIdent</span>&nbsp;<span class="op" id="3043717">:=</span>&nbsp;<span class="op" id="3043720">&amp;</span><span class="ident" id="3043721">ast</span><span class="op" id="3043724">.</span><span class="ident" id="3043725">Ident</span><span class="op" id="3043730">{</span><span class="ident" id="3043731">NamePos</span><span class="op" id="3043738">:</span>&nbsp;<span class="ident" id="3043740">origPos</span><span class="op" id="3043747">,</span>&nbsp;<span class="ident" id="3043749">Name</span><span class="op" id="3043753">:</span>&nbsp;<span class="ident" id="3043755">recvTypeName</span><span class="op" id="3043767">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043770">var</span>&nbsp;<span class="ident" id="3043774">typ</span>&nbsp;<span class="ident" id="3043778">ast</span><span class="op" id="3043781">.</span><span class="ident" id="3043782">Expr</span>&nbsp;<span class="op" id="3043787">=</span>&nbsp;<span class="ident" id="3043789">newIdent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3043799">if</span>&nbsp;<span class="op" id="3043802">!</span><span class="ident" id="3043803">embeddedIsPtr</span>&nbsp;<span class="op" id="3043817">&amp;&amp;</span>&nbsp;<span class="ident" id="3043820">origRecvIsPtr</span>&nbsp;<span class="op" id="3043834">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043838">newIdent</span><span class="op" id="3043846">.</span><span class="ident" id="3043847">NamePos</span><span class="op" id="3043854">++</span>&nbsp;<span class="comment" id="3043857">//&nbsp;&#39;*&#39;&nbsp;is&nbsp;one&nbsp;character</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043883">typ</span>&nbsp;<span class="op" id="3043887">=</span>&nbsp;<span class="op" id="3043889">&amp;</span><span class="ident" id="3043890">ast</span><span class="op" id="3043893">.</span><span class="ident" id="3043894">StarExpr</span><span class="op" id="3043902">{</span><span class="ident" id="3043903">Star</span><span class="op" id="3043907">:</span>&nbsp;<span class="ident" id="3043909">origPos</span><span class="op" id="3043916">,</span>&nbsp;<span class="ident" id="3043918">X</span><span class="op" id="3043919">:</span>&nbsp;<span class="ident" id="3043921">newIdent</span><span class="op" id="3043929">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3043932">}</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3043935">newField</span><span class="op" id="3043943">.</span><span class="ident" id="3043944">Type</span>&nbsp;<span class="op" id="3043949">=</span>&nbsp;<span class="ident" id="3043951">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3043957">//&nbsp;copy&nbsp;existing&nbsp;receiver&nbsp;field&nbsp;list&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044022">newFieldList</span>&nbsp;<span class="op" id="3044035">:=</span>&nbsp;<span class="op" id="3044038">*</span><span class="ident" id="3044039">f</span><span class="op" id="3044040">.</span><span class="ident" id="3044041">Decl</span><span class="op" id="3044045">.</span><span class="ident" id="3044046">Recv</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044052">newFieldList</span><span class="op" id="3044064">.</span><span class="ident" id="3044065">List</span>&nbsp;<span class="op" id="3044070">=</span>&nbsp;<span class="op" id="3044072">[</span><span class="op" id="3044073">]</span><span class="op" id="3044074">*</span><span class="ident" id="3044075">ast</span><span class="op" id="3044078">.</span><span class="ident" id="3044079">Field</span><span class="op" id="3044084">{</span><span class="op" id="3044085">&amp;</span><span class="ident" id="3044086">newField</span><span class="op" id="3044094">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044098">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;declaration&nbsp;and&nbsp;set&nbsp;new&nbsp;receiver&nbsp;field&nbsp;list</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044169">newFuncDecl</span>&nbsp;<span class="op" id="3044181">:=</span>&nbsp;<span class="op" id="3044184">*</span><span class="ident" id="3044185">f</span><span class="op" id="3044186">.</span><span class="ident" id="3044187">Decl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044193">newFuncDecl</span><span class="op" id="3044204">.</span><span class="ident" id="3044205">Recv</span>&nbsp;<span class="op" id="3044210">=</span>&nbsp;<span class="op" id="3044212">&amp;</span><span class="ident" id="3044213">newFieldList</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044228">//&nbsp;copy&nbsp;existing&nbsp;function&nbsp;documentation&nbsp;and&nbsp;set&nbsp;new&nbsp;declaration</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044293">newF</span>&nbsp;<span class="op" id="3044298">:=</span>&nbsp;<span class="op" id="3044301">*</span><span class="ident" id="3044302">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044305">newF</span><span class="op" id="3044309">.</span><span class="ident" id="3044310">Decl</span>&nbsp;<span class="op" id="3044315">=</span>&nbsp;<span class="op" id="3044317">&amp;</span><span class="ident" id="3044318">newFuncDecl</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044331">newF</span><span class="op" id="3044335">.</span><span class="ident" id="3044336">Recv</span>&nbsp;<span class="op" id="3044341">=</span>&nbsp;<span class="ident" id="3044343">recvString</span><span class="op" id="3044353">(</span><span class="ident" id="3044354">typ</span><span class="op" id="3044357">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044360">//&nbsp;the&nbsp;Orig&nbsp;field&nbsp;never&nbsp;changes</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044393">newF</span><span class="op" id="3044397">.</span><span class="ident" id="3044398">Level</span>&nbsp;<span class="op" id="3044404">=</span>&nbsp;<span class="ident" id="3044406">level</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044414">return</span>&nbsp;<span class="op" id="3044421">&amp;</span><span class="ident" id="3044422">newF</span><br>
<span class="lineno"></span><span class="op" id="3044427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">590</span><span class="comment" id="3044430">//&nbsp;collectEmbeddedMethods&nbsp;collects&nbsp;the&nbsp;embedded&nbsp;methods&nbsp;of&nbsp;typ&nbsp;in&nbsp;mset.</span><br>
<span class="lineno"></span><span class="comment" id="3044502">//</span><br>
<span class="lineno"></span><span class="keyword" id="3044505">func</span>&nbsp;<span class="op" id="3044510">(</span><span class="ident" id="3044511">r</span>&nbsp;<span class="op" id="3044513">*</span><span class="ident" id="3044514">reader</span><span class="op" id="3044520">)</span>&nbsp;<span class="ident" id="3044522">collectEmbeddedMethods</span><span class="op" id="3044544">(</span><span class="ident" id="3044545">mset</span>&nbsp;<span class="ident" id="3044550">methodSet</span><span class="op" id="3044559">,</span>&nbsp;<span class="ident" id="3044561">typ</span>&nbsp;<span class="op" id="3044565">*</span><span class="ident" id="3044566">namedType</span><span class="op" id="3044575">,</span>&nbsp;<span class="ident" id="3044577">recvTypeName</span>&nbsp;<span class="builtintype" id="3044590">string</span><span class="op" id="3044596">,</span>&nbsp;<span class="ident" id="3044598">embeddedIsPtr</span>&nbsp;<span class="builtintype" id="3044612">bool</span><span class="op" id="3044616">,</span>&nbsp;<span class="ident" id="3044618">level</span>&nbsp;<span class="builtintype" id="3044624">int</span><span class="op" id="3044627">,</span>&nbsp;<span class="ident" id="3044629">visited</span>&nbsp;<span class="ident" id="3044637">embeddedSet</span><span class="op" id="3044648">)</span>&nbsp;<span class="op" id="3044650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044653">visited</span><span class="op" id="3044660">[</span><span class="ident" id="3044661">typ</span><span class="op" id="3044664">]</span>&nbsp;<span class="op" id="3044666">=</span>&nbsp;<span class="builtintype" id="3044668">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3044674">for</span>&nbsp;<span class="ident" id="3044678">embedded</span><span class="op" id="3044686">,</span>&nbsp;<span class="ident" id="3044688">isPtr</span>&nbsp;<span class="op" id="3044694">:=</span>&nbsp;<span class="keyword" id="3044697">range</span>&nbsp;<span class="ident" id="3044703">typ</span><span class="op" id="3044706">.</span><span class="ident" id="3044707">embedded</span>&nbsp;<span class="op" id="3044716">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044720">//&nbsp;Once&nbsp;an&nbsp;embedded&nbsp;type&nbsp;is&nbsp;embedded&nbsp;as&nbsp;a&nbsp;pointer&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044777">//&nbsp;all&nbsp;embedded&nbsp;types&nbsp;in&nbsp;those&nbsp;types&nbsp;are&nbsp;treated&nbsp;like</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044833">//&nbsp;pointer&nbsp;types&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;the&nbsp;receiver&nbsp;type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044889">//&nbsp;computation;&nbsp;i.e.,&nbsp;embeddedIsPtr&nbsp;is&nbsp;sticky&nbsp;for&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3044946">//&nbsp;embedding&nbsp;hierarchy.</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3044972">thisEmbeddedIsPtr</span>&nbsp;<span class="op" id="3044990">:=</span>&nbsp;<span class="ident" id="3044993">embeddedIsPtr</span>&nbsp;<span class="op" id="3045007">||</span>&nbsp;<span class="ident" id="3045010">isPtr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045018">for</span>&nbsp;<span class="ident" id="3045022">_</span><span class="op" id="3045023">,</span>&nbsp;<span class="ident" id="3045025">m</span>&nbsp;<span class="op" id="3045027">:=</span>&nbsp;<span class="keyword" id="3045030">range</span>&nbsp;<span class="ident" id="3045036">embedded</span><span class="op" id="3045044">.</span><span class="ident" id="3045045">methods</span>&nbsp;<span class="op" id="3045053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045058">//&nbsp;only&nbsp;top-level&nbsp;methods&nbsp;are&nbsp;embedded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045100">if</span>&nbsp;<span class="ident" id="3045103">m</span><span class="op" id="3045104">.</span><span class="ident" id="3045105">Level</span>&nbsp;<span class="op" id="3045111">==</span>&nbsp;<span class="num" id="3045114">0</span>&nbsp;<span class="op" id="3045116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3045122">mset</span><span class="op" id="3045126">.</span><span class="ident" id="3045127">add</span><span class="op" id="3045130">(</span><span class="ident" id="3045131">customizeRecv</span><span class="op" id="3045144">(</span><span class="ident" id="3045145">m</span><span class="op" id="3045146">,</span>&nbsp;<span class="ident" id="3045148">recvTypeName</span><span class="op" id="3045160">,</span>&nbsp;<span class="ident" id="3045162">thisEmbeddedIsPtr</span><span class="op" id="3045179">,</span>&nbsp;<span class="ident" id="3045181">level</span><span class="op" id="3045186">)</span><span class="op" id="3045187">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045200">if</span>&nbsp;<span class="op" id="3045203">!</span><span class="ident" id="3045204">visited</span><span class="op" id="3045211">[</span><span class="ident" id="3045212">embedded</span><span class="op" id="3045220">]</span>&nbsp;<span class="op" id="3045222">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3045227">r</span><span class="op" id="3045228">.</span><span class="ident" id="3045229">collectEmbeddedMethods</span><span class="op" id="3045251">(</span><span class="ident" id="3045252">mset</span><span class="op" id="3045256">,</span>&nbsp;<span class="ident" id="3045258">embedded</span><span class="op" id="3045266">,</span>&nbsp;<span class="ident" id="3045268">recvTypeName</span><span class="op" id="3045280">,</span>&nbsp;<span class="ident" id="3045282">thisEmbeddedIsPtr</span><span class="op" id="3045299">,</span>&nbsp;<span class="ident" id="3045301">level</span><span class="op" id="3045306">+</span><span class="num" id="3045307">1</span><span class="op" id="3045308">,</span>&nbsp;<span class="ident" id="3045310">visited</span><span class="op" id="3045317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045321">}</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3045327">delete</span><span class="op" id="3045333">(</span><span class="ident" id="3045334">visited</span><span class="op" id="3045341">,</span>&nbsp;<span class="ident" id="3045343">typ</span><span class="op" id="3045346">)</span><br>
<span class="lineno"></span><span class="op" id="3045348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3045351">//&nbsp;computeMethodSets&nbsp;determines&nbsp;the&nbsp;actual&nbsp;method&nbsp;sets&nbsp;for&nbsp;each&nbsp;type&nbsp;encountered.</span><br>
<span class="lineno">615</span><span class="comment" id="3045433">//</span><br>
<span class="lineno"></span><span class="keyword" id="3045436">func</span>&nbsp;<span class="op" id="3045441">(</span><span class="ident" id="3045442">r</span>&nbsp;<span class="op" id="3045444">*</span><span class="ident" id="3045445">reader</span><span class="op" id="3045451">)</span>&nbsp;<span class="ident" id="3045453">computeMethodSets</span><span class="op" id="3045470">(</span><span class="op" id="3045471">)</span>&nbsp;<span class="op" id="3045473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045476">for</span>&nbsp;<span class="ident" id="3045480">_</span><span class="op" id="3045481">,</span>&nbsp;<span class="ident" id="3045483">t</span>&nbsp;<span class="op" id="3045485">:=</span>&nbsp;<span class="keyword" id="3045488">range</span>&nbsp;<span class="ident" id="3045494">r</span><span class="op" id="3045495">.</span><span class="ident" id="3045496">types</span>&nbsp;<span class="op" id="3045502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045506">//&nbsp;collect&nbsp;embedded&nbsp;methods&nbsp;for&nbsp;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045542">if</span>&nbsp;<span class="ident" id="3045545">t</span><span class="op" id="3045546">.</span><span class="ident" id="3045547">isStruct</span>&nbsp;<span class="op" id="3045556">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045561">//&nbsp;struct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3045574">r</span><span class="op" id="3045575">.</span><span class="ident" id="3045576">collectEmbeddedMethods</span><span class="op" id="3045598">(</span><span class="ident" id="3045599">t</span><span class="op" id="3045600">.</span><span class="ident" id="3045601">methods</span><span class="op" id="3045608">,</span>&nbsp;<span class="ident" id="3045610">t</span><span class="op" id="3045611">,</span>&nbsp;<span class="ident" id="3045613">t</span><span class="op" id="3045614">.</span><span class="ident" id="3045615">name</span><span class="op" id="3045619">,</span>&nbsp;<span class="builtintype" id="3045621">false</span><span class="op" id="3045626">,</span>&nbsp;<span class="num" id="3045628">1</span><span class="op" id="3045629">,</span>&nbsp;<span class="builtinfunc" id="3045631">make</span><span class="op" id="3045635">(</span><span class="ident" id="3045636">embeddedSet</span><span class="op" id="3045647">)</span><span class="op" id="3045648">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045652">}</span>&nbsp;<span class="keyword" id="3045654">else</span>&nbsp;<span class="op" id="3045659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045664">//&nbsp;interface</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045680">//&nbsp;TODO(gri)&nbsp;fix&nbsp;this</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045704">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3045711">//&nbsp;if&nbsp;error&nbsp;was&nbsp;declared&nbsp;locally,&nbsp;don&#39;t&nbsp;treat&nbsp;it&nbsp;as&nbsp;exported&nbsp;field&nbsp;anymore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045787">if</span>&nbsp;<span class="ident" id="3045790">r</span><span class="op" id="3045791">.</span><span class="ident" id="3045792">errorDecl</span>&nbsp;<span class="op" id="3045802">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3045806">for</span>&nbsp;<span class="ident" id="3045810">_</span><span class="op" id="3045811">,</span>&nbsp;<span class="ident" id="3045813">ityp</span>&nbsp;<span class="op" id="3045818">:=</span>&nbsp;<span class="keyword" id="3045821">range</span>&nbsp;<span class="ident" id="3045827">r</span><span class="op" id="3045828">.</span><span class="ident" id="3045829">fixlist</span>&nbsp;<span class="op" id="3045837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3045842">removeErrorField</span><span class="op" id="3045858">(</span><span class="ident" id="3045859">ityp</span><span class="op" id="3045863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3045870">}</span><br>
<span class="lineno"></span><span class="op" id="3045872">}</span><br>
<span class="lineno">635</span><br>
<span class="lineno"></span><span class="comment" id="3045875">//&nbsp;cleanupTypes&nbsp;removes&nbsp;the&nbsp;association&nbsp;of&nbsp;functions&nbsp;and&nbsp;methods&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="3045945">//&nbsp;types&nbsp;that&nbsp;have&nbsp;no&nbsp;declaration.&nbsp;Instead,&nbsp;these&nbsp;functions&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span><span class="comment" id="3046017">//&nbsp;are&nbsp;shown&nbsp;at&nbsp;the&nbsp;package&nbsp;level.&nbsp;It&nbsp;also&nbsp;removes&nbsp;types&nbsp;with&nbsp;missing</span><br>
<span class="lineno"></span><span class="comment" id="3046087">//&nbsp;declarations&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible.</span><br>
<span class="lineno">640</span><span class="comment" id="3046129">//</span><br>
<span class="lineno"></span><span class="keyword" id="3046132">func</span>&nbsp;<span class="op" id="3046137">(</span><span class="ident" id="3046138">r</span>&nbsp;<span class="op" id="3046140">*</span><span class="ident" id="3046141">reader</span><span class="op" id="3046147">)</span>&nbsp;<span class="ident" id="3046149">cleanupTypes</span><span class="op" id="3046161">(</span><span class="op" id="3046162">)</span>&nbsp;<span class="op" id="3046164">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3046167">for</span>&nbsp;<span class="ident" id="3046171">_</span><span class="op" id="3046172">,</span>&nbsp;<span class="ident" id="3046174">t</span>&nbsp;<span class="op" id="3046176">:=</span>&nbsp;<span class="keyword" id="3046179">range</span>&nbsp;<span class="ident" id="3046185">r</span><span class="op" id="3046186">.</span><span class="ident" id="3046187">types</span>&nbsp;<span class="op" id="3046193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3046197">visible</span>&nbsp;<span class="op" id="3046205">:=</span>&nbsp;<span class="ident" id="3046208">r</span><span class="op" id="3046209">.</span><span class="ident" id="3046210">isVisible</span><span class="op" id="3046219">(</span><span class="ident" id="3046220">t</span><span class="op" id="3046221">.</span><span class="ident" id="3046222">name</span><span class="op" id="3046226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3046230">if</span>&nbsp;<span class="ident" id="3046233">t</span><span class="op" id="3046234">.</span><span class="ident" id="3046235">decl</span>&nbsp;<span class="op" id="3046240">==</span>&nbsp;<span class="ident" id="3046243">nil</span>&nbsp;<span class="op" id="3046247">&amp;&amp;</span>&nbsp;<span class="op" id="3046250">(</span><span class="ident" id="3046251">predeclaredTypes</span><span class="op" id="3046267">[</span><span class="ident" id="3046268">t</span><span class="op" id="3046269">.</span><span class="ident" id="3046270">name</span><span class="op" id="3046274">]</span>&nbsp;<span class="op" id="3046276">||</span>&nbsp;<span class="ident" id="3046279">t</span><span class="op" id="3046280">.</span><span class="ident" id="3046281">isEmbedded</span>&nbsp;<span class="op" id="3046292">&amp;&amp;</span>&nbsp;<span class="ident" id="3046295">visible</span><span class="op" id="3046302">)</span>&nbsp;<span class="op" id="3046304">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046309">//&nbsp;t.name&nbsp;is&nbsp;a&nbsp;predeclared&nbsp;type&nbsp;(and&nbsp;was&nbsp;not&nbsp;redeclared&nbsp;in&nbsp;this&nbsp;package),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046386">//&nbsp;or&nbsp;it&nbsp;was&nbsp;embedded&nbsp;somewhere&nbsp;but&nbsp;its&nbsp;declaration&nbsp;is&nbsp;missing&nbsp;(because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046461">//&nbsp;the&nbsp;AST&nbsp;is&nbsp;incomplete):&nbsp;move&nbsp;any&nbsp;associated&nbsp;values,&nbsp;funcs,&nbsp;and&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046538">//&nbsp;back&nbsp;to&nbsp;the&nbsp;top-level&nbsp;so&nbsp;that&nbsp;they&nbsp;are&nbsp;not&nbsp;lost.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046593">//&nbsp;1)&nbsp;move&nbsp;values</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3046614">r</span><span class="op" id="3046615">.</span><span class="ident" id="3046616">values</span>&nbsp;<span class="op" id="3046623">=</span>&nbsp;<span class="builtinfunc" id="3046625">append</span><span class="op" id="3046631">(</span><span class="ident" id="3046632">r</span><span class="op" id="3046633">.</span><span class="ident" id="3046634">values</span><span class="op" id="3046640">,</span>&nbsp;<span class="ident" id="3046642">t</span><span class="op" id="3046643">.</span><span class="ident" id="3046644">values</span><span class="op" id="3046650">...</span><span class="op" id="3046653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046658">//&nbsp;2)&nbsp;move&nbsp;factory&nbsp;functions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3046690">for</span>&nbsp;<span class="ident" id="3046694">name</span><span class="op" id="3046698">,</span>&nbsp;<span class="ident" id="3046700">f</span>&nbsp;<span class="op" id="3046702">:=</span>&nbsp;<span class="keyword" id="3046705">range</span>&nbsp;<span class="ident" id="3046711">t</span><span class="op" id="3046712">.</span><span class="ident" id="3046713">funcs</span>&nbsp;<span class="op" id="3046719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046725">//&nbsp;in&nbsp;a&nbsp;correct&nbsp;AST,&nbsp;package-level&nbsp;function&nbsp;names</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046779">//&nbsp;are&nbsp;all&nbsp;different&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;check&nbsp;for&nbsp;conflicts</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3046837">r</span><span class="op" id="3046838">.</span><span class="ident" id="3046839">funcs</span><span class="op" id="3046844">[</span><span class="ident" id="3046845">name</span><span class="op" id="3046849">]</span>&nbsp;<span class="op" id="3046851">=</span>&nbsp;<span class="ident" id="3046853">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3046858">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046863">//&nbsp;3)&nbsp;move&nbsp;methods</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3046885">for</span>&nbsp;<span class="ident" id="3046889">name</span><span class="op" id="3046893">,</span>&nbsp;<span class="ident" id="3046895">m</span>&nbsp;<span class="op" id="3046897">:=</span>&nbsp;<span class="keyword" id="3046900">range</span>&nbsp;<span class="ident" id="3046906">t</span><span class="op" id="3046907">.</span><span class="ident" id="3046908">methods</span>&nbsp;<span class="op" id="3046916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3046922">//&nbsp;don&#39;t&nbsp;overwrite&nbsp;functions&nbsp;with&nbsp;the&nbsp;same&nbsp;name&nbsp;-&nbsp;drop&nbsp;them</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3046986">if</span>&nbsp;<span class="ident" id="3046989">_</span><span class="op" id="3046990">,</span>&nbsp;<span class="ident" id="3046992">found</span>&nbsp;<span class="op" id="3046998">:=</span>&nbsp;<span class="ident" id="3047001">r</span><span class="op" id="3047002">.</span><span class="ident" id="3047003">funcs</span><span class="op" id="3047008">[</span><span class="ident" id="3047009">name</span><span class="op" id="3047013">]</span><span class="op" id="3047014">;</span>&nbsp;<span class="op" id="3047016">!</span><span class="ident" id="3047017">found</span>&nbsp;<span class="op" id="3047023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047030">r</span><span class="op" id="3047031">.</span><span class="ident" id="3047032">funcs</span><span class="op" id="3047037">[</span><span class="ident" id="3047038">name</span><span class="op" id="3047042">]</span>&nbsp;<span class="op" id="3047044">=</span>&nbsp;<span class="ident" id="3047046">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047061">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3047065">//&nbsp;remove&nbsp;types&nbsp;w/o&nbsp;declaration&nbsp;or&nbsp;which&nbsp;are&nbsp;not&nbsp;visible</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3047124">if</span>&nbsp;<span class="ident" id="3047127">t</span><span class="op" id="3047128">.</span><span class="ident" id="3047129">decl</span>&nbsp;<span class="op" id="3047134">==</span>&nbsp;<span class="ident" id="3047137">nil</span>&nbsp;<span class="op" id="3047141">||</span>&nbsp;<span class="op" id="3047144">!</span><span class="ident" id="3047145">visible</span>&nbsp;<span class="op" id="3047153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3047158">delete</span><span class="op" id="3047164">(</span><span class="ident" id="3047165">r</span><span class="op" id="3047166">.</span><span class="ident" id="3047167">types</span><span class="op" id="3047172">,</span>&nbsp;<span class="ident" id="3047174">t</span><span class="op" id="3047175">.</span><span class="ident" id="3047176">name</span><span class="op" id="3047180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047187">}</span><br>
<span class="lineno">670</span><span class="op" id="3047189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3047192">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="3047272">//&nbsp;Sorting</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="3047284">type</span>&nbsp;<span class="ident" id="3047289">data</span>&nbsp;<span class="keyword" id="3047294">struct</span>&nbsp;<span class="op" id="3047301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047304">n</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3047309">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047314">swap</span>&nbsp;<span class="keyword" id="3047319">func</span><span class="op" id="3047323">(</span><span class="ident" id="3047324">i</span><span class="op" id="3047325">,</span>&nbsp;<span class="ident" id="3047327">j</span>&nbsp;<span class="builtintype" id="3047329">int</span><span class="op" id="3047332">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047335">less</span>&nbsp;<span class="keyword" id="3047340">func</span><span class="op" id="3047344">(</span><span class="ident" id="3047345">i</span><span class="op" id="3047346">,</span>&nbsp;<span class="ident" id="3047348">j</span>&nbsp;<span class="builtintype" id="3047350">int</span><span class="op" id="3047353">)</span>&nbsp;<span class="builtintype" id="3047355">bool</span><br>
<span class="lineno"></span><span class="op" id="3047360">}</span><br>
<span class="lineno">680</span><br>
<span class="lineno"></span><span class="keyword" id="3047363">func</span>&nbsp;<span class="op" id="3047368">(</span><span class="ident" id="3047369">d</span>&nbsp;<span class="op" id="3047371">*</span><span class="ident" id="3047372">data</span><span class="op" id="3047376">)</span>&nbsp;<span class="ident" id="3047378">Len</span><span class="op" id="3047381">(</span><span class="op" id="3047382">)</span>&nbsp;<span class="builtintype" id="3047384">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3047398">{</span>&nbsp;<span class="keyword" id="3047400">return</span>&nbsp;<span class="ident" id="3047407">d</span><span class="op" id="3047408">.</span><span class="ident" id="3047409">n</span>&nbsp;<span class="op" id="3047411">}</span><br>
<span class="lineno"></span><span class="keyword" id="3047413">func</span>&nbsp;<span class="op" id="3047418">(</span><span class="ident" id="3047419">d</span>&nbsp;<span class="op" id="3047421">*</span><span class="ident" id="3047422">data</span><span class="op" id="3047426">)</span>&nbsp;<span class="ident" id="3047428">Swap</span><span class="op" id="3047432">(</span><span class="ident" id="3047433">i</span><span class="op" id="3047434">,</span>&nbsp;<span class="ident" id="3047436">j</span>&nbsp;<span class="builtintype" id="3047438">int</span><span class="op" id="3047441">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3047448">{</span>&nbsp;<span class="ident" id="3047450">d</span><span class="op" id="3047451">.</span><span class="ident" id="3047452">swap</span><span class="op" id="3047456">(</span><span class="ident" id="3047457">i</span><span class="op" id="3047458">,</span>&nbsp;<span class="ident" id="3047460">j</span><span class="op" id="3047461">)</span>&nbsp;<span class="op" id="3047463">}</span><br>
<span class="lineno"></span><span class="keyword" id="3047465">func</span>&nbsp;<span class="op" id="3047470">(</span><span class="ident" id="3047471">d</span>&nbsp;<span class="op" id="3047473">*</span><span class="ident" id="3047474">data</span><span class="op" id="3047478">)</span>&nbsp;<span class="ident" id="3047480">Less</span><span class="op" id="3047484">(</span><span class="ident" id="3047485">i</span><span class="op" id="3047486">,</span>&nbsp;<span class="ident" id="3047488">j</span>&nbsp;<span class="builtintype" id="3047490">int</span><span class="op" id="3047493">)</span>&nbsp;<span class="builtintype" id="3047495">bool</span>&nbsp;<span class="op" id="3047500">{</span>&nbsp;<span class="keyword" id="3047502">return</span>&nbsp;<span class="ident" id="3047509">d</span><span class="op" id="3047510">.</span><span class="ident" id="3047511">less</span><span class="op" id="3047515">(</span><span class="ident" id="3047516">i</span><span class="op" id="3047517">,</span>&nbsp;<span class="ident" id="3047519">j</span><span class="op" id="3047520">)</span>&nbsp;<span class="op" id="3047522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">685</span><span class="comment" id="3047525">//&nbsp;sortBy&nbsp;is&nbsp;a&nbsp;helper&nbsp;function&nbsp;for&nbsp;sorting</span><br>
<span class="lineno"></span><span class="keyword" id="3047568">func</span>&nbsp;<span class="ident" id="3047573">sortBy</span><span class="op" id="3047579">(</span><span class="ident" id="3047580">less</span>&nbsp;<span class="keyword" id="3047585">func</span><span class="op" id="3047589">(</span><span class="ident" id="3047590">i</span><span class="op" id="3047591">,</span>&nbsp;<span class="ident" id="3047593">j</span>&nbsp;<span class="builtintype" id="3047595">int</span><span class="op" id="3047598">)</span>&nbsp;<span class="builtintype" id="3047600">bool</span><span class="op" id="3047604">,</span>&nbsp;<span class="ident" id="3047606">swap</span>&nbsp;<span class="keyword" id="3047611">func</span><span class="op" id="3047615">(</span><span class="ident" id="3047616">i</span><span class="op" id="3047617">,</span>&nbsp;<span class="ident" id="3047619">j</span>&nbsp;<span class="builtintype" id="3047621">int</span><span class="op" id="3047624">)</span><span class="op" id="3047625">,</span>&nbsp;<span class="ident" id="3047627">n</span>&nbsp;<span class="builtintype" id="3047629">int</span><span class="op" id="3047632">)</span>&nbsp;<span class="op" id="3047634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047637">sort</span><span class="op" id="3047641">.</span><span class="ident" id="3047642">Sort</span><span class="op" id="3047646">(</span><span class="op" id="3047647">&amp;</span><span class="ident" id="3047648">data</span><span class="op" id="3047652">{</span><span class="ident" id="3047653">n</span><span class="op" id="3047654">,</span>&nbsp;<span class="ident" id="3047656">swap</span><span class="op" id="3047660">,</span>&nbsp;<span class="ident" id="3047662">less</span><span class="op" id="3047666">}</span><span class="op" id="3047667">)</span><br>
<span class="lineno"></span><span class="op" id="3047669">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">690</span><span class="keyword" id="3047672">func</span>&nbsp;<span class="ident" id="3047677">sortedKeys</span><span class="op" id="3047687">(</span><span class="ident" id="3047688">m</span>&nbsp;<span class="keyword" id="3047690">map</span><span class="op" id="3047693">[</span><span class="builtintype" id="3047694">string</span><span class="op" id="3047700">]</span><span class="builtintype" id="3047701">int</span><span class="op" id="3047704">)</span>&nbsp;<span class="op" id="3047706">[</span><span class="op" id="3047707">]</span><span class="builtintype" id="3047708">string</span>&nbsp;<span class="op" id="3047715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047718">list</span>&nbsp;<span class="op" id="3047723">:=</span>&nbsp;<span class="builtinfunc" id="3047726">make</span><span class="op" id="3047730">(</span><span class="op" id="3047731">[</span><span class="op" id="3047732">]</span><span class="builtintype" id="3047733">string</span><span class="op" id="3047739">,</span>&nbsp;<span class="builtinfunc" id="3047741">len</span><span class="op" id="3047744">(</span><span class="ident" id="3047745">m</span><span class="op" id="3047746">)</span><span class="op" id="3047747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047750">i</span>&nbsp;<span class="op" id="3047752">:=</span>&nbsp;<span class="num" id="3047755">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3047758">for</span>&nbsp;<span class="ident" id="3047762">key</span>&nbsp;<span class="op" id="3047766">:=</span>&nbsp;<span class="keyword" id="3047769">range</span>&nbsp;<span class="ident" id="3047775">m</span>&nbsp;<span class="op" id="3047777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047781">list</span><span class="op" id="3047785">[</span><span class="ident" id="3047786">i</span><span class="op" id="3047787">]</span>&nbsp;<span class="op" id="3047789">=</span>&nbsp;<span class="ident" id="3047791">key</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047797">i</span><span class="op" id="3047798">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3047802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3047805">sort</span><span class="op" id="3047809">.</span><span class="ident" id="3047810">Strings</span><span class="op" id="3047817">(</span><span class="ident" id="3047818">list</span><span class="op" id="3047822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3047825">return</span>&nbsp;<span class="ident" id="3047832">list</span><br>
<span class="lineno"></span><span class="op" id="3047837">}</span><br>
<span class="lineno">700</span><br>
<span class="lineno"></span><span class="comment" id="3047840">//&nbsp;sortingName&nbsp;returns&nbsp;the&nbsp;name&nbsp;to&nbsp;use&nbsp;when&nbsp;sorting&nbsp;d&nbsp;into&nbsp;place.</span><br>
<span class="lineno"></span><span class="comment" id="3047906">//</span><br>
<span class="lineno"></span><span class="keyword" id="3047909">func</span>&nbsp;<span class="ident" id="3047914">sortingName</span><span class="op" id="3047925">(</span><span class="ident" id="3047926">d</span>&nbsp;<span class="op" id="3047928">*</span><span class="ident" id="3047929">ast</span><span class="op" id="3047932">.</span><span class="ident" id="3047933">GenDecl</span><span class="op" id="3047940">)</span>&nbsp;<span class="builtintype" id="3047942">string</span>&nbsp;<span class="op" id="3047949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3047952">if</span>&nbsp;<span class="builtinfunc" id="3047955">len</span><span class="op" id="3047958">(</span><span class="ident" id="3047959">d</span><span class="op" id="3047960">.</span><span class="ident" id="3047961">Specs</span><span class="op" id="3047966">)</span>&nbsp;<span class="op" id="3047968">==</span>&nbsp;<span class="num" id="3047971">1</span>&nbsp;<span class="op" id="3047973">{</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3047977">if</span>&nbsp;<span class="ident" id="3047980">s</span><span class="op" id="3047981">,</span>&nbsp;<span class="ident" id="3047983">ok</span>&nbsp;<span class="op" id="3047986">:=</span>&nbsp;<span class="ident" id="3047989">d</span><span class="op" id="3047990">.</span><span class="ident" id="3047991">Specs</span><span class="op" id="3047996">[</span><span class="num" id="3047997">0</span><span class="op" id="3047998">]</span><span class="op" id="3047999">.</span><span class="op" id="3048000">(</span><span class="op" id="3048001">*</span><span class="ident" id="3048002">ast</span><span class="op" id="3048005">.</span><span class="ident" id="3048006">ValueSpec</span><span class="op" id="3048015">)</span><span class="op" id="3048016">;</span>&nbsp;<span class="ident" id="3048018">ok</span>&nbsp;<span class="op" id="3048021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048026">return</span>&nbsp;<span class="ident" id="3048033">s</span><span class="op" id="3048034">.</span><span class="ident" id="3048035">Names</span><span class="op" id="3048040">[</span><span class="num" id="3048041">0</span><span class="op" id="3048042">]</span><span class="op" id="3048043">.</span><span class="ident" id="3048044">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048051">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048057">return</span>&nbsp;<span class="string" id="3048064">&#34;&#34;</span><br>
<span class="lineno">710</span><span class="op" id="3048067">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3048070">func</span>&nbsp;<span class="ident" id="3048075">sortedValues</span><span class="op" id="3048087">(</span><span class="ident" id="3048088">m</span>&nbsp;<span class="op" id="3048090">[</span><span class="op" id="3048091">]</span><span class="op" id="3048092">*</span><span class="ident" id="3048093">Value</span><span class="op" id="3048098">,</span>&nbsp;<span class="ident" id="3048100">tok</span>&nbsp;<span class="ident" id="3048104">token</span><span class="op" id="3048109">.</span><span class="ident" id="3048110">Token</span><span class="op" id="3048115">)</span>&nbsp;<span class="op" id="3048117">[</span><span class="op" id="3048118">]</span><span class="op" id="3048119">*</span><span class="ident" id="3048120">Value</span>&nbsp;<span class="op" id="3048126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048129">list</span>&nbsp;<span class="op" id="3048134">:=</span>&nbsp;<span class="builtinfunc" id="3048137">make</span><span class="op" id="3048141">(</span><span class="op" id="3048142">[</span><span class="op" id="3048143">]</span><span class="op" id="3048144">*</span><span class="ident" id="3048145">Value</span><span class="op" id="3048150">,</span>&nbsp;<span class="builtinfunc" id="3048152">len</span><span class="op" id="3048155">(</span><span class="ident" id="3048156">m</span><span class="op" id="3048157">)</span><span class="op" id="3048158">)</span>&nbsp;<span class="comment" id="3048160">//&nbsp;big&nbsp;enough&nbsp;in&nbsp;any&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048187">i</span>&nbsp;<span class="op" id="3048189">:=</span>&nbsp;<span class="num" id="3048192">0</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048195">for</span>&nbsp;<span class="ident" id="3048199">_</span><span class="op" id="3048200">,</span>&nbsp;<span class="ident" id="3048202">val</span>&nbsp;<span class="op" id="3048206">:=</span>&nbsp;<span class="keyword" id="3048209">range</span>&nbsp;<span class="ident" id="3048215">m</span>&nbsp;<span class="op" id="3048217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048221">if</span>&nbsp;<span class="ident" id="3048224">val</span><span class="op" id="3048227">.</span><span class="ident" id="3048228">Decl</span><span class="op" id="3048232">.</span><span class="ident" id="3048233">Tok</span>&nbsp;<span class="op" id="3048237">==</span>&nbsp;<span class="ident" id="3048240">tok</span>&nbsp;<span class="op" id="3048244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048249">list</span><span class="op" id="3048253">[</span><span class="ident" id="3048254">i</span><span class="op" id="3048255">]</span>&nbsp;<span class="op" id="3048257">=</span>&nbsp;<span class="ident" id="3048259">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048266">i</span><span class="op" id="3048267">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048272">}</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048275">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048278">list</span>&nbsp;<span class="op" id="3048283">=</span>&nbsp;<span class="ident" id="3048285">list</span><span class="op" id="3048289">[</span><span class="num" id="3048290">0</span><span class="op" id="3048291">:</span><span class="ident" id="3048292">i</span><span class="op" id="3048293">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048297">sortBy</span><span class="op" id="3048303">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048307">func</span><span class="op" id="3048311">(</span><span class="ident" id="3048312">i</span><span class="op" id="3048313">,</span>&nbsp;<span class="ident" id="3048315">j</span>&nbsp;<span class="builtintype" id="3048317">int</span><span class="op" id="3048320">)</span>&nbsp;<span class="builtintype" id="3048322">bool</span>&nbsp;<span class="op" id="3048327">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048332">if</span>&nbsp;<span class="ident" id="3048335">ni</span><span class="op" id="3048337">,</span>&nbsp;<span class="ident" id="3048339">nj</span>&nbsp;<span class="op" id="3048342">:=</span>&nbsp;<span class="ident" id="3048345">sortingName</span><span class="op" id="3048356">(</span><span class="ident" id="3048357">list</span><span class="op" id="3048361">[</span><span class="ident" id="3048362">i</span><span class="op" id="3048363">]</span><span class="op" id="3048364">.</span><span class="ident" id="3048365">Decl</span><span class="op" id="3048369">)</span><span class="op" id="3048370">,</span>&nbsp;<span class="ident" id="3048372">sortingName</span><span class="op" id="3048383">(</span><span class="ident" id="3048384">list</span><span class="op" id="3048388">[</span><span class="ident" id="3048389">j</span><span class="op" id="3048390">]</span><span class="op" id="3048391">.</span><span class="ident" id="3048392">Decl</span><span class="op" id="3048396">)</span><span class="op" id="3048397">;</span>&nbsp;<span class="ident" id="3048399">ni</span>&nbsp;<span class="op" id="3048402">!=</span>&nbsp;<span class="ident" id="3048405">nj</span>&nbsp;<span class="op" id="3048408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048414">return</span>&nbsp;<span class="ident" id="3048421">ni</span>&nbsp;<span class="op" id="3048424">&lt;</span>&nbsp;<span class="ident" id="3048426">nj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048432">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048437">return</span>&nbsp;<span class="ident" id="3048444">list</span><span class="op" id="3048448">[</span><span class="ident" id="3048449">i</span><span class="op" id="3048450">]</span><span class="op" id="3048451">.</span><span class="ident" id="3048452">order</span>&nbsp;<span class="op" id="3048458">&lt;</span>&nbsp;<span class="ident" id="3048460">list</span><span class="op" id="3048464">[</span><span class="ident" id="3048465">j</span><span class="op" id="3048466">]</span><span class="op" id="3048467">.</span><span class="ident" id="3048468">order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048476">}</span><span class="op" id="3048477">,</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048481">func</span><span class="op" id="3048485">(</span><span class="ident" id="3048486">i</span><span class="op" id="3048487">,</span>&nbsp;<span class="ident" id="3048489">j</span>&nbsp;<span class="builtintype" id="3048491">int</span><span class="op" id="3048494">)</span>&nbsp;<span class="op" id="3048496">{</span>&nbsp;<span class="ident" id="3048498">list</span><span class="op" id="3048502">[</span><span class="ident" id="3048503">i</span><span class="op" id="3048504">]</span><span class="op" id="3048505">,</span>&nbsp;<span class="ident" id="3048507">list</span><span class="op" id="3048511">[</span><span class="ident" id="3048512">j</span><span class="op" id="3048513">]</span>&nbsp;<span class="op" id="3048515">=</span>&nbsp;<span class="ident" id="3048517">list</span><span class="op" id="3048521">[</span><span class="ident" id="3048522">j</span><span class="op" id="3048523">]</span><span class="op" id="3048524">,</span>&nbsp;<span class="ident" id="3048526">list</span><span class="op" id="3048530">[</span><span class="ident" id="3048531">i</span><span class="op" id="3048532">]</span>&nbsp;<span class="op" id="3048534">}</span><span class="op" id="3048535">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3048539">len</span><span class="op" id="3048542">(</span><span class="ident" id="3048543">list</span><span class="op" id="3048547">)</span><span class="op" id="3048548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048551">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048555">return</span>&nbsp;<span class="ident" id="3048562">list</span><br>
<span class="lineno">735</span><span class="op" id="3048567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3048570">func</span>&nbsp;<span class="ident" id="3048575">sortedTypes</span><span class="op" id="3048586">(</span><span class="ident" id="3048587">m</span>&nbsp;<span class="keyword" id="3048589">map</span><span class="op" id="3048592">[</span><span class="builtintype" id="3048593">string</span><span class="op" id="3048599">]</span><span class="op" id="3048600">*</span><span class="ident" id="3048601">namedType</span><span class="op" id="3048610">,</span>&nbsp;<span class="ident" id="3048612">allMethods</span>&nbsp;<span class="builtintype" id="3048623">bool</span><span class="op" id="3048627">)</span>&nbsp;<span class="op" id="3048629">[</span><span class="op" id="3048630">]</span><span class="op" id="3048631">*</span><span class="ident" id="3048632">Type</span>&nbsp;<span class="op" id="3048637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048640">list</span>&nbsp;<span class="op" id="3048645">:=</span>&nbsp;<span class="builtinfunc" id="3048648">make</span><span class="op" id="3048652">(</span><span class="op" id="3048653">[</span><span class="op" id="3048654">]</span><span class="op" id="3048655">*</span><span class="ident" id="3048656">Type</span><span class="op" id="3048660">,</span>&nbsp;<span class="builtinfunc" id="3048662">len</span><span class="op" id="3048665">(</span><span class="ident" id="3048666">m</span><span class="op" id="3048667">)</span><span class="op" id="3048668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048671">i</span>&nbsp;<span class="op" id="3048673">:=</span>&nbsp;<span class="num" id="3048676">0</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048679">for</span>&nbsp;<span class="ident" id="3048683">_</span><span class="op" id="3048684">,</span>&nbsp;<span class="ident" id="3048686">t</span>&nbsp;<span class="op" id="3048688">:=</span>&nbsp;<span class="keyword" id="3048691">range</span>&nbsp;<span class="ident" id="3048697">m</span>&nbsp;<span class="op" id="3048699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048703">list</span><span class="op" id="3048707">[</span><span class="ident" id="3048708">i</span><span class="op" id="3048709">]</span>&nbsp;<span class="op" id="3048711">=</span>&nbsp;<span class="op" id="3048713">&amp;</span><span class="ident" id="3048714">Type</span><span class="op" id="3048718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048723">Doc</span><span class="op" id="3048726">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3048732">t</span><span class="op" id="3048733">.</span><span class="ident" id="3048734">doc</span><span class="op" id="3048737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048742">Name</span><span class="op" id="3048746">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3048751">t</span><span class="op" id="3048752">.</span><span class="ident" id="3048753">name</span><span class="op" id="3048757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048762">Decl</span><span class="op" id="3048766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3048771">t</span><span class="op" id="3048772">.</span><span class="ident" id="3048773">decl</span><span class="op" id="3048777">,</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048782">Consts</span><span class="op" id="3048788">:</span>&nbsp;&nbsp;<span class="ident" id="3048791">sortedValues</span><span class="op" id="3048803">(</span><span class="ident" id="3048804">t</span><span class="op" id="3048805">.</span><span class="ident" id="3048806">values</span><span class="op" id="3048812">,</span>&nbsp;<span class="ident" id="3048814">token</span><span class="op" id="3048819">.</span><span class="ident" id="3048820">CONST</span><span class="op" id="3048825">)</span><span class="op" id="3048826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048831">Vars</span><span class="op" id="3048835">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3048840">sortedValues</span><span class="op" id="3048852">(</span><span class="ident" id="3048853">t</span><span class="op" id="3048854">.</span><span class="ident" id="3048855">values</span><span class="op" id="3048861">,</span>&nbsp;<span class="ident" id="3048863">token</span><span class="op" id="3048868">.</span><span class="ident" id="3048869">VAR</span><span class="op" id="3048872">)</span><span class="op" id="3048873">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048878">Funcs</span><span class="op" id="3048883">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3048887">sortedFuncs</span><span class="op" id="3048898">(</span><span class="ident" id="3048899">t</span><span class="op" id="3048900">.</span><span class="ident" id="3048901">funcs</span><span class="op" id="3048906">,</span>&nbsp;<span class="builtintype" id="3048908">true</span><span class="op" id="3048912">)</span><span class="op" id="3048913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048918">Methods</span><span class="op" id="3048925">:</span>&nbsp;<span class="ident" id="3048927">sortedFuncs</span><span class="op" id="3048938">(</span><span class="ident" id="3048939">t</span><span class="op" id="3048940">.</span><span class="ident" id="3048941">methods</span><span class="op" id="3048948">,</span>&nbsp;<span class="ident" id="3048950">allMethods</span><span class="op" id="3048960">)</span><span class="op" id="3048961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048965">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048969">i</span><span class="op" id="3048970">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3048974">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3048978">sortBy</span><span class="op" id="3048984">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3048988">func</span><span class="op" id="3048992">(</span><span class="ident" id="3048993">i</span><span class="op" id="3048994">,</span>&nbsp;<span class="ident" id="3048996">j</span>&nbsp;<span class="builtintype" id="3048998">int</span><span class="op" id="3049001">)</span>&nbsp;<span class="builtintype" id="3049003">bool</span>&nbsp;<span class="op" id="3049008">{</span>&nbsp;<span class="keyword" id="3049010">return</span>&nbsp;<span class="ident" id="3049017">list</span><span class="op" id="3049021">[</span><span class="ident" id="3049022">i</span><span class="op" id="3049023">]</span><span class="op" id="3049024">.</span><span class="ident" id="3049025">Name</span>&nbsp;<span class="op" id="3049030">&lt;</span>&nbsp;<span class="ident" id="3049032">list</span><span class="op" id="3049036">[</span><span class="ident" id="3049037">j</span><span class="op" id="3049038">]</span><span class="op" id="3049039">.</span><span class="ident" id="3049040">Name</span>&nbsp;<span class="op" id="3049045">}</span><span class="op" id="3049046">,</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049050">func</span><span class="op" id="3049054">(</span><span class="ident" id="3049055">i</span><span class="op" id="3049056">,</span>&nbsp;<span class="ident" id="3049058">j</span>&nbsp;<span class="builtintype" id="3049060">int</span><span class="op" id="3049063">)</span>&nbsp;<span class="op" id="3049065">{</span>&nbsp;<span class="ident" id="3049067">list</span><span class="op" id="3049071">[</span><span class="ident" id="3049072">i</span><span class="op" id="3049073">]</span><span class="op" id="3049074">,</span>&nbsp;<span class="ident" id="3049076">list</span><span class="op" id="3049080">[</span><span class="ident" id="3049081">j</span><span class="op" id="3049082">]</span>&nbsp;<span class="op" id="3049084">=</span>&nbsp;<span class="ident" id="3049086">list</span><span class="op" id="3049090">[</span><span class="ident" id="3049091">j</span><span class="op" id="3049092">]</span><span class="op" id="3049093">,</span>&nbsp;<span class="ident" id="3049095">list</span><span class="op" id="3049099">[</span><span class="ident" id="3049100">i</span><span class="op" id="3049101">]</span>&nbsp;<span class="op" id="3049103">}</span><span class="op" id="3049104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3049108">len</span><span class="op" id="3049111">(</span><span class="ident" id="3049112">list</span><span class="op" id="3049116">)</span><span class="op" id="3049117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3049120">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049124">return</span>&nbsp;<span class="ident" id="3049131">list</span><br>
<span class="lineno">760</span><span class="op" id="3049136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3049139">func</span>&nbsp;<span class="ident" id="3049144">removeStar</span><span class="op" id="3049154">(</span><span class="ident" id="3049155">s</span>&nbsp;<span class="builtintype" id="3049157">string</span><span class="op" id="3049163">)</span>&nbsp;<span class="builtintype" id="3049165">string</span>&nbsp;<span class="op" id="3049172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049175">if</span>&nbsp;<span class="builtinfunc" id="3049178">len</span><span class="op" id="3049181">(</span><span class="ident" id="3049182">s</span><span class="op" id="3049183">)</span>&nbsp;<span class="op" id="3049185">&gt;</span>&nbsp;<span class="num" id="3049187">0</span>&nbsp;<span class="op" id="3049189">&amp;&amp;</span>&nbsp;<span class="ident" id="3049192">s</span><span class="op" id="3049193">[</span><span class="num" id="3049194">0</span><span class="op" id="3049195">]</span>&nbsp;<span class="op" id="3049197">==</span>&nbsp;<span class="string" id="3049200">&#39;*&#39;</span>&nbsp;<span class="op" id="3049204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049208">return</span>&nbsp;<span class="ident" id="3049215">s</span><span class="op" id="3049216">[</span><span class="num" id="3049217">1</span><span class="op" id="3049218">:</span><span class="op" id="3049219">]</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3049222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049225">return</span>&nbsp;<span class="ident" id="3049232">s</span><br>
<span class="lineno"></span><span class="op" id="3049234">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3049237">func</span>&nbsp;<span class="ident" id="3049242">sortedFuncs</span><span class="op" id="3049253">(</span><span class="ident" id="3049254">m</span>&nbsp;<span class="ident" id="3049256">methodSet</span><span class="op" id="3049265">,</span>&nbsp;<span class="ident" id="3049267">allMethods</span>&nbsp;<span class="builtintype" id="3049278">bool</span><span class="op" id="3049282">)</span>&nbsp;<span class="op" id="3049284">[</span><span class="op" id="3049285">]</span><span class="op" id="3049286">*</span><span class="ident" id="3049287">Func</span>&nbsp;<span class="op" id="3049292">{</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049295">list</span>&nbsp;<span class="op" id="3049300">:=</span>&nbsp;<span class="builtinfunc" id="3049303">make</span><span class="op" id="3049307">(</span><span class="op" id="3049308">[</span><span class="op" id="3049309">]</span><span class="op" id="3049310">*</span><span class="ident" id="3049311">Func</span><span class="op" id="3049315">,</span>&nbsp;<span class="builtinfunc" id="3049317">len</span><span class="op" id="3049320">(</span><span class="ident" id="3049321">m</span><span class="op" id="3049322">)</span><span class="op" id="3049323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049326">i</span>&nbsp;<span class="op" id="3049328">:=</span>&nbsp;<span class="num" id="3049331">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049334">for</span>&nbsp;<span class="ident" id="3049338">_</span><span class="op" id="3049339">,</span>&nbsp;<span class="ident" id="3049341">m</span>&nbsp;<span class="op" id="3049343">:=</span>&nbsp;<span class="keyword" id="3049346">range</span>&nbsp;<span class="ident" id="3049352">m</span>&nbsp;<span class="op" id="3049354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3049358">//&nbsp;determine&nbsp;which&nbsp;methods&nbsp;to&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049398">switch</span>&nbsp;<span class="op" id="3049405">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049409">case</span>&nbsp;<span class="ident" id="3049414">m</span><span class="op" id="3049415">.</span><span class="ident" id="3049416">Decl</span>&nbsp;<span class="op" id="3049421">==</span>&nbsp;<span class="ident" id="3049424">nil</span><span class="op" id="3049427">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3049432">//&nbsp;exclude&nbsp;conflict&nbsp;entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049460">case</span>&nbsp;<span class="ident" id="3049465">allMethods</span><span class="op" id="3049475">,</span>&nbsp;<span class="ident" id="3049477">m</span><span class="op" id="3049478">.</span><span class="ident" id="3049479">Level</span>&nbsp;<span class="op" id="3049485">==</span>&nbsp;<span class="num" id="3049488">0</span><span class="op" id="3049489">,</span>&nbsp;<span class="op" id="3049491">!</span><span class="ident" id="3049492">ast</span><span class="op" id="3049495">.</span><span class="ident" id="3049496">IsExported</span><span class="op" id="3049506">(</span><span class="ident" id="3049507">removeStar</span><span class="op" id="3049517">(</span><span class="ident" id="3049518">m</span><span class="op" id="3049519">.</span><span class="ident" id="3049520">Orig</span><span class="op" id="3049524">)</span><span class="op" id="3049525">)</span><span class="op" id="3049526">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3049531">//&nbsp;forced&nbsp;inclusion,&nbsp;method&nbsp;not&nbsp;embedded,&nbsp;or&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3049586">//&nbsp;embedded&nbsp;but&nbsp;original&nbsp;receiver&nbsp;type&nbsp;not&nbsp;exported</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049641">list</span><span class="op" id="3049645">[</span><span class="ident" id="3049646">i</span><span class="op" id="3049647">]</span>&nbsp;<span class="op" id="3049649">=</span>&nbsp;<span class="ident" id="3049651">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049656">i</span><span class="op" id="3049657">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3049662">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3049665">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049668">list</span>&nbsp;<span class="op" id="3049673">=</span>&nbsp;<span class="ident" id="3049675">list</span><span class="op" id="3049679">[</span><span class="num" id="3049680">0</span><span class="op" id="3049681">:</span><span class="ident" id="3049682">i</span><span class="op" id="3049683">]</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3049686">sortBy</span><span class="op" id="3049692">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049696">func</span><span class="op" id="3049700">(</span><span class="ident" id="3049701">i</span><span class="op" id="3049702">,</span>&nbsp;<span class="ident" id="3049704">j</span>&nbsp;<span class="builtintype" id="3049706">int</span><span class="op" id="3049709">)</span>&nbsp;<span class="builtintype" id="3049711">bool</span>&nbsp;<span class="op" id="3049716">{</span>&nbsp;<span class="keyword" id="3049718">return</span>&nbsp;<span class="ident" id="3049725">list</span><span class="op" id="3049729">[</span><span class="ident" id="3049730">i</span><span class="op" id="3049731">]</span><span class="op" id="3049732">.</span><span class="ident" id="3049733">Name</span>&nbsp;<span class="op" id="3049738">&lt;</span>&nbsp;<span class="ident" id="3049740">list</span><span class="op" id="3049744">[</span><span class="ident" id="3049745">j</span><span class="op" id="3049746">]</span><span class="op" id="3049747">.</span><span class="ident" id="3049748">Name</span>&nbsp;<span class="op" id="3049753">}</span><span class="op" id="3049754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049758">func</span><span class="op" id="3049762">(</span><span class="ident" id="3049763">i</span><span class="op" id="3049764">,</span>&nbsp;<span class="ident" id="3049766">j</span>&nbsp;<span class="builtintype" id="3049768">int</span><span class="op" id="3049771">)</span>&nbsp;<span class="op" id="3049773">{</span>&nbsp;<span class="ident" id="3049775">list</span><span class="op" id="3049779">[</span><span class="ident" id="3049780">i</span><span class="op" id="3049781">]</span><span class="op" id="3049782">,</span>&nbsp;<span class="ident" id="3049784">list</span><span class="op" id="3049788">[</span><span class="ident" id="3049789">j</span><span class="op" id="3049790">]</span>&nbsp;<span class="op" id="3049792">=</span>&nbsp;<span class="ident" id="3049794">list</span><span class="op" id="3049798">[</span><span class="ident" id="3049799">j</span><span class="op" id="3049800">]</span><span class="op" id="3049801">,</span>&nbsp;<span class="ident" id="3049803">list</span><span class="op" id="3049807">[</span><span class="ident" id="3049808">i</span><span class="op" id="3049809">]</span>&nbsp;<span class="op" id="3049811">}</span><span class="op" id="3049812">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3049816">len</span><span class="op" id="3049819">(</span><span class="ident" id="3049820">list</span><span class="op" id="3049824">)</span><span class="op" id="3049825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3049828">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3049831">return</span>&nbsp;<span class="ident" id="3049838">list</span><br>
<span class="lineno"></span><span class="op" id="3049843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3049846">//&nbsp;noteBodies&nbsp;returns&nbsp;a&nbsp;list&nbsp;of&nbsp;note&nbsp;body&nbsp;strings&nbsp;given&nbsp;a&nbsp;list&nbsp;of&nbsp;notes.</span><br>
<span class="lineno"></span><span class="comment" id="3049919">//&nbsp;This&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;populate&nbsp;the&nbsp;deprecated&nbsp;Package.Bugs&nbsp;field.</span><br>
<span class="lineno">795</span><span class="comment" id="3049987">//</span><br>
<span class="lineno"></span><span class="keyword" id="3049990">func</span>&nbsp;<span class="ident" id="3049995">noteBodies</span><span class="op" id="3050005">(</span><span class="ident" id="3050006">notes</span>&nbsp;<span class="op" id="3050012">[</span><span class="op" id="3050013">]</span><span class="op" id="3050014">*</span><span class="ident" id="3050015">Note</span><span class="op" id="3050019">)</span>&nbsp;<span class="op" id="3050021">[</span><span class="op" id="3050022">]</span><span class="builtintype" id="3050023">string</span>&nbsp;<span class="op" id="3050030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3050033">var</span>&nbsp;<span class="ident" id="3050037">list</span>&nbsp;<span class="op" id="3050042">[</span><span class="op" id="3050043">]</span><span class="builtintype" id="3050044">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3050052">for</span>&nbsp;<span class="ident" id="3050056">_</span><span class="op" id="3050057">,</span>&nbsp;<span class="ident" id="3050059">n</span>&nbsp;<span class="op" id="3050061">:=</span>&nbsp;<span class="keyword" id="3050064">range</span>&nbsp;<span class="ident" id="3050070">notes</span>&nbsp;<span class="op" id="3050076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3050080">list</span>&nbsp;<span class="op" id="3050085">=</span>&nbsp;<span class="builtinfunc" id="3050087">append</span><span class="op" id="3050093">(</span><span class="ident" id="3050094">list</span><span class="op" id="3050098">,</span>&nbsp;<span class="ident" id="3050100">n</span><span class="op" id="3050101">.</span><span class="ident" id="3050102">Body</span><span class="op" id="3050106">)</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3050109">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3050112">return</span>&nbsp;<span class="ident" id="3050119">list</span><br>
<span class="lineno"></span><span class="op" id="3050124">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3050127">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno">805</span><span class="comment" id="3050207">//&nbsp;Predeclared&nbsp;identifiers</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3050235">var</span>&nbsp;<span class="ident" id="3050239">predeclaredTypes</span>&nbsp;<span class="op" id="3050256">=</span>&nbsp;<span class="keyword" id="3050258">map</span><span class="op" id="3050261">[</span><span class="builtintype" id="3050262">string</span><span class="op" id="3050268">]</span><span class="builtintype" id="3050269">bool</span><span class="op" id="3050273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050276">&#34;bool&#34;</span><span class="op" id="3050282">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050290">true</span><span class="op" id="3050294">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050297">&#34;byte&#34;</span><span class="op" id="3050303">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050311">true</span><span class="op" id="3050315">,</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050318">&#34;complex64&#34;</span><span class="op" id="3050329">:</span>&nbsp;&nbsp;<span class="builtintype" id="3050332">true</span><span class="op" id="3050336">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050339">&#34;complex128&#34;</span><span class="op" id="3050351">:</span>&nbsp;<span class="builtintype" id="3050353">true</span><span class="op" id="3050357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050360">&#34;error&#34;</span><span class="op" id="3050367">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050374">true</span><span class="op" id="3050378">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050381">&#34;float32&#34;</span><span class="op" id="3050390">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050395">true</span><span class="op" id="3050399">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050402">&#34;float64&#34;</span><span class="op" id="3050411">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050416">true</span><span class="op" id="3050420">,</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050423">&#34;int&#34;</span><span class="op" id="3050428">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050437">true</span><span class="op" id="3050441">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050444">&#34;int8&#34;</span><span class="op" id="3050450">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050458">true</span><span class="op" id="3050462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050465">&#34;int16&#34;</span><span class="op" id="3050472">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050479">true</span><span class="op" id="3050483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050486">&#34;int32&#34;</span><span class="op" id="3050493">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050500">true</span><span class="op" id="3050504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050507">&#34;int64&#34;</span><span class="op" id="3050514">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050521">true</span><span class="op" id="3050525">,</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050528">&#34;rune&#34;</span><span class="op" id="3050534">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050542">true</span><span class="op" id="3050546">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050549">&#34;string&#34;</span><span class="op" id="3050557">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050563">true</span><span class="op" id="3050567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050570">&#34;uint&#34;</span><span class="op" id="3050576">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050584">true</span><span class="op" id="3050588">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050591">&#34;uint8&#34;</span><span class="op" id="3050598">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050605">true</span><span class="op" id="3050609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050612">&#34;uint16&#34;</span><span class="op" id="3050620">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050626">true</span><span class="op" id="3050630">,</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050633">&#34;uint32&#34;</span><span class="op" id="3050641">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050647">true</span><span class="op" id="3050651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050654">&#34;uint64&#34;</span><span class="op" id="3050662">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050668">true</span><span class="op" id="3050672">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050675">&#34;uintptr&#34;</span><span class="op" id="3050684">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050689">true</span><span class="op" id="3050693">,</span><br>
<span class="lineno"></span><span class="op" id="3050695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">830</span><span class="keyword" id="3050698">var</span>&nbsp;<span class="ident" id="3050702">predeclaredFuncs</span>&nbsp;<span class="op" id="3050719">=</span>&nbsp;<span class="keyword" id="3050721">map</span><span class="op" id="3050724">[</span><span class="builtintype" id="3050725">string</span><span class="op" id="3050731">]</span><span class="builtintype" id="3050732">bool</span><span class="op" id="3050736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050739">&#34;append&#34;</span><span class="op" id="3050747">:</span>&nbsp;&nbsp;<span class="builtintype" id="3050750">true</span><span class="op" id="3050754">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050757">&#34;cap&#34;</span><span class="op" id="3050762">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050768">true</span><span class="op" id="3050772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050775">&#34;close&#34;</span><span class="op" id="3050782">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050786">true</span><span class="op" id="3050790">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050793">&#34;complex&#34;</span><span class="op" id="3050802">:</span>&nbsp;<span class="builtintype" id="3050804">true</span><span class="op" id="3050808">,</span><br>
<span class="lineno">835</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050811">&#34;copy&#34;</span><span class="op" id="3050817">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050822">true</span><span class="op" id="3050826">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050829">&#34;delete&#34;</span><span class="op" id="3050837">:</span>&nbsp;&nbsp;<span class="builtintype" id="3050840">true</span><span class="op" id="3050844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050847">&#34;imag&#34;</span><span class="op" id="3050853">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050858">true</span><span class="op" id="3050862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050865">&#34;len&#34;</span><span class="op" id="3050870">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050876">true</span><span class="op" id="3050880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050883">&#34;make&#34;</span><span class="op" id="3050889">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050894">true</span><span class="op" id="3050898">,</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050901">&#34;new&#34;</span><span class="op" id="3050906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050912">true</span><span class="op" id="3050916">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050919">&#34;panic&#34;</span><span class="op" id="3050926">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050930">true</span><span class="op" id="3050934">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050937">&#34;print&#34;</span><span class="op" id="3050944">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050948">true</span><span class="op" id="3050952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050955">&#34;println&#34;</span><span class="op" id="3050964">:</span>&nbsp;<span class="builtintype" id="3050966">true</span><span class="op" id="3050970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050973">&#34;real&#34;</span><span class="op" id="3050979">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3050984">true</span><span class="op" id="3050988">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3050991">&#34;recover&#34;</span><span class="op" id="3051000">:</span>&nbsp;<span class="builtintype" id="3051002">true</span><span class="op" id="3051006">,</span><br>
<span class="lineno"></span><span class="op" id="3051008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3051011">var</span>&nbsp;<span class="ident" id="3051015">predeclaredConstants</span>&nbsp;<span class="op" id="3051036">=</span>&nbsp;<span class="keyword" id="3051038">map</span><span class="op" id="3051041">[</span><span class="builtintype" id="3051042">string</span><span class="op" id="3051048">]</span><span class="builtintype" id="3051049">bool</span><span class="op" id="3051053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3051056">&#34;false&#34;</span><span class="op" id="3051063">:</span>&nbsp;<span class="builtintype" id="3051065">true</span><span class="op" id="3051069">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3051072">&#34;iota&#34;</span><span class="op" id="3051078">:</span>&nbsp;&nbsp;<span class="builtintype" id="3051081">true</span><span class="op" id="3051085">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3051088">&#34;nil&#34;</span><span class="op" id="3051093">:</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3051097">true</span><span class="op" id="3051101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3051104">&#34;true&#34;</span><span class="op" id="3051110">:</span>&nbsp;&nbsp;<span class="builtintype" id="3051113">true</span><span class="op" id="3051117">,</span><br>
<span class="lineno"></span><span class="op" id="3051119">}</span>
</div>
</body>
</html>
