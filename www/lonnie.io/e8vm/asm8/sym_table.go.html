<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5836399">package</span>&nbsp;<span class="ident" id="5836407">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5836413">//&nbsp;SymTable&nbsp;save&nbsp;the&nbsp;symbol</span><br>
<span class="lineno"></span><span class="keyword" id="5836441">type</span>&nbsp;<span class="ident" id="5836446">symTabel</span>&nbsp;<span class="keyword" id="5836455">struct</span>&nbsp;<span class="op" id="5836462">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836465">m</span>&nbsp;<span class="keyword" id="5836467">map</span><span class="op" id="5836470">[</span><span class="builtintype" id="5836471">string</span><span class="op" id="5836477">]</span><span class="op" id="5836478">*</span><span class="ident" id="5836479">symbol</span><br>
<span class="lineno"></span><span class="op" id="5836486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5836489">//&nbsp;NewSymTable&nbsp;creates&nbsp;an&nbsp;empty&nbsp;symbol&nbsp;table</span><br>
<span class="lineno"></span><span class="keyword" id="5836534">func</span>&nbsp;<span class="ident" id="5836539">newSymTable</span><span class="op" id="5836550">(</span><span class="op" id="5836551">)</span>&nbsp;<span class="op" id="5836553">*</span><span class="ident" id="5836554">symTabel</span>&nbsp;<span class="op" id="5836563">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836566">ret</span>&nbsp;<span class="op" id="5836570">:=</span>&nbsp;<span class="builtinfunc" id="5836573">new</span><span class="op" id="5836576">(</span><span class="ident" id="5836577">symTabel</span><span class="op" id="5836585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836588">ret</span><span class="op" id="5836591">.</span><span class="ident" id="5836592">m</span>&nbsp;<span class="op" id="5836594">=</span>&nbsp;<span class="builtinfunc" id="5836596">make</span><span class="op" id="5836600">(</span><span class="keyword" id="5836601">map</span><span class="op" id="5836604">[</span><span class="builtintype" id="5836605">string</span><span class="op" id="5836611">]</span><span class="op" id="5836612">*</span><span class="ident" id="5836613">symbol</span><span class="op" id="5836619">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836623">return</span>&nbsp;<span class="ident" id="5836630">ret</span><br>
<span class="lineno"></span><span class="op" id="5836634">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5836637">//&nbsp;Query&nbsp;searches&nbsp;for&nbsp;a&nbsp;symbol&nbsp;with&nbsp;a&nbsp;particular&nbsp;name.</span><br>
<span class="lineno"></span><span class="keyword" id="5836692">func</span>&nbsp;<span class="op" id="5836697">(</span><span class="ident" id="5836698">tab</span>&nbsp;<span class="op" id="5836702">*</span><span class="ident" id="5836703">symTabel</span><span class="op" id="5836711">)</span>&nbsp;<span class="ident" id="5836713">Query</span><span class="op" id="5836718">(</span><span class="ident" id="5836719">n</span>&nbsp;<span class="builtintype" id="5836721">string</span><span class="op" id="5836727">)</span>&nbsp;<span class="op" id="5836729">*</span><span class="ident" id="5836730">symbol</span>&nbsp;<span class="op" id="5836737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836740">s</span>&nbsp;<span class="op" id="5836742">:=</span>&nbsp;<span class="ident" id="5836745">tab</span><span class="op" id="5836748">.</span><span class="ident" id="5836749">m</span><span class="op" id="5836750">[</span><span class="ident" id="5836751">n</span><span class="op" id="5836752">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836755">if</span>&nbsp;<span class="ident" id="5836758">s</span>&nbsp;<span class="op" id="5836760">==</span>&nbsp;<span class="ident" id="5836763">nil</span>&nbsp;<span class="op" id="5836767">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836771">return</span>&nbsp;<span class="ident" id="5836778">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836783">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836787">return</span>&nbsp;<span class="ident" id="5836794">s</span><span class="op" id="5836795">.</span><span class="ident" id="5836796">clone</span><span class="op" id="5836801">(</span><span class="op" id="5836802">)</span><br>
<span class="lineno"></span><span class="op" id="5836804">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5836807">//&nbsp;Declare&nbsp;adds&nbsp;a&nbsp;symbol&nbsp;into&nbsp;the&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="5836848">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;on&nbsp;successful,&nbsp;and&nbsp;returns&nbsp;the&nbsp;conflict&nbsp;symbol</span><br>
<span class="lineno"></span><span class="comment" id="5836913">//&nbsp;when&nbsp;it&nbsp;is&nbsp;already&nbsp;declared.</span><br>
<span class="lineno"></span><span class="keyword" id="5836945">func</span>&nbsp;<span class="op" id="5836950">(</span><span class="ident" id="5836951">tab</span>&nbsp;<span class="op" id="5836955">*</span><span class="ident" id="5836956">symTabel</span><span class="op" id="5836964">)</span>&nbsp;<span class="ident" id="5836966">Declare</span><span class="op" id="5836973">(</span><span class="ident" id="5836974">s</span>&nbsp;<span class="op" id="5836976">*</span><span class="ident" id="5836977">symbol</span><span class="op" id="5836983">)</span>&nbsp;<span class="op" id="5836985">*</span><span class="ident" id="5836986">symbol</span>&nbsp;<span class="op" id="5836993">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836996">n</span>&nbsp;<span class="op" id="5836998">:=</span>&nbsp;<span class="ident" id="5837001">s</span><span class="op" id="5837002">.</span><span class="ident" id="5837003">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837009">p</span>&nbsp;<span class="op" id="5837011">:=</span>&nbsp;<span class="ident" id="5837014">tab</span><span class="op" id="5837017">.</span><span class="ident" id="5837018">m</span><span class="op" id="5837019">[</span><span class="ident" id="5837020">n</span><span class="op" id="5837021">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837024">if</span>&nbsp;<span class="ident" id="5837027">p</span>&nbsp;<span class="op" id="5837029">!=</span>&nbsp;<span class="ident" id="5837032">nil</span>&nbsp;<span class="op" id="5837036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837040">return</span>&nbsp;<span class="ident" id="5837047">p</span><span class="op" id="5837048">.</span><span class="ident" id="5837049">clone</span><span class="op" id="5837054">(</span><span class="op" id="5837055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837058">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5837062">tab</span><span class="op" id="5837065">.</span><span class="ident" id="5837066">m</span><span class="op" id="5837067">[</span><span class="ident" id="5837068">n</span><span class="op" id="5837069">]</span>&nbsp;<span class="op" id="5837071">=</span>&nbsp;<span class="ident" id="5837073">s</span><span class="op" id="5837074">.</span><span class="ident" id="5837075">clone</span><span class="op" id="5837080">(</span><span class="op" id="5837081">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837084">return</span>&nbsp;<span class="ident" id="5837091">nil</span><br>
<span class="lineno"></span><span class="op" id="5837095">}</span>
</div>
</body>
</html>
