<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html" class="current">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8171136">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8171191">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8171245">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8171296">package</span>&nbsp;<span class="ident" id="8171304">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8171309">import</span>&nbsp;<span class="op" id="8171316">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171319">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171328">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8171339">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8171349">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8171352">type</span>&nbsp;<span class="ident" id="8171357">typeT</span>&nbsp;<span class="keyword" id="8171363">struct</span>&nbsp;<span class="op" id="8171370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171373">id</span>&nbsp;&nbsp;<span class="ident" id="8171377">typeId</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171385">str</span>&nbsp;<span class="builtintype" id="8171389">string</span><br>
<span class="lineno"></span><span class="op" id="8171396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8171399">var</span>&nbsp;<span class="ident" id="8171403">basicTypes</span>&nbsp;<span class="op" id="8171414">=</span>&nbsp;<span class="op" id="8171416">[</span><span class="op" id="8171417">]</span><span class="ident" id="8171418">typeT</span><span class="op" id="8171423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171426">{</span><span class="ident" id="8171427">tBool</span><span class="op" id="8171432">,</span>&nbsp;<span class="string" id="8171434">&#34;bool&#34;</span><span class="op" id="8171440">}</span><span class="op" id="8171441">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171444">{</span><span class="ident" id="8171445">tInt</span><span class="op" id="8171449">,</span>&nbsp;<span class="string" id="8171451">&#34;int&#34;</span><span class="op" id="8171456">}</span><span class="op" id="8171457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171460">{</span><span class="ident" id="8171461">tUint</span><span class="op" id="8171466">,</span>&nbsp;<span class="string" id="8171468">&#34;uint&#34;</span><span class="op" id="8171474">}</span><span class="op" id="8171475">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171478">{</span><span class="ident" id="8171479">tFloat</span><span class="op" id="8171485">,</span>&nbsp;<span class="string" id="8171487">&#34;float&#34;</span><span class="op" id="8171494">}</span><span class="op" id="8171495">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171498">{</span><span class="ident" id="8171499">tBytes</span><span class="op" id="8171505">,</span>&nbsp;<span class="string" id="8171507">&#34;bytes&#34;</span><span class="op" id="8171514">}</span><span class="op" id="8171515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171518">{</span><span class="ident" id="8171519">tString</span><span class="op" id="8171526">,</span>&nbsp;<span class="string" id="8171528">&#34;string&#34;</span><span class="op" id="8171536">}</span><span class="op" id="8171537">,</span><br>
<span class="lineno">25</span><span class="op" id="8171539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8171542">func</span>&nbsp;<span class="ident" id="8171547">getTypeUnlocked</span><span class="op" id="8171562">(</span><span class="ident" id="8171563">name</span>&nbsp;<span class="builtintype" id="8171568">string</span><span class="op" id="8171574">,</span>&nbsp;<span class="ident" id="8171576">rt</span>&nbsp;<span class="ident" id="8171579">reflect</span><span class="op" id="8171586">.</span><span class="ident" id="8171587">Type</span><span class="op" id="8171591">)</span>&nbsp;<span class="ident" id="8171593">gobType</span>&nbsp;<span class="op" id="8171601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171604">typeLock</span><span class="op" id="8171612">.</span><span class="ident" id="8171613">Lock</span><span class="op" id="8171617">(</span><span class="op" id="8171618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171621">defer</span>&nbsp;<span class="ident" id="8171627">typeLock</span><span class="op" id="8171635">.</span><span class="ident" id="8171636">Unlock</span><span class="op" id="8171642">(</span><span class="op" id="8171643">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171646">t</span><span class="op" id="8171647">,</span>&nbsp;<span class="ident" id="8171649">err</span>&nbsp;<span class="op" id="8171653">:=</span>&nbsp;<span class="ident" id="8171656">getBaseType</span><span class="op" id="8171667">(</span><span class="ident" id="8171668">name</span><span class="op" id="8171672">,</span>&nbsp;<span class="ident" id="8171674">rt</span><span class="op" id="8171676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171679">if</span>&nbsp;<span class="ident" id="8171682">err</span>&nbsp;<span class="op" id="8171686">!=</span>&nbsp;<span class="ident" id="8171689">nil</span>&nbsp;<span class="op" id="8171693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8171697">panic</span><span class="op" id="8171702">(</span><span class="string" id="8171703">&#34;getTypeUnlocked:&nbsp;&#34;</span>&nbsp;<span class="op" id="8171723">+</span>&nbsp;<span class="ident" id="8171725">err</span><span class="op" id="8171728">.</span><span class="ident" id="8171729">Error</span><span class="op" id="8171734">(</span><span class="op" id="8171735">)</span><span class="op" id="8171736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171742">return</span>&nbsp;<span class="ident" id="8171749">t</span><br>
<span class="lineno">35</span><span class="op" id="8171751">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8171754">//&nbsp;Sanity&nbsp;checks</span><br>
<span class="lineno"></span><span class="keyword" id="8171771">func</span>&nbsp;<span class="ident" id="8171776">TestBasic</span><span class="op" id="8171785">(</span><span class="ident" id="8171786">t</span>&nbsp;<span class="op" id="8171788">*</span><span class="ident" id="8171789">testing</span><span class="op" id="8171796">.</span><span class="ident" id="8171797">T</span><span class="op" id="8171798">)</span>&nbsp;<span class="op" id="8171800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171803">for</span>&nbsp;<span class="ident" id="8171807">_</span><span class="op" id="8171808">,</span>&nbsp;<span class="ident" id="8171810">tt</span>&nbsp;<span class="op" id="8171813">:=</span>&nbsp;<span class="keyword" id="8171816">range</span>&nbsp;<span class="ident" id="8171822">basicTypes</span>&nbsp;<span class="op" id="8171833">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171837">if</span>&nbsp;<span class="ident" id="8171840">tt</span><span class="op" id="8171842">.</span><span class="ident" id="8171843">id</span><span class="op" id="8171845">.</span><span class="builtintype" id="8171846">string</span><span class="op" id="8171852">(</span><span class="op" id="8171853">)</span>&nbsp;<span class="op" id="8171855">!=</span>&nbsp;<span class="ident" id="8171858">tt</span><span class="op" id="8171860">.</span><span class="ident" id="8171861">str</span>&nbsp;<span class="op" id="8171865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171870">t</span><span class="op" id="8171871">.</span><span class="ident" id="8171872">Errorf</span><span class="op" id="8171878">(</span><span class="string" id="8171879">&#34;checkType:&nbsp;expected&nbsp;%q&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8171910">,</span>&nbsp;<span class="ident" id="8171912">tt</span><span class="op" id="8171914">.</span><span class="ident" id="8171915">str</span><span class="op" id="8171918">,</span>&nbsp;<span class="ident" id="8171920">tt</span><span class="op" id="8171922">.</span><span class="ident" id="8171923">id</span><span class="op" id="8171925">.</span><span class="builtintype" id="8171926">string</span><span class="op" id="8171932">(</span><span class="op" id="8171933">)</span><span class="op" id="8171934">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8171938">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8171942">if</span>&nbsp;<span class="ident" id="8171945">tt</span><span class="op" id="8171947">.</span><span class="ident" id="8171948">id</span>&nbsp;<span class="op" id="8171951">==</span>&nbsp;<span class="num" id="8171954">0</span>&nbsp;<span class="op" id="8171956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8171961">t</span><span class="op" id="8171962">.</span><span class="ident" id="8171963">Errorf</span><span class="op" id="8171969">(</span><span class="string" id="8171970">&#34;id&nbsp;for&nbsp;%q&nbsp;is&nbsp;zero&#34;</span><span class="op" id="8171989">,</span>&nbsp;<span class="ident" id="8171991">tt</span><span class="op" id="8171993">.</span><span class="ident" id="8171994">str</span><span class="op" id="8171997">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172004">}</span><br>
<span class="lineno"></span><span class="op" id="8172006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8172009">//&nbsp;Reregister&nbsp;some&nbsp;basic&nbsp;types&nbsp;to&nbsp;check&nbsp;registration&nbsp;is&nbsp;idempotent.</span><br>
<span class="lineno">50</span><span class="keyword" id="8172077">func</span>&nbsp;<span class="ident" id="8172082">TestReregistration</span><span class="op" id="8172100">(</span><span class="ident" id="8172101">t</span>&nbsp;<span class="op" id="8172103">*</span><span class="ident" id="8172104">testing</span><span class="op" id="8172111">.</span><span class="ident" id="8172112">T</span><span class="op" id="8172113">)</span>&nbsp;<span class="op" id="8172115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172118">newtyp</span>&nbsp;<span class="op" id="8172125">:=</span>&nbsp;<span class="ident" id="8172128">getTypeUnlocked</span><span class="op" id="8172143">(</span><span class="string" id="8172144">&#34;int&#34;</span><span class="op" id="8172149">,</span>&nbsp;<span class="ident" id="8172151">reflect</span><span class="op" id="8172158">.</span><span class="ident" id="8172159">TypeOf</span><span class="op" id="8172165">(</span><span class="builtintype" id="8172166">int</span><span class="op" id="8172169">(</span><span class="num" id="8172170">0</span><span class="op" id="8172171">)</span><span class="op" id="8172172">)</span><span class="op" id="8172173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172176">if</span>&nbsp;<span class="ident" id="8172179">newtyp</span>&nbsp;<span class="op" id="8172186">!=</span>&nbsp;<span class="ident" id="8172189">tInt</span><span class="op" id="8172193">.</span><span class="ident" id="8172194">gobType</span><span class="op" id="8172201">(</span><span class="op" id="8172202">)</span>&nbsp;<span class="op" id="8172204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172208">t</span><span class="op" id="8172209">.</span><span class="ident" id="8172210">Errorf</span><span class="op" id="8172216">(</span><span class="string" id="8172217">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8172252">,</span>&nbsp;<span class="ident" id="8172254">newtyp</span><span class="op" id="8172260">.</span><span class="builtintype" id="8172261">string</span><span class="op" id="8172267">(</span><span class="op" id="8172268">)</span><span class="op" id="8172269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172272">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172275">newtyp</span>&nbsp;<span class="op" id="8172282">=</span>&nbsp;<span class="ident" id="8172284">getTypeUnlocked</span><span class="op" id="8172299">(</span><span class="string" id="8172300">&#34;uint&#34;</span><span class="op" id="8172306">,</span>&nbsp;<span class="ident" id="8172308">reflect</span><span class="op" id="8172315">.</span><span class="ident" id="8172316">TypeOf</span><span class="op" id="8172322">(</span><span class="builtintype" id="8172323">uint</span><span class="op" id="8172327">(</span><span class="num" id="8172328">0</span><span class="op" id="8172329">)</span><span class="op" id="8172330">)</span><span class="op" id="8172331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172334">if</span>&nbsp;<span class="ident" id="8172337">newtyp</span>&nbsp;<span class="op" id="8172344">!=</span>&nbsp;<span class="ident" id="8172347">tUint</span><span class="op" id="8172352">.</span><span class="ident" id="8172353">gobType</span><span class="op" id="8172360">(</span><span class="op" id="8172361">)</span>&nbsp;<span class="op" id="8172363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172367">t</span><span class="op" id="8172368">.</span><span class="ident" id="8172369">Errorf</span><span class="op" id="8172375">(</span><span class="string" id="8172376">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8172411">,</span>&nbsp;<span class="ident" id="8172413">newtyp</span><span class="op" id="8172419">.</span><span class="builtintype" id="8172420">string</span><span class="op" id="8172426">(</span><span class="op" id="8172427">)</span><span class="op" id="8172428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172431">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172434">newtyp</span>&nbsp;<span class="op" id="8172441">=</span>&nbsp;<span class="ident" id="8172443">getTypeUnlocked</span><span class="op" id="8172458">(</span><span class="string" id="8172459">&#34;string&#34;</span><span class="op" id="8172467">,</span>&nbsp;<span class="ident" id="8172469">reflect</span><span class="op" id="8172476">.</span><span class="ident" id="8172477">TypeOf</span><span class="op" id="8172483">(</span><span class="string" id="8172484">&#34;hello&#34;</span><span class="op" id="8172491">)</span><span class="op" id="8172492">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172495">if</span>&nbsp;<span class="ident" id="8172498">newtyp</span>&nbsp;<span class="op" id="8172505">!=</span>&nbsp;<span class="ident" id="8172508">tString</span><span class="op" id="8172515">.</span><span class="ident" id="8172516">gobType</span><span class="op" id="8172523">(</span><span class="op" id="8172524">)</span>&nbsp;<span class="op" id="8172526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172530">t</span><span class="op" id="8172531">.</span><span class="ident" id="8172532">Errorf</span><span class="op" id="8172538">(</span><span class="string" id="8172539">&#34;reregistration&nbsp;of&nbsp;%s&nbsp;got&nbsp;new&nbsp;type&#34;</span><span class="op" id="8172574">,</span>&nbsp;<span class="ident" id="8172576">newtyp</span><span class="op" id="8172582">.</span><span class="builtintype" id="8172583">string</span><span class="op" id="8172589">(</span><span class="op" id="8172590">)</span><span class="op" id="8172591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172594">}</span><br>
<span class="lineno"></span><span class="op" id="8172596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="8172599">func</span>&nbsp;<span class="ident" id="8172604">TestArrayType</span><span class="op" id="8172617">(</span><span class="ident" id="8172618">t</span>&nbsp;<span class="op" id="8172620">*</span><span class="ident" id="8172621">testing</span><span class="op" id="8172628">.</span><span class="ident" id="8172629">T</span><span class="op" id="8172630">)</span>&nbsp;<span class="op" id="8172632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172635">var</span>&nbsp;<span class="ident" id="8172639">a3</span>&nbsp;<span class="op" id="8172642">[</span><span class="num" id="8172643">3</span><span class="op" id="8172644">]</span><span class="builtintype" id="8172645">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172650">a3int</span>&nbsp;<span class="op" id="8172656">:=</span>&nbsp;<span class="ident" id="8172659">getTypeUnlocked</span><span class="op" id="8172674">(</span><span class="string" id="8172675">&#34;foo&#34;</span><span class="op" id="8172680">,</span>&nbsp;<span class="ident" id="8172682">reflect</span><span class="op" id="8172689">.</span><span class="ident" id="8172690">TypeOf</span><span class="op" id="8172696">(</span><span class="ident" id="8172697">a3</span><span class="op" id="8172699">)</span><span class="op" id="8172700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172703">newa3int</span>&nbsp;<span class="op" id="8172712">:=</span>&nbsp;<span class="ident" id="8172715">getTypeUnlocked</span><span class="op" id="8172730">(</span><span class="string" id="8172731">&#34;bar&#34;</span><span class="op" id="8172736">,</span>&nbsp;<span class="ident" id="8172738">reflect</span><span class="op" id="8172745">.</span><span class="ident" id="8172746">TypeOf</span><span class="op" id="8172752">(</span><span class="ident" id="8172753">a3</span><span class="op" id="8172755">)</span><span class="op" id="8172756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172759">if</span>&nbsp;<span class="ident" id="8172762">a3int</span>&nbsp;<span class="op" id="8172768">!=</span>&nbsp;<span class="ident" id="8172771">newa3int</span>&nbsp;<span class="op" id="8172780">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172784">t</span><span class="op" id="8172785">.</span><span class="ident" id="8172786">Errorf</span><span class="op" id="8172792">(</span><span class="string" id="8172793">&#34;second&nbsp;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8172841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8172844">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172847">var</span>&nbsp;<span class="ident" id="8172851">a4</span>&nbsp;<span class="op" id="8172854">[</span><span class="num" id="8172855">4</span><span class="op" id="8172856">]</span><span class="builtintype" id="8172857">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172862">a4int</span>&nbsp;<span class="op" id="8172868">:=</span>&nbsp;<span class="ident" id="8172871">getTypeUnlocked</span><span class="op" id="8172886">(</span><span class="string" id="8172887">&#34;goo&#34;</span><span class="op" id="8172892">,</span>&nbsp;<span class="ident" id="8172894">reflect</span><span class="op" id="8172901">.</span><span class="ident" id="8172902">TypeOf</span><span class="op" id="8172908">(</span><span class="ident" id="8172909">a4</span><span class="op" id="8172911">)</span><span class="op" id="8172912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8172915">if</span>&nbsp;<span class="ident" id="8172918">a3int</span>&nbsp;<span class="op" id="8172924">==</span>&nbsp;<span class="ident" id="8172927">a4int</span>&nbsp;<span class="op" id="8172933">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8172937">t</span><span class="op" id="8172938">.</span><span class="ident" id="8172939">Errorf</span><span class="op" id="8172945">(</span><span class="string" id="8172946">&#34;registration&nbsp;of&nbsp;[3]int&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[4]int&#34;</span><span class="op" id="8172998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173004">var</span>&nbsp;<span class="ident" id="8173008">b3</span>&nbsp;<span class="op" id="8173011">[</span><span class="num" id="8173012">3</span><span class="op" id="8173013">]</span><span class="builtintype" id="8173014">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173020">a3bool</span>&nbsp;<span class="op" id="8173027">:=</span>&nbsp;<span class="ident" id="8173030">getTypeUnlocked</span><span class="op" id="8173045">(</span><span class="string" id="8173046">&#34;&#34;</span><span class="op" id="8173048">,</span>&nbsp;<span class="ident" id="8173050">reflect</span><span class="op" id="8173057">.</span><span class="ident" id="8173058">TypeOf</span><span class="op" id="8173064">(</span><span class="ident" id="8173065">b3</span><span class="op" id="8173067">)</span><span class="op" id="8173068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173071">if</span>&nbsp;<span class="ident" id="8173074">a3int</span>&nbsp;<span class="op" id="8173080">==</span>&nbsp;<span class="ident" id="8173083">a3bool</span>&nbsp;<span class="op" id="8173090">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173094">t</span><span class="op" id="8173095">.</span><span class="ident" id="8173096">Errorf</span><span class="op" id="8173102">(</span><span class="string" id="8173103">&#34;registration&nbsp;of&nbsp;[3]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[3]int&#34;</span><span class="op" id="8173156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173159">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173162">str</span>&nbsp;<span class="op" id="8173166">:=</span>&nbsp;<span class="ident" id="8173169">a3bool</span><span class="op" id="8173175">.</span><span class="builtintype" id="8173176">string</span><span class="op" id="8173182">(</span><span class="op" id="8173183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173186">expected</span>&nbsp;<span class="op" id="8173195">:=</span>&nbsp;<span class="string" id="8173198">&#34;[3]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173209">if</span>&nbsp;<span class="ident" id="8173212">str</span>&nbsp;<span class="op" id="8173216">!=</span>&nbsp;<span class="ident" id="8173219">expected</span>&nbsp;<span class="op" id="8173228">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173232">t</span><span class="op" id="8173233">.</span><span class="ident" id="8173234">Errorf</span><span class="op" id="8173240">(</span><span class="string" id="8173241">&#34;array&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8173275">,</span>&nbsp;<span class="ident" id="8173277">str</span><span class="op" id="8173280">,</span>&nbsp;<span class="ident" id="8173282">expected</span><span class="op" id="8173290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173293">}</span><br>
<span class="lineno"></span><span class="op" id="8173295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173298">func</span>&nbsp;<span class="ident" id="8173303">TestSliceType</span><span class="op" id="8173316">(</span><span class="ident" id="8173317">t</span>&nbsp;<span class="op" id="8173319">*</span><span class="ident" id="8173320">testing</span><span class="op" id="8173327">.</span><span class="ident" id="8173328">T</span><span class="op" id="8173329">)</span>&nbsp;<span class="op" id="8173331">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173334">var</span>&nbsp;<span class="ident" id="8173338">s</span>&nbsp;<span class="op" id="8173340">[</span><span class="op" id="8173341">]</span><span class="builtintype" id="8173342">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173347">sint</span>&nbsp;<span class="op" id="8173352">:=</span>&nbsp;<span class="ident" id="8173355">getTypeUnlocked</span><span class="op" id="8173370">(</span><span class="string" id="8173371">&#34;slice&#34;</span><span class="op" id="8173378">,</span>&nbsp;<span class="ident" id="8173380">reflect</span><span class="op" id="8173387">.</span><span class="ident" id="8173388">TypeOf</span><span class="op" id="8173394">(</span><span class="ident" id="8173395">s</span><span class="op" id="8173396">)</span><span class="op" id="8173397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173400">var</span>&nbsp;<span class="ident" id="8173404">news</span>&nbsp;<span class="op" id="8173409">[</span><span class="op" id="8173410">]</span><span class="builtintype" id="8173411">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173416">newsint</span>&nbsp;<span class="op" id="8173424">:=</span>&nbsp;<span class="ident" id="8173427">getTypeUnlocked</span><span class="op" id="8173442">(</span><span class="string" id="8173443">&#34;slice1&#34;</span><span class="op" id="8173451">,</span>&nbsp;<span class="ident" id="8173453">reflect</span><span class="op" id="8173460">.</span><span class="ident" id="8173461">TypeOf</span><span class="op" id="8173467">(</span><span class="ident" id="8173468">news</span><span class="op" id="8173472">)</span><span class="op" id="8173473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173476">if</span>&nbsp;<span class="ident" id="8173479">sint</span>&nbsp;<span class="op" id="8173484">!=</span>&nbsp;<span class="ident" id="8173487">newsint</span>&nbsp;<span class="op" id="8173495">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173499">t</span><span class="op" id="8173500">.</span><span class="ident" id="8173501">Errorf</span><span class="op" id="8173507">(</span><span class="string" id="8173508">&#34;second&nbsp;registration&nbsp;of&nbsp;[]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8173555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173558">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173561">var</span>&nbsp;<span class="ident" id="8173565">b</span>&nbsp;<span class="op" id="8173567">[</span><span class="op" id="8173568">]</span><span class="builtintype" id="8173569">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173575">sbool</span>&nbsp;<span class="op" id="8173581">:=</span>&nbsp;<span class="ident" id="8173584">getTypeUnlocked</span><span class="op" id="8173599">(</span><span class="string" id="8173600">&#34;&#34;</span><span class="op" id="8173602">,</span>&nbsp;<span class="ident" id="8173604">reflect</span><span class="op" id="8173611">.</span><span class="ident" id="8173612">TypeOf</span><span class="op" id="8173618">(</span><span class="ident" id="8173619">b</span><span class="op" id="8173620">)</span><span class="op" id="8173621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173624">if</span>&nbsp;<span class="ident" id="8173627">sbool</span>&nbsp;<span class="op" id="8173633">==</span>&nbsp;<span class="ident" id="8173636">sint</span>&nbsp;<span class="op" id="8173641">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173645">t</span><span class="op" id="8173646">.</span><span class="ident" id="8173647">Errorf</span><span class="op" id="8173653">(</span><span class="string" id="8173654">&#34;registration&nbsp;of&nbsp;[]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;[]int&#34;</span><span class="op" id="8173705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173711">str</span>&nbsp;<span class="op" id="8173715">:=</span>&nbsp;<span class="ident" id="8173718">sbool</span><span class="op" id="8173723">.</span><span class="builtintype" id="8173724">string</span><span class="op" id="8173730">(</span><span class="op" id="8173731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173734">expected</span>&nbsp;<span class="op" id="8173743">:=</span>&nbsp;<span class="string" id="8173746">&#34;[]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173756">if</span>&nbsp;<span class="ident" id="8173759">str</span>&nbsp;<span class="op" id="8173763">!=</span>&nbsp;<span class="ident" id="8173766">expected</span>&nbsp;<span class="op" id="8173775">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173779">t</span><span class="op" id="8173780">.</span><span class="ident" id="8173781">Errorf</span><span class="op" id="8173787">(</span><span class="string" id="8173788">&#34;slice&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8173822">,</span>&nbsp;<span class="ident" id="8173824">str</span><span class="op" id="8173827">,</span>&nbsp;<span class="ident" id="8173829">expected</span><span class="op" id="8173837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8173840">}</span><br>
<span class="lineno"></span><span class="op" id="8173842">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8173845">func</span>&nbsp;<span class="ident" id="8173850">TestMapType</span><span class="op" id="8173861">(</span><span class="ident" id="8173862">t</span>&nbsp;<span class="op" id="8173864">*</span><span class="ident" id="8173865">testing</span><span class="op" id="8173872">.</span><span class="ident" id="8173873">T</span><span class="op" id="8173874">)</span>&nbsp;<span class="op" id="8173876">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173879">var</span>&nbsp;<span class="ident" id="8173883">m</span>&nbsp;<span class="keyword" id="8173885">map</span><span class="op" id="8173888">[</span><span class="builtintype" id="8173889">string</span><span class="op" id="8173895">]</span><span class="builtintype" id="8173896">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173901">mapStringInt</span>&nbsp;<span class="op" id="8173914">:=</span>&nbsp;<span class="ident" id="8173917">getTypeUnlocked</span><span class="op" id="8173932">(</span><span class="string" id="8173933">&#34;map&#34;</span><span class="op" id="8173938">,</span>&nbsp;<span class="ident" id="8173940">reflect</span><span class="op" id="8173947">.</span><span class="ident" id="8173948">TypeOf</span><span class="op" id="8173954">(</span><span class="ident" id="8173955">m</span><span class="op" id="8173956">)</span><span class="op" id="8173957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8173960">var</span>&nbsp;<span class="ident" id="8173964">newm</span>&nbsp;<span class="keyword" id="8173969">map</span><span class="op" id="8173972">[</span><span class="builtintype" id="8173973">string</span><span class="op" id="8173979">]</span><span class="builtintype" id="8173980">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8173985">newMapStringInt</span>&nbsp;<span class="op" id="8174001">:=</span>&nbsp;<span class="ident" id="8174004">getTypeUnlocked</span><span class="op" id="8174019">(</span><span class="string" id="8174020">&#34;map1&#34;</span><span class="op" id="8174026">,</span>&nbsp;<span class="ident" id="8174028">reflect</span><span class="op" id="8174035">.</span><span class="ident" id="8174036">TypeOf</span><span class="op" id="8174042">(</span><span class="ident" id="8174043">newm</span><span class="op" id="8174047">)</span><span class="op" id="8174048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174051">if</span>&nbsp;<span class="ident" id="8174054">mapStringInt</span>&nbsp;<span class="op" id="8174067">!=</span>&nbsp;<span class="ident" id="8174070">newMapStringInt</span>&nbsp;<span class="op" id="8174086">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174090">t</span><span class="op" id="8174091">.</span><span class="ident" id="8174092">Errorf</span><span class="op" id="8174098">(</span><span class="string" id="8174099">&#34;second&nbsp;registration&nbsp;of&nbsp;map[string]int&nbsp;creates&nbsp;new&nbsp;type&#34;</span><span class="op" id="8174155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174158">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174161">var</span>&nbsp;<span class="ident" id="8174165">b</span>&nbsp;<span class="keyword" id="8174167">map</span><span class="op" id="8174170">[</span><span class="builtintype" id="8174171">string</span><span class="op" id="8174177">]</span><span class="builtintype" id="8174178">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174184">mapStringBool</span>&nbsp;<span class="op" id="8174198">:=</span>&nbsp;<span class="ident" id="8174201">getTypeUnlocked</span><span class="op" id="8174216">(</span><span class="string" id="8174217">&#34;&#34;</span><span class="op" id="8174219">,</span>&nbsp;<span class="ident" id="8174221">reflect</span><span class="op" id="8174228">.</span><span class="ident" id="8174229">TypeOf</span><span class="op" id="8174235">(</span><span class="ident" id="8174236">b</span><span class="op" id="8174237">)</span><span class="op" id="8174238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174241">if</span>&nbsp;<span class="ident" id="8174244">mapStringBool</span>&nbsp;<span class="op" id="8174258">==</span>&nbsp;<span class="ident" id="8174261">mapStringInt</span>&nbsp;<span class="op" id="8174274">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174278">t</span><span class="op" id="8174279">.</span><span class="ident" id="8174280">Errorf</span><span class="op" id="8174286">(</span><span class="string" id="8174287">&#34;registration&nbsp;of&nbsp;map[string]bool&nbsp;creates&nbsp;same&nbsp;type&nbsp;as&nbsp;map[string]int&#34;</span><span class="op" id="8174356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174359">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174362">str</span>&nbsp;<span class="op" id="8174366">:=</span>&nbsp;<span class="ident" id="8174369">mapStringBool</span><span class="op" id="8174382">.</span><span class="builtintype" id="8174383">string</span><span class="op" id="8174389">(</span><span class="op" id="8174390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174393">expected</span>&nbsp;<span class="op" id="8174402">:=</span>&nbsp;<span class="string" id="8174405">&#34;map[string]bool&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8174424">if</span>&nbsp;<span class="ident" id="8174427">str</span>&nbsp;<span class="op" id="8174431">!=</span>&nbsp;<span class="ident" id="8174434">expected</span>&nbsp;<span class="op" id="8174443">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174447">t</span><span class="op" id="8174448">.</span><span class="ident" id="8174449">Errorf</span><span class="op" id="8174455">(</span><span class="string" id="8174456">&#34;map&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8174488">,</span>&nbsp;<span class="ident" id="8174490">str</span><span class="op" id="8174493">,</span>&nbsp;<span class="ident" id="8174495">expected</span><span class="op" id="8174503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8174506">}</span><br>
<span class="lineno"></span><span class="op" id="8174508">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8174511">type</span>&nbsp;<span class="ident" id="8174516">Bar</span>&nbsp;<span class="keyword" id="8174520">struct</span>&nbsp;<span class="op" id="8174527">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174530">X</span>&nbsp;<span class="builtintype" id="8174532">string</span><br>
<span class="lineno"></span><span class="op" id="8174539">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8174542">//&nbsp;This&nbsp;structure&nbsp;has&nbsp;pointers&nbsp;and&nbsp;refers&nbsp;to&nbsp;itself,&nbsp;making&nbsp;it&nbsp;a&nbsp;good&nbsp;test&nbsp;case.</span><br>
<span class="lineno"></span><span class="keyword" id="8174623">type</span>&nbsp;<span class="ident" id="8174628">Foo</span>&nbsp;<span class="keyword" id="8174632">struct</span>&nbsp;<span class="op" id="8174639">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174642">A</span>&nbsp;<span class="builtintype" id="8174644">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174649">B</span>&nbsp;<span class="builtintype" id="8174651">int32</span>&nbsp;<span class="comment" id="8174657">//&nbsp;will&nbsp;become&nbsp;int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174677">C</span>&nbsp;<span class="builtintype" id="8174679">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174687">D</span>&nbsp;<span class="op" id="8174689">[</span><span class="op" id="8174690">]</span><span class="builtintype" id="8174691">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174697">E</span>&nbsp;<span class="op" id="8174699">*</span><span class="builtintype" id="8174700">float64</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8174711">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174735">F</span>&nbsp;<span class="op" id="8174737">*</span><span class="op" id="8174738">*</span><span class="op" id="8174739">*</span><span class="op" id="8174740">*</span><span class="builtintype" id="8174741">float64</span>&nbsp;<span class="comment" id="8174749">//&nbsp;will&nbsp;become&nbsp;float64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174773">G</span>&nbsp;<span class="op" id="8174775">*</span><span class="ident" id="8174776">Bar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174781">H</span>&nbsp;<span class="op" id="8174783">*</span><span class="ident" id="8174784">Bar</span>&nbsp;<span class="comment" id="8174788">//&nbsp;should&nbsp;not&nbsp;interpolate&nbsp;the&nbsp;definition&nbsp;of&nbsp;Bar&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174843">I</span>&nbsp;<span class="op" id="8174845">*</span><span class="ident" id="8174846">Foo</span>&nbsp;<span class="comment" id="8174850">//&nbsp;will&nbsp;not&nbsp;explode</span><br>
<span class="lineno"></span><span class="op" id="8174870">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="keyword" id="8174873">func</span>&nbsp;<span class="ident" id="8174878">TestStructType</span><span class="op" id="8174892">(</span><span class="ident" id="8174893">t</span>&nbsp;<span class="op" id="8174895">*</span><span class="ident" id="8174896">testing</span><span class="op" id="8174903">.</span><span class="ident" id="8174904">T</span><span class="op" id="8174905">)</span>&nbsp;<span class="op" id="8174907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174910">sstruct</span>&nbsp;<span class="op" id="8174918">:=</span>&nbsp;<span class="ident" id="8174921">getTypeUnlocked</span><span class="op" id="8174936">(</span><span class="string" id="8174937">&#34;Foo&#34;</span><span class="op" id="8174942">,</span>&nbsp;<span class="ident" id="8174944">reflect</span><span class="op" id="8174951">.</span><span class="ident" id="8174952">TypeOf</span><span class="op" id="8174958">(</span><span class="ident" id="8174959">Foo</span><span class="op" id="8174962">{</span><span class="op" id="8174963">}</span><span class="op" id="8174964">)</span><span class="op" id="8174965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8174968">str</span>&nbsp;<span class="op" id="8174972">:=</span>&nbsp;<span class="ident" id="8174975">sstruct</span><span class="op" id="8174982">.</span><span class="builtintype" id="8174983">string</span><span class="op" id="8174989">(</span><span class="op" id="8174990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8174993">//&nbsp;If&nbsp;we&nbsp;can&nbsp;print&nbsp;it&nbsp;correctly,&nbsp;we&nbsp;built&nbsp;it&nbsp;correctly.</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175050">expected</span>&nbsp;<span class="op" id="8175059">:=</span>&nbsp;<span class="string" id="8175062">&#34;Foo&nbsp;=&nbsp;struct&nbsp;{&nbsp;A&nbsp;int;&nbsp;B&nbsp;int;&nbsp;C&nbsp;string;&nbsp;D&nbsp;bytes;&nbsp;E&nbsp;float;&nbsp;F&nbsp;float;&nbsp;G&nbsp;Bar&nbsp;=&nbsp;struct&nbsp;{&nbsp;X&nbsp;string;&nbsp;};&nbsp;H&nbsp;Bar;&nbsp;I&nbsp;Foo;&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175177">if</span>&nbsp;<span class="ident" id="8175180">str</span>&nbsp;<span class="op" id="8175184">!=</span>&nbsp;<span class="ident" id="8175187">expected</span>&nbsp;<span class="op" id="8175196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175200">t</span><span class="op" id="8175201">.</span><span class="ident" id="8175202">Errorf</span><span class="op" id="8175208">(</span><span class="string" id="8175209">&#34;struct&nbsp;printed&nbsp;as&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8175244">,</span>&nbsp;<span class="ident" id="8175246">str</span><span class="op" id="8175249">,</span>&nbsp;<span class="ident" id="8175251">expected</span><span class="op" id="8175259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175262">}</span><br>
<span class="lineno"></span><span class="op" id="8175264">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="comment" id="8175267">//&nbsp;Should&nbsp;be&nbsp;OK&nbsp;to&nbsp;register&nbsp;the&nbsp;same&nbsp;type&nbsp;multiple&nbsp;times,&nbsp;as&nbsp;long&nbsp;as&nbsp;they&#39;re</span><br>
<span class="lineno"></span><span class="comment" id="8175344">//&nbsp;at&nbsp;the&nbsp;same&nbsp;level&nbsp;of&nbsp;indirection.</span><br>
<span class="lineno"></span><span class="keyword" id="8175381">func</span>&nbsp;<span class="ident" id="8175386">TestRegistration</span><span class="op" id="8175402">(</span><span class="ident" id="8175403">t</span>&nbsp;<span class="op" id="8175405">*</span><span class="ident" id="8175406">testing</span><span class="op" id="8175413">.</span><span class="ident" id="8175414">T</span><span class="op" id="8175415">)</span>&nbsp;<span class="op" id="8175417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175420">type</span>&nbsp;<span class="ident" id="8175425">T</span>&nbsp;<span class="keyword" id="8175427">struct</span><span class="op" id="8175433">{</span>&nbsp;<span class="ident" id="8175435">a</span>&nbsp;<span class="builtintype" id="8175437">int</span>&nbsp;<span class="op" id="8175441">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175444">Register</span><span class="op" id="8175452">(</span><span class="builtinfunc" id="8175453">new</span><span class="op" id="8175456">(</span><span class="ident" id="8175457">T</span><span class="op" id="8175458">)</span><span class="op" id="8175459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175462">Register</span><span class="op" id="8175470">(</span><span class="builtinfunc" id="8175471">new</span><span class="op" id="8175474">(</span><span class="ident" id="8175475">T</span><span class="op" id="8175476">)</span><span class="op" id="8175477">)</span><br>
<span class="lineno"></span><span class="op" id="8175479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8175482">type</span>&nbsp;<span class="ident" id="8175487">N1</span>&nbsp;<span class="keyword" id="8175490">struct</span><span class="op" id="8175496">{</span><span class="op" id="8175497">}</span><br>
<span class="lineno">165</span><span class="keyword" id="8175499">type</span>&nbsp;<span class="ident" id="8175504">N2</span>&nbsp;<span class="keyword" id="8175507">struct</span><span class="op" id="8175513">{</span><span class="op" id="8175514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8175517">//&nbsp;See&nbsp;comment&nbsp;in&nbsp;type.go/Register.</span><br>
<span class="lineno"></span><span class="keyword" id="8175553">func</span>&nbsp;<span class="ident" id="8175558">TestRegistrationNaming</span><span class="op" id="8175580">(</span><span class="ident" id="8175581">t</span>&nbsp;<span class="op" id="8175583">*</span><span class="ident" id="8175584">testing</span><span class="op" id="8175591">.</span><span class="ident" id="8175592">T</span><span class="op" id="8175593">)</span>&nbsp;<span class="op" id="8175595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175598">testCases</span>&nbsp;<span class="op" id="8175608">:=</span>&nbsp;<span class="op" id="8175611">[</span><span class="op" id="8175612">]</span><span class="keyword" id="8175613">struct</span>&nbsp;<span class="op" id="8175620">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175624">t</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="8175629">interface</span><span class="op" id="8175638">{</span><span class="op" id="8175639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175643">name</span>&nbsp;<span class="builtintype" id="8175648">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175656">}</span><span class="op" id="8175657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175661">{</span><span class="op" id="8175662">&amp;</span><span class="ident" id="8175663">N1</span><span class="op" id="8175665">{</span><span class="op" id="8175666">}</span><span class="op" id="8175667">,</span>&nbsp;<span class="string" id="8175669">&#34;*gob.N1&#34;</span><span class="op" id="8175678">}</span><span class="op" id="8175679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175683">{</span><span class="ident" id="8175684">N2</span><span class="op" id="8175686">{</span><span class="op" id="8175687">}</span><span class="op" id="8175688">,</span>&nbsp;<span class="string" id="8175690">&#34;encoding/gob.N2&#34;</span><span class="op" id="8175707">}</span><span class="op" id="8175708">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175715">for</span>&nbsp;<span class="ident" id="8175719">_</span><span class="op" id="8175720">,</span>&nbsp;<span class="ident" id="8175722">tc</span>&nbsp;<span class="op" id="8175725">:=</span>&nbsp;<span class="keyword" id="8175728">range</span>&nbsp;<span class="ident" id="8175734">testCases</span>&nbsp;<span class="op" id="8175744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175748">Register</span><span class="op" id="8175756">(</span><span class="ident" id="8175757">tc</span><span class="op" id="8175759">.</span><span class="ident" id="8175760">t</span><span class="op" id="8175761">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175766">tct</span>&nbsp;<span class="op" id="8175770">:=</span>&nbsp;<span class="ident" id="8175773">reflect</span><span class="op" id="8175780">.</span><span class="ident" id="8175781">TypeOf</span><span class="op" id="8175787">(</span><span class="ident" id="8175788">tc</span><span class="op" id="8175790">.</span><span class="ident" id="8175791">t</span><span class="op" id="8175792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175796">registerLock</span><span class="op" id="8175808">.</span><span class="ident" id="8175809">RLock</span><span class="op" id="8175814">(</span><span class="op" id="8175815">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175819">ct</span>&nbsp;<span class="op" id="8175822">:=</span>&nbsp;<span class="ident" id="8175825">nameToConcreteType</span><span class="op" id="8175843">[</span><span class="ident" id="8175844">tc</span><span class="op" id="8175846">.</span><span class="ident" id="8175847">name</span><span class="op" id="8175851">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175855">registerLock</span><span class="op" id="8175867">.</span><span class="ident" id="8175868">RUnlock</span><span class="op" id="8175875">(</span><span class="op" id="8175876">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8175880">if</span>&nbsp;<span class="ident" id="8175883">ct</span>&nbsp;<span class="op" id="8175886">!=</span>&nbsp;<span class="ident" id="8175889">tct</span>&nbsp;<span class="op" id="8175893">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8175898">t</span><span class="op" id="8175899">.</span><span class="ident" id="8175900">Errorf</span><span class="op" id="8175906">(</span><span class="string" id="8175907">&#34;nameToConcreteType[%q]&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8175945">,</span>&nbsp;<span class="ident" id="8175947">tc</span><span class="op" id="8175949">.</span><span class="ident" id="8175950">name</span><span class="op" id="8175954">,</span>&nbsp;<span class="ident" id="8175956">ct</span><span class="op" id="8175958">,</span>&nbsp;<span class="ident" id="8175960">tct</span><span class="op" id="8175963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8175967">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8175971">//&nbsp;concreteTypeToName&nbsp;is&nbsp;keyed&nbsp;off&nbsp;the&nbsp;base&nbsp;type.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176023">if</span>&nbsp;<span class="ident" id="8176026">tct</span><span class="op" id="8176029">.</span><span class="ident" id="8176030">Kind</span><span class="op" id="8176034">(</span><span class="op" id="8176035">)</span>&nbsp;<span class="op" id="8176037">==</span>&nbsp;<span class="ident" id="8176040">reflect</span><span class="op" id="8176047">.</span><span class="ident" id="8176048">Ptr</span>&nbsp;<span class="op" id="8176052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176057">tct</span>&nbsp;<span class="op" id="8176061">=</span>&nbsp;<span class="ident" id="8176063">tct</span><span class="op" id="8176066">.</span><span class="ident" id="8176067">Elem</span><span class="op" id="8176071">(</span><span class="op" id="8176072">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176080">if</span>&nbsp;<span class="ident" id="8176083">n</span>&nbsp;<span class="op" id="8176085">:=</span>&nbsp;<span class="ident" id="8176088">concreteTypeToName</span><span class="op" id="8176106">[</span><span class="ident" id="8176107">tct</span><span class="op" id="8176110">]</span><span class="op" id="8176111">;</span>&nbsp;<span class="ident" id="8176113">n</span>&nbsp;<span class="op" id="8176115">!=</span>&nbsp;<span class="ident" id="8176118">tc</span><span class="op" id="8176120">.</span><span class="ident" id="8176121">name</span>&nbsp;<span class="op" id="8176126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176131">t</span><span class="op" id="8176132">.</span><span class="ident" id="8176133">Errorf</span><span class="op" id="8176139">(</span><span class="string" id="8176140">&#34;concreteTypeToName[%v]&nbsp;got&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8176180">,</span>&nbsp;<span class="ident" id="8176182">tct</span><span class="op" id="8176185">,</span>&nbsp;<span class="ident" id="8176187">n</span><span class="op" id="8176188">,</span>&nbsp;<span class="ident" id="8176190">tc</span><span class="op" id="8176192">.</span><span class="ident" id="8176193">name</span><span class="op" id="8176197">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176204">}</span><br>
<span class="lineno">195</span><span class="op" id="8176206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8176209">func</span>&nbsp;<span class="ident" id="8176214">TestStressParallel</span><span class="op" id="8176232">(</span><span class="ident" id="8176233">t</span>&nbsp;<span class="op" id="8176235">*</span><span class="ident" id="8176236">testing</span><span class="op" id="8176243">.</span><span class="ident" id="8176244">T</span><span class="op" id="8176245">)</span>&nbsp;<span class="op" id="8176247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176250">type</span>&nbsp;<span class="ident" id="8176255">T2</span>&nbsp;<span class="keyword" id="8176258">struct</span><span class="op" id="8176264">{</span>&nbsp;<span class="ident" id="8176266">A</span>&nbsp;<span class="builtintype" id="8176268">int</span>&nbsp;<span class="op" id="8176272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176275">c</span>&nbsp;<span class="op" id="8176277">:=</span>&nbsp;<span class="builtinfunc" id="8176280">make</span><span class="op" id="8176284">(</span><span class="keyword" id="8176285">chan</span>&nbsp;<span class="builtintype" id="8176290">bool</span><span class="op" id="8176294">)</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176297">const</span>&nbsp;<span class="ident" id="8176303">N</span>&nbsp;<span class="op" id="8176305">=</span>&nbsp;<span class="num" id="8176307">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176311">for</span>&nbsp;<span class="ident" id="8176315">i</span>&nbsp;<span class="op" id="8176317">:=</span>&nbsp;<span class="num" id="8176320">0</span><span class="op" id="8176321">;</span>&nbsp;<span class="ident" id="8176323">i</span>&nbsp;<span class="op" id="8176325">&lt;</span>&nbsp;<span class="ident" id="8176327">N</span><span class="op" id="8176328">;</span>&nbsp;<span class="ident" id="8176330">i</span><span class="op" id="8176331">++</span>&nbsp;<span class="op" id="8176334">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176338">go</span>&nbsp;<span class="keyword" id="8176341">func</span><span class="op" id="8176345">(</span><span class="op" id="8176346">)</span>&nbsp;<span class="op" id="8176348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176353">p</span>&nbsp;<span class="op" id="8176355">:=</span>&nbsp;<span class="builtinfunc" id="8176358">new</span><span class="op" id="8176361">(</span><span class="ident" id="8176362">T2</span><span class="op" id="8176364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176369">Register</span><span class="op" id="8176377">(</span><span class="ident" id="8176378">p</span><span class="op" id="8176379">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176384">b</span>&nbsp;<span class="op" id="8176386">:=</span>&nbsp;<span class="builtinfunc" id="8176389">new</span><span class="op" id="8176392">(</span><span class="ident" id="8176393">bytes</span><span class="op" id="8176398">.</span><span class="ident" id="8176399">Buffer</span><span class="op" id="8176405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176410">enc</span>&nbsp;<span class="op" id="8176414">:=</span>&nbsp;<span class="ident" id="8176417">NewEncoder</span><span class="op" id="8176427">(</span><span class="ident" id="8176428">b</span><span class="op" id="8176429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176434">err</span>&nbsp;<span class="op" id="8176438">:=</span>&nbsp;<span class="ident" id="8176441">enc</span><span class="op" id="8176444">.</span><span class="ident" id="8176445">Encode</span><span class="op" id="8176451">(</span><span class="ident" id="8176452">p</span><span class="op" id="8176453">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176458">if</span>&nbsp;<span class="ident" id="8176461">err</span>&nbsp;<span class="op" id="8176465">!=</span>&nbsp;<span class="ident" id="8176468">nil</span>&nbsp;<span class="op" id="8176472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176478">t</span><span class="op" id="8176479">.</span><span class="ident" id="8176480">Error</span><span class="op" id="8176485">(</span><span class="string" id="8176486">&#34;encoder&nbsp;fail:&#34;</span><span class="op" id="8176501">,</span>&nbsp;<span class="ident" id="8176503">err</span><span class="op" id="8176506">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176516">dec</span>&nbsp;<span class="op" id="8176520">:=</span>&nbsp;<span class="ident" id="8176523">NewDecoder</span><span class="op" id="8176533">(</span><span class="ident" id="8176534">b</span><span class="op" id="8176535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176540">err</span>&nbsp;<span class="op" id="8176544">=</span>&nbsp;<span class="ident" id="8176546">dec</span><span class="op" id="8176549">.</span><span class="ident" id="8176550">Decode</span><span class="op" id="8176556">(</span><span class="ident" id="8176557">p</span><span class="op" id="8176558">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176563">if</span>&nbsp;<span class="ident" id="8176566">err</span>&nbsp;<span class="op" id="8176570">!=</span>&nbsp;<span class="ident" id="8176573">nil</span>&nbsp;<span class="op" id="8176577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176583">t</span><span class="op" id="8176584">.</span><span class="ident" id="8176585">Error</span><span class="op" id="8176590">(</span><span class="string" id="8176591">&#34;decoder&nbsp;fail:&#34;</span><span class="op" id="8176606">,</span>&nbsp;<span class="ident" id="8176608">err</span><span class="op" id="8176611">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8176621">c</span>&nbsp;<span class="op" id="8176623">&lt;-</span>&nbsp;<span class="builtintype" id="8176626">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176633">}</span><span class="op" id="8176634">(</span><span class="op" id="8176635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176638">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8176641">for</span>&nbsp;<span class="ident" id="8176645">i</span>&nbsp;<span class="op" id="8176647">:=</span>&nbsp;<span class="num" id="8176650">0</span><span class="op" id="8176651">;</span>&nbsp;<span class="ident" id="8176653">i</span>&nbsp;<span class="op" id="8176655">&lt;</span>&nbsp;<span class="ident" id="8176657">N</span><span class="op" id="8176658">;</span>&nbsp;<span class="ident" id="8176660">i</span><span class="op" id="8176661">++</span>&nbsp;<span class="op" id="8176664">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176668">&lt;-</span><span class="ident" id="8176670">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8176673">}</span><br>
<span class="lineno"></span><span class="op" id="8176675">}</span>
</div>
</body>
</html>
