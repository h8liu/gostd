<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html" class="current">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1329532">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1329587">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1329641">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1329692">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="1329741">//</span><br>
<span class="lineno"></span><span class="comment" id="1329744">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="1329792">//&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="1329840">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="1329873">//&nbsp;&nbsp;&nbsp;&nbsp;}</span><br>
<span class="lineno"></span><span class="comment" id="1329878">//</span><br>
<span class="lineno"></span><span class="keyword" id="1329881">package</span>&nbsp;<span class="ident" id="1329889">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1329895">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="1329938">type</span>&nbsp;<span class="ident" id="1329943">Element</span>&nbsp;<span class="keyword" id="1329951">struct</span>&nbsp;<span class="op" id="1329958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1329961">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330031">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330102">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330172">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330243">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1330268">next</span><span class="op" id="1330272">,</span>&nbsp;<span class="ident" id="1330274">prev</span>&nbsp;<span class="op" id="1330279">*</span><span class="ident" id="1330280">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330290">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1330334">list</span>&nbsp;<span class="op" id="1330339">*</span><span class="ident" id="1330340">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330347">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1330387">Value</span>&nbsp;<span class="keyword" id="1330393">interface</span><span class="op" id="1330402">{</span><span class="op" id="1330403">}</span><br>
<span class="lineno"></span><span class="op" id="1330405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="1330408">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1330454">func</span>&nbsp;<span class="op" id="1330459">(</span><span class="ident" id="1330460">e</span>&nbsp;<span class="op" id="1330462">*</span><span class="ident" id="1330463">Element</span><span class="op" id="1330470">)</span>&nbsp;<span class="ident" id="1330472">Next</span><span class="op" id="1330476">(</span><span class="op" id="1330477">)</span>&nbsp;<span class="op" id="1330479">*</span><span class="ident" id="1330480">Element</span>&nbsp;<span class="op" id="1330488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330491">if</span>&nbsp;<span class="ident" id="1330494">p</span>&nbsp;<span class="op" id="1330496">:=</span>&nbsp;<span class="ident" id="1330499">e</span><span class="op" id="1330500">.</span><span class="ident" id="1330501">next</span><span class="op" id="1330505">;</span>&nbsp;<span class="ident" id="1330507">e</span><span class="op" id="1330508">.</span><span class="ident" id="1330509">list</span>&nbsp;<span class="op" id="1330514">!=</span>&nbsp;<span class="builtintype" id="1330517">nil</span>&nbsp;<span class="op" id="1330521">&amp;&amp;</span>&nbsp;<span class="ident" id="1330524">p</span>&nbsp;<span class="op" id="1330526">!=</span>&nbsp;<span class="op" id="1330529">&amp;</span><span class="ident" id="1330530">e</span><span class="op" id="1330531">.</span><span class="ident" id="1330532">list</span><span class="op" id="1330536">.</span><span class="ident" id="1330537">root</span>&nbsp;<span class="op" id="1330542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330546">return</span>&nbsp;<span class="ident" id="1330553">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1330556">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330559">return</span>&nbsp;<span class="builtintype" id="1330566">nil</span><br>
<span class="lineno"></span><span class="op" id="1330570">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1330573">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1330623">func</span>&nbsp;<span class="op" id="1330628">(</span><span class="ident" id="1330629">e</span>&nbsp;<span class="op" id="1330631">*</span><span class="ident" id="1330632">Element</span><span class="op" id="1330639">)</span>&nbsp;<span class="ident" id="1330641">Prev</span><span class="op" id="1330645">(</span><span class="op" id="1330646">)</span>&nbsp;<span class="op" id="1330648">*</span><span class="ident" id="1330649">Element</span>&nbsp;<span class="op" id="1330657">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330660">if</span>&nbsp;<span class="ident" id="1330663">p</span>&nbsp;<span class="op" id="1330665">:=</span>&nbsp;<span class="ident" id="1330668">e</span><span class="op" id="1330669">.</span><span class="ident" id="1330670">prev</span><span class="op" id="1330674">;</span>&nbsp;<span class="ident" id="1330676">e</span><span class="op" id="1330677">.</span><span class="ident" id="1330678">list</span>&nbsp;<span class="op" id="1330683">!=</span>&nbsp;<span class="builtintype" id="1330686">nil</span>&nbsp;<span class="op" id="1330690">&amp;&amp;</span>&nbsp;<span class="ident" id="1330693">p</span>&nbsp;<span class="op" id="1330695">!=</span>&nbsp;<span class="op" id="1330698">&amp;</span><span class="ident" id="1330699">e</span><span class="op" id="1330700">.</span><span class="ident" id="1330701">list</span><span class="op" id="1330705">.</span><span class="ident" id="1330706">root</span>&nbsp;<span class="op" id="1330711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330715">return</span>&nbsp;<span class="ident" id="1330722">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1330725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1330728">return</span>&nbsp;<span class="builtintype" id="1330735">nil</span><br>
<span class="lineno"></span><span class="op" id="1330739">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="1330742">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="1330783">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="1330841">type</span>&nbsp;<span class="ident" id="1330846">List</span>&nbsp;<span class="keyword" id="1330851">struct</span>&nbsp;<span class="op" id="1330858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1330861">root</span>&nbsp;<span class="ident" id="1330866">Element</span>&nbsp;<span class="comment" id="1330874">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1330947">len</span>&nbsp;&nbsp;<span class="builtintype" id="1330952">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1330960">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="1331017">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1331020">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="1331058">func</span>&nbsp;<span class="op" id="1331063">(</span><span class="ident" id="1331064">l</span>&nbsp;<span class="op" id="1331066">*</span><span class="ident" id="1331067">List</span><span class="op" id="1331071">)</span>&nbsp;<span class="ident" id="1331073">Init</span><span class="op" id="1331077">(</span><span class="op" id="1331078">)</span>&nbsp;<span class="op" id="1331080">*</span><span class="ident" id="1331081">List</span>&nbsp;<span class="op" id="1331086">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331089">l</span><span class="op" id="1331090">.</span><span class="ident" id="1331091">root</span><span class="op" id="1331095">.</span><span class="ident" id="1331096">next</span>&nbsp;<span class="op" id="1331101">=</span>&nbsp;<span class="op" id="1331103">&amp;</span><span class="ident" id="1331104">l</span><span class="op" id="1331105">.</span><span class="ident" id="1331106">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331112">l</span><span class="op" id="1331113">.</span><span class="ident" id="1331114">root</span><span class="op" id="1331118">.</span><span class="ident" id="1331119">prev</span>&nbsp;<span class="op" id="1331124">=</span>&nbsp;<span class="op" id="1331126">&amp;</span><span class="ident" id="1331127">l</span><span class="op" id="1331128">.</span><span class="ident" id="1331129">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331135">l</span><span class="op" id="1331136">.</span><span class="builtinfunc" id="1331137">len</span>&nbsp;<span class="op" id="1331141">=</span>&nbsp;<span class="num" id="1331143">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331146">return</span>&nbsp;<span class="ident" id="1331153">l</span><br>
<span class="lineno"></span><span class="op" id="1331155">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="1331158">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="1331194">func</span>&nbsp;<span class="ident" id="1331199">New</span><span class="op" id="1331202">(</span><span class="op" id="1331203">)</span>&nbsp;<span class="op" id="1331205">*</span><span class="ident" id="1331206">List</span>&nbsp;<span class="op" id="1331211">{</span>&nbsp;<span class="keyword" id="1331213">return</span>&nbsp;<span class="builtinfunc" id="1331220">new</span><span class="op" id="1331223">(</span><span class="ident" id="1331224">List</span><span class="op" id="1331228">)</span><span class="op" id="1331229">.</span><span class="ident" id="1331230">Init</span><span class="op" id="1331234">(</span><span class="op" id="1331235">)</span>&nbsp;<span class="op" id="1331237">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1331240">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="1331289">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="1331316">func</span>&nbsp;<span class="op" id="1331321">(</span><span class="ident" id="1331322">l</span>&nbsp;<span class="op" id="1331324">*</span><span class="ident" id="1331325">List</span><span class="op" id="1331329">)</span>&nbsp;<span class="ident" id="1331331">Len</span><span class="op" id="1331334">(</span><span class="op" id="1331335">)</span>&nbsp;<span class="builtintype" id="1331337">int</span>&nbsp;<span class="op" id="1331341">{</span>&nbsp;<span class="keyword" id="1331343">return</span>&nbsp;<span class="ident" id="1331350">l</span><span class="op" id="1331351">.</span><span class="builtinfunc" id="1331352">len</span>&nbsp;<span class="op" id="1331356">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1331359">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1331412">func</span>&nbsp;<span class="op" id="1331417">(</span><span class="ident" id="1331418">l</span>&nbsp;<span class="op" id="1331420">*</span><span class="ident" id="1331421">List</span><span class="op" id="1331425">)</span>&nbsp;<span class="ident" id="1331427">Front</span><span class="op" id="1331432">(</span><span class="op" id="1331433">)</span>&nbsp;<span class="op" id="1331435">*</span><span class="ident" id="1331436">Element</span>&nbsp;<span class="op" id="1331444">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331447">if</span>&nbsp;<span class="ident" id="1331450">l</span><span class="op" id="1331451">.</span><span class="builtinfunc" id="1331452">len</span>&nbsp;<span class="op" id="1331456">==</span>&nbsp;<span class="num" id="1331459">0</span>&nbsp;<span class="op" id="1331461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331465">return</span>&nbsp;<span class="builtintype" id="1331472">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1331477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331480">return</span>&nbsp;<span class="ident" id="1331487">l</span><span class="op" id="1331488">.</span><span class="ident" id="1331489">root</span><span class="op" id="1331493">.</span><span class="ident" id="1331494">next</span><br>
<span class="lineno"></span><span class="op" id="1331499">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="1331502">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="1331553">func</span>&nbsp;<span class="op" id="1331558">(</span><span class="ident" id="1331559">l</span>&nbsp;<span class="op" id="1331561">*</span><span class="ident" id="1331562">List</span><span class="op" id="1331566">)</span>&nbsp;<span class="ident" id="1331568">Back</span><span class="op" id="1331572">(</span><span class="op" id="1331573">)</span>&nbsp;<span class="op" id="1331575">*</span><span class="ident" id="1331576">Element</span>&nbsp;<span class="op" id="1331584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331587">if</span>&nbsp;<span class="ident" id="1331590">l</span><span class="op" id="1331591">.</span><span class="builtinfunc" id="1331592">len</span>&nbsp;<span class="op" id="1331596">==</span>&nbsp;<span class="num" id="1331599">0</span>&nbsp;<span class="op" id="1331601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331605">return</span>&nbsp;<span class="builtintype" id="1331612">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1331617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331620">return</span>&nbsp;<span class="ident" id="1331627">l</span><span class="op" id="1331628">.</span><span class="ident" id="1331629">root</span><span class="op" id="1331633">.</span><span class="ident" id="1331634">prev</span><br>
<span class="lineno"></span><span class="op" id="1331639">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1331642">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="1331692">func</span>&nbsp;<span class="op" id="1331697">(</span><span class="ident" id="1331698">l</span>&nbsp;<span class="op" id="1331700">*</span><span class="ident" id="1331701">List</span><span class="op" id="1331705">)</span>&nbsp;<span class="ident" id="1331707">lazyInit</span><span class="op" id="1331715">(</span><span class="op" id="1331716">)</span>&nbsp;<span class="op" id="1331718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331721">if</span>&nbsp;<span class="ident" id="1331724">l</span><span class="op" id="1331725">.</span><span class="ident" id="1331726">root</span><span class="op" id="1331730">.</span><span class="ident" id="1331731">next</span>&nbsp;<span class="op" id="1331736">==</span>&nbsp;<span class="builtintype" id="1331739">nil</span>&nbsp;<span class="op" id="1331743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331747">l</span><span class="op" id="1331748">.</span><span class="ident" id="1331749">Init</span><span class="op" id="1331753">(</span><span class="op" id="1331754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1331757">}</span><br>
<span class="lineno"></span><span class="op" id="1331759">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="1331762">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="1331825">func</span>&nbsp;<span class="op" id="1331830">(</span><span class="ident" id="1331831">l</span>&nbsp;<span class="op" id="1331833">*</span><span class="ident" id="1331834">List</span><span class="op" id="1331838">)</span>&nbsp;<span class="ident" id="1331840">insert</span><span class="op" id="1331846">(</span><span class="ident" id="1331847">e</span><span class="op" id="1331848">,</span>&nbsp;<span class="ident" id="1331850">at</span>&nbsp;<span class="op" id="1331853">*</span><span class="ident" id="1331854">Element</span><span class="op" id="1331861">)</span>&nbsp;<span class="op" id="1331863">*</span><span class="ident" id="1331864">Element</span>&nbsp;<span class="op" id="1331872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331875">n</span>&nbsp;<span class="op" id="1331877">:=</span>&nbsp;<span class="ident" id="1331880">at</span><span class="op" id="1331882">.</span><span class="ident" id="1331883">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331889">at</span><span class="op" id="1331891">.</span><span class="ident" id="1331892">next</span>&nbsp;<span class="op" id="1331897">=</span>&nbsp;<span class="ident" id="1331899">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331902">e</span><span class="op" id="1331903">.</span><span class="ident" id="1331904">prev</span>&nbsp;<span class="op" id="1331909">=</span>&nbsp;<span class="ident" id="1331911">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331915">e</span><span class="op" id="1331916">.</span><span class="ident" id="1331917">next</span>&nbsp;<span class="op" id="1331922">=</span>&nbsp;<span class="ident" id="1331924">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331927">n</span><span class="op" id="1331928">.</span><span class="ident" id="1331929">prev</span>&nbsp;<span class="op" id="1331934">=</span>&nbsp;<span class="ident" id="1331936">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331939">e</span><span class="op" id="1331940">.</span><span class="ident" id="1331941">list</span>&nbsp;<span class="op" id="1331946">=</span>&nbsp;<span class="ident" id="1331948">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1331951">l</span><span class="op" id="1331952">.</span><span class="builtinfunc" id="1331953">len</span><span class="op" id="1331956">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1331960">return</span>&nbsp;<span class="ident" id="1331967">e</span><br>
<span class="lineno"></span><span class="op" id="1331969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1331972">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="1332048">func</span>&nbsp;<span class="op" id="1332053">(</span><span class="ident" id="1332054">l</span>&nbsp;<span class="op" id="1332056">*</span><span class="ident" id="1332057">List</span><span class="op" id="1332061">)</span>&nbsp;<span class="ident" id="1332063">insertValue</span><span class="op" id="1332074">(</span><span class="ident" id="1332075">v</span>&nbsp;<span class="keyword" id="1332077">interface</span><span class="op" id="1332086">{</span><span class="op" id="1332087">}</span><span class="op" id="1332088">,</span>&nbsp;<span class="ident" id="1332090">at</span>&nbsp;<span class="op" id="1332093">*</span><span class="ident" id="1332094">Element</span><span class="op" id="1332101">)</span>&nbsp;<span class="op" id="1332103">*</span><span class="ident" id="1332104">Element</span>&nbsp;<span class="op" id="1332112">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1332115">return</span>&nbsp;<span class="ident" id="1332122">l</span><span class="op" id="1332123">.</span><span class="ident" id="1332124">insert</span><span class="op" id="1332130">(</span><span class="op" id="1332131">&amp;</span><span class="ident" id="1332132">Element</span><span class="op" id="1332139">{</span><span class="ident" id="1332140">Value</span><span class="op" id="1332145">:</span>&nbsp;<span class="ident" id="1332147">v</span><span class="op" id="1332148">}</span><span class="op" id="1332149">,</span>&nbsp;<span class="ident" id="1332151">at</span><span class="op" id="1332153">)</span><br>
<span class="lineno"></span><span class="op" id="1332155">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1332158">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="1332226">func</span>&nbsp;<span class="op" id="1332231">(</span><span class="ident" id="1332232">l</span>&nbsp;<span class="op" id="1332234">*</span><span class="ident" id="1332235">List</span><span class="op" id="1332239">)</span>&nbsp;<span class="ident" id="1332241">remove</span><span class="op" id="1332247">(</span><span class="ident" id="1332248">e</span>&nbsp;<span class="op" id="1332250">*</span><span class="ident" id="1332251">Element</span><span class="op" id="1332258">)</span>&nbsp;<span class="op" id="1332260">*</span><span class="ident" id="1332261">Element</span>&nbsp;<span class="op" id="1332269">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332272">e</span><span class="op" id="1332273">.</span><span class="ident" id="1332274">prev</span><span class="op" id="1332278">.</span><span class="ident" id="1332279">next</span>&nbsp;<span class="op" id="1332284">=</span>&nbsp;<span class="ident" id="1332286">e</span><span class="op" id="1332287">.</span><span class="ident" id="1332288">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332294">e</span><span class="op" id="1332295">.</span><span class="ident" id="1332296">next</span><span class="op" id="1332300">.</span><span class="ident" id="1332301">prev</span>&nbsp;<span class="op" id="1332306">=</span>&nbsp;<span class="ident" id="1332308">e</span><span class="op" id="1332309">.</span><span class="ident" id="1332310">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332316">e</span><span class="op" id="1332317">.</span><span class="ident" id="1332318">next</span>&nbsp;<span class="op" id="1332323">=</span>&nbsp;<span class="builtintype" id="1332325">nil</span>&nbsp;<span class="comment" id="1332329">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332352">e</span><span class="op" id="1332353">.</span><span class="ident" id="1332354">prev</span>&nbsp;<span class="op" id="1332359">=</span>&nbsp;<span class="builtintype" id="1332361">nil</span>&nbsp;<span class="comment" id="1332365">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332388">e</span><span class="op" id="1332389">.</span><span class="ident" id="1332390">list</span>&nbsp;<span class="op" id="1332395">=</span>&nbsp;<span class="builtintype" id="1332397">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332402">l</span><span class="op" id="1332403">.</span><span class="builtinfunc" id="1332404">len</span><span class="op" id="1332407">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1332411">return</span>&nbsp;<span class="ident" id="1332418">e</span><br>
<span class="lineno"></span><span class="op" id="1332420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1332423">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="1332480">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="1332521">func</span>&nbsp;<span class="op" id="1332526">(</span><span class="ident" id="1332527">l</span>&nbsp;<span class="op" id="1332529">*</span><span class="ident" id="1332530">List</span><span class="op" id="1332534">)</span>&nbsp;<span class="ident" id="1332536">Remove</span><span class="op" id="1332542">(</span><span class="ident" id="1332543">e</span>&nbsp;<span class="op" id="1332545">*</span><span class="ident" id="1332546">Element</span><span class="op" id="1332553">)</span>&nbsp;<span class="keyword" id="1332555">interface</span><span class="op" id="1332564">{</span><span class="op" id="1332565">}</span>&nbsp;<span class="op" id="1332567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1332570">if</span>&nbsp;<span class="ident" id="1332573">e</span><span class="op" id="1332574">.</span><span class="ident" id="1332575">list</span>&nbsp;<span class="op" id="1332580">==</span>&nbsp;<span class="ident" id="1332583">l</span>&nbsp;<span class="op" id="1332585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1332589">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1332659">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332727">l</span><span class="op" id="1332728">.</span><span class="ident" id="1332729">remove</span><span class="op" id="1332735">(</span><span class="ident" id="1332736">e</span><span class="op" id="1332737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1332740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1332743">return</span>&nbsp;<span class="ident" id="1332750">e</span><span class="op" id="1332751">.</span><span class="ident" id="1332752">Value</span><br>
<span class="lineno"></span><span class="op" id="1332758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="1332761">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="1332849">func</span>&nbsp;<span class="op" id="1332854">(</span><span class="ident" id="1332855">l</span>&nbsp;<span class="op" id="1332857">*</span><span class="ident" id="1332858">List</span><span class="op" id="1332862">)</span>&nbsp;<span class="ident" id="1332864">PushFront</span><span class="op" id="1332873">(</span><span class="ident" id="1332874">v</span>&nbsp;<span class="keyword" id="1332876">interface</span><span class="op" id="1332885">{</span><span class="op" id="1332886">}</span><span class="op" id="1332887">)</span>&nbsp;<span class="op" id="1332889">*</span><span class="ident" id="1332890">Element</span>&nbsp;<span class="op" id="1332898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1332901">l</span><span class="op" id="1332902">.</span><span class="ident" id="1332903">lazyInit</span><span class="op" id="1332911">(</span><span class="op" id="1332912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1332915">return</span>&nbsp;<span class="ident" id="1332922">l</span><span class="op" id="1332923">.</span><span class="ident" id="1332924">insertValue</span><span class="op" id="1332935">(</span><span class="ident" id="1332936">v</span><span class="op" id="1332937">,</span>&nbsp;<span class="op" id="1332939">&amp;</span><span class="ident" id="1332940">l</span><span class="op" id="1332941">.</span><span class="ident" id="1332942">root</span><span class="op" id="1332946">)</span><br>
<span class="lineno"></span><span class="op" id="1332948">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="1332951">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="1333037">func</span>&nbsp;<span class="op" id="1333042">(</span><span class="ident" id="1333043">l</span>&nbsp;<span class="op" id="1333045">*</span><span class="ident" id="1333046">List</span><span class="op" id="1333050">)</span>&nbsp;<span class="ident" id="1333052">PushBack</span><span class="op" id="1333060">(</span><span class="ident" id="1333061">v</span>&nbsp;<span class="keyword" id="1333063">interface</span><span class="op" id="1333072">{</span><span class="op" id="1333073">}</span><span class="op" id="1333074">)</span>&nbsp;<span class="op" id="1333076">*</span><span class="ident" id="1333077">Element</span>&nbsp;<span class="op" id="1333085">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1333088">l</span><span class="op" id="1333089">.</span><span class="ident" id="1333090">lazyInit</span><span class="op" id="1333098">(</span><span class="op" id="1333099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333102">return</span>&nbsp;<span class="ident" id="1333109">l</span><span class="op" id="1333110">.</span><span class="ident" id="1333111">insertValue</span><span class="op" id="1333122">(</span><span class="ident" id="1333123">v</span><span class="op" id="1333124">,</span>&nbsp;<span class="ident" id="1333126">l</span><span class="op" id="1333127">.</span><span class="ident" id="1333128">root</span><span class="op" id="1333132">.</span><span class="ident" id="1333133">prev</span><span class="op" id="1333137">)</span><br>
<span class="lineno">140</span><span class="op" id="1333139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1333142">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="1333234">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1333295">func</span>&nbsp;<span class="op" id="1333300">(</span><span class="ident" id="1333301">l</span>&nbsp;<span class="op" id="1333303">*</span><span class="ident" id="1333304">List</span><span class="op" id="1333308">)</span>&nbsp;<span class="ident" id="1333310">InsertBefore</span><span class="op" id="1333322">(</span><span class="ident" id="1333323">v</span>&nbsp;<span class="keyword" id="1333325">interface</span><span class="op" id="1333334">{</span><span class="op" id="1333335">}</span><span class="op" id="1333336">,</span>&nbsp;<span class="ident" id="1333338">mark</span>&nbsp;<span class="op" id="1333343">*</span><span class="ident" id="1333344">Element</span><span class="op" id="1333351">)</span>&nbsp;<span class="op" id="1333353">*</span><span class="ident" id="1333354">Element</span>&nbsp;<span class="op" id="1333362">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333365">if</span>&nbsp;<span class="ident" id="1333368">mark</span><span class="op" id="1333372">.</span><span class="ident" id="1333373">list</span>&nbsp;<span class="op" id="1333378">!=</span>&nbsp;<span class="ident" id="1333381">l</span>&nbsp;<span class="op" id="1333383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333387">return</span>&nbsp;<span class="builtintype" id="1333394">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1333399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1333402">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333459">return</span>&nbsp;<span class="ident" id="1333466">l</span><span class="op" id="1333467">.</span><span class="ident" id="1333468">insertValue</span><span class="op" id="1333479">(</span><span class="ident" id="1333480">v</span><span class="op" id="1333481">,</span>&nbsp;<span class="ident" id="1333483">mark</span><span class="op" id="1333487">.</span><span class="ident" id="1333488">prev</span><span class="op" id="1333492">)</span><br>
<span class="lineno">150</span><span class="op" id="1333494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1333497">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="1333587">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1333648">func</span>&nbsp;<span class="op" id="1333653">(</span><span class="ident" id="1333654">l</span>&nbsp;<span class="op" id="1333656">*</span><span class="ident" id="1333657">List</span><span class="op" id="1333661">)</span>&nbsp;<span class="ident" id="1333663">InsertAfter</span><span class="op" id="1333674">(</span><span class="ident" id="1333675">v</span>&nbsp;<span class="keyword" id="1333677">interface</span><span class="op" id="1333686">{</span><span class="op" id="1333687">}</span><span class="op" id="1333688">,</span>&nbsp;<span class="ident" id="1333690">mark</span>&nbsp;<span class="op" id="1333695">*</span><span class="ident" id="1333696">Element</span><span class="op" id="1333703">)</span>&nbsp;<span class="op" id="1333705">*</span><span class="ident" id="1333706">Element</span>&nbsp;<span class="op" id="1333714">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333717">if</span>&nbsp;<span class="ident" id="1333720">mark</span><span class="op" id="1333724">.</span><span class="ident" id="1333725">list</span>&nbsp;<span class="op" id="1333730">!=</span>&nbsp;<span class="ident" id="1333733">l</span>&nbsp;<span class="op" id="1333735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333739">return</span>&nbsp;<span class="builtintype" id="1333746">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1333751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1333754">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333811">return</span>&nbsp;<span class="ident" id="1333818">l</span><span class="op" id="1333819">.</span><span class="ident" id="1333820">insertValue</span><span class="op" id="1333831">(</span><span class="ident" id="1333832">v</span><span class="op" id="1333833">,</span>&nbsp;<span class="ident" id="1333835">mark</span><span class="op" id="1333839">)</span><br>
<span class="lineno">160</span><span class="op" id="1333841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1333844">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="1333899">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1333957">func</span>&nbsp;<span class="op" id="1333962">(</span><span class="ident" id="1333963">l</span>&nbsp;<span class="op" id="1333965">*</span><span class="ident" id="1333966">List</span><span class="op" id="1333970">)</span>&nbsp;<span class="ident" id="1333972">MoveToFront</span><span class="op" id="1333983">(</span><span class="ident" id="1333984">e</span>&nbsp;<span class="op" id="1333986">*</span><span class="ident" id="1333987">Element</span><span class="op" id="1333994">)</span>&nbsp;<span class="op" id="1333996">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1333999">if</span>&nbsp;<span class="ident" id="1334002">e</span><span class="op" id="1334003">.</span><span class="ident" id="1334004">list</span>&nbsp;<span class="op" id="1334009">!=</span>&nbsp;<span class="ident" id="1334012">l</span>&nbsp;<span class="op" id="1334014">||</span>&nbsp;<span class="ident" id="1334017">l</span><span class="op" id="1334018">.</span><span class="ident" id="1334019">root</span><span class="op" id="1334023">.</span><span class="ident" id="1334024">next</span>&nbsp;<span class="op" id="1334029">==</span>&nbsp;<span class="ident" id="1334032">e</span>&nbsp;<span class="op" id="1334034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334038">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1334046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1334049">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1334106">l</span><span class="op" id="1334107">.</span><span class="ident" id="1334108">insert</span><span class="op" id="1334114">(</span><span class="ident" id="1334115">l</span><span class="op" id="1334116">.</span><span class="ident" id="1334117">remove</span><span class="op" id="1334123">(</span><span class="ident" id="1334124">e</span><span class="op" id="1334125">)</span><span class="op" id="1334126">,</span>&nbsp;<span class="op" id="1334128">&amp;</span><span class="ident" id="1334129">l</span><span class="op" id="1334130">.</span><span class="ident" id="1334131">root</span><span class="op" id="1334135">)</span><br>
<span class="lineno">170</span><span class="op" id="1334137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1334140">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="1334193">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1334251">func</span>&nbsp;<span class="op" id="1334256">(</span><span class="ident" id="1334257">l</span>&nbsp;<span class="op" id="1334259">*</span><span class="ident" id="1334260">List</span><span class="op" id="1334264">)</span>&nbsp;<span class="ident" id="1334266">MoveToBack</span><span class="op" id="1334276">(</span><span class="ident" id="1334277">e</span>&nbsp;<span class="op" id="1334279">*</span><span class="ident" id="1334280">Element</span><span class="op" id="1334287">)</span>&nbsp;<span class="op" id="1334289">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334292">if</span>&nbsp;<span class="ident" id="1334295">e</span><span class="op" id="1334296">.</span><span class="ident" id="1334297">list</span>&nbsp;<span class="op" id="1334302">!=</span>&nbsp;<span class="ident" id="1334305">l</span>&nbsp;<span class="op" id="1334307">||</span>&nbsp;<span class="ident" id="1334310">l</span><span class="op" id="1334311">.</span><span class="ident" id="1334312">root</span><span class="op" id="1334316">.</span><span class="ident" id="1334317">prev</span>&nbsp;<span class="op" id="1334322">==</span>&nbsp;<span class="ident" id="1334325">e</span>&nbsp;<span class="op" id="1334327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334331">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1334339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1334342">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1334399">l</span><span class="op" id="1334400">.</span><span class="ident" id="1334401">insert</span><span class="op" id="1334407">(</span><span class="ident" id="1334408">l</span><span class="op" id="1334409">.</span><span class="ident" id="1334410">remove</span><span class="op" id="1334416">(</span><span class="ident" id="1334417">e</span><span class="op" id="1334418">)</span><span class="op" id="1334419">,</span>&nbsp;<span class="ident" id="1334421">l</span><span class="op" id="1334422">.</span><span class="ident" id="1334423">root</span><span class="op" id="1334427">.</span><span class="ident" id="1334428">prev</span><span class="op" id="1334432">)</span><br>
<span class="lineno">180</span><span class="op" id="1334434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1334437">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="1334500">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1334580">func</span>&nbsp;<span class="op" id="1334585">(</span><span class="ident" id="1334586">l</span>&nbsp;<span class="op" id="1334588">*</span><span class="ident" id="1334589">List</span><span class="op" id="1334593">)</span>&nbsp;<span class="ident" id="1334595">MoveBefore</span><span class="op" id="1334605">(</span><span class="ident" id="1334606">e</span><span class="op" id="1334607">,</span>&nbsp;<span class="ident" id="1334609">mark</span>&nbsp;<span class="op" id="1334614">*</span><span class="ident" id="1334615">Element</span><span class="op" id="1334622">)</span>&nbsp;<span class="op" id="1334624">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334627">if</span>&nbsp;<span class="ident" id="1334630">e</span><span class="op" id="1334631">.</span><span class="ident" id="1334632">list</span>&nbsp;<span class="op" id="1334637">!=</span>&nbsp;<span class="ident" id="1334640">l</span>&nbsp;<span class="op" id="1334642">||</span>&nbsp;<span class="ident" id="1334645">e</span>&nbsp;<span class="op" id="1334647">==</span>&nbsp;<span class="ident" id="1334650">mark</span>&nbsp;<span class="op" id="1334655">||</span>&nbsp;<span class="ident" id="1334658">mark</span><span class="op" id="1334662">.</span><span class="ident" id="1334663">list</span>&nbsp;<span class="op" id="1334668">!=</span>&nbsp;<span class="ident" id="1334671">l</span>&nbsp;<span class="op" id="1334673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334677">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1334685">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1334688">l</span><span class="op" id="1334689">.</span><span class="ident" id="1334690">insert</span><span class="op" id="1334696">(</span><span class="ident" id="1334697">l</span><span class="op" id="1334698">.</span><span class="ident" id="1334699">remove</span><span class="op" id="1334705">(</span><span class="ident" id="1334706">e</span><span class="op" id="1334707">)</span><span class="op" id="1334708">,</span>&nbsp;<span class="ident" id="1334710">mark</span><span class="op" id="1334714">.</span><span class="ident" id="1334715">prev</span><span class="op" id="1334719">)</span><br>
<span class="lineno"></span><span class="op" id="1334721">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="1334724">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="1334785">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="1334865">func</span>&nbsp;<span class="op" id="1334870">(</span><span class="ident" id="1334871">l</span>&nbsp;<span class="op" id="1334873">*</span><span class="ident" id="1334874">List</span><span class="op" id="1334878">)</span>&nbsp;<span class="ident" id="1334880">MoveAfter</span><span class="op" id="1334889">(</span><span class="ident" id="1334890">e</span><span class="op" id="1334891">,</span>&nbsp;<span class="ident" id="1334893">mark</span>&nbsp;<span class="op" id="1334898">*</span><span class="ident" id="1334899">Element</span><span class="op" id="1334906">)</span>&nbsp;<span class="op" id="1334908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334911">if</span>&nbsp;<span class="ident" id="1334914">e</span><span class="op" id="1334915">.</span><span class="ident" id="1334916">list</span>&nbsp;<span class="op" id="1334921">!=</span>&nbsp;<span class="ident" id="1334924">l</span>&nbsp;<span class="op" id="1334926">||</span>&nbsp;<span class="ident" id="1334929">e</span>&nbsp;<span class="op" id="1334931">==</span>&nbsp;<span class="ident" id="1334934">mark</span>&nbsp;<span class="op" id="1334939">||</span>&nbsp;<span class="ident" id="1334942">mark</span><span class="op" id="1334946">.</span><span class="ident" id="1334947">list</span>&nbsp;<span class="op" id="1334952">!=</span>&nbsp;<span class="ident" id="1334955">l</span>&nbsp;<span class="op" id="1334957">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1334961">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1334969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1334972">l</span><span class="op" id="1334973">.</span><span class="ident" id="1334974">insert</span><span class="op" id="1334980">(</span><span class="ident" id="1334981">l</span><span class="op" id="1334982">.</span><span class="ident" id="1334983">remove</span><span class="op" id="1334989">(</span><span class="ident" id="1334990">e</span><span class="op" id="1334991">)</span><span class="op" id="1334992">,</span>&nbsp;<span class="ident" id="1334994">mark</span><span class="op" id="1334998">)</span><br>
<span class="lineno"></span><span class="op" id="1335000">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="1335003">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="1335074">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="1335116">func</span>&nbsp;<span class="op" id="1335121">(</span><span class="ident" id="1335122">l</span>&nbsp;<span class="op" id="1335124">*</span><span class="ident" id="1335125">List</span><span class="op" id="1335129">)</span>&nbsp;<span class="ident" id="1335131">PushBackList</span><span class="op" id="1335143">(</span><span class="ident" id="1335144">other</span>&nbsp;<span class="op" id="1335150">*</span><span class="ident" id="1335151">List</span><span class="op" id="1335155">)</span>&nbsp;<span class="op" id="1335157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1335160">l</span><span class="op" id="1335161">.</span><span class="ident" id="1335162">lazyInit</span><span class="op" id="1335170">(</span><span class="op" id="1335171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1335174">for</span>&nbsp;<span class="ident" id="1335178">i</span><span class="op" id="1335179">,</span>&nbsp;<span class="ident" id="1335181">e</span>&nbsp;<span class="op" id="1335183">:=</span>&nbsp;<span class="ident" id="1335186">other</span><span class="op" id="1335191">.</span><span class="ident" id="1335192">Len</span><span class="op" id="1335195">(</span><span class="op" id="1335196">)</span><span class="op" id="1335197">,</span>&nbsp;<span class="ident" id="1335199">other</span><span class="op" id="1335204">.</span><span class="ident" id="1335205">Front</span><span class="op" id="1335210">(</span><span class="op" id="1335211">)</span><span class="op" id="1335212">;</span>&nbsp;<span class="ident" id="1335214">i</span>&nbsp;<span class="op" id="1335216">&gt;</span>&nbsp;<span class="num" id="1335218">0</span><span class="op" id="1335219">;</span>&nbsp;<span class="ident" id="1335221">i</span><span class="op" id="1335222">,</span>&nbsp;<span class="ident" id="1335224">e</span>&nbsp;<span class="op" id="1335226">=</span>&nbsp;<span class="ident" id="1335228">i</span><span class="op" id="1335229">-</span><span class="num" id="1335230">1</span><span class="op" id="1335231">,</span>&nbsp;<span class="ident" id="1335233">e</span><span class="op" id="1335234">.</span><span class="ident" id="1335235">Next</span><span class="op" id="1335239">(</span><span class="op" id="1335240">)</span>&nbsp;<span class="op" id="1335242">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1335246">l</span><span class="op" id="1335247">.</span><span class="ident" id="1335248">insertValue</span><span class="op" id="1335259">(</span><span class="ident" id="1335260">e</span><span class="op" id="1335261">.</span><span class="ident" id="1335262">Value</span><span class="op" id="1335267">,</span>&nbsp;<span class="ident" id="1335269">l</span><span class="op" id="1335270">.</span><span class="ident" id="1335271">root</span><span class="op" id="1335275">.</span><span class="ident" id="1335276">prev</span><span class="op" id="1335280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1335283">}</span><br>
<span class="lineno"></span><span class="op" id="1335285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1335288">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="1335361">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="1335403">func</span>&nbsp;<span class="op" id="1335408">(</span><span class="ident" id="1335409">l</span>&nbsp;<span class="op" id="1335411">*</span><span class="ident" id="1335412">List</span><span class="op" id="1335416">)</span>&nbsp;<span class="ident" id="1335418">PushFrontList</span><span class="op" id="1335431">(</span><span class="ident" id="1335432">other</span>&nbsp;<span class="op" id="1335438">*</span><span class="ident" id="1335439">List</span><span class="op" id="1335443">)</span>&nbsp;<span class="op" id="1335445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1335448">l</span><span class="op" id="1335449">.</span><span class="ident" id="1335450">lazyInit</span><span class="op" id="1335458">(</span><span class="op" id="1335459">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1335462">for</span>&nbsp;<span class="ident" id="1335466">i</span><span class="op" id="1335467">,</span>&nbsp;<span class="ident" id="1335469">e</span>&nbsp;<span class="op" id="1335471">:=</span>&nbsp;<span class="ident" id="1335474">other</span><span class="op" id="1335479">.</span><span class="ident" id="1335480">Len</span><span class="op" id="1335483">(</span><span class="op" id="1335484">)</span><span class="op" id="1335485">,</span>&nbsp;<span class="ident" id="1335487">other</span><span class="op" id="1335492">.</span><span class="ident" id="1335493">Back</span><span class="op" id="1335497">(</span><span class="op" id="1335498">)</span><span class="op" id="1335499">;</span>&nbsp;<span class="ident" id="1335501">i</span>&nbsp;<span class="op" id="1335503">&gt;</span>&nbsp;<span class="num" id="1335505">0</span><span class="op" id="1335506">;</span>&nbsp;<span class="ident" id="1335508">i</span><span class="op" id="1335509">,</span>&nbsp;<span class="ident" id="1335511">e</span>&nbsp;<span class="op" id="1335513">=</span>&nbsp;<span class="ident" id="1335515">i</span><span class="op" id="1335516">-</span><span class="num" id="1335517">1</span><span class="op" id="1335518">,</span>&nbsp;<span class="ident" id="1335520">e</span><span class="op" id="1335521">.</span><span class="ident" id="1335522">Prev</span><span class="op" id="1335526">(</span><span class="op" id="1335527">)</span>&nbsp;<span class="op" id="1335529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1335533">l</span><span class="op" id="1335534">.</span><span class="ident" id="1335535">insertValue</span><span class="op" id="1335546">(</span><span class="ident" id="1335547">e</span><span class="op" id="1335548">.</span><span class="ident" id="1335549">Value</span><span class="op" id="1335554">,</span>&nbsp;<span class="op" id="1335556">&amp;</span><span class="ident" id="1335557">l</span><span class="op" id="1335558">.</span><span class="ident" id="1335559">root</span><span class="op" id="1335563">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1335566">}</span><br>
<span class="lineno"></span><span class="op" id="1335568">}</span>
</div>
</body>
</html>
