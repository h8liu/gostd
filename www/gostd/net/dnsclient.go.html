<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3999982">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4000037">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4000091">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="4000142">package</span>&nbsp;<span class="ident" id="4000150">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4000155">import</span>&nbsp;<span class="op" id="4000162">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4000165">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4000178">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="4000185">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4000188">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="4000231">type</span>&nbsp;<span class="ident" id="4000236">DNSError</span>&nbsp;<span class="keyword" id="4000245">struct</span>&nbsp;<span class="op" id="4000252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000255">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4000265">string</span>&nbsp;<span class="comment" id="4000272">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000301">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4000311">string</span>&nbsp;<span class="comment" id="4000318">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000338">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4000348">string</span>&nbsp;<span class="comment" id="4000355">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000371">IsTimeout</span>&nbsp;<span class="builtintype" id="4000381">bool</span><br>
<span class="lineno"></span><span class="op" id="4000386">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="4000389">func</span>&nbsp;<span class="op" id="4000394">(</span><span class="ident" id="4000395">e</span>&nbsp;<span class="op" id="4000397">*</span><span class="ident" id="4000398">DNSError</span><span class="op" id="4000406">)</span>&nbsp;<span class="ident" id="4000408">Error</span><span class="op" id="4000413">(</span><span class="op" id="4000414">)</span>&nbsp;<span class="builtintype" id="4000416">string</span>&nbsp;<span class="op" id="4000423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000426">if</span>&nbsp;<span class="ident" id="4000429">e</span>&nbsp;<span class="op" id="4000431">==</span>&nbsp;<span class="ident" id="4000434">nil</span>&nbsp;<span class="op" id="4000438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000442">return</span>&nbsp;<span class="string" id="4000449">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4000458">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000461">s</span>&nbsp;<span class="op" id="4000463">:=</span>&nbsp;<span class="string" id="4000466">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="4000476">+</span>&nbsp;<span class="ident" id="4000478">e</span><span class="op" id="4000479">.</span><span class="ident" id="4000480">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000486">if</span>&nbsp;<span class="ident" id="4000489">e</span><span class="op" id="4000490">.</span><span class="ident" id="4000491">Server</span>&nbsp;<span class="op" id="4000498">!=</span>&nbsp;<span class="string" id="4000501">&#34;&#34;</span>&nbsp;<span class="op" id="4000504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000508">s</span>&nbsp;<span class="op" id="4000510">+=</span>&nbsp;<span class="string" id="4000513">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="4000520">+</span>&nbsp;<span class="ident" id="4000522">e</span><span class="op" id="4000523">.</span><span class="ident" id="4000524">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4000532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000535">s</span>&nbsp;<span class="op" id="4000537">+=</span>&nbsp;<span class="string" id="4000540">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="4000545">+</span>&nbsp;<span class="ident" id="4000547">e</span><span class="op" id="4000548">.</span><span class="ident" id="4000549">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000554">return</span>&nbsp;<span class="ident" id="4000561">s</span><br>
<span class="lineno">30</span><span class="op" id="4000563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4000566">func</span>&nbsp;<span class="op" id="4000571">(</span><span class="ident" id="4000572">e</span>&nbsp;<span class="op" id="4000574">*</span><span class="ident" id="4000575">DNSError</span><span class="op" id="4000583">)</span>&nbsp;<span class="ident" id="4000585">Timeout</span><span class="op" id="4000592">(</span><span class="op" id="4000593">)</span>&nbsp;<span class="builtintype" id="4000595">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4000602">{</span>&nbsp;<span class="keyword" id="4000604">return</span>&nbsp;<span class="ident" id="4000611">e</span><span class="op" id="4000612">.</span><span class="ident" id="4000613">IsTimeout</span>&nbsp;<span class="op" id="4000623">}</span><br>
<span class="lineno"></span><span class="keyword" id="4000625">func</span>&nbsp;<span class="op" id="4000630">(</span><span class="ident" id="4000631">e</span>&nbsp;<span class="op" id="4000633">*</span><span class="ident" id="4000634">DNSError</span><span class="op" id="4000642">)</span>&nbsp;<span class="ident" id="4000644">Temporary</span><span class="op" id="4000653">(</span><span class="op" id="4000654">)</span>&nbsp;<span class="builtintype" id="4000656">bool</span>&nbsp;<span class="op" id="4000661">{</span>&nbsp;<span class="keyword" id="4000663">return</span>&nbsp;<span class="ident" id="4000670">e</span><span class="op" id="4000671">.</span><span class="ident" id="4000672">IsTimeout</span>&nbsp;<span class="op" id="4000682">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="4000685">const</span>&nbsp;<span class="ident" id="4000691">noSuchHost</span>&nbsp;<span class="op" id="4000702">=</span>&nbsp;<span class="string" id="4000704">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4000720">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="4000793">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="4000871">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="4000899">func</span>&nbsp;<span class="ident" id="4000904">reverseaddr</span><span class="op" id="4000915">(</span><span class="ident" id="4000916">addr</span>&nbsp;<span class="builtintype" id="4000921">string</span><span class="op" id="4000927">)</span>&nbsp;<span class="op" id="4000929">(</span><span class="ident" id="4000930">arpa</span>&nbsp;<span class="builtintype" id="4000935">string</span><span class="op" id="4000941">,</span>&nbsp;<span class="ident" id="4000943">err</span>&nbsp;<span class="builtintype" id="4000947">error</span><span class="op" id="4000952">)</span>&nbsp;<span class="op" id="4000954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4000957">ip</span>&nbsp;<span class="op" id="4000960">:=</span>&nbsp;<span class="ident" id="4000963">ParseIP</span><span class="op" id="4000970">(</span><span class="ident" id="4000971">addr</span><span class="op" id="4000975">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000978">if</span>&nbsp;<span class="ident" id="4000981">ip</span>&nbsp;<span class="op" id="4000984">==</span>&nbsp;<span class="ident" id="4000987">nil</span>&nbsp;<span class="op" id="4000991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4000995">return</span>&nbsp;<span class="string" id="4001002">&#34;&#34;</span><span class="op" id="4001004">,</span>&nbsp;<span class="op" id="4001006">&amp;</span><span class="ident" id="4001007">DNSError</span><span class="op" id="4001015">{</span><span class="ident" id="4001016">Err</span><span class="op" id="4001019">:</span>&nbsp;<span class="string" id="4001021">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="4001043">,</span>&nbsp;<span class="ident" id="4001045">Name</span><span class="op" id="4001049">:</span>&nbsp;<span class="ident" id="4001051">addr</span><span class="op" id="4001055">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4001058">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001061">if</span>&nbsp;<span class="ident" id="4001064">ip</span><span class="op" id="4001066">.</span><span class="ident" id="4001067">To4</span><span class="op" id="4001070">(</span><span class="op" id="4001071">)</span>&nbsp;<span class="op" id="4001073">!=</span>&nbsp;<span class="ident" id="4001076">nil</span>&nbsp;<span class="op" id="4001080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001084">return</span>&nbsp;<span class="ident" id="4001091">itoa</span><span class="op" id="4001095">(</span><span class="builtintype" id="4001096">int</span><span class="op" id="4001099">(</span><span class="ident" id="4001100">ip</span><span class="op" id="4001102">[</span><span class="num" id="4001103">15</span><span class="op" id="4001105">]</span><span class="op" id="4001106">)</span><span class="op" id="4001107">)</span>&nbsp;<span class="op" id="4001109">+</span>&nbsp;<span class="string" id="4001111">&#34;.&#34;</span>&nbsp;<span class="op" id="4001115">+</span>&nbsp;<span class="ident" id="4001117">itoa</span><span class="op" id="4001121">(</span><span class="builtintype" id="4001122">int</span><span class="op" id="4001125">(</span><span class="ident" id="4001126">ip</span><span class="op" id="4001128">[</span><span class="num" id="4001129">14</span><span class="op" id="4001131">]</span><span class="op" id="4001132">)</span><span class="op" id="4001133">)</span>&nbsp;<span class="op" id="4001135">+</span>&nbsp;<span class="string" id="4001137">&#34;.&#34;</span>&nbsp;<span class="op" id="4001141">+</span>&nbsp;<span class="ident" id="4001143">itoa</span><span class="op" id="4001147">(</span><span class="builtintype" id="4001148">int</span><span class="op" id="4001151">(</span><span class="ident" id="4001152">ip</span><span class="op" id="4001154">[</span><span class="num" id="4001155">13</span><span class="op" id="4001157">]</span><span class="op" id="4001158">)</span><span class="op" id="4001159">)</span>&nbsp;<span class="op" id="4001161">+</span>&nbsp;<span class="string" id="4001163">&#34;.&#34;</span>&nbsp;<span class="op" id="4001167">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001172">itoa</span><span class="op" id="4001176">(</span><span class="builtintype" id="4001177">int</span><span class="op" id="4001180">(</span><span class="ident" id="4001181">ip</span><span class="op" id="4001183">[</span><span class="num" id="4001184">12</span><span class="op" id="4001186">]</span><span class="op" id="4001187">)</span><span class="op" id="4001188">)</span>&nbsp;<span class="op" id="4001190">+</span>&nbsp;<span class="string" id="4001192">&#34;.in-addr.arpa.&#34;</span><span class="op" id="4001208">,</span>&nbsp;<span class="ident" id="4001210">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4001215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4001218">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001235">buf</span>&nbsp;<span class="op" id="4001239">:=</span>&nbsp;<span class="builtinfunc" id="4001242">make</span><span class="op" id="4001246">(</span><span class="op" id="4001247">[</span><span class="op" id="4001248">]</span><span class="builtintype" id="4001249">byte</span><span class="op" id="4001253">,</span>&nbsp;<span class="num" id="4001255">0</span><span class="op" id="4001256">,</span>&nbsp;<span class="builtinfunc" id="4001258">len</span><span class="op" id="4001261">(</span><span class="ident" id="4001262">ip</span><span class="op" id="4001264">)</span><span class="op" id="4001265">*</span><span class="num" id="4001266">4</span><span class="op" id="4001267">+</span><span class="builtinfunc" id="4001268">len</span><span class="op" id="4001271">(</span><span class="string" id="4001272">&#34;ip6.arpa.&#34;</span><span class="op" id="4001283">)</span><span class="op" id="4001284">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4001287">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001325">for</span>&nbsp;<span class="ident" id="4001329">i</span>&nbsp;<span class="op" id="4001331">:=</span>&nbsp;<span class="builtinfunc" id="4001334">len</span><span class="op" id="4001337">(</span><span class="ident" id="4001338">ip</span><span class="op" id="4001340">)</span>&nbsp;<span class="op" id="4001342">-</span>&nbsp;<span class="num" id="4001344">1</span><span class="op" id="4001345">;</span>&nbsp;<span class="ident" id="4001347">i</span>&nbsp;<span class="op" id="4001349">&gt;=</span>&nbsp;<span class="num" id="4001352">0</span><span class="op" id="4001353">;</span>&nbsp;<span class="ident" id="4001355">i</span><span class="op" id="4001356">--</span>&nbsp;<span class="op" id="4001359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001363">v</span>&nbsp;<span class="op" id="4001365">:=</span>&nbsp;<span class="ident" id="4001368">ip</span><span class="op" id="4001370">[</span><span class="ident" id="4001371">i</span><span class="op" id="4001372">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001376">buf</span>&nbsp;<span class="op" id="4001380">=</span>&nbsp;<span class="builtinfunc" id="4001382">append</span><span class="op" id="4001388">(</span><span class="ident" id="4001389">buf</span><span class="op" id="4001392">,</span>&nbsp;<span class="ident" id="4001394">hexDigit</span><span class="op" id="4001402">[</span><span class="ident" id="4001403">v</span><span class="op" id="4001404">&amp;</span><span class="num" id="4001405">0xF</span><span class="op" id="4001408">]</span><span class="op" id="4001409">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001413">buf</span>&nbsp;<span class="op" id="4001417">=</span>&nbsp;<span class="builtinfunc" id="4001419">append</span><span class="op" id="4001425">(</span><span class="ident" id="4001426">buf</span><span class="op" id="4001429">,</span>&nbsp;<span class="string" id="4001431">&#39;.&#39;</span><span class="op" id="4001434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001438">buf</span>&nbsp;<span class="op" id="4001442">=</span>&nbsp;<span class="builtinfunc" id="4001444">append</span><span class="op" id="4001450">(</span><span class="ident" id="4001451">buf</span><span class="op" id="4001454">,</span>&nbsp;<span class="ident" id="4001456">hexDigit</span><span class="op" id="4001464">[</span><span class="ident" id="4001465">v</span><span class="op" id="4001466">&gt;&gt;</span><span class="num" id="4001468">4</span><span class="op" id="4001469">]</span><span class="op" id="4001470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001474">buf</span>&nbsp;<span class="op" id="4001478">=</span>&nbsp;<span class="builtinfunc" id="4001480">append</span><span class="op" id="4001486">(</span><span class="ident" id="4001487">buf</span><span class="op" id="4001490">,</span>&nbsp;<span class="string" id="4001492">&#39;.&#39;</span><span class="op" id="4001495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4001498">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4001501">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001565">buf</span>&nbsp;<span class="op" id="4001569">=</span>&nbsp;<span class="builtinfunc" id="4001571">append</span><span class="op" id="4001577">(</span><span class="ident" id="4001578">buf</span><span class="op" id="4001581">,</span>&nbsp;<span class="string" id="4001583">&#34;ip6.arpa.&#34;</span><span class="op" id="4001594">...</span><span class="op" id="4001597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001600">return</span>&nbsp;<span class="builtintype" id="4001607">string</span><span class="op" id="4001613">(</span><span class="ident" id="4001614">buf</span><span class="op" id="4001617">)</span><span class="op" id="4001618">,</span>&nbsp;<span class="ident" id="4001620">nil</span><br>
<span class="lineno"></span><span class="op" id="4001624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4001627">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="4001667">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4001710">func</span>&nbsp;<span class="ident" id="4001715">answer</span><span class="op" id="4001721">(</span><span class="ident" id="4001722">name</span><span class="op" id="4001726">,</span>&nbsp;<span class="ident" id="4001728">server</span>&nbsp;<span class="builtintype" id="4001735">string</span><span class="op" id="4001741">,</span>&nbsp;<span class="ident" id="4001743">dns</span>&nbsp;<span class="op" id="4001747">*</span><span class="ident" id="4001748">dnsMsg</span><span class="op" id="4001754">,</span>&nbsp;<span class="ident" id="4001756">qtype</span>&nbsp;<span class="builtintype" id="4001762">uint16</span><span class="op" id="4001768">)</span>&nbsp;<span class="op" id="4001770">(</span><span class="ident" id="4001771">cname</span>&nbsp;<span class="builtintype" id="4001777">string</span><span class="op" id="4001783">,</span>&nbsp;<span class="ident" id="4001785">addrs</span>&nbsp;<span class="op" id="4001791">[</span><span class="op" id="4001792">]</span><span class="ident" id="4001793">dnsRR</span><span class="op" id="4001798">,</span>&nbsp;<span class="ident" id="4001800">err</span>&nbsp;<span class="builtintype" id="4001804">error</span><span class="op" id="4001809">)</span>&nbsp;<span class="op" id="4001811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4001814">addrs</span>&nbsp;<span class="op" id="4001820">=</span>&nbsp;<span class="builtinfunc" id="4001822">make</span><span class="op" id="4001826">(</span><span class="op" id="4001827">[</span><span class="op" id="4001828">]</span><span class="ident" id="4001829">dnsRR</span><span class="op" id="4001834">,</span>&nbsp;<span class="num" id="4001836">0</span><span class="op" id="4001837">,</span>&nbsp;<span class="builtinfunc" id="4001839">len</span><span class="op" id="4001842">(</span><span class="ident" id="4001843">dns</span><span class="op" id="4001846">.</span><span class="ident" id="4001847">answer</span><span class="op" id="4001853">)</span><span class="op" id="4001854">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001858">if</span>&nbsp;<span class="ident" id="4001861">dns</span><span class="op" id="4001864">.</span><span class="ident" id="4001865">rcode</span>&nbsp;<span class="op" id="4001871">==</span>&nbsp;<span class="ident" id="4001874">dnsRcodeNameError</span>&nbsp;<span class="op" id="4001892">&amp;&amp;</span>&nbsp;<span class="ident" id="4001895">dns</span><span class="op" id="4001898">.</span><span class="ident" id="4001899">recursion_available</span>&nbsp;<span class="op" id="4001919">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001923">return</span>&nbsp;<span class="string" id="4001930">&#34;&#34;</span><span class="op" id="4001932">,</span>&nbsp;<span class="ident" id="4001934">nil</span><span class="op" id="4001937">,</span>&nbsp;<span class="op" id="4001939">&amp;</span><span class="ident" id="4001940">DNSError</span><span class="op" id="4001948">{</span><span class="ident" id="4001949">Err</span><span class="op" id="4001952">:</span>&nbsp;<span class="ident" id="4001954">noSuchHost</span><span class="op" id="4001964">,</span>&nbsp;<span class="ident" id="4001966">Name</span><span class="op" id="4001970">:</span>&nbsp;<span class="ident" id="4001972">name</span><span class="op" id="4001976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4001979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4001982">if</span>&nbsp;<span class="ident" id="4001985">dns</span><span class="op" id="4001988">.</span><span class="ident" id="4001989">rcode</span>&nbsp;<span class="op" id="4001995">!=</span>&nbsp;<span class="ident" id="4001998">dnsRcodeSuccess</span>&nbsp;<span class="op" id="4002014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002018">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002058">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002104">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002149">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002190">return</span>&nbsp;<span class="string" id="4002197">&#34;&#34;</span><span class="op" id="4002199">,</span>&nbsp;<span class="ident" id="4002201">nil</span><span class="op" id="4002204">,</span>&nbsp;<span class="op" id="4002206">&amp;</span><span class="ident" id="4002207">DNSError</span><span class="op" id="4002215">{</span><span class="ident" id="4002216">Err</span><span class="op" id="4002219">:</span>&nbsp;<span class="string" id="4002221">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="4002241">,</span>&nbsp;<span class="ident" id="4002243">Name</span><span class="op" id="4002247">:</span>&nbsp;<span class="ident" id="4002249">name</span><span class="op" id="4002253">,</span>&nbsp;<span class="ident" id="4002255">Server</span><span class="op" id="4002261">:</span>&nbsp;<span class="ident" id="4002263">server</span><span class="op" id="4002269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4002272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002276">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002299">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002360">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002406">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002461">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="4002508">Cname</span><span class="op" id="4002513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002516">for</span>&nbsp;<span class="ident" id="4002520">cnameloop</span>&nbsp;<span class="op" id="4002530">:=</span>&nbsp;<span class="num" id="4002533">0</span><span class="op" id="4002534">;</span>&nbsp;<span class="ident" id="4002536">cnameloop</span>&nbsp;<span class="op" id="4002546">&lt;</span>&nbsp;<span class="num" id="4002548">10</span><span class="op" id="4002550">;</span>&nbsp;<span class="ident" id="4002552">cnameloop</span><span class="op" id="4002561">++</span>&nbsp;<span class="op" id="4002564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4002568">addrs</span>&nbsp;<span class="op" id="4002574">=</span>&nbsp;<span class="ident" id="4002576">addrs</span><span class="op" id="4002581">[</span><span class="num" id="4002582">0</span><span class="op" id="4002583">:</span><span class="num" id="4002584">0</span><span class="op" id="4002585">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002589">for</span>&nbsp;<span class="ident" id="4002593">_</span><span class="op" id="4002594">,</span>&nbsp;<span class="ident" id="4002596">rr</span>&nbsp;<span class="op" id="4002599">:=</span>&nbsp;<span class="keyword" id="4002602">range</span>&nbsp;<span class="ident" id="4002608">dns</span><span class="op" id="4002611">.</span><span class="ident" id="4002612">answer</span>&nbsp;<span class="op" id="4002619">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002624">if</span>&nbsp;<span class="ident" id="4002627">_</span><span class="op" id="4002628">,</span>&nbsp;<span class="ident" id="4002630">justHeader</span>&nbsp;<span class="op" id="4002641">:=</span>&nbsp;<span class="ident" id="4002644">rr</span><span class="op" id="4002646">.</span><span class="op" id="4002647">(</span><span class="op" id="4002648">*</span><span class="ident" id="4002649">dnsRR_Header</span><span class="op" id="4002661">)</span><span class="op" id="4002662">;</span>&nbsp;<span class="ident" id="4002664">justHeader</span>&nbsp;<span class="op" id="4002675">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002681">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002719">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002761">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4002796">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002827">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4002839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4002844">h</span>&nbsp;<span class="op" id="4002846">:=</span>&nbsp;<span class="ident" id="4002849">rr</span><span class="op" id="4002851">.</span><span class="ident" id="4002852">Header</span><span class="op" id="4002858">(</span><span class="op" id="4002859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002864">if</span>&nbsp;<span class="ident" id="4002867">h</span><span class="op" id="4002868">.</span><span class="ident" id="4002869">Class</span>&nbsp;<span class="op" id="4002875">==</span>&nbsp;<span class="ident" id="4002878">dnsClassINET</span>&nbsp;<span class="op" id="4002891">&amp;&amp;</span>&nbsp;<span class="ident" id="4002894">h</span><span class="op" id="4002895">.</span><span class="ident" id="4002896">Name</span>&nbsp;<span class="op" id="4002901">==</span>&nbsp;<span class="ident" id="4002904">name</span>&nbsp;<span class="op" id="4002909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002915">switch</span>&nbsp;<span class="ident" id="4002922">h</span><span class="op" id="4002923">.</span><span class="ident" id="4002924">Rrtype</span>&nbsp;<span class="op" id="4002931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002937">case</span>&nbsp;<span class="ident" id="4002942">qtype</span><span class="op" id="4002947">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4002954">addrs</span>&nbsp;<span class="op" id="4002960">=</span>&nbsp;<span class="builtinfunc" id="4002962">append</span><span class="op" id="4002968">(</span><span class="ident" id="4002969">addrs</span><span class="op" id="4002974">,</span>&nbsp;<span class="ident" id="4002976">rr</span><span class="op" id="4002978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4002984">case</span>&nbsp;<span class="ident" id="4002989">dnsTypeCNAME</span><span class="op" id="4003001">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4003008">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003034">name</span>&nbsp;<span class="op" id="4003039">=</span>&nbsp;<span class="ident" id="4003041">rr</span><span class="op" id="4003043">.</span><span class="op" id="4003044">(</span><span class="op" id="4003045">*</span><span class="ident" id="4003046">dnsRR_CNAME</span><span class="op" id="4003057">)</span><span class="op" id="4003058">.</span><span class="ident" id="4003059">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003070">continue</span>&nbsp;<span class="ident" id="4003079">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003089">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003094">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003102">if</span>&nbsp;<span class="builtinfunc" id="4003105">len</span><span class="op" id="4003108">(</span><span class="ident" id="4003109">addrs</span><span class="op" id="4003114">)</span>&nbsp;<span class="op" id="4003116">==</span>&nbsp;<span class="num" id="4003119">0</span>&nbsp;<span class="op" id="4003121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003126">return</span>&nbsp;<span class="string" id="4003133">&#34;&#34;</span><span class="op" id="4003135">,</span>&nbsp;<span class="ident" id="4003137">nil</span><span class="op" id="4003140">,</span>&nbsp;<span class="op" id="4003142">&amp;</span><span class="ident" id="4003143">DNSError</span><span class="op" id="4003151">{</span><span class="ident" id="4003152">Err</span><span class="op" id="4003155">:</span>&nbsp;<span class="ident" id="4003157">noSuchHost</span><span class="op" id="4003167">,</span>&nbsp;<span class="ident" id="4003169">Name</span><span class="op" id="4003173">:</span>&nbsp;<span class="ident" id="4003175">name</span><span class="op" id="4003179">,</span>&nbsp;<span class="ident" id="4003181">Server</span><span class="op" id="4003187">:</span>&nbsp;<span class="ident" id="4003189">server</span><span class="op" id="4003195">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003203">return</span>&nbsp;<span class="ident" id="4003210">name</span><span class="op" id="4003214">,</span>&nbsp;<span class="ident" id="4003216">addrs</span><span class="op" id="4003221">,</span>&nbsp;<span class="ident" id="4003223">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003232">return</span>&nbsp;<span class="string" id="4003239">&#34;&#34;</span><span class="op" id="4003241">,</span>&nbsp;<span class="ident" id="4003243">nil</span><span class="op" id="4003246">,</span>&nbsp;<span class="op" id="4003248">&amp;</span><span class="ident" id="4003249">DNSError</span><span class="op" id="4003257">{</span><span class="ident" id="4003258">Err</span><span class="op" id="4003261">:</span>&nbsp;<span class="string" id="4003263">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="4003283">,</span>&nbsp;<span class="ident" id="4003285">Name</span><span class="op" id="4003289">:</span>&nbsp;<span class="ident" id="4003291">name</span><span class="op" id="4003295">,</span>&nbsp;<span class="ident" id="4003297">Server</span><span class="op" id="4003303">:</span>&nbsp;<span class="ident" id="4003305">server</span><span class="op" id="4003311">}</span><br>
<span class="lineno">115</span><span class="op" id="4003313">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4003316">func</span>&nbsp;<span class="ident" id="4003321">isDomainName</span><span class="op" id="4003333">(</span><span class="ident" id="4003334">s</span>&nbsp;<span class="builtintype" id="4003336">string</span><span class="op" id="4003342">)</span>&nbsp;<span class="builtintype" id="4003344">bool</span>&nbsp;<span class="op" id="4003349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4003352">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003380">if</span>&nbsp;<span class="builtinfunc" id="4003383">len</span><span class="op" id="4003386">(</span><span class="ident" id="4003387">s</span><span class="op" id="4003388">)</span>&nbsp;<span class="op" id="4003390">==</span>&nbsp;<span class="num" id="4003393">0</span>&nbsp;<span class="op" id="4003395">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003399">return</span>&nbsp;<span class="builtintype" id="4003406">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003416">if</span>&nbsp;<span class="builtinfunc" id="4003419">len</span><span class="op" id="4003422">(</span><span class="ident" id="4003423">s</span><span class="op" id="4003424">)</span>&nbsp;<span class="op" id="4003426">&gt;</span>&nbsp;<span class="num" id="4003428">255</span>&nbsp;<span class="op" id="4003432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003436">return</span>&nbsp;<span class="builtintype" id="4003443">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003450">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003454">last</span>&nbsp;<span class="op" id="4003459">:=</span>&nbsp;<span class="builtintype" id="4003462">byte</span><span class="op" id="4003466">(</span><span class="string" id="4003467">&#39;.&#39;</span><span class="op" id="4003470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003473">ok</span>&nbsp;<span class="op" id="4003476">:=</span>&nbsp;<span class="builtintype" id="4003479">false</span>&nbsp;<span class="comment" id="4003485">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003518">partlen</span>&nbsp;<span class="op" id="4003526">:=</span>&nbsp;<span class="num" id="4003529">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003532">for</span>&nbsp;<span class="ident" id="4003536">i</span>&nbsp;<span class="op" id="4003538">:=</span>&nbsp;<span class="num" id="4003541">0</span><span class="op" id="4003542">;</span>&nbsp;<span class="ident" id="4003544">i</span>&nbsp;<span class="op" id="4003546">&lt;</span>&nbsp;<span class="builtinfunc" id="4003548">len</span><span class="op" id="4003551">(</span><span class="ident" id="4003552">s</span><span class="op" id="4003553">)</span><span class="op" id="4003554">;</span>&nbsp;<span class="ident" id="4003556">i</span><span class="op" id="4003557">++</span>&nbsp;<span class="op" id="4003560">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003564">c</span>&nbsp;<span class="op" id="4003566">:=</span>&nbsp;<span class="ident" id="4003569">s</span><span class="op" id="4003570">[</span><span class="ident" id="4003571">i</span><span class="op" id="4003572">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003576">switch</span>&nbsp;<span class="op" id="4003583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003587">default</span><span class="op" id="4003594">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003599">return</span>&nbsp;<span class="builtintype" id="4003606">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003614">case</span>&nbsp;<span class="string" id="4003619">&#39;a&#39;</span>&nbsp;<span class="op" id="4003623">&lt;=</span>&nbsp;<span class="ident" id="4003626">c</span>&nbsp;<span class="op" id="4003628">&amp;&amp;</span>&nbsp;<span class="ident" id="4003631">c</span>&nbsp;<span class="op" id="4003633">&lt;=</span>&nbsp;<span class="string" id="4003636">&#39;z&#39;</span>&nbsp;<span class="op" id="4003640">||</span>&nbsp;<span class="string" id="4003643">&#39;A&#39;</span>&nbsp;<span class="op" id="4003647">&lt;=</span>&nbsp;<span class="ident" id="4003650">c</span>&nbsp;<span class="op" id="4003652">&amp;&amp;</span>&nbsp;<span class="ident" id="4003655">c</span>&nbsp;<span class="op" id="4003657">&lt;=</span>&nbsp;<span class="string" id="4003660">&#39;Z&#39;</span>&nbsp;<span class="op" id="4003664">||</span>&nbsp;<span class="ident" id="4003667">c</span>&nbsp;<span class="op" id="4003669">==</span>&nbsp;<span class="string" id="4003672">&#39;_&#39;</span><span class="op" id="4003675">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003680">ok</span>&nbsp;<span class="op" id="4003683">=</span>&nbsp;<span class="builtintype" id="4003685">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003693">partlen</span><span class="op" id="4003700">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003705">case</span>&nbsp;<span class="string" id="4003710">&#39;0&#39;</span>&nbsp;<span class="op" id="4003714">&lt;=</span>&nbsp;<span class="ident" id="4003717">c</span>&nbsp;<span class="op" id="4003719">&amp;&amp;</span>&nbsp;<span class="ident" id="4003722">c</span>&nbsp;<span class="op" id="4003724">&lt;=</span>&nbsp;<span class="string" id="4003727">&#39;9&#39;</span><span class="op" id="4003730">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4003735">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003746">partlen</span><span class="op" id="4003753">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003758">case</span>&nbsp;<span class="ident" id="4003763">c</span>&nbsp;<span class="op" id="4003765">==</span>&nbsp;<span class="string" id="4003768">&#39;-&#39;</span><span class="op" id="4003771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4003776">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003814">if</span>&nbsp;<span class="ident" id="4003817">last</span>&nbsp;<span class="op" id="4003822">==</span>&nbsp;<span class="string" id="4003825">&#39;.&#39;</span>&nbsp;<span class="op" id="4003829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003835">return</span>&nbsp;<span class="builtintype" id="4003842">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003851">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4003856">partlen</span><span class="op" id="4003863">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003868">case</span>&nbsp;<span class="ident" id="4003873">c</span>&nbsp;<span class="op" id="4003875">==</span>&nbsp;<span class="string" id="4003878">&#39;.&#39;</span><span class="op" id="4003881">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4003886">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003929">if</span>&nbsp;<span class="ident" id="4003932">last</span>&nbsp;<span class="op" id="4003937">==</span>&nbsp;<span class="string" id="4003940">&#39;.&#39;</span>&nbsp;<span class="op" id="4003944">||</span>&nbsp;<span class="ident" id="4003947">last</span>&nbsp;<span class="op" id="4003952">==</span>&nbsp;<span class="string" id="4003955">&#39;-&#39;</span>&nbsp;<span class="op" id="4003959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003965">return</span>&nbsp;<span class="builtintype" id="4003972">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4003981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4003986">if</span>&nbsp;<span class="ident" id="4003989">partlen</span>&nbsp;<span class="op" id="4003997">&gt;</span>&nbsp;<span class="num" id="4003999">63</span>&nbsp;<span class="op" id="4004002">||</span>&nbsp;<span class="ident" id="4004005">partlen</span>&nbsp;<span class="op" id="4004013">==</span>&nbsp;<span class="num" id="4004016">0</span>&nbsp;<span class="op" id="4004018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004024">return</span>&nbsp;<span class="builtintype" id="4004031">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004045">partlen</span>&nbsp;<span class="op" id="4004053">=</span>&nbsp;<span class="num" id="4004055">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004063">last</span>&nbsp;<span class="op" id="4004068">=</span>&nbsp;<span class="ident" id="4004070">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004076">if</span>&nbsp;<span class="ident" id="4004079">last</span>&nbsp;<span class="op" id="4004084">==</span>&nbsp;<span class="string" id="4004087">&#39;-&#39;</span>&nbsp;<span class="op" id="4004091">||</span>&nbsp;<span class="ident" id="4004094">partlen</span>&nbsp;<span class="op" id="4004102">&gt;</span>&nbsp;<span class="num" id="4004104">63</span>&nbsp;<span class="op" id="4004107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004111">return</span>&nbsp;<span class="builtintype" id="4004118">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004129">return</span>&nbsp;<span class="ident" id="4004136">ok</span><br>
<span class="lineno"></span><span class="op" id="4004139">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="4004142">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4004188">type</span>&nbsp;<span class="ident" id="4004193">SRV</span>&nbsp;<span class="keyword" id="4004197">struct</span>&nbsp;<span class="op" id="4004204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004207">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4004216">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004224">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4004233">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004241">Priority</span>&nbsp;<span class="builtintype" id="4004250">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004258">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4004267">uint16</span><br>
<span class="lineno"></span><span class="op" id="4004274">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4004277">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="4004349">type</span>&nbsp;<span class="ident" id="4004354">byPriorityWeight</span>&nbsp;<span class="op" id="4004371">[</span><span class="op" id="4004372">]</span><span class="op" id="4004373">*</span><span class="ident" id="4004374">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="4004379">func</span>&nbsp;<span class="op" id="4004384">(</span><span class="ident" id="4004385">s</span>&nbsp;<span class="ident" id="4004387">byPriorityWeight</span><span class="op" id="4004403">)</span>&nbsp;<span class="ident" id="4004405">Len</span><span class="op" id="4004408">(</span><span class="op" id="4004409">)</span>&nbsp;<span class="builtintype" id="4004411">int</span>&nbsp;<span class="op" id="4004415">{</span>&nbsp;<span class="keyword" id="4004417">return</span>&nbsp;<span class="builtinfunc" id="4004424">len</span><span class="op" id="4004427">(</span><span class="ident" id="4004428">s</span><span class="op" id="4004429">)</span>&nbsp;<span class="op" id="4004431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4004434">func</span>&nbsp;<span class="op" id="4004439">(</span><span class="ident" id="4004440">s</span>&nbsp;<span class="ident" id="4004442">byPriorityWeight</span><span class="op" id="4004458">)</span>&nbsp;<span class="ident" id="4004460">Swap</span><span class="op" id="4004464">(</span><span class="ident" id="4004465">i</span><span class="op" id="4004466">,</span>&nbsp;<span class="ident" id="4004468">j</span>&nbsp;<span class="builtintype" id="4004470">int</span><span class="op" id="4004473">)</span>&nbsp;<span class="op" id="4004475">{</span>&nbsp;<span class="ident" id="4004477">s</span><span class="op" id="4004478">[</span><span class="ident" id="4004479">i</span><span class="op" id="4004480">]</span><span class="op" id="4004481">,</span>&nbsp;<span class="ident" id="4004483">s</span><span class="op" id="4004484">[</span><span class="ident" id="4004485">j</span><span class="op" id="4004486">]</span>&nbsp;<span class="op" id="4004488">=</span>&nbsp;<span class="ident" id="4004490">s</span><span class="op" id="4004491">[</span><span class="ident" id="4004492">j</span><span class="op" id="4004493">]</span><span class="op" id="4004494">,</span>&nbsp;<span class="ident" id="4004496">s</span><span class="op" id="4004497">[</span><span class="ident" id="4004498">i</span><span class="op" id="4004499">]</span>&nbsp;<span class="op" id="4004501">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="4004504">func</span>&nbsp;<span class="op" id="4004509">(</span><span class="ident" id="4004510">s</span>&nbsp;<span class="ident" id="4004512">byPriorityWeight</span><span class="op" id="4004528">)</span>&nbsp;<span class="ident" id="4004530">Less</span><span class="op" id="4004534">(</span><span class="ident" id="4004535">i</span><span class="op" id="4004536">,</span>&nbsp;<span class="ident" id="4004538">j</span>&nbsp;<span class="builtintype" id="4004540">int</span><span class="op" id="4004543">)</span>&nbsp;<span class="builtintype" id="4004545">bool</span>&nbsp;<span class="op" id="4004550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004553">return</span>&nbsp;<span class="ident" id="4004560">s</span><span class="op" id="4004561">[</span><span class="ident" id="4004562">i</span><span class="op" id="4004563">]</span><span class="op" id="4004564">.</span><span class="ident" id="4004565">Priority</span>&nbsp;<span class="op" id="4004574">&lt;</span>&nbsp;<span class="ident" id="4004576">s</span><span class="op" id="4004577">[</span><span class="ident" id="4004578">j</span><span class="op" id="4004579">]</span><span class="op" id="4004580">.</span><span class="ident" id="4004581">Priority</span>&nbsp;<span class="op" id="4004590">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004595">(</span><span class="ident" id="4004596">s</span><span class="op" id="4004597">[</span><span class="ident" id="4004598">i</span><span class="op" id="4004599">]</span><span class="op" id="4004600">.</span><span class="ident" id="4004601">Priority</span>&nbsp;<span class="op" id="4004610">==</span>&nbsp;<span class="ident" id="4004613">s</span><span class="op" id="4004614">[</span><span class="ident" id="4004615">j</span><span class="op" id="4004616">]</span><span class="op" id="4004617">.</span><span class="ident" id="4004618">Priority</span>&nbsp;<span class="op" id="4004627">&amp;&amp;</span>&nbsp;<span class="ident" id="4004630">s</span><span class="op" id="4004631">[</span><span class="ident" id="4004632">i</span><span class="op" id="4004633">]</span><span class="op" id="4004634">.</span><span class="ident" id="4004635">Weight</span>&nbsp;<span class="op" id="4004642">&lt;</span>&nbsp;<span class="ident" id="4004644">s</span><span class="op" id="4004645">[</span><span class="ident" id="4004646">j</span><span class="op" id="4004647">]</span><span class="op" id="4004648">.</span><span class="ident" id="4004649">Weight</span><span class="op" id="4004655">)</span><br>
<span class="lineno"></span><span class="op" id="4004657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="4004660">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="4004730">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="4004756">func</span>&nbsp;<span class="op" id="4004761">(</span><span class="ident" id="4004762">addrs</span>&nbsp;<span class="ident" id="4004768">byPriorityWeight</span><span class="op" id="4004784">)</span>&nbsp;<span class="ident" id="4004786">shuffleByWeight</span><span class="op" id="4004801">(</span><span class="op" id="4004802">)</span>&nbsp;<span class="op" id="4004804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004807">sum</span>&nbsp;<span class="op" id="4004811">:=</span>&nbsp;<span class="num" id="4004814">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004817">for</span>&nbsp;<span class="ident" id="4004821">_</span><span class="op" id="4004822">,</span>&nbsp;<span class="ident" id="4004824">addr</span>&nbsp;<span class="op" id="4004829">:=</span>&nbsp;<span class="keyword" id="4004832">range</span>&nbsp;<span class="ident" id="4004838">addrs</span>&nbsp;<span class="op" id="4004844">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004848">sum</span>&nbsp;<span class="op" id="4004852">+=</span>&nbsp;<span class="builtintype" id="4004855">int</span><span class="op" id="4004858">(</span><span class="ident" id="4004859">addr</span><span class="op" id="4004863">.</span><span class="ident" id="4004864">Weight</span><span class="op" id="4004870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4004873">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004876">for</span>&nbsp;<span class="ident" id="4004880">sum</span>&nbsp;<span class="op" id="4004884">&gt;</span>&nbsp;<span class="num" id="4004886">0</span>&nbsp;<span class="op" id="4004888">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4004891">len</span><span class="op" id="4004894">(</span><span class="ident" id="4004895">addrs</span><span class="op" id="4004900">)</span>&nbsp;<span class="op" id="4004902">&gt;</span>&nbsp;<span class="num" id="4004904">1</span>&nbsp;<span class="op" id="4004906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004910">s</span>&nbsp;<span class="op" id="4004912">:=</span>&nbsp;<span class="num" id="4004915">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004919">n</span>&nbsp;<span class="op" id="4004921">:=</span>&nbsp;<span class="ident" id="4004924">rand</span><span class="op" id="4004928">.</span><span class="ident" id="4004929">Intn</span><span class="op" id="4004933">(</span><span class="ident" id="4004934">sum</span><span class="op" id="4004937">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004941">for</span>&nbsp;<span class="ident" id="4004945">i</span>&nbsp;<span class="op" id="4004947">:=</span>&nbsp;<span class="keyword" id="4004950">range</span>&nbsp;<span class="ident" id="4004956">addrs</span>&nbsp;<span class="op" id="4004962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4004967">s</span>&nbsp;<span class="op" id="4004969">+=</span>&nbsp;<span class="builtintype" id="4004972">int</span><span class="op" id="4004975">(</span><span class="ident" id="4004976">addrs</span><span class="op" id="4004981">[</span><span class="ident" id="4004982">i</span><span class="op" id="4004983">]</span><span class="op" id="4004984">.</span><span class="ident" id="4004985">Weight</span><span class="op" id="4004991">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4004996">if</span>&nbsp;<span class="ident" id="4004999">s</span>&nbsp;<span class="op" id="4005001">&gt;</span>&nbsp;<span class="ident" id="4005003">n</span>&nbsp;<span class="op" id="4005005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4005011">if</span>&nbsp;<span class="ident" id="4005014">i</span>&nbsp;<span class="op" id="4005016">&gt;</span>&nbsp;<span class="num" id="4005018">0</span>&nbsp;<span class="op" id="4005020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005027">addrs</span><span class="op" id="4005032">[</span><span class="num" id="4005033">0</span><span class="op" id="4005034">]</span><span class="op" id="4005035">,</span>&nbsp;<span class="ident" id="4005037">addrs</span><span class="op" id="4005042">[</span><span class="ident" id="4005043">i</span><span class="op" id="4005044">]</span>&nbsp;<span class="op" id="4005046">=</span>&nbsp;<span class="ident" id="4005048">addrs</span><span class="op" id="4005053">[</span><span class="ident" id="4005054">i</span><span class="op" id="4005055">]</span><span class="op" id="4005056">,</span>&nbsp;<span class="ident" id="4005058">addrs</span><span class="op" id="4005063">[</span><span class="num" id="4005064">0</span><span class="op" id="4005065">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4005077">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005086">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005090">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005094">sum</span>&nbsp;<span class="op" id="4005098">-=</span>&nbsp;<span class="builtintype" id="4005101">int</span><span class="op" id="4005104">(</span><span class="ident" id="4005105">addrs</span><span class="op" id="4005110">[</span><span class="num" id="4005111">0</span><span class="op" id="4005112">]</span><span class="op" id="4005113">.</span><span class="ident" id="4005114">Weight</span><span class="op" id="4005120">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005124">addrs</span>&nbsp;<span class="op" id="4005130">=</span>&nbsp;<span class="ident" id="4005132">addrs</span><span class="op" id="4005137">[</span><span class="num" id="4005138">1</span><span class="op" id="4005139">:</span><span class="op" id="4005140">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005143">}</span><br>
<span class="lineno"></span><span class="op" id="4005145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4005148">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="4005203">func</span>&nbsp;<span class="op" id="4005208">(</span><span class="ident" id="4005209">addrs</span>&nbsp;<span class="ident" id="4005215">byPriorityWeight</span><span class="op" id="4005231">)</span>&nbsp;<span class="ident" id="4005233">sort</span><span class="op" id="4005237">(</span><span class="op" id="4005238">)</span>&nbsp;<span class="op" id="4005240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005243">sort</span><span class="op" id="4005247">.</span><span class="ident" id="4005248">Sort</span><span class="op" id="4005252">(</span><span class="ident" id="4005253">addrs</span><span class="op" id="4005258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005261">i</span>&nbsp;<span class="op" id="4005263">:=</span>&nbsp;<span class="num" id="4005266">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4005269">for</span>&nbsp;<span class="ident" id="4005273">j</span>&nbsp;<span class="op" id="4005275">:=</span>&nbsp;<span class="num" id="4005278">1</span><span class="op" id="4005279">;</span>&nbsp;<span class="ident" id="4005281">j</span>&nbsp;<span class="op" id="4005283">&lt;</span>&nbsp;<span class="builtinfunc" id="4005285">len</span><span class="op" id="4005288">(</span><span class="ident" id="4005289">addrs</span><span class="op" id="4005294">)</span><span class="op" id="4005295">;</span>&nbsp;<span class="ident" id="4005297">j</span><span class="op" id="4005298">++</span>&nbsp;<span class="op" id="4005301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4005305">if</span>&nbsp;<span class="ident" id="4005308">addrs</span><span class="op" id="4005313">[</span><span class="ident" id="4005314">i</span><span class="op" id="4005315">]</span><span class="op" id="4005316">.</span><span class="ident" id="4005317">Priority</span>&nbsp;<span class="op" id="4005326">!=</span>&nbsp;<span class="ident" id="4005329">addrs</span><span class="op" id="4005334">[</span><span class="ident" id="4005335">j</span><span class="op" id="4005336">]</span><span class="op" id="4005337">.</span><span class="ident" id="4005338">Priority</span>&nbsp;<span class="op" id="4005347">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005352">addrs</span><span class="op" id="4005357">[</span><span class="ident" id="4005358">i</span><span class="op" id="4005359">:</span><span class="ident" id="4005360">j</span><span class="op" id="4005361">]</span><span class="op" id="4005362">.</span><span class="ident" id="4005363">shuffleByWeight</span><span class="op" id="4005378">(</span><span class="op" id="4005379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005384">i</span>&nbsp;<span class="op" id="4005386">=</span>&nbsp;<span class="ident" id="4005388">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005398">addrs</span><span class="op" id="4005403">[</span><span class="ident" id="4005404">i</span><span class="op" id="4005405">:</span><span class="op" id="4005406">]</span><span class="op" id="4005407">.</span><span class="ident" id="4005408">shuffleByWeight</span><span class="op" id="4005423">(</span><span class="op" id="4005424">)</span><br>
<span class="lineno">220</span><span class="op" id="4005426">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4005429">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4005473">type</span>&nbsp;<span class="ident" id="4005478">MX</span>&nbsp;<span class="keyword" id="4005481">struct</span>&nbsp;<span class="op" id="4005488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005491">Host</span>&nbsp;<span class="builtintype" id="4005496">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005504">Pref</span>&nbsp;<span class="builtintype" id="4005509">uint16</span><br>
<span class="lineno"></span><span class="op" id="4005516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4005519">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="4005588">type</span>&nbsp;<span class="ident" id="4005593">byPref</span>&nbsp;<span class="op" id="4005600">[</span><span class="op" id="4005601">]</span><span class="op" id="4005602">*</span><span class="ident" id="4005603">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="4005607">func</span>&nbsp;<span class="op" id="4005612">(</span><span class="ident" id="4005613">s</span>&nbsp;<span class="ident" id="4005615">byPref</span><span class="op" id="4005621">)</span>&nbsp;<span class="ident" id="4005623">Len</span><span class="op" id="4005626">(</span><span class="op" id="4005627">)</span>&nbsp;<span class="builtintype" id="4005629">int</span>&nbsp;<span class="op" id="4005633">{</span>&nbsp;<span class="keyword" id="4005635">return</span>&nbsp;<span class="builtinfunc" id="4005642">len</span><span class="op" id="4005645">(</span><span class="ident" id="4005646">s</span><span class="op" id="4005647">)</span>&nbsp;<span class="op" id="4005649">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4005652">func</span>&nbsp;<span class="op" id="4005657">(</span><span class="ident" id="4005658">s</span>&nbsp;<span class="ident" id="4005660">byPref</span><span class="op" id="4005666">)</span>&nbsp;<span class="ident" id="4005668">Less</span><span class="op" id="4005672">(</span><span class="ident" id="4005673">i</span><span class="op" id="4005674">,</span>&nbsp;<span class="ident" id="4005676">j</span>&nbsp;<span class="builtintype" id="4005678">int</span><span class="op" id="4005681">)</span>&nbsp;<span class="builtintype" id="4005683">bool</span>&nbsp;<span class="op" id="4005688">{</span>&nbsp;<span class="keyword" id="4005690">return</span>&nbsp;<span class="ident" id="4005697">s</span><span class="op" id="4005698">[</span><span class="ident" id="4005699">i</span><span class="op" id="4005700">]</span><span class="op" id="4005701">.</span><span class="ident" id="4005702">Pref</span>&nbsp;<span class="op" id="4005707">&lt;</span>&nbsp;<span class="ident" id="4005709">s</span><span class="op" id="4005710">[</span><span class="ident" id="4005711">j</span><span class="op" id="4005712">]</span><span class="op" id="4005713">.</span><span class="ident" id="4005714">Pref</span>&nbsp;<span class="op" id="4005719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="4005722">func</span>&nbsp;<span class="op" id="4005727">(</span><span class="ident" id="4005728">s</span>&nbsp;<span class="ident" id="4005730">byPref</span><span class="op" id="4005736">)</span>&nbsp;<span class="ident" id="4005738">Swap</span><span class="op" id="4005742">(</span><span class="ident" id="4005743">i</span><span class="op" id="4005744">,</span>&nbsp;<span class="ident" id="4005746">j</span>&nbsp;<span class="builtintype" id="4005748">int</span><span class="op" id="4005751">)</span>&nbsp;<span class="op" id="4005753">{</span>&nbsp;<span class="ident" id="4005755">s</span><span class="op" id="4005756">[</span><span class="ident" id="4005757">i</span><span class="op" id="4005758">]</span><span class="op" id="4005759">,</span>&nbsp;<span class="ident" id="4005761">s</span><span class="op" id="4005762">[</span><span class="ident" id="4005763">j</span><span class="op" id="4005764">]</span>&nbsp;<span class="op" id="4005766">=</span>&nbsp;<span class="ident" id="4005768">s</span><span class="op" id="4005769">[</span><span class="ident" id="4005770">j</span><span class="op" id="4005771">]</span><span class="op" id="4005772">,</span>&nbsp;<span class="ident" id="4005774">s</span><span class="op" id="4005775">[</span><span class="ident" id="4005776">i</span><span class="op" id="4005777">]</span>&nbsp;<span class="op" id="4005779">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4005782">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="4005836">func</span>&nbsp;<span class="op" id="4005841">(</span><span class="ident" id="4005842">s</span>&nbsp;<span class="ident" id="4005844">byPref</span><span class="op" id="4005850">)</span>&nbsp;<span class="ident" id="4005852">sort</span><span class="op" id="4005856">(</span><span class="op" id="4005857">)</span>&nbsp;<span class="op" id="4005859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4005862">for</span>&nbsp;<span class="ident" id="4005866">i</span>&nbsp;<span class="op" id="4005868">:=</span>&nbsp;<span class="keyword" id="4005871">range</span>&nbsp;<span class="ident" id="4005877">s</span>&nbsp;<span class="op" id="4005879">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005883">j</span>&nbsp;<span class="op" id="4005885">:=</span>&nbsp;<span class="ident" id="4005888">rand</span><span class="op" id="4005892">.</span><span class="ident" id="4005893">Intn</span><span class="op" id="4005897">(</span><span class="ident" id="4005898">i</span>&nbsp;<span class="op" id="4005900">+</span>&nbsp;<span class="num" id="4005902">1</span><span class="op" id="4005903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005907">s</span><span class="op" id="4005908">[</span><span class="ident" id="4005909">i</span><span class="op" id="4005910">]</span><span class="op" id="4005911">,</span>&nbsp;<span class="ident" id="4005913">s</span><span class="op" id="4005914">[</span><span class="ident" id="4005915">j</span><span class="op" id="4005916">]</span>&nbsp;<span class="op" id="4005918">=</span>&nbsp;<span class="ident" id="4005920">s</span><span class="op" id="4005921">[</span><span class="ident" id="4005922">j</span><span class="op" id="4005923">]</span><span class="op" id="4005924">,</span>&nbsp;<span class="ident" id="4005926">s</span><span class="op" id="4005927">[</span><span class="ident" id="4005928">i</span><span class="op" id="4005929">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4005932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4005935">sort</span><span class="op" id="4005939">.</span><span class="ident" id="4005940">Sort</span><span class="op" id="4005944">(</span><span class="ident" id="4005945">s</span><span class="op" id="4005946">)</span><br>
<span class="lineno"></span><span class="op" id="4005948">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="4005951">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="4005995">type</span>&nbsp;<span class="ident" id="4006000">NS</span>&nbsp;<span class="keyword" id="4006003">struct</span>&nbsp;<span class="op" id="4006010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4006013">Host</span>&nbsp;<span class="builtintype" id="4006018">string</span><br>
<span class="lineno"></span><span class="op" id="4006025">}</span>
</div>
</body>
</html>
