<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8119003">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8119058">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8119112">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8119163">package</span>&nbsp;<span class="ident" id="8119171">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8119176">import</span>&nbsp;<span class="op" id="8119183">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119186">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119192">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119205">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119211">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119222">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8119232">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="8119235">var</span>&nbsp;<span class="ident" id="8119239">filenames</span>&nbsp;<span class="op" id="8119249">=</span>&nbsp;<span class="op" id="8119251">[</span><span class="op" id="8119252">]</span><span class="builtintype" id="8119253">string</span><span class="op" id="8119259">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119262">&#34;../testdata/e.txt&#34;</span><span class="op" id="8119281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8119284">&#34;../testdata/pi.txt&#34;</span><span class="op" id="8119304">,</span><br>
<span class="lineno"></span><span class="op" id="8119306">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8119309">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="8119387">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="8119454">func</span>&nbsp;<span class="ident" id="8119459">testFile</span><span class="op" id="8119467">(</span><span class="ident" id="8119468">t</span>&nbsp;<span class="op" id="8119470">*</span><span class="ident" id="8119471">testing</span><span class="op" id="8119478">.</span><span class="ident" id="8119479">T</span><span class="op" id="8119480">,</span>&nbsp;<span class="ident" id="8119482">fn</span>&nbsp;<span class="builtintype" id="8119485">string</span><span class="op" id="8119491">,</span>&nbsp;<span class="ident" id="8119493">order</span>&nbsp;<span class="ident" id="8119499">Order</span><span class="op" id="8119504">,</span>&nbsp;<span class="ident" id="8119506">litWidth</span>&nbsp;<span class="builtintype" id="8119515">int</span><span class="op" id="8119518">)</span>&nbsp;<span class="op" id="8119520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8119523">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119560">golden</span><span class="op" id="8119566">,</span>&nbsp;<span class="ident" id="8119568">err</span>&nbsp;<span class="op" id="8119572">:=</span>&nbsp;<span class="ident" id="8119575">os</span><span class="op" id="8119577">.</span><span class="ident" id="8119578">Open</span><span class="op" id="8119582">(</span><span class="ident" id="8119583">fn</span><span class="op" id="8119585">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119588">if</span>&nbsp;<span class="ident" id="8119591">err</span>&nbsp;<span class="op" id="8119595">!=</span>&nbsp;<span class="ident" id="8119598">nil</span>&nbsp;<span class="op" id="8119602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119606">t</span><span class="op" id="8119607">.</span><span class="ident" id="8119608">Errorf</span><span class="op" id="8119614">(</span><span class="string" id="8119615">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8119646">,</span>&nbsp;<span class="ident" id="8119648">fn</span><span class="op" id="8119650">,</span>&nbsp;<span class="ident" id="8119652">order</span><span class="op" id="8119657">,</span>&nbsp;<span class="ident" id="8119659">litWidth</span><span class="op" id="8119667">,</span>&nbsp;<span class="ident" id="8119669">err</span><span class="op" id="8119672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119676">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119684">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119687">defer</span>&nbsp;<span class="ident" id="8119693">golden</span><span class="op" id="8119699">.</span><span class="ident" id="8119700">Close</span><span class="op" id="8119705">(</span><span class="op" id="8119706">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8119710">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119830">raw</span><span class="op" id="8119833">,</span>&nbsp;<span class="ident" id="8119835">err</span>&nbsp;<span class="op" id="8119839">:=</span>&nbsp;<span class="ident" id="8119842">os</span><span class="op" id="8119844">.</span><span class="ident" id="8119845">Open</span><span class="op" id="8119849">(</span><span class="ident" id="8119850">fn</span><span class="op" id="8119852">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119855">if</span>&nbsp;<span class="ident" id="8119858">err</span>&nbsp;<span class="op" id="8119862">!=</span>&nbsp;<span class="ident" id="8119865">nil</span>&nbsp;<span class="op" id="8119869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119873">t</span><span class="op" id="8119874">.</span><span class="ident" id="8119875">Errorf</span><span class="op" id="8119881">(</span><span class="string" id="8119882">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8119913">,</span>&nbsp;<span class="ident" id="8119915">fn</span><span class="op" id="8119917">,</span>&nbsp;<span class="ident" id="8119919">order</span><span class="op" id="8119924">,</span>&nbsp;<span class="ident" id="8119926">litWidth</span><span class="op" id="8119934">,</span>&nbsp;<span class="ident" id="8119936">err</span><span class="op" id="8119939">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119943">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8119951">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8119955">piper</span><span class="op" id="8119960">,</span>&nbsp;<span class="ident" id="8119962">pipew</span>&nbsp;<span class="op" id="8119968">:=</span>&nbsp;<span class="ident" id="8119971">io</span><span class="op" id="8119973">.</span><span class="ident" id="8119974">Pipe</span><span class="op" id="8119978">(</span><span class="op" id="8119979">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8119982">defer</span>&nbsp;<span class="ident" id="8119988">piper</span><span class="op" id="8119993">.</span><span class="ident" id="8119994">Close</span><span class="op" id="8119999">(</span><span class="op" id="8120000">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120003">go</span>&nbsp;<span class="keyword" id="8120006">func</span><span class="op" id="8120010">(</span><span class="op" id="8120011">)</span>&nbsp;<span class="op" id="8120013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120017">defer</span>&nbsp;<span class="ident" id="8120023">raw</span><span class="op" id="8120026">.</span><span class="ident" id="8120027">Close</span><span class="op" id="8120032">(</span><span class="op" id="8120033">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120037">defer</span>&nbsp;<span class="ident" id="8120043">pipew</span><span class="op" id="8120048">.</span><span class="ident" id="8120049">Close</span><span class="op" id="8120054">(</span><span class="op" id="8120055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120059">lzww</span>&nbsp;<span class="op" id="8120064">:=</span>&nbsp;<span class="ident" id="8120067">NewWriter</span><span class="op" id="8120076">(</span><span class="ident" id="8120077">pipew</span><span class="op" id="8120082">,</span>&nbsp;<span class="ident" id="8120084">order</span><span class="op" id="8120089">,</span>&nbsp;<span class="ident" id="8120091">litWidth</span><span class="op" id="8120099">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120103">defer</span>&nbsp;<span class="ident" id="8120109">lzww</span><span class="op" id="8120113">.</span><span class="ident" id="8120114">Close</span><span class="op" id="8120119">(</span><span class="op" id="8120120">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120124">var</span>&nbsp;<span class="ident" id="8120128">b</span>&nbsp;<span class="op" id="8120130">[</span><span class="num" id="8120131">4096</span><span class="op" id="8120135">]</span><span class="builtintype" id="8120136">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120143">for</span>&nbsp;<span class="op" id="8120147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120152">n</span><span class="op" id="8120153">,</span>&nbsp;<span class="ident" id="8120155">err0</span>&nbsp;<span class="op" id="8120160">:=</span>&nbsp;<span class="ident" id="8120163">raw</span><span class="op" id="8120166">.</span><span class="ident" id="8120167">Read</span><span class="op" id="8120171">(</span><span class="ident" id="8120172">b</span><span class="op" id="8120173">[</span><span class="op" id="8120174">:</span><span class="op" id="8120175">]</span><span class="op" id="8120176">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120181">if</span>&nbsp;<span class="ident" id="8120184">err0</span>&nbsp;<span class="op" id="8120189">!=</span>&nbsp;<span class="ident" id="8120192">nil</span>&nbsp;<span class="op" id="8120196">&amp;&amp;</span>&nbsp;<span class="ident" id="8120199">err0</span>&nbsp;<span class="op" id="8120204">!=</span>&nbsp;<span class="ident" id="8120207">io</span><span class="op" id="8120209">.</span><span class="ident" id="8120210">EOF</span>&nbsp;<span class="op" id="8120214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120220">t</span><span class="op" id="8120221">.</span><span class="ident" id="8120222">Errorf</span><span class="op" id="8120228">(</span><span class="string" id="8120229">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8120260">,</span>&nbsp;<span class="ident" id="8120262">fn</span><span class="op" id="8120264">,</span>&nbsp;<span class="ident" id="8120266">order</span><span class="op" id="8120271">,</span>&nbsp;<span class="ident" id="8120273">litWidth</span><span class="op" id="8120281">,</span>&nbsp;<span class="ident" id="8120283">err0</span><span class="op" id="8120287">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120293">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120308">_</span><span class="op" id="8120309">,</span>&nbsp;<span class="ident" id="8120311">err1</span>&nbsp;<span class="op" id="8120316">:=</span>&nbsp;<span class="ident" id="8120319">lzww</span><span class="op" id="8120323">.</span><span class="ident" id="8120324">Write</span><span class="op" id="8120329">(</span><span class="ident" id="8120330">b</span><span class="op" id="8120331">[</span><span class="op" id="8120332">:</span><span class="ident" id="8120333">n</span><span class="op" id="8120334">]</span><span class="op" id="8120335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120340">if</span>&nbsp;<span class="ident" id="8120343">err1</span>&nbsp;<span class="op" id="8120348">!=</span>&nbsp;<span class="ident" id="8120351">nil</span>&nbsp;<span class="op" id="8120355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120361">t</span><span class="op" id="8120362">.</span><span class="ident" id="8120363">Errorf</span><span class="op" id="8120369">(</span><span class="string" id="8120370">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8120401">,</span>&nbsp;<span class="ident" id="8120403">fn</span><span class="op" id="8120405">,</span>&nbsp;<span class="ident" id="8120407">order</span><span class="op" id="8120412">,</span>&nbsp;<span class="ident" id="8120414">litWidth</span><span class="op" id="8120422">,</span>&nbsp;<span class="ident" id="8120424">err1</span><span class="op" id="8120428">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120434">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120444">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120449">if</span>&nbsp;<span class="ident" id="8120452">err0</span>&nbsp;<span class="op" id="8120457">==</span>&nbsp;<span class="ident" id="8120460">io</span><span class="op" id="8120462">.</span><span class="ident" id="8120463">EOF</span>&nbsp;<span class="op" id="8120467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120473">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120482">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120489">}</span><span class="op" id="8120490">(</span><span class="op" id="8120491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120494">lzwr</span>&nbsp;<span class="op" id="8120499">:=</span>&nbsp;<span class="ident" id="8120502">NewReader</span><span class="op" id="8120511">(</span><span class="ident" id="8120512">piper</span><span class="op" id="8120517">,</span>&nbsp;<span class="ident" id="8120519">order</span><span class="op" id="8120524">,</span>&nbsp;<span class="ident" id="8120526">litWidth</span><span class="op" id="8120534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120537">defer</span>&nbsp;<span class="ident" id="8120543">lzwr</span><span class="op" id="8120547">.</span><span class="ident" id="8120548">Close</span><span class="op" id="8120553">(</span><span class="op" id="8120554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8120558">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120579">b0</span><span class="op" id="8120581">,</span>&nbsp;<span class="ident" id="8120583">err0</span>&nbsp;<span class="op" id="8120588">:=</span>&nbsp;<span class="ident" id="8120591">ioutil</span><span class="op" id="8120597">.</span><span class="ident" id="8120598">ReadAll</span><span class="op" id="8120605">(</span><span class="ident" id="8120606">golden</span><span class="op" id="8120612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120615">b1</span><span class="op" id="8120617">,</span>&nbsp;<span class="ident" id="8120619">err1</span>&nbsp;<span class="op" id="8120624">:=</span>&nbsp;<span class="ident" id="8120627">ioutil</span><span class="op" id="8120633">.</span><span class="ident" id="8120634">ReadAll</span><span class="op" id="8120641">(</span><span class="ident" id="8120642">lzwr</span><span class="op" id="8120646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120649">if</span>&nbsp;<span class="ident" id="8120652">err0</span>&nbsp;<span class="op" id="8120657">!=</span>&nbsp;<span class="ident" id="8120660">nil</span>&nbsp;<span class="op" id="8120664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120668">t</span><span class="op" id="8120669">.</span><span class="ident" id="8120670">Errorf</span><span class="op" id="8120676">(</span><span class="string" id="8120677">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8120708">,</span>&nbsp;<span class="ident" id="8120710">fn</span><span class="op" id="8120712">,</span>&nbsp;<span class="ident" id="8120714">order</span><span class="op" id="8120719">,</span>&nbsp;<span class="ident" id="8120721">litWidth</span><span class="op" id="8120729">,</span>&nbsp;<span class="ident" id="8120731">err0</span><span class="op" id="8120735">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120739">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120750">if</span>&nbsp;<span class="ident" id="8120753">err1</span>&nbsp;<span class="op" id="8120758">!=</span>&nbsp;<span class="ident" id="8120761">nil</span>&nbsp;<span class="op" id="8120765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120769">t</span><span class="op" id="8120770">.</span><span class="ident" id="8120771">Errorf</span><span class="op" id="8120777">(</span><span class="string" id="8120778">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="8120809">,</span>&nbsp;<span class="ident" id="8120811">fn</span><span class="op" id="8120813">,</span>&nbsp;<span class="ident" id="8120815">order</span><span class="op" id="8120820">,</span>&nbsp;<span class="ident" id="8120822">litWidth</span><span class="op" id="8120830">,</span>&nbsp;<span class="ident" id="8120832">err1</span><span class="op" id="8120836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120840">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120851">if</span>&nbsp;<span class="builtinfunc" id="8120854">len</span><span class="op" id="8120857">(</span><span class="ident" id="8120858">b1</span><span class="op" id="8120860">)</span>&nbsp;<span class="op" id="8120862">!=</span>&nbsp;<span class="builtinfunc" id="8120865">len</span><span class="op" id="8120868">(</span><span class="ident" id="8120869">b0</span><span class="op" id="8120871">)</span>&nbsp;<span class="op" id="8120873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8120877">t</span><span class="op" id="8120878">.</span><span class="ident" id="8120879">Errorf</span><span class="op" id="8120885">(</span><span class="string" id="8120886">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="8120939">,</span>&nbsp;<span class="ident" id="8120941">fn</span><span class="op" id="8120943">,</span>&nbsp;<span class="ident" id="8120945">order</span><span class="op" id="8120950">,</span>&nbsp;<span class="ident" id="8120952">litWidth</span><span class="op" id="8120960">,</span>&nbsp;<span class="builtinfunc" id="8120962">len</span><span class="op" id="8120965">(</span><span class="ident" id="8120966">b1</span><span class="op" id="8120968">)</span><span class="op" id="8120969">,</span>&nbsp;<span class="builtinfunc" id="8120971">len</span><span class="op" id="8120974">(</span><span class="ident" id="8120975">b0</span><span class="op" id="8120977">)</span><span class="op" id="8120978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120982">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8120990">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8120993">for</span>&nbsp;<span class="ident" id="8120997">i</span>&nbsp;<span class="op" id="8120999">:=</span>&nbsp;<span class="num" id="8121002">0</span><span class="op" id="8121003">;</span>&nbsp;<span class="ident" id="8121005">i</span>&nbsp;<span class="op" id="8121007">&lt;</span>&nbsp;<span class="builtinfunc" id="8121009">len</span><span class="op" id="8121012">(</span><span class="ident" id="8121013">b0</span><span class="op" id="8121015">)</span><span class="op" id="8121016">;</span>&nbsp;<span class="ident" id="8121018">i</span><span class="op" id="8121019">++</span>&nbsp;<span class="op" id="8121022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121026">if</span>&nbsp;<span class="ident" id="8121029">b1</span><span class="op" id="8121031">[</span><span class="ident" id="8121032">i</span><span class="op" id="8121033">]</span>&nbsp;<span class="op" id="8121035">!=</span>&nbsp;<span class="ident" id="8121038">b0</span><span class="op" id="8121040">[</span><span class="ident" id="8121041">i</span><span class="op" id="8121042">]</span>&nbsp;<span class="op" id="8121044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121049">t</span><span class="op" id="8121050">.</span><span class="ident" id="8121051">Errorf</span><span class="op" id="8121057">(</span><span class="string" id="8121058">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="8121121">,</span>&nbsp;<span class="ident" id="8121123">fn</span><span class="op" id="8121125">,</span>&nbsp;<span class="ident" id="8121127">order</span><span class="op" id="8121132">,</span>&nbsp;<span class="ident" id="8121134">litWidth</span><span class="op" id="8121142">,</span>&nbsp;<span class="ident" id="8121144">i</span><span class="op" id="8121145">,</span>&nbsp;<span class="ident" id="8121147">b1</span><span class="op" id="8121149">[</span><span class="ident" id="8121150">i</span><span class="op" id="8121151">]</span><span class="op" id="8121152">,</span>&nbsp;<span class="ident" id="8121154">b0</span><span class="op" id="8121156">[</span><span class="ident" id="8121157">i</span><span class="op" id="8121158">]</span><span class="op" id="8121159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121164">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121173">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121176">}</span><br>
<span class="lineno"></span><span class="op" id="8121178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121181">func</span>&nbsp;<span class="ident" id="8121186">TestWriter</span><span class="op" id="8121196">(</span><span class="ident" id="8121197">t</span>&nbsp;<span class="op" id="8121199">*</span><span class="ident" id="8121200">testing</span><span class="op" id="8121207">.</span><span class="ident" id="8121208">T</span><span class="op" id="8121209">)</span>&nbsp;<span class="op" id="8121211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121214">for</span>&nbsp;<span class="ident" id="8121218">_</span><span class="op" id="8121219">,</span>&nbsp;<span class="ident" id="8121221">filename</span>&nbsp;<span class="op" id="8121230">:=</span>&nbsp;<span class="keyword" id="8121233">range</span>&nbsp;<span class="ident" id="8121239">filenames</span>&nbsp;<span class="op" id="8121249">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121253">for</span>&nbsp;<span class="ident" id="8121257">_</span><span class="op" id="8121258">,</span>&nbsp;<span class="ident" id="8121260">order</span>&nbsp;<span class="op" id="8121266">:=</span>&nbsp;<span class="keyword" id="8121269">range</span>&nbsp;<span class="op" id="8121275">[</span><span class="op" id="8121276">...</span><span class="op" id="8121279">]</span><span class="ident" id="8121280">Order</span><span class="op" id="8121285">{</span><span class="ident" id="8121286">LSB</span><span class="op" id="8121289">,</span>&nbsp;<span class="ident" id="8121291">MSB</span><span class="op" id="8121294">}</span>&nbsp;<span class="op" id="8121296">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8121301">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121381">for</span>&nbsp;<span class="ident" id="8121385">_</span><span class="op" id="8121386">,</span>&nbsp;<span class="ident" id="8121388">litWidth</span>&nbsp;<span class="op" id="8121397">:=</span>&nbsp;<span class="keyword" id="8121400">range</span>&nbsp;<span class="op" id="8121406">[</span><span class="op" id="8121407">...</span><span class="op" id="8121410">]</span><span class="builtintype" id="8121411">int</span><span class="op" id="8121414">{</span><span class="num" id="8121415">6</span><span class="op" id="8121416">,</span>&nbsp;<span class="num" id="8121418">7</span><span class="op" id="8121419">,</span>&nbsp;<span class="num" id="8121421">8</span><span class="op" id="8121422">}</span>&nbsp;<span class="op" id="8121424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121430">testFile</span><span class="op" id="8121438">(</span><span class="ident" id="8121439">t</span><span class="op" id="8121440">,</span>&nbsp;<span class="ident" id="8121442">filename</span><span class="op" id="8121450">,</span>&nbsp;<span class="ident" id="8121452">order</span><span class="op" id="8121457">,</span>&nbsp;<span class="ident" id="8121459">litWidth</span><span class="op" id="8121467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121472">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121476">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121479">}</span><br>
<span class="lineno"></span><span class="op" id="8121481">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121484">func</span>&nbsp;<span class="ident" id="8121489">TestWriterReturnValues</span><span class="op" id="8121511">(</span><span class="ident" id="8121512">t</span>&nbsp;<span class="op" id="8121514">*</span><span class="ident" id="8121515">testing</span><span class="op" id="8121522">.</span><span class="ident" id="8121523">T</span><span class="op" id="8121524">)</span>&nbsp;<span class="op" id="8121526">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121529">w</span>&nbsp;<span class="op" id="8121531">:=</span>&nbsp;<span class="ident" id="8121534">NewWriter</span><span class="op" id="8121543">(</span><span class="ident" id="8121544">ioutil</span><span class="op" id="8121550">.</span><span class="ident" id="8121551">Discard</span><span class="op" id="8121558">,</span>&nbsp;<span class="ident" id="8121560">LSB</span><span class="op" id="8121563">,</span>&nbsp;<span class="num" id="8121565">8</span><span class="op" id="8121566">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121569">n</span><span class="op" id="8121570">,</span>&nbsp;<span class="ident" id="8121572">err</span>&nbsp;<span class="op" id="8121576">:=</span>&nbsp;<span class="ident" id="8121579">w</span><span class="op" id="8121580">.</span><span class="ident" id="8121581">Write</span><span class="op" id="8121586">(</span><span class="op" id="8121587">[</span><span class="op" id="8121588">]</span><span class="builtintype" id="8121589">byte</span><span class="op" id="8121593">(</span><span class="string" id="8121594">&#34;asdf&#34;</span><span class="op" id="8121600">)</span><span class="op" id="8121601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121604">if</span>&nbsp;<span class="ident" id="8121607">n</span>&nbsp;<span class="op" id="8121609">!=</span>&nbsp;<span class="num" id="8121612">4</span>&nbsp;<span class="op" id="8121614">||</span>&nbsp;<span class="ident" id="8121617">err</span>&nbsp;<span class="op" id="8121621">!=</span>&nbsp;<span class="ident" id="8121624">nil</span>&nbsp;<span class="op" id="8121628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121632">t</span><span class="op" id="8121633">.</span><span class="ident" id="8121634">Errorf</span><span class="op" id="8121640">(</span><span class="string" id="8121641">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="8121666">,</span>&nbsp;<span class="ident" id="8121668">n</span><span class="op" id="8121669">,</span>&nbsp;<span class="ident" id="8121671">err</span><span class="op" id="8121674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121677">}</span><br>
<span class="lineno">105</span><span class="op" id="8121679">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8121682">func</span>&nbsp;<span class="ident" id="8121687">benchmarkEncoder</span><span class="op" id="8121703">(</span><span class="ident" id="8121704">b</span>&nbsp;<span class="op" id="8121706">*</span><span class="ident" id="8121707">testing</span><span class="op" id="8121714">.</span><span class="ident" id="8121715">B</span><span class="op" id="8121716">,</span>&nbsp;<span class="ident" id="8121718">n</span>&nbsp;<span class="builtintype" id="8121720">int</span><span class="op" id="8121723">)</span>&nbsp;<span class="op" id="8121725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121728">b</span><span class="op" id="8121729">.</span><span class="ident" id="8121730">StopTimer</span><span class="op" id="8121739">(</span><span class="op" id="8121740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121743">b</span><span class="op" id="8121744">.</span><span class="ident" id="8121745">SetBytes</span><span class="op" id="8121753">(</span><span class="ident" id="8121754">int64</span><span class="op" id="8121759">(</span><span class="ident" id="8121760">n</span><span class="op" id="8121761">)</span><span class="op" id="8121762">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121765">buf0</span><span class="op" id="8121769">,</span>&nbsp;<span class="ident" id="8121771">err</span>&nbsp;<span class="op" id="8121775">:=</span>&nbsp;<span class="ident" id="8121778">ioutil</span><span class="op" id="8121784">.</span><span class="ident" id="8121785">ReadFile</span><span class="op" id="8121793">(</span><span class="string" id="8121794">&#34;../testdata/e.txt&#34;</span><span class="op" id="8121813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121816">if</span>&nbsp;<span class="ident" id="8121819">err</span>&nbsp;<span class="op" id="8121823">!=</span>&nbsp;<span class="ident" id="8121826">nil</span>&nbsp;<span class="op" id="8121830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121834">b</span><span class="op" id="8121835">.</span><span class="ident" id="8121836">Fatal</span><span class="op" id="8121841">(</span><span class="ident" id="8121842">err</span><span class="op" id="8121845">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121851">if</span>&nbsp;<span class="builtinfunc" id="8121854">len</span><span class="op" id="8121857">(</span><span class="ident" id="8121858">buf0</span><span class="op" id="8121862">)</span>&nbsp;<span class="op" id="8121864">==</span>&nbsp;<span class="num" id="8121867">0</span>&nbsp;<span class="op" id="8121869">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121873">b</span><span class="op" id="8121874">.</span><span class="ident" id="8121875">Fatalf</span><span class="op" id="8121881">(</span><span class="string" id="8121882">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="8121905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8121908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121911">buf1</span>&nbsp;<span class="op" id="8121916">:=</span>&nbsp;<span class="builtinfunc" id="8121919">make</span><span class="op" id="8121923">(</span><span class="op" id="8121924">[</span><span class="op" id="8121925">]</span><span class="builtintype" id="8121926">byte</span><span class="op" id="8121930">,</span>&nbsp;<span class="ident" id="8121932">n</span><span class="op" id="8121933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121936">for</span>&nbsp;<span class="ident" id="8121940">i</span>&nbsp;<span class="op" id="8121942">:=</span>&nbsp;<span class="num" id="8121945">0</span><span class="op" id="8121946">;</span>&nbsp;<span class="ident" id="8121948">i</span>&nbsp;<span class="op" id="8121950">&lt;</span>&nbsp;<span class="ident" id="8121952">n</span><span class="op" id="8121953">;</span>&nbsp;<span class="ident" id="8121955">i</span>&nbsp;<span class="op" id="8121957">+=</span>&nbsp;<span class="builtinfunc" id="8121960">len</span><span class="op" id="8121963">(</span><span class="ident" id="8121964">buf0</span><span class="op" id="8121968">)</span>&nbsp;<span class="op" id="8121970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8121974">if</span>&nbsp;<span class="builtinfunc" id="8121977">len</span><span class="op" id="8121980">(</span><span class="ident" id="8121981">buf0</span><span class="op" id="8121985">)</span>&nbsp;<span class="op" id="8121987">&gt;</span>&nbsp;<span class="ident" id="8121989">n</span><span class="op" id="8121990">-</span><span class="ident" id="8121991">i</span>&nbsp;<span class="op" id="8121993">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8121998">buf0</span>&nbsp;<span class="op" id="8122003">=</span>&nbsp;<span class="ident" id="8122005">buf0</span><span class="op" id="8122009">[</span><span class="op" id="8122010">:</span><span class="ident" id="8122011">n</span><span class="op" id="8122012">-</span><span class="ident" id="8122013">i</span><span class="op" id="8122014">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8122018">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8122022">copy</span><span class="op" id="8122026">(</span><span class="ident" id="8122027">buf1</span><span class="op" id="8122031">[</span><span class="ident" id="8122032">i</span><span class="op" id="8122033">:</span><span class="op" id="8122034">]</span><span class="op" id="8122035">,</span>&nbsp;<span class="ident" id="8122037">buf0</span><span class="op" id="8122041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8122044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122047">buf0</span>&nbsp;<span class="op" id="8122052">=</span>&nbsp;<span class="ident" id="8122054">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122059">runtime</span><span class="op" id="8122066">.</span><span class="ident" id="8122067">GC</span><span class="op" id="8122069">(</span><span class="op" id="8122070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122073">b</span><span class="op" id="8122074">.</span><span class="ident" id="8122075">StartTimer</span><span class="op" id="8122085">(</span><span class="op" id="8122086">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8122089">for</span>&nbsp;<span class="ident" id="8122093">i</span>&nbsp;<span class="op" id="8122095">:=</span>&nbsp;<span class="num" id="8122098">0</span><span class="op" id="8122099">;</span>&nbsp;<span class="ident" id="8122101">i</span>&nbsp;<span class="op" id="8122103">&lt;</span>&nbsp;<span class="ident" id="8122105">b</span><span class="op" id="8122106">.</span><span class="ident" id="8122107">N</span><span class="op" id="8122108">;</span>&nbsp;<span class="ident" id="8122110">i</span><span class="op" id="8122111">++</span>&nbsp;<span class="op" id="8122114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122118">w</span>&nbsp;<span class="op" id="8122120">:=</span>&nbsp;<span class="ident" id="8122123">NewWriter</span><span class="op" id="8122132">(</span><span class="ident" id="8122133">ioutil</span><span class="op" id="8122139">.</span><span class="ident" id="8122140">Discard</span><span class="op" id="8122147">,</span>&nbsp;<span class="ident" id="8122149">LSB</span><span class="op" id="8122152">,</span>&nbsp;<span class="num" id="8122154">8</span><span class="op" id="8122155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122159">w</span><span class="op" id="8122160">.</span><span class="ident" id="8122161">Write</span><span class="op" id="8122166">(</span><span class="ident" id="8122167">buf1</span><span class="op" id="8122171">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122175">w</span><span class="op" id="8122176">.</span><span class="ident" id="8122177">Close</span><span class="op" id="8122182">(</span><span class="op" id="8122183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8122186">}</span><br>
<span class="lineno"></span><span class="op" id="8122188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8122191">func</span>&nbsp;<span class="ident" id="8122196">BenchmarkEncoder1e4</span><span class="op" id="8122215">(</span><span class="ident" id="8122216">b</span>&nbsp;<span class="op" id="8122218">*</span><span class="ident" id="8122219">testing</span><span class="op" id="8122226">.</span><span class="ident" id="8122227">B</span><span class="op" id="8122228">)</span>&nbsp;<span class="op" id="8122230">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122233">benchmarkEncoder</span><span class="op" id="8122249">(</span><span class="ident" id="8122250">b</span><span class="op" id="8122251">,</span>&nbsp;<span class="num" id="8122253">1e4</span><span class="op" id="8122256">)</span><br>
<span class="lineno"></span><span class="op" id="8122258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8122261">func</span>&nbsp;<span class="ident" id="8122266">BenchmarkEncoder1e5</span><span class="op" id="8122285">(</span><span class="ident" id="8122286">b</span>&nbsp;<span class="op" id="8122288">*</span><span class="ident" id="8122289">testing</span><span class="op" id="8122296">.</span><span class="ident" id="8122297">B</span><span class="op" id="8122298">)</span>&nbsp;<span class="op" id="8122300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122303">benchmarkEncoder</span><span class="op" id="8122319">(</span><span class="ident" id="8122320">b</span><span class="op" id="8122321">,</span>&nbsp;<span class="num" id="8122323">1e5</span><span class="op" id="8122326">)</span><br>
<span class="lineno">140</span><span class="op" id="8122328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8122331">func</span>&nbsp;<span class="ident" id="8122336">BenchmarkEncoder1e6</span><span class="op" id="8122355">(</span><span class="ident" id="8122356">b</span>&nbsp;<span class="op" id="8122358">*</span><span class="ident" id="8122359">testing</span><span class="op" id="8122366">.</span><span class="ident" id="8122367">B</span><span class="op" id="8122368">)</span>&nbsp;<span class="op" id="8122370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8122373">benchmarkEncoder</span><span class="op" id="8122389">(</span><span class="ident" id="8122390">b</span><span class="op" id="8122391">,</span>&nbsp;<span class="num" id="8122393">1e6</span><span class="op" id="8122396">)</span><br>
<span class="lineno"></span><span class="op" id="8122398">}</span>
</div>
</body>
</html>
