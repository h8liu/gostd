<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3215627">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3215682">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3215736">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3215787">package</span>&nbsp;<span class="ident" id="3215795">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3215802">import</span>&nbsp;<span class="op" id="3215809">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3215812">&#34;image/color&#34;</span><br>
<span class="lineno"></span><span class="op" id="3215826">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="comment" id="3215829">//&nbsp;YCbCrSubsampleRatio&nbsp;is&nbsp;the&nbsp;chroma&nbsp;subsample&nbsp;ratio&nbsp;used&nbsp;in&nbsp;a&nbsp;YCbCr&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3215905">type</span>&nbsp;<span class="ident" id="3215910">YCbCrSubsampleRatio</span>&nbsp;<span class="builtintype" id="3215930">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3215935">const</span>&nbsp;<span class="op" id="3215941">(</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215944">YCbCrSubsampleRatio444</span>&nbsp;<span class="ident" id="3215967"><a href="/image/ycbcr.go.html#3215910">YCbCrSubsampleRatio</a></span>&nbsp;<span class="op" id="3215987">=</span>&nbsp;<span class="ident" id="3215989">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3215995">YCbCrSubsampleRatio422</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216019">YCbCrSubsampleRatio420</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3216043">YCbCrSubsampleRatio440</span><br>
<span class="lineno"></span><span class="op" id="3216066">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="3216069">func</span>&nbsp;<span class="op" id="3216074">(</span><span class="ident" id="3216075">s</span>&nbsp;<span class="ident" id="3216077"><a href="/image/ycbcr.go.html#3215910">YCbCrSubsampleRatio</a></span><span class="op" id="3216096">)</span>&nbsp;<span class="ident" id="3216098">String</span><span class="op" id="3216104">(</span><span class="op" id="3216105">)</span>&nbsp;<span class="builtintype" id="3216107">string</span>&nbsp;<span class="op" id="3216114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216117">switch</span>&nbsp;<span class="ident" id="3216124"><a href="/image/ycbcr.go.html#3216075">s</a></span>&nbsp;<span class="op" id="3216126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216129">case</span>&nbsp;<span class="ident" id="3216134"><a href="/image/ycbcr.go.html#3215944">YCbCrSubsampleRatio444</a></span><span class="op" id="3216156">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216160">return</span>&nbsp;<span class="string" id="3216167">&#34;YCbCrSubsampleRatio444&#34;</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216193">case</span>&nbsp;<span class="ident" id="3216198"><a href="/image/ycbcr.go.html#3215995">YCbCrSubsampleRatio422</a></span><span class="op" id="3216220">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216224">return</span>&nbsp;<span class="string" id="3216231">&#34;YCbCrSubsampleRatio422&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216257">case</span>&nbsp;<span class="ident" id="3216262"><a href="/image/ycbcr.go.html#3216019">YCbCrSubsampleRatio420</a></span><span class="op" id="3216284">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216288">return</span>&nbsp;<span class="string" id="3216295">&#34;YCbCrSubsampleRatio420&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216321">case</span>&nbsp;<span class="ident" id="3216326"><a href="/image/ycbcr.go.html#3216043">YCbCrSubsampleRatio440</a></span><span class="op" id="3216348">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216352">return</span>&nbsp;<span class="string" id="3216359">&#34;YCbCrSubsampleRatio440&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3216385">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3216388">return</span>&nbsp;<span class="string" id="3216395">&#34;YCbCrSubsampleRatioUnknown&#34;</span><br>
<span class="lineno"></span><span class="op" id="3216424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="3216427">//&nbsp;YCbCr&nbsp;is&nbsp;an&nbsp;in-memory&nbsp;image&nbsp;of&nbsp;Y&#39;CbCr&nbsp;colors.&nbsp;There&nbsp;is&nbsp;one&nbsp;Y&nbsp;sample&nbsp;per</span><br>
<span class="lineno"></span><span class="comment" id="3216502">//&nbsp;pixel,&nbsp;but&nbsp;each&nbsp;Cb&nbsp;and&nbsp;Cr&nbsp;sample&nbsp;can&nbsp;span&nbsp;one&nbsp;or&nbsp;more&nbsp;pixels.</span><br>
<span class="lineno"></span><span class="comment" id="3216567">//&nbsp;YStride&nbsp;is&nbsp;the&nbsp;Y&nbsp;slice&nbsp;index&nbsp;delta&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels.</span><br>
<span class="lineno"></span><span class="comment" id="3216641">//&nbsp;CStride&nbsp;is&nbsp;the&nbsp;Cb&nbsp;and&nbsp;Cr&nbsp;slice&nbsp;index&nbsp;delta&nbsp;between&nbsp;vertically&nbsp;adjacent&nbsp;pixels</span><br>
<span class="lineno"></span><span class="comment" id="3216722">//&nbsp;that&nbsp;map&nbsp;to&nbsp;separate&nbsp;chroma&nbsp;samples.</span><br>
<span class="lineno">40</span><span class="comment" id="3216762">//&nbsp;It&nbsp;is&nbsp;not&nbsp;an&nbsp;absolute&nbsp;requirement,&nbsp;but&nbsp;YStride&nbsp;and&nbsp;len(Y)&nbsp;are&nbsp;typically</span><br>
<span class="lineno"></span><span class="comment" id="3216837">//&nbsp;multiples&nbsp;of&nbsp;8,&nbsp;and:</span><br>
<span class="lineno"></span><span class="comment" id="3216861">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:4:4,&nbsp;CStride&nbsp;==&nbsp;YStride/1&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/1.</span><br>
<span class="lineno"></span><span class="comment" id="3216931">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:2:2,&nbsp;CStride&nbsp;==&nbsp;YStride/2&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/2.</span><br>
<span class="lineno"></span><span class="comment" id="3217001">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:2:0,&nbsp;CStride&nbsp;==&nbsp;YStride/2&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/4.</span><br>
<span class="lineno">45</span><span class="comment" id="3217071">//&nbsp;&nbsp;&nbsp;&nbspFor&nbsp;4:4:0,&nbsp;CStride&nbsp;==&nbsp;YStride/1&nbsp;&amp;&amp;&nbsp;len(Cb)&nbsp;==&nbsp;len(Cr)&nbsp;==&nbsp;len(Y)/2.</span><br>
<span class="lineno"></span><span class="keyword" id="3217141">type</span>&nbsp;<span class="ident" id="3217146">YCbCr</span>&nbsp;<span class="keyword" id="3217152">struct</span>&nbsp;<span class="op" id="3217159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217162">Y</span><span class="op" id="3217163">,</span>&nbsp;<span class="ident" id="3217165">Cb</span><span class="op" id="3217167">,</span>&nbsp;<span class="ident" id="3217169">Cr</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3217177">[</span><span class="op" id="3217178">]</span><span class="builtintype" id="3217179">uint8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217186">YStride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3217201">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217206">CStride</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3217221">int</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217226">SubsampleRatio</span>&nbsp;<span class="ident" id="3217241"><a href="/image/ycbcr.go.html#3215910">YCbCrSubsampleRatio</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217262">Rect</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3217277"><a href="/image/geom.go.html#3185229">Rectangle</a></span><br>
<span class="lineno"></span><span class="op" id="3217287">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3217290">func</span>&nbsp;<span class="op" id="3217295">(</span><span class="ident" id="3217296">p</span>&nbsp;<span class="op" id="3217298">*</span><span class="ident" id="3217299"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3217304">)</span>&nbsp;<span class="ident" id="3217306">ColorModel</span><span class="op" id="3217316">(</span><span class="op" id="3217317">)</span>&nbsp;<span class="ident" id="3217319"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217324">.</span><span class="ident" id="3217325">Model</span>&nbsp;<span class="op" id="3217331">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217334">return</span>&nbsp;<span class="ident" id="3217341"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217346">.</span><span class="ident" id="3217347">YCbCrModel</span><br>
<span class="lineno"></span><span class="op" id="3217358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3217361">func</span>&nbsp;<span class="op" id="3217366">(</span><span class="ident" id="3217367">p</span>&nbsp;<span class="op" id="3217369">*</span><span class="ident" id="3217370"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3217375">)</span>&nbsp;<span class="ident" id="3217377">Bounds</span><span class="op" id="3217383">(</span><span class="op" id="3217384">)</span>&nbsp;<span class="ident" id="3217386"><a href="/image/geom.go.html#3185229">Rectangle</a></span>&nbsp;<span class="op" id="3217396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217399">return</span>&nbsp;<span class="ident" id="3217406"><a href="/image/ycbcr.go.html#3217367">p</a></span><span class="op" id="3217407">.</span><span class="ident" id="3217408">Rect</span><br>
<span class="lineno">60</span><span class="op" id="3217413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3217416">func</span>&nbsp;<span class="op" id="3217421">(</span><span class="ident" id="3217422">p</span>&nbsp;<span class="op" id="3217424">*</span><span class="ident" id="3217425"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3217430">)</span>&nbsp;<span class="ident" id="3217432">At</span><span class="op" id="3217434">(</span><span class="ident" id="3217435">x</span><span class="op" id="3217436">,</span>&nbsp;<span class="ident" id="3217438">y</span>&nbsp;<span class="builtintype" id="3217440">int</span><span class="op" id="3217443">)</span>&nbsp;<span class="ident" id="3217445"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217450">.</span><span class="ident" id="3217451">Color</span>&nbsp;<span class="op" id="3217457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217460">return</span>&nbsp;<span class="ident" id="3217467"><a href="/image/ycbcr.go.html#3217422">p</a></span><span class="op" id="3217468">.</span><span class="ident" id="3217469">YCbCrAt</span><span class="op" id="3217476">(</span><span class="ident" id="3217477"><a href="/image/ycbcr.go.html#3217435">x</a></span><span class="op" id="3217478">,</span>&nbsp;<span class="ident" id="3217480"><a href="/image/ycbcr.go.html#3217438">y</a></span><span class="op" id="3217481">)</span><br>
<span class="lineno"></span><span class="op" id="3217483">}</span><br>
<span class="lineno">65</span><br>
<span class="lineno"></span><span class="keyword" id="3217486">func</span>&nbsp;<span class="op" id="3217491">(</span><span class="ident" id="3217492">p</span>&nbsp;<span class="op" id="3217494">*</span><span class="ident" id="3217495"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3217500">)</span>&nbsp;<span class="ident" id="3217502">YCbCrAt</span><span class="op" id="3217509">(</span><span class="ident" id="3217510">x</span><span class="op" id="3217511">,</span>&nbsp;<span class="ident" id="3217513">y</span>&nbsp;<span class="builtintype" id="3217515">int</span><span class="op" id="3217518">)</span>&nbsp;<span class="ident" id="3217520"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217525">.</span><span class="ident" id="3217526">YCbCr</span>&nbsp;<span class="op" id="3217532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217535">if</span>&nbsp;<span class="op" id="3217538">!</span><span class="op" id="3217539">(</span><span class="ident" id="3217540"><a href="/image/geom.go.html#3183668">Point</a></span><span class="op" id="3217545">{</span><span class="ident" id="3217546"><a href="/image/ycbcr.go.html#3217510">x</a></span><span class="op" id="3217547">,</span>&nbsp;<span class="ident" id="3217549"><a href="/image/ycbcr.go.html#3217513">y</a></span><span class="op" id="3217550">}</span><span class="op" id="3217551">.</span><span class="ident" id="3217552">In</span><span class="op" id="3217554">(</span><span class="ident" id="3217555"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217556">.</span><span class="ident" id="3217557">Rect</span><span class="op" id="3217561">)</span><span class="op" id="3217562">)</span>&nbsp;<span class="op" id="3217564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217568">return</span>&nbsp;<span class="ident" id="3217575"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217580">.</span><span class="ident" id="3217581">YCbCr</span><span class="op" id="3217586">{</span><span class="op" id="3217587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217590">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217593">yi</span>&nbsp;<span class="op" id="3217596">:=</span>&nbsp;<span class="ident" id="3217599"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217600">.</span><span class="ident" id="3217601">YOffset</span><span class="op" id="3217608">(</span><span class="ident" id="3217609"><a href="/image/ycbcr.go.html#3217510">x</a></span><span class="op" id="3217610">,</span>&nbsp;<span class="ident" id="3217612"><a href="/image/ycbcr.go.html#3217513">y</a></span><span class="op" id="3217613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217616">ci</span>&nbsp;<span class="op" id="3217619">:=</span>&nbsp;<span class="ident" id="3217622"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217623">.</span><span class="ident" id="3217624">COffset</span><span class="op" id="3217631">(</span><span class="ident" id="3217632"><a href="/image/ycbcr.go.html#3217510">x</a></span><span class="op" id="3217633">,</span>&nbsp;<span class="ident" id="3217635"><a href="/image/ycbcr.go.html#3217513">y</a></span><span class="op" id="3217636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217639">return</span>&nbsp;<span class="ident" id="3217646"><a href="/image/ycbcr.go.html#3215812">color</a></span><span class="op" id="3217651">.</span><span class="ident" id="3217652">YCbCr</span><span class="op" id="3217657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217661"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217662">.</span><span class="ident" id="3217663">Y</span><span class="op" id="3217664">[</span><span class="ident" id="3217665"><a href="/image/ycbcr.go.html#3217593">yi</a></span><span class="op" id="3217667">]</span><span class="op" id="3217668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217672"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217673">.</span><span class="ident" id="3217674">Cb</span><span class="op" id="3217676">[</span><span class="ident" id="3217677"><a href="/image/ycbcr.go.html#3217616">ci</a></span><span class="op" id="3217679">]</span><span class="op" id="3217680">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3217684"><a href="/image/ycbcr.go.html#3217492">p</a></span><span class="op" id="3217685">.</span><span class="ident" id="3217686">Cr</span><span class="op" id="3217688">[</span><span class="ident" id="3217689"><a href="/image/ycbcr.go.html#3217616">ci</a></span><span class="op" id="3217691">]</span><span class="op" id="3217692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3217695">}</span><br>
<span class="lineno"></span><span class="op" id="3217697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3217700">//&nbsp;YOffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Y&nbsp;that&nbsp;corresponds&nbsp;to</span><br>
<span class="lineno">80</span><span class="comment" id="3217775">//&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3217799">func</span>&nbsp;<span class="op" id="3217804">(</span><span class="ident" id="3217805">p</span>&nbsp;<span class="op" id="3217807">*</span><span class="ident" id="3217808"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3217813">)</span>&nbsp;<span class="ident" id="3217815">YOffset</span><span class="op" id="3217822">(</span><span class="ident" id="3217823">x</span><span class="op" id="3217824">,</span>&nbsp;<span class="ident" id="3217826">y</span>&nbsp;<span class="builtintype" id="3217828">int</span><span class="op" id="3217831">)</span>&nbsp;<span class="builtintype" id="3217833">int</span>&nbsp;<span class="op" id="3217837">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3217840">return</span>&nbsp;<span class="op" id="3217847">(</span><span class="ident" id="3217848"><a href="/image/ycbcr.go.html#3217826">y</a></span><span class="op" id="3217849">-</span><span class="ident" id="3217850"><a href="/image/ycbcr.go.html#3217805">p</a></span><span class="op" id="3217851">.</span><span class="ident" id="3217852">Rect</span><span class="op" id="3217856">.</span><span class="ident" id="3217857">Min</span><span class="op" id="3217860">.</span><span class="ident" id="3217861">Y</span><span class="op" id="3217862">)</span><span class="op" id="3217863">*</span><span class="ident" id="3217864"><a href="/image/ycbcr.go.html#3217805">p</a></span><span class="op" id="3217865">.</span><span class="ident" id="3217866">YStride</span>&nbsp;<span class="op" id="3217874">+</span>&nbsp;<span class="op" id="3217876">(</span><span class="ident" id="3217877"><a href="/image/ycbcr.go.html#3217823">x</a></span>&nbsp;<span class="op" id="3217879">-</span>&nbsp;<span class="ident" id="3217881"><a href="/image/ycbcr.go.html#3217805">p</a></span><span class="op" id="3217882">.</span><span class="ident" id="3217883">Rect</span><span class="op" id="3217887">.</span><span class="ident" id="3217888">Min</span><span class="op" id="3217891">.</span><span class="ident" id="3217892">X</span><span class="op" id="3217893">)</span><br>
<span class="lineno"></span><span class="op" id="3217895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="3217898">//&nbsp;COffset&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;Cb&nbsp;or&nbsp;Cr&nbsp;that&nbsp;corresponds</span><br>
<span class="lineno"></span><span class="comment" id="3217977">//&nbsp;to&nbsp;the&nbsp;pixel&nbsp;at&nbsp;(x,&nbsp;y).</span><br>
<span class="lineno"></span><span class="keyword" id="3218004">func</span>&nbsp;<span class="op" id="3218009">(</span><span class="ident" id="3218010">p</span>&nbsp;<span class="op" id="3218012">*</span><span class="ident" id="3218013"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3218018">)</span>&nbsp;<span class="ident" id="3218020">COffset</span><span class="op" id="3218027">(</span><span class="ident" id="3218028">x</span><span class="op" id="3218029">,</span>&nbsp;<span class="ident" id="3218031">y</span>&nbsp;<span class="builtintype" id="3218033">int</span><span class="op" id="3218036">)</span>&nbsp;<span class="builtintype" id="3218038">int</span>&nbsp;<span class="op" id="3218042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218045">switch</span>&nbsp;<span class="ident" id="3218052"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218053">.</span><span class="ident" id="3218054">SubsampleRatio</span>&nbsp;<span class="op" id="3218069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218072">case</span>&nbsp;<span class="ident" id="3218077"><a href="/image/ycbcr.go.html#3215995">YCbCrSubsampleRatio422</a></span><span class="op" id="3218099">:</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218103">return</span>&nbsp;<span class="op" id="3218110">(</span><span class="ident" id="3218111"><a href="/image/ycbcr.go.html#3218031">y</a></span><span class="op" id="3218112">-</span><span class="ident" id="3218113"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218114">.</span><span class="ident" id="3218115">Rect</span><span class="op" id="3218119">.</span><span class="ident" id="3218120">Min</span><span class="op" id="3218123">.</span><span class="ident" id="3218124">Y</span><span class="op" id="3218125">)</span><span class="op" id="3218126">*</span><span class="ident" id="3218127"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218128">.</span><span class="ident" id="3218129">CStride</span>&nbsp;<span class="op" id="3218137">+</span>&nbsp;<span class="op" id="3218139">(</span><span class="ident" id="3218140"><a href="/image/ycbcr.go.html#3218028">x</a></span><span class="op" id="3218141">/</span><span class="num" id="3218142">2</span>&nbsp;<span class="op" id="3218144">-</span>&nbsp;<span class="ident" id="3218146"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218147">.</span><span class="ident" id="3218148">Rect</span><span class="op" id="3218152">.</span><span class="ident" id="3218153">Min</span><span class="op" id="3218156">.</span><span class="ident" id="3218157">X</span><span class="op" id="3218158">/</span><span class="num" id="3218159">2</span><span class="op" id="3218160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218163">case</span>&nbsp;<span class="ident" id="3218168"><a href="/image/ycbcr.go.html#3216019">YCbCrSubsampleRatio420</a></span><span class="op" id="3218190">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218194">return</span>&nbsp;<span class="op" id="3218201">(</span><span class="ident" id="3218202"><a href="/image/ycbcr.go.html#3218031">y</a></span><span class="op" id="3218203">/</span><span class="num" id="3218204">2</span><span class="op" id="3218205">-</span><span class="ident" id="3218206"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218207">.</span><span class="ident" id="3218208">Rect</span><span class="op" id="3218212">.</span><span class="ident" id="3218213">Min</span><span class="op" id="3218216">.</span><span class="ident" id="3218217">Y</span><span class="op" id="3218218">/</span><span class="num" id="3218219">2</span><span class="op" id="3218220">)</span><span class="op" id="3218221">*</span><span class="ident" id="3218222"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218223">.</span><span class="ident" id="3218224">CStride</span>&nbsp;<span class="op" id="3218232">+</span>&nbsp;<span class="op" id="3218234">(</span><span class="ident" id="3218235"><a href="/image/ycbcr.go.html#3218028">x</a></span><span class="op" id="3218236">/</span><span class="num" id="3218237">2</span>&nbsp;<span class="op" id="3218239">-</span>&nbsp;<span class="ident" id="3218241"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218242">.</span><span class="ident" id="3218243">Rect</span><span class="op" id="3218247">.</span><span class="ident" id="3218248">Min</span><span class="op" id="3218251">.</span><span class="ident" id="3218252">X</span><span class="op" id="3218253">/</span><span class="num" id="3218254">2</span><span class="op" id="3218255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218258">case</span>&nbsp;<span class="ident" id="3218263"><a href="/image/ycbcr.go.html#3216043">YCbCrSubsampleRatio440</a></span><span class="op" id="3218285">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218289">return</span>&nbsp;<span class="op" id="3218296">(</span><span class="ident" id="3218297"><a href="/image/ycbcr.go.html#3218031">y</a></span><span class="op" id="3218298">/</span><span class="num" id="3218299">2</span><span class="op" id="3218300">-</span><span class="ident" id="3218301"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218302">.</span><span class="ident" id="3218303">Rect</span><span class="op" id="3218307">.</span><span class="ident" id="3218308">Min</span><span class="op" id="3218311">.</span><span class="ident" id="3218312">Y</span><span class="op" id="3218313">/</span><span class="num" id="3218314">2</span><span class="op" id="3218315">)</span><span class="op" id="3218316">*</span><span class="ident" id="3218317"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218318">.</span><span class="ident" id="3218319">CStride</span>&nbsp;<span class="op" id="3218327">+</span>&nbsp;<span class="op" id="3218329">(</span><span class="ident" id="3218330"><a href="/image/ycbcr.go.html#3218028">x</a></span>&nbsp;<span class="op" id="3218332">-</span>&nbsp;<span class="ident" id="3218334"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218335">.</span><span class="ident" id="3218336">Rect</span><span class="op" id="3218340">.</span><span class="ident" id="3218341">Min</span><span class="op" id="3218344">.</span><span class="ident" id="3218345">X</span><span class="op" id="3218346">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218352">//&nbsp;Default&nbsp;to&nbsp;4:4:4&nbsp;subsampling.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218386">return</span>&nbsp;<span class="op" id="3218393">(</span><span class="ident" id="3218394"><a href="/image/ycbcr.go.html#3218031">y</a></span><span class="op" id="3218395">-</span><span class="ident" id="3218396"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218397">.</span><span class="ident" id="3218398">Rect</span><span class="op" id="3218402">.</span><span class="ident" id="3218403">Min</span><span class="op" id="3218406">.</span><span class="ident" id="3218407">Y</span><span class="op" id="3218408">)</span><span class="op" id="3218409">*</span><span class="ident" id="3218410"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218411">.</span><span class="ident" id="3218412">CStride</span>&nbsp;<span class="op" id="3218420">+</span>&nbsp;<span class="op" id="3218422">(</span><span class="ident" id="3218423"><a href="/image/ycbcr.go.html#3218028">x</a></span>&nbsp;<span class="op" id="3218425">-</span>&nbsp;<span class="ident" id="3218427"><a href="/image/ycbcr.go.html#3218010">p</a></span><span class="op" id="3218428">.</span><span class="ident" id="3218429">Rect</span><span class="op" id="3218433">.</span><span class="ident" id="3218434">Min</span><span class="op" id="3218437">.</span><span class="ident" id="3218438">X</span><span class="op" id="3218439">)</span><br>
<span class="lineno"></span><span class="op" id="3218441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3218444">//&nbsp;SubImage&nbsp;returns&nbsp;an&nbsp;image&nbsp;representing&nbsp;the&nbsp;portion&nbsp;of&nbsp;the&nbsp;image&nbsp;p&nbsp;visible</span><br>
<span class="lineno"></span><span class="comment" id="3218521">//&nbsp;through&nbsp;r.&nbsp;The&nbsp;returned&nbsp;value&nbsp;shares&nbsp;pixels&nbsp;with&nbsp;the&nbsp;original&nbsp;image.</span><br>
<span class="lineno"></span><span class="keyword" id="3218593">func</span>&nbsp;<span class="op" id="3218598">(</span><span class="ident" id="3218599">p</span>&nbsp;<span class="op" id="3218601">*</span><span class="ident" id="3218602"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3218607">)</span>&nbsp;<span class="ident" id="3218609">SubImage</span><span class="op" id="3218617">(</span><span class="ident" id="3218618">r</span>&nbsp;<span class="ident" id="3218620"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3218629">)</span>&nbsp;<span class="ident" id="3218631"><a href="/image/image.go.html#3190140">Image</a></span>&nbsp;<span class="op" id="3218637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218640"><a href="/image/ycbcr.go.html#3218618">r</a></span>&nbsp;<span class="op" id="3218642">=</span>&nbsp;<span class="ident" id="3218644"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3218645">.</span><span class="ident" id="3218646">Intersect</span><span class="op" id="3218655">(</span><span class="ident" id="3218656"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3218657">.</span><span class="ident" id="3218658">Rect</span><span class="op" id="3218662">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218665">//&nbsp;If&nbsp;r1&nbsp;and&nbsp;r2&nbsp;are&nbsp;Rectangles,&nbsp;r1.Intersect(r2)&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;inside</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218746">//&nbsp;either&nbsp;r1&nbsp;or&nbsp;r2&nbsp;if&nbsp;the&nbsp;intersection&nbsp;is&nbsp;empty.&nbsp;Without&nbsp;explicitly&nbsp;checking&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3218828">//&nbsp;this,&nbsp;the&nbsp;Pix[i:]&nbsp;expression&nbsp;below&nbsp;can&nbsp;panic.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218878">if</span>&nbsp;<span class="ident" id="3218881"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3218882">.</span><span class="ident" id="3218883">Empty</span><span class="op" id="3218888">(</span><span class="op" id="3218889">)</span>&nbsp;<span class="op" id="3218891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3218895">return</span>&nbsp;<span class="op" id="3218902">&amp;</span><span class="ident" id="3218903"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3218908">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218913">SubsampleRatio</span><span class="op" id="3218927">:</span>&nbsp;<span class="ident" id="3218929"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3218930">.</span><span class="ident" id="3218931">SubsampleRatio</span><span class="op" id="3218945">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218949">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3218952">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218955">yi</span>&nbsp;<span class="op" id="3218958">:=</span>&nbsp;<span class="ident" id="3218961"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3218962">.</span><span class="ident" id="3218963">YOffset</span><span class="op" id="3218970">(</span><span class="ident" id="3218971"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3218972">.</span><span class="ident" id="3218973">Min</span><span class="op" id="3218976">.</span><span class="ident" id="3218977">X</span><span class="op" id="3218978">,</span>&nbsp;<span class="ident" id="3218980"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3218981">.</span><span class="ident" id="3218982">Min</span><span class="op" id="3218985">.</span><span class="ident" id="3218986">Y</span><span class="op" id="3218987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3218990">ci</span>&nbsp;<span class="op" id="3218993">:=</span>&nbsp;<span class="ident" id="3218996"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3218997">.</span><span class="ident" id="3218998">COffset</span><span class="op" id="3219005">(</span><span class="ident" id="3219006"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3219007">.</span><span class="ident" id="3219008">Min</span><span class="op" id="3219011">.</span><span class="ident" id="3219012">X</span><span class="op" id="3219013">,</span>&nbsp;<span class="ident" id="3219015"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3219016">.</span><span class="ident" id="3219017">Min</span><span class="op" id="3219020">.</span><span class="ident" id="3219021">Y</span><span class="op" id="3219022">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219025">return</span>&nbsp;<span class="op" id="3219032">&amp;</span><span class="ident" id="3219033"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3219038">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219042">Y</span><span class="op" id="3219043">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219058"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219059">.</span><span class="ident" id="3219060">Y</span><span class="op" id="3219061">[</span><span class="ident" id="3219062"><a href="/image/ycbcr.go.html#3218955">yi</a></span><span class="op" id="3219064">:</span><span class="op" id="3219065">]</span><span class="op" id="3219066">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219070">Cb</span><span class="op" id="3219072">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219086"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219087">.</span><span class="ident" id="3219088">Cb</span><span class="op" id="3219090">[</span><span class="ident" id="3219091"><a href="/image/ycbcr.go.html#3218990">ci</a></span><span class="op" id="3219093">:</span><span class="op" id="3219094">]</span><span class="op" id="3219095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219099">Cr</span><span class="op" id="3219101">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219115"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219116">.</span><span class="ident" id="3219117">Cr</span><span class="op" id="3219119">[</span><span class="ident" id="3219120"><a href="/image/ycbcr.go.html#3218990">ci</a></span><span class="op" id="3219122">:</span><span class="op" id="3219123">]</span><span class="op" id="3219124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219128">SubsampleRatio</span><span class="op" id="3219142">:</span>&nbsp;<span class="ident" id="3219144"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219145">.</span><span class="ident" id="3219146">SubsampleRatio</span><span class="op" id="3219160">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219164">YStride</span><span class="op" id="3219171">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219180"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219181">.</span><span class="ident" id="3219182">YStride</span><span class="op" id="3219189">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219193">CStride</span><span class="op" id="3219200">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219209"><a href="/image/ycbcr.go.html#3218599">p</a></span><span class="op" id="3219210">.</span><span class="ident" id="3219211">CStride</span><span class="op" id="3219218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219222">Rect</span><span class="op" id="3219226">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219238"><a href="/image/ycbcr.go.html#3218618">r</a></span><span class="op" id="3219239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219242">}</span><br>
<span class="lineno"></span><span class="op" id="3219244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span><span class="keyword" id="3219247">func</span>&nbsp;<span class="op" id="3219252">(</span><span class="ident" id="3219253">p</span>&nbsp;<span class="op" id="3219255">*</span><span class="ident" id="3219256"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3219261">)</span>&nbsp;<span class="ident" id="3219263">Opaque</span><span class="op" id="3219269">(</span><span class="op" id="3219270">)</span>&nbsp;<span class="builtintype" id="3219272">bool</span>&nbsp;<span class="op" id="3219277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219280">return</span>&nbsp;<span class="builtintype" id="3219287">true</span><br>
<span class="lineno"></span><span class="op" id="3219292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3219295">//&nbsp;NewYCbCr&nbsp;returns&nbsp;a&nbsp;new&nbsp;YCbCr&nbsp;with&nbsp;the&nbsp;given&nbsp;bounds&nbsp;and&nbsp;subsample&nbsp;ratio.</span><br>
<span class="lineno">130</span><span class="keyword" id="3219370">func</span>&nbsp;<span class="ident" id="3219375">NewYCbCr</span><span class="op" id="3219383">(</span><span class="ident" id="3219384">r</span>&nbsp;<span class="ident" id="3219386"><a href="/image/geom.go.html#3185229">Rectangle</a></span><span class="op" id="3219395">,</span>&nbsp;<span class="ident" id="3219397">subsampleRatio</span>&nbsp;<span class="ident" id="3219412"><a href="/image/ycbcr.go.html#3215910">YCbCrSubsampleRatio</a></span><span class="op" id="3219431">)</span>&nbsp;<span class="op" id="3219433">*</span><span class="ident" id="3219434"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span>&nbsp;<span class="op" id="3219440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219443">w</span><span class="op" id="3219444">,</span>&nbsp;<span class="ident" id="3219446">h</span><span class="op" id="3219447">,</span>&nbsp;<span class="ident" id="3219449">cw</span><span class="op" id="3219451">,</span>&nbsp;<span class="ident" id="3219453">ch</span>&nbsp;<span class="op" id="3219456">:=</span>&nbsp;<span class="ident" id="3219459"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219460">.</span><span class="ident" id="3219461">Dx</span><span class="op" id="3219463">(</span><span class="op" id="3219464">)</span><span class="op" id="3219465">,</span>&nbsp;<span class="ident" id="3219467"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219468">.</span><span class="ident" id="3219469">Dy</span><span class="op" id="3219471">(</span><span class="op" id="3219472">)</span><span class="op" id="3219473">,</span>&nbsp;<span class="num" id="3219475">0</span><span class="op" id="3219476">,</span>&nbsp;<span class="num" id="3219478">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219481">switch</span>&nbsp;<span class="ident" id="3219488"><a href="/image/ycbcr.go.html#3219397">subsampleRatio</a></span>&nbsp;<span class="op" id="3219503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219506">case</span>&nbsp;<span class="ident" id="3219511"><a href="/image/ycbcr.go.html#3215995">YCbCrSubsampleRatio422</a></span><span class="op" id="3219533">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219537"><a href="/image/ycbcr.go.html#3219449">cw</a></span>&nbsp;<span class="op" id="3219540">=</span>&nbsp;<span class="op" id="3219542">(</span><span class="ident" id="3219543"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219544">.</span><span class="ident" id="3219545">Max</span><span class="op" id="3219548">.</span><span class="ident" id="3219549">X</span><span class="op" id="3219550">+</span><span class="num" id="3219551">1</span><span class="op" id="3219552">)</span><span class="op" id="3219553">/</span><span class="num" id="3219554">2</span>&nbsp;<span class="op" id="3219556">-</span>&nbsp;<span class="ident" id="3219558"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219559">.</span><span class="ident" id="3219560">Min</span><span class="op" id="3219563">.</span><span class="ident" id="3219564">X</span><span class="op" id="3219565">/</span><span class="num" id="3219566">2</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219570"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219573">=</span>&nbsp;<span class="ident" id="3219575"><a href="/image/ycbcr.go.html#3219446">h</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219578">case</span>&nbsp;<span class="ident" id="3219583"><a href="/image/ycbcr.go.html#3216019">YCbCrSubsampleRatio420</a></span><span class="op" id="3219605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219609"><a href="/image/ycbcr.go.html#3219449">cw</a></span>&nbsp;<span class="op" id="3219612">=</span>&nbsp;<span class="op" id="3219614">(</span><span class="ident" id="3219615"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219616">.</span><span class="ident" id="3219617">Max</span><span class="op" id="3219620">.</span><span class="ident" id="3219621">X</span><span class="op" id="3219622">+</span><span class="num" id="3219623">1</span><span class="op" id="3219624">)</span><span class="op" id="3219625">/</span><span class="num" id="3219626">2</span>&nbsp;<span class="op" id="3219628">-</span>&nbsp;<span class="ident" id="3219630"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219631">.</span><span class="ident" id="3219632">Min</span><span class="op" id="3219635">.</span><span class="ident" id="3219636">X</span><span class="op" id="3219637">/</span><span class="num" id="3219638">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219642"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219645">=</span>&nbsp;<span class="op" id="3219647">(</span><span class="ident" id="3219648"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219649">.</span><span class="ident" id="3219650">Max</span><span class="op" id="3219653">.</span><span class="ident" id="3219654">Y</span><span class="op" id="3219655">+</span><span class="num" id="3219656">1</span><span class="op" id="3219657">)</span><span class="op" id="3219658">/</span><span class="num" id="3219659">2</span>&nbsp;<span class="op" id="3219661">-</span>&nbsp;<span class="ident" id="3219663"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219664">.</span><span class="ident" id="3219665">Min</span><span class="op" id="3219668">.</span><span class="ident" id="3219669">Y</span><span class="op" id="3219670">/</span><span class="num" id="3219671">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219674">case</span>&nbsp;<span class="ident" id="3219679"><a href="/image/ycbcr.go.html#3216043">YCbCrSubsampleRatio440</a></span><span class="op" id="3219701">:</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219705"><a href="/image/ycbcr.go.html#3219449">cw</a></span>&nbsp;<span class="op" id="3219708">=</span>&nbsp;<span class="ident" id="3219710"><a href="/image/ycbcr.go.html#3219443">w</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219714"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219717">=</span>&nbsp;<span class="op" id="3219719">(</span><span class="ident" id="3219720"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219721">.</span><span class="ident" id="3219722">Max</span><span class="op" id="3219725">.</span><span class="ident" id="3219726">Y</span><span class="op" id="3219727">+</span><span class="num" id="3219728">1</span><span class="op" id="3219729">)</span><span class="op" id="3219730">/</span><span class="num" id="3219731">2</span>&nbsp;<span class="op" id="3219733">-</span>&nbsp;<span class="ident" id="3219735"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3219736">.</span><span class="ident" id="3219737">Min</span><span class="op" id="3219740">.</span><span class="ident" id="3219741">Y</span><span class="op" id="3219742">/</span><span class="num" id="3219743">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219746">default</span><span class="op" id="3219753">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3219757">//&nbsp;Default&nbsp;to&nbsp;4:4:4&nbsp;subsampling.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219792"><a href="/image/ycbcr.go.html#3219449">cw</a></span>&nbsp;<span class="op" id="3219795">=</span>&nbsp;<span class="ident" id="3219797"><a href="/image/ycbcr.go.html#3219443">w</a></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219801"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219804">=</span>&nbsp;<span class="ident" id="3219806"><a href="/image/ycbcr.go.html#3219446">h</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3219809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219812">b</span>&nbsp;<span class="op" id="3219814">:=</span>&nbsp;<span class="builtinfunc" id="3219817">make</span><span class="op" id="3219821">(</span><span class="op" id="3219822">[</span><span class="op" id="3219823">]</span><span class="builtintype" id="3219824">byte</span><span class="op" id="3219828">,</span>&nbsp;<span class="ident" id="3219830"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219831">*</span><span class="ident" id="3219832"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219833">+</span><span class="num" id="3219834">2</span><span class="op" id="3219835">*</span><span class="ident" id="3219836"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3219838">*</span><span class="ident" id="3219839"><a href="/image/ycbcr.go.html#3219453">ch</a></span><span class="op" id="3219841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3219844">return</span>&nbsp;<span class="op" id="3219851">&amp;</span><span class="ident" id="3219852"><a href="/image/ycbcr.go.html#3217146">YCbCr</a></span><span class="op" id="3219857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219861">Y</span><span class="op" id="3219862">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219877"><a href="/image/ycbcr.go.html#3219812">b</a></span><span class="op" id="3219878">[</span><span class="op" id="3219879">:</span><span class="ident" id="3219880"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219881">*</span><span class="ident" id="3219882"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219883">]</span><span class="op" id="3219884">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219888">Cb</span><span class="op" id="3219890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219904"><a href="/image/ycbcr.go.html#3219812">b</a></span><span class="op" id="3219905">[</span><span class="ident" id="3219906"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219907">*</span><span class="ident" id="3219908"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219909">+</span><span class="num" id="3219910">0</span><span class="op" id="3219911">*</span><span class="ident" id="3219912"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3219914">*</span><span class="ident" id="3219915"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219918">:</span>&nbsp;<span class="ident" id="3219920"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219921">*</span><span class="ident" id="3219922"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219923">+</span><span class="num" id="3219924">1</span><span class="op" id="3219925">*</span><span class="ident" id="3219926"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3219928">*</span><span class="ident" id="3219929"><a href="/image/ycbcr.go.html#3219453">ch</a></span><span class="op" id="3219931">]</span><span class="op" id="3219932">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219936">Cr</span><span class="op" id="3219938">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3219952"><a href="/image/ycbcr.go.html#3219812">b</a></span><span class="op" id="3219953">[</span><span class="ident" id="3219954"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219955">*</span><span class="ident" id="3219956"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219957">+</span><span class="num" id="3219958">1</span><span class="op" id="3219959">*</span><span class="ident" id="3219960"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3219962">*</span><span class="ident" id="3219963"><a href="/image/ycbcr.go.html#3219453">ch</a></span>&nbsp;<span class="op" id="3219966">:</span>&nbsp;<span class="ident" id="3219968"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3219969">*</span><span class="ident" id="3219970"><a href="/image/ycbcr.go.html#3219446">h</a></span><span class="op" id="3219971">+</span><span class="num" id="3219972">2</span><span class="op" id="3219973">*</span><span class="ident" id="3219974"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3219976">*</span><span class="ident" id="3219977"><a href="/image/ycbcr.go.html#3219453">ch</a></span><span class="op" id="3219979">]</span><span class="op" id="3219980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3219984">SubsampleRatio</span><span class="op" id="3219998">:</span>&nbsp;<span class="ident" id="3220000"><a href="/image/ycbcr.go.html#3219397">subsampleRatio</a></span><span class="op" id="3220014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220018">YStride</span><span class="op" id="3220025">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3220034"><a href="/image/ycbcr.go.html#3219443">w</a></span><span class="op" id="3220035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220039">CStride</span><span class="op" id="3220046">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3220055"><a href="/image/ycbcr.go.html#3219449">cw</a></span><span class="op" id="3220057">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3220061">Rect</span><span class="op" id="3220065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3220077"><a href="/image/ycbcr.go.html#3219384">r</a></span><span class="op" id="3220078">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3220081">}</span><br>
<span class="lineno"></span><span class="op" id="3220083">}</span>
</div>
</body>
</html>
