<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html" class="current">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3414960">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3415016">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3415070">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3415121">package</span>&nbsp;<span class="ident" id="3415129">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3415135">//&nbsp;JSON&nbsp;value&nbsp;parser&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="3415171">//&nbsp;Just&nbsp;about&nbsp;at&nbsp;the&nbsp;limit&nbsp;of&nbsp;what&nbsp;is&nbsp;reasonable&nbsp;to&nbsp;write&nbsp;by&nbsp;hand.</span><br>
<span class="lineno"></span><span class="comment" id="3415238">//&nbsp;Some&nbsp;parts&nbsp;are&nbsp;a&nbsp;bit&nbsp;tedious,&nbsp;but&nbsp;overall&nbsp;it&nbsp;nicely&nbsp;factors&nbsp;out&nbsp;the</span><br>
<span class="lineno">10</span><span class="comment" id="3415309">//&nbsp;otherwise&nbsp;common&nbsp;code&nbsp;from&nbsp;the&nbsp;multiple&nbsp;scanning&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="3415371">//&nbsp;in&nbsp;this&nbsp;package&nbsp;(Compact,&nbsp;Indent,&nbsp;checkValid,&nbsp;nextValue,&nbsp;etc).</span><br>
<span class="lineno"></span><span class="comment" id="3415437">//</span><br>
<span class="lineno"></span><span class="comment" id="3415440">//&nbsp;This&nbsp;file&nbsp;starts&nbsp;with&nbsp;two&nbsp;simple&nbsp;examples&nbsp;using&nbsp;the&nbsp;scanner</span><br>
<span class="lineno"></span><span class="comment" id="3415503">//&nbsp;before&nbsp;diving&nbsp;into&nbsp;the&nbsp;scanner&nbsp;itself.</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="3415546">import</span>&nbsp;<span class="string" id="3415553">&#34;strconv&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3415564">//&nbsp;checkValid&nbsp;verifies&nbsp;that&nbsp;data&nbsp;is&nbsp;valid&nbsp;JSON-encoded&nbsp;data.</span><br>
<span class="lineno"></span><span class="comment" id="3415625">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;checkValid&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno">20</span><span class="keyword" id="3415692">func</span>&nbsp;<span class="ident" id="3415697">checkValid</span><span class="op" id="3415707">(</span><span class="ident" id="3415708">data</span>&nbsp;<span class="op" id="3415713">[</span><span class="op" id="3415714">]</span><span class="builtintype" id="3415715">byte</span><span class="op" id="3415719">,</span>&nbsp;<span class="ident" id="3415721">scan</span>&nbsp;<span class="op" id="3415726">*</span><span class="ident" id="3415727">scanner</span><span class="op" id="3415734">)</span>&nbsp;<span class="builtintype" id="3415736">error</span>&nbsp;<span class="op" id="3415742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3415745">scan</span><span class="op" id="3415749">.</span><span class="ident" id="3415750">reset</span><span class="op" id="3415755">(</span><span class="op" id="3415756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415759">for</span>&nbsp;<span class="ident" id="3415763">_</span><span class="op" id="3415764">,</span>&nbsp;<span class="ident" id="3415766">c</span>&nbsp;<span class="op" id="3415768">:=</span>&nbsp;<span class="keyword" id="3415771">range</span>&nbsp;<span class="ident" id="3415777">data</span>&nbsp;<span class="op" id="3415782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3415786">scan</span><span class="op" id="3415790">.</span><span class="ident" id="3415791">bytes</span><span class="op" id="3415796">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415801">if</span>&nbsp;<span class="ident" id="3415804">scan</span><span class="op" id="3415808">.</span><span class="ident" id="3415809">step</span><span class="op" id="3415813">(</span><span class="ident" id="3415814">scan</span><span class="op" id="3415818">,</span>&nbsp;<span class="builtintype" id="3415820">int</span><span class="op" id="3415823">(</span><span class="ident" id="3415824">c</span><span class="op" id="3415825">)</span><span class="op" id="3415826">)</span>&nbsp;<span class="op" id="3415828">==</span>&nbsp;<span class="ident" id="3415831">scanError</span>&nbsp;<span class="op" id="3415841">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415846">return</span>&nbsp;<span class="ident" id="3415853">scan</span><span class="op" id="3415857">.</span><span class="ident" id="3415858">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3415864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3415867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415870">if</span>&nbsp;<span class="ident" id="3415873">scan</span><span class="op" id="3415877">.</span><span class="ident" id="3415878">eof</span><span class="op" id="3415881">(</span><span class="op" id="3415882">)</span>&nbsp;<span class="op" id="3415884">==</span>&nbsp;<span class="ident" id="3415887">scanError</span>&nbsp;<span class="op" id="3415897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415901">return</span>&nbsp;<span class="ident" id="3415908">scan</span><span class="op" id="3415912">.</span><span class="ident" id="3415913">err</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3415918">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3415921">return</span>&nbsp;<span class="builtintype" id="3415928">nil</span><br>
<span class="lineno"></span><span class="op" id="3415932">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3415935">//&nbsp;nextValue&nbsp;splits&nbsp;data&nbsp;after&nbsp;the&nbsp;next&nbsp;whole&nbsp;JSON&nbsp;value,</span><br>
<span class="lineno">35</span><span class="comment" id="3415993">//&nbsp;returning&nbsp;that&nbsp;value&nbsp;and&nbsp;the&nbsp;bytes&nbsp;that&nbsp;follow&nbsp;it&nbsp;as&nbsp;separate&nbsp;slices.</span><br>
<span class="lineno"></span><span class="comment" id="3416066">//&nbsp;scan&nbsp;is&nbsp;passed&nbsp;in&nbsp;for&nbsp;use&nbsp;by&nbsp;nextValue&nbsp;to&nbsp;avoid&nbsp;an&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3416132">func</span>&nbsp;<span class="ident" id="3416137">nextValue</span><span class="op" id="3416146">(</span><span class="ident" id="3416147">data</span>&nbsp;<span class="op" id="3416152">[</span><span class="op" id="3416153">]</span><span class="builtintype" id="3416154">byte</span><span class="op" id="3416158">,</span>&nbsp;<span class="ident" id="3416160">scan</span>&nbsp;<span class="op" id="3416165">*</span><span class="ident" id="3416166">scanner</span><span class="op" id="3416173">)</span>&nbsp;<span class="op" id="3416175">(</span><span class="ident" id="3416176">value</span><span class="op" id="3416181">,</span>&nbsp;<span class="ident" id="3416183">rest</span>&nbsp;<span class="op" id="3416188">[</span><span class="op" id="3416189">]</span><span class="builtintype" id="3416190">byte</span><span class="op" id="3416194">,</span>&nbsp;<span class="ident" id="3416196">err</span>&nbsp;<span class="builtintype" id="3416200">error</span><span class="op" id="3416205">)</span>&nbsp;<span class="op" id="3416207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3416210">scan</span><span class="op" id="3416214">.</span><span class="ident" id="3416215">reset</span><span class="op" id="3416220">(</span><span class="op" id="3416221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416224">for</span>&nbsp;<span class="ident" id="3416228">i</span><span class="op" id="3416229">,</span>&nbsp;<span class="ident" id="3416231">c</span>&nbsp;<span class="op" id="3416233">:=</span>&nbsp;<span class="keyword" id="3416236">range</span>&nbsp;<span class="ident" id="3416242">data</span>&nbsp;<span class="op" id="3416247">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3416251">v</span>&nbsp;<span class="op" id="3416253">:=</span>&nbsp;<span class="ident" id="3416256">scan</span><span class="op" id="3416260">.</span><span class="ident" id="3416261">step</span><span class="op" id="3416265">(</span><span class="ident" id="3416266">scan</span><span class="op" id="3416270">,</span>&nbsp;<span class="builtintype" id="3416272">int</span><span class="op" id="3416275">(</span><span class="ident" id="3416276">c</span><span class="op" id="3416277">)</span><span class="op" id="3416278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416282">if</span>&nbsp;<span class="ident" id="3416285">v</span>&nbsp;<span class="op" id="3416287">&gt;=</span>&nbsp;<span class="ident" id="3416290">scanEnd</span>&nbsp;<span class="op" id="3416298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416303">switch</span>&nbsp;<span class="ident" id="3416310">v</span>&nbsp;<span class="op" id="3416312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416317">case</span>&nbsp;<span class="ident" id="3416322">scanError</span><span class="op" id="3416331">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416337">return</span>&nbsp;<span class="builtintype" id="3416344">nil</span><span class="op" id="3416347">,</span>&nbsp;<span class="builtintype" id="3416349">nil</span><span class="op" id="3416352">,</span>&nbsp;<span class="ident" id="3416354">scan</span><span class="op" id="3416358">.</span><span class="ident" id="3416359">err</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416366">case</span>&nbsp;<span class="ident" id="3416371">scanEnd</span><span class="op" id="3416378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416384">return</span>&nbsp;<span class="ident" id="3416391">data</span><span class="op" id="3416395">[</span><span class="num" id="3416396">0</span><span class="op" id="3416397">:</span><span class="ident" id="3416398">i</span><span class="op" id="3416399">]</span><span class="op" id="3416400">,</span>&nbsp;<span class="ident" id="3416402">data</span><span class="op" id="3416406">[</span><span class="ident" id="3416407">i</span><span class="op" id="3416408">:</span><span class="op" id="3416409">]</span><span class="op" id="3416410">,</span>&nbsp;<span class="builtintype" id="3416412">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3416419">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3416423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3416426">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416429">if</span>&nbsp;<span class="ident" id="3416432">scan</span><span class="op" id="3416436">.</span><span class="ident" id="3416437">eof</span><span class="op" id="3416440">(</span><span class="op" id="3416441">)</span>&nbsp;<span class="op" id="3416443">==</span>&nbsp;<span class="ident" id="3416446">scanError</span>&nbsp;<span class="op" id="3416456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416460">return</span>&nbsp;<span class="builtintype" id="3416467">nil</span><span class="op" id="3416470">,</span>&nbsp;<span class="builtintype" id="3416472">nil</span><span class="op" id="3416475">,</span>&nbsp;<span class="ident" id="3416477">scan</span><span class="op" id="3416481">.</span><span class="ident" id="3416482">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3416487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3416490">return</span>&nbsp;<span class="ident" id="3416497">data</span><span class="op" id="3416501">,</span>&nbsp;<span class="builtintype" id="3416503">nil</span><span class="op" id="3416506">,</span>&nbsp;<span class="builtintype" id="3416508">nil</span><br>
<span class="lineno"></span><span class="op" id="3416512">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="3416515">//&nbsp;A&nbsp;SyntaxError&nbsp;is&nbsp;a&nbsp;description&nbsp;of&nbsp;a&nbsp;JSON&nbsp;syntax&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3416573">type</span>&nbsp;<span class="ident" id="3416578">SyntaxError</span>&nbsp;<span class="keyword" id="3416590">struct</span>&nbsp;<span class="op" id="3416597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3416600">msg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3416607">string</span>&nbsp;<span class="comment" id="3416614">//&nbsp;description&nbsp;of&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3416639">Offset</span>&nbsp;<span class="builtintype" id="3416646">int64</span>&nbsp;&nbsp;<span class="comment" id="3416653">//&nbsp;error&nbsp;occurred&nbsp;after&nbsp;reading&nbsp;Offset&nbsp;bytes</span><br>
<span class="lineno">60</span><span class="op" id="3416698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3416701">func</span>&nbsp;<span class="op" id="3416706">(</span><span class="ident" id="3416707">e</span>&nbsp;<span class="op" id="3416709">*</span><span class="ident" id="3416710">SyntaxError</span><span class="op" id="3416721">)</span>&nbsp;<span class="ident" id="3416723">Error</span><span class="op" id="3416728">(</span><span class="op" id="3416729">)</span>&nbsp;<span class="builtintype" id="3416731">string</span>&nbsp;<span class="op" id="3416738">{</span>&nbsp;<span class="keyword" id="3416740">return</span>&nbsp;<span class="ident" id="3416747">e</span><span class="op" id="3416748">.</span><span class="ident" id="3416749">msg</span>&nbsp;<span class="op" id="3416753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3416756">//&nbsp;A&nbsp;scanner&nbsp;is&nbsp;a&nbsp;JSON&nbsp;scanning&nbsp;state&nbsp;machine.</span><br>
<span class="lineno">65</span><span class="comment" id="3416803">//&nbsp;Callers&nbsp;call&nbsp;scan.reset()&nbsp;and&nbsp;then&nbsp;pass&nbsp;bytes&nbsp;in&nbsp;one&nbsp;at&nbsp;a&nbsp;time</span><br>
<span class="lineno"></span><span class="comment" id="3416869">//&nbsp;by&nbsp;calling&nbsp;scan.step(&amp;scan,&nbsp;c)&nbsp;for&nbsp;each&nbsp;byte.</span><br>
<span class="lineno"></span><span class="comment" id="3416918">//&nbsp;The&nbsp;return&nbsp;value,&nbsp;referred&nbsp;to&nbsp;as&nbsp;an&nbsp;opcode,&nbsp;tells&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3416975">//&nbsp;caller&nbsp;about&nbsp;significant&nbsp;parsing&nbsp;events&nbsp;like&nbsp;beginning</span><br>
<span class="lineno"></span><span class="comment" id="3417033">//&nbsp;and&nbsp;ending&nbsp;literals,&nbsp;objects,&nbsp;and&nbsp;arrays,&nbsp;so&nbsp;that&nbsp;the</span><br>
<span class="lineno">70</span><span class="comment" id="3417090">//&nbsp;caller&nbsp;can&nbsp;follow&nbsp;along&nbsp;if&nbsp;it&nbsp;wishes.</span><br>
<span class="lineno"></span><span class="comment" id="3417131">//&nbsp;The&nbsp;return&nbsp;value&nbsp;scanEnd&nbsp;indicates&nbsp;that&nbsp;a&nbsp;single&nbsp;top-level</span><br>
<span class="lineno"></span><span class="comment" id="3417193">//&nbsp;JSON&nbsp;value&nbsp;has&nbsp;been&nbsp;completed,&nbsp;*before*&nbsp;the&nbsp;byte&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3417250">//&nbsp;just&nbsp;got&nbsp;passed&nbsp;in.&nbsp;&nbsp;(The&nbsp;indication&nbsp;must&nbsp;be&nbsp;delayed&nbsp;in&nbsp;order</span><br>
<span class="lineno"></span><span class="comment" id="3417315">//&nbsp;to&nbsp;recognize&nbsp;the&nbsp;end&nbsp;of&nbsp;numbers:&nbsp;is&nbsp;123&nbsp;a&nbsp;whole&nbsp;value&nbsp;or</span><br>
<span class="lineno">75</span><span class="comment" id="3417375">//&nbsp;the&nbsp;beginning&nbsp;of&nbsp;12345e+6?).</span><br>
<span class="lineno"></span><span class="keyword" id="3417407">type</span>&nbsp;<span class="ident" id="3417412">scanner</span>&nbsp;<span class="keyword" id="3417420">struct</span>&nbsp;<span class="op" id="3417427">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417430">//&nbsp;The&nbsp;step&nbsp;is&nbsp;a&nbsp;func&nbsp;to&nbsp;be&nbsp;called&nbsp;to&nbsp;execute&nbsp;the&nbsp;next&nbsp;transition.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417498">//&nbsp;Also&nbsp;tried&nbsp;using&nbsp;an&nbsp;integer&nbsp;constant&nbsp;and&nbsp;a&nbsp;single&nbsp;func</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417557">//&nbsp;with&nbsp;a&nbsp;switch,&nbsp;but&nbsp;using&nbsp;the&nbsp;func&nbsp;directly&nbsp;was&nbsp;10%&nbsp;faster</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417619">//&nbsp;on&nbsp;a&nbsp;64-bit&nbsp;Mac&nbsp;Mini,&nbsp;and&nbsp;it&#39;s&nbsp;nicer&nbsp;to&nbsp;read.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417669">step</span>&nbsp;<span class="keyword" id="3417674">func</span><span class="op" id="3417678">(</span><span class="op" id="3417679">*</span><span class="ident" id="3417680">scanner</span><span class="op" id="3417687">,</span>&nbsp;<span class="builtintype" id="3417689">int</span><span class="op" id="3417692">)</span>&nbsp;<span class="builtintype" id="3417694">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417700">//&nbsp;Reached&nbsp;end&nbsp;of&nbsp;top-level&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417736">endTop</span>&nbsp;<span class="builtintype" id="3417743">bool</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417750">//&nbsp;Stack&nbsp;of&nbsp;what&nbsp;we&#39;re&nbsp;in&nbsp;the&nbsp;middle&nbsp;of&nbsp;-&nbsp;array&nbsp;values,&nbsp;object&nbsp;keys,&nbsp;object&nbsp;values.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417835">parseState</span>&nbsp;<span class="op" id="3417846">[</span><span class="op" id="3417847">]</span><span class="builtintype" id="3417848">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417854">//&nbsp;Error&nbsp;that&nbsp;happened,&nbsp;if&nbsp;any.</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417887">err</span>&nbsp;<span class="builtintype" id="3417891">error</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3417899">//&nbsp;1-byte&nbsp;redo&nbsp;(see&nbsp;undo&nbsp;method)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417933">redo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3417943">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417949">redoCode</span>&nbsp;&nbsp;<span class="builtintype" id="3417959">int</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3417964">redoState</span>&nbsp;<span class="keyword" id="3417974">func</span><span class="op" id="3417978">(</span><span class="op" id="3417979">*</span><span class="ident" id="3417980">scanner</span><span class="op" id="3417987">,</span>&nbsp;<span class="builtintype" id="3417989">int</span><span class="op" id="3417992">)</span>&nbsp;<span class="builtintype" id="3417994">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418000">//&nbsp;total&nbsp;bytes&nbsp;consumed,&nbsp;updated&nbsp;by&nbsp;decoder.Decode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418052">bytes</span>&nbsp;<span class="builtintype" id="3418058">int64</span><br>
<span class="lineno"></span><span class="op" id="3418064">}</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span><span class="comment" id="3418067">//&nbsp;These&nbsp;values&nbsp;are&nbsp;returned&nbsp;by&nbsp;the&nbsp;state&nbsp;transition&nbsp;functions</span><br>
<span class="lineno"></span><span class="comment" id="3418130">//&nbsp;assigned&nbsp;to&nbsp;scanner.state&nbsp;and&nbsp;the&nbsp;method&nbsp;scanner.eof.</span><br>
<span class="lineno"></span><span class="comment" id="3418187">//&nbsp;They&nbsp;give&nbsp;details&nbsp;about&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;scan&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3418249">//&nbsp;callers&nbsp;might&nbsp;be&nbsp;interested&nbsp;to&nbsp;know&nbsp;about.</span><br>
<span class="lineno">105</span><span class="comment" id="3418295">//&nbsp;It&nbsp;is&nbsp;okay&nbsp;to&nbsp;ignore&nbsp;the&nbsp;return&nbsp;value&nbsp;of&nbsp;any&nbsp;particular</span><br>
<span class="lineno"></span><span class="comment" id="3418354">//&nbsp;call&nbsp;to&nbsp;scanner.state:&nbsp;if&nbsp;one&nbsp;call&nbsp;returns&nbsp;scanError,</span><br>
<span class="lineno"></span><span class="comment" id="3418411">//&nbsp;every&nbsp;subsequent&nbsp;call&nbsp;will&nbsp;return&nbsp;scanError&nbsp;too.</span><br>
<span class="lineno"></span><span class="keyword" id="3418463">const</span>&nbsp;<span class="op" id="3418469">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418472">//&nbsp;Continue.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418486">scanContinue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3418503">=</span>&nbsp;<span class="ident" id="3418505">iota</span>&nbsp;<span class="comment" id="3418510">//&nbsp;uninteresting&nbsp;byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418533">scanBeginLiteral</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418557">//&nbsp;end&nbsp;implied&nbsp;by&nbsp;next&nbsp;result&nbsp;!=&nbsp;scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418604">scanBeginObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418628">//&nbsp;begin&nbsp;object</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418645">scanObjectKey</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418669">//&nbsp;just&nbsp;finished&nbsp;object&nbsp;key&nbsp;(string)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418707">scanObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418731">//&nbsp;just&nbsp;finished&nbsp;non-last&nbsp;object&nbsp;value</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418771">scanEndObject</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418795">//&nbsp;end&nbsp;object&nbsp;(implies&nbsp;scanObjectValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418848">scanBeginArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418872">//&nbsp;begin&nbsp;array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418888">scanArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418912">//&nbsp;just&nbsp;finished&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3418942">scanEndArray</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3418966">//&nbsp;end&nbsp;array&nbsp;(implies&nbsp;scanArrayValue&nbsp;if&nbsp;possible)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419017">scanSkipSpace</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3419041">//&nbsp;space&nbsp;byte;&nbsp;can&nbsp;skip;&nbsp;known&nbsp;to&nbsp;be&nbsp;last&nbsp;&#34;continue&#34;&nbsp;result</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3419103">//&nbsp;Stop.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419113">scanEnd</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="3419123">//&nbsp;top-level&nbsp;value&nbsp;ended&nbsp;*before*&nbsp;this&nbsp;byte;&nbsp;known&nbsp;to&nbsp;be&nbsp;first&nbsp;&#34;stop&#34;&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419201">scanError</span>&nbsp;<span class="comment" id="3419211">//&nbsp;hit&nbsp;an&nbsp;error,&nbsp;scanner.err.</span><br>
<span class="lineno"></span><span class="op" id="3419241">)</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="3419244">//&nbsp;These&nbsp;values&nbsp;are&nbsp;stored&nbsp;in&nbsp;the&nbsp;parseState&nbsp;stack.</span><br>
<span class="lineno"></span><span class="comment" id="3419296">//&nbsp;They&nbsp;give&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;a&nbsp;composite&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="3419348">//&nbsp;being&nbsp;scanned.&nbsp;&nbsp;If&nbsp;the&nbsp;parser&nbsp;is&nbsp;inside&nbsp;a&nbsp;nested&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="3419406">//&nbsp;the&nbsp;parseState&nbsp;describes&nbsp;the&nbsp;nested&nbsp;state,&nbsp;outermost&nbsp;at&nbsp;entry&nbsp;0.</span><br>
<span class="lineno">130</span><span class="keyword" id="3419474">const</span>&nbsp;<span class="op" id="3419480">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419483">parseObjectKey</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3419500">=</span>&nbsp;<span class="ident" id="3419502">iota</span>&nbsp;<span class="comment" id="3419507">//&nbsp;parsing&nbsp;object&nbsp;key&nbsp;(before&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419545">parseObjectValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3419569">//&nbsp;parsing&nbsp;object&nbsp;value&nbsp;(after&nbsp;colon)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419608">parseArrayValue</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3419632">//&nbsp;parsing&nbsp;array&nbsp;value</span><br>
<span class="lineno"></span><span class="op" id="3419655">)</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="3419658">//&nbsp;reset&nbsp;prepares&nbsp;the&nbsp;scanner&nbsp;for&nbsp;use.</span><br>
<span class="lineno"></span><span class="comment" id="3419697">//&nbsp;It&nbsp;must&nbsp;be&nbsp;called&nbsp;before&nbsp;calling&nbsp;s.step.</span><br>
<span class="lineno"></span><span class="keyword" id="3419741">func</span>&nbsp;<span class="op" id="3419746">(</span><span class="ident" id="3419747">s</span>&nbsp;<span class="op" id="3419749">*</span><span class="ident" id="3419750">scanner</span><span class="op" id="3419757">)</span>&nbsp;<span class="ident" id="3419759">reset</span><span class="op" id="3419764">(</span><span class="op" id="3419765">)</span>&nbsp;<span class="op" id="3419767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419770">s</span><span class="op" id="3419771">.</span><span class="ident" id="3419772">step</span>&nbsp;<span class="op" id="3419777">=</span>&nbsp;<span class="ident" id="3419779">stateBeginValue</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419796">s</span><span class="op" id="3419797">.</span><span class="ident" id="3419798">parseState</span>&nbsp;<span class="op" id="3419809">=</span>&nbsp;<span class="ident" id="3419811">s</span><span class="op" id="3419812">.</span><span class="ident" id="3419813">parseState</span><span class="op" id="3419823">[</span><span class="num" id="3419824">0</span><span class="op" id="3419825">:</span><span class="num" id="3419826">0</span><span class="op" id="3419827">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419830">s</span><span class="op" id="3419831">.</span><span class="ident" id="3419832">err</span>&nbsp;<span class="op" id="3419836">=</span>&nbsp;<span class="builtintype" id="3419838">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419843">s</span><span class="op" id="3419844">.</span><span class="ident" id="3419845">redo</span>&nbsp;<span class="op" id="3419850">=</span>&nbsp;<span class="builtintype" id="3419852">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3419859">s</span><span class="op" id="3419860">.</span><span class="ident" id="3419861">endTop</span>&nbsp;<span class="op" id="3419868">=</span>&nbsp;<span class="builtintype" id="3419870">false</span><br>
<span class="lineno"></span><span class="op" id="3419876">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="3419879">//&nbsp;eof&nbsp;tells&nbsp;the&nbsp;scanner&nbsp;that&nbsp;the&nbsp;end&nbsp;of&nbsp;input&nbsp;has&nbsp;been&nbsp;reached.</span><br>
<span class="lineno"></span><span class="comment" id="3419944">//&nbsp;It&nbsp;returns&nbsp;a&nbsp;scan&nbsp;status&nbsp;just&nbsp;as&nbsp;s.step&nbsp;does.</span><br>
<span class="lineno"></span><span class="keyword" id="3419993">func</span>&nbsp;<span class="op" id="3419998">(</span><span class="ident" id="3419999">s</span>&nbsp;<span class="op" id="3420001">*</span><span class="ident" id="3420002">scanner</span><span class="op" id="3420009">)</span>&nbsp;<span class="ident" id="3420011">eof</span><span class="op" id="3420014">(</span><span class="op" id="3420015">)</span>&nbsp;<span class="builtintype" id="3420017">int</span>&nbsp;<span class="op" id="3420021">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420024">if</span>&nbsp;<span class="ident" id="3420027">s</span><span class="op" id="3420028">.</span><span class="ident" id="3420029">err</span>&nbsp;<span class="op" id="3420033">!=</span>&nbsp;<span class="builtintype" id="3420036">nil</span>&nbsp;<span class="op" id="3420040">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420044">return</span>&nbsp;<span class="ident" id="3420051">scanError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420065">if</span>&nbsp;<span class="ident" id="3420068">s</span><span class="op" id="3420069">.</span><span class="ident" id="3420070">endTop</span>&nbsp;<span class="op" id="3420077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420081">return</span>&nbsp;<span class="ident" id="3420088">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420097">}</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420100">s</span><span class="op" id="3420101">.</span><span class="ident" id="3420102">step</span><span class="op" id="3420106">(</span><span class="ident" id="3420107">s</span><span class="op" id="3420108">,</span>&nbsp;<span class="string" id="3420110">&#39;&nbsp;&#39;</span><span class="op" id="3420113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420116">if</span>&nbsp;<span class="ident" id="3420119">s</span><span class="op" id="3420120">.</span><span class="ident" id="3420121">endTop</span>&nbsp;<span class="op" id="3420128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420132">return</span>&nbsp;<span class="ident" id="3420139">scanEnd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420151">if</span>&nbsp;<span class="ident" id="3420154">s</span><span class="op" id="3420155">.</span><span class="ident" id="3420156">err</span>&nbsp;<span class="op" id="3420160">==</span>&nbsp;<span class="builtintype" id="3420163">nil</span>&nbsp;<span class="op" id="3420167">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420171">s</span><span class="op" id="3420172">.</span><span class="ident" id="3420173">err</span>&nbsp;<span class="op" id="3420177">=</span>&nbsp;<span class="op" id="3420179">&amp;</span><span class="ident" id="3420180">SyntaxError</span><span class="op" id="3420191">{</span><span class="string" id="3420192">&#34;unexpected&nbsp;end&nbsp;of&nbsp;JSON&nbsp;input&#34;</span><span class="op" id="3420222">,</span>&nbsp;<span class="ident" id="3420224">s</span><span class="op" id="3420225">.</span><span class="ident" id="3420226">bytes</span><span class="op" id="3420231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420234">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420237">return</span>&nbsp;<span class="ident" id="3420244">scanError</span><br>
<span class="lineno"></span><span class="op" id="3420254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3420257">//&nbsp;pushParseState&nbsp;pushes&nbsp;a&nbsp;new&nbsp;parse&nbsp;state&nbsp;p&nbsp;onto&nbsp;the&nbsp;parse&nbsp;stack.</span><br>
<span class="lineno"></span><span class="keyword" id="3420324">func</span>&nbsp;<span class="op" id="3420329">(</span><span class="ident" id="3420330">s</span>&nbsp;<span class="op" id="3420332">*</span><span class="ident" id="3420333">scanner</span><span class="op" id="3420340">)</span>&nbsp;<span class="ident" id="3420342">pushParseState</span><span class="op" id="3420356">(</span><span class="ident" id="3420357">p</span>&nbsp;<span class="builtintype" id="3420359">int</span><span class="op" id="3420362">)</span>&nbsp;<span class="op" id="3420364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420367">s</span><span class="op" id="3420368">.</span><span class="ident" id="3420369">parseState</span>&nbsp;<span class="op" id="3420380">=</span>&nbsp;<span class="builtinfunc" id="3420382">append</span><span class="op" id="3420388">(</span><span class="ident" id="3420389">s</span><span class="op" id="3420390">.</span><span class="ident" id="3420391">parseState</span><span class="op" id="3420401">,</span>&nbsp;<span class="ident" id="3420403">p</span><span class="op" id="3420404">)</span><br>
<span class="lineno"></span><span class="op" id="3420406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="comment" id="3420409">//&nbsp;popParseState&nbsp;pops&nbsp;a&nbsp;parse&nbsp;state&nbsp;(already&nbsp;obtained)&nbsp;off&nbsp;the&nbsp;stack</span><br>
<span class="lineno"></span><span class="comment" id="3420478">//&nbsp;and&nbsp;updates&nbsp;s.step&nbsp;accordingly.</span><br>
<span class="lineno"></span><span class="keyword" id="3420513">func</span>&nbsp;<span class="op" id="3420518">(</span><span class="ident" id="3420519">s</span>&nbsp;<span class="op" id="3420521">*</span><span class="ident" id="3420522">scanner</span><span class="op" id="3420529">)</span>&nbsp;<span class="ident" id="3420531">popParseState</span><span class="op" id="3420544">(</span><span class="op" id="3420545">)</span>&nbsp;<span class="op" id="3420547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420550">n</span>&nbsp;<span class="op" id="3420552">:=</span>&nbsp;<span class="builtinfunc" id="3420555">len</span><span class="op" id="3420558">(</span><span class="ident" id="3420559">s</span><span class="op" id="3420560">.</span><span class="ident" id="3420561">parseState</span><span class="op" id="3420571">)</span>&nbsp;<span class="op" id="3420573">-</span>&nbsp;<span class="num" id="3420575">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420578">s</span><span class="op" id="3420579">.</span><span class="ident" id="3420580">parseState</span>&nbsp;<span class="op" id="3420591">=</span>&nbsp;<span class="ident" id="3420593">s</span><span class="op" id="3420594">.</span><span class="ident" id="3420595">parseState</span><span class="op" id="3420605">[</span><span class="num" id="3420606">0</span><span class="op" id="3420607">:</span><span class="ident" id="3420608">n</span><span class="op" id="3420609">]</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420612">s</span><span class="op" id="3420613">.</span><span class="ident" id="3420614">redo</span>&nbsp;<span class="op" id="3420619">=</span>&nbsp;<span class="builtintype" id="3420621">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420628">if</span>&nbsp;<span class="ident" id="3420631">n</span>&nbsp;<span class="op" id="3420633">==</span>&nbsp;<span class="num" id="3420636">0</span>&nbsp;<span class="op" id="3420638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420642">s</span><span class="op" id="3420643">.</span><span class="ident" id="3420644">step</span>&nbsp;<span class="op" id="3420649">=</span>&nbsp;<span class="ident" id="3420651">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420665">s</span><span class="op" id="3420666">.</span><span class="ident" id="3420667">endTop</span>&nbsp;<span class="op" id="3420674">=</span>&nbsp;<span class="builtintype" id="3420676">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420682">}</span>&nbsp;<span class="keyword" id="3420684">else</span>&nbsp;<span class="op" id="3420689">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3420693">s</span><span class="op" id="3420694">.</span><span class="ident" id="3420695">step</span>&nbsp;<span class="op" id="3420700">=</span>&nbsp;<span class="ident" id="3420702">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420717">}</span><br>
<span class="lineno"></span><span class="op" id="3420719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3420722">func</span>&nbsp;<span class="ident" id="3420727">isSpace</span><span class="op" id="3420734">(</span><span class="ident" id="3420735">c</span>&nbsp;<span class="builtintype" id="3420737">rune</span><span class="op" id="3420741">)</span>&nbsp;<span class="builtintype" id="3420743">bool</span>&nbsp;<span class="op" id="3420748">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420751">return</span>&nbsp;<span class="ident" id="3420758">c</span>&nbsp;<span class="op" id="3420760">==</span>&nbsp;<span class="string" id="3420763">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3420767">||</span>&nbsp;<span class="ident" id="3420770">c</span>&nbsp;<span class="op" id="3420772">==</span>&nbsp;<span class="string" id="3420775">&#39;\t&#39;</span>&nbsp;<span class="op" id="3420780">||</span>&nbsp;<span class="ident" id="3420783">c</span>&nbsp;<span class="op" id="3420785">==</span>&nbsp;<span class="string" id="3420788">&#39;\r&#39;</span>&nbsp;<span class="op" id="3420793">||</span>&nbsp;<span class="ident" id="3420796">c</span>&nbsp;<span class="op" id="3420798">==</span>&nbsp;<span class="string" id="3420801">&#39;\n&#39;</span><br>
<span class="lineno"></span><span class="op" id="3420806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3420809">//&nbsp;stateBeginValueOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`[`.</span><br>
<span class="lineno"></span><span class="keyword" id="3420867">func</span>&nbsp;<span class="ident" id="3420872">stateBeginValueOrEmpty</span><span class="op" id="3420894">(</span><span class="ident" id="3420895">s</span>&nbsp;<span class="op" id="3420897">*</span><span class="ident" id="3420898">scanner</span><span class="op" id="3420905">,</span>&nbsp;<span class="ident" id="3420907">c</span>&nbsp;<span class="builtintype" id="3420909">int</span><span class="op" id="3420912">)</span>&nbsp;<span class="builtintype" id="3420914">int</span>&nbsp;<span class="op" id="3420918">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420921">if</span>&nbsp;<span class="ident" id="3420924">c</span>&nbsp;<span class="op" id="3420926">&lt;=</span>&nbsp;<span class="string" id="3420929">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3420933">&amp;&amp;</span>&nbsp;<span class="ident" id="3420936">isSpace</span><span class="op" id="3420943">(</span><span class="builtintype" id="3420944">rune</span><span class="op" id="3420948">(</span><span class="ident" id="3420949">c</span><span class="op" id="3420950">)</span><span class="op" id="3420951">)</span>&nbsp;<span class="op" id="3420953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420957">return</span>&nbsp;<span class="ident" id="3420964">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3420979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420982">if</span>&nbsp;<span class="ident" id="3420985">c</span>&nbsp;<span class="op" id="3420987">==</span>&nbsp;<span class="string" id="3420990">&#39;]&#39;</span>&nbsp;<span class="op" id="3420994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3420998">return</span>&nbsp;<span class="ident" id="3421005">stateEndValue</span><span class="op" id="3421018">(</span><span class="ident" id="3421019">s</span><span class="op" id="3421020">,</span>&nbsp;<span class="ident" id="3421022">c</span><span class="op" id="3421023">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3421026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421029">return</span>&nbsp;<span class="ident" id="3421036">stateBeginValue</span><span class="op" id="3421051">(</span><span class="ident" id="3421052">s</span><span class="op" id="3421053">,</span>&nbsp;<span class="ident" id="3421055">c</span><span class="op" id="3421056">)</span><br>
<span class="lineno"></span><span class="op" id="3421058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3421061">//&nbsp;stateBeginValue&nbsp;is&nbsp;the&nbsp;state&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;input.</span><br>
<span class="lineno">200</span><span class="keyword" id="3421124">func</span>&nbsp;<span class="ident" id="3421129">stateBeginValue</span><span class="op" id="3421144">(</span><span class="ident" id="3421145">s</span>&nbsp;<span class="op" id="3421147">*</span><span class="ident" id="3421148">scanner</span><span class="op" id="3421155">,</span>&nbsp;<span class="ident" id="3421157">c</span>&nbsp;<span class="builtintype" id="3421159">int</span><span class="op" id="3421162">)</span>&nbsp;<span class="builtintype" id="3421164">int</span>&nbsp;<span class="op" id="3421168">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421171">if</span>&nbsp;<span class="ident" id="3421174">c</span>&nbsp;<span class="op" id="3421176">&lt;=</span>&nbsp;<span class="string" id="3421179">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3421183">&amp;&amp;</span>&nbsp;<span class="ident" id="3421186">isSpace</span><span class="op" id="3421193">(</span><span class="builtintype" id="3421194">rune</span><span class="op" id="3421198">(</span><span class="ident" id="3421199">c</span><span class="op" id="3421200">)</span><span class="op" id="3421201">)</span>&nbsp;<span class="op" id="3421203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421207">return</span>&nbsp;<span class="ident" id="3421214">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3421229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421232">switch</span>&nbsp;<span class="ident" id="3421239">c</span>&nbsp;<span class="op" id="3421241">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421244">case</span>&nbsp;<span class="string" id="3421249">&#39;{&#39;</span><span class="op" id="3421252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421256">s</span><span class="op" id="3421257">.</span><span class="ident" id="3421258">step</span>&nbsp;<span class="op" id="3421263">=</span>&nbsp;<span class="ident" id="3421265">stateBeginStringOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421291">s</span><span class="op" id="3421292">.</span><span class="ident" id="3421293">pushParseState</span><span class="op" id="3421307">(</span><span class="ident" id="3421308">parseObjectKey</span><span class="op" id="3421322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421326">return</span>&nbsp;<span class="ident" id="3421333">scanBeginObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421350">case</span>&nbsp;<span class="string" id="3421355">&#39;[&#39;</span><span class="op" id="3421358">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421362">s</span><span class="op" id="3421363">.</span><span class="ident" id="3421364">step</span>&nbsp;<span class="op" id="3421369">=</span>&nbsp;<span class="ident" id="3421371">stateBeginValueOrEmpty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421396">s</span><span class="op" id="3421397">.</span><span class="ident" id="3421398">pushParseState</span><span class="op" id="3421412">(</span><span class="ident" id="3421413">parseArrayValue</span><span class="op" id="3421428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421432">return</span>&nbsp;<span class="ident" id="3421439">scanBeginArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421455">case</span>&nbsp;<span class="string" id="3421460">&#39;&#34;&#39;</span><span class="op" id="3421463">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421467">s</span><span class="op" id="3421468">.</span><span class="ident" id="3421469">step</span>&nbsp;<span class="op" id="3421474">=</span>&nbsp;<span class="ident" id="3421476">stateInString</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421492">return</span>&nbsp;<span class="ident" id="3421499">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421517">case</span>&nbsp;<span class="string" id="3421522">&#39;-&#39;</span><span class="op" id="3421525">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421529">s</span><span class="op" id="3421530">.</span><span class="ident" id="3421531">step</span>&nbsp;<span class="op" id="3421536">=</span>&nbsp;<span class="ident" id="3421538">stateNeg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421549">return</span>&nbsp;<span class="ident" id="3421556">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421574">case</span>&nbsp;<span class="string" id="3421579">&#39;0&#39;</span><span class="op" id="3421582">:</span>&nbsp;<span class="comment" id="3421584">//&nbsp;beginning&nbsp;of&nbsp;0.123</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421608">s</span><span class="op" id="3421609">.</span><span class="ident" id="3421610">step</span>&nbsp;<span class="op" id="3421615">=</span>&nbsp;<span class="ident" id="3421617">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421626">return</span>&nbsp;<span class="ident" id="3421633">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421651">case</span>&nbsp;<span class="string" id="3421656">&#39;t&#39;</span><span class="op" id="3421659">:</span>&nbsp;<span class="comment" id="3421661">//&nbsp;beginning&nbsp;of&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421684">s</span><span class="op" id="3421685">.</span><span class="ident" id="3421686">step</span>&nbsp;<span class="op" id="3421691">=</span>&nbsp;<span class="ident" id="3421693">stateT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421702">return</span>&nbsp;<span class="ident" id="3421709">scanBeginLiteral</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421727">case</span>&nbsp;<span class="string" id="3421732">&#39;f&#39;</span><span class="op" id="3421735">:</span>&nbsp;<span class="comment" id="3421737">//&nbsp;beginning&nbsp;of&nbsp;false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421761">s</span><span class="op" id="3421762">.</span><span class="ident" id="3421763">step</span>&nbsp;<span class="op" id="3421768">=</span>&nbsp;<span class="ident" id="3421770">stateF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421779">return</span>&nbsp;<span class="ident" id="3421786">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421804">case</span>&nbsp;<span class="string" id="3421809">&#39;n&#39;</span><span class="op" id="3421812">:</span>&nbsp;<span class="comment" id="3421814">//&nbsp;beginning&nbsp;of&nbsp;null</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421837">s</span><span class="op" id="3421838">.</span><span class="ident" id="3421839">step</span>&nbsp;<span class="op" id="3421844">=</span>&nbsp;<span class="ident" id="3421846">stateN</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421855">return</span>&nbsp;<span class="ident" id="3421862">scanBeginLiteral</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3421880">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421883">if</span>&nbsp;<span class="string" id="3421886">&#39;1&#39;</span>&nbsp;<span class="op" id="3421890">&lt;=</span>&nbsp;<span class="ident" id="3421893">c</span>&nbsp;<span class="op" id="3421895">&amp;&amp;</span>&nbsp;<span class="ident" id="3421898">c</span>&nbsp;<span class="op" id="3421900">&lt;=</span>&nbsp;<span class="string" id="3421903">&#39;9&#39;</span>&nbsp;<span class="op" id="3421907">{</span>&nbsp;<span class="comment" id="3421909">//&nbsp;beginning&nbsp;of&nbsp;1234.5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3421934">s</span><span class="op" id="3421935">.</span><span class="ident" id="3421936">step</span>&nbsp;<span class="op" id="3421941">=</span>&nbsp;<span class="ident" id="3421943">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421952">return</span>&nbsp;<span class="ident" id="3421959">scanBeginLiteral</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3421977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3421980">return</span>&nbsp;<span class="ident" id="3421987">s</span><span class="op" id="3421988">.</span><span class="builtintype" id="3421989">error</span><span class="op" id="3421994">(</span><span class="ident" id="3421995">c</span><span class="op" id="3421996">,</span>&nbsp;<span class="string" id="3421998">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;value&#34;</span><span class="op" id="3422030">)</span><br>
<span class="lineno"></span><span class="op" id="3422032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3422035">//&nbsp;stateBeginStringOrEmpty&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{`.</span><br>
<span class="lineno">240</span><span class="keyword" id="3422094">func</span>&nbsp;<span class="ident" id="3422099">stateBeginStringOrEmpty</span><span class="op" id="3422122">(</span><span class="ident" id="3422123">s</span>&nbsp;<span class="op" id="3422125">*</span><span class="ident" id="3422126">scanner</span><span class="op" id="3422133">,</span>&nbsp;<span class="ident" id="3422135">c</span>&nbsp;<span class="builtintype" id="3422137">int</span><span class="op" id="3422140">)</span>&nbsp;<span class="builtintype" id="3422142">int</span>&nbsp;<span class="op" id="3422146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422149">if</span>&nbsp;<span class="ident" id="3422152">c</span>&nbsp;<span class="op" id="3422154">&lt;=</span>&nbsp;<span class="string" id="3422157">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3422161">&amp;&amp;</span>&nbsp;<span class="ident" id="3422164">isSpace</span><span class="op" id="3422171">(</span><span class="builtintype" id="3422172">rune</span><span class="op" id="3422176">(</span><span class="ident" id="3422177">c</span><span class="op" id="3422178">)</span><span class="op" id="3422179">)</span>&nbsp;<span class="op" id="3422181">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422185">return</span>&nbsp;<span class="ident" id="3422192">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3422207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422210">if</span>&nbsp;<span class="ident" id="3422213">c</span>&nbsp;<span class="op" id="3422215">==</span>&nbsp;<span class="string" id="3422218">&#39;}&#39;</span>&nbsp;<span class="op" id="3422222">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422226">n</span>&nbsp;<span class="op" id="3422228">:=</span>&nbsp;<span class="builtinfunc" id="3422231">len</span><span class="op" id="3422234">(</span><span class="ident" id="3422235">s</span><span class="op" id="3422236">.</span><span class="ident" id="3422237">parseState</span><span class="op" id="3422247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422251">s</span><span class="op" id="3422252">.</span><span class="ident" id="3422253">parseState</span><span class="op" id="3422263">[</span><span class="ident" id="3422264">n</span><span class="op" id="3422265">-</span><span class="num" id="3422266">1</span><span class="op" id="3422267">]</span>&nbsp;<span class="op" id="3422269">=</span>&nbsp;<span class="ident" id="3422271">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422290">return</span>&nbsp;<span class="ident" id="3422297">stateEndValue</span><span class="op" id="3422310">(</span><span class="ident" id="3422311">s</span><span class="op" id="3422312">,</span>&nbsp;<span class="ident" id="3422314">c</span><span class="op" id="3422315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3422318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422321">return</span>&nbsp;<span class="ident" id="3422328">stateBeginString</span><span class="op" id="3422344">(</span><span class="ident" id="3422345">s</span><span class="op" id="3422346">,</span>&nbsp;<span class="ident" id="3422348">c</span><span class="op" id="3422349">)</span><br>
<span class="lineno">250</span><span class="op" id="3422351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3422354">//&nbsp;stateBeginString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`{&#34;key&#34;:&nbsp;value,`.</span><br>
<span class="lineno"></span><span class="keyword" id="3422419">func</span>&nbsp;<span class="ident" id="3422424">stateBeginString</span><span class="op" id="3422440">(</span><span class="ident" id="3422441">s</span>&nbsp;<span class="op" id="3422443">*</span><span class="ident" id="3422444">scanner</span><span class="op" id="3422451">,</span>&nbsp;<span class="ident" id="3422453">c</span>&nbsp;<span class="builtintype" id="3422455">int</span><span class="op" id="3422458">)</span>&nbsp;<span class="builtintype" id="3422460">int</span>&nbsp;<span class="op" id="3422464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422467">if</span>&nbsp;<span class="ident" id="3422470">c</span>&nbsp;<span class="op" id="3422472">&lt;=</span>&nbsp;<span class="string" id="3422475">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3422479">&amp;&amp;</span>&nbsp;<span class="ident" id="3422482">isSpace</span><span class="op" id="3422489">(</span><span class="builtintype" id="3422490">rune</span><span class="op" id="3422494">(</span><span class="ident" id="3422495">c</span><span class="op" id="3422496">)</span><span class="op" id="3422497">)</span>&nbsp;<span class="op" id="3422499">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422503">return</span>&nbsp;<span class="ident" id="3422510">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3422525">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422528">if</span>&nbsp;<span class="ident" id="3422531">c</span>&nbsp;<span class="op" id="3422533">==</span>&nbsp;<span class="string" id="3422536">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3422540">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422544">s</span><span class="op" id="3422545">.</span><span class="ident" id="3422546">step</span>&nbsp;<span class="op" id="3422551">=</span>&nbsp;<span class="ident" id="3422553">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422569">return</span>&nbsp;<span class="ident" id="3422576">scanBeginLiteral</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3422594">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422597">return</span>&nbsp;<span class="ident" id="3422604">s</span><span class="op" id="3422605">.</span><span class="builtintype" id="3422606">error</span><span class="op" id="3422611">(</span><span class="ident" id="3422612">c</span><span class="op" id="3422613">,</span>&nbsp;<span class="string" id="3422615">&#34;looking&nbsp;for&nbsp;beginning&nbsp;of&nbsp;object&nbsp;key&nbsp;string&#34;</span><span class="op" id="3422659">)</span><br>
<span class="lineno"></span><span class="op" id="3422661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3422664">//&nbsp;stateEndValue&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;completing&nbsp;a&nbsp;value,</span><br>
<span class="lineno">265</span><span class="comment" id="3422720">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`true`&nbsp;or&nbsp;`[&#34;x&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="3422771">func</span>&nbsp;<span class="ident" id="3422776">stateEndValue</span><span class="op" id="3422789">(</span><span class="ident" id="3422790">s</span>&nbsp;<span class="op" id="3422792">*</span><span class="ident" id="3422793">scanner</span><span class="op" id="3422800">,</span>&nbsp;<span class="ident" id="3422802">c</span>&nbsp;<span class="builtintype" id="3422804">int</span><span class="op" id="3422807">)</span>&nbsp;<span class="builtintype" id="3422809">int</span>&nbsp;<span class="op" id="3422813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422816">n</span>&nbsp;<span class="op" id="3422818">:=</span>&nbsp;<span class="builtinfunc" id="3422821">len</span><span class="op" id="3422824">(</span><span class="ident" id="3422825">s</span><span class="op" id="3422826">.</span><span class="ident" id="3422827">parseState</span><span class="op" id="3422837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422840">if</span>&nbsp;<span class="ident" id="3422843">n</span>&nbsp;<span class="op" id="3422845">==</span>&nbsp;<span class="num" id="3422848">0</span>&nbsp;<span class="op" id="3422850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3422854">//&nbsp;Completed&nbsp;top-level&nbsp;before&nbsp;the&nbsp;current&nbsp;byte.</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422904">s</span><span class="op" id="3422905">.</span><span class="ident" id="3422906">step</span>&nbsp;<span class="op" id="3422911">=</span>&nbsp;<span class="ident" id="3422913">stateEndTop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3422927">s</span><span class="op" id="3422928">.</span><span class="ident" id="3422929">endTop</span>&nbsp;<span class="op" id="3422936">=</span>&nbsp;<span class="builtintype" id="3422938">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422945">return</span>&nbsp;<span class="ident" id="3422952">stateEndTop</span><span class="op" id="3422963">(</span><span class="ident" id="3422964">s</span><span class="op" id="3422965">,</span>&nbsp;<span class="ident" id="3422967">c</span><span class="op" id="3422968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3422971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3422974">if</span>&nbsp;<span class="ident" id="3422977">c</span>&nbsp;<span class="op" id="3422979">&lt;=</span>&nbsp;<span class="string" id="3422982">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3422986">&amp;&amp;</span>&nbsp;<span class="ident" id="3422989">isSpace</span><span class="op" id="3422996">(</span><span class="builtintype" id="3422997">rune</span><span class="op" id="3423001">(</span><span class="ident" id="3423002">c</span><span class="op" id="3423003">)</span><span class="op" id="3423004">)</span>&nbsp;<span class="op" id="3423006">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423010">s</span><span class="op" id="3423011">.</span><span class="ident" id="3423012">step</span>&nbsp;<span class="op" id="3423017">=</span>&nbsp;<span class="ident" id="3423019">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423035">return</span>&nbsp;<span class="ident" id="3423042">scanSkipSpace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423060">ps</span>&nbsp;<span class="op" id="3423063">:=</span>&nbsp;<span class="ident" id="3423066">s</span><span class="op" id="3423067">.</span><span class="ident" id="3423068">parseState</span><span class="op" id="3423078">[</span><span class="ident" id="3423079">n</span><span class="op" id="3423080">-</span><span class="num" id="3423081">1</span><span class="op" id="3423082">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423085">switch</span>&nbsp;<span class="ident" id="3423092">ps</span>&nbsp;<span class="op" id="3423095">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423098">case</span>&nbsp;<span class="ident" id="3423103">parseObjectKey</span><span class="op" id="3423117">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423121">if</span>&nbsp;<span class="ident" id="3423124">c</span>&nbsp;<span class="op" id="3423126">==</span>&nbsp;<span class="string" id="3423129">&#39;:&#39;</span>&nbsp;<span class="op" id="3423133">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423138">s</span><span class="op" id="3423139">.</span><span class="ident" id="3423140">parseState</span><span class="op" id="3423150">[</span><span class="ident" id="3423151">n</span><span class="op" id="3423152">-</span><span class="num" id="3423153">1</span><span class="op" id="3423154">]</span>&nbsp;<span class="op" id="3423156">=</span>&nbsp;<span class="ident" id="3423158">parseObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423178">s</span><span class="op" id="3423179">.</span><span class="ident" id="3423180">step</span>&nbsp;<span class="op" id="3423185">=</span>&nbsp;<span class="ident" id="3423187">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423206">return</span>&nbsp;<span class="ident" id="3423213">scanObjectKey</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423233">return</span>&nbsp;<span class="ident" id="3423240">s</span><span class="op" id="3423241">.</span><span class="builtintype" id="3423242">error</span><span class="op" id="3423247">(</span><span class="ident" id="3423248">c</span><span class="op" id="3423249">,</span>&nbsp;<span class="string" id="3423251">&#34;after&nbsp;object&nbsp;key&#34;</span><span class="op" id="3423269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423272">case</span>&nbsp;<span class="ident" id="3423277">parseObjectValue</span><span class="op" id="3423293">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423297">if</span>&nbsp;<span class="ident" id="3423300">c</span>&nbsp;<span class="op" id="3423302">==</span>&nbsp;<span class="string" id="3423305">&#39;,&#39;</span>&nbsp;<span class="op" id="3423309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423314">s</span><span class="op" id="3423315">.</span><span class="ident" id="3423316">parseState</span><span class="op" id="3423326">[</span><span class="ident" id="3423327">n</span><span class="op" id="3423328">-</span><span class="num" id="3423329">1</span><span class="op" id="3423330">]</span>&nbsp;<span class="op" id="3423332">=</span>&nbsp;<span class="ident" id="3423334">parseObjectKey</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423352">s</span><span class="op" id="3423353">.</span><span class="ident" id="3423354">step</span>&nbsp;<span class="op" id="3423359">=</span>&nbsp;<span class="ident" id="3423361">stateBeginString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423381">return</span>&nbsp;<span class="ident" id="3423388">scanObjectValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423410">if</span>&nbsp;<span class="ident" id="3423413">c</span>&nbsp;<span class="op" id="3423415">==</span>&nbsp;<span class="string" id="3423418">&#39;}&#39;</span>&nbsp;<span class="op" id="3423422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423427">s</span><span class="op" id="3423428">.</span><span class="ident" id="3423429">popParseState</span><span class="op" id="3423442">(</span><span class="op" id="3423443">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423448">return</span>&nbsp;<span class="ident" id="3423455">scanEndObject</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423471">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423475">return</span>&nbsp;<span class="ident" id="3423482">s</span><span class="op" id="3423483">.</span><span class="builtintype" id="3423484">error</span><span class="op" id="3423489">(</span><span class="ident" id="3423490">c</span><span class="op" id="3423491">,</span>&nbsp;<span class="string" id="3423493">&#34;after&nbsp;object&nbsp;key:value&nbsp;pair&#34;</span><span class="op" id="3423522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423525">case</span>&nbsp;<span class="ident" id="3423530">parseArrayValue</span><span class="op" id="3423545">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423549">if</span>&nbsp;<span class="ident" id="3423552">c</span>&nbsp;<span class="op" id="3423554">==</span>&nbsp;<span class="string" id="3423557">&#39;,&#39;</span>&nbsp;<span class="op" id="3423561">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423566">s</span><span class="op" id="3423567">.</span><span class="ident" id="3423568">step</span>&nbsp;<span class="op" id="3423573">=</span>&nbsp;<span class="ident" id="3423575">stateBeginValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423594">return</span>&nbsp;<span class="ident" id="3423601">scanArrayValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423622">if</span>&nbsp;<span class="ident" id="3423625">c</span>&nbsp;<span class="op" id="3423627">==</span>&nbsp;<span class="string" id="3423630">&#39;]&#39;</span>&nbsp;<span class="op" id="3423634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3423639">s</span><span class="op" id="3423640">.</span><span class="ident" id="3423641">popParseState</span><span class="op" id="3423654">(</span><span class="op" id="3423655">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423660">return</span>&nbsp;<span class="ident" id="3423667">scanEndArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423686">return</span>&nbsp;<span class="ident" id="3423693">s</span><span class="op" id="3423694">.</span><span class="builtintype" id="3423695">error</span><span class="op" id="3423700">(</span><span class="ident" id="3423701">c</span><span class="op" id="3423702">,</span>&nbsp;<span class="string" id="3423704">&#34;after&nbsp;array&nbsp;element&#34;</span><span class="op" id="3423725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3423728">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423731">return</span>&nbsp;<span class="ident" id="3423738">s</span><span class="op" id="3423739">.</span><span class="builtintype" id="3423740">error</span><span class="op" id="3423745">(</span><span class="ident" id="3423746">c</span><span class="op" id="3423747">,</span>&nbsp;<span class="string" id="3423749">&#34;&#34;</span><span class="op" id="3423751">)</span><br>
<span class="lineno">310</span><span class="op" id="3423753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3423756">//&nbsp;stateEndTop&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;finishing&nbsp;the&nbsp;top-level&nbsp;value,</span><br>
<span class="lineno"></span><span class="comment" id="3423821">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`{}`&nbsp;or&nbsp;`[1,2,3]`.</span><br>
<span class="lineno"></span><span class="comment" id="3423865">//&nbsp;Only&nbsp;space&nbsp;characters&nbsp;should&nbsp;be&nbsp;seen&nbsp;now.</span><br>
<span class="lineno">315</span><span class="keyword" id="3423910">func</span>&nbsp;<span class="ident" id="3423915">stateEndTop</span><span class="op" id="3423926">(</span><span class="ident" id="3423927">s</span>&nbsp;<span class="op" id="3423929">*</span><span class="ident" id="3423930">scanner</span><span class="op" id="3423937">,</span>&nbsp;<span class="ident" id="3423939">c</span>&nbsp;<span class="builtintype" id="3423941">int</span><span class="op" id="3423944">)</span>&nbsp;<span class="builtintype" id="3423946">int</span>&nbsp;<span class="op" id="3423950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3423953">if</span>&nbsp;<span class="ident" id="3423956">c</span>&nbsp;<span class="op" id="3423958">!=</span>&nbsp;<span class="string" id="3423961">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3423965">&amp;&amp;</span>&nbsp;<span class="ident" id="3423968">c</span>&nbsp;<span class="op" id="3423970">!=</span>&nbsp;<span class="string" id="3423973">&#39;\t&#39;</span>&nbsp;<span class="op" id="3423978">&amp;&amp;</span>&nbsp;<span class="ident" id="3423981">c</span>&nbsp;<span class="op" id="3423983">!=</span>&nbsp;<span class="string" id="3423986">&#39;\r&#39;</span>&nbsp;<span class="op" id="3423991">&amp;&amp;</span>&nbsp;<span class="ident" id="3423994">c</span>&nbsp;<span class="op" id="3423996">!=</span>&nbsp;<span class="string" id="3423999">&#39;\n&#39;</span>&nbsp;<span class="op" id="3424004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3424008">//&nbsp;Complain&nbsp;about&nbsp;non-space&nbsp;byte&nbsp;on&nbsp;next&nbsp;call.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424057">s</span><span class="op" id="3424058">.</span><span class="builtintype" id="3424059">error</span><span class="op" id="3424064">(</span><span class="ident" id="3424065">c</span><span class="op" id="3424066">,</span>&nbsp;<span class="string" id="3424068">&#34;after&nbsp;top-level&nbsp;value&#34;</span><span class="op" id="3424091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424094">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424097">return</span>&nbsp;<span class="ident" id="3424104">scanEnd</span><br>
<span class="lineno"></span><span class="op" id="3424112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3424115">//&nbsp;stateInString&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;`.</span><br>
<span class="lineno"></span><span class="keyword" id="3424164">func</span>&nbsp;<span class="ident" id="3424169">stateInString</span><span class="op" id="3424182">(</span><span class="ident" id="3424183">s</span>&nbsp;<span class="op" id="3424185">*</span><span class="ident" id="3424186">scanner</span><span class="op" id="3424193">,</span>&nbsp;<span class="ident" id="3424195">c</span>&nbsp;<span class="builtintype" id="3424197">int</span><span class="op" id="3424200">)</span>&nbsp;<span class="builtintype" id="3424202">int</span>&nbsp;<span class="op" id="3424206">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424209">if</span>&nbsp;<span class="ident" id="3424212">c</span>&nbsp;<span class="op" id="3424214">==</span>&nbsp;<span class="string" id="3424217">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3424221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424225">s</span><span class="op" id="3424226">.</span><span class="ident" id="3424227">step</span>&nbsp;<span class="op" id="3424232">=</span>&nbsp;<span class="ident" id="3424234">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424250">return</span>&nbsp;<span class="ident" id="3424257">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424271">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424274">if</span>&nbsp;<span class="ident" id="3424277">c</span>&nbsp;<span class="op" id="3424279">==</span>&nbsp;<span class="string" id="3424282">&#39;\\&#39;</span>&nbsp;<span class="op" id="3424287">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424291">s</span><span class="op" id="3424292">.</span><span class="ident" id="3424293">step</span>&nbsp;<span class="op" id="3424298">=</span>&nbsp;<span class="ident" id="3424300">stateInStringEsc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424319">return</span>&nbsp;<span class="ident" id="3424326">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424343">if</span>&nbsp;<span class="ident" id="3424346">c</span>&nbsp;<span class="op" id="3424348">&lt;</span>&nbsp;<span class="num" id="3424350">0x20</span>&nbsp;<span class="op" id="3424355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424359">return</span>&nbsp;<span class="ident" id="3424366">s</span><span class="op" id="3424367">.</span><span class="builtintype" id="3424368">error</span><span class="op" id="3424373">(</span><span class="ident" id="3424374">c</span><span class="op" id="3424375">,</span>&nbsp;<span class="string" id="3424377">&#34;in&nbsp;string&nbsp;literal&#34;</span><span class="op" id="3424396">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424402">return</span>&nbsp;<span class="ident" id="3424409">scanContinue</span><br>
<span class="lineno"></span><span class="op" id="3424422">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3424425">//&nbsp;stateInStringEsc&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno">340</span><span class="keyword" id="3424501">func</span>&nbsp;<span class="ident" id="3424506">stateInStringEsc</span><span class="op" id="3424522">(</span><span class="ident" id="3424523">s</span>&nbsp;<span class="op" id="3424525">*</span><span class="ident" id="3424526">scanner</span><span class="op" id="3424533">,</span>&nbsp;<span class="ident" id="3424535">c</span>&nbsp;<span class="builtintype" id="3424537">int</span><span class="op" id="3424540">)</span>&nbsp;<span class="builtintype" id="3424542">int</span>&nbsp;<span class="op" id="3424546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424549">switch</span>&nbsp;<span class="ident" id="3424556">c</span>&nbsp;<span class="op" id="3424558">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424561">case</span>&nbsp;<span class="string" id="3424566">&#39;b&#39;</span><span class="op" id="3424569">,</span>&nbsp;<span class="string" id="3424571">&#39;f&#39;</span><span class="op" id="3424574">,</span>&nbsp;<span class="string" id="3424576">&#39;n&#39;</span><span class="op" id="3424579">,</span>&nbsp;<span class="string" id="3424581">&#39;r&#39;</span><span class="op" id="3424584">,</span>&nbsp;<span class="string" id="3424586">&#39;t&#39;</span><span class="op" id="3424589">,</span>&nbsp;<span class="string" id="3424591">&#39;\\&#39;</span><span class="op" id="3424595">,</span>&nbsp;<span class="string" id="3424597">&#39;/&#39;</span><span class="op" id="3424600">,</span>&nbsp;<span class="string" id="3424602">&#39;&#34;&#39;</span><span class="op" id="3424605">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424609">s</span><span class="op" id="3424610">.</span><span class="ident" id="3424611">step</span>&nbsp;<span class="op" id="3424616">=</span>&nbsp;<span class="ident" id="3424618">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424634">return</span>&nbsp;<span class="ident" id="3424641">scanContinue</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424655">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424658">if</span>&nbsp;<span class="ident" id="3424661">c</span>&nbsp;<span class="op" id="3424663">==</span>&nbsp;<span class="string" id="3424666">&#39;u&#39;</span>&nbsp;<span class="op" id="3424670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424674">s</span><span class="op" id="3424675">.</span><span class="ident" id="3424676">step</span>&nbsp;<span class="op" id="3424681">=</span>&nbsp;<span class="ident" id="3424683">stateInStringEscU</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424703">return</span>&nbsp;<span class="ident" id="3424710">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3424724">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424727">return</span>&nbsp;<span class="ident" id="3424734">s</span><span class="op" id="3424735">.</span><span class="builtintype" id="3424736">error</span><span class="op" id="3424741">(</span><span class="ident" id="3424742">c</span><span class="op" id="3424743">,</span>&nbsp;<span class="string" id="3424745">&#34;in&nbsp;string&nbsp;escape&nbsp;code&#34;</span><span class="op" id="3424768">)</span><br>
<span class="lineno"></span><span class="op" id="3424770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3424773">//&nbsp;stateInStringEscU&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3424851">func</span>&nbsp;<span class="ident" id="3424856">stateInStringEscU</span><span class="op" id="3424873">(</span><span class="ident" id="3424874">s</span>&nbsp;<span class="op" id="3424876">*</span><span class="ident" id="3424877">scanner</span><span class="op" id="3424884">,</span>&nbsp;<span class="ident" id="3424886">c</span>&nbsp;<span class="builtintype" id="3424888">int</span><span class="op" id="3424891">)</span>&nbsp;<span class="builtintype" id="3424893">int</span>&nbsp;<span class="op" id="3424897">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3424900">if</span>&nbsp;<span class="string" id="3424903">&#39;0&#39;</span>&nbsp;<span class="op" id="3424907">&lt;=</span>&nbsp;<span class="ident" id="3424910">c</span>&nbsp;<span class="op" id="3424912">&amp;&amp;</span>&nbsp;<span class="ident" id="3424915">c</span>&nbsp;<span class="op" id="3424917">&lt;=</span>&nbsp;<span class="string" id="3424920">&#39;9&#39;</span>&nbsp;<span class="op" id="3424924">||</span>&nbsp;<span class="string" id="3424927">&#39;a&#39;</span>&nbsp;<span class="op" id="3424931">&lt;=</span>&nbsp;<span class="ident" id="3424934">c</span>&nbsp;<span class="op" id="3424936">&amp;&amp;</span>&nbsp;<span class="ident" id="3424939">c</span>&nbsp;<span class="op" id="3424941">&lt;=</span>&nbsp;<span class="string" id="3424944">&#39;f&#39;</span>&nbsp;<span class="op" id="3424948">||</span>&nbsp;<span class="string" id="3424951">&#39;A&#39;</span>&nbsp;<span class="op" id="3424955">&lt;=</span>&nbsp;<span class="ident" id="3424958">c</span>&nbsp;<span class="op" id="3424960">&amp;&amp;</span>&nbsp;<span class="ident" id="3424963">c</span>&nbsp;<span class="op" id="3424965">&lt;=</span>&nbsp;<span class="string" id="3424968">&#39;F&#39;</span>&nbsp;<span class="op" id="3424972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3424976">s</span><span class="op" id="3424977">.</span><span class="ident" id="3424978">step</span>&nbsp;<span class="op" id="3424983">=</span>&nbsp;<span class="ident" id="3424985">stateInStringEscU1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425006">return</span>&nbsp;<span class="ident" id="3425013">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3425027">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3425030">//&nbsp;numbers</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425042">return</span>&nbsp;<span class="ident" id="3425049">s</span><span class="op" id="3425050">.</span><span class="builtintype" id="3425051">error</span><span class="op" id="3425056">(</span><span class="ident" id="3425057">c</span><span class="op" id="3425058">,</span>&nbsp;<span class="string" id="3425060">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="3425097">)</span><br>
<span class="lineno"></span><span class="op" id="3425099">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3425102">//&nbsp;stateInStringEscU1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u1`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3425182">func</span>&nbsp;<span class="ident" id="3425187">stateInStringEscU1</span><span class="op" id="3425205">(</span><span class="ident" id="3425206">s</span>&nbsp;<span class="op" id="3425208">*</span><span class="ident" id="3425209">scanner</span><span class="op" id="3425216">,</span>&nbsp;<span class="ident" id="3425218">c</span>&nbsp;<span class="builtintype" id="3425220">int</span><span class="op" id="3425223">)</span>&nbsp;<span class="builtintype" id="3425225">int</span>&nbsp;<span class="op" id="3425229">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425232">if</span>&nbsp;<span class="string" id="3425235">&#39;0&#39;</span>&nbsp;<span class="op" id="3425239">&lt;=</span>&nbsp;<span class="ident" id="3425242">c</span>&nbsp;<span class="op" id="3425244">&amp;&amp;</span>&nbsp;<span class="ident" id="3425247">c</span>&nbsp;<span class="op" id="3425249">&lt;=</span>&nbsp;<span class="string" id="3425252">&#39;9&#39;</span>&nbsp;<span class="op" id="3425256">||</span>&nbsp;<span class="string" id="3425259">&#39;a&#39;</span>&nbsp;<span class="op" id="3425263">&lt;=</span>&nbsp;<span class="ident" id="3425266">c</span>&nbsp;<span class="op" id="3425268">&amp;&amp;</span>&nbsp;<span class="ident" id="3425271">c</span>&nbsp;<span class="op" id="3425273">&lt;=</span>&nbsp;<span class="string" id="3425276">&#39;f&#39;</span>&nbsp;<span class="op" id="3425280">||</span>&nbsp;<span class="string" id="3425283">&#39;A&#39;</span>&nbsp;<span class="op" id="3425287">&lt;=</span>&nbsp;<span class="ident" id="3425290">c</span>&nbsp;<span class="op" id="3425292">&amp;&amp;</span>&nbsp;<span class="ident" id="3425295">c</span>&nbsp;<span class="op" id="3425297">&lt;=</span>&nbsp;<span class="string" id="3425300">&#39;F&#39;</span>&nbsp;<span class="op" id="3425304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3425308">s</span><span class="op" id="3425309">.</span><span class="ident" id="3425310">step</span>&nbsp;<span class="op" id="3425315">=</span>&nbsp;<span class="ident" id="3425317">stateInStringEscU12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425339">return</span>&nbsp;<span class="ident" id="3425346">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3425360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3425363">//&nbsp;numbers</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425375">return</span>&nbsp;<span class="ident" id="3425382">s</span><span class="op" id="3425383">.</span><span class="builtintype" id="3425384">error</span><span class="op" id="3425389">(</span><span class="ident" id="3425390">c</span><span class="op" id="3425391">,</span>&nbsp;<span class="string" id="3425393">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="3425430">)</span><br>
<span class="lineno"></span><span class="op" id="3425432">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3425435">//&nbsp;stateInStringEscU12&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u12`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3425517">func</span>&nbsp;<span class="ident" id="3425522">stateInStringEscU12</span><span class="op" id="3425541">(</span><span class="ident" id="3425542">s</span>&nbsp;<span class="op" id="3425544">*</span><span class="ident" id="3425545">scanner</span><span class="op" id="3425552">,</span>&nbsp;<span class="ident" id="3425554">c</span>&nbsp;<span class="builtintype" id="3425556">int</span><span class="op" id="3425559">)</span>&nbsp;<span class="builtintype" id="3425561">int</span>&nbsp;<span class="op" id="3425565">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425568">if</span>&nbsp;<span class="string" id="3425571">&#39;0&#39;</span>&nbsp;<span class="op" id="3425575">&lt;=</span>&nbsp;<span class="ident" id="3425578">c</span>&nbsp;<span class="op" id="3425580">&amp;&amp;</span>&nbsp;<span class="ident" id="3425583">c</span>&nbsp;<span class="op" id="3425585">&lt;=</span>&nbsp;<span class="string" id="3425588">&#39;9&#39;</span>&nbsp;<span class="op" id="3425592">||</span>&nbsp;<span class="string" id="3425595">&#39;a&#39;</span>&nbsp;<span class="op" id="3425599">&lt;=</span>&nbsp;<span class="ident" id="3425602">c</span>&nbsp;<span class="op" id="3425604">&amp;&amp;</span>&nbsp;<span class="ident" id="3425607">c</span>&nbsp;<span class="op" id="3425609">&lt;=</span>&nbsp;<span class="string" id="3425612">&#39;f&#39;</span>&nbsp;<span class="op" id="3425616">||</span>&nbsp;<span class="string" id="3425619">&#39;A&#39;</span>&nbsp;<span class="op" id="3425623">&lt;=</span>&nbsp;<span class="ident" id="3425626">c</span>&nbsp;<span class="op" id="3425628">&amp;&amp;</span>&nbsp;<span class="ident" id="3425631">c</span>&nbsp;<span class="op" id="3425633">&lt;=</span>&nbsp;<span class="string" id="3425636">&#39;F&#39;</span>&nbsp;<span class="op" id="3425640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3425644">s</span><span class="op" id="3425645">.</span><span class="ident" id="3425646">step</span>&nbsp;<span class="op" id="3425651">=</span>&nbsp;<span class="ident" id="3425653">stateInStringEscU123</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425676">return</span>&nbsp;<span class="ident" id="3425683">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3425697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3425700">//&nbsp;numbers</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425712">return</span>&nbsp;<span class="ident" id="3425719">s</span><span class="op" id="3425720">.</span><span class="builtintype" id="3425721">error</span><span class="op" id="3425726">(</span><span class="ident" id="3425727">c</span><span class="op" id="3425728">,</span>&nbsp;<span class="string" id="3425730">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="3425767">)</span><br>
<span class="lineno"></span><span class="op" id="3425769">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3425772">//&nbsp;stateInStringEscU123&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`&#34;\u123`&nbsp;during&nbsp;a&nbsp;quoted&nbsp;string.</span><br>
<span class="lineno"></span><span class="keyword" id="3425856">func</span>&nbsp;<span class="ident" id="3425861">stateInStringEscU123</span><span class="op" id="3425881">(</span><span class="ident" id="3425882">s</span>&nbsp;<span class="op" id="3425884">*</span><span class="ident" id="3425885">scanner</span><span class="op" id="3425892">,</span>&nbsp;<span class="ident" id="3425894">c</span>&nbsp;<span class="builtintype" id="3425896">int</span><span class="op" id="3425899">)</span>&nbsp;<span class="builtintype" id="3425901">int</span>&nbsp;<span class="op" id="3425905">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3425908">if</span>&nbsp;<span class="string" id="3425911">&#39;0&#39;</span>&nbsp;<span class="op" id="3425915">&lt;=</span>&nbsp;<span class="ident" id="3425918">c</span>&nbsp;<span class="op" id="3425920">&amp;&amp;</span>&nbsp;<span class="ident" id="3425923">c</span>&nbsp;<span class="op" id="3425925">&lt;=</span>&nbsp;<span class="string" id="3425928">&#39;9&#39;</span>&nbsp;<span class="op" id="3425932">||</span>&nbsp;<span class="string" id="3425935">&#39;a&#39;</span>&nbsp;<span class="op" id="3425939">&lt;=</span>&nbsp;<span class="ident" id="3425942">c</span>&nbsp;<span class="op" id="3425944">&amp;&amp;</span>&nbsp;<span class="ident" id="3425947">c</span>&nbsp;<span class="op" id="3425949">&lt;=</span>&nbsp;<span class="string" id="3425952">&#39;f&#39;</span>&nbsp;<span class="op" id="3425956">||</span>&nbsp;<span class="string" id="3425959">&#39;A&#39;</span>&nbsp;<span class="op" id="3425963">&lt;=</span>&nbsp;<span class="ident" id="3425966">c</span>&nbsp;<span class="op" id="3425968">&amp;&amp;</span>&nbsp;<span class="ident" id="3425971">c</span>&nbsp;<span class="op" id="3425973">&lt;=</span>&nbsp;<span class="string" id="3425976">&#39;F&#39;</span>&nbsp;<span class="op" id="3425980">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3425984">s</span><span class="op" id="3425985">.</span><span class="ident" id="3425986">step</span>&nbsp;<span class="op" id="3425991">=</span>&nbsp;<span class="ident" id="3425993">stateInString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426009">return</span>&nbsp;<span class="ident" id="3426016">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3426033">//&nbsp;numbers</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426045">return</span>&nbsp;<span class="ident" id="3426052">s</span><span class="op" id="3426053">.</span><span class="builtintype" id="3426054">error</span><span class="op" id="3426059">(</span><span class="ident" id="3426060">c</span><span class="op" id="3426061">,</span>&nbsp;<span class="string" id="3426063">&#34;in&nbsp;\\u&nbsp;hexadecimal&nbsp;character&nbsp;escape&#34;</span><span class="op" id="3426100">)</span><br>
<span class="lineno"></span><span class="op" id="3426102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3426105">//&nbsp;stateNeg&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`-`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="3426165">func</span>&nbsp;<span class="ident" id="3426170">stateNeg</span><span class="op" id="3426178">(</span><span class="ident" id="3426179">s</span>&nbsp;<span class="op" id="3426181">*</span><span class="ident" id="3426182">scanner</span><span class="op" id="3426189">,</span>&nbsp;<span class="ident" id="3426191">c</span>&nbsp;<span class="builtintype" id="3426193">int</span><span class="op" id="3426196">)</span>&nbsp;<span class="builtintype" id="3426198">int</span>&nbsp;<span class="op" id="3426202">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426205">if</span>&nbsp;<span class="ident" id="3426208">c</span>&nbsp;<span class="op" id="3426210">==</span>&nbsp;<span class="string" id="3426213">&#39;0&#39;</span>&nbsp;<span class="op" id="3426217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3426221">s</span><span class="op" id="3426222">.</span><span class="ident" id="3426223">step</span>&nbsp;<span class="op" id="3426228">=</span>&nbsp;<span class="ident" id="3426230">state0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426239">return</span>&nbsp;<span class="ident" id="3426246">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426260">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426263">if</span>&nbsp;<span class="string" id="3426266">&#39;1&#39;</span>&nbsp;<span class="op" id="3426270">&lt;=</span>&nbsp;<span class="ident" id="3426273">c</span>&nbsp;<span class="op" id="3426275">&amp;&amp;</span>&nbsp;<span class="ident" id="3426278">c</span>&nbsp;<span class="op" id="3426280">&lt;=</span>&nbsp;<span class="string" id="3426283">&#39;9&#39;</span>&nbsp;<span class="op" id="3426287">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3426291">s</span><span class="op" id="3426292">.</span><span class="ident" id="3426293">step</span>&nbsp;<span class="op" id="3426298">=</span>&nbsp;<span class="ident" id="3426300">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426309">return</span>&nbsp;<span class="ident" id="3426316">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426333">return</span>&nbsp;<span class="ident" id="3426340">s</span><span class="op" id="3426341">.</span><span class="builtintype" id="3426342">error</span><span class="op" id="3426347">(</span><span class="ident" id="3426348">c</span><span class="op" id="3426349">,</span>&nbsp;<span class="string" id="3426351">&#34;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="3426371">)</span><br>
<span class="lineno"></span><span class="op" id="3426373">}</span><br>
<span class="lineno">405</span><br>
<span class="lineno"></span><span class="comment" id="3426376">//&nbsp;state1&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;a&nbsp;non-zero&nbsp;integer&nbsp;during&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="3426449">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1`&nbsp;or&nbsp;`100`&nbsp;but&nbsp;not&nbsp;`0`.</span><br>
<span class="lineno"></span><span class="keyword" id="3426500">func</span>&nbsp;<span class="ident" id="3426505">state1</span><span class="op" id="3426511">(</span><span class="ident" id="3426512">s</span>&nbsp;<span class="op" id="3426514">*</span><span class="ident" id="3426515">scanner</span><span class="op" id="3426522">,</span>&nbsp;<span class="ident" id="3426524">c</span>&nbsp;<span class="builtintype" id="3426526">int</span><span class="op" id="3426529">)</span>&nbsp;<span class="builtintype" id="3426531">int</span>&nbsp;<span class="op" id="3426535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426538">if</span>&nbsp;<span class="string" id="3426541">&#39;0&#39;</span>&nbsp;<span class="op" id="3426545">&lt;=</span>&nbsp;<span class="ident" id="3426548">c</span>&nbsp;<span class="op" id="3426550">&amp;&amp;</span>&nbsp;<span class="ident" id="3426553">c</span>&nbsp;<span class="op" id="3426555">&lt;=</span>&nbsp;<span class="string" id="3426558">&#39;9&#39;</span>&nbsp;<span class="op" id="3426562">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3426566">s</span><span class="op" id="3426567">.</span><span class="ident" id="3426568">step</span>&nbsp;<span class="op" id="3426573">=</span>&nbsp;<span class="ident" id="3426575">state1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426584">return</span>&nbsp;<span class="ident" id="3426591">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426608">return</span>&nbsp;<span class="ident" id="3426615">state0</span><span class="op" id="3426621">(</span><span class="ident" id="3426622">s</span><span class="op" id="3426623">,</span>&nbsp;<span class="ident" id="3426625">c</span><span class="op" id="3426626">)</span><br>
<span class="lineno"></span><span class="op" id="3426628">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="3426631">//&nbsp;state0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`0`&nbsp;during&nbsp;a&nbsp;number.</span><br>
<span class="lineno"></span><span class="keyword" id="3426689">func</span>&nbsp;<span class="ident" id="3426694">state0</span><span class="op" id="3426700">(</span><span class="ident" id="3426701">s</span>&nbsp;<span class="op" id="3426703">*</span><span class="ident" id="3426704">scanner</span><span class="op" id="3426711">,</span>&nbsp;<span class="ident" id="3426713">c</span>&nbsp;<span class="builtintype" id="3426715">int</span><span class="op" id="3426718">)</span>&nbsp;<span class="builtintype" id="3426720">int</span>&nbsp;<span class="op" id="3426724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426727">if</span>&nbsp;<span class="ident" id="3426730">c</span>&nbsp;<span class="op" id="3426732">==</span>&nbsp;<span class="string" id="3426735">&#39;.&#39;</span>&nbsp;<span class="op" id="3426739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3426743">s</span><span class="op" id="3426744">.</span><span class="ident" id="3426745">step</span>&nbsp;<span class="op" id="3426750">=</span>&nbsp;<span class="ident" id="3426752">stateDot</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426763">return</span>&nbsp;<span class="ident" id="3426770">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426787">if</span>&nbsp;<span class="ident" id="3426790">c</span>&nbsp;<span class="op" id="3426792">==</span>&nbsp;<span class="string" id="3426795">&#39;e&#39;</span>&nbsp;<span class="op" id="3426799">||</span>&nbsp;<span class="ident" id="3426802">c</span>&nbsp;<span class="op" id="3426804">==</span>&nbsp;<span class="string" id="3426807">&#39;E&#39;</span>&nbsp;<span class="op" id="3426811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3426815">s</span><span class="op" id="3426816">.</span><span class="ident" id="3426817">step</span>&nbsp;<span class="op" id="3426822">=</span>&nbsp;<span class="ident" id="3426824">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426833">return</span>&nbsp;<span class="ident" id="3426840">scanContinue</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3426854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3426857">return</span>&nbsp;<span class="ident" id="3426864">stateEndValue</span><span class="op" id="3426877">(</span><span class="ident" id="3426878">s</span><span class="op" id="3426879">,</span>&nbsp;<span class="ident" id="3426881">c</span><span class="op" id="3426882">)</span><br>
<span class="lineno"></span><span class="op" id="3426884">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3426887">//&nbsp;stateDot&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer&nbsp;and&nbsp;decimal&nbsp;point&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno">430</span><span class="comment" id="3426969">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`1.`.</span><br>
<span class="lineno"></span><span class="keyword" id="3427000">func</span>&nbsp;<span class="ident" id="3427005">stateDot</span><span class="op" id="3427013">(</span><span class="ident" id="3427014">s</span>&nbsp;<span class="op" id="3427016">*</span><span class="ident" id="3427017">scanner</span><span class="op" id="3427024">,</span>&nbsp;<span class="ident" id="3427026">c</span>&nbsp;<span class="builtintype" id="3427028">int</span><span class="op" id="3427031">)</span>&nbsp;<span class="builtintype" id="3427033">int</span>&nbsp;<span class="op" id="3427037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427040">if</span>&nbsp;<span class="string" id="3427043">&#39;0&#39;</span>&nbsp;<span class="op" id="3427047">&lt;=</span>&nbsp;<span class="ident" id="3427050">c</span>&nbsp;<span class="op" id="3427052">&amp;&amp;</span>&nbsp;<span class="ident" id="3427055">c</span>&nbsp;<span class="op" id="3427057">&lt;=</span>&nbsp;<span class="string" id="3427060">&#39;9&#39;</span>&nbsp;<span class="op" id="3427064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3427068">s</span><span class="op" id="3427069">.</span><span class="ident" id="3427070">step</span>&nbsp;<span class="op" id="3427075">=</span>&nbsp;<span class="ident" id="3427077">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427089">return</span>&nbsp;<span class="ident" id="3427096">scanContinue</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3427110">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427113">return</span>&nbsp;<span class="ident" id="3427120">s</span><span class="op" id="3427121">.</span><span class="builtintype" id="3427122">error</span><span class="op" id="3427127">(</span><span class="ident" id="3427128">c</span><span class="op" id="3427129">,</span>&nbsp;<span class="string" id="3427131">&#34;after&nbsp;decimal&nbsp;point&nbsp;in&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="3427171">)</span><br>
<span class="lineno"></span><span class="op" id="3427173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3427176">//&nbsp;stateDot0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;integer,&nbsp;decimal&nbsp;point,&nbsp;and&nbsp;subsequent</span><br>
<span class="lineno">440</span><span class="comment" id="3427259">//&nbsp;digits&nbsp;of&nbsp;a&nbsp;number,&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`3.14`.</span><br>
<span class="lineno"></span><span class="keyword" id="3427312">func</span>&nbsp;<span class="ident" id="3427317">stateDot0</span><span class="op" id="3427326">(</span><span class="ident" id="3427327">s</span>&nbsp;<span class="op" id="3427329">*</span><span class="ident" id="3427330">scanner</span><span class="op" id="3427337">,</span>&nbsp;<span class="ident" id="3427339">c</span>&nbsp;<span class="builtintype" id="3427341">int</span><span class="op" id="3427344">)</span>&nbsp;<span class="builtintype" id="3427346">int</span>&nbsp;<span class="op" id="3427350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427353">if</span>&nbsp;<span class="string" id="3427356">&#39;0&#39;</span>&nbsp;<span class="op" id="3427360">&lt;=</span>&nbsp;<span class="ident" id="3427363">c</span>&nbsp;<span class="op" id="3427365">&amp;&amp;</span>&nbsp;<span class="ident" id="3427368">c</span>&nbsp;<span class="op" id="3427370">&lt;=</span>&nbsp;<span class="string" id="3427373">&#39;9&#39;</span>&nbsp;<span class="op" id="3427377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3427381">s</span><span class="op" id="3427382">.</span><span class="ident" id="3427383">step</span>&nbsp;<span class="op" id="3427388">=</span>&nbsp;<span class="ident" id="3427390">stateDot0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427402">return</span>&nbsp;<span class="ident" id="3427409">scanContinue</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3427423">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427426">if</span>&nbsp;<span class="ident" id="3427429">c</span>&nbsp;<span class="op" id="3427431">==</span>&nbsp;<span class="string" id="3427434">&#39;e&#39;</span>&nbsp;<span class="op" id="3427438">||</span>&nbsp;<span class="ident" id="3427441">c</span>&nbsp;<span class="op" id="3427443">==</span>&nbsp;<span class="string" id="3427446">&#39;E&#39;</span>&nbsp;<span class="op" id="3427450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3427454">s</span><span class="op" id="3427455">.</span><span class="ident" id="3427456">step</span>&nbsp;<span class="op" id="3427461">=</span>&nbsp;<span class="ident" id="3427463">stateE</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427472">return</span>&nbsp;<span class="ident" id="3427479">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3427493">}</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427496">return</span>&nbsp;<span class="ident" id="3427503">stateEndValue</span><span class="op" id="3427516">(</span><span class="ident" id="3427517">s</span><span class="op" id="3427518">,</span>&nbsp;<span class="ident" id="3427520">c</span><span class="op" id="3427521">)</span><br>
<span class="lineno"></span><span class="op" id="3427523">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3427526">//&nbsp;stateE&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa&nbsp;and&nbsp;e&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="3427595">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e`&nbsp;or&nbsp;`0.314e`.</span><br>
<span class="lineno">455</span><span class="keyword" id="3427640">func</span>&nbsp;<span class="ident" id="3427645">stateE</span><span class="op" id="3427651">(</span><span class="ident" id="3427652">s</span>&nbsp;<span class="op" id="3427654">*</span><span class="ident" id="3427655">scanner</span><span class="op" id="3427662">,</span>&nbsp;<span class="ident" id="3427664">c</span>&nbsp;<span class="builtintype" id="3427666">int</span><span class="op" id="3427669">)</span>&nbsp;<span class="builtintype" id="3427671">int</span>&nbsp;<span class="op" id="3427675">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427678">if</span>&nbsp;<span class="ident" id="3427681">c</span>&nbsp;<span class="op" id="3427683">==</span>&nbsp;<span class="string" id="3427686">&#39;+&#39;</span>&nbsp;<span class="op" id="3427690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3427694">s</span><span class="op" id="3427695">.</span><span class="ident" id="3427696">step</span>&nbsp;<span class="op" id="3427701">=</span>&nbsp;<span class="ident" id="3427703">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427716">return</span>&nbsp;<span class="ident" id="3427723">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3427737">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427740">if</span>&nbsp;<span class="ident" id="3427743">c</span>&nbsp;<span class="op" id="3427745">==</span>&nbsp;<span class="string" id="3427748">&#39;-&#39;</span>&nbsp;<span class="op" id="3427752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3427756">s</span><span class="op" id="3427757">.</span><span class="ident" id="3427758">step</span>&nbsp;<span class="op" id="3427763">=</span>&nbsp;<span class="ident" id="3427765">stateESign</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427778">return</span>&nbsp;<span class="ident" id="3427785">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3427799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427802">return</span>&nbsp;<span class="ident" id="3427809">stateESign</span><span class="op" id="3427819">(</span><span class="ident" id="3427820">s</span><span class="op" id="3427821">,</span>&nbsp;<span class="ident" id="3427823">c</span><span class="op" id="3427824">)</span><br>
<span class="lineno">465</span><span class="op" id="3427826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3427829">//&nbsp;stateESign&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;and&nbsp;sign&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="3427909">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-`&nbsp;or&nbsp;`0.314e+`.</span><br>
<span class="lineno"></span><span class="keyword" id="3427956">func</span>&nbsp;<span class="ident" id="3427961">stateESign</span><span class="op" id="3427971">(</span><span class="ident" id="3427972">s</span>&nbsp;<span class="op" id="3427974">*</span><span class="ident" id="3427975">scanner</span><span class="op" id="3427982">,</span>&nbsp;<span class="ident" id="3427984">c</span>&nbsp;<span class="builtintype" id="3427986">int</span><span class="op" id="3427989">)</span>&nbsp;<span class="builtintype" id="3427991">int</span>&nbsp;<span class="op" id="3427995">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3427998">if</span>&nbsp;<span class="string" id="3428001">&#39;0&#39;</span>&nbsp;<span class="op" id="3428005">&lt;=</span>&nbsp;<span class="ident" id="3428008">c</span>&nbsp;<span class="op" id="3428010">&amp;&amp;</span>&nbsp;<span class="ident" id="3428013">c</span>&nbsp;<span class="op" id="3428015">&lt;=</span>&nbsp;<span class="string" id="3428018">&#39;9&#39;</span>&nbsp;<span class="op" id="3428022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3428026">s</span><span class="op" id="3428027">.</span><span class="ident" id="3428028">step</span>&nbsp;<span class="op" id="3428033">=</span>&nbsp;<span class="ident" id="3428035">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428045">return</span>&nbsp;<span class="ident" id="3428052">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3428066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428069">return</span>&nbsp;<span class="ident" id="3428076">s</span><span class="op" id="3428077">.</span><span class="builtintype" id="3428078">error</span><span class="op" id="3428083">(</span><span class="ident" id="3428084">c</span><span class="op" id="3428085">,</span>&nbsp;<span class="string" id="3428087">&#34;in&nbsp;exponent&nbsp;of&nbsp;numeric&nbsp;literal&#34;</span><span class="op" id="3428119">)</span><br>
<span class="lineno">475</span><span class="op" id="3428121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3428124">//&nbsp;stateE0&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;the&nbsp;mantissa,&nbsp;e,&nbsp;optional&nbsp;sign,</span><br>
<span class="lineno"></span><span class="comment" id="3428194">//&nbsp;and&nbsp;at&nbsp;least&nbsp;one&nbsp;digit&nbsp;of&nbsp;the&nbsp;exponent&nbsp;in&nbsp;a&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="3428249">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`314e-2`&nbsp;or&nbsp;`0.314e+1`&nbsp;or&nbsp;`3.14e0`.</span><br>
<span class="lineno">480</span><span class="keyword" id="3428310">func</span>&nbsp;<span class="ident" id="3428315">stateE0</span><span class="op" id="3428322">(</span><span class="ident" id="3428323">s</span>&nbsp;<span class="op" id="3428325">*</span><span class="ident" id="3428326">scanner</span><span class="op" id="3428333">,</span>&nbsp;<span class="ident" id="3428335">c</span>&nbsp;<span class="builtintype" id="3428337">int</span><span class="op" id="3428340">)</span>&nbsp;<span class="builtintype" id="3428342">int</span>&nbsp;<span class="op" id="3428346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428349">if</span>&nbsp;<span class="string" id="3428352">&#39;0&#39;</span>&nbsp;<span class="op" id="3428356">&lt;=</span>&nbsp;<span class="ident" id="3428359">c</span>&nbsp;<span class="op" id="3428361">&amp;&amp;</span>&nbsp;<span class="ident" id="3428364">c</span>&nbsp;<span class="op" id="3428366">&lt;=</span>&nbsp;<span class="string" id="3428369">&#39;9&#39;</span>&nbsp;<span class="op" id="3428373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3428377">s</span><span class="op" id="3428378">.</span><span class="ident" id="3428379">step</span>&nbsp;<span class="op" id="3428384">=</span>&nbsp;<span class="ident" id="3428386">stateE0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428396">return</span>&nbsp;<span class="ident" id="3428403">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3428417">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428420">return</span>&nbsp;<span class="ident" id="3428427">stateEndValue</span><span class="op" id="3428440">(</span><span class="ident" id="3428441">s</span><span class="op" id="3428442">,</span>&nbsp;<span class="ident" id="3428444">c</span><span class="op" id="3428445">)</span><br>
<span class="lineno"></span><span class="op" id="3428447">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3428450">//&nbsp;stateT&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`t`.</span><br>
<span class="lineno"></span><span class="keyword" id="3428492">func</span>&nbsp;<span class="ident" id="3428497">stateT</span><span class="op" id="3428503">(</span><span class="ident" id="3428504">s</span>&nbsp;<span class="op" id="3428506">*</span><span class="ident" id="3428507">scanner</span><span class="op" id="3428514">,</span>&nbsp;<span class="ident" id="3428516">c</span>&nbsp;<span class="builtintype" id="3428518">int</span><span class="op" id="3428521">)</span>&nbsp;<span class="builtintype" id="3428523">int</span>&nbsp;<span class="op" id="3428527">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428530">if</span>&nbsp;<span class="ident" id="3428533">c</span>&nbsp;<span class="op" id="3428535">==</span>&nbsp;<span class="string" id="3428538">&#39;r&#39;</span>&nbsp;<span class="op" id="3428542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3428546">s</span><span class="op" id="3428547">.</span><span class="ident" id="3428548">step</span>&nbsp;<span class="op" id="3428553">=</span>&nbsp;<span class="ident" id="3428555">stateTr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428565">return</span>&nbsp;<span class="ident" id="3428572">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3428586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428589">return</span>&nbsp;<span class="ident" id="3428596">s</span><span class="op" id="3428597">.</span><span class="builtintype" id="3428598">error</span><span class="op" id="3428603">(</span><span class="ident" id="3428604">c</span><span class="op" id="3428605">,</span>&nbsp;<span class="string" id="3428607">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;r&#39;)&#34;</span><span class="op" id="3428640">)</span><br>
<span class="lineno">495</span><span class="op" id="3428642">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3428645">//&nbsp;stateTr&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tr`.</span><br>
<span class="lineno"></span><span class="keyword" id="3428689">func</span>&nbsp;<span class="ident" id="3428694">stateTr</span><span class="op" id="3428701">(</span><span class="ident" id="3428702">s</span>&nbsp;<span class="op" id="3428704">*</span><span class="ident" id="3428705">scanner</span><span class="op" id="3428712">,</span>&nbsp;<span class="ident" id="3428714">c</span>&nbsp;<span class="builtintype" id="3428716">int</span><span class="op" id="3428719">)</span>&nbsp;<span class="builtintype" id="3428721">int</span>&nbsp;<span class="op" id="3428725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428728">if</span>&nbsp;<span class="ident" id="3428731">c</span>&nbsp;<span class="op" id="3428733">==</span>&nbsp;<span class="string" id="3428736">&#39;u&#39;</span>&nbsp;<span class="op" id="3428740">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3428744">s</span><span class="op" id="3428745">.</span><span class="ident" id="3428746">step</span>&nbsp;<span class="op" id="3428751">=</span>&nbsp;<span class="ident" id="3428753">stateTru</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428764">return</span>&nbsp;<span class="ident" id="3428771">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3428785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428788">return</span>&nbsp;<span class="ident" id="3428795">s</span><span class="op" id="3428796">.</span><span class="builtintype" id="3428797">error</span><span class="op" id="3428802">(</span><span class="ident" id="3428803">c</span><span class="op" id="3428804">,</span>&nbsp;<span class="string" id="3428806">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="3428839">)</span><br>
<span class="lineno"></span><span class="op" id="3428841">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="comment" id="3428844">//&nbsp;stateTru&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`tru`.</span><br>
<span class="lineno"></span><span class="keyword" id="3428890">func</span>&nbsp;<span class="ident" id="3428895">stateTru</span><span class="op" id="3428903">(</span><span class="ident" id="3428904">s</span>&nbsp;<span class="op" id="3428906">*</span><span class="ident" id="3428907">scanner</span><span class="op" id="3428914">,</span>&nbsp;<span class="ident" id="3428916">c</span>&nbsp;<span class="builtintype" id="3428918">int</span><span class="op" id="3428921">)</span>&nbsp;<span class="builtintype" id="3428923">int</span>&nbsp;<span class="op" id="3428927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428930">if</span>&nbsp;<span class="ident" id="3428933">c</span>&nbsp;<span class="op" id="3428935">==</span>&nbsp;<span class="string" id="3428938">&#39;e&#39;</span>&nbsp;<span class="op" id="3428942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3428946">s</span><span class="op" id="3428947">.</span><span class="ident" id="3428948">step</span>&nbsp;<span class="op" id="3428953">=</span>&nbsp;<span class="ident" id="3428955">stateEndValue</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428971">return</span>&nbsp;<span class="ident" id="3428978">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3428992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3428995">return</span>&nbsp;<span class="ident" id="3429002">s</span><span class="op" id="3429003">.</span><span class="builtintype" id="3429004">error</span><span class="op" id="3429009">(</span><span class="ident" id="3429010">c</span><span class="op" id="3429011">,</span>&nbsp;<span class="string" id="3429013">&#34;in&nbsp;literal&nbsp;true&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="3429046">)</span><br>
<span class="lineno"></span><span class="op" id="3429048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment" id="3429051">//&nbsp;stateF&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`f`.</span><br>
<span class="lineno"></span><span class="keyword" id="3429093">func</span>&nbsp;<span class="ident" id="3429098">stateF</span><span class="op" id="3429104">(</span><span class="ident" id="3429105">s</span>&nbsp;<span class="op" id="3429107">*</span><span class="ident" id="3429108">scanner</span><span class="op" id="3429115">,</span>&nbsp;<span class="ident" id="3429117">c</span>&nbsp;<span class="builtintype" id="3429119">int</span><span class="op" id="3429122">)</span>&nbsp;<span class="builtintype" id="3429124">int</span>&nbsp;<span class="op" id="3429128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429131">if</span>&nbsp;<span class="ident" id="3429134">c</span>&nbsp;<span class="op" id="3429136">==</span>&nbsp;<span class="string" id="3429139">&#39;a&#39;</span>&nbsp;<span class="op" id="3429143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3429147">s</span><span class="op" id="3429148">.</span><span class="ident" id="3429149">step</span>&nbsp;<span class="op" id="3429154">=</span>&nbsp;<span class="ident" id="3429156">stateFa</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429166">return</span>&nbsp;<span class="ident" id="3429173">scanContinue</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3429187">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429190">return</span>&nbsp;<span class="ident" id="3429197">s</span><span class="op" id="3429198">.</span><span class="builtintype" id="3429199">error</span><span class="op" id="3429204">(</span><span class="ident" id="3429205">c</span><span class="op" id="3429206">,</span>&nbsp;<span class="string" id="3429208">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;a&#39;)&#34;</span><span class="op" id="3429242">)</span><br>
<span class="lineno"></span><span class="op" id="3429244">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3429247">//&nbsp;stateFa&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fa`.</span><br>
<span class="lineno">525</span><span class="keyword" id="3429291">func</span>&nbsp;<span class="ident" id="3429296">stateFa</span><span class="op" id="3429303">(</span><span class="ident" id="3429304">s</span>&nbsp;<span class="op" id="3429306">*</span><span class="ident" id="3429307">scanner</span><span class="op" id="3429314">,</span>&nbsp;<span class="ident" id="3429316">c</span>&nbsp;<span class="builtintype" id="3429318">int</span><span class="op" id="3429321">)</span>&nbsp;<span class="builtintype" id="3429323">int</span>&nbsp;<span class="op" id="3429327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429330">if</span>&nbsp;<span class="ident" id="3429333">c</span>&nbsp;<span class="op" id="3429335">==</span>&nbsp;<span class="string" id="3429338">&#39;l&#39;</span>&nbsp;<span class="op" id="3429342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3429346">s</span><span class="op" id="3429347">.</span><span class="ident" id="3429348">step</span>&nbsp;<span class="op" id="3429353">=</span>&nbsp;<span class="ident" id="3429355">stateFal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429366">return</span>&nbsp;<span class="ident" id="3429373">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3429387">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429390">return</span>&nbsp;<span class="ident" id="3429397">s</span><span class="op" id="3429398">.</span><span class="builtintype" id="3429399">error</span><span class="op" id="3429404">(</span><span class="ident" id="3429405">c</span><span class="op" id="3429406">,</span>&nbsp;<span class="string" id="3429408">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="3429442">)</span><br>
<span class="lineno"></span><span class="op" id="3429444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3429447">//&nbsp;stateFal&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fal`.</span><br>
<span class="lineno"></span><span class="keyword" id="3429493">func</span>&nbsp;<span class="ident" id="3429498">stateFal</span><span class="op" id="3429506">(</span><span class="ident" id="3429507">s</span>&nbsp;<span class="op" id="3429509">*</span><span class="ident" id="3429510">scanner</span><span class="op" id="3429517">,</span>&nbsp;<span class="ident" id="3429519">c</span>&nbsp;<span class="builtintype" id="3429521">int</span><span class="op" id="3429524">)</span>&nbsp;<span class="builtintype" id="3429526">int</span>&nbsp;<span class="op" id="3429530">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429533">if</span>&nbsp;<span class="ident" id="3429536">c</span>&nbsp;<span class="op" id="3429538">==</span>&nbsp;<span class="string" id="3429541">&#39;s&#39;</span>&nbsp;<span class="op" id="3429545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3429549">s</span><span class="op" id="3429550">.</span><span class="ident" id="3429551">step</span>&nbsp;<span class="op" id="3429556">=</span>&nbsp;<span class="ident" id="3429558">stateFals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429570">return</span>&nbsp;<span class="ident" id="3429577">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3429591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429594">return</span>&nbsp;<span class="ident" id="3429601">s</span><span class="op" id="3429602">.</span><span class="builtintype" id="3429603">error</span><span class="op" id="3429608">(</span><span class="ident" id="3429609">c</span><span class="op" id="3429610">,</span>&nbsp;<span class="string" id="3429612">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;s&#39;)&#34;</span><span class="op" id="3429646">)</span><br>
<span class="lineno">540</span><span class="op" id="3429648">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3429651">//&nbsp;stateFals&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`fals`.</span><br>
<span class="lineno"></span><span class="keyword" id="3429699">func</span>&nbsp;<span class="ident" id="3429704">stateFals</span><span class="op" id="3429713">(</span><span class="ident" id="3429714">s</span>&nbsp;<span class="op" id="3429716">*</span><span class="ident" id="3429717">scanner</span><span class="op" id="3429724">,</span>&nbsp;<span class="ident" id="3429726">c</span>&nbsp;<span class="builtintype" id="3429728">int</span><span class="op" id="3429731">)</span>&nbsp;<span class="builtintype" id="3429733">int</span>&nbsp;<span class="op" id="3429737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429740">if</span>&nbsp;<span class="ident" id="3429743">c</span>&nbsp;<span class="op" id="3429745">==</span>&nbsp;<span class="string" id="3429748">&#39;e&#39;</span>&nbsp;<span class="op" id="3429752">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3429756">s</span><span class="op" id="3429757">.</span><span class="ident" id="3429758">step</span>&nbsp;<span class="op" id="3429763">=</span>&nbsp;<span class="ident" id="3429765">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429781">return</span>&nbsp;<span class="ident" id="3429788">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3429802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429805">return</span>&nbsp;<span class="ident" id="3429812">s</span><span class="op" id="3429813">.</span><span class="builtintype" id="3429814">error</span><span class="op" id="3429819">(</span><span class="ident" id="3429820">c</span><span class="op" id="3429821">,</span>&nbsp;<span class="string" id="3429823">&#34;in&nbsp;literal&nbsp;false&nbsp;(expecting&nbsp;&#39;e&#39;)&#34;</span><span class="op" id="3429857">)</span><br>
<span class="lineno"></span><span class="op" id="3429859">}</span><br>
<span class="lineno">550</span><br>
<span class="lineno"></span><span class="comment" id="3429862">//&nbsp;stateN&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`n`.</span><br>
<span class="lineno"></span><span class="keyword" id="3429904">func</span>&nbsp;<span class="ident" id="3429909">stateN</span><span class="op" id="3429915">(</span><span class="ident" id="3429916">s</span>&nbsp;<span class="op" id="3429918">*</span><span class="ident" id="3429919">scanner</span><span class="op" id="3429926">,</span>&nbsp;<span class="ident" id="3429928">c</span>&nbsp;<span class="builtintype" id="3429930">int</span><span class="op" id="3429933">)</span>&nbsp;<span class="builtintype" id="3429935">int</span>&nbsp;<span class="op" id="3429939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429942">if</span>&nbsp;<span class="ident" id="3429945">c</span>&nbsp;<span class="op" id="3429947">==</span>&nbsp;<span class="string" id="3429950">&#39;u&#39;</span>&nbsp;<span class="op" id="3429954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3429958">s</span><span class="op" id="3429959">.</span><span class="ident" id="3429960">step</span>&nbsp;<span class="op" id="3429965">=</span>&nbsp;<span class="ident" id="3429967">stateNu</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3429977">return</span>&nbsp;<span class="ident" id="3429984">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3429998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430001">return</span>&nbsp;<span class="ident" id="3430008">s</span><span class="op" id="3430009">.</span><span class="builtintype" id="3430010">error</span><span class="op" id="3430015">(</span><span class="ident" id="3430016">c</span><span class="op" id="3430017">,</span>&nbsp;<span class="string" id="3430019">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;u&#39;)&#34;</span><span class="op" id="3430052">)</span><br>
<span class="lineno"></span><span class="op" id="3430054">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="comment" id="3430057">//&nbsp;stateNu&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nu`.</span><br>
<span class="lineno"></span><span class="keyword" id="3430101">func</span>&nbsp;<span class="ident" id="3430106">stateNu</span><span class="op" id="3430113">(</span><span class="ident" id="3430114">s</span>&nbsp;<span class="op" id="3430116">*</span><span class="ident" id="3430117">scanner</span><span class="op" id="3430124">,</span>&nbsp;<span class="ident" id="3430126">c</span>&nbsp;<span class="builtintype" id="3430128">int</span><span class="op" id="3430131">)</span>&nbsp;<span class="builtintype" id="3430133">int</span>&nbsp;<span class="op" id="3430137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430140">if</span>&nbsp;<span class="ident" id="3430143">c</span>&nbsp;<span class="op" id="3430145">==</span>&nbsp;<span class="string" id="3430148">&#39;l&#39;</span>&nbsp;<span class="op" id="3430152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3430156">s</span><span class="op" id="3430157">.</span><span class="ident" id="3430158">step</span>&nbsp;<span class="op" id="3430163">=</span>&nbsp;<span class="ident" id="3430165">stateNul</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430176">return</span>&nbsp;<span class="ident" id="3430183">scanContinue</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3430197">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430200">return</span>&nbsp;<span class="ident" id="3430207">s</span><span class="op" id="3430208">.</span><span class="builtintype" id="3430209">error</span><span class="op" id="3430214">(</span><span class="ident" id="3430215">c</span><span class="op" id="3430216">,</span>&nbsp;<span class="string" id="3430218">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="3430251">)</span><br>
<span class="lineno"></span><span class="op" id="3430253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3430256">//&nbsp;stateNul&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reading&nbsp;`nul`.</span><br>
<span class="lineno">570</span><span class="keyword" id="3430302">func</span>&nbsp;<span class="ident" id="3430307">stateNul</span><span class="op" id="3430315">(</span><span class="ident" id="3430316">s</span>&nbsp;<span class="op" id="3430318">*</span><span class="ident" id="3430319">scanner</span><span class="op" id="3430326">,</span>&nbsp;<span class="ident" id="3430328">c</span>&nbsp;<span class="builtintype" id="3430330">int</span><span class="op" id="3430333">)</span>&nbsp;<span class="builtintype" id="3430335">int</span>&nbsp;<span class="op" id="3430339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430342">if</span>&nbsp;<span class="ident" id="3430345">c</span>&nbsp;<span class="op" id="3430347">==</span>&nbsp;<span class="string" id="3430350">&#39;l&#39;</span>&nbsp;<span class="op" id="3430354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3430358">s</span><span class="op" id="3430359">.</span><span class="ident" id="3430360">step</span>&nbsp;<span class="op" id="3430365">=</span>&nbsp;<span class="ident" id="3430367">stateEndValue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430383">return</span>&nbsp;<span class="ident" id="3430390">scanContinue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3430404">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430407">return</span>&nbsp;<span class="ident" id="3430414">s</span><span class="op" id="3430415">.</span><span class="builtintype" id="3430416">error</span><span class="op" id="3430421">(</span><span class="ident" id="3430422">c</span><span class="op" id="3430423">,</span>&nbsp;<span class="string" id="3430425">&#34;in&nbsp;literal&nbsp;null&nbsp;(expecting&nbsp;&#39;l&#39;)&#34;</span><span class="op" id="3430458">)</span><br>
<span class="lineno"></span><span class="op" id="3430460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3430463">//&nbsp;stateError&nbsp;is&nbsp;the&nbsp;state&nbsp;after&nbsp;reaching&nbsp;a&nbsp;syntax&nbsp;error,</span><br>
<span class="lineno"></span><span class="comment" id="3430521">//&nbsp;such&nbsp;as&nbsp;after&nbsp;reading&nbsp;`[1}`&nbsp;or&nbsp;`5.1.2`.</span><br>
<span class="lineno">580</span><span class="keyword" id="3430564">func</span>&nbsp;<span class="ident" id="3430569">stateError</span><span class="op" id="3430579">(</span><span class="ident" id="3430580">s</span>&nbsp;<span class="op" id="3430582">*</span><span class="ident" id="3430583">scanner</span><span class="op" id="3430590">,</span>&nbsp;<span class="ident" id="3430592">c</span>&nbsp;<span class="builtintype" id="3430594">int</span><span class="op" id="3430597">)</span>&nbsp;<span class="builtintype" id="3430599">int</span>&nbsp;<span class="op" id="3430603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430606">return</span>&nbsp;<span class="ident" id="3430613">scanError</span><br>
<span class="lineno"></span><span class="op" id="3430623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3430626">//&nbsp;error&nbsp;records&nbsp;an&nbsp;error&nbsp;and&nbsp;switches&nbsp;to&nbsp;the&nbsp;error&nbsp;state.</span><br>
<span class="lineno">585</span><span class="keyword" id="3430685">func</span>&nbsp;<span class="op" id="3430690">(</span><span class="ident" id="3430691">s</span>&nbsp;<span class="op" id="3430693">*</span><span class="ident" id="3430694">scanner</span><span class="op" id="3430701">)</span>&nbsp;<span class="builtintype" id="3430703">error</span><span class="op" id="3430708">(</span><span class="ident" id="3430709">c</span>&nbsp;<span class="builtintype" id="3430711">int</span><span class="op" id="3430714">,</span>&nbsp;<span class="ident" id="3430716">context</span>&nbsp;<span class="builtintype" id="3430724">string</span><span class="op" id="3430730">)</span>&nbsp;<span class="builtintype" id="3430732">int</span>&nbsp;<span class="op" id="3430736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3430739">s</span><span class="op" id="3430740">.</span><span class="ident" id="3430741">step</span>&nbsp;<span class="op" id="3430746">=</span>&nbsp;<span class="ident" id="3430748">stateError</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3430760">s</span><span class="op" id="3430761">.</span><span class="ident" id="3430762">err</span>&nbsp;<span class="op" id="3430766">=</span>&nbsp;<span class="op" id="3430768">&amp;</span><span class="ident" id="3430769">SyntaxError</span><span class="op" id="3430780">{</span><span class="string" id="3430781">&#34;invalid&nbsp;character&nbsp;&#34;</span>&nbsp;<span class="op" id="3430802">+</span>&nbsp;<span class="ident" id="3430804">quoteChar</span><span class="op" id="3430813">(</span><span class="ident" id="3430814">c</span><span class="op" id="3430815">)</span>&nbsp;<span class="op" id="3430817">+</span>&nbsp;<span class="string" id="3430819">&#34;&nbsp;&#34;</span>&nbsp;<span class="op" id="3430823">+</span>&nbsp;<span class="ident" id="3430825">context</span><span class="op" id="3430832">,</span>&nbsp;<span class="ident" id="3430834">s</span><span class="op" id="3430835">.</span><span class="ident" id="3430836">bytes</span><span class="op" id="3430841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430844">return</span>&nbsp;<span class="ident" id="3430851">scanError</span><br>
<span class="lineno"></span><span class="op" id="3430861">}</span><br>
<span class="lineno">590</span><br>
<span class="lineno"></span><span class="comment" id="3430864">//&nbsp;quoteChar&nbsp;formats&nbsp;c&nbsp;as&nbsp;a&nbsp;quoted&nbsp;character&nbsp;literal</span><br>
<span class="lineno"></span><span class="keyword" id="3430917">func</span>&nbsp;<span class="ident" id="3430922">quoteChar</span><span class="op" id="3430931">(</span><span class="ident" id="3430932">c</span>&nbsp;<span class="builtintype" id="3430934">int</span><span class="op" id="3430937">)</span>&nbsp;<span class="builtintype" id="3430939">string</span>&nbsp;<span class="op" id="3430946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3430949">//&nbsp;special&nbsp;cases&nbsp;-&nbsp;different&nbsp;from&nbsp;quoted&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3430999">if</span>&nbsp;<span class="ident" id="3431002">c</span>&nbsp;<span class="op" id="3431004">==</span>&nbsp;<span class="string" id="3431007">&#39;\&#39;&#39;</span>&nbsp;<span class="op" id="3431012">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431016">return</span>&nbsp;<span class="string" id="3431023">`&#39;\&#39;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3431031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431034">if</span>&nbsp;<span class="ident" id="3431037">c</span>&nbsp;<span class="op" id="3431039">==</span>&nbsp;<span class="string" id="3431042">&#39;&#34;&#39;</span>&nbsp;<span class="op" id="3431046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431050">return</span>&nbsp;<span class="string" id="3431057">`&#39;&#34;&#39;`</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3431064">}</span><br>
<span class="lineno">600</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3431068">//&nbsp;use&nbsp;quoted&nbsp;string&nbsp;with&nbsp;different&nbsp;quotation&nbsp;marks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431121">s</span>&nbsp;<span class="op" id="3431123">:=</span>&nbsp;<span class="ident" id="3431126">strconv</span><span class="op" id="3431133">.</span><span class="ident" id="3431134">Quote</span><span class="op" id="3431139">(</span><span class="builtintype" id="3431140">string</span><span class="op" id="3431146">(</span><span class="ident" id="3431147">c</span><span class="op" id="3431148">)</span><span class="op" id="3431149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431152">return</span>&nbsp;<span class="string" id="3431159">&#34;&#39;&#34;</span>&nbsp;<span class="op" id="3431163">+</span>&nbsp;<span class="ident" id="3431165">s</span><span class="op" id="3431166">[</span><span class="num" id="3431167">1</span><span class="op" id="3431168">:</span><span class="builtinfunc" id="3431169">len</span><span class="op" id="3431172">(</span><span class="ident" id="3431173">s</span><span class="op" id="3431174">)</span><span class="op" id="3431175">-</span><span class="num" id="3431176">1</span><span class="op" id="3431177">]</span>&nbsp;<span class="op" id="3431179">+</span>&nbsp;<span class="string" id="3431181">&#34;&#39;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3431185">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span><span class="comment" id="3431188">//&nbsp;undo&nbsp;causes&nbsp;the&nbsp;scanner&nbsp;to&nbsp;return&nbsp;scanCode&nbsp;from&nbsp;the&nbsp;next&nbsp;state&nbsp;transition.</span><br>
<span class="lineno"></span><span class="comment" id="3431266">//&nbsp;This&nbsp;gives&nbsp;callers&nbsp;a&nbsp;simple&nbsp;1-byte&nbsp;undo&nbsp;mechanism.</span><br>
<span class="lineno"></span><span class="keyword" id="3431320">func</span>&nbsp;<span class="op" id="3431325">(</span><span class="ident" id="3431326">s</span>&nbsp;<span class="op" id="3431328">*</span><span class="ident" id="3431329">scanner</span><span class="op" id="3431336">)</span>&nbsp;<span class="ident" id="3431338">undo</span><span class="op" id="3431342">(</span><span class="ident" id="3431343">scanCode</span>&nbsp;<span class="builtintype" id="3431352">int</span><span class="op" id="3431355">)</span>&nbsp;<span class="op" id="3431357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431360">if</span>&nbsp;<span class="ident" id="3431363">s</span><span class="op" id="3431364">.</span><span class="ident" id="3431365">redo</span>&nbsp;<span class="op" id="3431370">{</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3431374">panic</span><span class="op" id="3431379">(</span><span class="string" id="3431380">&#34;json:&nbsp;invalid&nbsp;use&nbsp;of&nbsp;scanner&#34;</span><span class="op" id="3431410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3431413">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431416">s</span><span class="op" id="3431417">.</span><span class="ident" id="3431418">redoCode</span>&nbsp;<span class="op" id="3431427">=</span>&nbsp;<span class="ident" id="3431429">scanCode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431439">s</span><span class="op" id="3431440">.</span><span class="ident" id="3431441">redoState</span>&nbsp;<span class="op" id="3431451">=</span>&nbsp;<span class="ident" id="3431453">s</span><span class="op" id="3431454">.</span><span class="ident" id="3431455">step</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431461">s</span><span class="op" id="3431462">.</span><span class="ident" id="3431463">step</span>&nbsp;<span class="op" id="3431468">=</span>&nbsp;<span class="ident" id="3431470">stateRedo</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431481">s</span><span class="op" id="3431482">.</span><span class="ident" id="3431483">redo</span>&nbsp;<span class="op" id="3431488">=</span>&nbsp;<span class="builtintype" id="3431490">true</span><br>
<span class="lineno"></span><span class="op" id="3431495">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3431498">//&nbsp;stateRedo&nbsp;helps&nbsp;implement&nbsp;the&nbsp;scanner&#39;s&nbsp;1-byte&nbsp;undo.</span><br>
<span class="lineno"></span><span class="keyword" id="3431554">func</span>&nbsp;<span class="ident" id="3431559">stateRedo</span><span class="op" id="3431568">(</span><span class="ident" id="3431569">s</span>&nbsp;<span class="op" id="3431571">*</span><span class="ident" id="3431572">scanner</span><span class="op" id="3431579">,</span>&nbsp;<span class="ident" id="3431581">c</span>&nbsp;<span class="builtintype" id="3431583">int</span><span class="op" id="3431586">)</span>&nbsp;<span class="builtintype" id="3431588">int</span>&nbsp;<span class="op" id="3431592">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431595">s</span><span class="op" id="3431596">.</span><span class="ident" id="3431597">redo</span>&nbsp;<span class="op" id="3431602">=</span>&nbsp;<span class="builtintype" id="3431604">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3431611">s</span><span class="op" id="3431612">.</span><span class="ident" id="3431613">step</span>&nbsp;<span class="op" id="3431618">=</span>&nbsp;<span class="ident" id="3431620">s</span><span class="op" id="3431621">.</span><span class="ident" id="3431622">redoState</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3431633">return</span>&nbsp;<span class="ident" id="3431640">s</span><span class="op" id="3431641">.</span><span class="ident" id="3431642">redoCode</span><br>
<span class="lineno"></span><span class="op" id="3431651">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
