<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/mail</h2>
<ul>
<li><a href="/gostd/net/mail/message.go.html">message.go</a></li>
<li><a href="/gostd/net/mail/message_test.go.html" class="current">message_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7745005">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7745060">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7745114">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7745165">package</span>&nbsp;<span class="ident" id="7745173">mail</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745179">import</span>&nbsp;<span class="op" id="7745186">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745189">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745198">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745211">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745222">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745233">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745244">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7745251">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7745254">var</span>&nbsp;<span class="ident" id="7745258">parseTests</span>&nbsp;<span class="op" id="7745269">=</span>&nbsp;<span class="op" id="7745271">[</span><span class="op" id="7745272">]</span><span class="keyword" id="7745273">struct</span>&nbsp;<span class="op" id="7745280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745283">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7745290">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745298">header</span>&nbsp;<span class="ident" id="7745305">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745313">body</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7745320">string</span><br>
<span class="lineno">20</span><span class="op" id="7745327">}</span><span class="op" id="7745328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7745335">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745365">in</span><span class="op" id="7745367">:</span>&nbsp;<span class="string" id="7745369">`From:&nbsp;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;<br>
<span class="lineno"></span>To:&nbsp;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;<br>
<span class="lineno">25</span>Subject:&nbsp;Saying&nbsp;Hello<br>
<span class="lineno"></span>Date:&nbsp;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600<br>
<span class="lineno"></span>Message-ID:&nbsp;&lt;1234@local.machine.example&gt;<br>
<span class="lineno"></span><br>
<span class="lineno"></span>This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.<br>
<span class="lineno">30</span>So,&nbsp;&#34;Hello&#34;.<br>
<span class="lineno"></span>`</span><span class="op" id="7745595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745599">header</span><span class="op" id="7745605">:</span>&nbsp;<span class="ident" id="7745607">Header</span><span class="op" id="7745613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745618">&#34;From&#34;</span><span class="op" id="7745624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745632">[</span><span class="op" id="7745633">]</span><span class="builtintype" id="7745634">string</span><span class="op" id="7745640">{</span><span class="string" id="7745641">&#34;John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;&#34;</span><span class="op" id="7745674">}</span><span class="op" id="7745675">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745680">&#34;To&#34;</span><span class="op" id="7745684">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745694">[</span><span class="op" id="7745695">]</span><span class="builtintype" id="7745696">string</span><span class="op" id="7745702">{</span><span class="string" id="7745703">&#34;Mary&nbsp;Smith&nbsp;&lt;mary@example.net&gt;&#34;</span><span class="op" id="7745734">}</span><span class="op" id="7745735">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745740">&#34;Subject&#34;</span><span class="op" id="7745749">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745754">[</span><span class="op" id="7745755">]</span><span class="builtintype" id="7745756">string</span><span class="op" id="7745762">{</span><span class="string" id="7745763">&#34;Saying&nbsp;Hello&#34;</span><span class="op" id="7745777">}</span><span class="op" id="7745778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745783">&#34;Date&#34;</span><span class="op" id="7745789">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7745797">[</span><span class="op" id="7745798">]</span><span class="builtintype" id="7745799">string</span><span class="op" id="7745805">{</span><span class="string" id="7745806">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7745839">}</span><span class="op" id="7745840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7745845">&#34;Message-Id&#34;</span><span class="op" id="7745857">:</span>&nbsp;<span class="op" id="7745859">[</span><span class="op" id="7745860">]</span><span class="builtintype" id="7745861">string</span><span class="op" id="7745867">{</span><span class="string" id="7745868">&#34;&lt;1234@local.machine.example&gt;&#34;</span><span class="op" id="7745898">}</span><span class="op" id="7745899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745903">}</span><span class="op" id="7745904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7745908">body</span><span class="op" id="7745912">:</span>&nbsp;<span class="string" id="7745914">&#34;This&nbsp;is&nbsp;a&nbsp;message&nbsp;just&nbsp;to&nbsp;say&nbsp;hello.\nSo,&nbsp;\&#34;Hello\&#34;.\n&#34;</span><span class="op" id="7745970">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7745973">}</span><span class="op" id="7745974">,</span><br>
<span class="lineno"></span><span class="op" id="7745976">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7745979">func</span>&nbsp;<span class="ident" id="7745984">TestParsing</span><span class="op" id="7745995">(</span><span class="ident" id="7745996">t</span>&nbsp;<span class="op" id="7745998">*</span><span class="ident" id="7745999">testing</span><span class="op" id="7746006">.</span><span class="ident" id="7746007">T</span><span class="op" id="7746008">)</span>&nbsp;<span class="op" id="7746010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746013">for</span>&nbsp;<span class="ident" id="7746017">i</span><span class="op" id="7746018">,</span>&nbsp;<span class="ident" id="7746020">test</span>&nbsp;<span class="op" id="7746025">:=</span>&nbsp;<span class="keyword" id="7746028">range</span>&nbsp;<span class="ident" id="7746034">parseTests</span>&nbsp;<span class="op" id="7746045">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746049">msg</span><span class="op" id="7746052">,</span>&nbsp;<span class="ident" id="7746054">err</span>&nbsp;<span class="op" id="7746058">:=</span>&nbsp;<span class="ident" id="7746061">ReadMessage</span><span class="op" id="7746072">(</span><span class="ident" id="7746073">bytes</span><span class="op" id="7746078">.</span><span class="ident" id="7746079">NewBuffer</span><span class="op" id="7746088">(</span><span class="op" id="7746089">[</span><span class="op" id="7746090">]</span><span class="builtintype" id="7746091">byte</span><span class="op" id="7746095">(</span><span class="ident" id="7746096">test</span><span class="op" id="7746100">.</span><span class="ident" id="7746101">in</span><span class="op" id="7746103">)</span><span class="op" id="7746104">)</span><span class="op" id="7746105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746109">if</span>&nbsp;<span class="ident" id="7746112">err</span>&nbsp;<span class="op" id="7746116">!=</span>&nbsp;<span class="ident" id="7746119">nil</span>&nbsp;<span class="op" id="7746123">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746128">t</span><span class="op" id="7746129">.</span><span class="ident" id="7746130">Errorf</span><span class="op" id="7746136">(</span><span class="string" id="7746137">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;parsing&nbsp;message:&nbsp;%v&#34;</span><span class="op" id="7746175">,</span>&nbsp;<span class="ident" id="7746177">i</span><span class="op" id="7746178">,</span>&nbsp;<span class="ident" id="7746180">err</span><span class="op" id="7746183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746188">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746199">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746203">if</span>&nbsp;<span class="op" id="7746206">!</span><span class="ident" id="7746207">headerEq</span><span class="op" id="7746215">(</span><span class="ident" id="7746216">msg</span><span class="op" id="7746219">.</span><span class="ident" id="7746220">Header</span><span class="op" id="7746226">,</span>&nbsp;<span class="ident" id="7746228">test</span><span class="op" id="7746232">.</span><span class="ident" id="7746233">header</span><span class="op" id="7746239">)</span>&nbsp;<span class="op" id="7746241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746246">t</span><span class="op" id="7746247">.</span><span class="ident" id="7746248">Errorf</span><span class="op" id="7746254">(</span><span class="string" id="7746255">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;header.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7746324">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746330">i</span><span class="op" id="7746331">,</span>&nbsp;<span class="ident" id="7746333">msg</span><span class="op" id="7746336">.</span><span class="ident" id="7746337">Header</span><span class="op" id="7746343">,</span>&nbsp;<span class="ident" id="7746345">test</span><span class="op" id="7746349">.</span><span class="ident" id="7746350">header</span><span class="op" id="7746356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746364">body</span><span class="op" id="7746368">,</span>&nbsp;<span class="ident" id="7746370">err</span>&nbsp;<span class="op" id="7746374">:=</span>&nbsp;<span class="ident" id="7746377">ioutil</span><span class="op" id="7746383">.</span><span class="ident" id="7746384">ReadAll</span><span class="op" id="7746391">(</span><span class="ident" id="7746392">msg</span><span class="op" id="7746395">.</span><span class="ident" id="7746396">Body</span><span class="op" id="7746400">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746404">if</span>&nbsp;<span class="ident" id="7746407">err</span>&nbsp;<span class="op" id="7746411">!=</span>&nbsp;<span class="ident" id="7746414">nil</span>&nbsp;<span class="op" id="7746418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746423">t</span><span class="op" id="7746424">.</span><span class="ident" id="7746425">Errorf</span><span class="op" id="7746431">(</span><span class="string" id="7746432">&#34;test&nbsp;#%d:&nbsp;Failed&nbsp;reading&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="7746467">,</span>&nbsp;<span class="ident" id="7746469">i</span><span class="op" id="7746470">,</span>&nbsp;<span class="ident" id="7746472">err</span><span class="op" id="7746475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746480">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746491">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746495">bodyStr</span>&nbsp;<span class="op" id="7746503">:=</span>&nbsp;<span class="builtintype" id="7746506">string</span><span class="op" id="7746512">(</span><span class="ident" id="7746513">body</span><span class="op" id="7746517">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746521">if</span>&nbsp;<span class="ident" id="7746524">bodyStr</span>&nbsp;<span class="op" id="7746532">!=</span>&nbsp;<span class="ident" id="7746535">test</span><span class="op" id="7746539">.</span><span class="ident" id="7746540">body</span>&nbsp;<span class="op" id="7746545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746550">t</span><span class="op" id="7746551">.</span><span class="ident" id="7746552">Errorf</span><span class="op" id="7746558">(</span><span class="string" id="7746559">&#34;test&nbsp;#%d:&nbsp;Incorrectly&nbsp;parsed&nbsp;message&nbsp;body.\nGot:\n%+v\nWant:\n%+v&#34;</span><span class="op" id="7746626">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746632">i</span><span class="op" id="7746633">,</span>&nbsp;<span class="ident" id="7746635">bodyStr</span><span class="op" id="7746642">,</span>&nbsp;<span class="ident" id="7746644">test</span><span class="op" id="7746648">.</span><span class="ident" id="7746649">body</span><span class="op" id="7746653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746657">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746660">}</span><br>
<span class="lineno">65</span><span class="op" id="7746662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7746665">func</span>&nbsp;<span class="ident" id="7746670">headerEq</span><span class="op" id="7746678">(</span><span class="ident" id="7746679">a</span><span class="op" id="7746680">,</span>&nbsp;<span class="ident" id="7746682">b</span>&nbsp;<span class="ident" id="7746684">Header</span><span class="op" id="7746690">)</span>&nbsp;<span class="builtintype" id="7746692">bool</span>&nbsp;<span class="op" id="7746697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746700">if</span>&nbsp;<span class="builtinfunc" id="7746703">len</span><span class="op" id="7746706">(</span><span class="ident" id="7746707">a</span><span class="op" id="7746708">)</span>&nbsp;<span class="op" id="7746710">!=</span>&nbsp;<span class="builtinfunc" id="7746713">len</span><span class="op" id="7746716">(</span><span class="ident" id="7746717">b</span><span class="op" id="7746718">)</span>&nbsp;<span class="op" id="7746720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746724">return</span>&nbsp;<span class="builtintype" id="7746731">false</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746741">for</span>&nbsp;<span class="ident" id="7746745">k</span><span class="op" id="7746746">,</span>&nbsp;<span class="ident" id="7746748">as</span>&nbsp;<span class="op" id="7746751">:=</span>&nbsp;<span class="keyword" id="7746754">range</span>&nbsp;<span class="ident" id="7746760">a</span>&nbsp;<span class="op" id="7746762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746766">bs</span><span class="op" id="7746768">,</span>&nbsp;<span class="ident" id="7746770">ok</span>&nbsp;<span class="op" id="7746773">:=</span>&nbsp;<span class="ident" id="7746776">b</span><span class="op" id="7746777">[</span><span class="ident" id="7746778">k</span><span class="op" id="7746779">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746783">if</span>&nbsp;<span class="op" id="7746786">!</span><span class="ident" id="7746787">ok</span>&nbsp;<span class="op" id="7746790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746795">return</span>&nbsp;<span class="builtintype" id="7746802">false</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746810">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746814">if</span>&nbsp;<span class="op" id="7746817">!</span><span class="ident" id="7746818">reflect</span><span class="op" id="7746825">.</span><span class="ident" id="7746826">DeepEqual</span><span class="op" id="7746835">(</span><span class="ident" id="7746836">as</span><span class="op" id="7746838">,</span>&nbsp;<span class="ident" id="7746840">bs</span><span class="op" id="7746842">)</span>&nbsp;<span class="op" id="7746844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746849">return</span>&nbsp;<span class="builtintype" id="7746856">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746867">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7746870">return</span>&nbsp;<span class="builtintype" id="7746877">true</span><br>
<span class="lineno"></span><span class="op" id="7746882">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7746885">func</span>&nbsp;<span class="ident" id="7746890">TestDateParsing</span><span class="op" id="7746905">(</span><span class="ident" id="7746906">t</span>&nbsp;<span class="op" id="7746908">*</span><span class="ident" id="7746909">testing</span><span class="op" id="7746916">.</span><span class="ident" id="7746917">T</span><span class="op" id="7746918">)</span>&nbsp;<span class="op" id="7746920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746923">tests</span>&nbsp;<span class="op" id="7746929">:=</span>&nbsp;<span class="op" id="7746932">[</span><span class="op" id="7746933">]</span><span class="keyword" id="7746934">struct</span>&nbsp;<span class="op" id="7746941">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746945">dateStr</span>&nbsp;<span class="builtintype" id="7746953">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7746962">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7746970">time</span><span class="op" id="7746974">.</span><span class="ident" id="7746975">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7746981">}</span><span class="op" id="7746982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7746986">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747016">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7747021">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&#34;</span><span class="op" id="7747054">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747059">time</span><span class="op" id="7747063">.</span><span class="ident" id="7747064">Date</span><span class="op" id="7747068">(</span><span class="num" id="7747069">1997</span><span class="op" id="7747073">,</span>&nbsp;<span class="num" id="7747075">11</span><span class="op" id="7747077">,</span>&nbsp;<span class="num" id="7747079">21</span><span class="op" id="7747081">,</span>&nbsp;<span class="num" id="7747083">9</span><span class="op" id="7747084">,</span>&nbsp;<span class="num" id="7747086">55</span><span class="op" id="7747088">,</span>&nbsp;<span class="num" id="7747090">6</span><span class="op" id="7747091">,</span>&nbsp;<span class="num" id="7747093">0</span><span class="op" id="7747094">,</span>&nbsp;<span class="ident" id="7747096">time</span><span class="op" id="7747100">.</span><span class="ident" id="7747101">FixedZone</span><span class="op" id="7747110">(</span><span class="string" id="7747111">&#34;&#34;</span><span class="op" id="7747113">,</span>&nbsp;<span class="op" id="7747115">-</span><span class="num" id="7747116">6</span><span class="op" id="7747117">*</span><span class="num" id="7747118">60</span><span class="op" id="7747120">*</span><span class="num" id="7747121">60</span><span class="op" id="7747123">)</span><span class="op" id="7747124">)</span><span class="op" id="7747125">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747129">}</span><span class="op" id="7747130">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7747134">//&nbsp;RFC5322,&nbsp;Appendix&nbsp;A.6.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7747163">//&nbsp;Obsolete&nbsp;date.</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7747188">&#34;21&nbsp;Nov&nbsp;97&nbsp;09:55:06&nbsp;GMT&#34;</span><span class="op" id="7747212">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747217">time</span><span class="op" id="7747221">.</span><span class="ident" id="7747222">Date</span><span class="op" id="7747226">(</span><span class="num" id="7747227">1997</span><span class="op" id="7747231">,</span>&nbsp;<span class="num" id="7747233">11</span><span class="op" id="7747235">,</span>&nbsp;<span class="num" id="7747237">21</span><span class="op" id="7747239">,</span>&nbsp;<span class="num" id="7747241">9</span><span class="op" id="7747242">,</span>&nbsp;<span class="num" id="7747244">55</span><span class="op" id="7747246">,</span>&nbsp;<span class="num" id="7747248">6</span><span class="op" id="7747249">,</span>&nbsp;<span class="num" id="7747251">0</span><span class="op" id="7747252">,</span>&nbsp;<span class="ident" id="7747254">time</span><span class="op" id="7747258">.</span><span class="ident" id="7747259">FixedZone</span><span class="op" id="7747268">(</span><span class="string" id="7747269">&#34;GMT&#34;</span><span class="op" id="7747274">,</span>&nbsp;<span class="num" id="7747276">0</span><span class="op" id="7747277">)</span><span class="op" id="7747278">)</span><span class="op" id="7747279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747283">}</span><span class="op" id="7747284">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7747288">//&nbsp;Commonly&nbsp;found&nbsp;format&nbsp;not&nbsp;specified&nbsp;by&nbsp;RFC&nbsp;5322.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7747347">&#34;Fri,&nbsp;21&nbsp;Nov&nbsp;1997&nbsp;09:55:06&nbsp;-0600&nbsp;(MDT)&#34;</span><span class="op" id="7747386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747391">time</span><span class="op" id="7747395">.</span><span class="ident" id="7747396">Date</span><span class="op" id="7747400">(</span><span class="num" id="7747401">1997</span><span class="op" id="7747405">,</span>&nbsp;<span class="num" id="7747407">11</span><span class="op" id="7747409">,</span>&nbsp;<span class="num" id="7747411">21</span><span class="op" id="7747413">,</span>&nbsp;<span class="num" id="7747415">9</span><span class="op" id="7747416">,</span>&nbsp;<span class="num" id="7747418">55</span><span class="op" id="7747420">,</span>&nbsp;<span class="num" id="7747422">6</span><span class="op" id="7747423">,</span>&nbsp;<span class="num" id="7747425">0</span><span class="op" id="7747426">,</span>&nbsp;<span class="ident" id="7747428">time</span><span class="op" id="7747432">.</span><span class="ident" id="7747433">FixedZone</span><span class="op" id="7747442">(</span><span class="string" id="7747443">&#34;&#34;</span><span class="op" id="7747445">,</span>&nbsp;<span class="op" id="7747447">-</span><span class="num" id="7747448">6</span><span class="op" id="7747449">*</span><span class="num" id="7747450">60</span><span class="op" id="7747452">*</span><span class="num" id="7747453">60</span><span class="op" id="7747455">)</span><span class="op" id="7747456">)</span><span class="op" id="7747457">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747461">}</span><span class="op" id="7747462">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747465">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747468">for</span>&nbsp;<span class="ident" id="7747472">_</span><span class="op" id="7747473">,</span>&nbsp;<span class="ident" id="7747475">test</span>&nbsp;<span class="op" id="7747480">:=</span>&nbsp;<span class="keyword" id="7747483">range</span>&nbsp;<span class="ident" id="7747489">tests</span>&nbsp;<span class="op" id="7747495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747499">hdr</span>&nbsp;<span class="op" id="7747503">:=</span>&nbsp;<span class="ident" id="7747506">Header</span><span class="op" id="7747512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7747517">&#34;Date&#34;</span><span class="op" id="7747523">:</span>&nbsp;<span class="op" id="7747525">[</span><span class="op" id="7747526">]</span><span class="builtintype" id="7747527">string</span><span class="op" id="7747533">{</span><span class="ident" id="7747534">test</span><span class="op" id="7747538">.</span><span class="ident" id="7747539">dateStr</span><span class="op" id="7747546">}</span><span class="op" id="7747547">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747551">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747555">date</span><span class="op" id="7747559">,</span>&nbsp;<span class="ident" id="7747561">err</span>&nbsp;<span class="op" id="7747565">:=</span>&nbsp;<span class="ident" id="7747568">hdr</span><span class="op" id="7747571">.</span><span class="ident" id="7747572">Date</span><span class="op" id="7747576">(</span><span class="op" id="7747577">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747581">if</span>&nbsp;<span class="ident" id="7747584">err</span>&nbsp;<span class="op" id="7747588">!=</span>&nbsp;<span class="ident" id="7747591">nil</span>&nbsp;<span class="op" id="7747595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747600">t</span><span class="op" id="7747601">.</span><span class="ident" id="7747602">Errorf</span><span class="op" id="7747608">(</span><span class="string" id="7747609">&#34;Failed&nbsp;parsing&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7747632">,</span>&nbsp;<span class="ident" id="7747634">test</span><span class="op" id="7747638">.</span><span class="ident" id="7747639">dateStr</span><span class="op" id="7747646">,</span>&nbsp;<span class="ident" id="7747648">err</span><span class="op" id="7747651">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747656">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747671">if</span>&nbsp;<span class="op" id="7747674">!</span><span class="ident" id="7747675">date</span><span class="op" id="7747679">.</span><span class="ident" id="7747680">Equal</span><span class="op" id="7747685">(</span><span class="ident" id="7747686">test</span><span class="op" id="7747690">.</span><span class="ident" id="7747691">exp</span><span class="op" id="7747694">)</span>&nbsp;<span class="op" id="7747696">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747701">t</span><span class="op" id="7747702">.</span><span class="ident" id="7747703">Errorf</span><span class="op" id="7747709">(</span><span class="string" id="7747710">&#34;Parse&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7747742">,</span>&nbsp;<span class="ident" id="7747744">test</span><span class="op" id="7747748">.</span><span class="ident" id="7747749">dateStr</span><span class="op" id="7747756">,</span>&nbsp;<span class="ident" id="7747758">date</span><span class="op" id="7747762">,</span>&nbsp;<span class="ident" id="7747764">test</span><span class="op" id="7747768">.</span><span class="ident" id="7747769">exp</span><span class="op" id="7747772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7747779">}</span><br>
<span class="lineno"></span><span class="op" id="7747781">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="keyword" id="7747784">func</span>&nbsp;<span class="ident" id="7747789">TestAddressParsingError</span><span class="op" id="7747812">(</span><span class="ident" id="7747813">t</span>&nbsp;<span class="op" id="7747815">*</span><span class="ident" id="7747816">testing</span><span class="op" id="7747823">.</span><span class="ident" id="7747824">T</span><span class="op" id="7747825">)</span>&nbsp;<span class="op" id="7747827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747830">const</span>&nbsp;<span class="ident" id="7747836">txt</span>&nbsp;<span class="op" id="7747840">=</span>&nbsp;<span class="string" id="7747842">&#34;=?iso-8859-2?Q?Bogl=E1rka_Tak=E1cs?=&nbsp;&lt;unknown@gmail.com&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7747902">_</span><span class="op" id="7747903">,</span>&nbsp;<span class="ident" id="7747905">err</span>&nbsp;<span class="op" id="7747909">:=</span>&nbsp;<span class="ident" id="7747912">ParseAddress</span><span class="op" id="7747924">(</span><span class="ident" id="7747925">txt</span><span class="op" id="7747928">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7747931">if</span>&nbsp;<span class="ident" id="7747934">err</span>&nbsp;<span class="op" id="7747938">==</span>&nbsp;<span class="ident" id="7747941">nil</span>&nbsp;<span class="op" id="7747945">||</span>&nbsp;<span class="op" id="7747948">!</span><span class="ident" id="7747949">strings</span><span class="op" id="7747956">.</span><span class="ident" id="7747957">Contains</span><span class="op" id="7747965">(</span><span class="ident" id="7747966">err</span><span class="op" id="7747969">.</span><span class="ident" id="7747970">Error</span><span class="op" id="7747975">(</span><span class="op" id="7747976">)</span><span class="op" id="7747977">,</span>&nbsp;<span class="string" id="7747979">&#34;charset&nbsp;not&nbsp;supported&#34;</span><span class="op" id="7748002">)</span>&nbsp;<span class="op" id="7748004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748008">t</span><span class="op" id="7748009">.</span><span class="ident" id="7748010">Errorf</span><span class="op" id="7748016">(</span><span class="string" id="7748017">`mail.ParseAddress(%q)&nbsp;err:&nbsp;%q,&nbsp;want&nbsp;&#34;.*charset&nbsp;not&nbsp;supported.*&#34;`</span><span class="op" id="7748082">,</span>&nbsp;<span class="ident" id="7748084">txt</span><span class="op" id="7748087">,</span>&nbsp;<span class="ident" id="7748089">err</span><span class="op" id="7748092">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748095">}</span><br>
<span class="lineno"></span><span class="op" id="7748097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7748100">func</span>&nbsp;<span class="ident" id="7748105">TestAddressParsing</span><span class="op" id="7748123">(</span><span class="ident" id="7748124">t</span>&nbsp;<span class="op" id="7748126">*</span><span class="ident" id="7748127">testing</span><span class="op" id="7748134">.</span><span class="ident" id="7748135">T</span><span class="op" id="7748136">)</span>&nbsp;<span class="op" id="7748138">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748141">tests</span>&nbsp;<span class="op" id="7748147">:=</span>&nbsp;<span class="op" id="7748150">[</span><span class="op" id="7748151">]</span><span class="keyword" id="7748152">struct</span>&nbsp;<span class="op" id="7748159">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748163">addrsStr</span>&nbsp;<span class="builtintype" id="7748172">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748181">exp</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7748190">[</span><span class="op" id="7748191">]</span><span class="op" id="7748192">*</span><span class="ident" id="7748193">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748202">}</span><span class="op" id="7748203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7748207">//&nbsp;Bare&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748225">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7748230">`jdoe@machine.example`</span><span class="op" id="7748252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748257">[</span><span class="op" id="7748258">]</span><span class="op" id="7748259">*</span><span class="ident" id="7748260">Address</span><span class="op" id="7748267">{</span><span class="op" id="7748268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748274">Address</span><span class="op" id="7748281">:</span>&nbsp;<span class="string" id="7748283">&#34;jdoe@machine.example&#34;</span><span class="op" id="7748305">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748310">}</span><span class="op" id="7748311">}</span><span class="op" id="7748312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748316">}</span><span class="op" id="7748317">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7748321">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7748356">`John&nbsp;Doe&nbsp;&lt;jdoe@machine.example&gt;`</span><span class="op" id="7748389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748394">[</span><span class="op" id="7748395">]</span><span class="op" id="7748396">*</span><span class="ident" id="7748397">Address</span><span class="op" id="7748404">{</span><span class="op" id="7748405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748411">Name</span><span class="op" id="7748415">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7748420">&#34;John&nbsp;Doe&#34;</span><span class="op" id="7748430">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748436">Address</span><span class="op" id="7748443">:</span>&nbsp;<span class="string" id="7748445">&#34;jdoe@machine.example&#34;</span><span class="op" id="7748467">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748472">}</span><span class="op" id="7748473">}</span><span class="op" id="7748474">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748478">}</span><span class="op" id="7748479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7748483">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748513">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7748518">`&#34;Joe&nbsp;Q.&nbsp;Public&#34;&nbsp;&lt;john.q.public@example.com&gt;`</span><span class="op" id="7748563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748568">[</span><span class="op" id="7748569">]</span><span class="op" id="7748570">*</span><span class="ident" id="7748571">Address</span><span class="op" id="7748578">{</span><span class="op" id="7748579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748585">Name</span><span class="op" id="7748589">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7748594">&#34;Joe&nbsp;Q.&nbsp;Public&#34;</span><span class="op" id="7748609">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748615">Address</span><span class="op" id="7748622">:</span>&nbsp;<span class="string" id="7748624">&#34;john.q.public@example.com&#34;</span><span class="op" id="7748651">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748656">}</span><span class="op" id="7748657">}</span><span class="op" id="7748658">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748662">}</span><span class="op" id="7748663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7748672">`Mary&nbsp;Smith&nbsp;&lt;mary@x.test&gt;,&nbsp;jdoe@example.org,&nbsp;Who?&nbsp;&lt;one@y.test&gt;`</span><span class="op" id="7748735">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748740">[</span><span class="op" id="7748741">]</span><span class="op" id="7748742">*</span><span class="ident" id="7748743">Address</span><span class="op" id="7748750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748756">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748763">Name</span><span class="op" id="7748767">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7748772">&#34;Mary&nbsp;Smith&#34;</span><span class="op" id="7748784">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748791">Address</span><span class="op" id="7748798">:</span>&nbsp;<span class="string" id="7748800">&#34;mary@x.test&#34;</span><span class="op" id="7748813">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748819">}</span><span class="op" id="7748820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748826">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748833">Address</span><span class="op" id="7748840">:</span>&nbsp;<span class="string" id="7748842">&#34;jdoe@example.org&#34;</span><span class="op" id="7748860">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748866">}</span><span class="op" id="7748867">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748880">Name</span><span class="op" id="7748884">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7748889">&#34;Who?&#34;</span><span class="op" id="7748895">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7748902">Address</span><span class="op" id="7748909">:</span>&nbsp;<span class="string" id="7748911">&#34;one@y.test&#34;</span><span class="op" id="7748923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748929">}</span><span class="op" id="7748930">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748935">}</span><span class="op" id="7748936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748940">}</span><span class="op" id="7748941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7748945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7748950">`&lt;boss@nil.test&gt;,&nbsp;&#34;Giant;&nbsp;\&#34;Big\&#34;&nbsp;Box&#34;&nbsp;&lt;sysservices@example.net&gt;`</span><span class="op" id="7749015">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749020">[</span><span class="op" id="7749021">]</span><span class="op" id="7749022">*</span><span class="ident" id="7749023">Address</span><span class="op" id="7749030">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749043">Address</span><span class="op" id="7749050">:</span>&nbsp;<span class="string" id="7749052">&#34;boss@nil.test&#34;</span><span class="op" id="7749067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749073">}</span><span class="op" id="7749074">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749087">Name</span><span class="op" id="7749091">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7749096">`Giant;&nbsp;&#34;Big&#34;&nbsp;Box`</span><span class="op" id="7749114">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749121">Address</span><span class="op" id="7749128">:</span>&nbsp;<span class="string" id="7749130">&#34;sysservices@example.net&#34;</span><span class="op" id="7749155">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749161">}</span><span class="op" id="7749162">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749167">}</span><span class="op" id="7749168">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749172">}</span><span class="op" id="7749173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749177">//&nbsp;RFC&nbsp;5322,&nbsp;Appendix&nbsp;A.1.3</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749207">//&nbsp;TODO(dsymonds):&nbsp;Group&nbsp;addresses.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749246">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749297">`=?iso-8859-1?q?J=F6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7749346">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749351">[</span><span class="op" id="7749352">]</span><span class="op" id="7749353">*</span><span class="ident" id="7749354">Address</span><span class="op" id="7749361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749374">Name</span><span class="op" id="7749378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7749383">`Jrg&nbsp;Doe`</span><span class="op" id="7749394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749401">Address</span><span class="op" id="7749408">:</span>&nbsp;<span class="string" id="7749410">&#34;joerg@example.com&#34;</span><span class="op" id="7749429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749435">}</span><span class="op" id="7749436">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749441">}</span><span class="op" id="7749442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749446">}</span><span class="op" id="7749447">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749451">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;US-ASCII&nbsp;address.&nbsp;Dumb&nbsp;but&nbsp;legal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749516">`=?us-ascii?q?J=6Frg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7749563">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749568">[</span><span class="op" id="7749569">]</span><span class="op" id="7749570">*</span><span class="ident" id="7749571">Address</span><span class="op" id="7749578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749591">Name</span><span class="op" id="7749595">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7749600">`Jorg&nbsp;Doe`</span><span class="op" id="7749610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749617">Address</span><span class="op" id="7749624">:</span>&nbsp;<span class="string" id="7749626">&#34;joerg@example.com&#34;</span><span class="op" id="7749645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749651">}</span><span class="op" id="7749652">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749657">}</span><span class="op" id="7749658">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749662">}</span><span class="op" id="7749663">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749667">//&nbsp;RFC&nbsp;2047&nbsp;&#34;Q&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749713">`=?utf-8?q?J=C3=B6rg_Doe?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7749760">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749765">[</span><span class="op" id="7749766">]</span><span class="op" id="7749767">*</span><span class="ident" id="7749768">Address</span><span class="op" id="7749775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749788">Name</span><span class="op" id="7749792">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7749797">`Jrg&nbsp;Doe`</span><span class="op" id="7749808">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749815">Address</span><span class="op" id="7749822">:</span>&nbsp;<span class="string" id="7749824">&#34;joerg@example.com&#34;</span><span class="op" id="7749843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749849">}</span><span class="op" id="7749850">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749855">}</span><span class="op" id="7749856">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749860">}</span><span class="op" id="7749861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7749865">//&nbsp;RFC&nbsp;2047,&nbsp;Section&nbsp;8.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7749896">`=?ISO-8859-1?Q?Andr=E9?=&nbsp;Pirard&nbsp;&lt;PIRARD@vm1.ulg.ac.be&gt;`</span><span class="op" id="7749952">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749957">[</span><span class="op" id="7749958">]</span><span class="op" id="7749959">*</span><span class="ident" id="7749960">Address</span><span class="op" id="7749967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7749973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7749980">Name</span><span class="op" id="7749984">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7749989">`Andr&nbsp;Pirard`</span><span class="op" id="7750004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750011">Address</span><span class="op" id="7750018">:</span>&nbsp;<span class="string" id="7750020">&#34;PIRARD@vm1.ulg.ac.be&#34;</span><span class="op" id="7750042">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750048">}</span><span class="op" id="7750049">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750054">}</span><span class="op" id="7750055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750059">}</span><span class="op" id="7750060">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7750064">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;ISO-8859-1&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750133">`=?ISO-8859-1?B?SvZyZw==?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7750180">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750185">[</span><span class="op" id="7750186">]</span><span class="op" id="7750187">*</span><span class="ident" id="7750188">Address</span><span class="op" id="7750195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750208">Name</span><span class="op" id="7750212">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7750217">`Jrg`</span><span class="op" id="7750224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750231">Address</span><span class="op" id="7750238">:</span>&nbsp;<span class="string" id="7750240">&#34;joerg@example.com&#34;</span><span class="op" id="7750259">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750265">}</span><span class="op" id="7750266">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750271">}</span><span class="op" id="7750272">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750276">}</span><span class="op" id="7750277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7750281">//&nbsp;Custom&nbsp;example&nbsp;of&nbsp;RFC&nbsp;2047&nbsp;&#34;B&#34;-encoded&nbsp;UTF-8&nbsp;address.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750340">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750345">`=?UTF-8?B?SsO2cmc=?=&nbsp;&lt;joerg@example.com&gt;`</span><span class="op" id="7750387">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750392">[</span><span class="op" id="7750393">]</span><span class="op" id="7750394">*</span><span class="ident" id="7750395">Address</span><span class="op" id="7750402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750415">Name</span><span class="op" id="7750419">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7750424">`Jrg`</span><span class="op" id="7750431">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750438">Address</span><span class="op" id="7750445">:</span>&nbsp;<span class="string" id="7750447">&#34;joerg@example.com&#34;</span><span class="op" id="7750466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750472">}</span><span class="op" id="7750473">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750478">}</span><span class="op" id="7750479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750483">}</span><span class="op" id="7750484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7750488">//&nbsp;Custom&nbsp;example&nbsp;with&nbsp;&#34;.&#34;&nbsp;in&nbsp;name.&nbsp;For&nbsp;issue&nbsp;4938</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7750546">`Asem&nbsp;H.&nbsp;&lt;noreply@example.com&gt;`</span><span class="op" id="7750577">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750582">[</span><span class="op" id="7750583">]</span><span class="op" id="7750584">*</span><span class="ident" id="7750585">Address</span><span class="op" id="7750592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750605">Name</span><span class="op" id="7750609">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7750614">`Asem&nbsp;H.`</span><span class="op" id="7750623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750630">Address</span><span class="op" id="7750637">:</span>&nbsp;<span class="string" id="7750639">&#34;noreply@example.com&#34;</span><span class="op" id="7750660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750666">}</span><span class="op" id="7750667">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750672">}</span><span class="op" id="7750673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750677">}</span><span class="op" id="7750678">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750684">for</span>&nbsp;<span class="ident" id="7750688">_</span><span class="op" id="7750689">,</span>&nbsp;<span class="ident" id="7750691">test</span>&nbsp;<span class="op" id="7750696">:=</span>&nbsp;<span class="keyword" id="7750699">range</span>&nbsp;<span class="ident" id="7750705">tests</span>&nbsp;<span class="op" id="7750711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750715">if</span>&nbsp;<span class="builtinfunc" id="7750718">len</span><span class="op" id="7750721">(</span><span class="ident" id="7750722">test</span><span class="op" id="7750726">.</span><span class="ident" id="7750727">exp</span><span class="op" id="7750730">)</span>&nbsp;<span class="op" id="7750732">==</span>&nbsp;<span class="num" id="7750735">1</span>&nbsp;<span class="op" id="7750737">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750742">addr</span><span class="op" id="7750746">,</span>&nbsp;<span class="ident" id="7750748">err</span>&nbsp;<span class="op" id="7750752">:=</span>&nbsp;<span class="ident" id="7750755">ParseAddress</span><span class="op" id="7750767">(</span><span class="ident" id="7750768">test</span><span class="op" id="7750772">.</span><span class="ident" id="7750773">addrsStr</span><span class="op" id="7750781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750786">if</span>&nbsp;<span class="ident" id="7750789">err</span>&nbsp;<span class="op" id="7750793">!=</span>&nbsp;<span class="ident" id="7750796">nil</span>&nbsp;<span class="op" id="7750800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750806">t</span><span class="op" id="7750807">.</span><span class="ident" id="7750808">Errorf</span><span class="op" id="7750814">(</span><span class="string" id="7750815">&#34;Failed&nbsp;parsing&nbsp;(single)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7750847">,</span>&nbsp;<span class="ident" id="7750849">test</span><span class="op" id="7750853">.</span><span class="ident" id="7750854">addrsStr</span><span class="op" id="7750862">,</span>&nbsp;<span class="ident" id="7750864">err</span><span class="op" id="7750867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750873">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7750885">}</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7750890">if</span>&nbsp;<span class="op" id="7750893">!</span><span class="ident" id="7750894">reflect</span><span class="op" id="7750901">.</span><span class="ident" id="7750902">DeepEqual</span><span class="op" id="7750911">(</span><span class="op" id="7750912">[</span><span class="op" id="7750913">]</span><span class="op" id="7750914">*</span><span class="ident" id="7750915">Address</span><span class="op" id="7750922">{</span><span class="ident" id="7750923">addr</span><span class="op" id="7750927">}</span><span class="op" id="7750928">,</span>&nbsp;<span class="ident" id="7750930">test</span><span class="op" id="7750934">.</span><span class="ident" id="7750935">exp</span><span class="op" id="7750938">)</span>&nbsp;<span class="op" id="7750940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7750946">t</span><span class="op" id="7750947">.</span><span class="ident" id="7750948">Errorf</span><span class="op" id="7750954">(</span><span class="string" id="7750955">&#34;Parse&nbsp;(single)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7750996">,</span>&nbsp;<span class="ident" id="7750998">test</span><span class="op" id="7751002">.</span><span class="ident" id="7751003">addrsStr</span><span class="op" id="7751011">,</span>&nbsp;<span class="ident" id="7751013">addr</span><span class="op" id="7751017">,</span>&nbsp;<span class="ident" id="7751019">test</span><span class="op" id="7751023">.</span><span class="ident" id="7751024">exp</span><span class="op" id="7751027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751032">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751036">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751041">addrs</span><span class="op" id="7751046">,</span>&nbsp;<span class="ident" id="7751048">err</span>&nbsp;<span class="op" id="7751052">:=</span>&nbsp;<span class="ident" id="7751055">ParseAddressList</span><span class="op" id="7751071">(</span><span class="ident" id="7751072">test</span><span class="op" id="7751076">.</span><span class="ident" id="7751077">addrsStr</span><span class="op" id="7751085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7751089">if</span>&nbsp;<span class="ident" id="7751092">err</span>&nbsp;<span class="op" id="7751096">!=</span>&nbsp;<span class="ident" id="7751099">nil</span>&nbsp;<span class="op" id="7751103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751108">t</span><span class="op" id="7751109">.</span><span class="ident" id="7751110">Errorf</span><span class="op" id="7751116">(</span><span class="string" id="7751117">&#34;Failed&nbsp;parsing&nbsp;(list)&nbsp;%q:&nbsp;%v&#34;</span><span class="op" id="7751147">,</span>&nbsp;<span class="ident" id="7751149">test</span><span class="op" id="7751153">.</span><span class="ident" id="7751154">addrsStr</span><span class="op" id="7751162">,</span>&nbsp;<span class="ident" id="7751164">err</span><span class="op" id="7751167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7751172">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751183">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7751187">if</span>&nbsp;<span class="op" id="7751190">!</span><span class="ident" id="7751191">reflect</span><span class="op" id="7751198">.</span><span class="ident" id="7751199">DeepEqual</span><span class="op" id="7751208">(</span><span class="ident" id="7751209">addrs</span><span class="op" id="7751214">,</span>&nbsp;<span class="ident" id="7751216">test</span><span class="op" id="7751220">.</span><span class="ident" id="7751221">exp</span><span class="op" id="7751224">)</span>&nbsp;<span class="op" id="7751226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751231">t</span><span class="op" id="7751232">.</span><span class="ident" id="7751233">Errorf</span><span class="op" id="7751239">(</span><span class="string" id="7751240">&#34;Parse&nbsp;(list)&nbsp;of&nbsp;%q:&nbsp;got&nbsp;%+v,&nbsp;want&nbsp;%+v&#34;</span><span class="op" id="7751279">,</span>&nbsp;<span class="ident" id="7751281">test</span><span class="op" id="7751285">.</span><span class="ident" id="7751286">addrsStr</span><span class="op" id="7751294">,</span>&nbsp;<span class="ident" id="7751296">addrs</span><span class="op" id="7751301">,</span>&nbsp;<span class="ident" id="7751303">test</span><span class="op" id="7751307">.</span><span class="ident" id="7751308">exp</span><span class="op" id="7751311">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751315">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751318">}</span><br>
<span class="lineno"></span><span class="op" id="7751320">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="keyword" id="7751323">func</span>&nbsp;<span class="ident" id="7751328">TestAddressFormatting</span><span class="op" id="7751349">(</span><span class="ident" id="7751350">t</span>&nbsp;<span class="op" id="7751352">*</span><span class="ident" id="7751353">testing</span><span class="op" id="7751360">.</span><span class="ident" id="7751361">T</span><span class="op" id="7751362">)</span>&nbsp;<span class="op" id="7751364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751367">tests</span>&nbsp;<span class="op" id="7751373">:=</span>&nbsp;<span class="op" id="7751376">[</span><span class="op" id="7751377">]</span><span class="keyword" id="7751378">struct</span>&nbsp;<span class="op" id="7751385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751389">addr</span>&nbsp;<span class="op" id="7751394">*</span><span class="ident" id="7751395">Address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751405">exp</span>&nbsp;&nbsp;<span class="builtintype" id="7751410">string</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751418">}</span><span class="op" id="7751419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751428">&amp;</span><span class="ident" id="7751429">Address</span><span class="op" id="7751436">{</span><span class="ident" id="7751437">Address</span><span class="op" id="7751444">:</span>&nbsp;<span class="string" id="7751446">&#34;bob@example.com&#34;</span><span class="op" id="7751463">}</span><span class="op" id="7751464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7751469">&#34;&lt;bob@example.com&gt;&#34;</span><span class="op" id="7751488">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751492">}</span><span class="op" id="7751493">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751502">&amp;</span><span class="ident" id="7751503">Address</span><span class="op" id="7751510">{</span><span class="ident" id="7751511">Name</span><span class="op" id="7751515">:</span>&nbsp;<span class="string" id="7751517">&#34;Bob&#34;</span><span class="op" id="7751522">,</span>&nbsp;<span class="ident" id="7751524">Address</span><span class="op" id="7751531">:</span>&nbsp;<span class="string" id="7751533">&#34;bob@example.com&#34;</span><span class="op" id="7751550">}</span><span class="op" id="7751551">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7751556">`&#34;Bob&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7751581">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751585">}</span><span class="op" id="7751586">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751590">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7751595">//&nbsp;note&nbsp;the&nbsp;&nbsp;(o&nbsp;with&nbsp;an&nbsp;umlaut)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751632">&amp;</span><span class="ident" id="7751633">Address</span><span class="op" id="7751640">{</span><span class="ident" id="7751641">Name</span><span class="op" id="7751645">:</span>&nbsp;<span class="string" id="7751647">&#34;Bb&#34;</span><span class="op" id="7751653">,</span>&nbsp;<span class="ident" id="7751655">Address</span><span class="op" id="7751662">:</span>&nbsp;<span class="string" id="7751664">&#34;bob@example.com&#34;</span><span class="op" id="7751681">}</span><span class="op" id="7751682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7751687">`=?utf-8?q?B=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7751727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751731">}</span><span class="op" id="7751732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751736">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751741">&amp;</span><span class="ident" id="7751742">Address</span><span class="op" id="7751749">{</span><span class="ident" id="7751750">Name</span><span class="op" id="7751754">:</span>&nbsp;<span class="string" id="7751756">&#34;Bob&nbsp;Jane&#34;</span><span class="op" id="7751766">,</span>&nbsp;<span class="ident" id="7751768">Address</span><span class="op" id="7751775">:</span>&nbsp;<span class="string" id="7751777">&#34;bob@example.com&#34;</span><span class="op" id="7751794">}</span><span class="op" id="7751795">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7751800">`&#34;Bob&nbsp;Jane&#34;&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7751830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751834">}</span><span class="op" id="7751835">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751844">&amp;</span><span class="ident" id="7751845">Address</span><span class="op" id="7751852">{</span><span class="ident" id="7751853">Name</span><span class="op" id="7751857">:</span>&nbsp;<span class="string" id="7751859">&#34;Bb&nbsp;Jacb&#34;</span><span class="op" id="7751872">,</span>&nbsp;<span class="ident" id="7751874">Address</span><span class="op" id="7751881">:</span>&nbsp;<span class="string" id="7751883">&#34;bob@example.com&#34;</span><span class="op" id="7751900">}</span><span class="op" id="7751901">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7751906">`=?utf-8?q?B=C3=B6b_Jac=C3=B6b?=&nbsp;&lt;bob@example.com&gt;`</span><span class="op" id="7751957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751961">}</span><span class="op" id="7751962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7751965">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7751968">for</span>&nbsp;<span class="ident" id="7751972">_</span><span class="op" id="7751973">,</span>&nbsp;<span class="ident" id="7751975">test</span>&nbsp;<span class="op" id="7751980">:=</span>&nbsp;<span class="keyword" id="7751983">range</span>&nbsp;<span class="ident" id="7751989">tests</span>&nbsp;<span class="op" id="7751995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7751999">s</span>&nbsp;<span class="op" id="7752001">:=</span>&nbsp;<span class="ident" id="7752004">test</span><span class="op" id="7752008">.</span><span class="ident" id="7752009">addr</span><span class="op" id="7752013">.</span><span class="ident" id="7752014">String</span><span class="op" id="7752020">(</span><span class="op" id="7752021">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7752025">if</span>&nbsp;<span class="ident" id="7752028">s</span>&nbsp;<span class="op" id="7752030">!=</span>&nbsp;<span class="ident" id="7752033">test</span><span class="op" id="7752037">.</span><span class="ident" id="7752038">exp</span>&nbsp;<span class="op" id="7752042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7752047">t</span><span class="op" id="7752048">.</span><span class="ident" id="7752049">Errorf</span><span class="op" id="7752055">(</span><span class="string" id="7752056">&#34;Address%+v.String()&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7752091">,</span>&nbsp;<span class="op" id="7752093">*</span><span class="ident" id="7752094">test</span><span class="op" id="7752098">.</span><span class="ident" id="7752099">addr</span><span class="op" id="7752103">,</span>&nbsp;<span class="ident" id="7752105">s</span><span class="op" id="7752106">,</span>&nbsp;<span class="ident" id="7752108">test</span><span class="op" id="7752112">.</span><span class="ident" id="7752113">exp</span><span class="op" id="7752116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7752120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7752123">}</span><br>
<span class="lineno"></span><span class="op" id="7752125">}</span>
</div>
</body>
</html>
