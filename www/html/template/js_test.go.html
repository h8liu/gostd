<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8483148">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8483203">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8483257">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8483308">package</span>&nbsp;<span class="ident" id="8483316">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8483326">import</span>&nbsp;<span class="op" id="8483333">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8483336">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8483345">&#34;math&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8483353">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8483364">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8483374">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8483377">func</span>&nbsp;<span class="ident" id="8483382">TestNextJsCtx</span><span class="op" id="8483395">(</span><span class="ident" id="8483396">t</span>&nbsp;<span class="op" id="8483398">*</span><span class="ident" id="8483399"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8483406">.</span><span class="ident" id="8483407">T</span><span class="op" id="8483408">)</span>&nbsp;<span class="op" id="8483410">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483413">tests</span>&nbsp;<span class="op" id="8483419">:=</span>&nbsp;<span class="op" id="8483422">[</span><span class="op" id="8483423">]</span><span class="keyword" id="8483424">struct</span>&nbsp;<span class="op" id="8483431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483435">jsCtx</span>&nbsp;<span class="ident" id="8483441"><a href="/html/template/context.go.html#4399789">jsCtx</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8483449">s</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8483455">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483463">}</span><span class="op" id="8483464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483468">//&nbsp;Statement&nbsp;terminators&nbsp;precede&nbsp;regexps.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483512">{</span><span class="ident" id="8483513"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8483524">,</span>&nbsp;<span class="string" id="8483526">&#34;;&#34;</span><span class="op" id="8483529">}</span><span class="op" id="8483530">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483534">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483561">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;({&nbsp;valueOf:&nbsp;function&nbsp;()&nbsp;{&nbsp;return&nbsp;1&nbsp;}&nbsp;}&nbsp;/&nbsp;2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483614">//&nbsp;is&nbsp;valid&nbsp;JavaScript&nbsp;but&nbsp;in&nbsp;practice,&nbsp;devs&nbsp;do&nbsp;not&nbsp;do&nbsp;this.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483677">//&nbsp;A&nbsp;block&nbsp;followed&nbsp;by&nbsp;a&nbsp;statement&nbsp;starting&nbsp;with&nbsp;a&nbsp;RegExp&nbsp;is</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483740">//&nbsp;much&nbsp;more&nbsp;common:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483763">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(x)&nbsp;{...}&nbsp;/foo/.test(x)&nbsp;||&nbsp;panic()</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483813">{</span><span class="ident" id="8483814"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8483825">,</span>&nbsp;<span class="string" id="8483827">&#34;}&#34;</span><span class="op" id="8483830">}</span><span class="op" id="8483831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483835">//&nbsp;But&nbsp;member,&nbsp;call,&nbsp;grouping,&nbsp;and&nbsp;array&nbsp;expression&nbsp;terminators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483901">//&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483923">{</span><span class="ident" id="8483924"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8483934">,</span>&nbsp;<span class="string" id="8483936">&#34;)&#34;</span><span class="op" id="8483939">}</span><span class="op" id="8483940">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8483944">{</span><span class="ident" id="8483945"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8483955">,</span>&nbsp;<span class="string" id="8483957">&#34;]&#34;</span><span class="op" id="8483960">}</span><span class="op" id="8483961">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8483965">//&nbsp;At&nbsp;the&nbsp;start&nbsp;of&nbsp;a&nbsp;primary&nbsp;expression,&nbsp;array,&nbsp;or&nbsp;expression</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484029">//&nbsp;statement,&nbsp;expect&nbsp;a&nbsp;regexp.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484062">{</span><span class="ident" id="8484063"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484074">,</span>&nbsp;<span class="string" id="8484076">&#34;(&#34;</span><span class="op" id="8484079">}</span><span class="op" id="8484080">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484084">{</span><span class="ident" id="8484085"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484096">,</span>&nbsp;<span class="string" id="8484098">&#34;[&#34;</span><span class="op" id="8484101">}</span><span class="op" id="8484102">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484106">{</span><span class="ident" id="8484107"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484118">,</span>&nbsp;<span class="string" id="8484120">&#34;{&#34;</span><span class="op" id="8484123">}</span><span class="op" id="8484124">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484128">//&nbsp;Assignment&nbsp;operators&nbsp;precede&nbsp;regexps&nbsp;as&nbsp;do&nbsp;all&nbsp;exclusively</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484192">//&nbsp;prefix&nbsp;and&nbsp;binary&nbsp;operators.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484226">{</span><span class="ident" id="8484227"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484238">,</span>&nbsp;<span class="string" id="8484240">&#34;=&#34;</span><span class="op" id="8484243">}</span><span class="op" id="8484244">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484248">{</span><span class="ident" id="8484249"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484260">,</span>&nbsp;<span class="string" id="8484262">&#34;+=&#34;</span><span class="op" id="8484266">}</span><span class="op" id="8484267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484271">{</span><span class="ident" id="8484272"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484283">,</span>&nbsp;<span class="string" id="8484285">&#34;*=&#34;</span><span class="op" id="8484289">}</span><span class="op" id="8484290">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484294">{</span><span class="ident" id="8484295"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484306">,</span>&nbsp;<span class="string" id="8484308">&#34;*&#34;</span><span class="op" id="8484311">}</span><span class="op" id="8484312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484316">{</span><span class="ident" id="8484317"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484328">,</span>&nbsp;<span class="string" id="8484330">&#34;!&#34;</span><span class="op" id="8484333">}</span><span class="op" id="8484334">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484338">//&nbsp;Whether&nbsp;the&nbsp;+&nbsp;or&nbsp;-&nbsp;is&nbsp;infix&nbsp;or&nbsp;prefix,&nbsp;it&nbsp;cannot&nbsp;precede&nbsp;a</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484402">//&nbsp;div&nbsp;op.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484415">{</span><span class="ident" id="8484416"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484427">,</span>&nbsp;<span class="string" id="8484429">&#34;+&#34;</span><span class="op" id="8484432">}</span><span class="op" id="8484433">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484437">{</span><span class="ident" id="8484438"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484449">,</span>&nbsp;<span class="string" id="8484451">&#34;-&#34;</span><span class="op" id="8484454">}</span><span class="op" id="8484455">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484459">//&nbsp;An&nbsp;incr/decr&nbsp;op&nbsp;precedes&nbsp;a&nbsp;div&nbsp;operator.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484505">//&nbsp;This&nbsp;is&nbsp;not&nbsp;airtight.&nbsp;In&nbsp;(g&nbsp;=&nbsp;++/h/i)&nbsp;a&nbsp;regexp&nbsp;follows&nbsp;a</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484567">//&nbsp;pre-increment&nbsp;operator,&nbsp;but&nbsp;in&nbsp;practice&nbsp;devs&nbsp;do&nbsp;not&nbsp;try&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484631">//&nbsp;increment&nbsp;or&nbsp;decrement&nbsp;regular&nbsp;expressions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484680">//&nbsp;(g++/h/i)&nbsp;where&nbsp;++&nbsp;is&nbsp;a&nbsp;postfix&nbsp;operator&nbsp;on&nbsp;g&nbsp;is&nbsp;much&nbsp;more</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484744">//&nbsp;common.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484757">{</span><span class="ident" id="8484758"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8484768">,</span>&nbsp;<span class="string" id="8484770">&#34;--&#34;</span><span class="op" id="8484774">}</span><span class="op" id="8484775">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484779">{</span><span class="ident" id="8484780"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8484790">,</span>&nbsp;<span class="string" id="8484792">&#34;++&#34;</span><span class="op" id="8484796">}</span><span class="op" id="8484797">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484801">{</span><span class="ident" id="8484802"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8484812">,</span>&nbsp;<span class="string" id="8484814">&#34;x--&#34;</span><span class="op" id="8484819">}</span><span class="op" id="8484820">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484824">//&nbsp;When&nbsp;we&nbsp;have&nbsp;many&nbsp;dashes&nbsp;or&nbsp;pluses,&nbsp;then&nbsp;they&nbsp;are&nbsp;grouped</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484887">//&nbsp;left&nbsp;to&nbsp;right.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8484907">{</span><span class="ident" id="8484908"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8484919">,</span>&nbsp;<span class="string" id="8484921">&#34;x---&#34;</span><span class="op" id="8484927">}</span><span class="op" id="8484928">,</span>&nbsp;<span class="comment" id="8484930">//&nbsp;A&nbsp;postfix&nbsp;--&nbsp;then&nbsp;a&nbsp;-.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8484958">//&nbsp;return&nbsp;followed&nbsp;by&nbsp;a&nbsp;slash&nbsp;returns&nbsp;the&nbsp;regexp&nbsp;literal&nbsp;or&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485024">//&nbsp;slash&nbsp;starts&nbsp;a&nbsp;regexp&nbsp;literal&nbsp;in&nbsp;an&nbsp;expression&nbsp;statement&nbsp;that</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485091">//&nbsp;is&nbsp;dead&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485110">{</span><span class="ident" id="8485111"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485122">,</span>&nbsp;<span class="string" id="8485124">&#34;return&#34;</span><span class="op" id="8485132">}</span><span class="op" id="8485133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485137">{</span><span class="ident" id="8485138"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485149">,</span>&nbsp;<span class="string" id="8485151">&#34;return&nbsp;&#34;</span><span class="op" id="8485160">}</span><span class="op" id="8485161">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485165">{</span><span class="ident" id="8485166"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485177">,</span>&nbsp;<span class="string" id="8485179">&#34;return\t&#34;</span><span class="op" id="8485189">}</span><span class="op" id="8485190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485194">{</span><span class="ident" id="8485195"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485206">,</span>&nbsp;<span class="string" id="8485208">&#34;return\n&#34;</span><span class="op" id="8485218">}</span><span class="op" id="8485219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485223">{</span><span class="ident" id="8485224"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485235">,</span>&nbsp;<span class="string" id="8485237">&#34;return\u2028&#34;</span><span class="op" id="8485251">}</span><span class="op" id="8485252">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485256">//&nbsp;Identifiers&nbsp;can&nbsp;be&nbsp;divided&nbsp;and&nbsp;cannot&nbsp;validly&nbsp;be&nbsp;preceded&nbsp;by</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485322">//&nbsp;a&nbsp;regular&nbsp;expressions.&nbsp;Semicolon&nbsp;insertion&nbsp;cannot&nbsp;happen</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485384">//&nbsp;between&nbsp;an&nbsp;identifier&nbsp;and&nbsp;a&nbsp;regular&nbsp;expression&nbsp;on&nbsp;a&nbsp;new&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485450">//&nbsp;because&nbsp;the&nbsp;one&nbsp;token&nbsp;lookahead&nbsp;for&nbsp;semicolon&nbsp;insertion&nbsp;has</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485515">//&nbsp;to&nbsp;conclude&nbsp;that&nbsp;it&nbsp;could&nbsp;be&nbsp;a&nbsp;div&nbsp;binary&nbsp;op&nbsp;and&nbsp;treat&nbsp;it&nbsp;as</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485581">//&nbsp;such.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485592">{</span><span class="ident" id="8485593"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485603">,</span>&nbsp;<span class="string" id="8485605">&#34;x&#34;</span><span class="op" id="8485608">}</span><span class="op" id="8485609">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485613">{</span><span class="ident" id="8485614"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485624">,</span>&nbsp;<span class="string" id="8485626">&#34;x&nbsp;&#34;</span><span class="op" id="8485630">}</span><span class="op" id="8485631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485635">{</span><span class="ident" id="8485636"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485646">,</span>&nbsp;<span class="string" id="8485648">&#34;x\t&#34;</span><span class="op" id="8485653">}</span><span class="op" id="8485654">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485658">{</span><span class="ident" id="8485659"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485669">,</span>&nbsp;<span class="string" id="8485671">&#34;x\n&#34;</span><span class="op" id="8485676">}</span><span class="op" id="8485677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485681">{</span><span class="ident" id="8485682"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485692">,</span>&nbsp;<span class="string" id="8485694">&#34;x\u2028&#34;</span><span class="op" id="8485703">}</span><span class="op" id="8485704">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485708">{</span><span class="ident" id="8485709"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485719">,</span>&nbsp;<span class="string" id="8485721">&#34;preturn&#34;</span><span class="op" id="8485730">}</span><span class="op" id="8485731">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485735">//&nbsp;Numbers&nbsp;precede&nbsp;div&nbsp;ops.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485765">{</span><span class="ident" id="8485766"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485776">,</span>&nbsp;<span class="string" id="8485778">&#34;0&#34;</span><span class="op" id="8485781">}</span><span class="op" id="8485782">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8485786">//&nbsp;Dots&nbsp;that&nbsp;are&nbsp;part&nbsp;of&nbsp;a&nbsp;number&nbsp;are&nbsp;div&nbsp;preceders.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485841">{</span><span class="ident" id="8485842"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8485852">,</span>&nbsp;<span class="string" id="8485854">&#34;0.&#34;</span><span class="op" id="8485858">}</span><span class="op" id="8485859">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8485862">}</span><br>
<span class="lineno">85</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485866">for</span>&nbsp;<span class="ident" id="8485870">_</span><span class="op" id="8485871">,</span>&nbsp;<span class="ident" id="8485873">test</span>&nbsp;<span class="op" id="8485878">:=</span>&nbsp;<span class="keyword" id="8485881">range</span>&nbsp;<span class="ident" id="8485887"><a href="/html/template/js_test.go.html#8483413">tests</a></span>&nbsp;<span class="op" id="8485893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8485897">if</span>&nbsp;<span class="ident" id="8485900"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="8485909">(</span><span class="op" id="8485910">[</span><span class="op" id="8485911">]</span><span class="builtintype" id="8485912">byte</span><span class="op" id="8485916">(</span><span class="ident" id="8485917"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8485921">.</span><span class="ident" id="8485922">s</span><span class="op" id="8485923">)</span><span class="op" id="8485924">,</span>&nbsp;<span class="ident" id="8485926"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8485937">)</span>&nbsp;<span class="op" id="8485939">!=</span>&nbsp;<span class="ident" id="8485942"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8485946">.</span><span class="ident" id="8485947">jsCtx</span>&nbsp;<span class="op" id="8485953">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8485958"><a href="/html/template/js_test.go.html#8483396">t</a></span><span class="op" id="8485959">.</span><span class="ident" id="8485960">Errorf</span><span class="op" id="8485966">(</span><span class="string" id="8485967">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8485983">,</span>&nbsp;<span class="ident" id="8485985"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8485989">.</span><span class="ident" id="8485990">jsCtx</span><span class="op" id="8485995">,</span>&nbsp;<span class="ident" id="8485997"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8486001">.</span><span class="ident" id="8486002">s</span><span class="op" id="8486003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486007">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486011">if</span>&nbsp;<span class="ident" id="8486014"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="8486023">(</span><span class="op" id="8486024">[</span><span class="op" id="8486025">]</span><span class="builtintype" id="8486026">byte</span><span class="op" id="8486030">(</span><span class="ident" id="8486031"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8486035">.</span><span class="ident" id="8486036">s</span><span class="op" id="8486037">)</span><span class="op" id="8486038">,</span>&nbsp;<span class="ident" id="8486040"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8486050">)</span>&nbsp;<span class="op" id="8486052">!=</span>&nbsp;<span class="ident" id="8486055"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8486059">.</span><span class="ident" id="8486060">jsCtx</span>&nbsp;<span class="op" id="8486066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486071"><a href="/html/template/js_test.go.html#8483396">t</a></span><span class="op" id="8486072">.</span><span class="ident" id="8486073">Errorf</span><span class="op" id="8486079">(</span><span class="string" id="8486080">&#34;want&nbsp;%s&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8486096">,</span>&nbsp;<span class="ident" id="8486098"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8486102">.</span><span class="ident" id="8486103">jsCtx</span><span class="op" id="8486108">,</span>&nbsp;<span class="ident" id="8486110"><a href="/html/template/js_test.go.html#8485873">test</a></span><span class="op" id="8486114">.</span><span class="ident" id="8486115">s</span><span class="op" id="8486116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486120">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486127">if</span>&nbsp;<span class="ident" id="8486130"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="8486139">(</span><span class="op" id="8486140">[</span><span class="op" id="8486141">]</span><span class="builtintype" id="8486142">byte</span><span class="op" id="8486146">(</span><span class="string" id="8486147">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8486152">)</span><span class="op" id="8486153">,</span>&nbsp;<span class="ident" id="8486155"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span><span class="op" id="8486166">)</span>&nbsp;<span class="op" id="8486168">!=</span>&nbsp;<span class="ident" id="8486171"><a href="/html/template/context.go.html#4399876">jsCtxRegexp</a></span>&nbsp;<span class="op" id="8486183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486187"><a href="/html/template/js_test.go.html#8483396">t</a></span><span class="op" id="8486188">.</span><span class="ident" id="8486189">Error</span><span class="op" id="8486194">(</span><span class="string" id="8486195">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8486209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8486216">if</span>&nbsp;<span class="ident" id="8486219"><a href="/html/template/js.go.html#4456397">nextJSCtx</a></span><span class="op" id="8486228">(</span><span class="op" id="8486229">[</span><span class="op" id="8486230">]</span><span class="builtintype" id="8486231">byte</span><span class="op" id="8486235">(</span><span class="string" id="8486236">&#34;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op" id="8486241">)</span><span class="op" id="8486242">,</span>&nbsp;<span class="ident" id="8486244"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span><span class="op" id="8486254">)</span>&nbsp;<span class="op" id="8486256">!=</span>&nbsp;<span class="ident" id="8486259"><a href="/html/template/context.go.html#4399969">jsCtxDivOp</a></span>&nbsp;<span class="op" id="8486270">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486274"><a href="/html/template/js_test.go.html#8483396">t</a></span><span class="op" id="8486275">.</span><span class="ident" id="8486276">Error</span><span class="op" id="8486281">(</span><span class="string" id="8486282">&#34;Blank&nbsp;tokens&#34;</span><span class="op" id="8486296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486299">}</span><br>
<span class="lineno"></span><span class="op" id="8486301">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8486304">func</span>&nbsp;<span class="ident" id="8486309">TestJSValEscaper</span><span class="op" id="8486325">(</span><span class="ident" id="8486326">t</span>&nbsp;<span class="op" id="8486328">*</span><span class="ident" id="8486329"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8486336">.</span><span class="ident" id="8486337">T</span><span class="op" id="8486338">)</span>&nbsp;<span class="op" id="8486340">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486343">tests</span>&nbsp;<span class="op" id="8486349">:=</span>&nbsp;<span class="op" id="8486352">[</span><span class="op" id="8486353">]</span><span class="keyword" id="8486354">struct</span>&nbsp;<span class="op" id="8486361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486365">x</span>&nbsp;&nbsp;<span class="keyword" id="8486368">interface</span><span class="op" id="8486377">{</span><span class="op" id="8486378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8486382">js</span>&nbsp;<span class="builtintype" id="8486385">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486393">}</span><span class="op" id="8486394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486398">{</span><span class="builtintype" id="8486399">int</span><span class="op" id="8486402">(</span><span class="num" id="8486403">42</span><span class="op" id="8486405">)</span><span class="op" id="8486406">,</span>&nbsp;<span class="string" id="8486408">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486414">}</span><span class="op" id="8486415">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486419">{</span><span class="builtintype" id="8486420">uint</span><span class="op" id="8486424">(</span><span class="num" id="8486425">42</span><span class="op" id="8486427">)</span><span class="op" id="8486428">,</span>&nbsp;<span class="string" id="8486430">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486436">}</span><span class="op" id="8486437">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486441">{</span><span class="builtintype" id="8486442">int16</span><span class="op" id="8486447">(</span><span class="num" id="8486448">42</span><span class="op" id="8486450">)</span><span class="op" id="8486451">,</span>&nbsp;<span class="string" id="8486453">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486459">}</span><span class="op" id="8486460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486464">{</span><span class="builtintype" id="8486465">uint16</span><span class="op" id="8486471">(</span><span class="num" id="8486472">42</span><span class="op" id="8486474">)</span><span class="op" id="8486475">,</span>&nbsp;<span class="string" id="8486477">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486483">}</span><span class="op" id="8486484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486488">{</span><span class="builtintype" id="8486489">int32</span><span class="op" id="8486494">(</span><span class="op" id="8486495">-</span><span class="num" id="8486496">42</span><span class="op" id="8486498">)</span><span class="op" id="8486499">,</span>&nbsp;<span class="string" id="8486501">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8486508">}</span><span class="op" id="8486509">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486513">{</span><span class="builtintype" id="8486514">uint32</span><span class="op" id="8486520">(</span><span class="num" id="8486521">42</span><span class="op" id="8486523">)</span><span class="op" id="8486524">,</span>&nbsp;<span class="string" id="8486526">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486532">}</span><span class="op" id="8486533">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486537">{</span><span class="builtintype" id="8486538">int16</span><span class="op" id="8486543">(</span><span class="op" id="8486544">-</span><span class="num" id="8486545">42</span><span class="op" id="8486547">)</span><span class="op" id="8486548">,</span>&nbsp;<span class="string" id="8486550">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8486557">}</span><span class="op" id="8486558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486562">{</span><span class="builtintype" id="8486563">uint16</span><span class="op" id="8486569">(</span><span class="num" id="8486570">42</span><span class="op" id="8486572">)</span><span class="op" id="8486573">,</span>&nbsp;<span class="string" id="8486575">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486581">}</span><span class="op" id="8486582">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486586">{</span><span class="ident" id="8486587">int64</span><span class="op" id="8486592">(</span><span class="op" id="8486593">-</span><span class="num" id="8486594">42</span><span class="op" id="8486596">)</span><span class="op" id="8486597">,</span>&nbsp;<span class="string" id="8486599">&#34;&nbsp;-42&nbsp;&#34;</span><span class="op" id="8486606">}</span><span class="op" id="8486607">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486611">{</span><span class="ident" id="8486612">uint64</span><span class="op" id="8486618">(</span><span class="num" id="8486619">42</span><span class="op" id="8486621">)</span><span class="op" id="8486622">,</span>&nbsp;<span class="string" id="8486624">&#34;&nbsp;42&nbsp;&#34;</span><span class="op" id="8486630">}</span><span class="op" id="8486631">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486635">{</span><span class="ident" id="8486636">uint64</span><span class="op" id="8486642">(</span><span class="num" id="8486643">1</span><span class="op" id="8486644">)</span>&nbsp;<span class="op" id="8486646">&lt;&lt;</span>&nbsp;<span class="num" id="8486649">53</span><span class="op" id="8486651">,</span>&nbsp;<span class="string" id="8486653">&#34;&nbsp;9007199254740992&nbsp;&#34;</span><span class="op" id="8486673">}</span><span class="op" id="8486674">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8486678">//&nbsp;ulp(1&nbsp;&lt;&lt;&nbsp;53)&nbsp;&gt;&nbsp;1&nbsp;so&nbsp;this&nbsp;loses&nbsp;precision&nbsp;in&nbsp;JS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8486730">//&nbsp;but&nbsp;it&nbsp;is&nbsp;still&nbsp;a&nbsp;representable&nbsp;integer&nbsp;literal.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486784">{</span><span class="ident" id="8486785">uint64</span><span class="op" id="8486791">(</span><span class="num" id="8486792">1</span><span class="op" id="8486793">)</span><span class="op" id="8486794">&lt;&lt;</span><span class="num" id="8486796">53</span>&nbsp;<span class="op" id="8486799">+</span>&nbsp;<span class="num" id="8486801">1</span><span class="op" id="8486802">,</span>&nbsp;<span class="string" id="8486804">&#34;&nbsp;9007199254740993&nbsp;&#34;</span><span class="op" id="8486824">}</span><span class="op" id="8486825">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486829">{</span><span class="builtintype" id="8486830">float32</span><span class="op" id="8486837">(</span><span class="num" id="8486838">1.0</span><span class="op" id="8486841">)</span><span class="op" id="8486842">,</span>&nbsp;<span class="string" id="8486844">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8486849">}</span><span class="op" id="8486850">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486854">{</span><span class="builtintype" id="8486855">float32</span><span class="op" id="8486862">(</span><span class="op" id="8486863">-</span><span class="num" id="8486864">1.0</span><span class="op" id="8486867">)</span><span class="op" id="8486868">,</span>&nbsp;<span class="string" id="8486870">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8486876">}</span><span class="op" id="8486877">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486881">{</span><span class="builtintype" id="8486882">float32</span><span class="op" id="8486889">(</span><span class="num" id="8486890">0.5</span><span class="op" id="8486893">)</span><span class="op" id="8486894">,</span>&nbsp;<span class="string" id="8486896">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8486903">}</span><span class="op" id="8486904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486908">{</span><span class="builtintype" id="8486909">float32</span><span class="op" id="8486916">(</span><span class="op" id="8486917">-</span><span class="num" id="8486918">0.5</span><span class="op" id="8486921">)</span><span class="op" id="8486922">,</span>&nbsp;<span class="string" id="8486924">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8486932">}</span><span class="op" id="8486933">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486937">{</span><span class="builtintype" id="8486938">float32</span><span class="op" id="8486945">(</span><span class="num" id="8486946">1.0</span><span class="op" id="8486949">)</span>&nbsp;<span class="op" id="8486951">/</span>&nbsp;<span class="builtintype" id="8486953">float32</span><span class="op" id="8486960">(</span><span class="num" id="8486961">256</span><span class="op" id="8486964">)</span><span class="op" id="8486965">,</span>&nbsp;<span class="string" id="8486967">&#34;&nbsp;0.00390625&nbsp;&#34;</span><span class="op" id="8486981">}</span><span class="op" id="8486982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8486986">{</span><span class="builtintype" id="8486987">float32</span><span class="op" id="8486994">(</span><span class="num" id="8486995">0</span><span class="op" id="8486996">)</span><span class="op" id="8486997">,</span>&nbsp;<span class="string" id="8486999">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8487004">}</span><span class="op" id="8487005">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487009">{</span><span class="ident" id="8487010"><a href="/html/template/js_test.go.html#8483345">math</a></span><span class="op" id="8487014">.</span><span class="ident" id="8487015">Copysign</span><span class="op" id="8487023">(</span><span class="num" id="8487024">0</span><span class="op" id="8487025">,</span>&nbsp;<span class="op" id="8487027">-</span><span class="num" id="8487028">1</span><span class="op" id="8487029">)</span><span class="op" id="8487030">,</span>&nbsp;<span class="string" id="8487032">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8487038">}</span><span class="op" id="8487039">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487043">{</span><span class="builtintype" id="8487044">float64</span><span class="op" id="8487051">(</span><span class="num" id="8487052">1.0</span><span class="op" id="8487055">)</span><span class="op" id="8487056">,</span>&nbsp;<span class="string" id="8487058">&#34;&nbsp;1&nbsp;&#34;</span><span class="op" id="8487063">}</span><span class="op" id="8487064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487068">{</span><span class="builtintype" id="8487069">float64</span><span class="op" id="8487076">(</span><span class="op" id="8487077">-</span><span class="num" id="8487078">1.0</span><span class="op" id="8487081">)</span><span class="op" id="8487082">,</span>&nbsp;<span class="string" id="8487084">&#34;&nbsp;-1&nbsp;&#34;</span><span class="op" id="8487090">}</span><span class="op" id="8487091">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487095">{</span><span class="builtintype" id="8487096">float64</span><span class="op" id="8487103">(</span><span class="num" id="8487104">0.5</span><span class="op" id="8487107">)</span><span class="op" id="8487108">,</span>&nbsp;<span class="string" id="8487110">&#34;&nbsp;0.5&nbsp;&#34;</span><span class="op" id="8487117">}</span><span class="op" id="8487118">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487122">{</span><span class="builtintype" id="8487123">float64</span><span class="op" id="8487130">(</span><span class="op" id="8487131">-</span><span class="num" id="8487132">0.5</span><span class="op" id="8487135">)</span><span class="op" id="8487136">,</span>&nbsp;<span class="string" id="8487138">&#34;&nbsp;-0.5&nbsp;&#34;</span><span class="op" id="8487146">}</span><span class="op" id="8487147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487151">{</span><span class="builtintype" id="8487152">float64</span><span class="op" id="8487159">(</span><span class="num" id="8487160">0</span><span class="op" id="8487161">)</span><span class="op" id="8487162">,</span>&nbsp;<span class="string" id="8487164">&#34;&nbsp;0&nbsp;&#34;</span><span class="op" id="8487169">}</span><span class="op" id="8487170">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487174">{</span><span class="ident" id="8487175"><a href="/html/template/js_test.go.html#8483345">math</a></span><span class="op" id="8487179">.</span><span class="ident" id="8487180">Copysign</span><span class="op" id="8487188">(</span><span class="num" id="8487189">0</span><span class="op" id="8487190">,</span>&nbsp;<span class="op" id="8487192">-</span><span class="num" id="8487193">1</span><span class="op" id="8487194">)</span><span class="op" id="8487195">,</span>&nbsp;<span class="string" id="8487197">&#34;&nbsp;-0&nbsp;&#34;</span><span class="op" id="8487203">}</span><span class="op" id="8487204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487208">{</span><span class="string" id="8487209">&#34;&#34;</span><span class="op" id="8487211">,</span>&nbsp;<span class="string" id="8487213">`&#34;&#34;`</span><span class="op" id="8487217">}</span><span class="op" id="8487218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487222">{</span><span class="string" id="8487223">&#34;foo&#34;</span><span class="op" id="8487228">,</span>&nbsp;<span class="string" id="8487230">`&#34;foo&#34;`</span><span class="op" id="8487237">}</span><span class="op" id="8487238">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8487242">//&nbsp;Newlines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487257">{</span><span class="string" id="8487258">&#34;\r\n\u2028\u2029&#34;</span><span class="op" id="8487276">,</span>&nbsp;<span class="string" id="8487278">`&#34;\r\n\u2028\u2029&#34;`</span><span class="op" id="8487298">}</span><span class="op" id="8487299">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8487303">//&nbsp;&#34;\v&#34;&nbsp;==&nbsp;&#34;v&#34;&nbsp;on&nbsp;IE&nbsp;6&nbsp;so&nbsp;use&nbsp;&#34;\x0b&#34;&nbsp;instead.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487351">{</span><span class="string" id="8487352">&#34;\t\x0b&#34;</span><span class="op" id="8487360">,</span>&nbsp;<span class="string" id="8487362">`&#34;\t\u000b&#34;`</span><span class="op" id="8487374">}</span><span class="op" id="8487375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487379">{</span><span class="keyword" id="8487380">struct</span><span class="op" id="8487386">{</span>&nbsp;<span class="ident" id="8487388">X</span><span class="op" id="8487389">,</span>&nbsp;<span class="ident" id="8487391">Y</span>&nbsp;<span class="builtintype" id="8487393">int</span>&nbsp;<span class="op" id="8487397">}</span><span class="op" id="8487398">{</span><span class="num" id="8487399">1</span><span class="op" id="8487400">,</span>&nbsp;<span class="num" id="8487402">2</span><span class="op" id="8487403">}</span><span class="op" id="8487404">,</span>&nbsp;<span class="string" id="8487406">`{&#34;X&#34;:1,&#34;Y&#34;:2}`</span><span class="op" id="8487421">}</span><span class="op" id="8487422">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487426">{</span><span class="op" id="8487427">[</span><span class="op" id="8487428">]</span><span class="keyword" id="8487429">interface</span><span class="op" id="8487438">{</span><span class="op" id="8487439">}</span><span class="op" id="8487440">{</span><span class="op" id="8487441">}</span><span class="op" id="8487442">,</span>&nbsp;<span class="string" id="8487444">&#34;[]&#34;</span><span class="op" id="8487448">}</span><span class="op" id="8487449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487453">{</span><span class="op" id="8487454">[</span><span class="op" id="8487455">]</span><span class="keyword" id="8487456">interface</span><span class="op" id="8487465">{</span><span class="op" id="8487466">}</span><span class="op" id="8487467">{</span><span class="num" id="8487468">42</span><span class="op" id="8487470">,</span>&nbsp;<span class="string" id="8487472">&#34;foo&#34;</span><span class="op" id="8487477">,</span>&nbsp;<span class="ident" id="8487479">nil</span><span class="op" id="8487482">}</span><span class="op" id="8487483">,</span>&nbsp;<span class="string" id="8487485">`[42,&#34;foo&#34;,null]`</span><span class="op" id="8487502">}</span><span class="op" id="8487503">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487507">{</span><span class="op" id="8487508">[</span><span class="op" id="8487509">]</span><span class="builtintype" id="8487510">string</span><span class="op" id="8487516">{</span><span class="string" id="8487517">&#34;&lt;!--&#34;</span><span class="op" id="8487523">,</span>&nbsp;<span class="string" id="8487525">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8487536">,</span>&nbsp;<span class="string" id="8487538">&#34;--&gt;&#34;</span><span class="op" id="8487543">}</span><span class="op" id="8487544">,</span>&nbsp;<span class="string" id="8487546">`[&#34;\u003c!--&#34;,&#34;\u003c/script\u003e&#34;,&#34;--\u003e&#34;]`</span><span class="op" id="8487594">}</span><span class="op" id="8487595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487599">{</span><span class="string" id="8487600">&#34;&lt;!--&#34;</span><span class="op" id="8487606">,</span>&nbsp;<span class="string" id="8487608">`&#34;\u003c!--&#34;`</span><span class="op" id="8487621">}</span><span class="op" id="8487622">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487626">{</span><span class="string" id="8487627">&#34;--&gt;&#34;</span><span class="op" id="8487632">,</span>&nbsp;<span class="string" id="8487634">`&#34;--\u003e&#34;`</span><span class="op" id="8487646">}</span><span class="op" id="8487647">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487651">{</span><span class="string" id="8487652">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8487663">,</span>&nbsp;<span class="string" id="8487665">`&#34;\u003c![CDATA[&#34;`</span><span class="op" id="8487683">}</span><span class="op" id="8487684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487688">{</span><span class="string" id="8487689">&#34;]]&gt;&#34;</span><span class="op" id="8487694">,</span>&nbsp;<span class="string" id="8487696">`&#34;]]\u003e&#34;`</span><span class="op" id="8487708">}</span><span class="op" id="8487709">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487713">{</span><span class="string" id="8487714">&#34;&lt;/script&#34;</span><span class="op" id="8487724">,</span>&nbsp;<span class="string" id="8487726">`&#34;\u003c/script&#34;`</span><span class="op" id="8487743">}</span><span class="op" id="8487744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487748">{</span><span class="string" id="8487749">&#34;\U0001D11E&#34;</span><span class="op" id="8487761">,</span>&nbsp;<span class="string" id="8487763">&#34;\&#34;\U0001D11E\&#34;&#34;</span><span class="op" id="8487779">}</span><span class="op" id="8487780">,</span>&nbsp;<span class="comment" id="8487782">//&nbsp;or&nbsp;&#34;\uD834\uDD1E&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487808">for</span>&nbsp;<span class="ident" id="8487812">_</span><span class="op" id="8487813">,</span>&nbsp;<span class="ident" id="8487815">test</span>&nbsp;<span class="op" id="8487820">:=</span>&nbsp;<span class="keyword" id="8487823">range</span>&nbsp;<span class="ident" id="8487829"><a href="/html/template/js_test.go.html#8486343">tests</a></span>&nbsp;<span class="op" id="8487835">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8487839">if</span>&nbsp;<span class="ident" id="8487842">js</span>&nbsp;<span class="op" id="8487845">:=</span>&nbsp;<span class="ident" id="8487848"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8487860">(</span><span class="ident" id="8487861"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8487865">.</span><span class="ident" id="8487866">x</span><span class="op" id="8487867">)</span><span class="op" id="8487868">;</span>&nbsp;<span class="ident" id="8487870"><a href="/html/template/js_test.go.html#8487842">js</a></span>&nbsp;<span class="op" id="8487873">!=</span>&nbsp;<span class="ident" id="8487876"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8487880">.</span><span class="ident" id="8487881">js</span>&nbsp;<span class="op" id="8487884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8487889"><a href="/html/template/js_test.go.html#8486326">t</a></span><span class="op" id="8487890">.</span><span class="ident" id="8487891">Errorf</span><span class="op" id="8487897">(</span><span class="string" id="8487898">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8487926">,</span>&nbsp;<span class="ident" id="8487928"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8487932">.</span><span class="ident" id="8487933">x</span><span class="op" id="8487934">,</span>&nbsp;<span class="ident" id="8487936"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8487940">.</span><span class="ident" id="8487941">js</span><span class="op" id="8487943">,</span>&nbsp;<span class="ident" id="8487945"><a href="/html/template/js_test.go.html#8487842">js</a></span><span class="op" id="8487947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8487951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8487955">//&nbsp;Make&nbsp;sure&nbsp;that&nbsp;escaping&nbsp;corner&nbsp;cases&nbsp;are&nbsp;not&nbsp;broken</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488012">//&nbsp;by&nbsp;nesting.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488029">a</span>&nbsp;<span class="op" id="8488031">:=</span>&nbsp;<span class="op" id="8488034">[</span><span class="op" id="8488035">]</span><span class="keyword" id="8488036">interface</span><span class="op" id="8488045">{</span><span class="op" id="8488046">}</span><span class="op" id="8488047">{</span><span class="ident" id="8488048"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8488052">.</span><span class="ident" id="8488053">x</span><span class="op" id="8488054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488058">want</span>&nbsp;<span class="op" id="8488063">:=</span>&nbsp;<span class="string" id="8488066">&#34;[&#34;</span>&nbsp;<span class="op" id="8488070">+</span>&nbsp;<span class="ident" id="8488072"><a href="/html/template/js_test.go.html#8483353">strings</a></span><span class="op" id="8488079">.</span><span class="ident" id="8488080">TrimSpace</span><span class="op" id="8488089">(</span><span class="ident" id="8488090"><a href="/html/template/js_test.go.html#8487815">test</a></span><span class="op" id="8488094">.</span><span class="ident" id="8488095">js</span><span class="op" id="8488097">)</span>&nbsp;<span class="op" id="8488099">+</span>&nbsp;<span class="string" id="8488101">&#34;]&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8488107">if</span>&nbsp;<span class="ident" id="8488110">js</span>&nbsp;<span class="op" id="8488113">:=</span>&nbsp;<span class="ident" id="8488116"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8488128">(</span><span class="ident" id="8488129"><a href="/html/template/js_test.go.html#8488029">a</a></span><span class="op" id="8488130">)</span><span class="op" id="8488131">;</span>&nbsp;<span class="ident" id="8488133"><a href="/html/template/js_test.go.html#8488110">js</a></span>&nbsp;<span class="op" id="8488136">!=</span>&nbsp;<span class="ident" id="8488139"><a href="/html/template/js_test.go.html#8488058">want</a></span>&nbsp;<span class="op" id="8488144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488149"><a href="/html/template/js_test.go.html#8486326">t</a></span><span class="op" id="8488150">.</span><span class="ident" id="8488151">Errorf</span><span class="op" id="8488157">(</span><span class="string" id="8488158">&#34;%+v:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8488186">,</span>&nbsp;<span class="ident" id="8488188"><a href="/html/template/js_test.go.html#8488029">a</a></span><span class="op" id="8488189">,</span>&nbsp;<span class="ident" id="8488191"><a href="/html/template/js_test.go.html#8488058">want</a></span><span class="op" id="8488195">,</span>&nbsp;<span class="ident" id="8488197"><a href="/html/template/js_test.go.html#8488110">js</a></span><span class="op" id="8488199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488203">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488206">}</span><br>
<span class="lineno"></span><span class="op" id="8488208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8488211">func</span>&nbsp;<span class="ident" id="8488216">TestJSStrEscaper</span><span class="op" id="8488232">(</span><span class="ident" id="8488233">t</span>&nbsp;<span class="op" id="8488235">*</span><span class="ident" id="8488236"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8488243">.</span><span class="ident" id="8488244">T</span><span class="op" id="8488245">)</span>&nbsp;<span class="op" id="8488247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488250">tests</span>&nbsp;<span class="op" id="8488256">:=</span>&nbsp;<span class="op" id="8488259">[</span><span class="op" id="8488260">]</span><span class="keyword" id="8488261">struct</span>&nbsp;<span class="op" id="8488268">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488272">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8488276">interface</span><span class="op" id="8488285">{</span><span class="op" id="8488286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8488290">esc</span>&nbsp;<span class="builtintype" id="8488294">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488302">}</span><span class="op" id="8488303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488307">{</span><span class="string" id="8488308">&#34;&#34;</span><span class="op" id="8488310">,</span>&nbsp;<span class="string" id="8488312">``</span><span class="op" id="8488314">}</span><span class="op" id="8488315">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488319">{</span><span class="string" id="8488320">&#34;foo&#34;</span><span class="op" id="8488325">,</span>&nbsp;<span class="string" id="8488327">`foo`</span><span class="op" id="8488332">}</span><span class="op" id="8488333">,</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488337">{</span><span class="string" id="8488338">&#34;\u0000&#34;</span><span class="op" id="8488346">,</span>&nbsp;<span class="string" id="8488348">`\0`</span><span class="op" id="8488352">}</span><span class="op" id="8488353">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488357">{</span><span class="string" id="8488358">&#34;\t&#34;</span><span class="op" id="8488362">,</span>&nbsp;<span class="string" id="8488364">`\t`</span><span class="op" id="8488368">}</span><span class="op" id="8488369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488373">{</span><span class="string" id="8488374">&#34;\n&#34;</span><span class="op" id="8488378">,</span>&nbsp;<span class="string" id="8488380">`\n`</span><span class="op" id="8488384">}</span><span class="op" id="8488385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488389">{</span><span class="string" id="8488390">&#34;\r&#34;</span><span class="op" id="8488394">,</span>&nbsp;<span class="string" id="8488396">`\r`</span><span class="op" id="8488400">}</span><span class="op" id="8488401">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488405">{</span><span class="string" id="8488406">&#34;\u2028&#34;</span><span class="op" id="8488414">,</span>&nbsp;<span class="string" id="8488416">`\u2028`</span><span class="op" id="8488424">}</span><span class="op" id="8488425">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488429">{</span><span class="string" id="8488430">&#34;\u2029&#34;</span><span class="op" id="8488438">,</span>&nbsp;<span class="string" id="8488440">`\u2029`</span><span class="op" id="8488448">}</span><span class="op" id="8488449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488453">{</span><span class="string" id="8488454">&#34;\\&#34;</span><span class="op" id="8488458">,</span>&nbsp;<span class="string" id="8488460">`\\`</span><span class="op" id="8488464">}</span><span class="op" id="8488465">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488469">{</span><span class="string" id="8488470">&#34;\\n&#34;</span><span class="op" id="8488475">,</span>&nbsp;<span class="string" id="8488477">`\\n`</span><span class="op" id="8488482">}</span><span class="op" id="8488483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488487">{</span><span class="string" id="8488488">&#34;foo\r\nbar&#34;</span><span class="op" id="8488500">,</span>&nbsp;<span class="string" id="8488502">`foo\r\nbar`</span><span class="op" id="8488514">}</span><span class="op" id="8488515">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488519">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488555">{</span><span class="string" id="8488556">`&#34;`</span><span class="op" id="8488559">,</span>&nbsp;<span class="string" id="8488561">`\x22`</span><span class="op" id="8488567">}</span><span class="op" id="8488568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488572">{</span><span class="string" id="8488573">`&#39;`</span><span class="op" id="8488576">,</span>&nbsp;<span class="string" id="8488578">`\x27`</span><span class="op" id="8488584">}</span><span class="op" id="8488585">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488589">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488644">{</span><span class="string" id="8488645">`&amp;amp;`</span><span class="op" id="8488652">,</span>&nbsp;<span class="string" id="8488654">`\x26amp;`</span><span class="op" id="8488664">}</span><span class="op" id="8488665">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488669">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488732">{</span><span class="string" id="8488733">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8488744">,</span>&nbsp;<span class="string" id="8488746">`\x3c\/script\x3e`</span><span class="op" id="8488764">}</span><span class="op" id="8488765">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488769">{</span><span class="string" id="8488770">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8488781">,</span>&nbsp;<span class="string" id="8488783">`\x3c![CDATA[`</span><span class="op" id="8488797">}</span><span class="op" id="8488798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8488802">{</span><span class="string" id="8488803">&#34;]]&gt;&#34;</span><span class="op" id="8488808">,</span>&nbsp;<span class="string" id="8488810">`]]\x3e`</span><span class="op" id="8488818">}</span><span class="op" id="8488819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488823">//&nbsp;http://dev.w3.org/html5/markup/aria/syntax.html#escaping-text-span</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488895">//&nbsp;&nbsp;&nbsp;&#34;The&nbsp;text&nbsp;in&nbsp;style,&nbsp;script,&nbsp;title,&nbsp;and&nbsp;textarea&nbsp;elements</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8488959">//&nbsp;&nbsp;&nbsp;must&nbsp;not&nbsp;have&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;start&nbsp;that&nbsp;is&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489020">//&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489067">//&nbsp;Furthermore,&nbsp;spoofing&nbsp;an&nbsp;escaping&nbsp;text&nbsp;span&nbsp;end&nbsp;could&nbsp;lead</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489131">//&nbsp;to&nbsp;different&nbsp;interpretation&nbsp;of&nbsp;a&nbsp;&lt;/script&gt;&nbsp;sequence&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489198">//&nbsp;masked&nbsp;by&nbsp;the&nbsp;escaping&nbsp;text&nbsp;span,&nbsp;and&nbsp;spoofing&nbsp;a&nbsp;start&nbsp;could</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489264">//&nbsp;allow&nbsp;regular&nbsp;text&nbsp;content&nbsp;to&nbsp;be&nbsp;interpreted&nbsp;as&nbsp;script</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489324">//&nbsp;allowing&nbsp;script&nbsp;execution&nbsp;via&nbsp;a&nbsp;combination&nbsp;of&nbsp;a&nbsp;JS&nbsp;string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489388">//&nbsp;injection&nbsp;followed&nbsp;by&nbsp;an&nbsp;HTML&nbsp;text&nbsp;injection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489439">{</span><span class="string" id="8489440">&#34;&lt;!--&#34;</span><span class="op" id="8489446">,</span>&nbsp;<span class="string" id="8489448">`\x3c!--`</span><span class="op" id="8489457">}</span><span class="op" id="8489458">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489462">{</span><span class="string" id="8489463">&#34;--&gt;&#34;</span><span class="op" id="8489468">,</span>&nbsp;<span class="string" id="8489470">`--\x3e`</span><span class="op" id="8489478">}</span><span class="op" id="8489479">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489483">//&nbsp;From&nbsp;http://code.google.com/p/doctype/wiki/ArticleUtf7</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489543">{</span><span class="string" id="8489544">&#34;+ADw-script+AD4-alert(1)+ADw-/script+AD4-&#34;</span><span class="op" id="8489587">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8489592">`\x2bADw-script\x2bAD4-alert(1)\x2bADw-\/script\x2bAD4-`</span><span class="op" id="8489648">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489652">}</span><span class="op" id="8489653">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489657">//&nbsp;Invalid&nbsp;UTF-8&nbsp;sequence</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489685">{</span><span class="string" id="8489686">&#34;foo\xA0bar&#34;</span><span class="op" id="8489698">,</span>&nbsp;<span class="string" id="8489700">&#34;foo\xA0bar&#34;</span><span class="op" id="8489712">}</span><span class="op" id="8489713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8489717">//&nbsp;Invalid&nbsp;unicode&nbsp;scalar&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489752">{</span><span class="string" id="8489753">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8489773">,</span>&nbsp;<span class="string" id="8489775">&#34;foo\xed\xa0\x80bar&#34;</span><span class="op" id="8489795">}</span><span class="op" id="8489796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489799">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489803">for</span>&nbsp;<span class="ident" id="8489807">_</span><span class="op" id="8489808">,</span>&nbsp;<span class="ident" id="8489810">test</span>&nbsp;<span class="op" id="8489815">:=</span>&nbsp;<span class="keyword" id="8489818">range</span>&nbsp;<span class="ident" id="8489824"><a href="/html/template/js_test.go.html#8488250">tests</a></span>&nbsp;<span class="op" id="8489830">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489834">esc</span>&nbsp;<span class="op" id="8489838">:=</span>&nbsp;<span class="ident" id="8489841"><a href="/html/template/js.go.html#4462270">jsStrEscaper</a></span><span class="op" id="8489853">(</span><span class="ident" id="8489854"><a href="/html/template/js_test.go.html#8489810">test</a></span><span class="op" id="8489858">.</span><span class="ident" id="8489859">x</span><span class="op" id="8489860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8489864">if</span>&nbsp;<span class="ident" id="8489867"><a href="/html/template/js_test.go.html#8489834">esc</a></span>&nbsp;<span class="op" id="8489871">!=</span>&nbsp;<span class="ident" id="8489874"><a href="/html/template/js_test.go.html#8489810">test</a></span><span class="op" id="8489878">.</span><span class="ident" id="8489879">esc</span>&nbsp;<span class="op" id="8489883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489888"><a href="/html/template/js_test.go.html#8488233">t</a></span><span class="op" id="8489889">.</span><span class="ident" id="8489890">Errorf</span><span class="op" id="8489896">(</span><span class="string" id="8489897">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8489917">,</span>&nbsp;<span class="ident" id="8489919"><a href="/html/template/js_test.go.html#8489810">test</a></span><span class="op" id="8489923">.</span><span class="ident" id="8489924">x</span><span class="op" id="8489925">,</span>&nbsp;<span class="ident" id="8489927"><a href="/html/template/js_test.go.html#8489810">test</a></span><span class="op" id="8489931">.</span><span class="ident" id="8489932">esc</span><span class="op" id="8489935">,</span>&nbsp;<span class="ident" id="8489937"><a href="/html/template/js_test.go.html#8489834">esc</a></span><span class="op" id="8489940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489944">}</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8489947">}</span><br>
<span class="lineno"></span><span class="op" id="8489949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8489952">func</span>&nbsp;<span class="ident" id="8489957">TestJSRegexpEscaper</span><span class="op" id="8489976">(</span><span class="ident" id="8489977">t</span>&nbsp;<span class="op" id="8489979">*</span><span class="ident" id="8489980"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8489987">.</span><span class="ident" id="8489988">T</span><span class="op" id="8489989">)</span>&nbsp;<span class="op" id="8489991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8489994">tests</span>&nbsp;<span class="op" id="8490000">:=</span>&nbsp;<span class="op" id="8490003">[</span><span class="op" id="8490004">]</span><span class="keyword" id="8490005">struct</span>&nbsp;<span class="op" id="8490012">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490016">x</span>&nbsp;&nbsp;&nbsp;<span class="keyword" id="8490020">interface</span><span class="op" id="8490029">{</span><span class="op" id="8490030">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490034">esc</span>&nbsp;<span class="builtintype" id="8490038">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490046">}</span><span class="op" id="8490047">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490051">{</span><span class="string" id="8490052">&#34;&#34;</span><span class="op" id="8490054">,</span>&nbsp;<span class="string" id="8490056">`(?:)`</span><span class="op" id="8490062">}</span><span class="op" id="8490063">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490067">{</span><span class="string" id="8490068">&#34;foo&#34;</span><span class="op" id="8490073">,</span>&nbsp;<span class="string" id="8490075">`foo`</span><span class="op" id="8490080">}</span><span class="op" id="8490081">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490085">{</span><span class="string" id="8490086">&#34;\u0000&#34;</span><span class="op" id="8490094">,</span>&nbsp;<span class="string" id="8490096">`\0`</span><span class="op" id="8490100">}</span><span class="op" id="8490101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490105">{</span><span class="string" id="8490106">&#34;\t&#34;</span><span class="op" id="8490110">,</span>&nbsp;<span class="string" id="8490112">`\t`</span><span class="op" id="8490116">}</span><span class="op" id="8490117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490121">{</span><span class="string" id="8490122">&#34;\n&#34;</span><span class="op" id="8490126">,</span>&nbsp;<span class="string" id="8490128">`\n`</span><span class="op" id="8490132">}</span><span class="op" id="8490133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490137">{</span><span class="string" id="8490138">&#34;\r&#34;</span><span class="op" id="8490142">,</span>&nbsp;<span class="string" id="8490144">`\r`</span><span class="op" id="8490148">}</span><span class="op" id="8490149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490153">{</span><span class="string" id="8490154">&#34;\u2028&#34;</span><span class="op" id="8490162">,</span>&nbsp;<span class="string" id="8490164">`\u2028`</span><span class="op" id="8490172">}</span><span class="op" id="8490173">,</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490177">{</span><span class="string" id="8490178">&#34;\u2029&#34;</span><span class="op" id="8490186">,</span>&nbsp;<span class="string" id="8490188">`\u2029`</span><span class="op" id="8490196">}</span><span class="op" id="8490197">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490201">{</span><span class="string" id="8490202">&#34;\\&#34;</span><span class="op" id="8490206">,</span>&nbsp;<span class="string" id="8490208">`\\`</span><span class="op" id="8490212">}</span><span class="op" id="8490213">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490217">{</span><span class="string" id="8490218">&#34;\\n&#34;</span><span class="op" id="8490223">,</span>&nbsp;<span class="string" id="8490225">`\\n`</span><span class="op" id="8490230">}</span><span class="op" id="8490231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490235">{</span><span class="string" id="8490236">&#34;foo\r\nbar&#34;</span><span class="op" id="8490248">,</span>&nbsp;<span class="string" id="8490250">`foo\r\nbar`</span><span class="op" id="8490262">}</span><span class="op" id="8490263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8490267">//&nbsp;Preserve&nbsp;attribute&nbsp;boundaries.</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490303">{</span><span class="string" id="8490304">`&#34;`</span><span class="op" id="8490307">,</span>&nbsp;<span class="string" id="8490309">`\x22`</span><span class="op" id="8490315">}</span><span class="op" id="8490316">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490320">{</span><span class="string" id="8490321">`&#39;`</span><span class="op" id="8490324">,</span>&nbsp;<span class="string" id="8490326">`\x27`</span><span class="op" id="8490332">}</span><span class="op" id="8490333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8490337">//&nbsp;Allow&nbsp;embedding&nbsp;in&nbsp;HTML&nbsp;without&nbsp;further&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490392">{</span><span class="string" id="8490393">`&amp;amp;`</span><span class="op" id="8490400">,</span>&nbsp;<span class="string" id="8490402">`\x26amp;`</span><span class="op" id="8490412">}</span><span class="op" id="8490413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8490417">//&nbsp;Prevent&nbsp;breaking&nbsp;out&nbsp;of&nbsp;text&nbsp;node&nbsp;and&nbsp;element&nbsp;boundaries.</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490480">{</span><span class="string" id="8490481">&#34;&lt;/script&gt;&#34;</span><span class="op" id="8490492">,</span>&nbsp;<span class="string" id="8490494">`\x3c\/script\x3e`</span><span class="op" id="8490512">}</span><span class="op" id="8490513">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490517">{</span><span class="string" id="8490518">&#34;&lt;![CDATA[&#34;</span><span class="op" id="8490529">,</span>&nbsp;<span class="string" id="8490531">`\x3c!\[CDATA\[`</span><span class="op" id="8490547">}</span><span class="op" id="8490548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490552">{</span><span class="string" id="8490553">&#34;]]&gt;&#34;</span><span class="op" id="8490558">,</span>&nbsp;<span class="string" id="8490560">`\]\]\x3e`</span><span class="op" id="8490570">}</span><span class="op" id="8490571">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8490575">//&nbsp;Escaping&nbsp;text&nbsp;spans.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490601">{</span><span class="string" id="8490602">&#34;&lt;!--&#34;</span><span class="op" id="8490608">,</span>&nbsp;<span class="string" id="8490610">`\x3c!\-\-`</span><span class="op" id="8490621">}</span><span class="op" id="8490622">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490626">{</span><span class="string" id="8490627">&#34;--&gt;&#34;</span><span class="op" id="8490632">,</span>&nbsp;<span class="string" id="8490634">`\-\-\x3e`</span><span class="op" id="8490644">}</span><span class="op" id="8490645">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490649">{</span><span class="string" id="8490650">&#34;*&#34;</span><span class="op" id="8490653">,</span>&nbsp;<span class="string" id="8490655">`\*`</span><span class="op" id="8490659">}</span><span class="op" id="8490660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490664">{</span><span class="string" id="8490665">&#34;+&#34;</span><span class="op" id="8490668">,</span>&nbsp;<span class="string" id="8490670">`\x2b`</span><span class="op" id="8490676">}</span><span class="op" id="8490677">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490681">{</span><span class="string" id="8490682">&#34;?&#34;</span><span class="op" id="8490685">,</span>&nbsp;<span class="string" id="8490687">`\?`</span><span class="op" id="8490691">}</span><span class="op" id="8490692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490696">{</span><span class="string" id="8490697">&#34;[](){}&#34;</span><span class="op" id="8490705">,</span>&nbsp;<span class="string" id="8490707">`\[\]\(\)\{\}`</span><span class="op" id="8490721">}</span><span class="op" id="8490722">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490726">{</span><span class="string" id="8490727">&#34;$foo|x.y&#34;</span><span class="op" id="8490737">,</span>&nbsp;<span class="string" id="8490739">`\$foo\|x\.y`</span><span class="op" id="8490752">}</span><span class="op" id="8490753">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490757">{</span><span class="string" id="8490758">&#34;x^y&#34;</span><span class="op" id="8490763">,</span>&nbsp;<span class="string" id="8490765">`x\^y`</span><span class="op" id="8490771">}</span><span class="op" id="8490772">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490775">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490779">for</span>&nbsp;<span class="ident" id="8490783">_</span><span class="op" id="8490784">,</span>&nbsp;<span class="ident" id="8490786">test</span>&nbsp;<span class="op" id="8490791">:=</span>&nbsp;<span class="keyword" id="8490794">range</span>&nbsp;<span class="ident" id="8490800"><a href="/html/template/js_test.go.html#8489994">tests</a></span>&nbsp;<span class="op" id="8490806">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490810">esc</span>&nbsp;<span class="op" id="8490814">:=</span>&nbsp;<span class="ident" id="8490817"><a href="/html/template/js.go.html#4462754">jsRegexpEscaper</a></span><span class="op" id="8490832">(</span><span class="ident" id="8490833"><a href="/html/template/js_test.go.html#8490786">test</a></span><span class="op" id="8490837">.</span><span class="ident" id="8490838">x</span><span class="op" id="8490839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8490843">if</span>&nbsp;<span class="ident" id="8490846"><a href="/html/template/js_test.go.html#8490810">esc</a></span>&nbsp;<span class="op" id="8490850">!=</span>&nbsp;<span class="ident" id="8490853"><a href="/html/template/js_test.go.html#8490786">test</a></span><span class="op" id="8490857">.</span><span class="ident" id="8490858">esc</span>&nbsp;<span class="op" id="8490862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490867"><a href="/html/template/js_test.go.html#8489977">t</a></span><span class="op" id="8490868">.</span><span class="ident" id="8490869">Errorf</span><span class="op" id="8490875">(</span><span class="string" id="8490876">&#34;%q:&nbsp;want&nbsp;%q&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8490896">,</span>&nbsp;<span class="ident" id="8490898"><a href="/html/template/js_test.go.html#8490786">test</a></span><span class="op" id="8490902">.</span><span class="ident" id="8490903">x</span><span class="op" id="8490904">,</span>&nbsp;<span class="ident" id="8490906"><a href="/html/template/js_test.go.html#8490786">test</a></span><span class="op" id="8490910">.</span><span class="ident" id="8490911">esc</span><span class="op" id="8490914">,</span>&nbsp;<span class="ident" id="8490916"><a href="/html/template/js_test.go.html#8490810">esc</a></span><span class="op" id="8490919">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8490926">}</span><br>
<span class="lineno">265</span><span class="op" id="8490928">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8490931">func</span>&nbsp;<span class="ident" id="8490936">TestEscapersOnLower7AndSelectHighCodepoints</span><span class="op" id="8490979">(</span><span class="ident" id="8490980">t</span>&nbsp;<span class="op" id="8490982">*</span><span class="ident" id="8490983"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8490990">.</span><span class="ident" id="8490991">T</span><span class="op" id="8490992">)</span>&nbsp;<span class="op" id="8490994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8490997">input</span>&nbsp;<span class="op" id="8491003">:=</span>&nbsp;<span class="op" id="8491006">(</span><span class="string" id="8491007">&#34;\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#34;</span>&nbsp;<span class="op" id="8491068">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491072">&#34;\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8491139">+</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491143">`&nbsp;!&#34;#$%&amp;&#39;()*+,-./`</span>&nbsp;<span class="op" id="8491162">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491166">`0123456789:;&lt;=&gt;?`</span>&nbsp;<span class="op" id="8491185">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491189">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8491208">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491212">`PQRSTUVWXYZ[\]^_`</span>&nbsp;<span class="op" id="8491231">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491235">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8491254">+</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491258">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8491280">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491284">&#34;\u00A0\u0100\u2028\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8491326">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491330">tests</span>&nbsp;<span class="op" id="8491336">:=</span>&nbsp;<span class="op" id="8491339">[</span><span class="op" id="8491340">]</span><span class="keyword" id="8491341">struct</span>&nbsp;<span class="op" id="8491348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491352">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8491360">string</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491369">escaper</span>&nbsp;<span class="keyword" id="8491377">func</span><span class="op" id="8491381">(</span><span class="op" id="8491382">...</span><span class="keyword" id="8491385">interface</span><span class="op" id="8491394">{</span><span class="op" id="8491395">}</span><span class="op" id="8491396">)</span>&nbsp;<span class="builtintype" id="8491398">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491407">escaped</span>&nbsp;<span class="builtintype" id="8491415">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491423">}</span><span class="op" id="8491424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491433">&#34;jsStrEscaper&#34;</span><span class="op" id="8491447">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491452"><a href="/html/template/js.go.html#4462270">jsStrEscaper</a></span><span class="op" id="8491464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491469">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8491503">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491509">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8491541">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491547">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8491582">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491588">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8491623">+</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491629">`&nbsp;!\x22#$%\x26\x27()*\x2b,-.\/`</span>&nbsp;<span class="op" id="8491661">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491667">`0123456789:;\x3c=\x3e?`</span>&nbsp;<span class="op" id="8491692">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491698">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8491717">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491723">`PQRSTUVWXYZ[\\]^_`</span>&nbsp;<span class="op" id="8491743">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491749">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8491768">+</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491774">&#34;pqrstuvwxyz{|}~\x7f&#34;</span>&nbsp;<span class="op" id="8491796">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491802">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8491846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491850">}</span><span class="op" id="8491851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8491855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491860">&#34;jsRegexpEscaper&#34;</span><span class="op" id="8491877">,</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8491882"><a href="/html/template/js.go.html#4462754">jsRegexpEscaper</a></span><span class="op" id="8491897">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491902">&#34;\\0\x01\x02\x03\x04\x05\x06\x07&#34;</span>&nbsp;<span class="op" id="8491936">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491942">&#34;\x08\\t\\n\\x0b\\f\\r\x0E\x0F&#34;</span>&nbsp;<span class="op" id="8491974">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8491980">&#34;\x10\x11\x12\x13\x14\x15\x16\x17&#34;</span>&nbsp;<span class="op" id="8492015">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492021">&#34;\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&#34;</span>&nbsp;<span class="op" id="8492056">+</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492062">`&nbsp;!\x22#\$%\x26\x27\(\)\*\x2b,\-\.\/`</span>&nbsp;<span class="op" id="8492100">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492106">`0123456789:;\x3c=\x3e\?`</span>&nbsp;<span class="op" id="8492132">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492138">`@ABCDEFGHIJKLMNO`</span>&nbsp;<span class="op" id="8492157">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492163">`PQRSTUVWXYZ\[\\\]\^_`</span>&nbsp;<span class="op" id="8492186">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492192">&#34;`abcdefghijklmno&#34;</span>&nbsp;<span class="op" id="8492211">+</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492217">`pqrstuvwxyz\{\|\}~`</span>&nbsp;<span class="op" id="8492238">+</span>&nbsp;<span class="string" id="8492240">&#34;\u007f&#34;</span>&nbsp;<span class="op" id="8492249">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8492255">&#34;\u00A0\u0100\\u2028\\u2029\ufeff\U0001D11E&#34;</span><span class="op" id="8492299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492303">}</span><span class="op" id="8492304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492311">for</span>&nbsp;<span class="ident" id="8492315">_</span><span class="op" id="8492316">,</span>&nbsp;<span class="ident" id="8492318">test</span>&nbsp;<span class="op" id="8492323">:=</span>&nbsp;<span class="keyword" id="8492326">range</span>&nbsp;<span class="ident" id="8492332"><a href="/html/template/js_test.go.html#8491330">tests</a></span>&nbsp;<span class="op" id="8492338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492342">if</span>&nbsp;<span class="ident" id="8492345">s</span>&nbsp;<span class="op" id="8492347">:=</span>&nbsp;<span class="ident" id="8492350"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492354">.</span><span class="ident" id="8492355">escaper</span><span class="op" id="8492362">(</span><span class="ident" id="8492363"><a href="/html/template/js_test.go.html#8490997">input</a></span><span class="op" id="8492368">)</span><span class="op" id="8492369">;</span>&nbsp;<span class="ident" id="8492371"><a href="/html/template/js_test.go.html#8492345">s</a></span>&nbsp;<span class="op" id="8492373">!=</span>&nbsp;<span class="ident" id="8492376"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492380">.</span><span class="ident" id="8492381">escaped</span>&nbsp;<span class="op" id="8492389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492394"><a href="/html/template/js_test.go.html#8490980">t</a></span><span class="op" id="8492395">.</span><span class="ident" id="8492396">Errorf</span><span class="op" id="8492402">(</span><span class="string" id="8492403">&#34;%s&nbsp;once:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8492435">,</span>&nbsp;<span class="ident" id="8492437"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492441">.</span><span class="ident" id="8492442">name</span><span class="op" id="8492446">,</span>&nbsp;<span class="ident" id="8492448"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492452">.</span><span class="ident" id="8492453">escaped</span><span class="op" id="8492460">,</span>&nbsp;<span class="ident" id="8492462"><a href="/html/template/js_test.go.html#8492345">s</a></span><span class="op" id="8492463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492468">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492479">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8492484">//&nbsp;Escape&nbsp;it&nbsp;rune&nbsp;by&nbsp;rune&nbsp;to&nbsp;make&nbsp;sure&nbsp;that&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8492534">//&nbsp;fast-path&nbsp;checking&nbsp;does&nbsp;not&nbsp;break&nbsp;escaping.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492583">var</span>&nbsp;<span class="ident" id="8492587">buf</span>&nbsp;<span class="ident" id="8492591"><a href="/html/template/js_test.go.html#8483336">bytes</a></span><span class="op" id="8492596">.</span><span class="ident" id="8492597">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492606">for</span>&nbsp;<span class="ident" id="8492610">_</span><span class="op" id="8492611">,</span>&nbsp;<span class="ident" id="8492613">c</span>&nbsp;<span class="op" id="8492615">:=</span>&nbsp;<span class="keyword" id="8492618">range</span>&nbsp;<span class="ident" id="8492624"><a href="/html/template/js_test.go.html#8490997">input</a></span>&nbsp;<span class="op" id="8492630">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492635"><a href="/html/template/js_test.go.html#8492587">buf</a></span><span class="op" id="8492638">.</span><span class="ident" id="8492639">WriteString</span><span class="op" id="8492650">(</span><span class="ident" id="8492651"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492655">.</span><span class="ident" id="8492656">escaper</span><span class="op" id="8492663">(</span><span class="builtintype" id="8492664">string</span><span class="op" id="8492670">(</span><span class="ident" id="8492671"><a href="/html/template/js_test.go.html#8492613">c</a></span><span class="op" id="8492672">)</span><span class="op" id="8492673">)</span><span class="op" id="8492674">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492683">if</span>&nbsp;<span class="ident" id="8492686">s</span>&nbsp;<span class="op" id="8492688">:=</span>&nbsp;<span class="ident" id="8492691"><a href="/html/template/js_test.go.html#8492587">buf</a></span><span class="op" id="8492694">.</span><span class="ident" id="8492695">String</span><span class="op" id="8492701">(</span><span class="op" id="8492702">)</span><span class="op" id="8492703">;</span>&nbsp;<span class="ident" id="8492705"><a href="/html/template/js_test.go.html#8492686">s</a></span>&nbsp;<span class="op" id="8492707">!=</span>&nbsp;<span class="ident" id="8492710"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492714">.</span><span class="ident" id="8492715">escaped</span>&nbsp;<span class="op" id="8492723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492728"><a href="/html/template/js_test.go.html#8490980">t</a></span><span class="op" id="8492729">.</span><span class="ident" id="8492730">Errorf</span><span class="op" id="8492736">(</span><span class="string" id="8492737">&#34;%s&nbsp;rune-wise:&nbsp;want\n\t%q\ngot\n\t%q&#34;</span><span class="op" id="8492774">,</span>&nbsp;<span class="ident" id="8492776"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492780">.</span><span class="ident" id="8492781">name</span><span class="op" id="8492785">,</span>&nbsp;<span class="ident" id="8492787"><a href="/html/template/js_test.go.html#8492318">test</a></span><span class="op" id="8492791">.</span><span class="ident" id="8492792">escaped</span><span class="op" id="8492799">,</span>&nbsp;<span class="ident" id="8492801"><a href="/html/template/js_test.go.html#8492686">s</a></span><span class="op" id="8492802">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492807">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492821">}</span><br>
<span class="lineno"></span><span class="op" id="8492823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">335</span><span class="keyword" id="8492826">func</span>&nbsp;<span class="ident" id="8492831">BenchmarkJSValEscaperWithNum</span><span class="op" id="8492859">(</span><span class="ident" id="8492860">b</span>&nbsp;<span class="op" id="8492862">*</span><span class="ident" id="8492863"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8492870">.</span><span class="ident" id="8492871">B</span><span class="op" id="8492872">)</span>&nbsp;<span class="op" id="8492874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492877">for</span>&nbsp;<span class="ident" id="8492881">i</span>&nbsp;<span class="op" id="8492883">:=</span>&nbsp;<span class="num" id="8492886">0</span><span class="op" id="8492887">;</span>&nbsp;<span class="ident" id="8492889"><a href="/html/template/js_test.go.html#8492881">i</a></span>&nbsp;<span class="op" id="8492891">&lt;</span>&nbsp;<span class="ident" id="8492893"><a href="/html/template/js_test.go.html#8492860">b</a></span><span class="op" id="8492894">.</span><span class="ident" id="8492895">N</span><span class="op" id="8492896">;</span>&nbsp;<span class="ident" id="8492898"><a href="/html/template/js_test.go.html#8492881">i</a></span><span class="op" id="8492899">++</span>&nbsp;<span class="op" id="8492902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8492906"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8492918">(</span><span class="num" id="8492919">3.141592654</span><span class="op" id="8492930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8492933">}</span><br>
<span class="lineno"></span><span class="op" id="8492935">}</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span><span class="keyword" id="8492938">func</span>&nbsp;<span class="ident" id="8492943">BenchmarkJSValEscaperWithStr</span><span class="op" id="8492971">(</span><span class="ident" id="8492972">b</span>&nbsp;<span class="op" id="8492974">*</span><span class="ident" id="8492975"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8492982">.</span><span class="ident" id="8492983">B</span><span class="op" id="8492984">)</span>&nbsp;<span class="op" id="8492986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8492989">for</span>&nbsp;<span class="ident" id="8492993">i</span>&nbsp;<span class="op" id="8492995">:=</span>&nbsp;<span class="num" id="8492998">0</span><span class="op" id="8492999">;</span>&nbsp;<span class="ident" id="8493001"><a href="/html/template/js_test.go.html#8492993">i</a></span>&nbsp;<span class="op" id="8493003">&lt;</span>&nbsp;<span class="ident" id="8493005"><a href="/html/template/js_test.go.html#8492972">b</a></span><span class="op" id="8493006">.</span><span class="ident" id="8493007">N</span><span class="op" id="8493008">;</span>&nbsp;<span class="ident" id="8493010"><a href="/html/template/js_test.go.html#8492993">i</a></span><span class="op" id="8493011">++</span>&nbsp;<span class="op" id="8493014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493018"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8493030">(</span><span class="string" id="8493031">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8493152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493155">}</span><br>
<span class="lineno">345</span><span class="op" id="8493157">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493160">func</span>&nbsp;<span class="ident" id="8493165">BenchmarkJSValEscaperWithStrNoSpecials</span><span class="op" id="8493203">(</span><span class="ident" id="8493204">b</span>&nbsp;<span class="op" id="8493206">*</span><span class="ident" id="8493207"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8493214">.</span><span class="ident" id="8493215">B</span><span class="op" id="8493216">)</span>&nbsp;<span class="op" id="8493218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493221">for</span>&nbsp;<span class="ident" id="8493225">i</span>&nbsp;<span class="op" id="8493227">:=</span>&nbsp;<span class="num" id="8493230">0</span><span class="op" id="8493231">;</span>&nbsp;<span class="ident" id="8493233"><a href="/html/template/js_test.go.html#8493225">i</a></span>&nbsp;<span class="op" id="8493235">&lt;</span>&nbsp;<span class="ident" id="8493237"><a href="/html/template/js_test.go.html#8493204">b</a></span><span class="op" id="8493238">.</span><span class="ident" id="8493239">N</span><span class="op" id="8493240">;</span>&nbsp;<span class="ident" id="8493242"><a href="/html/template/js_test.go.html#8493225">i</a></span><span class="op" id="8493243">++</span>&nbsp;<span class="op" id="8493246">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493250"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8493262">(</span><span class="string" id="8493263">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8493309">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493312">}</span><br>
<span class="lineno"></span><span class="op" id="8493314">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493317">func</span>&nbsp;<span class="ident" id="8493322">BenchmarkJSValEscaperWithObj</span><span class="op" id="8493350">(</span><span class="ident" id="8493351">b</span>&nbsp;<span class="op" id="8493353">*</span><span class="ident" id="8493354"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8493361">.</span><span class="ident" id="8493362">B</span><span class="op" id="8493363">)</span>&nbsp;<span class="op" id="8493365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493368">o</span>&nbsp;<span class="op" id="8493370">:=</span>&nbsp;<span class="keyword" id="8493373">struct</span>&nbsp;<span class="op" id="8493380">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493384">S</span>&nbsp;<span class="builtintype" id="8493386">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493395">N</span>&nbsp;<span class="builtintype" id="8493397">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493402">}</span><span class="op" id="8493403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8493407">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;\u2028&#34;</span><span class="op" id="8493534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8493538">42</span><span class="op" id="8493540">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493546">for</span>&nbsp;<span class="ident" id="8493550">i</span>&nbsp;<span class="op" id="8493552">:=</span>&nbsp;<span class="num" id="8493555">0</span><span class="op" id="8493556">;</span>&nbsp;<span class="ident" id="8493558"><a href="/html/template/js_test.go.html#8493550">i</a></span>&nbsp;<span class="op" id="8493560">&lt;</span>&nbsp;<span class="ident" id="8493562"><a href="/html/template/js_test.go.html#8493351">b</a></span><span class="op" id="8493563">.</span><span class="ident" id="8493564">N</span><span class="op" id="8493565">;</span>&nbsp;<span class="ident" id="8493567"><a href="/html/template/js_test.go.html#8493550">i</a></span><span class="op" id="8493568">++</span>&nbsp;<span class="op" id="8493571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493575"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8493587">(</span><span class="ident" id="8493588"><a href="/html/template/js_test.go.html#8493368">o</a></span><span class="op" id="8493589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493592">}</span><br>
<span class="lineno"></span><span class="op" id="8493594">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="8493597">func</span>&nbsp;<span class="ident" id="8493602">BenchmarkJSValEscaperWithObjNoSpecials</span><span class="op" id="8493640">(</span><span class="ident" id="8493641">b</span>&nbsp;<span class="op" id="8493643">*</span><span class="ident" id="8493644"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8493651">.</span><span class="ident" id="8493652">B</span><span class="op" id="8493653">)</span>&nbsp;<span class="op" id="8493655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493658">o</span>&nbsp;<span class="op" id="8493660">:=</span>&nbsp;<span class="keyword" id="8493663">struct</span>&nbsp;<span class="op" id="8493670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493674">S</span>&nbsp;<span class="builtintype" id="8493676">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493685">N</span>&nbsp;<span class="builtintype" id="8493687">int</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493692">}</span><span class="op" id="8493693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8493697">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8493743">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="num" id="8493747">42</span><span class="op" id="8493749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493755">for</span>&nbsp;<span class="ident" id="8493759">i</span>&nbsp;<span class="op" id="8493761">:=</span>&nbsp;<span class="num" id="8493764">0</span><span class="op" id="8493765">;</span>&nbsp;<span class="ident" id="8493767"><a href="/html/template/js_test.go.html#8493759">i</a></span>&nbsp;<span class="op" id="8493769">&lt;</span>&nbsp;<span class="ident" id="8493771"><a href="/html/template/js_test.go.html#8493641">b</a></span><span class="op" id="8493772">.</span><span class="ident" id="8493773">N</span><span class="op" id="8493774">;</span>&nbsp;<span class="ident" id="8493776"><a href="/html/template/js_test.go.html#8493759">i</a></span><span class="op" id="8493777">++</span>&nbsp;<span class="op" id="8493780">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493784"><a href="/html/template/js.go.html#4459859">jsValEscaper</a></span><span class="op" id="8493796">(</span><span class="ident" id="8493797"><a href="/html/template/js_test.go.html#8493658">o</a></span><span class="op" id="8493798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493801">}</span><br>
<span class="lineno"></span><span class="op" id="8493803">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8493806">func</span>&nbsp;<span class="ident" id="8493811">BenchmarkJSStrEscaperNoSpecials</span><span class="op" id="8493842">(</span><span class="ident" id="8493843">b</span>&nbsp;<span class="op" id="8493845">*</span><span class="ident" id="8493846"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8493853">.</span><span class="ident" id="8493854">B</span><span class="op" id="8493855">)</span>&nbsp;<span class="op" id="8493857">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8493860">for</span>&nbsp;<span class="ident" id="8493864">i</span>&nbsp;<span class="op" id="8493866">:=</span>&nbsp;<span class="num" id="8493869">0</span><span class="op" id="8493870">;</span>&nbsp;<span class="ident" id="8493872"><a href="/html/template/js_test.go.html#8493864">i</a></span>&nbsp;<span class="op" id="8493874">&lt;</span>&nbsp;<span class="ident" id="8493876"><a href="/html/template/js_test.go.html#8493843">b</a></span><span class="op" id="8493877">.</span><span class="ident" id="8493878">N</span><span class="op" id="8493879">;</span>&nbsp;<span class="ident" id="8493881"><a href="/html/template/js_test.go.html#8493864">i</a></span><span class="op" id="8493882">++</span>&nbsp;<span class="op" id="8493885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8493889"><a href="/html/template/js.go.html#4462270">jsStrEscaper</a></span><span class="op" id="8493901">(</span><span class="string" id="8493902">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog.&#34;</span><span class="op" id="8493949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8493952">}</span><br>
<span class="lineno"></span><span class="op" id="8493954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">385</span><span class="keyword" id="8493957">func</span>&nbsp;<span class="ident" id="8493962">BenchmarkJSStrEscaper</span><span class="op" id="8493983">(</span><span class="ident" id="8493984">b</span>&nbsp;<span class="op" id="8493986">*</span><span class="ident" id="8493987"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8493994">.</span><span class="ident" id="8493995">B</span><span class="op" id="8493996">)</span>&nbsp;<span class="op" id="8493998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494001">for</span>&nbsp;<span class="ident" id="8494005">i</span>&nbsp;<span class="op" id="8494007">:=</span>&nbsp;<span class="num" id="8494010">0</span><span class="op" id="8494011">;</span>&nbsp;<span class="ident" id="8494013"><a href="/html/template/js_test.go.html#8494005">i</a></span>&nbsp;<span class="op" id="8494015">&lt;</span>&nbsp;<span class="ident" id="8494017"><a href="/html/template/js_test.go.html#8493984">b</a></span><span class="op" id="8494018">.</span><span class="ident" id="8494019">N</span><span class="op" id="8494020">;</span>&nbsp;<span class="ident" id="8494022"><a href="/html/template/js_test.go.html#8494005">i</a></span><span class="op" id="8494023">++</span>&nbsp;<span class="op" id="8494026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494030"><a href="/html/template/js.go.html#4462270">jsStrEscaper</a></span><span class="op" id="8494042">(</span><span class="string" id="8494043">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8494164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494167">}</span><br>
<span class="lineno"></span><span class="op" id="8494169">}</span><br>
<span class="lineno">390</span><br>
<span class="lineno"></span><span class="keyword" id="8494172">func</span>&nbsp;<span class="ident" id="8494177">BenchmarkJSRegexpEscaperNoSpecials</span><span class="op" id="8494211">(</span><span class="ident" id="8494212">b</span>&nbsp;<span class="op" id="8494214">*</span><span class="ident" id="8494215"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8494222">.</span><span class="ident" id="8494223">B</span><span class="op" id="8494224">)</span>&nbsp;<span class="op" id="8494226">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494229">for</span>&nbsp;<span class="ident" id="8494233">i</span>&nbsp;<span class="op" id="8494235">:=</span>&nbsp;<span class="num" id="8494238">0</span><span class="op" id="8494239">;</span>&nbsp;<span class="ident" id="8494241"><a href="/html/template/js_test.go.html#8494233">i</a></span>&nbsp;<span class="op" id="8494243">&lt;</span>&nbsp;<span class="ident" id="8494245"><a href="/html/template/js_test.go.html#8494212">b</a></span><span class="op" id="8494246">.</span><span class="ident" id="8494247">N</span><span class="op" id="8494248">;</span>&nbsp;<span class="ident" id="8494250"><a href="/html/template/js_test.go.html#8494233">i</a></span><span class="op" id="8494251">++</span>&nbsp;<span class="op" id="8494254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494258"><a href="/html/template/js.go.html#4462754">jsRegexpEscaper</a></span><span class="op" id="8494273">(</span><span class="string" id="8494274">&#34;The&nbsp;quick,&nbsp;brown&nbsp;fox&nbsp;jumps&nbsp;over&nbsp;the&nbsp;lazy&nbsp;dog&#34;</span><span class="op" id="8494320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494323">}</span><br>
<span class="lineno">395</span><span class="op" id="8494325">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8494328">func</span>&nbsp;<span class="ident" id="8494333">BenchmarkJSRegexpEscaper</span><span class="op" id="8494357">(</span><span class="ident" id="8494358">b</span>&nbsp;<span class="op" id="8494360">*</span><span class="ident" id="8494361"><a href="/html/template/js_test.go.html#8483364">testing</a></span><span class="op" id="8494368">.</span><span class="ident" id="8494369">B</span><span class="op" id="8494370">)</span>&nbsp;<span class="op" id="8494372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8494375">for</span>&nbsp;<span class="ident" id="8494379">i</span>&nbsp;<span class="op" id="8494381">:=</span>&nbsp;<span class="num" id="8494384">0</span><span class="op" id="8494385">;</span>&nbsp;<span class="ident" id="8494387"><a href="/html/template/js_test.go.html#8494379">i</a></span>&nbsp;<span class="op" id="8494389">&lt;</span>&nbsp;<span class="ident" id="8494391"><a href="/html/template/js_test.go.html#8494358">b</a></span><span class="op" id="8494392">.</span><span class="ident" id="8494393">N</span><span class="op" id="8494394">;</span>&nbsp;<span class="ident" id="8494396"><a href="/html/template/js_test.go.html#8494379">i</a></span><span class="op" id="8494397">++</span>&nbsp;<span class="op" id="8494400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8494404"><a href="/html/template/js.go.html#4462754">jsRegexpEscaper</a></span><span class="op" id="8494419">(</span><span class="string" id="8494420">&#34;The&nbsp;&lt;i&gt;quick&lt;/i&gt;,\r\n&lt;span&nbsp;style=&#39;color:brown&#39;&gt;brown&lt;/span&gt;&nbsp;fox&nbsp;jumps\u2028over&nbsp;the&nbsp;&lt;canine&nbsp;class=\&#34;lazy\&#34;&gt;dog&lt;/canine&gt;&#34;</span><span class="op" id="8494541">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8494544">}</span><br>
<span class="lineno"></span><span class="op" id="8494546">}</span>
</div>
</body>
</html>
