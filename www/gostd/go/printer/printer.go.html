<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/printer</h2>
<ul>
<li><a href="/gostd/go/printer/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/printer/nodes.go.html">nodes.go</a></li>
<li><a href="/gostd/go/printer/performance_test.go.html">performance_test.go</a></li>
<li><a href="/gostd/go/printer/printer.go.html" class="current">printer.go</a></li>
<li><a href="/gostd/go/printer/printer_test.go.html">printer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5842486">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5842541">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5842595">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5842646">//&nbsp;Package&nbsp;printer&nbsp;implements&nbsp;printing&nbsp;of&nbsp;AST&nbsp;nodes.</span><br>
<span class="lineno"></span><span class="keyword" id="5842699">package</span>&nbsp;<span class="ident" id="5842707">printer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5842716">import</span>&nbsp;<span class="op" id="5842723">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842726">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842733">&#34;go/ast&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842743">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842755">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842761">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842767">&#34;strconv&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842778">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842789">&#34;text/tabwriter&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5842807">&#34;unicode&#34;</span><br>
<span class="lineno"></span><span class="op" id="5842817">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="5842820">const</span>&nbsp;<span class="op" id="5842826">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842829">maxNewlines</span>&nbsp;<span class="op" id="5842841">=</span>&nbsp;<span class="num" id="5842843">2</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5842849">//&nbsp;max.&nbsp;number&nbsp;of&nbsp;newlines&nbsp;between&nbsp;source&nbsp;text</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842897">debug</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842909">=</span>&nbsp;<span class="builtintype" id="5842911">false</span>&nbsp;<span class="comment" id="5842917">//&nbsp;enable&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842942">infinity</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5842954">=</span>&nbsp;<span class="num" id="5842956">1</span>&nbsp;<span class="op" id="5842958">&lt;&lt;</span>&nbsp;<span class="num" id="5842961">30</span><br>
<span class="lineno"></span><span class="op" id="5842964">)</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="5842967">type</span>&nbsp;<span class="ident" id="5842972">whiteSpace</span>&nbsp;<span class="builtintype" id="5842983">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5842989">const</span>&nbsp;<span class="op" id="5842995">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5842998">ignore</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5843007">=</span>&nbsp;<span class="ident" id="5843009"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843019">(</span><span class="num" id="5843020">0</span><span class="op" id="5843021">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843024">blank</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843033">=</span>&nbsp;<span class="ident" id="5843035"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843045">(</span><span class="string" id="5843046">&#39;&nbsp;&#39;</span><span class="op" id="5843049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843052">vtab</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843061">=</span>&nbsp;<span class="ident" id="5843063"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843073">(</span><span class="string" id="5843074">&#39;\v&#39;</span><span class="op" id="5843078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843081">newline</span>&nbsp;&nbsp;<span class="op" id="5843090">=</span>&nbsp;<span class="ident" id="5843092"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843102">(</span><span class="string" id="5843103">&#39;\n&#39;</span><span class="op" id="5843107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843110">formfeed</span>&nbsp;<span class="op" id="5843119">=</span>&nbsp;<span class="ident" id="5843121"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843131">(</span><span class="string" id="5843132">&#39;\f&#39;</span><span class="op" id="5843136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843139">indent</span>&nbsp;&nbsp;&nbsp;<span class="op" id="5843148">=</span>&nbsp;<span class="ident" id="5843150"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843160">(</span><span class="string" id="5843161">&#39;&gt;&#39;</span><span class="op" id="5843164">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843167">unindent</span>&nbsp;<span class="op" id="5843176">=</span>&nbsp;<span class="ident" id="5843178"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5843188">(</span><span class="string" id="5843189">&#39;&lt;&#39;</span><span class="op" id="5843192">)</span><br>
<span class="lineno"></span><span class="op" id="5843194">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5843197">//&nbsp;A&nbsp;pmode&nbsp;value&nbsp;represents&nbsp;the&nbsp;current&nbsp;printer&nbsp;mode.</span><br>
<span class="lineno"></span><span class="keyword" id="5843251">type</span>&nbsp;<span class="ident" id="5843256">pmode</span>&nbsp;<span class="builtintype" id="5843262">int</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span><span class="keyword" id="5843267">const</span>&nbsp;<span class="op" id="5843273">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843276">noExtraBlank</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843293"><a href="/gostd/go/printer/printer.go.html#5843256">pmode</a></span>&nbsp;<span class="op" id="5843299">=</span>&nbsp;<span class="num" id="5843301">1</span>&nbsp;<span class="op" id="5843303">&lt;&lt;</span>&nbsp;<span class="ident" id="5843306">iota</span>&nbsp;<span class="comment" id="5843311">//&nbsp;disables&nbsp;extra&nbsp;blank&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843359">noExtraLinebreak</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843394">//&nbsp;disables&nbsp;extra&nbsp;line&nbsp;break&nbsp;after&nbsp;/*-style&nbsp;comment</span><br>
<span class="lineno"></span><span class="op" id="5843446">)</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="keyword" id="5843449">type</span>&nbsp;<span class="ident" id="5843454">commentInfo</span>&nbsp;<span class="keyword" id="5843466">struct</span>&nbsp;<span class="op" id="5843473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843476">cindex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5843491">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843509">//&nbsp;current&nbsp;comment&nbsp;index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843535">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843550">*</span><span class="ident" id="5843551"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5843554">.</span><span class="ident" id="5843555"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span>&nbsp;<span class="comment" id="5843568">//&nbsp;=&nbsp;printer.comments[cindex];&nbsp;or&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843607">commentOffset</span>&nbsp;&nbsp;<span class="builtintype" id="5843622">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843640">//&nbsp;=&nbsp;printer.posFor(printer.comments[cindex].List[0].Pos()).Offset;&nbsp;or&nbsp;infinity</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843721">commentNewline</span>&nbsp;<span class="builtintype" id="5843736">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843754">//&nbsp;true&nbsp;if&nbsp;the&nbsp;comment&nbsp;group&nbsp;contains&nbsp;newlines</span><br>
<span class="lineno"></span><span class="op" id="5843801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5843804">type</span>&nbsp;<span class="ident" id="5843809">printer</span>&nbsp;<span class="keyword" id="5843817">struct</span>&nbsp;<span class="op" id="5843824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843827">//&nbsp;Configuration&nbsp;(does&nbsp;not&nbsp;change&nbsp;after&nbsp;initialization)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843884"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843892">fset</span>&nbsp;<span class="op" id="5843897">*</span><span class="ident" id="5843898"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5843903">.</span><span class="ident" id="5843904"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843914">//&nbsp;Current&nbsp;state</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843932">output</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5843944">[</span><span class="op" id="5843945">]</span><span class="builtintype" id="5843946">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5843957">//&nbsp;raw&nbsp;printer&nbsp;result</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5843980">indent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5843992">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844005">//&nbsp;current&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844029">mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844041"><a href="/gostd/go/printer/printer.go.html#5843256">pmode</a></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844054">//&nbsp;current&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844079">impliedSemi</span>&nbsp;<span class="builtintype" id="5844091">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844104">//&nbsp;if&nbsp;set,&nbsp;a&nbsp;linebreak&nbsp;implies&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844148">lastTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844160"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5844165">.</span><span class="ident" id="5844166"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span>&nbsp;&nbsp;<span class="comment" id="5844173">//&nbsp;last&nbsp;token&nbsp;printed&nbsp;(token.ILLEGAL&nbsp;if&nbsp;it&#39;s&nbsp;whitespace)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844231">prevOpen</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844243"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5844248">.</span><span class="ident" id="5844249"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span>&nbsp;&nbsp;<span class="comment" id="5844256">//&nbsp;previous&nbsp;non-brace&nbsp;&#34;open&#34;&nbsp;token&nbsp;(,&nbsp;[,&nbsp;or&nbsp;token.ILLEGAL</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844315">wsbuf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5844327">[</span><span class="op" id="5844328">]</span><span class="ident" id="5844329"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span>&nbsp;<span class="comment" id="5844340">//&nbsp;delayed&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844365">//&nbsp;Positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844379">//&nbsp;The&nbsp;out&nbsp;position&nbsp;differs&nbsp;from&nbsp;the&nbsp;pos&nbsp;position&nbsp;when&nbsp;the&nbsp;result</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844446">//&nbsp;formatting&nbsp;differs&nbsp;from&nbsp;the&nbsp;source&nbsp;formatting&nbsp;(in&nbsp;the&nbsp;amount&nbsp;of</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844514">//&nbsp;white&nbsp;space).&nbsp;If&nbsp;there&#39;s&nbsp;a&nbsp;difference&nbsp;and&nbsp;SourcePos&nbsp;is&nbsp;set&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844580">//&nbsp;ConfigMode,&nbsp;//line&nbsp;comments&nbsp;are&nbsp;used&nbsp;in&nbsp;the&nbsp;output&nbsp;to&nbsp;restore</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844646">//&nbsp;original&nbsp;source&nbsp;positions&nbsp;for&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844690">pos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844698"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5844703">.</span><span class="ident" id="5844704"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5844713">//&nbsp;current&nbsp;position&nbsp;in&nbsp;AST&nbsp;(source)&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844756">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844764"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5844769">.</span><span class="ident" id="5844770"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5844779">//&nbsp;current&nbsp;position&nbsp;in&nbsp;output&nbsp;space</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844816">last</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844824"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5844829">.</span><span class="ident" id="5844830"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="comment" id="5844839">//&nbsp;value&nbsp;of&nbsp;pos&nbsp;after&nbsp;calling&nbsp;writeString</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5844882">linePtr</span>&nbsp;<span class="op" id="5844890">*</span><span class="builtintype" id="5844891">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844905">//&nbsp;if&nbsp;set,&nbsp;record&nbsp;out.Line&nbsp;for&nbsp;the&nbsp;next&nbsp;token&nbsp;in&nbsp;*linePtr</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5844965">//&nbsp;The&nbsp;list&nbsp;of&nbsp;all&nbsp;source&nbsp;comments,&nbsp;in&nbsp;order&nbsp;of&nbsp;appearance.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845026">comments</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845042">[</span><span class="op" id="5845043">]</span><span class="op" id="5845044">*</span><span class="ident" id="5845045"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5845048">.</span><span class="ident" id="5845049"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span>&nbsp;<span class="comment" id="5845062">//&nbsp;may&nbsp;be&nbsp;nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845077">useNodeComments</span>&nbsp;<span class="builtintype" id="5845093">bool</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845113">//&nbsp;if&nbsp;not&nbsp;set,&nbsp;ignore&nbsp;lead&nbsp;and&nbsp;line&nbsp;comments&nbsp;of&nbsp;nodes</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845169">//&nbsp;Information&nbsp;about&nbsp;p.comments[p.cindex];&nbsp;set&nbsp;up&nbsp;by&nbsp;nextComment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845236"><a href="/gostd/go/printer/printer.go.html#5843454">commentInfo</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845250">//&nbsp;Cache&nbsp;of&nbsp;already&nbsp;computed&nbsp;node&nbsp;sizes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845292">nodeSizes</span>&nbsp;<span class="keyword" id="5845302">map</span><span class="op" id="5845305">[</span><span class="ident" id="5845306"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5845309">.</span><span class="ident" id="5845310"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5845314">]</span><span class="builtintype" id="5845315">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5845321">//&nbsp;Cache&nbsp;of&nbsp;most&nbsp;recently&nbsp;computed&nbsp;line&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845372">cachedPos</span>&nbsp;&nbsp;<span class="ident" id="5845383"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5845388">.</span><span class="ident" id="5845389"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845394">cachedLine</span>&nbsp;<span class="builtintype" id="5845405">int</span>&nbsp;<span class="comment" id="5845409">//&nbsp;line&nbsp;corresponding&nbsp;to&nbsp;cachedPos</span><br>
<span class="lineno"></span><span class="op" id="5845444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5845447">func</span>&nbsp;<span class="op" id="5845452">(</span><span class="ident" id="5845453">p</span>&nbsp;<span class="op" id="5845455">*</span><span class="ident" id="5845456"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5845463">)</span>&nbsp;<span class="ident" id="5845465">init</span><span class="op" id="5845469">(</span><span class="ident" id="5845470">cfg</span>&nbsp;<span class="op" id="5845474">*</span><span class="ident" id="5845475"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="5845481">,</span>&nbsp;<span class="ident" id="5845483">fset</span>&nbsp;<span class="op" id="5845488">*</span><span class="ident" id="5845489"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5845494">.</span><span class="ident" id="5845495"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5845502">,</span>&nbsp;<span class="ident" id="5845504">nodeSizes</span>&nbsp;<span class="keyword" id="5845514">map</span><span class="op" id="5845517">[</span><span class="ident" id="5845518"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5845521">.</span><span class="ident" id="5845522"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5845526">]</span><span class="builtintype" id="5845527">int</span><span class="op" id="5845530">)</span>&nbsp;<span class="op" id="5845532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845535"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845536">.</span><span class="ident" id="5845537"><a href="/gostd/go/printer/printer.go.html#5843884">Config</a></span>&nbsp;<span class="op" id="5845544">=</span>&nbsp;<span class="op" id="5845546">*</span><span class="ident" id="5845547"><a href="/gostd/go/printer/printer.go.html#5845470">cfg</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845552"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845553">.</span><span class="ident" id="5845554"><a href="/gostd/go/printer/printer.go.html#5843892">fset</a></span>&nbsp;<span class="op" id="5845559">=</span>&nbsp;<span class="ident" id="5845561"><a href="/gostd/go/printer/printer.go.html#5845483">fset</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845567"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845568">.</span><span class="ident" id="5845569"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span>&nbsp;<span class="op" id="5845573">=</span>&nbsp;<span class="ident" id="5845575"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5845580">.</span><span class="ident" id="5845581"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5845589">{</span><span class="ident" id="5845590"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="5845594">:</span>&nbsp;<span class="num" id="5845596">1</span><span class="op" id="5845597">,</span>&nbsp;<span class="ident" id="5845599"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span><span class="op" id="5845605">:</span>&nbsp;<span class="num" id="5845607">1</span><span class="op" id="5845608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845611"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845612">.</span><span class="ident" id="5845613"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span>&nbsp;<span class="op" id="5845617">=</span>&nbsp;<span class="ident" id="5845619"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5845624">.</span><span class="ident" id="5845625"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5845633">{</span><span class="ident" id="5845634"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="5845638">:</span>&nbsp;<span class="num" id="5845640">1</span><span class="op" id="5845641">,</span>&nbsp;<span class="ident" id="5845643"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span><span class="op" id="5845649">:</span>&nbsp;<span class="num" id="5845651">1</span><span class="op" id="5845652">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845655"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845656">.</span><span class="ident" id="5845657"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5845663">=</span>&nbsp;<span class="builtinfunc" id="5845665">make</span><span class="op" id="5845669">(</span><span class="op" id="5845670">[</span><span class="op" id="5845671">]</span><span class="ident" id="5845672"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5845682">,</span>&nbsp;<span class="num" id="5845684">0</span><span class="op" id="5845685">,</span>&nbsp;<span class="num" id="5845687">16</span><span class="op" id="5845689">)</span>&nbsp;<span class="comment" id="5845691">//&nbsp;whitespace&nbsp;sequences&nbsp;are&nbsp;short</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845726"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845727">.</span><span class="ident" id="5845728"><a href="/gostd/go/printer/printer.go.html#5845292">nodeSizes</a></span>&nbsp;<span class="op" id="5845738">=</span>&nbsp;<span class="ident" id="5845740"><a href="/gostd/go/printer/printer.go.html#5845504">nodeSizes</a></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845751"><a href="/gostd/go/printer/printer.go.html#5845453">p</a></span><span class="op" id="5845752">.</span><span class="ident" id="5845753"><a href="/gostd/go/printer/printer.go.html#5845372">cachedPos</a></span>&nbsp;<span class="op" id="5845763">=</span>&nbsp;<span class="op" id="5845765">-</span><span class="num" id="5845766">1</span><br>
<span class="lineno"></span><span class="op" id="5845768">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5845771">func</span>&nbsp;<span class="op" id="5845776">(</span><span class="ident" id="5845777">p</span>&nbsp;<span class="op" id="5845779">*</span><span class="ident" id="5845780"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5845787">)</span>&nbsp;<span class="ident" id="5845789">internalError</span><span class="op" id="5845802">(</span><span class="ident" id="5845803">msg</span>&nbsp;<span class="op" id="5845807">...</span><span class="keyword" id="5845810">interface</span><span class="op" id="5845819">{</span><span class="op" id="5845820">}</span><span class="op" id="5845821">)</span>&nbsp;<span class="op" id="5845823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5845826">if</span>&nbsp;<span class="ident" id="5845829"><a href="/gostd/go/printer/printer.go.html#5842897">debug</a></span>&nbsp;<span class="op" id="5845835">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845839"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5845842">.</span><span class="ident" id="5845843"><a href="/gostd/fmt/print.go.html#2144633">Print</a></span><span class="op" id="5845848">(</span><span class="ident" id="5845849"><a href="/gostd/go/printer/printer.go.html#5845777">p</a></span><span class="op" id="5845850">.</span><span class="ident" id="5845851"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5845854">.</span><span class="ident" id="5845855"><a href="/gostd/go/token/position.go.html#3874589">String</a></span><span class="op" id="5845861">(</span><span class="op" id="5845862">)</span>&nbsp;<span class="op" id="5845864">+</span>&nbsp;<span class="string" id="5845866">&#34;:&nbsp;&#34;</span><span class="op" id="5845870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5845874"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5845877">.</span><span class="ident" id="5845878"><a href="/gostd/fmt/print.go.html#2145772">Println</a></span><span class="op" id="5845885">(</span><span class="ident" id="5845886"><a href="/gostd/go/printer/printer.go.html#5845803">msg</a></span><span class="op" id="5845889">...</span><span class="op" id="5845892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5845896">panic</span><span class="op" id="5845901">(</span><span class="string" id="5845902">&#34;go/printer&#34;</span><span class="op" id="5845914">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5845917">}</span><br>
<span class="lineno"></span><span class="op" id="5845919">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="comment" id="5845922">//&nbsp;commentsHaveNewline&nbsp;reports&nbsp;whether&nbsp;a&nbsp;list&nbsp;of&nbsp;comments&nbsp;belonging&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="5845993">//&nbsp;an&nbsp;*ast.CommentGroup&nbsp;contains&nbsp;newlines.&nbsp;Because&nbsp;the&nbsp;position&nbsp;information</span><br>
<span class="lineno"></span><span class="comment" id="5846069">//&nbsp;may&nbsp;only&nbsp;be&nbsp;partially&nbsp;correct,&nbsp;we&nbsp;also&nbsp;have&nbsp;to&nbsp;read&nbsp;the&nbsp;comment&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="5846142">func</span>&nbsp;<span class="op" id="5846147">(</span><span class="ident" id="5846148">p</span>&nbsp;<span class="op" id="5846150">*</span><span class="ident" id="5846151"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5846158">)</span>&nbsp;<span class="ident" id="5846160">commentsHaveNewline</span><span class="op" id="5846179">(</span><span class="ident" id="5846180">list</span>&nbsp;<span class="op" id="5846185">[</span><span class="op" id="5846186">]</span><span class="op" id="5846187">*</span><span class="ident" id="5846188"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5846191">.</span><span class="ident" id="5846192"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="5846199">)</span>&nbsp;<span class="builtintype" id="5846201">bool</span>&nbsp;<span class="op" id="5846206">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846209">//&nbsp;len(list)&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846227">line</span>&nbsp;<span class="op" id="5846232">:=</span>&nbsp;<span class="ident" id="5846235"><a href="/gostd/go/printer/printer.go.html#5846148">p</a></span><span class="op" id="5846236">.</span><span class="ident" id="5846237"><a href="/gostd/go/printer/printer.go.html#5848576">lineFor</a></span><span class="op" id="5846244">(</span><span class="ident" id="5846245"><a href="/gostd/go/printer/printer.go.html#5846180">list</a></span><span class="op" id="5846249">[</span><span class="num" id="5846250">0</span><span class="op" id="5846251">]</span><span class="op" id="5846252">.</span><span class="ident" id="5846253"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5846256">(</span><span class="op" id="5846257">)</span><span class="op" id="5846258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846261">for</span>&nbsp;<span class="ident" id="5846265">i</span><span class="op" id="5846266">,</span>&nbsp;<span class="ident" id="5846268">c</span>&nbsp;<span class="op" id="5846270">:=</span>&nbsp;<span class="keyword" id="5846273">range</span>&nbsp;<span class="ident" id="5846279"><a href="/gostd/go/printer/printer.go.html#5846180">list</a></span>&nbsp;<span class="op" id="5846284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846288">if</span>&nbsp;<span class="ident" id="5846291"><a href="/gostd/go/printer/printer.go.html#5846265">i</a></span>&nbsp;<span class="op" id="5846293">&gt;</span>&nbsp;<span class="num" id="5846295">0</span>&nbsp;<span class="op" id="5846297">&amp;&amp;</span>&nbsp;<span class="ident" id="5846300"><a href="/gostd/go/printer/printer.go.html#5846148">p</a></span><span class="op" id="5846301">.</span><span class="ident" id="5846302"><a href="/gostd/go/printer/printer.go.html#5848576">lineFor</a></span><span class="op" id="5846309">(</span><span class="ident" id="5846310"><a href="/gostd/go/printer/printer.go.html#5846180">list</a></span><span class="op" id="5846314">[</span><span class="ident" id="5846315"><a href="/gostd/go/printer/printer.go.html#5846265">i</a></span><span class="op" id="5846316">]</span><span class="op" id="5846317">.</span><span class="ident" id="5846318"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5846321">(</span><span class="op" id="5846322">)</span><span class="op" id="5846323">)</span>&nbsp;<span class="op" id="5846325">!=</span>&nbsp;<span class="ident" id="5846328"><a href="/gostd/go/printer/printer.go.html#5846227">line</a></span>&nbsp;<span class="op" id="5846333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846338">//&nbsp;not&nbsp;all&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846378">return</span>&nbsp;<span class="builtintype" id="5846385">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846392">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846396">if</span>&nbsp;<span class="ident" id="5846399">t</span>&nbsp;<span class="op" id="5846401">:=</span>&nbsp;<span class="ident" id="5846404"><a href="/gostd/go/printer/printer.go.html#5846268">c</a></span><span class="op" id="5846405">.</span><span class="ident" id="5846406"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5846410">;</span>&nbsp;<span class="builtinfunc" id="5846412">len</span><span class="op" id="5846415">(</span><span class="ident" id="5846416"><a href="/gostd/go/printer/printer.go.html#5846399">t</a></span><span class="op" id="5846417">)</span>&nbsp;<span class="op" id="5846419">&gt;=</span>&nbsp;<span class="num" id="5846422">2</span>&nbsp;<span class="op" id="5846424">&amp;&amp;</span>&nbsp;<span class="op" id="5846427">(</span><span class="ident" id="5846428"><a href="/gostd/go/printer/printer.go.html#5846399">t</a></span><span class="op" id="5846429">[</span><span class="num" id="5846430">1</span><span class="op" id="5846431">]</span>&nbsp;<span class="op" id="5846433">==</span>&nbsp;<span class="string" id="5846436">&#39;/&#39;</span>&nbsp;<span class="op" id="5846440">||</span>&nbsp;<span class="ident" id="5846443"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5846450">.</span><span class="ident" id="5846451"><a href="/gostd/strings/strings.go.html#2968416">Contains</a></span><span class="op" id="5846459">(</span><span class="ident" id="5846460"><a href="/gostd/go/printer/printer.go.html#5846399">t</a></span><span class="op" id="5846461">,</span>&nbsp;<span class="string" id="5846463">&#34;\n&#34;</span><span class="op" id="5846467">)</span><span class="op" id="5846468">)</span>&nbsp;<span class="op" id="5846470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846475">return</span>&nbsp;<span class="builtintype" id="5846482">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846489">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846492">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846495">_</span>&nbsp;<span class="op" id="5846497">=</span>&nbsp;<span class="ident" id="5846499"><a href="/gostd/go/printer/printer.go.html#5846227">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846505">return</span>&nbsp;<span class="builtintype" id="5846512">false</span><br>
<span class="lineno"></span><span class="op" id="5846518">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="keyword" id="5846521">func</span>&nbsp;<span class="op" id="5846526">(</span><span class="ident" id="5846527">p</span>&nbsp;<span class="op" id="5846529">*</span><span class="ident" id="5846530"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5846537">)</span>&nbsp;<span class="ident" id="5846539">nextComment</span><span class="op" id="5846550">(</span><span class="op" id="5846551">)</span>&nbsp;<span class="op" id="5846553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846556">for</span>&nbsp;<span class="ident" id="5846560"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846561">.</span><span class="ident" id="5846562"><a href="/gostd/go/printer/printer.go.html#5843476">cindex</a></span>&nbsp;<span class="op" id="5846569">&lt;</span>&nbsp;<span class="builtinfunc" id="5846571">len</span><span class="op" id="5846574">(</span><span class="ident" id="5846575"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846576">.</span><span class="ident" id="5846577"><a href="/gostd/go/printer/printer.go.html#5845026">comments</a></span><span class="op" id="5846585">)</span>&nbsp;<span class="op" id="5846587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846591">c</span>&nbsp;<span class="op" id="5846593">:=</span>&nbsp;<span class="ident" id="5846596"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846597">.</span><span class="ident" id="5846598"><a href="/gostd/go/printer/printer.go.html#5845026">comments</a></span><span class="op" id="5846606">[</span><span class="ident" id="5846607"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846608">.</span><span class="ident" id="5846609"><a href="/gostd/go/printer/printer.go.html#5843476">cindex</a></span><span class="op" id="5846615">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846619"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846620">.</span><span class="ident" id="5846621"><a href="/gostd/go/printer/printer.go.html#5843476">cindex</a></span><span class="op" id="5846627">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846632">if</span>&nbsp;<span class="ident" id="5846635">list</span>&nbsp;<span class="op" id="5846640">:=</span>&nbsp;<span class="ident" id="5846643"><a href="/gostd/go/printer/printer.go.html#5846591">c</a></span><span class="op" id="5846644">.</span><span class="ident" id="5846645"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span><span class="op" id="5846649">;</span>&nbsp;<span class="builtinfunc" id="5846651">len</span><span class="op" id="5846654">(</span><span class="ident" id="5846655"><a href="/gostd/go/printer/printer.go.html#5846635">list</a></span><span class="op" id="5846659">)</span>&nbsp;<span class="op" id="5846661">&gt;</span>&nbsp;<span class="num" id="5846663">0</span>&nbsp;<span class="op" id="5846665">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846670"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846671">.</span><span class="ident" id="5846672"><a href="/gostd/go/printer/printer.go.html#5843535">comment</a></span>&nbsp;<span class="op" id="5846680">=</span>&nbsp;<span class="ident" id="5846682"><a href="/gostd/go/printer/printer.go.html#5846591">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846687"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846688">.</span><span class="ident" id="5846689"><a href="/gostd/go/printer/printer.go.html#5843607">commentOffset</a></span>&nbsp;<span class="op" id="5846703">=</span>&nbsp;<span class="ident" id="5846705"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846706">.</span><span class="ident" id="5846707"><a href="/gostd/go/printer/printer.go.html#5848425">posFor</a></span><span class="op" id="5846713">(</span><span class="ident" id="5846714"><a href="/gostd/go/printer/printer.go.html#5846635">list</a></span><span class="op" id="5846718">[</span><span class="num" id="5846719">0</span><span class="op" id="5846720">]</span><span class="op" id="5846721">.</span><span class="ident" id="5846722"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5846725">(</span><span class="op" id="5846726">)</span><span class="op" id="5846727">)</span><span class="op" id="5846728">.</span><span class="ident" id="5846729"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846739"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846740">.</span><span class="ident" id="5846741"><a href="/gostd/go/printer/printer.go.html#5843721">commentNewline</a></span>&nbsp;<span class="op" id="5846756">=</span>&nbsp;<span class="ident" id="5846758"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846759">.</span><span class="ident" id="5846760"><a href="/gostd/go/printer/printer.go.html#5846160">commentsHaveNewline</a></span><span class="op" id="5846779">(</span><span class="ident" id="5846780"><a href="/gostd/go/printer/printer.go.html#5846635">list</a></span><span class="op" id="5846784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5846789">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846798">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846802">//&nbsp;we&nbsp;should&nbsp;not&nbsp;reach&nbsp;here&nbsp;(correct&nbsp;ASTs&nbsp;don&#39;t&nbsp;have&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846863">//&nbsp;ast.CommentGroup&nbsp;nodes),&nbsp;but&nbsp;be&nbsp;conservative&nbsp;and&nbsp;try&nbsp;again</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5846926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5846929">//&nbsp;no&nbsp;more&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5846950"><a href="/gostd/go/printer/printer.go.html#5846527">p</a></span><span class="op" id="5846951">.</span><span class="ident" id="5846952"><a href="/gostd/go/printer/printer.go.html#5843607">commentOffset</a></span>&nbsp;<span class="op" id="5846966">=</span>&nbsp;<span class="ident" id="5846968"><a href="/gostd/go/printer/printer.go.html#5842942">infinity</a></span><br>
<span class="lineno">145</span><span class="op" id="5846977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5846980">//&nbsp;commentBefore&nbsp;returns&nbsp;true&nbsp;iff&nbsp;the&nbsp;current&nbsp;comment&nbsp;group&nbsp;occurs</span><br>
<span class="lineno"></span><span class="comment" id="5847047">//&nbsp;before&nbsp;the&nbsp;next&nbsp;position&nbsp;in&nbsp;the&nbsp;source&nbsp;code&nbsp;and&nbsp;printing&nbsp;it&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="5847115">//&nbsp;not&nbsp;introduce&nbsp;implicit&nbsp;semicolons.</span><br>
<span class="lineno">150</span><span class="comment" id="5847153">//</span><br>
<span class="lineno"></span><span class="keyword" id="5847156">func</span>&nbsp;<span class="op" id="5847161">(</span><span class="ident" id="5847162">p</span>&nbsp;<span class="op" id="5847164">*</span><span class="ident" id="5847165"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5847172">)</span>&nbsp;<span class="ident" id="5847174">commentBefore</span><span class="op" id="5847187">(</span><span class="ident" id="5847188">next</span>&nbsp;<span class="ident" id="5847193"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5847198">.</span><span class="ident" id="5847199"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5847207">)</span>&nbsp;<span class="builtintype" id="5847209">bool</span>&nbsp;<span class="op" id="5847214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847217">return</span>&nbsp;<span class="ident" id="5847224"><a href="/gostd/go/printer/printer.go.html#5847162">p</a></span><span class="op" id="5847225">.</span><span class="ident" id="5847226"><a href="/gostd/go/printer/printer.go.html#5843607">commentOffset</a></span>&nbsp;<span class="op" id="5847240">&lt;</span>&nbsp;<span class="ident" id="5847242"><a href="/gostd/go/printer/printer.go.html#5847188">next</a></span><span class="op" id="5847246">.</span><span class="ident" id="5847247"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span>&nbsp;<span class="op" id="5847254">&amp;&amp;</span>&nbsp;<span class="op" id="5847257">(</span><span class="op" id="5847258">!</span><span class="ident" id="5847259"><a href="/gostd/go/printer/printer.go.html#5847162">p</a></span><span class="op" id="5847260">.</span><span class="ident" id="5847261"><a href="/gostd/go/printer/printer.go.html#5844079">impliedSemi</a></span>&nbsp;<span class="op" id="5847273">||</span>&nbsp;<span class="op" id="5847276">!</span><span class="ident" id="5847277"><a href="/gostd/go/printer/printer.go.html#5847162">p</a></span><span class="op" id="5847278">.</span><span class="ident" id="5847279"><a href="/gostd/go/printer/printer.go.html#5843721">commentNewline</a></span><span class="op" id="5847293">)</span><br>
<span class="lineno"></span><span class="op" id="5847295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="comment" id="5847298">//&nbsp;commentSizeBefore&nbsp;returns&nbsp;the&nbsp;estimated&nbsp;size&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5847353">//&nbsp;comments&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;before&nbsp;the&nbsp;next&nbsp;position.</span><br>
<span class="lineno"></span><span class="comment" id="5847408">//</span><br>
<span class="lineno"></span><span class="keyword" id="5847411">func</span>&nbsp;<span class="op" id="5847416">(</span><span class="ident" id="5847417">p</span>&nbsp;<span class="op" id="5847419">*</span><span class="ident" id="5847420"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5847427">)</span>&nbsp;<span class="ident" id="5847429">commentSizeBefore</span><span class="op" id="5847446">(</span><span class="ident" id="5847447">next</span>&nbsp;<span class="ident" id="5847452"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5847457">.</span><span class="ident" id="5847458"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5847466">)</span>&nbsp;<span class="builtintype" id="5847468">int</span>&nbsp;<span class="op" id="5847472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5847475">//&nbsp;save/restore&nbsp;current&nbsp;p.commentInfo&nbsp;(p.nextComment()&nbsp;modifies&nbsp;it)</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847544">defer</span>&nbsp;<span class="keyword" id="5847550">func</span><span class="op" id="5847554">(</span><span class="ident" id="5847555">info</span>&nbsp;<span class="ident" id="5847560"><a href="/gostd/go/printer/printer.go.html#5843454">commentInfo</a></span><span class="op" id="5847571">)</span>&nbsp;<span class="op" id="5847573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847577"><a href="/gostd/go/printer/printer.go.html#5847417">p</a></span><span class="op" id="5847578">.</span><span class="ident" id="5847579"><a href="/gostd/go/printer/printer.go.html#5845236">commentInfo</a></span>&nbsp;<span class="op" id="5847591">=</span>&nbsp;<span class="ident" id="5847593"><a href="/gostd/go/printer/printer.go.html#5847555">info</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847599">}</span><span class="op" id="5847600">(</span><span class="ident" id="5847601"><a href="/gostd/go/printer/printer.go.html#5847417">p</a></span><span class="op" id="5847602">.</span><span class="ident" id="5847603"><a href="/gostd/go/printer/printer.go.html#5845236">commentInfo</a></span><span class="op" id="5847614">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847618">size</span>&nbsp;<span class="op" id="5847623">:=</span>&nbsp;<span class="num" id="5847626">0</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847629">for</span>&nbsp;<span class="ident" id="5847633"><a href="/gostd/go/printer/printer.go.html#5847417">p</a></span><span class="op" id="5847634">.</span><span class="ident" id="5847635"><a href="/gostd/go/printer/printer.go.html#5847174">commentBefore</a></span><span class="op" id="5847648">(</span><span class="ident" id="5847649"><a href="/gostd/go/printer/printer.go.html#5847447">next</a></span><span class="op" id="5847653">)</span>&nbsp;<span class="op" id="5847655">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847659">for</span>&nbsp;<span class="ident" id="5847663">_</span><span class="op" id="5847664">,</span>&nbsp;<span class="ident" id="5847666">c</span>&nbsp;<span class="op" id="5847668">:=</span>&nbsp;<span class="keyword" id="5847671">range</span>&nbsp;<span class="ident" id="5847677"><a href="/gostd/go/printer/printer.go.html#5847417">p</a></span><span class="op" id="5847678">.</span><span class="ident" id="5847679"><a href="/gostd/go/printer/printer.go.html#5843535">comment</a></span><span class="op" id="5847686">.</span><span class="ident" id="5847687"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span>&nbsp;<span class="op" id="5847692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847697"><a href="/gostd/go/printer/printer.go.html#5847618">size</a></span>&nbsp;<span class="op" id="5847702">+=</span>&nbsp;<span class="builtinfunc" id="5847705">len</span><span class="op" id="5847708">(</span><span class="ident" id="5847709"><a href="/gostd/go/printer/printer.go.html#5847666">c</a></span><span class="op" id="5847710">.</span><span class="ident" id="5847711"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5847715">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847719">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5847723"><a href="/gostd/go/printer/printer.go.html#5847417">p</a></span><span class="op" id="5847724">.</span><span class="ident" id="5847725"><a href="/gostd/go/printer/printer.go.html#5846539">nextComment</a></span><span class="op" id="5847736">(</span><span class="op" id="5847737">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5847740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5847743">return</span>&nbsp;<span class="ident" id="5847750"><a href="/gostd/go/printer/printer.go.html#5847618">size</a></span><br>
<span class="lineno"></span><span class="op" id="5847755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5847758">//&nbsp;recordLine&nbsp;records&nbsp;the&nbsp;output&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;next&nbsp;non-whitespace</span><br>
<span class="lineno">175</span><span class="comment" id="5847831">//&nbsp;token&nbsp;in&nbsp;*linePtr.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate&nbsp;line&nbsp;number&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5847905">//&nbsp;formatted&nbsp;construct,&nbsp;independent&nbsp;of&nbsp;pending&nbsp;(not&nbsp;yet&nbsp;emitted)&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5847981">//&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5847997">//</span><br>
<span class="lineno"></span><span class="keyword" id="5848000">func</span>&nbsp;<span class="op" id="5848005">(</span><span class="ident" id="5848006">p</span>&nbsp;<span class="op" id="5848008">*</span><span class="ident" id="5848009"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5848016">)</span>&nbsp;<span class="ident" id="5848018">recordLine</span><span class="op" id="5848028">(</span><span class="ident" id="5848029">linePtr</span>&nbsp;<span class="op" id="5848037">*</span><span class="builtintype" id="5848038">int</span><span class="op" id="5848041">)</span>&nbsp;<span class="op" id="5848043">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848046"><a href="/gostd/go/printer/printer.go.html#5848006">p</a></span><span class="op" id="5848047">.</span><span class="ident" id="5848048"><a href="/gostd/go/printer/printer.go.html#5844882">linePtr</a></span>&nbsp;<span class="op" id="5848056">=</span>&nbsp;<span class="ident" id="5848058"><a href="/gostd/go/printer/printer.go.html#5848029">linePtr</a></span><br>
<span class="lineno"></span><span class="op" id="5848066">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5848069">//&nbsp;linesFrom&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;output&nbsp;lines&nbsp;between&nbsp;the&nbsp;current</span><br>
<span class="lineno"></span><span class="comment" id="5848137">//&nbsp;output&nbsp;line&nbsp;and&nbsp;the&nbsp;line&nbsp;argument,&nbsp;ignoring&nbsp;any&nbsp;pending&nbsp;(not&nbsp;yet</span><br>
<span class="lineno">185</span><span class="comment" id="5848205">//&nbsp;emitted)&nbsp;whitespace&nbsp;or&nbsp;comments.&nbsp;It&nbsp;is&nbsp;used&nbsp;to&nbsp;compute&nbsp;an&nbsp;accurate</span><br>
<span class="lineno"></span><span class="comment" id="5848275">//&nbsp;size&nbsp;(in&nbsp;number&nbsp;of&nbsp;lines)&nbsp;for&nbsp;a&nbsp;formatted&nbsp;construct.</span><br>
<span class="lineno"></span><span class="comment" id="5848331">//</span><br>
<span class="lineno"></span><span class="keyword" id="5848334">func</span>&nbsp;<span class="op" id="5848339">(</span><span class="ident" id="5848340">p</span>&nbsp;<span class="op" id="5848342">*</span><span class="ident" id="5848343"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5848350">)</span>&nbsp;<span class="ident" id="5848352">linesFrom</span><span class="op" id="5848361">(</span><span class="ident" id="5848362">line</span>&nbsp;<span class="builtintype" id="5848367">int</span><span class="op" id="5848370">)</span>&nbsp;<span class="builtintype" id="5848372">int</span>&nbsp;<span class="op" id="5848376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848379">return</span>&nbsp;<span class="ident" id="5848386"><a href="/gostd/go/printer/printer.go.html#5848340">p</a></span><span class="op" id="5848387">.</span><span class="ident" id="5848388"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5848391">.</span><span class="ident" id="5848392"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5848397">-</span>&nbsp;<span class="ident" id="5848399"><a href="/gostd/go/printer/printer.go.html#5848362">line</a></span><br>
<span class="lineno">190</span><span class="op" id="5848404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5848407">func</span>&nbsp;<span class="op" id="5848412">(</span><span class="ident" id="5848413">p</span>&nbsp;<span class="op" id="5848415">*</span><span class="ident" id="5848416"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5848423">)</span>&nbsp;<span class="ident" id="5848425">posFor</span><span class="op" id="5848431">(</span><span class="ident" id="5848432">pos</span>&nbsp;<span class="ident" id="5848436"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5848441">.</span><span class="ident" id="5848442"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><span class="op" id="5848445">)</span>&nbsp;<span class="ident" id="5848447"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5848452">.</span><span class="ident" id="5848453"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span>&nbsp;<span class="op" id="5848462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848465">//&nbsp;not&nbsp;used&nbsp;frequently&nbsp;enough&nbsp;to&nbsp;cache&nbsp;entire&nbsp;token.Position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848527">return</span>&nbsp;<span class="ident" id="5848534"><a href="/gostd/go/printer/printer.go.html#5848413">p</a></span><span class="op" id="5848535">.</span><span class="ident" id="5848536"><a href="/gostd/go/printer/printer.go.html#5843892">fset</a></span><span class="op" id="5848540">.</span><span class="ident" id="5848541"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="5848549">(</span><span class="ident" id="5848550"><a href="/gostd/go/printer/printer.go.html#5848432">pos</a></span><span class="op" id="5848553">)</span><br>
<span class="lineno">195</span><span class="op" id="5848555">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5848558">func</span>&nbsp;<span class="op" id="5848563">(</span><span class="ident" id="5848564">p</span>&nbsp;<span class="op" id="5848566">*</span><span class="ident" id="5848567"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5848574">)</span>&nbsp;<span class="ident" id="5848576">lineFor</span><span class="op" id="5848583">(</span><span class="ident" id="5848584">pos</span>&nbsp;<span class="ident" id="5848588"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5848593">.</span><span class="ident" id="5848594"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><span class="op" id="5848597">)</span>&nbsp;<span class="builtintype" id="5848599">int</span>&nbsp;<span class="op" id="5848603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848606">if</span>&nbsp;<span class="ident" id="5848609"><a href="/gostd/go/printer/printer.go.html#5848584">pos</a></span>&nbsp;<span class="op" id="5848613">!=</span>&nbsp;<span class="ident" id="5848616"><a href="/gostd/go/printer/printer.go.html#5848564">p</a></span><span class="op" id="5848617">.</span><span class="ident" id="5848618"><a href="/gostd/go/printer/printer.go.html#5845372">cachedPos</a></span>&nbsp;<span class="op" id="5848628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848632"><a href="/gostd/go/printer/printer.go.html#5848564">p</a></span><span class="op" id="5848633">.</span><span class="ident" id="5848634"><a href="/gostd/go/printer/printer.go.html#5845372">cachedPos</a></span>&nbsp;<span class="op" id="5848644">=</span>&nbsp;<span class="ident" id="5848646"><a href="/gostd/go/printer/printer.go.html#5848584">pos</a></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5848652"><a href="/gostd/go/printer/printer.go.html#5848564">p</a></span><span class="op" id="5848653">.</span><span class="ident" id="5848654"><a href="/gostd/go/printer/printer.go.html#5845394">cachedLine</a></span>&nbsp;<span class="op" id="5848665">=</span>&nbsp;<span class="ident" id="5848667"><a href="/gostd/go/printer/printer.go.html#5848564">p</a></span><span class="op" id="5848668">.</span><span class="ident" id="5848669"><a href="/gostd/go/printer/printer.go.html#5843892">fset</a></span><span class="op" id="5848673">.</span><span class="ident" id="5848674"><a href="/gostd/go/token/position.go.html#3887071">Position</a></span><span class="op" id="5848682">(</span><span class="ident" id="5848683"><a href="/gostd/go/printer/printer.go.html#5848584">pos</a></span><span class="op" id="5848686">)</span><span class="op" id="5848687">.</span><span class="ident" id="5848688"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5848694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848697">return</span>&nbsp;<span class="ident" id="5848704"><a href="/gostd/go/printer/printer.go.html#5848564">p</a></span><span class="op" id="5848705">.</span><span class="ident" id="5848706"><a href="/gostd/go/printer/printer.go.html#5845394">cachedLine</a></span><br>
<span class="lineno"></span><span class="op" id="5848717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">205</span><span class="comment" id="5848720">//&nbsp;atLineBegin&nbsp;emits&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary&nbsp;and&nbsp;prints&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="keyword" id="5848795">func</span>&nbsp;<span class="op" id="5848800">(</span><span class="ident" id="5848801">p</span>&nbsp;<span class="op" id="5848803">*</span><span class="ident" id="5848804"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5848811">)</span>&nbsp;<span class="ident" id="5848813">atLineBegin</span><span class="op" id="5848824">(</span><span class="ident" id="5848825">pos</span>&nbsp;<span class="ident" id="5848829"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5848834">.</span><span class="ident" id="5848835"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5848843">)</span>&nbsp;<span class="op" id="5848845">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5848848">//&nbsp;write&nbsp;a&nbsp;//line&nbsp;comment&nbsp;if&nbsp;necessary</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5848888">if</span>&nbsp;<span class="ident" id="5848891"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5848892">.</span><span class="ident" id="5848893"><a href="/gostd/go/printer/printer.go.html#5843884">Config</a></span><span class="op" id="5848899">.</span><span class="ident" id="5848900"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span><span class="op" id="5848904">&amp;</span><span class="ident" id="5848905"><a href="/gostd/go/printer/printer.go.html#5877391">SourcePos</a></span>&nbsp;<span class="op" id="5848915">!=</span>&nbsp;<span class="num" id="5848918">0</span>&nbsp;<span class="op" id="5848920">&amp;&amp;</span>&nbsp;<span class="ident" id="5848923"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5848926">.</span><span class="ident" id="5848927"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5848934">(</span><span class="op" id="5848935">)</span>&nbsp;<span class="op" id="5848937">&amp;&amp;</span>&nbsp;<span class="op" id="5848940">(</span><span class="ident" id="5848941"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5848942">.</span><span class="ident" id="5848943"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5848946">.</span><span class="ident" id="5848947"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5848952">!=</span>&nbsp;<span class="ident" id="5848955"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5848958">.</span><span class="ident" id="5848959"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5848964">||</span>&nbsp;<span class="ident" id="5848967"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5848968">.</span><span class="ident" id="5848969"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5848972">.</span><span class="ident" id="5848973"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span>&nbsp;<span class="op" id="5848982">!=</span>&nbsp;<span class="ident" id="5848985"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5848988">.</span><span class="ident" id="5848989"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span><span class="op" id="5848997">)</span>&nbsp;<span class="op" id="5848999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849003"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849004">.</span><span class="ident" id="5849005"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5849012">=</span>&nbsp;<span class="builtinfunc" id="5849014">append</span><span class="op" id="5849020">(</span><span class="ident" id="5849021"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849022">.</span><span class="ident" id="5849023"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5849029">,</span>&nbsp;<span class="ident" id="5849031"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5849040">.</span><span class="ident" id="5849041"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5849047">)</span>&nbsp;<span class="comment" id="5849049">//&nbsp;protect&nbsp;&#39;\n&#39;&nbsp;in&nbsp;//line&nbsp;from&nbsp;tabwriter&nbsp;interpretation</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849107"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849108">.</span><span class="ident" id="5849109"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5849116">=</span>&nbsp;<span class="builtinfunc" id="5849118">append</span><span class="op" id="5849124">(</span><span class="ident" id="5849125"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849126">.</span><span class="ident" id="5849127"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5849133">,</span>&nbsp;<span class="ident" id="5849135"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5849138">.</span><span class="ident" id="5849139"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5849146">(</span><span class="string" id="5849147">&#34;//line&nbsp;%s:%d\n&#34;</span><span class="op" id="5849163">,</span>&nbsp;<span class="ident" id="5849165"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5849168">.</span><span class="ident" id="5849169"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span><span class="op" id="5849177">,</span>&nbsp;<span class="ident" id="5849179"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5849182">.</span><span class="ident" id="5849183"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="5849187">)</span><span class="op" id="5849188">...</span><span class="op" id="5849191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849195"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849196">.</span><span class="ident" id="5849197"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5849204">=</span>&nbsp;<span class="builtinfunc" id="5849206">append</span><span class="op" id="5849212">(</span><span class="ident" id="5849213"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849214">.</span><span class="ident" id="5849215"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5849221">,</span>&nbsp;<span class="ident" id="5849223"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5849232">.</span><span class="ident" id="5849233"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5849239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849243">//&nbsp;p.out&nbsp;must&nbsp;match&nbsp;the&nbsp;//line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849284"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849285">.</span><span class="ident" id="5849286"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5849289">.</span><span class="ident" id="5849290"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span>&nbsp;<span class="op" id="5849299">=</span>&nbsp;<span class="ident" id="5849301"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5849304">.</span><span class="ident" id="5849305"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849316"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849317">.</span><span class="ident" id="5849318"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5849321">.</span><span class="ident" id="5849322"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5849327">=</span>&nbsp;<span class="ident" id="5849329"><a href="/gostd/go/printer/printer.go.html#5848825">pos</a></span><span class="op" id="5849332">.</span><span class="ident" id="5849333"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849343">//&nbsp;write&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849365">//&nbsp;use&nbsp;&#34;hard&#34;&nbsp;htabs&nbsp;-&nbsp;indentation&nbsp;columns</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849408">//&nbsp;must&nbsp;not&nbsp;be&nbsp;discarded&nbsp;by&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849451">n</span>&nbsp;<span class="op" id="5849453">:=</span>&nbsp;<span class="ident" id="5849456"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849457">.</span><span class="ident" id="5849458"><a href="/gostd/go/printer/printer.go.html#5843884">Config</a></span><span class="op" id="5849464">.</span><span class="ident" id="5849465"><a href="/gostd/go/printer/printer.go.html#5877611">Indent</a></span>&nbsp;<span class="op" id="5849472">+</span>&nbsp;<span class="ident" id="5849474"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849475">.</span><span class="ident" id="5849476"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="comment" id="5849483">//&nbsp;include&nbsp;base&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849512">for</span>&nbsp;<span class="ident" id="5849516">i</span>&nbsp;<span class="op" id="5849518">:=</span>&nbsp;<span class="num" id="5849521">0</span><span class="op" id="5849522">;</span>&nbsp;<span class="ident" id="5849524"><a href="/gostd/go/printer/printer.go.html#5849516">i</a></span>&nbsp;<span class="op" id="5849526">&lt;</span>&nbsp;<span class="ident" id="5849528"><a href="/gostd/go/printer/printer.go.html#5849451">n</a></span><span class="op" id="5849529">;</span>&nbsp;<span class="ident" id="5849531"><a href="/gostd/go/printer/printer.go.html#5849516">i</a></span><span class="op" id="5849532">++</span>&nbsp;<span class="op" id="5849535">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849539"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849540">.</span><span class="ident" id="5849541"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5849548">=</span>&nbsp;<span class="builtinfunc" id="5849550">append</span><span class="op" id="5849556">(</span><span class="ident" id="5849557"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849558">.</span><span class="ident" id="5849559"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5849565">,</span>&nbsp;<span class="string" id="5849567">&#39;\t&#39;</span><span class="op" id="5849571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849574">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849578">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849599"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849600">.</span><span class="ident" id="5849601"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849604">.</span><span class="ident" id="5849605"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span>&nbsp;<span class="op" id="5849612">+=</span>&nbsp;<span class="ident" id="5849615"><a href="/gostd/go/printer/printer.go.html#5849451">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849618"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849619">.</span><span class="ident" id="5849620"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849623">.</span><span class="ident" id="5849624"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5849631">+=</span>&nbsp;<span class="ident" id="5849634"><a href="/gostd/go/printer/printer.go.html#5849451">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849637"><a href="/gostd/go/printer/printer.go.html#5848801">p</a></span><span class="op" id="5849638">.</span><span class="ident" id="5849639"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5849642">.</span><span class="ident" id="5849643"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5849650">+=</span>&nbsp;<span class="ident" id="5849653"><a href="/gostd/go/printer/printer.go.html#5849451">n</a></span><br>
<span class="lineno"></span><span class="op" id="5849655">}</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="comment" id="5849658">//&nbsp;writeByte&nbsp;writes&nbsp;ch&nbsp;n&nbsp;times&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos.</span><br>
<span class="lineno"></span><span class="keyword" id="5849720">func</span>&nbsp;<span class="op" id="5849725">(</span><span class="ident" id="5849726">p</span>&nbsp;<span class="op" id="5849728">*</span><span class="ident" id="5849729"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5849736">)</span>&nbsp;<span class="ident" id="5849738">writeByte</span><span class="op" id="5849747">(</span><span class="ident" id="5849748">ch</span>&nbsp;<span class="builtintype" id="5849751">byte</span><span class="op" id="5849755">,</span>&nbsp;<span class="ident" id="5849757">n</span>&nbsp;<span class="builtintype" id="5849759">int</span><span class="op" id="5849762">)</span>&nbsp;<span class="op" id="5849764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849767">if</span>&nbsp;<span class="ident" id="5849770"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849771">.</span><span class="ident" id="5849772"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5849775">.</span><span class="ident" id="5849776"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5849783">==</span>&nbsp;<span class="num" id="5849786">1</span>&nbsp;<span class="op" id="5849788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849792"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849793">.</span><span class="ident" id="5849794"><a href="/gostd/go/printer/printer.go.html#5848813">atLineBegin</a></span><span class="op" id="5849805">(</span><span class="ident" id="5849806"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849807">.</span><span class="ident" id="5849808"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849811">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849818">for</span>&nbsp;<span class="ident" id="5849822">i</span>&nbsp;<span class="op" id="5849824">:=</span>&nbsp;<span class="num" id="5849827">0</span><span class="op" id="5849828">;</span>&nbsp;<span class="ident" id="5849830"><a href="/gostd/go/printer/printer.go.html#5849822">i</a></span>&nbsp;<span class="op" id="5849832">&lt;</span>&nbsp;<span class="ident" id="5849834"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><span class="op" id="5849835">;</span>&nbsp;<span class="ident" id="5849837"><a href="/gostd/go/printer/printer.go.html#5849822">i</a></span><span class="op" id="5849838">++</span>&nbsp;<span class="op" id="5849841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849845"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849846">.</span><span class="ident" id="5849847"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5849854">=</span>&nbsp;<span class="builtinfunc" id="5849856">append</span><span class="op" id="5849862">(</span><span class="ident" id="5849863"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849864">.</span><span class="ident" id="5849865"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5849871">,</span>&nbsp;<span class="ident" id="5849873"><a href="/gostd/go/printer/printer.go.html#5849748">ch</a></span><span class="op" id="5849875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5849878">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5849882">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849903"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849904">.</span><span class="ident" id="5849905"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849908">.</span><span class="ident" id="5849909"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span>&nbsp;<span class="op" id="5849916">+=</span>&nbsp;<span class="ident" id="5849919"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5849922">if</span>&nbsp;<span class="ident" id="5849925"><a href="/gostd/go/printer/printer.go.html#5849748">ch</a></span>&nbsp;<span class="op" id="5849928">==</span>&nbsp;<span class="string" id="5849931">&#39;\n&#39;</span>&nbsp;<span class="op" id="5849936">||</span>&nbsp;<span class="ident" id="5849939"><a href="/gostd/go/printer/printer.go.html#5849748">ch</a></span>&nbsp;<span class="op" id="5849942">==</span>&nbsp;<span class="string" id="5849945">&#39;\f&#39;</span>&nbsp;<span class="op" id="5849950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849954"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849955">.</span><span class="ident" id="5849956"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849959">.</span><span class="ident" id="5849960"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5849965">+=</span>&nbsp;<span class="ident" id="5849968"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849972"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849973">.</span><span class="ident" id="5849974"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5849977">.</span><span class="ident" id="5849978"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5849983">+=</span>&nbsp;<span class="ident" id="5849986"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5849990"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5849991">.</span><span class="ident" id="5849992"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5849995">.</span><span class="ident" id="5849996"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5850003">=</span>&nbsp;<span class="num" id="5850005">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850009"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5850010">.</span><span class="ident" id="5850011"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5850014">.</span><span class="ident" id="5850015"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5850022">=</span>&nbsp;<span class="num" id="5850024">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850028">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850036">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850039"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5850040">.</span><span class="ident" id="5850041"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5850044">.</span><span class="ident" id="5850045"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5850052">+=</span>&nbsp;<span class="ident" id="5850055"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850058"><a href="/gostd/go/printer/printer.go.html#5849726">p</a></span><span class="op" id="5850059">.</span><span class="ident" id="5850060"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5850063">.</span><span class="ident" id="5850064"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5850071">+=</span>&nbsp;<span class="ident" id="5850074"><a href="/gostd/go/printer/printer.go.html#5849757">n</a></span><br>
<span class="lineno"></span><span class="op" id="5850076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5850079">//&nbsp;writeString&nbsp;writes&nbsp;the&nbsp;string&nbsp;s&nbsp;to&nbsp;p.output&nbsp;and&nbsp;updates&nbsp;p.pos,&nbsp;p.out,</span><br>
<span class="lineno">255</span><span class="comment" id="5850152">//&nbsp;and&nbsp;p.last.&nbsp;If&nbsp;isLit&nbsp;is&nbsp;set,&nbsp;s&nbsp;is&nbsp;escaped&nbsp;w/&nbsp;tabwriter.Escape&nbsp;characters</span><br>
<span class="lineno"></span><span class="comment" id="5850228">//&nbsp;to&nbsp;protect&nbsp;s&nbsp;from&nbsp;being&nbsp;interpreted&nbsp;by&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><span class="comment" id="5850285">//</span><br>
<span class="lineno"></span><span class="comment" id="5850288">//&nbsp;Note:&nbsp;writeString&nbsp;is&nbsp;only&nbsp;used&nbsp;to&nbsp;write&nbsp;Go&nbsp;tokens,&nbsp;literals,&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="5850356">//&nbsp;comments,&nbsp;all&nbsp;of&nbsp;which&nbsp;must&nbsp;be&nbsp;written&nbsp;literally.&nbsp;Thus,&nbsp;it&nbsp;is&nbsp;correct</span><br>
<span class="lineno">260</span><span class="comment" id="5850429">//&nbsp;to&nbsp;always&nbsp;set&nbsp;isLit&nbsp;=&nbsp;true.&nbsp;However,&nbsp;setting&nbsp;it&nbsp;explicitly&nbsp;only&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5850501">//&nbsp;needed&nbsp;(i.e.,&nbsp;when&nbsp;we&nbsp;don&#39;t&nbsp;know&nbsp;that&nbsp;s&nbsp;contains&nbsp;no&nbsp;tabs&nbsp;or&nbsp;line&nbsp;breaks)</span><br>
<span class="lineno"></span><span class="comment" id="5850577">//&nbsp;avoids&nbsp;processing&nbsp;extra&nbsp;escape&nbsp;characters&nbsp;and&nbsp;reduces&nbsp;run&nbsp;time&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5850650">//&nbsp;printer&nbsp;benchmark&nbsp;by&nbsp;up&nbsp;to&nbsp;10%.</span><br>
<span class="lineno"></span><span class="comment" id="5850685">//</span><br>
<span class="lineno">265</span><span class="keyword" id="5850688">func</span>&nbsp;<span class="op" id="5850693">(</span><span class="ident" id="5850694">p</span>&nbsp;<span class="op" id="5850696">*</span><span class="ident" id="5850697"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5850704">)</span>&nbsp;<span class="ident" id="5850706">writeString</span><span class="op" id="5850717">(</span><span class="ident" id="5850718">pos</span>&nbsp;<span class="ident" id="5850722"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5850727">.</span><span class="ident" id="5850728"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5850736">,</span>&nbsp;<span class="ident" id="5850738">s</span>&nbsp;<span class="builtintype" id="5850740">string</span><span class="op" id="5850746">,</span>&nbsp;<span class="ident" id="5850748">isLit</span>&nbsp;<span class="builtintype" id="5850754">bool</span><span class="op" id="5850758">)</span>&nbsp;<span class="op" id="5850760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850763">if</span>&nbsp;<span class="ident" id="5850766"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5850767">.</span><span class="ident" id="5850768"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5850771">.</span><span class="ident" id="5850772"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5850779">==</span>&nbsp;<span class="num" id="5850782">1</span>&nbsp;<span class="op" id="5850784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5850788"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5850789">.</span><span class="ident" id="5850790"><a href="/gostd/go/printer/printer.go.html#5848813">atLineBegin</a></span><span class="op" id="5850801">(</span><span class="ident" id="5850802"><a href="/gostd/go/printer/printer.go.html#5850718">pos</a></span><span class="op" id="5850805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5850808">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5850812">if</span>&nbsp;<span class="ident" id="5850815"><a href="/gostd/go/printer/printer.go.html#5850718">pos</a></span><span class="op" id="5850818">.</span><span class="ident" id="5850819"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5850826">(</span><span class="op" id="5850827">)</span>&nbsp;<span class="op" id="5850829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850833">//&nbsp;update&nbsp;p.pos&nbsp;(if&nbsp;pos&nbsp;is&nbsp;invalid,&nbsp;continue&nbsp;with&nbsp;existing&nbsp;p.pos)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850901">//&nbsp;Note:&nbsp;Must&nbsp;do&nbsp;this&nbsp;after&nbsp;handling&nbsp;line&nbsp;beginnings&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5850964">//&nbsp;atLineBegin&nbsp;updates&nbsp;p.pos&nbsp;if&nbsp;there&#39;s&nbsp;indentation,&nbsp;but&nbsp;p.pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851029">//&nbsp;is&nbsp;the&nbsp;position&nbsp;of&nbsp;s.</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851056"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851057">.</span><span class="ident" id="5851058"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span>&nbsp;<span class="op" id="5851062">=</span>&nbsp;<span class="ident" id="5851064"><a href="/gostd/go/printer/printer.go.html#5850718">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851069">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851073">if</span>&nbsp;<span class="ident" id="5851076"><a href="/gostd/go/printer/printer.go.html#5850748">isLit</a></span>&nbsp;<span class="op" id="5851082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851086">//&nbsp;Protect&nbsp;s&nbsp;such&nbsp;that&nbsp;is&nbsp;passes&nbsp;through&nbsp;the&nbsp;tabwriter</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851143">//&nbsp;unchanged.&nbsp;Note&nbsp;that&nbsp;valid&nbsp;Go&nbsp;programs&nbsp;cannot&nbsp;contain</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851202">//&nbsp;tabwriter.Escape&nbsp;bytes&nbsp;since&nbsp;they&nbsp;do&nbsp;not&nbsp;appear&nbsp;in&nbsp;legal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851264">//&nbsp;UTF-8&nbsp;sequences.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851286"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851287">.</span><span class="ident" id="5851288"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5851295">=</span>&nbsp;<span class="builtinfunc" id="5851297">append</span><span class="op" id="5851303">(</span><span class="ident" id="5851304"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851305">.</span><span class="ident" id="5851306"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5851312">,</span>&nbsp;<span class="ident" id="5851314"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5851323">.</span><span class="ident" id="5851324"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5851330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851333">}</span><br>
<span class="lineno">285</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851337">if</span>&nbsp;<span class="ident" id="5851340"><a href="/gostd/go/printer/printer.go.html#5842897">debug</a></span>&nbsp;<span class="op" id="5851346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851350"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851351">.</span><span class="ident" id="5851352"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5851359">=</span>&nbsp;<span class="builtinfunc" id="5851361">append</span><span class="op" id="5851367">(</span><span class="ident" id="5851368"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851369">.</span><span class="ident" id="5851370"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5851376">,</span>&nbsp;<span class="ident" id="5851378"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5851381">.</span><span class="ident" id="5851382"><a href="/gostd/fmt/print.go.html#2143637">Sprintf</a></span><span class="op" id="5851389">(</span><span class="string" id="5851390">&#34;/*%s*/&#34;</span><span class="op" id="5851398">,</span>&nbsp;<span class="ident" id="5851400"><a href="/gostd/go/printer/printer.go.html#5850718">pos</a></span><span class="op" id="5851403">)</span><span class="op" id="5851404">...</span><span class="op" id="5851407">)</span>&nbsp;<span class="comment" id="5851409">//&nbsp;do&nbsp;not&nbsp;update&nbsp;p.pos!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851437"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851438">.</span><span class="ident" id="5851439"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5851446">=</span>&nbsp;<span class="builtinfunc" id="5851448">append</span><span class="op" id="5851454">(</span><span class="ident" id="5851455"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851456">.</span><span class="ident" id="5851457"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5851463">,</span>&nbsp;<span class="ident" id="5851465"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851466">...</span><span class="op" id="5851469">)</span><br>
<span class="lineno">290</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851473">//&nbsp;update&nbsp;positions</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851494">nlines</span>&nbsp;<span class="op" id="5851501">:=</span>&nbsp;<span class="num" id="5851504">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851507">var</span>&nbsp;<span class="ident" id="5851511">li</span>&nbsp;<span class="builtintype" id="5851514">int</span>&nbsp;<span class="comment" id="5851518">//&nbsp;index&nbsp;of&nbsp;last&nbsp;newline;&nbsp;valid&nbsp;if&nbsp;nlines&nbsp;&gt;&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851565">for</span>&nbsp;<span class="ident" id="5851569">i</span>&nbsp;<span class="op" id="5851571">:=</span>&nbsp;<span class="num" id="5851574">0</span><span class="op" id="5851575">;</span>&nbsp;<span class="ident" id="5851577"><a href="/gostd/go/printer/printer.go.html#5851569">i</a></span>&nbsp;<span class="op" id="5851579">&lt;</span>&nbsp;<span class="builtinfunc" id="5851581">len</span><span class="op" id="5851584">(</span><span class="ident" id="5851585"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851586">)</span><span class="op" id="5851587">;</span>&nbsp;<span class="ident" id="5851589"><a href="/gostd/go/printer/printer.go.html#5851569">i</a></span><span class="op" id="5851590">++</span>&nbsp;<span class="op" id="5851593">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5851597">//&nbsp;Go&nbsp;tokens&nbsp;cannot&nbsp;contain&nbsp;&#39;\f&#39;&nbsp;-&nbsp;no&nbsp;need&nbsp;to&nbsp;look&nbsp;for&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851657">if</span>&nbsp;<span class="ident" id="5851660"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851661">[</span><span class="ident" id="5851662"><a href="/gostd/go/printer/printer.go.html#5851569">i</a></span><span class="op" id="5851663">]</span>&nbsp;<span class="op" id="5851665">==</span>&nbsp;<span class="string" id="5851668">&#39;\n&#39;</span>&nbsp;<span class="op" id="5851673">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851678"><a href="/gostd/go/printer/printer.go.html#5851494">nlines</a></span><span class="op" id="5851684">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851690"><a href="/gostd/go/printer/printer.go.html#5851511">li</a></span>&nbsp;<span class="op" id="5851693">=</span>&nbsp;<span class="ident" id="5851695"><a href="/gostd/go/printer/printer.go.html#5851569">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851699">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851705"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851706">.</span><span class="ident" id="5851707"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5851710">.</span><span class="ident" id="5851711"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span>&nbsp;<span class="op" id="5851718">+=</span>&nbsp;<span class="builtinfunc" id="5851721">len</span><span class="op" id="5851724">(</span><span class="ident" id="5851725"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851729">if</span>&nbsp;<span class="ident" id="5851732"><a href="/gostd/go/printer/printer.go.html#5851494">nlines</a></span>&nbsp;<span class="op" id="5851739">&gt;</span>&nbsp;<span class="num" id="5851741">0</span>&nbsp;<span class="op" id="5851743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851747"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851748">.</span><span class="ident" id="5851749"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5851752">.</span><span class="ident" id="5851753"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5851758">+=</span>&nbsp;<span class="ident" id="5851761"><a href="/gostd/go/printer/printer.go.html#5851494">nlines</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851770"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851771">.</span><span class="ident" id="5851772"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5851775">.</span><span class="ident" id="5851776"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5851781">+=</span>&nbsp;<span class="ident" id="5851784"><a href="/gostd/go/printer/printer.go.html#5851494">nlines</a></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851793">c</span>&nbsp;<span class="op" id="5851795">:=</span>&nbsp;<span class="builtinfunc" id="5851798">len</span><span class="op" id="5851801">(</span><span class="ident" id="5851802"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851803">)</span>&nbsp;<span class="op" id="5851805">-</span>&nbsp;<span class="ident" id="5851807"><a href="/gostd/go/printer/printer.go.html#5851511">li</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851812"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851813">.</span><span class="ident" id="5851814"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5851817">.</span><span class="ident" id="5851818"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5851825">=</span>&nbsp;<span class="ident" id="5851827"><a href="/gostd/go/printer/printer.go.html#5851793">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851831"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851832">.</span><span class="ident" id="5851833"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5851836">.</span><span class="ident" id="5851837"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5851844">=</span>&nbsp;<span class="ident" id="5851846"><a href="/gostd/go/printer/printer.go.html#5851793">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851849">}</span>&nbsp;<span class="keyword" id="5851851">else</span>&nbsp;<span class="op" id="5851856">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851860"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851861">.</span><span class="ident" id="5851862"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5851865">.</span><span class="ident" id="5851866"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5851873">+=</span>&nbsp;<span class="builtinfunc" id="5851876">len</span><span class="op" id="5851879">(</span><span class="ident" id="5851880"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851881">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851885"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851886">.</span><span class="ident" id="5851887"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5851890">.</span><span class="ident" id="5851891"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5851898">+=</span>&nbsp;<span class="builtinfunc" id="5851901">len</span><span class="op" id="5851904">(</span><span class="ident" id="5851905"><a href="/gostd/go/printer/printer.go.html#5850738">s</a></span><span class="op" id="5851906">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5851913">if</span>&nbsp;<span class="ident" id="5851916"><a href="/gostd/go/printer/printer.go.html#5850748">isLit</a></span>&nbsp;<span class="op" id="5851922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851926"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851927">.</span><span class="ident" id="5851928"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span>&nbsp;<span class="op" id="5851935">=</span>&nbsp;<span class="builtinfunc" id="5851937">append</span><span class="op" id="5851943">(</span><span class="ident" id="5851944"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851945">.</span><span class="ident" id="5851946"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5851952">,</span>&nbsp;<span class="ident" id="5851954"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5851963">.</span><span class="ident" id="5851964"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5851970">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5851973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5851977"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851978">.</span><span class="ident" id="5851979"><a href="/gostd/go/printer/printer.go.html#5844816">last</a></span>&nbsp;<span class="op" id="5851984">=</span>&nbsp;<span class="ident" id="5851986"><a href="/gostd/go/printer/printer.go.html#5850694">p</a></span><span class="op" id="5851987">.</span><span class="ident" id="5851988"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><br>
<span class="lineno"></span><span class="op" id="5851992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="5851995">//&nbsp;writeCommentPrefix&nbsp;writes&nbsp;the&nbsp;whitespace&nbsp;before&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span><span class="comment" id="5852057">//&nbsp;If&nbsp;there&nbsp;is&nbsp;any&nbsp;pending&nbsp;whitespace,&nbsp;it&nbsp;consumes&nbsp;as&nbsp;much&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="5852119">//&nbsp;it&nbsp;as&nbsp;is&nbsp;likely&nbsp;to&nbsp;help&nbsp;position&nbsp;the&nbsp;comment&nbsp;nicely.</span><br>
<span class="lineno"></span><span class="comment" id="5852175">//&nbsp;pos&nbsp;is&nbsp;the&nbsp;comment&nbsp;position,&nbsp;next&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;item</span><br>
<span class="lineno"></span><span class="comment" id="5852237">//&nbsp;after&nbsp;all&nbsp;pending&nbsp;comments,&nbsp;prev&nbsp;is&nbsp;the&nbsp;previous&nbsp;comment&nbsp;in</span><br>
<span class="lineno">325</span><span class="comment" id="5852300">//&nbsp;a&nbsp;group&nbsp;of&nbsp;comments&nbsp;(or&nbsp;nil),&nbsp;and&nbsp;tok&nbsp;is&nbsp;the&nbsp;next&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="5852360">//</span><br>
<span class="lineno"></span><span class="keyword" id="5852363">func</span>&nbsp;<span class="op" id="5852368">(</span><span class="ident" id="5852369">p</span>&nbsp;<span class="op" id="5852371">*</span><span class="ident" id="5852372"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5852379">)</span>&nbsp;<span class="ident" id="5852381">writeCommentPrefix</span><span class="op" id="5852399">(</span><span class="ident" id="5852400">pos</span><span class="op" id="5852403">,</span>&nbsp;<span class="ident" id="5852405">next</span>&nbsp;<span class="ident" id="5852410"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5852415">.</span><span class="ident" id="5852416"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5852424">,</span>&nbsp;<span class="ident" id="5852426">prev</span><span class="op" id="5852430">,</span>&nbsp;<span class="ident" id="5852432">comment</span>&nbsp;<span class="op" id="5852440">*</span><span class="ident" id="5852441"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5852444">.</span><span class="ident" id="5852445"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="5852452">,</span>&nbsp;<span class="ident" id="5852454">tok</span>&nbsp;<span class="ident" id="5852458"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5852463">.</span><span class="ident" id="5852464"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="5852469">)</span>&nbsp;<span class="op" id="5852471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852474">if</span>&nbsp;<span class="builtinfunc" id="5852477">len</span><span class="op" id="5852480">(</span><span class="ident" id="5852481"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5852482">.</span><span class="ident" id="5852483"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5852489">)</span>&nbsp;<span class="op" id="5852491">==</span>&nbsp;<span class="num" id="5852494">0</span>&nbsp;<span class="op" id="5852496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5852500">//&nbsp;the&nbsp;comment&nbsp;is&nbsp;the&nbsp;first&nbsp;item&nbsp;to&nbsp;be&nbsp;printed&nbsp;-&nbsp;don&#39;t&nbsp;write&nbsp;any&nbsp;whitespace</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852578">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852586">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852590">if</span>&nbsp;<span class="ident" id="5852593"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5852596">.</span><span class="ident" id="5852597"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5852604">(</span><span class="op" id="5852605">)</span>&nbsp;<span class="op" id="5852607">&amp;&amp;</span>&nbsp;<span class="ident" id="5852610"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5852613">.</span><span class="ident" id="5852614"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span>&nbsp;<span class="op" id="5852623">!=</span>&nbsp;<span class="ident" id="5852626"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5852627">.</span><span class="ident" id="5852628"><a href="/gostd/go/printer/printer.go.html#5844816">last</a></span><span class="op" id="5852632">.</span><span class="ident" id="5852633"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span>&nbsp;<span class="op" id="5852642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5852646">//&nbsp;comment&nbsp;in&nbsp;a&nbsp;different&nbsp;file&nbsp;-&nbsp;separate&nbsp;with&nbsp;newlines</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852704"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5852705">.</span><span class="ident" id="5852706"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5852715">(</span><span class="string" id="5852716">&#39;\f&#39;</span><span class="op" id="5852720">,</span>&nbsp;<span class="ident" id="5852722"><a href="/gostd/go/printer/printer.go.html#5842829">maxNewlines</a></span><span class="op" id="5852733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852737">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5852745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852749">if</span>&nbsp;<span class="ident" id="5852752"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5852755">.</span><span class="ident" id="5852756"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5852761">==</span>&nbsp;<span class="ident" id="5852764"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5852765">.</span><span class="ident" id="5852766"><a href="/gostd/go/printer/printer.go.html#5844816">last</a></span><span class="op" id="5852770">.</span><span class="ident" id="5852771"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5852776">&amp;&amp;</span>&nbsp;<span class="op" id="5852779">(</span><span class="ident" id="5852780"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span>&nbsp;<span class="op" id="5852785">==</span>&nbsp;<span class="builtintype" id="5852788">nil</span>&nbsp;<span class="op" id="5852792">||</span>&nbsp;<span class="ident" id="5852795"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span><span class="op" id="5852799">.</span><span class="ident" id="5852800"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5852804">[</span><span class="num" id="5852805">1</span><span class="op" id="5852806">]</span>&nbsp;<span class="op" id="5852808">!=</span>&nbsp;<span class="string" id="5852811">&#39;/&#39;</span><span class="op" id="5852814">)</span>&nbsp;<span class="op" id="5852816">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5852820">//&nbsp;comment&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;last&nbsp;item:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5852864">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852906">hasSep</span>&nbsp;<span class="op" id="5852913">:=</span>&nbsp;<span class="builtintype" id="5852916">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852924">if</span>&nbsp;<span class="ident" id="5852927"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span>&nbsp;<span class="op" id="5852932">==</span>&nbsp;<span class="builtintype" id="5852935">nil</span>&nbsp;<span class="op" id="5852939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5852944">//&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;comment&nbsp;group</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5852983">j</span>&nbsp;<span class="op" id="5852985">:=</span>&nbsp;<span class="num" id="5852988">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5852993">for</span>&nbsp;<span class="ident" id="5852997">i</span><span class="op" id="5852998">,</span>&nbsp;<span class="ident" id="5853000">ch</span>&nbsp;<span class="op" id="5853003">:=</span>&nbsp;<span class="keyword" id="5853006">range</span>&nbsp;<span class="ident" id="5853012"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853013">.</span><span class="ident" id="5853014"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5853020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853026">switch</span>&nbsp;<span class="ident" id="5853033"><a href="/gostd/go/printer/printer.go.html#5853000">ch</a></span>&nbsp;<span class="op" id="5853036">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853042">case</span>&nbsp;<span class="ident" id="5853047"><a href="/gostd/go/printer/printer.go.html#5843024">blank</a></span><span class="op" id="5853052">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853059">//&nbsp;ignore&nbsp;any&nbsp;blanks&nbsp;before&nbsp;a&nbsp;comment</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853102"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853103">.</span><span class="ident" id="5853104"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5853109">[</span><span class="ident" id="5853110"><a href="/gostd/go/printer/printer.go.html#5852997">i</a></span><span class="op" id="5853111">]</span>&nbsp;<span class="op" id="5853113">=</span>&nbsp;<span class="ident" id="5853115"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853127">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853140">case</span>&nbsp;<span class="ident" id="5853145"><a href="/gostd/go/printer/printer.go.html#5843052">vtab</a></span><span class="op" id="5853149">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853156">//&nbsp;respect&nbsp;existing&nbsp;tabs&nbsp;-&nbsp;important</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853198">//&nbsp;for&nbsp;proper&nbsp;formatting&nbsp;of&nbsp;commented&nbsp;structs</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853249"><a href="/gostd/go/printer/printer.go.html#5852906">hasSep</a></span>&nbsp;<span class="op" id="5853256">=</span>&nbsp;<span class="builtintype" id="5853258">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853268">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853281">case</span>&nbsp;<span class="ident" id="5853286"><a href="/gostd/go/printer/printer.go.html#5843139">indent</a></span><span class="op" id="5853292">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853299">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853333">continue</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853352"><a href="/gostd/go/printer/printer.go.html#5852983">j</a></span>&nbsp;<span class="op" id="5853354">=</span>&nbsp;<span class="ident" id="5853356"><a href="/gostd/go/printer/printer.go.html#5852997">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853362">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853376"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853377">.</span><span class="ident" id="5853378"><a href="/gostd/go/printer/printer.go.html#5865543">writeWhitespace</a></span><span class="op" id="5853393">(</span><span class="ident" id="5853394"><a href="/gostd/go/printer/printer.go.html#5852983">j</a></span><span class="op" id="5853395">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853403">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;separator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853450">if</span>&nbsp;<span class="op" id="5853453">!</span><span class="ident" id="5853454"><a href="/gostd/go/printer/printer.go.html#5852906">hasSep</a></span>&nbsp;<span class="op" id="5853461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853466">sep</span>&nbsp;<span class="op" id="5853470">:=</span>&nbsp;<span class="builtintype" id="5853473">byte</span><span class="op" id="5853477">(</span><span class="string" id="5853478">&#39;\t&#39;</span><span class="op" id="5853482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853487">if</span>&nbsp;<span class="ident" id="5853490"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5853493">.</span><span class="ident" id="5853494"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5853499">==</span>&nbsp;<span class="ident" id="5853502"><a href="/gostd/go/printer/printer.go.html#5852405">next</a></span><span class="op" id="5853506">.</span><span class="ident" id="5853507"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5853512">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853518">//&nbsp;next&nbsp;item&nbsp;is&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853570">//&nbsp;(which&nbsp;must&nbsp;be&nbsp;a&nbsp;/*-style&nbsp;comment):&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853622">//&nbsp;with&nbsp;a&nbsp;blank&nbsp;instead&nbsp;of&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853659"><a href="/gostd/go/printer/printer.go.html#5853466">sep</a></span>&nbsp;<span class="op" id="5853663">=</span>&nbsp;<span class="string" id="5853665">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853672">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853677"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853678">.</span><span class="ident" id="5853679"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5853688">(</span><span class="ident" id="5853689"><a href="/gostd/go/printer/printer.go.html#5853466">sep</a></span><span class="op" id="5853692">,</span>&nbsp;<span class="num" id="5853694">1</span><span class="op" id="5853695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853699">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5853703">}</span>&nbsp;<span class="keyword" id="5853705">else</span>&nbsp;<span class="op" id="5853710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853714">//&nbsp;comment&nbsp;on&nbsp;a&nbsp;different&nbsp;line:</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853748">//&nbsp;separate&nbsp;with&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853791">droppedLinebreak</span>&nbsp;<span class="op" id="5853808">:=</span>&nbsp;<span class="builtintype" id="5853811">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853819">j</span>&nbsp;<span class="op" id="5853821">:=</span>&nbsp;<span class="num" id="5853824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853828">for</span>&nbsp;<span class="ident" id="5853832">i</span><span class="op" id="5853833">,</span>&nbsp;<span class="ident" id="5853835">ch</span>&nbsp;<span class="op" id="5853838">:=</span>&nbsp;<span class="keyword" id="5853841">range</span>&nbsp;<span class="ident" id="5853847"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853848">.</span><span class="ident" id="5853849"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5853855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853860">switch</span>&nbsp;<span class="ident" id="5853867"><a href="/gostd/go/printer/printer.go.html#5853835">ch</a></span>&nbsp;<span class="op" id="5853870">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853875">case</span>&nbsp;<span class="ident" id="5853880"><a href="/gostd/go/printer/printer.go.html#5843024">blank</a></span><span class="op" id="5853885">,</span>&nbsp;<span class="ident" id="5853887"><a href="/gostd/go/printer/printer.go.html#5843052">vtab</a></span><span class="op" id="5853891">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5853897">//&nbsp;ignore&nbsp;any&nbsp;horizontal&nbsp;whitespace&nbsp;before&nbsp;line&nbsp;breaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5853956"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5853957">.</span><span class="ident" id="5853958"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5853963">[</span><span class="ident" id="5853964"><a href="/gostd/go/printer/printer.go.html#5853832">i</a></span><span class="op" id="5853965">]</span>&nbsp;<span class="op" id="5853967">=</span>&nbsp;<span class="ident" id="5853969"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853980">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5853992">case</span>&nbsp;<span class="ident" id="5853997"><a href="/gostd/go/printer/printer.go.html#5843139">indent</a></span><span class="op" id="5854003">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854009">//&nbsp;apply&nbsp;pending&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854042">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854054">case</span>&nbsp;<span class="ident" id="5854059"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span><span class="op" id="5854067">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854073">//&nbsp;if&nbsp;this&nbsp;is&nbsp;not&nbsp;the&nbsp;last&nbsp;unindent,&nbsp;apply&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854123">//&nbsp;as&nbsp;it&nbsp;is&nbsp;(likely)&nbsp;belonging&nbsp;to&nbsp;the&nbsp;last</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854170">//&nbsp;construct&nbsp;(e.g.,&nbsp;a&nbsp;multi-line&nbsp;expression&nbsp;list)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854224">//&nbsp;and&nbsp;is&nbsp;not&nbsp;part&nbsp;of&nbsp;closing&nbsp;a&nbsp;block</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854266">if</span>&nbsp;<span class="ident" id="5854269"><a href="/gostd/go/printer/printer.go.html#5853832">i</a></span><span class="op" id="5854270">+</span><span class="num" id="5854271">1</span>&nbsp;<span class="op" id="5854273">&lt;</span>&nbsp;<span class="builtinfunc" id="5854275">len</span><span class="op" id="5854278">(</span><span class="ident" id="5854279"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5854280">.</span><span class="ident" id="5854281"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5854286">)</span>&nbsp;<span class="op" id="5854288">&amp;&amp;</span>&nbsp;<span class="ident" id="5854291"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5854292">.</span><span class="ident" id="5854293"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5854298">[</span><span class="ident" id="5854299"><a href="/gostd/go/printer/printer.go.html#5853832">i</a></span><span class="op" id="5854300">+</span><span class="num" id="5854301">1</span><span class="op" id="5854302">]</span>&nbsp;<span class="op" id="5854304">==</span>&nbsp;<span class="ident" id="5854307"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span>&nbsp;<span class="op" id="5854316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854323">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854336">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854342">//&nbsp;if&nbsp;the&nbsp;next&nbsp;token&nbsp;is&nbsp;not&nbsp;a&nbsp;closing&nbsp;},&nbsp;apply&nbsp;the&nbsp;unindent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854406">//&nbsp;if&nbsp;it&nbsp;appears&nbsp;that&nbsp;the&nbsp;comment&nbsp;is&nbsp;aligned&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854464">//&nbsp;token;&nbsp;otherwise&nbsp;assume&nbsp;the&nbsp;unindent&nbsp;is&nbsp;part&nbsp;of&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854521">//&nbsp;closing&nbsp;block&nbsp;and&nbsp;stop&nbsp;(this&nbsp;scenario&nbsp;appears&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854579">//&nbsp;comments&nbsp;before&nbsp;a&nbsp;case&nbsp;label&nbsp;where&nbsp;the&nbsp;comments</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854634">//&nbsp;apply&nbsp;to&nbsp;the&nbsp;next&nbsp;case&nbsp;instead&nbsp;of&nbsp;the&nbsp;current&nbsp;one)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854692">if</span>&nbsp;<span class="ident" id="5854695"><a href="/gostd/go/printer/printer.go.html#5852454">tok</a></span>&nbsp;<span class="op" id="5854699">!=</span>&nbsp;<span class="ident" id="5854702"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5854707">.</span><span class="ident" id="5854708"><a href="/gostd/go/token/token.go.html#3890661">RBRACE</a></span>&nbsp;<span class="op" id="5854715">&amp;&amp;</span>&nbsp;<span class="ident" id="5854718"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5854721">.</span><span class="ident" id="5854722"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5854729">==</span>&nbsp;<span class="ident" id="5854732"><a href="/gostd/go/printer/printer.go.html#5852405">next</a></span><span class="op" id="5854736">.</span><span class="ident" id="5854737"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5854744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854751">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854764">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854769">case</span>&nbsp;<span class="ident" id="5854774"><a href="/gostd/go/printer/printer.go.html#5843081">newline</a></span><span class="op" id="5854781">,</span>&nbsp;<span class="ident" id="5854783"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span><span class="op" id="5854791">:</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854797"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5854798">.</span><span class="ident" id="5854799"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5854804">[</span><span class="ident" id="5854805"><a href="/gostd/go/printer/printer.go.html#5853832">i</a></span><span class="op" id="5854806">]</span>&nbsp;<span class="op" id="5854808">=</span>&nbsp;<span class="ident" id="5854810"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854821"><a href="/gostd/go/printer/printer.go.html#5853791">droppedLinebreak</a></span>&nbsp;<span class="op" id="5854838">=</span>&nbsp;<span class="ident" id="5854840"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span>&nbsp;<span class="op" id="5854845">==</span>&nbsp;<span class="builtintype" id="5854848">nil</span>&nbsp;<span class="comment" id="5854852">//&nbsp;record&nbsp;only&nbsp;if&nbsp;first&nbsp;comment&nbsp;of&nbsp;a&nbsp;group</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854903"><a href="/gostd/go/printer/printer.go.html#5853819">j</a></span>&nbsp;<span class="op" id="5854905">=</span>&nbsp;<span class="ident" id="5854907"><a href="/gostd/go/printer/printer.go.html#5853832">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5854912">break</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5854920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5854924"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5854925">.</span><span class="ident" id="5854926"><a href="/gostd/go/printer/printer.go.html#5865543">writeWhitespace</a></span><span class="op" id="5854941">(</span><span class="ident" id="5854942"><a href="/gostd/go/printer/printer.go.html#5853819">j</a></span><span class="op" id="5854943">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5854948">//&nbsp;determine&nbsp;number&nbsp;of&nbsp;linebreaks&nbsp;before&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855003">n</span>&nbsp;<span class="op" id="5855005">:=</span>&nbsp;<span class="num" id="5855008">0</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855012">if</span>&nbsp;<span class="ident" id="5855015"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5855018">.</span><span class="ident" id="5855019"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5855026">(</span><span class="op" id="5855027">)</span>&nbsp;<span class="op" id="5855029">&amp;&amp;</span>&nbsp;<span class="ident" id="5855032"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5855033">.</span><span class="ident" id="5855034"><a href="/gostd/go/printer/printer.go.html#5844816">last</a></span><span class="op" id="5855038">.</span><span class="ident" id="5855039"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5855046">(</span><span class="op" id="5855047">)</span>&nbsp;<span class="op" id="5855049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855054"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855056">=</span>&nbsp;<span class="ident" id="5855058"><a href="/gostd/go/printer/printer.go.html#5852400">pos</a></span><span class="op" id="5855061">.</span><span class="ident" id="5855062"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5855067">-</span>&nbsp;<span class="ident" id="5855069"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5855070">.</span><span class="ident" id="5855071"><a href="/gostd/go/printer/printer.go.html#5844816">last</a></span><span class="op" id="5855075">.</span><span class="ident" id="5855076"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855084">if</span>&nbsp;<span class="ident" id="5855087"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855089">&lt;</span>&nbsp;<span class="num" id="5855091">0</span>&nbsp;<span class="op" id="5855093">{</span>&nbsp;<span class="comment" id="5855095">//&nbsp;should&nbsp;never&nbsp;happen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855122"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855124">=</span>&nbsp;<span class="num" id="5855126">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855131">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855135">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855140">//&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;only&nbsp;(p.indent&nbsp;==&nbsp;0),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855194">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;newline&nbsp;if&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855246">//&nbsp;this&nbsp;preserves&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;documentation</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855300">//&nbsp;comments&nbsp;at&nbsp;the&nbsp;package&nbsp;scope&nbsp;level&nbsp;(issue&nbsp;2570)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855354">if</span>&nbsp;<span class="ident" id="5855357"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5855358">.</span><span class="ident" id="5855359"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5855366">==</span>&nbsp;<span class="num" id="5855369">0</span>&nbsp;<span class="op" id="5855371">&amp;&amp;</span>&nbsp;<span class="ident" id="5855374"><a href="/gostd/go/printer/printer.go.html#5853791">droppedLinebreak</a></span>&nbsp;<span class="op" id="5855391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855396"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span><span class="op" id="5855397">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855407">//&nbsp;make&nbsp;sure&nbsp;there&nbsp;is&nbsp;at&nbsp;least&nbsp;one&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855455">//&nbsp;if&nbsp;the&nbsp;previous&nbsp;comment&nbsp;was&nbsp;a&nbsp;line&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855503">if</span>&nbsp;<span class="ident" id="5855506"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855508">==</span>&nbsp;<span class="num" id="5855511">0</span>&nbsp;<span class="op" id="5855513">&amp;&amp;</span>&nbsp;<span class="ident" id="5855516"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span>&nbsp;<span class="op" id="5855521">!=</span>&nbsp;<span class="builtintype" id="5855524">nil</span>&nbsp;<span class="op" id="5855528">&amp;&amp;</span>&nbsp;<span class="ident" id="5855531"><a href="/gostd/go/printer/printer.go.html#5852426">prev</a></span><span class="op" id="5855535">.</span><span class="ident" id="5855536"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5855540">[</span><span class="num" id="5855541">1</span><span class="op" id="5855542">]</span>&nbsp;<span class="op" id="5855544">==</span>&nbsp;<span class="string" id="5855547">&#39;/&#39;</span>&nbsp;<span class="op" id="5855551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855556"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855558">=</span>&nbsp;<span class="num" id="5855560">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855564">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855569">if</span>&nbsp;<span class="ident" id="5855572"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span>&nbsp;<span class="op" id="5855574">&gt;</span>&nbsp;<span class="num" id="5855576">0</span>&nbsp;<span class="op" id="5855578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855583">//&nbsp;use&nbsp;formfeeds&nbsp;to&nbsp;break&nbsp;columns&nbsp;before&nbsp;a&nbsp;comment;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855638">//&nbsp;this&nbsp;is&nbsp;analogous&nbsp;to&nbsp;using&nbsp;formfeeds&nbsp;to&nbsp;separate</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5855693">//&nbsp;individual&nbsp;lines&nbsp;of&nbsp;/*-style&nbsp;comments</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5855737"><a href="/gostd/go/printer/printer.go.html#5852369">p</a></span><span class="op" id="5855738">.</span><span class="ident" id="5855739"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5855748">(</span><span class="string" id="5855749">&#39;\f&#39;</span><span class="op" id="5855753">,</span>&nbsp;<span class="ident" id="5855755"><a href="/gostd/go/printer/printer.go.html#5866883">nlimit</a></span><span class="op" id="5855761">(</span><span class="ident" id="5855762"><a href="/gostd/go/printer/printer.go.html#5855003">n</a></span><span class="op" id="5855763">)</span><span class="op" id="5855764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855768">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855771">}</span><br>
<span class="lineno"></span><span class="op" id="5855773">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">450</span><span class="comment" id="5855776">//&nbsp;Returns&nbsp;true&nbsp;if&nbsp;s&nbsp;contains&nbsp;only&nbsp;white&nbsp;space</span><br>
<span class="lineno"></span><span class="comment" id="5855823">//&nbsp;(only&nbsp;tabs&nbsp;and&nbsp;blanks&nbsp;can&nbsp;appear&nbsp;in&nbsp;the&nbsp;printer&#39;s&nbsp;context).</span><br>
<span class="lineno"></span><span class="comment" id="5855886">//</span><br>
<span class="lineno"></span><span class="keyword" id="5855889">func</span>&nbsp;<span class="ident" id="5855894">isBlank</span><span class="op" id="5855901">(</span><span class="ident" id="5855902">s</span>&nbsp;<span class="builtintype" id="5855904">string</span><span class="op" id="5855910">)</span>&nbsp;<span class="builtintype" id="5855912">bool</span>&nbsp;<span class="op" id="5855917">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855920">for</span>&nbsp;<span class="ident" id="5855924">i</span>&nbsp;<span class="op" id="5855926">:=</span>&nbsp;<span class="num" id="5855929">0</span><span class="op" id="5855930">;</span>&nbsp;<span class="ident" id="5855932"><a href="/gostd/go/printer/printer.go.html#5855924">i</a></span>&nbsp;<span class="op" id="5855934">&lt;</span>&nbsp;<span class="builtinfunc" id="5855936">len</span><span class="op" id="5855939">(</span><span class="ident" id="5855940"><a href="/gostd/go/printer/printer.go.html#5855902">s</a></span><span class="op" id="5855941">)</span><span class="op" id="5855942">;</span>&nbsp;<span class="ident" id="5855944"><a href="/gostd/go/printer/printer.go.html#5855924">i</a></span><span class="op" id="5855945">++</span>&nbsp;<span class="op" id="5855948">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855952">if</span>&nbsp;<span class="ident" id="5855955"><a href="/gostd/go/printer/printer.go.html#5855902">s</a></span><span class="op" id="5855956">[</span><span class="ident" id="5855957"><a href="/gostd/go/printer/printer.go.html#5855924">i</a></span><span class="op" id="5855958">]</span>&nbsp;<span class="op" id="5855960">&gt;</span>&nbsp;<span class="string" id="5855962">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5855966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855971">return</span>&nbsp;<span class="builtintype" id="5855978">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5855989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5855992">return</span>&nbsp;<span class="builtintype" id="5855999">true</span><br>
<span class="lineno">460</span><span class="op" id="5856004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5856007">//&nbsp;commonPrefix&nbsp;returns&nbsp;the&nbsp;common&nbsp;prefix&nbsp;of&nbsp;a&nbsp;and&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="5856061">func</span>&nbsp;<span class="ident" id="5856066">commonPrefix</span><span class="op" id="5856078">(</span><span class="ident" id="5856079">a</span><span class="op" id="5856080">,</span>&nbsp;<span class="ident" id="5856082">b</span>&nbsp;<span class="builtintype" id="5856084">string</span><span class="op" id="5856090">)</span>&nbsp;<span class="builtintype" id="5856092">string</span>&nbsp;<span class="op" id="5856099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5856102">i</span>&nbsp;<span class="op" id="5856104">:=</span>&nbsp;<span class="num" id="5856107">0</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856110">for</span>&nbsp;<span class="ident" id="5856114"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span>&nbsp;<span class="op" id="5856116">&lt;</span>&nbsp;<span class="builtinfunc" id="5856118">len</span><span class="op" id="5856121">(</span><span class="ident" id="5856122"><a href="/gostd/go/printer/printer.go.html#5856079">a</a></span><span class="op" id="5856123">)</span>&nbsp;<span class="op" id="5856125">&amp;&amp;</span>&nbsp;<span class="ident" id="5856128"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span>&nbsp;<span class="op" id="5856130">&lt;</span>&nbsp;<span class="builtinfunc" id="5856132">len</span><span class="op" id="5856135">(</span><span class="ident" id="5856136"><a href="/gostd/go/printer/printer.go.html#5856082">b</a></span><span class="op" id="5856137">)</span>&nbsp;<span class="op" id="5856139">&amp;&amp;</span>&nbsp;<span class="ident" id="5856142"><a href="/gostd/go/printer/printer.go.html#5856079">a</a></span><span class="op" id="5856143">[</span><span class="ident" id="5856144"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856145">]</span>&nbsp;<span class="op" id="5856147">==</span>&nbsp;<span class="ident" id="5856150"><a href="/gostd/go/printer/printer.go.html#5856082">b</a></span><span class="op" id="5856151">[</span><span class="ident" id="5856152"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856153">]</span>&nbsp;<span class="op" id="5856155">&amp;&amp;</span>&nbsp;<span class="op" id="5856158">(</span><span class="ident" id="5856159"><a href="/gostd/go/printer/printer.go.html#5856079">a</a></span><span class="op" id="5856160">[</span><span class="ident" id="5856161"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856162">]</span>&nbsp;<span class="op" id="5856164">&lt;=</span>&nbsp;<span class="string" id="5856167">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5856171">||</span>&nbsp;<span class="ident" id="5856174"><a href="/gostd/go/printer/printer.go.html#5856079">a</a></span><span class="op" id="5856175">[</span><span class="ident" id="5856176"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856177">]</span>&nbsp;<span class="op" id="5856179">==</span>&nbsp;<span class="string" id="5856182">&#39;*&#39;</span><span class="op" id="5856185">)</span>&nbsp;<span class="op" id="5856187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5856191"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856192">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856199">return</span>&nbsp;<span class="ident" id="5856206"><a href="/gostd/go/printer/printer.go.html#5856079">a</a></span><span class="op" id="5856207">[</span><span class="num" id="5856208">0</span><span class="op" id="5856209">:</span><span class="ident" id="5856210"><a href="/gostd/go/printer/printer.go.html#5856102">i</a></span><span class="op" id="5856211">]</span><br>
<span class="lineno"></span><span class="op" id="5856213">}</span><br>
<span class="lineno">470</span><br>
<span class="lineno"></span><span class="comment" id="5856216">//&nbsp;trimRight&nbsp;returns&nbsp;s&nbsp;with&nbsp;trailing&nbsp;whitespace&nbsp;removed.</span><br>
<span class="lineno"></span><span class="keyword" id="5856273">func</span>&nbsp;<span class="ident" id="5856278">trimRight</span><span class="op" id="5856287">(</span><span class="ident" id="5856288">s</span>&nbsp;<span class="builtintype" id="5856290">string</span><span class="op" id="5856296">)</span>&nbsp;<span class="builtintype" id="5856298">string</span>&nbsp;<span class="op" id="5856305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856308">return</span>&nbsp;<span class="ident" id="5856315"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5856322">.</span><span class="ident" id="5856323"><a href="/gostd/strings/strings.go.html#2979934">TrimRightFunc</a></span><span class="op" id="5856336">(</span><span class="ident" id="5856337"><a href="/gostd/go/printer/printer.go.html#5856288">s</a></span><span class="op" id="5856338">,</span>&nbsp;<span class="ident" id="5856340"><a href="/gostd/go/printer/printer.go.html#5842807">unicode</a></span><span class="op" id="5856347">.</span><span class="ident" id="5856348"><a href="/gostd/unicode/graphic.go.html#1820663">IsSpace</a></span><span class="op" id="5856355">)</span><br>
<span class="lineno"></span><span class="op" id="5856357">}</span><br>
<span class="lineno">475</span><br>
<span class="lineno"></span><span class="comment" id="5856360">//&nbsp;stripCommonPrefix&nbsp;removes&nbsp;a&nbsp;common&nbsp;prefix&nbsp;from&nbsp;/*-style&nbsp;comment&nbsp;lines&nbsp;(unless&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="5856444">//&nbsp;comment&nbsp;line&nbsp;is&nbsp;indented,&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;line&nbsp;have&nbsp;some&nbsp;form&nbsp;of&nbsp;space&nbsp;prefix).</span><br>
<span class="lineno"></span><span class="comment" id="5856529">//&nbsp;The&nbsp;prefix&nbsp;is&nbsp;computed&nbsp;using&nbsp;heuristics&nbsp;such&nbsp;that&nbsp;is&nbsp;likely&nbsp;that&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span><span class="comment" id="5856609">//&nbsp;contents&nbsp;are&nbsp;nicely&nbsp;laid&nbsp;out&nbsp;after&nbsp;re-printing&nbsp;each&nbsp;line&nbsp;using&nbsp;the&nbsp;printer&#39;s</span><br>
<span class="lineno">480</span><span class="comment" id="5856689">//&nbsp;current&nbsp;indentation.</span><br>
<span class="lineno"></span><span class="comment" id="5856713">//</span><br>
<span class="lineno"></span><span class="keyword" id="5856716">func</span>&nbsp;<span class="ident" id="5856721">stripCommonPrefix</span><span class="op" id="5856738">(</span><span class="ident" id="5856739">lines</span>&nbsp;<span class="op" id="5856745">[</span><span class="op" id="5856746">]</span><span class="builtintype" id="5856747">string</span><span class="op" id="5856753">)</span>&nbsp;<span class="op" id="5856755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856758">if</span>&nbsp;<span class="builtinfunc" id="5856761">len</span><span class="op" id="5856764">(</span><span class="ident" id="5856765"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5856770">)</span>&nbsp;<span class="op" id="5856772">&lt;=</span>&nbsp;<span class="num" id="5856775">1</span>&nbsp;<span class="op" id="5856777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5856781">return</span>&nbsp;<span class="comment" id="5856788">//&nbsp;at&nbsp;most&nbsp;one&nbsp;line&nbsp;-&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5856825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856828">//&nbsp;len(lines)&nbsp;&gt;&nbsp;1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856848">//&nbsp;The&nbsp;heuristic&nbsp;in&nbsp;this&nbsp;function&nbsp;tries&nbsp;to&nbsp;handle&nbsp;a&nbsp;few</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856905">//&nbsp;common&nbsp;patterns&nbsp;of&nbsp;/*-style&nbsp;comments:&nbsp;Comments&nbsp;where</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5856962">//&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;are&nbsp;aligned&nbsp;and&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857016">//&nbsp;rest&nbsp;of&nbsp;the&nbsp;comment&nbsp;text&nbsp;is&nbsp;aligned&nbsp;and&nbsp;indented&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857074">//&nbsp;blanks&nbsp;or&nbsp;tabs,&nbsp;cases&nbsp;with&nbsp;a&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857132">//&nbsp;on&nbsp;the&nbsp;left,&nbsp;and&nbsp;cases&nbsp;where&nbsp;the&nbsp;closing&nbsp;*/&nbsp;is&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857190">//&nbsp;same&nbsp;line&nbsp;as&nbsp;the&nbsp;last&nbsp;comment&nbsp;text.</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857231">//&nbsp;Compute&nbsp;maximum&nbsp;common&nbsp;white&nbsp;prefix&nbsp;of&nbsp;all&nbsp;but&nbsp;the&nbsp;first,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857293">//&nbsp;last,&nbsp;and&nbsp;blank&nbsp;lines,&nbsp;and&nbsp;replace&nbsp;blank&nbsp;lines&nbsp;with&nbsp;empty</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857355">//&nbsp;lines&nbsp;(the&nbsp;first&nbsp;line&nbsp;starts&nbsp;with&nbsp;/*&nbsp;and&nbsp;has&nbsp;no&nbsp;prefix).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857416">//&nbsp;In&nbsp;case&nbsp;of&nbsp;two-line&nbsp;comments,&nbsp;consider&nbsp;the&nbsp;last&nbsp;line&nbsp;for</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857477">//&nbsp;the&nbsp;prefix&nbsp;computation&nbsp;since&nbsp;otherwise&nbsp;the&nbsp;prefix&nbsp;would</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857537">//&nbsp;be&nbsp;empty.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857551">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857555">//&nbsp;Note&nbsp;that&nbsp;the&nbsp;first&nbsp;and&nbsp;last&nbsp;line&nbsp;are&nbsp;never&nbsp;empty&nbsp;(they</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857615">//&nbsp;contain&nbsp;the&nbsp;opening&nbsp;/*&nbsp;and&nbsp;closing&nbsp;*/&nbsp;respectively)&nbsp;and</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5857675">//&nbsp;thus&nbsp;they&nbsp;can&nbsp;be&nbsp;ignored&nbsp;by&nbsp;the&nbsp;blank&nbsp;line&nbsp;check.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857729">var</span>&nbsp;<span class="ident" id="5857733">prefix</span>&nbsp;<span class="builtintype" id="5857740">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857748">if</span>&nbsp;<span class="builtinfunc" id="5857751">len</span><span class="op" id="5857754">(</span><span class="ident" id="5857755"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5857760">)</span>&nbsp;<span class="op" id="5857762">&gt;</span>&nbsp;<span class="num" id="5857764">2</span>&nbsp;<span class="op" id="5857766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5857770">first</span>&nbsp;<span class="op" id="5857776">:=</span>&nbsp;<span class="builtintype" id="5857779">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857786">for</span>&nbsp;<span class="ident" id="5857790">i</span><span class="op" id="5857791">,</span>&nbsp;<span class="ident" id="5857793">line</span>&nbsp;<span class="op" id="5857798">:=</span>&nbsp;<span class="keyword" id="5857801">range</span>&nbsp;<span class="ident" id="5857807"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5857812">[</span><span class="num" id="5857813">1</span>&nbsp;<span class="op" id="5857815">:</span>&nbsp;<span class="builtinfunc" id="5857817">len</span><span class="op" id="5857820">(</span><span class="ident" id="5857821"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5857826">)</span><span class="op" id="5857827">-</span><span class="num" id="5857828">1</span><span class="op" id="5857829">]</span>&nbsp;<span class="op" id="5857831">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857836">switch</span>&nbsp;<span class="op" id="5857843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857848">case</span>&nbsp;<span class="ident" id="5857853"><a href="/gostd/go/printer/printer.go.html#5855894">isBlank</a></span><span class="op" id="5857860">(</span><span class="ident" id="5857861"><a href="/gostd/go/printer/printer.go.html#5857793">line</a></span><span class="op" id="5857865">)</span><span class="op" id="5857866">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5857872"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5857877">[</span><span class="num" id="5857878">1</span><span class="op" id="5857879">+</span><span class="ident" id="5857880"><a href="/gostd/go/printer/printer.go.html#5857790">i</a></span><span class="op" id="5857881">]</span>&nbsp;<span class="op" id="5857883">=</span>&nbsp;<span class="string" id="5857885">&#34;&#34;</span>&nbsp;<span class="comment" id="5857888">//&nbsp;range&nbsp;starts&nbsp;with&nbsp;lines[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857921">case</span>&nbsp;<span class="ident" id="5857926"><a href="/gostd/go/printer/printer.go.html#5857770">first</a></span><span class="op" id="5857931">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5857937"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5857944">=</span>&nbsp;<span class="ident" id="5857946"><a href="/gostd/go/printer/printer.go.html#5856066">commonPrefix</a></span><span class="op" id="5857958">(</span><span class="ident" id="5857959"><a href="/gostd/go/printer/printer.go.html#5857793">line</a></span><span class="op" id="5857963">,</span>&nbsp;<span class="ident" id="5857965"><a href="/gostd/go/printer/printer.go.html#5857793">line</a></span><span class="op" id="5857969">)</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5857975"><a href="/gostd/go/printer/printer.go.html#5857770">first</a></span>&nbsp;<span class="op" id="5857981">=</span>&nbsp;<span class="builtintype" id="5857983">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5857992">default</span><span class="op" id="5857999">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858005"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5858012">=</span>&nbsp;<span class="ident" id="5858014"><a href="/gostd/go/printer/printer.go.html#5856066">commonPrefix</a></span><span class="op" id="5858026">(</span><span class="ident" id="5858027"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5858033">,</span>&nbsp;<span class="ident" id="5858035"><a href="/gostd/go/printer/printer.go.html#5857793">line</a></span><span class="op" id="5858039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858044">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858048">}</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858051">}</span>&nbsp;<span class="keyword" id="5858053">else</span>&nbsp;<span class="op" id="5858058">{</span>&nbsp;<span class="comment" id="5858060">//&nbsp;len(lines)&nbsp;==&nbsp;2,&nbsp;lines&nbsp;cannot&nbsp;be&nbsp;blank&nbsp;(contain&nbsp;/*&nbsp;and&nbsp;*/)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858124">line</span>&nbsp;<span class="op" id="5858129">:=</span>&nbsp;<span class="ident" id="5858132"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5858137">[</span><span class="num" id="5858138">1</span><span class="op" id="5858139">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858143"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5858150">=</span>&nbsp;<span class="ident" id="5858152"><a href="/gostd/go/printer/printer.go.html#5856066">commonPrefix</a></span><span class="op" id="5858164">(</span><span class="ident" id="5858165"><a href="/gostd/go/printer/printer.go.html#5858124">line</a></span><span class="op" id="5858169">,</span>&nbsp;<span class="ident" id="5858171"><a href="/gostd/go/printer/printer.go.html#5858124">line</a></span><span class="op" id="5858175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858178">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858182">/*<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Check&nbsp;for&nbsp;vertical&nbsp;&#34;line&nbsp;of&nbsp;stars&#34;&nbsp;and&nbsp;correct&nbsp;prefix&nbsp;accordingly.<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858262">lineOfStars</span>&nbsp;<span class="op" id="5858274">:=</span>&nbsp;<span class="builtintype" id="5858277">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5858284">if</span>&nbsp;<span class="ident" id="5858287">i</span>&nbsp;<span class="op" id="5858289">:=</span>&nbsp;<span class="ident" id="5858292"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5858299">.</span><span class="ident" id="5858300"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5858305">(</span><span class="ident" id="5858306"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5858312">,</span>&nbsp;<span class="string" id="5858314">&#34;*&#34;</span><span class="op" id="5858317">)</span><span class="op" id="5858318">;</span>&nbsp;<span class="ident" id="5858320"><a href="/gostd/go/printer/printer.go.html#5858287">i</a></span>&nbsp;<span class="op" id="5858322">&gt;=</span>&nbsp;<span class="num" id="5858325">0</span>&nbsp;<span class="op" id="5858327">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858331">//&nbsp;Line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5858359">if</span>&nbsp;<span class="ident" id="5858362"><a href="/gostd/go/printer/printer.go.html#5858287">i</a></span>&nbsp;<span class="op" id="5858364">&gt;</span>&nbsp;<span class="num" id="5858366">0</span>&nbsp;<span class="op" id="5858368">&amp;&amp;</span>&nbsp;<span class="ident" id="5858371"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5858377">[</span><span class="ident" id="5858378"><a href="/gostd/go/printer/printer.go.html#5858287">i</a></span><span class="op" id="5858379">-</span><span class="num" id="5858380">1</span><span class="op" id="5858381">]</span>&nbsp;<span class="op" id="5858383">==</span>&nbsp;<span class="string" id="5858386">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5858390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858395"><a href="/gostd/go/printer/printer.go.html#5858287">i</a></span><span class="op" id="5858396">--</span>&nbsp;<span class="comment" id="5858399">//&nbsp;remove&nbsp;trailing&nbsp;blank&nbsp;from&nbsp;prefix&nbsp;so&nbsp;stars&nbsp;remain&nbsp;aligned</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858462">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858466"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5858473">=</span>&nbsp;<span class="ident" id="5858475"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5858481">[</span><span class="num" id="5858482">0</span><span class="op" id="5858483">:</span><span class="ident" id="5858484"><a href="/gostd/go/printer/printer.go.html#5858287">i</a></span><span class="op" id="5858485">]</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858489"><a href="/gostd/go/printer/printer.go.html#5858262">lineOfStars</a></span>&nbsp;<span class="op" id="5858501">=</span>&nbsp;<span class="builtintype" id="5858503">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5858509">}</span>&nbsp;<span class="keyword" id="5858511">else</span>&nbsp;<span class="op" id="5858516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858520">//&nbsp;No&nbsp;line&nbsp;of&nbsp;stars&nbsp;present.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858551">//&nbsp;Determine&nbsp;the&nbsp;white&nbsp;space&nbsp;on&nbsp;the&nbsp;first&nbsp;line&nbsp;after&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858613">//&nbsp;and&nbsp;before&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;comment&nbsp;text,&nbsp;assume&nbsp;two</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858675">//&nbsp;blanks&nbsp;instead&nbsp;of&nbsp;the&nbsp;/*&nbsp;unless&nbsp;the&nbsp;first&nbsp;character&nbsp;after</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858738">//&nbsp;the&nbsp;/*&nbsp;is&nbsp;a&nbsp;tab.&nbsp;If&nbsp;the&nbsp;first&nbsp;comment&nbsp;line&nbsp;is&nbsp;empty&nbsp;but</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858799">//&nbsp;for&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;assume&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab.&nbsp;This</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858861">//&nbsp;whitespace&nbsp;may&nbsp;be&nbsp;found&nbsp;as&nbsp;suffix&nbsp;in&nbsp;the&nbsp;common&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5858922">first</span>&nbsp;<span class="op" id="5858928">:=</span>&nbsp;<span class="ident" id="5858931"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5858936">[</span><span class="num" id="5858937">0</span><span class="op" id="5858938">]</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5858942">if</span>&nbsp;<span class="ident" id="5858945"><a href="/gostd/go/printer/printer.go.html#5855894">isBlank</a></span><span class="op" id="5858952">(</span><span class="ident" id="5858953"><a href="/gostd/go/printer/printer.go.html#5858922">first</a></span><span class="op" id="5858958">[</span><span class="num" id="5858959">2</span><span class="op" id="5858960">:</span><span class="op" id="5858961">]</span><span class="op" id="5858962">)</span>&nbsp;<span class="op" id="5858964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5858969">//&nbsp;no&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859010">//&nbsp;reduce&nbsp;prefix&nbsp;by&nbsp;up&nbsp;to&nbsp;3&nbsp;blanks&nbsp;or&nbsp;a&nbsp;tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859057">//&nbsp;if&nbsp;present&nbsp;-&nbsp;this&nbsp;keeps&nbsp;comment&nbsp;text&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859109">//&nbsp;relative&nbsp;to&nbsp;the&nbsp;/*&nbsp;and&nbsp;*/&#39;s&nbsp;if&nbsp;it&nbsp;was&nbsp;indented</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859162">//&nbsp;in&nbsp;the&nbsp;first&nbsp;place</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859187">i</span>&nbsp;<span class="op" id="5859189">:=</span>&nbsp;<span class="builtinfunc" id="5859192">len</span><span class="op" id="5859195">(</span><span class="ident" id="5859196"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5859207">for</span>&nbsp;<span class="ident" id="5859211">n</span>&nbsp;<span class="op" id="5859213">:=</span>&nbsp;<span class="num" id="5859216">0</span><span class="op" id="5859217">;</span>&nbsp;<span class="ident" id="5859219"><a href="/gostd/go/printer/printer.go.html#5859211">n</a></span>&nbsp;<span class="op" id="5859221">&lt;</span>&nbsp;<span class="num" id="5859223">3</span>&nbsp;<span class="op" id="5859225">&amp;&amp;</span>&nbsp;<span class="ident" id="5859228"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span>&nbsp;<span class="op" id="5859230">&gt;</span>&nbsp;<span class="num" id="5859232">0</span>&nbsp;<span class="op" id="5859234">&amp;&amp;</span>&nbsp;<span class="ident" id="5859237"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859243">[</span><span class="ident" id="5859244"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span><span class="op" id="5859245">-</span><span class="num" id="5859246">1</span><span class="op" id="5859247">]</span>&nbsp;<span class="op" id="5859249">==</span>&nbsp;<span class="string" id="5859252">&#39;&nbsp;&#39;</span><span class="op" id="5859255">;</span>&nbsp;<span class="ident" id="5859257"><a href="/gostd/go/printer/printer.go.html#5859211">n</a></span><span class="op" id="5859258">++</span>&nbsp;<span class="op" id="5859261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859267"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span><span class="op" id="5859268">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859274">}</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5859279">if</span>&nbsp;<span class="ident" id="5859282"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span>&nbsp;<span class="op" id="5859284">==</span>&nbsp;<span class="builtinfunc" id="5859287">len</span><span class="op" id="5859290">(</span><span class="ident" id="5859291"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859297">)</span>&nbsp;<span class="op" id="5859299">&amp;&amp;</span>&nbsp;<span class="ident" id="5859302"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span>&nbsp;<span class="op" id="5859304">&gt;</span>&nbsp;<span class="num" id="5859306">0</span>&nbsp;<span class="op" id="5859308">&amp;&amp;</span>&nbsp;<span class="ident" id="5859311"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859317">[</span><span class="ident" id="5859318"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span><span class="op" id="5859319">-</span><span class="num" id="5859320">1</span><span class="op" id="5859321">]</span>&nbsp;<span class="op" id="5859323">==</span>&nbsp;<span class="string" id="5859326">&#39;\t&#39;</span>&nbsp;<span class="op" id="5859331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859337"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span><span class="op" id="5859338">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859344">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859349"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5859356">=</span>&nbsp;<span class="ident" id="5859358"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859364">[</span><span class="num" id="5859365">0</span><span class="op" id="5859366">:</span><span class="ident" id="5859367"><a href="/gostd/go/printer/printer.go.html#5859187">i</a></span><span class="op" id="5859368">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859372">}</span>&nbsp;<span class="keyword" id="5859374">else</span>&nbsp;<span class="op" id="5859379">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859384">//&nbsp;comment&nbsp;text&nbsp;on&nbsp;the&nbsp;first&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859421">suffix</span>&nbsp;<span class="op" id="5859428">:=</span>&nbsp;<span class="builtinfunc" id="5859431">make</span><span class="op" id="5859435">(</span><span class="op" id="5859436">[</span><span class="op" id="5859437">]</span><span class="builtintype" id="5859438">byte</span><span class="op" id="5859442">,</span>&nbsp;<span class="builtinfunc" id="5859444">len</span><span class="op" id="5859447">(</span><span class="ident" id="5859448"><a href="/gostd/go/printer/printer.go.html#5858922">first</a></span><span class="op" id="5859453">)</span><span class="op" id="5859454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859459">n</span>&nbsp;<span class="op" id="5859461">:=</span>&nbsp;<span class="num" id="5859464">2</span>&nbsp;<span class="comment" id="5859466">//&nbsp;start&nbsp;after&nbsp;opening&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5859495">for</span>&nbsp;<span class="ident" id="5859499"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span>&nbsp;<span class="op" id="5859501">&lt;</span>&nbsp;<span class="builtinfunc" id="5859503">len</span><span class="op" id="5859506">(</span><span class="ident" id="5859507"><a href="/gostd/go/printer/printer.go.html#5858922">first</a></span><span class="op" id="5859512">)</span>&nbsp;<span class="op" id="5859514">&amp;&amp;</span>&nbsp;<span class="ident" id="5859517"><a href="/gostd/go/printer/printer.go.html#5858922">first</a></span><span class="op" id="5859522">[</span><span class="ident" id="5859523"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859524">]</span>&nbsp;<span class="op" id="5859526">&lt;=</span>&nbsp;<span class="string" id="5859529">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="5859533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859539"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859545">[</span><span class="ident" id="5859546"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859547">]</span>&nbsp;<span class="op" id="5859549">=</span>&nbsp;<span class="ident" id="5859551"><a href="/gostd/go/printer/printer.go.html#5858922">first</a></span><span class="op" id="5859556">[</span><span class="ident" id="5859557"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859558">]</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859564"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859565">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5859576">if</span>&nbsp;<span class="ident" id="5859579"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span>&nbsp;<span class="op" id="5859581">&gt;</span>&nbsp;<span class="num" id="5859583">2</span>&nbsp;<span class="op" id="5859585">&amp;&amp;</span>&nbsp;<span class="ident" id="5859588"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859594">[</span><span class="num" id="5859595">2</span><span class="op" id="5859596">]</span>&nbsp;<span class="op" id="5859598">==</span>&nbsp;<span class="string" id="5859601">&#39;\t&#39;</span>&nbsp;<span class="op" id="5859606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859612">//&nbsp;assume&nbsp;the&nbsp;&#39;\t&#39;&nbsp;compensates&nbsp;for&nbsp;the&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859658"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span>&nbsp;<span class="op" id="5859665">=</span>&nbsp;<span class="ident" id="5859667"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859673">[</span><span class="num" id="5859674">2</span><span class="op" id="5859675">:</span><span class="ident" id="5859676"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859677">]</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859682">}</span>&nbsp;<span class="keyword" id="5859684">else</span>&nbsp;<span class="op" id="5859689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859695">//&nbsp;otherwise&nbsp;assume&nbsp;two&nbsp;blanks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859730"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859736">[</span><span class="num" id="5859737">0</span><span class="op" id="5859738">]</span><span class="op" id="5859739">,</span>&nbsp;<span class="ident" id="5859741"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859747">[</span><span class="num" id="5859748">1</span><span class="op" id="5859749">]</span>&nbsp;<span class="op" id="5859751">=</span>&nbsp;<span class="string" id="5859753">&#39;&nbsp;&#39;</span><span class="op" id="5859756">,</span>&nbsp;<span class="string" id="5859758">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859766"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span>&nbsp;<span class="op" id="5859773">=</span>&nbsp;<span class="ident" id="5859775"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859781">[</span><span class="num" id="5859782">0</span><span class="op" id="5859783">:</span><span class="ident" id="5859784"><a href="/gostd/go/printer/printer.go.html#5859459">n</a></span><span class="op" id="5859785">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859790">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859795">//&nbsp;Shorten&nbsp;the&nbsp;computed&nbsp;common&nbsp;prefix&nbsp;by&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859853">//&nbsp;suffix,&nbsp;if&nbsp;it&nbsp;is&nbsp;found&nbsp;as&nbsp;suffix&nbsp;of&nbsp;the&nbsp;prefix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5859907"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5859914">=</span>&nbsp;<span class="ident" id="5859916"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5859923">.</span><span class="ident" id="5859924"><a href="/gostd/strings/strings.go.html#2982965">TrimSuffix</a></span><span class="op" id="5859934">(</span><span class="ident" id="5859935"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5859941">,</span>&nbsp;<span class="builtintype" id="5859943">string</span><span class="op" id="5859949">(</span><span class="ident" id="5859950"><a href="/gostd/go/printer/printer.go.html#5859421">suffix</a></span><span class="op" id="5859956">)</span><span class="op" id="5859957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5859964">}</span><br>
<span class="lineno">580</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5859968">//&nbsp;Handle&nbsp;last&nbsp;line:&nbsp;If&nbsp;it&nbsp;only&nbsp;contains&nbsp;a&nbsp;closing&nbsp;*/,&nbsp;align&nbsp;it</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860033">//&nbsp;with&nbsp;the&nbsp;opening&nbsp;/*,&nbsp;otherwise&nbsp;align&nbsp;the&nbsp;text&nbsp;with&nbsp;the&nbsp;other</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860098">//&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860109">last</span>&nbsp;<span class="op" id="5860114">:=</span>&nbsp;<span class="ident" id="5860117"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5860122">[</span><span class="builtinfunc" id="5860123">len</span><span class="op" id="5860126">(</span><span class="ident" id="5860127"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5860132">)</span><span class="op" id="5860133">-</span><span class="num" id="5860134">1</span><span class="op" id="5860135">]</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860138">closing</span>&nbsp;<span class="op" id="5860146">:=</span>&nbsp;<span class="string" id="5860149">&#34;*/&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860155">i</span>&nbsp;<span class="op" id="5860157">:=</span>&nbsp;<span class="ident" id="5860160"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5860167">.</span><span class="ident" id="5860168"><a href="/gostd/strings/strings.go.html#2968883">Index</a></span><span class="op" id="5860173">(</span><span class="ident" id="5860174"><a href="/gostd/go/printer/printer.go.html#5860109">last</a></span><span class="op" id="5860178">,</span>&nbsp;<span class="ident" id="5860180"><a href="/gostd/go/printer/printer.go.html#5860138">closing</a></span><span class="op" id="5860187">)</span>&nbsp;<span class="comment" id="5860189">//&nbsp;i&nbsp;&gt;=&nbsp;0&nbsp;(closing&nbsp;is&nbsp;always&nbsp;present)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860228">if</span>&nbsp;<span class="ident" id="5860231"><a href="/gostd/go/printer/printer.go.html#5855894">isBlank</a></span><span class="op" id="5860238">(</span><span class="ident" id="5860239"><a href="/gostd/go/printer/printer.go.html#5860109">last</a></span><span class="op" id="5860243">[</span><span class="num" id="5860244">0</span><span class="op" id="5860245">:</span><span class="ident" id="5860246"><a href="/gostd/go/printer/printer.go.html#5860155">i</a></span><span class="op" id="5860247">]</span><span class="op" id="5860248">)</span>&nbsp;<span class="op" id="5860250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860254">//&nbsp;last&nbsp;line&nbsp;only&nbsp;contains&nbsp;closing&nbsp;*/</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860294">if</span>&nbsp;<span class="ident" id="5860297"><a href="/gostd/go/printer/printer.go.html#5858262">lineOfStars</a></span>&nbsp;<span class="op" id="5860309">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860314"><a href="/gostd/go/printer/printer.go.html#5860138">closing</a></span>&nbsp;<span class="op" id="5860322">=</span>&nbsp;<span class="string" id="5860324">&#34;&nbsp;*/&#34;</span>&nbsp;<span class="comment" id="5860330">//&nbsp;add&nbsp;blank&nbsp;to&nbsp;align&nbsp;final&nbsp;star</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5860365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860369"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5860374">[</span><span class="builtinfunc" id="5860375">len</span><span class="op" id="5860378">(</span><span class="ident" id="5860379"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5860384">)</span><span class="op" id="5860385">-</span><span class="num" id="5860386">1</span><span class="op" id="5860387">]</span>&nbsp;<span class="op" id="5860389">=</span>&nbsp;<span class="ident" id="5860391"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5860398">+</span>&nbsp;<span class="ident" id="5860400"><a href="/gostd/go/printer/printer.go.html#5860138">closing</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5860409">}</span>&nbsp;<span class="keyword" id="5860411">else</span>&nbsp;<span class="op" id="5860416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860420">//&nbsp;last&nbsp;line&nbsp;contains&nbsp;more&nbsp;comment&nbsp;text&nbsp;-&nbsp;assume</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860471">//&nbsp;it&nbsp;is&nbsp;aligned&nbsp;like&nbsp;the&nbsp;other&nbsp;lines&nbsp;and&nbsp;include</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860523">//&nbsp;in&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860550"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span>&nbsp;<span class="op" id="5860557">=</span>&nbsp;<span class="ident" id="5860559"><a href="/gostd/go/printer/printer.go.html#5856066">commonPrefix</a></span><span class="op" id="5860571">(</span><span class="ident" id="5860572"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5860578">,</span>&nbsp;<span class="ident" id="5860580"><a href="/gostd/go/printer/printer.go.html#5860109">last</a></span><span class="op" id="5860584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5860587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860591">//&nbsp;Remove&nbsp;the&nbsp;common&nbsp;prefix&nbsp;from&nbsp;all&nbsp;but&nbsp;the&nbsp;first&nbsp;and&nbsp;empty&nbsp;lines.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860660">for</span>&nbsp;<span class="ident" id="5860664">i</span><span class="op" id="5860665">,</span>&nbsp;<span class="ident" id="5860667">line</span>&nbsp;<span class="op" id="5860672">:=</span>&nbsp;<span class="keyword" id="5860675">range</span>&nbsp;<span class="ident" id="5860681"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span>&nbsp;<span class="op" id="5860687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860691">if</span>&nbsp;<span class="ident" id="5860694"><a href="/gostd/go/printer/printer.go.html#5860664">i</a></span>&nbsp;<span class="op" id="5860696">&gt;</span>&nbsp;<span class="num" id="5860698">0</span>&nbsp;<span class="op" id="5860700">&amp;&amp;</span>&nbsp;<span class="ident" id="5860703"><a href="/gostd/go/printer/printer.go.html#5860667">line</a></span>&nbsp;<span class="op" id="5860708">!=</span>&nbsp;<span class="string" id="5860711">&#34;&#34;</span>&nbsp;<span class="op" id="5860714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860719"><a href="/gostd/go/printer/printer.go.html#5856739">lines</a></span><span class="op" id="5860724">[</span><span class="ident" id="5860725"><a href="/gostd/go/printer/printer.go.html#5860664">i</a></span><span class="op" id="5860726">]</span>&nbsp;<span class="op" id="5860728">=</span>&nbsp;<span class="ident" id="5860730"><a href="/gostd/go/printer/printer.go.html#5860667">line</a></span><span class="op" id="5860734">[</span><span class="builtinfunc" id="5860735">len</span><span class="op" id="5860738">(</span><span class="ident" id="5860739"><a href="/gostd/go/printer/printer.go.html#5857733">prefix</a></span><span class="op" id="5860745">)</span><span class="op" id="5860746">:</span><span class="op" id="5860747">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5860751">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5860754">}</span><br>
<span class="lineno"></span><span class="op" id="5860756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5860759">func</span>&nbsp;<span class="op" id="5860764">(</span><span class="ident" id="5860765">p</span>&nbsp;<span class="op" id="5860767">*</span><span class="ident" id="5860768"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5860775">)</span>&nbsp;<span class="ident" id="5860777">writeComment</span><span class="op" id="5860789">(</span><span class="ident" id="5860790">comment</span>&nbsp;<span class="op" id="5860798">*</span><span class="ident" id="5860799"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5860802">.</span><span class="ident" id="5860803"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><span class="op" id="5860810">)</span>&nbsp;<span class="op" id="5860812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860815">text</span>&nbsp;<span class="op" id="5860820">:=</span>&nbsp;<span class="ident" id="5860823"><a href="/gostd/go/printer/printer.go.html#5860790">comment</a></span><span class="op" id="5860830">.</span><span class="ident" id="5860831"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5860837">pos</span>&nbsp;<span class="op" id="5860841">:=</span>&nbsp;<span class="ident" id="5860844"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5860845">.</span><span class="ident" id="5860846"><a href="/gostd/go/printer/printer.go.html#5848425">posFor</a></span><span class="op" id="5860852">(</span><span class="ident" id="5860853"><a href="/gostd/go/printer/printer.go.html#5860790">comment</a></span><span class="op" id="5860860">.</span><span class="ident" id="5860861"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5860864">(</span><span class="op" id="5860865">)</span><span class="op" id="5860866">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860870">const</span>&nbsp;<span class="ident" id="5860876">linePrefix</span>&nbsp;<span class="op" id="5860887">=</span>&nbsp;<span class="string" id="5860889">&#34;//line&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5860900">if</span>&nbsp;<span class="ident" id="5860903"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5860910">.</span><span class="ident" id="5860911"><a href="/gostd/strings/strings.go.html#2975366">HasPrefix</a></span><span class="op" id="5860920">(</span><span class="ident" id="5860921"><a href="/gostd/go/printer/printer.go.html#5860815">text</a></span><span class="op" id="5860925">,</span>&nbsp;<span class="ident" id="5860927"><a href="/gostd/go/printer/printer.go.html#5860876">linePrefix</a></span><span class="op" id="5860937">)</span>&nbsp;<span class="op" id="5860939">&amp;&amp;</span>&nbsp;<span class="op" id="5860942">(</span><span class="op" id="5860943">!</span><span class="ident" id="5860944"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5860947">.</span><span class="ident" id="5860948"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5860955">(</span><span class="op" id="5860956">)</span>&nbsp;<span class="op" id="5860958">||</span>&nbsp;<span class="ident" id="5860961"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5860964">.</span><span class="ident" id="5860965"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5860972">==</span>&nbsp;<span class="num" id="5860975">1</span><span class="op" id="5860976">)</span>&nbsp;<span class="op" id="5860978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5860982">//&nbsp;possibly&nbsp;a&nbsp;line&nbsp;directive</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861013">ldir</span>&nbsp;<span class="op" id="5861018">:=</span>&nbsp;<span class="ident" id="5861021"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5861028">.</span><span class="ident" id="5861029"><a href="/gostd/strings/strings.go.html#2982525">TrimSpace</a></span><span class="op" id="5861038">(</span><span class="ident" id="5861039"><a href="/gostd/go/printer/printer.go.html#5860815">text</a></span><span class="op" id="5861043">[</span><span class="builtinfunc" id="5861044">len</span><span class="op" id="5861047">(</span><span class="ident" id="5861048"><a href="/gostd/go/printer/printer.go.html#5860876">linePrefix</a></span><span class="op" id="5861058">)</span><span class="op" id="5861059">:</span><span class="op" id="5861060">]</span><span class="op" id="5861061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5861065">if</span>&nbsp;<span class="ident" id="5861068">i</span>&nbsp;<span class="op" id="5861070">:=</span>&nbsp;<span class="ident" id="5861073"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5861080">.</span><span class="ident" id="5861081"><a href="/gostd/strings/strings.go.html#2969551">LastIndex</a></span><span class="op" id="5861090">(</span><span class="ident" id="5861091"><a href="/gostd/go/printer/printer.go.html#5861013">ldir</a></span><span class="op" id="5861095">,</span>&nbsp;<span class="string" id="5861097">&#34;:&#34;</span><span class="op" id="5861100">)</span><span class="op" id="5861101">;</span>&nbsp;<span class="ident" id="5861103"><a href="/gostd/go/printer/printer.go.html#5861068">i</a></span>&nbsp;<span class="op" id="5861105">&gt;=</span>&nbsp;<span class="num" id="5861108">0</span>&nbsp;<span class="op" id="5861110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5861115">if</span>&nbsp;<span class="ident" id="5861118">line</span><span class="op" id="5861122">,</span>&nbsp;<span class="ident" id="5861124">err</span>&nbsp;<span class="op" id="5861128">:=</span>&nbsp;<span class="ident" id="5861131"><a href="/gostd/go/printer/printer.go.html#5842767">strconv</a></span><span class="op" id="5861138">.</span><span class="ident" id="5861139"><a href="/gostd/strconv/atoi.go.html#2357032">Atoi</a></span><span class="op" id="5861143">(</span><span class="ident" id="5861144"><a href="/gostd/go/printer/printer.go.html#5861013">ldir</a></span><span class="op" id="5861148">[</span><span class="ident" id="5861149"><a href="/gostd/go/printer/printer.go.html#5861068">i</a></span><span class="op" id="5861150">+</span><span class="num" id="5861151">1</span><span class="op" id="5861152">:</span><span class="op" id="5861153">]</span><span class="op" id="5861154">)</span><span class="op" id="5861155">;</span>&nbsp;<span class="ident" id="5861157"><a href="/gostd/go/printer/printer.go.html#5861124">err</a></span>&nbsp;<span class="op" id="5861161">==</span>&nbsp;<span class="builtintype" id="5861164">nil</span>&nbsp;<span class="op" id="5861168">&amp;&amp;</span>&nbsp;<span class="ident" id="5861171"><a href="/gostd/go/printer/printer.go.html#5861118">line</a></span>&nbsp;<span class="op" id="5861176">&gt;</span>&nbsp;<span class="num" id="5861178">0</span>&nbsp;<span class="op" id="5861180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861186">//&nbsp;The&nbsp;line&nbsp;directive&nbsp;we&nbsp;are&nbsp;about&nbsp;to&nbsp;print&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861242">//&nbsp;the&nbsp;Filename&nbsp;and&nbsp;Line&nbsp;number&nbsp;used&nbsp;for&nbsp;subsequent</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861298">//&nbsp;tokens.&nbsp;We&nbsp;have&nbsp;to&nbsp;update&nbsp;our&nbsp;AST-space&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861354">//&nbsp;accordingly&nbsp;and&nbsp;suspend&nbsp;indentation&nbsp;temporarily.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861410">indent</span>&nbsp;<span class="op" id="5861417">:=</span>&nbsp;<span class="ident" id="5861420"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861421">.</span><span class="ident" id="5861422"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861433"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861434">.</span><span class="ident" id="5861435"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5861442">=</span>&nbsp;<span class="num" id="5861444">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5861450">defer</span>&nbsp;<span class="keyword" id="5861456">func</span><span class="op" id="5861460">(</span><span class="op" id="5861461">)</span>&nbsp;<span class="op" id="5861463">{</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861470"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861471">.</span><span class="ident" id="5861472"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5861475">.</span><span class="ident" id="5861476"><a href="/gostd/go/token/position.go.html#3873983">Filename</a></span>&nbsp;<span class="op" id="5861485">=</span>&nbsp;<span class="ident" id="5861487"><a href="/gostd/go/printer/printer.go.html#5861013">ldir</a></span><span class="op" id="5861491">[</span><span class="op" id="5861492">:</span><span class="ident" id="5861493"><a href="/gostd/go/printer/printer.go.html#5861068">i</a></span><span class="op" id="5861494">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861501"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861502">.</span><span class="ident" id="5861503"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5861506">.</span><span class="ident" id="5861507"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5861512">=</span>&nbsp;<span class="ident" id="5861514"><a href="/gostd/go/printer/printer.go.html#5861118">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861524"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861525">.</span><span class="ident" id="5861526"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5861529">.</span><span class="ident" id="5861530"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5861537">=</span>&nbsp;<span class="num" id="5861539">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861546"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861547">.</span><span class="ident" id="5861548"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5861555">=</span>&nbsp;<span class="ident" id="5861557"><a href="/gostd/go/printer/printer.go.html#5861410">indent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5861568">}</span><span class="op" id="5861569">(</span><span class="op" id="5861570">)</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5861575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5861579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5861582">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861586">//&nbsp;shortcut&nbsp;common&nbsp;case&nbsp;of&nbsp;//-style&nbsp;comments</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5861632">if</span>&nbsp;<span class="ident" id="5861635"><a href="/gostd/go/printer/printer.go.html#5860815">text</a></span><span class="op" id="5861639">[</span><span class="num" id="5861640">1</span><span class="op" id="5861641">]</span>&nbsp;<span class="op" id="5861643">==</span>&nbsp;<span class="string" id="5861646">&#39;/&#39;</span>&nbsp;<span class="op" id="5861650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861654"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5861655">.</span><span class="ident" id="5861656"><a href="/gostd/go/printer/printer.go.html#5850706">writeString</a></span><span class="op" id="5861667">(</span><span class="ident" id="5861668"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5861671">,</span>&nbsp;<span class="ident" id="5861673"><a href="/gostd/go/printer/printer.go.html#5856278">trimRight</a></span><span class="op" id="5861682">(</span><span class="ident" id="5861683"><a href="/gostd/go/printer/printer.go.html#5860815">text</a></span><span class="op" id="5861687">)</span><span class="op" id="5861688">,</span>&nbsp;<span class="builtintype" id="5861690">true</span><span class="op" id="5861694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5861698">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5861706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861710">//&nbsp;for&nbsp;/*-style&nbsp;comments,&nbsp;print&nbsp;line&nbsp;by&nbsp;line&nbsp;and&nbsp;let&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861768">//&nbsp;write&nbsp;function&nbsp;take&nbsp;care&nbsp;of&nbsp;the&nbsp;proper&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5861823">lines</span>&nbsp;<span class="op" id="5861829">:=</span>&nbsp;<span class="ident" id="5861832"><a href="/gostd/go/printer/printer.go.html#5842778">strings</a></span><span class="op" id="5861839">.</span><span class="ident" id="5861840"><a href="/gostd/strings/strings.go.html#2973136">Split</a></span><span class="op" id="5861845">(</span><span class="ident" id="5861846"><a href="/gostd/go/printer/printer.go.html#5860815">text</a></span><span class="op" id="5861850">,</span>&nbsp;<span class="string" id="5861852">&#34;\n&#34;</span><span class="op" id="5861856">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861860">//&nbsp;The&nbsp;comment&nbsp;started&nbsp;in&nbsp;the&nbsp;first&nbsp;column&nbsp;but&nbsp;is&nbsp;going</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861917">//&nbsp;to&nbsp;be&nbsp;indented.&nbsp;For&nbsp;an&nbsp;idempotent&nbsp;result,&nbsp;add&nbsp;indentation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5861979">//&nbsp;to&nbsp;all&nbsp;lines&nbsp;such&nbsp;that&nbsp;they&nbsp;look&nbsp;like&nbsp;they&nbsp;were&nbsp;indented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862040">//&nbsp;before&nbsp;-&nbsp;this&nbsp;will&nbsp;make&nbsp;sure&nbsp;the&nbsp;common&nbsp;prefix&nbsp;computation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862103">//&nbsp;is&nbsp;the&nbsp;same&nbsp;independent&nbsp;of&nbsp;how&nbsp;many&nbsp;times&nbsp;formatting&nbsp;is</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862163">//&nbsp;applied&nbsp;(was&nbsp;issue&nbsp;1835).</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862193">if</span>&nbsp;<span class="ident" id="5862196"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5862199">.</span><span class="ident" id="5862200"><a href="/gostd/go/token/position.go.html#3874249">IsValid</a></span><span class="op" id="5862207">(</span><span class="op" id="5862208">)</span>&nbsp;<span class="op" id="5862210">&amp;&amp;</span>&nbsp;<span class="ident" id="5862213"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5862216">.</span><span class="ident" id="5862217"><a href="/gostd/go/token/position.go.html#3874109">Column</a></span>&nbsp;<span class="op" id="5862224">==</span>&nbsp;<span class="num" id="5862227">1</span>&nbsp;<span class="op" id="5862229">&amp;&amp;</span>&nbsp;<span class="ident" id="5862232"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5862233">.</span><span class="ident" id="5862234"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5862241">&gt;</span>&nbsp;<span class="num" id="5862243">0</span>&nbsp;<span class="op" id="5862245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862249">for</span>&nbsp;<span class="ident" id="5862253">i</span><span class="op" id="5862254">,</span>&nbsp;<span class="ident" id="5862256">line</span>&nbsp;<span class="op" id="5862261">:=</span>&nbsp;<span class="keyword" id="5862264">range</span>&nbsp;<span class="ident" id="5862270"><a href="/gostd/go/printer/printer.go.html#5861823">lines</a></span><span class="op" id="5862275">[</span><span class="num" id="5862276">1</span><span class="op" id="5862277">:</span><span class="op" id="5862278">]</span>&nbsp;<span class="op" id="5862280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862285"><a href="/gostd/go/printer/printer.go.html#5861823">lines</a></span><span class="op" id="5862290">[</span><span class="num" id="5862291">1</span><span class="op" id="5862292">+</span><span class="ident" id="5862293"><a href="/gostd/go/printer/printer.go.html#5862253">i</a></span><span class="op" id="5862294">]</span>&nbsp;<span class="op" id="5862296">=</span>&nbsp;<span class="string" id="5862298">&#34;&nbsp;&nbsp;&nbsp;&#34;</span>&nbsp;<span class="op" id="5862304">+</span>&nbsp;<span class="ident" id="5862306"><a href="/gostd/go/printer/printer.go.html#5862256">line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862316">}</span><br>
<span class="lineno">655</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862320"><a href="/gostd/go/printer/printer.go.html#5856721">stripCommonPrefix</a></span><span class="op" id="5862337">(</span><span class="ident" id="5862338"><a href="/gostd/go/printer/printer.go.html#5861823">lines</a></span><span class="op" id="5862343">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862347">//&nbsp;write&nbsp;comment&nbsp;lines,&nbsp;separated&nbsp;by&nbsp;formfeed,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5862395">//&nbsp;without&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;the&nbsp;last&nbsp;line</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862440">for</span>&nbsp;<span class="ident" id="5862444">i</span><span class="op" id="5862445">,</span>&nbsp;<span class="ident" id="5862447">line</span>&nbsp;<span class="op" id="5862452">:=</span>&nbsp;<span class="keyword" id="5862455">range</span>&nbsp;<span class="ident" id="5862461"><a href="/gostd/go/printer/printer.go.html#5861823">lines</a></span>&nbsp;<span class="op" id="5862467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862471">if</span>&nbsp;<span class="ident" id="5862474"><a href="/gostd/go/printer/printer.go.html#5862444">i</a></span>&nbsp;<span class="op" id="5862476">&gt;</span>&nbsp;<span class="num" id="5862478">0</span>&nbsp;<span class="op" id="5862480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862485"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5862486">.</span><span class="ident" id="5862487"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5862496">(</span><span class="string" id="5862497">&#39;\f&#39;</span><span class="op" id="5862501">,</span>&nbsp;<span class="num" id="5862503">1</span><span class="op" id="5862504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862509"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span>&nbsp;<span class="op" id="5862513">=</span>&nbsp;<span class="ident" id="5862515"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5862516">.</span><span class="ident" id="5862517"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862523">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5862527">if</span>&nbsp;<span class="builtinfunc" id="5862530">len</span><span class="op" id="5862533">(</span><span class="ident" id="5862534"><a href="/gostd/go/printer/printer.go.html#5862447">line</a></span><span class="op" id="5862538">)</span>&nbsp;<span class="op" id="5862540">&gt;</span>&nbsp;<span class="num" id="5862542">0</span>&nbsp;<span class="op" id="5862544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5862549"><a href="/gostd/go/printer/printer.go.html#5860765">p</a></span><span class="op" id="5862550">.</span><span class="ident" id="5862551"><a href="/gostd/go/printer/printer.go.html#5850706">writeString</a></span><span class="op" id="5862562">(</span><span class="ident" id="5862563"><a href="/gostd/go/printer/printer.go.html#5860837">pos</a></span><span class="op" id="5862566">,</span>&nbsp;<span class="ident" id="5862568"><a href="/gostd/go/printer/printer.go.html#5856278">trimRight</a></span><span class="op" id="5862577">(</span><span class="ident" id="5862578"><a href="/gostd/go/printer/printer.go.html#5862447">line</a></span><span class="op" id="5862582">)</span><span class="op" id="5862583">,</span>&nbsp;<span class="builtintype" id="5862585">true</span><span class="op" id="5862589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5862596">}</span><br>
<span class="lineno"></span><span class="op" id="5862598">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="5862601">//&nbsp;writeCommentSuffix&nbsp;writes&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;comment&nbsp;if&nbsp;indicated</span><br>
<span class="lineno"></span><span class="comment" id="5862672">//&nbsp;and&nbsp;processes&nbsp;any&nbsp;leftover&nbsp;indentation&nbsp;information.&nbsp;If&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span><span class="comment" id="5862743">//&nbsp;is&nbsp;needed,&nbsp;the&nbsp;kind&nbsp;of&nbsp;break&nbsp;(newline&nbsp;vs&nbsp;formfeed)&nbsp;depends&nbsp;on&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5862812">//&nbsp;pending&nbsp;whitespace.&nbsp;The&nbsp;writeCommentSuffix&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">675</span><span class="comment" id="5862880">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5862952">//&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5862963">//</span><br>
<span class="lineno"></span><span class="keyword" id="5862966">func</span>&nbsp;<span class="op" id="5862971">(</span><span class="ident" id="5862972">p</span>&nbsp;<span class="op" id="5862974">*</span><span class="ident" id="5862975"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5862982">)</span>&nbsp;<span class="ident" id="5862984">writeCommentSuffix</span><span class="op" id="5863002">(</span><span class="ident" id="5863003">needsLinebreak</span>&nbsp;<span class="builtintype" id="5863018">bool</span><span class="op" id="5863022">)</span>&nbsp;<span class="op" id="5863024">(</span><span class="ident" id="5863025">wroteNewline</span><span class="op" id="5863037">,</span>&nbsp;<span class="ident" id="5863039">droppedFF</span>&nbsp;<span class="builtintype" id="5863049">bool</span><span class="op" id="5863053">)</span>&nbsp;<span class="op" id="5863055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863058">for</span>&nbsp;<span class="ident" id="5863062">i</span><span class="op" id="5863063">,</span>&nbsp;<span class="ident" id="5863065">ch</span>&nbsp;<span class="op" id="5863068">:=</span>&nbsp;<span class="keyword" id="5863071">range</span>&nbsp;<span class="ident" id="5863077"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863078">.</span><span class="ident" id="5863079"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5863085">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863089">switch</span>&nbsp;<span class="ident" id="5863096"><a href="/gostd/go/printer/printer.go.html#5863065">ch</a></span>&nbsp;<span class="op" id="5863099">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863103">case</span>&nbsp;<span class="ident" id="5863108"><a href="/gostd/go/printer/printer.go.html#5843024">blank</a></span><span class="op" id="5863113">,</span>&nbsp;<span class="ident" id="5863115"><a href="/gostd/go/printer/printer.go.html#5843052">vtab</a></span><span class="op" id="5863119">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863124">//&nbsp;ignore&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863157"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863158">.</span><span class="ident" id="5863159"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5863164">[</span><span class="ident" id="5863165"><a href="/gostd/go/printer/printer.go.html#5863062">i</a></span><span class="op" id="5863166">]</span>&nbsp;<span class="op" id="5863168">=</span>&nbsp;<span class="ident" id="5863170"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863179">case</span>&nbsp;<span class="ident" id="5863184"><a href="/gostd/go/printer/printer.go.html#5843139">indent</a></span><span class="op" id="5863190">,</span>&nbsp;<span class="ident" id="5863192"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span><span class="op" id="5863200">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863205">//&nbsp;don&#39;t&nbsp;lose&nbsp;indentation&nbsp;information</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863245">case</span>&nbsp;<span class="ident" id="5863250"><a href="/gostd/go/printer/printer.go.html#5843081">newline</a></span><span class="op" id="5863257">,</span>&nbsp;<span class="ident" id="5863259"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span><span class="op" id="5863267">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863272">//&nbsp;if&nbsp;we&nbsp;need&nbsp;a&nbsp;line&nbsp;break,&nbsp;keep&nbsp;exactly&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863320">//&nbsp;but&nbsp;remember&nbsp;if&nbsp;we&nbsp;dropped&nbsp;any&nbsp;formfeeds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863367">if</span>&nbsp;<span class="ident" id="5863370"><a href="/gostd/go/printer/printer.go.html#5863003">needsLinebreak</a></span>&nbsp;<span class="op" id="5863385">{</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863391"><a href="/gostd/go/printer/printer.go.html#5863003">needsLinebreak</a></span>&nbsp;<span class="op" id="5863406">=</span>&nbsp;<span class="builtintype" id="5863408">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863418"><a href="/gostd/go/printer/printer.go.html#5863025">wroteNewline</a></span>&nbsp;<span class="op" id="5863431">=</span>&nbsp;<span class="builtintype" id="5863433">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863441">}</span>&nbsp;<span class="keyword" id="5863443">else</span>&nbsp;<span class="op" id="5863448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863454">if</span>&nbsp;<span class="ident" id="5863457"><a href="/gostd/go/printer/printer.go.html#5863065">ch</a></span>&nbsp;<span class="op" id="5863460">==</span>&nbsp;<span class="ident" id="5863463"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span>&nbsp;<span class="op" id="5863472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863479"><a href="/gostd/go/printer/printer.go.html#5863039">droppedFF</a></span>&nbsp;<span class="op" id="5863489">=</span>&nbsp;<span class="builtintype" id="5863491">true</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863506"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863507">.</span><span class="ident" id="5863508"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5863513">[</span><span class="ident" id="5863514"><a href="/gostd/go/printer/printer.go.html#5863062">i</a></span><span class="op" id="5863515">]</span>&nbsp;<span class="op" id="5863517">=</span>&nbsp;<span class="ident" id="5863519"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863536">}</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863539"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863540">.</span><span class="ident" id="5863541"><a href="/gostd/go/printer/printer.go.html#5865543">writeWhitespace</a></span><span class="op" id="5863556">(</span><span class="builtinfunc" id="5863557">len</span><span class="op" id="5863560">(</span><span class="ident" id="5863561"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863562">.</span><span class="ident" id="5863563"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5863568">)</span><span class="op" id="5863569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5863573">//&nbsp;make&nbsp;sure&nbsp;we&nbsp;have&nbsp;a&nbsp;line&nbsp;break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863608">if</span>&nbsp;<span class="ident" id="5863611"><a href="/gostd/go/printer/printer.go.html#5863003">needsLinebreak</a></span>&nbsp;<span class="op" id="5863626">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863630"><a href="/gostd/go/printer/printer.go.html#5862972">p</a></span><span class="op" id="5863631">.</span><span class="ident" id="5863632"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5863641">(</span><span class="string" id="5863642">&#39;\n&#39;</span><span class="op" id="5863646">,</span>&nbsp;<span class="num" id="5863648">1</span><span class="op" id="5863649">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5863653"><a href="/gostd/go/printer/printer.go.html#5863025">wroteNewline</a></span>&nbsp;<span class="op" id="5863666">=</span>&nbsp;<span class="builtintype" id="5863668">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5863674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5863678">return</span><br>
<span class="lineno"></span><span class="op" id="5863685">}</span><br>
<span class="lineno">710</span><br>
<span class="lineno"></span><span class="comment" id="5863688">//&nbsp;intersperseComments&nbsp;consumes&nbsp;all&nbsp;comments&nbsp;that&nbsp;appear&nbsp;before&nbsp;the&nbsp;next&nbsp;token</span><br>
<span class="lineno"></span><span class="comment" id="5863767">//&nbsp;tok&nbsp;and&nbsp;prints&nbsp;it&nbsp;together&nbsp;with&nbsp;the&nbsp;buffered&nbsp;whitespace&nbsp;(i.e.,&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5863848">//&nbsp;that&nbsp;needs&nbsp;to&nbsp;be&nbsp;written&nbsp;before&nbsp;the&nbsp;next&nbsp;token).&nbsp;A&nbsp;heuristic&nbsp;is&nbsp;used&nbsp;to&nbsp;mix</span><br>
<span class="lineno"></span><span class="comment" id="5863927">//&nbsp;the&nbsp;comments&nbsp;and&nbsp;whitespace.&nbsp;The&nbsp;intersperseComments&nbsp;result&nbsp;indicates&nbsp;if&nbsp;a</span><br>
<span class="lineno">715</span><span class="comment" id="5864005">//&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="comment" id="5864085">//</span><br>
<span class="lineno"></span><span class="keyword" id="5864088">func</span>&nbsp;<span class="op" id="5864093">(</span><span class="ident" id="5864094">p</span>&nbsp;<span class="op" id="5864096">*</span><span class="ident" id="5864097"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5864104">)</span>&nbsp;<span class="ident" id="5864106">intersperseComments</span><span class="op" id="5864125">(</span><span class="ident" id="5864126">next</span>&nbsp;<span class="ident" id="5864131"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864136">.</span><span class="ident" id="5864137"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5864145">,</span>&nbsp;<span class="ident" id="5864147">tok</span>&nbsp;<span class="ident" id="5864151"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864156">.</span><span class="ident" id="5864157"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="5864162">)</span>&nbsp;<span class="op" id="5864164">(</span><span class="ident" id="5864165">wroteNewline</span><span class="op" id="5864177">,</span>&nbsp;<span class="ident" id="5864179">droppedFF</span>&nbsp;<span class="builtintype" id="5864189">bool</span><span class="op" id="5864193">)</span>&nbsp;<span class="op" id="5864195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5864198">var</span>&nbsp;<span class="ident" id="5864202">last</span>&nbsp;<span class="op" id="5864207">*</span><span class="ident" id="5864208"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5864211">.</span><span class="ident" id="5864212"><a href="/gostd/go/ast/ast.go.html#3795636">Comment</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5864221">for</span>&nbsp;<span class="ident" id="5864225"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864226">.</span><span class="ident" id="5864227"><a href="/gostd/go/printer/printer.go.html#5847174">commentBefore</a></span><span class="op" id="5864240">(</span><span class="ident" id="5864241"><a href="/gostd/go/printer/printer.go.html#5864126">next</a></span><span class="op" id="5864245">)</span>&nbsp;<span class="op" id="5864247">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5864251">for</span>&nbsp;<span class="ident" id="5864255">_</span><span class="op" id="5864256">,</span>&nbsp;<span class="ident" id="5864258">c</span>&nbsp;<span class="op" id="5864260">:=</span>&nbsp;<span class="keyword" id="5864263">range</span>&nbsp;<span class="ident" id="5864269"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864270">.</span><span class="ident" id="5864271"><a href="/gostd/go/printer/printer.go.html#5843535">comment</a></span><span class="op" id="5864278">.</span><span class="ident" id="5864279"><a href="/gostd/go/ast/ast.go.html#3796057">List</a></span>&nbsp;<span class="op" id="5864284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864289"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864290">.</span><span class="ident" id="5864291"><a href="/gostd/go/printer/printer.go.html#5852381">writeCommentPrefix</a></span><span class="op" id="5864309">(</span><span class="ident" id="5864310"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864311">.</span><span class="ident" id="5864312"><a href="/gostd/go/printer/printer.go.html#5848425">posFor</a></span><span class="op" id="5864318">(</span><span class="ident" id="5864319"><a href="/gostd/go/printer/printer.go.html#5864258">c</a></span><span class="op" id="5864320">.</span><span class="ident" id="5864321"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5864324">(</span><span class="op" id="5864325">)</span><span class="op" id="5864326">)</span><span class="op" id="5864327">,</span>&nbsp;<span class="ident" id="5864329"><a href="/gostd/go/printer/printer.go.html#5864126">next</a></span><span class="op" id="5864333">,</span>&nbsp;<span class="ident" id="5864335"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span><span class="op" id="5864339">,</span>&nbsp;<span class="ident" id="5864341"><a href="/gostd/go/printer/printer.go.html#5864258">c</a></span><span class="op" id="5864342">,</span>&nbsp;<span class="ident" id="5864344"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span><span class="op" id="5864347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864352"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864353">.</span><span class="ident" id="5864354"><a href="/gostd/go/printer/printer.go.html#5860777">writeComment</a></span><span class="op" id="5864366">(</span><span class="ident" id="5864367"><a href="/gostd/go/printer/printer.go.html#5864258">c</a></span><span class="op" id="5864368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864373"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span>&nbsp;<span class="op" id="5864378">=</span>&nbsp;<span class="ident" id="5864380"><a href="/gostd/go/printer/printer.go.html#5864258">c</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864384">}</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864388"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864389">.</span><span class="ident" id="5864390"><a href="/gostd/go/printer/printer.go.html#5846539">nextComment</a></span><span class="op" id="5864401">(</span><span class="op" id="5864402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5864409">if</span>&nbsp;<span class="ident" id="5864412"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span>&nbsp;<span class="op" id="5864417">!=</span>&nbsp;<span class="builtintype" id="5864420">nil</span>&nbsp;<span class="op" id="5864424">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864428">//&nbsp;if&nbsp;the&nbsp;last&nbsp;comment&nbsp;is&nbsp;a&nbsp;/*-style&nbsp;comment&nbsp;and&nbsp;the&nbsp;next&nbsp;item</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864493">//&nbsp;follows&nbsp;on&nbsp;the&nbsp;same&nbsp;line&nbsp;but&nbsp;is&nbsp;not&nbsp;a&nbsp;comma,&nbsp;and&nbsp;not&nbsp;a&nbsp;&#34;closing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864563">//&nbsp;token&nbsp;immediately&nbsp;following&nbsp;its&nbsp;corresponding&nbsp;&#34;opening&#34;&nbsp;token,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864631">//&nbsp;add&nbsp;an&nbsp;extra&nbsp;blank&nbsp;for&nbsp;separation&nbsp;unless&nbsp;explicitly&nbsp;disabled</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5864697">if</span>&nbsp;<span class="ident" id="5864700"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864701">.</span><span class="ident" id="5864702"><a href="/gostd/go/printer/printer.go.html#5844029">mode</a></span><span class="op" id="5864706">&amp;</span><span class="ident" id="5864707"><a href="/gostd/go/printer/printer.go.html#5843276">noExtraBlank</a></span>&nbsp;<span class="op" id="5864720">==</span>&nbsp;<span class="num" id="5864723">0</span>&nbsp;<span class="op" id="5864725">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864731"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span><span class="op" id="5864735">.</span><span class="ident" id="5864736"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5864740">[</span><span class="num" id="5864741">1</span><span class="op" id="5864742">]</span>&nbsp;<span class="op" id="5864744">==</span>&nbsp;<span class="string" id="5864747">&#39;*&#39;</span>&nbsp;<span class="op" id="5864751">&amp;&amp;</span>&nbsp;<span class="ident" id="5864754"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864755">.</span><span class="ident" id="5864756"><a href="/gostd/go/printer/printer.go.html#5848576">lineFor</a></span><span class="op" id="5864763">(</span><span class="ident" id="5864764"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span><span class="op" id="5864768">.</span><span class="ident" id="5864769"><a href="/gostd/go/ast/ast.go.html#3795803">Pos</a></span><span class="op" id="5864772">(</span><span class="op" id="5864773">)</span><span class="op" id="5864774">)</span>&nbsp;<span class="op" id="5864776">==</span>&nbsp;<span class="ident" id="5864779"><a href="/gostd/go/printer/printer.go.html#5864126">next</a></span><span class="op" id="5864783">.</span><span class="ident" id="5864784"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5864789">&amp;&amp;</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864795"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span>&nbsp;<span class="op" id="5864799">!=</span>&nbsp;<span class="ident" id="5864802"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864807">.</span><span class="ident" id="5864808"><a href="/gostd/go/token/token.go.html#3890602">COMMA</a></span>&nbsp;<span class="op" id="5864814">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864820">(</span><span class="ident" id="5864821"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span>&nbsp;<span class="op" id="5864825">!=</span>&nbsp;<span class="ident" id="5864828"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864833">.</span><span class="ident" id="5864834"><a href="/gostd/go/token/token.go.html#3890629">RPAREN</a></span>&nbsp;<span class="op" id="5864841">||</span>&nbsp;<span class="ident" id="5864844"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864845">.</span><span class="ident" id="5864846"><a href="/gostd/go/printer/printer.go.html#5844231">prevOpen</a></span>&nbsp;<span class="op" id="5864855">==</span>&nbsp;<span class="ident" id="5864858"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864863">.</span><span class="ident" id="5864864"><a href="/gostd/go/token/token.go.html#3890563">LPAREN</a></span><span class="op" id="5864870">)</span>&nbsp;<span class="op" id="5864872">&amp;&amp;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864878">(</span><span class="ident" id="5864879"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span>&nbsp;<span class="op" id="5864883">!=</span>&nbsp;<span class="ident" id="5864886"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864891">.</span><span class="ident" id="5864892"><a href="/gostd/go/token/token.go.html#3890645">RBRACK</a></span>&nbsp;<span class="op" id="5864899">||</span>&nbsp;<span class="ident" id="5864902"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864903">.</span><span class="ident" id="5864904"><a href="/gostd/go/printer/printer.go.html#5844231">prevOpen</a></span>&nbsp;<span class="op" id="5864913">==</span>&nbsp;<span class="ident" id="5864916"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5864921">.</span><span class="ident" id="5864922"><a href="/gostd/go/token/token.go.html#3890576">LBRACK</a></span><span class="op" id="5864928">)</span>&nbsp;<span class="op" id="5864930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5864935"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5864936">.</span><span class="ident" id="5864937"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5864946">(</span><span class="string" id="5864947">&#39;&nbsp;&#39;</span><span class="op" id="5864950">,</span>&nbsp;<span class="num" id="5864952">1</span><span class="op" id="5864953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5864957">}</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5864961">//&nbsp;ensure&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;line&nbsp;break&nbsp;after&nbsp;a&nbsp;//-style&nbsp;comment,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865026">//&nbsp;before&nbsp;a&nbsp;closing&nbsp;&#39;}&#39;&nbsp;unless&nbsp;explicitly&nbsp;disabled,&nbsp;or&nbsp;at&nbsp;eof</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865090">needsLinebreak</span>&nbsp;<span class="op" id="5865105">:=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865111"><a href="/gostd/go/printer/printer.go.html#5864202">last</a></span><span class="op" id="5865115">.</span><span class="ident" id="5865116"><a href="/gostd/go/ast/ast.go.html#3795711">Text</a></span><span class="op" id="5865120">[</span><span class="num" id="5865121">1</span><span class="op" id="5865122">]</span>&nbsp;<span class="op" id="5865124">==</span>&nbsp;<span class="string" id="5865127">&#39;/&#39;</span>&nbsp;<span class="op" id="5865131">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865138"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span>&nbsp;<span class="op" id="5865142">==</span>&nbsp;<span class="ident" id="5865145"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5865150">.</span><span class="ident" id="5865151"><a href="/gostd/go/token/token.go.html#3890661">RBRACE</a></span>&nbsp;<span class="op" id="5865158">&amp;&amp;</span>&nbsp;<span class="ident" id="5865161"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5865162">.</span><span class="ident" id="5865163"><a href="/gostd/go/printer/printer.go.html#5844029">mode</a></span><span class="op" id="5865167">&amp;</span><span class="ident" id="5865168"><a href="/gostd/go/printer/printer.go.html#5843359">noExtraLinebreak</a></span>&nbsp;<span class="op" id="5865185">==</span>&nbsp;<span class="num" id="5865188">0</span>&nbsp;<span class="op" id="5865190">||</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865197"><a href="/gostd/go/printer/printer.go.html#5864147">tok</a></span>&nbsp;<span class="op" id="5865201">==</span>&nbsp;<span class="ident" id="5865204"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5865209">.</span><span class="ident" id="5865210"><a href="/gostd/go/token/token.go.html#3889706">EOF</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865216">return</span>&nbsp;<span class="ident" id="5865223"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5865224">.</span><span class="ident" id="5865225"><a href="/gostd/go/printer/printer.go.html#5862984">writeCommentSuffix</a></span><span class="op" id="5865243">(</span><span class="ident" id="5865244"><a href="/gostd/go/printer/printer.go.html#5865090">needsLinebreak</a></span><span class="op" id="5865258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5865261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865265">//&nbsp;no&nbsp;comment&nbsp;was&nbsp;written&nbsp;-&nbsp;we&nbsp;should&nbsp;never&nbsp;reach&nbsp;here&nbsp;since</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865327">//&nbsp;intersperseComments&nbsp;should&nbsp;not&nbsp;be&nbsp;called&nbsp;in&nbsp;that&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865385"><a href="/gostd/go/printer/printer.go.html#5864094">p</a></span><span class="op" id="5865386">.</span><span class="ident" id="5865387"><a href="/gostd/go/printer/printer.go.html#5845789">internalError</a></span><span class="op" id="5865400">(</span><span class="string" id="5865401">&#34;intersperseComments&nbsp;called&nbsp;without&nbsp;pending&nbsp;comments&#34;</span><span class="op" id="5865454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865457">return</span><br>
<span class="lineno"></span><span class="op" id="5865464">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">755</span><span class="comment" id="5865467">//&nbsp;whiteWhitespace&nbsp;writes&nbsp;the&nbsp;first&nbsp;n&nbsp;whitespace&nbsp;entries.</span><br>
<span class="lineno"></span><span class="keyword" id="5865525">func</span>&nbsp;<span class="op" id="5865530">(</span><span class="ident" id="5865531">p</span>&nbsp;<span class="op" id="5865533">*</span><span class="ident" id="5865534"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5865541">)</span>&nbsp;<span class="ident" id="5865543">writeWhitespace</span><span class="op" id="5865558">(</span><span class="ident" id="5865559">n</span>&nbsp;<span class="builtintype" id="5865561">int</span><span class="op" id="5865564">)</span>&nbsp;<span class="op" id="5865566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865569">//&nbsp;write&nbsp;entries</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865587">for</span>&nbsp;<span class="ident" id="5865591">i</span>&nbsp;<span class="op" id="5865593">:=</span>&nbsp;<span class="num" id="5865596">0</span><span class="op" id="5865597">;</span>&nbsp;<span class="ident" id="5865599"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span>&nbsp;<span class="op" id="5865601">&lt;</span>&nbsp;<span class="ident" id="5865603"><a href="/gostd/go/printer/printer.go.html#5865559">n</a></span><span class="op" id="5865604">;</span>&nbsp;<span class="ident" id="5865606"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5865607">++</span>&nbsp;<span class="op" id="5865610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865614">switch</span>&nbsp;<span class="ident" id="5865621">ch</span>&nbsp;<span class="op" id="5865624">:=</span>&nbsp;<span class="ident" id="5865627"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865628">.</span><span class="ident" id="5865629"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5865634">[</span><span class="ident" id="5865635"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5865636">]</span><span class="op" id="5865637">;</span>&nbsp;<span class="ident" id="5865639"><a href="/gostd/go/printer/printer.go.html#5865621">ch</a></span>&nbsp;<span class="op" id="5865642">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865646">case</span>&nbsp;<span class="ident" id="5865651"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span><span class="op" id="5865657">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865662">//&nbsp;ignore!</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865675">case</span>&nbsp;<span class="ident" id="5865680"><a href="/gostd/go/printer/printer.go.html#5843139">indent</a></span><span class="op" id="5865686">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865691"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865692">.</span><span class="ident" id="5865693"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span><span class="op" id="5865699">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865704">case</span>&nbsp;<span class="ident" id="5865709"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span><span class="op" id="5865717">:</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865722"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865723">.</span><span class="ident" id="5865724"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span><span class="op" id="5865730">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865736">if</span>&nbsp;<span class="ident" id="5865739"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865740">.</span><span class="ident" id="5865741"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5865748">&lt;</span>&nbsp;<span class="num" id="5865750">0</span>&nbsp;<span class="op" id="5865752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865758"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865759">.</span><span class="ident" id="5865760"><a href="/gostd/go/printer/printer.go.html#5845789">internalError</a></span><span class="op" id="5865773">(</span><span class="string" id="5865774">&#34;negative&nbsp;indentation:&#34;</span><span class="op" id="5865797">,</span>&nbsp;<span class="ident" id="5865799"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865800">.</span><span class="ident" id="5865801"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span><span class="op" id="5865807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5865813"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5865814">.</span><span class="ident" id="5865815"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5865822">=</span>&nbsp;<span class="num" id="5865824">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5865829">}</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5865833">case</span>&nbsp;<span class="ident" id="5865838"><a href="/gostd/go/printer/printer.go.html#5843081">newline</a></span><span class="op" id="5865845">,</span>&nbsp;<span class="ident" id="5865847"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span><span class="op" id="5865855">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865860">//&nbsp;A&nbsp;line&nbsp;break&nbsp;immediately&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#34;correcting&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865918">//&nbsp;unindent&nbsp;is&nbsp;swapped&nbsp;with&nbsp;the&nbsp;unindent&nbsp;-&nbsp;this&nbsp;permits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5865977">//&nbsp;proper&nbsp;label&nbsp;positioning.&nbsp;If&nbsp;a&nbsp;comment&nbsp;is&nbsp;between</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866033">//&nbsp;the&nbsp;line&nbsp;break&nbsp;and&nbsp;the&nbsp;label,&nbsp;the&nbsp;unindent&nbsp;is&nbsp;not</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866089">//&nbsp;part&nbsp;of&nbsp;the&nbsp;comment&nbsp;whitespace&nbsp;prefix&nbsp;and&nbsp;the&nbsp;comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866149">//&nbsp;will&nbsp;be&nbsp;positioned&nbsp;correctly&nbsp;indented.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866194">if</span>&nbsp;<span class="ident" id="5866197"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5866198">+</span><span class="num" id="5866199">1</span>&nbsp;<span class="op" id="5866201">&lt;</span>&nbsp;<span class="ident" id="5866203"><a href="/gostd/go/printer/printer.go.html#5865559">n</a></span>&nbsp;<span class="op" id="5866205">&amp;&amp;</span>&nbsp;<span class="ident" id="5866208"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866209">.</span><span class="ident" id="5866210"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866215">[</span><span class="ident" id="5866216"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5866217">+</span><span class="num" id="5866218">1</span><span class="op" id="5866219">]</span>&nbsp;<span class="op" id="5866221">==</span>&nbsp;<span class="ident" id="5866224"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span>&nbsp;<span class="op" id="5866233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866239">//&nbsp;Use&nbsp;a&nbsp;formfeed&nbsp;to&nbsp;terminate&nbsp;the&nbsp;current&nbsp;section.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866295">//&nbsp;Otherwise,&nbsp;a&nbsp;long&nbsp;label&nbsp;name&nbsp;on&nbsp;the&nbsp;next&nbsp;line&nbsp;leading</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866356">//&nbsp;to&nbsp;a&nbsp;wide&nbsp;column&nbsp;may&nbsp;increase&nbsp;the&nbsp;indentation&nbsp;column</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866416">//&nbsp;of&nbsp;lines&nbsp;before&nbsp;the&nbsp;label;&nbsp;effectively&nbsp;leading&nbsp;to&nbsp;wrong</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866479">//&nbsp;indentation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866499"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866500">.</span><span class="ident" id="5866501"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866506">[</span><span class="ident" id="5866507"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5866508">]</span><span class="op" id="5866509">,</span>&nbsp;<span class="ident" id="5866511"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866512">.</span><span class="ident" id="5866513"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866518">[</span><span class="ident" id="5866519"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5866520">+</span><span class="num" id="5866521">1</span><span class="op" id="5866522">]</span>&nbsp;<span class="op" id="5866524">=</span>&nbsp;<span class="ident" id="5866526"><a href="/gostd/go/printer/printer.go.html#5843167">unindent</a></span><span class="op" id="5866534">,</span>&nbsp;<span class="ident" id="5866536"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866549"><a href="/gostd/go/printer/printer.go.html#5865591">i</a></span><span class="op" id="5866550">--</span>&nbsp;<span class="comment" id="5866553">//&nbsp;do&nbsp;it&nbsp;again</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866572">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5866584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866589">fallthrough</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866603">default</span><span class="op" id="5866610">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866615"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866616">.</span><span class="ident" id="5866617"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5866626">(</span><span class="builtintype" id="5866627">byte</span><span class="op" id="5866631">(</span><span class="ident" id="5866632"><a href="/gostd/go/printer/printer.go.html#5865621">ch</a></span><span class="op" id="5866634">)</span><span class="op" id="5866635">,</span>&nbsp;<span class="num" id="5866637">1</span><span class="op" id="5866638">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5866642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5866645">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5866649">//&nbsp;shift&nbsp;remaining&nbsp;entries&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866682">l</span>&nbsp;<span class="op" id="5866684">:=</span>&nbsp;<span class="builtinfunc" id="5866687">copy</span><span class="op" id="5866691">(</span><span class="ident" id="5866692"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866693">.</span><span class="ident" id="5866694"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866699">,</span>&nbsp;<span class="ident" id="5866701"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866702">.</span><span class="ident" id="5866703"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866708">[</span><span class="ident" id="5866709"><a href="/gostd/go/printer/printer.go.html#5865559">n</a></span><span class="op" id="5866710">:</span><span class="op" id="5866711">]</span><span class="op" id="5866712">)</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866715"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866716">.</span><span class="ident" id="5866717"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5866723">=</span>&nbsp;<span class="ident" id="5866725"><a href="/gostd/go/printer/printer.go.html#5865531">p</a></span><span class="op" id="5866726">.</span><span class="ident" id="5866727"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5866732">[</span><span class="op" id="5866733">:</span><span class="ident" id="5866734"><a href="/gostd/go/printer/printer.go.html#5866682">l</a></span><span class="op" id="5866735">]</span><br>
<span class="lineno"></span><span class="op" id="5866737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5866740">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5866820">//&nbsp;Printing&nbsp;interface</span><br>
<span class="lineno">800</span><br>
<span class="lineno"></span><span class="comment" id="5866843">//&nbsp;nlines&nbsp;limits&nbsp;n&nbsp;to&nbsp;maxNewlines.</span><br>
<span class="lineno"></span><span class="keyword" id="5866878">func</span>&nbsp;<span class="ident" id="5866883">nlimit</span><span class="op" id="5866889">(</span><span class="ident" id="5866890">n</span>&nbsp;<span class="builtintype" id="5866892">int</span><span class="op" id="5866895">)</span>&nbsp;<span class="builtintype" id="5866897">int</span>&nbsp;<span class="op" id="5866901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866904">if</span>&nbsp;<span class="ident" id="5866907"><a href="/gostd/go/printer/printer.go.html#5866890">n</a></span>&nbsp;<span class="op" id="5866909">&gt;</span>&nbsp;<span class="ident" id="5866911"><a href="/gostd/go/printer/printer.go.html#5842829">maxNewlines</a></span>&nbsp;<span class="op" id="5866923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5866927"><a href="/gostd/go/printer/printer.go.html#5866890">n</a></span>&nbsp;<span class="op" id="5866929">=</span>&nbsp;<span class="ident" id="5866931"><a href="/gostd/go/printer/printer.go.html#5842829">maxNewlines</a></span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5866944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5866947">return</span>&nbsp;<span class="ident" id="5866954"><a href="/gostd/go/printer/printer.go.html#5866890">n</a></span><br>
<span class="lineno"></span><span class="op" id="5866956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5866959">func</span>&nbsp;<span class="ident" id="5866964">mayCombine</span><span class="op" id="5866974">(</span><span class="ident" id="5866975">prev</span>&nbsp;<span class="ident" id="5866980"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5866985">.</span><span class="ident" id="5866986"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="5866991">,</span>&nbsp;<span class="ident" id="5866993">next</span>&nbsp;<span class="builtintype" id="5866998">byte</span><span class="op" id="5867002">)</span>&nbsp;<span class="op" id="5867004">(</span><span class="ident" id="5867005">b</span>&nbsp;<span class="builtintype" id="5867007">bool</span><span class="op" id="5867011">)</span>&nbsp;<span class="op" id="5867013">{</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867016">switch</span>&nbsp;<span class="ident" id="5867023"><a href="/gostd/go/printer/printer.go.html#5866975">prev</a></span>&nbsp;<span class="op" id="5867028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867031">case</span>&nbsp;<span class="ident" id="5867036"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867041">.</span><span class="ident" id="5867042"><a href="/gostd/go/token/token.go.html#3889839">INT</a></span><span class="op" id="5867045">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867049"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867051">=</span>&nbsp;<span class="ident" id="5867053"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867058">==</span>&nbsp;<span class="string" id="5867061">&#39;.&#39;</span>&nbsp;<span class="comment" id="5867065">//&nbsp;1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867072">case</span>&nbsp;<span class="ident" id="5867077"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867082">.</span><span class="ident" id="5867083"><a href="/gostd/go/token/token.go.html#3889982">ADD</a></span><span class="op" id="5867086">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867090"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867092">=</span>&nbsp;<span class="ident" id="5867094"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867099">==</span>&nbsp;<span class="string" id="5867102">&#39;+&#39;</span>&nbsp;<span class="comment" id="5867106">//&nbsp;++</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867113">case</span>&nbsp;<span class="ident" id="5867118"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867123">.</span><span class="ident" id="5867124"><a href="/gostd/go/token/token.go.html#3889992">SUB</a></span><span class="op" id="5867127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867131"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867133">=</span>&nbsp;<span class="ident" id="5867135"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867140">==</span>&nbsp;<span class="string" id="5867143">&#39;-&#39;</span>&nbsp;<span class="comment" id="5867147">//&nbsp;--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867154">case</span>&nbsp;<span class="ident" id="5867159"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867164">.</span><span class="ident" id="5867165"><a href="/gostd/go/token/token.go.html#3890012">QUO</a></span><span class="op" id="5867168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867172"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867174">=</span>&nbsp;<span class="ident" id="5867176"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867181">==</span>&nbsp;<span class="string" id="5867184">&#39;*&#39;</span>&nbsp;<span class="comment" id="5867188">//&nbsp;/*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867195">case</span>&nbsp;<span class="ident" id="5867200"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867205">.</span><span class="ident" id="5867206"><a href="/gostd/go/token/token.go.html#3890428">LSS</a></span><span class="op" id="5867209">:</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867213"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867215">=</span>&nbsp;<span class="ident" id="5867217"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867222">==</span>&nbsp;<span class="string" id="5867225">&#39;-&#39;</span>&nbsp;<span class="op" id="5867229">||</span>&nbsp;<span class="ident" id="5867232"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867237">==</span>&nbsp;<span class="string" id="5867240">&#39;&lt;&#39;</span>&nbsp;<span class="comment" id="5867244">//&nbsp;&lt;-&nbsp;or&nbsp;&lt;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867257">case</span>&nbsp;<span class="ident" id="5867262"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5867267">.</span><span class="ident" id="5867268"><a href="/gostd/go/token/token.go.html#3890033">AND</a></span><span class="op" id="5867271">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5867275"><a href="/gostd/go/printer/printer.go.html#5867005">b</a></span>&nbsp;<span class="op" id="5867277">=</span>&nbsp;<span class="ident" id="5867279"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867284">==</span>&nbsp;<span class="string" id="5867287">&#39;&amp;&#39;</span>&nbsp;<span class="op" id="5867291">||</span>&nbsp;<span class="ident" id="5867294"><a href="/gostd/go/printer/printer.go.html#5866993">next</a></span>&nbsp;<span class="op" id="5867299">==</span>&nbsp;<span class="string" id="5867302">&#39;^&#39;</span>&nbsp;<span class="comment" id="5867306">//&nbsp;&amp;&amp;&nbsp;or&nbsp;&amp;^</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5867319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867322">return</span><br>
<span class="lineno">825</span><span class="op" id="5867329">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5867332">//&nbsp;print&nbsp;prints&nbsp;a&nbsp;list&nbsp;of&nbsp;&#34;items&#34;&nbsp;(roughly&nbsp;corresponding&nbsp;to&nbsp;syntactic</span><br>
<span class="lineno"></span><span class="comment" id="5867402">//&nbsp;tokens,&nbsp;but&nbsp;also&nbsp;including&nbsp;whitespace&nbsp;and&nbsp;formatting&nbsp;information).</span><br>
<span class="lineno"></span><span class="comment" id="5867472">//&nbsp;It&nbsp;is&nbsp;the&nbsp;only&nbsp;print&nbsp;function&nbsp;that&nbsp;should&nbsp;be&nbsp;called&nbsp;directly&nbsp;from</span><br>
<span class="lineno">830</span><span class="comment" id="5867541">//&nbsp;any&nbsp;of&nbsp;the&nbsp;AST&nbsp;printing&nbsp;functions&nbsp;in&nbsp;nodes.go.</span><br>
<span class="lineno"></span><span class="comment" id="5867591">//</span><br>
<span class="lineno"></span><span class="comment" id="5867594">//&nbsp;Whitespace&nbsp;is&nbsp;accumulated&nbsp;until&nbsp;a&nbsp;non-whitespace&nbsp;token&nbsp;appears.&nbsp;Any</span><br>
<span class="lineno"></span><span class="comment" id="5867665">//&nbsp;comments&nbsp;that&nbsp;need&nbsp;to&nbsp;appear&nbsp;before&nbsp;that&nbsp;token&nbsp;are&nbsp;printed&nbsp;first,</span><br>
<span class="lineno"></span><span class="comment" id="5867734">//&nbsp;taking&nbsp;into&nbsp;account&nbsp;the&nbsp;amount&nbsp;and&nbsp;structure&nbsp;of&nbsp;any&nbsp;pending&nbsp;white-</span><br>
<span class="lineno">835</span><span class="comment" id="5867804">//&nbsp;space&nbsp;for&nbsp;best&nbsp;comment&nbsp;placement.&nbsp;Then,&nbsp;any&nbsp;leftover&nbsp;whitespace&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="5867874">//&nbsp;printed,&nbsp;followed&nbsp;by&nbsp;the&nbsp;actual&nbsp;token.</span><br>
<span class="lineno"></span><span class="comment" id="5867916">//</span><br>
<span class="lineno"></span><span class="keyword" id="5867919">func</span>&nbsp;<span class="op" id="5867924">(</span><span class="ident" id="5867925">p</span>&nbsp;<span class="op" id="5867927">*</span><span class="ident" id="5867928"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5867935">)</span>&nbsp;<span class="builtinfunc" id="5867937">print</span><span class="op" id="5867942">(</span><span class="ident" id="5867943">args</span>&nbsp;<span class="op" id="5867948">...</span><span class="keyword" id="5867951">interface</span><span class="op" id="5867960">{</span><span class="op" id="5867961">}</span><span class="op" id="5867962">)</span>&nbsp;<span class="op" id="5867964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5867967">for</span>&nbsp;<span class="ident" id="5867971">_</span><span class="op" id="5867972">,</span>&nbsp;<span class="ident" id="5867974">arg</span>&nbsp;<span class="op" id="5867978">:=</span>&nbsp;<span class="keyword" id="5867981">range</span>&nbsp;<span class="ident" id="5867987"><a href="/gostd/go/printer/printer.go.html#5867943">args</a></span>&nbsp;<span class="op" id="5867992">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5867996">//&nbsp;information&nbsp;about&nbsp;the&nbsp;current&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868035">var</span>&nbsp;<span class="ident" id="5868039">data</span>&nbsp;<span class="builtintype" id="5868044">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868053">var</span>&nbsp;<span class="ident" id="5868057">isLit</span>&nbsp;<span class="builtintype" id="5868063">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868070">var</span>&nbsp;<span class="ident" id="5868074">impliedSemi</span>&nbsp;<span class="builtintype" id="5868086">bool</span>&nbsp;<span class="comment" id="5868091">//&nbsp;value&nbsp;for&nbsp;p.impliedSemi&nbsp;after&nbsp;this&nbsp;arg</span><br>
<span class="lineno"></span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868136">//&nbsp;record&nbsp;previous&nbsp;opening&nbsp;token,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868179">switch</span>&nbsp;<span class="ident" id="5868186"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868187">.</span><span class="ident" id="5868188"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5868196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868200">case</span>&nbsp;<span class="ident" id="5868205"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5868210">.</span><span class="ident" id="5868211"><a href="/gostd/go/token/token.go.html#3889684">ILLEGAL</a></span><span class="op" id="5868218">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868223">//&nbsp;ignore&nbsp;(white&nbsp;space)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868249">case</span>&nbsp;<span class="ident" id="5868254"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5868259">.</span><span class="ident" id="5868260"><a href="/gostd/go/token/token.go.html#3890563">LPAREN</a></span><span class="op" id="5868266">,</span>&nbsp;<span class="ident" id="5868268"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5868273">.</span><span class="ident" id="5868274"><a href="/gostd/go/token/token.go.html#3890576">LBRACK</a></span><span class="op" id="5868280">:</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868285"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868286">.</span><span class="ident" id="5868287"><a href="/gostd/go/printer/printer.go.html#5844231">prevOpen</a></span>&nbsp;<span class="op" id="5868296">=</span>&nbsp;<span class="ident" id="5868298"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868299">.</span><span class="ident" id="5868300"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868310">default</span><span class="op" id="5868317">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868322">//&nbsp;other&nbsp;tokens&nbsp;followed&nbsp;any&nbsp;opening&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868368"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868369">.</span><span class="ident" id="5868370"><a href="/gostd/go/printer/printer.go.html#5844231">prevOpen</a></span>&nbsp;<span class="op" id="5868379">=</span>&nbsp;<span class="ident" id="5868381"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5868386">.</span><span class="ident" id="5868387"><a href="/gostd/go/token/token.go.html#3889684">ILLEGAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5868397">}</span><br>
<span class="lineno">855</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868402">switch</span>&nbsp;<span class="ident" id="5868409">x</span>&nbsp;<span class="op" id="5868411">:=</span>&nbsp;<span class="ident" id="5868414"><a href="/gostd/go/printer/printer.go.html#5867974">arg</a></span><span class="op" id="5868417">.</span><span class="op" id="5868418">(</span><span class="keyword" id="5868419">type</span><span class="op" id="5868423">)</span>&nbsp;<span class="op" id="5868425">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868429">case</span>&nbsp;<span class="ident" id="5868434"><a href="/gostd/go/printer/printer.go.html#5843256">pmode</a></span><span class="op" id="5868439">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868444">//&nbsp;toggle&nbsp;printer&nbsp;mode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868470"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868471">.</span><span class="ident" id="5868472"><a href="/gostd/go/printer/printer.go.html#5844029">mode</a></span>&nbsp;<span class="op" id="5868477">^=</span>&nbsp;<span class="ident" id="5868480"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868485">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868497">case</span>&nbsp;<span class="ident" id="5868502"><a href="/gostd/go/printer/printer.go.html#5842972">whiteSpace</a></span><span class="op" id="5868512">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868517">if</span>&nbsp;<span class="ident" id="5868520"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span>&nbsp;<span class="op" id="5868522">==</span>&nbsp;<span class="ident" id="5868525"><a href="/gostd/go/printer/printer.go.html#5842998">ignore</a></span>&nbsp;<span class="op" id="5868532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868538">//&nbsp;don&#39;t&nbsp;add&nbsp;ignore&#39;s&nbsp;to&nbsp;the&nbsp;buffer;&nbsp;they</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868584">//&nbsp;may&nbsp;screw&nbsp;up&nbsp;&#34;correcting&#34;&nbsp;unindents&nbsp;(see</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868632">//&nbsp;LabeledStmt)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868652">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5868664">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868669">i</span>&nbsp;<span class="op" id="5868671">:=</span>&nbsp;<span class="builtinfunc" id="5868674">len</span><span class="op" id="5868677">(</span><span class="ident" id="5868678"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868679">.</span><span class="ident" id="5868680"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5868685">)</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868690">if</span>&nbsp;<span class="ident" id="5868693"><a href="/gostd/go/printer/printer.go.html#5868669">i</a></span>&nbsp;<span class="op" id="5868695">==</span>&nbsp;<span class="builtinfunc" id="5868698">cap</span><span class="op" id="5868701">(</span><span class="ident" id="5868702"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868703">.</span><span class="ident" id="5868704"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5868709">)</span>&nbsp;<span class="op" id="5868711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868717">//&nbsp;Whitespace&nbsp;sequences&nbsp;are&nbsp;very&nbsp;short&nbsp;so&nbsp;this&nbsp;should</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868775">//&nbsp;never&nbsp;happen.&nbsp;Handle&nbsp;gracefully&nbsp;(but&nbsp;possibly&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5868833">//&nbsp;bad&nbsp;comment&nbsp;placement)&nbsp;if&nbsp;it&nbsp;does&nbsp;happen.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868882"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868883">.</span><span class="ident" id="5868884"><a href="/gostd/go/printer/printer.go.html#5865543">writeWhitespace</a></span><span class="op" id="5868899">(</span><span class="ident" id="5868900"><a href="/gostd/go/printer/printer.go.html#5868669">i</a></span><span class="op" id="5868901">)</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868907"><a href="/gostd/go/printer/printer.go.html#5868669">i</a></span>&nbsp;<span class="op" id="5868909">=</span>&nbsp;<span class="num" id="5868911">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5868916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868921"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868922">.</span><span class="ident" id="5868923"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5868929">=</span>&nbsp;<span class="ident" id="5868931"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868932">.</span><span class="ident" id="5868933"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5868938">[</span><span class="num" id="5868939">0</span>&nbsp;<span class="op" id="5868941">:</span>&nbsp;<span class="ident" id="5868943"><a href="/gostd/go/printer/printer.go.html#5868669">i</a></span><span class="op" id="5868944">+</span><span class="num" id="5868945">1</span><span class="op" id="5868946">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5868951"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5868952">.</span><span class="ident" id="5868953"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5868958">[</span><span class="ident" id="5868959"><a href="/gostd/go/printer/printer.go.html#5868669">i</a></span><span class="op" id="5868960">]</span>&nbsp;<span class="op" id="5868962">=</span>&nbsp;<span class="ident" id="5868964"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5868969">if</span>&nbsp;<span class="ident" id="5868972"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span>&nbsp;<span class="op" id="5868974">==</span>&nbsp;<span class="ident" id="5868977"><a href="/gostd/go/printer/printer.go.html#5843081">newline</a></span>&nbsp;<span class="op" id="5868985">||</span>&nbsp;<span class="ident" id="5868988"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span>&nbsp;<span class="op" id="5868990">==</span>&nbsp;<span class="ident" id="5868993"><a href="/gostd/go/printer/printer.go.html#5843110">formfeed</a></span>&nbsp;<span class="op" id="5869002">{</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869008">//&nbsp;newlines&nbsp;affect&nbsp;the&nbsp;current&nbsp;state&nbsp;(p.impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869065">//&nbsp;and&nbsp;not&nbsp;the&nbsp;state&nbsp;after&nbsp;printing&nbsp;arg&nbsp;(impliedSemi)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869123">//&nbsp;because&nbsp;comments&nbsp;can&nbsp;be&nbsp;interspersed&nbsp;before&nbsp;the&nbsp;arg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869182">//&nbsp;in&nbsp;this&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869202"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869203">.</span><span class="ident" id="5869204"><a href="/gostd/go/printer/printer.go.html#5844079">impliedSemi</a></span>&nbsp;<span class="op" id="5869216">=</span>&nbsp;<span class="builtintype" id="5869218">false</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5869227">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869232"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869233">.</span><span class="ident" id="5869234"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5869242">=</span>&nbsp;<span class="ident" id="5869244"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5869249">.</span><span class="ident" id="5869250"><a href="/gostd/go/token/token.go.html#3889684">ILLEGAL</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869261">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869273">case</span>&nbsp;<span class="op" id="5869278">*</span><span class="ident" id="5869279"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5869282">.</span><span class="ident" id="5869283"><a href="/gostd/go/ast/ast.go.html#3800239">Ident</a></span><span class="op" id="5869288">:</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869293"><a href="/gostd/go/printer/printer.go.html#5868039">data</a></span>&nbsp;<span class="op" id="5869298">=</span>&nbsp;<span class="ident" id="5869300"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5869301">.</span><span class="ident" id="5869302"><a href="/gostd/go/ast/ast.go.html#3800299">Name</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869310"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span>&nbsp;<span class="op" id="5869322">=</span>&nbsp;<span class="builtintype" id="5869324">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869332"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869333">.</span><span class="ident" id="5869334"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5869342">=</span>&nbsp;<span class="ident" id="5869344"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5869349">.</span><span class="ident" id="5869350"><a href="/gostd/go/token/token.go.html#3889823">IDENT</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869359">case</span>&nbsp;<span class="op" id="5869364">*</span><span class="ident" id="5869365"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5869368">.</span><span class="ident" id="5869369"><a href="/gostd/go/ast/ast.go.html#3800698">BasicLit</a></span><span class="op" id="5869377">:</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869382"><a href="/gostd/go/printer/printer.go.html#5868039">data</a></span>&nbsp;<span class="op" id="5869387">=</span>&nbsp;<span class="ident" id="5869389"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5869390">.</span><span class="ident" id="5869391"><a href="/gostd/go/ast/ast.go.html#3800851">Value</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869400"><a href="/gostd/go/printer/printer.go.html#5868057">isLit</a></span>&nbsp;<span class="op" id="5869406">=</span>&nbsp;<span class="builtintype" id="5869408">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869416"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span>&nbsp;<span class="op" id="5869428">=</span>&nbsp;<span class="builtintype" id="5869430">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869438"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869439">.</span><span class="ident" id="5869440"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5869448">=</span>&nbsp;<span class="ident" id="5869450"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5869451">.</span><span class="ident" id="5869452"><a href="/gostd/go/ast/ast.go.html#3800761">Kind</a></span><br>
<span class="lineno"></span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869460">case</span>&nbsp;<span class="ident" id="5869465"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5869470">.</span><span class="ident" id="5869471"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="5869476">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869481">s</span>&nbsp;<span class="op" id="5869483">:=</span>&nbsp;<span class="ident" id="5869486"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5869487">.</span><span class="ident" id="5869488"><a href="/gostd/go/token/token.go.html#3892778">String</a></span><span class="op" id="5869494">(</span><span class="op" id="5869495">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869500">if</span>&nbsp;<span class="ident" id="5869503"><a href="/gostd/go/printer/printer.go.html#5866964">mayCombine</a></span><span class="op" id="5869513">(</span><span class="ident" id="5869514"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869515">.</span><span class="ident" id="5869516"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span><span class="op" id="5869523">,</span>&nbsp;<span class="ident" id="5869525"><a href="/gostd/go/printer/printer.go.html#5869481">s</a></span><span class="op" id="5869526">[</span><span class="num" id="5869527">0</span><span class="op" id="5869528">]</span><span class="op" id="5869529">)</span>&nbsp;<span class="op" id="5869531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869537">//&nbsp;the&nbsp;previous&nbsp;and&nbsp;the&nbsp;current&nbsp;token&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869587">//&nbsp;separated&nbsp;by&nbsp;a&nbsp;blank&nbsp;otherwise&nbsp;they&nbsp;combine</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869638">//&nbsp;into&nbsp;a&nbsp;different&nbsp;incorrect&nbsp;token&nbsp;sequence</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869687">//&nbsp;(except&nbsp;for&nbsp;token.INT&nbsp;followed&nbsp;by&nbsp;a&nbsp;&#39;.&#39;&nbsp;this</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869739">//&nbsp;should&nbsp;never&nbsp;happen&nbsp;because&nbsp;it&nbsp;is&nbsp;taken&nbsp;care</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869791">//&nbsp;of&nbsp;via&nbsp;binary&nbsp;expression&nbsp;formatting)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5869835">if</span>&nbsp;<span class="builtinfunc" id="5869838">len</span><span class="op" id="5869841">(</span><span class="ident" id="5869842"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869843">.</span><span class="ident" id="5869844"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5869849">)</span>&nbsp;<span class="op" id="5869851">!=</span>&nbsp;<span class="num" id="5869854">0</span>&nbsp;<span class="op" id="5869856">{</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869863"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869864">.</span><span class="ident" id="5869865"><a href="/gostd/go/printer/printer.go.html#5845789">internalError</a></span><span class="op" id="5869878">(</span><span class="string" id="5869879">&#34;whitespace&nbsp;buffer&nbsp;not&nbsp;empty&#34;</span><span class="op" id="5869908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5869914">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869920"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869921">.</span><span class="ident" id="5869922"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span>&nbsp;<span class="op" id="5869928">=</span>&nbsp;<span class="ident" id="5869930"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869931">.</span><span class="ident" id="5869932"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5869937">[</span><span class="num" id="5869938">0</span><span class="op" id="5869939">:</span><span class="num" id="5869940">1</span><span class="op" id="5869941">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869947"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5869948">.</span><span class="ident" id="5869949"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5869954">[</span><span class="num" id="5869955">0</span><span class="op" id="5869956">]</span>&nbsp;<span class="op" id="5869958">=</span>&nbsp;<span class="string" id="5869960">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5869967">}</span><br>
<span class="lineno">915</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5869972"><a href="/gostd/go/printer/printer.go.html#5868039">data</a></span>&nbsp;<span class="op" id="5869977">=</span>&nbsp;<span class="ident" id="5869979"><a href="/gostd/go/printer/printer.go.html#5869481">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5869984">//&nbsp;some&nbsp;keywords&nbsp;followed&nbsp;by&nbsp;a&nbsp;newline&nbsp;imply&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870044">switch</span>&nbsp;<span class="ident" id="5870051"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span>&nbsp;<span class="op" id="5870053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870058">case</span>&nbsp;<span class="ident" id="5870063"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870068">.</span><span class="ident" id="5870069"><a href="/gostd/go/token/token.go.html#3890750">BREAK</a></span><span class="op" id="5870074">,</span>&nbsp;<span class="ident" id="5870076"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870081">.</span><span class="ident" id="5870082"><a href="/gostd/go/token/token.go.html#3890776">CONTINUE</a></span><span class="op" id="5870090">,</span>&nbsp;<span class="ident" id="5870092"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870097">.</span><span class="ident" id="5870098"><a href="/gostd/go/token/token.go.html#3890809">FALLTHROUGH</a></span><span class="op" id="5870109">,</span>&nbsp;<span class="ident" id="5870111"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870116">.</span><span class="ident" id="5870117"><a href="/gostd/go/token/token.go.html#3890889">RETURN</a></span><span class="op" id="5870123">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870129"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870134">.</span><span class="ident" id="5870135"><a href="/gostd/go/token/token.go.html#3890387">INC</a></span><span class="op" id="5870138">,</span>&nbsp;<span class="ident" id="5870140"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870145">.</span><span class="ident" id="5870146"><a href="/gostd/go/token/token.go.html#3890400">DEC</a></span><span class="op" id="5870149">,</span>&nbsp;<span class="ident" id="5870151"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870156">.</span><span class="ident" id="5870157"><a href="/gostd/go/token/token.go.html#3890629">RPAREN</a></span><span class="op" id="5870163">,</span>&nbsp;<span class="ident" id="5870165"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870170">.</span><span class="ident" id="5870171"><a href="/gostd/go/token/token.go.html#3890645">RBRACK</a></span><span class="op" id="5870177">,</span>&nbsp;<span class="ident" id="5870179"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870184">.</span><span class="ident" id="5870185"><a href="/gostd/go/token/token.go.html#3890661">RBRACE</a></span><span class="op" id="5870191">:</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870197"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span>&nbsp;<span class="op" id="5870209">=</span>&nbsp;<span class="builtintype" id="5870211">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5870219">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870224"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870225">.</span><span class="ident" id="5870226"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5870234">=</span>&nbsp;<span class="ident" id="5870236"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870241">case</span>&nbsp;<span class="ident" id="5870246"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870251">.</span><span class="ident" id="5870252"><a href="/gostd/go/token/position.go.html#3875795">Pos</a></span><span class="op" id="5870255">:</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870260">if</span>&nbsp;<span class="ident" id="5870263"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5870264">.</span><span class="ident" id="5870265"><a href="/gostd/go/token/position.go.html#3876151">IsValid</a></span><span class="op" id="5870272">(</span><span class="op" id="5870273">)</span>&nbsp;<span class="op" id="5870275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870281"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870282">.</span><span class="ident" id="5870283"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span>&nbsp;<span class="op" id="5870287">=</span>&nbsp;<span class="ident" id="5870289"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870290">.</span><span class="ident" id="5870291"><a href="/gostd/go/printer/printer.go.html#5848425">posFor</a></span><span class="op" id="5870297">(</span><span class="ident" id="5870298"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><span class="op" id="5870299">)</span>&nbsp;<span class="comment" id="5870301">//&nbsp;accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5870338">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870343">continue</span><br>
<span class="lineno"></span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870355">case</span>&nbsp;<span class="builtintype" id="5870360">string</span><span class="op" id="5870366">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870371">//&nbsp;incorrect&nbsp;AST&nbsp;-&nbsp;print&nbsp;error&nbsp;message</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870413"><a href="/gostd/go/printer/printer.go.html#5868039">data</a></span>&nbsp;<span class="op" id="5870418">=</span>&nbsp;<span class="ident" id="5870420"><a href="/gostd/go/printer/printer.go.html#5868409">x</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870425"><a href="/gostd/go/printer/printer.go.html#5868057">isLit</a></span>&nbsp;<span class="op" id="5870431">=</span>&nbsp;<span class="builtintype" id="5870433">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870441"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span>&nbsp;<span class="op" id="5870453">=</span>&nbsp;<span class="builtintype" id="5870455">true</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870463"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870464">.</span><span class="ident" id="5870465"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span>&nbsp;<span class="op" id="5870473">=</span>&nbsp;<span class="ident" id="5870475"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5870480">.</span><span class="ident" id="5870481"><a href="/gostd/go/token/token.go.html#3889908">STRING</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870491">default</span><span class="op" id="5870498">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870503"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5870506">.</span><span class="ident" id="5870507"><a href="/gostd/fmt/print.go.html#2143118">Fprintf</a></span><span class="op" id="5870514">(</span><span class="ident" id="5870515"><a href="/gostd/go/printer/printer.go.html#5842761">os</a></span><span class="op" id="5870517">.</span><span class="ident" id="5870518"><a href="/gostd/os/file.go.html#2441872">Stderr</a></span><span class="op" id="5870524">,</span>&nbsp;<span class="string" id="5870526">&#34;print:&nbsp;unsupported&nbsp;argument&nbsp;%v&nbsp;(%T)\n&#34;</span><span class="op" id="5870565">,</span>&nbsp;<span class="ident" id="5870567"><a href="/gostd/go/printer/printer.go.html#5867974">arg</a></span><span class="op" id="5870570">,</span>&nbsp;<span class="ident" id="5870572"><a href="/gostd/go/printer/printer.go.html#5867974">arg</a></span><span class="op" id="5870575">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5870580">panic</span><span class="op" id="5870585">(</span><span class="string" id="5870586">&#34;go/printer&nbsp;type&#34;</span><span class="op" id="5870603">)</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5870607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870611">//&nbsp;data&nbsp;!=&nbsp;&#34;&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870628">next</span>&nbsp;<span class="op" id="5870633">:=</span>&nbsp;<span class="ident" id="5870636"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870637">.</span><span class="ident" id="5870638"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span>&nbsp;<span class="comment" id="5870642">//&nbsp;estimated/accurate&nbsp;position&nbsp;of&nbsp;next&nbsp;item</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870688">wroteNewline</span><span class="op" id="5870700">,</span>&nbsp;<span class="ident" id="5870702">droppedFF</span>&nbsp;<span class="op" id="5870712">:=</span>&nbsp;<span class="ident" id="5870715"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870716">.</span><span class="ident" id="5870717"><a href="/gostd/go/printer/printer.go.html#5871758">flush</a></span><span class="op" id="5870722">(</span><span class="ident" id="5870723"><a href="/gostd/go/printer/printer.go.html#5870628">next</a></span><span class="op" id="5870727">,</span>&nbsp;<span class="ident" id="5870729"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870730">.</span><span class="ident" id="5870731"><a href="/gostd/go/printer/printer.go.html#5844148">lastTok</a></span><span class="op" id="5870738">)</span><br>
<span class="lineno">945</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870743">//&nbsp;intersperse&nbsp;extra&nbsp;newlines&nbsp;if&nbsp;present&nbsp;in&nbsp;the&nbsp;source&nbsp;and</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870804">//&nbsp;if&nbsp;they&nbsp;don&#39;t&nbsp;cause&nbsp;extra&nbsp;semicolons&nbsp;(don&#39;t&nbsp;do&nbsp;this&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870864">//&nbsp;flush&nbsp;as&nbsp;it&nbsp;will&nbsp;cause&nbsp;extra&nbsp;newlines&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;file)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5870929">if</span>&nbsp;<span class="op" id="5870932">!</span><span class="ident" id="5870933"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870934">.</span><span class="ident" id="5870935"><a href="/gostd/go/printer/printer.go.html#5844079">impliedSemi</a></span>&nbsp;<span class="op" id="5870947">{</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5870952">n</span>&nbsp;<span class="op" id="5870954">:=</span>&nbsp;<span class="ident" id="5870957"><a href="/gostd/go/printer/printer.go.html#5866883">nlimit</a></span><span class="op" id="5870963">(</span><span class="ident" id="5870964"><a href="/gostd/go/printer/printer.go.html#5870628">next</a></span><span class="op" id="5870968">.</span><span class="ident" id="5870969"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span>&nbsp;<span class="op" id="5870974">-</span>&nbsp;<span class="ident" id="5870976"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5870977">.</span><span class="ident" id="5870978"><a href="/gostd/go/printer/printer.go.html#5844690">pos</a></span><span class="op" id="5870981">.</span><span class="ident" id="5870982"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="5870986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5870991">//&nbsp;don&#39;t&nbsp;exceed&nbsp;maxNewlines&nbsp;if&nbsp;we&nbsp;already&nbsp;wrote&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5871046">if</span>&nbsp;<span class="ident" id="5871049"><a href="/gostd/go/printer/printer.go.html#5870688">wroteNewline</a></span>&nbsp;<span class="op" id="5871062">&amp;&amp;</span>&nbsp;<span class="ident" id="5871065"><a href="/gostd/go/printer/printer.go.html#5870952">n</a></span>&nbsp;<span class="op" id="5871067">==</span>&nbsp;<span class="ident" id="5871070"><a href="/gostd/go/printer/printer.go.html#5842829">maxNewlines</a></span>&nbsp;<span class="op" id="5871082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871088"><a href="/gostd/go/printer/printer.go.html#5870952">n</a></span>&nbsp;<span class="op" id="5871090">=</span>&nbsp;<span class="ident" id="5871092"><a href="/gostd/go/printer/printer.go.html#5842829">maxNewlines</a></span>&nbsp;<span class="op" id="5871104">-</span>&nbsp;<span class="num" id="5871106">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871111">}</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5871116">if</span>&nbsp;<span class="ident" id="5871119"><a href="/gostd/go/printer/printer.go.html#5870952">n</a></span>&nbsp;<span class="op" id="5871121">&gt;</span>&nbsp;<span class="num" id="5871123">0</span>&nbsp;<span class="op" id="5871125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871131">ch</span>&nbsp;<span class="op" id="5871134">:=</span>&nbsp;<span class="builtintype" id="5871137">byte</span><span class="op" id="5871141">(</span><span class="string" id="5871142">&#39;\n&#39;</span><span class="op" id="5871146">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5871152">if</span>&nbsp;<span class="ident" id="5871155"><a href="/gostd/go/printer/printer.go.html#5870702">droppedFF</a></span>&nbsp;<span class="op" id="5871165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871172"><a href="/gostd/go/printer/printer.go.html#5871131">ch</a></span>&nbsp;<span class="op" id="5871175">=</span>&nbsp;<span class="string" id="5871177">&#39;\f&#39;</span>&nbsp;<span class="comment" id="5871182">//&nbsp;use&nbsp;formfeed&nbsp;since&nbsp;we&nbsp;dropped&nbsp;one&nbsp;before</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871230">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871236"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871237">.</span><span class="ident" id="5871238"><a href="/gostd/go/printer/printer.go.html#5849738">writeByte</a></span><span class="op" id="5871247">(</span><span class="ident" id="5871248"><a href="/gostd/go/printer/printer.go.html#5871131">ch</a></span><span class="op" id="5871250">,</span>&nbsp;<span class="ident" id="5871252"><a href="/gostd/go/printer/printer.go.html#5870952">n</a></span><span class="op" id="5871253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871259"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span>&nbsp;<span class="op" id="5871271">=</span>&nbsp;<span class="builtintype" id="5871273">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871286">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">965</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5871291">//&nbsp;the&nbsp;next&nbsp;token&nbsp;starts&nbsp;now&nbsp;-&nbsp;record&nbsp;its&nbsp;line&nbsp;number&nbsp;if&nbsp;requested</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5871360">if</span>&nbsp;<span class="ident" id="5871363"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871364">.</span><span class="ident" id="5871365"><a href="/gostd/go/printer/printer.go.html#5844882">linePtr</a></span>&nbsp;<span class="op" id="5871373">!=</span>&nbsp;<span class="builtintype" id="5871376">nil</span>&nbsp;<span class="op" id="5871380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871385">*</span><span class="ident" id="5871386"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871387">.</span><span class="ident" id="5871388"><a href="/gostd/go/printer/printer.go.html#5844882">linePtr</a></span>&nbsp;<span class="op" id="5871396">=</span>&nbsp;<span class="ident" id="5871398"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871399">.</span><span class="ident" id="5871400"><a href="/gostd/go/printer/printer.go.html#5844756">out</a></span><span class="op" id="5871403">.</span><span class="ident" id="5871404"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871412"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871413">.</span><span class="ident" id="5871414"><a href="/gostd/go/printer/printer.go.html#5844882">linePtr</a></span>&nbsp;<span class="op" id="5871422">=</span>&nbsp;<span class="builtintype" id="5871424">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871430">}</span><br>
<span class="lineno">970</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871435"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871436">.</span><span class="ident" id="5871437"><a href="/gostd/go/printer/printer.go.html#5850706">writeString</a></span><span class="op" id="5871448">(</span><span class="ident" id="5871449"><a href="/gostd/go/printer/printer.go.html#5870628">next</a></span><span class="op" id="5871453">,</span>&nbsp;<span class="ident" id="5871455"><a href="/gostd/go/printer/printer.go.html#5868039">data</a></span><span class="op" id="5871459">,</span>&nbsp;<span class="ident" id="5871461"><a href="/gostd/go/printer/printer.go.html#5868057">isLit</a></span><span class="op" id="5871466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871470"><a href="/gostd/go/printer/printer.go.html#5867925">p</a></span><span class="op" id="5871471">.</span><span class="ident" id="5871472"><a href="/gostd/go/printer/printer.go.html#5844079">impliedSemi</a></span>&nbsp;<span class="op" id="5871484">=</span>&nbsp;<span class="ident" id="5871486"><a href="/gostd/go/printer/printer.go.html#5868074">impliedSemi</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871499">}</span><br>
<span class="lineno"></span><span class="op" id="5871501">}</span><br>
<span class="lineno">975</span><br>
<span class="lineno"></span><span class="comment" id="5871504">//&nbsp;flush&nbsp;prints&nbsp;any&nbsp;pending&nbsp;comments&nbsp;and&nbsp;whitespace&nbsp;occurring&nbsp;textually</span><br>
<span class="lineno"></span><span class="comment" id="5871576">//&nbsp;before&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;next&nbsp;token&nbsp;tok.&nbsp;The&nbsp;flush&nbsp;result&nbsp;indicates</span><br>
<span class="lineno"></span><span class="comment" id="5871649">//&nbsp;if&nbsp;a&nbsp;newline&nbsp;was&nbsp;written&nbsp;or&nbsp;if&nbsp;a&nbsp;formfeed&nbsp;was&nbsp;dropped&nbsp;from&nbsp;the&nbsp;whitespace</span><br>
<span class="lineno"></span><span class="comment" id="5871726">//&nbsp;buffer.</span><br>
<span class="lineno">980</span><span class="comment" id="5871737">//</span><br>
<span class="lineno"></span><span class="keyword" id="5871740">func</span>&nbsp;<span class="op" id="5871745">(</span><span class="ident" id="5871746">p</span>&nbsp;<span class="op" id="5871748">*</span><span class="ident" id="5871749"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5871756">)</span>&nbsp;<span class="ident" id="5871758">flush</span><span class="op" id="5871763">(</span><span class="ident" id="5871764">next</span>&nbsp;<span class="ident" id="5871769"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5871774">.</span><span class="ident" id="5871775"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5871783">,</span>&nbsp;<span class="ident" id="5871785">tok</span>&nbsp;<span class="ident" id="5871789"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5871794">.</span><span class="ident" id="5871795"><a href="/gostd/go/token/token.go.html#3889622">Token</a></span><span class="op" id="5871800">)</span>&nbsp;<span class="op" id="5871802">(</span><span class="ident" id="5871803">wroteNewline</span><span class="op" id="5871815">,</span>&nbsp;<span class="ident" id="5871817">droppedFF</span>&nbsp;<span class="builtintype" id="5871827">bool</span><span class="op" id="5871831">)</span>&nbsp;<span class="op" id="5871833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5871836">if</span>&nbsp;<span class="ident" id="5871839"><a href="/gostd/go/printer/printer.go.html#5871746">p</a></span><span class="op" id="5871840">.</span><span class="ident" id="5871841"><a href="/gostd/go/printer/printer.go.html#5847174">commentBefore</a></span><span class="op" id="5871854">(</span><span class="ident" id="5871855"><a href="/gostd/go/printer/printer.go.html#5871764">next</a></span><span class="op" id="5871859">)</span>&nbsp;<span class="op" id="5871861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5871865">//&nbsp;if&nbsp;there&nbsp;are&nbsp;comments&nbsp;before&nbsp;the&nbsp;next&nbsp;item,&nbsp;intersperse&nbsp;them</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5871931"><a href="/gostd/go/printer/printer.go.html#5871803">wroteNewline</a></span><span class="op" id="5871943">,</span>&nbsp;<span class="ident" id="5871945"><a href="/gostd/go/printer/printer.go.html#5871817">droppedFF</a></span>&nbsp;<span class="op" id="5871955">=</span>&nbsp;<span class="ident" id="5871957"><a href="/gostd/go/printer/printer.go.html#5871746">p</a></span><span class="op" id="5871958">.</span><span class="ident" id="5871959"><a href="/gostd/go/printer/printer.go.html#5864106">intersperseComments</a></span><span class="op" id="5871978">(</span><span class="ident" id="5871979"><a href="/gostd/go/printer/printer.go.html#5871764">next</a></span><span class="op" id="5871983">,</span>&nbsp;<span class="ident" id="5871985"><a href="/gostd/go/printer/printer.go.html#5871785">tok</a></span><span class="op" id="5871988">)</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5871991">}</span>&nbsp;<span class="keyword" id="5871993">else</span>&nbsp;<span class="op" id="5871998">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872002">//&nbsp;otherwise,&nbsp;write&nbsp;any&nbsp;leftover&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872048"><a href="/gostd/go/printer/printer.go.html#5871746">p</a></span><span class="op" id="5872049">.</span><span class="ident" id="5872050"><a href="/gostd/go/printer/printer.go.html#5865543">writeWhitespace</a></span><span class="op" id="5872065">(</span><span class="builtinfunc" id="5872066">len</span><span class="op" id="5872069">(</span><span class="ident" id="5872070"><a href="/gostd/go/printer/printer.go.html#5871746">p</a></span><span class="op" id="5872071">.</span><span class="ident" id="5872072"><a href="/gostd/go/printer/printer.go.html#5844315">wsbuf</a></span><span class="op" id="5872077">)</span><span class="op" id="5872078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5872081">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872084">return</span><br>
<span class="lineno">990</span><span class="op" id="5872091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5872094">//&nbsp;getNode&nbsp;returns&nbsp;the&nbsp;ast.CommentGroup&nbsp;associated&nbsp;with&nbsp;n,&nbsp;if&nbsp;any.</span><br>
<span class="lineno"></span><span class="keyword" id="5872161">func</span>&nbsp;<span class="ident" id="5872166">getDoc</span><span class="op" id="5872172">(</span><span class="ident" id="5872173">n</span>&nbsp;<span class="ident" id="5872175"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872178">.</span><span class="ident" id="5872179"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5872183">)</span>&nbsp;<span class="op" id="5872185">*</span><span class="ident" id="5872186"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872189">.</span><span class="ident" id="5872190"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span>&nbsp;<span class="op" id="5872203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872206">switch</span>&nbsp;<span class="ident" id="5872213">n</span>&nbsp;<span class="op" id="5872215">:=</span>&nbsp;<span class="ident" id="5872218"><a href="/gostd/go/printer/printer.go.html#5872173">n</a></span><span class="op" id="5872219">.</span><span class="op" id="5872220">(</span><span class="keyword" id="5872221">type</span><span class="op" id="5872225">)</span>&nbsp;<span class="op" id="5872227">{</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872230">case</span>&nbsp;<span class="op" id="5872235">*</span><span class="ident" id="5872236"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872239">.</span><span class="ident" id="5872240"><a href="/gostd/go/ast/ast.go.html#3798258">Field</a></span><span class="op" id="5872245">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872249">return</span>&nbsp;<span class="ident" id="5872256"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872257">.</span><span class="ident" id="5872258"><a href="/gostd/go/ast/ast.go.html#3798274">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872263">case</span>&nbsp;<span class="op" id="5872268">*</span><span class="ident" id="5872269"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872272">.</span><span class="ident" id="5872273"><a href="/gostd/go/ast/ast.go.html#3819609">ImportSpec</a></span><span class="op" id="5872283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872287">return</span>&nbsp;<span class="ident" id="5872294"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872295">.</span><span class="ident" id="5872296"><a href="/gostd/go/ast/ast.go.html#3819631">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872301">case</span>&nbsp;<span class="op" id="5872306">*</span><span class="ident" id="5872307"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872310">.</span><span class="ident" id="5872311"><a href="/gostd/go/ast/ast.go.html#3820033">ValueSpec</a></span><span class="op" id="5872320">:</span><br>
<span class="lineno">1000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872324">return</span>&nbsp;<span class="ident" id="5872331"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872332">.</span><span class="ident" id="5872333"><a href="/gostd/go/ast/ast.go.html#3820054">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872338">case</span>&nbsp;<span class="op" id="5872343">*</span><span class="ident" id="5872344"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872347">.</span><span class="ident" id="5872348"><a href="/gostd/go/ast/ast.go.html#3820391">TypeSpec</a></span><span class="op" id="5872356">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872360">return</span>&nbsp;<span class="ident" id="5872367"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872368">.</span><span class="ident" id="5872369"><a href="/gostd/go/ast/ast.go.html#3820411">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872374">case</span>&nbsp;<span class="op" id="5872379">*</span><span class="ident" id="5872380"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872383">.</span><span class="ident" id="5872384"><a href="/gostd/go/ast/ast.go.html#3822162">GenDecl</a></span><span class="op" id="5872391">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872395">return</span>&nbsp;<span class="ident" id="5872402"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872403">.</span><span class="ident" id="5872404"><a href="/gostd/go/ast/ast.go.html#3822181">Doc</a></span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872409">case</span>&nbsp;<span class="op" id="5872414">*</span><span class="ident" id="5872415"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872418">.</span><span class="ident" id="5872419"><a href="/gostd/go/ast/ast.go.html#3822503">FuncDecl</a></span><span class="op" id="5872427">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872431">return</span>&nbsp;<span class="ident" id="5872438"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872439">.</span><span class="ident" id="5872440"><a href="/gostd/go/ast/ast.go.html#3822523">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872445">case</span>&nbsp;<span class="op" id="5872450">*</span><span class="ident" id="5872451"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872454">.</span><span class="ident" id="5872455"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5872459">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872463">return</span>&nbsp;<span class="ident" id="5872470"><a href="/gostd/go/printer/printer.go.html#5872213">n</a></span><span class="op" id="5872471">.</span><span class="ident" id="5872472"><a href="/gostd/go/ast/ast.go.html#3823884">Doc</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5872477">}</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872480">return</span>&nbsp;<span class="builtintype" id="5872487">nil</span><br>
<span class="lineno"></span><span class="op" id="5872491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5872494">func</span>&nbsp;<span class="op" id="5872499">(</span><span class="ident" id="5872500">p</span>&nbsp;<span class="op" id="5872502">*</span><span class="ident" id="5872503"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><span class="op" id="5872510">)</span>&nbsp;<span class="ident" id="5872512">printNode</span><span class="op" id="5872521">(</span><span class="ident" id="5872522">node</span>&nbsp;<span class="keyword" id="5872527">interface</span><span class="op" id="5872536">{</span><span class="op" id="5872537">}</span><span class="op" id="5872538">)</span>&nbsp;<span class="builtintype" id="5872540">error</span>&nbsp;<span class="op" id="5872546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872549">//&nbsp;unpack&nbsp;*CommentedNode,&nbsp;if&nbsp;any</span><br>
<span class="lineno">1015</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872583">var</span>&nbsp;<span class="ident" id="5872587">comments</span>&nbsp;<span class="op" id="5872596">[</span><span class="op" id="5872597">]</span><span class="op" id="5872598">*</span><span class="ident" id="5872599"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872602">.</span><span class="ident" id="5872603"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872617">if</span>&nbsp;<span class="ident" id="5872620">cnode</span><span class="op" id="5872625">,</span>&nbsp;<span class="ident" id="5872627">ok</span>&nbsp;<span class="op" id="5872630">:=</span>&nbsp;<span class="ident" id="5872633"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span><span class="op" id="5872637">.</span><span class="op" id="5872638">(</span><span class="op" id="5872639">*</span><span class="ident" id="5872640"><a href="/gostd/go/printer/printer.go.html#5879256">CommentedNode</a></span><span class="op" id="5872653">)</span><span class="op" id="5872654">;</span>&nbsp;<span class="ident" id="5872656"><a href="/gostd/go/printer/printer.go.html#5872627">ok</a></span>&nbsp;<span class="op" id="5872659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872663"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span>&nbsp;<span class="op" id="5872668">=</span>&nbsp;<span class="ident" id="5872670"><a href="/gostd/go/printer/printer.go.html#5872620">cnode</a></span><span class="op" id="5872675">.</span><span class="ident" id="5872676"><a href="/gostd/go/printer/printer.go.html#5879280">Node</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872683"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span>&nbsp;<span class="op" id="5872692">=</span>&nbsp;<span class="ident" id="5872694"><a href="/gostd/go/printer/printer.go.html#5872620">cnode</a></span><span class="op" id="5872699">.</span><span class="ident" id="5872700"><a href="/gostd/go/printer/printer.go.html#5879361">Comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5872710">}</span><br>
<span class="lineno">1020</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872714">if</span>&nbsp;<span class="ident" id="5872717"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span>&nbsp;<span class="op" id="5872726">!=</span>&nbsp;<span class="builtintype" id="5872729">nil</span>&nbsp;<span class="op" id="5872733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872737">//&nbsp;commented&nbsp;node&nbsp;-&nbsp;restrict&nbsp;comment&nbsp;list&nbsp;to&nbsp;relevant&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872799">n</span><span class="op" id="5872800">,</span>&nbsp;<span class="ident" id="5872802">ok</span>&nbsp;<span class="op" id="5872805">:=</span>&nbsp;<span class="ident" id="5872808"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span><span class="op" id="5872812">.</span><span class="op" id="5872813">(</span><span class="ident" id="5872814"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5872817">.</span><span class="ident" id="5872818"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5872822">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872826">if</span>&nbsp;<span class="op" id="5872829">!</span><span class="ident" id="5872830"><a href="/gostd/go/printer/printer.go.html#5872802">ok</a></span>&nbsp;<span class="op" id="5872833">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5872838">goto</span>&nbsp;<span class="ident" id="5872843"><a href="/gostd/go/printer/printer.go.html#5874376">unsupported</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5872857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872861">beg</span>&nbsp;<span class="op" id="5872865">:=</span>&nbsp;<span class="ident" id="5872868"><a href="/gostd/go/printer/printer.go.html#5872799">n</a></span><span class="op" id="5872869">.</span><span class="ident" id="5872870"><a href="/gostd/go/ast/ast.go.html#3795032">Pos</a></span><span class="op" id="5872873">(</span><span class="op" id="5872874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5872878">end</span>&nbsp;<span class="op" id="5872882">:=</span>&nbsp;<span class="ident" id="5872885"><a href="/gostd/go/printer/printer.go.html#5872799">n</a></span><span class="op" id="5872886">.</span><span class="ident" id="5872887"><a href="/gostd/go/ast/ast.go.html#3795102">End</a></span><span class="op" id="5872890">(</span><span class="op" id="5872891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872895">//&nbsp;if&nbsp;the&nbsp;node&nbsp;has&nbsp;associated&nbsp;documentation,</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872942">//&nbsp;include&nbsp;that&nbsp;commentgroup&nbsp;in&nbsp;the&nbsp;range</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5872986">//&nbsp;(the&nbsp;comment&nbsp;list&nbsp;is&nbsp;sorted&nbsp;in&nbsp;the&nbsp;order</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873032">//&nbsp;of&nbsp;the&nbsp;comment&nbsp;appearance&nbsp;in&nbsp;the&nbsp;source&nbsp;code)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873083">if</span>&nbsp;<span class="ident" id="5873086">doc</span>&nbsp;<span class="op" id="5873090">:=</span>&nbsp;<span class="ident" id="5873093"><a href="/gostd/go/printer/printer.go.html#5872166">getDoc</a></span><span class="op" id="5873099">(</span><span class="ident" id="5873100"><a href="/gostd/go/printer/printer.go.html#5872799">n</a></span><span class="op" id="5873101">)</span><span class="op" id="5873102">;</span>&nbsp;<span class="ident" id="5873104"><a href="/gostd/go/printer/printer.go.html#5873086">doc</a></span>&nbsp;<span class="op" id="5873108">!=</span>&nbsp;<span class="builtintype" id="5873111">nil</span>&nbsp;<span class="op" id="5873115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873120"><a href="/gostd/go/printer/printer.go.html#5872861">beg</a></span>&nbsp;<span class="op" id="5873124">=</span>&nbsp;<span class="ident" id="5873126"><a href="/gostd/go/printer/printer.go.html#5873086">doc</a></span><span class="op" id="5873129">.</span><span class="ident" id="5873130"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="5873133">(</span><span class="op" id="5873134">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873138">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873142">//&nbsp;token.Pos&nbsp;values&nbsp;are&nbsp;global&nbsp;offsets,&nbsp;we&nbsp;can</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873191">//&nbsp;compare&nbsp;them&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873218">i</span>&nbsp;<span class="op" id="5873220">:=</span>&nbsp;<span class="num" id="5873223">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873227">for</span>&nbsp;<span class="ident" id="5873231"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span>&nbsp;<span class="op" id="5873233">&lt;</span>&nbsp;<span class="builtinfunc" id="5873235">len</span><span class="op" id="5873238">(</span><span class="ident" id="5873239"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span><span class="op" id="5873247">)</span>&nbsp;<span class="op" id="5873249">&amp;&amp;</span>&nbsp;<span class="ident" id="5873252"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span><span class="op" id="5873260">[</span><span class="ident" id="5873261"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span><span class="op" id="5873262">]</span><span class="op" id="5873263">.</span><span class="ident" id="5873264"><a href="/gostd/go/ast/ast.go.html#3796182">End</a></span><span class="op" id="5873267">(</span><span class="op" id="5873268">)</span>&nbsp;<span class="op" id="5873270">&lt;</span>&nbsp;<span class="ident" id="5873272"><a href="/gostd/go/printer/printer.go.html#5872861">beg</a></span>&nbsp;<span class="op" id="5873276">{</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873281"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span><span class="op" id="5873282">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873287">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873291">j</span>&nbsp;<span class="op" id="5873293">:=</span>&nbsp;<span class="ident" id="5873296"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873300">for</span>&nbsp;<span class="ident" id="5873304"><a href="/gostd/go/printer/printer.go.html#5873291">j</a></span>&nbsp;<span class="op" id="5873306">&lt;</span>&nbsp;<span class="builtinfunc" id="5873308">len</span><span class="op" id="5873311">(</span><span class="ident" id="5873312"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span><span class="op" id="5873320">)</span>&nbsp;<span class="op" id="5873322">&amp;&amp;</span>&nbsp;<span class="ident" id="5873325"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span><span class="op" id="5873333">[</span><span class="ident" id="5873334"><a href="/gostd/go/printer/printer.go.html#5873291">j</a></span><span class="op" id="5873335">]</span><span class="op" id="5873336">.</span><span class="ident" id="5873337"><a href="/gostd/go/ast/ast.go.html#3796116">Pos</a></span><span class="op" id="5873340">(</span><span class="op" id="5873341">)</span>&nbsp;<span class="op" id="5873343">&lt;</span>&nbsp;<span class="ident" id="5873345"><a href="/gostd/go/printer/printer.go.html#5872878">end</a></span>&nbsp;<span class="op" id="5873349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873354"><a href="/gostd/go/printer/printer.go.html#5873291">j</a></span><span class="op" id="5873355">++</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873364">if</span>&nbsp;<span class="ident" id="5873367"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span>&nbsp;<span class="op" id="5873369">&lt;</span>&nbsp;<span class="ident" id="5873371"><a href="/gostd/go/printer/printer.go.html#5873291">j</a></span>&nbsp;<span class="op" id="5873373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873378"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873379">.</span><span class="ident" id="5873380"><a href="/gostd/go/printer/printer.go.html#5845026">comments</a></span>&nbsp;<span class="op" id="5873389">=</span>&nbsp;<span class="ident" id="5873391"><a href="/gostd/go/printer/printer.go.html#5872587">comments</a></span><span class="op" id="5873399">[</span><span class="ident" id="5873400"><a href="/gostd/go/printer/printer.go.html#5873218">i</a></span><span class="op" id="5873401">:</span><span class="ident" id="5873402"><a href="/gostd/go/printer/printer.go.html#5873291">j</a></span><span class="op" id="5873403">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873407">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873410">}</span>&nbsp;<span class="keyword" id="5873412">else</span>&nbsp;<span class="keyword" id="5873417">if</span>&nbsp;<span class="ident" id="5873420">n</span><span class="op" id="5873421">,</span>&nbsp;<span class="ident" id="5873423">ok</span>&nbsp;<span class="op" id="5873426">:=</span>&nbsp;<span class="ident" id="5873429"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span><span class="op" id="5873433">.</span><span class="op" id="5873434">(</span><span class="op" id="5873435">*</span><span class="ident" id="5873436"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873439">.</span><span class="ident" id="5873440"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5873444">)</span><span class="op" id="5873445">;</span>&nbsp;<span class="ident" id="5873447"><a href="/gostd/go/printer/printer.go.html#5873423">ok</a></span>&nbsp;<span class="op" id="5873450">{</span><br>
<span class="lineno">1050</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873454">//&nbsp;use&nbsp;ast.File&nbsp;comments,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873489"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873490">.</span><span class="ident" id="5873491"><a href="/gostd/go/printer/printer.go.html#5845026">comments</a></span>&nbsp;<span class="op" id="5873500">=</span>&nbsp;<span class="ident" id="5873502"><a href="/gostd/go/printer/printer.go.html#5873420">n</a></span><span class="op" id="5873503">.</span><span class="ident" id="5873504"><a href="/gostd/go/ast/ast.go.html#3824296">Comments</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873518">//&nbsp;if&nbsp;there&nbsp;are&nbsp;no&nbsp;comments,&nbsp;use&nbsp;node&nbsp;comments</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873566"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873567">.</span><span class="ident" id="5873568"><a href="/gostd/go/printer/printer.go.html#5845077">useNodeComments</a></span>&nbsp;<span class="op" id="5873584">=</span>&nbsp;<span class="ident" id="5873586"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873587">.</span><span class="ident" id="5873588"><a href="/gostd/go/printer/printer.go.html#5845026">comments</a></span>&nbsp;<span class="op" id="5873597">==</span>&nbsp;<span class="builtintype" id="5873600">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873606">//&nbsp;get&nbsp;comments&nbsp;ready&nbsp;for&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873637"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873638">.</span><span class="ident" id="5873639"><a href="/gostd/go/printer/printer.go.html#5846539">nextComment</a></span><span class="op" id="5873650">(</span><span class="op" id="5873651">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1060</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873655">//&nbsp;format&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873671">switch</span>&nbsp;<span class="ident" id="5873678">n</span>&nbsp;<span class="op" id="5873680">:=</span>&nbsp;<span class="ident" id="5873683"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span><span class="op" id="5873687">.</span><span class="op" id="5873688">(</span><span class="keyword" id="5873689">type</span><span class="op" id="5873693">)</span>&nbsp;<span class="op" id="5873695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873698">case</span>&nbsp;<span class="ident" id="5873703"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873706">.</span><span class="ident" id="5873707"><a href="/gostd/go/ast/ast.go.html#3795238">Expr</a></span><span class="op" id="5873711">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873715"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873716">.</span><span class="ident" id="5873717"><a href="/gostd/go/printer/nodes.go.html#5824417">expr</a></span><span class="op" id="5873721">(</span><span class="ident" id="5873722"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5873723">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873726">case</span>&nbsp;<span class="ident" id="5873731"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873734">.</span><span class="ident" id="5873735"><a href="/gostd/go/ast/ast.go.html#3795334">Stmt</a></span><span class="op" id="5873739">:</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873743">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5873806">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873865">if</span>&nbsp;<span class="ident" id="5873868">_</span><span class="op" id="5873869">,</span>&nbsp;<span class="ident" id="5873871">ok</span>&nbsp;<span class="op" id="5873874">:=</span>&nbsp;<span class="ident" id="5873877"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5873878">.</span><span class="op" id="5873879">(</span><span class="op" id="5873880">*</span><span class="ident" id="5873881"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873884">.</span><span class="ident" id="5873885"><a href="/gostd/go/ast/ast.go.html#3811398">LabeledStmt</a></span><span class="op" id="5873896">)</span><span class="op" id="5873897">;</span>&nbsp;<span class="ident" id="5873899"><a href="/gostd/go/printer/printer.go.html#5873871">ok</a></span>&nbsp;<span class="op" id="5873902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873907"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873908">.</span><span class="ident" id="5873909"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5873916">=</span>&nbsp;<span class="num" id="5873918">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5873922">}</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873926"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873927">.</span><span class="ident" id="5873928"><a href="/gostd/go/printer/nodes.go.html#5828779">stmt</a></span><span class="op" id="5873932">(</span><span class="ident" id="5873933"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5873934">,</span>&nbsp;<span class="builtintype" id="5873936">false</span><span class="op" id="5873941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873944">case</span>&nbsp;<span class="ident" id="5873949"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873952">.</span><span class="ident" id="5873953"><a href="/gostd/go/ast/ast.go.html#3795432">Decl</a></span><span class="op" id="5873957">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873961"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873962">.</span><span class="ident" id="5873963"><a href="/gostd/go/printer/nodes.go.html#5840955">decl</a></span><span class="op" id="5873967">(</span><span class="ident" id="5873968"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5873969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5873972">case</span>&nbsp;<span class="ident" id="5873977"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5873980">.</span><span class="ident" id="5873981"><a href="/gostd/go/ast/ast.go.html#3819508">Spec</a></span><span class="op" id="5873985">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5873989"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5873990">.</span><span class="ident" id="5873991"><a href="/gostd/go/printer/nodes.go.html#5835429">spec</a></span><span class="op" id="5873995">(</span><span class="ident" id="5873996"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5873997">,</span>&nbsp;<span class="num" id="5873999">1</span><span class="op" id="5874000">,</span>&nbsp;<span class="builtintype" id="5874002">false</span><span class="op" id="5874007">)</span><br>
<span class="lineno">1075</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874010">case</span>&nbsp;<span class="op" id="5874015">[</span><span class="op" id="5874016">]</span><span class="ident" id="5874017"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5874020">.</span><span class="ident" id="5874021"><a href="/gostd/go/ast/ast.go.html#3795334">Stmt</a></span><span class="op" id="5874025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5874029">//&nbsp;A&nbsp;labeled&nbsp;statement&nbsp;will&nbsp;un-indent&nbsp;to&nbsp;position&nbsp;the&nbsp;label.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5874092">//&nbsp;Set&nbsp;p.indent&nbsp;to&nbsp;1&nbsp;so&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;indent&nbsp;&#34;underflow&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874151">for</span>&nbsp;<span class="ident" id="5874155">_</span><span class="op" id="5874156">,</span>&nbsp;<span class="ident" id="5874158">s</span>&nbsp;<span class="op" id="5874160">:=</span>&nbsp;<span class="keyword" id="5874163">range</span>&nbsp;<span class="ident" id="5874169"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span>&nbsp;<span class="op" id="5874171">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874176">if</span>&nbsp;<span class="ident" id="5874179">_</span><span class="op" id="5874180">,</span>&nbsp;<span class="ident" id="5874182">ok</span>&nbsp;<span class="op" id="5874185">:=</span>&nbsp;<span class="ident" id="5874188"><a href="/gostd/go/printer/printer.go.html#5874158">s</a></span><span class="op" id="5874189">.</span><span class="op" id="5874190">(</span><span class="op" id="5874191">*</span><span class="ident" id="5874192"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5874195">.</span><span class="ident" id="5874196"><a href="/gostd/go/ast/ast.go.html#3811398">LabeledStmt</a></span><span class="op" id="5874207">)</span><span class="op" id="5874208">;</span>&nbsp;<span class="ident" id="5874210"><a href="/gostd/go/printer/printer.go.html#5874182">ok</a></span>&nbsp;<span class="op" id="5874213">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874219"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5874220">.</span><span class="ident" id="5874221"><a href="/gostd/go/printer/printer.go.html#5843980">indent</a></span>&nbsp;<span class="op" id="5874228">=</span>&nbsp;<span class="num" id="5874230">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5874235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5874239">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874243"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5874244">.</span><span class="ident" id="5874245"><a href="/gostd/go/printer/nodes.go.html#5824821">stmtList</a></span><span class="op" id="5874253">(</span><span class="ident" id="5874254"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5874255">,</span>&nbsp;<span class="num" id="5874257">0</span><span class="op" id="5874258">,</span>&nbsp;<span class="builtintype" id="5874260">false</span><span class="op" id="5874265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874268">case</span>&nbsp;<span class="op" id="5874273">[</span><span class="op" id="5874274">]</span><span class="ident" id="5874275"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5874278">.</span><span class="ident" id="5874279"><a href="/gostd/go/ast/ast.go.html#3795432">Decl</a></span><span class="op" id="5874283">:</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874287"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5874288">.</span><span class="ident" id="5874289"><a href="/gostd/go/printer/nodes.go.html#5841459">declList</a></span><span class="op" id="5874297">(</span><span class="ident" id="5874298"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5874299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874302">case</span>&nbsp;<span class="op" id="5874307">*</span><span class="ident" id="5874308"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5874311">.</span><span class="ident" id="5874312"><a href="/gostd/go/ast/ast.go.html#3823869">File</a></span><span class="op" id="5874316">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874320"><a href="/gostd/go/printer/printer.go.html#5872500">p</a></span><span class="op" id="5874321">.</span><span class="ident" id="5874322"><a href="/gostd/go/printer/nodes.go.html#5842337">file</a></span><span class="op" id="5874326">(</span><span class="ident" id="5874327"><a href="/gostd/go/printer/printer.go.html#5873678">n</a></span><span class="op" id="5874328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874331">default</span><span class="op" id="5874338">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874342">goto</span>&nbsp;<span class="ident" id="5874347"><a href="/gostd/go/printer/printer.go.html#5874376">unsupported</a></span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5874360">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874364">return</span>&nbsp;<span class="builtintype" id="5874371">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="5874376">unsupported</span><span class="op" id="5874387">:</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5874390">return</span>&nbsp;<span class="ident" id="5874397"><a href="/gostd/go/printer/printer.go.html#5842726">fmt</a></span><span class="op" id="5874400">.</span><span class="ident" id="5874401"><a href="/gostd/fmt/print.go.html#2143886">Errorf</a></span><span class="op" id="5874407">(</span><span class="string" id="5874408">&#34;go/printer:&nbsp;unsupported&nbsp;node&nbsp;type&nbsp;%T&#34;</span><span class="op" id="5874446">,</span>&nbsp;<span class="ident" id="5874448"><a href="/gostd/go/printer/printer.go.html#5872522">node</a></span><span class="op" id="5874452">)</span><br>
<span class="lineno"></span><span class="op" id="5874454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5874457">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5874537">//&nbsp;Trimmer</span><br>
<span class="lineno">1100</span><br>
<span class="lineno"></span><span class="comment" id="5874549">//&nbsp;A&nbsp;trimmer&nbsp;is&nbsp;an&nbsp;io.Writer&nbsp;filter&nbsp;for&nbsp;stripping&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span><span class="comment" id="5874616">//&nbsp;characters,&nbsp;trailing&nbsp;blanks&nbsp;and&nbsp;tabs,&nbsp;and&nbsp;for&nbsp;converting&nbsp;formfeed</span><br>
<span class="lineno"></span><span class="comment" id="5874685">//&nbsp;and&nbsp;vtab&nbsp;characters&nbsp;into&nbsp;newlines&nbsp;and&nbsp;htabs&nbsp;(in&nbsp;case&nbsp;no&nbsp;tabwriter</span><br>
<span class="lineno"></span><span class="comment" id="5874754">//&nbsp;is&nbsp;used).&nbsp;Text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escape&nbsp;characters&nbsp;is&nbsp;passed</span><br>
<span class="lineno">1105</span><span class="comment" id="5874823">//&nbsp;through&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5874845">//</span><br>
<span class="lineno"></span><span class="keyword" id="5874848">type</span>&nbsp;<span class="ident" id="5874853">trimmer</span>&nbsp;<span class="keyword" id="5874861">struct</span>&nbsp;<span class="op" id="5874868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874871">output</span>&nbsp;<span class="ident" id="5874878"><a href="/gostd/go/printer/printer.go.html#5842755">io</a></span><span class="op" id="5874880">.</span><span class="ident" id="5874881"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874889">state</span>&nbsp;&nbsp;<span class="builtintype" id="5874896">int</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5874901">space</span>&nbsp;&nbsp;<span class="op" id="5874908">[</span><span class="op" id="5874909">]</span><span class="builtintype" id="5874910">byte</span><br>
<span class="lineno"></span><span class="op" id="5874915">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5874918">//&nbsp;trimmer&nbsp;is&nbsp;implemented&nbsp;as&nbsp;a&nbsp;state&nbsp;machine.</span><br>
<span class="lineno"></span><span class="comment" id="5874964">//&nbsp;It&nbsp;can&nbsp;be&nbsp;in&nbsp;one&nbsp;of&nbsp;the&nbsp;following&nbsp;states:</span><br>
<span class="lineno">1115</span><span class="keyword" id="5875009">const</span>&nbsp;<span class="op" id="5875015">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875018">inSpace</span>&nbsp;&nbsp;<span class="op" id="5875027">=</span>&nbsp;<span class="ident" id="5875029">iota</span>&nbsp;<span class="comment" id="5875034">//&nbsp;inside&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875051">inEscape</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875067">//&nbsp;inside&nbsp;text&nbsp;bracketed&nbsp;by&nbsp;tabwriter.Escapes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875114">inText</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875130">//&nbsp;inside&nbsp;text</span><br>
<span class="lineno"></span><span class="op" id="5875145">)</span><br>
<span class="lineno">1120</span><br>
<span class="lineno"></span><span class="keyword" id="5875148">func</span>&nbsp;<span class="op" id="5875153">(</span><span class="ident" id="5875154">p</span>&nbsp;<span class="op" id="5875156">*</span><span class="ident" id="5875157"><a href="/gostd/go/printer/printer.go.html#5874853">trimmer</a></span><span class="op" id="5875164">)</span>&nbsp;<span class="ident" id="5875166">resetSpace</span><span class="op" id="5875176">(</span><span class="op" id="5875177">)</span>&nbsp;<span class="op" id="5875179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875182"><a href="/gostd/go/printer/printer.go.html#5875154">p</a></span><span class="op" id="5875183">.</span><span class="ident" id="5875184"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5875190">=</span>&nbsp;<span class="ident" id="5875192"><a href="/gostd/go/printer/printer.go.html#5875018">inSpace</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875201"><a href="/gostd/go/printer/printer.go.html#5875154">p</a></span><span class="op" id="5875202">.</span><span class="ident" id="5875203"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span>&nbsp;<span class="op" id="5875209">=</span>&nbsp;<span class="ident" id="5875211"><a href="/gostd/go/printer/printer.go.html#5875154">p</a></span><span class="op" id="5875212">.</span><span class="ident" id="5875213"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span><span class="op" id="5875218">[</span><span class="num" id="5875219">0</span><span class="op" id="5875220">:</span><span class="num" id="5875221">0</span><span class="op" id="5875222">]</span><br>
<span class="lineno"></span><span class="op" id="5875224">}</span><br>
<span class="lineno">1125</span><br>
<span class="lineno"></span><span class="comment" id="5875227">//&nbsp;Design&nbsp;note:&nbsp;It&nbsp;is&nbsp;tempting&nbsp;to&nbsp;eliminate&nbsp;extra&nbsp;blanks&nbsp;occurring&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="5875297">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whitespace&nbsp;in&nbsp;this&nbsp;function&nbsp;as&nbsp;it&nbsp;could&nbsp;simplify&nbsp;some</span><br>
<span class="lineno"></span><span class="comment" id="5875367">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;blanks&nbsp;logic&nbsp;in&nbsp;the&nbsp;node&nbsp;printing&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5875435">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;However,&nbsp;this&nbsp;would&nbsp;mess&nbsp;up&nbsp;any&nbsp;formatting&nbsp;done&nbsp;by</span><br>
<span class="lineno">1130</span><span class="comment" id="5875502">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;tabwriter.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5875534">var</span>&nbsp;<span class="ident" id="5875538">aNewline</span>&nbsp;<span class="op" id="5875547">=</span>&nbsp;<span class="op" id="5875549">[</span><span class="op" id="5875550">]</span><span class="builtintype" id="5875551">byte</span><span class="op" id="5875555">(</span><span class="string" id="5875556">&#34;\n&#34;</span><span class="op" id="5875560">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5875563">func</span>&nbsp;<span class="op" id="5875568">(</span><span class="ident" id="5875569">p</span>&nbsp;<span class="op" id="5875571">*</span><span class="ident" id="5875572"><a href="/gostd/go/printer/printer.go.html#5874853">trimmer</a></span><span class="op" id="5875579">)</span>&nbsp;<span class="ident" id="5875581">Write</span><span class="op" id="5875586">(</span><span class="ident" id="5875587">data</span>&nbsp;<span class="op" id="5875592">[</span><span class="op" id="5875593">]</span><span class="builtintype" id="5875594">byte</span><span class="op" id="5875598">)</span>&nbsp;<span class="op" id="5875600">(</span><span class="ident" id="5875601">n</span>&nbsp;<span class="builtintype" id="5875603">int</span><span class="op" id="5875606">,</span>&nbsp;<span class="ident" id="5875608">err</span>&nbsp;<span class="builtintype" id="5875612">error</span><span class="op" id="5875617">)</span>&nbsp;<span class="op" id="5875619">{</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875622">//&nbsp;invariants:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875638">//&nbsp;p.state&nbsp;==&nbsp;inSpace:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875662">//&nbsp;&nbsp;&nbsp;&nbsp;p.space&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875687">//&nbsp;p.state&nbsp;==&nbsp;inEscape,&nbsp;inText:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5875720">//&nbsp;&nbsp;&nbsp;&nbsp;data[m:n]&nbsp;is&nbsp;unwritten</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875747">m</span>&nbsp;<span class="op" id="5875749">:=</span>&nbsp;<span class="num" id="5875752">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875755">var</span>&nbsp;<span class="ident" id="5875759">b</span>&nbsp;<span class="builtintype" id="5875761">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875767">for</span>&nbsp;<span class="ident" id="5875771"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5875772">,</span>&nbsp;<span class="ident" id="5875774"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5875776">=</span>&nbsp;<span class="keyword" id="5875778">range</span>&nbsp;<span class="ident" id="5875784"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span>&nbsp;<span class="op" id="5875789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875793">if</span>&nbsp;<span class="ident" id="5875796"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5875798">==</span>&nbsp;<span class="string" id="5875801">&#39;\v&#39;</span>&nbsp;<span class="op" id="5875806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875811"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5875813">=</span>&nbsp;<span class="string" id="5875815">&#39;\t&#39;</span>&nbsp;<span class="comment" id="5875820">//&nbsp;convert&nbsp;to&nbsp;htab</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5875841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875845">switch</span>&nbsp;<span class="ident" id="5875852"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5875853">.</span><span class="ident" id="5875854"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5875860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875864">case</span>&nbsp;<span class="ident" id="5875869"><a href="/gostd/go/printer/printer.go.html#5875018">inSpace</a></span><span class="op" id="5875876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875881">switch</span>&nbsp;<span class="ident" id="5875888"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5875890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875895">case</span>&nbsp;<span class="string" id="5875900">&#39;\t&#39;</span><span class="op" id="5875904">,</span>&nbsp;<span class="string" id="5875906">&#39;&nbsp;&#39;</span><span class="op" id="5875909">:</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875915"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5875916">.</span><span class="ident" id="5875917"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span>&nbsp;<span class="op" id="5875923">=</span>&nbsp;<span class="builtinfunc" id="5875925">append</span><span class="op" id="5875931">(</span><span class="ident" id="5875932"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5875933">.</span><span class="ident" id="5875934"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span><span class="op" id="5875939">,</span>&nbsp;<span class="ident" id="5875941"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span><span class="op" id="5875942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5875947">case</span>&nbsp;<span class="string" id="5875952">&#39;\n&#39;</span><span class="op" id="5875956">,</span>&nbsp;<span class="string" id="5875958">&#39;\f&#39;</span><span class="op" id="5875962">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5875968"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5875969">.</span><span class="ident" id="5875970"><a href="/gostd/go/printer/printer.go.html#5875166">resetSpace</a></span><span class="op" id="5875980">(</span><span class="op" id="5875981">)</span>&nbsp;<span class="comment" id="5875983">//&nbsp;discard&nbsp;trailing&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876013">_</span><span class="op" id="5876014">,</span>&nbsp;<span class="ident" id="5876016"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876020">=</span>&nbsp;<span class="ident" id="5876022"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876023">.</span><span class="ident" id="5876024"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876030">.</span><span class="ident" id="5876031"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876036">(</span><span class="ident" id="5876037"><a href="/gostd/go/printer/printer.go.html#5875538">aNewline</a></span><span class="op" id="5876045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876050">case</span>&nbsp;<span class="ident" id="5876055"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5876064">.</span><span class="ident" id="5876065"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5876071">:</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876077">_</span><span class="op" id="5876078">,</span>&nbsp;<span class="ident" id="5876080"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876084">=</span>&nbsp;<span class="ident" id="5876086"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876087">.</span><span class="ident" id="5876088"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876094">.</span><span class="ident" id="5876095"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876100">(</span><span class="ident" id="5876101"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876102">.</span><span class="ident" id="5876103"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span><span class="op" id="5876108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876114"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876115">.</span><span class="ident" id="5876116"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5876122">=</span>&nbsp;<span class="ident" id="5876124"><a href="/gostd/go/printer/printer.go.html#5875051">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876137"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span>&nbsp;<span class="op" id="5876139">=</span>&nbsp;<span class="ident" id="5876141"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span>&nbsp;<span class="op" id="5876143">+</span>&nbsp;<span class="num" id="5876145">1</span>&nbsp;<span class="comment" id="5876147">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876179">default</span><span class="op" id="5876186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876192">_</span><span class="op" id="5876193">,</span>&nbsp;<span class="ident" id="5876195"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876199">=</span>&nbsp;<span class="ident" id="5876201"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876202">.</span><span class="ident" id="5876203"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876209">.</span><span class="ident" id="5876210"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876215">(</span><span class="ident" id="5876216"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876217">.</span><span class="ident" id="5876218"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span><span class="op" id="5876223">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876229"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876230">.</span><span class="ident" id="5876231"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5876237">=</span>&nbsp;<span class="ident" id="5876239"><a href="/gostd/go/printer/printer.go.html#5875114">inText</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876250"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span>&nbsp;<span class="op" id="5876252">=</span>&nbsp;<span class="ident" id="5876254"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876263">case</span>&nbsp;<span class="ident" id="5876268"><a href="/gostd/go/printer/printer.go.html#5875051">inEscape</a></span><span class="op" id="5876276">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876281">if</span>&nbsp;<span class="ident" id="5876284"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5876286">==</span>&nbsp;<span class="ident" id="5876289"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5876298">.</span><span class="ident" id="5876299"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span>&nbsp;<span class="op" id="5876306">{</span><br>
<span class="lineno">1165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876312">_</span><span class="op" id="5876313">,</span>&nbsp;<span class="ident" id="5876315"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876319">=</span>&nbsp;<span class="ident" id="5876321"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876322">.</span><span class="ident" id="5876323"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876329">.</span><span class="ident" id="5876330"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876335">(</span><span class="ident" id="5876336"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876340">[</span><span class="ident" id="5876341"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span><span class="op" id="5876342">:</span><span class="ident" id="5876343"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5876344">]</span><span class="op" id="5876345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876351"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876352">.</span><span class="ident" id="5876353"><a href="/gostd/go/printer/printer.go.html#5875166">resetSpace</a></span><span class="op" id="5876363">(</span><span class="op" id="5876364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876373">case</span>&nbsp;<span class="ident" id="5876378"><a href="/gostd/go/printer/printer.go.html#5875114">inText</a></span><span class="op" id="5876384">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876389">switch</span>&nbsp;<span class="ident" id="5876396"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span>&nbsp;<span class="op" id="5876398">{</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876403">case</span>&nbsp;<span class="string" id="5876408">&#39;\t&#39;</span><span class="op" id="5876412">,</span>&nbsp;<span class="string" id="5876414">&#39;&nbsp;&#39;</span><span class="op" id="5876417">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876423">_</span><span class="op" id="5876424">,</span>&nbsp;<span class="ident" id="5876426"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876430">=</span>&nbsp;<span class="ident" id="5876432"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876433">.</span><span class="ident" id="5876434"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876440">.</span><span class="ident" id="5876441"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876446">(</span><span class="ident" id="5876447"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876451">[</span><span class="ident" id="5876452"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span><span class="op" id="5876453">:</span><span class="ident" id="5876454"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5876455">]</span><span class="op" id="5876456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876462"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876463">.</span><span class="ident" id="5876464"><a href="/gostd/go/printer/printer.go.html#5875166">resetSpace</a></span><span class="op" id="5876474">(</span><span class="op" id="5876475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876481"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876482">.</span><span class="ident" id="5876483"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span>&nbsp;<span class="op" id="5876489">=</span>&nbsp;<span class="builtinfunc" id="5876491">append</span><span class="op" id="5876497">(</span><span class="ident" id="5876498"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876499">.</span><span class="ident" id="5876500"><a href="/gostd/go/printer/printer.go.html#5874901">space</a></span><span class="op" id="5876505">,</span>&nbsp;<span class="ident" id="5876507"><a href="/gostd/go/printer/printer.go.html#5875759">b</a></span><span class="op" id="5876508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876513">case</span>&nbsp;<span class="string" id="5876518">&#39;\n&#39;</span><span class="op" id="5876522">,</span>&nbsp;<span class="string" id="5876524">&#39;\f&#39;</span><span class="op" id="5876528">:</span><br>
<span class="lineno">1175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876534">_</span><span class="op" id="5876535">,</span>&nbsp;<span class="ident" id="5876537"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876541">=</span>&nbsp;<span class="ident" id="5876543"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876544">.</span><span class="ident" id="5876545"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876551">.</span><span class="ident" id="5876552"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876557">(</span><span class="ident" id="5876558"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876562">[</span><span class="ident" id="5876563"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span><span class="op" id="5876564">:</span><span class="ident" id="5876565"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5876566">]</span><span class="op" id="5876567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876573"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876574">.</span><span class="ident" id="5876575"><a href="/gostd/go/printer/printer.go.html#5875166">resetSpace</a></span><span class="op" id="5876585">(</span><span class="op" id="5876586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876592">_</span><span class="op" id="5876593">,</span>&nbsp;<span class="ident" id="5876595"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876599">=</span>&nbsp;<span class="ident" id="5876601"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876602">.</span><span class="ident" id="5876603"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876609">.</span><span class="ident" id="5876610"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876615">(</span><span class="ident" id="5876616"><a href="/gostd/go/printer/printer.go.html#5875538">aNewline</a></span><span class="op" id="5876624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876629">case</span>&nbsp;<span class="ident" id="5876634"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5876643">.</span><span class="ident" id="5876644"><a href="/gostd/text/tabwriter/tabwriter.go.html#5520868">Escape</a></span><span class="op" id="5876650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876656">_</span><span class="op" id="5876657">,</span>&nbsp;<span class="ident" id="5876659"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876663">=</span>&nbsp;<span class="ident" id="5876665"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876666">.</span><span class="ident" id="5876667"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876673">.</span><span class="ident" id="5876674"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876679">(</span><span class="ident" id="5876680"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876684">[</span><span class="ident" id="5876685"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span><span class="op" id="5876686">:</span><span class="ident" id="5876687"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5876688">]</span><span class="op" id="5876689">)</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876695"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876696">.</span><span class="ident" id="5876697"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5876703">=</span>&nbsp;<span class="ident" id="5876705"><a href="/gostd/go/printer/printer.go.html#5875051">inEscape</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876718"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span>&nbsp;<span class="op" id="5876720">=</span>&nbsp;<span class="ident" id="5876722"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span>&nbsp;<span class="op" id="5876724">+</span>&nbsp;<span class="num" id="5876726">1</span>&nbsp;<span class="comment" id="5876728">//&nbsp;+1:&nbsp;skip&nbsp;tabwriter.Escape</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876764">default</span><span class="op" id="5876771">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5876776">panic</span><span class="op" id="5876781">(</span><span class="string" id="5876782">&#34;unreachable&#34;</span><span class="op" id="5876795">)</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876803">if</span>&nbsp;<span class="ident" id="5876806"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876810">!=</span>&nbsp;<span class="builtintype" id="5876813">nil</span>&nbsp;<span class="op" id="5876817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876822">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876831">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876834">}</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876837"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span>&nbsp;<span class="op" id="5876839">=</span>&nbsp;<span class="builtinfunc" id="5876841">len</span><span class="op" id="5876844">(</span><span class="ident" id="5876845"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876849">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876853">switch</span>&nbsp;<span class="ident" id="5876860"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876861">.</span><span class="ident" id="5876862"><a href="/gostd/go/printer/printer.go.html#5874889">state</a></span>&nbsp;<span class="op" id="5876868">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876871">case</span>&nbsp;<span class="ident" id="5876876"><a href="/gostd/go/printer/printer.go.html#5875051">inEscape</a></span><span class="op" id="5876884">,</span>&nbsp;<span class="ident" id="5876886"><a href="/gostd/go/printer/printer.go.html#5875114">inText</a></span><span class="op" id="5876892">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876896">_</span><span class="op" id="5876897">,</span>&nbsp;<span class="ident" id="5876899"><a href="/gostd/go/printer/printer.go.html#5875608">err</a></span>&nbsp;<span class="op" id="5876903">=</span>&nbsp;<span class="ident" id="5876905"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876906">.</span><span class="ident" id="5876907"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5876913">.</span><span class="ident" id="5876914"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5876919">(</span><span class="ident" id="5876920"><a href="/gostd/go/printer/printer.go.html#5875587">data</a></span><span class="op" id="5876924">[</span><span class="ident" id="5876925"><a href="/gostd/go/printer/printer.go.html#5875747">m</a></span><span class="op" id="5876926">:</span><span class="ident" id="5876927"><a href="/gostd/go/printer/printer.go.html#5875601">n</a></span><span class="op" id="5876928">]</span><span class="op" id="5876929">)</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5876933"><a href="/gostd/go/printer/printer.go.html#5875569">p</a></span><span class="op" id="5876934">.</span><span class="ident" id="5876935"><a href="/gostd/go/printer/printer.go.html#5875166">resetSpace</a></span><span class="op" id="5876945">(</span><span class="op" id="5876946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5876949">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5876953">return</span><br>
<span class="lineno"></span><span class="op" id="5876960">}</span><br>
<span class="lineno">1200</span><br>
<span class="lineno"></span><span class="comment" id="5876963">//&nbsp;----------------------------------------------------------------------------</span><br>
<span class="lineno"></span><span class="comment" id="5877043">//&nbsp;Public&nbsp;interface</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5877064">//&nbsp;A&nbsp;Mode&nbsp;value&nbsp;is&nbsp;a&nbsp;set&nbsp;of&nbsp;flags&nbsp;(or&nbsp;0).&nbsp;They&nbsp;control&nbsp;printing.</span><br>
<span class="lineno">1205</span><span class="keyword" id="5877129">type</span>&nbsp;<span class="ident" id="5877134">Mode</span>&nbsp;<span class="builtintype" id="5877139">uint</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5877145">const</span>&nbsp;<span class="op" id="5877151">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877154">RawFormat</span>&nbsp;<span class="ident" id="5877164"><a href="/gostd/go/printer/printer.go.html#5877134">Mode</a></span>&nbsp;<span class="op" id="5877169">=</span>&nbsp;<span class="num" id="5877171">1</span>&nbsp;<span class="op" id="5877173">&lt;&lt;</span>&nbsp;<span class="ident" id="5877176">iota</span>&nbsp;<span class="comment" id="5877181">//&nbsp;do&nbsp;not&nbsp;use&nbsp;a&nbsp;tabwriter;&nbsp;if&nbsp;set,&nbsp;UseSpaces&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877238">TabIndent</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5877265">//&nbsp;use&nbsp;tabs&nbsp;for&nbsp;indentation&nbsp;independent&nbsp;of&nbsp;UseSpaces</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877319">UseSpaces</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5877346">//&nbsp;use&nbsp;spaces&nbsp;instead&nbsp;of&nbsp;tabs&nbsp;for&nbsp;alignment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877391">SourcePos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5877418">//&nbsp;emit&nbsp;//line&nbsp;comments&nbsp;to&nbsp;preserve&nbsp;original&nbsp;source&nbsp;positions</span><br>
<span class="lineno"></span><span class="op" id="5877480">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5877483">//&nbsp;A&nbsp;Config&nbsp;node&nbsp;controls&nbsp;the&nbsp;output&nbsp;of&nbsp;Fprint.</span><br>
<span class="lineno">1215</span><span class="keyword" id="5877531">type</span>&nbsp;<span class="ident" id="5877536">Config</span>&nbsp;<span class="keyword" id="5877543">struct</span>&nbsp;<span class="op" id="5877550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877553">Mode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877562"><a href="/gostd/go/printer/printer.go.html#5877134">Mode</a></span>&nbsp;<span class="comment" id="5877567">//&nbsp;default:&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877582">Tabwidth</span>&nbsp;<span class="builtintype" id="5877591">int</span>&nbsp;&nbsp;<span class="comment" id="5877596">//&nbsp;default:&nbsp;8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877611">Indent</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5877620">int</span>&nbsp;&nbsp;<span class="comment" id="5877625">//&nbsp;default:&nbsp;0&nbsp;(all&nbsp;code&nbsp;is&nbsp;indented&nbsp;at&nbsp;least&nbsp;by&nbsp;this&nbsp;much)</span><br>
<span class="lineno"></span><span class="op" id="5877684">}</span><br>
<span class="lineno">1220</span><br>
<span class="lineno"></span><span class="comment" id="5877687">//&nbsp;fprint&nbsp;implements&nbsp;Fprint&nbsp;and&nbsp;takes&nbsp;a&nbsp;nodesSizes&nbsp;map&nbsp;for&nbsp;setting&nbsp;up&nbsp;the&nbsp;printer&nbsp;state.</span><br>
<span class="lineno"></span><span class="keyword" id="5877776">func</span>&nbsp;<span class="op" id="5877781">(</span><span class="ident" id="5877782">cfg</span>&nbsp;<span class="op" id="5877786">*</span><span class="ident" id="5877787"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="5877793">)</span>&nbsp;<span class="ident" id="5877795">fprint</span><span class="op" id="5877801">(</span><span class="ident" id="5877802">output</span>&nbsp;<span class="ident" id="5877809"><a href="/gostd/go/printer/printer.go.html#5842755">io</a></span><span class="op" id="5877811">.</span><span class="ident" id="5877812"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5877818">,</span>&nbsp;<span class="ident" id="5877820">fset</span>&nbsp;<span class="op" id="5877825">*</span><span class="ident" id="5877826"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5877831">.</span><span class="ident" id="5877832"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5877839">,</span>&nbsp;<span class="ident" id="5877841">node</span>&nbsp;<span class="keyword" id="5877846">interface</span><span class="op" id="5877855">{</span><span class="op" id="5877856">}</span><span class="op" id="5877857">,</span>&nbsp;<span class="ident" id="5877859">nodeSizes</span>&nbsp;<span class="keyword" id="5877869">map</span><span class="op" id="5877872">[</span><span class="ident" id="5877873"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5877876">.</span><span class="ident" id="5877877"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5877881">]</span><span class="builtintype" id="5877882">int</span><span class="op" id="5877885">)</span>&nbsp;<span class="op" id="5877887">(</span><span class="ident" id="5877888">err</span>&nbsp;<span class="builtintype" id="5877892">error</span><span class="op" id="5877897">)</span>&nbsp;<span class="op" id="5877899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5877902">//&nbsp;print&nbsp;node</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5877917">var</span>&nbsp;<span class="ident" id="5877921">p</span>&nbsp;<span class="ident" id="5877923"><a href="/gostd/go/printer/printer.go.html#5843809">printer</a></span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5877932"><a href="/gostd/go/printer/printer.go.html#5877921">p</a></span><span class="op" id="5877933">.</span><span class="ident" id="5877934"><a href="/gostd/go/printer/printer.go.html#5845465">init</a></span><span class="op" id="5877938">(</span><span class="ident" id="5877939"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5877942">,</span>&nbsp;<span class="ident" id="5877944"><a href="/gostd/go/printer/printer.go.html#5877820">fset</a></span><span class="op" id="5877948">,</span>&nbsp;<span class="ident" id="5877950"><a href="/gostd/go/printer/printer.go.html#5877859">nodeSizes</a></span><span class="op" id="5877959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5877962">if</span>&nbsp;<span class="ident" id="5877965"><a href="/gostd/go/printer/printer.go.html#5877888">err</a></span>&nbsp;<span class="op" id="5877969">=</span>&nbsp;<span class="ident" id="5877971"><a href="/gostd/go/printer/printer.go.html#5877921">p</a></span><span class="op" id="5877972">.</span><span class="ident" id="5877973"><a href="/gostd/go/printer/printer.go.html#5872512">printNode</a></span><span class="op" id="5877982">(</span><span class="ident" id="5877983"><a href="/gostd/go/printer/printer.go.html#5877841">node</a></span><span class="op" id="5877987">)</span><span class="op" id="5877988">;</span>&nbsp;<span class="ident" id="5877990"><a href="/gostd/go/printer/printer.go.html#5877888">err</a></span>&nbsp;<span class="op" id="5877994">!=</span>&nbsp;<span class="builtintype" id="5877997">nil</span>&nbsp;<span class="op" id="5878001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878005">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5878013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878016">//&nbsp;print&nbsp;outstanding&nbsp;comments</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878047"><a href="/gostd/go/printer/printer.go.html#5877921">p</a></span><span class="op" id="5878048">.</span><span class="ident" id="5878049"><a href="/gostd/go/printer/printer.go.html#5844079">impliedSemi</a></span>&nbsp;<span class="op" id="5878061">=</span>&nbsp;<span class="builtintype" id="5878063">false</span>&nbsp;<span class="comment" id="5878069">//&nbsp;EOF&nbsp;acts&nbsp;like&nbsp;a&nbsp;newline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878097"><a href="/gostd/go/printer/printer.go.html#5877921">p</a></span><span class="op" id="5878098">.</span><span class="ident" id="5878099"><a href="/gostd/go/printer/printer.go.html#5871758">flush</a></span><span class="op" id="5878104">(</span><span class="ident" id="5878105"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5878110">.</span><span class="ident" id="5878111"><a href="/gostd/go/token/position.go.html#3873964">Position</a></span><span class="op" id="5878119">{</span><span class="ident" id="5878120"><a href="/gostd/go/token/position.go.html#3874020">Offset</a></span><span class="op" id="5878126">:</span>&nbsp;<span class="ident" id="5878128"><a href="/gostd/go/printer/printer.go.html#5842942">infinity</a></span><span class="op" id="5878136">,</span>&nbsp;<span class="ident" id="5878138"><a href="/gostd/go/token/position.go.html#3874062">Line</a></span><span class="op" id="5878142">:</span>&nbsp;<span class="ident" id="5878144"><a href="/gostd/go/printer/printer.go.html#5842942">infinity</a></span><span class="op" id="5878152">}</span><span class="op" id="5878153">,</span>&nbsp;<span class="ident" id="5878155"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5878160">.</span><span class="ident" id="5878161"><a href="/gostd/go/token/token.go.html#3889706">EOF</a></span><span class="op" id="5878164">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878168">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;trimmer&nbsp;to&nbsp;eliminate&nbsp;trailing&nbsp;whitespace</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878239">//&nbsp;(Input&nbsp;to&nbsp;a&nbsp;tabwriter&nbsp;must&nbsp;be&nbsp;untrimmed&nbsp;since&nbsp;trailing&nbsp;tabs&nbsp;provide</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878311">//&nbsp;formatting&nbsp;information.&nbsp;The&nbsp;tabwriter&nbsp;could&nbsp;provide&nbsp;trimming</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878376">//&nbsp;functionality&nbsp;but&nbsp;no&nbsp;tabwriter&nbsp;is&nbsp;used&nbsp;when&nbsp;RawFormat&nbsp;is&nbsp;set.)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878443"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span>&nbsp;<span class="op" id="5878450">=</span>&nbsp;<span class="op" id="5878452">&amp;</span><span class="ident" id="5878453"><a href="/gostd/go/printer/printer.go.html#5874853">trimmer</a></span><span class="op" id="5878460">{</span><span class="ident" id="5878461"><a href="/gostd/go/printer/printer.go.html#5874871">output</a></span><span class="op" id="5878467">:</span>&nbsp;<span class="ident" id="5878469"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span><span class="op" id="5878475">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878479">//&nbsp;redirect&nbsp;output&nbsp;through&nbsp;a&nbsp;tabwriter&nbsp;if&nbsp;necessary</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878532">if</span>&nbsp;<span class="ident" id="5878535"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5878538">.</span><span class="ident" id="5878539"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span><span class="op" id="5878543">&amp;</span><span class="ident" id="5878544"><a href="/gostd/go/printer/printer.go.html#5877154">RawFormat</a></span>&nbsp;<span class="op" id="5878554">==</span>&nbsp;<span class="num" id="5878557">0</span>&nbsp;<span class="op" id="5878559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878563">minwidth</span>&nbsp;<span class="op" id="5878572">:=</span>&nbsp;<span class="ident" id="5878575"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5878578">.</span><span class="ident" id="5878579"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878591">padchar</span>&nbsp;<span class="op" id="5878599">:=</span>&nbsp;<span class="builtintype" id="5878602">byte</span><span class="op" id="5878606">(</span><span class="string" id="5878607">&#39;\t&#39;</span><span class="op" id="5878611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878615">if</span>&nbsp;<span class="ident" id="5878618"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5878621">.</span><span class="ident" id="5878622"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span><span class="op" id="5878626">&amp;</span><span class="ident" id="5878627"><a href="/gostd/go/printer/printer.go.html#5877319">UseSpaces</a></span>&nbsp;<span class="op" id="5878637">!=</span>&nbsp;<span class="num" id="5878640">0</span>&nbsp;<span class="op" id="5878642">{</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878647"><a href="/gostd/go/printer/printer.go.html#5878591">padchar</a></span>&nbsp;<span class="op" id="5878655">=</span>&nbsp;<span class="string" id="5878657">&#39;&nbsp;&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5878663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878668">twmode</span>&nbsp;<span class="op" id="5878675">:=</span>&nbsp;<span class="ident" id="5878678"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5878687">.</span><span class="ident" id="5878688"><a href="/gostd/text/tabwriter/tabwriter.go.html#5514297">DiscardEmptyColumns</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878710">if</span>&nbsp;<span class="ident" id="5878713"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5878716">.</span><span class="ident" id="5878717"><a href="/gostd/go/printer/printer.go.html#5877553">Mode</a></span><span class="op" id="5878721">&amp;</span><span class="ident" id="5878722"><a href="/gostd/go/printer/printer.go.html#5877238">TabIndent</a></span>&nbsp;<span class="op" id="5878732">!=</span>&nbsp;<span class="num" id="5878735">0</span>&nbsp;<span class="op" id="5878737">{</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878742"><a href="/gostd/go/printer/printer.go.html#5878563">minwidth</a></span>&nbsp;<span class="op" id="5878751">=</span>&nbsp;<span class="num" id="5878753">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878758"><a href="/gostd/go/printer/printer.go.html#5878668">twmode</a></span>&nbsp;<span class="op" id="5878765">|=</span>&nbsp;<span class="ident" id="5878768"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5878777">.</span><span class="ident" id="5878778"><a href="/gostd/text/tabwriter/tabwriter.go.html#5514442">TabIndent</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5878790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5878795"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span>&nbsp;<span class="op" id="5878802">=</span>&nbsp;<span class="ident" id="5878804"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5878813">.</span><span class="ident" id="5878814"><a href="/gostd/text/tabwriter/tabwriter.go.html#5524689">NewWriter</a></span><span class="op" id="5878823">(</span><span class="ident" id="5878824"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span><span class="op" id="5878830">,</span>&nbsp;<span class="ident" id="5878832"><a href="/gostd/go/printer/printer.go.html#5878563">minwidth</a></span><span class="op" id="5878840">,</span>&nbsp;<span class="ident" id="5878842"><a href="/gostd/go/printer/printer.go.html#5877782">cfg</a></span><span class="op" id="5878845">.</span><span class="ident" id="5878846"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><span class="op" id="5878854">,</span>&nbsp;<span class="num" id="5878856">1</span><span class="op" id="5878857">,</span>&nbsp;<span class="ident" id="5878859"><a href="/gostd/go/printer/printer.go.html#5878591">padchar</a></span><span class="op" id="5878866">,</span>&nbsp;<span class="ident" id="5878868"><a href="/gostd/go/printer/printer.go.html#5878668">twmode</a></span><span class="op" id="5878874">)</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5878877">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5878881">//&nbsp;write&nbsp;printer&nbsp;result&nbsp;via&nbsp;tabwriter/trimmer&nbsp;to&nbsp;output</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878938">if</span>&nbsp;<span class="ident" id="5878941">_</span><span class="op" id="5878942">,</span>&nbsp;<span class="ident" id="5878944"><a href="/gostd/go/printer/printer.go.html#5877888">err</a></span>&nbsp;<span class="op" id="5878948">=</span>&nbsp;<span class="ident" id="5878950"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span><span class="op" id="5878956">.</span><span class="ident" id="5878957"><a href="/gostd/io/io.go.html#1422334">Write</a></span><span class="op" id="5878962">(</span><span class="ident" id="5878963"><a href="/gostd/go/printer/printer.go.html#5877921">p</a></span><span class="op" id="5878964">.</span><span class="ident" id="5878965"><a href="/gostd/go/printer/printer.go.html#5843932">output</a></span><span class="op" id="5878971">)</span><span class="op" id="5878972">;</span>&nbsp;<span class="ident" id="5878974"><a href="/gostd/go/printer/printer.go.html#5877888">err</a></span>&nbsp;<span class="op" id="5878978">!=</span>&nbsp;<span class="builtintype" id="5878981">nil</span>&nbsp;<span class="op" id="5878985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5878989">return</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5878997">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5879001">//&nbsp;flush&nbsp;tabwriter,&nbsp;if&nbsp;any</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5879029">if</span>&nbsp;<span class="ident" id="5879032">tw</span><span class="op" id="5879034">,</span>&nbsp;<span class="ident" id="5879036">_</span>&nbsp;<span class="op" id="5879038">:=</span>&nbsp;<span class="ident" id="5879041"><a href="/gostd/go/printer/printer.go.html#5877802">output</a></span><span class="op" id="5879047">.</span><span class="op" id="5879048">(</span><span class="op" id="5879049">*</span><span class="ident" id="5879050"><a href="/gostd/go/printer/printer.go.html#5842789">tabwriter</a></span><span class="op" id="5879059">.</span><span class="ident" id="5879060"><a href="/gostd/text/tabwriter/tabwriter.go.html#5511646">Writer</a></span><span class="op" id="5879066">)</span><span class="op" id="5879067">;</span>&nbsp;<span class="ident" id="5879069"><a href="/gostd/go/printer/printer.go.html#5879032">tw</a></span>&nbsp;<span class="op" id="5879072">!=</span>&nbsp;<span class="builtintype" id="5879075">nil</span>&nbsp;<span class="op" id="5879079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5879083"><a href="/gostd/go/printer/printer.go.html#5877888">err</a></span>&nbsp;<span class="op" id="5879087">=</span>&nbsp;<span class="ident" id="5879089"><a href="/gostd/go/printer/printer.go.html#5879032">tw</a></span><span class="op" id="5879091">.</span><span class="ident" id="5879092"><a href="/gostd/text/tabwriter/tabwriter.go.html#5522354">Flush</a></span><span class="op" id="5879097">(</span><span class="op" id="5879098">)</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5879101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5879105">return</span><br>
<span class="lineno"></span><span class="op" id="5879112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1270</span><span class="comment" id="5879115">//&nbsp;A&nbsp;CommentedNode&nbsp;bundles&nbsp;an&nbsp;AST&nbsp;node&nbsp;and&nbsp;corresponding&nbsp;comments.</span><br>
<span class="lineno"></span><span class="comment" id="5879182">//&nbsp;It&nbsp;may&nbsp;be&nbsp;provided&nbsp;as&nbsp;argument&nbsp;to&nbsp;any&nbsp;of&nbsp;the&nbsp;Fprint&nbsp;functions.</span><br>
<span class="lineno"></span><span class="comment" id="5879248">//</span><br>
<span class="lineno"></span><span class="keyword" id="5879251">type</span>&nbsp;<span class="ident" id="5879256">CommentedNode</span>&nbsp;<span class="keyword" id="5879270">struct</span>&nbsp;<span class="op" id="5879277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5879280">Node</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5879289">interface</span><span class="op" id="5879298">{</span><span class="op" id="5879299">}</span>&nbsp;<span class="comment" id="5879301">//&nbsp;*ast.File,&nbsp;or&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5879361">Comments</span>&nbsp;<span class="op" id="5879370">[</span><span class="op" id="5879371">]</span><span class="op" id="5879372">*</span><span class="ident" id="5879373"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5879376">.</span><span class="ident" id="5879377"><a href="/gostd/go/ast/ast.go.html#3796034">CommentGroup</a></span><br>
<span class="lineno"></span><span class="op" id="5879390">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5879393">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output&nbsp;for&nbsp;a&nbsp;given&nbsp;configuration&nbsp;cfg.</span><br>
<span class="lineno"></span><span class="comment" id="5879472">//&nbsp;Position&nbsp;information&nbsp;is&nbsp;interpreted&nbsp;relative&nbsp;to&nbsp;the&nbsp;file&nbsp;set&nbsp;fset.</span><br>
<span class="lineno">1280</span><span class="comment" id="5879542">//&nbsp;The&nbsp;node&nbsp;type&nbsp;must&nbsp;be&nbsp;*ast.File,&nbsp;*CommentedNode,&nbsp;[]ast.Decl,&nbsp;[]ast.Stmt,</span><br>
<span class="lineno"></span><span class="comment" id="5879618">//&nbsp;or&nbsp;assignment-compatible&nbsp;to&nbsp;ast.Expr,&nbsp;ast.Decl,&nbsp;ast.Spec,&nbsp;or&nbsp;ast.Stmt.</span><br>
<span class="lineno"></span><span class="comment" id="5879692">//</span><br>
<span class="lineno"></span><span class="keyword" id="5879695">func</span>&nbsp;<span class="op" id="5879700">(</span><span class="ident" id="5879701">cfg</span>&nbsp;<span class="op" id="5879705">*</span><span class="ident" id="5879706"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="5879712">)</span>&nbsp;<span class="ident" id="5879714">Fprint</span><span class="op" id="5879720">(</span><span class="ident" id="5879721">output</span>&nbsp;<span class="ident" id="5879728"><a href="/gostd/go/printer/printer.go.html#5842755">io</a></span><span class="op" id="5879730">.</span><span class="ident" id="5879731"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5879737">,</span>&nbsp;<span class="ident" id="5879739">fset</span>&nbsp;<span class="op" id="5879744">*</span><span class="ident" id="5879745"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5879750">.</span><span class="ident" id="5879751"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5879758">,</span>&nbsp;<span class="ident" id="5879760">node</span>&nbsp;<span class="keyword" id="5879765">interface</span><span class="op" id="5879774">{</span><span class="op" id="5879775">}</span><span class="op" id="5879776">)</span>&nbsp;<span class="builtintype" id="5879778">error</span>&nbsp;<span class="op" id="5879784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5879787">return</span>&nbsp;<span class="ident" id="5879794"><a href="/gostd/go/printer/printer.go.html#5879701">cfg</a></span><span class="op" id="5879797">.</span><span class="ident" id="5879798"><a href="/gostd/go/printer/printer.go.html#5877795">fprint</a></span><span class="op" id="5879804">(</span><span class="ident" id="5879805"><a href="/gostd/go/printer/printer.go.html#5879721">output</a></span><span class="op" id="5879811">,</span>&nbsp;<span class="ident" id="5879813"><a href="/gostd/go/printer/printer.go.html#5879739">fset</a></span><span class="op" id="5879817">,</span>&nbsp;<span class="ident" id="5879819"><a href="/gostd/go/printer/printer.go.html#5879760">node</a></span><span class="op" id="5879823">,</span>&nbsp;<span class="builtinfunc" id="5879825">make</span><span class="op" id="5879829">(</span><span class="keyword" id="5879830">map</span><span class="op" id="5879833">[</span><span class="ident" id="5879834"><a href="/gostd/go/printer/printer.go.html#5842733">ast</a></span><span class="op" id="5879837">.</span><span class="ident" id="5879838"><a href="/gostd/go/ast/ast.go.html#3795014">Node</a></span><span class="op" id="5879842">]</span><span class="builtintype" id="5879843">int</span><span class="op" id="5879846">)</span><span class="op" id="5879847">)</span><br>
<span class="lineno">1285</span><span class="op" id="5879849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5879852">//&nbsp;Fprint&nbsp;&#34;pretty-prints&#34;&nbsp;an&nbsp;AST&nbsp;node&nbsp;to&nbsp;output.</span><br>
<span class="lineno"></span><span class="comment" id="5879901">//&nbsp;It&nbsp;calls&nbsp;Config.Fprint&nbsp;with&nbsp;default&nbsp;settings.</span><br>
<span class="lineno"></span><span class="comment" id="5879950">//</span><br>
<span class="lineno">1290</span><span class="keyword" id="5879953">func</span>&nbsp;<span class="ident" id="5879958">Fprint</span><span class="op" id="5879964">(</span><span class="ident" id="5879965">output</span>&nbsp;<span class="ident" id="5879972"><a href="/gostd/go/printer/printer.go.html#5842755">io</a></span><span class="op" id="5879974">.</span><span class="ident" id="5879975"><a href="/gostd/io/io.go.html#1422314">Writer</a></span><span class="op" id="5879981">,</span>&nbsp;<span class="ident" id="5879983">fset</span>&nbsp;<span class="op" id="5879988">*</span><span class="ident" id="5879989"><a href="/gostd/go/printer/printer.go.html#5842743">token</a></span><span class="op" id="5879994">.</span><span class="ident" id="5879995"><a href="/gostd/go/token/position.go.html#3883366">FileSet</a></span><span class="op" id="5880002">,</span>&nbsp;<span class="ident" id="5880004">node</span>&nbsp;<span class="keyword" id="5880009">interface</span><span class="op" id="5880018">{</span><span class="op" id="5880019">}</span><span class="op" id="5880020">)</span>&nbsp;<span class="builtintype" id="5880022">error</span>&nbsp;<span class="op" id="5880028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5880031">return</span>&nbsp;<span class="op" id="5880038">(</span><span class="op" id="5880039">&amp;</span><span class="ident" id="5880040"><a href="/gostd/go/printer/printer.go.html#5877536">Config</a></span><span class="op" id="5880046">{</span><span class="ident" id="5880047"><a href="/gostd/go/printer/printer.go.html#5877582">Tabwidth</a></span><span class="op" id="5880055">:</span>&nbsp;<span class="num" id="5880057">8</span><span class="op" id="5880058">}</span><span class="op" id="5880059">)</span><span class="op" id="5880060">.</span><span class="ident" id="5880061"><a href="/gostd/go/printer/printer.go.html#5879714">Fprint</a></span><span class="op" id="5880067">(</span><span class="ident" id="5880068"><a href="/gostd/go/printer/printer.go.html#5879965">output</a></span><span class="op" id="5880074">,</span>&nbsp;<span class="ident" id="5880076"><a href="/gostd/go/printer/printer.go.html#5879983">fset</a></span><span class="op" id="5880080">,</span>&nbsp;<span class="ident" id="5880082"><a href="/gostd/go/printer/printer.go.html#5880004">node</a></span><span class="op" id="5880086">)</span><br>
<span class="lineno"></span><span class="op" id="5880088">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
