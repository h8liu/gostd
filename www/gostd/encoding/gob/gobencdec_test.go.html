<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7908151">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7908206">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7908260">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7908311">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908378">package</span>&nbsp;<span class="ident" id="7908386">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908391">import</span>&nbsp;<span class="op" id="7908398">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908401">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908410">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908420">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908427">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908433">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908440">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908451">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7908462">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7908469">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7908472">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908532">type</span>&nbsp;<span class="ident" id="7908537">ByteStruct</span>&nbsp;<span class="keyword" id="7908548">struct</span>&nbsp;<span class="op" id="7908555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908558">a</span>&nbsp;<span class="builtintype" id="7908560">byte</span>&nbsp;<span class="comment" id="7908565">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7908590">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7908593">type</span>&nbsp;<span class="ident" id="7908598">StringStruct</span>&nbsp;<span class="keyword" id="7908611">struct</span>&nbsp;<span class="op" id="7908618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908621">s</span>&nbsp;<span class="builtintype" id="7908623">string</span>&nbsp;<span class="comment" id="7908630">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7908655">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7908658">type</span>&nbsp;<span class="ident" id="7908663">ArrayStruct</span>&nbsp;<span class="keyword" id="7908675">struct</span>&nbsp;<span class="op" id="7908682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908685">a</span>&nbsp;<span class="op" id="7908687">[</span><span class="num" id="7908688">8192</span><span class="op" id="7908692">]</span><span class="builtintype" id="7908693">byte</span>&nbsp;<span class="comment" id="7908698">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7908723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908726">type</span>&nbsp;<span class="ident" id="7908731">Gobber</span>&nbsp;<span class="builtintype" id="7908738">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7908743">type</span>&nbsp;<span class="ident" id="7908748">ValueGobber</span>&nbsp;<span class="builtintype" id="7908760">string</span>&nbsp;<span class="comment" id="7908767">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908817">type</span>&nbsp;<span class="ident" id="7908822">BinaryGobber</span>&nbsp;<span class="builtintype" id="7908835">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7908840">type</span>&nbsp;<span class="ident" id="7908845">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="7908863">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908871">type</span>&nbsp;<span class="ident" id="7908876">TextGobber</span>&nbsp;<span class="builtintype" id="7908887">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908892">type</span>&nbsp;<span class="ident" id="7908897">TextValueGobber</span>&nbsp;<span class="builtintype" id="7908913">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="7908921">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7908946">func</span>&nbsp;<span class="op" id="7908951">(</span><span class="ident" id="7908952">g</span>&nbsp;<span class="op" id="7908954">*</span><span class="ident" id="7908955">ByteStruct</span><span class="op" id="7908965">)</span>&nbsp;<span class="ident" id="7908967">GobEncode</span><span class="op" id="7908976">(</span><span class="op" id="7908977">)</span>&nbsp;<span class="op" id="7908979">(</span><span class="op" id="7908980">[</span><span class="op" id="7908981">]</span><span class="builtintype" id="7908982">byte</span><span class="op" id="7908986">,</span>&nbsp;<span class="builtintype" id="7908988">error</span><span class="op" id="7908993">)</span>&nbsp;<span class="op" id="7908995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7908998">b</span>&nbsp;<span class="op" id="7909000">:=</span>&nbsp;<span class="builtinfunc" id="7909003">make</span><span class="op" id="7909007">(</span><span class="op" id="7909008">[</span><span class="op" id="7909009">]</span><span class="builtintype" id="7909010">byte</span><span class="op" id="7909014">,</span>&nbsp;<span class="num" id="7909016">3</span><span class="op" id="7909017">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909020">b</span><span class="op" id="7909021">[</span><span class="num" id="7909022">0</span><span class="op" id="7909023">]</span>&nbsp;<span class="op" id="7909025">=</span>&nbsp;<span class="ident" id="7909027">g</span><span class="op" id="7909028">.</span><span class="ident" id="7909029">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909032">b</span><span class="op" id="7909033">[</span><span class="num" id="7909034">1</span><span class="op" id="7909035">]</span>&nbsp;<span class="op" id="7909037">=</span>&nbsp;<span class="ident" id="7909039">g</span><span class="op" id="7909040">.</span><span class="ident" id="7909041">a</span>&nbsp;<span class="op" id="7909043">+</span>&nbsp;<span class="num" id="7909045">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909048">b</span><span class="op" id="7909049">[</span><span class="num" id="7909050">2</span><span class="op" id="7909051">]</span>&nbsp;<span class="op" id="7909053">=</span>&nbsp;<span class="ident" id="7909055">g</span><span class="op" id="7909056">.</span><span class="ident" id="7909057">a</span>&nbsp;<span class="op" id="7909059">+</span>&nbsp;<span class="num" id="7909061">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909064">return</span>&nbsp;<span class="ident" id="7909071">b</span><span class="op" id="7909072">,</span>&nbsp;<span class="ident" id="7909074">nil</span><br>
<span class="lineno"></span><span class="op" id="7909078">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7909081">func</span>&nbsp;<span class="op" id="7909086">(</span><span class="ident" id="7909087">g</span>&nbsp;<span class="op" id="7909089">*</span><span class="ident" id="7909090">ByteStruct</span><span class="op" id="7909100">)</span>&nbsp;<span class="ident" id="7909102">GobDecode</span><span class="op" id="7909111">(</span><span class="ident" id="7909112">data</span>&nbsp;<span class="op" id="7909117">[</span><span class="op" id="7909118">]</span><span class="builtintype" id="7909119">byte</span><span class="op" id="7909123">)</span>&nbsp;<span class="builtintype" id="7909125">error</span>&nbsp;<span class="op" id="7909131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909134">if</span>&nbsp;<span class="ident" id="7909137">g</span>&nbsp;<span class="op" id="7909139">==</span>&nbsp;<span class="ident" id="7909142">nil</span>&nbsp;<span class="op" id="7909146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909150">return</span>&nbsp;<span class="ident" id="7909157">errors</span><span class="op" id="7909163">.</span><span class="ident" id="7909164">New</span><span class="op" id="7909167">(</span><span class="string" id="7909168">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="7909182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909185">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909188">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909226">if</span>&nbsp;<span class="builtinfunc" id="7909229">len</span><span class="op" id="7909232">(</span><span class="ident" id="7909233">data</span><span class="op" id="7909237">)</span>&nbsp;<span class="op" id="7909239">==</span>&nbsp;<span class="num" id="7909242">0</span>&nbsp;<span class="op" id="7909244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909248">return</span>&nbsp;<span class="ident" id="7909255">io</span><span class="op" id="7909257">.</span><span class="ident" id="7909258">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909266">g</span><span class="op" id="7909267">.</span><span class="ident" id="7909268">a</span>&nbsp;<span class="op" id="7909270">=</span>&nbsp;<span class="ident" id="7909272">data</span><span class="op" id="7909276">[</span><span class="num" id="7909277">0</span><span class="op" id="7909278">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909281">for</span>&nbsp;<span class="ident" id="7909285">i</span><span class="op" id="7909286">,</span>&nbsp;<span class="ident" id="7909288">c</span>&nbsp;<span class="op" id="7909290">:=</span>&nbsp;<span class="keyword" id="7909293">range</span>&nbsp;<span class="ident" id="7909299">data</span>&nbsp;<span class="op" id="7909304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909308">if</span>&nbsp;<span class="ident" id="7909311">c</span>&nbsp;<span class="op" id="7909313">!=</span>&nbsp;<span class="ident" id="7909316">g</span><span class="op" id="7909317">.</span><span class="ident" id="7909318">a</span><span class="op" id="7909319">+</span><span class="builtintype" id="7909320">byte</span><span class="op" id="7909324">(</span><span class="ident" id="7909325">i</span><span class="op" id="7909326">)</span>&nbsp;<span class="op" id="7909328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909333">return</span>&nbsp;<span class="ident" id="7909340">errors</span><span class="op" id="7909346">.</span><span class="ident" id="7909347">New</span><span class="op" id="7909350">(</span><span class="string" id="7909351">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7909374">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909378">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909381">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909384">return</span>&nbsp;<span class="ident" id="7909391">nil</span><br>
<span class="lineno"></span><span class="op" id="7909395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909398">func</span>&nbsp;<span class="op" id="7909403">(</span><span class="ident" id="7909404">g</span>&nbsp;<span class="op" id="7909406">*</span><span class="ident" id="7909407">StringStruct</span><span class="op" id="7909419">)</span>&nbsp;<span class="ident" id="7909421">GobEncode</span><span class="op" id="7909430">(</span><span class="op" id="7909431">)</span>&nbsp;<span class="op" id="7909433">(</span><span class="op" id="7909434">[</span><span class="op" id="7909435">]</span><span class="builtintype" id="7909436">byte</span><span class="op" id="7909440">,</span>&nbsp;<span class="builtintype" id="7909442">error</span><span class="op" id="7909447">)</span>&nbsp;<span class="op" id="7909449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909452">return</span>&nbsp;<span class="op" id="7909459">[</span><span class="op" id="7909460">]</span><span class="builtintype" id="7909461">byte</span><span class="op" id="7909465">(</span><span class="ident" id="7909466">g</span><span class="op" id="7909467">.</span><span class="ident" id="7909468">s</span><span class="op" id="7909469">)</span><span class="op" id="7909470">,</span>&nbsp;<span class="ident" id="7909472">nil</span><br>
<span class="lineno">75</span><span class="op" id="7909476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909479">func</span>&nbsp;<span class="op" id="7909484">(</span><span class="ident" id="7909485">g</span>&nbsp;<span class="op" id="7909487">*</span><span class="ident" id="7909488">StringStruct</span><span class="op" id="7909500">)</span>&nbsp;<span class="ident" id="7909502">GobDecode</span><span class="op" id="7909511">(</span><span class="ident" id="7909512">data</span>&nbsp;<span class="op" id="7909517">[</span><span class="op" id="7909518">]</span><span class="builtintype" id="7909519">byte</span><span class="op" id="7909523">)</span>&nbsp;<span class="builtintype" id="7909525">error</span>&nbsp;<span class="op" id="7909531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7909534">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909572">if</span>&nbsp;<span class="builtinfunc" id="7909575">len</span><span class="op" id="7909578">(</span><span class="ident" id="7909579">data</span><span class="op" id="7909583">)</span>&nbsp;<span class="op" id="7909585">==</span>&nbsp;<span class="num" id="7909588">0</span>&nbsp;<span class="op" id="7909590">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909594">return</span>&nbsp;<span class="ident" id="7909601">io</span><span class="op" id="7909603">.</span><span class="ident" id="7909604">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909612">a</span>&nbsp;<span class="op" id="7909614">:=</span>&nbsp;<span class="ident" id="7909617">data</span><span class="op" id="7909621">[</span><span class="num" id="7909622">0</span><span class="op" id="7909623">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909626">for</span>&nbsp;<span class="ident" id="7909630">i</span><span class="op" id="7909631">,</span>&nbsp;<span class="ident" id="7909633">c</span>&nbsp;<span class="op" id="7909635">:=</span>&nbsp;<span class="keyword" id="7909638">range</span>&nbsp;<span class="ident" id="7909644">data</span>&nbsp;<span class="op" id="7909649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909653">if</span>&nbsp;<span class="ident" id="7909656">c</span>&nbsp;<span class="op" id="7909658">!=</span>&nbsp;<span class="ident" id="7909661">a</span><span class="op" id="7909662">+</span><span class="builtintype" id="7909663">byte</span><span class="op" id="7909667">(</span><span class="ident" id="7909668">i</span><span class="op" id="7909669">)</span>&nbsp;<span class="op" id="7909671">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909676">return</span>&nbsp;<span class="ident" id="7909683">errors</span><span class="op" id="7909689">.</span><span class="ident" id="7909690">New</span><span class="op" id="7909693">(</span><span class="string" id="7909694">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7909717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7909727">g</span><span class="op" id="7909728">.</span><span class="ident" id="7909729">s</span>&nbsp;<span class="op" id="7909731">=</span>&nbsp;<span class="builtintype" id="7909733">string</span><span class="op" id="7909739">(</span><span class="ident" id="7909740">data</span><span class="op" id="7909744">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909747">return</span>&nbsp;<span class="ident" id="7909754">nil</span><br>
<span class="lineno">90</span><span class="op" id="7909758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7909761">func</span>&nbsp;<span class="op" id="7909766">(</span><span class="ident" id="7909767">a</span>&nbsp;<span class="op" id="7909769">*</span><span class="ident" id="7909770">ArrayStruct</span><span class="op" id="7909781">)</span>&nbsp;<span class="ident" id="7909783">GobEncode</span><span class="op" id="7909792">(</span><span class="op" id="7909793">)</span>&nbsp;<span class="op" id="7909795">(</span><span class="op" id="7909796">[</span><span class="op" id="7909797">]</span><span class="builtintype" id="7909798">byte</span><span class="op" id="7909802">,</span>&nbsp;<span class="builtintype" id="7909804">error</span><span class="op" id="7909809">)</span>&nbsp;<span class="op" id="7909811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909814">return</span>&nbsp;<span class="ident" id="7909821">a</span><span class="op" id="7909822">.</span><span class="ident" id="7909823">a</span><span class="op" id="7909824">[</span><span class="op" id="7909825">:</span><span class="op" id="7909826">]</span><span class="op" id="7909827">,</span>&nbsp;<span class="ident" id="7909829">nil</span><br>
<span class="lineno"></span><span class="op" id="7909833">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7909836">func</span>&nbsp;<span class="op" id="7909841">(</span><span class="ident" id="7909842">a</span>&nbsp;<span class="op" id="7909844">*</span><span class="ident" id="7909845">ArrayStruct</span><span class="op" id="7909856">)</span>&nbsp;<span class="ident" id="7909858">GobDecode</span><span class="op" id="7909867">(</span><span class="ident" id="7909868">data</span>&nbsp;<span class="op" id="7909873">[</span><span class="op" id="7909874">]</span><span class="builtintype" id="7909875">byte</span><span class="op" id="7909879">)</span>&nbsp;<span class="builtintype" id="7909881">error</span>&nbsp;<span class="op" id="7909887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909890">if</span>&nbsp;<span class="builtinfunc" id="7909893">len</span><span class="op" id="7909896">(</span><span class="ident" id="7909897">data</span><span class="op" id="7909901">)</span>&nbsp;<span class="op" id="7909903">!=</span>&nbsp;<span class="builtinfunc" id="7909906">len</span><span class="op" id="7909909">(</span><span class="ident" id="7909910">a</span><span class="op" id="7909911">.</span><span class="ident" id="7909912">a</span><span class="op" id="7909913">)</span>&nbsp;<span class="op" id="7909915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909919">return</span>&nbsp;<span class="ident" id="7909926">errors</span><span class="op" id="7909932">.</span><span class="ident" id="7909933">New</span><span class="op" id="7909936">(</span><span class="string" id="7909937">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="7909967">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7909970">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7909973">copy</span><span class="op" id="7909977">(</span><span class="ident" id="7909978">a</span><span class="op" id="7909979">.</span><span class="ident" id="7909980">a</span><span class="op" id="7909981">[</span><span class="op" id="7909982">:</span><span class="op" id="7909983">]</span><span class="op" id="7909984">,</span>&nbsp;<span class="ident" id="7909986">data</span><span class="op" id="7909990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7909993">return</span>&nbsp;<span class="ident" id="7910000">nil</span><br>
<span class="lineno"></span><span class="op" id="7910004">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910007">func</span>&nbsp;<span class="op" id="7910012">(</span><span class="ident" id="7910013">g</span>&nbsp;<span class="op" id="7910015">*</span><span class="ident" id="7910016">Gobber</span><span class="op" id="7910022">)</span>&nbsp;<span class="ident" id="7910024">GobEncode</span><span class="op" id="7910033">(</span><span class="op" id="7910034">)</span>&nbsp;<span class="op" id="7910036">(</span><span class="op" id="7910037">[</span><span class="op" id="7910038">]</span><span class="builtintype" id="7910039">byte</span><span class="op" id="7910043">,</span>&nbsp;<span class="builtintype" id="7910045">error</span><span class="op" id="7910050">)</span>&nbsp;<span class="op" id="7910052">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910055">return</span>&nbsp;<span class="op" id="7910062">[</span><span class="op" id="7910063">]</span><span class="builtintype" id="7910064">byte</span><span class="op" id="7910068">(</span><span class="ident" id="7910069">fmt</span><span class="op" id="7910072">.</span><span class="ident" id="7910073">Sprintf</span><span class="op" id="7910080">(</span><span class="string" id="7910081">&#34;VALUE=%d&#34;</span><span class="op" id="7910091">,</span>&nbsp;<span class="op" id="7910093">*</span><span class="ident" id="7910094">g</span><span class="op" id="7910095">)</span><span class="op" id="7910096">)</span><span class="op" id="7910097">,</span>&nbsp;<span class="ident" id="7910099">nil</span><br>
<span class="lineno"></span><span class="op" id="7910103">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910106">func</span>&nbsp;<span class="op" id="7910111">(</span><span class="ident" id="7910112">g</span>&nbsp;<span class="op" id="7910114">*</span><span class="ident" id="7910115">Gobber</span><span class="op" id="7910121">)</span>&nbsp;<span class="ident" id="7910123">GobDecode</span><span class="op" id="7910132">(</span><span class="ident" id="7910133">data</span>&nbsp;<span class="op" id="7910138">[</span><span class="op" id="7910139">]</span><span class="builtintype" id="7910140">byte</span><span class="op" id="7910144">)</span>&nbsp;<span class="builtintype" id="7910146">error</span>&nbsp;<span class="op" id="7910152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910155">_</span><span class="op" id="7910156">,</span>&nbsp;<span class="ident" id="7910158">err</span>&nbsp;<span class="op" id="7910162">:=</span>&nbsp;<span class="ident" id="7910165">fmt</span><span class="op" id="7910168">.</span><span class="ident" id="7910169">Sscanf</span><span class="op" id="7910175">(</span><span class="builtintype" id="7910176">string</span><span class="op" id="7910182">(</span><span class="ident" id="7910183">data</span><span class="op" id="7910187">)</span><span class="op" id="7910188">,</span>&nbsp;<span class="string" id="7910190">&#34;VALUE=%d&#34;</span><span class="op" id="7910200">,</span>&nbsp;<span class="op" id="7910202">(</span><span class="op" id="7910203">*</span><span class="builtintype" id="7910204">int</span><span class="op" id="7910207">)</span><span class="op" id="7910208">(</span><span class="ident" id="7910209">g</span><span class="op" id="7910210">)</span><span class="op" id="7910211">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910214">return</span>&nbsp;<span class="ident" id="7910221">err</span><br>
<span class="lineno"></span><span class="op" id="7910225">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910228">func</span>&nbsp;<span class="op" id="7910233">(</span><span class="ident" id="7910234">g</span>&nbsp;<span class="op" id="7910236">*</span><span class="ident" id="7910237">BinaryGobber</span><span class="op" id="7910249">)</span>&nbsp;<span class="ident" id="7910251">MarshalBinary</span><span class="op" id="7910264">(</span><span class="op" id="7910265">)</span>&nbsp;<span class="op" id="7910267">(</span><span class="op" id="7910268">[</span><span class="op" id="7910269">]</span><span class="builtintype" id="7910270">byte</span><span class="op" id="7910274">,</span>&nbsp;<span class="builtintype" id="7910276">error</span><span class="op" id="7910281">)</span>&nbsp;<span class="op" id="7910283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910286">return</span>&nbsp;<span class="op" id="7910293">[</span><span class="op" id="7910294">]</span><span class="builtintype" id="7910295">byte</span><span class="op" id="7910299">(</span><span class="ident" id="7910300">fmt</span><span class="op" id="7910303">.</span><span class="ident" id="7910304">Sprintf</span><span class="op" id="7910311">(</span><span class="string" id="7910312">&#34;VALUE=%d&#34;</span><span class="op" id="7910322">,</span>&nbsp;<span class="op" id="7910324">*</span><span class="ident" id="7910325">g</span><span class="op" id="7910326">)</span><span class="op" id="7910327">)</span><span class="op" id="7910328">,</span>&nbsp;<span class="ident" id="7910330">nil</span><br>
<span class="lineno">115</span><span class="op" id="7910334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910337">func</span>&nbsp;<span class="op" id="7910342">(</span><span class="ident" id="7910343">g</span>&nbsp;<span class="op" id="7910345">*</span><span class="ident" id="7910346">BinaryGobber</span><span class="op" id="7910358">)</span>&nbsp;<span class="ident" id="7910360">UnmarshalBinary</span><span class="op" id="7910375">(</span><span class="ident" id="7910376">data</span>&nbsp;<span class="op" id="7910381">[</span><span class="op" id="7910382">]</span><span class="builtintype" id="7910383">byte</span><span class="op" id="7910387">)</span>&nbsp;<span class="builtintype" id="7910389">error</span>&nbsp;<span class="op" id="7910395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910398">_</span><span class="op" id="7910399">,</span>&nbsp;<span class="ident" id="7910401">err</span>&nbsp;<span class="op" id="7910405">:=</span>&nbsp;<span class="ident" id="7910408">fmt</span><span class="op" id="7910411">.</span><span class="ident" id="7910412">Sscanf</span><span class="op" id="7910418">(</span><span class="builtintype" id="7910419">string</span><span class="op" id="7910425">(</span><span class="ident" id="7910426">data</span><span class="op" id="7910430">)</span><span class="op" id="7910431">,</span>&nbsp;<span class="string" id="7910433">&#34;VALUE=%d&#34;</span><span class="op" id="7910443">,</span>&nbsp;<span class="op" id="7910445">(</span><span class="op" id="7910446">*</span><span class="builtintype" id="7910447">int</span><span class="op" id="7910450">)</span><span class="op" id="7910451">(</span><span class="ident" id="7910452">g</span><span class="op" id="7910453">)</span><span class="op" id="7910454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910457">return</span>&nbsp;<span class="ident" id="7910464">err</span><br>
<span class="lineno">120</span><span class="op" id="7910468">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7910471">func</span>&nbsp;<span class="op" id="7910476">(</span><span class="ident" id="7910477">g</span>&nbsp;<span class="op" id="7910479">*</span><span class="ident" id="7910480">TextGobber</span><span class="op" id="7910490">)</span>&nbsp;<span class="ident" id="7910492">MarshalText</span><span class="op" id="7910503">(</span><span class="op" id="7910504">)</span>&nbsp;<span class="op" id="7910506">(</span><span class="op" id="7910507">[</span><span class="op" id="7910508">]</span><span class="builtintype" id="7910509">byte</span><span class="op" id="7910513">,</span>&nbsp;<span class="builtintype" id="7910515">error</span><span class="op" id="7910520">)</span>&nbsp;<span class="op" id="7910522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910525">return</span>&nbsp;<span class="op" id="7910532">[</span><span class="op" id="7910533">]</span><span class="builtintype" id="7910534">byte</span><span class="op" id="7910538">(</span><span class="ident" id="7910539">fmt</span><span class="op" id="7910542">.</span><span class="ident" id="7910543">Sprintf</span><span class="op" id="7910550">(</span><span class="string" id="7910551">&#34;VALUE=%d&#34;</span><span class="op" id="7910561">,</span>&nbsp;<span class="op" id="7910563">*</span><span class="ident" id="7910564">g</span><span class="op" id="7910565">)</span><span class="op" id="7910566">)</span><span class="op" id="7910567">,</span>&nbsp;<span class="ident" id="7910569">nil</span><br>
<span class="lineno"></span><span class="op" id="7910573">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7910576">func</span>&nbsp;<span class="op" id="7910581">(</span><span class="ident" id="7910582">g</span>&nbsp;<span class="op" id="7910584">*</span><span class="ident" id="7910585">TextGobber</span><span class="op" id="7910595">)</span>&nbsp;<span class="ident" id="7910597">UnmarshalText</span><span class="op" id="7910610">(</span><span class="ident" id="7910611">data</span>&nbsp;<span class="op" id="7910616">[</span><span class="op" id="7910617">]</span><span class="builtintype" id="7910618">byte</span><span class="op" id="7910622">)</span>&nbsp;<span class="builtintype" id="7910624">error</span>&nbsp;<span class="op" id="7910630">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910633">_</span><span class="op" id="7910634">,</span>&nbsp;<span class="ident" id="7910636">err</span>&nbsp;<span class="op" id="7910640">:=</span>&nbsp;<span class="ident" id="7910643">fmt</span><span class="op" id="7910646">.</span><span class="ident" id="7910647">Sscanf</span><span class="op" id="7910653">(</span><span class="builtintype" id="7910654">string</span><span class="op" id="7910660">(</span><span class="ident" id="7910661">data</span><span class="op" id="7910665">)</span><span class="op" id="7910666">,</span>&nbsp;<span class="string" id="7910668">&#34;VALUE=%d&#34;</span><span class="op" id="7910678">,</span>&nbsp;<span class="op" id="7910680">(</span><span class="op" id="7910681">*</span><span class="builtintype" id="7910682">int</span><span class="op" id="7910685">)</span><span class="op" id="7910686">(</span><span class="ident" id="7910687">g</span><span class="op" id="7910688">)</span><span class="op" id="7910689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910692">return</span>&nbsp;<span class="ident" id="7910699">err</span><br>
<span class="lineno"></span><span class="op" id="7910703">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7910706">func</span>&nbsp;<span class="op" id="7910711">(</span><span class="ident" id="7910712">v</span>&nbsp;<span class="ident" id="7910714">ValueGobber</span><span class="op" id="7910725">)</span>&nbsp;<span class="ident" id="7910727">GobEncode</span><span class="op" id="7910736">(</span><span class="op" id="7910737">)</span>&nbsp;<span class="op" id="7910739">(</span><span class="op" id="7910740">[</span><span class="op" id="7910741">]</span><span class="builtintype" id="7910742">byte</span><span class="op" id="7910746">,</span>&nbsp;<span class="builtintype" id="7910748">error</span><span class="op" id="7910753">)</span>&nbsp;<span class="op" id="7910755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910758">return</span>&nbsp;<span class="op" id="7910765">[</span><span class="op" id="7910766">]</span><span class="builtintype" id="7910767">byte</span><span class="op" id="7910771">(</span><span class="ident" id="7910772">fmt</span><span class="op" id="7910775">.</span><span class="ident" id="7910776">Sprintf</span><span class="op" id="7910783">(</span><span class="string" id="7910784">&#34;VALUE=%s&#34;</span><span class="op" id="7910794">,</span>&nbsp;<span class="ident" id="7910796">v</span><span class="op" id="7910797">)</span><span class="op" id="7910798">)</span><span class="op" id="7910799">,</span>&nbsp;<span class="ident" id="7910801">nil</span><br>
<span class="lineno"></span><span class="op" id="7910805">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7910808">func</span>&nbsp;<span class="op" id="7910813">(</span><span class="ident" id="7910814">v</span>&nbsp;<span class="op" id="7910816">*</span><span class="ident" id="7910817">ValueGobber</span><span class="op" id="7910828">)</span>&nbsp;<span class="ident" id="7910830">GobDecode</span><span class="op" id="7910839">(</span><span class="ident" id="7910840">data</span>&nbsp;<span class="op" id="7910845">[</span><span class="op" id="7910846">]</span><span class="builtintype" id="7910847">byte</span><span class="op" id="7910851">)</span>&nbsp;<span class="builtintype" id="7910853">error</span>&nbsp;<span class="op" id="7910859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7910862">_</span><span class="op" id="7910863">,</span>&nbsp;<span class="ident" id="7910865">err</span>&nbsp;<span class="op" id="7910869">:=</span>&nbsp;<span class="ident" id="7910872">fmt</span><span class="op" id="7910875">.</span><span class="ident" id="7910876">Sscanf</span><span class="op" id="7910882">(</span><span class="builtintype" id="7910883">string</span><span class="op" id="7910889">(</span><span class="ident" id="7910890">data</span><span class="op" id="7910894">)</span><span class="op" id="7910895">,</span>&nbsp;<span class="string" id="7910897">&#34;VALUE=%s&#34;</span><span class="op" id="7910907">,</span>&nbsp;<span class="op" id="7910909">(</span><span class="op" id="7910910">*</span><span class="builtintype" id="7910911">string</span><span class="op" id="7910917">)</span><span class="op" id="7910918">(</span><span class="ident" id="7910919">v</span><span class="op" id="7910920">)</span><span class="op" id="7910921">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7910924">return</span>&nbsp;<span class="ident" id="7910931">err</span><br>
<span class="lineno"></span><span class="op" id="7910935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7910938">func</span>&nbsp;<span class="op" id="7910943">(</span><span class="ident" id="7910944">v</span>&nbsp;<span class="ident" id="7910946">BinaryValueGobber</span><span class="op" id="7910963">)</span>&nbsp;<span class="ident" id="7910965">MarshalBinary</span><span class="op" id="7910978">(</span><span class="op" id="7910979">)</span>&nbsp;<span class="op" id="7910981">(</span><span class="op" id="7910982">[</span><span class="op" id="7910983">]</span><span class="builtintype" id="7910984">byte</span><span class="op" id="7910988">,</span>&nbsp;<span class="builtintype" id="7910990">error</span><span class="op" id="7910995">)</span>&nbsp;<span class="op" id="7910997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911000">return</span>&nbsp;<span class="op" id="7911007">[</span><span class="op" id="7911008">]</span><span class="builtintype" id="7911009">byte</span><span class="op" id="7911013">(</span><span class="ident" id="7911014">fmt</span><span class="op" id="7911017">.</span><span class="ident" id="7911018">Sprintf</span><span class="op" id="7911025">(</span><span class="string" id="7911026">&#34;VALUE=%s&#34;</span><span class="op" id="7911036">,</span>&nbsp;<span class="ident" id="7911038">v</span><span class="op" id="7911039">)</span><span class="op" id="7911040">)</span><span class="op" id="7911041">,</span>&nbsp;<span class="ident" id="7911043">nil</span><br>
<span class="lineno"></span><span class="op" id="7911047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911050">func</span>&nbsp;<span class="op" id="7911055">(</span><span class="ident" id="7911056">v</span>&nbsp;<span class="op" id="7911058">*</span><span class="ident" id="7911059">BinaryValueGobber</span><span class="op" id="7911076">)</span>&nbsp;<span class="ident" id="7911078">UnmarshalBinary</span><span class="op" id="7911093">(</span><span class="ident" id="7911094">data</span>&nbsp;<span class="op" id="7911099">[</span><span class="op" id="7911100">]</span><span class="builtintype" id="7911101">byte</span><span class="op" id="7911105">)</span>&nbsp;<span class="builtintype" id="7911107">error</span>&nbsp;<span class="op" id="7911113">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911116">_</span><span class="op" id="7911117">,</span>&nbsp;<span class="ident" id="7911119">err</span>&nbsp;<span class="op" id="7911123">:=</span>&nbsp;<span class="ident" id="7911126">fmt</span><span class="op" id="7911129">.</span><span class="ident" id="7911130">Sscanf</span><span class="op" id="7911136">(</span><span class="builtintype" id="7911137">string</span><span class="op" id="7911143">(</span><span class="ident" id="7911144">data</span><span class="op" id="7911148">)</span><span class="op" id="7911149">,</span>&nbsp;<span class="string" id="7911151">&#34;VALUE=%s&#34;</span><span class="op" id="7911161">,</span>&nbsp;<span class="op" id="7911163">(</span><span class="op" id="7911164">*</span><span class="builtintype" id="7911165">string</span><span class="op" id="7911171">)</span><span class="op" id="7911172">(</span><span class="ident" id="7911173">v</span><span class="op" id="7911174">)</span><span class="op" id="7911175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911178">return</span>&nbsp;<span class="ident" id="7911185">err</span><br>
<span class="lineno"></span><span class="op" id="7911189">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911192">func</span>&nbsp;<span class="op" id="7911197">(</span><span class="ident" id="7911198">v</span>&nbsp;<span class="ident" id="7911200">TextValueGobber</span><span class="op" id="7911215">)</span>&nbsp;<span class="ident" id="7911217">MarshalText</span><span class="op" id="7911228">(</span><span class="op" id="7911229">)</span>&nbsp;<span class="op" id="7911231">(</span><span class="op" id="7911232">[</span><span class="op" id="7911233">]</span><span class="builtintype" id="7911234">byte</span><span class="op" id="7911238">,</span>&nbsp;<span class="builtintype" id="7911240">error</span><span class="op" id="7911245">)</span>&nbsp;<span class="op" id="7911247">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911250">return</span>&nbsp;<span class="op" id="7911257">[</span><span class="op" id="7911258">]</span><span class="builtintype" id="7911259">byte</span><span class="op" id="7911263">(</span><span class="ident" id="7911264">fmt</span><span class="op" id="7911267">.</span><span class="ident" id="7911268">Sprintf</span><span class="op" id="7911275">(</span><span class="string" id="7911276">&#34;VALUE=%s&#34;</span><span class="op" id="7911286">,</span>&nbsp;<span class="ident" id="7911288">v</span><span class="op" id="7911289">)</span><span class="op" id="7911290">)</span><span class="op" id="7911291">,</span>&nbsp;<span class="ident" id="7911293">nil</span><br>
<span class="lineno"></span><span class="op" id="7911297">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911300">func</span>&nbsp;<span class="op" id="7911305">(</span><span class="ident" id="7911306">v</span>&nbsp;<span class="op" id="7911308">*</span><span class="ident" id="7911309">TextValueGobber</span><span class="op" id="7911324">)</span>&nbsp;<span class="ident" id="7911326">UnmarshalText</span><span class="op" id="7911339">(</span><span class="ident" id="7911340">data</span>&nbsp;<span class="op" id="7911345">[</span><span class="op" id="7911346">]</span><span class="builtintype" id="7911347">byte</span><span class="op" id="7911351">)</span>&nbsp;<span class="builtintype" id="7911353">error</span>&nbsp;<span class="op" id="7911359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911362">_</span><span class="op" id="7911363">,</span>&nbsp;<span class="ident" id="7911365">err</span>&nbsp;<span class="op" id="7911369">:=</span>&nbsp;<span class="ident" id="7911372">fmt</span><span class="op" id="7911375">.</span><span class="ident" id="7911376">Sscanf</span><span class="op" id="7911382">(</span><span class="builtintype" id="7911383">string</span><span class="op" id="7911389">(</span><span class="ident" id="7911390">data</span><span class="op" id="7911394">)</span><span class="op" id="7911395">,</span>&nbsp;<span class="string" id="7911397">&#34;VALUE=%s&#34;</span><span class="op" id="7911407">,</span>&nbsp;<span class="op" id="7911409">(</span><span class="op" id="7911410">*</span><span class="builtintype" id="7911411">string</span><span class="op" id="7911417">)</span><span class="op" id="7911418">(</span><span class="ident" id="7911419">v</span><span class="op" id="7911420">)</span><span class="op" id="7911421">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7911424">return</span>&nbsp;<span class="ident" id="7911431">err</span><br>
<span class="lineno"></span><span class="op" id="7911435">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7911438">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7911484">type</span>&nbsp;<span class="ident" id="7911489">GobTest0</span>&nbsp;<span class="keyword" id="7911498">struct</span>&nbsp;<span class="op" id="7911505">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911508">X</span>&nbsp;<span class="builtintype" id="7911510">int</span>&nbsp;<span class="comment" id="7911514">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911571">G</span>&nbsp;<span class="op" id="7911573">*</span><span class="ident" id="7911574">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="7911585">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7911588">type</span>&nbsp;<span class="ident" id="7911593">GobTest1</span>&nbsp;<span class="keyword" id="7911602">struct</span>&nbsp;<span class="op" id="7911609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911612">X</span>&nbsp;<span class="builtintype" id="7911614">int</span>&nbsp;<span class="comment" id="7911618">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911675">G</span>&nbsp;<span class="op" id="7911677">*</span><span class="ident" id="7911678">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="7911691">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7911694">type</span>&nbsp;<span class="ident" id="7911699">GobTest2</span>&nbsp;<span class="keyword" id="7911708">struct</span>&nbsp;<span class="op" id="7911715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911718">X</span>&nbsp;<span class="builtintype" id="7911720">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7911727">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911784">G</span>&nbsp;<span class="builtintype" id="7911786">string</span>&nbsp;<span class="comment" id="7911793">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="7911837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7911840">type</span>&nbsp;<span class="ident" id="7911845">GobTest3</span>&nbsp;<span class="keyword" id="7911854">struct</span>&nbsp;<span class="op" id="7911861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911864">X</span>&nbsp;<span class="builtintype" id="7911866">int</span>&nbsp;<span class="comment" id="7911870">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911927">G</span>&nbsp;<span class="op" id="7911929">*</span><span class="ident" id="7911930">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911938">B</span>&nbsp;<span class="op" id="7911940">*</span><span class="ident" id="7911941">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911955">T</span>&nbsp;<span class="op" id="7911957">*</span><span class="ident" id="7911958">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="7911969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7911972">type</span>&nbsp;<span class="ident" id="7911977">GobTest4</span>&nbsp;<span class="keyword" id="7911986">struct</span>&nbsp;<span class="op" id="7911993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7911996">X</span>&nbsp;&nbsp;<span class="builtintype" id="7911999">int</span>&nbsp;<span class="comment" id="7912003">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912060">V</span>&nbsp;&nbsp;<span class="ident" id="7912063">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912076">BV</span>&nbsp;<span class="ident" id="7912079">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912098">TV</span>&nbsp;<span class="ident" id="7912101">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7912117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7912120">type</span>&nbsp;<span class="ident" id="7912125">GobTest5</span>&nbsp;<span class="keyword" id="7912134">struct</span>&nbsp;<span class="op" id="7912141">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912144">X</span>&nbsp;&nbsp;<span class="builtintype" id="7912147">int</span>&nbsp;<span class="comment" id="7912151">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912208">V</span>&nbsp;&nbsp;<span class="op" id="7912211">*</span><span class="ident" id="7912212">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912225">BV</span>&nbsp;<span class="op" id="7912228">*</span><span class="ident" id="7912229">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912248">TV</span>&nbsp;<span class="op" id="7912251">*</span><span class="ident" id="7912252">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7912268">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7912271">type</span>&nbsp;<span class="ident" id="7912276">GobTest6</span>&nbsp;<span class="keyword" id="7912285">struct</span>&nbsp;<span class="op" id="7912292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912295">X</span>&nbsp;&nbsp;<span class="builtintype" id="7912298">int</span>&nbsp;<span class="comment" id="7912302">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912359">V</span>&nbsp;&nbsp;<span class="ident" id="7912362">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912375">W</span>&nbsp;&nbsp;<span class="op" id="7912378">*</span><span class="ident" id="7912379">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912392">BV</span>&nbsp;<span class="ident" id="7912395">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912414">BW</span>&nbsp;<span class="op" id="7912417">*</span><span class="ident" id="7912418">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912437">TV</span>&nbsp;<span class="ident" id="7912440">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912457">TW</span>&nbsp;<span class="op" id="7912460">*</span><span class="ident" id="7912461">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7912477">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7912480">type</span>&nbsp;<span class="ident" id="7912485">GobTest7</span>&nbsp;<span class="keyword" id="7912494">struct</span>&nbsp;<span class="op" id="7912501">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912504">X</span>&nbsp;&nbsp;<span class="builtintype" id="7912507">int</span>&nbsp;<span class="comment" id="7912511">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912568">V</span>&nbsp;&nbsp;<span class="op" id="7912571">*</span><span class="ident" id="7912572">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912585">W</span>&nbsp;&nbsp;<span class="ident" id="7912588">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912601">BV</span>&nbsp;<span class="op" id="7912604">*</span><span class="ident" id="7912605">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912624">BW</span>&nbsp;<span class="ident" id="7912627">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912646">TV</span>&nbsp;<span class="op" id="7912649">*</span><span class="ident" id="7912650">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912667">TW</span>&nbsp;<span class="ident" id="7912670">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7912686">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7912689">type</span>&nbsp;<span class="ident" id="7912694">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="7912715">struct</span>&nbsp;<span class="op" id="7912722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912725">X</span>&nbsp;<span class="builtintype" id="7912727">int</span>&nbsp;<span class="comment" id="7912731">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="7912787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7912790">type</span>&nbsp;<span class="ident" id="7912795">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="7912814">struct</span>&nbsp;<span class="op" id="7912821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912824">X</span>&nbsp;<span class="builtintype" id="7912826">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7912839">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912896">G</span>&nbsp;<span class="ident" id="7912898">StringStruct</span>&nbsp;<span class="comment" id="7912911">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7912929">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7912932">type</span>&nbsp;<span class="ident" id="7912937">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="7912959">struct</span>&nbsp;<span class="op" id="7912966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7912969">X</span>&nbsp;<span class="builtintype" id="7912971">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7912987">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913044">G</span>&nbsp;<span class="op" id="7913046">*</span><span class="op" id="7913047">*</span><span class="op" id="7913048">*</span><span class="ident" id="7913049">StringStruct</span>&nbsp;<span class="comment" id="7913062">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7913095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7913098">type</span>&nbsp;<span class="ident" id="7913103">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="7913122">struct</span>&nbsp;<span class="op" id="7913129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913132">X</span>&nbsp;<span class="builtintype" id="7913134">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7913146">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913203">A</span>&nbsp;<span class="ident" id="7913205">ArrayStruct</span>&nbsp;<span class="comment" id="7913217">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7913235">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7913238">type</span>&nbsp;<span class="ident" id="7913243">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="7913270">struct</span>&nbsp;<span class="op" id="7913277">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913280">X</span>&nbsp;<span class="builtintype" id="7913282">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7913297">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913354">A</span>&nbsp;<span class="op" id="7913356">*</span><span class="op" id="7913357">*</span><span class="op" id="7913358">*</span><span class="ident" id="7913359">ArrayStruct</span>&nbsp;<span class="comment" id="7913371">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7913408">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7913411">func</span>&nbsp;<span class="ident" id="7913416">TestGobEncoderField</span><span class="op" id="7913435">(</span><span class="ident" id="7913436">t</span>&nbsp;<span class="op" id="7913438">*</span><span class="ident" id="7913439">testing</span><span class="op" id="7913446">.</span><span class="ident" id="7913447">T</span><span class="op" id="7913448">)</span>&nbsp;<span class="op" id="7913450">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913453">b</span>&nbsp;<span class="op" id="7913455">:=</span>&nbsp;<span class="builtinfunc" id="7913458">new</span><span class="op" id="7913461">(</span><span class="ident" id="7913462">bytes</span><span class="op" id="7913467">.</span><span class="ident" id="7913468">Buffer</span><span class="op" id="7913474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7913477">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913515">enc</span>&nbsp;<span class="op" id="7913519">:=</span>&nbsp;<span class="ident" id="7913522">NewEncoder</span><span class="op" id="7913532">(</span><span class="ident" id="7913533">b</span><span class="op" id="7913534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913537">err</span>&nbsp;<span class="op" id="7913541">:=</span>&nbsp;<span class="ident" id="7913544">enc</span><span class="op" id="7913547">.</span><span class="ident" id="7913548">Encode</span><span class="op" id="7913554">(</span><span class="ident" id="7913555">GobTest0</span><span class="op" id="7913563">{</span><span class="num" id="7913564">17</span><span class="op" id="7913566">,</span>&nbsp;<span class="op" id="7913568">&amp;</span><span class="ident" id="7913569">ByteStruct</span><span class="op" id="7913579">{</span><span class="string" id="7913580">&#39;A&#39;</span><span class="op" id="7913583">}</span><span class="op" id="7913584">}</span><span class="op" id="7913585">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913588">if</span>&nbsp;<span class="ident" id="7913591">err</span>&nbsp;<span class="op" id="7913595">!=</span>&nbsp;<span class="ident" id="7913598">nil</span>&nbsp;<span class="op" id="7913602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913606">t</span><span class="op" id="7913607">.</span><span class="ident" id="7913608">Fatal</span><span class="op" id="7913613">(</span><span class="string" id="7913614">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7913629">,</span>&nbsp;<span class="ident" id="7913631">err</span><span class="op" id="7913634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913640">dec</span>&nbsp;<span class="op" id="7913644">:=</span>&nbsp;<span class="ident" id="7913647">NewDecoder</span><span class="op" id="7913657">(</span><span class="ident" id="7913658">b</span><span class="op" id="7913659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913662">x</span>&nbsp;<span class="op" id="7913664">:=</span>&nbsp;<span class="builtinfunc" id="7913667">new</span><span class="op" id="7913670">(</span><span class="ident" id="7913671">GobTest0</span><span class="op" id="7913679">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913682">err</span>&nbsp;<span class="op" id="7913686">=</span>&nbsp;<span class="ident" id="7913688">dec</span><span class="op" id="7913691">.</span><span class="ident" id="7913692">Decode</span><span class="op" id="7913698">(</span><span class="ident" id="7913699">x</span><span class="op" id="7913700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913703">if</span>&nbsp;<span class="ident" id="7913706">err</span>&nbsp;<span class="op" id="7913710">!=</span>&nbsp;<span class="ident" id="7913713">nil</span>&nbsp;<span class="op" id="7913717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913721">t</span><span class="op" id="7913722">.</span><span class="ident" id="7913723">Fatal</span><span class="op" id="7913728">(</span><span class="string" id="7913729">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7913744">,</span>&nbsp;<span class="ident" id="7913746">err</span><span class="op" id="7913749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7913755">if</span>&nbsp;<span class="ident" id="7913758">x</span><span class="op" id="7913759">.</span><span class="ident" id="7913760">G</span><span class="op" id="7913761">.</span><span class="ident" id="7913762">a</span>&nbsp;<span class="op" id="7913764">!=</span>&nbsp;<span class="string" id="7913767">&#39;A&#39;</span>&nbsp;<span class="op" id="7913771">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913775">t</span><span class="op" id="7913776">.</span><span class="ident" id="7913777">Errorf</span><span class="op" id="7913783">(</span><span class="string" id="7913784">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7913805">,</span>&nbsp;<span class="ident" id="7913807">x</span><span class="op" id="7913808">.</span><span class="ident" id="7913809">G</span><span class="op" id="7913810">.</span><span class="ident" id="7913811">a</span><span class="op" id="7913812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7913815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7913818">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913858">b</span><span class="op" id="7913859">.</span><span class="ident" id="7913860">Reset</span><span class="op" id="7913865">(</span><span class="op" id="7913866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913869">gobber</span>&nbsp;<span class="op" id="7913876">:=</span>&nbsp;<span class="ident" id="7913879">Gobber</span><span class="op" id="7913885">(</span><span class="num" id="7913886">23</span><span class="op" id="7913888">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913891">bgobber</span>&nbsp;<span class="op" id="7913899">:=</span>&nbsp;<span class="ident" id="7913902">BinaryGobber</span><span class="op" id="7913914">(</span><span class="num" id="7913915">24</span><span class="op" id="7913917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913920">tgobber</span>&nbsp;<span class="op" id="7913928">:=</span>&nbsp;<span class="ident" id="7913931">TextGobber</span><span class="op" id="7913941">(</span><span class="num" id="7913942">25</span><span class="op" id="7913944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7913947">err</span>&nbsp;<span class="op" id="7913951">=</span>&nbsp;<span class="ident" id="7913953">enc</span><span class="op" id="7913956">.</span><span class="ident" id="7913957">Encode</span><span class="op" id="7913963">(</span><span class="ident" id="7913964">GobTest3</span><span class="op" id="7913972">{</span><span class="num" id="7913973">17</span><span class="op" id="7913975">,</span>&nbsp;<span class="op" id="7913977">&amp;</span><span class="ident" id="7913978">gobber</span><span class="op" id="7913984">,</span>&nbsp;<span class="op" id="7913986">&amp;</span><span class="ident" id="7913987">bgobber</span><span class="op" id="7913994">,</span>&nbsp;<span class="op" id="7913996">&amp;</span><span class="ident" id="7913997">tgobber</span><span class="op" id="7914004">}</span><span class="op" id="7914005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914008">if</span>&nbsp;<span class="ident" id="7914011">err</span>&nbsp;<span class="op" id="7914015">!=</span>&nbsp;<span class="ident" id="7914018">nil</span>&nbsp;<span class="op" id="7914022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914026">t</span><span class="op" id="7914027">.</span><span class="ident" id="7914028">Fatal</span><span class="op" id="7914033">(</span><span class="string" id="7914034">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7914049">,</span>&nbsp;<span class="ident" id="7914051">err</span><span class="op" id="7914054">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914060">y</span>&nbsp;<span class="op" id="7914062">:=</span>&nbsp;<span class="builtinfunc" id="7914065">new</span><span class="op" id="7914068">(</span><span class="ident" id="7914069">GobTest3</span><span class="op" id="7914077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914080">err</span>&nbsp;<span class="op" id="7914084">=</span>&nbsp;<span class="ident" id="7914086">dec</span><span class="op" id="7914089">.</span><span class="ident" id="7914090">Decode</span><span class="op" id="7914096">(</span><span class="ident" id="7914097">y</span><span class="op" id="7914098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914101">if</span>&nbsp;<span class="ident" id="7914104">err</span>&nbsp;<span class="op" id="7914108">!=</span>&nbsp;<span class="ident" id="7914111">nil</span>&nbsp;<span class="op" id="7914115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914119">t</span><span class="op" id="7914120">.</span><span class="ident" id="7914121">Fatal</span><span class="op" id="7914126">(</span><span class="string" id="7914127">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7914142">,</span>&nbsp;<span class="ident" id="7914144">err</span><span class="op" id="7914147">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914153">if</span>&nbsp;<span class="op" id="7914156">*</span><span class="ident" id="7914157">y</span><span class="op" id="7914158">.</span><span class="ident" id="7914159">G</span>&nbsp;<span class="op" id="7914161">!=</span>&nbsp;<span class="num" id="7914164">23</span>&nbsp;<span class="op" id="7914167">||</span>&nbsp;<span class="op" id="7914170">*</span><span class="ident" id="7914171">y</span><span class="op" id="7914172">.</span><span class="ident" id="7914173">B</span>&nbsp;<span class="op" id="7914175">!=</span>&nbsp;<span class="num" id="7914178">24</span>&nbsp;<span class="op" id="7914181">||</span>&nbsp;<span class="op" id="7914184">*</span><span class="ident" id="7914185">y</span><span class="op" id="7914186">.</span><span class="ident" id="7914187">T</span>&nbsp;<span class="op" id="7914189">!=</span>&nbsp;<span class="num" id="7914192">25</span>&nbsp;<span class="op" id="7914195">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914199">t</span><span class="op" id="7914200">.</span><span class="ident" id="7914201">Errorf</span><span class="op" id="7914207">(</span><span class="string" id="7914208">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7914229">,</span>&nbsp;<span class="op" id="7914231">*</span><span class="ident" id="7914232">y</span><span class="op" id="7914233">.</span><span class="ident" id="7914234">G</span><span class="op" id="7914235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914238">}</span><br>
<span class="lineno"></span><span class="op" id="7914240">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="7914243">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="7914310">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7914353">func</span>&nbsp;<span class="ident" id="7914358">TestGobEncoderValueField</span><span class="op" id="7914382">(</span><span class="ident" id="7914383">t</span>&nbsp;<span class="op" id="7914385">*</span><span class="ident" id="7914386">testing</span><span class="op" id="7914393">.</span><span class="ident" id="7914394">T</span><span class="op" id="7914395">)</span>&nbsp;<span class="op" id="7914397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914400">b</span>&nbsp;<span class="op" id="7914402">:=</span>&nbsp;<span class="builtinfunc" id="7914405">new</span><span class="op" id="7914408">(</span><span class="ident" id="7914409">bytes</span><span class="op" id="7914414">.</span><span class="ident" id="7914415">Buffer</span><span class="op" id="7914421">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7914424">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914462">enc</span>&nbsp;<span class="op" id="7914466">:=</span>&nbsp;<span class="ident" id="7914469">NewEncoder</span><span class="op" id="7914479">(</span><span class="ident" id="7914480">b</span><span class="op" id="7914481">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914484">err</span>&nbsp;<span class="op" id="7914488">:=</span>&nbsp;<span class="ident" id="7914491">enc</span><span class="op" id="7914494">.</span><span class="ident" id="7914495">Encode</span><span class="op" id="7914501">(</span><span class="op" id="7914502">&amp;</span><span class="ident" id="7914503">GobTestValueEncDec</span><span class="op" id="7914521">{</span><span class="num" id="7914522">17</span><span class="op" id="7914524">,</span>&nbsp;<span class="ident" id="7914526">StringStruct</span><span class="op" id="7914538">{</span><span class="string" id="7914539">&#34;HIJKL&#34;</span><span class="op" id="7914546">}</span><span class="op" id="7914547">}</span><span class="op" id="7914548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914551">if</span>&nbsp;<span class="ident" id="7914554">err</span>&nbsp;<span class="op" id="7914558">!=</span>&nbsp;<span class="ident" id="7914561">nil</span>&nbsp;<span class="op" id="7914565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914569">t</span><span class="op" id="7914570">.</span><span class="ident" id="7914571">Fatal</span><span class="op" id="7914576">(</span><span class="string" id="7914577">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7914592">,</span>&nbsp;<span class="ident" id="7914594">err</span><span class="op" id="7914597">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914603">dec</span>&nbsp;<span class="op" id="7914607">:=</span>&nbsp;<span class="ident" id="7914610">NewDecoder</span><span class="op" id="7914620">(</span><span class="ident" id="7914621">b</span><span class="op" id="7914622">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914625">x</span>&nbsp;<span class="op" id="7914627">:=</span>&nbsp;<span class="builtinfunc" id="7914630">new</span><span class="op" id="7914633">(</span><span class="ident" id="7914634">GobTestValueEncDec</span><span class="op" id="7914652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914655">err</span>&nbsp;<span class="op" id="7914659">=</span>&nbsp;<span class="ident" id="7914661">dec</span><span class="op" id="7914664">.</span><span class="ident" id="7914665">Decode</span><span class="op" id="7914671">(</span><span class="ident" id="7914672">x</span><span class="op" id="7914673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914676">if</span>&nbsp;<span class="ident" id="7914679">err</span>&nbsp;<span class="op" id="7914683">!=</span>&nbsp;<span class="ident" id="7914686">nil</span>&nbsp;<span class="op" id="7914690">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914694">t</span><span class="op" id="7914695">.</span><span class="ident" id="7914696">Fatal</span><span class="op" id="7914701">(</span><span class="string" id="7914702">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7914717">,</span>&nbsp;<span class="ident" id="7914719">err</span><span class="op" id="7914722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7914728">if</span>&nbsp;<span class="ident" id="7914731">x</span><span class="op" id="7914732">.</span><span class="ident" id="7914733">G</span><span class="op" id="7914734">.</span><span class="ident" id="7914735">s</span>&nbsp;<span class="op" id="7914737">!=</span>&nbsp;<span class="string" id="7914740">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7914748">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914752">t</span><span class="op" id="7914753">.</span><span class="ident" id="7914754">Errorf</span><span class="op" id="7914760">(</span><span class="string" id="7914761">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7914786">,</span>&nbsp;<span class="ident" id="7914788">x</span><span class="op" id="7914789">.</span><span class="ident" id="7914790">G</span><span class="op" id="7914791">.</span><span class="ident" id="7914792">s</span><span class="op" id="7914793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7914796">}</span><br>
<span class="lineno">295</span><span class="op" id="7914798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7914801">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7914854">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="7914890">func</span>&nbsp;<span class="ident" id="7914895">TestGobEncoderIndirectField</span><span class="op" id="7914922">(</span><span class="ident" id="7914923">t</span>&nbsp;<span class="op" id="7914925">*</span><span class="ident" id="7914926">testing</span><span class="op" id="7914933">.</span><span class="ident" id="7914934">T</span><span class="op" id="7914935">)</span>&nbsp;<span class="op" id="7914937">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7914940">b</span>&nbsp;<span class="op" id="7914942">:=</span>&nbsp;<span class="builtinfunc" id="7914945">new</span><span class="op" id="7914948">(</span><span class="ident" id="7914949">bytes</span><span class="op" id="7914954">.</span><span class="ident" id="7914955">Buffer</span><span class="op" id="7914961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7914964">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915002">enc</span>&nbsp;<span class="op" id="7915006">:=</span>&nbsp;<span class="ident" id="7915009">NewEncoder</span><span class="op" id="7915019">(</span><span class="ident" id="7915020">b</span><span class="op" id="7915021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915024">s</span>&nbsp;<span class="op" id="7915026">:=</span>&nbsp;<span class="op" id="7915029">&amp;</span><span class="ident" id="7915030">StringStruct</span><span class="op" id="7915042">{</span><span class="string" id="7915043">&#34;HIJKL&#34;</span><span class="op" id="7915050">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915053">sp</span>&nbsp;<span class="op" id="7915056">:=</span>&nbsp;<span class="op" id="7915059">&amp;</span><span class="ident" id="7915060">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915063">err</span>&nbsp;<span class="op" id="7915067">:=</span>&nbsp;<span class="ident" id="7915070">enc</span><span class="op" id="7915073">.</span><span class="ident" id="7915074">Encode</span><span class="op" id="7915080">(</span><span class="ident" id="7915081">GobTestIndirectEncDec</span><span class="op" id="7915102">{</span><span class="num" id="7915103">17</span><span class="op" id="7915105">,</span>&nbsp;<span class="op" id="7915107">&amp;</span><span class="ident" id="7915108">sp</span><span class="op" id="7915110">}</span><span class="op" id="7915111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915114">if</span>&nbsp;<span class="ident" id="7915117">err</span>&nbsp;<span class="op" id="7915121">!=</span>&nbsp;<span class="ident" id="7915124">nil</span>&nbsp;<span class="op" id="7915128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915132">t</span><span class="op" id="7915133">.</span><span class="ident" id="7915134">Fatal</span><span class="op" id="7915139">(</span><span class="string" id="7915140">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7915155">,</span>&nbsp;<span class="ident" id="7915157">err</span><span class="op" id="7915160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915166">dec</span>&nbsp;<span class="op" id="7915170">:=</span>&nbsp;<span class="ident" id="7915173">NewDecoder</span><span class="op" id="7915183">(</span><span class="ident" id="7915184">b</span><span class="op" id="7915185">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915188">x</span>&nbsp;<span class="op" id="7915190">:=</span>&nbsp;<span class="builtinfunc" id="7915193">new</span><span class="op" id="7915196">(</span><span class="ident" id="7915197">GobTestIndirectEncDec</span><span class="op" id="7915218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915221">err</span>&nbsp;<span class="op" id="7915225">=</span>&nbsp;<span class="ident" id="7915227">dec</span><span class="op" id="7915230">.</span><span class="ident" id="7915231">Decode</span><span class="op" id="7915237">(</span><span class="ident" id="7915238">x</span><span class="op" id="7915239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915242">if</span>&nbsp;<span class="ident" id="7915245">err</span>&nbsp;<span class="op" id="7915249">!=</span>&nbsp;<span class="ident" id="7915252">nil</span>&nbsp;<span class="op" id="7915256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915260">t</span><span class="op" id="7915261">.</span><span class="ident" id="7915262">Fatal</span><span class="op" id="7915267">(</span><span class="string" id="7915268">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7915283">,</span>&nbsp;<span class="ident" id="7915285">err</span><span class="op" id="7915288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915291">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915294">if</span>&nbsp;<span class="op" id="7915297">(</span><span class="op" id="7915298">*</span><span class="op" id="7915299">*</span><span class="op" id="7915300">*</span><span class="ident" id="7915301">x</span><span class="op" id="7915302">.</span><span class="ident" id="7915303">G</span><span class="op" id="7915304">)</span><span class="op" id="7915305">.</span><span class="ident" id="7915306">s</span>&nbsp;<span class="op" id="7915308">!=</span>&nbsp;<span class="string" id="7915311">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7915319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915323">t</span><span class="op" id="7915324">.</span><span class="ident" id="7915325">Errorf</span><span class="op" id="7915331">(</span><span class="string" id="7915332">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7915357">,</span>&nbsp;<span class="op" id="7915359">(</span><span class="op" id="7915360">*</span><span class="op" id="7915361">*</span><span class="op" id="7915362">*</span><span class="ident" id="7915363">x</span><span class="op" id="7915364">.</span><span class="ident" id="7915365">G</span><span class="op" id="7915366">)</span><span class="op" id="7915367">.</span><span class="ident" id="7915368">s</span><span class="op" id="7915369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915372">}</span><br>
<span class="lineno"></span><span class="op" id="7915374">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="7915377">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7915418">func</span>&nbsp;<span class="ident" id="7915423">TestGobEncoderArrayField</span><span class="op" id="7915447">(</span><span class="ident" id="7915448">t</span>&nbsp;<span class="op" id="7915450">*</span><span class="ident" id="7915451">testing</span><span class="op" id="7915458">.</span><span class="ident" id="7915459">T</span><span class="op" id="7915460">)</span>&nbsp;<span class="op" id="7915462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915465">b</span>&nbsp;<span class="op" id="7915467">:=</span>&nbsp;<span class="builtinfunc" id="7915470">new</span><span class="op" id="7915473">(</span><span class="ident" id="7915474">bytes</span><span class="op" id="7915479">.</span><span class="ident" id="7915480">Buffer</span><span class="op" id="7915486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915489">enc</span>&nbsp;<span class="op" id="7915493">:=</span>&nbsp;<span class="ident" id="7915496">NewEncoder</span><span class="op" id="7915506">(</span><span class="ident" id="7915507">b</span><span class="op" id="7915508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915511">var</span>&nbsp;<span class="ident" id="7915515">a</span>&nbsp;<span class="ident" id="7915517">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915537">a</span><span class="op" id="7915538">.</span><span class="ident" id="7915539">X</span>&nbsp;<span class="op" id="7915541">=</span>&nbsp;<span class="num" id="7915543">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915547">for</span>&nbsp;<span class="ident" id="7915551">i</span>&nbsp;<span class="op" id="7915553">:=</span>&nbsp;<span class="keyword" id="7915556">range</span>&nbsp;<span class="ident" id="7915562">a</span><span class="op" id="7915563">.</span><span class="ident" id="7915564">A</span><span class="op" id="7915565">.</span><span class="ident" id="7915566">a</span>&nbsp;<span class="op" id="7915568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915572">a</span><span class="op" id="7915573">.</span><span class="ident" id="7915574">A</span><span class="op" id="7915575">.</span><span class="ident" id="7915576">a</span><span class="op" id="7915577">[</span><span class="ident" id="7915578">i</span><span class="op" id="7915579">]</span>&nbsp;<span class="op" id="7915581">=</span>&nbsp;<span class="builtintype" id="7915583">byte</span><span class="op" id="7915587">(</span><span class="ident" id="7915588">i</span><span class="op" id="7915589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915595">err</span>&nbsp;<span class="op" id="7915599">:=</span>&nbsp;<span class="ident" id="7915602">enc</span><span class="op" id="7915605">.</span><span class="ident" id="7915606">Encode</span><span class="op" id="7915612">(</span><span class="op" id="7915613">&amp;</span><span class="ident" id="7915614">a</span><span class="op" id="7915615">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915618">if</span>&nbsp;<span class="ident" id="7915621">err</span>&nbsp;<span class="op" id="7915625">!=</span>&nbsp;<span class="ident" id="7915628">nil</span>&nbsp;<span class="op" id="7915632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915636">t</span><span class="op" id="7915637">.</span><span class="ident" id="7915638">Fatal</span><span class="op" id="7915643">(</span><span class="string" id="7915644">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7915659">,</span>&nbsp;<span class="ident" id="7915661">err</span><span class="op" id="7915664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915670">dec</span>&nbsp;<span class="op" id="7915674">:=</span>&nbsp;<span class="ident" id="7915677">NewDecoder</span><span class="op" id="7915687">(</span><span class="ident" id="7915688">b</span><span class="op" id="7915689">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915692">x</span>&nbsp;<span class="op" id="7915694">:=</span>&nbsp;<span class="builtinfunc" id="7915697">new</span><span class="op" id="7915700">(</span><span class="ident" id="7915701">GobTestArrayEncDec</span><span class="op" id="7915719">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915722">err</span>&nbsp;<span class="op" id="7915726">=</span>&nbsp;<span class="ident" id="7915728">dec</span><span class="op" id="7915731">.</span><span class="ident" id="7915732">Decode</span><span class="op" id="7915738">(</span><span class="ident" id="7915739">x</span><span class="op" id="7915740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915743">if</span>&nbsp;<span class="ident" id="7915746">err</span>&nbsp;<span class="op" id="7915750">!=</span>&nbsp;<span class="ident" id="7915753">nil</span>&nbsp;<span class="op" id="7915757">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915761">t</span><span class="op" id="7915762">.</span><span class="ident" id="7915763">Fatal</span><span class="op" id="7915768">(</span><span class="string" id="7915769">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7915784">,</span>&nbsp;<span class="ident" id="7915786">err</span><span class="op" id="7915789">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915792">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915795">for</span>&nbsp;<span class="ident" id="7915799">i</span><span class="op" id="7915800">,</span>&nbsp;<span class="ident" id="7915802">v</span>&nbsp;<span class="op" id="7915804">:=</span>&nbsp;<span class="keyword" id="7915807">range</span>&nbsp;<span class="ident" id="7915813">x</span><span class="op" id="7915814">.</span><span class="ident" id="7915815">A</span><span class="op" id="7915816">.</span><span class="ident" id="7915817">a</span>&nbsp;<span class="op" id="7915819">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915823">if</span>&nbsp;<span class="ident" id="7915826">v</span>&nbsp;<span class="op" id="7915828">!=</span>&nbsp;<span class="builtintype" id="7915831">byte</span><span class="op" id="7915835">(</span><span class="ident" id="7915836">i</span><span class="op" id="7915837">)</span>&nbsp;<span class="op" id="7915839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7915844">t</span><span class="op" id="7915845">.</span><span class="ident" id="7915846">Errorf</span><span class="op" id="7915852">(</span><span class="string" id="7915853">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7915873">,</span>&nbsp;<span class="builtintype" id="7915875">byte</span><span class="op" id="7915879">(</span><span class="ident" id="7915880">i</span><span class="op" id="7915881">)</span><span class="op" id="7915882">,</span>&nbsp;<span class="ident" id="7915884">v</span><span class="op" id="7915885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7915890">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7915901">}</span><br>
<span class="lineno">345</span><span class="op" id="7915903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7915906">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7915960">func</span>&nbsp;<span class="ident" id="7915965">TestGobEncoderIndirectArrayField</span><span class="op" id="7915997">(</span><span class="ident" id="7915998">t</span>&nbsp;<span class="op" id="7916000">*</span><span class="ident" id="7916001">testing</span><span class="op" id="7916008">.</span><span class="ident" id="7916009">T</span><span class="op" id="7916010">)</span>&nbsp;<span class="op" id="7916012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916015">b</span>&nbsp;<span class="op" id="7916017">:=</span>&nbsp;<span class="builtinfunc" id="7916020">new</span><span class="op" id="7916023">(</span><span class="ident" id="7916024">bytes</span><span class="op" id="7916029">.</span><span class="ident" id="7916030">Buffer</span><span class="op" id="7916036">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916039">enc</span>&nbsp;<span class="op" id="7916043">:=</span>&nbsp;<span class="ident" id="7916046">NewEncoder</span><span class="op" id="7916056">(</span><span class="ident" id="7916057">b</span><span class="op" id="7916058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916061">var</span>&nbsp;<span class="ident" id="7916065">a</span>&nbsp;<span class="ident" id="7916067">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916095">a</span><span class="op" id="7916096">.</span><span class="ident" id="7916097">X</span>&nbsp;<span class="op" id="7916099">=</span>&nbsp;<span class="num" id="7916101">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916105">var</span>&nbsp;<span class="ident" id="7916109">array</span>&nbsp;<span class="ident" id="7916115">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916128">ap</span>&nbsp;<span class="op" id="7916131">:=</span>&nbsp;<span class="op" id="7916134">&amp;</span><span class="ident" id="7916135">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916142">app</span>&nbsp;<span class="op" id="7916146">:=</span>&nbsp;<span class="op" id="7916149">&amp;</span><span class="ident" id="7916150">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916154">a</span><span class="op" id="7916155">.</span><span class="ident" id="7916156">A</span>&nbsp;<span class="op" id="7916158">=</span>&nbsp;<span class="op" id="7916160">&amp;</span><span class="ident" id="7916161">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916166">for</span>&nbsp;<span class="ident" id="7916170">i</span>&nbsp;<span class="op" id="7916172">:=</span>&nbsp;<span class="keyword" id="7916175">range</span>&nbsp;<span class="ident" id="7916181">array</span><span class="op" id="7916186">.</span><span class="ident" id="7916187">a</span>&nbsp;<span class="op" id="7916189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916193">array</span><span class="op" id="7916198">.</span><span class="ident" id="7916199">a</span><span class="op" id="7916200">[</span><span class="ident" id="7916201">i</span><span class="op" id="7916202">]</span>&nbsp;<span class="op" id="7916204">=</span>&nbsp;<span class="builtintype" id="7916206">byte</span><span class="op" id="7916210">(</span><span class="ident" id="7916211">i</span><span class="op" id="7916212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916215">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916218">err</span>&nbsp;<span class="op" id="7916222">:=</span>&nbsp;<span class="ident" id="7916225">enc</span><span class="op" id="7916228">.</span><span class="ident" id="7916229">Encode</span><span class="op" id="7916235">(</span><span class="ident" id="7916236">a</span><span class="op" id="7916237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916240">if</span>&nbsp;<span class="ident" id="7916243">err</span>&nbsp;<span class="op" id="7916247">!=</span>&nbsp;<span class="ident" id="7916250">nil</span>&nbsp;<span class="op" id="7916254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916258">t</span><span class="op" id="7916259">.</span><span class="ident" id="7916260">Fatal</span><span class="op" id="7916265">(</span><span class="string" id="7916266">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7916281">,</span>&nbsp;<span class="ident" id="7916283">err</span><span class="op" id="7916286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916292">dec</span>&nbsp;<span class="op" id="7916296">:=</span>&nbsp;<span class="ident" id="7916299">NewDecoder</span><span class="op" id="7916309">(</span><span class="ident" id="7916310">b</span><span class="op" id="7916311">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916314">x</span>&nbsp;<span class="op" id="7916316">:=</span>&nbsp;<span class="builtinfunc" id="7916319">new</span><span class="op" id="7916322">(</span><span class="ident" id="7916323">GobTestIndirectArrayEncDec</span><span class="op" id="7916349">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916352">err</span>&nbsp;<span class="op" id="7916356">=</span>&nbsp;<span class="ident" id="7916358">dec</span><span class="op" id="7916361">.</span><span class="ident" id="7916362">Decode</span><span class="op" id="7916368">(</span><span class="ident" id="7916369">x</span><span class="op" id="7916370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916373">if</span>&nbsp;<span class="ident" id="7916376">err</span>&nbsp;<span class="op" id="7916380">!=</span>&nbsp;<span class="ident" id="7916383">nil</span>&nbsp;<span class="op" id="7916387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916391">t</span><span class="op" id="7916392">.</span><span class="ident" id="7916393">Fatal</span><span class="op" id="7916398">(</span><span class="string" id="7916399">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7916414">,</span>&nbsp;<span class="ident" id="7916416">err</span><span class="op" id="7916419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916422">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916425">for</span>&nbsp;<span class="ident" id="7916429">i</span><span class="op" id="7916430">,</span>&nbsp;<span class="ident" id="7916432">v</span>&nbsp;<span class="op" id="7916434">:=</span>&nbsp;<span class="keyword" id="7916437">range</span>&nbsp;<span class="op" id="7916443">(</span><span class="op" id="7916444">*</span><span class="op" id="7916445">*</span><span class="op" id="7916446">*</span><span class="ident" id="7916447">x</span><span class="op" id="7916448">.</span><span class="ident" id="7916449">A</span><span class="op" id="7916450">)</span><span class="op" id="7916451">.</span><span class="ident" id="7916452">a</span>&nbsp;<span class="op" id="7916454">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916458">if</span>&nbsp;<span class="ident" id="7916461">v</span>&nbsp;<span class="op" id="7916463">!=</span>&nbsp;<span class="builtintype" id="7916466">byte</span><span class="op" id="7916470">(</span><span class="ident" id="7916471">i</span><span class="op" id="7916472">)</span>&nbsp;<span class="op" id="7916474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916479">t</span><span class="op" id="7916480">.</span><span class="ident" id="7916481">Errorf</span><span class="op" id="7916487">(</span><span class="string" id="7916488">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7916508">,</span>&nbsp;<span class="builtintype" id="7916510">byte</span><span class="op" id="7916514">(</span><span class="ident" id="7916515">i</span><span class="op" id="7916516">)</span><span class="op" id="7916517">,</span>&nbsp;<span class="ident" id="7916519">v</span><span class="op" id="7916520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7916525">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916533">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7916536">}</span><br>
<span class="lineno"></span><span class="op" id="7916538">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7916541">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7916603">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="7916666">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="7916727">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="7916787">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="7916810">func</span>&nbsp;<span class="ident" id="7916815">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="7916850">(</span><span class="ident" id="7916851">t</span>&nbsp;<span class="op" id="7916853">*</span><span class="ident" id="7916854">testing</span><span class="op" id="7916861">.</span><span class="ident" id="7916862">T</span><span class="op" id="7916863">)</span>&nbsp;<span class="op" id="7916865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7916868">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916912">b</span>&nbsp;<span class="op" id="7916914">:=</span>&nbsp;<span class="builtinfunc" id="7916917">new</span><span class="op" id="7916920">(</span><span class="ident" id="7916921">bytes</span><span class="op" id="7916926">.</span><span class="ident" id="7916927">Buffer</span><span class="op" id="7916933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916936">enc</span>&nbsp;<span class="op" id="7916940">:=</span>&nbsp;<span class="ident" id="7916943">NewEncoder</span><span class="op" id="7916953">(</span><span class="ident" id="7916954">b</span><span class="op" id="7916955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7916958">err</span>&nbsp;<span class="op" id="7916962">:=</span>&nbsp;<span class="ident" id="7916965">enc</span><span class="op" id="7916968">.</span><span class="ident" id="7916969">Encode</span><span class="op" id="7916975">(</span><span class="ident" id="7916976">GobTest1</span><span class="op" id="7916984">{</span><span class="num" id="7916985">17</span><span class="op" id="7916987">,</span>&nbsp;<span class="op" id="7916989">&amp;</span><span class="ident" id="7916990">StringStruct</span><span class="op" id="7917002">{</span><span class="string" id="7917003">&#34;ABC&#34;</span><span class="op" id="7917008">}</span><span class="op" id="7917009">}</span><span class="op" id="7917010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917013">if</span>&nbsp;<span class="ident" id="7917016">err</span>&nbsp;<span class="op" id="7917020">!=</span>&nbsp;<span class="ident" id="7917023">nil</span>&nbsp;<span class="op" id="7917027">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917031">t</span><span class="op" id="7917032">.</span><span class="ident" id="7917033">Fatal</span><span class="op" id="7917038">(</span><span class="string" id="7917039">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7917054">,</span>&nbsp;<span class="ident" id="7917056">err</span><span class="op" id="7917059">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917065">dec</span>&nbsp;<span class="op" id="7917069">:=</span>&nbsp;<span class="ident" id="7917072">NewDecoder</span><span class="op" id="7917082">(</span><span class="ident" id="7917083">b</span><span class="op" id="7917084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917087">x</span>&nbsp;<span class="op" id="7917089">:=</span>&nbsp;<span class="builtinfunc" id="7917092">new</span><span class="op" id="7917095">(</span><span class="ident" id="7917096">GobTest0</span><span class="op" id="7917104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917107">err</span>&nbsp;<span class="op" id="7917111">=</span>&nbsp;<span class="ident" id="7917113">dec</span><span class="op" id="7917116">.</span><span class="ident" id="7917117">Decode</span><span class="op" id="7917123">(</span><span class="ident" id="7917124">x</span><span class="op" id="7917125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917128">if</span>&nbsp;<span class="ident" id="7917131">err</span>&nbsp;<span class="op" id="7917135">!=</span>&nbsp;<span class="ident" id="7917138">nil</span>&nbsp;<span class="op" id="7917142">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917146">t</span><span class="op" id="7917147">.</span><span class="ident" id="7917148">Fatal</span><span class="op" id="7917153">(</span><span class="string" id="7917154">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7917169">,</span>&nbsp;<span class="ident" id="7917171">err</span><span class="op" id="7917174">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917177">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917180">if</span>&nbsp;<span class="ident" id="7917183">x</span><span class="op" id="7917184">.</span><span class="ident" id="7917185">G</span><span class="op" id="7917186">.</span><span class="ident" id="7917187">a</span>&nbsp;<span class="op" id="7917189">!=</span>&nbsp;<span class="string" id="7917192">&#39;A&#39;</span>&nbsp;<span class="op" id="7917196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917200">t</span><span class="op" id="7917201">.</span><span class="ident" id="7917202">Errorf</span><span class="op" id="7917208">(</span><span class="string" id="7917209">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7917230">,</span>&nbsp;<span class="ident" id="7917232">x</span><span class="op" id="7917233">.</span><span class="ident" id="7917234">G</span><span class="op" id="7917235">.</span><span class="ident" id="7917236">a</span><span class="op" id="7917237">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917240">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7917243">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917305">b</span><span class="op" id="7917306">.</span><span class="ident" id="7917307">Reset</span><span class="op" id="7917312">(</span><span class="op" id="7917313">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917316">err</span>&nbsp;<span class="op" id="7917320">=</span>&nbsp;<span class="ident" id="7917322">enc</span><span class="op" id="7917325">.</span><span class="ident" id="7917326">Encode</span><span class="op" id="7917332">(</span><span class="ident" id="7917333">GobTest0</span><span class="op" id="7917341">{</span><span class="num" id="7917342">17</span><span class="op" id="7917344">,</span>&nbsp;<span class="op" id="7917346">&amp;</span><span class="ident" id="7917347">ByteStruct</span><span class="op" id="7917357">{</span><span class="string" id="7917358">&#39;X&#39;</span><span class="op" id="7917361">}</span><span class="op" id="7917362">}</span><span class="op" id="7917363">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917366">if</span>&nbsp;<span class="ident" id="7917369">err</span>&nbsp;<span class="op" id="7917373">!=</span>&nbsp;<span class="ident" id="7917376">nil</span>&nbsp;<span class="op" id="7917380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917384">t</span><span class="op" id="7917385">.</span><span class="ident" id="7917386">Fatal</span><span class="op" id="7917391">(</span><span class="string" id="7917392">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7917407">,</span>&nbsp;<span class="ident" id="7917409">err</span><span class="op" id="7917412">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917418">y</span>&nbsp;<span class="op" id="7917420">:=</span>&nbsp;<span class="builtinfunc" id="7917423">new</span><span class="op" id="7917426">(</span><span class="ident" id="7917427">GobTest1</span><span class="op" id="7917435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917438">err</span>&nbsp;<span class="op" id="7917442">=</span>&nbsp;<span class="ident" id="7917444">dec</span><span class="op" id="7917447">.</span><span class="ident" id="7917448">Decode</span><span class="op" id="7917454">(</span><span class="ident" id="7917455">y</span><span class="op" id="7917456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917459">if</span>&nbsp;<span class="ident" id="7917462">err</span>&nbsp;<span class="op" id="7917466">!=</span>&nbsp;<span class="ident" id="7917469">nil</span>&nbsp;<span class="op" id="7917473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917477">t</span><span class="op" id="7917478">.</span><span class="ident" id="7917479">Fatal</span><span class="op" id="7917484">(</span><span class="string" id="7917485">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7917500">,</span>&nbsp;<span class="ident" id="7917502">err</span><span class="op" id="7917505">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917508">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917511">if</span>&nbsp;<span class="ident" id="7917514">y</span><span class="op" id="7917515">.</span><span class="ident" id="7917516">G</span><span class="op" id="7917517">.</span><span class="ident" id="7917518">s</span>&nbsp;<span class="op" id="7917520">!=</span>&nbsp;<span class="string" id="7917523">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="7917529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917533">t</span><span class="op" id="7917534">.</span><span class="ident" id="7917535">Fatalf</span><span class="op" id="7917541">(</span><span class="string" id="7917542">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7917565">,</span>&nbsp;<span class="ident" id="7917567">y</span><span class="op" id="7917568">.</span><span class="ident" id="7917569">G</span><span class="op" id="7917570">.</span><span class="ident" id="7917571">s</span><span class="op" id="7917572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917575">}</span><br>
<span class="lineno"></span><span class="op" id="7917577">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="7917580">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="7917642">func</span>&nbsp;<span class="ident" id="7917647">TestGobEncoderValueEncoder</span><span class="op" id="7917673">(</span><span class="ident" id="7917674">t</span>&nbsp;<span class="op" id="7917676">*</span><span class="ident" id="7917677">testing</span><span class="op" id="7917684">.</span><span class="ident" id="7917685">T</span><span class="op" id="7917686">)</span>&nbsp;<span class="op" id="7917688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7917691">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917735">b</span>&nbsp;<span class="op" id="7917737">:=</span>&nbsp;<span class="builtinfunc" id="7917740">new</span><span class="op" id="7917743">(</span><span class="ident" id="7917744">bytes</span><span class="op" id="7917749">.</span><span class="ident" id="7917750">Buffer</span><span class="op" id="7917756">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917759">enc</span>&nbsp;<span class="op" id="7917763">:=</span>&nbsp;<span class="ident" id="7917766">NewEncoder</span><span class="op" id="7917776">(</span><span class="ident" id="7917777">b</span><span class="op" id="7917778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917781">err</span>&nbsp;<span class="op" id="7917785">:=</span>&nbsp;<span class="ident" id="7917788">enc</span><span class="op" id="7917791">.</span><span class="ident" id="7917792">Encode</span><span class="op" id="7917798">(</span><span class="ident" id="7917799">GobTest4</span><span class="op" id="7917807">{</span><span class="num" id="7917808">17</span><span class="op" id="7917810">,</span>&nbsp;<span class="ident" id="7917812">ValueGobber</span><span class="op" id="7917823">(</span><span class="string" id="7917824">&#34;hello&#34;</span><span class="op" id="7917831">)</span><span class="op" id="7917832">,</span>&nbsp;<span class="ident" id="7917834">BinaryValueGobber</span><span class="op" id="7917851">(</span><span class="string" id="7917852">&#34;Καλημέρα&#34;</span><span class="op" id="7917870">)</span><span class="op" id="7917871">,</span>&nbsp;<span class="ident" id="7917873">TextValueGobber</span><span class="op" id="7917888">(</span><span class="string" id="7917889">&#34;こんにちは&#34;</span><span class="op" id="7917906">)</span><span class="op" id="7917907">}</span><span class="op" id="7917908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7917911">if</span>&nbsp;<span class="ident" id="7917914">err</span>&nbsp;<span class="op" id="7917918">!=</span>&nbsp;<span class="ident" id="7917921">nil</span>&nbsp;<span class="op" id="7917925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917929">t</span><span class="op" id="7917930">.</span><span class="ident" id="7917931">Fatal</span><span class="op" id="7917936">(</span><span class="string" id="7917937">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7917952">,</span>&nbsp;<span class="ident" id="7917954">err</span><span class="op" id="7917957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7917960">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917963">dec</span>&nbsp;<span class="op" id="7917967">:=</span>&nbsp;<span class="ident" id="7917970">NewDecoder</span><span class="op" id="7917980">(</span><span class="ident" id="7917981">b</span><span class="op" id="7917982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7917985">x</span>&nbsp;<span class="op" id="7917987">:=</span>&nbsp;<span class="builtinfunc" id="7917990">new</span><span class="op" id="7917993">(</span><span class="ident" id="7917994">GobTest5</span><span class="op" id="7918002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918005">err</span>&nbsp;<span class="op" id="7918009">=</span>&nbsp;<span class="ident" id="7918011">dec</span><span class="op" id="7918014">.</span><span class="ident" id="7918015">Decode</span><span class="op" id="7918021">(</span><span class="ident" id="7918022">x</span><span class="op" id="7918023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918026">if</span>&nbsp;<span class="ident" id="7918029">err</span>&nbsp;<span class="op" id="7918033">!=</span>&nbsp;<span class="ident" id="7918036">nil</span>&nbsp;<span class="op" id="7918040">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918044">t</span><span class="op" id="7918045">.</span><span class="ident" id="7918046">Fatal</span><span class="op" id="7918051">(</span><span class="string" id="7918052">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7918067">,</span>&nbsp;<span class="ident" id="7918069">err</span><span class="op" id="7918072">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918078">if</span>&nbsp;<span class="op" id="7918081">*</span><span class="ident" id="7918082">x</span><span class="op" id="7918083">.</span><span class="ident" id="7918084">V</span>&nbsp;<span class="op" id="7918086">!=</span>&nbsp;<span class="string" id="7918089">&#34;hello&#34;</span>&nbsp;<span class="op" id="7918097">||</span>&nbsp;<span class="op" id="7918100">*</span><span class="ident" id="7918101">x</span><span class="op" id="7918102">.</span><span class="ident" id="7918103">BV</span>&nbsp;<span class="op" id="7918106">!=</span>&nbsp;<span class="string" id="7918109">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="7918128">||</span>&nbsp;<span class="op" id="7918131">*</span><span class="ident" id="7918132">x</span><span class="op" id="7918133">.</span><span class="ident" id="7918134">TV</span>&nbsp;<span class="op" id="7918137">!=</span>&nbsp;<span class="string" id="7918140">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="7918158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918162">t</span><span class="op" id="7918163">.</span><span class="ident" id="7918164">Errorf</span><span class="op" id="7918170">(</span><span class="string" id="7918171">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7918196">,</span>&nbsp;<span class="op" id="7918198">*</span><span class="ident" id="7918199">x</span><span class="op" id="7918200">.</span><span class="ident" id="7918201">V</span><span class="op" id="7918202">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918205">}</span><br>
<span class="lineno"></span><span class="op" id="7918207">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="7918210">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7918278">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="7918319">func</span>&nbsp;<span class="ident" id="7918324">TestGobEncoderValueThenPointer</span><span class="op" id="7918354">(</span><span class="ident" id="7918355">t</span>&nbsp;<span class="op" id="7918357">*</span><span class="ident" id="7918358">testing</span><span class="op" id="7918365">.</span><span class="ident" id="7918366">T</span><span class="op" id="7918367">)</span>&nbsp;<span class="op" id="7918369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918372">v</span>&nbsp;<span class="op" id="7918374">:=</span>&nbsp;<span class="ident" id="7918377">ValueGobber</span><span class="op" id="7918388">(</span><span class="string" id="7918389">&#34;forty-two&#34;</span><span class="op" id="7918400">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918403">w</span>&nbsp;<span class="op" id="7918405">:=</span>&nbsp;<span class="ident" id="7918408">ValueGobber</span><span class="op" id="7918419">(</span><span class="string" id="7918420">&#34;six-by-nine&#34;</span><span class="op" id="7918433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918436">bv</span>&nbsp;<span class="op" id="7918439">:=</span>&nbsp;<span class="ident" id="7918442">BinaryValueGobber</span><span class="op" id="7918459">(</span><span class="string" id="7918460">&#34;1nanocentury&#34;</span><span class="op" id="7918474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918477">bw</span>&nbsp;<span class="op" id="7918480">:=</span>&nbsp;<span class="ident" id="7918483">BinaryValueGobber</span><span class="op" id="7918500">(</span><span class="string" id="7918501">&#34;πseconds&#34;</span><span class="op" id="7918512">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918515">tv</span>&nbsp;<span class="op" id="7918518">:=</span>&nbsp;<span class="ident" id="7918521">TextValueGobber</span><span class="op" id="7918536">(</span><span class="string" id="7918537">&#34;gravitationalacceleration&#34;</span><span class="op" id="7918564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918567">tw</span>&nbsp;<span class="op" id="7918570">:=</span>&nbsp;<span class="ident" id="7918573">TextValueGobber</span><span class="op" id="7918588">(</span><span class="string" id="7918589">&#34;π²ft/s²&#34;</span><span class="op" id="7918601">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7918605">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7918676">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918740">b</span>&nbsp;<span class="op" id="7918742">:=</span>&nbsp;<span class="builtinfunc" id="7918745">new</span><span class="op" id="7918748">(</span><span class="ident" id="7918749">bytes</span><span class="op" id="7918754">.</span><span class="ident" id="7918755">Buffer</span><span class="op" id="7918761">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918764">enc</span>&nbsp;<span class="op" id="7918768">:=</span>&nbsp;<span class="ident" id="7918771">NewEncoder</span><span class="op" id="7918781">(</span><span class="ident" id="7918782">b</span><span class="op" id="7918783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918786">if</span>&nbsp;<span class="ident" id="7918789">err</span>&nbsp;<span class="op" id="7918793">:=</span>&nbsp;<span class="ident" id="7918796">enc</span><span class="op" id="7918799">.</span><span class="ident" id="7918800">Encode</span><span class="op" id="7918806">(</span><span class="ident" id="7918807">GobTest6</span><span class="op" id="7918815">{</span><span class="num" id="7918816">42</span><span class="op" id="7918818">,</span>&nbsp;<span class="ident" id="7918820">v</span><span class="op" id="7918821">,</span>&nbsp;<span class="op" id="7918823">&amp;</span><span class="ident" id="7918824">w</span><span class="op" id="7918825">,</span>&nbsp;<span class="ident" id="7918827">bv</span><span class="op" id="7918829">,</span>&nbsp;<span class="op" id="7918831">&amp;</span><span class="ident" id="7918832">bw</span><span class="op" id="7918834">,</span>&nbsp;<span class="ident" id="7918836">tv</span><span class="op" id="7918838">,</span>&nbsp;<span class="op" id="7918840">&amp;</span><span class="ident" id="7918841">tw</span><span class="op" id="7918843">}</span><span class="op" id="7918844">)</span><span class="op" id="7918845">;</span>&nbsp;<span class="ident" id="7918847">err</span>&nbsp;<span class="op" id="7918851">!=</span>&nbsp;<span class="ident" id="7918854">nil</span>&nbsp;<span class="op" id="7918858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918862">t</span><span class="op" id="7918863">.</span><span class="ident" id="7918864">Fatal</span><span class="op" id="7918869">(</span><span class="string" id="7918870">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7918885">,</span>&nbsp;<span class="ident" id="7918887">err</span><span class="op" id="7918890">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7918893">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918896">dec</span>&nbsp;<span class="op" id="7918900">:=</span>&nbsp;<span class="ident" id="7918903">NewDecoder</span><span class="op" id="7918913">(</span><span class="ident" id="7918914">b</span><span class="op" id="7918915">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918918">x</span>&nbsp;<span class="op" id="7918920">:=</span>&nbsp;<span class="builtinfunc" id="7918923">new</span><span class="op" id="7918926">(</span><span class="ident" id="7918927">GobTest6</span><span class="op" id="7918935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7918938">if</span>&nbsp;<span class="ident" id="7918941">err</span>&nbsp;<span class="op" id="7918945">:=</span>&nbsp;<span class="ident" id="7918948">dec</span><span class="op" id="7918951">.</span><span class="ident" id="7918952">Decode</span><span class="op" id="7918958">(</span><span class="ident" id="7918959">x</span><span class="op" id="7918960">)</span><span class="op" id="7918961">;</span>&nbsp;<span class="ident" id="7918963">err</span>&nbsp;<span class="op" id="7918967">!=</span>&nbsp;<span class="ident" id="7918970">nil</span>&nbsp;<span class="op" id="7918974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7918978">t</span><span class="op" id="7918979">.</span><span class="ident" id="7918980">Fatal</span><span class="op" id="7918985">(</span><span class="string" id="7918986">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7919001">,</span>&nbsp;<span class="ident" id="7919003">err</span><span class="op" id="7919006">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919013">if</span>&nbsp;<span class="ident" id="7919016">got</span><span class="op" id="7919019">,</span>&nbsp;<span class="ident" id="7919021">want</span>&nbsp;<span class="op" id="7919026">:=</span>&nbsp;<span class="ident" id="7919029">x</span><span class="op" id="7919030">.</span><span class="ident" id="7919031">V</span><span class="op" id="7919032">,</span>&nbsp;<span class="ident" id="7919034">v</span><span class="op" id="7919035">;</span>&nbsp;<span class="ident" id="7919037">got</span>&nbsp;<span class="op" id="7919041">!=</span>&nbsp;<span class="ident" id="7919044">want</span>&nbsp;<span class="op" id="7919049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919053">t</span><span class="op" id="7919054">.</span><span class="ident" id="7919055">Errorf</span><span class="op" id="7919061">(</span><span class="string" id="7919062">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919079">,</span>&nbsp;<span class="ident" id="7919081">got</span><span class="op" id="7919084">,</span>&nbsp;<span class="ident" id="7919086">want</span><span class="op" id="7919090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919096">if</span>&nbsp;<span class="ident" id="7919099">got</span><span class="op" id="7919102">,</span>&nbsp;<span class="ident" id="7919104">want</span>&nbsp;<span class="op" id="7919109">:=</span>&nbsp;<span class="ident" id="7919112">x</span><span class="op" id="7919113">.</span><span class="ident" id="7919114">W</span><span class="op" id="7919115">,</span>&nbsp;<span class="ident" id="7919117">w</span><span class="op" id="7919118">;</span>&nbsp;<span class="ident" id="7919120">got</span>&nbsp;<span class="op" id="7919124">==</span>&nbsp;<span class="ident" id="7919127">nil</span>&nbsp;<span class="op" id="7919131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919135">t</span><span class="op" id="7919136">.</span><span class="ident" id="7919137">Errorf</span><span class="op" id="7919143">(</span><span class="string" id="7919144">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919162">,</span>&nbsp;<span class="ident" id="7919164">want</span><span class="op" id="7919168">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919171">}</span>&nbsp;<span class="keyword" id="7919173">else</span>&nbsp;<span class="keyword" id="7919178">if</span>&nbsp;<span class="op" id="7919181">*</span><span class="ident" id="7919182">got</span>&nbsp;<span class="op" id="7919186">!=</span>&nbsp;<span class="ident" id="7919189">want</span>&nbsp;<span class="op" id="7919194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919198">t</span><span class="op" id="7919199">.</span><span class="ident" id="7919200">Errorf</span><span class="op" id="7919206">(</span><span class="string" id="7919207">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919224">,</span>&nbsp;<span class="op" id="7919226">*</span><span class="ident" id="7919227">got</span><span class="op" id="7919230">,</span>&nbsp;<span class="ident" id="7919232">want</span><span class="op" id="7919236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919243">if</span>&nbsp;<span class="ident" id="7919246">got</span><span class="op" id="7919249">,</span>&nbsp;<span class="ident" id="7919251">want</span>&nbsp;<span class="op" id="7919256">:=</span>&nbsp;<span class="ident" id="7919259">x</span><span class="op" id="7919260">.</span><span class="ident" id="7919261">BV</span><span class="op" id="7919263">,</span>&nbsp;<span class="ident" id="7919265">bv</span><span class="op" id="7919267">;</span>&nbsp;<span class="ident" id="7919269">got</span>&nbsp;<span class="op" id="7919273">!=</span>&nbsp;<span class="ident" id="7919276">want</span>&nbsp;<span class="op" id="7919281">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919285">t</span><span class="op" id="7919286">.</span><span class="ident" id="7919287">Errorf</span><span class="op" id="7919293">(</span><span class="string" id="7919294">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919312">,</span>&nbsp;<span class="ident" id="7919314">got</span><span class="op" id="7919317">,</span>&nbsp;<span class="ident" id="7919319">want</span><span class="op" id="7919323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919329">if</span>&nbsp;<span class="ident" id="7919332">got</span><span class="op" id="7919335">,</span>&nbsp;<span class="ident" id="7919337">want</span>&nbsp;<span class="op" id="7919342">:=</span>&nbsp;<span class="ident" id="7919345">x</span><span class="op" id="7919346">.</span><span class="ident" id="7919347">BW</span><span class="op" id="7919349">,</span>&nbsp;<span class="ident" id="7919351">bw</span><span class="op" id="7919353">;</span>&nbsp;<span class="ident" id="7919355">got</span>&nbsp;<span class="op" id="7919359">==</span>&nbsp;<span class="ident" id="7919362">nil</span>&nbsp;<span class="op" id="7919366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919370">t</span><span class="op" id="7919371">.</span><span class="ident" id="7919372">Errorf</span><span class="op" id="7919378">(</span><span class="string" id="7919379">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919398">,</span>&nbsp;<span class="ident" id="7919400">want</span><span class="op" id="7919404">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919407">}</span>&nbsp;<span class="keyword" id="7919409">else</span>&nbsp;<span class="keyword" id="7919414">if</span>&nbsp;<span class="op" id="7919417">*</span><span class="ident" id="7919418">got</span>&nbsp;<span class="op" id="7919422">!=</span>&nbsp;<span class="ident" id="7919425">want</span>&nbsp;<span class="op" id="7919430">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919434">t</span><span class="op" id="7919435">.</span><span class="ident" id="7919436">Errorf</span><span class="op" id="7919442">(</span><span class="string" id="7919443">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919461">,</span>&nbsp;<span class="op" id="7919463">*</span><span class="ident" id="7919464">got</span><span class="op" id="7919467">,</span>&nbsp;<span class="ident" id="7919469">want</span><span class="op" id="7919473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919476">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919480">if</span>&nbsp;<span class="ident" id="7919483">got</span><span class="op" id="7919486">,</span>&nbsp;<span class="ident" id="7919488">want</span>&nbsp;<span class="op" id="7919493">:=</span>&nbsp;<span class="ident" id="7919496">x</span><span class="op" id="7919497">.</span><span class="ident" id="7919498">TV</span><span class="op" id="7919500">,</span>&nbsp;<span class="ident" id="7919502">tv</span><span class="op" id="7919504">;</span>&nbsp;<span class="ident" id="7919506">got</span>&nbsp;<span class="op" id="7919510">!=</span>&nbsp;<span class="ident" id="7919513">want</span>&nbsp;<span class="op" id="7919518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919522">t</span><span class="op" id="7919523">.</span><span class="ident" id="7919524">Errorf</span><span class="op" id="7919530">(</span><span class="string" id="7919531">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919549">,</span>&nbsp;<span class="ident" id="7919551">got</span><span class="op" id="7919554">,</span>&nbsp;<span class="ident" id="7919556">want</span><span class="op" id="7919560">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7919566">if</span>&nbsp;<span class="ident" id="7919569">got</span><span class="op" id="7919572">,</span>&nbsp;<span class="ident" id="7919574">want</span>&nbsp;<span class="op" id="7919579">:=</span>&nbsp;<span class="ident" id="7919582">x</span><span class="op" id="7919583">.</span><span class="ident" id="7919584">TW</span><span class="op" id="7919586">,</span>&nbsp;<span class="ident" id="7919588">tw</span><span class="op" id="7919590">;</span>&nbsp;<span class="ident" id="7919592">got</span>&nbsp;<span class="op" id="7919596">==</span>&nbsp;<span class="ident" id="7919599">nil</span>&nbsp;<span class="op" id="7919603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919607">t</span><span class="op" id="7919608">.</span><span class="ident" id="7919609">Errorf</span><span class="op" id="7919615">(</span><span class="string" id="7919616">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919635">,</span>&nbsp;<span class="ident" id="7919637">want</span><span class="op" id="7919641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919644">}</span>&nbsp;<span class="keyword" id="7919646">else</span>&nbsp;<span class="keyword" id="7919651">if</span>&nbsp;<span class="op" id="7919654">*</span><span class="ident" id="7919655">got</span>&nbsp;<span class="op" id="7919659">!=</span>&nbsp;<span class="ident" id="7919662">want</span>&nbsp;<span class="op" id="7919667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919671">t</span><span class="op" id="7919672">.</span><span class="ident" id="7919673">Errorf</span><span class="op" id="7919679">(</span><span class="string" id="7919680">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7919698">,</span>&nbsp;<span class="op" id="7919700">*</span><span class="ident" id="7919701">got</span><span class="op" id="7919704">,</span>&nbsp;<span class="ident" id="7919706">want</span><span class="op" id="7919710">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7919713">}</span><br>
<span class="lineno"></span><span class="op" id="7919715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7919718">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7919786">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="7919816">func</span>&nbsp;<span class="ident" id="7919821">TestGobEncoderPointerThenValue</span><span class="op" id="7919851">(</span><span class="ident" id="7919852">t</span>&nbsp;<span class="op" id="7919854">*</span><span class="ident" id="7919855">testing</span><span class="op" id="7919862">.</span><span class="ident" id="7919863">T</span><span class="op" id="7919864">)</span>&nbsp;<span class="op" id="7919866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919869">v</span>&nbsp;<span class="op" id="7919871">:=</span>&nbsp;<span class="ident" id="7919874">ValueGobber</span><span class="op" id="7919885">(</span><span class="string" id="7919886">&#34;forty-two&#34;</span><span class="op" id="7919897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919900">w</span>&nbsp;<span class="op" id="7919902">:=</span>&nbsp;<span class="ident" id="7919905">ValueGobber</span><span class="op" id="7919916">(</span><span class="string" id="7919917">&#34;six-by-nine&#34;</span><span class="op" id="7919930">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919933">bv</span>&nbsp;<span class="op" id="7919936">:=</span>&nbsp;<span class="ident" id="7919939">BinaryValueGobber</span><span class="op" id="7919956">(</span><span class="string" id="7919957">&#34;1nanocentury&#34;</span><span class="op" id="7919971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7919974">bw</span>&nbsp;<span class="op" id="7919977">:=</span>&nbsp;<span class="ident" id="7919980">BinaryValueGobber</span><span class="op" id="7919997">(</span><span class="string" id="7919998">&#34;πseconds&#34;</span><span class="op" id="7920009">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920012">tv</span>&nbsp;<span class="op" id="7920015">:=</span>&nbsp;<span class="ident" id="7920018">TextValueGobber</span><span class="op" id="7920033">(</span><span class="string" id="7920034">&#34;gravitationalacceleration&#34;</span><span class="op" id="7920061">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920064">tw</span>&nbsp;<span class="op" id="7920067">:=</span>&nbsp;<span class="ident" id="7920070">TextValueGobber</span><span class="op" id="7920085">(</span><span class="string" id="7920086">&#34;π²ft/s²&#34;</span><span class="op" id="7920098">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920102">b</span>&nbsp;<span class="op" id="7920104">:=</span>&nbsp;<span class="builtinfunc" id="7920107">new</span><span class="op" id="7920110">(</span><span class="ident" id="7920111">bytes</span><span class="op" id="7920116">.</span><span class="ident" id="7920117">Buffer</span><span class="op" id="7920123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920126">enc</span>&nbsp;<span class="op" id="7920130">:=</span>&nbsp;<span class="ident" id="7920133">NewEncoder</span><span class="op" id="7920143">(</span><span class="ident" id="7920144">b</span><span class="op" id="7920145">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920148">if</span>&nbsp;<span class="ident" id="7920151">err</span>&nbsp;<span class="op" id="7920155">:=</span>&nbsp;<span class="ident" id="7920158">enc</span><span class="op" id="7920161">.</span><span class="ident" id="7920162">Encode</span><span class="op" id="7920168">(</span><span class="ident" id="7920169">GobTest7</span><span class="op" id="7920177">{</span><span class="num" id="7920178">42</span><span class="op" id="7920180">,</span>&nbsp;<span class="op" id="7920182">&amp;</span><span class="ident" id="7920183">v</span><span class="op" id="7920184">,</span>&nbsp;<span class="ident" id="7920186">w</span><span class="op" id="7920187">,</span>&nbsp;<span class="op" id="7920189">&amp;</span><span class="ident" id="7920190">bv</span><span class="op" id="7920192">,</span>&nbsp;<span class="ident" id="7920194">bw</span><span class="op" id="7920196">,</span>&nbsp;<span class="op" id="7920198">&amp;</span><span class="ident" id="7920199">tv</span><span class="op" id="7920201">,</span>&nbsp;<span class="ident" id="7920203">tw</span><span class="op" id="7920205">}</span><span class="op" id="7920206">)</span><span class="op" id="7920207">;</span>&nbsp;<span class="ident" id="7920209">err</span>&nbsp;<span class="op" id="7920213">!=</span>&nbsp;<span class="ident" id="7920216">nil</span>&nbsp;<span class="op" id="7920220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920224">t</span><span class="op" id="7920225">.</span><span class="ident" id="7920226">Fatal</span><span class="op" id="7920231">(</span><span class="string" id="7920232">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7920247">,</span>&nbsp;<span class="ident" id="7920249">err</span><span class="op" id="7920252">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920255">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920258">dec</span>&nbsp;<span class="op" id="7920262">:=</span>&nbsp;<span class="ident" id="7920265">NewDecoder</span><span class="op" id="7920275">(</span><span class="ident" id="7920276">b</span><span class="op" id="7920277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920280">x</span>&nbsp;<span class="op" id="7920282">:=</span>&nbsp;<span class="builtinfunc" id="7920285">new</span><span class="op" id="7920288">(</span><span class="ident" id="7920289">GobTest7</span><span class="op" id="7920297">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920300">if</span>&nbsp;<span class="ident" id="7920303">err</span>&nbsp;<span class="op" id="7920307">:=</span>&nbsp;<span class="ident" id="7920310">dec</span><span class="op" id="7920313">.</span><span class="ident" id="7920314">Decode</span><span class="op" id="7920320">(</span><span class="ident" id="7920321">x</span><span class="op" id="7920322">)</span><span class="op" id="7920323">;</span>&nbsp;<span class="ident" id="7920325">err</span>&nbsp;<span class="op" id="7920329">!=</span>&nbsp;<span class="ident" id="7920332">nil</span>&nbsp;<span class="op" id="7920336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920340">t</span><span class="op" id="7920341">.</span><span class="ident" id="7920342">Fatal</span><span class="op" id="7920347">(</span><span class="string" id="7920348">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7920363">,</span>&nbsp;<span class="ident" id="7920365">err</span><span class="op" id="7920368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920375">if</span>&nbsp;<span class="ident" id="7920378">got</span><span class="op" id="7920381">,</span>&nbsp;<span class="ident" id="7920383">want</span>&nbsp;<span class="op" id="7920388">:=</span>&nbsp;<span class="ident" id="7920391">x</span><span class="op" id="7920392">.</span><span class="ident" id="7920393">V</span><span class="op" id="7920394">,</span>&nbsp;<span class="ident" id="7920396">v</span><span class="op" id="7920397">;</span>&nbsp;<span class="ident" id="7920399">got</span>&nbsp;<span class="op" id="7920403">==</span>&nbsp;<span class="ident" id="7920406">nil</span>&nbsp;<span class="op" id="7920410">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920414">t</span><span class="op" id="7920415">.</span><span class="ident" id="7920416">Errorf</span><span class="op" id="7920422">(</span><span class="string" id="7920423">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920441">,</span>&nbsp;<span class="ident" id="7920443">want</span><span class="op" id="7920447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920450">}</span>&nbsp;<span class="keyword" id="7920452">else</span>&nbsp;<span class="keyword" id="7920457">if</span>&nbsp;<span class="op" id="7920460">*</span><span class="ident" id="7920461">got</span>&nbsp;<span class="op" id="7920465">!=</span>&nbsp;<span class="ident" id="7920468">want</span>&nbsp;<span class="op" id="7920473">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920477">t</span><span class="op" id="7920478">.</span><span class="ident" id="7920479">Errorf</span><span class="op" id="7920485">(</span><span class="string" id="7920486">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920503">,</span>&nbsp;<span class="op" id="7920505">*</span><span class="ident" id="7920506">got</span><span class="op" id="7920509">,</span>&nbsp;<span class="ident" id="7920511">want</span><span class="op" id="7920515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920521">if</span>&nbsp;<span class="ident" id="7920524">got</span><span class="op" id="7920527">,</span>&nbsp;<span class="ident" id="7920529">want</span>&nbsp;<span class="op" id="7920534">:=</span>&nbsp;<span class="ident" id="7920537">x</span><span class="op" id="7920538">.</span><span class="ident" id="7920539">W</span><span class="op" id="7920540">,</span>&nbsp;<span class="ident" id="7920542">w</span><span class="op" id="7920543">;</span>&nbsp;<span class="ident" id="7920545">got</span>&nbsp;<span class="op" id="7920549">!=</span>&nbsp;<span class="ident" id="7920552">want</span>&nbsp;<span class="op" id="7920557">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920561">t</span><span class="op" id="7920562">.</span><span class="ident" id="7920563">Errorf</span><span class="op" id="7920569">(</span><span class="string" id="7920570">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920587">,</span>&nbsp;<span class="ident" id="7920589">got</span><span class="op" id="7920592">,</span>&nbsp;<span class="ident" id="7920594">want</span><span class="op" id="7920598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920601">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920605">if</span>&nbsp;<span class="ident" id="7920608">got</span><span class="op" id="7920611">,</span>&nbsp;<span class="ident" id="7920613">want</span>&nbsp;<span class="op" id="7920618">:=</span>&nbsp;<span class="ident" id="7920621">x</span><span class="op" id="7920622">.</span><span class="ident" id="7920623">BV</span><span class="op" id="7920625">,</span>&nbsp;<span class="ident" id="7920627">bv</span><span class="op" id="7920629">;</span>&nbsp;<span class="ident" id="7920631">got</span>&nbsp;<span class="op" id="7920635">==</span>&nbsp;<span class="ident" id="7920638">nil</span>&nbsp;<span class="op" id="7920642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920646">t</span><span class="op" id="7920647">.</span><span class="ident" id="7920648">Errorf</span><span class="op" id="7920654">(</span><span class="string" id="7920655">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920674">,</span>&nbsp;<span class="ident" id="7920676">want</span><span class="op" id="7920680">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920683">}</span>&nbsp;<span class="keyword" id="7920685">else</span>&nbsp;<span class="keyword" id="7920690">if</span>&nbsp;<span class="op" id="7920693">*</span><span class="ident" id="7920694">got</span>&nbsp;<span class="op" id="7920698">!=</span>&nbsp;<span class="ident" id="7920701">want</span>&nbsp;<span class="op" id="7920706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920710">t</span><span class="op" id="7920711">.</span><span class="ident" id="7920712">Errorf</span><span class="op" id="7920718">(</span><span class="string" id="7920719">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920737">,</span>&nbsp;<span class="op" id="7920739">*</span><span class="ident" id="7920740">got</span><span class="op" id="7920743">,</span>&nbsp;<span class="ident" id="7920745">want</span><span class="op" id="7920749">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920752">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920755">if</span>&nbsp;<span class="ident" id="7920758">got</span><span class="op" id="7920761">,</span>&nbsp;<span class="ident" id="7920763">want</span>&nbsp;<span class="op" id="7920768">:=</span>&nbsp;<span class="ident" id="7920771">x</span><span class="op" id="7920772">.</span><span class="ident" id="7920773">BW</span><span class="op" id="7920775">,</span>&nbsp;<span class="ident" id="7920777">bw</span><span class="op" id="7920779">;</span>&nbsp;<span class="ident" id="7920781">got</span>&nbsp;<span class="op" id="7920785">!=</span>&nbsp;<span class="ident" id="7920788">want</span>&nbsp;<span class="op" id="7920793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920797">t</span><span class="op" id="7920798">.</span><span class="ident" id="7920799">Errorf</span><span class="op" id="7920805">(</span><span class="string" id="7920806">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920824">,</span>&nbsp;<span class="ident" id="7920826">got</span><span class="op" id="7920829">,</span>&nbsp;<span class="ident" id="7920831">want</span><span class="op" id="7920835">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920842">if</span>&nbsp;<span class="ident" id="7920845">got</span><span class="op" id="7920848">,</span>&nbsp;<span class="ident" id="7920850">want</span>&nbsp;<span class="op" id="7920855">:=</span>&nbsp;<span class="ident" id="7920858">x</span><span class="op" id="7920859">.</span><span class="ident" id="7920860">TV</span><span class="op" id="7920862">,</span>&nbsp;<span class="ident" id="7920864">tv</span><span class="op" id="7920866">;</span>&nbsp;<span class="ident" id="7920868">got</span>&nbsp;<span class="op" id="7920872">==</span>&nbsp;<span class="ident" id="7920875">nil</span>&nbsp;<span class="op" id="7920879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920883">t</span><span class="op" id="7920884">.</span><span class="ident" id="7920885">Errorf</span><span class="op" id="7920891">(</span><span class="string" id="7920892">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920911">,</span>&nbsp;<span class="ident" id="7920913">want</span><span class="op" id="7920917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920920">}</span>&nbsp;<span class="keyword" id="7920922">else</span>&nbsp;<span class="keyword" id="7920927">if</span>&nbsp;<span class="op" id="7920930">*</span><span class="ident" id="7920931">got</span>&nbsp;<span class="op" id="7920935">!=</span>&nbsp;<span class="ident" id="7920938">want</span>&nbsp;<span class="op" id="7920943">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7920947">t</span><span class="op" id="7920948">.</span><span class="ident" id="7920949">Errorf</span><span class="op" id="7920955">(</span><span class="string" id="7920956">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7920974">,</span>&nbsp;<span class="op" id="7920976">*</span><span class="ident" id="7920977">got</span><span class="op" id="7920980">,</span>&nbsp;<span class="ident" id="7920982">want</span><span class="op" id="7920986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7920989">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7920992">if</span>&nbsp;<span class="ident" id="7920995">got</span><span class="op" id="7920998">,</span>&nbsp;<span class="ident" id="7921000">want</span>&nbsp;<span class="op" id="7921005">:=</span>&nbsp;<span class="ident" id="7921008">x</span><span class="op" id="7921009">.</span><span class="ident" id="7921010">TW</span><span class="op" id="7921012">,</span>&nbsp;<span class="ident" id="7921014">tw</span><span class="op" id="7921016">;</span>&nbsp;<span class="ident" id="7921018">got</span>&nbsp;<span class="op" id="7921022">!=</span>&nbsp;<span class="ident" id="7921025">want</span>&nbsp;<span class="op" id="7921030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921034">t</span><span class="op" id="7921035">.</span><span class="ident" id="7921036">Errorf</span><span class="op" id="7921042">(</span><span class="string" id="7921043">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7921061">,</span>&nbsp;<span class="ident" id="7921063">got</span><span class="op" id="7921066">,</span>&nbsp;<span class="ident" id="7921068">want</span><span class="op" id="7921072">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921075">}</span><br>
<span class="lineno">535</span><span class="op" id="7921077">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7921080">func</span>&nbsp;<span class="ident" id="7921085">TestGobEncoderFieldTypeError</span><span class="op" id="7921113">(</span><span class="ident" id="7921114">t</span>&nbsp;<span class="op" id="7921116">*</span><span class="ident" id="7921117">testing</span><span class="op" id="7921124">.</span><span class="ident" id="7921125">T</span><span class="op" id="7921126">)</span>&nbsp;<span class="op" id="7921128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921131">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921168">b</span>&nbsp;<span class="op" id="7921170">:=</span>&nbsp;<span class="builtinfunc" id="7921173">new</span><span class="op" id="7921176">(</span><span class="ident" id="7921177">bytes</span><span class="op" id="7921182">.</span><span class="ident" id="7921183">Buffer</span><span class="op" id="7921189">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921192">enc</span>&nbsp;<span class="op" id="7921196">:=</span>&nbsp;<span class="ident" id="7921199">NewEncoder</span><span class="op" id="7921209">(</span><span class="ident" id="7921210">b</span><span class="op" id="7921211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921214">err</span>&nbsp;<span class="op" id="7921218">:=</span>&nbsp;<span class="ident" id="7921221">enc</span><span class="op" id="7921224">.</span><span class="ident" id="7921225">Encode</span><span class="op" id="7921231">(</span><span class="ident" id="7921232">GobTest1</span><span class="op" id="7921240">{</span><span class="num" id="7921241">17</span><span class="op" id="7921243">,</span>&nbsp;<span class="op" id="7921245">&amp;</span><span class="ident" id="7921246">StringStruct</span><span class="op" id="7921258">{</span><span class="string" id="7921259">&#34;ABC&#34;</span><span class="op" id="7921264">}</span><span class="op" id="7921265">}</span><span class="op" id="7921266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921269">if</span>&nbsp;<span class="ident" id="7921272">err</span>&nbsp;<span class="op" id="7921276">!=</span>&nbsp;<span class="ident" id="7921279">nil</span>&nbsp;<span class="op" id="7921283">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921287">t</span><span class="op" id="7921288">.</span><span class="ident" id="7921289">Fatal</span><span class="op" id="7921294">(</span><span class="string" id="7921295">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7921310">,</span>&nbsp;<span class="ident" id="7921312">err</span><span class="op" id="7921315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921318">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921321">dec</span>&nbsp;<span class="op" id="7921325">:=</span>&nbsp;<span class="ident" id="7921328">NewDecoder</span><span class="op" id="7921338">(</span><span class="ident" id="7921339">b</span><span class="op" id="7921340">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921343">x</span>&nbsp;<span class="op" id="7921345">:=</span>&nbsp;<span class="op" id="7921348">&amp;</span><span class="ident" id="7921349">GobTest2</span><span class="op" id="7921357">{</span><span class="op" id="7921358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921361">err</span>&nbsp;<span class="op" id="7921365">=</span>&nbsp;<span class="ident" id="7921367">dec</span><span class="op" id="7921370">.</span><span class="ident" id="7921371">Decode</span><span class="op" id="7921377">(</span><span class="ident" id="7921378">x</span><span class="op" id="7921379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921382">if</span>&nbsp;<span class="ident" id="7921385">err</span>&nbsp;<span class="op" id="7921389">==</span>&nbsp;<span class="ident" id="7921392">nil</span>&nbsp;<span class="op" id="7921396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921400">t</span><span class="op" id="7921401">.</span><span class="ident" id="7921402">Fatal</span><span class="op" id="7921407">(</span><span class="string" id="7921408">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="7921478">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921481">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921484">if</span>&nbsp;<span class="ident" id="7921487">strings</span><span class="op" id="7921494">.</span><span class="ident" id="7921495">Index</span><span class="op" id="7921500">(</span><span class="ident" id="7921501">err</span><span class="op" id="7921504">.</span><span class="ident" id="7921505">Error</span><span class="op" id="7921510">(</span><span class="op" id="7921511">)</span><span class="op" id="7921512">,</span>&nbsp;<span class="string" id="7921514">&#34;type&#34;</span><span class="op" id="7921520">)</span>&nbsp;<span class="op" id="7921522">&lt;</span>&nbsp;<span class="num" id="7921524">0</span>&nbsp;<span class="op" id="7921526">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921530">t</span><span class="op" id="7921531">.</span><span class="ident" id="7921532">Fatal</span><span class="op" id="7921537">(</span><span class="string" id="7921538">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7921564">,</span>&nbsp;<span class="ident" id="7921566">err</span><span class="op" id="7921569">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921572">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7921575">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921612">b</span><span class="op" id="7921613">.</span><span class="ident" id="7921614">Reset</span><span class="op" id="7921619">(</span><span class="op" id="7921620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921623">err</span>&nbsp;<span class="op" id="7921627">=</span>&nbsp;<span class="ident" id="7921629">enc</span><span class="op" id="7921632">.</span><span class="ident" id="7921633">Encode</span><span class="op" id="7921639">(</span><span class="ident" id="7921640">GobTest2</span><span class="op" id="7921648">{</span><span class="num" id="7921649">17</span><span class="op" id="7921651">,</span>&nbsp;<span class="string" id="7921653">&#34;ABC&#34;</span><span class="op" id="7921658">}</span><span class="op" id="7921659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921662">if</span>&nbsp;<span class="ident" id="7921665">err</span>&nbsp;<span class="op" id="7921669">!=</span>&nbsp;<span class="ident" id="7921672">nil</span>&nbsp;<span class="op" id="7921676">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921680">t</span><span class="op" id="7921681">.</span><span class="ident" id="7921682">Fatal</span><span class="op" id="7921687">(</span><span class="string" id="7921688">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7921703">,</span>&nbsp;<span class="ident" id="7921705">err</span><span class="op" id="7921708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921711">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921714">y</span>&nbsp;<span class="op" id="7921716">:=</span>&nbsp;<span class="op" id="7921719">&amp;</span><span class="ident" id="7921720">GobTest1</span><span class="op" id="7921728">{</span><span class="op" id="7921729">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921732">err</span>&nbsp;<span class="op" id="7921736">=</span>&nbsp;<span class="ident" id="7921738">dec</span><span class="op" id="7921741">.</span><span class="ident" id="7921742">Decode</span><span class="op" id="7921748">(</span><span class="ident" id="7921749">y</span><span class="op" id="7921750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921753">if</span>&nbsp;<span class="ident" id="7921756">err</span>&nbsp;<span class="op" id="7921760">==</span>&nbsp;<span class="ident" id="7921763">nil</span>&nbsp;<span class="op" id="7921767">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921771">t</span><span class="op" id="7921772">.</span><span class="ident" id="7921773">Fatal</span><span class="op" id="7921778">(</span><span class="string" id="7921779">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="7921849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921852">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7921855">if</span>&nbsp;<span class="ident" id="7921858">strings</span><span class="op" id="7921865">.</span><span class="ident" id="7921866">Index</span><span class="op" id="7921871">(</span><span class="ident" id="7921872">err</span><span class="op" id="7921875">.</span><span class="ident" id="7921876">Error</span><span class="op" id="7921881">(</span><span class="op" id="7921882">)</span><span class="op" id="7921883">,</span>&nbsp;<span class="string" id="7921885">&#34;type&#34;</span><span class="op" id="7921891">)</span>&nbsp;<span class="op" id="7921893">&lt;</span>&nbsp;<span class="num" id="7921895">0</span>&nbsp;<span class="op" id="7921897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7921901">t</span><span class="op" id="7921902">.</span><span class="ident" id="7921903">Fatal</span><span class="op" id="7921908">(</span><span class="string" id="7921909">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7921935">,</span>&nbsp;<span class="ident" id="7921937">err</span><span class="op" id="7921940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7921943">}</span><br>
<span class="lineno"></span><span class="op" id="7921945">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="7921948">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="7922033">func</span>&nbsp;<span class="ident" id="7922038">TestGobEncoderStructSingleton</span><span class="op" id="7922067">(</span><span class="ident" id="7922068">t</span>&nbsp;<span class="op" id="7922070">*</span><span class="ident" id="7922071">testing</span><span class="op" id="7922078">.</span><span class="ident" id="7922079">T</span><span class="op" id="7922080">)</span>&nbsp;<span class="op" id="7922082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922085">b</span>&nbsp;<span class="op" id="7922087">:=</span>&nbsp;<span class="builtinfunc" id="7922090">new</span><span class="op" id="7922093">(</span><span class="ident" id="7922094">bytes</span><span class="op" id="7922099">.</span><span class="ident" id="7922100">Buffer</span><span class="op" id="7922106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922109">enc</span>&nbsp;<span class="op" id="7922113">:=</span>&nbsp;<span class="ident" id="7922116">NewEncoder</span><span class="op" id="7922126">(</span><span class="ident" id="7922127">b</span><span class="op" id="7922128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922131">err</span>&nbsp;<span class="op" id="7922135">:=</span>&nbsp;<span class="ident" id="7922138">enc</span><span class="op" id="7922141">.</span><span class="ident" id="7922142">Encode</span><span class="op" id="7922148">(</span><span class="op" id="7922149">&amp;</span><span class="ident" id="7922150">ByteStruct</span><span class="op" id="7922160">{</span><span class="string" id="7922161">&#39;A&#39;</span><span class="op" id="7922164">}</span><span class="op" id="7922165">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922168">if</span>&nbsp;<span class="ident" id="7922171">err</span>&nbsp;<span class="op" id="7922175">!=</span>&nbsp;<span class="ident" id="7922178">nil</span>&nbsp;<span class="op" id="7922182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922186">t</span><span class="op" id="7922187">.</span><span class="ident" id="7922188">Fatal</span><span class="op" id="7922193">(</span><span class="string" id="7922194">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7922209">,</span>&nbsp;<span class="ident" id="7922211">err</span><span class="op" id="7922214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922220">dec</span>&nbsp;<span class="op" id="7922224">:=</span>&nbsp;<span class="ident" id="7922227">NewDecoder</span><span class="op" id="7922237">(</span><span class="ident" id="7922238">b</span><span class="op" id="7922239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922242">x</span>&nbsp;<span class="op" id="7922244">:=</span>&nbsp;<span class="builtinfunc" id="7922247">new</span><span class="op" id="7922250">(</span><span class="ident" id="7922251">ByteStruct</span><span class="op" id="7922261">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922264">err</span>&nbsp;<span class="op" id="7922268">=</span>&nbsp;<span class="ident" id="7922270">dec</span><span class="op" id="7922273">.</span><span class="ident" id="7922274">Decode</span><span class="op" id="7922280">(</span><span class="ident" id="7922281">x</span><span class="op" id="7922282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922285">if</span>&nbsp;<span class="ident" id="7922288">err</span>&nbsp;<span class="op" id="7922292">!=</span>&nbsp;<span class="ident" id="7922295">nil</span>&nbsp;<span class="op" id="7922299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922303">t</span><span class="op" id="7922304">.</span><span class="ident" id="7922305">Fatal</span><span class="op" id="7922310">(</span><span class="string" id="7922311">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7922326">,</span>&nbsp;<span class="ident" id="7922328">err</span><span class="op" id="7922331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922337">if</span>&nbsp;<span class="ident" id="7922340">x</span><span class="op" id="7922341">.</span><span class="ident" id="7922342">a</span>&nbsp;<span class="op" id="7922344">!=</span>&nbsp;<span class="string" id="7922347">&#39;A&#39;</span>&nbsp;<span class="op" id="7922351">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922355">t</span><span class="op" id="7922356">.</span><span class="ident" id="7922357">Errorf</span><span class="op" id="7922363">(</span><span class="string" id="7922364">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7922385">,</span>&nbsp;<span class="ident" id="7922387">x</span><span class="op" id="7922388">.</span><span class="ident" id="7922389">a</span><span class="op" id="7922390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922393">}</span><br>
<span class="lineno"></span><span class="op" id="7922395">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7922398">func</span>&nbsp;<span class="ident" id="7922403">TestGobEncoderNonStructSingleton</span><span class="op" id="7922435">(</span><span class="ident" id="7922436">t</span>&nbsp;<span class="op" id="7922438">*</span><span class="ident" id="7922439">testing</span><span class="op" id="7922446">.</span><span class="ident" id="7922447">T</span><span class="op" id="7922448">)</span>&nbsp;<span class="op" id="7922450">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922453">b</span>&nbsp;<span class="op" id="7922455">:=</span>&nbsp;<span class="builtinfunc" id="7922458">new</span><span class="op" id="7922461">(</span><span class="ident" id="7922462">bytes</span><span class="op" id="7922467">.</span><span class="ident" id="7922468">Buffer</span><span class="op" id="7922474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922477">enc</span>&nbsp;<span class="op" id="7922481">:=</span>&nbsp;<span class="ident" id="7922484">NewEncoder</span><span class="op" id="7922494">(</span><span class="ident" id="7922495">b</span><span class="op" id="7922496">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922499">var</span>&nbsp;<span class="ident" id="7922503">g</span>&nbsp;<span class="ident" id="7922505">Gobber</span>&nbsp;<span class="op" id="7922512">=</span>&nbsp;<span class="num" id="7922514">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922520">err</span>&nbsp;<span class="op" id="7922524">:=</span>&nbsp;<span class="ident" id="7922527">enc</span><span class="op" id="7922530">.</span><span class="ident" id="7922531">Encode</span><span class="op" id="7922537">(</span><span class="op" id="7922538">&amp;</span><span class="ident" id="7922539">g</span><span class="op" id="7922540">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922543">if</span>&nbsp;<span class="ident" id="7922546">err</span>&nbsp;<span class="op" id="7922550">!=</span>&nbsp;<span class="ident" id="7922553">nil</span>&nbsp;<span class="op" id="7922557">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922561">t</span><span class="op" id="7922562">.</span><span class="ident" id="7922563">Fatal</span><span class="op" id="7922568">(</span><span class="string" id="7922569">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7922584">,</span>&nbsp;<span class="ident" id="7922586">err</span><span class="op" id="7922589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922592">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922595">dec</span>&nbsp;<span class="op" id="7922599">:=</span>&nbsp;<span class="ident" id="7922602">NewDecoder</span><span class="op" id="7922612">(</span><span class="ident" id="7922613">b</span><span class="op" id="7922614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922617">var</span>&nbsp;<span class="ident" id="7922621">x</span>&nbsp;<span class="ident" id="7922623">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922631">err</span>&nbsp;<span class="op" id="7922635">=</span>&nbsp;<span class="ident" id="7922637">dec</span><span class="op" id="7922640">.</span><span class="ident" id="7922641">Decode</span><span class="op" id="7922647">(</span><span class="op" id="7922648">&amp;</span><span class="ident" id="7922649">x</span><span class="op" id="7922650">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922653">if</span>&nbsp;<span class="ident" id="7922656">err</span>&nbsp;<span class="op" id="7922660">!=</span>&nbsp;<span class="ident" id="7922663">nil</span>&nbsp;<span class="op" id="7922667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922671">t</span><span class="op" id="7922672">.</span><span class="ident" id="7922673">Fatal</span><span class="op" id="7922678">(</span><span class="string" id="7922679">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7922694">,</span>&nbsp;<span class="ident" id="7922696">err</span><span class="op" id="7922699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922705">if</span>&nbsp;<span class="ident" id="7922708">x</span>&nbsp;<span class="op" id="7922710">!=</span>&nbsp;<span class="num" id="7922713">1234</span>&nbsp;<span class="op" id="7922718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922722">t</span><span class="op" id="7922723">.</span><span class="ident" id="7922724">Errorf</span><span class="op" id="7922730">(</span><span class="string" id="7922731">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7922753">,</span>&nbsp;<span class="ident" id="7922755">x</span><span class="op" id="7922756">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7922759">}</span><br>
<span class="lineno"></span><span class="op" id="7922761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7922764">func</span>&nbsp;<span class="ident" id="7922769">TestGobEncoderIgnoreStructField</span><span class="op" id="7922800">(</span><span class="ident" id="7922801">t</span>&nbsp;<span class="op" id="7922803">*</span><span class="ident" id="7922804">testing</span><span class="op" id="7922811">.</span><span class="ident" id="7922812">T</span><span class="op" id="7922813">)</span>&nbsp;<span class="op" id="7922815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922818">b</span>&nbsp;<span class="op" id="7922820">:=</span>&nbsp;<span class="builtinfunc" id="7922823">new</span><span class="op" id="7922826">(</span><span class="ident" id="7922827">bytes</span><span class="op" id="7922832">.</span><span class="ident" id="7922833">Buffer</span><span class="op" id="7922839">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7922842">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922880">enc</span>&nbsp;<span class="op" id="7922884">:=</span>&nbsp;<span class="ident" id="7922887">NewEncoder</span><span class="op" id="7922897">(</span><span class="ident" id="7922898">b</span><span class="op" id="7922899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922902">err</span>&nbsp;<span class="op" id="7922906">:=</span>&nbsp;<span class="ident" id="7922909">enc</span><span class="op" id="7922912">.</span><span class="ident" id="7922913">Encode</span><span class="op" id="7922919">(</span><span class="ident" id="7922920">GobTest0</span><span class="op" id="7922928">{</span><span class="num" id="7922929">17</span><span class="op" id="7922931">,</span>&nbsp;<span class="op" id="7922933">&amp;</span><span class="ident" id="7922934">ByteStruct</span><span class="op" id="7922944">{</span><span class="string" id="7922945">&#39;A&#39;</span><span class="op" id="7922948">}</span><span class="op" id="7922949">}</span><span class="op" id="7922950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7922953">if</span>&nbsp;<span class="ident" id="7922956">err</span>&nbsp;<span class="op" id="7922960">!=</span>&nbsp;<span class="ident" id="7922963">nil</span>&nbsp;<span class="op" id="7922967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7922971">t</span><span class="op" id="7922972">.</span><span class="ident" id="7922973">Fatal</span><span class="op" id="7922978">(</span><span class="string" id="7922979">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7922994">,</span>&nbsp;<span class="ident" id="7922996">err</span><span class="op" id="7922999">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923005">dec</span>&nbsp;<span class="op" id="7923009">:=</span>&nbsp;<span class="ident" id="7923012">NewDecoder</span><span class="op" id="7923022">(</span><span class="ident" id="7923023">b</span><span class="op" id="7923024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923027">x</span>&nbsp;<span class="op" id="7923029">:=</span>&nbsp;<span class="builtinfunc" id="7923032">new</span><span class="op" id="7923035">(</span><span class="ident" id="7923036">GobTestIgnoreEncoder</span><span class="op" id="7923056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923059">err</span>&nbsp;<span class="op" id="7923063">=</span>&nbsp;<span class="ident" id="7923065">dec</span><span class="op" id="7923068">.</span><span class="ident" id="7923069">Decode</span><span class="op" id="7923075">(</span><span class="ident" id="7923076">x</span><span class="op" id="7923077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923080">if</span>&nbsp;<span class="ident" id="7923083">err</span>&nbsp;<span class="op" id="7923087">!=</span>&nbsp;<span class="ident" id="7923090">nil</span>&nbsp;<span class="op" id="7923094">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923098">t</span><span class="op" id="7923099">.</span><span class="ident" id="7923100">Fatal</span><span class="op" id="7923105">(</span><span class="string" id="7923106">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7923121">,</span>&nbsp;<span class="ident" id="7923123">err</span><span class="op" id="7923126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923132">if</span>&nbsp;<span class="ident" id="7923135">x</span><span class="op" id="7923136">.</span><span class="ident" id="7923137">X</span>&nbsp;<span class="op" id="7923139">!=</span>&nbsp;<span class="num" id="7923142">17</span>&nbsp;<span class="op" id="7923145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923149">t</span><span class="op" id="7923150">.</span><span class="ident" id="7923151">Errorf</span><span class="op" id="7923157">(</span><span class="string" id="7923158">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7923178">,</span>&nbsp;<span class="ident" id="7923180">x</span><span class="op" id="7923181">.</span><span class="ident" id="7923182">X</span><span class="op" id="7923183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923186">}</span><br>
<span class="lineno">625</span><span class="op" id="7923188">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7923191">func</span>&nbsp;<span class="ident" id="7923196">TestGobEncoderIgnoreNonStructField</span><span class="op" id="7923230">(</span><span class="ident" id="7923231">t</span>&nbsp;<span class="op" id="7923233">*</span><span class="ident" id="7923234">testing</span><span class="op" id="7923241">.</span><span class="ident" id="7923242">T</span><span class="op" id="7923243">)</span>&nbsp;<span class="op" id="7923245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923248">b</span>&nbsp;<span class="op" id="7923250">:=</span>&nbsp;<span class="builtinfunc" id="7923253">new</span><span class="op" id="7923256">(</span><span class="ident" id="7923257">bytes</span><span class="op" id="7923262">.</span><span class="ident" id="7923263">Buffer</span><span class="op" id="7923269">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923272">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923310">enc</span>&nbsp;<span class="op" id="7923314">:=</span>&nbsp;<span class="ident" id="7923317">NewEncoder</span><span class="op" id="7923327">(</span><span class="ident" id="7923328">b</span><span class="op" id="7923329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923332">gobber</span>&nbsp;<span class="op" id="7923339">:=</span>&nbsp;<span class="ident" id="7923342">Gobber</span><span class="op" id="7923348">(</span><span class="num" id="7923349">23</span><span class="op" id="7923351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923354">bgobber</span>&nbsp;<span class="op" id="7923362">:=</span>&nbsp;<span class="ident" id="7923365">BinaryGobber</span><span class="op" id="7923377">(</span><span class="num" id="7923378">24</span><span class="op" id="7923380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923383">tgobber</span>&nbsp;<span class="op" id="7923391">:=</span>&nbsp;<span class="ident" id="7923394">TextGobber</span><span class="op" id="7923404">(</span><span class="num" id="7923405">25</span><span class="op" id="7923407">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923410">err</span>&nbsp;<span class="op" id="7923414">:=</span>&nbsp;<span class="ident" id="7923417">enc</span><span class="op" id="7923420">.</span><span class="ident" id="7923421">Encode</span><span class="op" id="7923427">(</span><span class="ident" id="7923428">GobTest3</span><span class="op" id="7923436">{</span><span class="num" id="7923437">17</span><span class="op" id="7923439">,</span>&nbsp;<span class="op" id="7923441">&amp;</span><span class="ident" id="7923442">gobber</span><span class="op" id="7923448">,</span>&nbsp;<span class="op" id="7923450">&amp;</span><span class="ident" id="7923451">bgobber</span><span class="op" id="7923458">,</span>&nbsp;<span class="op" id="7923460">&amp;</span><span class="ident" id="7923461">tgobber</span><span class="op" id="7923468">}</span><span class="op" id="7923469">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923472">if</span>&nbsp;<span class="ident" id="7923475">err</span>&nbsp;<span class="op" id="7923479">!=</span>&nbsp;<span class="ident" id="7923482">nil</span>&nbsp;<span class="op" id="7923486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923490">t</span><span class="op" id="7923491">.</span><span class="ident" id="7923492">Fatal</span><span class="op" id="7923497">(</span><span class="string" id="7923498">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7923513">,</span>&nbsp;<span class="ident" id="7923515">err</span><span class="op" id="7923518">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923521">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923524">dec</span>&nbsp;<span class="op" id="7923528">:=</span>&nbsp;<span class="ident" id="7923531">NewDecoder</span><span class="op" id="7923541">(</span><span class="ident" id="7923542">b</span><span class="op" id="7923543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923546">x</span>&nbsp;<span class="op" id="7923548">:=</span>&nbsp;<span class="builtinfunc" id="7923551">new</span><span class="op" id="7923554">(</span><span class="ident" id="7923555">GobTestIgnoreEncoder</span><span class="op" id="7923575">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923578">err</span>&nbsp;<span class="op" id="7923582">=</span>&nbsp;<span class="ident" id="7923584">dec</span><span class="op" id="7923587">.</span><span class="ident" id="7923588">Decode</span><span class="op" id="7923594">(</span><span class="ident" id="7923595">x</span><span class="op" id="7923596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923599">if</span>&nbsp;<span class="ident" id="7923602">err</span>&nbsp;<span class="op" id="7923606">!=</span>&nbsp;<span class="ident" id="7923609">nil</span>&nbsp;<span class="op" id="7923613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923617">t</span><span class="op" id="7923618">.</span><span class="ident" id="7923619">Fatal</span><span class="op" id="7923624">(</span><span class="string" id="7923625">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7923640">,</span>&nbsp;<span class="ident" id="7923642">err</span><span class="op" id="7923645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923651">if</span>&nbsp;<span class="ident" id="7923654">x</span><span class="op" id="7923655">.</span><span class="ident" id="7923656">X</span>&nbsp;<span class="op" id="7923658">!=</span>&nbsp;<span class="num" id="7923661">17</span>&nbsp;<span class="op" id="7923664">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923668">t</span><span class="op" id="7923669">.</span><span class="ident" id="7923670">Errorf</span><span class="op" id="7923676">(</span><span class="string" id="7923677">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7923697">,</span>&nbsp;<span class="ident" id="7923699">x</span><span class="op" id="7923700">.</span><span class="ident" id="7923701">X</span><span class="op" id="7923702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923705">}</span><br>
<span class="lineno"></span><span class="op" id="7923707">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7923710">func</span>&nbsp;<span class="ident" id="7923715">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="7923745">(</span><span class="ident" id="7923746">t</span>&nbsp;<span class="op" id="7923748">*</span><span class="ident" id="7923749">testing</span><span class="op" id="7923756">.</span><span class="ident" id="7923757">T</span><span class="op" id="7923758">)</span>&nbsp;<span class="op" id="7923760">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923763">b</span>&nbsp;<span class="op" id="7923765">:=</span>&nbsp;<span class="builtinfunc" id="7923768">new</span><span class="op" id="7923771">(</span><span class="ident" id="7923772">bytes</span><span class="op" id="7923777">.</span><span class="ident" id="7923778">Buffer</span><span class="op" id="7923784">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7923787">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923825">enc</span>&nbsp;<span class="op" id="7923829">:=</span>&nbsp;<span class="ident" id="7923832">NewEncoder</span><span class="op" id="7923842">(</span><span class="ident" id="7923843">b</span><span class="op" id="7923844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923847">err</span>&nbsp;<span class="op" id="7923851">:=</span>&nbsp;<span class="ident" id="7923854">enc</span><span class="op" id="7923857">.</span><span class="ident" id="7923858">Encode</span><span class="op" id="7923864">(</span><span class="ident" id="7923865">GobTest0</span><span class="op" id="7923873">{</span><span class="ident" id="7923874">X</span><span class="op" id="7923875">:</span>&nbsp;<span class="num" id="7923877">18</span><span class="op" id="7923879">}</span><span class="op" id="7923880">)</span>&nbsp;<span class="comment" id="7923882">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7923895">if</span>&nbsp;<span class="ident" id="7923898">err</span>&nbsp;<span class="op" id="7923902">!=</span>&nbsp;<span class="ident" id="7923905">nil</span>&nbsp;<span class="op" id="7923909">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923913">t</span><span class="op" id="7923914">.</span><span class="ident" id="7923915">Fatal</span><span class="op" id="7923920">(</span><span class="string" id="7923921">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7923936">,</span>&nbsp;<span class="ident" id="7923938">err</span><span class="op" id="7923941">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7923944">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923947">dec</span>&nbsp;<span class="op" id="7923951">:=</span>&nbsp;<span class="ident" id="7923954">NewDecoder</span><span class="op" id="7923964">(</span><span class="ident" id="7923965">b</span><span class="op" id="7923966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923969">x</span>&nbsp;<span class="op" id="7923971">:=</span>&nbsp;<span class="builtinfunc" id="7923974">new</span><span class="op" id="7923977">(</span><span class="ident" id="7923978">GobTest0</span><span class="op" id="7923986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7923989">err</span>&nbsp;<span class="op" id="7923993">=</span>&nbsp;<span class="ident" id="7923995">dec</span><span class="op" id="7923998">.</span><span class="ident" id="7923999">Decode</span><span class="op" id="7924005">(</span><span class="ident" id="7924006">x</span><span class="op" id="7924007">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924010">if</span>&nbsp;<span class="ident" id="7924013">err</span>&nbsp;<span class="op" id="7924017">!=</span>&nbsp;<span class="ident" id="7924020">nil</span>&nbsp;<span class="op" id="7924024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924028">t</span><span class="op" id="7924029">.</span><span class="ident" id="7924030">Fatal</span><span class="op" id="7924035">(</span><span class="string" id="7924036">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7924051">,</span>&nbsp;<span class="ident" id="7924053">err</span><span class="op" id="7924056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924062">if</span>&nbsp;<span class="ident" id="7924065">x</span><span class="op" id="7924066">.</span><span class="ident" id="7924067">X</span>&nbsp;<span class="op" id="7924069">!=</span>&nbsp;<span class="num" id="7924072">18</span>&nbsp;<span class="op" id="7924075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924079">t</span><span class="op" id="7924080">.</span><span class="ident" id="7924081">Errorf</span><span class="op" id="7924087">(</span><span class="string" id="7924088">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7924115">,</span>&nbsp;<span class="ident" id="7924117">x</span><span class="op" id="7924118">.</span><span class="ident" id="7924119">X</span><span class="op" id="7924120">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924126">if</span>&nbsp;<span class="ident" id="7924129">x</span><span class="op" id="7924130">.</span><span class="ident" id="7924131">G</span>&nbsp;<span class="op" id="7924133">!=</span>&nbsp;<span class="ident" id="7924136">nil</span>&nbsp;<span class="op" id="7924140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924144">t</span><span class="op" id="7924145">.</span><span class="ident" id="7924146">Errorf</span><span class="op" id="7924152">(</span><span class="string" id="7924153">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7924181">,</span>&nbsp;<span class="ident" id="7924183">x</span><span class="op" id="7924184">.</span><span class="ident" id="7924185">G</span><span class="op" id="7924186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924189">}</span><br>
<span class="lineno"></span><span class="op" id="7924191">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="7924194">type</span>&nbsp;<span class="ident" id="7924199">gobDecoderBug0</span>&nbsp;<span class="keyword" id="7924214">struct</span>&nbsp;<span class="op" id="7924221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924224">foo</span><span class="op" id="7924227">,</span>&nbsp;<span class="ident" id="7924229">bar</span>&nbsp;<span class="builtintype" id="7924233">string</span><br>
<span class="lineno"></span><span class="op" id="7924240">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7924243">func</span>&nbsp;<span class="op" id="7924248">(</span><span class="ident" id="7924249">br</span>&nbsp;<span class="op" id="7924252">*</span><span class="ident" id="7924253">gobDecoderBug0</span><span class="op" id="7924267">)</span>&nbsp;<span class="ident" id="7924269">String</span><span class="op" id="7924275">(</span><span class="op" id="7924276">)</span>&nbsp;<span class="builtintype" id="7924278">string</span>&nbsp;<span class="op" id="7924285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924288">return</span>&nbsp;<span class="ident" id="7924295">br</span><span class="op" id="7924297">.</span><span class="ident" id="7924298">foo</span>&nbsp;<span class="op" id="7924302">+</span>&nbsp;<span class="string" id="7924304">&#34;-&#34;</span>&nbsp;<span class="op" id="7924308">+</span>&nbsp;<span class="ident" id="7924310">br</span><span class="op" id="7924312">.</span><span class="ident" id="7924313">bar</span><br>
<span class="lineno"></span><span class="op" id="7924317">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924320">func</span>&nbsp;<span class="op" id="7924325">(</span><span class="ident" id="7924326">br</span>&nbsp;<span class="op" id="7924329">*</span><span class="ident" id="7924330">gobDecoderBug0</span><span class="op" id="7924344">)</span>&nbsp;<span class="ident" id="7924346">GobEncode</span><span class="op" id="7924355">(</span><span class="op" id="7924356">)</span>&nbsp;<span class="op" id="7924358">(</span><span class="op" id="7924359">[</span><span class="op" id="7924360">]</span><span class="builtintype" id="7924361">byte</span><span class="op" id="7924365">,</span>&nbsp;<span class="builtintype" id="7924367">error</span><span class="op" id="7924372">)</span>&nbsp;<span class="op" id="7924374">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924377">return</span>&nbsp;<span class="op" id="7924384">[</span><span class="op" id="7924385">]</span><span class="builtintype" id="7924386">byte</span><span class="op" id="7924390">(</span><span class="ident" id="7924391">br</span><span class="op" id="7924393">.</span><span class="ident" id="7924394">String</span><span class="op" id="7924400">(</span><span class="op" id="7924401">)</span><span class="op" id="7924402">)</span><span class="op" id="7924403">,</span>&nbsp;<span class="ident" id="7924405">nil</span><br>
<span class="lineno"></span><span class="op" id="7924409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7924412">func</span>&nbsp;<span class="op" id="7924417">(</span><span class="ident" id="7924418">br</span>&nbsp;<span class="op" id="7924421">*</span><span class="ident" id="7924422">gobDecoderBug0</span><span class="op" id="7924436">)</span>&nbsp;<span class="ident" id="7924438">GobDecode</span><span class="op" id="7924447">(</span><span class="ident" id="7924448">b</span>&nbsp;<span class="op" id="7924450">[</span><span class="op" id="7924451">]</span><span class="builtintype" id="7924452">byte</span><span class="op" id="7924456">)</span>&nbsp;<span class="builtintype" id="7924458">error</span>&nbsp;<span class="op" id="7924464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924467">br</span><span class="op" id="7924469">.</span><span class="ident" id="7924470">foo</span>&nbsp;<span class="op" id="7924474">=</span>&nbsp;<span class="string" id="7924476">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924483">br</span><span class="op" id="7924485">.</span><span class="ident" id="7924486">bar</span>&nbsp;<span class="op" id="7924490">=</span>&nbsp;<span class="string" id="7924492">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924499">return</span>&nbsp;<span class="ident" id="7924506">nil</span><br>
<span class="lineno"></span><span class="op" id="7924510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7924513">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="7924579">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="7924601">func</span>&nbsp;<span class="ident" id="7924606">TestGobEncoderExtraIndirect</span><span class="op" id="7924633">(</span><span class="ident" id="7924634">t</span>&nbsp;<span class="op" id="7924636">*</span><span class="ident" id="7924637">testing</span><span class="op" id="7924644">.</span><span class="ident" id="7924645">T</span><span class="op" id="7924646">)</span>&nbsp;<span class="op" id="7924648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924651">gdb</span>&nbsp;<span class="op" id="7924655">:=</span>&nbsp;<span class="op" id="7924658">&amp;</span><span class="ident" id="7924659">gobDecoderBug0</span><span class="op" id="7924673">{</span><span class="string" id="7924674">&#34;foo&#34;</span><span class="op" id="7924679">,</span>&nbsp;<span class="string" id="7924681">&#34;bar&#34;</span><span class="op" id="7924686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924689">buf</span>&nbsp;<span class="op" id="7924693">:=</span>&nbsp;<span class="builtinfunc" id="7924696">new</span><span class="op" id="7924699">(</span><span class="ident" id="7924700">bytes</span><span class="op" id="7924705">.</span><span class="ident" id="7924706">Buffer</span><span class="op" id="7924712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924715">e</span>&nbsp;<span class="op" id="7924717">:=</span>&nbsp;<span class="ident" id="7924720">NewEncoder</span><span class="op" id="7924730">(</span><span class="ident" id="7924731">buf</span><span class="op" id="7924734">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924737">if</span>&nbsp;<span class="ident" id="7924740">err</span>&nbsp;<span class="op" id="7924744">:=</span>&nbsp;<span class="ident" id="7924747">e</span><span class="op" id="7924748">.</span><span class="ident" id="7924749">Encode</span><span class="op" id="7924755">(</span><span class="ident" id="7924756">gdb</span><span class="op" id="7924759">)</span><span class="op" id="7924760">;</span>&nbsp;<span class="ident" id="7924762">err</span>&nbsp;<span class="op" id="7924766">!=</span>&nbsp;<span class="ident" id="7924769">nil</span>&nbsp;<span class="op" id="7924773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924777">t</span><span class="op" id="7924778">.</span><span class="ident" id="7924779">Fatalf</span><span class="op" id="7924785">(</span><span class="string" id="7924786">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="7924798">,</span>&nbsp;<span class="ident" id="7924800">err</span><span class="op" id="7924803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924806">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924809">d</span>&nbsp;<span class="op" id="7924811">:=</span>&nbsp;<span class="ident" id="7924814">NewDecoder</span><span class="op" id="7924824">(</span><span class="ident" id="7924825">buf</span><span class="op" id="7924828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924831">var</span>&nbsp;<span class="ident" id="7924835">got</span>&nbsp;<span class="op" id="7924839">*</span><span class="ident" id="7924840">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924856">if</span>&nbsp;<span class="ident" id="7924859">err</span>&nbsp;<span class="op" id="7924863">:=</span>&nbsp;<span class="ident" id="7924866">d</span><span class="op" id="7924867">.</span><span class="ident" id="7924868">Decode</span><span class="op" id="7924874">(</span><span class="op" id="7924875">&amp;</span><span class="ident" id="7924876">got</span><span class="op" id="7924879">)</span><span class="op" id="7924880">;</span>&nbsp;<span class="ident" id="7924882">err</span>&nbsp;<span class="op" id="7924886">!=</span>&nbsp;<span class="ident" id="7924889">nil</span>&nbsp;<span class="op" id="7924893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924897">t</span><span class="op" id="7924898">.</span><span class="ident" id="7924899">Fatalf</span><span class="op" id="7924905">(</span><span class="string" id="7924906">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7924918">,</span>&nbsp;<span class="ident" id="7924920">err</span><span class="op" id="7924923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7924926">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7924929">if</span>&nbsp;<span class="ident" id="7924932">got</span><span class="op" id="7924935">.</span><span class="ident" id="7924936">foo</span>&nbsp;<span class="op" id="7924940">!=</span>&nbsp;<span class="ident" id="7924943">gdb</span><span class="op" id="7924946">.</span><span class="ident" id="7924947">foo</span>&nbsp;<span class="op" id="7924951">||</span>&nbsp;<span class="ident" id="7924954">got</span><span class="op" id="7924957">.</span><span class="ident" id="7924958">bar</span>&nbsp;<span class="op" id="7924962">!=</span>&nbsp;<span class="ident" id="7924965">gdb</span><span class="op" id="7924968">.</span><span class="ident" id="7924969">bar</span>&nbsp;<span class="op" id="7924973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7924977">t</span><span class="op" id="7924978">.</span><span class="ident" id="7924979">Errorf</span><span class="op" id="7924985">(</span><span class="string" id="7924986">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7925005">,</span>&nbsp;<span class="ident" id="7925007">got</span><span class="op" id="7925010">,</span>&nbsp;<span class="ident" id="7925012">gdb</span><span class="op" id="7925015">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925018">}</span><br>
<span class="lineno"></span><span class="op" id="7925020">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7925023">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="7925087">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="7925156">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="7925218">type</span>&nbsp;<span class="ident" id="7925223">isZeroBug</span>&nbsp;<span class="keyword" id="7925233">struct</span>&nbsp;<span class="op" id="7925240">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925243">T</span>&nbsp;<span class="ident" id="7925245">time</span><span class="op" id="7925249">.</span><span class="ident" id="7925250">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925256">S</span>&nbsp;<span class="builtintype" id="7925258">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925266">I</span>&nbsp;<span class="builtintype" id="7925268">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925273">A</span>&nbsp;<span class="ident" id="7925275">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925291">F</span>&nbsp;<span class="ident" id="7925293">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="7925312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7925315">type</span>&nbsp;<span class="ident" id="7925320">isZeroBugArray</span>&nbsp;<span class="op" id="7925335">[</span><span class="num" id="7925336">2</span><span class="op" id="7925337">]</span><span class="builtintype" id="7925338">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="7925345">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="7925405">func</span>&nbsp;<span class="op" id="7925410">(</span><span class="ident" id="7925411">a</span>&nbsp;<span class="ident" id="7925413">isZeroBugArray</span><span class="op" id="7925427">)</span>&nbsp;<span class="ident" id="7925429">GobEncode</span><span class="op" id="7925438">(</span><span class="op" id="7925439">)</span>&nbsp;<span class="op" id="7925441">(</span><span class="ident" id="7925442">b</span>&nbsp;<span class="op" id="7925444">[</span><span class="op" id="7925445">]</span><span class="builtintype" id="7925446">byte</span><span class="op" id="7925450">,</span>&nbsp;<span class="ident" id="7925452">e</span>&nbsp;<span class="builtintype" id="7925454">error</span><span class="op" id="7925459">)</span>&nbsp;<span class="op" id="7925461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925464">b</span>&nbsp;<span class="op" id="7925466">=</span>&nbsp;<span class="builtinfunc" id="7925468">append</span><span class="op" id="7925474">(</span><span class="ident" id="7925475">b</span><span class="op" id="7925476">,</span>&nbsp;<span class="ident" id="7925478">a</span><span class="op" id="7925479">[</span><span class="op" id="7925480">:</span><span class="op" id="7925481">]</span><span class="op" id="7925482">...</span><span class="op" id="7925485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925488">return</span>&nbsp;<span class="ident" id="7925495">b</span><span class="op" id="7925496">,</span>&nbsp;<span class="ident" id="7925498">nil</span><br>
<span class="lineno">725</span><span class="op" id="7925502">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7925505">func</span>&nbsp;<span class="op" id="7925510">(</span><span class="ident" id="7925511">a</span>&nbsp;<span class="op" id="7925513">*</span><span class="ident" id="7925514">isZeroBugArray</span><span class="op" id="7925528">)</span>&nbsp;<span class="ident" id="7925530">GobDecode</span><span class="op" id="7925539">(</span><span class="ident" id="7925540">data</span>&nbsp;<span class="op" id="7925545">[</span><span class="op" id="7925546">]</span><span class="builtintype" id="7925547">byte</span><span class="op" id="7925551">)</span>&nbsp;<span class="builtintype" id="7925553">error</span>&nbsp;<span class="op" id="7925559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925562">if</span>&nbsp;<span class="builtinfunc" id="7925565">len</span><span class="op" id="7925568">(</span><span class="ident" id="7925569">data</span><span class="op" id="7925573">)</span>&nbsp;<span class="op" id="7925575">!=</span>&nbsp;<span class="builtinfunc" id="7925578">len</span><span class="op" id="7925581">(</span><span class="ident" id="7925582">a</span><span class="op" id="7925583">)</span>&nbsp;<span class="op" id="7925585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925589">return</span>&nbsp;<span class="ident" id="7925596">io</span><span class="op" id="7925598">.</span><span class="ident" id="7925599">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7925604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925607">a</span><span class="op" id="7925608">[</span><span class="num" id="7925609">0</span><span class="op" id="7925610">]</span>&nbsp;<span class="op" id="7925612">=</span>&nbsp;<span class="ident" id="7925614">data</span><span class="op" id="7925618">[</span><span class="num" id="7925619">0</span><span class="op" id="7925620">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925623">a</span><span class="op" id="7925624">[</span><span class="num" id="7925625">1</span><span class="op" id="7925626">]</span>&nbsp;<span class="op" id="7925628">=</span>&nbsp;<span class="ident" id="7925630">data</span><span class="op" id="7925634">[</span><span class="num" id="7925635">1</span><span class="op" id="7925636">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925639">return</span>&nbsp;<span class="ident" id="7925646">nil</span><br>
<span class="lineno"></span><span class="op" id="7925650">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="7925653">type</span>&nbsp;<span class="ident" id="7925658">isZeroBugInterface</span>&nbsp;<span class="keyword" id="7925677">struct</span>&nbsp;<span class="op" id="7925684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925687">I</span>&nbsp;<span class="keyword" id="7925689">interface</span><span class="op" id="7925698">{</span><span class="op" id="7925699">}</span><br>
<span class="lineno"></span><span class="op" id="7925701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="7925704">func</span>&nbsp;<span class="op" id="7925709">(</span><span class="ident" id="7925710">i</span>&nbsp;<span class="ident" id="7925712">isZeroBugInterface</span><span class="op" id="7925730">)</span>&nbsp;<span class="ident" id="7925732">GobEncode</span><span class="op" id="7925741">(</span><span class="op" id="7925742">)</span>&nbsp;<span class="op" id="7925744">(</span><span class="ident" id="7925745">b</span>&nbsp;<span class="op" id="7925747">[</span><span class="op" id="7925748">]</span><span class="builtintype" id="7925749">byte</span><span class="op" id="7925753">,</span>&nbsp;<span class="ident" id="7925755">e</span>&nbsp;<span class="builtintype" id="7925757">error</span><span class="op" id="7925762">)</span>&nbsp;<span class="op" id="7925764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925767">return</span>&nbsp;<span class="op" id="7925774">[</span><span class="op" id="7925775">]</span><span class="builtintype" id="7925776">byte</span><span class="op" id="7925780">{</span><span class="op" id="7925781">}</span><span class="op" id="7925782">,</span>&nbsp;<span class="ident" id="7925784">nil</span><br>
<span class="lineno"></span><span class="op" id="7925788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7925791">func</span>&nbsp;<span class="op" id="7925796">(</span><span class="ident" id="7925797">i</span>&nbsp;<span class="op" id="7925799">*</span><span class="ident" id="7925800">isZeroBugInterface</span><span class="op" id="7925818">)</span>&nbsp;<span class="ident" id="7925820">GobDecode</span><span class="op" id="7925829">(</span><span class="ident" id="7925830">data</span>&nbsp;<span class="op" id="7925835">[</span><span class="op" id="7925836">]</span><span class="builtintype" id="7925837">byte</span><span class="op" id="7925841">)</span>&nbsp;<span class="builtintype" id="7925843">error</span>&nbsp;<span class="op" id="7925849">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7925852">return</span>&nbsp;<span class="ident" id="7925859">nil</span><br>
<span class="lineno"></span><span class="op" id="7925863">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7925866">func</span>&nbsp;<span class="ident" id="7925871">TestGobEncodeIsZero</span><span class="op" id="7925890">(</span><span class="ident" id="7925891">t</span>&nbsp;<span class="op" id="7925893">*</span><span class="ident" id="7925894">testing</span><span class="op" id="7925901">.</span><span class="ident" id="7925902">T</span><span class="op" id="7925903">)</span>&nbsp;<span class="op" id="7925905">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925908">x</span>&nbsp;<span class="op" id="7925910">:=</span>&nbsp;<span class="ident" id="7925913">isZeroBug</span><span class="op" id="7925922">{</span><span class="ident" id="7925923">time</span><span class="op" id="7925927">.</span><span class="ident" id="7925928">Now</span><span class="op" id="7925931">(</span><span class="op" id="7925932">)</span><span class="op" id="7925933">,</span>&nbsp;<span class="string" id="7925935">&#34;hello&#34;</span><span class="op" id="7925942">,</span>&nbsp;<span class="op" id="7925944">-</span><span class="num" id="7925945">55</span><span class="op" id="7925947">,</span>&nbsp;<span class="ident" id="7925949">isZeroBugArray</span><span class="op" id="7925963">{</span><span class="num" id="7925964">1</span><span class="op" id="7925965">,</span>&nbsp;<span class="num" id="7925967">2</span><span class="op" id="7925968">}</span><span class="op" id="7925969">,</span>&nbsp;<span class="ident" id="7925971">isZeroBugInterface</span><span class="op" id="7925989">{</span><span class="op" id="7925990">}</span><span class="op" id="7925991">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7925994">b</span>&nbsp;<span class="op" id="7925996">:=</span>&nbsp;<span class="builtinfunc" id="7925999">new</span><span class="op" id="7926002">(</span><span class="ident" id="7926003">bytes</span><span class="op" id="7926008">.</span><span class="ident" id="7926009">Buffer</span><span class="op" id="7926015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926018">enc</span>&nbsp;<span class="op" id="7926022">:=</span>&nbsp;<span class="ident" id="7926025">NewEncoder</span><span class="op" id="7926035">(</span><span class="ident" id="7926036">b</span><span class="op" id="7926037">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926040">err</span>&nbsp;<span class="op" id="7926044">:=</span>&nbsp;<span class="ident" id="7926047">enc</span><span class="op" id="7926050">.</span><span class="ident" id="7926051">Encode</span><span class="op" id="7926057">(</span><span class="ident" id="7926058">x</span><span class="op" id="7926059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926062">if</span>&nbsp;<span class="ident" id="7926065">err</span>&nbsp;<span class="op" id="7926069">!=</span>&nbsp;<span class="ident" id="7926072">nil</span>&nbsp;<span class="op" id="7926076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926080">t</span><span class="op" id="7926081">.</span><span class="ident" id="7926082">Fatal</span><span class="op" id="7926087">(</span><span class="string" id="7926088">&#34;encode:&#34;</span><span class="op" id="7926097">,</span>&nbsp;<span class="ident" id="7926099">err</span><span class="op" id="7926102">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926108">var</span>&nbsp;<span class="ident" id="7926112">y</span>&nbsp;<span class="ident" id="7926114">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926125">dec</span>&nbsp;<span class="op" id="7926129">:=</span>&nbsp;<span class="ident" id="7926132">NewDecoder</span><span class="op" id="7926142">(</span><span class="ident" id="7926143">b</span><span class="op" id="7926144">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926147">err</span>&nbsp;<span class="op" id="7926151">=</span>&nbsp;<span class="ident" id="7926153">dec</span><span class="op" id="7926156">.</span><span class="ident" id="7926157">Decode</span><span class="op" id="7926163">(</span><span class="op" id="7926164">&amp;</span><span class="ident" id="7926165">y</span><span class="op" id="7926166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926169">if</span>&nbsp;<span class="ident" id="7926172">err</span>&nbsp;<span class="op" id="7926176">!=</span>&nbsp;<span class="ident" id="7926179">nil</span>&nbsp;<span class="op" id="7926183">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926187">t</span><span class="op" id="7926188">.</span><span class="ident" id="7926189">Fatal</span><span class="op" id="7926194">(</span><span class="string" id="7926195">&#34;decode:&#34;</span><span class="op" id="7926204">,</span>&nbsp;<span class="ident" id="7926206">err</span><span class="op" id="7926209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926212">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926215">if</span>&nbsp;<span class="ident" id="7926218">x</span>&nbsp;<span class="op" id="7926220">!=</span>&nbsp;<span class="ident" id="7926223">y</span>&nbsp;<span class="op" id="7926225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926229">t</span><span class="op" id="7926230">.</span><span class="ident" id="7926231">Fatalf</span><span class="op" id="7926237">(</span><span class="string" id="7926238">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7926248">,</span>&nbsp;<span class="ident" id="7926250">x</span><span class="op" id="7926251">,</span>&nbsp;<span class="ident" id="7926253">y</span><span class="op" id="7926254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926257">}</span><br>
<span class="lineno">765</span><span class="op" id="7926259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7926262">func</span>&nbsp;<span class="ident" id="7926267">TestGobEncodePtrError</span><span class="op" id="7926288">(</span><span class="ident" id="7926289">t</span>&nbsp;<span class="op" id="7926291">*</span><span class="ident" id="7926292">testing</span><span class="op" id="7926299">.</span><span class="ident" id="7926300">T</span><span class="op" id="7926301">)</span>&nbsp;<span class="op" id="7926303">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926306">var</span>&nbsp;<span class="ident" id="7926310">err</span>&nbsp;<span class="builtintype" id="7926314">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926321">b</span>&nbsp;<span class="op" id="7926323">:=</span>&nbsp;<span class="builtinfunc" id="7926326">new</span><span class="op" id="7926329">(</span><span class="ident" id="7926330">bytes</span><span class="op" id="7926335">.</span><span class="ident" id="7926336">Buffer</span><span class="op" id="7926342">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926345">enc</span>&nbsp;<span class="op" id="7926349">:=</span>&nbsp;<span class="ident" id="7926352">NewEncoder</span><span class="op" id="7926362">(</span><span class="ident" id="7926363">b</span><span class="op" id="7926364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926367">err</span>&nbsp;<span class="op" id="7926371">=</span>&nbsp;<span class="ident" id="7926373">enc</span><span class="op" id="7926376">.</span><span class="ident" id="7926377">Encode</span><span class="op" id="7926383">(</span><span class="op" id="7926384">&amp;</span><span class="ident" id="7926385">err</span><span class="op" id="7926388">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926391">if</span>&nbsp;<span class="ident" id="7926394">err</span>&nbsp;<span class="op" id="7926398">!=</span>&nbsp;<span class="ident" id="7926401">nil</span>&nbsp;<span class="op" id="7926405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926409">t</span><span class="op" id="7926410">.</span><span class="ident" id="7926411">Fatal</span><span class="op" id="7926416">(</span><span class="string" id="7926417">&#34;encode:&#34;</span><span class="op" id="7926426">,</span>&nbsp;<span class="ident" id="7926428">err</span><span class="op" id="7926431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926434">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926437">dec</span>&nbsp;<span class="op" id="7926441">:=</span>&nbsp;<span class="ident" id="7926444">NewDecoder</span><span class="op" id="7926454">(</span><span class="ident" id="7926455">b</span><span class="op" id="7926456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926459">err2</span>&nbsp;<span class="op" id="7926464">:=</span>&nbsp;<span class="ident" id="7926467">fmt</span><span class="op" id="7926470">.</span><span class="ident" id="7926471">Errorf</span><span class="op" id="7926477">(</span><span class="string" id="7926478">&#34;foo&#34;</span><span class="op" id="7926483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926486">err</span>&nbsp;<span class="op" id="7926490">=</span>&nbsp;<span class="ident" id="7926492">dec</span><span class="op" id="7926495">.</span><span class="ident" id="7926496">Decode</span><span class="op" id="7926502">(</span><span class="op" id="7926503">&amp;</span><span class="ident" id="7926504">err2</span><span class="op" id="7926508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926511">if</span>&nbsp;<span class="ident" id="7926514">err</span>&nbsp;<span class="op" id="7926518">!=</span>&nbsp;<span class="ident" id="7926521">nil</span>&nbsp;<span class="op" id="7926525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926529">t</span><span class="op" id="7926530">.</span><span class="ident" id="7926531">Fatal</span><span class="op" id="7926536">(</span><span class="string" id="7926537">&#34;decode:&#34;</span><span class="op" id="7926546">,</span>&nbsp;<span class="ident" id="7926548">err</span><span class="op" id="7926551">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926554">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926557">if</span>&nbsp;<span class="ident" id="7926560">err2</span>&nbsp;<span class="op" id="7926565">!=</span>&nbsp;<span class="ident" id="7926568">nil</span>&nbsp;<span class="op" id="7926572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926576">t</span><span class="op" id="7926577">.</span><span class="ident" id="7926578">Fatalf</span><span class="op" id="7926584">(</span><span class="string" id="7926585">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7926607">,</span>&nbsp;<span class="ident" id="7926609">err2</span><span class="op" id="7926613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926616">}</span><br>
<span class="lineno"></span><span class="op" id="7926618">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="7926621">func</span>&nbsp;<span class="ident" id="7926626">TestNetIP</span><span class="op" id="7926635">(</span><span class="ident" id="7926636">t</span>&nbsp;<span class="op" id="7926638">*</span><span class="ident" id="7926639">testing</span><span class="op" id="7926646">.</span><span class="ident" id="7926647">T</span><span class="op" id="7926648">)</span>&nbsp;<span class="op" id="7926650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7926653">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926696">enc</span>&nbsp;<span class="op" id="7926700">:=</span>&nbsp;<span class="op" id="7926703">[</span><span class="op" id="7926704">]</span><span class="builtintype" id="7926705">byte</span><span class="op" id="7926709">{</span><span class="num" id="7926710">0x07</span><span class="op" id="7926714">,</span>&nbsp;<span class="num" id="7926716">0x0a</span><span class="op" id="7926720">,</span>&nbsp;<span class="num" id="7926722">0x00</span><span class="op" id="7926726">,</span>&nbsp;<span class="num" id="7926728">0x04</span><span class="op" id="7926732">,</span>&nbsp;<span class="num" id="7926734">0x01</span><span class="op" id="7926738">,</span>&nbsp;<span class="num" id="7926740">0x02</span><span class="op" id="7926744">,</span>&nbsp;<span class="num" id="7926746">0x03</span><span class="op" id="7926750">,</span>&nbsp;<span class="num" id="7926752">0x04</span><span class="op" id="7926756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926760">var</span>&nbsp;<span class="ident" id="7926764">ip</span>&nbsp;<span class="ident" id="7926767">net</span><span class="op" id="7926770">.</span><span class="ident" id="7926771">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926775">err</span>&nbsp;<span class="op" id="7926779">:=</span>&nbsp;<span class="ident" id="7926782">NewDecoder</span><span class="op" id="7926792">(</span><span class="ident" id="7926793">bytes</span><span class="op" id="7926798">.</span><span class="ident" id="7926799">NewReader</span><span class="op" id="7926808">(</span><span class="ident" id="7926809">enc</span><span class="op" id="7926812">)</span><span class="op" id="7926813">)</span><span class="op" id="7926814">.</span><span class="ident" id="7926815">Decode</span><span class="op" id="7926821">(</span><span class="op" id="7926822">&amp;</span><span class="ident" id="7926823">ip</span><span class="op" id="7926825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926828">if</span>&nbsp;<span class="ident" id="7926831">err</span>&nbsp;<span class="op" id="7926835">!=</span>&nbsp;<span class="ident" id="7926838">nil</span>&nbsp;<span class="op" id="7926842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926846">t</span><span class="op" id="7926847">.</span><span class="ident" id="7926848">Fatalf</span><span class="op" id="7926854">(</span><span class="string" id="7926855">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7926867">,</span>&nbsp;<span class="ident" id="7926869">err</span><span class="op" id="7926872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926875">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7926878">if</span>&nbsp;<span class="ident" id="7926881">ip</span><span class="op" id="7926883">.</span><span class="ident" id="7926884">String</span><span class="op" id="7926890">(</span><span class="op" id="7926891">)</span>&nbsp;<span class="op" id="7926893">!=</span>&nbsp;<span class="string" id="7926896">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="7926906">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7926910">t</span><span class="op" id="7926911">.</span><span class="ident" id="7926912">Errorf</span><span class="op" id="7926918">(</span><span class="string" id="7926919">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="7926948">,</span>&nbsp;<span class="ident" id="7926950">ip</span><span class="op" id="7926952">.</span><span class="ident" id="7926953">String</span><span class="op" id="7926959">(</span><span class="op" id="7926960">)</span><span class="op" id="7926961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7926964">}</span><br>
<span class="lineno"></span><span class="op" id="7926966">}</span>
</div>
</body>
</html>
