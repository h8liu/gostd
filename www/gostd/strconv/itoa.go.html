<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>strconv</h2>
<ul>
<li><a href="/gostd/strconv/atob.go.html">atob.go</a></li>
<li><a href="/gostd/strconv/atob_test.go.html">atob_test.go</a></li>
<li><a href="/gostd/strconv/atof.go.html">atof.go</a></li>
<li><a href="/gostd/strconv/atof_test.go.html">atof_test.go</a></li>
<li><a href="/gostd/strconv/atoi.go.html">atoi.go</a></li>
<li><a href="/gostd/strconv/atoi_test.go.html">atoi_test.go</a></li>
<li><a href="/gostd/strconv/decimal.go.html">decimal.go</a></li>
<li><a href="/gostd/strconv/decimal_test.go.html">decimal_test.go</a></li>
<li><a href="/gostd/strconv/extfloat.go.html">extfloat.go</a></li>
<li><a href="/gostd/strconv/fp_test.go.html">fp_test.go</a></li>
<li><a href="/gostd/strconv/ftoa.go.html">ftoa.go</a></li>
<li><a href="/gostd/strconv/ftoa_test.go.html">ftoa_test.go</a></li>
<li><a href="/gostd/strconv/internal_test.go.html">internal_test.go</a></li>
<li><a href="/gostd/strconv/isprint.go.html">isprint.go</a></li>
<li><a href="/gostd/strconv/itoa.go.html" class="current">itoa.go</a></li>
<li><a href="/gostd/strconv/itoa_test.go.html">itoa_test.go</a></li>
<li><a href="/gostd/strconv/quote.go.html">quote.go</a></li>
<li><a href="/gostd/strconv/quote_example_test.go.html">quote_example_test.go</a></li>
<li><a href="/gostd/strconv/quote_test.go.html">quote_test.go</a></li>
<li><a href="/gostd/strconv/strconv_test.go.html">strconv_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2300167">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2300222">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2300276">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="2300327">package</span>&nbsp;<span class="ident" id="2300335">strconv</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2300344">//&nbsp;FormatUint&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2300416">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2300490">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno">10</span><span class="keyword" id="2300517">func</span>&nbsp;<span class="ident" id="2300522">FormatUint</span><span class="op" id="2300532">(</span><span class="ident" id="2300533">i</span>&nbsp;<span class="ident" id="2300535">uint64</span><span class="op" id="2300541">,</span>&nbsp;<span class="ident" id="2300543">base</span>&nbsp;<span class="builtintype" id="2300548">int</span><span class="op" id="2300551">)</span>&nbsp;<span class="builtintype" id="2300553">string</span>&nbsp;<span class="op" id="2300560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2300563">_</span><span class="op" id="2300564">,</span>&nbsp;<span class="ident" id="2300566">s</span>&nbsp;<span class="op" id="2300568">:=</span>&nbsp;<span class="ident" id="2300571">formatBits</span><span class="op" id="2300581">(</span><span class="builtintype" id="2300582">nil</span><span class="op" id="2300585">,</span>&nbsp;<span class="ident" id="2300587">i</span><span class="op" id="2300588">,</span>&nbsp;<span class="ident" id="2300590">base</span><span class="op" id="2300594">,</span>&nbsp;<span class="builtintype" id="2300596">false</span><span class="op" id="2300601">,</span>&nbsp;<span class="builtintype" id="2300603">false</span><span class="op" id="2300608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300611">return</span>&nbsp;<span class="ident" id="2300618">s</span><br>
<span class="lineno"></span><span class="op" id="2300620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="2300623">//&nbsp;FormatInt&nbsp;returns&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;i&nbsp;in&nbsp;the&nbsp;given&nbsp;base,</span><br>
<span class="lineno"></span><span class="comment" id="2300694">//&nbsp;for&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&lt;=&nbsp;36.&nbsp;The&nbsp;result&nbsp;uses&nbsp;the&nbsp;lower-case&nbsp;letters&nbsp;&#39;a&#39;&nbsp;to&nbsp;&#39;z&#39;</span><br>
<span class="lineno"></span><span class="comment" id="2300768">//&nbsp;for&nbsp;digit&nbsp;values&nbsp;&gt;=&nbsp;10.</span><br>
<span class="lineno"></span><span class="keyword" id="2300795">func</span>&nbsp;<span class="ident" id="2300800">FormatInt</span><span class="op" id="2300809">(</span><span class="ident" id="2300810">i</span>&nbsp;<span class="ident" id="2300812">int64</span><span class="op" id="2300817">,</span>&nbsp;<span class="ident" id="2300819">base</span>&nbsp;<span class="builtintype" id="2300824">int</span><span class="op" id="2300827">)</span>&nbsp;<span class="builtintype" id="2300829">string</span>&nbsp;<span class="op" id="2300836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2300839">_</span><span class="op" id="2300840">,</span>&nbsp;<span class="ident" id="2300842">s</span>&nbsp;<span class="op" id="2300844">:=</span>&nbsp;<span class="ident" id="2300847">formatBits</span><span class="op" id="2300857">(</span><span class="builtintype" id="2300858">nil</span><span class="op" id="2300861">,</span>&nbsp;<span class="ident" id="2300863">uint64</span><span class="op" id="2300869">(</span><span class="ident" id="2300870">i</span><span class="op" id="2300871">)</span><span class="op" id="2300872">,</span>&nbsp;<span class="ident" id="2300874">base</span><span class="op" id="2300878">,</span>&nbsp;<span class="ident" id="2300880">i</span>&nbsp;<span class="op" id="2300882">&lt;</span>&nbsp;<span class="num" id="2300884">0</span><span class="op" id="2300885">,</span>&nbsp;<span class="builtintype" id="2300887">false</span><span class="op" id="2300892">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300895">return</span>&nbsp;<span class="ident" id="2300902">s</span><br>
<span class="lineno"></span><span class="op" id="2300904">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2300907">//&nbsp;Itoa&nbsp;is&nbsp;shorthand&nbsp;for&nbsp;FormatInt(i,&nbsp;10).</span><br>
<span class="lineno"></span><span class="keyword" id="2300950">func</span>&nbsp;<span class="ident" id="2300955">Itoa</span><span class="op" id="2300959">(</span><span class="ident" id="2300960">i</span>&nbsp;<span class="builtintype" id="2300962">int</span><span class="op" id="2300965">)</span>&nbsp;<span class="builtintype" id="2300967">string</span>&nbsp;<span class="op" id="2300974">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2300977">return</span>&nbsp;<span class="ident" id="2300984">FormatInt</span><span class="op" id="2300993">(</span><span class="ident" id="2300994">int64</span><span class="op" id="2300999">(</span><span class="ident" id="2301000">i</span><span class="op" id="2301001">)</span><span class="op" id="2301002">,</span>&nbsp;<span class="num" id="2301004">10</span><span class="op" id="2301006">)</span><br>
<span class="lineno"></span><span class="op" id="2301008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2301011">//&nbsp;AppendInt&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2301066">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatInt,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno">30</span><span class="keyword" id="2301136">func</span>&nbsp;<span class="ident" id="2301141">AppendInt</span><span class="op" id="2301150">(</span><span class="ident" id="2301151">dst</span>&nbsp;<span class="op" id="2301155">[</span><span class="op" id="2301156">]</span><span class="builtintype" id="2301157">byte</span><span class="op" id="2301161">,</span>&nbsp;<span class="ident" id="2301163">i</span>&nbsp;<span class="ident" id="2301165">int64</span><span class="op" id="2301170">,</span>&nbsp;<span class="ident" id="2301172">base</span>&nbsp;<span class="builtintype" id="2301177">int</span><span class="op" id="2301180">)</span>&nbsp;<span class="op" id="2301182">[</span><span class="op" id="2301183">]</span><span class="builtintype" id="2301184">byte</span>&nbsp;<span class="op" id="2301189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301192">dst</span><span class="op" id="2301195">,</span>&nbsp;<span class="ident" id="2301197">_</span>&nbsp;<span class="op" id="2301199">=</span>&nbsp;<span class="ident" id="2301201">formatBits</span><span class="op" id="2301211">(</span><span class="ident" id="2301212">dst</span><span class="op" id="2301215">,</span>&nbsp;<span class="ident" id="2301217">uint64</span><span class="op" id="2301223">(</span><span class="ident" id="2301224">i</span><span class="op" id="2301225">)</span><span class="op" id="2301226">,</span>&nbsp;<span class="ident" id="2301228">base</span><span class="op" id="2301232">,</span>&nbsp;<span class="ident" id="2301234">i</span>&nbsp;<span class="op" id="2301236">&lt;</span>&nbsp;<span class="num" id="2301238">0</span><span class="op" id="2301239">,</span>&nbsp;<span class="builtintype" id="2301241">true</span><span class="op" id="2301245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301248">return</span>&nbsp;<span class="ident" id="2301255">dst</span><br>
<span class="lineno"></span><span class="op" id="2301259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="2301262">//&nbsp;AppendUint&nbsp;appends&nbsp;the&nbsp;string&nbsp;form&nbsp;of&nbsp;the&nbsp;unsigned&nbsp;integer&nbsp;i,</span><br>
<span class="lineno"></span><span class="comment" id="2301327">//&nbsp;as&nbsp;generated&nbsp;by&nbsp;FormatUint,&nbsp;to&nbsp;dst&nbsp;and&nbsp;returns&nbsp;the&nbsp;extended&nbsp;buffer.</span><br>
<span class="lineno"></span><span class="keyword" id="2301398">func</span>&nbsp;<span class="ident" id="2301403">AppendUint</span><span class="op" id="2301413">(</span><span class="ident" id="2301414">dst</span>&nbsp;<span class="op" id="2301418">[</span><span class="op" id="2301419">]</span><span class="builtintype" id="2301420">byte</span><span class="op" id="2301424">,</span>&nbsp;<span class="ident" id="2301426">i</span>&nbsp;<span class="ident" id="2301428">uint64</span><span class="op" id="2301434">,</span>&nbsp;<span class="ident" id="2301436">base</span>&nbsp;<span class="builtintype" id="2301441">int</span><span class="op" id="2301444">)</span>&nbsp;<span class="op" id="2301446">[</span><span class="op" id="2301447">]</span><span class="builtintype" id="2301448">byte</span>&nbsp;<span class="op" id="2301453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301456">dst</span><span class="op" id="2301459">,</span>&nbsp;<span class="ident" id="2301461">_</span>&nbsp;<span class="op" id="2301463">=</span>&nbsp;<span class="ident" id="2301465">formatBits</span><span class="op" id="2301475">(</span><span class="ident" id="2301476">dst</span><span class="op" id="2301479">,</span>&nbsp;<span class="ident" id="2301481">i</span><span class="op" id="2301482">,</span>&nbsp;<span class="ident" id="2301484">base</span><span class="op" id="2301488">,</span>&nbsp;<span class="builtintype" id="2301490">false</span><span class="op" id="2301495">,</span>&nbsp;<span class="builtintype" id="2301497">true</span><span class="op" id="2301501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2301504">return</span>&nbsp;<span class="ident" id="2301511">dst</span><br>
<span class="lineno">40</span><span class="op" id="2301515">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2301518">const</span>&nbsp;<span class="op" id="2301524">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301527">digits</span>&nbsp;&nbsp;&nbsp;<span class="op" id="2301536">=</span>&nbsp;<span class="string" id="2301538">&#34;0123456789abcdefghijklmnopqrstuvwxyz&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301578">digits01</span>&nbsp;<span class="op" id="2301587">=</span>&nbsp;<span class="string" id="2301589">&#34;0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789&#34;</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2301693">digits10</span>&nbsp;<span class="op" id="2301702">=</span>&nbsp;<span class="string" id="2301704">&#34;0000000000111111111122222222223333333333444444444455555555556666666666777777777788888888889999999999&#34;</span><br>
<span class="lineno"></span><span class="op" id="2301807">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2301810">var</span>&nbsp;<span class="ident" id="2301814">shifts</span>&nbsp;<span class="op" id="2301821">=</span>&nbsp;<span class="op" id="2301823">[</span><span class="builtinfunc" id="2301824">len</span><span class="op" id="2301827">(</span><span class="ident" id="2301828">digits</span><span class="op" id="2301834">)</span>&nbsp;<span class="op" id="2301836">+</span>&nbsp;<span class="num" id="2301838">1</span><span class="op" id="2301839">]</span><span class="builtintype" id="2301840">uint</span><span class="op" id="2301844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2301847">1</span>&nbsp;<span class="op" id="2301849">&lt;&lt;</span>&nbsp;<span class="num" id="2301852">1</span><span class="op" id="2301853">:</span>&nbsp;<span class="num" id="2301855">1</span><span class="op" id="2301856">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2301859">1</span>&nbsp;<span class="op" id="2301861">&lt;&lt;</span>&nbsp;<span class="num" id="2301864">2</span><span class="op" id="2301865">:</span>&nbsp;<span class="num" id="2301867">2</span><span class="op" id="2301868">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2301871">1</span>&nbsp;<span class="op" id="2301873">&lt;&lt;</span>&nbsp;<span class="num" id="2301876">3</span><span class="op" id="2301877">:</span>&nbsp;<span class="num" id="2301879">3</span><span class="op" id="2301880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2301883">1</span>&nbsp;<span class="op" id="2301885">&lt;&lt;</span>&nbsp;<span class="num" id="2301888">4</span><span class="op" id="2301889">:</span>&nbsp;<span class="num" id="2301891">4</span><span class="op" id="2301892">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="2301895">1</span>&nbsp;<span class="op" id="2301897">&lt;&lt;</span>&nbsp;<span class="num" id="2301900">5</span><span class="op" id="2301901">:</span>&nbsp;<span class="num" id="2301903">5</span><span class="op" id="2301904">,</span><br>
<span class="lineno"></span><span class="op" id="2301906">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2301909">//&nbsp;formatBits&nbsp;computes&nbsp;the&nbsp;string&nbsp;representation&nbsp;of&nbsp;u&nbsp;in&nbsp;the&nbsp;given&nbsp;base.</span><br>
<span class="lineno"></span><span class="comment" id="2301982">//&nbsp;If&nbsp;neg&nbsp;is&nbsp;set,&nbsp;u&nbsp;is&nbsp;treated&nbsp;as&nbsp;negative&nbsp;int64&nbsp;value.&nbsp;If&nbsp;append_&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2302052">//&nbsp;set,&nbsp;the&nbsp;string&nbsp;is&nbsp;appended&nbsp;to&nbsp;dst&nbsp;and&nbsp;the&nbsp;resulting&nbsp;byte&nbsp;slice&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="2302122">//&nbsp;returned&nbsp;as&nbsp;the&nbsp;first&nbsp;result&nbsp;value;&nbsp;otherwise&nbsp;the&nbsp;string&nbsp;is&nbsp;returned</span><br>
<span class="lineno">60</span><span class="comment" id="2302194">//&nbsp;as&nbsp;the&nbsp;second&nbsp;result&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="2302225">//</span><br>
<span class="lineno"></span><span class="keyword" id="2302228">func</span>&nbsp;<span class="ident" id="2302233">formatBits</span><span class="op" id="2302243">(</span><span class="ident" id="2302244">dst</span>&nbsp;<span class="op" id="2302248">[</span><span class="op" id="2302249">]</span><span class="builtintype" id="2302250">byte</span><span class="op" id="2302254">,</span>&nbsp;<span class="ident" id="2302256">u</span>&nbsp;<span class="ident" id="2302258">uint64</span><span class="op" id="2302264">,</span>&nbsp;<span class="ident" id="2302266">base</span>&nbsp;<span class="builtintype" id="2302271">int</span><span class="op" id="2302274">,</span>&nbsp;<span class="ident" id="2302276">neg</span><span class="op" id="2302279">,</span>&nbsp;<span class="ident" id="2302281">append_</span>&nbsp;<span class="builtintype" id="2302289">bool</span><span class="op" id="2302293">)</span>&nbsp;<span class="op" id="2302295">(</span><span class="ident" id="2302296">d</span>&nbsp;<span class="op" id="2302298">[</span><span class="op" id="2302299">]</span><span class="builtintype" id="2302300">byte</span><span class="op" id="2302304">,</span>&nbsp;<span class="ident" id="2302306">s</span>&nbsp;<span class="builtintype" id="2302308">string</span><span class="op" id="2302314">)</span>&nbsp;<span class="op" id="2302316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302319">if</span>&nbsp;<span class="ident" id="2302322">base</span>&nbsp;<span class="op" id="2302327">&lt;</span>&nbsp;<span class="num" id="2302329">2</span>&nbsp;<span class="op" id="2302331">||</span>&nbsp;<span class="ident" id="2302334">base</span>&nbsp;<span class="op" id="2302339">&gt;</span>&nbsp;<span class="builtinfunc" id="2302341">len</span><span class="op" id="2302344">(</span><span class="ident" id="2302345">digits</span><span class="op" id="2302351">)</span>&nbsp;<span class="op" id="2302353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="2302357">panic</span><span class="op" id="2302362">(</span><span class="string" id="2302363">&#34;strconv:&nbsp;illegal&nbsp;AppendInt/FormatInt&nbsp;base&#34;</span><span class="op" id="2302406">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302412">//&nbsp;2&nbsp;&lt;=&nbsp;base&nbsp;&amp;&amp;&nbsp;base&nbsp;&lt;=&nbsp;len(digits)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302450">var</span>&nbsp;<span class="ident" id="2302454">a</span>&nbsp;<span class="op" id="2302456">[</span><span class="num" id="2302457">64</span>&nbsp;<span class="op" id="2302460">+</span>&nbsp;<span class="num" id="2302462">1</span><span class="op" id="2302463">]</span><span class="builtintype" id="2302464">byte</span>&nbsp;<span class="comment" id="2302469">//&nbsp;+1&nbsp;for&nbsp;sign&nbsp;of&nbsp;64bit&nbsp;value&nbsp;in&nbsp;base&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302510">i</span>&nbsp;<span class="op" id="2302512">:=</span>&nbsp;<span class="builtinfunc" id="2302515">len</span><span class="op" id="2302518">(</span><span class="ident" id="2302519">a</span><span class="op" id="2302520">)</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302524">if</span>&nbsp;<span class="ident" id="2302527">neg</span>&nbsp;<span class="op" id="2302531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302535">u</span>&nbsp;<span class="op" id="2302537">=</span>&nbsp;<span class="op" id="2302539">-</span><span class="ident" id="2302540">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302547">//&nbsp;convert&nbsp;bits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302564">if</span>&nbsp;<span class="ident" id="2302567">base</span>&nbsp;<span class="op" id="2302572">==</span>&nbsp;<span class="num" id="2302575">10</span>&nbsp;<span class="op" id="2302578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302582">//&nbsp;common&nbsp;case:&nbsp;use&nbsp;constants&nbsp;for&nbsp;/&nbsp;and&nbsp;%&nbsp;because</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302634">//&nbsp;the&nbsp;compiler&nbsp;can&nbsp;optimize&nbsp;it&nbsp;into&nbsp;a&nbsp;multiply+shift,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302691">//&nbsp;and&nbsp;unroll&nbsp;loop</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302712">for</span>&nbsp;<span class="ident" id="2302716">u</span>&nbsp;<span class="op" id="2302718">&gt;=</span>&nbsp;<span class="num" id="2302721">100</span>&nbsp;<span class="op" id="2302725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302730">i</span>&nbsp;<span class="op" id="2302732">-=</span>&nbsp;<span class="num" id="2302735">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302740">q</span>&nbsp;<span class="op" id="2302742">:=</span>&nbsp;<span class="ident" id="2302745">u</span>&nbsp;<span class="op" id="2302747">/</span>&nbsp;<span class="num" id="2302749">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302756">j</span>&nbsp;<span class="op" id="2302758">:=</span>&nbsp;<span class="builtintype" id="2302761">uintptr</span><span class="op" id="2302768">(</span><span class="ident" id="2302769">u</span>&nbsp;<span class="op" id="2302771">-</span>&nbsp;<span class="ident" id="2302773">q</span><span class="op" id="2302774">*</span><span class="num" id="2302775">100</span><span class="op" id="2302778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302783">a</span><span class="op" id="2302784">[</span><span class="ident" id="2302785">i</span><span class="op" id="2302786">+</span><span class="num" id="2302787">1</span><span class="op" id="2302788">]</span>&nbsp;<span class="op" id="2302790">=</span>&nbsp;<span class="ident" id="2302792">digits01</span><span class="op" id="2302800">[</span><span class="ident" id="2302801">j</span><span class="op" id="2302802">]</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302807">a</span><span class="op" id="2302808">[</span><span class="ident" id="2302809">i</span><span class="op" id="2302810">+</span><span class="num" id="2302811">0</span><span class="op" id="2302812">]</span>&nbsp;<span class="op" id="2302814">=</span>&nbsp;<span class="ident" id="2302816">digits10</span><span class="op" id="2302824">[</span><span class="ident" id="2302825">j</span><span class="op" id="2302826">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302831">u</span>&nbsp;<span class="op" id="2302833">=</span>&nbsp;<span class="ident" id="2302835">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2302843">if</span>&nbsp;<span class="ident" id="2302846">u</span>&nbsp;<span class="op" id="2302848">&gt;=</span>&nbsp;<span class="num" id="2302851">10</span>&nbsp;<span class="op" id="2302854">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302859">i</span><span class="op" id="2302860">--</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302866">q</span>&nbsp;<span class="op" id="2302868">:=</span>&nbsp;<span class="ident" id="2302871">u</span>&nbsp;<span class="op" id="2302873">/</span>&nbsp;<span class="num" id="2302875">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302881">a</span><span class="op" id="2302882">[</span><span class="ident" id="2302883">i</span><span class="op" id="2302884">]</span>&nbsp;<span class="op" id="2302886">=</span>&nbsp;<span class="ident" id="2302888">digits</span><span class="op" id="2302894">[</span><span class="builtintype" id="2302895">uintptr</span><span class="op" id="2302902">(</span><span class="ident" id="2302903">u</span><span class="op" id="2302904">-</span><span class="ident" id="2302905">q</span><span class="op" id="2302906">*</span><span class="num" id="2302907">10</span><span class="op" id="2302909">)</span><span class="op" id="2302910">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2302915">u</span>&nbsp;<span class="op" id="2302917">=</span>&nbsp;<span class="ident" id="2302919">q</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2302927">}</span>&nbsp;<span class="keyword" id="2302929">else</span>&nbsp;<span class="keyword" id="2302934">if</span>&nbsp;<span class="ident" id="2302937">s</span>&nbsp;<span class="op" id="2302939">:=</span>&nbsp;<span class="ident" id="2302942">shifts</span><span class="op" id="2302948">[</span><span class="ident" id="2302949">base</span><span class="op" id="2302953">]</span><span class="op" id="2302954">;</span>&nbsp;<span class="ident" id="2302956">s</span>&nbsp;<span class="op" id="2302958">&gt;</span>&nbsp;<span class="num" id="2302960">0</span>&nbsp;<span class="op" id="2302962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2302966">//&nbsp;base&nbsp;is&nbsp;power&nbsp;of&nbsp;2:&nbsp;use&nbsp;shifts&nbsp;and&nbsp;masks&nbsp;instead&nbsp;of&nbsp;/&nbsp;and&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303031">b</span>&nbsp;<span class="op" id="2303033">:=</span>&nbsp;<span class="ident" id="2303036">uint64</span><span class="op" id="2303042">(</span><span class="ident" id="2303043">base</span><span class="op" id="2303047">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303051">m</span>&nbsp;<span class="op" id="2303053">:=</span>&nbsp;<span class="builtintype" id="2303056">uintptr</span><span class="op" id="2303063">(</span><span class="ident" id="2303064">b</span><span class="op" id="2303065">)</span>&nbsp;<span class="op" id="2303067">-</span>&nbsp;<span class="num" id="2303069">1</span>&nbsp;<span class="comment" id="2303071">//&nbsp;==&nbsp;1&lt;&lt;s&nbsp;-&nbsp;1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303088">for</span>&nbsp;<span class="ident" id="2303092">u</span>&nbsp;<span class="op" id="2303094">&gt;=</span>&nbsp;<span class="ident" id="2303097">b</span>&nbsp;<span class="op" id="2303099">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303104">i</span><span class="op" id="2303105">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303111">a</span><span class="op" id="2303112">[</span><span class="ident" id="2303113">i</span><span class="op" id="2303114">]</span>&nbsp;<span class="op" id="2303116">=</span>&nbsp;<span class="ident" id="2303118">digits</span><span class="op" id="2303124">[</span><span class="builtintype" id="2303125">uintptr</span><span class="op" id="2303132">(</span><span class="ident" id="2303133">u</span><span class="op" id="2303134">)</span><span class="op" id="2303135">&amp;</span><span class="ident" id="2303136">m</span><span class="op" id="2303137">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303142">u</span>&nbsp;<span class="op" id="2303144">&gt;&gt;=</span>&nbsp;<span class="ident" id="2303148">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303156">}</span>&nbsp;<span class="keyword" id="2303158">else</span>&nbsp;<span class="op" id="2303163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2303167">//&nbsp;general&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303185">b</span>&nbsp;<span class="op" id="2303187">:=</span>&nbsp;<span class="ident" id="2303190">uint64</span><span class="op" id="2303196">(</span><span class="ident" id="2303197">base</span><span class="op" id="2303201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303205">for</span>&nbsp;<span class="ident" id="2303209">u</span>&nbsp;<span class="op" id="2303211">&gt;=</span>&nbsp;<span class="ident" id="2303214">b</span>&nbsp;<span class="op" id="2303216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303221">i</span><span class="op" id="2303222">--</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303228">a</span><span class="op" id="2303229">[</span><span class="ident" id="2303230">i</span><span class="op" id="2303231">]</span>&nbsp;<span class="op" id="2303233">=</span>&nbsp;<span class="ident" id="2303235">digits</span><span class="op" id="2303241">[</span><span class="builtintype" id="2303242">uintptr</span><span class="op" id="2303249">(</span><span class="ident" id="2303250">u</span><span class="op" id="2303251">%</span><span class="ident" id="2303252">b</span><span class="op" id="2303253">)</span><span class="op" id="2303254">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303259">u</span>&nbsp;<span class="op" id="2303261">/=</span>&nbsp;<span class="ident" id="2303264">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2303275">//&nbsp;u&nbsp;&lt;&nbsp;base</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303288">i</span><span class="op" id="2303289">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303293">a</span><span class="op" id="2303294">[</span><span class="ident" id="2303295">i</span><span class="op" id="2303296">]</span>&nbsp;<span class="op" id="2303298">=</span>&nbsp;<span class="ident" id="2303300">digits</span><span class="op" id="2303306">[</span><span class="builtintype" id="2303307">uintptr</span><span class="op" id="2303314">(</span><span class="ident" id="2303315">u</span><span class="op" id="2303316">)</span><span class="op" id="2303317">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2303321">//&nbsp;add&nbsp;sign,&nbsp;if&nbsp;any</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303342">if</span>&nbsp;<span class="ident" id="2303345">neg</span>&nbsp;<span class="op" id="2303349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303353">i</span><span class="op" id="2303354">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303359">a</span><span class="op" id="2303360">[</span><span class="ident" id="2303361">i</span><span class="op" id="2303362">]</span>&nbsp;<span class="op" id="2303364">=</span>&nbsp;<span class="string" id="2303366">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303375">if</span>&nbsp;<span class="ident" id="2303378">append_</span>&nbsp;<span class="op" id="2303386">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303390">d</span>&nbsp;<span class="op" id="2303392">=</span>&nbsp;<span class="builtinfunc" id="2303394">append</span><span class="op" id="2303400">(</span><span class="ident" id="2303401">dst</span><span class="op" id="2303404">,</span>&nbsp;<span class="ident" id="2303406">a</span><span class="op" id="2303407">[</span><span class="ident" id="2303408">i</span><span class="op" id="2303409">:</span><span class="op" id="2303410">]</span><span class="op" id="2303411">...</span><span class="op" id="2303414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303418">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2303426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2303429">s</span>&nbsp;<span class="op" id="2303431">=</span>&nbsp;<span class="builtintype" id="2303433">string</span><span class="op" id="2303439">(</span><span class="ident" id="2303440">a</span><span class="op" id="2303441">[</span><span class="ident" id="2303442">i</span><span class="op" id="2303443">:</span><span class="op" id="2303444">]</span><span class="op" id="2303445">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2303448">return</span><br>
<span class="lineno"></span><span class="op" id="2303455">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
