<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>os</h2>
<ul>
<li><a href="/gostd/os/dir_unix.go.html">dir_unix.go</a></li>
<li><a href="/gostd/os/doc.go.html">doc.go</a></li>
<li><a href="/gostd/os/env.go.html">env.go</a></li>
<li><a href="/gostd/os/env_test.go.html">env_test.go</a></li>
<li><a href="/gostd/os/env_unix_test.go.html">env_unix_test.go</a></li>
<li><a href="/gostd/os/error.go.html">error.go</a></li>
<li><a href="/gostd/os/error_test.go.html">error_test.go</a></li>
<li><a href="/gostd/os/error_unix.go.html">error_unix.go</a></li>
<li><a href="/gostd/os/exec.go.html">exec.go</a></li>
<li><a href="/gostd/os/exec_posix.go.html" class="current">exec_posix.go</a></li>
<li><a href="/gostd/os/exec_unix.go.html">exec_unix.go</a></li>
<li><a href="/gostd/os/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/os/file.go.html">file.go</a></li>
<li><a href="/gostd/os/file_posix.go.html">file_posix.go</a></li>
<li><a href="/gostd/os/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/os/getwd.go.html">getwd.go</a></li>
<li><a href="/gostd/os/os_test.go.html">os_test.go</a></li>
<li><a href="/gostd/os/os_unix_test.go.html">os_unix_test.go</a></li>
<li><a href="/gostd/os/path.go.html">path.go</a></li>
<li><a href="/gostd/os/path_test.go.html">path_test.go</a></li>
<li><a href="/gostd/os/path_unix.go.html">path_unix.go</a></li>
<li><a href="/gostd/os/pipe_linux.go.html">pipe_linux.go</a></li>
<li><a href="/gostd/os/proc.go.html">proc.go</a></li>
<li><a href="/gostd/os/stat_linux.go.html">stat_linux.go</a></li>
<li><a href="/gostd/os/sys_linux.go.html">sys_linux.go</a></li>
<li><a href="/gostd/os/sys_unix.go.html">sys_unix.go</a></li>
<li><a href="/gostd/os/types.go.html">types.go</a></li>
<li><a href="/gostd/os/types_notwin.go.html">types_notwin.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2470720">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2470775">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2470829">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2470880">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2470958">package</span>&nbsp;<span class="ident" id="2470966">os</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2470970">import</span>&nbsp;<span class="op" id="2470977">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="2470980">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="2470990">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2470993">//&nbsp;The&nbsp;only&nbsp;signal&nbsp;values&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;present&nbsp;on&nbsp;all&nbsp;systems</span><br>
<span class="lineno"></span><span class="comment" id="2471059">//&nbsp;are&nbsp;Interrupt&nbsp;(send&nbsp;the&nbsp;process&nbsp;an&nbsp;interrupt)&nbsp;and&nbsp;Kill&nbsp;(force</span><br>
<span class="lineno">15</span><span class="comment" id="2471124">//&nbsp;the&nbsp;process&nbsp;to&nbsp;exit).</span><br>
<span class="lineno"></span><span class="keyword" id="2471149">var</span>&nbsp;<span class="op" id="2471153">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471156">Interrupt</span>&nbsp;<span class="ident" id="2471166">Signal</span>&nbsp;<span class="op" id="2471173">=</span>&nbsp;<span class="ident" id="2471175">syscall</span><span class="op" id="2471182">.</span><span class="ident" id="2471183">SIGINT</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471191">Kill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471201">Signal</span>&nbsp;<span class="op" id="2471208">=</span>&nbsp;<span class="ident" id="2471210">syscall</span><span class="op" id="2471217">.</span><span class="ident" id="2471218">SIGKILL</span><br>
<span class="lineno"></span><span class="op" id="2471226">)</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="2471229">func</span>&nbsp;<span class="ident" id="2471234">startProcess</span><span class="op" id="2471246">(</span><span class="ident" id="2471247">name</span>&nbsp;<span class="builtintype" id="2471252">string</span><span class="op" id="2471258">,</span>&nbsp;<span class="ident" id="2471260">argv</span>&nbsp;<span class="op" id="2471265">[</span><span class="op" id="2471266">]</span><span class="builtintype" id="2471267">string</span><span class="op" id="2471273">,</span>&nbsp;<span class="ident" id="2471275">attr</span>&nbsp;<span class="op" id="2471280">*</span><span class="ident" id="2471281">ProcAttr</span><span class="op" id="2471289">)</span>&nbsp;<span class="op" id="2471291">(</span><span class="ident" id="2471292">p</span>&nbsp;<span class="op" id="2471294">*</span><span class="ident" id="2471295">Process</span><span class="op" id="2471302">,</span>&nbsp;<span class="ident" id="2471304">err</span>&nbsp;<span class="builtintype" id="2471308">error</span><span class="op" id="2471313">)</span>&nbsp;<span class="op" id="2471315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2471318">//&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;SysProcAttr&nbsp;(ie.&nbsp;no&nbsp;Chroot&nbsp;or&nbsp;changed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2471375">//&nbsp;UID/GID),&nbsp;double-check&nbsp;existence&nbsp;of&nbsp;the&nbsp;directory&nbsp;we&nbsp;want</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2471437">//&nbsp;to&nbsp;chdir&nbsp;into.&nbsp;&nbsp;We&nbsp;can&nbsp;make&nbsp;the&nbsp;error&nbsp;clearer&nbsp;this&nbsp;way.</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471497">if</span>&nbsp;<span class="ident" id="2471500">attr</span>&nbsp;<span class="op" id="2471505">!=</span>&nbsp;<span class="builtintype" id="2471508">nil</span>&nbsp;<span class="op" id="2471512">&amp;&amp;</span>&nbsp;<span class="ident" id="2471515">attr</span><span class="op" id="2471519">.</span><span class="ident" id="2471520">Sys</span>&nbsp;<span class="op" id="2471524">==</span>&nbsp;<span class="builtintype" id="2471527">nil</span>&nbsp;<span class="op" id="2471531">&amp;&amp;</span>&nbsp;<span class="ident" id="2471534">attr</span><span class="op" id="2471538">.</span><span class="ident" id="2471539">Dir</span>&nbsp;<span class="op" id="2471543">!=</span>&nbsp;<span class="string" id="2471546">&#34;&#34;</span>&nbsp;<span class="op" id="2471549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471553">if</span>&nbsp;<span class="ident" id="2471556">_</span><span class="op" id="2471557">,</span>&nbsp;<span class="ident" id="2471559">err</span>&nbsp;<span class="op" id="2471563">:=</span>&nbsp;<span class="ident" id="2471566">Stat</span><span class="op" id="2471570">(</span><span class="ident" id="2471571">attr</span><span class="op" id="2471575">.</span><span class="ident" id="2471576">Dir</span><span class="op" id="2471579">)</span><span class="op" id="2471580">;</span>&nbsp;<span class="ident" id="2471582">err</span>&nbsp;<span class="op" id="2471586">!=</span>&nbsp;<span class="builtintype" id="2471589">nil</span>&nbsp;<span class="op" id="2471593">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471598">pe</span>&nbsp;<span class="op" id="2471601">:=</span>&nbsp;<span class="ident" id="2471604">err</span><span class="op" id="2471607">.</span><span class="op" id="2471608">(</span><span class="op" id="2471609">*</span><span class="ident" id="2471610">PathError</span><span class="op" id="2471619">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471624">pe</span><span class="op" id="2471626">.</span><span class="ident" id="2471627">Op</span>&nbsp;<span class="op" id="2471630">=</span>&nbsp;<span class="string" id="2471632">&#34;chdir&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471643">return</span>&nbsp;<span class="builtintype" id="2471650">nil</span><span class="op" id="2471653">,</span>&nbsp;<span class="ident" id="2471655">pe</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2471660">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2471663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471667">sysattr</span>&nbsp;<span class="op" id="2471675">:=</span>&nbsp;<span class="op" id="2471678">&amp;</span><span class="ident" id="2471679">syscall</span><span class="op" id="2471686">.</span><span class="ident" id="2471687">ProcAttr</span><span class="op" id="2471695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471699">Dir</span><span class="op" id="2471702">:</span>&nbsp;<span class="ident" id="2471704">attr</span><span class="op" id="2471708">.</span><span class="ident" id="2471709">Dir</span><span class="op" id="2471712">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471716">Env</span><span class="op" id="2471719">:</span>&nbsp;<span class="ident" id="2471721">attr</span><span class="op" id="2471725">.</span><span class="ident" id="2471726">Env</span><span class="op" id="2471729">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471733">Sys</span><span class="op" id="2471736">:</span>&nbsp;<span class="ident" id="2471738">attr</span><span class="op" id="2471742">.</span><span class="ident" id="2471743">Sys</span><span class="op" id="2471746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2471749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471752">if</span>&nbsp;<span class="ident" id="2471755">sysattr</span><span class="op" id="2471762">.</span><span class="ident" id="2471763">Env</span>&nbsp;<span class="op" id="2471767">==</span>&nbsp;<span class="builtintype" id="2471770">nil</span>&nbsp;<span class="op" id="2471774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471778">sysattr</span><span class="op" id="2471785">.</span><span class="ident" id="2471786">Env</span>&nbsp;<span class="op" id="2471790">=</span>&nbsp;<span class="ident" id="2471792">Environ</span><span class="op" id="2471799">(</span><span class="op" id="2471800">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2471803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471806">for</span>&nbsp;<span class="ident" id="2471810">_</span><span class="op" id="2471811">,</span>&nbsp;<span class="ident" id="2471813">f</span>&nbsp;<span class="op" id="2471815">:=</span>&nbsp;<span class="keyword" id="2471818">range</span>&nbsp;<span class="ident" id="2471824">attr</span><span class="op" id="2471828">.</span><span class="ident" id="2471829">Files</span>&nbsp;<span class="op" id="2471835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471839">sysattr</span><span class="op" id="2471846">.</span><span class="ident" id="2471847">Files</span>&nbsp;<span class="op" id="2471853">=</span>&nbsp;<span class="builtinfunc" id="2471855">append</span><span class="op" id="2471861">(</span><span class="ident" id="2471862">sysattr</span><span class="op" id="2471869">.</span><span class="ident" id="2471870">Files</span><span class="op" id="2471875">,</span>&nbsp;<span class="ident" id="2471877">f</span><span class="op" id="2471878">.</span><span class="ident" id="2471879">Fd</span><span class="op" id="2471881">(</span><span class="op" id="2471882">)</span><span class="op" id="2471883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2471886">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2471890">pid</span><span class="op" id="2471893">,</span>&nbsp;<span class="ident" id="2471895">h</span><span class="op" id="2471896">,</span>&nbsp;<span class="ident" id="2471898">e</span>&nbsp;<span class="op" id="2471900">:=</span>&nbsp;<span class="ident" id="2471903">syscall</span><span class="op" id="2471910">.</span><span class="ident" id="2471911">StartProcess</span><span class="op" id="2471923">(</span><span class="ident" id="2471924">name</span><span class="op" id="2471928">,</span>&nbsp;<span class="ident" id="2471930">argv</span><span class="op" id="2471934">,</span>&nbsp;<span class="ident" id="2471936">sysattr</span><span class="op" id="2471943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471946">if</span>&nbsp;<span class="ident" id="2471949">e</span>&nbsp;<span class="op" id="2471951">!=</span>&nbsp;<span class="builtintype" id="2471954">nil</span>&nbsp;<span class="op" id="2471958">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2471962">return</span>&nbsp;<span class="builtintype" id="2471969">nil</span><span class="op" id="2471972">,</span>&nbsp;<span class="op" id="2471974">&amp;</span><span class="ident" id="2471975">PathError</span><span class="op" id="2471984">{</span><span class="string" id="2471985">&#34;fork/exec&#34;</span><span class="op" id="2471996">,</span>&nbsp;<span class="ident" id="2471998">name</span><span class="op" id="2472002">,</span>&nbsp;<span class="ident" id="2472004">e</span><span class="op" id="2472005">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2472008">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472011">return</span>&nbsp;<span class="ident" id="2472018">newProcess</span><span class="op" id="2472028">(</span><span class="ident" id="2472029">pid</span><span class="op" id="2472032">,</span>&nbsp;<span class="ident" id="2472034">h</span><span class="op" id="2472035">)</span><span class="op" id="2472036">,</span>&nbsp;<span class="builtintype" id="2472038">nil</span><br>
<span class="lineno">50</span><span class="op" id="2472042">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2472045">func</span>&nbsp;<span class="op" id="2472050">(</span><span class="ident" id="2472051">p</span>&nbsp;<span class="op" id="2472053">*</span><span class="ident" id="2472054">Process</span><span class="op" id="2472061">)</span>&nbsp;<span class="ident" id="2472063">kill</span><span class="op" id="2472067">(</span><span class="op" id="2472068">)</span>&nbsp;<span class="builtintype" id="2472070">error</span>&nbsp;<span class="op" id="2472076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472079">return</span>&nbsp;<span class="ident" id="2472086">p</span><span class="op" id="2472087">.</span><span class="ident" id="2472088">Signal</span><span class="op" id="2472094">(</span><span class="ident" id="2472095">Kill</span><span class="op" id="2472099">)</span><br>
<span class="lineno"></span><span class="op" id="2472101">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="comment" id="2472104">//&nbsp;ProcessState&nbsp;stores&nbsp;information&nbsp;about&nbsp;a&nbsp;process,&nbsp;as&nbsp;reported&nbsp;by&nbsp;Wait.</span><br>
<span class="lineno"></span><span class="keyword" id="2472177">type</span>&nbsp;<span class="ident" id="2472182">ProcessState</span>&nbsp;<span class="keyword" id="2472195">struct</span>&nbsp;<span class="op" id="2472202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472205">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="2472212">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2472231">//&nbsp;The&nbsp;process&#39;s&nbsp;id.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472253">status</span>&nbsp;<span class="ident" id="2472260">syscall</span><span class="op" id="2472267">.</span><span class="ident" id="2472268">WaitStatus</span>&nbsp;<span class="comment" id="2472279">//&nbsp;System-dependent&nbsp;status&nbsp;info.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472313">rusage</span>&nbsp;<span class="op" id="2472320">*</span><span class="ident" id="2472321">syscall</span><span class="op" id="2472328">.</span><span class="ident" id="2472329">Rusage</span><br>
<span class="lineno"></span><span class="op" id="2472336">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2472339">//&nbsp;Pid&nbsp;returns&nbsp;the&nbsp;process&nbsp;id&nbsp;of&nbsp;the&nbsp;exited&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="2472392">func</span>&nbsp;<span class="op" id="2472397">(</span><span class="ident" id="2472398">p</span>&nbsp;<span class="op" id="2472400">*</span><span class="ident" id="2472401">ProcessState</span><span class="op" id="2472413">)</span>&nbsp;<span class="ident" id="2472415">Pid</span><span class="op" id="2472418">(</span><span class="op" id="2472419">)</span>&nbsp;<span class="builtintype" id="2472421">int</span>&nbsp;<span class="op" id="2472425">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472428">return</span>&nbsp;<span class="ident" id="2472435">p</span><span class="op" id="2472436">.</span><span class="ident" id="2472437">pid</span><br>
<span class="lineno"></span><span class="op" id="2472441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2472444">func</span>&nbsp;<span class="op" id="2472449">(</span><span class="ident" id="2472450">p</span>&nbsp;<span class="op" id="2472452">*</span><span class="ident" id="2472453">ProcessState</span><span class="op" id="2472465">)</span>&nbsp;<span class="ident" id="2472467">exited</span><span class="op" id="2472473">(</span><span class="op" id="2472474">)</span>&nbsp;<span class="builtintype" id="2472476">bool</span>&nbsp;<span class="op" id="2472481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472484">return</span>&nbsp;<span class="ident" id="2472491">p</span><span class="op" id="2472492">.</span><span class="ident" id="2472493">status</span><span class="op" id="2472499">.</span><span class="ident" id="2472500">Exited</span><span class="op" id="2472506">(</span><span class="op" id="2472507">)</span><br>
<span class="lineno">70</span><span class="op" id="2472509">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2472512">func</span>&nbsp;<span class="op" id="2472517">(</span><span class="ident" id="2472518">p</span>&nbsp;<span class="op" id="2472520">*</span><span class="ident" id="2472521">ProcessState</span><span class="op" id="2472533">)</span>&nbsp;<span class="ident" id="2472535">success</span><span class="op" id="2472542">(</span><span class="op" id="2472543">)</span>&nbsp;<span class="builtintype" id="2472545">bool</span>&nbsp;<span class="op" id="2472550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472553">return</span>&nbsp;<span class="ident" id="2472560">p</span><span class="op" id="2472561">.</span><span class="ident" id="2472562">status</span><span class="op" id="2472568">.</span><span class="ident" id="2472569">ExitStatus</span><span class="op" id="2472579">(</span><span class="op" id="2472580">)</span>&nbsp;<span class="op" id="2472582">==</span>&nbsp;<span class="num" id="2472585">0</span><br>
<span class="lineno"></span><span class="op" id="2472587">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="2472590">func</span>&nbsp;<span class="op" id="2472595">(</span><span class="ident" id="2472596">p</span>&nbsp;<span class="op" id="2472598">*</span><span class="ident" id="2472599">ProcessState</span><span class="op" id="2472611">)</span>&nbsp;<span class="ident" id="2472613">sys</span><span class="op" id="2472616">(</span><span class="op" id="2472617">)</span>&nbsp;<span class="keyword" id="2472619">interface</span><span class="op" id="2472628">{</span><span class="op" id="2472629">}</span>&nbsp;<span class="op" id="2472631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472634">return</span>&nbsp;<span class="ident" id="2472641">p</span><span class="op" id="2472642">.</span><span class="ident" id="2472643">status</span><br>
<span class="lineno"></span><span class="op" id="2472650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="keyword" id="2472653">func</span>&nbsp;<span class="op" id="2472658">(</span><span class="ident" id="2472659">p</span>&nbsp;<span class="op" id="2472661">*</span><span class="ident" id="2472662">ProcessState</span><span class="op" id="2472674">)</span>&nbsp;<span class="ident" id="2472676">sysUsage</span><span class="op" id="2472684">(</span><span class="op" id="2472685">)</span>&nbsp;<span class="keyword" id="2472687">interface</span><span class="op" id="2472696">{</span><span class="op" id="2472697">}</span>&nbsp;<span class="op" id="2472699">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472702">return</span>&nbsp;<span class="ident" id="2472709">p</span><span class="op" id="2472710">.</span><span class="ident" id="2472711">rusage</span><br>
<span class="lineno"></span><span class="op" id="2472718">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2472721">//&nbsp;Convert&nbsp;i&nbsp;to&nbsp;decimal&nbsp;string.</span><br>
<span class="lineno">85</span><span class="keyword" id="2472753">func</span>&nbsp;<span class="ident" id="2472758">itod</span><span class="op" id="2472762">(</span><span class="ident" id="2472763">i</span>&nbsp;<span class="builtintype" id="2472765">int</span><span class="op" id="2472768">)</span>&nbsp;<span class="builtintype" id="2472770">string</span>&nbsp;<span class="op" id="2472777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472780">if</span>&nbsp;<span class="ident" id="2472783">i</span>&nbsp;<span class="op" id="2472785">==</span>&nbsp;<span class="num" id="2472788">0</span>&nbsp;<span class="op" id="2472790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472794">return</span>&nbsp;<span class="string" id="2472801">&#34;0&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2472806">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472810">u</span>&nbsp;<span class="op" id="2472812">:=</span>&nbsp;<span class="builtintype" id="2472815">uint64</span><span class="op" id="2472821">(</span><span class="ident" id="2472822">i</span><span class="op" id="2472823">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472826">if</span>&nbsp;<span class="ident" id="2472829">i</span>&nbsp;<span class="op" id="2472831">&lt;</span>&nbsp;<span class="num" id="2472833">0</span>&nbsp;<span class="op" id="2472835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472839">u</span>&nbsp;<span class="op" id="2472841">=</span>&nbsp;<span class="op" id="2472843">-</span><span class="ident" id="2472844">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2472847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2472851">//&nbsp;Assemble&nbsp;decimal&nbsp;in&nbsp;reverse&nbsp;order.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472890">var</span>&nbsp;<span class="ident" id="2472894">b</span>&nbsp;<span class="op" id="2472896">[</span><span class="num" id="2472897">32</span><span class="op" id="2472899">]</span><span class="builtintype" id="2472900">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472906">bp</span>&nbsp;<span class="op" id="2472909">:=</span>&nbsp;<span class="builtinfunc" id="2472912">len</span><span class="op" id="2472915">(</span><span class="ident" id="2472916">b</span><span class="op" id="2472917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472920">for</span>&nbsp;<span class="op" id="2472924">;</span>&nbsp;<span class="ident" id="2472926">u</span>&nbsp;<span class="op" id="2472928">&gt;</span>&nbsp;<span class="num" id="2472930">0</span><span class="op" id="2472931">;</span>&nbsp;<span class="ident" id="2472933">u</span>&nbsp;<span class="op" id="2472935">/=</span>&nbsp;<span class="num" id="2472938">10</span>&nbsp;<span class="op" id="2472941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472945">bp</span><span class="op" id="2472947">--</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472952">b</span><span class="op" id="2472953">[</span><span class="ident" id="2472954">bp</span><span class="op" id="2472956">]</span>&nbsp;<span class="op" id="2472958">=</span>&nbsp;<span class="builtintype" id="2472960">byte</span><span class="op" id="2472964">(</span><span class="ident" id="2472965">u</span><span class="op" id="2472966">%</span><span class="num" id="2472967">10</span><span class="op" id="2472969">)</span>&nbsp;<span class="op" id="2472971">+</span>&nbsp;<span class="string" id="2472973">&#39;0&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2472978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2472982">if</span>&nbsp;<span class="ident" id="2472985">i</span>&nbsp;<span class="op" id="2472987">&lt;</span>&nbsp;<span class="num" id="2472989">0</span>&nbsp;<span class="op" id="2472991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2472995">bp</span><span class="op" id="2472997">--</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473002">b</span><span class="op" id="2473003">[</span><span class="ident" id="2473004">bp</span><span class="op" id="2473006">]</span>&nbsp;<span class="op" id="2473008">=</span>&nbsp;<span class="string" id="2473010">&#39;-&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2473015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473019">return</span>&nbsp;<span class="builtintype" id="2473026">string</span><span class="op" id="2473032">(</span><span class="ident" id="2473033">b</span><span class="op" id="2473034">[</span><span class="ident" id="2473035">bp</span><span class="op" id="2473037">:</span><span class="op" id="2473038">]</span><span class="op" id="2473039">)</span><br>
<span class="lineno"></span><span class="op" id="2473041">}</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span><span class="keyword" id="2473044">func</span>&nbsp;<span class="op" id="2473049">(</span><span class="ident" id="2473050">p</span>&nbsp;<span class="op" id="2473052">*</span><span class="ident" id="2473053">ProcessState</span><span class="op" id="2473065">)</span>&nbsp;<span class="ident" id="2473067">String</span><span class="op" id="2473073">(</span><span class="op" id="2473074">)</span>&nbsp;<span class="builtintype" id="2473076">string</span>&nbsp;<span class="op" id="2473083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473086">if</span>&nbsp;<span class="ident" id="2473089">p</span>&nbsp;<span class="op" id="2473091">==</span>&nbsp;<span class="builtintype" id="2473094">nil</span>&nbsp;<span class="op" id="2473098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473102">return</span>&nbsp;<span class="string" id="2473109">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2473118">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473121">status</span>&nbsp;<span class="op" id="2473128">:=</span>&nbsp;<span class="ident" id="2473131">p</span><span class="op" id="2473132">.</span><span class="ident" id="2473133">Sys</span><span class="op" id="2473136">(</span><span class="op" id="2473137">)</span><span class="op" id="2473138">.</span><span class="op" id="2473139">(</span><span class="ident" id="2473140">syscall</span><span class="op" id="2473147">.</span><span class="ident" id="2473148">WaitStatus</span><span class="op" id="2473158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473161">res</span>&nbsp;<span class="op" id="2473165">:=</span>&nbsp;<span class="string" id="2473168">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473172">switch</span>&nbsp;<span class="op" id="2473179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473182">case</span>&nbsp;<span class="ident" id="2473187">status</span><span class="op" id="2473193">.</span><span class="ident" id="2473194">Exited</span><span class="op" id="2473200">(</span><span class="op" id="2473201">)</span><span class="op" id="2473202">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473206">res</span>&nbsp;<span class="op" id="2473210">=</span>&nbsp;<span class="string" id="2473212">&#34;exit&nbsp;status&nbsp;&#34;</span>&nbsp;<span class="op" id="2473227">+</span>&nbsp;<span class="ident" id="2473229">itod</span><span class="op" id="2473233">(</span><span class="ident" id="2473234">status</span><span class="op" id="2473240">.</span><span class="ident" id="2473241">ExitStatus</span><span class="op" id="2473251">(</span><span class="op" id="2473252">)</span><span class="op" id="2473253">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473256">case</span>&nbsp;<span class="ident" id="2473261">status</span><span class="op" id="2473267">.</span><span class="ident" id="2473268">Signaled</span><span class="op" id="2473276">(</span><span class="op" id="2473277">)</span><span class="op" id="2473278">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473282">res</span>&nbsp;<span class="op" id="2473286">=</span>&nbsp;<span class="string" id="2473288">&#34;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2473299">+</span>&nbsp;<span class="ident" id="2473301">status</span><span class="op" id="2473307">.</span><span class="ident" id="2473308">Signal</span><span class="op" id="2473314">(</span><span class="op" id="2473315">)</span><span class="op" id="2473316">.</span><span class="ident" id="2473317">String</span><span class="op" id="2473323">(</span><span class="op" id="2473324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473327">case</span>&nbsp;<span class="ident" id="2473332">status</span><span class="op" id="2473338">.</span><span class="ident" id="2473339">Stopped</span><span class="op" id="2473346">(</span><span class="op" id="2473347">)</span><span class="op" id="2473348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473352">res</span>&nbsp;<span class="op" id="2473356">=</span>&nbsp;<span class="string" id="2473358">&#34;stop&nbsp;signal:&nbsp;&#34;</span>&nbsp;<span class="op" id="2473374">+</span>&nbsp;<span class="ident" id="2473376">status</span><span class="op" id="2473382">.</span><span class="ident" id="2473383">StopSignal</span><span class="op" id="2473393">(</span><span class="op" id="2473394">)</span><span class="op" id="2473395">.</span><span class="ident" id="2473396">String</span><span class="op" id="2473402">(</span><span class="op" id="2473403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473407">if</span>&nbsp;<span class="ident" id="2473410">status</span><span class="op" id="2473416">.</span><span class="ident" id="2473417">StopSignal</span><span class="op" id="2473427">(</span><span class="op" id="2473428">)</span>&nbsp;<span class="op" id="2473430">==</span>&nbsp;<span class="ident" id="2473433">syscall</span><span class="op" id="2473440">.</span><span class="ident" id="2473441">SIGTRAP</span>&nbsp;<span class="op" id="2473449">&amp;&amp;</span>&nbsp;<span class="ident" id="2473452">status</span><span class="op" id="2473458">.</span><span class="ident" id="2473459">TrapCause</span><span class="op" id="2473468">(</span><span class="op" id="2473469">)</span>&nbsp;<span class="op" id="2473471">!=</span>&nbsp;<span class="num" id="2473474">0</span>&nbsp;<span class="op" id="2473476">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473481">res</span>&nbsp;<span class="op" id="2473485">+=</span>&nbsp;<span class="string" id="2473488">&#34;&nbsp;(trap&nbsp;&#34;</span>&nbsp;<span class="op" id="2473498">+</span>&nbsp;<span class="ident" id="2473500">itod</span><span class="op" id="2473504">(</span><span class="ident" id="2473505">status</span><span class="op" id="2473511">.</span><span class="ident" id="2473512">TrapCause</span><span class="op" id="2473521">(</span><span class="op" id="2473522">)</span><span class="op" id="2473523">)</span>&nbsp;<span class="op" id="2473525">+</span>&nbsp;<span class="string" id="2473527">&#34;)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2473533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473536">case</span>&nbsp;<span class="ident" id="2473541">status</span><span class="op" id="2473547">.</span><span class="ident" id="2473548">Continued</span><span class="op" id="2473557">(</span><span class="op" id="2473558">)</span><span class="op" id="2473559">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473563">res</span>&nbsp;<span class="op" id="2473567">=</span>&nbsp;<span class="string" id="2473569">&#34;continued&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2473582">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473585">if</span>&nbsp;<span class="ident" id="2473588">status</span><span class="op" id="2473594">.</span><span class="ident" id="2473595">CoreDump</span><span class="op" id="2473603">(</span><span class="op" id="2473604">)</span>&nbsp;<span class="op" id="2473606">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2473610">res</span>&nbsp;<span class="op" id="2473614">+=</span>&nbsp;<span class="string" id="2473617">&#34;&nbsp;(core&nbsp;dumped)&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2473635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2473638">return</span>&nbsp;<span class="ident" id="2473645">res</span><br>
<span class="lineno"></span><span class="op" id="2473649">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
