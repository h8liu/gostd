<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/flate</h2>
<ul>
<li><a href="/gostd/compress/flate/copy.go.html">copy.go</a></li>
<li><a href="/gostd/compress/flate/copy_test.go.html">copy_test.go</a></li>
<li><a href="/gostd/compress/flate/deflate.go.html">deflate.go</a></li>
<li><a href="/gostd/compress/flate/deflate_test.go.html">deflate_test.go</a></li>
<li><a href="/gostd/compress/flate/fixedhuff.go.html">fixedhuff.go</a></li>
<li><a href="/gostd/compress/flate/flate_test.go.html">flate_test.go</a></li>
<li><a href="/gostd/compress/flate/huffman_bit_writer.go.html">huffman_bit_writer.go</a></li>
<li><a href="/gostd/compress/flate/huffman_code.go.html">huffman_code.go</a></li>
<li><a href="/gostd/compress/flate/inflate.go.html">inflate.go</a></li>
<li><a href="/gostd/compress/flate/inflate_test.go.html" class="current">inflate_test.go</a></li>
<li><a href="/gostd/compress/flate/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/flate/reverse_bits.go.html">reverse_bits.go</a></li>
<li><a href="/gostd/compress/flate/token.go.html">token.go</a></li>
<li><a href="/gostd/compress/flate/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6661504">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6661559">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6661613">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6661664">package</span>&nbsp;<span class="ident" id="6661672">flate</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6661679">import</span>&nbsp;<span class="op" id="6661686">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6661689">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6661698">&#34;io&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6661704">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6661714">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6661717">func</span>&nbsp;<span class="ident" id="6661722">TestReset</span><span class="op" id="6661731">(</span><span class="ident" id="6661732">t</span>&nbsp;<span class="op" id="6661734">*</span><span class="ident" id="6661735">testing</span><span class="op" id="6661742">.</span><span class="ident" id="6661743">T</span><span class="op" id="6661744">)</span>&nbsp;<span class="op" id="6661746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661749">ss</span>&nbsp;<span class="op" id="6661752">:=</span>&nbsp;<span class="op" id="6661755">[</span><span class="op" id="6661756">]</span><span class="builtintype" id="6661757">string</span><span class="op" id="6661763">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6661767">&#34;lorem&nbsp;ipsum&nbsp;izzle&nbsp;fo&nbsp;rizzle&#34;</span><span class="op" id="6661796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6661800">&#34;the&nbsp;quick&nbsp;brown&nbsp;fox&nbsp;jumped&nbsp;over&#34;</span><span class="op" id="6661833">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6661836">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661840">deflated</span>&nbsp;<span class="op" id="6661849">:=</span>&nbsp;<span class="builtinfunc" id="6661852">make</span><span class="op" id="6661856">(</span><span class="op" id="6661857">[</span><span class="op" id="6661858">]</span><span class="ident" id="6661859">bytes</span><span class="op" id="6661864">.</span><span class="ident" id="6661865">Buffer</span><span class="op" id="6661871">,</span>&nbsp;<span class="num" id="6661873">2</span><span class="op" id="6661874">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6661877">for</span>&nbsp;<span class="ident" id="6661881">i</span><span class="op" id="6661882">,</span>&nbsp;<span class="ident" id="6661884">s</span>&nbsp;<span class="op" id="6661886">:=</span>&nbsp;<span class="keyword" id="6661889">range</span>&nbsp;<span class="ident" id="6661895">ss</span>&nbsp;<span class="op" id="6661898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661902">w</span><span class="op" id="6661903">,</span>&nbsp;<span class="ident" id="6661905">_</span>&nbsp;<span class="op" id="6661907">:=</span>&nbsp;<span class="ident" id="6661910">NewWriter</span><span class="op" id="6661919">(</span><span class="op" id="6661920">&amp;</span><span class="ident" id="6661921">deflated</span><span class="op" id="6661929">[</span><span class="ident" id="6661930">i</span><span class="op" id="6661931">]</span><span class="op" id="6661932">,</span>&nbsp;<span class="num" id="6661934">1</span><span class="op" id="6661935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661939">w</span><span class="op" id="6661940">.</span><span class="ident" id="6661941">Write</span><span class="op" id="6661946">(</span><span class="op" id="6661947">[</span><span class="op" id="6661948">]</span><span class="builtintype" id="6661949">byte</span><span class="op" id="6661953">(</span><span class="ident" id="6661954">s</span><span class="op" id="6661955">)</span><span class="op" id="6661956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661960">w</span><span class="op" id="6661961">.</span><span class="ident" id="6661962">Close</span><span class="op" id="6661967">(</span><span class="op" id="6661968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6661971">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6661975">inflated</span>&nbsp;<span class="op" id="6661984">:=</span>&nbsp;<span class="builtinfunc" id="6661987">make</span><span class="op" id="6661991">(</span><span class="op" id="6661992">[</span><span class="op" id="6661993">]</span><span class="ident" id="6661994">bytes</span><span class="op" id="6661999">.</span><span class="ident" id="6662000">Buffer</span><span class="op" id="6662006">,</span>&nbsp;<span class="num" id="6662008">2</span><span class="op" id="6662009">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662013">f</span>&nbsp;<span class="op" id="6662015">:=</span>&nbsp;<span class="ident" id="6662018">NewReader</span><span class="op" id="6662027">(</span><span class="op" id="6662028">&amp;</span><span class="ident" id="6662029">deflated</span><span class="op" id="6662037">[</span><span class="num" id="6662038">0</span><span class="op" id="6662039">]</span><span class="op" id="6662040">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662043">io</span><span class="op" id="6662045">.</span><span class="ident" id="6662046">Copy</span><span class="op" id="6662050">(</span><span class="op" id="6662051">&amp;</span><span class="ident" id="6662052">inflated</span><span class="op" id="6662060">[</span><span class="num" id="6662061">0</span><span class="op" id="6662062">]</span><span class="op" id="6662063">,</span>&nbsp;<span class="ident" id="6662065">f</span><span class="op" id="6662066">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662069">f</span><span class="op" id="6662070">.</span><span class="op" id="6662071">(</span><span class="ident" id="6662072">Resetter</span><span class="op" id="6662080">)</span><span class="op" id="6662081">.</span><span class="ident" id="6662082">Reset</span><span class="op" id="6662087">(</span><span class="op" id="6662088">&amp;</span><span class="ident" id="6662089">deflated</span><span class="op" id="6662097">[</span><span class="num" id="6662098">1</span><span class="op" id="6662099">]</span><span class="op" id="6662100">,</span>&nbsp;<span class="ident" id="6662102">nil</span><span class="op" id="6662105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662108">io</span><span class="op" id="6662110">.</span><span class="ident" id="6662111">Copy</span><span class="op" id="6662115">(</span><span class="op" id="6662116">&amp;</span><span class="ident" id="6662117">inflated</span><span class="op" id="6662125">[</span><span class="num" id="6662126">1</span><span class="op" id="6662127">]</span><span class="op" id="6662128">,</span>&nbsp;<span class="ident" id="6662130">f</span><span class="op" id="6662131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662134">f</span><span class="op" id="6662135">.</span><span class="ident" id="6662136">Close</span><span class="op" id="6662141">(</span><span class="op" id="6662142">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6662146">for</span>&nbsp;<span class="ident" id="6662150">i</span><span class="op" id="6662151">,</span>&nbsp;<span class="ident" id="6662153">s</span>&nbsp;<span class="op" id="6662155">:=</span>&nbsp;<span class="keyword" id="6662158">range</span>&nbsp;<span class="ident" id="6662164">ss</span>&nbsp;<span class="op" id="6662167">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6662171">if</span>&nbsp;<span class="ident" id="6662174">s</span>&nbsp;<span class="op" id="6662176">!=</span>&nbsp;<span class="ident" id="6662179">inflated</span><span class="op" id="6662187">[</span><span class="ident" id="6662188">i</span><span class="op" id="6662189">]</span><span class="op" id="6662190">.</span><span class="ident" id="6662191">String</span><span class="op" id="6662197">(</span><span class="op" id="6662198">)</span>&nbsp;<span class="op" id="6662200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6662205">t</span><span class="op" id="6662206">.</span><span class="ident" id="6662207">Errorf</span><span class="op" id="6662213">(</span><span class="string" id="6662214">&#34;inflated[%d]:\ngot&nbsp;&nbsp;%q\nwant&nbsp;%q&#34;</span><span class="op" id="6662247">,</span>&nbsp;<span class="ident" id="6662249">i</span><span class="op" id="6662250">,</span>&nbsp;<span class="ident" id="6662252">inflated</span><span class="op" id="6662260">[</span><span class="ident" id="6662261">i</span><span class="op" id="6662262">]</span><span class="op" id="6662263">,</span>&nbsp;<span class="ident" id="6662265">s</span><span class="op" id="6662266">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6662270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6662273">}</span><br>
<span class="lineno"></span><span class="op" id="6662275">}</span>
</div>
</body>
</html>
