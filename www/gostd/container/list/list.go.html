<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>container/list</h2>
<ul>
<li><a href="/gostd/container/list/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/container/list/list.go.html" class="current">list.go</a></li>
<li><a href="/gostd/container/list/list_test.go.html">list_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4965090">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4965145">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4965199">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4965250">//&nbsp;Package&nbsp;list&nbsp;implements&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4965299">//</span><br>
<span class="lineno"></span><span class="comment" id="4965302">//&nbsp;To&nbsp;iterate&nbsp;over&nbsp;a&nbsp;list&nbsp;(where&nbsp;l&nbsp;is&nbsp;a&nbsp;*List):</span><br>
<span class="lineno"></span><span class="comment" id="4965350">//&nbsp;&nbsp;&nbsp;&nbspfor&nbsp;e&nbsp;:=&nbsp;l.Front();&nbsp;e&nbsp;!=&nbsp;nil;&nbsp;e&nbsp;=&nbsp;e.Next()&nbsp;{</span><br>
<span class="lineno"></span><span class="comment" id="4965398">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;do&nbsp;something&nbsp;with&nbsp;e.Value</span><br>
<span class="lineno">10</span><span class="comment" id="4965431">//&nbsp;&nbsp;&nbsp;&nbsp}</span><br>
<span class="lineno"></span><span class="comment" id="4965436">//</span><br>
<span class="lineno"></span><span class="keyword" id="4965439">package</span>&nbsp;<span class="ident" id="4965447">list</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4965453">//&nbsp;Element&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;a&nbsp;linked&nbsp;list.</span><br>
<span class="lineno">15</span><span class="keyword" id="4965496">type</span>&nbsp;<span class="ident" id="4965501">Element</span>&nbsp;<span class="keyword" id="4965509">struct</span>&nbsp;<span class="op" id="4965516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965519">//&nbsp;Next&nbsp;and&nbsp;previous&nbsp;pointers&nbsp;in&nbsp;the&nbsp;doubly-linked&nbsp;list&nbsp;of&nbsp;elements.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965589">//&nbsp;To&nbsp;simplify&nbsp;the&nbsp;implementation,&nbsp;internally&nbsp;a&nbsp;list&nbsp;l&nbsp;is&nbsp;implemented</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965660">//&nbsp;as&nbsp;a&nbsp;ring,&nbsp;such&nbsp;that&nbsp;&amp;l.root&nbsp;is&nbsp;both&nbsp;the&nbsp;next&nbsp;element&nbsp;of&nbsp;the&nbsp;last</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965730">//&nbsp;list&nbsp;element&nbsp;(l.Back())&nbsp;and&nbsp;the&nbsp;previous&nbsp;element&nbsp;of&nbsp;the&nbsp;first&nbsp;list</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965801">//&nbsp;element&nbsp;(l.Front()).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965826">next</span><span class="op" id="4965830">,</span>&nbsp;<span class="ident" id="4965832">prev</span>&nbsp;<span class="op" id="4965837">*</span><span class="ident" id="4965838">Element</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965848">//&nbsp;The&nbsp;list&nbsp;to&nbsp;which&nbsp;this&nbsp;element&nbsp;belongs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965892">list</span>&nbsp;<span class="op" id="4965897">*</span><span class="ident" id="4965898">List</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4965905">//&nbsp;The&nbsp;value&nbsp;stored&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4965945">Value</span>&nbsp;<span class="keyword" id="4965951">interface</span><span class="op" id="4965960">{</span><span class="op" id="4965961">}</span><br>
<span class="lineno"></span><span class="op" id="4965963">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="comment" id="4965966">//&nbsp;Next&nbsp;returns&nbsp;the&nbsp;next&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4966012">func</span>&nbsp;<span class="op" id="4966017">(</span><span class="ident" id="4966018">e</span>&nbsp;<span class="op" id="4966020">*</span><span class="ident" id="4966021">Element</span><span class="op" id="4966028">)</span>&nbsp;<span class="ident" id="4966030">Next</span><span class="op" id="4966034">(</span><span class="op" id="4966035">)</span>&nbsp;<span class="op" id="4966037">*</span><span class="ident" id="4966038">Element</span>&nbsp;<span class="op" id="4966046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966049">if</span>&nbsp;<span class="ident" id="4966052">p</span>&nbsp;<span class="op" id="4966054">:=</span>&nbsp;<span class="ident" id="4966057">e</span><span class="op" id="4966058">.</span><span class="ident" id="4966059">next</span><span class="op" id="4966063">;</span>&nbsp;<span class="ident" id="4966065">e</span><span class="op" id="4966066">.</span><span class="ident" id="4966067">list</span>&nbsp;<span class="op" id="4966072">!=</span>&nbsp;<span class="ident" id="4966075">nil</span>&nbsp;<span class="op" id="4966079">&amp;&amp;</span>&nbsp;<span class="ident" id="4966082">p</span>&nbsp;<span class="op" id="4966084">!=</span>&nbsp;<span class="op" id="4966087">&amp;</span><span class="ident" id="4966088">e</span><span class="op" id="4966089">.</span><span class="ident" id="4966090">list</span><span class="op" id="4966094">.</span><span class="ident" id="4966095">root</span>&nbsp;<span class="op" id="4966100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966104">return</span>&nbsp;<span class="ident" id="4966111">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966114">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966117">return</span>&nbsp;<span class="ident" id="4966124">nil</span><br>
<span class="lineno"></span><span class="op" id="4966128">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966131">//&nbsp;Prev&nbsp;returns&nbsp;the&nbsp;previous&nbsp;list&nbsp;element&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4966181">func</span>&nbsp;<span class="op" id="4966186">(</span><span class="ident" id="4966187">e</span>&nbsp;<span class="op" id="4966189">*</span><span class="ident" id="4966190">Element</span><span class="op" id="4966197">)</span>&nbsp;<span class="ident" id="4966199">Prev</span><span class="op" id="4966203">(</span><span class="op" id="4966204">)</span>&nbsp;<span class="op" id="4966206">*</span><span class="ident" id="4966207">Element</span>&nbsp;<span class="op" id="4966215">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966218">if</span>&nbsp;<span class="ident" id="4966221">p</span>&nbsp;<span class="op" id="4966223">:=</span>&nbsp;<span class="ident" id="4966226">e</span><span class="op" id="4966227">.</span><span class="ident" id="4966228">prev</span><span class="op" id="4966232">;</span>&nbsp;<span class="ident" id="4966234">e</span><span class="op" id="4966235">.</span><span class="ident" id="4966236">list</span>&nbsp;<span class="op" id="4966241">!=</span>&nbsp;<span class="ident" id="4966244">nil</span>&nbsp;<span class="op" id="4966248">&amp;&amp;</span>&nbsp;<span class="ident" id="4966251">p</span>&nbsp;<span class="op" id="4966253">!=</span>&nbsp;<span class="op" id="4966256">&amp;</span><span class="ident" id="4966257">e</span><span class="op" id="4966258">.</span><span class="ident" id="4966259">list</span><span class="op" id="4966263">.</span><span class="ident" id="4966264">root</span>&nbsp;<span class="op" id="4966269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966273">return</span>&nbsp;<span class="ident" id="4966280">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4966283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966286">return</span>&nbsp;<span class="ident" id="4966293">nil</span><br>
<span class="lineno"></span><span class="op" id="4966297">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="4966300">//&nbsp;List&nbsp;represents&nbsp;a&nbsp;doubly&nbsp;linked&nbsp;list.</span><br>
<span class="lineno"></span><span class="comment" id="4966341">//&nbsp;The&nbsp;zero&nbsp;value&nbsp;for&nbsp;List&nbsp;is&nbsp;an&nbsp;empty&nbsp;list&nbsp;ready&nbsp;to&nbsp;use.</span><br>
<span class="lineno"></span><span class="keyword" id="4966399">type</span>&nbsp;<span class="ident" id="4966404">List</span>&nbsp;<span class="keyword" id="4966409">struct</span>&nbsp;<span class="op" id="4966416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966419">root</span>&nbsp;<span class="ident" id="4966424">Element</span>&nbsp;<span class="comment" id="4966432">//&nbsp;sentinel&nbsp;list&nbsp;element,&nbsp;only&nbsp;&amp;root,&nbsp;root.prev,&nbsp;and&nbsp;root.next&nbsp;are&nbsp;used</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="4966505">len</span>&nbsp;&nbsp;<span class="builtintype" id="4966510">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4966518">//&nbsp;current&nbsp;list&nbsp;length&nbsp;excluding&nbsp;(this)&nbsp;sentinel&nbsp;element</span><br>
<span class="lineno"></span><span class="op" id="4966575">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966578">//&nbsp;Init&nbsp;initializes&nbsp;or&nbsp;clears&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="keyword" id="4966616">func</span>&nbsp;<span class="op" id="4966621">(</span><span class="ident" id="4966622">l</span>&nbsp;<span class="op" id="4966624">*</span><span class="ident" id="4966625">List</span><span class="op" id="4966629">)</span>&nbsp;<span class="ident" id="4966631">Init</span><span class="op" id="4966635">(</span><span class="op" id="4966636">)</span>&nbsp;<span class="op" id="4966638">*</span><span class="ident" id="4966639">List</span>&nbsp;<span class="op" id="4966644">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966647">l</span><span class="op" id="4966648">.</span><span class="ident" id="4966649">root</span><span class="op" id="4966653">.</span><span class="ident" id="4966654">next</span>&nbsp;<span class="op" id="4966659">=</span>&nbsp;<span class="op" id="4966661">&amp;</span><span class="ident" id="4966662">l</span><span class="op" id="4966663">.</span><span class="ident" id="4966664">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966670">l</span><span class="op" id="4966671">.</span><span class="ident" id="4966672">root</span><span class="op" id="4966676">.</span><span class="ident" id="4966677">prev</span>&nbsp;<span class="op" id="4966682">=</span>&nbsp;<span class="op" id="4966684">&amp;</span><span class="ident" id="4966685">l</span><span class="op" id="4966686">.</span><span class="ident" id="4966687">root</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4966693">l</span><span class="op" id="4966694">.</span><span class="builtinfunc" id="4966695">len</span>&nbsp;<span class="op" id="4966699">=</span>&nbsp;<span class="num" id="4966701">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4966704">return</span>&nbsp;<span class="ident" id="4966711">l</span><br>
<span class="lineno"></span><span class="op" id="4966713">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="comment" id="4966716">//&nbsp;New&nbsp;returns&nbsp;an&nbsp;initialized&nbsp;list.</span><br>
<span class="lineno"></span><span class="keyword" id="4966752">func</span>&nbsp;<span class="ident" id="4966757">New</span><span class="op" id="4966760">(</span><span class="op" id="4966761">)</span>&nbsp;<span class="op" id="4966763">*</span><span class="ident" id="4966764">List</span>&nbsp;<span class="op" id="4966769">{</span>&nbsp;<span class="keyword" id="4966771">return</span>&nbsp;<span class="builtinfunc" id="4966778">new</span><span class="op" id="4966781">(</span><span class="ident" id="4966782">List</span><span class="op" id="4966786">)</span><span class="op" id="4966787">.</span><span class="ident" id="4966788">Init</span><span class="op" id="4966792">(</span><span class="op" id="4966793">)</span>&nbsp;<span class="op" id="4966795">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966798">//&nbsp;Len&nbsp;returns&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">65</span><span class="comment" id="4966847">//&nbsp;The&nbsp;complexity&nbsp;is&nbsp;O(1).</span><br>
<span class="lineno"></span><span class="keyword" id="4966874">func</span>&nbsp;<span class="op" id="4966879">(</span><span class="ident" id="4966880">l</span>&nbsp;<span class="op" id="4966882">*</span><span class="ident" id="4966883">List</span><span class="op" id="4966887">)</span>&nbsp;<span class="ident" id="4966889">Len</span><span class="op" id="4966892">(</span><span class="op" id="4966893">)</span>&nbsp;<span class="builtintype" id="4966895">int</span>&nbsp;<span class="op" id="4966899">{</span>&nbsp;<span class="keyword" id="4966901">return</span>&nbsp;<span class="ident" id="4966908">l</span><span class="op" id="4966909">.</span><span class="builtinfunc" id="4966910">len</span>&nbsp;<span class="op" id="4966914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4966917">//&nbsp;Front&nbsp;returns&nbsp;the&nbsp;first&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4966970">func</span>&nbsp;<span class="op" id="4966975">(</span><span class="ident" id="4966976">l</span>&nbsp;<span class="op" id="4966978">*</span><span class="ident" id="4966979">List</span><span class="op" id="4966983">)</span>&nbsp;<span class="ident" id="4966985">Front</span><span class="op" id="4966990">(</span><span class="op" id="4966991">)</span>&nbsp;<span class="op" id="4966993">*</span><span class="ident" id="4966994">Element</span>&nbsp;<span class="op" id="4967002">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967005">if</span>&nbsp;<span class="ident" id="4967008">l</span><span class="op" id="4967009">.</span><span class="builtinfunc" id="4967010">len</span>&nbsp;<span class="op" id="4967014">==</span>&nbsp;<span class="num" id="4967017">0</span>&nbsp;<span class="op" id="4967019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967023">return</span>&nbsp;<span class="ident" id="4967030">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967035">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967038">return</span>&nbsp;<span class="ident" id="4967045">l</span><span class="op" id="4967046">.</span><span class="ident" id="4967047">root</span><span class="op" id="4967051">.</span><span class="ident" id="4967052">next</span><br>
<span class="lineno"></span><span class="op" id="4967057">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="4967060">//&nbsp;Back&nbsp;returns&nbsp;the&nbsp;last&nbsp;element&nbsp;of&nbsp;list&nbsp;l&nbsp;or&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="4967111">func</span>&nbsp;<span class="op" id="4967116">(</span><span class="ident" id="4967117">l</span>&nbsp;<span class="op" id="4967119">*</span><span class="ident" id="4967120">List</span><span class="op" id="4967124">)</span>&nbsp;<span class="ident" id="4967126">Back</span><span class="op" id="4967130">(</span><span class="op" id="4967131">)</span>&nbsp;<span class="op" id="4967133">*</span><span class="ident" id="4967134">Element</span>&nbsp;<span class="op" id="4967142">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967145">if</span>&nbsp;<span class="ident" id="4967148">l</span><span class="op" id="4967149">.</span><span class="builtinfunc" id="4967150">len</span>&nbsp;<span class="op" id="4967154">==</span>&nbsp;<span class="num" id="4967157">0</span>&nbsp;<span class="op" id="4967159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967163">return</span>&nbsp;<span class="ident" id="4967170">nil</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967178">return</span>&nbsp;<span class="ident" id="4967185">l</span><span class="op" id="4967186">.</span><span class="ident" id="4967187">root</span><span class="op" id="4967191">.</span><span class="ident" id="4967192">prev</span><br>
<span class="lineno"></span><span class="op" id="4967197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4967200">//&nbsp;lazyInit&nbsp;lazily&nbsp;initializes&nbsp;a&nbsp;zero&nbsp;List&nbsp;value.</span><br>
<span class="lineno">85</span><span class="keyword" id="4967250">func</span>&nbsp;<span class="op" id="4967255">(</span><span class="ident" id="4967256">l</span>&nbsp;<span class="op" id="4967258">*</span><span class="ident" id="4967259">List</span><span class="op" id="4967263">)</span>&nbsp;<span class="ident" id="4967265">lazyInit</span><span class="op" id="4967273">(</span><span class="op" id="4967274">)</span>&nbsp;<span class="op" id="4967276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967279">if</span>&nbsp;<span class="ident" id="4967282">l</span><span class="op" id="4967283">.</span><span class="ident" id="4967284">root</span><span class="op" id="4967288">.</span><span class="ident" id="4967289">next</span>&nbsp;<span class="op" id="4967294">==</span>&nbsp;<span class="ident" id="4967297">nil</span>&nbsp;<span class="op" id="4967301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967305">l</span><span class="op" id="4967306">.</span><span class="ident" id="4967307">Init</span><span class="op" id="4967311">(</span><span class="op" id="4967312">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4967315">}</span><br>
<span class="lineno"></span><span class="op" id="4967317">}</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span><span class="comment" id="4967320">//&nbsp;insert&nbsp;inserts&nbsp;e&nbsp;after&nbsp;at,&nbsp;increments&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4967383">func</span>&nbsp;<span class="op" id="4967388">(</span><span class="ident" id="4967389">l</span>&nbsp;<span class="op" id="4967391">*</span><span class="ident" id="4967392">List</span><span class="op" id="4967396">)</span>&nbsp;<span class="ident" id="4967398">insert</span><span class="op" id="4967404">(</span><span class="ident" id="4967405">e</span><span class="op" id="4967406">,</span>&nbsp;<span class="ident" id="4967408">at</span>&nbsp;<span class="op" id="4967411">*</span><span class="ident" id="4967412">Element</span><span class="op" id="4967419">)</span>&nbsp;<span class="op" id="4967421">*</span><span class="ident" id="4967422">Element</span>&nbsp;<span class="op" id="4967430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967433">n</span>&nbsp;<span class="op" id="4967435">:=</span>&nbsp;<span class="ident" id="4967438">at</span><span class="op" id="4967440">.</span><span class="ident" id="4967441">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967447">at</span><span class="op" id="4967449">.</span><span class="ident" id="4967450">next</span>&nbsp;<span class="op" id="4967455">=</span>&nbsp;<span class="ident" id="4967457">e</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967460">e</span><span class="op" id="4967461">.</span><span class="ident" id="4967462">prev</span>&nbsp;<span class="op" id="4967467">=</span>&nbsp;<span class="ident" id="4967469">at</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967473">e</span><span class="op" id="4967474">.</span><span class="ident" id="4967475">next</span>&nbsp;<span class="op" id="4967480">=</span>&nbsp;<span class="ident" id="4967482">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967485">n</span><span class="op" id="4967486">.</span><span class="ident" id="4967487">prev</span>&nbsp;<span class="op" id="4967492">=</span>&nbsp;<span class="ident" id="4967494">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967497">e</span><span class="op" id="4967498">.</span><span class="ident" id="4967499">list</span>&nbsp;<span class="op" id="4967504">=</span>&nbsp;<span class="ident" id="4967506">l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967509">l</span><span class="op" id="4967510">.</span><span class="builtinfunc" id="4967511">len</span><span class="op" id="4967514">++</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967518">return</span>&nbsp;<span class="ident" id="4967525">e</span><br>
<span class="lineno"></span><span class="op" id="4967527">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4967530">//&nbsp;insertValue&nbsp;is&nbsp;a&nbsp;convenience&nbsp;wrapper&nbsp;for&nbsp;insert(&amp;Element{Value:&nbsp;v},&nbsp;at).</span><br>
<span class="lineno"></span><span class="keyword" id="4967606">func</span>&nbsp;<span class="op" id="4967611">(</span><span class="ident" id="4967612">l</span>&nbsp;<span class="op" id="4967614">*</span><span class="ident" id="4967615">List</span><span class="op" id="4967619">)</span>&nbsp;<span class="ident" id="4967621">insertValue</span><span class="op" id="4967632">(</span><span class="ident" id="4967633">v</span>&nbsp;<span class="keyword" id="4967635">interface</span><span class="op" id="4967644">{</span><span class="op" id="4967645">}</span><span class="op" id="4967646">,</span>&nbsp;<span class="ident" id="4967648">at</span>&nbsp;<span class="op" id="4967651">*</span><span class="ident" id="4967652">Element</span><span class="op" id="4967659">)</span>&nbsp;<span class="op" id="4967661">*</span><span class="ident" id="4967662">Element</span>&nbsp;<span class="op" id="4967670">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967673">return</span>&nbsp;<span class="ident" id="4967680">l</span><span class="op" id="4967681">.</span><span class="ident" id="4967682">insert</span><span class="op" id="4967688">(</span><span class="op" id="4967689">&amp;</span><span class="ident" id="4967690">Element</span><span class="op" id="4967697">{</span><span class="ident" id="4967698">Value</span><span class="op" id="4967703">:</span>&nbsp;<span class="ident" id="4967705">v</span><span class="op" id="4967706">}</span><span class="op" id="4967707">,</span>&nbsp;<span class="ident" id="4967709">at</span><span class="op" id="4967711">)</span><br>
<span class="lineno"></span><span class="op" id="4967713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4967716">//&nbsp;remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;its&nbsp;list,&nbsp;decrements&nbsp;l.len,&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4967784">func</span>&nbsp;<span class="op" id="4967789">(</span><span class="ident" id="4967790">l</span>&nbsp;<span class="op" id="4967792">*</span><span class="ident" id="4967793">List</span><span class="op" id="4967797">)</span>&nbsp;<span class="ident" id="4967799">remove</span><span class="op" id="4967805">(</span><span class="ident" id="4967806">e</span>&nbsp;<span class="op" id="4967808">*</span><span class="ident" id="4967809">Element</span><span class="op" id="4967816">)</span>&nbsp;<span class="op" id="4967818">*</span><span class="ident" id="4967819">Element</span>&nbsp;<span class="op" id="4967827">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967830">e</span><span class="op" id="4967831">.</span><span class="ident" id="4967832">prev</span><span class="op" id="4967836">.</span><span class="ident" id="4967837">next</span>&nbsp;<span class="op" id="4967842">=</span>&nbsp;<span class="ident" id="4967844">e</span><span class="op" id="4967845">.</span><span class="ident" id="4967846">next</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967852">e</span><span class="op" id="4967853">.</span><span class="ident" id="4967854">next</span><span class="op" id="4967858">.</span><span class="ident" id="4967859">prev</span>&nbsp;<span class="op" id="4967864">=</span>&nbsp;<span class="ident" id="4967866">e</span><span class="op" id="4967867">.</span><span class="ident" id="4967868">prev</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967874">e</span><span class="op" id="4967875">.</span><span class="ident" id="4967876">next</span>&nbsp;<span class="op" id="4967881">=</span>&nbsp;<span class="ident" id="4967883">nil</span>&nbsp;<span class="comment" id="4967887">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967910">e</span><span class="op" id="4967911">.</span><span class="ident" id="4967912">prev</span>&nbsp;<span class="op" id="4967917">=</span>&nbsp;<span class="ident" id="4967919">nil</span>&nbsp;<span class="comment" id="4967923">//&nbsp;avoid&nbsp;memory&nbsp;leaks</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967946">e</span><span class="op" id="4967947">.</span><span class="ident" id="4967948">list</span>&nbsp;<span class="op" id="4967953">=</span>&nbsp;<span class="ident" id="4967955">nil</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4967960">l</span><span class="op" id="4967961">.</span><span class="builtinfunc" id="4967962">len</span><span class="op" id="4967965">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4967969">return</span>&nbsp;<span class="ident" id="4967976">e</span><br>
<span class="lineno"></span><span class="op" id="4967978">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4967981">//&nbsp;Remove&nbsp;removes&nbsp;e&nbsp;from&nbsp;l&nbsp;if&nbsp;e&nbsp;is&nbsp;an&nbsp;element&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">120</span><span class="comment" id="4968038">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;element&nbsp;value&nbsp;e.Value.</span><br>
<span class="lineno"></span><span class="keyword" id="4968079">func</span>&nbsp;<span class="op" id="4968084">(</span><span class="ident" id="4968085">l</span>&nbsp;<span class="op" id="4968087">*</span><span class="ident" id="4968088">List</span><span class="op" id="4968092">)</span>&nbsp;<span class="ident" id="4968094">Remove</span><span class="op" id="4968100">(</span><span class="ident" id="4968101">e</span>&nbsp;<span class="op" id="4968103">*</span><span class="ident" id="4968104">Element</span><span class="op" id="4968111">)</span>&nbsp;<span class="keyword" id="4968113">interface</span><span class="op" id="4968122">{</span><span class="op" id="4968123">}</span>&nbsp;<span class="op" id="4968125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968128">if</span>&nbsp;<span class="ident" id="4968131">e</span><span class="op" id="4968132">.</span><span class="ident" id="4968133">list</span>&nbsp;<span class="op" id="4968138">==</span>&nbsp;<span class="ident" id="4968141">l</span>&nbsp;<span class="op" id="4968143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4968147">//&nbsp;if&nbsp;e.list&nbsp;==&nbsp;l,&nbsp;l&nbsp;must&nbsp;have&nbsp;been&nbsp;initialized&nbsp;when&nbsp;e&nbsp;was&nbsp;inserted</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4968217">//&nbsp;in&nbsp;l&nbsp;or&nbsp;l&nbsp;==&nbsp;nil&nbsp;(e&nbsp;is&nbsp;a&nbsp;zero&nbsp;Element)&nbsp;and&nbsp;l.remove&nbsp;will&nbsp;crash</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4968285">l</span><span class="op" id="4968286">.</span><span class="ident" id="4968287">remove</span><span class="op" id="4968293">(</span><span class="ident" id="4968294">e</span><span class="op" id="4968295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4968298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968301">return</span>&nbsp;<span class="ident" id="4968308">e</span><span class="op" id="4968309">.</span><span class="ident" id="4968310">Value</span><br>
<span class="lineno"></span><span class="op" id="4968316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="4968319">//&nbsp;PushFront&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4968407">func</span>&nbsp;<span class="op" id="4968412">(</span><span class="ident" id="4968413">l</span>&nbsp;<span class="op" id="4968415">*</span><span class="ident" id="4968416">List</span><span class="op" id="4968420">)</span>&nbsp;<span class="ident" id="4968422">PushFront</span><span class="op" id="4968431">(</span><span class="ident" id="4968432">v</span>&nbsp;<span class="keyword" id="4968434">interface</span><span class="op" id="4968443">{</span><span class="op" id="4968444">}</span><span class="op" id="4968445">)</span>&nbsp;<span class="op" id="4968447">*</span><span class="ident" id="4968448">Element</span>&nbsp;<span class="op" id="4968456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4968459">l</span><span class="op" id="4968460">.</span><span class="ident" id="4968461">lazyInit</span><span class="op" id="4968469">(</span><span class="op" id="4968470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968473">return</span>&nbsp;<span class="ident" id="4968480">l</span><span class="op" id="4968481">.</span><span class="ident" id="4968482">insertValue</span><span class="op" id="4968493">(</span><span class="ident" id="4968494">v</span><span class="op" id="4968495">,</span>&nbsp;<span class="op" id="4968497">&amp;</span><span class="ident" id="4968498">l</span><span class="op" id="4968499">.</span><span class="ident" id="4968500">root</span><span class="op" id="4968504">)</span><br>
<span class="lineno"></span><span class="op" id="4968506">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="4968509">//&nbsp;PushBack&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="keyword" id="4968595">func</span>&nbsp;<span class="op" id="4968600">(</span><span class="ident" id="4968601">l</span>&nbsp;<span class="op" id="4968603">*</span><span class="ident" id="4968604">List</span><span class="op" id="4968608">)</span>&nbsp;<span class="ident" id="4968610">PushBack</span><span class="op" id="4968618">(</span><span class="ident" id="4968619">v</span>&nbsp;<span class="keyword" id="4968621">interface</span><span class="op" id="4968630">{</span><span class="op" id="4968631">}</span><span class="op" id="4968632">)</span>&nbsp;<span class="op" id="4968634">*</span><span class="ident" id="4968635">Element</span>&nbsp;<span class="op" id="4968643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4968646">l</span><span class="op" id="4968647">.</span><span class="ident" id="4968648">lazyInit</span><span class="op" id="4968656">(</span><span class="op" id="4968657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968660">return</span>&nbsp;<span class="ident" id="4968667">l</span><span class="op" id="4968668">.</span><span class="ident" id="4968669">insertValue</span><span class="op" id="4968680">(</span><span class="ident" id="4968681">v</span><span class="op" id="4968682">,</span>&nbsp;<span class="ident" id="4968684">l</span><span class="op" id="4968685">.</span><span class="ident" id="4968686">root</span><span class="op" id="4968690">.</span><span class="ident" id="4968691">prev</span><span class="op" id="4968695">)</span><br>
<span class="lineno">140</span><span class="op" id="4968697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4968700">//&nbsp;InsertBefore&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;before&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4968792">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4968853">func</span>&nbsp;<span class="op" id="4968858">(</span><span class="ident" id="4968859">l</span>&nbsp;<span class="op" id="4968861">*</span><span class="ident" id="4968862">List</span><span class="op" id="4968866">)</span>&nbsp;<span class="ident" id="4968868">InsertBefore</span><span class="op" id="4968880">(</span><span class="ident" id="4968881">v</span>&nbsp;<span class="keyword" id="4968883">interface</span><span class="op" id="4968892">{</span><span class="op" id="4968893">}</span><span class="op" id="4968894">,</span>&nbsp;<span class="ident" id="4968896">mark</span>&nbsp;<span class="op" id="4968901">*</span><span class="ident" id="4968902">Element</span><span class="op" id="4968909">)</span>&nbsp;<span class="op" id="4968911">*</span><span class="ident" id="4968912">Element</span>&nbsp;<span class="op" id="4968920">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968923">if</span>&nbsp;<span class="ident" id="4968926">mark</span><span class="op" id="4968930">.</span><span class="ident" id="4968931">list</span>&nbsp;<span class="op" id="4968936">!=</span>&nbsp;<span class="ident" id="4968939">l</span>&nbsp;<span class="op" id="4968941">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4968945">return</span>&nbsp;<span class="ident" id="4968952">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4968957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4968960">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969017">return</span>&nbsp;<span class="ident" id="4969024">l</span><span class="op" id="4969025">.</span><span class="ident" id="4969026">insertValue</span><span class="op" id="4969037">(</span><span class="ident" id="4969038">v</span><span class="op" id="4969039">,</span>&nbsp;<span class="ident" id="4969041">mark</span><span class="op" id="4969045">.</span><span class="ident" id="4969046">prev</span><span class="op" id="4969050">)</span><br>
<span class="lineno">150</span><span class="op" id="4969052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4969055">//&nbsp;InsertAfter&nbsp;inserts&nbsp;a&nbsp;new&nbsp;element&nbsp;e&nbsp;with&nbsp;value&nbsp;v&nbsp;immediately&nbsp;after&nbsp;mark&nbsp;and&nbsp;returns&nbsp;e.</span><br>
<span class="lineno"></span><span class="comment" id="4969145">//&nbsp;If&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4969206">func</span>&nbsp;<span class="op" id="4969211">(</span><span class="ident" id="4969212">l</span>&nbsp;<span class="op" id="4969214">*</span><span class="ident" id="4969215">List</span><span class="op" id="4969219">)</span>&nbsp;<span class="ident" id="4969221">InsertAfter</span><span class="op" id="4969232">(</span><span class="ident" id="4969233">v</span>&nbsp;<span class="keyword" id="4969235">interface</span><span class="op" id="4969244">{</span><span class="op" id="4969245">}</span><span class="op" id="4969246">,</span>&nbsp;<span class="ident" id="4969248">mark</span>&nbsp;<span class="op" id="4969253">*</span><span class="ident" id="4969254">Element</span><span class="op" id="4969261">)</span>&nbsp;<span class="op" id="4969263">*</span><span class="ident" id="4969264">Element</span>&nbsp;<span class="op" id="4969272">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969275">if</span>&nbsp;<span class="ident" id="4969278">mark</span><span class="op" id="4969282">.</span><span class="ident" id="4969283">list</span>&nbsp;<span class="op" id="4969288">!=</span>&nbsp;<span class="ident" id="4969291">l</span>&nbsp;<span class="op" id="4969293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969297">return</span>&nbsp;<span class="ident" id="4969304">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4969309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4969312">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969369">return</span>&nbsp;<span class="ident" id="4969376">l</span><span class="op" id="4969377">.</span><span class="ident" id="4969378">insertValue</span><span class="op" id="4969389">(</span><span class="ident" id="4969390">v</span><span class="op" id="4969391">,</span>&nbsp;<span class="ident" id="4969393">mark</span><span class="op" id="4969397">)</span><br>
<span class="lineno">160</span><span class="op" id="4969399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4969402">//&nbsp;MoveToFront&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4969457">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4969515">func</span>&nbsp;<span class="op" id="4969520">(</span><span class="ident" id="4969521">l</span>&nbsp;<span class="op" id="4969523">*</span><span class="ident" id="4969524">List</span><span class="op" id="4969528">)</span>&nbsp;<span class="ident" id="4969530">MoveToFront</span><span class="op" id="4969541">(</span><span class="ident" id="4969542">e</span>&nbsp;<span class="op" id="4969544">*</span><span class="ident" id="4969545">Element</span><span class="op" id="4969552">)</span>&nbsp;<span class="op" id="4969554">{</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969557">if</span>&nbsp;<span class="ident" id="4969560">e</span><span class="op" id="4969561">.</span><span class="ident" id="4969562">list</span>&nbsp;<span class="op" id="4969567">!=</span>&nbsp;<span class="ident" id="4969570">l</span>&nbsp;<span class="op" id="4969572">||</span>&nbsp;<span class="ident" id="4969575">l</span><span class="op" id="4969576">.</span><span class="ident" id="4969577">root</span><span class="op" id="4969581">.</span><span class="ident" id="4969582">next</span>&nbsp;<span class="op" id="4969587">==</span>&nbsp;<span class="ident" id="4969590">e</span>&nbsp;<span class="op" id="4969592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969596">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4969604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4969607">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4969664">l</span><span class="op" id="4969665">.</span><span class="ident" id="4969666">insert</span><span class="op" id="4969672">(</span><span class="ident" id="4969673">l</span><span class="op" id="4969674">.</span><span class="ident" id="4969675">remove</span><span class="op" id="4969681">(</span><span class="ident" id="4969682">e</span><span class="op" id="4969683">)</span><span class="op" id="4969684">,</span>&nbsp;<span class="op" id="4969686">&amp;</span><span class="ident" id="4969687">l</span><span class="op" id="4969688">.</span><span class="ident" id="4969689">root</span><span class="op" id="4969693">)</span><br>
<span class="lineno">170</span><span class="op" id="4969695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4969698">//&nbsp;MoveToBack&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4969751">//&nbsp;If&nbsp;e&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4969809">func</span>&nbsp;<span class="op" id="4969814">(</span><span class="ident" id="4969815">l</span>&nbsp;<span class="op" id="4969817">*</span><span class="ident" id="4969818">List</span><span class="op" id="4969822">)</span>&nbsp;<span class="ident" id="4969824">MoveToBack</span><span class="op" id="4969834">(</span><span class="ident" id="4969835">e</span>&nbsp;<span class="op" id="4969837">*</span><span class="ident" id="4969838">Element</span><span class="op" id="4969845">)</span>&nbsp;<span class="op" id="4969847">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969850">if</span>&nbsp;<span class="ident" id="4969853">e</span><span class="op" id="4969854">.</span><span class="ident" id="4969855">list</span>&nbsp;<span class="op" id="4969860">!=</span>&nbsp;<span class="ident" id="4969863">l</span>&nbsp;<span class="op" id="4969865">||</span>&nbsp;<span class="ident" id="4969868">l</span><span class="op" id="4969869">.</span><span class="ident" id="4969870">root</span><span class="op" id="4969874">.</span><span class="ident" id="4969875">prev</span>&nbsp;<span class="op" id="4969880">==</span>&nbsp;<span class="ident" id="4969883">e</span>&nbsp;<span class="op" id="4969885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4969889">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4969897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4969900">//&nbsp;see&nbsp;comment&nbsp;in&nbsp;List.Remove&nbsp;about&nbsp;initialization&nbsp;of&nbsp;l</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4969957">l</span><span class="op" id="4969958">.</span><span class="ident" id="4969959">insert</span><span class="op" id="4969965">(</span><span class="ident" id="4969966">l</span><span class="op" id="4969967">.</span><span class="ident" id="4969968">remove</span><span class="op" id="4969974">(</span><span class="ident" id="4969975">e</span><span class="op" id="4969976">)</span><span class="op" id="4969977">,</span>&nbsp;<span class="ident" id="4969979">l</span><span class="op" id="4969980">.</span><span class="ident" id="4969981">root</span><span class="op" id="4969985">.</span><span class="ident" id="4969986">prev</span><span class="op" id="4969990">)</span><br>
<span class="lineno">180</span><span class="op" id="4969992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4969995">//&nbsp;MoveBefore&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;before&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4970058">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4970138">func</span>&nbsp;<span class="op" id="4970143">(</span><span class="ident" id="4970144">l</span>&nbsp;<span class="op" id="4970146">*</span><span class="ident" id="4970147">List</span><span class="op" id="4970151">)</span>&nbsp;<span class="ident" id="4970153">MoveBefore</span><span class="op" id="4970163">(</span><span class="ident" id="4970164">e</span><span class="op" id="4970165">,</span>&nbsp;<span class="ident" id="4970167">mark</span>&nbsp;<span class="op" id="4970172">*</span><span class="ident" id="4970173">Element</span><span class="op" id="4970180">)</span>&nbsp;<span class="op" id="4970182">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4970185">if</span>&nbsp;<span class="ident" id="4970188">e</span><span class="op" id="4970189">.</span><span class="ident" id="4970190">list</span>&nbsp;<span class="op" id="4970195">!=</span>&nbsp;<span class="ident" id="4970198">l</span>&nbsp;<span class="op" id="4970200">||</span>&nbsp;<span class="ident" id="4970203">e</span>&nbsp;<span class="op" id="4970205">==</span>&nbsp;<span class="ident" id="4970208">mark</span>&nbsp;<span class="op" id="4970213">||</span>&nbsp;<span class="ident" id="4970216">mark</span><span class="op" id="4970220">.</span><span class="ident" id="4970221">list</span>&nbsp;<span class="op" id="4970226">!=</span>&nbsp;<span class="ident" id="4970229">l</span>&nbsp;<span class="op" id="4970231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4970235">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4970243">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4970246">l</span><span class="op" id="4970247">.</span><span class="ident" id="4970248">insert</span><span class="op" id="4970254">(</span><span class="ident" id="4970255">l</span><span class="op" id="4970256">.</span><span class="ident" id="4970257">remove</span><span class="op" id="4970263">(</span><span class="ident" id="4970264">e</span><span class="op" id="4970265">)</span><span class="op" id="4970266">,</span>&nbsp;<span class="ident" id="4970268">mark</span><span class="op" id="4970272">.</span><span class="ident" id="4970273">prev</span><span class="op" id="4970277">)</span><br>
<span class="lineno"></span><span class="op" id="4970279">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="4970282">//&nbsp;MoveAfter&nbsp;moves&nbsp;element&nbsp;e&nbsp;to&nbsp;its&nbsp;new&nbsp;position&nbsp;after&nbsp;mark.</span><br>
<span class="lineno"></span><span class="comment" id="4970343">//&nbsp;If&nbsp;e&nbsp;or&nbsp;mark&nbsp;is&nbsp;not&nbsp;an&nbsp;element&nbsp;of&nbsp;l,&nbsp;or&nbsp;e&nbsp;==&nbsp;mark,&nbsp;the&nbsp;list&nbsp;is&nbsp;not&nbsp;modified.</span><br>
<span class="lineno"></span><span class="keyword" id="4970423">func</span>&nbsp;<span class="op" id="4970428">(</span><span class="ident" id="4970429">l</span>&nbsp;<span class="op" id="4970431">*</span><span class="ident" id="4970432">List</span><span class="op" id="4970436">)</span>&nbsp;<span class="ident" id="4970438">MoveAfter</span><span class="op" id="4970447">(</span><span class="ident" id="4970448">e</span><span class="op" id="4970449">,</span>&nbsp;<span class="ident" id="4970451">mark</span>&nbsp;<span class="op" id="4970456">*</span><span class="ident" id="4970457">Element</span><span class="op" id="4970464">)</span>&nbsp;<span class="op" id="4970466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4970469">if</span>&nbsp;<span class="ident" id="4970472">e</span><span class="op" id="4970473">.</span><span class="ident" id="4970474">list</span>&nbsp;<span class="op" id="4970479">!=</span>&nbsp;<span class="ident" id="4970482">l</span>&nbsp;<span class="op" id="4970484">||</span>&nbsp;<span class="ident" id="4970487">e</span>&nbsp;<span class="op" id="4970489">==</span>&nbsp;<span class="ident" id="4970492">mark</span>&nbsp;<span class="op" id="4970497">||</span>&nbsp;<span class="ident" id="4970500">mark</span><span class="op" id="4970504">.</span><span class="ident" id="4970505">list</span>&nbsp;<span class="op" id="4970510">!=</span>&nbsp;<span class="ident" id="4970513">l</span>&nbsp;<span class="op" id="4970515">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4970519">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4970527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4970530">l</span><span class="op" id="4970531">.</span><span class="ident" id="4970532">insert</span><span class="op" id="4970538">(</span><span class="ident" id="4970539">l</span><span class="op" id="4970540">.</span><span class="ident" id="4970541">remove</span><span class="op" id="4970547">(</span><span class="ident" id="4970548">e</span><span class="op" id="4970549">)</span><span class="op" id="4970550">,</span>&nbsp;<span class="ident" id="4970552">mark</span><span class="op" id="4970556">)</span><br>
<span class="lineno"></span><span class="op" id="4970558">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="comment" id="4970561">//&nbsp;PushBackList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;back&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno"></span><span class="comment" id="4970632">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4970674">func</span>&nbsp;<span class="op" id="4970679">(</span><span class="ident" id="4970680">l</span>&nbsp;<span class="op" id="4970682">*</span><span class="ident" id="4970683">List</span><span class="op" id="4970687">)</span>&nbsp;<span class="ident" id="4970689">PushBackList</span><span class="op" id="4970701">(</span><span class="ident" id="4970702">other</span>&nbsp;<span class="op" id="4970708">*</span><span class="ident" id="4970709">List</span><span class="op" id="4970713">)</span>&nbsp;<span class="op" id="4970715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4970718">l</span><span class="op" id="4970719">.</span><span class="ident" id="4970720">lazyInit</span><span class="op" id="4970728">(</span><span class="op" id="4970729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4970732">for</span>&nbsp;<span class="ident" id="4970736">i</span><span class="op" id="4970737">,</span>&nbsp;<span class="ident" id="4970739">e</span>&nbsp;<span class="op" id="4970741">:=</span>&nbsp;<span class="ident" id="4970744">other</span><span class="op" id="4970749">.</span><span class="ident" id="4970750">Len</span><span class="op" id="4970753">(</span><span class="op" id="4970754">)</span><span class="op" id="4970755">,</span>&nbsp;<span class="ident" id="4970757">other</span><span class="op" id="4970762">.</span><span class="ident" id="4970763">Front</span><span class="op" id="4970768">(</span><span class="op" id="4970769">)</span><span class="op" id="4970770">;</span>&nbsp;<span class="ident" id="4970772">i</span>&nbsp;<span class="op" id="4970774">&gt;</span>&nbsp;<span class="num" id="4970776">0</span><span class="op" id="4970777">;</span>&nbsp;<span class="ident" id="4970779">i</span><span class="op" id="4970780">,</span>&nbsp;<span class="ident" id="4970782">e</span>&nbsp;<span class="op" id="4970784">=</span>&nbsp;<span class="ident" id="4970786">i</span><span class="op" id="4970787">-</span><span class="num" id="4970788">1</span><span class="op" id="4970789">,</span>&nbsp;<span class="ident" id="4970791">e</span><span class="op" id="4970792">.</span><span class="ident" id="4970793">Next</span><span class="op" id="4970797">(</span><span class="op" id="4970798">)</span>&nbsp;<span class="op" id="4970800">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4970804">l</span><span class="op" id="4970805">.</span><span class="ident" id="4970806">insertValue</span><span class="op" id="4970817">(</span><span class="ident" id="4970818">e</span><span class="op" id="4970819">.</span><span class="ident" id="4970820">Value</span><span class="op" id="4970825">,</span>&nbsp;<span class="ident" id="4970827">l</span><span class="op" id="4970828">.</span><span class="ident" id="4970829">root</span><span class="op" id="4970833">.</span><span class="ident" id="4970834">prev</span><span class="op" id="4970838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4970841">}</span><br>
<span class="lineno"></span><span class="op" id="4970843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4970846">//&nbsp;PushFrontList&nbsp;inserts&nbsp;a&nbsp;copy&nbsp;of&nbsp;an&nbsp;other&nbsp;list&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;list&nbsp;l.</span><br>
<span class="lineno">210</span><span class="comment" id="4970919">//&nbsp;The&nbsp;lists&nbsp;l&nbsp;and&nbsp;other&nbsp;may&nbsp;be&nbsp;the&nbsp;same.</span><br>
<span class="lineno"></span><span class="keyword" id="4970961">func</span>&nbsp;<span class="op" id="4970966">(</span><span class="ident" id="4970967">l</span>&nbsp;<span class="op" id="4970969">*</span><span class="ident" id="4970970">List</span><span class="op" id="4970974">)</span>&nbsp;<span class="ident" id="4970976">PushFrontList</span><span class="op" id="4970989">(</span><span class="ident" id="4970990">other</span>&nbsp;<span class="op" id="4970996">*</span><span class="ident" id="4970997">List</span><span class="op" id="4971001">)</span>&nbsp;<span class="op" id="4971003">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4971006">l</span><span class="op" id="4971007">.</span><span class="ident" id="4971008">lazyInit</span><span class="op" id="4971016">(</span><span class="op" id="4971017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4971020">for</span>&nbsp;<span class="ident" id="4971024">i</span><span class="op" id="4971025">,</span>&nbsp;<span class="ident" id="4971027">e</span>&nbsp;<span class="op" id="4971029">:=</span>&nbsp;<span class="ident" id="4971032">other</span><span class="op" id="4971037">.</span><span class="ident" id="4971038">Len</span><span class="op" id="4971041">(</span><span class="op" id="4971042">)</span><span class="op" id="4971043">,</span>&nbsp;<span class="ident" id="4971045">other</span><span class="op" id="4971050">.</span><span class="ident" id="4971051">Back</span><span class="op" id="4971055">(</span><span class="op" id="4971056">)</span><span class="op" id="4971057">;</span>&nbsp;<span class="ident" id="4971059">i</span>&nbsp;<span class="op" id="4971061">&gt;</span>&nbsp;<span class="num" id="4971063">0</span><span class="op" id="4971064">;</span>&nbsp;<span class="ident" id="4971066">i</span><span class="op" id="4971067">,</span>&nbsp;<span class="ident" id="4971069">e</span>&nbsp;<span class="op" id="4971071">=</span>&nbsp;<span class="ident" id="4971073">i</span><span class="op" id="4971074">-</span><span class="num" id="4971075">1</span><span class="op" id="4971076">,</span>&nbsp;<span class="ident" id="4971078">e</span><span class="op" id="4971079">.</span><span class="ident" id="4971080">Prev</span><span class="op" id="4971084">(</span><span class="op" id="4971085">)</span>&nbsp;<span class="op" id="4971087">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4971091">l</span><span class="op" id="4971092">.</span><span class="ident" id="4971093">insertValue</span><span class="op" id="4971104">(</span><span class="ident" id="4971105">e</span><span class="op" id="4971106">.</span><span class="ident" id="4971107">Value</span><span class="op" id="4971112">,</span>&nbsp;<span class="op" id="4971114">&amp;</span><span class="ident" id="4971115">l</span><span class="op" id="4971116">.</span><span class="ident" id="4971117">root</span><span class="op" id="4971121">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4971124">}</span><br>
<span class="lineno"></span><span class="op" id="4971126">}</span>
</div>
</body>
</html>
