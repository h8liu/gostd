<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3237069">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3237124">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3237178">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3237229">package</span>&nbsp;<span class="ident" id="3237237">bufio</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3237244">import</span>&nbsp;<span class="op" id="3237251">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3237254">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3237263">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3237273">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3237279">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3237294">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3237297">//&nbsp;Scanner&nbsp;provides&nbsp;a&nbsp;convenient&nbsp;interface&nbsp;for&nbsp;reading&nbsp;data&nbsp;such&nbsp;as</span><br>
<span class="lineno">15</span><span class="comment" id="3237365">//&nbsp;a&nbsp;file&nbsp;of&nbsp;newline-delimited&nbsp;lines&nbsp;of&nbsp;text.&nbsp;Successive&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3237431">//&nbsp;the&nbsp;Scan&nbsp;method&nbsp;will&nbsp;step&nbsp;through&nbsp;the&nbsp;&#39;tokens&#39;&nbsp;of&nbsp;a&nbsp;file,&nbsp;skipping</span><br>
<span class="lineno"></span><span class="comment" id="3237501">//&nbsp;the&nbsp;bytes&nbsp;between&nbsp;the&nbsp;tokens.&nbsp;The&nbsp;specification&nbsp;of&nbsp;a&nbsp;token&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="3237566">//&nbsp;defined&nbsp;by&nbsp;a&nbsp;split&nbsp;function&nbsp;of&nbsp;type&nbsp;SplitFunc;&nbsp;the&nbsp;default&nbsp;split</span><br>
<span class="lineno"></span><span class="comment" id="3237634">//&nbsp;function&nbsp;breaks&nbsp;the&nbsp;input&nbsp;into&nbsp;lines&nbsp;with&nbsp;line&nbsp;termination&nbsp;stripped.&nbsp;Split</span><br>
<span class="lineno">20</span><span class="comment" id="3237712">//&nbsp;functions&nbsp;are&nbsp;defined&nbsp;in&nbsp;this&nbsp;package&nbsp;for&nbsp;scanning&nbsp;a&nbsp;file&nbsp;into</span><br>
<span class="lineno"></span><span class="comment" id="3237778">//&nbsp;lines,&nbsp;bytes,&nbsp;UTF-8-encoded&nbsp;runes,&nbsp;and&nbsp;space-delimited&nbsp;words.&nbsp;The</span><br>
<span class="lineno"></span><span class="comment" id="3237847">//&nbsp;client&nbsp;may&nbsp;instead&nbsp;provide&nbsp;a&nbsp;custom&nbsp;split&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="3237902">//</span><br>
<span class="lineno"></span><span class="comment" id="3237905">//&nbsp;Scanning&nbsp;stops&nbsp;unrecoverably&nbsp;at&nbsp;EOF,&nbsp;the&nbsp;first&nbsp;I/O&nbsp;error,&nbsp;or&nbsp;a&nbsp;token&nbsp;too</span><br>
<span class="lineno">25</span><span class="comment" id="3237981">//&nbsp;large&nbsp;to&nbsp;fit&nbsp;in&nbsp;the&nbsp;buffer.&nbsp;When&nbsp;a&nbsp;scan&nbsp;stops,&nbsp;the&nbsp;reader&nbsp;may&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="3238051">//&nbsp;advanced&nbsp;arbitrarily&nbsp;far&nbsp;past&nbsp;the&nbsp;last&nbsp;token.&nbsp;Programs&nbsp;that&nbsp;need&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3238124">//&nbsp;control&nbsp;over&nbsp;error&nbsp;handling&nbsp;or&nbsp;large&nbsp;tokens,&nbsp;or&nbsp;must&nbsp;run&nbsp;sequential&nbsp;scans</span><br>
<span class="lineno"></span><span class="comment" id="3238201">//&nbsp;on&nbsp;a&nbsp;reader,&nbsp;should&nbsp;use&nbsp;bufio.Reader&nbsp;instead.</span><br>
<span class="lineno"></span><span class="comment" id="3238250">//</span><br>
<span class="lineno">30</span><span class="keyword" id="3238253">type</span>&nbsp;<span class="ident" id="3238258">Scanner</span>&nbsp;<span class="keyword" id="3238266">struct</span>&nbsp;<span class="op" id="3238273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238276">r</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3238289"><a href="/bufio/scan.go.html#3237273">io</a></span><span class="op" id="3238291">.</span><span class="ident" id="3238292">Reader</span>&nbsp;<span class="comment" id="3238299">//&nbsp;The&nbsp;reader&nbsp;provided&nbsp;by&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238338">split</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3238351"><a href="/bufio/scan.go.html#3239731">SplitFunc</a></span>&nbsp;<span class="comment" id="3238361">//&nbsp;The&nbsp;function&nbsp;to&nbsp;split&nbsp;the&nbsp;tokens.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238399">maxTokenSize</span>&nbsp;<span class="builtintype" id="3238412">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238422">//&nbsp;Maximum&nbsp;size&nbsp;of&nbsp;a&nbsp;token;&nbsp;modified&nbsp;by&nbsp;tests.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238470">token</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3238483">[</span><span class="op" id="3238484">]</span><span class="builtintype" id="3238485">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238493">//&nbsp;Last&nbsp;token&nbsp;returned&nbsp;by&nbsp;split.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238527">buf</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3238540">[</span><span class="op" id="3238541">]</span><span class="builtintype" id="3238542">byte</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238550">//&nbsp;Buffer&nbsp;used&nbsp;as&nbsp;argument&nbsp;to&nbsp;split.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238588">start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3238601">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238611">//&nbsp;First&nbsp;non-processed&nbsp;byte&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238648">end</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3238661">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238671">//&nbsp;End&nbsp;of&nbsp;data&nbsp;in&nbsp;buf.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238695">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3238708">error</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238718">//&nbsp;Sticky&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3238736">empties</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3238749">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3238759">//&nbsp;Count&nbsp;of&nbsp;successive&nbsp;empty&nbsp;tokens.</span><br>
<span class="lineno">40</span><span class="op" id="3238796">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3238799">//&nbsp;SplitFunc&nbsp;is&nbsp;the&nbsp;signature&nbsp;of&nbsp;the&nbsp;split&nbsp;function&nbsp;used&nbsp;to&nbsp;tokenize&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3238872">//&nbsp;input.&nbsp;The&nbsp;arguments&nbsp;are&nbsp;an&nbsp;initial&nbsp;substring&nbsp;of&nbsp;the&nbsp;remaining&nbsp;unprocessed</span><br>
<span class="lineno"></span><span class="comment" id="3238950">//&nbsp;data&nbsp;and&nbsp;a&nbsp;flag,&nbsp;atEOF,&nbsp;that&nbsp;reports&nbsp;whether&nbsp;the&nbsp;Reader&nbsp;has&nbsp;no&nbsp;more&nbsp;data</span><br>
<span class="lineno">45</span><span class="comment" id="3239026">//&nbsp;to&nbsp;give.&nbsp;The&nbsp;return&nbsp;values&nbsp;are&nbsp;the&nbsp;number&nbsp;of&nbsp;bytes&nbsp;to&nbsp;advance&nbsp;the&nbsp;input</span><br>
<span class="lineno"></span><span class="comment" id="3239101">//&nbsp;and&nbsp;the&nbsp;next&nbsp;token&nbsp;to&nbsp;return&nbsp;to&nbsp;the&nbsp;user,&nbsp;plus&nbsp;an&nbsp;error,&nbsp;if&nbsp;any.&nbsp;If&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3239176">//&nbsp;data&nbsp;does&nbsp;not&nbsp;yet&nbsp;hold&nbsp;a&nbsp;complete&nbsp;token,&nbsp;for&nbsp;instance&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;newline</span><br>
<span class="lineno"></span><span class="comment" id="3239254">//&nbsp;while&nbsp;scanning&nbsp;lines,&nbsp;SplitFunc&nbsp;can&nbsp;return&nbsp;(0,&nbsp;nil,&nbsp;nil)&nbsp;to&nbsp;signal&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3239328">//&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;more&nbsp;data&nbsp;into&nbsp;the&nbsp;slice&nbsp;and&nbsp;try&nbsp;again&nbsp;with&nbsp;a&nbsp;longer&nbsp;slice</span><br>
<span class="lineno">50</span><span class="comment" id="3239406">//&nbsp;starting&nbsp;at&nbsp;the&nbsp;same&nbsp;point&nbsp;in&nbsp;the&nbsp;input.</span><br>
<span class="lineno"></span><span class="comment" id="3239450">//</span><br>
<span class="lineno"></span><span class="comment" id="3239453">//&nbsp;If&nbsp;the&nbsp;returned&nbsp;error&nbsp;is&nbsp;non-nil,&nbsp;scanning&nbsp;stops&nbsp;and&nbsp;the&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="3239519">//&nbsp;is&nbsp;returned&nbsp;to&nbsp;the&nbsp;client.</span><br>
<span class="lineno"></span><span class="comment" id="3239549">//</span><br>
<span class="lineno">55</span><span class="comment" id="3239552">//&nbsp;The&nbsp;function&nbsp;is&nbsp;never&nbsp;called&nbsp;with&nbsp;an&nbsp;empty&nbsp;data&nbsp;slice&nbsp;unless&nbsp;atEOF</span><br>
<span class="lineno"></span><span class="comment" id="3239622">//&nbsp;is&nbsp;true.&nbsp;If&nbsp;atEOF&nbsp;is&nbsp;true,&nbsp;however,&nbsp;data&nbsp;may&nbsp;be&nbsp;non-empty&nbsp;and,</span><br>
<span class="lineno"></span><span class="comment" id="3239688">//&nbsp;as&nbsp;always,&nbsp;holds&nbsp;unprocessed&nbsp;text.</span><br>
<span class="lineno"></span><span class="keyword" id="3239726">type</span>&nbsp;<span class="ident" id="3239731">SplitFunc</span>&nbsp;<span class="keyword" id="3239741">func</span><span class="op" id="3239745">(</span><span class="ident" id="3239746">data</span>&nbsp;<span class="op" id="3239751">[</span><span class="op" id="3239752">]</span><span class="builtintype" id="3239753">byte</span><span class="op" id="3239757">,</span>&nbsp;<span class="ident" id="3239759">atEOF</span>&nbsp;<span class="builtintype" id="3239765">bool</span><span class="op" id="3239769">)</span>&nbsp;<span class="op" id="3239771">(</span><span class="ident" id="3239772">advance</span>&nbsp;<span class="builtintype" id="3239780">int</span><span class="op" id="3239783">,</span>&nbsp;<span class="ident" id="3239785">token</span>&nbsp;<span class="op" id="3239791">[</span><span class="op" id="3239792">]</span><span class="builtintype" id="3239793">byte</span><span class="op" id="3239797">,</span>&nbsp;<span class="ident" id="3239799">err</span>&nbsp;<span class="builtintype" id="3239803">error</span><span class="op" id="3239808">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="comment" id="3239811">//&nbsp;Errors&nbsp;returned&nbsp;by&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="3239842">var</span>&nbsp;<span class="op" id="3239846">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239849">ErrTooLong</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3239868">=</span>&nbsp;<span class="ident" id="3239870"><a href="/bufio/scan.go.html#3237263">errors</a></span><span class="op" id="3239876">.</span><span class="ident" id="3239877">New</span><span class="op" id="3239880">(</span><span class="string" id="3239881">&#34;bufio.Scanner:&nbsp;token&nbsp;too&nbsp;long&#34;</span><span class="op" id="3239912">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3239915">ErrNegativeAdvance</span>&nbsp;<span class="op" id="3239934">=</span>&nbsp;<span class="ident" id="3239936"><a href="/bufio/scan.go.html#3237263">errors</a></span><span class="op" id="3239942">.</span><span class="ident" id="3239943">New</span><span class="op" id="3239946">(</span><span class="string" id="3239947">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;negative&nbsp;advance&nbsp;count&#34;</span><span class="op" id="3240004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240007">ErrAdvanceTooFar</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3240026">=</span>&nbsp;<span class="ident" id="3240028"><a href="/bufio/scan.go.html#3237263">errors</a></span><span class="op" id="3240034">.</span><span class="ident" id="3240035">New</span><span class="op" id="3240038">(</span><span class="string" id="3240039">&#34;bufio.Scanner:&nbsp;SplitFunc&nbsp;returns&nbsp;advance&nbsp;count&nbsp;beyond&nbsp;input&#34;</span><span class="op" id="3240100">)</span><br>
<span class="lineno">65</span><span class="op" id="3240102">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3240105">const</span>&nbsp;<span class="op" id="3240111">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240114">//&nbsp;MaxScanTokenSize&nbsp;is&nbsp;the&nbsp;maximum&nbsp;size&nbsp;used&nbsp;to&nbsp;buffer&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240179">//&nbsp;The&nbsp;actual&nbsp;maximum&nbsp;token&nbsp;size&nbsp;may&nbsp;be&nbsp;smaller&nbsp;as&nbsp;the&nbsp;buffer</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3240242">//&nbsp;may&nbsp;need&nbsp;to&nbsp;include,&nbsp;for&nbsp;instance,&nbsp;a&nbsp;newline.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240292">MaxScanTokenSize</span>&nbsp;<span class="op" id="3240309">=</span>&nbsp;<span class="num" id="3240311">64</span>&nbsp;<span class="op" id="3240314">*</span>&nbsp;<span class="num" id="3240316">1024</span><br>
<span class="lineno"></span><span class="op" id="3240321">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3240324">//&nbsp;NewScanner&nbsp;returns&nbsp;a&nbsp;new&nbsp;Scanner&nbsp;to&nbsp;read&nbsp;from&nbsp;r.</span><br>
<span class="lineno">75</span><span class="comment" id="3240376">//&nbsp;The&nbsp;split&nbsp;function&nbsp;defaults&nbsp;to&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="3240421">func</span>&nbsp;<span class="ident" id="3240426">NewScanner</span><span class="op" id="3240436">(</span><span class="ident" id="3240437">r</span>&nbsp;<span class="ident" id="3240439"><a href="/bufio/scan.go.html#3237273">io</a></span><span class="op" id="3240441">.</span><span class="ident" id="3240442">Reader</span><span class="op" id="3240448">)</span>&nbsp;<span class="op" id="3240450">*</span><span class="ident" id="3240451"><a href="/bufio/scan.go.html#3238258">Scanner</a></span>&nbsp;<span class="op" id="3240459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240462">return</span>&nbsp;<span class="op" id="3240469">&amp;</span><span class="ident" id="3240470"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3240477">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240481">r</span><span class="op" id="3240482">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3240495"><a href="/bufio/scan.go.html#3240437">r</a></span><span class="op" id="3240496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240500">split</span><span class="op" id="3240505">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3240514"><a href="/bufio/scan.go.html#3246820">ScanLines</a></span><span class="op" id="3240523">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240527">maxTokenSize</span><span class="op" id="3240539">:</span>&nbsp;<span class="ident" id="3240541"><a href="/bufio/scan.go.html#3240292">MaxScanTokenSize</a></span><span class="op" id="3240557">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3240561">buf</span><span class="op" id="3240564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3240575">make</span><span class="op" id="3240579">(</span><span class="op" id="3240580">[</span><span class="op" id="3240581">]</span><span class="builtintype" id="3240582">byte</span><span class="op" id="3240586">,</span>&nbsp;<span class="num" id="3240588">4096</span><span class="op" id="3240592">)</span><span class="op" id="3240593">,</span>&nbsp;<span class="comment" id="3240595">//&nbsp;Plausible&nbsp;starting&nbsp;size;&nbsp;needn&#39;t&nbsp;be&nbsp;large.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240642">}</span><br>
<span class="lineno"></span><span class="op" id="3240644">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="3240647">//&nbsp;Err&nbsp;returns&nbsp;the&nbsp;first&nbsp;non-EOF&nbsp;error&nbsp;that&nbsp;was&nbsp;encountered&nbsp;by&nbsp;the&nbsp;Scanner.</span><br>
<span class="lineno"></span><span class="keyword" id="3240723">func</span>&nbsp;<span class="op" id="3240728">(</span><span class="ident" id="3240729">s</span>&nbsp;<span class="op" id="3240731">*</span><span class="ident" id="3240732"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3240739">)</span>&nbsp;<span class="ident" id="3240741">Err</span><span class="op" id="3240744">(</span><span class="op" id="3240745">)</span>&nbsp;<span class="builtintype" id="3240747">error</span>&nbsp;<span class="op" id="3240753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240756">if</span>&nbsp;<span class="ident" id="3240759"><a href="/bufio/scan.go.html#3240729">s</a></span><span class="op" id="3240760">.</span><span class="ident" id="3240761">err</span>&nbsp;<span class="op" id="3240765">==</span>&nbsp;<span class="ident" id="3240768"><a href="/bufio/scan.go.html#3237273">io</a></span><span class="op" id="3240770">.</span><span class="ident" id="3240771">EOF</span>&nbsp;<span class="op" id="3240775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240779">return</span>&nbsp;<span class="ident" id="3240786">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3240791">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3240794">return</span>&nbsp;<span class="ident" id="3240801"><a href="/bufio/scan.go.html#3240729">s</a></span><span class="op" id="3240802">.</span><span class="ident" id="3240803">err</span><br>
<span class="lineno"></span><span class="op" id="3240807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3240810">//&nbsp;Bytes&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan.</span><br>
<span class="lineno"></span><span class="comment" id="3240878">//&nbsp;The&nbsp;underlying&nbsp;array&nbsp;may&nbsp;point&nbsp;to&nbsp;data&nbsp;that&nbsp;will&nbsp;be&nbsp;overwritten</span><br>
<span class="lineno">95</span><span class="comment" id="3240945">//&nbsp;by&nbsp;a&nbsp;subsequent&nbsp;call&nbsp;to&nbsp;Scan.&nbsp;It&nbsp;does&nbsp;no&nbsp;allocation.</span><br>
<span class="lineno"></span><span class="keyword" id="3241001">func</span>&nbsp;<span class="op" id="3241006">(</span><span class="ident" id="3241007">s</span>&nbsp;<span class="op" id="3241009">*</span><span class="ident" id="3241010"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3241017">)</span>&nbsp;<span class="ident" id="3241019">Bytes</span><span class="op" id="3241024">(</span><span class="op" id="3241025">)</span>&nbsp;<span class="op" id="3241027">[</span><span class="op" id="3241028">]</span><span class="builtintype" id="3241029">byte</span>&nbsp;<span class="op" id="3241034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241037">return</span>&nbsp;<span class="ident" id="3241044"><a href="/bufio/scan.go.html#3241007">s</a></span><span class="op" id="3241045">.</span><span class="ident" id="3241046">token</span><br>
<span class="lineno"></span><span class="op" id="3241052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span><span class="comment" id="3241055">//&nbsp;Text&nbsp;returns&nbsp;the&nbsp;most&nbsp;recent&nbsp;token&nbsp;generated&nbsp;by&nbsp;a&nbsp;call&nbsp;to&nbsp;Scan</span><br>
<span class="lineno"></span><span class="comment" id="3241121">//&nbsp;as&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;string&nbsp;holding&nbsp;its&nbsp;bytes.</span><br>
<span class="lineno"></span><span class="keyword" id="3241171">func</span>&nbsp;<span class="op" id="3241176">(</span><span class="ident" id="3241177">s</span>&nbsp;<span class="op" id="3241179">*</span><span class="ident" id="3241180"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3241187">)</span>&nbsp;<span class="ident" id="3241189">Text</span><span class="op" id="3241193">(</span><span class="op" id="3241194">)</span>&nbsp;<span class="builtintype" id="3241196">string</span>&nbsp;<span class="op" id="3241203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241206">return</span>&nbsp;<span class="builtintype" id="3241213">string</span><span class="op" id="3241219">(</span><span class="ident" id="3241220"><a href="/bufio/scan.go.html#3241177">s</a></span><span class="op" id="3241221">.</span><span class="ident" id="3241222">token</span><span class="op" id="3241227">)</span><br>
<span class="lineno"></span><span class="op" id="3241229">}</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span><span class="comment" id="3241232">//&nbsp;Scan&nbsp;advances&nbsp;the&nbsp;Scanner&nbsp;to&nbsp;the&nbsp;next&nbsp;token,&nbsp;which&nbsp;will&nbsp;then&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3241299">//&nbsp;available&nbsp;through&nbsp;the&nbsp;Bytes&nbsp;or&nbsp;Text&nbsp;method.&nbsp;It&nbsp;returns&nbsp;false&nbsp;when&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="3241372">//&nbsp;scan&nbsp;stops,&nbsp;either&nbsp;by&nbsp;reaching&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;input&nbsp;or&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="3241440">//&nbsp;After&nbsp;Scan&nbsp;returns&nbsp;false,&nbsp;the&nbsp;Err&nbsp;method&nbsp;will&nbsp;return&nbsp;any&nbsp;error&nbsp;that</span><br>
<span class="lineno">110</span><span class="comment" id="3241511">//&nbsp;occurred&nbsp;during&nbsp;scanning,&nbsp;except&nbsp;that&nbsp;if&nbsp;it&nbsp;was&nbsp;io.EOF,&nbsp;Err</span><br>
<span class="lineno"></span><span class="comment" id="3241574">//&nbsp;will&nbsp;return&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="3241594">//&nbsp;Split&nbsp;panics&nbsp;if&nbsp;the&nbsp;split&nbsp;function&nbsp;returns&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without</span><br>
<span class="lineno"></span><span class="comment" id="3241665">//&nbsp;advancing&nbsp;the&nbsp;input.&nbsp;This&nbsp;is&nbsp;a&nbsp;common&nbsp;error&nbsp;mode&nbsp;for&nbsp;scanners.</span><br>
<span class="lineno"></span><span class="keyword" id="3241731">func</span>&nbsp;<span class="op" id="3241736">(</span><span class="ident" id="3241737">s</span>&nbsp;<span class="op" id="3241739">*</span><span class="ident" id="3241740"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3241747">)</span>&nbsp;<span class="ident" id="3241749">Scan</span><span class="op" id="3241753">(</span><span class="op" id="3241754">)</span>&nbsp;<span class="builtintype" id="3241756">bool</span>&nbsp;<span class="op" id="3241761">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241764">//&nbsp;Loop&nbsp;until&nbsp;we&nbsp;have&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241796">for</span>&nbsp;<span class="op" id="3241800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241804">//&nbsp;See&nbsp;if&nbsp;we&nbsp;can&nbsp;get&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;already&nbsp;have.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241862">//&nbsp;If&nbsp;we&#39;ve&nbsp;run&nbsp;out&nbsp;of&nbsp;data&nbsp;but&nbsp;have&nbsp;an&nbsp;error,&nbsp;give&nbsp;the&nbsp;split&nbsp;function</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3241935">//&nbsp;a&nbsp;chance&nbsp;to&nbsp;recover&nbsp;any&nbsp;remaining,&nbsp;possibly&nbsp;empty&nbsp;token.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3241997">if</span>&nbsp;<span class="ident" id="3242000"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242001">.</span><span class="ident" id="3242002">end</span>&nbsp;<span class="op" id="3242006">&gt;</span>&nbsp;<span class="ident" id="3242008"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242009">.</span><span class="ident" id="3242010">start</span>&nbsp;<span class="op" id="3242016">||</span>&nbsp;<span class="ident" id="3242019"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242020">.</span><span class="ident" id="3242021">err</span>&nbsp;<span class="op" id="3242025">!=</span>&nbsp;<span class="ident" id="3242028">nil</span>&nbsp;<span class="op" id="3242032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242037">advance</span><span class="op" id="3242044">,</span>&nbsp;<span class="ident" id="3242046">token</span><span class="op" id="3242051">,</span>&nbsp;<span class="ident" id="3242053">err</span>&nbsp;<span class="op" id="3242057">:=</span>&nbsp;<span class="ident" id="3242060"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242061">.</span><span class="ident" id="3242062">split</span><span class="op" id="3242067">(</span><span class="ident" id="3242068"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242069">.</span><span class="ident" id="3242070">buf</span><span class="op" id="3242073">[</span><span class="ident" id="3242074"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242075">.</span><span class="ident" id="3242076">start</span><span class="op" id="3242081">:</span><span class="ident" id="3242082"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242083">.</span><span class="ident" id="3242084">end</span><span class="op" id="3242087">]</span><span class="op" id="3242088">,</span>&nbsp;<span class="ident" id="3242090"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242091">.</span><span class="ident" id="3242092">err</span>&nbsp;<span class="op" id="3242096">!=</span>&nbsp;<span class="ident" id="3242099">nil</span><span class="op" id="3242102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242107">if</span>&nbsp;<span class="ident" id="3242110"><a href="/bufio/scan.go.html#3242053">err</a></span>&nbsp;<span class="op" id="3242114">!=</span>&nbsp;<span class="ident" id="3242117">nil</span>&nbsp;<span class="op" id="3242121">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242127"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242128">.</span><span class="ident" id="3242129">setErr</span><span class="op" id="3242135">(</span><span class="ident" id="3242136"><a href="/bufio/scan.go.html#3242053">err</a></span><span class="op" id="3242139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242145">return</span>&nbsp;<span class="builtintype" id="3242152">false</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242166">if</span>&nbsp;<span class="op" id="3242169">!</span><span class="ident" id="3242170"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242171">.</span><span class="ident" id="3242172">advance</span><span class="op" id="3242179">(</span><span class="ident" id="3242180"><a href="/bufio/scan.go.html#3242037">advance</a></span><span class="op" id="3242187">)</span>&nbsp;<span class="op" id="3242189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242195">return</span>&nbsp;<span class="builtintype" id="3242202">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242216"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242217">.</span><span class="ident" id="3242218">token</span>&nbsp;<span class="op" id="3242224">=</span>&nbsp;<span class="ident" id="3242226"><a href="/bufio/scan.go.html#3242046">token</a></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242235">if</span>&nbsp;<span class="ident" id="3242238"><a href="/bufio/scan.go.html#3242046">token</a></span>&nbsp;<span class="op" id="3242244">!=</span>&nbsp;<span class="ident" id="3242247">nil</span>&nbsp;<span class="op" id="3242251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242257">if</span>&nbsp;<span class="ident" id="3242260"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242261">.</span><span class="ident" id="3242262">err</span>&nbsp;<span class="op" id="3242266">==</span>&nbsp;<span class="ident" id="3242269">nil</span>&nbsp;<span class="op" id="3242273">||</span>&nbsp;<span class="ident" id="3242276"><a href="/bufio/scan.go.html#3242037">advance</a></span>&nbsp;<span class="op" id="3242284">&gt;</span>&nbsp;<span class="num" id="3242286">0</span>&nbsp;<span class="op" id="3242288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242295"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242296">.</span><span class="ident" id="3242297">empties</span>&nbsp;<span class="op" id="3242305">=</span>&nbsp;<span class="num" id="3242307">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242313">}</span>&nbsp;<span class="keyword" id="3242315">else</span>&nbsp;<span class="op" id="3242320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242327">//&nbsp;Returning&nbsp;tokens&nbsp;not&nbsp;advancing&nbsp;input&nbsp;at&nbsp;EOF.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242380"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242381">.</span><span class="ident" id="3242382">empties</span><span class="op" id="3242389">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242397">if</span>&nbsp;<span class="ident" id="3242400"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242401">.</span><span class="ident" id="3242402">empties</span>&nbsp;<span class="op" id="3242410">&gt;</span>&nbsp;<span class="num" id="3242412">100</span>&nbsp;<span class="op" id="3242416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3242424">panic</span><span class="op" id="3242429">(</span><span class="string" id="3242430">&#34;bufio.Scan:&nbsp;100&nbsp;empty&nbsp;tokens&nbsp;without&nbsp;progressing&#34;</span><span class="op" id="3242480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242493">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242499">return</span>&nbsp;<span class="builtintype" id="3242506">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242514">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242522">//&nbsp;We&nbsp;cannot&nbsp;generate&nbsp;a&nbsp;token&nbsp;with&nbsp;what&nbsp;we&nbsp;are&nbsp;holding.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242580">//&nbsp;If&nbsp;we&#39;ve&nbsp;already&nbsp;hit&nbsp;EOF&nbsp;or&nbsp;an&nbsp;I/O&nbsp;error,&nbsp;we&nbsp;are&nbsp;done.</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242640">if</span>&nbsp;<span class="ident" id="3242643"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242644">.</span><span class="ident" id="3242645">err</span>&nbsp;<span class="op" id="3242649">!=</span>&nbsp;<span class="ident" id="3242652">nil</span>&nbsp;<span class="op" id="3242656">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242661">//&nbsp;Shut&nbsp;it&nbsp;down.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242681"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242682">.</span><span class="ident" id="3242683">start</span>&nbsp;<span class="op" id="3242689">=</span>&nbsp;<span class="num" id="3242691">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242696"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242697">.</span><span class="ident" id="3242698">end</span>&nbsp;<span class="op" id="3242702">=</span>&nbsp;<span class="num" id="3242704">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242709">return</span>&nbsp;<span class="builtintype" id="3242716">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242728">//&nbsp;Must&nbsp;read&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242754">//&nbsp;First,&nbsp;shift&nbsp;data&nbsp;to&nbsp;beginning&nbsp;of&nbsp;buffer&nbsp;if&nbsp;there&#39;s&nbsp;lots&nbsp;of&nbsp;empty&nbsp;space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3242831">//&nbsp;or&nbsp;space&nbsp;is&nbsp;needed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3242856">if</span>&nbsp;<span class="ident" id="3242859"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242860">.</span><span class="ident" id="3242861">start</span>&nbsp;<span class="op" id="3242867">&gt;</span>&nbsp;<span class="num" id="3242869">0</span>&nbsp;<span class="op" id="3242871">&amp;&amp;</span>&nbsp;<span class="op" id="3242874">(</span><span class="ident" id="3242875"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242876">.</span><span class="ident" id="3242877">end</span>&nbsp;<span class="op" id="3242881">==</span>&nbsp;<span class="builtinfunc" id="3242884">len</span><span class="op" id="3242887">(</span><span class="ident" id="3242888"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242889">.</span><span class="ident" id="3242890">buf</span><span class="op" id="3242893">)</span>&nbsp;<span class="op" id="3242895">||</span>&nbsp;<span class="ident" id="3242898"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242899">.</span><span class="ident" id="3242900">start</span>&nbsp;<span class="op" id="3242906">&gt;</span>&nbsp;<span class="builtinfunc" id="3242908">len</span><span class="op" id="3242911">(</span><span class="ident" id="3242912"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242913">.</span><span class="ident" id="3242914">buf</span><span class="op" id="3242917">)</span><span class="op" id="3242918">/</span><span class="num" id="3242919">2</span><span class="op" id="3242920">)</span>&nbsp;<span class="op" id="3242922">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3242927">copy</span><span class="op" id="3242931">(</span><span class="ident" id="3242932"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242933">.</span><span class="ident" id="3242934">buf</span><span class="op" id="3242937">,</span>&nbsp;<span class="ident" id="3242939"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242940">.</span><span class="ident" id="3242941">buf</span><span class="op" id="3242944">[</span><span class="ident" id="3242945"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242946">.</span><span class="ident" id="3242947">start</span><span class="op" id="3242952">:</span><span class="ident" id="3242953"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242954">.</span><span class="ident" id="3242955">end</span><span class="op" id="3242958">]</span><span class="op" id="3242959">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242964"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242965">.</span><span class="ident" id="3242966">end</span>&nbsp;<span class="op" id="3242970">-=</span>&nbsp;<span class="ident" id="3242973"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242974">.</span><span class="ident" id="3242975">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3242984"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3242985">.</span><span class="ident" id="3242986">start</span>&nbsp;<span class="op" id="3242992">=</span>&nbsp;<span class="num" id="3242994">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3242998">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243002">//&nbsp;Is&nbsp;the&nbsp;buffer&nbsp;full?&nbsp;If&nbsp;so,&nbsp;resize.</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243042">if</span>&nbsp;<span class="ident" id="3243045"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243046">.</span><span class="ident" id="3243047">end</span>&nbsp;<span class="op" id="3243051">==</span>&nbsp;<span class="builtinfunc" id="3243054">len</span><span class="op" id="3243057">(</span><span class="ident" id="3243058"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243059">.</span><span class="ident" id="3243060">buf</span><span class="op" id="3243063">)</span>&nbsp;<span class="op" id="3243065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243070">if</span>&nbsp;<span class="builtinfunc" id="3243073">len</span><span class="op" id="3243076">(</span><span class="ident" id="3243077"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243078">.</span><span class="ident" id="3243079">buf</span><span class="op" id="3243082">)</span>&nbsp;<span class="op" id="3243084">&gt;=</span>&nbsp;<span class="ident" id="3243087"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243088">.</span><span class="ident" id="3243089">maxTokenSize</span>&nbsp;<span class="op" id="3243102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243108"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243109">.</span><span class="ident" id="3243110">setErr</span><span class="op" id="3243116">(</span><span class="ident" id="3243117"><a href="/bufio/scan.go.html#3239849">ErrTooLong</a></span><span class="op" id="3243127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243133">return</span>&nbsp;<span class="builtintype" id="3243140">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243149">}</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243154">newSize</span>&nbsp;<span class="op" id="3243162">:=</span>&nbsp;<span class="builtinfunc" id="3243165">len</span><span class="op" id="3243168">(</span><span class="ident" id="3243169"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243170">.</span><span class="ident" id="3243171">buf</span><span class="op" id="3243174">)</span>&nbsp;<span class="op" id="3243176">*</span>&nbsp;<span class="num" id="3243178">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243183">if</span>&nbsp;<span class="ident" id="3243186"><a href="/bufio/scan.go.html#3243154">newSize</a></span>&nbsp;<span class="op" id="3243194">&gt;</span>&nbsp;<span class="ident" id="3243196"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243197">.</span><span class="ident" id="3243198">maxTokenSize</span>&nbsp;<span class="op" id="3243211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243217"><a href="/bufio/scan.go.html#3243154">newSize</a></span>&nbsp;<span class="op" id="3243225">=</span>&nbsp;<span class="ident" id="3243227"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243228">.</span><span class="ident" id="3243229">maxTokenSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243250">newBuf</span>&nbsp;<span class="op" id="3243257">:=</span>&nbsp;<span class="builtinfunc" id="3243260">make</span><span class="op" id="3243264">(</span><span class="op" id="3243265">[</span><span class="op" id="3243266">]</span><span class="builtintype" id="3243267">byte</span><span class="op" id="3243271">,</span>&nbsp;<span class="ident" id="3243273"><a href="/bufio/scan.go.html#3243154">newSize</a></span><span class="op" id="3243280">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="3243285">copy</span><span class="op" id="3243289">(</span><span class="ident" id="3243290"><a href="/bufio/scan.go.html#3243250">newBuf</a></span><span class="op" id="3243296">,</span>&nbsp;<span class="ident" id="3243298"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243299">.</span><span class="ident" id="3243300">buf</span><span class="op" id="3243303">[</span><span class="ident" id="3243304"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243305">.</span><span class="ident" id="3243306">start</span><span class="op" id="3243311">:</span><span class="ident" id="3243312"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243313">.</span><span class="ident" id="3243314">end</span><span class="op" id="3243317">]</span><span class="op" id="3243318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243323"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243324">.</span><span class="ident" id="3243325">buf</span>&nbsp;<span class="op" id="3243329">=</span>&nbsp;<span class="ident" id="3243331"><a href="/bufio/scan.go.html#3243250">newBuf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243341"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243342">.</span><span class="ident" id="3243343">end</span>&nbsp;<span class="op" id="3243347">-=</span>&nbsp;<span class="ident" id="3243350"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243351">.</span><span class="ident" id="3243352">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243361"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243362">.</span><span class="ident" id="3243363">start</span>&nbsp;<span class="op" id="3243369">=</span>&nbsp;<span class="num" id="3243371">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243376">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243387">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243391">//&nbsp;Finally&nbsp;we&nbsp;can&nbsp;read&nbsp;some&nbsp;input.&nbsp;Make&nbsp;sure&nbsp;we&nbsp;don&#39;t&nbsp;get&nbsp;stuck&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243462">//&nbsp;a&nbsp;misbehaving&nbsp;Reader.&nbsp;Officially&nbsp;we&nbsp;don&#39;t&nbsp;need&nbsp;to&nbsp;do&nbsp;this,&nbsp;but&nbsp;let&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3243536">//&nbsp;be&nbsp;extra&nbsp;careful:&nbsp;Scanner&nbsp;is&nbsp;for&nbsp;safe,&nbsp;simple&nbsp;jobs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243593">for</span>&nbsp;<span class="ident" id="3243597">loop</span>&nbsp;<span class="op" id="3243602">:=</span>&nbsp;<span class="num" id="3243605">0</span><span class="op" id="3243606">;</span>&nbsp;<span class="op" id="3243608">;</span>&nbsp;<span class="op" id="3243610">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243615">n</span><span class="op" id="3243616">,</span>&nbsp;<span class="ident" id="3243618">err</span>&nbsp;<span class="op" id="3243622">:=</span>&nbsp;<span class="ident" id="3243625"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243626">.</span><span class="ident" id="3243627">r</span><span class="op" id="3243628">.</span><span class="ident" id="3243629">Read</span><span class="op" id="3243633">(</span><span class="ident" id="3243634"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243635">.</span><span class="ident" id="3243636">buf</span><span class="op" id="3243639">[</span><span class="ident" id="3243640"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243641">.</span><span class="ident" id="3243642">end</span><span class="op" id="3243645">:</span><span class="builtinfunc" id="3243646">len</span><span class="op" id="3243649">(</span><span class="ident" id="3243650"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243651">.</span><span class="ident" id="3243652">buf</span><span class="op" id="3243655">)</span><span class="op" id="3243656">]</span><span class="op" id="3243657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243662"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243663">.</span><span class="ident" id="3243664">end</span>&nbsp;<span class="op" id="3243668">+=</span>&nbsp;<span class="ident" id="3243671"><a href="/bufio/scan.go.html#3243615">n</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243676">if</span>&nbsp;<span class="ident" id="3243679"><a href="/bufio/scan.go.html#3243618">err</a></span>&nbsp;<span class="op" id="3243683">!=</span>&nbsp;<span class="ident" id="3243686">nil</span>&nbsp;<span class="op" id="3243690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243696"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243697">.</span><span class="ident" id="3243698">setErr</span><span class="op" id="3243704">(</span><span class="ident" id="3243705"><a href="/bufio/scan.go.html#3243618">err</a></span><span class="op" id="3243708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243714">break</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243728">if</span>&nbsp;<span class="ident" id="3243731"><a href="/bufio/scan.go.html#3243615">n</a></span>&nbsp;<span class="op" id="3243733">&gt;</span>&nbsp;<span class="num" id="3243735">0</span>&nbsp;<span class="op" id="3243737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243743"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243744">.</span><span class="ident" id="3243745">empties</span>&nbsp;<span class="op" id="3243753">=</span>&nbsp;<span class="num" id="3243755">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243761">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243770">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243775"><a href="/bufio/scan.go.html#3243597">loop</a></span><span class="op" id="3243779">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243785">if</span>&nbsp;<span class="ident" id="3243788"><a href="/bufio/scan.go.html#3243597">loop</a></span>&nbsp;<span class="op" id="3243793">&gt;</span>&nbsp;<span class="ident" id="3243795"><a href="/bufio/bufio.go.html#3221165">maxConsecutiveEmptyReads</a></span>&nbsp;<span class="op" id="3243820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3243826"><a href="/bufio/scan.go.html#3241737">s</a></span><span class="op" id="3243827">.</span><span class="ident" id="3243828">setErr</span><span class="op" id="3243834">(</span><span class="ident" id="3243835"><a href="/bufio/scan.go.html#3237273">io</a></span><span class="op" id="3243837">.</span><span class="ident" id="3243838">ErrNoProgress</span><span class="op" id="3243851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3243857">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243866">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3243873">}</span><br>
<span class="lineno"></span><span class="op" id="3243875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3243878">//&nbsp;advance&nbsp;consumes&nbsp;n&nbsp;bytes&nbsp;of&nbsp;the&nbsp;buffer.&nbsp;It&nbsp;reports&nbsp;whether&nbsp;the&nbsp;advance&nbsp;was&nbsp;legal.</span><br>
<span class="lineno">200</span><span class="keyword" id="3243963">func</span>&nbsp;<span class="op" id="3243968">(</span><span class="ident" id="3243969">s</span>&nbsp;<span class="op" id="3243971">*</span><span class="ident" id="3243972"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3243979">)</span>&nbsp;<span class="ident" id="3243981">advance</span><span class="op" id="3243988">(</span><span class="ident" id="3243989">n</span>&nbsp;<span class="builtintype" id="3243991">int</span><span class="op" id="3243994">)</span>&nbsp;<span class="builtintype" id="3243996">bool</span>&nbsp;<span class="op" id="3244001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244004">if</span>&nbsp;<span class="ident" id="3244007"><a href="/bufio/scan.go.html#3243989">n</a></span>&nbsp;<span class="op" id="3244009">&lt;</span>&nbsp;<span class="num" id="3244011">0</span>&nbsp;<span class="op" id="3244013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244017"><a href="/bufio/scan.go.html#3243969">s</a></span><span class="op" id="3244018">.</span><span class="ident" id="3244019">setErr</span><span class="op" id="3244025">(</span><span class="ident" id="3244026"><a href="/bufio/scan.go.html#3239915">ErrNegativeAdvance</a></span><span class="op" id="3244044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244048">return</span>&nbsp;<span class="builtintype" id="3244055">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244062">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244065">if</span>&nbsp;<span class="ident" id="3244068"><a href="/bufio/scan.go.html#3243989">n</a></span>&nbsp;<span class="op" id="3244070">&gt;</span>&nbsp;<span class="ident" id="3244072"><a href="/bufio/scan.go.html#3243969">s</a></span><span class="op" id="3244073">.</span><span class="ident" id="3244074">end</span><span class="op" id="3244077">-</span><span class="ident" id="3244078"><a href="/bufio/scan.go.html#3243969">s</a></span><span class="op" id="3244079">.</span><span class="ident" id="3244080">start</span>&nbsp;<span class="op" id="3244086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244090"><a href="/bufio/scan.go.html#3243969">s</a></span><span class="op" id="3244091">.</span><span class="ident" id="3244092">setErr</span><span class="op" id="3244098">(</span><span class="ident" id="3244099"><a href="/bufio/scan.go.html#3240007">ErrAdvanceTooFar</a></span><span class="op" id="3244115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244119">return</span>&nbsp;<span class="builtintype" id="3244126">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244136"><a href="/bufio/scan.go.html#3243969">s</a></span><span class="op" id="3244137">.</span><span class="ident" id="3244138">start</span>&nbsp;<span class="op" id="3244144">+=</span>&nbsp;<span class="ident" id="3244147"><a href="/bufio/scan.go.html#3243989">n</a></span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244150">return</span>&nbsp;<span class="builtintype" id="3244157">true</span><br>
<span class="lineno"></span><span class="op" id="3244162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3244165">//&nbsp;setErr&nbsp;records&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered.</span><br>
<span class="lineno"></span><span class="keyword" id="3244212">func</span>&nbsp;<span class="op" id="3244217">(</span><span class="ident" id="3244218">s</span>&nbsp;<span class="op" id="3244220">*</span><span class="ident" id="3244221"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3244228">)</span>&nbsp;<span class="ident" id="3244230">setErr</span><span class="op" id="3244236">(</span><span class="ident" id="3244237">err</span>&nbsp;<span class="builtintype" id="3244241">error</span><span class="op" id="3244246">)</span>&nbsp;<span class="op" id="3244248">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244251">if</span>&nbsp;<span class="ident" id="3244254"><a href="/bufio/scan.go.html#3244218">s</a></span><span class="op" id="3244255">.</span><span class="ident" id="3244256">err</span>&nbsp;<span class="op" id="3244260">==</span>&nbsp;<span class="ident" id="3244263">nil</span>&nbsp;<span class="op" id="3244267">||</span>&nbsp;<span class="ident" id="3244270"><a href="/bufio/scan.go.html#3244218">s</a></span><span class="op" id="3244271">.</span><span class="ident" id="3244272">err</span>&nbsp;<span class="op" id="3244276">==</span>&nbsp;<span class="ident" id="3244279"><a href="/bufio/scan.go.html#3237273">io</a></span><span class="op" id="3244281">.</span><span class="ident" id="3244282">EOF</span>&nbsp;<span class="op" id="3244286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244290"><a href="/bufio/scan.go.html#3244218">s</a></span><span class="op" id="3244291">.</span><span class="ident" id="3244292">err</span>&nbsp;<span class="op" id="3244296">=</span>&nbsp;<span class="ident" id="3244298"><a href="/bufio/scan.go.html#3244237">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244303">}</span><br>
<span class="lineno"></span><span class="op" id="3244305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment" id="3244308">//&nbsp;Split&nbsp;sets&nbsp;the&nbsp;split&nbsp;function&nbsp;for&nbsp;the&nbsp;Scanner.&nbsp;If&nbsp;called,&nbsp;it&nbsp;must&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="3244380">//&nbsp;called&nbsp;before&nbsp;Scan.&nbsp;The&nbsp;default&nbsp;split&nbsp;function&nbsp;is&nbsp;ScanLines.</span><br>
<span class="lineno"></span><span class="keyword" id="3244444">func</span>&nbsp;<span class="op" id="3244449">(</span><span class="ident" id="3244450">s</span>&nbsp;<span class="op" id="3244452">*</span><span class="ident" id="3244453"><a href="/bufio/scan.go.html#3238258">Scanner</a></span><span class="op" id="3244460">)</span>&nbsp;<span class="ident" id="3244462">Split</span><span class="op" id="3244467">(</span><span class="ident" id="3244468">split</span>&nbsp;<span class="ident" id="3244474"><a href="/bufio/scan.go.html#3239731">SplitFunc</a></span><span class="op" id="3244483">)</span>&nbsp;<span class="op" id="3244485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3244488"><a href="/bufio/scan.go.html#3244450">s</a></span><span class="op" id="3244489">.</span><span class="ident" id="3244490">split</span>&nbsp;<span class="op" id="3244496">=</span>&nbsp;<span class="ident" id="3244498"><a href="/bufio/scan.go.html#3244468">split</a></span><br>
<span class="lineno"></span><span class="op" id="3244504">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="3244507">//&nbsp;Split&nbsp;functions</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3244527">//&nbsp;ScanBytes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;byte&nbsp;as&nbsp;a&nbsp;token.</span><br>
<span class="lineno"></span><span class="keyword" id="3244609">func</span>&nbsp;<span class="ident" id="3244614">ScanBytes</span><span class="op" id="3244623">(</span><span class="ident" id="3244624">data</span>&nbsp;<span class="op" id="3244629">[</span><span class="op" id="3244630">]</span><span class="builtintype" id="3244631">byte</span><span class="op" id="3244635">,</span>&nbsp;<span class="ident" id="3244637">atEOF</span>&nbsp;<span class="builtintype" id="3244643">bool</span><span class="op" id="3244647">)</span>&nbsp;<span class="op" id="3244649">(</span><span class="ident" id="3244650">advance</span>&nbsp;<span class="builtintype" id="3244658">int</span><span class="op" id="3244661">,</span>&nbsp;<span class="ident" id="3244663">token</span>&nbsp;<span class="op" id="3244669">[</span><span class="op" id="3244670">]</span><span class="builtintype" id="3244671">byte</span><span class="op" id="3244675">,</span>&nbsp;<span class="ident" id="3244677">err</span>&nbsp;<span class="builtintype" id="3244681">error</span><span class="op" id="3244686">)</span>&nbsp;<span class="op" id="3244688">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244691">if</span>&nbsp;<span class="ident" id="3244694"><a href="/bufio/scan.go.html#3244637">atEOF</a></span>&nbsp;<span class="op" id="3244700">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3244703">len</span><span class="op" id="3244706">(</span><span class="ident" id="3244707"><a href="/bufio/scan.go.html#3244624">data</a></span><span class="op" id="3244711">)</span>&nbsp;<span class="op" id="3244713">==</span>&nbsp;<span class="num" id="3244716">0</span>&nbsp;<span class="op" id="3244718">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244722">return</span>&nbsp;<span class="num" id="3244729">0</span><span class="op" id="3244730">,</span>&nbsp;<span class="ident" id="3244732">nil</span><span class="op" id="3244735">,</span>&nbsp;<span class="ident" id="3244737">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3244742">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3244745">return</span>&nbsp;<span class="num" id="3244752">1</span><span class="op" id="3244753">,</span>&nbsp;<span class="ident" id="3244755"><a href="/bufio/scan.go.html#3244624">data</a></span><span class="op" id="3244759">[</span><span class="num" id="3244760">0</span><span class="op" id="3244761">:</span><span class="num" id="3244762">1</span><span class="op" id="3244763">]</span><span class="op" id="3244764">,</span>&nbsp;<span class="ident" id="3244766">nil</span><br>
<span class="lineno"></span><span class="op" id="3244770">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="3244773">var</span>&nbsp;<span class="ident" id="3244777">errorRune</span>&nbsp;<span class="op" id="3244787">=</span>&nbsp;<span class="op" id="3244789">[</span><span class="op" id="3244790">]</span><span class="builtintype" id="3244791">byte</span><span class="op" id="3244795">(</span><span class="builtintype" id="3244796">string</span><span class="op" id="3244802">(</span><span class="ident" id="3244803"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3244807">.</span><span class="ident" id="3244808">RuneError</span><span class="op" id="3244817">)</span><span class="op" id="3244818">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3244821">//&nbsp;ScanRunes&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="3244886">//&nbsp;UTF-8-encoded&nbsp;rune&nbsp;as&nbsp;a&nbsp;token.&nbsp;The&nbsp;sequence&nbsp;of&nbsp;runes&nbsp;returned&nbsp;is</span><br>
<span class="lineno">240</span><span class="comment" id="3244954">//&nbsp;equivalent&nbsp;to&nbsp;that&nbsp;from&nbsp;a&nbsp;range&nbsp;loop&nbsp;over&nbsp;the&nbsp;input&nbsp;as&nbsp;a&nbsp;string,&nbsp;which</span><br>
<span class="lineno"></span><span class="comment" id="3245028">//&nbsp;means&nbsp;that&nbsp;erroneous&nbsp;UTF-8&nbsp;encodings&nbsp;translate&nbsp;to&nbsp;U+FFFD&nbsp;=&nbsp;&#34;\xef\xbf\xbd&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="3245106">//&nbsp;Because&nbsp;of&nbsp;the&nbsp;Scan&nbsp;interface,&nbsp;this&nbsp;makes&nbsp;it&nbsp;impossible&nbsp;for&nbsp;the&nbsp;client&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3245183">//&nbsp;distinguish&nbsp;correctly&nbsp;encoded&nbsp;replacement&nbsp;runes&nbsp;from&nbsp;encoding&nbsp;errors.</span><br>
<span class="lineno"></span><span class="keyword" id="3245256">func</span>&nbsp;<span class="ident" id="3245261">ScanRunes</span><span class="op" id="3245270">(</span><span class="ident" id="3245271">data</span>&nbsp;<span class="op" id="3245276">[</span><span class="op" id="3245277">]</span><span class="builtintype" id="3245278">byte</span><span class="op" id="3245282">,</span>&nbsp;<span class="ident" id="3245284">atEOF</span>&nbsp;<span class="builtintype" id="3245290">bool</span><span class="op" id="3245294">)</span>&nbsp;<span class="op" id="3245296">(</span><span class="ident" id="3245297">advance</span>&nbsp;<span class="builtintype" id="3245305">int</span><span class="op" id="3245308">,</span>&nbsp;<span class="ident" id="3245310">token</span>&nbsp;<span class="op" id="3245316">[</span><span class="op" id="3245317">]</span><span class="builtintype" id="3245318">byte</span><span class="op" id="3245322">,</span>&nbsp;<span class="ident" id="3245324">err</span>&nbsp;<span class="builtintype" id="3245328">error</span><span class="op" id="3245333">)</span>&nbsp;<span class="op" id="3245335">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245338">if</span>&nbsp;<span class="ident" id="3245341"><a href="/bufio/scan.go.html#3245284">atEOF</a></span>&nbsp;<span class="op" id="3245347">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3245350">len</span><span class="op" id="3245353">(</span><span class="ident" id="3245354"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245358">)</span>&nbsp;<span class="op" id="3245360">==</span>&nbsp;<span class="num" id="3245363">0</span>&nbsp;<span class="op" id="3245365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245369">return</span>&nbsp;<span class="num" id="3245376">0</span><span class="op" id="3245377">,</span>&nbsp;<span class="ident" id="3245379">nil</span><span class="op" id="3245382">,</span>&nbsp;<span class="ident" id="3245384">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245389">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245393">//&nbsp;Fast&nbsp;path&nbsp;1:&nbsp;ASCII.</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245417">if</span>&nbsp;<span class="ident" id="3245420"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245424">[</span><span class="num" id="3245425">0</span><span class="op" id="3245426">]</span>&nbsp;<span class="op" id="3245428">&lt;</span>&nbsp;<span class="ident" id="3245430"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3245434">.</span><span class="ident" id="3245435">RuneSelf</span>&nbsp;<span class="op" id="3245444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245448">return</span>&nbsp;<span class="num" id="3245455">1</span><span class="op" id="3245456">,</span>&nbsp;<span class="ident" id="3245458"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245462">[</span><span class="num" id="3245463">0</span><span class="op" id="3245464">:</span><span class="num" id="3245465">1</span><span class="op" id="3245466">]</span><span class="op" id="3245467">,</span>&nbsp;<span class="ident" id="3245469">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245478">//&nbsp;Fast&nbsp;path&nbsp;2:&nbsp;Correct&nbsp;UTF-8&nbsp;decode&nbsp;without&nbsp;error.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3245531">_</span><span class="op" id="3245532">,</span>&nbsp;<span class="ident" id="3245534">width</span>&nbsp;<span class="op" id="3245540">:=</span>&nbsp;<span class="ident" id="3245543"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3245547">.</span><span class="ident" id="3245548">DecodeRune</span><span class="op" id="3245558">(</span><span class="ident" id="3245559"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245566">if</span>&nbsp;<span class="ident" id="3245569"><a href="/bufio/scan.go.html#3245534">width</a></span>&nbsp;<span class="op" id="3245575">&gt;</span>&nbsp;<span class="num" id="3245577">1</span>&nbsp;<span class="op" id="3245579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245583">//&nbsp;It&#39;s&nbsp;a&nbsp;valid&nbsp;encoding.&nbsp;Width&nbsp;cannot&nbsp;be&nbsp;one&nbsp;for&nbsp;a&nbsp;correctly&nbsp;encoded</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245655">//&nbsp;non-ASCII&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245676">return</span>&nbsp;<span class="ident" id="3245683"><a href="/bufio/scan.go.html#3245534">width</a></span><span class="op" id="3245688">,</span>&nbsp;<span class="ident" id="3245690"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245694">[</span><span class="num" id="3245695">0</span><span class="op" id="3245696">:</span><span class="ident" id="3245697"><a href="/bufio/scan.go.html#3245534">width</a></span><span class="op" id="3245702">]</span><span class="op" id="3245703">,</span>&nbsp;<span class="ident" id="3245705">nil</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3245710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245714">//&nbsp;We&nbsp;know&nbsp;it&#39;s&nbsp;an&nbsp;error:&nbsp;we&nbsp;have&nbsp;width==1&nbsp;and&nbsp;implicitly&nbsp;r==utf8.RuneError.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245792">//&nbsp;Is&nbsp;the&nbsp;error&nbsp;because&nbsp;there&nbsp;wasn&#39;t&nbsp;a&nbsp;full&nbsp;rune&nbsp;to&nbsp;be&nbsp;decoded?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245857">//&nbsp;FullRune&nbsp;distinguishes&nbsp;correctly&nbsp;between&nbsp;erroneous&nbsp;and&nbsp;incomplete&nbsp;encodings.</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3245938">if</span>&nbsp;<span class="op" id="3245941">!</span><span class="ident" id="3245942"><a href="/bufio/scan.go.html#3245284">atEOF</a></span>&nbsp;<span class="op" id="3245948">&amp;&amp;</span>&nbsp;<span class="op" id="3245951">!</span><span class="ident" id="3245952"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3245956">.</span><span class="ident" id="3245957">FullRune</span><span class="op" id="3245965">(</span><span class="ident" id="3245966"><a href="/bufio/scan.go.html#3245271">data</a></span><span class="op" id="3245970">)</span>&nbsp;<span class="op" id="3245972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3245976">//&nbsp;Incomplete;&nbsp;get&nbsp;more&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246009">return</span>&nbsp;<span class="num" id="3246016">0</span><span class="op" id="3246017">,</span>&nbsp;<span class="ident" id="3246019">nil</span><span class="op" id="3246022">,</span>&nbsp;<span class="ident" id="3246024">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246033">//&nbsp;We&nbsp;have&nbsp;a&nbsp;real&nbsp;UTF-8&nbsp;encoding&nbsp;error.&nbsp;Return&nbsp;a&nbsp;properly&nbsp;encoded&nbsp;error&nbsp;rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246111">//&nbsp;but&nbsp;advance&nbsp;only&nbsp;one&nbsp;byte.&nbsp;This&nbsp;matches&nbsp;the&nbsp;behavior&nbsp;of&nbsp;a&nbsp;range&nbsp;loop&nbsp;over</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246189">//&nbsp;an&nbsp;incorrectly&nbsp;encoded&nbsp;string.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246224">return</span>&nbsp;<span class="num" id="3246231">1</span><span class="op" id="3246232">,</span>&nbsp;<span class="ident" id="3246234"><a href="/bufio/scan.go.html#3244777">errorRune</a></span><span class="op" id="3246243">,</span>&nbsp;<span class="ident" id="3246245">nil</span><br>
<span class="lineno"></span><span class="op" id="3246249">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="3246252">//&nbsp;dropCR&nbsp;drops&nbsp;a&nbsp;terminal&nbsp;\r&nbsp;from&nbsp;the&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="3246297">func</span>&nbsp;<span class="ident" id="3246302">dropCR</span><span class="op" id="3246308">(</span><span class="ident" id="3246309">data</span>&nbsp;<span class="op" id="3246314">[</span><span class="op" id="3246315">]</span><span class="builtintype" id="3246316">byte</span><span class="op" id="3246320">)</span>&nbsp;<span class="op" id="3246322">[</span><span class="op" id="3246323">]</span><span class="builtintype" id="3246324">byte</span>&nbsp;<span class="op" id="3246329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246332">if</span>&nbsp;<span class="builtinfunc" id="3246335">len</span><span class="op" id="3246338">(</span><span class="ident" id="3246339"><a href="/bufio/scan.go.html#3246309">data</a></span><span class="op" id="3246343">)</span>&nbsp;<span class="op" id="3246345">&gt;</span>&nbsp;<span class="num" id="3246347">0</span>&nbsp;<span class="op" id="3246349">&amp;&amp;</span>&nbsp;<span class="ident" id="3246352"><a href="/bufio/scan.go.html#3246309">data</a></span><span class="op" id="3246356">[</span><span class="builtinfunc" id="3246357">len</span><span class="op" id="3246360">(</span><span class="ident" id="3246361"><a href="/bufio/scan.go.html#3246309">data</a></span><span class="op" id="3246365">)</span><span class="op" id="3246366">-</span><span class="num" id="3246367">1</span><span class="op" id="3246368">]</span>&nbsp;<span class="op" id="3246370">==</span>&nbsp;<span class="string" id="3246373">&#39;\r&#39;</span>&nbsp;<span class="op" id="3246378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246382">return</span>&nbsp;<span class="ident" id="3246389"><a href="/bufio/scan.go.html#3246309">data</a></span><span class="op" id="3246393">[</span><span class="num" id="3246394">0</span>&nbsp;<span class="op" id="3246396">:</span>&nbsp;<span class="builtinfunc" id="3246398">len</span><span class="op" id="3246401">(</span><span class="ident" id="3246402"><a href="/bufio/scan.go.html#3246309">data</a></span><span class="op" id="3246406">)</span><span class="op" id="3246407">-</span><span class="num" id="3246408">1</span><span class="op" id="3246409">]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246412">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246415">return</span>&nbsp;<span class="ident" id="3246422"><a href="/bufio/scan.go.html#3246309">data</a></span><br>
<span class="lineno"></span><span class="op" id="3246427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3246430">//&nbsp;ScanLines&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each&nbsp;line&nbsp;of</span><br>
<span class="lineno">285</span><span class="comment" id="3246503">//&nbsp;text,&nbsp;stripped&nbsp;of&nbsp;any&nbsp;trailing&nbsp;end-of-line&nbsp;marker.&nbsp;The&nbsp;returned&nbsp;line&nbsp;may</span><br>
<span class="lineno"></span><span class="comment" id="3246579">//&nbsp;be&nbsp;empty.&nbsp;The&nbsp;end-of-line&nbsp;marker&nbsp;is&nbsp;one&nbsp;optional&nbsp;carriage&nbsp;return&nbsp;followed</span><br>
<span class="lineno"></span><span class="comment" id="3246656">//&nbsp;by&nbsp;one&nbsp;mandatory&nbsp;newline.&nbsp;In&nbsp;regular&nbsp;expression&nbsp;notation,&nbsp;it&nbsp;is&nbsp;`\r?\n`.</span><br>
<span class="lineno"></span><span class="comment" id="3246732">//&nbsp;The&nbsp;last&nbsp;non-empty&nbsp;line&nbsp;of&nbsp;input&nbsp;will&nbsp;be&nbsp;returned&nbsp;even&nbsp;if&nbsp;it&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="3246803">//&nbsp;newline.</span><br>
<span class="lineno">290</span><span class="keyword" id="3246815">func</span>&nbsp;<span class="ident" id="3246820">ScanLines</span><span class="op" id="3246829">(</span><span class="ident" id="3246830">data</span>&nbsp;<span class="op" id="3246835">[</span><span class="op" id="3246836">]</span><span class="builtintype" id="3246837">byte</span><span class="op" id="3246841">,</span>&nbsp;<span class="ident" id="3246843">atEOF</span>&nbsp;<span class="builtintype" id="3246849">bool</span><span class="op" id="3246853">)</span>&nbsp;<span class="op" id="3246855">(</span><span class="ident" id="3246856">advance</span>&nbsp;<span class="builtintype" id="3246864">int</span><span class="op" id="3246867">,</span>&nbsp;<span class="ident" id="3246869">token</span>&nbsp;<span class="op" id="3246875">[</span><span class="op" id="3246876">]</span><span class="builtintype" id="3246877">byte</span><span class="op" id="3246881">,</span>&nbsp;<span class="ident" id="3246883">err</span>&nbsp;<span class="builtintype" id="3246887">error</span><span class="op" id="3246892">)</span>&nbsp;<span class="op" id="3246894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246897">if</span>&nbsp;<span class="ident" id="3246900"><a href="/bufio/scan.go.html#3246843">atEOF</a></span>&nbsp;<span class="op" id="3246906">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3246909">len</span><span class="op" id="3246912">(</span><span class="ident" id="3246913"><a href="/bufio/scan.go.html#3246830">data</a></span><span class="op" id="3246917">)</span>&nbsp;<span class="op" id="3246919">==</span>&nbsp;<span class="num" id="3246922">0</span>&nbsp;<span class="op" id="3246924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246928">return</span>&nbsp;<span class="num" id="3246935">0</span><span class="op" id="3246936">,</span>&nbsp;<span class="ident" id="3246938">nil</span><span class="op" id="3246941">,</span>&nbsp;<span class="ident" id="3246943">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3246948">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3246951">if</span>&nbsp;<span class="ident" id="3246954">i</span>&nbsp;<span class="op" id="3246956">:=</span>&nbsp;<span class="ident" id="3246959"><a href="/bufio/scan.go.html#3237254">bytes</a></span><span class="op" id="3246964">.</span><span class="ident" id="3246965">IndexByte</span><span class="op" id="3246974">(</span><span class="ident" id="3246975"><a href="/bufio/scan.go.html#3246830">data</a></span><span class="op" id="3246979">,</span>&nbsp;<span class="string" id="3246981">&#39;\n&#39;</span><span class="op" id="3246985">)</span><span class="op" id="3246986">;</span>&nbsp;<span class="ident" id="3246988"><a href="/bufio/scan.go.html#3246954">i</a></span>&nbsp;<span class="op" id="3246990">&gt;=</span>&nbsp;<span class="num" id="3246993">0</span>&nbsp;<span class="op" id="3246995">{</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3246999">//&nbsp;We&nbsp;have&nbsp;a&nbsp;full&nbsp;newline-terminated&nbsp;line.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247044">return</span>&nbsp;<span class="ident" id="3247051"><a href="/bufio/scan.go.html#3246954">i</a></span>&nbsp;<span class="op" id="3247053">+</span>&nbsp;<span class="num" id="3247055">1</span><span class="op" id="3247056">,</span>&nbsp;<span class="ident" id="3247058"><a href="/bufio/scan.go.html#3246302">dropCR</a></span><span class="op" id="3247064">(</span><span class="ident" id="3247065"><a href="/bufio/scan.go.html#3246830">data</a></span><span class="op" id="3247069">[</span><span class="num" id="3247070">0</span><span class="op" id="3247071">:</span><span class="ident" id="3247072"><a href="/bufio/scan.go.html#3246954">i</a></span><span class="op" id="3247073">]</span><span class="op" id="3247074">)</span><span class="op" id="3247075">,</span>&nbsp;<span class="ident" id="3247077">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247085">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-terminated&nbsp;line.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247155">if</span>&nbsp;<span class="ident" id="3247158"><a href="/bufio/scan.go.html#3246843">atEOF</a></span>&nbsp;<span class="op" id="3247164">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247168">return</span>&nbsp;<span class="builtinfunc" id="3247175">len</span><span class="op" id="3247178">(</span><span class="ident" id="3247179"><a href="/bufio/scan.go.html#3246830">data</a></span><span class="op" id="3247183">)</span><span class="op" id="3247184">,</span>&nbsp;<span class="ident" id="3247186"><a href="/bufio/scan.go.html#3246302">dropCR</a></span><span class="op" id="3247192">(</span><span class="ident" id="3247193"><a href="/bufio/scan.go.html#3246830">data</a></span><span class="op" id="3247197">)</span><span class="op" id="3247198">,</span>&nbsp;<span class="ident" id="3247200">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247205">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247208">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247231">return</span>&nbsp;<span class="num" id="3247238">0</span><span class="op" id="3247239">,</span>&nbsp;<span class="ident" id="3247241">nil</span><span class="op" id="3247244">,</span>&nbsp;<span class="ident" id="3247246">nil</span><br>
<span class="lineno"></span><span class="op" id="3247250">}</span><br>
<span class="lineno">305</span><br>
<span class="lineno"></span><span class="comment" id="3247253">//&nbsp;isSpace&nbsp;reports&nbsp;whether&nbsp;the&nbsp;character&nbsp;is&nbsp;a&nbsp;Unicode&nbsp;white&nbsp;space&nbsp;character.</span><br>
<span class="lineno"></span><span class="comment" id="3247330">//&nbsp;We&nbsp;avoid&nbsp;dependency&nbsp;on&nbsp;the&nbsp;unicode&nbsp;package,&nbsp;but&nbsp;check&nbsp;validity&nbsp;of&nbsp;the&nbsp;implementation</span><br>
<span class="lineno"></span><span class="comment" id="3247418">//&nbsp;in&nbsp;the&nbsp;tests.</span><br>
<span class="lineno"></span><span class="keyword" id="3247435">func</span>&nbsp;<span class="ident" id="3247440">isSpace</span><span class="op" id="3247447">(</span><span class="ident" id="3247448">r</span>&nbsp;<span class="builtintype" id="3247450">rune</span><span class="op" id="3247454">)</span>&nbsp;<span class="builtintype" id="3247456">bool</span>&nbsp;<span class="op" id="3247461">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247464">if</span>&nbsp;<span class="ident" id="3247467"><a href="/bufio/scan.go.html#3247448">r</a></span>&nbsp;<span class="op" id="3247469">&lt;=</span>&nbsp;<span class="string" id="3247472">&#39;\u00FF&#39;</span>&nbsp;<span class="op" id="3247481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247485">//&nbsp;Obvious&nbsp;ASCII&nbsp;ones:&nbsp;\t&nbsp;through&nbsp;\r&nbsp;plus&nbsp;space.&nbsp;Plus&nbsp;two&nbsp;Latin-1&nbsp;oddballs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247563">switch</span>&nbsp;<span class="ident" id="3247570"><a href="/bufio/scan.go.html#3247448">r</a></span>&nbsp;<span class="op" id="3247572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247576">case</span>&nbsp;<span class="string" id="3247581">&#39;&nbsp;&#39;</span><span class="op" id="3247584">,</span>&nbsp;<span class="string" id="3247586">&#39;\t&#39;</span><span class="op" id="3247590">,</span>&nbsp;<span class="string" id="3247592">&#39;\n&#39;</span><span class="op" id="3247596">,</span>&nbsp;<span class="string" id="3247598">&#39;\v&#39;</span><span class="op" id="3247602">,</span>&nbsp;<span class="string" id="3247604">&#39;\f&#39;</span><span class="op" id="3247608">,</span>&nbsp;<span class="string" id="3247610">&#39;\r&#39;</span><span class="op" id="3247614">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247619">return</span>&nbsp;<span class="builtintype" id="3247626">true</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247633">case</span>&nbsp;<span class="string" id="3247638">&#39;\u0085&#39;</span><span class="op" id="3247646">,</span>&nbsp;<span class="string" id="3247648">&#39;\u00A0&#39;</span><span class="op" id="3247656">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247661">return</span>&nbsp;<span class="builtintype" id="3247668">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247675">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247679">return</span>&nbsp;<span class="builtintype" id="3247686">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247693">}</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3247696">//&nbsp;High-valued&nbsp;ones.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247718">if</span>&nbsp;<span class="string" id="3247721">&#39;\u2000&#39;</span>&nbsp;<span class="op" id="3247730">&lt;=</span>&nbsp;<span class="ident" id="3247733"><a href="/bufio/scan.go.html#3247448">r</a></span>&nbsp;<span class="op" id="3247735">&amp;&amp;</span>&nbsp;<span class="ident" id="3247738"><a href="/bufio/scan.go.html#3247448">r</a></span>&nbsp;<span class="op" id="3247740">&lt;=</span>&nbsp;<span class="string" id="3247743">&#39;\u200a&#39;</span>&nbsp;<span class="op" id="3247752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247756">return</span>&nbsp;<span class="builtintype" id="3247763">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247769">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247772">switch</span>&nbsp;<span class="ident" id="3247779"><a href="/bufio/scan.go.html#3247448">r</a></span>&nbsp;<span class="op" id="3247781">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247784">case</span>&nbsp;<span class="string" id="3247789">&#39;\u1680&#39;</span><span class="op" id="3247797">,</span>&nbsp;<span class="string" id="3247799">&#39;\u2028&#39;</span><span class="op" id="3247807">,</span>&nbsp;<span class="string" id="3247809">&#39;\u2029&#39;</span><span class="op" id="3247817">,</span>&nbsp;<span class="string" id="3247819">&#39;\u202f&#39;</span><span class="op" id="3247827">,</span>&nbsp;<span class="string" id="3247829">&#39;\u205f&#39;</span><span class="op" id="3247837">,</span>&nbsp;<span class="string" id="3247839">&#39;\u3000&#39;</span><span class="op" id="3247847">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247851">return</span>&nbsp;<span class="builtintype" id="3247858">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3247864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3247867">return</span>&nbsp;<span class="builtintype" id="3247874">false</span><br>
<span class="lineno"></span><span class="op" id="3247880">}</span><br>
<span class="lineno">330</span><br>
<span class="lineno"></span><span class="comment" id="3247883">//&nbsp;ScanWords&nbsp;is&nbsp;a&nbsp;split&nbsp;function&nbsp;for&nbsp;a&nbsp;Scanner&nbsp;that&nbsp;returns&nbsp;each</span><br>
<span class="lineno"></span><span class="comment" id="3247948">//&nbsp;space-separated&nbsp;word&nbsp;of&nbsp;text,&nbsp;with&nbsp;surrounding&nbsp;spaces&nbsp;deleted.&nbsp;It&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="3248022">//&nbsp;never&nbsp;return&nbsp;an&nbsp;empty&nbsp;string.&nbsp;The&nbsp;definition&nbsp;of&nbsp;space&nbsp;is&nbsp;set&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="3248089">//&nbsp;unicode.IsSpace.</span><br>
<span class="lineno">335</span><span class="keyword" id="3248109">func</span>&nbsp;<span class="ident" id="3248114">ScanWords</span><span class="op" id="3248123">(</span><span class="ident" id="3248124">data</span>&nbsp;<span class="op" id="3248129">[</span><span class="op" id="3248130">]</span><span class="builtintype" id="3248131">byte</span><span class="op" id="3248135">,</span>&nbsp;<span class="ident" id="3248137">atEOF</span>&nbsp;<span class="builtintype" id="3248143">bool</span><span class="op" id="3248147">)</span>&nbsp;<span class="op" id="3248149">(</span><span class="ident" id="3248150">advance</span>&nbsp;<span class="builtintype" id="3248158">int</span><span class="op" id="3248161">,</span>&nbsp;<span class="ident" id="3248163">token</span>&nbsp;<span class="op" id="3248169">[</span><span class="op" id="3248170">]</span><span class="builtintype" id="3248171">byte</span><span class="op" id="3248175">,</span>&nbsp;<span class="ident" id="3248177">err</span>&nbsp;<span class="builtintype" id="3248181">error</span><span class="op" id="3248186">)</span>&nbsp;<span class="op" id="3248188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248191">//&nbsp;Skip&nbsp;leading&nbsp;spaces.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248216">start</span>&nbsp;<span class="op" id="3248222">:=</span>&nbsp;<span class="num" id="3248225">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248228">for</span>&nbsp;<span class="ident" id="3248232">width</span>&nbsp;<span class="op" id="3248238">:=</span>&nbsp;<span class="num" id="3248241">0</span><span class="op" id="3248242">;</span>&nbsp;<span class="ident" id="3248244"><a href="/bufio/scan.go.html#3248216">start</a></span>&nbsp;<span class="op" id="3248250">&lt;</span>&nbsp;<span class="builtinfunc" id="3248252">len</span><span class="op" id="3248255">(</span><span class="ident" id="3248256"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248260">)</span><span class="op" id="3248261">;</span>&nbsp;<span class="ident" id="3248263"><a href="/bufio/scan.go.html#3248216">start</a></span>&nbsp;<span class="op" id="3248269">+=</span>&nbsp;<span class="ident" id="3248272"><a href="/bufio/scan.go.html#3248232">width</a></span>&nbsp;<span class="op" id="3248278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248282">var</span>&nbsp;<span class="ident" id="3248286">r</span>&nbsp;<span class="builtintype" id="3248288">rune</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248295"><a href="/bufio/scan.go.html#3248286">r</a></span><span class="op" id="3248296">,</span>&nbsp;<span class="ident" id="3248298"><a href="/bufio/scan.go.html#3248232">width</a></span>&nbsp;<span class="op" id="3248304">=</span>&nbsp;<span class="ident" id="3248306"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3248310">.</span><span class="ident" id="3248311">DecodeRune</span><span class="op" id="3248321">(</span><span class="ident" id="3248322"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248326">[</span><span class="ident" id="3248327"><a href="/bufio/scan.go.html#3248216">start</a></span><span class="op" id="3248332">:</span><span class="op" id="3248333">]</span><span class="op" id="3248334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248338">if</span>&nbsp;<span class="op" id="3248341">!</span><span class="ident" id="3248342"><a href="/bufio/scan.go.html#3247440">isSpace</a></span><span class="op" id="3248349">(</span><span class="ident" id="3248350"><a href="/bufio/scan.go.html#3248286">r</a></span><span class="op" id="3248351">)</span>&nbsp;<span class="op" id="3248353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248358">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248366">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248369">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248372">//&nbsp;Scan&nbsp;until&nbsp;space,&nbsp;marking&nbsp;end&nbsp;of&nbsp;word.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248415">for</span>&nbsp;<span class="ident" id="3248419">width</span><span class="op" id="3248424">,</span>&nbsp;<span class="ident" id="3248426">i</span>&nbsp;<span class="op" id="3248428">:=</span>&nbsp;<span class="num" id="3248431">0</span><span class="op" id="3248432">,</span>&nbsp;<span class="ident" id="3248434"><a href="/bufio/scan.go.html#3248216">start</a></span><span class="op" id="3248439">;</span>&nbsp;<span class="ident" id="3248441"><a href="/bufio/scan.go.html#3248426">i</a></span>&nbsp;<span class="op" id="3248443">&lt;</span>&nbsp;<span class="builtinfunc" id="3248445">len</span><span class="op" id="3248448">(</span><span class="ident" id="3248449"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248453">)</span><span class="op" id="3248454">;</span>&nbsp;<span class="ident" id="3248456"><a href="/bufio/scan.go.html#3248426">i</a></span>&nbsp;<span class="op" id="3248458">+=</span>&nbsp;<span class="ident" id="3248461"><a href="/bufio/scan.go.html#3248419">width</a></span>&nbsp;<span class="op" id="3248467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248471">var</span>&nbsp;<span class="ident" id="3248475">r</span>&nbsp;<span class="builtintype" id="3248477">rune</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3248484"><a href="/bufio/scan.go.html#3248475">r</a></span><span class="op" id="3248485">,</span>&nbsp;<span class="ident" id="3248487"><a href="/bufio/scan.go.html#3248419">width</a></span>&nbsp;<span class="op" id="3248493">=</span>&nbsp;<span class="ident" id="3248495"><a href="/bufio/scan.go.html#3237279">utf8</a></span><span class="op" id="3248499">.</span><span class="ident" id="3248500">DecodeRune</span><span class="op" id="3248510">(</span><span class="ident" id="3248511"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248515">[</span><span class="ident" id="3248516"><a href="/bufio/scan.go.html#3248426">i</a></span><span class="op" id="3248517">:</span><span class="op" id="3248518">]</span><span class="op" id="3248519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248523">if</span>&nbsp;<span class="ident" id="3248526"><a href="/bufio/scan.go.html#3247440">isSpace</a></span><span class="op" id="3248533">(</span><span class="ident" id="3248534"><a href="/bufio/scan.go.html#3248475">r</a></span><span class="op" id="3248535">)</span>&nbsp;<span class="op" id="3248537">{</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248542">return</span>&nbsp;<span class="ident" id="3248549"><a href="/bufio/scan.go.html#3248426">i</a></span>&nbsp;<span class="op" id="3248551">+</span>&nbsp;<span class="ident" id="3248553"><a href="/bufio/scan.go.html#3248419">width</a></span><span class="op" id="3248558">,</span>&nbsp;<span class="ident" id="3248560"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248564">[</span><span class="ident" id="3248565"><a href="/bufio/scan.go.html#3248216">start</a></span><span class="op" id="3248570">:</span><span class="ident" id="3248571"><a href="/bufio/scan.go.html#3248426">i</a></span><span class="op" id="3248572">]</span><span class="op" id="3248573">,</span>&nbsp;<span class="ident" id="3248575">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248581">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248587">//&nbsp;If&nbsp;we&#39;re&nbsp;at&nbsp;EOF,&nbsp;we&nbsp;have&nbsp;a&nbsp;final,&nbsp;non-empty,&nbsp;non-terminated&nbsp;word.&nbsp;Return&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248668">if</span>&nbsp;<span class="ident" id="3248671"><a href="/bufio/scan.go.html#3248137">atEOF</a></span>&nbsp;<span class="op" id="3248677">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3248680">len</span><span class="op" id="3248683">(</span><span class="ident" id="3248684"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248688">)</span>&nbsp;<span class="op" id="3248690">&gt;</span>&nbsp;<span class="ident" id="3248692"><a href="/bufio/scan.go.html#3248216">start</a></span>&nbsp;<span class="op" id="3248698">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248702">return</span>&nbsp;<span class="builtinfunc" id="3248709">len</span><span class="op" id="3248712">(</span><span class="ident" id="3248713"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248717">)</span><span class="op" id="3248718">,</span>&nbsp;<span class="ident" id="3248720"><a href="/bufio/scan.go.html#3248124">data</a></span><span class="op" id="3248724">[</span><span class="ident" id="3248725"><a href="/bufio/scan.go.html#3248216">start</a></span><span class="op" id="3248730">:</span><span class="op" id="3248731">]</span><span class="op" id="3248732">,</span>&nbsp;<span class="ident" id="3248734">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3248739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3248742">//&nbsp;Request&nbsp;more&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3248765">return</span>&nbsp;<span class="ident" id="3248772"><a href="/bufio/scan.go.html#3248216">start</a></span><span class="op" id="3248777">,</span>&nbsp;<span class="ident" id="3248779">nil</span><span class="op" id="3248782">,</span>&nbsp;<span class="ident" id="3248784">nil</span><br>
<span class="lineno"></span><span class="op" id="3248788">}</span>
</div>
</body>
</html>
