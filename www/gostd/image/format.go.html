<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image</h2>
<ul>
<li><a href="/gostd/image/decode_example_test.go.html">decode_example_test.go</a></li>
<li><a href="/gostd/image/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/image/format.go.html" class="current">format.go</a></li>
<li><a href="/gostd/image/geom.go.html">geom.go</a></li>
<li><a href="/gostd/image/image.go.html">image.go</a></li>
<li><a href="/gostd/image/image_test.go.html">image_test.go</a></li>
<li><a href="/gostd/image/names.go.html">names.go</a></li>
<li><a href="/gostd/image/ycbcr.go.html">ycbcr.go</a></li>
<li><a href="/gostd/image/ycbcr_test.go.html">ycbcr_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5483796">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5483851">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5483905">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5483956">package</span>&nbsp;<span class="ident" id="5483964">image</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5483971">import</span>&nbsp;<span class="op" id="5483978">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5483981">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5483990">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5484000">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="5484005">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5484008">//&nbsp;ErrFormat&nbsp;indicates&nbsp;that&nbsp;decoding&nbsp;encountered&nbsp;an&nbsp;unknown&nbsp;format.</span><br>
<span class="lineno"></span><span class="keyword" id="5484076">var</span>&nbsp;<span class="ident" id="5484080">ErrFormat</span>&nbsp;<span class="op" id="5484090">=</span>&nbsp;<span class="ident" id="5484092">errors</span><span class="op" id="5484098">.</span><span class="ident" id="5484099">New</span><span class="op" id="5484102">(</span><span class="string" id="5484103">&#34;image:&nbsp;unknown&nbsp;format&#34;</span><span class="op" id="5484126">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5484129">//&nbsp;A&nbsp;format&nbsp;holds&nbsp;an&nbsp;image&nbsp;format&#39;s&nbsp;name,&nbsp;magic&nbsp;header&nbsp;and&nbsp;how&nbsp;to&nbsp;decode&nbsp;it.</span><br>
<span class="lineno"></span><span class="keyword" id="5484206">type</span>&nbsp;<span class="ident" id="5484211">format</span>&nbsp;<span class="keyword" id="5484218">struct</span>&nbsp;<span class="op" id="5484225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484228">name</span><span class="op" id="5484232">,</span>&nbsp;<span class="ident" id="5484234">magic</span>&nbsp;&nbsp;<span class="builtintype" id="5484241">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484249">decode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5484262">func</span><span class="op" id="5484266">(</span><span class="ident" id="5484267">io</span><span class="op" id="5484269">.</span><span class="ident" id="5484270">Reader</span><span class="op" id="5484276">)</span>&nbsp;<span class="op" id="5484278">(</span><span class="ident" id="5484279">Image</span><span class="op" id="5484284">,</span>&nbsp;<span class="builtintype" id="5484286">error</span><span class="op" id="5484291">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484294">decodeConfig</span>&nbsp;<span class="keyword" id="5484307">func</span><span class="op" id="5484311">(</span><span class="ident" id="5484312">io</span><span class="op" id="5484314">.</span><span class="ident" id="5484315">Reader</span><span class="op" id="5484321">)</span>&nbsp;<span class="op" id="5484323">(</span><span class="ident" id="5484324">Config</span><span class="op" id="5484330">,</span>&nbsp;<span class="builtintype" id="5484332">error</span><span class="op" id="5484337">)</span><br>
<span class="lineno"></span><span class="op" id="5484339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5484342">//&nbsp;Formats&nbsp;is&nbsp;the&nbsp;list&nbsp;of&nbsp;registered&nbsp;formats.</span><br>
<span class="lineno"></span><span class="keyword" id="5484388">var</span>&nbsp;<span class="ident" id="5484392">formats</span>&nbsp;<span class="op" id="5484400">[</span><span class="op" id="5484401">]</span><span class="ident" id="5484402">format</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="comment" id="5484410">//&nbsp;RegisterFormat&nbsp;registers&nbsp;an&nbsp;image&nbsp;format&nbsp;for&nbsp;use&nbsp;by&nbsp;Decode.</span><br>
<span class="lineno"></span><span class="comment" id="5484473">//&nbsp;Name&nbsp;is&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;format,&nbsp;like&nbsp;&#34;jpeg&#34;&nbsp;or&nbsp;&#34;png&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5484530">//&nbsp;Magic&nbsp;is&nbsp;the&nbsp;magic&nbsp;prefix&nbsp;that&nbsp;identifies&nbsp;the&nbsp;format&#39;s&nbsp;encoding.&nbsp;The&nbsp;magic</span><br>
<span class="lineno"></span><span class="comment" id="5484608">//&nbsp;string&nbsp;can&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards&nbsp;that&nbsp;each&nbsp;match&nbsp;any&nbsp;one&nbsp;byte.</span><br>
<span class="lineno">30</span><span class="comment" id="5484674">//&nbsp;Decode&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;the&nbsp;encoded&nbsp;image.</span><br>
<span class="lineno"></span><span class="comment" id="5484732">//&nbsp;DecodeConfig&nbsp;is&nbsp;the&nbsp;function&nbsp;that&nbsp;decodes&nbsp;just&nbsp;its&nbsp;configuration.</span><br>
<span class="lineno"></span><span class="keyword" id="5484801">func</span>&nbsp;<span class="ident" id="5484806">RegisterFormat</span><span class="op" id="5484820">(</span><span class="ident" id="5484821">name</span><span class="op" id="5484825">,</span>&nbsp;<span class="ident" id="5484827">magic</span>&nbsp;<span class="builtintype" id="5484833">string</span><span class="op" id="5484839">,</span>&nbsp;<span class="ident" id="5484841">decode</span>&nbsp;<span class="keyword" id="5484848">func</span><span class="op" id="5484852">(</span><span class="ident" id="5484853">io</span><span class="op" id="5484855">.</span><span class="ident" id="5484856">Reader</span><span class="op" id="5484862">)</span>&nbsp;<span class="op" id="5484864">(</span><span class="ident" id="5484865">Image</span><span class="op" id="5484870">,</span>&nbsp;<span class="builtintype" id="5484872">error</span><span class="op" id="5484877">)</span><span class="op" id="5484878">,</span>&nbsp;<span class="ident" id="5484880">decodeConfig</span>&nbsp;<span class="keyword" id="5484893">func</span><span class="op" id="5484897">(</span><span class="ident" id="5484898">io</span><span class="op" id="5484900">.</span><span class="ident" id="5484901">Reader</span><span class="op" id="5484907">)</span>&nbsp;<span class="op" id="5484909">(</span><span class="ident" id="5484910">Config</span><span class="op" id="5484916">,</span>&nbsp;<span class="builtintype" id="5484918">error</span><span class="op" id="5484923">)</span><span class="op" id="5484924">)</span>&nbsp;<span class="op" id="5484926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5484929">formats</span>&nbsp;<span class="op" id="5484937">=</span>&nbsp;<span class="builtinfunc" id="5484939">append</span><span class="op" id="5484945">(</span><span class="ident" id="5484946">formats</span><span class="op" id="5484953">,</span>&nbsp;<span class="ident" id="5484955">format</span><span class="op" id="5484961">{</span><span class="ident" id="5484962">name</span><span class="op" id="5484966">,</span>&nbsp;<span class="ident" id="5484968">magic</span><span class="op" id="5484973">,</span>&nbsp;<span class="ident" id="5484975">decode</span><span class="op" id="5484981">,</span>&nbsp;<span class="ident" id="5484983">decodeConfig</span><span class="op" id="5484995">}</span><span class="op" id="5484996">)</span><br>
<span class="lineno"></span><span class="op" id="5484998">}</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5485001">//&nbsp;A&nbsp;reader&nbsp;is&nbsp;an&nbsp;io.Reader&nbsp;that&nbsp;can&nbsp;also&nbsp;peek&nbsp;ahead.</span><br>
<span class="lineno"></span><span class="keyword" id="5485055">type</span>&nbsp;<span class="ident" id="5485060">reader</span>&nbsp;<span class="keyword" id="5485067">interface</span>&nbsp;<span class="op" id="5485077">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485080">io</span><span class="op" id="5485082">.</span><span class="ident" id="5485083">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485091">Peek</span><span class="op" id="5485095">(</span><span class="builtintype" id="5485096">int</span><span class="op" id="5485099">)</span>&nbsp;<span class="op" id="5485101">(</span><span class="op" id="5485102">[</span><span class="op" id="5485103">]</span><span class="builtintype" id="5485104">byte</span><span class="op" id="5485108">,</span>&nbsp;<span class="builtintype" id="5485110">error</span><span class="op" id="5485115">)</span><br>
<span class="lineno">40</span><span class="op" id="5485117">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5485120">//&nbsp;asReader&nbsp;converts&nbsp;an&nbsp;io.Reader&nbsp;to&nbsp;a&nbsp;reader.</span><br>
<span class="lineno"></span><span class="keyword" id="5485167">func</span>&nbsp;<span class="ident" id="5485172">asReader</span><span class="op" id="5485180">(</span><span class="ident" id="5485181">r</span>&nbsp;<span class="ident" id="5485183">io</span><span class="op" id="5485185">.</span><span class="ident" id="5485186">Reader</span><span class="op" id="5485192">)</span>&nbsp;<span class="ident" id="5485194">reader</span>&nbsp;<span class="op" id="5485201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485204">if</span>&nbsp;<span class="ident" id="5485207">rr</span><span class="op" id="5485209">,</span>&nbsp;<span class="ident" id="5485211">ok</span>&nbsp;<span class="op" id="5485214">:=</span>&nbsp;<span class="ident" id="5485217">r</span><span class="op" id="5485218">.</span><span class="op" id="5485219">(</span><span class="ident" id="5485220">reader</span><span class="op" id="5485226">)</span><span class="op" id="5485227">;</span>&nbsp;<span class="ident" id="5485229">ok</span>&nbsp;<span class="op" id="5485232">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485236">return</span>&nbsp;<span class="ident" id="5485243">rr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485247">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485250">return</span>&nbsp;<span class="ident" id="5485257">bufio</span><span class="op" id="5485262">.</span><span class="ident" id="5485263">NewReader</span><span class="op" id="5485272">(</span><span class="ident" id="5485273">r</span><span class="op" id="5485274">)</span><br>
<span class="lineno"></span><span class="op" id="5485276">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span><span class="comment" id="5485279">//&nbsp;Match&nbsp;reports&nbsp;whether&nbsp;magic&nbsp;matches&nbsp;b.&nbsp;Magic&nbsp;may&nbsp;contain&nbsp;&#34;?&#34;&nbsp;wildcards.</span><br>
<span class="lineno"></span><span class="keyword" id="5485354">func</span>&nbsp;<span class="ident" id="5485359">match</span><span class="op" id="5485364">(</span><span class="ident" id="5485365">magic</span>&nbsp;<span class="builtintype" id="5485371">string</span><span class="op" id="5485377">,</span>&nbsp;<span class="ident" id="5485379">b</span>&nbsp;<span class="op" id="5485381">[</span><span class="op" id="5485382">]</span><span class="builtintype" id="5485383">byte</span><span class="op" id="5485387">)</span>&nbsp;<span class="builtintype" id="5485389">bool</span>&nbsp;<span class="op" id="5485394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485397">if</span>&nbsp;<span class="builtinfunc" id="5485400">len</span><span class="op" id="5485403">(</span><span class="ident" id="5485404">magic</span><span class="op" id="5485409">)</span>&nbsp;<span class="op" id="5485411">!=</span>&nbsp;<span class="builtinfunc" id="5485414">len</span><span class="op" id="5485417">(</span><span class="ident" id="5485418">b</span><span class="op" id="5485419">)</span>&nbsp;<span class="op" id="5485421">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485425">return</span>&nbsp;<span class="builtintype" id="5485432">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485439">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485442">for</span>&nbsp;<span class="ident" id="5485446">i</span><span class="op" id="5485447">,</span>&nbsp;<span class="ident" id="5485449">c</span>&nbsp;<span class="op" id="5485451">:=</span>&nbsp;<span class="keyword" id="5485454">range</span>&nbsp;<span class="ident" id="5485460">b</span>&nbsp;<span class="op" id="5485462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485466">if</span>&nbsp;<span class="ident" id="5485469">magic</span><span class="op" id="5485474">[</span><span class="ident" id="5485475">i</span><span class="op" id="5485476">]</span>&nbsp;<span class="op" id="5485478">!=</span>&nbsp;<span class="ident" id="5485481">c</span>&nbsp;<span class="op" id="5485483">&amp;&amp;</span>&nbsp;<span class="ident" id="5485486">magic</span><span class="op" id="5485491">[</span><span class="ident" id="5485492">i</span><span class="op" id="5485493">]</span>&nbsp;<span class="op" id="5485495">!=</span>&nbsp;<span class="string" id="5485498">&#39;?&#39;</span>&nbsp;<span class="op" id="5485502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485507">return</span>&nbsp;<span class="builtintype" id="5485514">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485522">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485525">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485528">return</span>&nbsp;<span class="builtintype" id="5485535">true</span><br>
<span class="lineno"></span><span class="op" id="5485540">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5485543">//&nbsp;Sniff&nbsp;determines&nbsp;the&nbsp;format&nbsp;of&nbsp;r&#39;s&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="5485587">func</span>&nbsp;<span class="ident" id="5485592">sniff</span><span class="op" id="5485597">(</span><span class="ident" id="5485598">r</span>&nbsp;<span class="ident" id="5485600">reader</span><span class="op" id="5485606">)</span>&nbsp;<span class="ident" id="5485608">format</span>&nbsp;<span class="op" id="5485615">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485618">for</span>&nbsp;<span class="ident" id="5485622">_</span><span class="op" id="5485623">,</span>&nbsp;<span class="ident" id="5485625">f</span>&nbsp;<span class="op" id="5485627">:=</span>&nbsp;<span class="keyword" id="5485630">range</span>&nbsp;<span class="ident" id="5485636">formats</span>&nbsp;<span class="op" id="5485644">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5485648">b</span><span class="op" id="5485649">,</span>&nbsp;<span class="ident" id="5485651">err</span>&nbsp;<span class="op" id="5485655">:=</span>&nbsp;<span class="ident" id="5485658">r</span><span class="op" id="5485659">.</span><span class="ident" id="5485660">Peek</span><span class="op" id="5485664">(</span><span class="builtinfunc" id="5485665">len</span><span class="op" id="5485668">(</span><span class="ident" id="5485669">f</span><span class="op" id="5485670">.</span><span class="ident" id="5485671">magic</span><span class="op" id="5485676">)</span><span class="op" id="5485677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485681">if</span>&nbsp;<span class="ident" id="5485684">err</span>&nbsp;<span class="op" id="5485688">==</span>&nbsp;<span class="ident" id="5485691">nil</span>&nbsp;<span class="op" id="5485695">&amp;&amp;</span>&nbsp;<span class="ident" id="5485698">match</span><span class="op" id="5485703">(</span><span class="ident" id="5485704">f</span><span class="op" id="5485705">.</span><span class="ident" id="5485706">magic</span><span class="op" id="5485711">,</span>&nbsp;<span class="ident" id="5485713">b</span><span class="op" id="5485714">)</span>&nbsp;<span class="op" id="5485716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485721">return</span>&nbsp;<span class="ident" id="5485728">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485732">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5485735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5485738">return</span>&nbsp;<span class="ident" id="5485745">format</span><span class="op" id="5485751">{</span><span class="op" id="5485752">}</span><br>
<span class="lineno"></span><span class="op" id="5485754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5485757">//&nbsp;Decode&nbsp;decodes&nbsp;an&nbsp;image&nbsp;that&nbsp;has&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.</span><br>
<span class="lineno">75</span><span class="comment" id="5485830">//&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.</span><br>
<span class="lineno"></span><span class="comment" id="5485905">//&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-</span><br>
<span class="lineno"></span><span class="comment" id="5485980">//&nbsp;specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5486001">func</span>&nbsp;<span class="ident" id="5486006">Decode</span><span class="op" id="5486012">(</span><span class="ident" id="5486013">r</span>&nbsp;<span class="ident" id="5486015">io</span><span class="op" id="5486017">.</span><span class="ident" id="5486018">Reader</span><span class="op" id="5486024">)</span>&nbsp;<span class="op" id="5486026">(</span><span class="ident" id="5486027">Image</span><span class="op" id="5486032">,</span>&nbsp;<span class="builtintype" id="5486034">string</span><span class="op" id="5486040">,</span>&nbsp;<span class="builtintype" id="5486042">error</span><span class="op" id="5486047">)</span>&nbsp;<span class="op" id="5486049">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486052">rr</span>&nbsp;<span class="op" id="5486055">:=</span>&nbsp;<span class="ident" id="5486058">asReader</span><span class="op" id="5486066">(</span><span class="ident" id="5486067">r</span><span class="op" id="5486068">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486071">f</span>&nbsp;<span class="op" id="5486073">:=</span>&nbsp;<span class="ident" id="5486076">sniff</span><span class="op" id="5486081">(</span><span class="ident" id="5486082">rr</span><span class="op" id="5486084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486087">if</span>&nbsp;<span class="ident" id="5486090">f</span><span class="op" id="5486091">.</span><span class="ident" id="5486092">decode</span>&nbsp;<span class="op" id="5486099">==</span>&nbsp;<span class="ident" id="5486102">nil</span>&nbsp;<span class="op" id="5486106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486110">return</span>&nbsp;<span class="ident" id="5486117">nil</span><span class="op" id="5486120">,</span>&nbsp;<span class="string" id="5486122">&#34;&#34;</span><span class="op" id="5486124">,</span>&nbsp;<span class="ident" id="5486126">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5486137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486140">m</span><span class="op" id="5486141">,</span>&nbsp;<span class="ident" id="5486143">err</span>&nbsp;<span class="op" id="5486147">:=</span>&nbsp;<span class="ident" id="5486150">f</span><span class="op" id="5486151">.</span><span class="ident" id="5486152">decode</span><span class="op" id="5486158">(</span><span class="ident" id="5486159">rr</span><span class="op" id="5486161">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486164">return</span>&nbsp;<span class="ident" id="5486171">m</span><span class="op" id="5486172">,</span>&nbsp;<span class="ident" id="5486174">f</span><span class="op" id="5486175">.</span><span class="ident" id="5486176">name</span><span class="op" id="5486180">,</span>&nbsp;<span class="ident" id="5486182">err</span><br>
<span class="lineno"></span><span class="op" id="5486186">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5486189">//&nbsp;DecodeConfig&nbsp;decodes&nbsp;the&nbsp;color&nbsp;model&nbsp;and&nbsp;dimensions&nbsp;of&nbsp;an&nbsp;image&nbsp;that&nbsp;has</span><br>
<span class="lineno"></span><span class="comment" id="5486265">//&nbsp;been&nbsp;encoded&nbsp;in&nbsp;a&nbsp;registered&nbsp;format.&nbsp;The&nbsp;string&nbsp;returned&nbsp;is&nbsp;the&nbsp;format&nbsp;name</span><br>
<span class="lineno">90</span><span class="comment" id="5486344">//&nbsp;used&nbsp;during&nbsp;format&nbsp;registration.&nbsp;Format&nbsp;registration&nbsp;is&nbsp;typically&nbsp;done&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="5486421">//&nbsp;an&nbsp;init&nbsp;function&nbsp;in&nbsp;the&nbsp;codec-specific&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5486472">func</span>&nbsp;<span class="ident" id="5486477">DecodeConfig</span><span class="op" id="5486489">(</span><span class="ident" id="5486490">r</span>&nbsp;<span class="ident" id="5486492">io</span><span class="op" id="5486494">.</span><span class="ident" id="5486495">Reader</span><span class="op" id="5486501">)</span>&nbsp;<span class="op" id="5486503">(</span><span class="ident" id="5486504">Config</span><span class="op" id="5486510">,</span>&nbsp;<span class="builtintype" id="5486512">string</span><span class="op" id="5486518">,</span>&nbsp;<span class="builtintype" id="5486520">error</span><span class="op" id="5486525">)</span>&nbsp;<span class="op" id="5486527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486530">rr</span>&nbsp;<span class="op" id="5486533">:=</span>&nbsp;<span class="ident" id="5486536">asReader</span><span class="op" id="5486544">(</span><span class="ident" id="5486545">r</span><span class="op" id="5486546">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486549">f</span>&nbsp;<span class="op" id="5486551">:=</span>&nbsp;<span class="ident" id="5486554">sniff</span><span class="op" id="5486559">(</span><span class="ident" id="5486560">rr</span><span class="op" id="5486562">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486565">if</span>&nbsp;<span class="ident" id="5486568">f</span><span class="op" id="5486569">.</span><span class="ident" id="5486570">decodeConfig</span>&nbsp;<span class="op" id="5486583">==</span>&nbsp;<span class="ident" id="5486586">nil</span>&nbsp;<span class="op" id="5486590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486594">return</span>&nbsp;<span class="ident" id="5486601">Config</span><span class="op" id="5486607">{</span><span class="op" id="5486608">}</span><span class="op" id="5486609">,</span>&nbsp;<span class="string" id="5486611">&#34;&#34;</span><span class="op" id="5486613">,</span>&nbsp;<span class="ident" id="5486615">ErrFormat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5486626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5486629">c</span><span class="op" id="5486630">,</span>&nbsp;<span class="ident" id="5486632">err</span>&nbsp;<span class="op" id="5486636">:=</span>&nbsp;<span class="ident" id="5486639">f</span><span class="op" id="5486640">.</span><span class="ident" id="5486641">decodeConfig</span><span class="op" id="5486653">(</span><span class="ident" id="5486654">rr</span><span class="op" id="5486656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5486659">return</span>&nbsp;<span class="ident" id="5486666">c</span><span class="op" id="5486667">,</span>&nbsp;<span class="ident" id="5486669">f</span><span class="op" id="5486670">.</span><span class="ident" id="5486671">name</span><span class="op" id="5486675">,</span>&nbsp;<span class="ident" id="5486677">err</span><br>
<span class="lineno">100</span><span class="op" id="5486681">}</span>
</div>
</body>
</html>
