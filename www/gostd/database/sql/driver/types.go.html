<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>database/sql/driver</h2>
<ul>
<li><a href="/gostd/database/sql/driver/driver.go.html">driver.go</a></li>
<li><a href="/gostd/database/sql/driver/types.go.html" class="current">types.go</a></li>
<li><a href="/gostd/database/sql/driver/types_test.go.html">types_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5832107">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5832162">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5832216">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5832267">package</span>&nbsp;<span class="ident" id="5832275">driver</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5832283">import</span>&nbsp;<span class="op" id="5832290">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5832293">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5832300">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5832311">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5832322">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5832329">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5832332">//&nbsp;ValueConverter&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;ConvertValue&nbsp;method.</span><br>
<span class="lineno">15</span><span class="comment" id="5832402">//</span><br>
<span class="lineno"></span><span class="comment" id="5832405">//&nbsp;Various&nbsp;implementations&nbsp;of&nbsp;ValueConverter&nbsp;are&nbsp;provided&nbsp;by&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5832470">//&nbsp;driver&nbsp;package&nbsp;to&nbsp;provide&nbsp;consistent&nbsp;implementations&nbsp;of&nbsp;conversions</span><br>
<span class="lineno"></span><span class="comment" id="5832541">//&nbsp;between&nbsp;drivers.&nbsp;&nbsp;The&nbsp;ValueConverters&nbsp;have&nbsp;several&nbsp;uses:</span><br>
<span class="lineno"></span><span class="comment" id="5832601">//</span><br>
<span class="lineno">20</span><span class="comment" id="5832604">//&nbsp;&nbsp;*&nbsp;converting&nbsp;from&nbsp;the&nbsp;Value&nbsp;types&nbsp;as&nbsp;provided&nbsp;by&nbsp;the&nbsp;sql&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5832673">//&nbsp;&nbsp;&nbsp;&nbsp;into&nbsp;a&nbsp;database&nbsp;table&#39;s&nbsp;specific&nbsp;column&nbsp;type&nbsp;and&nbsp;making&nbsp;sure&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5832743">//&nbsp;&nbsp;&nbsp;&nbsp;fits,&nbsp;such&nbsp;as&nbsp;making&nbsp;sure&nbsp;a&nbsp;particular&nbsp;int64&nbsp;fits&nbsp;in&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="5832804">//&nbsp;&nbsp;&nbsp;&nbsp;table&#39;s&nbsp;uint16&nbsp;column.</span><br>
<span class="lineno"></span><span class="comment" id="5832833">//</span><br>
<span class="lineno">25</span><span class="comment" id="5832836">//&nbsp;&nbsp;*&nbsp;converting&nbsp;a&nbsp;value&nbsp;as&nbsp;given&nbsp;from&nbsp;the&nbsp;database&nbsp;into&nbsp;one&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="5832904">//&nbsp;&nbsp;&nbsp;&nbsp;driver&nbsp;Value&nbsp;types.</span><br>
<span class="lineno"></span><span class="comment" id="5832930">//</span><br>
<span class="lineno"></span><span class="comment" id="5832933">//&nbsp;&nbsp;*&nbsp;by&nbsp;the&nbsp;sql&nbsp;package,&nbsp;for&nbsp;converting&nbsp;from&nbsp;a&nbsp;driver&#39;s&nbsp;Value&nbsp;type</span><br>
<span class="lineno"></span><span class="comment" id="5833001">//&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;a&nbsp;user&#39;s&nbsp;type&nbsp;in&nbsp;a&nbsp;scan.</span><br>
<span class="lineno">30</span><span class="keyword" id="5833035">type</span>&nbsp;<span class="ident" id="5833040">ValueConverter</span>&nbsp;<span class="keyword" id="5833055">interface</span>&nbsp;<span class="op" id="5833065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833068">//&nbsp;ConvertValue&nbsp;converts&nbsp;a&nbsp;value&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833121">ConvertValue</span><span class="op" id="5833133">(</span><span class="ident" id="5833134">v</span>&nbsp;<span class="keyword" id="5833136">interface</span><span class="op" id="5833145">{</span><span class="op" id="5833146">}</span><span class="op" id="5833147">)</span>&nbsp;<span class="op" id="5833149">(</span><span class="ident" id="5833150">Value</span><span class="op" id="5833155">,</span>&nbsp;<span class="builtintype" id="5833157">error</span><span class="op" id="5833162">)</span><br>
<span class="lineno"></span><span class="op" id="5833164">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="5833167">//&nbsp;Valuer&nbsp;is&nbsp;the&nbsp;interface&nbsp;providing&nbsp;the&nbsp;Value&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5833222">//</span><br>
<span class="lineno"></span><span class="comment" id="5833225">//&nbsp;Types&nbsp;implementing&nbsp;Valuer&nbsp;interface&nbsp;are&nbsp;able&nbsp;to&nbsp;convert</span><br>
<span class="lineno"></span><span class="comment" id="5833284">//&nbsp;themselves&nbsp;to&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span><span class="keyword" id="5833317">type</span>&nbsp;<span class="ident" id="5833322">Valuer</span>&nbsp;<span class="keyword" id="5833329">interface</span>&nbsp;<span class="op" id="5833339">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5833342">//&nbsp;Value&nbsp;returns&nbsp;a&nbsp;driver&nbsp;Value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833376">Value</span><span class="op" id="5833381">(</span><span class="op" id="5833382">)</span>&nbsp;<span class="op" id="5833384">(</span><span class="ident" id="5833385">Value</span><span class="op" id="5833390">,</span>&nbsp;<span class="builtintype" id="5833392">error</span><span class="op" id="5833397">)</span><br>
<span class="lineno"></span><span class="op" id="5833399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5833402">//&nbsp;Bool&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;bools.</span><br>
<span class="lineno">45</span><span class="comment" id="5833467">//</span><br>
<span class="lineno"></span><span class="comment" id="5833470">//&nbsp;The&nbsp;conversion&nbsp;rules&nbsp;are:</span><br>
<span class="lineno"></span><span class="comment" id="5833499">//&nbsp;&nbsp;-&nbsp;booleans&nbsp;are&nbsp;returned&nbsp;unchanged</span><br>
<span class="lineno"></span><span class="comment" id="5833537">//&nbsp;&nbsp;-&nbsp;for&nbsp;integer&nbsp;types,</span><br>
<span class="lineno"></span><span class="comment" id="5833562">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;is&nbsp;true</span><br>
<span class="lineno">50</span><span class="comment" id="5833581">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;is&nbsp;false,</span><br>
<span class="lineno"></span><span class="comment" id="5833602">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;integers&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="comment" id="5833639">//&nbsp;&nbsp;-&nbsp;for&nbsp;strings&nbsp;and&nbsp;[]byte,&nbsp;same&nbsp;rules&nbsp;as&nbsp;strconv.ParseBool</span><br>
<span class="lineno"></span><span class="comment" id="5833701">//&nbsp;&nbsp;-&nbsp;all&nbsp;other&nbsp;types&nbsp;are&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span><span class="keyword" id="5833736">var</span>&nbsp;<span class="ident" id="5833740">Bool</span>&nbsp;<span class="ident" id="5833745">boolType</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="5833755">type</span>&nbsp;<span class="ident" id="5833760">boolType</span>&nbsp;<span class="keyword" id="5833769">struct</span><span class="op" id="5833775">{</span><span class="op" id="5833776">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5833779">var</span>&nbsp;<span class="ident" id="5833783">_</span>&nbsp;<span class="ident" id="5833785">ValueConverter</span>&nbsp;<span class="op" id="5833800">=</span>&nbsp;<span class="ident" id="5833802">boolType</span><span class="op" id="5833810">{</span><span class="op" id="5833811">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="5833814">func</span>&nbsp;<span class="op" id="5833819">(</span><span class="ident" id="5833820">boolType</span><span class="op" id="5833828">)</span>&nbsp;<span class="ident" id="5833830">String</span><span class="op" id="5833836">(</span><span class="op" id="5833837">)</span>&nbsp;<span class="builtintype" id="5833839">string</span>&nbsp;<span class="op" id="5833846">{</span>&nbsp;<span class="keyword" id="5833848">return</span>&nbsp;<span class="string" id="5833855">&#34;Bool&#34;</span>&nbsp;<span class="op" id="5833862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5833865">func</span>&nbsp;<span class="op" id="5833870">(</span><span class="ident" id="5833871">boolType</span><span class="op" id="5833879">)</span>&nbsp;<span class="ident" id="5833881">ConvertValue</span><span class="op" id="5833893">(</span><span class="ident" id="5833894">src</span>&nbsp;<span class="keyword" id="5833898">interface</span><span class="op" id="5833907">{</span><span class="op" id="5833908">}</span><span class="op" id="5833909">)</span>&nbsp;<span class="op" id="5833911">(</span><span class="ident" id="5833912">Value</span><span class="op" id="5833917">,</span>&nbsp;<span class="builtintype" id="5833919">error</span><span class="op" id="5833924">)</span>&nbsp;<span class="op" id="5833926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833929">switch</span>&nbsp;<span class="ident" id="5833936">s</span>&nbsp;<span class="op" id="5833938">:=</span>&nbsp;<span class="ident" id="5833941">src</span><span class="op" id="5833944">.</span><span class="op" id="5833945">(</span><span class="keyword" id="5833946">type</span><span class="op" id="5833950">)</span>&nbsp;<span class="op" id="5833952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833955">case</span>&nbsp;<span class="builtintype" id="5833960">bool</span><span class="op" id="5833964">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833968">return</span>&nbsp;<span class="ident" id="5833975">s</span><span class="op" id="5833976">,</span>&nbsp;<span class="ident" id="5833978">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5833983">case</span>&nbsp;<span class="builtintype" id="5833988">string</span><span class="op" id="5833994">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5833998">b</span><span class="op" id="5833999">,</span>&nbsp;<span class="ident" id="5834001">err</span>&nbsp;<span class="op" id="5834005">:=</span>&nbsp;<span class="ident" id="5834008">strconv</span><span class="op" id="5834015">.</span><span class="ident" id="5834016">ParseBool</span><span class="op" id="5834025">(</span><span class="ident" id="5834026">s</span><span class="op" id="5834027">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834031">if</span>&nbsp;<span class="ident" id="5834034">err</span>&nbsp;<span class="op" id="5834038">!=</span>&nbsp;<span class="ident" id="5834041">nil</span>&nbsp;<span class="op" id="5834045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834050">return</span>&nbsp;<span class="ident" id="5834057">nil</span><span class="op" id="5834060">,</span>&nbsp;<span class="ident" id="5834062">fmt</span><span class="op" id="5834065">.</span><span class="ident" id="5834066">Errorf</span><span class="op" id="5834072">(</span><span class="string" id="5834073">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5834121">,</span>&nbsp;<span class="ident" id="5834123">s</span><span class="op" id="5834124">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834132">return</span>&nbsp;<span class="ident" id="5834139">b</span><span class="op" id="5834140">,</span>&nbsp;<span class="ident" id="5834142">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834147">case</span>&nbsp;<span class="op" id="5834152">[</span><span class="op" id="5834153">]</span><span class="builtintype" id="5834154">byte</span><span class="op" id="5834158">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834162">b</span><span class="op" id="5834163">,</span>&nbsp;<span class="ident" id="5834165">err</span>&nbsp;<span class="op" id="5834169">:=</span>&nbsp;<span class="ident" id="5834172">strconv</span><span class="op" id="5834179">.</span><span class="ident" id="5834180">ParseBool</span><span class="op" id="5834189">(</span><span class="builtintype" id="5834190">string</span><span class="op" id="5834196">(</span><span class="ident" id="5834197">s</span><span class="op" id="5834198">)</span><span class="op" id="5834199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834203">if</span>&nbsp;<span class="ident" id="5834206">err</span>&nbsp;<span class="op" id="5834210">!=</span>&nbsp;<span class="ident" id="5834213">nil</span>&nbsp;<span class="op" id="5834217">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834222">return</span>&nbsp;<span class="ident" id="5834229">nil</span><span class="op" id="5834232">,</span>&nbsp;<span class="ident" id="5834234">fmt</span><span class="op" id="5834237">.</span><span class="ident" id="5834238">Errorf</span><span class="op" id="5834244">(</span><span class="string" id="5834245">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%q&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5834293">,</span>&nbsp;<span class="ident" id="5834295">s</span><span class="op" id="5834296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834304">return</span>&nbsp;<span class="ident" id="5834311">b</span><span class="op" id="5834312">,</span>&nbsp;<span class="ident" id="5834314">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834323">sv</span>&nbsp;<span class="op" id="5834326">:=</span>&nbsp;<span class="ident" id="5834329">reflect</span><span class="op" id="5834336">.</span><span class="ident" id="5834337">ValueOf</span><span class="op" id="5834344">(</span><span class="ident" id="5834345">src</span><span class="op" id="5834348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834351">switch</span>&nbsp;<span class="ident" id="5834358">sv</span><span class="op" id="5834360">.</span><span class="ident" id="5834361">Kind</span><span class="op" id="5834365">(</span><span class="op" id="5834366">)</span>&nbsp;<span class="op" id="5834368">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834371">case</span>&nbsp;<span class="ident" id="5834376">reflect</span><span class="op" id="5834383">.</span><span class="ident" id="5834384">Int</span><span class="op" id="5834387">,</span>&nbsp;<span class="ident" id="5834389">reflect</span><span class="op" id="5834396">.</span><span class="ident" id="5834397">Int8</span><span class="op" id="5834401">,</span>&nbsp;<span class="ident" id="5834403">reflect</span><span class="op" id="5834410">.</span><span class="ident" id="5834411">Int16</span><span class="op" id="5834416">,</span>&nbsp;<span class="ident" id="5834418">reflect</span><span class="op" id="5834425">.</span><span class="ident" id="5834426">Int32</span><span class="op" id="5834431">,</span>&nbsp;<span class="ident" id="5834433">reflect</span><span class="op" id="5834440">.</span><span class="ident" id="5834441">Int64</span><span class="op" id="5834446">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834450">iv</span>&nbsp;<span class="op" id="5834453">:=</span>&nbsp;<span class="ident" id="5834456">sv</span><span class="op" id="5834458">.</span><span class="ident" id="5834459">Int</span><span class="op" id="5834462">(</span><span class="op" id="5834463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834467">if</span>&nbsp;<span class="ident" id="5834470">iv</span>&nbsp;<span class="op" id="5834473">==</span>&nbsp;<span class="num" id="5834476">1</span>&nbsp;<span class="op" id="5834478">||</span>&nbsp;<span class="ident" id="5834481">iv</span>&nbsp;<span class="op" id="5834484">==</span>&nbsp;<span class="num" id="5834487">0</span>&nbsp;<span class="op" id="5834489">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834494">return</span>&nbsp;<span class="ident" id="5834501">iv</span>&nbsp;<span class="op" id="5834504">==</span>&nbsp;<span class="num" id="5834507">1</span><span class="op" id="5834508">,</span>&nbsp;<span class="ident" id="5834510">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834520">return</span>&nbsp;<span class="ident" id="5834527">nil</span><span class="op" id="5834530">,</span>&nbsp;<span class="ident" id="5834532">fmt</span><span class="op" id="5834535">.</span><span class="ident" id="5834536">Errorf</span><span class="op" id="5834542">(</span><span class="string" id="5834543">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5834591">,</span>&nbsp;<span class="ident" id="5834593">iv</span><span class="op" id="5834595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834598">case</span>&nbsp;<span class="ident" id="5834603">reflect</span><span class="op" id="5834610">.</span><span class="ident" id="5834611">Uint</span><span class="op" id="5834615">,</span>&nbsp;<span class="ident" id="5834617">reflect</span><span class="op" id="5834624">.</span><span class="ident" id="5834625">Uint8</span><span class="op" id="5834630">,</span>&nbsp;<span class="ident" id="5834632">reflect</span><span class="op" id="5834639">.</span><span class="ident" id="5834640">Uint16</span><span class="op" id="5834646">,</span>&nbsp;<span class="ident" id="5834648">reflect</span><span class="op" id="5834655">.</span><span class="ident" id="5834656">Uint32</span><span class="op" id="5834662">,</span>&nbsp;<span class="ident" id="5834664">reflect</span><span class="op" id="5834671">.</span><span class="ident" id="5834672">Uint64</span><span class="op" id="5834678">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5834682">uv</span>&nbsp;<span class="op" id="5834685">:=</span>&nbsp;<span class="ident" id="5834688">sv</span><span class="op" id="5834690">.</span><span class="ident" id="5834691">Uint</span><span class="op" id="5834695">(</span><span class="op" id="5834696">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834700">if</span>&nbsp;<span class="ident" id="5834703">uv</span>&nbsp;<span class="op" id="5834706">==</span>&nbsp;<span class="num" id="5834709">1</span>&nbsp;<span class="op" id="5834711">||</span>&nbsp;<span class="ident" id="5834714">uv</span>&nbsp;<span class="op" id="5834717">==</span>&nbsp;<span class="num" id="5834720">0</span>&nbsp;<span class="op" id="5834722">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834727">return</span>&nbsp;<span class="ident" id="5834734">uv</span>&nbsp;<span class="op" id="5834737">==</span>&nbsp;<span class="num" id="5834740">1</span><span class="op" id="5834741">,</span>&nbsp;<span class="ident" id="5834743">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834749">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834753">return</span>&nbsp;<span class="ident" id="5834760">nil</span><span class="op" id="5834763">,</span>&nbsp;<span class="ident" id="5834765">fmt</span><span class="op" id="5834768">.</span><span class="ident" id="5834769">Errorf</span><span class="op" id="5834775">(</span><span class="string" id="5834776">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%d&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5834824">,</span>&nbsp;<span class="ident" id="5834826">uv</span><span class="op" id="5834828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5834831">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5834835">return</span>&nbsp;<span class="ident" id="5834842">nil</span><span class="op" id="5834845">,</span>&nbsp;<span class="ident" id="5834847">fmt</span><span class="op" id="5834850">.</span><span class="ident" id="5834851">Errorf</span><span class="op" id="5834857">(</span><span class="string" id="5834858">&#34;sql/driver:&nbsp;couldn&#39;t&nbsp;convert&nbsp;%v&nbsp;(%T)&nbsp;into&nbsp;type&nbsp;bool&#34;</span><span class="op" id="5834911">,</span>&nbsp;<span class="ident" id="5834913">src</span><span class="op" id="5834916">,</span>&nbsp;<span class="ident" id="5834918">src</span><span class="op" id="5834921">)</span><br>
<span class="lineno"></span><span class="op" id="5834923">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5834926">//&nbsp;Int32&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;input&nbsp;values&nbsp;to&nbsp;int64,</span><br>
<span class="lineno">100</span><span class="comment" id="5834992">//&nbsp;respecting&nbsp;the&nbsp;limits&nbsp;of&nbsp;an&nbsp;int32&nbsp;value.</span><br>
<span class="lineno"></span><span class="keyword" id="5835036">var</span>&nbsp;<span class="ident" id="5835040">Int32</span>&nbsp;<span class="ident" id="5835046">int32Type</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5835057">type</span>&nbsp;<span class="ident" id="5835062">int32Type</span>&nbsp;<span class="keyword" id="5835072">struct</span><span class="op" id="5835078">{</span><span class="op" id="5835079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="5835082">var</span>&nbsp;<span class="ident" id="5835086">_</span>&nbsp;<span class="ident" id="5835088">ValueConverter</span>&nbsp;<span class="op" id="5835103">=</span>&nbsp;<span class="ident" id="5835105">int32Type</span><span class="op" id="5835114">{</span><span class="op" id="5835115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5835118">func</span>&nbsp;<span class="op" id="5835123">(</span><span class="ident" id="5835124">int32Type</span><span class="op" id="5835133">)</span>&nbsp;<span class="ident" id="5835135">ConvertValue</span><span class="op" id="5835147">(</span><span class="ident" id="5835148">v</span>&nbsp;<span class="keyword" id="5835150">interface</span><span class="op" id="5835159">{</span><span class="op" id="5835160">}</span><span class="op" id="5835161">)</span>&nbsp;<span class="op" id="5835163">(</span><span class="ident" id="5835164">Value</span><span class="op" id="5835169">,</span>&nbsp;<span class="builtintype" id="5835171">error</span><span class="op" id="5835176">)</span>&nbsp;<span class="op" id="5835178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5835181">rv</span>&nbsp;<span class="op" id="5835184">:=</span>&nbsp;<span class="ident" id="5835187">reflect</span><span class="op" id="5835194">.</span><span class="ident" id="5835195">ValueOf</span><span class="op" id="5835202">(</span><span class="ident" id="5835203">v</span><span class="op" id="5835204">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835207">switch</span>&nbsp;<span class="ident" id="5835214">rv</span><span class="op" id="5835216">.</span><span class="ident" id="5835217">Kind</span><span class="op" id="5835221">(</span><span class="op" id="5835222">)</span>&nbsp;<span class="op" id="5835224">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835227">case</span>&nbsp;<span class="ident" id="5835232">reflect</span><span class="op" id="5835239">.</span><span class="ident" id="5835240">Int</span><span class="op" id="5835243">,</span>&nbsp;<span class="ident" id="5835245">reflect</span><span class="op" id="5835252">.</span><span class="ident" id="5835253">Int8</span><span class="op" id="5835257">,</span>&nbsp;<span class="ident" id="5835259">reflect</span><span class="op" id="5835266">.</span><span class="ident" id="5835267">Int16</span><span class="op" id="5835272">,</span>&nbsp;<span class="ident" id="5835274">reflect</span><span class="op" id="5835281">.</span><span class="ident" id="5835282">Int32</span><span class="op" id="5835287">,</span>&nbsp;<span class="ident" id="5835289">reflect</span><span class="op" id="5835296">.</span><span class="ident" id="5835297">Int64</span><span class="op" id="5835302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5835306">i64</span>&nbsp;<span class="op" id="5835310">:=</span>&nbsp;<span class="ident" id="5835313">rv</span><span class="op" id="5835315">.</span><span class="ident" id="5835316">Int</span><span class="op" id="5835319">(</span><span class="op" id="5835320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835324">if</span>&nbsp;<span class="ident" id="5835327">i64</span>&nbsp;<span class="op" id="5835331">&gt;</span>&nbsp;<span class="op" id="5835333">(</span><span class="num" id="5835334">1</span><span class="op" id="5835335">&lt;&lt;</span><span class="num" id="5835337">31</span><span class="op" id="5835339">)</span><span class="op" id="5835340">-</span><span class="num" id="5835341">1</span>&nbsp;<span class="op" id="5835343">||</span>&nbsp;<span class="ident" id="5835346">i64</span>&nbsp;<span class="op" id="5835350">&lt;</span>&nbsp;<span class="op" id="5835352">-</span><span class="op" id="5835353">(</span><span class="num" id="5835354">1</span><span class="op" id="5835355">&lt;&lt;</span><span class="num" id="5835357">31</span><span class="op" id="5835359">)</span>&nbsp;<span class="op" id="5835361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835366">return</span>&nbsp;<span class="ident" id="5835373">nil</span><span class="op" id="5835376">,</span>&nbsp;<span class="ident" id="5835378">fmt</span><span class="op" id="5835381">.</span><span class="ident" id="5835382">Errorf</span><span class="op" id="5835388">(</span><span class="string" id="5835389">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5835427">,</span>&nbsp;<span class="ident" id="5835429">v</span><span class="op" id="5835430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835434">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835438">return</span>&nbsp;<span class="ident" id="5835445">i64</span><span class="op" id="5835448">,</span>&nbsp;<span class="ident" id="5835450">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835455">case</span>&nbsp;<span class="ident" id="5835460">reflect</span><span class="op" id="5835467">.</span><span class="ident" id="5835468">Uint</span><span class="op" id="5835472">,</span>&nbsp;<span class="ident" id="5835474">reflect</span><span class="op" id="5835481">.</span><span class="ident" id="5835482">Uint8</span><span class="op" id="5835487">,</span>&nbsp;<span class="ident" id="5835489">reflect</span><span class="op" id="5835496">.</span><span class="ident" id="5835497">Uint16</span><span class="op" id="5835503">,</span>&nbsp;<span class="ident" id="5835505">reflect</span><span class="op" id="5835512">.</span><span class="ident" id="5835513">Uint32</span><span class="op" id="5835519">,</span>&nbsp;<span class="ident" id="5835521">reflect</span><span class="op" id="5835528">.</span><span class="ident" id="5835529">Uint64</span><span class="op" id="5835535">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5835539">u64</span>&nbsp;<span class="op" id="5835543">:=</span>&nbsp;<span class="ident" id="5835546">rv</span><span class="op" id="5835548">.</span><span class="ident" id="5835549">Uint</span><span class="op" id="5835553">(</span><span class="op" id="5835554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835558">if</span>&nbsp;<span class="ident" id="5835561">u64</span>&nbsp;<span class="op" id="5835565">&gt;</span>&nbsp;<span class="op" id="5835567">(</span><span class="num" id="5835568">1</span><span class="op" id="5835569">&lt;&lt;</span><span class="num" id="5835571">31</span><span class="op" id="5835573">)</span><span class="op" id="5835574">-</span><span class="num" id="5835575">1</span>&nbsp;<span class="op" id="5835577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835582">return</span>&nbsp;<span class="ident" id="5835589">nil</span><span class="op" id="5835592">,</span>&nbsp;<span class="ident" id="5835594">fmt</span><span class="op" id="5835597">.</span><span class="ident" id="5835598">Errorf</span><span class="op" id="5835604">(</span><span class="string" id="5835605">&#34;sql/driver:&nbsp;value&nbsp;%d&nbsp;overflows&nbsp;int32&#34;</span><span class="op" id="5835643">,</span>&nbsp;<span class="ident" id="5835645">v</span><span class="op" id="5835646">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835654">return</span>&nbsp;<span class="ident" id="5835661">int64</span><span class="op" id="5835666">(</span><span class="ident" id="5835667">u64</span><span class="op" id="5835670">)</span><span class="op" id="5835671">,</span>&nbsp;<span class="ident" id="5835673">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835678">case</span>&nbsp;<span class="ident" id="5835683">reflect</span><span class="op" id="5835690">.</span><span class="ident" id="5835691">String</span><span class="op" id="5835697">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5835701">i</span><span class="op" id="5835702">,</span>&nbsp;<span class="ident" id="5835704">err</span>&nbsp;<span class="op" id="5835708">:=</span>&nbsp;<span class="ident" id="5835711">strconv</span><span class="op" id="5835718">.</span><span class="ident" id="5835719">Atoi</span><span class="op" id="5835723">(</span><span class="ident" id="5835724">rv</span><span class="op" id="5835726">.</span><span class="ident" id="5835727">String</span><span class="op" id="5835733">(</span><span class="op" id="5835734">)</span><span class="op" id="5835735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835739">if</span>&nbsp;<span class="ident" id="5835742">err</span>&nbsp;<span class="op" id="5835746">!=</span>&nbsp;<span class="ident" id="5835749">nil</span>&nbsp;<span class="op" id="5835753">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835758">return</span>&nbsp;<span class="ident" id="5835765">nil</span><span class="op" id="5835768">,</span>&nbsp;<span class="ident" id="5835770">fmt</span><span class="op" id="5835773">.</span><span class="ident" id="5835774">Errorf</span><span class="op" id="5835780">(</span><span class="string" id="5835781">&#34;sql/driver:&nbsp;value&nbsp;%q&nbsp;can&#39;t&nbsp;be&nbsp;converted&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5835831">,</span>&nbsp;<span class="ident" id="5835833">v</span><span class="op" id="5835834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835838">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835842">return</span>&nbsp;<span class="ident" id="5835849">int64</span><span class="op" id="5835854">(</span><span class="ident" id="5835855">i</span><span class="op" id="5835856">)</span><span class="op" id="5835857">,</span>&nbsp;<span class="ident" id="5835859">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5835864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5835867">return</span>&nbsp;<span class="ident" id="5835874">nil</span><span class="op" id="5835877">,</span>&nbsp;<span class="ident" id="5835879">fmt</span><span class="op" id="5835882">.</span><span class="ident" id="5835883">Errorf</span><span class="op" id="5835889">(</span><span class="string" id="5835890">&#34;sql/driver:&nbsp;unsupported&nbsp;value&nbsp;%v&nbsp;(type&nbsp;%T)&nbsp;converting&nbsp;to&nbsp;int32&#34;</span><span class="op" id="5835954">,</span>&nbsp;<span class="ident" id="5835956">v</span><span class="op" id="5835957">,</span>&nbsp;<span class="ident" id="5835959">v</span><span class="op" id="5835960">)</span><br>
<span class="lineno">130</span><span class="op" id="5835962">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5835965">//&nbsp;String&nbsp;is&nbsp;a&nbsp;ValueConverter&nbsp;that&nbsp;converts&nbsp;its&nbsp;input&nbsp;to&nbsp;a&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="5836032">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;already&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte,&nbsp;it&#39;s&nbsp;unchanged.</span><br>
<span class="lineno"></span><span class="comment" id="5836095">//&nbsp;If&nbsp;the&nbsp;value&nbsp;is&nbsp;of&nbsp;another&nbsp;type,&nbsp;conversion&nbsp;to&nbsp;string&nbsp;is&nbsp;done</span><br>
<span class="lineno">135</span><span class="comment" id="5836160">//&nbsp;with&nbsp;fmt.Sprintf(&#34;%v&#34;,&nbsp;v).</span><br>
<span class="lineno"></span><span class="keyword" id="5836190">var</span>&nbsp;<span class="ident" id="5836194">String</span>&nbsp;<span class="ident" id="5836201">stringType</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5836213">type</span>&nbsp;<span class="ident" id="5836218">stringType</span>&nbsp;<span class="keyword" id="5836229">struct</span><span class="op" id="5836235">{</span><span class="op" id="5836236">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="5836239">func</span>&nbsp;<span class="op" id="5836244">(</span><span class="ident" id="5836245">stringType</span><span class="op" id="5836255">)</span>&nbsp;<span class="ident" id="5836257">ConvertValue</span><span class="op" id="5836269">(</span><span class="ident" id="5836270">v</span>&nbsp;<span class="keyword" id="5836272">interface</span><span class="op" id="5836281">{</span><span class="op" id="5836282">}</span><span class="op" id="5836283">)</span>&nbsp;<span class="op" id="5836285">(</span><span class="ident" id="5836286">Value</span><span class="op" id="5836291">,</span>&nbsp;<span class="builtintype" id="5836293">error</span><span class="op" id="5836298">)</span>&nbsp;<span class="op" id="5836300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836303">switch</span>&nbsp;<span class="ident" id="5836310">v</span><span class="op" id="5836311">.</span><span class="op" id="5836312">(</span><span class="keyword" id="5836313">type</span><span class="op" id="5836317">)</span>&nbsp;<span class="op" id="5836319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836322">case</span>&nbsp;<span class="builtintype" id="5836327">string</span><span class="op" id="5836333">,</span>&nbsp;<span class="op" id="5836335">[</span><span class="op" id="5836336">]</span><span class="builtintype" id="5836337">byte</span><span class="op" id="5836341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836345">return</span>&nbsp;<span class="ident" id="5836352">v</span><span class="op" id="5836353">,</span>&nbsp;<span class="ident" id="5836355">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836360">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836363">return</span>&nbsp;<span class="ident" id="5836370">fmt</span><span class="op" id="5836373">.</span><span class="ident" id="5836374">Sprintf</span><span class="op" id="5836381">(</span><span class="string" id="5836382">&#34;%v&#34;</span><span class="op" id="5836386">,</span>&nbsp;<span class="ident" id="5836388">v</span><span class="op" id="5836389">)</span><span class="op" id="5836390">,</span>&nbsp;<span class="ident" id="5836392">nil</span><br>
<span class="lineno"></span><span class="op" id="5836396">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5836399">//&nbsp;Null&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;allowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5836464">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno">150</span><span class="keyword" id="5836526">type</span>&nbsp;<span class="ident" id="5836531">Null</span>&nbsp;<span class="keyword" id="5836536">struct</span>&nbsp;<span class="op" id="5836543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836546">Converter</span>&nbsp;<span class="ident" id="5836556">ValueConverter</span><br>
<span class="lineno"></span><span class="op" id="5836571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5836574">func</span>&nbsp;<span class="op" id="5836579">(</span><span class="ident" id="5836580">n</span>&nbsp;<span class="ident" id="5836582">Null</span><span class="op" id="5836586">)</span>&nbsp;<span class="ident" id="5836588">ConvertValue</span><span class="op" id="5836600">(</span><span class="ident" id="5836601">v</span>&nbsp;<span class="keyword" id="5836603">interface</span><span class="op" id="5836612">{</span><span class="op" id="5836613">}</span><span class="op" id="5836614">)</span>&nbsp;<span class="op" id="5836616">(</span><span class="ident" id="5836617">Value</span><span class="op" id="5836622">,</span>&nbsp;<span class="builtintype" id="5836624">error</span><span class="op" id="5836629">)</span>&nbsp;<span class="op" id="5836631">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836634">if</span>&nbsp;<span class="ident" id="5836637">v</span>&nbsp;<span class="op" id="5836639">==</span>&nbsp;<span class="ident" id="5836642">nil</span>&nbsp;<span class="op" id="5836646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836650">return</span>&nbsp;<span class="ident" id="5836657">nil</span><span class="op" id="5836660">,</span>&nbsp;<span class="ident" id="5836662">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5836667">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836670">return</span>&nbsp;<span class="ident" id="5836677">n</span><span class="op" id="5836678">.</span><span class="ident" id="5836679">Converter</span><span class="op" id="5836688">.</span><span class="ident" id="5836689">ConvertValue</span><span class="op" id="5836701">(</span><span class="ident" id="5836702">v</span><span class="op" id="5836703">)</span><br>
<span class="lineno"></span><span class="op" id="5836705">}</span><br>
<span class="lineno">160</span><br>
<span class="lineno"></span><span class="comment" id="5836708">//&nbsp;NotNull&nbsp;is&nbsp;a&nbsp;type&nbsp;that&nbsp;implements&nbsp;ValueConverter&nbsp;by&nbsp;disallowing&nbsp;nil</span><br>
<span class="lineno"></span><span class="comment" id="5836779">//&nbsp;values&nbsp;but&nbsp;otherwise&nbsp;delegating&nbsp;to&nbsp;another&nbsp;ValueConverter.</span><br>
<span class="lineno"></span><span class="keyword" id="5836841">type</span>&nbsp;<span class="ident" id="5836846">NotNull</span>&nbsp;<span class="keyword" id="5836854">struct</span>&nbsp;<span class="op" id="5836861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5836864">Converter</span>&nbsp;<span class="ident" id="5836874">ValueConverter</span><br>
<span class="lineno">165</span><span class="op" id="5836889">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5836892">func</span>&nbsp;<span class="op" id="5836897">(</span><span class="ident" id="5836898">n</span>&nbsp;<span class="ident" id="5836900">NotNull</span><span class="op" id="5836907">)</span>&nbsp;<span class="ident" id="5836909">ConvertValue</span><span class="op" id="5836921">(</span><span class="ident" id="5836922">v</span>&nbsp;<span class="keyword" id="5836924">interface</span><span class="op" id="5836933">{</span><span class="op" id="5836934">}</span><span class="op" id="5836935">)</span>&nbsp;<span class="op" id="5836937">(</span><span class="ident" id="5836938">Value</span><span class="op" id="5836943">,</span>&nbsp;<span class="builtintype" id="5836945">error</span><span class="op" id="5836950">)</span>&nbsp;<span class="op" id="5836952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836955">if</span>&nbsp;<span class="ident" id="5836958">v</span>&nbsp;<span class="op" id="5836960">==</span>&nbsp;<span class="ident" id="5836963">nil</span>&nbsp;<span class="op" id="5836967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5836971">return</span>&nbsp;<span class="ident" id="5836978">nil</span><span class="op" id="5836981">,</span>&nbsp;<span class="ident" id="5836983">fmt</span><span class="op" id="5836986">.</span><span class="ident" id="5836987">Errorf</span><span class="op" id="5836993">(</span><span class="string" id="5836994">&#34;nil&nbsp;value&nbsp;not&nbsp;allowed&#34;</span><span class="op" id="5837017">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837020">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837023">return</span>&nbsp;<span class="ident" id="5837030">n</span><span class="op" id="5837031">.</span><span class="ident" id="5837032">Converter</span><span class="op" id="5837041">.</span><span class="ident" id="5837042">ConvertValue</span><span class="op" id="5837054">(</span><span class="ident" id="5837055">v</span><span class="op" id="5837056">)</span><br>
<span class="lineno"></span><span class="op" id="5837058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5837061">//&nbsp;IsValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;parameter&nbsp;type.</span><br>
<span class="lineno">175</span><span class="comment" id="5837123">//&nbsp;Unlike&nbsp;IsScanValue,&nbsp;IsValue&nbsp;permits&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5837179">func</span>&nbsp;<span class="ident" id="5837184">IsValue</span><span class="op" id="5837191">(</span><span class="ident" id="5837192">v</span>&nbsp;<span class="keyword" id="5837194">interface</span><span class="op" id="5837203">{</span><span class="op" id="5837204">}</span><span class="op" id="5837205">)</span>&nbsp;<span class="builtintype" id="5837207">bool</span>&nbsp;<span class="op" id="5837212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837215">if</span>&nbsp;<span class="ident" id="5837218">IsScanValue</span><span class="op" id="5837229">(</span><span class="ident" id="5837230">v</span><span class="op" id="5837231">)</span>&nbsp;<span class="op" id="5837233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837237">return</span>&nbsp;<span class="builtintype" id="5837244">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837250">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837253">if</span>&nbsp;<span class="ident" id="5837256">_</span><span class="op" id="5837257">,</span>&nbsp;<span class="ident" id="5837259">ok</span>&nbsp;<span class="op" id="5837262">:=</span>&nbsp;<span class="ident" id="5837265">v</span><span class="op" id="5837266">.</span><span class="op" id="5837267">(</span><span class="builtintype" id="5837268">string</span><span class="op" id="5837274">)</span><span class="op" id="5837275">;</span>&nbsp;<span class="ident" id="5837277">ok</span>&nbsp;<span class="op" id="5837280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837284">return</span>&nbsp;<span class="builtintype" id="5837291">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837297">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837300">return</span>&nbsp;<span class="builtintype" id="5837307">false</span><br>
<span class="lineno"></span><span class="op" id="5837313">}</span><br>
<span class="lineno">185</span><br>
<span class="lineno"></span><span class="comment" id="5837316">//&nbsp;IsScanValue&nbsp;reports&nbsp;whether&nbsp;v&nbsp;is&nbsp;a&nbsp;valid&nbsp;Value&nbsp;scan&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="5837377">//&nbsp;Unlike&nbsp;IsValue,&nbsp;IsScanValue&nbsp;does&nbsp;not&nbsp;permit&nbsp;the&nbsp;string&nbsp;type.</span><br>
<span class="lineno"></span><span class="keyword" id="5837441">func</span>&nbsp;<span class="ident" id="5837446">IsScanValue</span><span class="op" id="5837457">(</span><span class="ident" id="5837458">v</span>&nbsp;<span class="keyword" id="5837460">interface</span><span class="op" id="5837469">{</span><span class="op" id="5837470">}</span><span class="op" id="5837471">)</span>&nbsp;<span class="builtintype" id="5837473">bool</span>&nbsp;<span class="op" id="5837478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837481">if</span>&nbsp;<span class="ident" id="5837484">v</span>&nbsp;<span class="op" id="5837486">==</span>&nbsp;<span class="ident" id="5837489">nil</span>&nbsp;<span class="op" id="5837493">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837497">return</span>&nbsp;<span class="builtintype" id="5837504">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837513">switch</span>&nbsp;<span class="ident" id="5837520">v</span><span class="op" id="5837521">.</span><span class="op" id="5837522">(</span><span class="keyword" id="5837523">type</span><span class="op" id="5837527">)</span>&nbsp;<span class="op" id="5837529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837532">case</span>&nbsp;<span class="ident" id="5837537">int64</span><span class="op" id="5837542">,</span>&nbsp;<span class="builtintype" id="5837544">float64</span><span class="op" id="5837551">,</span>&nbsp;<span class="op" id="5837553">[</span><span class="op" id="5837554">]</span><span class="builtintype" id="5837555">byte</span><span class="op" id="5837559">,</span>&nbsp;<span class="builtintype" id="5837561">bool</span><span class="op" id="5837565">,</span>&nbsp;<span class="ident" id="5837567">time</span><span class="op" id="5837571">.</span><span class="ident" id="5837572">Time</span><span class="op" id="5837576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837580">return</span>&nbsp;<span class="builtintype" id="5837587">true</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5837593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5837596">return</span>&nbsp;<span class="builtintype" id="5837603">false</span><br>
<span class="lineno"></span><span class="op" id="5837609">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5837612">//&nbsp;DefaultParameterConverter&nbsp;is&nbsp;the&nbsp;default&nbsp;implementation&nbsp;of</span><br>
<span class="lineno">200</span><span class="comment" id="5837674">//&nbsp;ValueConverter&nbsp;that&#39;s&nbsp;used&nbsp;when&nbsp;a&nbsp;Stmt&nbsp;doesn&#39;t&nbsp;implement</span><br>
<span class="lineno"></span><span class="comment" id="5837734">//&nbsp;ColumnConverter.</span><br>
<span class="lineno"></span><span class="comment" id="5837754">//</span><br>
<span class="lineno"></span><span class="comment" id="5837757">//&nbsp;DefaultParameterConverter&nbsp;returns&nbsp;the&nbsp;given&nbsp;value&nbsp;directly&nbsp;if</span><br>
<span class="lineno"></span><span class="comment" id="5837822">//&nbsp;IsValue(value).&nbsp;&nbsp;Otherwise&nbsp;integer&nbsp;type&nbsp;are&nbsp;converted&nbsp;to</span><br>
<span class="lineno">205</span><span class="comment" id="5837882">//&nbsp;int64,&nbsp;floats&nbsp;to&nbsp;float64,&nbsp;and&nbsp;strings&nbsp;to&nbsp;[]byte.&nbsp;&nbsp;Other&nbsp;types&nbsp;are</span><br>
<span class="lineno"></span><span class="comment" id="5837951">//&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="5837964">var</span>&nbsp;<span class="ident" id="5837968">DefaultParameterConverter</span>&nbsp;<span class="ident" id="5837994">defaultConverter</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5838012">type</span>&nbsp;<span class="ident" id="5838017">defaultConverter</span>&nbsp;<span class="keyword" id="5838034">struct</span><span class="op" id="5838040">{</span><span class="op" id="5838041">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="5838044">var</span>&nbsp;<span class="ident" id="5838048">_</span>&nbsp;<span class="ident" id="5838050">ValueConverter</span>&nbsp;<span class="op" id="5838065">=</span>&nbsp;<span class="ident" id="5838067">defaultConverter</span><span class="op" id="5838083">{</span><span class="op" id="5838084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5838087">func</span>&nbsp;<span class="op" id="5838092">(</span><span class="ident" id="5838093">defaultConverter</span><span class="op" id="5838109">)</span>&nbsp;<span class="ident" id="5838111">ConvertValue</span><span class="op" id="5838123">(</span><span class="ident" id="5838124">v</span>&nbsp;<span class="keyword" id="5838126">interface</span><span class="op" id="5838135">{</span><span class="op" id="5838136">}</span><span class="op" id="5838137">)</span>&nbsp;<span class="op" id="5838139">(</span><span class="ident" id="5838140">Value</span><span class="op" id="5838145">,</span>&nbsp;<span class="builtintype" id="5838147">error</span><span class="op" id="5838152">)</span>&nbsp;<span class="op" id="5838154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838157">if</span>&nbsp;<span class="ident" id="5838160">IsValue</span><span class="op" id="5838167">(</span><span class="ident" id="5838168">v</span><span class="op" id="5838169">)</span>&nbsp;<span class="op" id="5838171">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838175">return</span>&nbsp;<span class="ident" id="5838182">v</span><span class="op" id="5838183">,</span>&nbsp;<span class="ident" id="5838185">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838190">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838194">if</span>&nbsp;<span class="ident" id="5838197">svi</span><span class="op" id="5838200">,</span>&nbsp;<span class="ident" id="5838202">ok</span>&nbsp;<span class="op" id="5838205">:=</span>&nbsp;<span class="ident" id="5838208">v</span><span class="op" id="5838209">.</span><span class="op" id="5838210">(</span><span class="ident" id="5838211">Valuer</span><span class="op" id="5838217">)</span><span class="op" id="5838218">;</span>&nbsp;<span class="ident" id="5838220">ok</span>&nbsp;<span class="op" id="5838223">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5838227">sv</span><span class="op" id="5838229">,</span>&nbsp;<span class="ident" id="5838231">err</span>&nbsp;<span class="op" id="5838235">:=</span>&nbsp;<span class="ident" id="5838238">svi</span><span class="op" id="5838241">.</span><span class="ident" id="5838242">Value</span><span class="op" id="5838247">(</span><span class="op" id="5838248">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838252">if</span>&nbsp;<span class="ident" id="5838255">err</span>&nbsp;<span class="op" id="5838259">!=</span>&nbsp;<span class="ident" id="5838262">nil</span>&nbsp;<span class="op" id="5838266">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838271">return</span>&nbsp;<span class="ident" id="5838278">nil</span><span class="op" id="5838281">,</span>&nbsp;<span class="ident" id="5838283">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838293">if</span>&nbsp;<span class="op" id="5838296">!</span><span class="ident" id="5838297">IsValue</span><span class="op" id="5838304">(</span><span class="ident" id="5838305">sv</span><span class="op" id="5838307">)</span>&nbsp;<span class="op" id="5838309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838314">return</span>&nbsp;<span class="ident" id="5838321">nil</span><span class="op" id="5838324">,</span>&nbsp;<span class="ident" id="5838326">fmt</span><span class="op" id="5838329">.</span><span class="ident" id="5838330">Errorf</span><span class="op" id="5838336">(</span><span class="string" id="5838337">&#34;non-Value&nbsp;type&nbsp;%T&nbsp;returned&nbsp;from&nbsp;Value&#34;</span><span class="op" id="5838376">,</span>&nbsp;<span class="ident" id="5838378">sv</span><span class="op" id="5838380">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838388">return</span>&nbsp;<span class="ident" id="5838395">sv</span><span class="op" id="5838397">,</span>&nbsp;<span class="ident" id="5838399">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5838408">rv</span>&nbsp;<span class="op" id="5838411">:=</span>&nbsp;<span class="ident" id="5838414">reflect</span><span class="op" id="5838421">.</span><span class="ident" id="5838422">ValueOf</span><span class="op" id="5838429">(</span><span class="ident" id="5838430">v</span><span class="op" id="5838431">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838434">switch</span>&nbsp;<span class="ident" id="5838441">rv</span><span class="op" id="5838443">.</span><span class="ident" id="5838444">Kind</span><span class="op" id="5838448">(</span><span class="op" id="5838449">)</span>&nbsp;<span class="op" id="5838451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838454">case</span>&nbsp;<span class="ident" id="5838459">reflect</span><span class="op" id="5838466">.</span><span class="ident" id="5838467">Ptr</span><span class="op" id="5838470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5838474">//&nbsp;indirect&nbsp;pointers</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838497">if</span>&nbsp;<span class="ident" id="5838500">rv</span><span class="op" id="5838502">.</span><span class="ident" id="5838503">IsNil</span><span class="op" id="5838508">(</span><span class="op" id="5838509">)</span>&nbsp;<span class="op" id="5838511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838516">return</span>&nbsp;<span class="ident" id="5838523">nil</span><span class="op" id="5838526">,</span>&nbsp;<span class="ident" id="5838528">nil</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838534">}</span>&nbsp;<span class="keyword" id="5838536">else</span>&nbsp;<span class="op" id="5838541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838546">return</span>&nbsp;<span class="ident" id="5838553">defaultConverter</span><span class="op" id="5838569">{</span><span class="op" id="5838570">}</span><span class="op" id="5838571">.</span><span class="ident" id="5838572">ConvertValue</span><span class="op" id="5838584">(</span><span class="ident" id="5838585">rv</span><span class="op" id="5838587">.</span><span class="ident" id="5838588">Elem</span><span class="op" id="5838592">(</span><span class="op" id="5838593">)</span><span class="op" id="5838594">.</span><span class="ident" id="5838595">Interface</span><span class="op" id="5838604">(</span><span class="op" id="5838605">)</span><span class="op" id="5838606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838613">case</span>&nbsp;<span class="ident" id="5838618">reflect</span><span class="op" id="5838625">.</span><span class="ident" id="5838626">Int</span><span class="op" id="5838629">,</span>&nbsp;<span class="ident" id="5838631">reflect</span><span class="op" id="5838638">.</span><span class="ident" id="5838639">Int8</span><span class="op" id="5838643">,</span>&nbsp;<span class="ident" id="5838645">reflect</span><span class="op" id="5838652">.</span><span class="ident" id="5838653">Int16</span><span class="op" id="5838658">,</span>&nbsp;<span class="ident" id="5838660">reflect</span><span class="op" id="5838667">.</span><span class="ident" id="5838668">Int32</span><span class="op" id="5838673">,</span>&nbsp;<span class="ident" id="5838675">reflect</span><span class="op" id="5838682">.</span><span class="ident" id="5838683">Int64</span><span class="op" id="5838688">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838692">return</span>&nbsp;<span class="ident" id="5838699">rv</span><span class="op" id="5838701">.</span><span class="ident" id="5838702">Int</span><span class="op" id="5838705">(</span><span class="op" id="5838706">)</span><span class="op" id="5838707">,</span>&nbsp;<span class="ident" id="5838709">nil</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838714">case</span>&nbsp;<span class="ident" id="5838719">reflect</span><span class="op" id="5838726">.</span><span class="ident" id="5838727">Uint</span><span class="op" id="5838731">,</span>&nbsp;<span class="ident" id="5838733">reflect</span><span class="op" id="5838740">.</span><span class="ident" id="5838741">Uint8</span><span class="op" id="5838746">,</span>&nbsp;<span class="ident" id="5838748">reflect</span><span class="op" id="5838755">.</span><span class="ident" id="5838756">Uint16</span><span class="op" id="5838762">,</span>&nbsp;<span class="ident" id="5838764">reflect</span><span class="op" id="5838771">.</span><span class="ident" id="5838772">Uint32</span><span class="op" id="5838778">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838782">return</span>&nbsp;<span class="ident" id="5838789">int64</span><span class="op" id="5838794">(</span><span class="ident" id="5838795">rv</span><span class="op" id="5838797">.</span><span class="ident" id="5838798">Uint</span><span class="op" id="5838802">(</span><span class="op" id="5838803">)</span><span class="op" id="5838804">)</span><span class="op" id="5838805">,</span>&nbsp;<span class="ident" id="5838807">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838812">case</span>&nbsp;<span class="ident" id="5838817">reflect</span><span class="op" id="5838824">.</span><span class="ident" id="5838825">Uint64</span><span class="op" id="5838831">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5838835">u64</span>&nbsp;<span class="op" id="5838839">:=</span>&nbsp;<span class="ident" id="5838842">rv</span><span class="op" id="5838844">.</span><span class="ident" id="5838845">Uint</span><span class="op" id="5838849">(</span><span class="op" id="5838850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838854">if</span>&nbsp;<span class="ident" id="5838857">u64</span>&nbsp;<span class="op" id="5838861">&gt;=</span>&nbsp;<span class="num" id="5838864">1</span><span class="op" id="5838865">&lt;&lt;</span><span class="num" id="5838867">63</span>&nbsp;<span class="op" id="5838870">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838875">return</span>&nbsp;<span class="ident" id="5838882">nil</span><span class="op" id="5838885">,</span>&nbsp;<span class="ident" id="5838887">fmt</span><span class="op" id="5838890">.</span><span class="ident" id="5838891">Errorf</span><span class="op" id="5838897">(</span><span class="string" id="5838898">&#34;uint64&nbsp;values&nbsp;with&nbsp;high&nbsp;bit&nbsp;set&nbsp;are&nbsp;not&nbsp;supported&#34;</span><span class="op" id="5838949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5838953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838957">return</span>&nbsp;<span class="ident" id="5838964">int64</span><span class="op" id="5838969">(</span><span class="ident" id="5838970">u64</span><span class="op" id="5838973">)</span><span class="op" id="5838974">,</span>&nbsp;<span class="ident" id="5838976">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5838981">case</span>&nbsp;<span class="ident" id="5838986">reflect</span><span class="op" id="5838993">.</span><span class="ident" id="5838994">Float32</span><span class="op" id="5839001">,</span>&nbsp;<span class="ident" id="5839003">reflect</span><span class="op" id="5839010">.</span><span class="ident" id="5839011">Float64</span><span class="op" id="5839018">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839022">return</span>&nbsp;<span class="ident" id="5839029">rv</span><span class="op" id="5839031">.</span><span class="ident" id="5839032">Float</span><span class="op" id="5839037">(</span><span class="op" id="5839038">)</span><span class="op" id="5839039">,</span>&nbsp;<span class="ident" id="5839041">nil</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5839046">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5839049">return</span>&nbsp;<span class="ident" id="5839056">nil</span><span class="op" id="5839059">,</span>&nbsp;<span class="ident" id="5839061">fmt</span><span class="op" id="5839064">.</span><span class="ident" id="5839065">Errorf</span><span class="op" id="5839071">(</span><span class="string" id="5839072">&#34;unsupported&nbsp;type&nbsp;%T,&nbsp;a&nbsp;%s&#34;</span><span class="op" id="5839099">,</span>&nbsp;<span class="ident" id="5839101">v</span><span class="op" id="5839102">,</span>&nbsp;<span class="ident" id="5839104">rv</span><span class="op" id="5839106">.</span><span class="ident" id="5839107">Kind</span><span class="op" id="5839111">(</span><span class="op" id="5839112">)</span><span class="op" id="5839113">)</span><br>
<span class="lineno"></span><span class="op" id="5839115">}</span>
</div>
</body>
</html>
