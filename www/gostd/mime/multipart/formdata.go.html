<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>mime/multipart</h2>
<ul>
<li><a href="/gostd/mime/multipart/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/mime/multipart/formdata.go.html">formdata.go</a></li>
<li><a href="/gostd/mime/multipart/formdata_test.go.html">formdata_test.go</a></li>
<li><a href="/gostd/mime/multipart/multipart.go.html">multipart.go</a></li>
<li><a href="/gostd/mime/multipart/multipart_test.go.html">multipart_test.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable.go.html">quotedprintable.go</a></li>
<li><a href="/gostd/mime/multipart/quotedprintable_test.go.html">quotedprintable_test.go</a></li>
<li><a href="/gostd/mime/multipart/writer.go.html">writer.go</a></li>
<li><a href="/gostd/mime/multipart/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5060089">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5060144">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5060198">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5060249">package</span>&nbsp;<span class="ident" id="5060257">multipart</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5060268">import</span>&nbsp;<span class="op" id="5060275">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060278">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060287">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060297">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060303">&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060316">&#34;net/textproto&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5060333">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="5060338">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5060341">//&nbsp;TODO(adg,bradfitz):&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;unify&nbsp;the&nbsp;DoS-prevention&nbsp;strategy&nbsp;here</span><br>
<span class="lineno"></span><span class="comment" id="5060417">//&nbsp;with&nbsp;that&nbsp;of&nbsp;the&nbsp;http&nbsp;package&#39;s&nbsp;ParseForm.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5060464">//&nbsp;ReadForm&nbsp;parses&nbsp;an&nbsp;entire&nbsp;multipart&nbsp;message&nbsp;whose&nbsp;parts&nbsp;have</span><br>
<span class="lineno">20</span><span class="comment" id="5060528">//&nbsp;a&nbsp;Content-Disposition&nbsp;of&nbsp;&#34;form-data&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="5060569">//&nbsp;It&nbsp;stores&nbsp;up&nbsp;to&nbsp;maxMemory&nbsp;bytes&nbsp;of&nbsp;the&nbsp;file&nbsp;parts&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span><span class="comment" id="5060632">//&nbsp;and&nbsp;the&nbsp;remainder&nbsp;on&nbsp;disk&nbsp;in&nbsp;temporary&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="5060681">func</span>&nbsp;<span class="op" id="5060686">(</span><span class="ident" id="5060687">r</span>&nbsp;<span class="op" id="5060689">*</span><span class="ident" id="5060690">Reader</span><span class="op" id="5060696">)</span>&nbsp;<span class="ident" id="5060698">ReadForm</span><span class="op" id="5060706">(</span><span class="ident" id="5060707">maxMemory</span>&nbsp;<span class="ident" id="5060717">int64</span><span class="op" id="5060722">)</span>&nbsp;<span class="op" id="5060724">(</span><span class="ident" id="5060725">f</span>&nbsp;<span class="op" id="5060727">*</span><span class="ident" id="5060728">Form</span><span class="op" id="5060732">,</span>&nbsp;<span class="ident" id="5060734">err</span>&nbsp;<span class="builtintype" id="5060738">error</span><span class="op" id="5060743">)</span>&nbsp;<span class="op" id="5060745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060748">form</span>&nbsp;<span class="op" id="5060753">:=</span>&nbsp;<span class="op" id="5060756">&amp;</span><span class="ident" id="5060757">Form</span><span class="op" id="5060761">{</span><span class="builtinfunc" id="5060762">make</span><span class="op" id="5060766">(</span><span class="keyword" id="5060767">map</span><span class="op" id="5060770">[</span><span class="builtintype" id="5060771">string</span><span class="op" id="5060777">]</span><span class="op" id="5060778">[</span><span class="op" id="5060779">]</span><span class="builtintype" id="5060780">string</span><span class="op" id="5060786">)</span><span class="op" id="5060787">,</span>&nbsp;<span class="builtinfunc" id="5060789">make</span><span class="op" id="5060793">(</span><span class="keyword" id="5060794">map</span><span class="op" id="5060797">[</span><span class="builtintype" id="5060798">string</span><span class="op" id="5060804">]</span><span class="op" id="5060805">[</span><span class="op" id="5060806">]</span><span class="op" id="5060807">*</span><span class="ident" id="5060808">FileHeader</span><span class="op" id="5060818">)</span><span class="op" id="5060819">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060822">defer</span>&nbsp;<span class="keyword" id="5060828">func</span><span class="op" id="5060832">(</span><span class="op" id="5060833">)</span>&nbsp;<span class="op" id="5060835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060839">if</span>&nbsp;<span class="ident" id="5060842">err</span>&nbsp;<span class="op" id="5060846">!=</span>&nbsp;<span class="ident" id="5060849">nil</span>&nbsp;<span class="op" id="5060853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060858">form</span><span class="op" id="5060862">.</span><span class="ident" id="5060863">RemoveAll</span><span class="op" id="5060872">(</span><span class="op" id="5060873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5060880">}</span><span class="op" id="5060881">(</span><span class="op" id="5060882">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060886">maxValueBytes</span>&nbsp;<span class="op" id="5060900">:=</span>&nbsp;<span class="ident" id="5060903">int64</span><span class="op" id="5060908">(</span><span class="num" id="5060909">10</span>&nbsp;<span class="op" id="5060912">&lt;&lt;</span>&nbsp;<span class="num" id="5060915">20</span><span class="op" id="5060917">)</span>&nbsp;<span class="comment" id="5060919">//&nbsp;10&nbsp;MB&nbsp;is&nbsp;a&nbsp;lot&nbsp;of&nbsp;text.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060947">for</span>&nbsp;<span class="op" id="5060951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5060955">p</span><span class="op" id="5060956">,</span>&nbsp;<span class="ident" id="5060958">err</span>&nbsp;<span class="op" id="5060962">:=</span>&nbsp;<span class="ident" id="5060965">r</span><span class="op" id="5060966">.</span><span class="ident" id="5060967">NextPart</span><span class="op" id="5060975">(</span><span class="op" id="5060976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5060980">if</span>&nbsp;<span class="ident" id="5060983">err</span>&nbsp;<span class="op" id="5060987">==</span>&nbsp;<span class="ident" id="5060990">io</span><span class="op" id="5060992">.</span><span class="ident" id="5060993">EOF</span>&nbsp;<span class="op" id="5060997">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061002">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061014">if</span>&nbsp;<span class="ident" id="5061017">err</span>&nbsp;<span class="op" id="5061021">!=</span>&nbsp;<span class="ident" id="5061024">nil</span>&nbsp;<span class="op" id="5061028">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061033">return</span>&nbsp;<span class="ident" id="5061040">nil</span><span class="op" id="5061043">,</span>&nbsp;<span class="ident" id="5061045">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061051">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061056">name</span>&nbsp;<span class="op" id="5061061">:=</span>&nbsp;<span class="ident" id="5061064">p</span><span class="op" id="5061065">.</span><span class="ident" id="5061066">FormName</span><span class="op" id="5061074">(</span><span class="op" id="5061075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061079">if</span>&nbsp;<span class="ident" id="5061082">name</span>&nbsp;<span class="op" id="5061087">==</span>&nbsp;<span class="string" id="5061090">&#34;&#34;</span>&nbsp;<span class="op" id="5061093">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061098">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061109">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061113">filename</span>&nbsp;<span class="op" id="5061122">:=</span>&nbsp;<span class="ident" id="5061125">p</span><span class="op" id="5061126">.</span><span class="ident" id="5061127">FileName</span><span class="op" id="5061135">(</span><span class="op" id="5061136">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061141">var</span>&nbsp;<span class="ident" id="5061145">b</span>&nbsp;<span class="ident" id="5061147">bytes</span><span class="op" id="5061152">.</span><span class="ident" id="5061153">Buffer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061163">if</span>&nbsp;<span class="ident" id="5061166">filename</span>&nbsp;<span class="op" id="5061175">==</span>&nbsp;<span class="string" id="5061178">&#34;&#34;</span>&nbsp;<span class="op" id="5061181">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061186">//&nbsp;value,&nbsp;store&nbsp;as&nbsp;string&nbsp;in&nbsp;memory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061225">n</span><span class="op" id="5061226">,</span>&nbsp;<span class="ident" id="5061228">err</span>&nbsp;<span class="op" id="5061232">:=</span>&nbsp;<span class="ident" id="5061235">io</span><span class="op" id="5061237">.</span><span class="ident" id="5061238">CopyN</span><span class="op" id="5061243">(</span><span class="op" id="5061244">&amp;</span><span class="ident" id="5061245">b</span><span class="op" id="5061246">,</span>&nbsp;<span class="ident" id="5061248">p</span><span class="op" id="5061249">,</span>&nbsp;<span class="ident" id="5061251">maxValueBytes</span><span class="op" id="5061264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061269">if</span>&nbsp;<span class="ident" id="5061272">err</span>&nbsp;<span class="op" id="5061276">!=</span>&nbsp;<span class="ident" id="5061279">nil</span>&nbsp;<span class="op" id="5061283">&amp;&amp;</span>&nbsp;<span class="ident" id="5061286">err</span>&nbsp;<span class="op" id="5061290">!=</span>&nbsp;<span class="ident" id="5061293">io</span><span class="op" id="5061295">.</span><span class="ident" id="5061296">EOF</span>&nbsp;<span class="op" id="5061300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061306">return</span>&nbsp;<span class="ident" id="5061313">nil</span><span class="op" id="5061316">,</span>&nbsp;<span class="ident" id="5061318">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061325">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061330">maxValueBytes</span>&nbsp;<span class="op" id="5061344">-=</span>&nbsp;<span class="ident" id="5061347">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061352">if</span>&nbsp;<span class="ident" id="5061355">maxValueBytes</span>&nbsp;<span class="op" id="5061369">==</span>&nbsp;<span class="num" id="5061372">0</span>&nbsp;<span class="op" id="5061374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061380">return</span>&nbsp;<span class="ident" id="5061387">nil</span><span class="op" id="5061390">,</span>&nbsp;<span class="ident" id="5061392">errors</span><span class="op" id="5061398">.</span><span class="ident" id="5061399">New</span><span class="op" id="5061402">(</span><span class="string" id="5061403">&#34;multipart:&nbsp;message&nbsp;too&nbsp;large&#34;</span><span class="op" id="5061433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061443">form</span><span class="op" id="5061447">.</span><span class="ident" id="5061448">Value</span><span class="op" id="5061453">[</span><span class="ident" id="5061454">name</span><span class="op" id="5061458">]</span>&nbsp;<span class="op" id="5061460">=</span>&nbsp;<span class="builtinfunc" id="5061462">append</span><span class="op" id="5061468">(</span><span class="ident" id="5061469">form</span><span class="op" id="5061473">.</span><span class="ident" id="5061474">Value</span><span class="op" id="5061479">[</span><span class="ident" id="5061480">name</span><span class="op" id="5061484">]</span><span class="op" id="5061485">,</span>&nbsp;<span class="ident" id="5061487">b</span><span class="op" id="5061488">.</span><span class="ident" id="5061489">String</span><span class="op" id="5061495">(</span><span class="op" id="5061496">)</span><span class="op" id="5061497">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061518">//&nbsp;file,&nbsp;store&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061556">fh</span>&nbsp;<span class="op" id="5061559">:=</span>&nbsp;<span class="op" id="5061562">&amp;</span><span class="ident" id="5061563">FileHeader</span><span class="op" id="5061573">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061578">Filename</span><span class="op" id="5061586">:</span>&nbsp;<span class="ident" id="5061588">filename</span><span class="op" id="5061596">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061601">Header</span><span class="op" id="5061607">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5061611">p</span><span class="op" id="5061612">.</span><span class="ident" id="5061613">Header</span><span class="op" id="5061619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061623">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061627">n</span><span class="op" id="5061628">,</span>&nbsp;<span class="ident" id="5061630">err</span>&nbsp;<span class="op" id="5061634">:=</span>&nbsp;<span class="ident" id="5061637">io</span><span class="op" id="5061639">.</span><span class="ident" id="5061640">CopyN</span><span class="op" id="5061645">(</span><span class="op" id="5061646">&amp;</span><span class="ident" id="5061647">b</span><span class="op" id="5061648">,</span>&nbsp;<span class="ident" id="5061650">p</span><span class="op" id="5061651">,</span>&nbsp;<span class="ident" id="5061653">maxMemory</span><span class="op" id="5061662">+</span><span class="num" id="5061663">1</span><span class="op" id="5061664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061668">if</span>&nbsp;<span class="ident" id="5061671">err</span>&nbsp;<span class="op" id="5061675">!=</span>&nbsp;<span class="ident" id="5061678">nil</span>&nbsp;<span class="op" id="5061682">&amp;&amp;</span>&nbsp;<span class="ident" id="5061685">err</span>&nbsp;<span class="op" id="5061689">!=</span>&nbsp;<span class="ident" id="5061692">io</span><span class="op" id="5061694">.</span><span class="ident" id="5061695">EOF</span>&nbsp;<span class="op" id="5061699">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061704">return</span>&nbsp;<span class="ident" id="5061711">nil</span><span class="op" id="5061714">,</span>&nbsp;<span class="ident" id="5061716">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061722">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061726">if</span>&nbsp;<span class="ident" id="5061729">n</span>&nbsp;<span class="op" id="5061731">&gt;</span>&nbsp;<span class="ident" id="5061733">maxMemory</span>&nbsp;<span class="op" id="5061743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5061748">//&nbsp;too&nbsp;big,&nbsp;write&nbsp;to&nbsp;disk&nbsp;and&nbsp;flush&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061794">file</span><span class="op" id="5061798">,</span>&nbsp;<span class="ident" id="5061800">err</span>&nbsp;<span class="op" id="5061804">:=</span>&nbsp;<span class="ident" id="5061807">ioutil</span><span class="op" id="5061813">.</span><span class="ident" id="5061814">TempFile</span><span class="op" id="5061822">(</span><span class="string" id="5061823">&#34;&#34;</span><span class="op" id="5061825">,</span>&nbsp;<span class="string" id="5061827">&#34;multipart-&#34;</span><span class="op" id="5061839">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061844">if</span>&nbsp;<span class="ident" id="5061847">err</span>&nbsp;<span class="op" id="5061851">!=</span>&nbsp;<span class="ident" id="5061854">nil</span>&nbsp;<span class="op" id="5061858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061864">return</span>&nbsp;<span class="ident" id="5061871">nil</span><span class="op" id="5061874">,</span>&nbsp;<span class="ident" id="5061876">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5061883">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061888">defer</span>&nbsp;<span class="ident" id="5061894">file</span><span class="op" id="5061898">.</span><span class="ident" id="5061899">Close</span><span class="op" id="5061904">(</span><span class="op" id="5061905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061910">_</span><span class="op" id="5061911">,</span>&nbsp;<span class="ident" id="5061913">err</span>&nbsp;<span class="op" id="5061917">=</span>&nbsp;<span class="ident" id="5061919">io</span><span class="op" id="5061921">.</span><span class="ident" id="5061922">Copy</span><span class="op" id="5061926">(</span><span class="ident" id="5061927">file</span><span class="op" id="5061931">,</span>&nbsp;<span class="ident" id="5061933">io</span><span class="op" id="5061935">.</span><span class="ident" id="5061936">MultiReader</span><span class="op" id="5061947">(</span><span class="op" id="5061948">&amp;</span><span class="ident" id="5061949">b</span><span class="op" id="5061950">,</span>&nbsp;<span class="ident" id="5061952">p</span><span class="op" id="5061953">)</span><span class="op" id="5061954">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5061959">if</span>&nbsp;<span class="ident" id="5061962">err</span>&nbsp;<span class="op" id="5061966">!=</span>&nbsp;<span class="ident" id="5061969">nil</span>&nbsp;<span class="op" id="5061973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5061979">os</span><span class="op" id="5061981">.</span><span class="ident" id="5061982">Remove</span><span class="op" id="5061988">(</span><span class="ident" id="5061989">file</span><span class="op" id="5061993">.</span><span class="ident" id="5061994">Name</span><span class="op" id="5061998">(</span><span class="op" id="5061999">)</span><span class="op" id="5062000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062006">return</span>&nbsp;<span class="ident" id="5062013">nil</span><span class="op" id="5062016">,</span>&nbsp;<span class="ident" id="5062018">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062030">fh</span><span class="op" id="5062032">.</span><span class="ident" id="5062033">tmpfile</span>&nbsp;<span class="op" id="5062041">=</span>&nbsp;<span class="ident" id="5062043">file</span><span class="op" id="5062047">.</span><span class="ident" id="5062048">Name</span><span class="op" id="5062052">(</span><span class="op" id="5062053">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062057">}</span>&nbsp;<span class="keyword" id="5062059">else</span>&nbsp;<span class="op" id="5062064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062069">fh</span><span class="op" id="5062071">.</span><span class="ident" id="5062072">content</span>&nbsp;<span class="op" id="5062080">=</span>&nbsp;<span class="ident" id="5062082">b</span><span class="op" id="5062083">.</span><span class="ident" id="5062084">Bytes</span><span class="op" id="5062089">(</span><span class="op" id="5062090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062095">maxMemory</span>&nbsp;<span class="op" id="5062105">-=</span>&nbsp;<span class="ident" id="5062108">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062112">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062116">form</span><span class="op" id="5062120">.</span><span class="ident" id="5062121">File</span><span class="op" id="5062125">[</span><span class="ident" id="5062126">name</span><span class="op" id="5062130">]</span>&nbsp;<span class="op" id="5062132">=</span>&nbsp;<span class="builtinfunc" id="5062134">append</span><span class="op" id="5062140">(</span><span class="ident" id="5062141">form</span><span class="op" id="5062145">.</span><span class="ident" id="5062146">File</span><span class="op" id="5062150">[</span><span class="ident" id="5062151">name</span><span class="op" id="5062155">]</span><span class="op" id="5062156">,</span>&nbsp;<span class="ident" id="5062158">fh</span><span class="op" id="5062160">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062163">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062167">return</span>&nbsp;<span class="ident" id="5062174">form</span><span class="op" id="5062178">,</span>&nbsp;<span class="ident" id="5062180">nil</span><br>
<span class="lineno"></span><span class="op" id="5062184">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="comment" id="5062187">//&nbsp;Form&nbsp;is&nbsp;a&nbsp;parsed&nbsp;multipart&nbsp;form.</span><br>
<span class="lineno"></span><span class="comment" id="5062223">//&nbsp;Its&nbsp;File&nbsp;parts&nbsp;are&nbsp;stored&nbsp;either&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk,</span><br>
<span class="lineno"></span><span class="comment" id="5062281">//&nbsp;and&nbsp;are&nbsp;accessible&nbsp;via&nbsp;the&nbsp;*FileHeader&#39;s&nbsp;Open&nbsp;method.</span><br>
<span class="lineno"></span><span class="comment" id="5062338">//&nbsp;Its&nbsp;Value&nbsp;parts&nbsp;are&nbsp;stored&nbsp;as&nbsp;strings.</span><br>
<span class="lineno"></span><span class="comment" id="5062380">//&nbsp;Both&nbsp;are&nbsp;keyed&nbsp;by&nbsp;field&nbsp;name.</span><br>
<span class="lineno">100</span><span class="keyword" id="5062413">type</span>&nbsp;<span class="ident" id="5062418">Form</span>&nbsp;<span class="keyword" id="5062423">struct</span>&nbsp;<span class="op" id="5062430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062433">Value</span>&nbsp;<span class="keyword" id="5062439">map</span><span class="op" id="5062442">[</span><span class="builtintype" id="5062443">string</span><span class="op" id="5062449">]</span><span class="op" id="5062450">[</span><span class="op" id="5062451">]</span><span class="builtintype" id="5062452">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062460">File</span>&nbsp;&nbsp;<span class="keyword" id="5062466">map</span><span class="op" id="5062469">[</span><span class="builtintype" id="5062470">string</span><span class="op" id="5062476">]</span><span class="op" id="5062477">[</span><span class="op" id="5062478">]</span><span class="op" id="5062479">*</span><span class="ident" id="5062480">FileHeader</span><br>
<span class="lineno"></span><span class="op" id="5062491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="5062494">//&nbsp;RemoveAll&nbsp;removes&nbsp;any&nbsp;temporary&nbsp;files&nbsp;associated&nbsp;with&nbsp;a&nbsp;Form.</span><br>
<span class="lineno"></span><span class="keyword" id="5062559">func</span>&nbsp;<span class="op" id="5062564">(</span><span class="ident" id="5062565">f</span>&nbsp;<span class="op" id="5062567">*</span><span class="ident" id="5062568">Form</span><span class="op" id="5062572">)</span>&nbsp;<span class="ident" id="5062574">RemoveAll</span><span class="op" id="5062583">(</span><span class="op" id="5062584">)</span>&nbsp;<span class="builtintype" id="5062586">error</span>&nbsp;<span class="op" id="5062592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062595">var</span>&nbsp;<span class="ident" id="5062599">err</span>&nbsp;<span class="builtintype" id="5062603">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062610">for</span>&nbsp;<span class="ident" id="5062614">_</span><span class="op" id="5062615">,</span>&nbsp;<span class="ident" id="5062617">fhs</span>&nbsp;<span class="op" id="5062621">:=</span>&nbsp;<span class="keyword" id="5062624">range</span>&nbsp;<span class="ident" id="5062630">f</span><span class="op" id="5062631">.</span><span class="ident" id="5062632">File</span>&nbsp;<span class="op" id="5062637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062641">for</span>&nbsp;<span class="ident" id="5062645">_</span><span class="op" id="5062646">,</span>&nbsp;<span class="ident" id="5062648">fh</span>&nbsp;<span class="op" id="5062651">:=</span>&nbsp;<span class="keyword" id="5062654">range</span>&nbsp;<span class="ident" id="5062660">fhs</span>&nbsp;<span class="op" id="5062664">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062669">if</span>&nbsp;<span class="ident" id="5062672">fh</span><span class="op" id="5062674">.</span><span class="ident" id="5062675">tmpfile</span>&nbsp;<span class="op" id="5062683">!=</span>&nbsp;<span class="string" id="5062686">&#34;&#34;</span>&nbsp;<span class="op" id="5062689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062695">e</span>&nbsp;<span class="op" id="5062697">:=</span>&nbsp;<span class="ident" id="5062700">os</span><span class="op" id="5062702">.</span><span class="ident" id="5062703">Remove</span><span class="op" id="5062709">(</span><span class="ident" id="5062710">fh</span><span class="op" id="5062712">.</span><span class="ident" id="5062713">tmpfile</span><span class="op" id="5062720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062726">if</span>&nbsp;<span class="ident" id="5062729">e</span>&nbsp;<span class="op" id="5062731">!=</span>&nbsp;<span class="ident" id="5062734">nil</span>&nbsp;<span class="op" id="5062738">&amp;&amp;</span>&nbsp;<span class="ident" id="5062741">err</span>&nbsp;<span class="op" id="5062745">==</span>&nbsp;<span class="ident" id="5062748">nil</span>&nbsp;<span class="op" id="5062752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062759">err</span>&nbsp;<span class="op" id="5062763">=</span>&nbsp;<span class="ident" id="5062765">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062771">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5062783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5062786">return</span>&nbsp;<span class="ident" id="5062793">err</span><br>
<span class="lineno"></span><span class="op" id="5062797">}</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span><span class="comment" id="5062800">//&nbsp;A&nbsp;FileHeader&nbsp;describes&nbsp;a&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;request.</span><br>
<span class="lineno"></span><span class="keyword" id="5062862">type</span>&nbsp;<span class="ident" id="5062867">FileHeader</span>&nbsp;<span class="keyword" id="5062878">struct</span>&nbsp;<span class="op" id="5062885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062888">Filename</span>&nbsp;<span class="builtintype" id="5062897">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062905">Header</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="5062914">textproto</span><span class="op" id="5062923">.</span><span class="ident" id="5062924">MIMEHeader</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062937">content</span>&nbsp;<span class="op" id="5062945">[</span><span class="op" id="5062946">]</span><span class="builtintype" id="5062947">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5062953">tmpfile</span>&nbsp;<span class="builtintype" id="5062961">string</span><br>
<span class="lineno"></span><span class="op" id="5062968">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span><span class="comment" id="5062971">//&nbsp;Open&nbsp;opens&nbsp;and&nbsp;returns&nbsp;the&nbsp;FileHeader&#39;s&nbsp;associated&nbsp;File.</span><br>
<span class="lineno"></span><span class="keyword" id="5063031">func</span>&nbsp;<span class="op" id="5063036">(</span><span class="ident" id="5063037">fh</span>&nbsp;<span class="op" id="5063040">*</span><span class="ident" id="5063041">FileHeader</span><span class="op" id="5063051">)</span>&nbsp;<span class="ident" id="5063053">Open</span><span class="op" id="5063057">(</span><span class="op" id="5063058">)</span>&nbsp;<span class="op" id="5063060">(</span><span class="ident" id="5063061">File</span><span class="op" id="5063065">,</span>&nbsp;<span class="builtintype" id="5063067">error</span><span class="op" id="5063072">)</span>&nbsp;<span class="op" id="5063074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063077">if</span>&nbsp;<span class="ident" id="5063080">b</span>&nbsp;<span class="op" id="5063082">:=</span>&nbsp;<span class="ident" id="5063085">fh</span><span class="op" id="5063087">.</span><span class="ident" id="5063088">content</span><span class="op" id="5063095">;</span>&nbsp;<span class="ident" id="5063097">b</span>&nbsp;<span class="op" id="5063099">!=</span>&nbsp;<span class="ident" id="5063102">nil</span>&nbsp;<span class="op" id="5063106">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063110">r</span>&nbsp;<span class="op" id="5063112">:=</span>&nbsp;<span class="ident" id="5063115">io</span><span class="op" id="5063117">.</span><span class="ident" id="5063118">NewSectionReader</span><span class="op" id="5063134">(</span><span class="ident" id="5063135">bytes</span><span class="op" id="5063140">.</span><span class="ident" id="5063141">NewReader</span><span class="op" id="5063150">(</span><span class="ident" id="5063151">b</span><span class="op" id="5063152">)</span><span class="op" id="5063153">,</span>&nbsp;<span class="num" id="5063155">0</span><span class="op" id="5063156">,</span>&nbsp;<span class="ident" id="5063158">int64</span><span class="op" id="5063163">(</span><span class="builtinfunc" id="5063164">len</span><span class="op" id="5063167">(</span><span class="ident" id="5063168">b</span><span class="op" id="5063169">)</span><span class="op" id="5063170">)</span><span class="op" id="5063171">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063175">return</span>&nbsp;<span class="ident" id="5063182">sectionReadCloser</span><span class="op" id="5063199">{</span><span class="ident" id="5063200">r</span><span class="op" id="5063201">}</span><span class="op" id="5063202">,</span>&nbsp;<span class="ident" id="5063204">nil</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063212">return</span>&nbsp;<span class="ident" id="5063219">os</span><span class="op" id="5063221">.</span><span class="ident" id="5063222">Open</span><span class="op" id="5063226">(</span><span class="ident" id="5063227">fh</span><span class="op" id="5063229">.</span><span class="ident" id="5063230">tmpfile</span><span class="op" id="5063237">)</span><br>
<span class="lineno"></span><span class="op" id="5063239">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063242">//&nbsp;File&nbsp;is&nbsp;an&nbsp;interface&nbsp;to&nbsp;access&nbsp;the&nbsp;file&nbsp;part&nbsp;of&nbsp;a&nbsp;multipart&nbsp;message.</span><br>
<span class="lineno">140</span><span class="comment" id="5063314">//&nbsp;Its&nbsp;contents&nbsp;may&nbsp;be&nbsp;either&nbsp;stored&nbsp;in&nbsp;memory&nbsp;or&nbsp;on&nbsp;disk.</span><br>
<span class="lineno"></span><span class="comment" id="5063373">//&nbsp;If&nbsp;stored&nbsp;on&nbsp;disk,&nbsp;the&nbsp;File&#39;s&nbsp;underlying&nbsp;concrete&nbsp;type&nbsp;will&nbsp;be&nbsp;an&nbsp;*os.File.</span><br>
<span class="lineno"></span><span class="keyword" id="5063452">type</span>&nbsp;<span class="ident" id="5063457">File</span>&nbsp;<span class="keyword" id="5063462">interface</span>&nbsp;<span class="op" id="5063472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063475">io</span><span class="op" id="5063477">.</span><span class="ident" id="5063478">Reader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063486">io</span><span class="op" id="5063488">.</span><span class="ident" id="5063489">ReaderAt</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063499">io</span><span class="op" id="5063501">.</span><span class="ident" id="5063502">Seeker</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5063510">io</span><span class="op" id="5063512">.</span><span class="ident" id="5063513">Closer</span><br>
<span class="lineno"></span><span class="op" id="5063520">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5063523">//&nbsp;helper&nbsp;types&nbsp;to&nbsp;turn&nbsp;a&nbsp;[]byte&nbsp;into&nbsp;a&nbsp;File</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="5063569">type</span>&nbsp;<span class="ident" id="5063574">sectionReadCloser</span>&nbsp;<span class="keyword" id="5063592">struct</span>&nbsp;<span class="op" id="5063599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5063602">*</span><span class="ident" id="5063603">io</span><span class="op" id="5063605">.</span><span class="ident" id="5063606">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="5063620">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">155</span><span class="keyword" id="5063623">func</span>&nbsp;<span class="op" id="5063628">(</span><span class="ident" id="5063629">rc</span>&nbsp;<span class="ident" id="5063632">sectionReadCloser</span><span class="op" id="5063649">)</span>&nbsp;<span class="ident" id="5063651">Close</span><span class="op" id="5063656">(</span><span class="op" id="5063657">)</span>&nbsp;<span class="builtintype" id="5063659">error</span>&nbsp;<span class="op" id="5063665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5063668">return</span>&nbsp;<span class="ident" id="5063675">nil</span><br>
<span class="lineno"></span><span class="op" id="5063679">}</span>
</div>
</body>
</html>
