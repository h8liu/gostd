<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/macho</h2>
<ul>
<li><a href="/gostd/debug/macho/fat.go.html">fat.go</a></li>
<li><a href="/gostd/debug/macho/file.go.html">file.go</a></li>
<li><a href="/gostd/debug/macho/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/debug/macho/macho.go.html">macho.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4328712">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4328768">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4328822">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4328873">//&nbsp;Package&nbsp;macho&nbsp;implements&nbsp;access&nbsp;to&nbsp;Mach-O&nbsp;object&nbsp;files.</span><br>
<span class="lineno"></span><span class="keyword" id="4328932">package</span>&nbsp;<span class="ident" id="4328940">macho</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4328947">//&nbsp;High&nbsp;level&nbsp;access&nbsp;to&nbsp;low&nbsp;level&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="4328999">import</span>&nbsp;<span class="op" id="4329006">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329009">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329018">&#34;debug/dwarf&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329033">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329052">&#34;fmt&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329059">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="4329065">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="4329070">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329073">//&nbsp;A&nbsp;File&nbsp;represents&nbsp;an&nbsp;open&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno">20</span><span class="keyword" id="4329115">type</span>&nbsp;<span class="ident" id="4329120">File</span>&nbsp;<span class="keyword" id="4329125">struct</span>&nbsp;<span class="op" id="4329132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329135">FileHeader</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329147">ByteOrder</span>&nbsp;<span class="ident" id="4329157">binary</span><span class="op" id="4329163">.</span><span class="ident" id="4329164">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329175">Loads</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4329185">[</span><span class="op" id="4329186">]</span><span class="ident" id="4329187">Load</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329193">Sections</span>&nbsp;&nbsp;<span class="op" id="4329203">[</span><span class="op" id="4329204">]</span><span class="op" id="4329205">*</span><span class="ident" id="4329206">Section</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329216">Symtab</span>&nbsp;&nbsp;&nbsp;<span class="op" id="4329225">*</span><span class="ident" id="4329226">Symtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329234">Dysymtab</span>&nbsp;<span class="op" id="4329243">*</span><span class="ident" id="4329244">Dysymtab</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329255">closer</span>&nbsp;<span class="ident" id="4329262">io</span><span class="op" id="4329264">.</span><span class="ident" id="4329265">Closer</span><br>
<span class="lineno">30</span><span class="op" id="4329272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329275">//&nbsp;A&nbsp;Load&nbsp;represents&nbsp;any&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4329321">type</span>&nbsp;<span class="ident" id="4329326">Load</span>&nbsp;<span class="keyword" id="4329331">interface</span>&nbsp;<span class="op" id="4329341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329344">Raw</span><span class="op" id="4329347">(</span><span class="op" id="4329348">)</span>&nbsp;<span class="op" id="4329350">[</span><span class="op" id="4329351">]</span><span class="builtintype" id="4329352">byte</span><br>
<span class="lineno">35</span><span class="op" id="4329357">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329360">//&nbsp;A&nbsp;LoadBytes&nbsp;is&nbsp;the&nbsp;uninterpreted&nbsp;bytes&nbsp;of&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4329428">type</span>&nbsp;<span class="ident" id="4329433">LoadBytes</span>&nbsp;<span class="op" id="4329443">[</span><span class="op" id="4329444">]</span><span class="builtintype" id="4329445">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="4329451">func</span>&nbsp;<span class="op" id="4329456">(</span><span class="ident" id="4329457">b</span>&nbsp;<span class="ident" id="4329459">LoadBytes</span><span class="op" id="4329468">)</span>&nbsp;<span class="ident" id="4329470">Raw</span><span class="op" id="4329473">(</span><span class="op" id="4329474">)</span>&nbsp;<span class="op" id="4329476">[</span><span class="op" id="4329477">]</span><span class="builtintype" id="4329478">byte</span>&nbsp;<span class="op" id="4329483">{</span>&nbsp;<span class="keyword" id="4329485">return</span>&nbsp;<span class="ident" id="4329492">b</span>&nbsp;<span class="op" id="4329494">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329497">//&nbsp;A&nbsp;SegmentHeader&nbsp;is&nbsp;the&nbsp;header&nbsp;for&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4329582">type</span>&nbsp;<span class="ident" id="4329587">SegmentHeader</span>&nbsp;<span class="keyword" id="4329601">struct</span>&nbsp;<span class="op" id="4329608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329611">Cmd</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4329619">LoadCmd</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329628">Len</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4329636">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329644">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4329652">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329660">Addr</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4329668">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329676">Memsz</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4329684">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329692">Offset</span>&nbsp;&nbsp;<span class="ident" id="4329700">uint64</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329708">Filesz</span>&nbsp;&nbsp;<span class="ident" id="4329716">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329724">Maxprot</span>&nbsp;<span class="builtintype" id="4329732">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329740">Prot</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4329748">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329756">Nsect</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4329764">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329772">Flag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4329780">uint32</span><br>
<span class="lineno">55</span><span class="op" id="4329787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4329790">//&nbsp;A&nbsp;Segment&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;32-bit&nbsp;or&nbsp;64-bit&nbsp;load&nbsp;segment&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4329862">type</span>&nbsp;<span class="ident" id="4329867">Segment</span>&nbsp;<span class="keyword" id="4329875">struct</span>&nbsp;<span class="op" id="4329882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329885">LoadBytes</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4329896">SegmentHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4329912">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4329950">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4329990">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330025">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330073">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330123">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330147">io</span><span class="op" id="4330149">.</span><span class="ident" id="4330150">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330160">sr</span>&nbsp;<span class="op" id="4330163">*</span><span class="ident" id="4330164">io</span><span class="op" id="4330166">.</span><span class="ident" id="4330167">SectionReader</span><br>
<span class="lineno">70</span><span class="op" id="4330181">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330184">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="4330239">func</span>&nbsp;<span class="op" id="4330244">(</span><span class="ident" id="4330245">s</span>&nbsp;<span class="op" id="4330247">*</span><span class="ident" id="4330248">Segment</span><span class="op" id="4330255">)</span>&nbsp;<span class="ident" id="4330257">Data</span><span class="op" id="4330261">(</span><span class="op" id="4330262">)</span>&nbsp;<span class="op" id="4330264">(</span><span class="op" id="4330265">[</span><span class="op" id="4330266">]</span><span class="builtintype" id="4330267">byte</span><span class="op" id="4330271">,</span>&nbsp;<span class="builtintype" id="4330273">error</span><span class="op" id="4330278">)</span>&nbsp;<span class="op" id="4330280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330283">dat</span>&nbsp;<span class="op" id="4330287">:=</span>&nbsp;<span class="builtinfunc" id="4330290">make</span><span class="op" id="4330294">(</span><span class="op" id="4330295">[</span><span class="op" id="4330296">]</span><span class="builtintype" id="4330297">byte</span><span class="op" id="4330301">,</span>&nbsp;<span class="ident" id="4330303">s</span><span class="op" id="4330304">.</span><span class="ident" id="4330305">sr</span><span class="op" id="4330307">.</span><span class="ident" id="4330308">Size</span><span class="op" id="4330312">(</span><span class="op" id="4330313">)</span><span class="op" id="4330314">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330317">n</span><span class="op" id="4330318">,</span>&nbsp;<span class="ident" id="4330320">err</span>&nbsp;<span class="op" id="4330324">:=</span>&nbsp;<span class="ident" id="4330327">s</span><span class="op" id="4330328">.</span><span class="ident" id="4330329">sr</span><span class="op" id="4330331">.</span><span class="ident" id="4330332">ReadAt</span><span class="op" id="4330338">(</span><span class="ident" id="4330339">dat</span><span class="op" id="4330342">,</span>&nbsp;<span class="num" id="4330344">0</span><span class="op" id="4330345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4330348">if</span>&nbsp;<span class="ident" id="4330351">n</span>&nbsp;<span class="op" id="4330353">==</span>&nbsp;<span class="builtinfunc" id="4330356">len</span><span class="op" id="4330359">(</span><span class="ident" id="4330360">dat</span><span class="op" id="4330363">)</span>&nbsp;<span class="op" id="4330365">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330369">err</span>&nbsp;<span class="op" id="4330373">=</span>&nbsp;<span class="ident" id="4330375">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4330380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4330383">return</span>&nbsp;<span class="ident" id="4330390">dat</span><span class="op" id="4330393">[</span><span class="num" id="4330394">0</span><span class="op" id="4330395">:</span><span class="ident" id="4330396">n</span><span class="op" id="4330397">]</span><span class="op" id="4330398">,</span>&nbsp;<span class="ident" id="4330400">err</span><br>
<span class="lineno">80</span><span class="op" id="4330404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4330407">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="4330461">func</span>&nbsp;<span class="op" id="4330466">(</span><span class="ident" id="4330467">s</span>&nbsp;<span class="op" id="4330469">*</span><span class="ident" id="4330470">Segment</span><span class="op" id="4330477">)</span>&nbsp;<span class="ident" id="4330479">Open</span><span class="op" id="4330483">(</span><span class="op" id="4330484">)</span>&nbsp;<span class="ident" id="4330486">io</span><span class="op" id="4330488">.</span><span class="ident" id="4330489">ReadSeeker</span>&nbsp;<span class="op" id="4330500">{</span>&nbsp;<span class="keyword" id="4330502">return</span>&nbsp;<span class="ident" id="4330509">io</span><span class="op" id="4330511">.</span><span class="ident" id="4330512">NewSectionReader</span><span class="op" id="4330528">(</span><span class="ident" id="4330529">s</span><span class="op" id="4330530">.</span><span class="ident" id="4330531">sr</span><span class="op" id="4330533">,</span>&nbsp;<span class="num" id="4330535">0</span><span class="op" id="4330536">,</span>&nbsp;<span class="num" id="4330538">1</span><span class="op" id="4330539">&lt;&lt;</span><span class="num" id="4330541">63</span><span class="op" id="4330543">-</span><span class="num" id="4330544">1</span><span class="op" id="4330545">)</span>&nbsp;<span class="op" id="4330547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="4330550">type</span>&nbsp;<span class="ident" id="4330555">SectionHeader</span>&nbsp;<span class="keyword" id="4330569">struct</span>&nbsp;<span class="op" id="4330576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330579">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4330586">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330594">Seg</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4330601">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330609">Addr</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4330616">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330624">Size</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4330631">uint64</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330639">Offset</span>&nbsp;<span class="builtintype" id="4330646">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330654">Align</span>&nbsp;&nbsp;<span class="builtintype" id="4330661">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330669">Reloff</span>&nbsp;<span class="builtintype" id="4330676">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330684">Nreloc</span>&nbsp;<span class="builtintype" id="4330691">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330699">Flags</span>&nbsp;&nbsp;<span class="builtintype" id="4330706">uint32</span><br>
<span class="lineno">95</span><span class="op" id="4330713">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4330716">type</span>&nbsp;<span class="ident" id="4330721">Section</span>&nbsp;<span class="keyword" id="4330729">struct</span>&nbsp;<span class="op" id="4330736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330739">SectionHeader</span><br>
<span class="lineno"></span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330755">//&nbsp;Embed&nbsp;ReaderAt&nbsp;for&nbsp;ReadAt&nbsp;method.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330793">//&nbsp;Do&nbsp;not&nbsp;embed&nbsp;SectionReader&nbsp;directly</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330833">//&nbsp;to&nbsp;avoid&nbsp;having&nbsp;Read&nbsp;and&nbsp;Seek.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330868">//&nbsp;If&nbsp;a&nbsp;client&nbsp;wants&nbsp;Read&nbsp;and&nbsp;Seek&nbsp;it&nbsp;must&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330916">//&nbsp;Open()&nbsp;to&nbsp;avoid&nbsp;fighting&nbsp;over&nbsp;the&nbsp;seek&nbsp;offset</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4330966">//&nbsp;with&nbsp;other&nbsp;clients.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4330990">io</span><span class="op" id="4330992">.</span><span class="ident" id="4330993">ReaderAt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331003">sr</span>&nbsp;<span class="op" id="4331006">*</span><span class="ident" id="4331007">io</span><span class="op" id="4331009">.</span><span class="ident" id="4331010">SectionReader</span><br>
<span class="lineno"></span><span class="op" id="4331024">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="4331027">//&nbsp;Data&nbsp;reads&nbsp;and&nbsp;returns&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="4331089">func</span>&nbsp;<span class="op" id="4331094">(</span><span class="ident" id="4331095">s</span>&nbsp;<span class="op" id="4331097">*</span><span class="ident" id="4331098">Section</span><span class="op" id="4331105">)</span>&nbsp;<span class="ident" id="4331107">Data</span><span class="op" id="4331111">(</span><span class="op" id="4331112">)</span>&nbsp;<span class="op" id="4331114">(</span><span class="op" id="4331115">[</span><span class="op" id="4331116">]</span><span class="builtintype" id="4331117">byte</span><span class="op" id="4331121">,</span>&nbsp;<span class="builtintype" id="4331123">error</span><span class="op" id="4331128">)</span>&nbsp;<span class="op" id="4331130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331133">dat</span>&nbsp;<span class="op" id="4331137">:=</span>&nbsp;<span class="builtinfunc" id="4331140">make</span><span class="op" id="4331144">(</span><span class="op" id="4331145">[</span><span class="op" id="4331146">]</span><span class="builtintype" id="4331147">byte</span><span class="op" id="4331151">,</span>&nbsp;<span class="ident" id="4331153">s</span><span class="op" id="4331154">.</span><span class="ident" id="4331155">sr</span><span class="op" id="4331157">.</span><span class="ident" id="4331158">Size</span><span class="op" id="4331162">(</span><span class="op" id="4331163">)</span><span class="op" id="4331164">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331167">n</span><span class="op" id="4331168">,</span>&nbsp;<span class="ident" id="4331170">err</span>&nbsp;<span class="op" id="4331174">:=</span>&nbsp;<span class="ident" id="4331177">s</span><span class="op" id="4331178">.</span><span class="ident" id="4331179">sr</span><span class="op" id="4331181">.</span><span class="ident" id="4331182">ReadAt</span><span class="op" id="4331188">(</span><span class="ident" id="4331189">dat</span><span class="op" id="4331192">,</span>&nbsp;<span class="num" id="4331194">0</span><span class="op" id="4331195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331198">if</span>&nbsp;<span class="ident" id="4331201">n</span>&nbsp;<span class="op" id="4331203">==</span>&nbsp;<span class="builtinfunc" id="4331206">len</span><span class="op" id="4331209">(</span><span class="ident" id="4331210">dat</span><span class="op" id="4331213">)</span>&nbsp;<span class="op" id="4331215">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331219">err</span>&nbsp;<span class="op" id="4331223">=</span>&nbsp;<span class="ident" id="4331225">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4331230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4331233">return</span>&nbsp;<span class="ident" id="4331240">dat</span><span class="op" id="4331243">[</span><span class="num" id="4331244">0</span><span class="op" id="4331245">:</span><span class="ident" id="4331246">n</span><span class="op" id="4331247">]</span><span class="op" id="4331248">,</span>&nbsp;<span class="ident" id="4331250">err</span><br>
<span class="lineno"></span><span class="op" id="4331254">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">120</span><span class="comment" id="4331257">//&nbsp;Open&nbsp;returns&nbsp;a&nbsp;new&nbsp;ReadSeeker&nbsp;reading&nbsp;the&nbsp;Mach-O&nbsp;section.</span><br>
<span class="lineno"></span><span class="keyword" id="4331318">func</span>&nbsp;<span class="op" id="4331323">(</span><span class="ident" id="4331324">s</span>&nbsp;<span class="op" id="4331326">*</span><span class="ident" id="4331327">Section</span><span class="op" id="4331334">)</span>&nbsp;<span class="ident" id="4331336">Open</span><span class="op" id="4331340">(</span><span class="op" id="4331341">)</span>&nbsp;<span class="ident" id="4331343">io</span><span class="op" id="4331345">.</span><span class="ident" id="4331346">ReadSeeker</span>&nbsp;<span class="op" id="4331357">{</span>&nbsp;<span class="keyword" id="4331359">return</span>&nbsp;<span class="ident" id="4331366">io</span><span class="op" id="4331368">.</span><span class="ident" id="4331369">NewSectionReader</span><span class="op" id="4331385">(</span><span class="ident" id="4331386">s</span><span class="op" id="4331387">.</span><span class="ident" id="4331388">sr</span><span class="op" id="4331390">,</span>&nbsp;<span class="num" id="4331392">0</span><span class="op" id="4331393">,</span>&nbsp;<span class="num" id="4331395">1</span><span class="op" id="4331396">&lt;&lt;</span><span class="num" id="4331398">63</span><span class="op" id="4331400">-</span><span class="num" id="4331401">1</span><span class="op" id="4331402">)</span>&nbsp;<span class="op" id="4331404">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4331407">//&nbsp;A&nbsp;Dylib&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;load&nbsp;dynamic&nbsp;library&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4331468">type</span>&nbsp;<span class="ident" id="4331473">Dylib</span>&nbsp;<span class="keyword" id="4331479">struct</span>&nbsp;<span class="op" id="4331486">{</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331489">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331500">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331515">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331523">Time</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4331538">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331546">CurrentVersion</span>&nbsp;<span class="builtintype" id="4331561">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331569">CompatVersion</span>&nbsp;&nbsp;<span class="builtintype" id="4331584">uint32</span><br>
<span class="lineno">130</span><span class="op" id="4331591">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4331594">//&nbsp;A&nbsp;Symtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno"></span><span class="keyword" id="4331648">type</span>&nbsp;<span class="ident" id="4331653">Symtab</span>&nbsp;<span class="keyword" id="4331660">struct</span>&nbsp;<span class="op" id="4331667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331670">LoadBytes</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331681">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331692">Syms</span>&nbsp;<span class="op" id="4331697">[</span><span class="op" id="4331698">]</span><span class="ident" id="4331699">Symbol</span><br>
<span class="lineno"></span><span class="op" id="4331706">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4331709">//&nbsp;A&nbsp;Dysymtab&nbsp;represents&nbsp;a&nbsp;Mach-O&nbsp;dynamic&nbsp;symbol&nbsp;table&nbsp;command.</span><br>
<span class="lineno">140</span><span class="keyword" id="4331773">type</span>&nbsp;<span class="ident" id="4331778">Dysymtab</span>&nbsp;<span class="keyword" id="4331787">struct</span>&nbsp;<span class="op" id="4331794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331797">LoadBytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331808">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4331821">IndirectSyms</span>&nbsp;<span class="op" id="4331834">[</span><span class="op" id="4331835">]</span><span class="builtintype" id="4331836">uint32</span>&nbsp;<span class="comment" id="4331843">//&nbsp;indices&nbsp;into&nbsp;Symtab.Syms</span><br>
<span class="lineno"></span><span class="op" id="4331871">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="4331874">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Mach-O&nbsp;reader<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno">150</span><span class="comment" id="4331899">//&nbsp;FormatError&nbsp;is&nbsp;returned&nbsp;by&nbsp;some&nbsp;operations&nbsp;if&nbsp;the&nbsp;data&nbsp;does</span><br>
<span class="lineno"></span><span class="comment" id="4331962">//&nbsp;not&nbsp;have&nbsp;the&nbsp;correct&nbsp;format&nbsp;for&nbsp;an&nbsp;object&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4332013">type</span>&nbsp;<span class="ident" id="4332018">FormatError</span>&nbsp;<span class="keyword" id="4332030">struct</span>&nbsp;<span class="op" id="4332037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332040">off</span>&nbsp;<span class="ident" id="4332044">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332051">msg</span>&nbsp;<span class="builtintype" id="4332055">string</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332063">val</span>&nbsp;<span class="keyword" id="4332067">interface</span><span class="op" id="4332076">{</span><span class="op" id="4332077">}</span><br>
<span class="lineno"></span><span class="op" id="4332079">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4332082">func</span>&nbsp;<span class="op" id="4332087">(</span><span class="ident" id="4332088">e</span>&nbsp;<span class="op" id="4332090">*</span><span class="ident" id="4332091">FormatError</span><span class="op" id="4332102">)</span>&nbsp;<span class="ident" id="4332104">Error</span><span class="op" id="4332109">(</span><span class="op" id="4332110">)</span>&nbsp;<span class="builtintype" id="4332112">string</span>&nbsp;<span class="op" id="4332119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332122">msg</span>&nbsp;<span class="op" id="4332126">:=</span>&nbsp;<span class="ident" id="4332129">e</span><span class="op" id="4332130">.</span><span class="ident" id="4332131">msg</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332136">if</span>&nbsp;<span class="ident" id="4332139">e</span><span class="op" id="4332140">.</span><span class="ident" id="4332141">val</span>&nbsp;<span class="op" id="4332145">!=</span>&nbsp;<span class="ident" id="4332148">nil</span>&nbsp;<span class="op" id="4332152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332156">msg</span>&nbsp;<span class="op" id="4332160">+=</span>&nbsp;<span class="ident" id="4332163">fmt</span><span class="op" id="4332166">.</span><span class="ident" id="4332167">Sprintf</span><span class="op" id="4332174">(</span><span class="string" id="4332175">&#34;&nbsp;&#39;%v&#39;&#34;</span><span class="op" id="4332182">,</span>&nbsp;<span class="ident" id="4332184">e</span><span class="op" id="4332185">.</span><span class="ident" id="4332186">val</span><span class="op" id="4332189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332195">msg</span>&nbsp;<span class="op" id="4332199">+=</span>&nbsp;<span class="ident" id="4332202">fmt</span><span class="op" id="4332205">.</span><span class="ident" id="4332206">Sprintf</span><span class="op" id="4332213">(</span><span class="string" id="4332214">&#34;&nbsp;in&nbsp;record&nbsp;at&nbsp;byte&nbsp;%#x&#34;</span><span class="op" id="4332238">,</span>&nbsp;<span class="ident" id="4332240">e</span><span class="op" id="4332241">.</span><span class="ident" id="4332242">off</span><span class="op" id="4332245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332248">return</span>&nbsp;<span class="ident" id="4332255">msg</span><br>
<span class="lineno">165</span><span class="op" id="4332259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332262">//&nbsp;Open&nbsp;opens&nbsp;the&nbsp;named&nbsp;file&nbsp;using&nbsp;os.Open&nbsp;and&nbsp;prepares&nbsp;it&nbsp;for&nbsp;use&nbsp;as&nbsp;a&nbsp;Mach-O&nbsp;binary.</span><br>
<span class="lineno"></span><span class="keyword" id="4332349">func</span>&nbsp;<span class="ident" id="4332354">Open</span><span class="op" id="4332358">(</span><span class="ident" id="4332359">name</span>&nbsp;<span class="builtintype" id="4332364">string</span><span class="op" id="4332370">)</span>&nbsp;<span class="op" id="4332372">(</span><span class="op" id="4332373">*</span><span class="ident" id="4332374">File</span><span class="op" id="4332378">,</span>&nbsp;<span class="builtintype" id="4332380">error</span><span class="op" id="4332385">)</span>&nbsp;<span class="op" id="4332387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332390">f</span><span class="op" id="4332391">,</span>&nbsp;<span class="ident" id="4332393">err</span>&nbsp;<span class="op" id="4332397">:=</span>&nbsp;<span class="ident" id="4332400">os</span><span class="op" id="4332402">.</span><span class="ident" id="4332403">Open</span><span class="op" id="4332407">(</span><span class="ident" id="4332408">name</span><span class="op" id="4332412">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332415">if</span>&nbsp;<span class="ident" id="4332418">err</span>&nbsp;<span class="op" id="4332422">!=</span>&nbsp;<span class="ident" id="4332425">nil</span>&nbsp;<span class="op" id="4332429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332433">return</span>&nbsp;<span class="ident" id="4332440">nil</span><span class="op" id="4332443">,</span>&nbsp;<span class="ident" id="4332445">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332450">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332453">ff</span><span class="op" id="4332455">,</span>&nbsp;<span class="ident" id="4332457">err</span>&nbsp;<span class="op" id="4332461">:=</span>&nbsp;<span class="ident" id="4332464">NewFile</span><span class="op" id="4332471">(</span><span class="ident" id="4332472">f</span><span class="op" id="4332473">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332476">if</span>&nbsp;<span class="ident" id="4332479">err</span>&nbsp;<span class="op" id="4332483">!=</span>&nbsp;<span class="ident" id="4332486">nil</span>&nbsp;<span class="op" id="4332490">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332494">f</span><span class="op" id="4332495">.</span><span class="ident" id="4332496">Close</span><span class="op" id="4332501">(</span><span class="op" id="4332502">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332506">return</span>&nbsp;<span class="ident" id="4332513">nil</span><span class="op" id="4332516">,</span>&nbsp;<span class="ident" id="4332518">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332523">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332526">ff</span><span class="op" id="4332528">.</span><span class="ident" id="4332529">closer</span>&nbsp;<span class="op" id="4332536">=</span>&nbsp;<span class="ident" id="4332538">f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332541">return</span>&nbsp;<span class="ident" id="4332548">ff</span><span class="op" id="4332550">,</span>&nbsp;<span class="ident" id="4332552">nil</span><br>
<span class="lineno">180</span><span class="op" id="4332556">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332559">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;File.</span><br>
<span class="lineno"></span><span class="comment" id="4332585">//&nbsp;If&nbsp;the&nbsp;File&nbsp;was&nbsp;created&nbsp;using&nbsp;NewFile&nbsp;directly&nbsp;instead&nbsp;of&nbsp;Open,</span><br>
<span class="lineno"></span><span class="comment" id="4332652">//&nbsp;Close&nbsp;has&nbsp;no&nbsp;effect.</span><br>
<span class="lineno">185</span><span class="keyword" id="4332676">func</span>&nbsp;<span class="op" id="4332681">(</span><span class="ident" id="4332682">f</span>&nbsp;<span class="op" id="4332684">*</span><span class="ident" id="4332685">File</span><span class="op" id="4332689">)</span>&nbsp;<span class="ident" id="4332691">Close</span><span class="op" id="4332696">(</span><span class="op" id="4332697">)</span>&nbsp;<span class="builtintype" id="4332699">error</span>&nbsp;<span class="op" id="4332705">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332708">var</span>&nbsp;<span class="ident" id="4332712">err</span>&nbsp;<span class="builtintype" id="4332716">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332723">if</span>&nbsp;<span class="ident" id="4332726">f</span><span class="op" id="4332727">.</span><span class="ident" id="4332728">closer</span>&nbsp;<span class="op" id="4332735">!=</span>&nbsp;<span class="ident" id="4332738">nil</span>&nbsp;<span class="op" id="4332742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332746">err</span>&nbsp;<span class="op" id="4332750">=</span>&nbsp;<span class="ident" id="4332752">f</span><span class="op" id="4332753">.</span><span class="ident" id="4332754">closer</span><span class="op" id="4332760">.</span><span class="ident" id="4332761">Close</span><span class="op" id="4332766">(</span><span class="op" id="4332767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4332771">f</span><span class="op" id="4332772">.</span><span class="ident" id="4332773">closer</span>&nbsp;<span class="op" id="4332780">=</span>&nbsp;<span class="ident" id="4332782">nil</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4332787">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4332790">return</span>&nbsp;<span class="ident" id="4332797">err</span><br>
<span class="lineno"></span><span class="op" id="4332801">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4332804">//&nbsp;NewFile&nbsp;creates&nbsp;a&nbsp;new&nbsp;File&nbsp;for&nbsp;accessing&nbsp;a&nbsp;Mach-O&nbsp;binary&nbsp;in&nbsp;an&nbsp;underlying&nbsp;reader.</span><br>
<span class="lineno">195</span><span class="comment" id="4332889">//&nbsp;The&nbsp;Mach-O&nbsp;binary&nbsp;is&nbsp;expected&nbsp;to&nbsp;start&nbsp;at&nbsp;position&nbsp;0&nbsp;in&nbsp;the&nbsp;ReaderAt.</span><br>
<span class="lineno"></span><span class="keyword" id="4332962">func</span>&nbsp;<span class="ident" id="4332967">NewFile</span><span class="op" id="4332974">(</span><span class="ident" id="4332975">r</span>&nbsp;<span class="ident" id="4332977">io</span><span class="op" id="4332979">.</span><span class="ident" id="4332980">ReaderAt</span><span class="op" id="4332988">)</span>&nbsp;<span class="op" id="4332990">(</span><span class="op" id="4332991">*</span><span class="ident" id="4332992">File</span><span class="op" id="4332996">,</span>&nbsp;<span class="builtintype" id="4332998">error</span><span class="op" id="4333003">)</span>&nbsp;<span class="op" id="4333005">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333008">f</span>&nbsp;<span class="op" id="4333010">:=</span>&nbsp;<span class="builtinfunc" id="4333013">new</span><span class="op" id="4333016">(</span><span class="ident" id="4333017">File</span><span class="op" id="4333021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333024">sr</span>&nbsp;<span class="op" id="4333027">:=</span>&nbsp;<span class="ident" id="4333030">io</span><span class="op" id="4333032">.</span><span class="ident" id="4333033">NewSectionReader</span><span class="op" id="4333049">(</span><span class="ident" id="4333050">r</span><span class="op" id="4333051">,</span>&nbsp;<span class="num" id="4333053">0</span><span class="op" id="4333054">,</span>&nbsp;<span class="num" id="4333056">1</span><span class="op" id="4333057">&lt;&lt;</span><span class="num" id="4333059">63</span><span class="op" id="4333061">-</span><span class="num" id="4333062">1</span><span class="op" id="4333063">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4333067">//&nbsp;Read&nbsp;and&nbsp;decode&nbsp;Mach&nbsp;magic&nbsp;to&nbsp;determine&nbsp;byte&nbsp;order,&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4333129">//&nbsp;Magic32&nbsp;and&nbsp;Magic64&nbsp;differ&nbsp;only&nbsp;in&nbsp;the&nbsp;bottom&nbsp;bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333184">var</span>&nbsp;<span class="ident" id="4333188">ident</span>&nbsp;<span class="op" id="4333194">[</span><span class="num" id="4333195">4</span><span class="op" id="4333196">]</span><span class="builtintype" id="4333197">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333203">if</span>&nbsp;<span class="ident" id="4333206">_</span><span class="op" id="4333207">,</span>&nbsp;<span class="ident" id="4333209">err</span>&nbsp;<span class="op" id="4333213">:=</span>&nbsp;<span class="ident" id="4333216">r</span><span class="op" id="4333217">.</span><span class="ident" id="4333218">ReadAt</span><span class="op" id="4333224">(</span><span class="ident" id="4333225">ident</span><span class="op" id="4333230">[</span><span class="num" id="4333231">0</span><span class="op" id="4333232">:</span><span class="op" id="4333233">]</span><span class="op" id="4333234">,</span>&nbsp;<span class="num" id="4333236">0</span><span class="op" id="4333237">)</span><span class="op" id="4333238">;</span>&nbsp;<span class="ident" id="4333240">err</span>&nbsp;<span class="op" id="4333244">!=</span>&nbsp;<span class="ident" id="4333247">nil</span>&nbsp;<span class="op" id="4333251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333255">return</span>&nbsp;<span class="ident" id="4333262">nil</span><span class="op" id="4333265">,</span>&nbsp;<span class="ident" id="4333267">err</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333272">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333275">be</span>&nbsp;<span class="op" id="4333278">:=</span>&nbsp;<span class="ident" id="4333281">binary</span><span class="op" id="4333287">.</span><span class="ident" id="4333288">BigEndian</span><span class="op" id="4333297">.</span><span class="ident" id="4333298">Uint32</span><span class="op" id="4333304">(</span><span class="ident" id="4333305">ident</span><span class="op" id="4333310">[</span><span class="num" id="4333311">0</span><span class="op" id="4333312">:</span><span class="op" id="4333313">]</span><span class="op" id="4333314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333317">le</span>&nbsp;<span class="op" id="4333320">:=</span>&nbsp;<span class="ident" id="4333323">binary</span><span class="op" id="4333329">.</span><span class="ident" id="4333330">LittleEndian</span><span class="op" id="4333342">.</span><span class="ident" id="4333343">Uint32</span><span class="op" id="4333349">(</span><span class="ident" id="4333350">ident</span><span class="op" id="4333355">[</span><span class="num" id="4333356">0</span><span class="op" id="4333357">:</span><span class="op" id="4333358">]</span><span class="op" id="4333359">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333362">switch</span>&nbsp;<span class="ident" id="4333369">Magic32</span>&nbsp;<span class="op" id="4333377">&amp;^</span>&nbsp;<span class="num" id="4333380">1</span>&nbsp;<span class="op" id="4333382">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333385">case</span>&nbsp;<span class="ident" id="4333390">be</span>&nbsp;<span class="op" id="4333393">&amp;^</span>&nbsp;<span class="num" id="4333396">1</span><span class="op" id="4333397">:</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333401">f</span><span class="op" id="4333402">.</span><span class="ident" id="4333403">ByteOrder</span>&nbsp;<span class="op" id="4333413">=</span>&nbsp;<span class="ident" id="4333415">binary</span><span class="op" id="4333421">.</span><span class="ident" id="4333422">BigEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333434">f</span><span class="op" id="4333435">.</span><span class="ident" id="4333436">Magic</span>&nbsp;<span class="op" id="4333442">=</span>&nbsp;<span class="ident" id="4333444">be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333448">case</span>&nbsp;<span class="ident" id="4333453">le</span>&nbsp;<span class="op" id="4333456">&amp;^</span>&nbsp;<span class="num" id="4333459">1</span><span class="op" id="4333460">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333464">f</span><span class="op" id="4333465">.</span><span class="ident" id="4333466">ByteOrder</span>&nbsp;<span class="op" id="4333476">=</span>&nbsp;<span class="ident" id="4333478">binary</span><span class="op" id="4333484">.</span><span class="ident" id="4333485">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333500">f</span><span class="op" id="4333501">.</span><span class="ident" id="4333502">Magic</span>&nbsp;<span class="op" id="4333508">=</span>&nbsp;<span class="ident" id="4333510">le</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333514">default</span><span class="op" id="4333521">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333525">return</span>&nbsp;<span class="ident" id="4333532">nil</span><span class="op" id="4333535">,</span>&nbsp;<span class="op" id="4333537">&amp;</span><span class="ident" id="4333538">FormatError</span><span class="op" id="4333549">{</span><span class="num" id="4333550">0</span><span class="op" id="4333551">,</span>&nbsp;<span class="string" id="4333553">&#34;invalid&nbsp;magic&nbsp;number&#34;</span><span class="op" id="4333575">,</span>&nbsp;<span class="ident" id="4333577">nil</span><span class="op" id="4333580">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4333587">//&nbsp;Read&nbsp;entire&nbsp;file&nbsp;header.</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333616">if</span>&nbsp;<span class="ident" id="4333619">err</span>&nbsp;<span class="op" id="4333623">:=</span>&nbsp;<span class="ident" id="4333626">binary</span><span class="op" id="4333632">.</span><span class="ident" id="4333633">Read</span><span class="op" id="4333637">(</span><span class="ident" id="4333638">sr</span><span class="op" id="4333640">,</span>&nbsp;<span class="ident" id="4333642">f</span><span class="op" id="4333643">.</span><span class="ident" id="4333644">ByteOrder</span><span class="op" id="4333653">,</span>&nbsp;<span class="op" id="4333655">&amp;</span><span class="ident" id="4333656">f</span><span class="op" id="4333657">.</span><span class="ident" id="4333658">FileHeader</span><span class="op" id="4333668">)</span><span class="op" id="4333669">;</span>&nbsp;<span class="ident" id="4333671">err</span>&nbsp;<span class="op" id="4333675">!=</span>&nbsp;<span class="ident" id="4333678">nil</span>&nbsp;<span class="op" id="4333682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333686">return</span>&nbsp;<span class="ident" id="4333693">nil</span><span class="op" id="4333696">,</span>&nbsp;<span class="ident" id="4333698">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333703">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4333707">//&nbsp;Then&nbsp;load&nbsp;commands.</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333731">offset</span>&nbsp;<span class="op" id="4333738">:=</span>&nbsp;<span class="ident" id="4333741">int64</span><span class="op" id="4333746">(</span><span class="ident" id="4333747">fileHeaderSize32</span><span class="op" id="4333763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333766">if</span>&nbsp;<span class="ident" id="4333769">f</span><span class="op" id="4333770">.</span><span class="ident" id="4333771">Magic</span>&nbsp;<span class="op" id="4333777">==</span>&nbsp;<span class="ident" id="4333780">Magic64</span>&nbsp;<span class="op" id="4333788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333792">offset</span>&nbsp;<span class="op" id="4333799">=</span>&nbsp;<span class="ident" id="4333801">fileHeaderSize64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333822">dat</span>&nbsp;<span class="op" id="4333826">:=</span>&nbsp;<span class="builtinfunc" id="4333829">make</span><span class="op" id="4333833">(</span><span class="op" id="4333834">[</span><span class="op" id="4333835">]</span><span class="builtintype" id="4333836">byte</span><span class="op" id="4333840">,</span>&nbsp;<span class="ident" id="4333842">f</span><span class="op" id="4333843">.</span><span class="ident" id="4333844">Cmdsz</span><span class="op" id="4333849">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333852">if</span>&nbsp;<span class="ident" id="4333855">_</span><span class="op" id="4333856">,</span>&nbsp;<span class="ident" id="4333858">err</span>&nbsp;<span class="op" id="4333862">:=</span>&nbsp;<span class="ident" id="4333865">r</span><span class="op" id="4333866">.</span><span class="ident" id="4333867">ReadAt</span><span class="op" id="4333873">(</span><span class="ident" id="4333874">dat</span><span class="op" id="4333877">,</span>&nbsp;<span class="ident" id="4333879">offset</span><span class="op" id="4333885">)</span><span class="op" id="4333886">;</span>&nbsp;<span class="ident" id="4333888">err</span>&nbsp;<span class="op" id="4333892">!=</span>&nbsp;<span class="ident" id="4333895">nil</span>&nbsp;<span class="op" id="4333899">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333903">return</span>&nbsp;<span class="ident" id="4333910">nil</span><span class="op" id="4333913">,</span>&nbsp;<span class="ident" id="4333915">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4333920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333923">f</span><span class="op" id="4333924">.</span><span class="ident" id="4333925">Loads</span>&nbsp;<span class="op" id="4333931">=</span>&nbsp;<span class="builtinfunc" id="4333933">make</span><span class="op" id="4333937">(</span><span class="op" id="4333938">[</span><span class="op" id="4333939">]</span><span class="ident" id="4333940">Load</span><span class="op" id="4333944">,</span>&nbsp;<span class="ident" id="4333946">f</span><span class="op" id="4333947">.</span><span class="ident" id="4333948">Ncmd</span><span class="op" id="4333952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4333955">bo</span>&nbsp;<span class="op" id="4333958">:=</span>&nbsp;<span class="ident" id="4333961">f</span><span class="op" id="4333962">.</span><span class="ident" id="4333963">ByteOrder</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4333974">for</span>&nbsp;<span class="ident" id="4333978">i</span>&nbsp;<span class="op" id="4333980">:=</span>&nbsp;<span class="keyword" id="4333983">range</span>&nbsp;<span class="ident" id="4333989">f</span><span class="op" id="4333990">.</span><span class="ident" id="4333991">Loads</span>&nbsp;<span class="op" id="4333997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4334001">//&nbsp;Each&nbsp;load&nbsp;command&nbsp;begins&nbsp;with&nbsp;uint32&nbsp;command&nbsp;and&nbsp;length.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334063">if</span>&nbsp;<span class="builtinfunc" id="4334066">len</span><span class="op" id="4334069">(</span><span class="ident" id="4334070">dat</span><span class="op" id="4334073">)</span>&nbsp;<span class="op" id="4334075">&lt;</span>&nbsp;<span class="num" id="4334077">8</span>&nbsp;<span class="op" id="4334079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334084">return</span>&nbsp;<span class="ident" id="4334091">nil</span><span class="op" id="4334094">,</span>&nbsp;<span class="op" id="4334096">&amp;</span><span class="ident" id="4334097">FormatError</span><span class="op" id="4334108">{</span><span class="ident" id="4334109">offset</span><span class="op" id="4334115">,</span>&nbsp;<span class="string" id="4334117">&#34;command&nbsp;block&nbsp;too&nbsp;small&#34;</span><span class="op" id="4334142">,</span>&nbsp;<span class="ident" id="4334144">nil</span><span class="op" id="4334147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334151">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334155">cmd</span><span class="op" id="4334158">,</span>&nbsp;<span class="ident" id="4334160">siz</span>&nbsp;<span class="op" id="4334164">:=</span>&nbsp;<span class="ident" id="4334167">LoadCmd</span><span class="op" id="4334174">(</span><span class="ident" id="4334175">bo</span><span class="op" id="4334177">.</span><span class="ident" id="4334178">Uint32</span><span class="op" id="4334184">(</span><span class="ident" id="4334185">dat</span><span class="op" id="4334188">[</span><span class="num" id="4334189">0</span><span class="op" id="4334190">:</span><span class="num" id="4334191">4</span><span class="op" id="4334192">]</span><span class="op" id="4334193">)</span><span class="op" id="4334194">)</span><span class="op" id="4334195">,</span>&nbsp;<span class="ident" id="4334197">bo</span><span class="op" id="4334199">.</span><span class="ident" id="4334200">Uint32</span><span class="op" id="4334206">(</span><span class="ident" id="4334207">dat</span><span class="op" id="4334210">[</span><span class="num" id="4334211">4</span><span class="op" id="4334212">:</span><span class="num" id="4334213">8</span><span class="op" id="4334214">]</span><span class="op" id="4334215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334219">if</span>&nbsp;<span class="ident" id="4334222">siz</span>&nbsp;<span class="op" id="4334226">&lt;</span>&nbsp;<span class="num" id="4334228">8</span>&nbsp;<span class="op" id="4334230">||</span>&nbsp;<span class="ident" id="4334233">siz</span>&nbsp;<span class="op" id="4334237">&gt;</span>&nbsp;<span class="builtintype" id="4334239">uint32</span><span class="op" id="4334245">(</span><span class="builtinfunc" id="4334246">len</span><span class="op" id="4334249">(</span><span class="ident" id="4334250">dat</span><span class="op" id="4334253">)</span><span class="op" id="4334254">)</span>&nbsp;<span class="op" id="4334256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334261">return</span>&nbsp;<span class="ident" id="4334268">nil</span><span class="op" id="4334271">,</span>&nbsp;<span class="op" id="4334273">&amp;</span><span class="ident" id="4334274">FormatError</span><span class="op" id="4334285">{</span><span class="ident" id="4334286">offset</span><span class="op" id="4334292">,</span>&nbsp;<span class="string" id="4334294">&#34;invalid&nbsp;command&nbsp;block&nbsp;size&#34;</span><span class="op" id="4334322">,</span>&nbsp;<span class="ident" id="4334324">nil</span><span class="op" id="4334327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334335">var</span>&nbsp;<span class="ident" id="4334339">cmddat</span>&nbsp;<span class="op" id="4334346">[</span><span class="op" id="4334347">]</span><span class="builtintype" id="4334348">byte</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334355">cmddat</span><span class="op" id="4334361">,</span>&nbsp;<span class="ident" id="4334363">dat</span>&nbsp;<span class="op" id="4334367">=</span>&nbsp;<span class="ident" id="4334369">dat</span><span class="op" id="4334372">[</span><span class="num" id="4334373">0</span><span class="op" id="4334374">:</span><span class="ident" id="4334375">siz</span><span class="op" id="4334378">]</span><span class="op" id="4334379">,</span>&nbsp;<span class="ident" id="4334381">dat</span><span class="op" id="4334384">[</span><span class="ident" id="4334385">siz</span><span class="op" id="4334388">:</span><span class="op" id="4334389">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334393">offset</span>&nbsp;<span class="op" id="4334400">+=</span>&nbsp;<span class="ident" id="4334403">int64</span><span class="op" id="4334408">(</span><span class="ident" id="4334409">siz</span><span class="op" id="4334412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334416">var</span>&nbsp;<span class="ident" id="4334420">s</span>&nbsp;<span class="op" id="4334422">*</span><span class="ident" id="4334423">Segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334433">switch</span>&nbsp;<span class="ident" id="4334440">cmd</span>&nbsp;<span class="op" id="4334444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334448">default</span><span class="op" id="4334455">:</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334460">f</span><span class="op" id="4334461">.</span><span class="ident" id="4334462">Loads</span><span class="op" id="4334467">[</span><span class="ident" id="4334468">i</span><span class="op" id="4334469">]</span>&nbsp;<span class="op" id="4334471">=</span>&nbsp;<span class="ident" id="4334473">LoadBytes</span><span class="op" id="4334482">(</span><span class="ident" id="4334483">cmddat</span><span class="op" id="4334489">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334494">case</span>&nbsp;<span class="ident" id="4334499">LoadCmdDylib</span><span class="op" id="4334511">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334516">var</span>&nbsp;<span class="ident" id="4334520">hdr</span>&nbsp;<span class="ident" id="4334524">DylibCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334536">b</span>&nbsp;<span class="op" id="4334538">:=</span>&nbsp;<span class="ident" id="4334541">bytes</span><span class="op" id="4334546">.</span><span class="ident" id="4334547">NewReader</span><span class="op" id="4334556">(</span><span class="ident" id="4334557">cmddat</span><span class="op" id="4334563">)</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334568">if</span>&nbsp;<span class="ident" id="4334571">err</span>&nbsp;<span class="op" id="4334575">:=</span>&nbsp;<span class="ident" id="4334578">binary</span><span class="op" id="4334584">.</span><span class="ident" id="4334585">Read</span><span class="op" id="4334589">(</span><span class="ident" id="4334590">b</span><span class="op" id="4334591">,</span>&nbsp;<span class="ident" id="4334593">bo</span><span class="op" id="4334595">,</span>&nbsp;<span class="op" id="4334597">&amp;</span><span class="ident" id="4334598">hdr</span><span class="op" id="4334601">)</span><span class="op" id="4334602">;</span>&nbsp;<span class="ident" id="4334604">err</span>&nbsp;<span class="op" id="4334608">!=</span>&nbsp;<span class="ident" id="4334611">nil</span>&nbsp;<span class="op" id="4334615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334621">return</span>&nbsp;<span class="ident" id="4334628">nil</span><span class="op" id="4334631">,</span>&nbsp;<span class="ident" id="4334633">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334640">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334645">l</span>&nbsp;<span class="op" id="4334647">:=</span>&nbsp;<span class="builtinfunc" id="4334650">new</span><span class="op" id="4334653">(</span><span class="ident" id="4334654">Dylib</span><span class="op" id="4334659">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334664">if</span>&nbsp;<span class="ident" id="4334667">hdr</span><span class="op" id="4334670">.</span><span class="ident" id="4334671">Name</span>&nbsp;<span class="op" id="4334676">&gt;=</span>&nbsp;<span class="builtintype" id="4334679">uint32</span><span class="op" id="4334685">(</span><span class="builtinfunc" id="4334686">len</span><span class="op" id="4334689">(</span><span class="ident" id="4334690">cmddat</span><span class="op" id="4334696">)</span><span class="op" id="4334697">)</span>&nbsp;<span class="op" id="4334699">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334705">return</span>&nbsp;<span class="ident" id="4334712">nil</span><span class="op" id="4334715">,</span>&nbsp;<span class="op" id="4334717">&amp;</span><span class="ident" id="4334718">FormatError</span><span class="op" id="4334729">{</span><span class="ident" id="4334730">offset</span><span class="op" id="4334736">,</span>&nbsp;<span class="string" id="4334738">&#34;invalid&nbsp;name&nbsp;in&nbsp;dynamic&nbsp;library&nbsp;command&#34;</span><span class="op" id="4334779">,</span>&nbsp;<span class="ident" id="4334781">hdr</span><span class="op" id="4334784">.</span><span class="ident" id="4334785">Name</span><span class="op" id="4334789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4334794">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334799">l</span><span class="op" id="4334800">.</span><span class="ident" id="4334801">Name</span>&nbsp;<span class="op" id="4334806">=</span>&nbsp;<span class="ident" id="4334808">cstring</span><span class="op" id="4334815">(</span><span class="ident" id="4334816">cmddat</span><span class="op" id="4334822">[</span><span class="ident" id="4334823">hdr</span><span class="op" id="4334826">.</span><span class="ident" id="4334827">Name</span><span class="op" id="4334831">:</span><span class="op" id="4334832">]</span><span class="op" id="4334833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334838">l</span><span class="op" id="4334839">.</span><span class="ident" id="4334840">Time</span>&nbsp;<span class="op" id="4334845">=</span>&nbsp;<span class="ident" id="4334847">hdr</span><span class="op" id="4334850">.</span><span class="ident" id="4334851">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334859">l</span><span class="op" id="4334860">.</span><span class="ident" id="4334861">CurrentVersion</span>&nbsp;<span class="op" id="4334876">=</span>&nbsp;<span class="ident" id="4334878">hdr</span><span class="op" id="4334881">.</span><span class="ident" id="4334882">CurrentVersion</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334900">l</span><span class="op" id="4334901">.</span><span class="ident" id="4334902">CompatVersion</span>&nbsp;<span class="op" id="4334916">=</span>&nbsp;<span class="ident" id="4334918">hdr</span><span class="op" id="4334921">.</span><span class="ident" id="4334922">CompatVersion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334939">l</span><span class="op" id="4334940">.</span><span class="ident" id="4334941">LoadBytes</span>&nbsp;<span class="op" id="4334951">=</span>&nbsp;<span class="ident" id="4334953">LoadBytes</span><span class="op" id="4334962">(</span><span class="ident" id="4334963">cmddat</span><span class="op" id="4334969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4334974">f</span><span class="op" id="4334975">.</span><span class="ident" id="4334976">Loads</span><span class="op" id="4334981">[</span><span class="ident" id="4334982">i</span><span class="op" id="4334983">]</span>&nbsp;<span class="op" id="4334985">=</span>&nbsp;<span class="ident" id="4334987">l</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4334992">case</span>&nbsp;<span class="ident" id="4334997">LoadCmdSymtab</span><span class="op" id="4335010">:</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335015">var</span>&nbsp;<span class="ident" id="4335019">hdr</span>&nbsp;<span class="ident" id="4335023">SymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335036">b</span>&nbsp;<span class="op" id="4335038">:=</span>&nbsp;<span class="ident" id="4335041">bytes</span><span class="op" id="4335046">.</span><span class="ident" id="4335047">NewReader</span><span class="op" id="4335056">(</span><span class="ident" id="4335057">cmddat</span><span class="op" id="4335063">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335068">if</span>&nbsp;<span class="ident" id="4335071">err</span>&nbsp;<span class="op" id="4335075">:=</span>&nbsp;<span class="ident" id="4335078">binary</span><span class="op" id="4335084">.</span><span class="ident" id="4335085">Read</span><span class="op" id="4335089">(</span><span class="ident" id="4335090">b</span><span class="op" id="4335091">,</span>&nbsp;<span class="ident" id="4335093">bo</span><span class="op" id="4335095">,</span>&nbsp;<span class="op" id="4335097">&amp;</span><span class="ident" id="4335098">hdr</span><span class="op" id="4335101">)</span><span class="op" id="4335102">;</span>&nbsp;<span class="ident" id="4335104">err</span>&nbsp;<span class="op" id="4335108">!=</span>&nbsp;<span class="ident" id="4335111">nil</span>&nbsp;<span class="op" id="4335115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335121">return</span>&nbsp;<span class="ident" id="4335128">nil</span><span class="op" id="4335131">,</span>&nbsp;<span class="ident" id="4335133">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335140">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335145">strtab</span>&nbsp;<span class="op" id="4335152">:=</span>&nbsp;<span class="builtinfunc" id="4335155">make</span><span class="op" id="4335159">(</span><span class="op" id="4335160">[</span><span class="op" id="4335161">]</span><span class="builtintype" id="4335162">byte</span><span class="op" id="4335166">,</span>&nbsp;<span class="ident" id="4335168">hdr</span><span class="op" id="4335171">.</span><span class="ident" id="4335172">Strsize</span><span class="op" id="4335179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335184">if</span>&nbsp;<span class="ident" id="4335187">_</span><span class="op" id="4335188">,</span>&nbsp;<span class="ident" id="4335190">err</span>&nbsp;<span class="op" id="4335194">:=</span>&nbsp;<span class="ident" id="4335197">r</span><span class="op" id="4335198">.</span><span class="ident" id="4335199">ReadAt</span><span class="op" id="4335205">(</span><span class="ident" id="4335206">strtab</span><span class="op" id="4335212">,</span>&nbsp;<span class="ident" id="4335214">int64</span><span class="op" id="4335219">(</span><span class="ident" id="4335220">hdr</span><span class="op" id="4335223">.</span><span class="ident" id="4335224">Stroff</span><span class="op" id="4335230">)</span><span class="op" id="4335231">)</span><span class="op" id="4335232">;</span>&nbsp;<span class="ident" id="4335234">err</span>&nbsp;<span class="op" id="4335238">!=</span>&nbsp;<span class="ident" id="4335241">nil</span>&nbsp;<span class="op" id="4335245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335251">return</span>&nbsp;<span class="ident" id="4335258">nil</span><span class="op" id="4335261">,</span>&nbsp;<span class="ident" id="4335263">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335275">var</span>&nbsp;<span class="ident" id="4335279">symsz</span>&nbsp;<span class="builtintype" id="4335285">int</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335292">if</span>&nbsp;<span class="ident" id="4335295">f</span><span class="op" id="4335296">.</span><span class="ident" id="4335297">Magic</span>&nbsp;<span class="op" id="4335303">==</span>&nbsp;<span class="ident" id="4335306">Magic64</span>&nbsp;<span class="op" id="4335314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335320">symsz</span>&nbsp;<span class="op" id="4335326">=</span>&nbsp;<span class="num" id="4335328">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335334">}</span>&nbsp;<span class="keyword" id="4335336">else</span>&nbsp;<span class="op" id="4335341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335347">symsz</span>&nbsp;<span class="op" id="4335353">=</span>&nbsp;<span class="num" id="4335355">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335361">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335366">symdat</span>&nbsp;<span class="op" id="4335373">:=</span>&nbsp;<span class="builtinfunc" id="4335376">make</span><span class="op" id="4335380">(</span><span class="op" id="4335381">[</span><span class="op" id="4335382">]</span><span class="builtintype" id="4335383">byte</span><span class="op" id="4335387">,</span>&nbsp;<span class="builtintype" id="4335389">int</span><span class="op" id="4335392">(</span><span class="ident" id="4335393">hdr</span><span class="op" id="4335396">.</span><span class="ident" id="4335397">Nsyms</span><span class="op" id="4335402">)</span><span class="op" id="4335403">*</span><span class="ident" id="4335404">symsz</span><span class="op" id="4335409">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335414">if</span>&nbsp;<span class="ident" id="4335417">_</span><span class="op" id="4335418">,</span>&nbsp;<span class="ident" id="4335420">err</span>&nbsp;<span class="op" id="4335424">:=</span>&nbsp;<span class="ident" id="4335427">r</span><span class="op" id="4335428">.</span><span class="ident" id="4335429">ReadAt</span><span class="op" id="4335435">(</span><span class="ident" id="4335436">symdat</span><span class="op" id="4335442">,</span>&nbsp;<span class="ident" id="4335444">int64</span><span class="op" id="4335449">(</span><span class="ident" id="4335450">hdr</span><span class="op" id="4335453">.</span><span class="ident" id="4335454">Symoff</span><span class="op" id="4335460">)</span><span class="op" id="4335461">)</span><span class="op" id="4335462">;</span>&nbsp;<span class="ident" id="4335464">err</span>&nbsp;<span class="op" id="4335468">!=</span>&nbsp;<span class="ident" id="4335471">nil</span>&nbsp;<span class="op" id="4335475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335481">return</span>&nbsp;<span class="ident" id="4335488">nil</span><span class="op" id="4335491">,</span>&nbsp;<span class="ident" id="4335493">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335500">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335505">st</span><span class="op" id="4335507">,</span>&nbsp;<span class="ident" id="4335509">err</span>&nbsp;<span class="op" id="4335513">:=</span>&nbsp;<span class="ident" id="4335516">f</span><span class="op" id="4335517">.</span><span class="ident" id="4335518">parseSymtab</span><span class="op" id="4335529">(</span><span class="ident" id="4335530">symdat</span><span class="op" id="4335536">,</span>&nbsp;<span class="ident" id="4335538">strtab</span><span class="op" id="4335544">,</span>&nbsp;<span class="ident" id="4335546">cmddat</span><span class="op" id="4335552">,</span>&nbsp;<span class="op" id="4335554">&amp;</span><span class="ident" id="4335555">hdr</span><span class="op" id="4335558">,</span>&nbsp;<span class="ident" id="4335560">offset</span><span class="op" id="4335566">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335571">if</span>&nbsp;<span class="ident" id="4335574">err</span>&nbsp;<span class="op" id="4335578">!=</span>&nbsp;<span class="ident" id="4335581">nil</span>&nbsp;<span class="op" id="4335585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335591">return</span>&nbsp;<span class="ident" id="4335598">nil</span><span class="op" id="4335601">,</span>&nbsp;<span class="ident" id="4335603">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335615">f</span><span class="op" id="4335616">.</span><span class="ident" id="4335617">Loads</span><span class="op" id="4335622">[</span><span class="ident" id="4335623">i</span><span class="op" id="4335624">]</span>&nbsp;<span class="op" id="4335626">=</span>&nbsp;<span class="ident" id="4335628">st</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335634">f</span><span class="op" id="4335635">.</span><span class="ident" id="4335636">Symtab</span>&nbsp;<span class="op" id="4335643">=</span>&nbsp;<span class="ident" id="4335645">st</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335651">case</span>&nbsp;<span class="ident" id="4335656">LoadCmdDysymtab</span><span class="op" id="4335671">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335676">var</span>&nbsp;<span class="ident" id="4335680">hdr</span>&nbsp;<span class="ident" id="4335684">DysymtabCmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335699">b</span>&nbsp;<span class="op" id="4335701">:=</span>&nbsp;<span class="ident" id="4335704">bytes</span><span class="op" id="4335709">.</span><span class="ident" id="4335710">NewReader</span><span class="op" id="4335719">(</span><span class="ident" id="4335720">cmddat</span><span class="op" id="4335726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335731">if</span>&nbsp;<span class="ident" id="4335734">err</span>&nbsp;<span class="op" id="4335738">:=</span>&nbsp;<span class="ident" id="4335741">binary</span><span class="op" id="4335747">.</span><span class="ident" id="4335748">Read</span><span class="op" id="4335752">(</span><span class="ident" id="4335753">b</span><span class="op" id="4335754">,</span>&nbsp;<span class="ident" id="4335756">bo</span><span class="op" id="4335758">,</span>&nbsp;<span class="op" id="4335760">&amp;</span><span class="ident" id="4335761">hdr</span><span class="op" id="4335764">)</span><span class="op" id="4335765">;</span>&nbsp;<span class="ident" id="4335767">err</span>&nbsp;<span class="op" id="4335771">!=</span>&nbsp;<span class="ident" id="4335774">nil</span>&nbsp;<span class="op" id="4335778">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335784">return</span>&nbsp;<span class="ident" id="4335791">nil</span><span class="op" id="4335794">,</span>&nbsp;<span class="ident" id="4335796">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335803">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335808">dat</span>&nbsp;<span class="op" id="4335812">:=</span>&nbsp;<span class="builtinfunc" id="4335815">make</span><span class="op" id="4335819">(</span><span class="op" id="4335820">[</span><span class="op" id="4335821">]</span><span class="builtintype" id="4335822">byte</span><span class="op" id="4335826">,</span>&nbsp;<span class="ident" id="4335828">hdr</span><span class="op" id="4335831">.</span><span class="ident" id="4335832">Nindirectsyms</span><span class="op" id="4335845">*</span><span class="num" id="4335846">4</span><span class="op" id="4335847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335852">if</span>&nbsp;<span class="ident" id="4335855">_</span><span class="op" id="4335856">,</span>&nbsp;<span class="ident" id="4335858">err</span>&nbsp;<span class="op" id="4335862">:=</span>&nbsp;<span class="ident" id="4335865">r</span><span class="op" id="4335866">.</span><span class="ident" id="4335867">ReadAt</span><span class="op" id="4335873">(</span><span class="ident" id="4335874">dat</span><span class="op" id="4335877">,</span>&nbsp;<span class="ident" id="4335879">int64</span><span class="op" id="4335884">(</span><span class="ident" id="4335885">hdr</span><span class="op" id="4335888">.</span><span class="ident" id="4335889">Indirectsymoff</span><span class="op" id="4335903">)</span><span class="op" id="4335904">)</span><span class="op" id="4335905">;</span>&nbsp;<span class="ident" id="4335907">err</span>&nbsp;<span class="op" id="4335911">!=</span>&nbsp;<span class="ident" id="4335914">nil</span>&nbsp;<span class="op" id="4335918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335924">return</span>&nbsp;<span class="ident" id="4335931">nil</span><span class="op" id="4335934">,</span>&nbsp;<span class="ident" id="4335936">err</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4335943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4335948">x</span>&nbsp;<span class="op" id="4335950">:=</span>&nbsp;<span class="builtinfunc" id="4335953">make</span><span class="op" id="4335957">(</span><span class="op" id="4335958">[</span><span class="op" id="4335959">]</span><span class="builtintype" id="4335960">uint32</span><span class="op" id="4335966">,</span>&nbsp;<span class="ident" id="4335968">hdr</span><span class="op" id="4335971">.</span><span class="ident" id="4335972">Nindirectsyms</span><span class="op" id="4335985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4335990">if</span>&nbsp;<span class="ident" id="4335993">err</span>&nbsp;<span class="op" id="4335997">:=</span>&nbsp;<span class="ident" id="4336000">binary</span><span class="op" id="4336006">.</span><span class="ident" id="4336007">Read</span><span class="op" id="4336011">(</span><span class="ident" id="4336012">bytes</span><span class="op" id="4336017">.</span><span class="ident" id="4336018">NewReader</span><span class="op" id="4336027">(</span><span class="ident" id="4336028">dat</span><span class="op" id="4336031">)</span><span class="op" id="4336032">,</span>&nbsp;<span class="ident" id="4336034">bo</span><span class="op" id="4336036">,</span>&nbsp;<span class="ident" id="4336038">x</span><span class="op" id="4336039">)</span><span class="op" id="4336040">;</span>&nbsp;<span class="ident" id="4336042">err</span>&nbsp;<span class="op" id="4336046">!=</span>&nbsp;<span class="ident" id="4336049">nil</span>&nbsp;<span class="op" id="4336053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336059">return</span>&nbsp;<span class="ident" id="4336066">nil</span><span class="op" id="4336069">,</span>&nbsp;<span class="ident" id="4336071">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336078">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336083">st</span>&nbsp;<span class="op" id="4336086">:=</span>&nbsp;<span class="builtinfunc" id="4336089">new</span><span class="op" id="4336092">(</span><span class="ident" id="4336093">Dysymtab</span><span class="op" id="4336101">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336106">st</span><span class="op" id="4336108">.</span><span class="ident" id="4336109">LoadBytes</span>&nbsp;<span class="op" id="4336119">=</span>&nbsp;<span class="ident" id="4336121">LoadBytes</span><span class="op" id="4336130">(</span><span class="ident" id="4336131">cmddat</span><span class="op" id="4336137">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336142">st</span><span class="op" id="4336144">.</span><span class="ident" id="4336145">DysymtabCmd</span>&nbsp;<span class="op" id="4336157">=</span>&nbsp;<span class="ident" id="4336159">hdr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336166">st</span><span class="op" id="4336168">.</span><span class="ident" id="4336169">IndirectSyms</span>&nbsp;<span class="op" id="4336182">=</span>&nbsp;<span class="ident" id="4336184">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336189">f</span><span class="op" id="4336190">.</span><span class="ident" id="4336191">Loads</span><span class="op" id="4336196">[</span><span class="ident" id="4336197">i</span><span class="op" id="4336198">]</span>&nbsp;<span class="op" id="4336200">=</span>&nbsp;<span class="ident" id="4336202">st</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336208">f</span><span class="op" id="4336209">.</span><span class="ident" id="4336210">Dysymtab</span>&nbsp;<span class="op" id="4336219">=</span>&nbsp;<span class="ident" id="4336221">st</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336227">case</span>&nbsp;<span class="ident" id="4336232">LoadCmdSegment</span><span class="op" id="4336246">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336251">var</span>&nbsp;<span class="ident" id="4336255">seg32</span>&nbsp;<span class="ident" id="4336261">Segment32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336274">b</span>&nbsp;<span class="op" id="4336276">:=</span>&nbsp;<span class="ident" id="4336279">bytes</span><span class="op" id="4336284">.</span><span class="ident" id="4336285">NewReader</span><span class="op" id="4336294">(</span><span class="ident" id="4336295">cmddat</span><span class="op" id="4336301">)</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336306">if</span>&nbsp;<span class="ident" id="4336309">err</span>&nbsp;<span class="op" id="4336313">:=</span>&nbsp;<span class="ident" id="4336316">binary</span><span class="op" id="4336322">.</span><span class="ident" id="4336323">Read</span><span class="op" id="4336327">(</span><span class="ident" id="4336328">b</span><span class="op" id="4336329">,</span>&nbsp;<span class="ident" id="4336331">bo</span><span class="op" id="4336333">,</span>&nbsp;<span class="op" id="4336335">&amp;</span><span class="ident" id="4336336">seg32</span><span class="op" id="4336341">)</span><span class="op" id="4336342">;</span>&nbsp;<span class="ident" id="4336344">err</span>&nbsp;<span class="op" id="4336348">!=</span>&nbsp;<span class="ident" id="4336351">nil</span>&nbsp;<span class="op" id="4336355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336361">return</span>&nbsp;<span class="ident" id="4336368">nil</span><span class="op" id="4336371">,</span>&nbsp;<span class="ident" id="4336373">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336385">s</span>&nbsp;<span class="op" id="4336387">=</span>&nbsp;<span class="builtinfunc" id="4336389">new</span><span class="op" id="4336392">(</span><span class="ident" id="4336393">Segment</span><span class="op" id="4336400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336405">s</span><span class="op" id="4336406">.</span><span class="ident" id="4336407">LoadBytes</span>&nbsp;<span class="op" id="4336417">=</span>&nbsp;<span class="ident" id="4336419">cmddat</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336429">s</span><span class="op" id="4336430">.</span><span class="ident" id="4336431">Cmd</span>&nbsp;<span class="op" id="4336435">=</span>&nbsp;<span class="ident" id="4336437">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336444">s</span><span class="op" id="4336445">.</span><span class="ident" id="4336446">Len</span>&nbsp;<span class="op" id="4336450">=</span>&nbsp;<span class="ident" id="4336452">siz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336459">s</span><span class="op" id="4336460">.</span><span class="ident" id="4336461">Name</span>&nbsp;<span class="op" id="4336466">=</span>&nbsp;<span class="ident" id="4336468">cstring</span><span class="op" id="4336475">(</span><span class="ident" id="4336476">seg32</span><span class="op" id="4336481">.</span><span class="ident" id="4336482">Name</span><span class="op" id="4336486">[</span><span class="num" id="4336487">0</span><span class="op" id="4336488">:</span><span class="op" id="4336489">]</span><span class="op" id="4336490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336495">s</span><span class="op" id="4336496">.</span><span class="ident" id="4336497">Addr</span>&nbsp;<span class="op" id="4336502">=</span>&nbsp;<span class="ident" id="4336504">uint64</span><span class="op" id="4336510">(</span><span class="ident" id="4336511">seg32</span><span class="op" id="4336516">.</span><span class="ident" id="4336517">Addr</span><span class="op" id="4336521">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336526">s</span><span class="op" id="4336527">.</span><span class="ident" id="4336528">Memsz</span>&nbsp;<span class="op" id="4336534">=</span>&nbsp;<span class="ident" id="4336536">uint64</span><span class="op" id="4336542">(</span><span class="ident" id="4336543">seg32</span><span class="op" id="4336548">.</span><span class="ident" id="4336549">Memsz</span><span class="op" id="4336554">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336559">s</span><span class="op" id="4336560">.</span><span class="ident" id="4336561">Offset</span>&nbsp;<span class="op" id="4336568">=</span>&nbsp;<span class="ident" id="4336570">uint64</span><span class="op" id="4336576">(</span><span class="ident" id="4336577">seg32</span><span class="op" id="4336582">.</span><span class="ident" id="4336583">Offset</span><span class="op" id="4336589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336594">s</span><span class="op" id="4336595">.</span><span class="ident" id="4336596">Filesz</span>&nbsp;<span class="op" id="4336603">=</span>&nbsp;<span class="ident" id="4336605">uint64</span><span class="op" id="4336611">(</span><span class="ident" id="4336612">seg32</span><span class="op" id="4336617">.</span><span class="ident" id="4336618">Filesz</span><span class="op" id="4336624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336629">s</span><span class="op" id="4336630">.</span><span class="ident" id="4336631">Maxprot</span>&nbsp;<span class="op" id="4336639">=</span>&nbsp;<span class="ident" id="4336641">seg32</span><span class="op" id="4336646">.</span><span class="ident" id="4336647">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336658">s</span><span class="op" id="4336659">.</span><span class="ident" id="4336660">Prot</span>&nbsp;<span class="op" id="4336665">=</span>&nbsp;<span class="ident" id="4336667">seg32</span><span class="op" id="4336672">.</span><span class="ident" id="4336673">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336681">s</span><span class="op" id="4336682">.</span><span class="ident" id="4336683">Nsect</span>&nbsp;<span class="op" id="4336689">=</span>&nbsp;<span class="ident" id="4336691">seg32</span><span class="op" id="4336696">.</span><span class="ident" id="4336697">Nsect</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336706">s</span><span class="op" id="4336707">.</span><span class="ident" id="4336708">Flag</span>&nbsp;<span class="op" id="4336713">=</span>&nbsp;<span class="ident" id="4336715">seg32</span><span class="op" id="4336720">.</span><span class="ident" id="4336721">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336729">f</span><span class="op" id="4336730">.</span><span class="ident" id="4336731">Loads</span><span class="op" id="4336736">[</span><span class="ident" id="4336737">i</span><span class="op" id="4336738">]</span>&nbsp;<span class="op" id="4336740">=</span>&nbsp;<span class="ident" id="4336742">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336747">for</span>&nbsp;<span class="ident" id="4336751">i</span>&nbsp;<span class="op" id="4336753">:=</span>&nbsp;<span class="num" id="4336756">0</span><span class="op" id="4336757">;</span>&nbsp;<span class="ident" id="4336759">i</span>&nbsp;<span class="op" id="4336761">&lt;</span>&nbsp;<span class="builtintype" id="4336763">int</span><span class="op" id="4336766">(</span><span class="ident" id="4336767">s</span><span class="op" id="4336768">.</span><span class="ident" id="4336769">Nsect</span><span class="op" id="4336774">)</span><span class="op" id="4336775">;</span>&nbsp;<span class="ident" id="4336777">i</span><span class="op" id="4336778">++</span>&nbsp;<span class="op" id="4336781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336787">var</span>&nbsp;<span class="ident" id="4336791">sh32</span>&nbsp;<span class="ident" id="4336796">Section32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336810">if</span>&nbsp;<span class="ident" id="4336813">err</span>&nbsp;<span class="op" id="4336817">:=</span>&nbsp;<span class="ident" id="4336820">binary</span><span class="op" id="4336826">.</span><span class="ident" id="4336827">Read</span><span class="op" id="4336831">(</span><span class="ident" id="4336832">b</span><span class="op" id="4336833">,</span>&nbsp;<span class="ident" id="4336835">bo</span><span class="op" id="4336837">,</span>&nbsp;<span class="op" id="4336839">&amp;</span><span class="ident" id="4336840">sh32</span><span class="op" id="4336844">)</span><span class="op" id="4336845">;</span>&nbsp;<span class="ident" id="4336847">err</span>&nbsp;<span class="op" id="4336851">!=</span>&nbsp;<span class="ident" id="4336854">nil</span>&nbsp;<span class="op" id="4336858">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4336865">return</span>&nbsp;<span class="ident" id="4336872">nil</span><span class="op" id="4336875">,</span>&nbsp;<span class="ident" id="4336877">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4336885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336891">sh</span>&nbsp;<span class="op" id="4336894">:=</span>&nbsp;<span class="builtinfunc" id="4336897">new</span><span class="op" id="4336900">(</span><span class="ident" id="4336901">Section</span><span class="op" id="4336908">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336914">sh</span><span class="op" id="4336916">.</span><span class="ident" id="4336917">Name</span>&nbsp;<span class="op" id="4336922">=</span>&nbsp;<span class="ident" id="4336924">cstring</span><span class="op" id="4336931">(</span><span class="ident" id="4336932">sh32</span><span class="op" id="4336936">.</span><span class="ident" id="4336937">Name</span><span class="op" id="4336941">[</span><span class="num" id="4336942">0</span><span class="op" id="4336943">:</span><span class="op" id="4336944">]</span><span class="op" id="4336945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336951">sh</span><span class="op" id="4336953">.</span><span class="ident" id="4336954">Seg</span>&nbsp;<span class="op" id="4336958">=</span>&nbsp;<span class="ident" id="4336960">cstring</span><span class="op" id="4336967">(</span><span class="ident" id="4336968">sh32</span><span class="op" id="4336972">.</span><span class="ident" id="4336973">Seg</span><span class="op" id="4336976">[</span><span class="num" id="4336977">0</span><span class="op" id="4336978">:</span><span class="op" id="4336979">]</span><span class="op" id="4336980">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4336986">sh</span><span class="op" id="4336988">.</span><span class="ident" id="4336989">Addr</span>&nbsp;<span class="op" id="4336994">=</span>&nbsp;<span class="ident" id="4336996">uint64</span><span class="op" id="4337002">(</span><span class="ident" id="4337003">sh32</span><span class="op" id="4337007">.</span><span class="ident" id="4337008">Addr</span><span class="op" id="4337012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337018">sh</span><span class="op" id="4337020">.</span><span class="ident" id="4337021">Size</span>&nbsp;<span class="op" id="4337026">=</span>&nbsp;<span class="ident" id="4337028">uint64</span><span class="op" id="4337034">(</span><span class="ident" id="4337035">sh32</span><span class="op" id="4337039">.</span><span class="ident" id="4337040">Size</span><span class="op" id="4337044">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337050">sh</span><span class="op" id="4337052">.</span><span class="ident" id="4337053">Offset</span>&nbsp;<span class="op" id="4337060">=</span>&nbsp;<span class="ident" id="4337062">sh32</span><span class="op" id="4337066">.</span><span class="ident" id="4337067">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337078">sh</span><span class="op" id="4337080">.</span><span class="ident" id="4337081">Align</span>&nbsp;<span class="op" id="4337087">=</span>&nbsp;<span class="ident" id="4337089">sh32</span><span class="op" id="4337093">.</span><span class="ident" id="4337094">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337104">sh</span><span class="op" id="4337106">.</span><span class="ident" id="4337107">Reloff</span>&nbsp;<span class="op" id="4337114">=</span>&nbsp;<span class="ident" id="4337116">sh32</span><span class="op" id="4337120">.</span><span class="ident" id="4337121">Reloff</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337132">sh</span><span class="op" id="4337134">.</span><span class="ident" id="4337135">Nreloc</span>&nbsp;<span class="op" id="4337142">=</span>&nbsp;<span class="ident" id="4337144">sh32</span><span class="op" id="4337148">.</span><span class="ident" id="4337149">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337160">sh</span><span class="op" id="4337162">.</span><span class="ident" id="4337163">Flags</span>&nbsp;<span class="op" id="4337169">=</span>&nbsp;<span class="ident" id="4337171">sh32</span><span class="op" id="4337175">.</span><span class="ident" id="4337176">Flags</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337186">f</span><span class="op" id="4337187">.</span><span class="ident" id="4337188">pushSection</span><span class="op" id="4337199">(</span><span class="ident" id="4337200">sh</span><span class="op" id="4337202">,</span>&nbsp;<span class="ident" id="4337204">r</span><span class="op" id="4337205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337215">case</span>&nbsp;<span class="ident" id="4337220">LoadCmdSegment64</span><span class="op" id="4337236">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337241">var</span>&nbsp;<span class="ident" id="4337245">seg64</span>&nbsp;<span class="ident" id="4337251">Segment64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337264">b</span>&nbsp;<span class="op" id="4337266">:=</span>&nbsp;<span class="ident" id="4337269">bytes</span><span class="op" id="4337274">.</span><span class="ident" id="4337275">NewReader</span><span class="op" id="4337284">(</span><span class="ident" id="4337285">cmddat</span><span class="op" id="4337291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337296">if</span>&nbsp;<span class="ident" id="4337299">err</span>&nbsp;<span class="op" id="4337303">:=</span>&nbsp;<span class="ident" id="4337306">binary</span><span class="op" id="4337312">.</span><span class="ident" id="4337313">Read</span><span class="op" id="4337317">(</span><span class="ident" id="4337318">b</span><span class="op" id="4337319">,</span>&nbsp;<span class="ident" id="4337321">bo</span><span class="op" id="4337323">,</span>&nbsp;<span class="op" id="4337325">&amp;</span><span class="ident" id="4337326">seg64</span><span class="op" id="4337331">)</span><span class="op" id="4337332">;</span>&nbsp;<span class="ident" id="4337334">err</span>&nbsp;<span class="op" id="4337338">!=</span>&nbsp;<span class="ident" id="4337341">nil</span>&nbsp;<span class="op" id="4337345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337351">return</span>&nbsp;<span class="ident" id="4337358">nil</span><span class="op" id="4337361">,</span>&nbsp;<span class="ident" id="4337363">err</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337375">s</span>&nbsp;<span class="op" id="4337377">=</span>&nbsp;<span class="builtinfunc" id="4337379">new</span><span class="op" id="4337382">(</span><span class="ident" id="4337383">Segment</span><span class="op" id="4337390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337395">s</span><span class="op" id="4337396">.</span><span class="ident" id="4337397">LoadBytes</span>&nbsp;<span class="op" id="4337407">=</span>&nbsp;<span class="ident" id="4337409">cmddat</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337419">s</span><span class="op" id="4337420">.</span><span class="ident" id="4337421">Cmd</span>&nbsp;<span class="op" id="4337425">=</span>&nbsp;<span class="ident" id="4337427">cmd</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337434">s</span><span class="op" id="4337435">.</span><span class="ident" id="4337436">Len</span>&nbsp;<span class="op" id="4337440">=</span>&nbsp;<span class="ident" id="4337442">siz</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337449">s</span><span class="op" id="4337450">.</span><span class="ident" id="4337451">Name</span>&nbsp;<span class="op" id="4337456">=</span>&nbsp;<span class="ident" id="4337458">cstring</span><span class="op" id="4337465">(</span><span class="ident" id="4337466">seg64</span><span class="op" id="4337471">.</span><span class="ident" id="4337472">Name</span><span class="op" id="4337476">[</span><span class="num" id="4337477">0</span><span class="op" id="4337478">:</span><span class="op" id="4337479">]</span><span class="op" id="4337480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337485">s</span><span class="op" id="4337486">.</span><span class="ident" id="4337487">Addr</span>&nbsp;<span class="op" id="4337492">=</span>&nbsp;<span class="ident" id="4337494">seg64</span><span class="op" id="4337499">.</span><span class="ident" id="4337500">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337508">s</span><span class="op" id="4337509">.</span><span class="ident" id="4337510">Memsz</span>&nbsp;<span class="op" id="4337516">=</span>&nbsp;<span class="ident" id="4337518">seg64</span><span class="op" id="4337523">.</span><span class="ident" id="4337524">Memsz</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337533">s</span><span class="op" id="4337534">.</span><span class="ident" id="4337535">Offset</span>&nbsp;<span class="op" id="4337542">=</span>&nbsp;<span class="ident" id="4337544">seg64</span><span class="op" id="4337549">.</span><span class="ident" id="4337550">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337560">s</span><span class="op" id="4337561">.</span><span class="ident" id="4337562">Filesz</span>&nbsp;<span class="op" id="4337569">=</span>&nbsp;<span class="ident" id="4337571">seg64</span><span class="op" id="4337576">.</span><span class="ident" id="4337577">Filesz</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337587">s</span><span class="op" id="4337588">.</span><span class="ident" id="4337589">Maxprot</span>&nbsp;<span class="op" id="4337597">=</span>&nbsp;<span class="ident" id="4337599">seg64</span><span class="op" id="4337604">.</span><span class="ident" id="4337605">Maxprot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337616">s</span><span class="op" id="4337617">.</span><span class="ident" id="4337618">Prot</span>&nbsp;<span class="op" id="4337623">=</span>&nbsp;<span class="ident" id="4337625">seg64</span><span class="op" id="4337630">.</span><span class="ident" id="4337631">Prot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337639">s</span><span class="op" id="4337640">.</span><span class="ident" id="4337641">Nsect</span>&nbsp;<span class="op" id="4337647">=</span>&nbsp;<span class="ident" id="4337649">seg64</span><span class="op" id="4337654">.</span><span class="ident" id="4337655">Nsect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337664">s</span><span class="op" id="4337665">.</span><span class="ident" id="4337666">Flag</span>&nbsp;<span class="op" id="4337671">=</span>&nbsp;<span class="ident" id="4337673">seg64</span><span class="op" id="4337678">.</span><span class="ident" id="4337679">Flag</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337687">f</span><span class="op" id="4337688">.</span><span class="ident" id="4337689">Loads</span><span class="op" id="4337694">[</span><span class="ident" id="4337695">i</span><span class="op" id="4337696">]</span>&nbsp;<span class="op" id="4337698">=</span>&nbsp;<span class="ident" id="4337700">s</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337705">for</span>&nbsp;<span class="ident" id="4337709">i</span>&nbsp;<span class="op" id="4337711">:=</span>&nbsp;<span class="num" id="4337714">0</span><span class="op" id="4337715">;</span>&nbsp;<span class="ident" id="4337717">i</span>&nbsp;<span class="op" id="4337719">&lt;</span>&nbsp;<span class="builtintype" id="4337721">int</span><span class="op" id="4337724">(</span><span class="ident" id="4337725">s</span><span class="op" id="4337726">.</span><span class="ident" id="4337727">Nsect</span><span class="op" id="4337732">)</span><span class="op" id="4337733">;</span>&nbsp;<span class="ident" id="4337735">i</span><span class="op" id="4337736">++</span>&nbsp;<span class="op" id="4337739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337745">var</span>&nbsp;<span class="ident" id="4337749">sh64</span>&nbsp;<span class="ident" id="4337754">Section64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337768">if</span>&nbsp;<span class="ident" id="4337771">err</span>&nbsp;<span class="op" id="4337775">:=</span>&nbsp;<span class="ident" id="4337778">binary</span><span class="op" id="4337784">.</span><span class="ident" id="4337785">Read</span><span class="op" id="4337789">(</span><span class="ident" id="4337790">b</span><span class="op" id="4337791">,</span>&nbsp;<span class="ident" id="4337793">bo</span><span class="op" id="4337795">,</span>&nbsp;<span class="op" id="4337797">&amp;</span><span class="ident" id="4337798">sh64</span><span class="op" id="4337802">)</span><span class="op" id="4337803">;</span>&nbsp;<span class="ident" id="4337805">err</span>&nbsp;<span class="op" id="4337809">!=</span>&nbsp;<span class="ident" id="4337812">nil</span>&nbsp;<span class="op" id="4337816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4337823">return</span>&nbsp;<span class="ident" id="4337830">nil</span><span class="op" id="4337833">,</span>&nbsp;<span class="ident" id="4337835">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4337843">}</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337849">sh</span>&nbsp;<span class="op" id="4337852">:=</span>&nbsp;<span class="builtinfunc" id="4337855">new</span><span class="op" id="4337858">(</span><span class="ident" id="4337859">Section</span><span class="op" id="4337866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337872">sh</span><span class="op" id="4337874">.</span><span class="ident" id="4337875">Name</span>&nbsp;<span class="op" id="4337880">=</span>&nbsp;<span class="ident" id="4337882">cstring</span><span class="op" id="4337889">(</span><span class="ident" id="4337890">sh64</span><span class="op" id="4337894">.</span><span class="ident" id="4337895">Name</span><span class="op" id="4337899">[</span><span class="num" id="4337900">0</span><span class="op" id="4337901">:</span><span class="op" id="4337902">]</span><span class="op" id="4337903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337909">sh</span><span class="op" id="4337911">.</span><span class="ident" id="4337912">Seg</span>&nbsp;<span class="op" id="4337916">=</span>&nbsp;<span class="ident" id="4337918">cstring</span><span class="op" id="4337925">(</span><span class="ident" id="4337926">sh64</span><span class="op" id="4337930">.</span><span class="ident" id="4337931">Seg</span><span class="op" id="4337934">[</span><span class="num" id="4337935">0</span><span class="op" id="4337936">:</span><span class="op" id="4337937">]</span><span class="op" id="4337938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337944">sh</span><span class="op" id="4337946">.</span><span class="ident" id="4337947">Addr</span>&nbsp;<span class="op" id="4337952">=</span>&nbsp;<span class="ident" id="4337954">sh64</span><span class="op" id="4337958">.</span><span class="ident" id="4337959">Addr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337968">sh</span><span class="op" id="4337970">.</span><span class="ident" id="4337971">Size</span>&nbsp;<span class="op" id="4337976">=</span>&nbsp;<span class="ident" id="4337978">sh64</span><span class="op" id="4337982">.</span><span class="ident" id="4337983">Size</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4337992">sh</span><span class="op" id="4337994">.</span><span class="ident" id="4337995">Offset</span>&nbsp;<span class="op" id="4338002">=</span>&nbsp;<span class="ident" id="4338004">sh64</span><span class="op" id="4338008">.</span><span class="ident" id="4338009">Offset</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338020">sh</span><span class="op" id="4338022">.</span><span class="ident" id="4338023">Align</span>&nbsp;<span class="op" id="4338029">=</span>&nbsp;<span class="ident" id="4338031">sh64</span><span class="op" id="4338035">.</span><span class="ident" id="4338036">Align</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338046">sh</span><span class="op" id="4338048">.</span><span class="ident" id="4338049">Reloff</span>&nbsp;<span class="op" id="4338056">=</span>&nbsp;<span class="ident" id="4338058">sh64</span><span class="op" id="4338062">.</span><span class="ident" id="4338063">Reloff</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338074">sh</span><span class="op" id="4338076">.</span><span class="ident" id="4338077">Nreloc</span>&nbsp;<span class="op" id="4338084">=</span>&nbsp;<span class="ident" id="4338086">sh64</span><span class="op" id="4338090">.</span><span class="ident" id="4338091">Nreloc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338102">sh</span><span class="op" id="4338104">.</span><span class="ident" id="4338105">Flags</span>&nbsp;<span class="op" id="4338111">=</span>&nbsp;<span class="ident" id="4338113">sh64</span><span class="op" id="4338117">.</span><span class="ident" id="4338118">Flags</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338128">f</span><span class="op" id="4338129">.</span><span class="ident" id="4338130">pushSection</span><span class="op" id="4338141">(</span><span class="ident" id="4338142">sh</span><span class="op" id="4338144">,</span>&nbsp;<span class="ident" id="4338146">r</span><span class="op" id="4338147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338152">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338160">if</span>&nbsp;<span class="ident" id="4338163">s</span>&nbsp;<span class="op" id="4338165">!=</span>&nbsp;<span class="ident" id="4338168">nil</span>&nbsp;<span class="op" id="4338172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338177">s</span><span class="op" id="4338178">.</span><span class="ident" id="4338179">sr</span>&nbsp;<span class="op" id="4338182">=</span>&nbsp;<span class="ident" id="4338184">io</span><span class="op" id="4338186">.</span><span class="ident" id="4338187">NewSectionReader</span><span class="op" id="4338203">(</span><span class="ident" id="4338204">r</span><span class="op" id="4338205">,</span>&nbsp;<span class="ident" id="4338207">int64</span><span class="op" id="4338212">(</span><span class="ident" id="4338213">s</span><span class="op" id="4338214">.</span><span class="ident" id="4338215">Offset</span><span class="op" id="4338221">)</span><span class="op" id="4338222">,</span>&nbsp;<span class="ident" id="4338224">int64</span><span class="op" id="4338229">(</span><span class="ident" id="4338230">s</span><span class="op" id="4338231">.</span><span class="ident" id="4338232">Filesz</span><span class="op" id="4338238">)</span><span class="op" id="4338239">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338244">s</span><span class="op" id="4338245">.</span><span class="ident" id="4338246">ReaderAt</span>&nbsp;<span class="op" id="4338255">=</span>&nbsp;<span class="ident" id="4338257">s</span><span class="op" id="4338258">.</span><span class="ident" id="4338259">sr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338264">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338270">return</span>&nbsp;<span class="ident" id="4338277">f</span><span class="op" id="4338278">,</span>&nbsp;<span class="ident" id="4338280">nil</span><br>
<span class="lineno"></span><span class="op" id="4338284">}</span><br>
<span class="lineno">400</span><br>
<span class="lineno"></span><span class="keyword" id="4338287">func</span>&nbsp;<span class="op" id="4338292">(</span><span class="ident" id="4338293">f</span>&nbsp;<span class="op" id="4338295">*</span><span class="ident" id="4338296">File</span><span class="op" id="4338300">)</span>&nbsp;<span class="ident" id="4338302">parseSymtab</span><span class="op" id="4338313">(</span><span class="ident" id="4338314">symdat</span><span class="op" id="4338320">,</span>&nbsp;<span class="ident" id="4338322">strtab</span><span class="op" id="4338328">,</span>&nbsp;<span class="ident" id="4338330">cmddat</span>&nbsp;<span class="op" id="4338337">[</span><span class="op" id="4338338">]</span><span class="builtintype" id="4338339">byte</span><span class="op" id="4338343">,</span>&nbsp;<span class="ident" id="4338345">hdr</span>&nbsp;<span class="op" id="4338349">*</span><span class="ident" id="4338350">SymtabCmd</span><span class="op" id="4338359">,</span>&nbsp;<span class="ident" id="4338361">offset</span>&nbsp;<span class="ident" id="4338368">int64</span><span class="op" id="4338373">)</span>&nbsp;<span class="op" id="4338375">(</span><span class="op" id="4338376">*</span><span class="ident" id="4338377">Symtab</span><span class="op" id="4338383">,</span>&nbsp;<span class="builtintype" id="4338385">error</span><span class="op" id="4338390">)</span>&nbsp;<span class="op" id="4338392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338395">bo</span>&nbsp;<span class="op" id="4338398">:=</span>&nbsp;<span class="ident" id="4338401">f</span><span class="op" id="4338402">.</span><span class="ident" id="4338403">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338414">symtab</span>&nbsp;<span class="op" id="4338421">:=</span>&nbsp;<span class="builtinfunc" id="4338424">make</span><span class="op" id="4338428">(</span><span class="op" id="4338429">[</span><span class="op" id="4338430">]</span><span class="ident" id="4338431">Symbol</span><span class="op" id="4338437">,</span>&nbsp;<span class="ident" id="4338439">hdr</span><span class="op" id="4338442">.</span><span class="ident" id="4338443">Nsyms</span><span class="op" id="4338448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338451">b</span>&nbsp;<span class="op" id="4338453">:=</span>&nbsp;<span class="ident" id="4338456">bytes</span><span class="op" id="4338461">.</span><span class="ident" id="4338462">NewReader</span><span class="op" id="4338471">(</span><span class="ident" id="4338472">symdat</span><span class="op" id="4338478">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338481">for</span>&nbsp;<span class="ident" id="4338485">i</span>&nbsp;<span class="op" id="4338487">:=</span>&nbsp;<span class="keyword" id="4338490">range</span>&nbsp;<span class="ident" id="4338496">symtab</span>&nbsp;<span class="op" id="4338503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338507">var</span>&nbsp;<span class="ident" id="4338511">n</span>&nbsp;<span class="ident" id="4338513">Nlist64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338523">if</span>&nbsp;<span class="ident" id="4338526">f</span><span class="op" id="4338527">.</span><span class="ident" id="4338528">Magic</span>&nbsp;<span class="op" id="4338534">==</span>&nbsp;<span class="ident" id="4338537">Magic64</span>&nbsp;<span class="op" id="4338545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338550">if</span>&nbsp;<span class="ident" id="4338553">err</span>&nbsp;<span class="op" id="4338557">:=</span>&nbsp;<span class="ident" id="4338560">binary</span><span class="op" id="4338566">.</span><span class="ident" id="4338567">Read</span><span class="op" id="4338571">(</span><span class="ident" id="4338572">b</span><span class="op" id="4338573">,</span>&nbsp;<span class="ident" id="4338575">bo</span><span class="op" id="4338577">,</span>&nbsp;<span class="op" id="4338579">&amp;</span><span class="ident" id="4338580">n</span><span class="op" id="4338581">)</span><span class="op" id="4338582">;</span>&nbsp;<span class="ident" id="4338584">err</span>&nbsp;<span class="op" id="4338588">!=</span>&nbsp;<span class="ident" id="4338591">nil</span>&nbsp;<span class="op" id="4338595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338601">return</span>&nbsp;<span class="ident" id="4338608">nil</span><span class="op" id="4338611">,</span>&nbsp;<span class="ident" id="4338613">err</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338624">}</span>&nbsp;<span class="keyword" id="4338626">else</span>&nbsp;<span class="op" id="4338631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338636">var</span>&nbsp;<span class="ident" id="4338640">n32</span>&nbsp;<span class="ident" id="4338644">Nlist32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338655">if</span>&nbsp;<span class="ident" id="4338658">err</span>&nbsp;<span class="op" id="4338662">:=</span>&nbsp;<span class="ident" id="4338665">binary</span><span class="op" id="4338671">.</span><span class="ident" id="4338672">Read</span><span class="op" id="4338676">(</span><span class="ident" id="4338677">b</span><span class="op" id="4338678">,</span>&nbsp;<span class="ident" id="4338680">bo</span><span class="op" id="4338682">,</span>&nbsp;<span class="op" id="4338684">&amp;</span><span class="ident" id="4338685">n32</span><span class="op" id="4338688">)</span><span class="op" id="4338689">;</span>&nbsp;<span class="ident" id="4338691">err</span>&nbsp;<span class="op" id="4338695">!=</span>&nbsp;<span class="ident" id="4338698">nil</span>&nbsp;<span class="op" id="4338702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338708">return</span>&nbsp;<span class="ident" id="4338715">nil</span><span class="op" id="4338718">,</span>&nbsp;<span class="ident" id="4338720">err</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338732">n</span><span class="op" id="4338733">.</span><span class="ident" id="4338734">Name</span>&nbsp;<span class="op" id="4338739">=</span>&nbsp;<span class="ident" id="4338741">n32</span><span class="op" id="4338744">.</span><span class="ident" id="4338745">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338753">n</span><span class="op" id="4338754">.</span><span class="ident" id="4338755">Type</span>&nbsp;<span class="op" id="4338760">=</span>&nbsp;<span class="ident" id="4338762">n32</span><span class="op" id="4338765">.</span><span class="ident" id="4338766">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338774">n</span><span class="op" id="4338775">.</span><span class="ident" id="4338776">Sect</span>&nbsp;<span class="op" id="4338781">=</span>&nbsp;<span class="ident" id="4338783">n32</span><span class="op" id="4338786">.</span><span class="ident" id="4338787">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338795">n</span><span class="op" id="4338796">.</span><span class="ident" id="4338797">Desc</span>&nbsp;<span class="op" id="4338802">=</span>&nbsp;<span class="ident" id="4338804">n32</span><span class="op" id="4338807">.</span><span class="ident" id="4338808">Desc</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338816">n</span><span class="op" id="4338817">.</span><span class="ident" id="4338818">Value</span>&nbsp;<span class="op" id="4338824">=</span>&nbsp;<span class="ident" id="4338826">uint64</span><span class="op" id="4338832">(</span><span class="ident" id="4338833">n32</span><span class="op" id="4338836">.</span><span class="ident" id="4338837">Value</span><span class="op" id="4338842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338850">sym</span>&nbsp;<span class="op" id="4338854">:=</span>&nbsp;<span class="op" id="4338857">&amp;</span><span class="ident" id="4338858">symtab</span><span class="op" id="4338864">[</span><span class="ident" id="4338865">i</span><span class="op" id="4338866">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338870">if</span>&nbsp;<span class="ident" id="4338873">n</span><span class="op" id="4338874">.</span><span class="ident" id="4338875">Name</span>&nbsp;<span class="op" id="4338880">&gt;=</span>&nbsp;<span class="builtintype" id="4338883">uint32</span><span class="op" id="4338889">(</span><span class="builtinfunc" id="4338890">len</span><span class="op" id="4338893">(</span><span class="ident" id="4338894">strtab</span><span class="op" id="4338900">)</span><span class="op" id="4338901">)</span>&nbsp;<span class="op" id="4338903">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4338908">return</span>&nbsp;<span class="ident" id="4338915">nil</span><span class="op" id="4338918">,</span>&nbsp;<span class="op" id="4338920">&amp;</span><span class="ident" id="4338921">FormatError</span><span class="op" id="4338932">{</span><span class="ident" id="4338933">offset</span><span class="op" id="4338939">,</span>&nbsp;<span class="string" id="4338941">&#34;invalid&nbsp;name&nbsp;in&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="4338971">,</span>&nbsp;<span class="ident" id="4338973">n</span><span class="op" id="4338974">.</span><span class="ident" id="4338975">Name</span><span class="op" id="4338979">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4338983">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4338987">sym</span><span class="op" id="4338990">.</span><span class="ident" id="4338991">Name</span>&nbsp;<span class="op" id="4338996">=</span>&nbsp;<span class="ident" id="4338998">cstring</span><span class="op" id="4339005">(</span><span class="ident" id="4339006">strtab</span><span class="op" id="4339012">[</span><span class="ident" id="4339013">n</span><span class="op" id="4339014">.</span><span class="ident" id="4339015">Name</span><span class="op" id="4339019">:</span><span class="op" id="4339020">]</span><span class="op" id="4339021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339025">sym</span><span class="op" id="4339028">.</span><span class="ident" id="4339029">Type</span>&nbsp;<span class="op" id="4339034">=</span>&nbsp;<span class="ident" id="4339036">n</span><span class="op" id="4339037">.</span><span class="ident" id="4339038">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339045">sym</span><span class="op" id="4339048">.</span><span class="ident" id="4339049">Sect</span>&nbsp;<span class="op" id="4339054">=</span>&nbsp;<span class="ident" id="4339056">n</span><span class="op" id="4339057">.</span><span class="ident" id="4339058">Sect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339065">sym</span><span class="op" id="4339068">.</span><span class="ident" id="4339069">Desc</span>&nbsp;<span class="op" id="4339074">=</span>&nbsp;<span class="ident" id="4339076">n</span><span class="op" id="4339077">.</span><span class="ident" id="4339078">Desc</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339085">sym</span><span class="op" id="4339088">.</span><span class="ident" id="4339089">Value</span>&nbsp;<span class="op" id="4339095">=</span>&nbsp;<span class="ident" id="4339097">n</span><span class="op" id="4339098">.</span><span class="ident" id="4339099">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339106">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339109">st</span>&nbsp;<span class="op" id="4339112">:=</span>&nbsp;<span class="builtinfunc" id="4339115">new</span><span class="op" id="4339118">(</span><span class="ident" id="4339119">Symtab</span><span class="op" id="4339125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339128">st</span><span class="op" id="4339130">.</span><span class="ident" id="4339131">LoadBytes</span>&nbsp;<span class="op" id="4339141">=</span>&nbsp;<span class="ident" id="4339143">LoadBytes</span><span class="op" id="4339152">(</span><span class="ident" id="4339153">cmddat</span><span class="op" id="4339159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339162">st</span><span class="op" id="4339164">.</span><span class="ident" id="4339165">Syms</span>&nbsp;<span class="op" id="4339170">=</span>&nbsp;<span class="ident" id="4339172">symtab</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339180">return</span>&nbsp;<span class="ident" id="4339187">st</span><span class="op" id="4339189">,</span>&nbsp;<span class="ident" id="4339191">nil</span><br>
<span class="lineno"></span><span class="op" id="4339195">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4339198">func</span>&nbsp;<span class="op" id="4339203">(</span><span class="ident" id="4339204">f</span>&nbsp;<span class="op" id="4339206">*</span><span class="ident" id="4339207">File</span><span class="op" id="4339211">)</span>&nbsp;<span class="ident" id="4339213">pushSection</span><span class="op" id="4339224">(</span><span class="ident" id="4339225">sh</span>&nbsp;<span class="op" id="4339228">*</span><span class="ident" id="4339229">Section</span><span class="op" id="4339236">,</span>&nbsp;<span class="ident" id="4339238">r</span>&nbsp;<span class="ident" id="4339240">io</span><span class="op" id="4339242">.</span><span class="ident" id="4339243">ReaderAt</span><span class="op" id="4339251">)</span>&nbsp;<span class="op" id="4339253">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339256">f</span><span class="op" id="4339257">.</span><span class="ident" id="4339258">Sections</span>&nbsp;<span class="op" id="4339267">=</span>&nbsp;<span class="builtinfunc" id="4339269">append</span><span class="op" id="4339275">(</span><span class="ident" id="4339276">f</span><span class="op" id="4339277">.</span><span class="ident" id="4339278">Sections</span><span class="op" id="4339286">,</span>&nbsp;<span class="ident" id="4339288">sh</span><span class="op" id="4339290">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339293">sh</span><span class="op" id="4339295">.</span><span class="ident" id="4339296">sr</span>&nbsp;<span class="op" id="4339299">=</span>&nbsp;<span class="ident" id="4339301">io</span><span class="op" id="4339303">.</span><span class="ident" id="4339304">NewSectionReader</span><span class="op" id="4339320">(</span><span class="ident" id="4339321">r</span><span class="op" id="4339322">,</span>&nbsp;<span class="ident" id="4339324">int64</span><span class="op" id="4339329">(</span><span class="ident" id="4339330">sh</span><span class="op" id="4339332">.</span><span class="ident" id="4339333">Offset</span><span class="op" id="4339339">)</span><span class="op" id="4339340">,</span>&nbsp;<span class="ident" id="4339342">int64</span><span class="op" id="4339347">(</span><span class="ident" id="4339348">sh</span><span class="op" id="4339350">.</span><span class="ident" id="4339351">Size</span><span class="op" id="4339355">)</span><span class="op" id="4339356">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4339359">sh</span><span class="op" id="4339361">.</span><span class="ident" id="4339362">ReaderAt</span>&nbsp;<span class="op" id="4339371">=</span>&nbsp;<span class="ident" id="4339373">sh</span><span class="op" id="4339375">.</span><span class="ident" id="4339376">sr</span><br>
<span class="lineno"></span><span class="op" id="4339379">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4339382">func</span>&nbsp;<span class="ident" id="4339387">cstring</span><span class="op" id="4339394">(</span><span class="ident" id="4339395">b</span>&nbsp;<span class="op" id="4339397">[</span><span class="op" id="4339398">]</span><span class="builtintype" id="4339399">byte</span><span class="op" id="4339403">)</span>&nbsp;<span class="builtintype" id="4339405">string</span>&nbsp;<span class="op" id="4339412">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339415">var</span>&nbsp;<span class="ident" id="4339419">i</span>&nbsp;<span class="builtintype" id="4339421">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339426">for</span>&nbsp;<span class="ident" id="4339430">i</span>&nbsp;<span class="op" id="4339432">=</span>&nbsp;<span class="num" id="4339434">0</span><span class="op" id="4339435">;</span>&nbsp;<span class="ident" id="4339437">i</span>&nbsp;<span class="op" id="4339439">&lt;</span>&nbsp;<span class="builtinfunc" id="4339441">len</span><span class="op" id="4339444">(</span><span class="ident" id="4339445">b</span><span class="op" id="4339446">)</span>&nbsp;<span class="op" id="4339448">&amp;&amp;</span>&nbsp;<span class="ident" id="4339451">b</span><span class="op" id="4339452">[</span><span class="ident" id="4339453">i</span><span class="op" id="4339454">]</span>&nbsp;<span class="op" id="4339456">!=</span>&nbsp;<span class="num" id="4339459">0</span><span class="op" id="4339460">;</span>&nbsp;<span class="ident" id="4339462">i</span><span class="op" id="4339463">++</span>&nbsp;<span class="op" id="4339466">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339472">return</span>&nbsp;<span class="builtintype" id="4339479">string</span><span class="op" id="4339485">(</span><span class="ident" id="4339486">b</span><span class="op" id="4339487">[</span><span class="num" id="4339488">0</span><span class="op" id="4339489">:</span><span class="ident" id="4339490">i</span><span class="op" id="4339491">]</span><span class="op" id="4339492">)</span><br>
<span class="lineno"></span><span class="op" id="4339494">}</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span><span class="comment" id="4339497">//&nbsp;Segment&nbsp;returns&nbsp;the&nbsp;first&nbsp;Segment&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such&nbsp;segment&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="4339589">func</span>&nbsp;<span class="op" id="4339594">(</span><span class="ident" id="4339595">f</span>&nbsp;<span class="op" id="4339597">*</span><span class="ident" id="4339598">File</span><span class="op" id="4339602">)</span>&nbsp;<span class="ident" id="4339604">Segment</span><span class="op" id="4339611">(</span><span class="ident" id="4339612">name</span>&nbsp;<span class="builtintype" id="4339617">string</span><span class="op" id="4339623">)</span>&nbsp;<span class="op" id="4339625">*</span><span class="ident" id="4339626">Segment</span>&nbsp;<span class="op" id="4339634">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339637">for</span>&nbsp;<span class="ident" id="4339641">_</span><span class="op" id="4339642">,</span>&nbsp;<span class="ident" id="4339644">l</span>&nbsp;<span class="op" id="4339646">:=</span>&nbsp;<span class="keyword" id="4339649">range</span>&nbsp;<span class="ident" id="4339655">f</span><span class="op" id="4339656">.</span><span class="ident" id="4339657">Loads</span>&nbsp;<span class="op" id="4339663">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339667">if</span>&nbsp;<span class="ident" id="4339670">s</span><span class="op" id="4339671">,</span>&nbsp;<span class="ident" id="4339673">ok</span>&nbsp;<span class="op" id="4339676">:=</span>&nbsp;<span class="ident" id="4339679">l</span><span class="op" id="4339680">.</span><span class="op" id="4339681">(</span><span class="op" id="4339682">*</span><span class="ident" id="4339683">Segment</span><span class="op" id="4339690">)</span><span class="op" id="4339691">;</span>&nbsp;<span class="ident" id="4339693">ok</span>&nbsp;<span class="op" id="4339696">&amp;&amp;</span>&nbsp;<span class="ident" id="4339699">s</span><span class="op" id="4339700">.</span><span class="ident" id="4339701">Name</span>&nbsp;<span class="op" id="4339706">==</span>&nbsp;<span class="ident" id="4339709">name</span>&nbsp;<span class="op" id="4339714">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339719">return</span>&nbsp;<span class="ident" id="4339726">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339730">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339736">return</span>&nbsp;<span class="ident" id="4339743">nil</span><br>
<span class="lineno"></span><span class="op" id="4339747">}</span><br>
<span class="lineno">460</span><br>
<span class="lineno"></span><span class="comment" id="4339750">//&nbsp;Section&nbsp;returns&nbsp;the&nbsp;first&nbsp;section&nbsp;with&nbsp;the&nbsp;given&nbsp;name,&nbsp;or&nbsp;nil&nbsp;if&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="4339826">//&nbsp;section&nbsp;exists.</span><br>
<span class="lineno"></span><span class="keyword" id="4339845">func</span>&nbsp;<span class="op" id="4339850">(</span><span class="ident" id="4339851">f</span>&nbsp;<span class="op" id="4339853">*</span><span class="ident" id="4339854">File</span><span class="op" id="4339858">)</span>&nbsp;<span class="ident" id="4339860">Section</span><span class="op" id="4339867">(</span><span class="ident" id="4339868">name</span>&nbsp;<span class="builtintype" id="4339873">string</span><span class="op" id="4339879">)</span>&nbsp;<span class="op" id="4339881">*</span><span class="ident" id="4339882">Section</span>&nbsp;<span class="op" id="4339890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339893">for</span>&nbsp;<span class="ident" id="4339897">_</span><span class="op" id="4339898">,</span>&nbsp;<span class="ident" id="4339900">s</span>&nbsp;<span class="op" id="4339902">:=</span>&nbsp;<span class="keyword" id="4339905">range</span>&nbsp;<span class="ident" id="4339911">f</span><span class="op" id="4339912">.</span><span class="ident" id="4339913">Sections</span>&nbsp;<span class="op" id="4339922">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339926">if</span>&nbsp;<span class="ident" id="4339929">s</span><span class="op" id="4339930">.</span><span class="ident" id="4339931">Name</span>&nbsp;<span class="op" id="4339936">==</span>&nbsp;<span class="ident" id="4339939">name</span>&nbsp;<span class="op" id="4339944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339949">return</span>&nbsp;<span class="ident" id="4339956">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4339963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4339966">return</span>&nbsp;<span class="ident" id="4339973">nil</span><br>
<span class="lineno">470</span><span class="op" id="4339977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4339980">//&nbsp;DWARF&nbsp;returns&nbsp;the&nbsp;DWARF&nbsp;debug&nbsp;information&nbsp;for&nbsp;the&nbsp;Mach-O&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="4340046">func</span>&nbsp;<span class="op" id="4340051">(</span><span class="ident" id="4340052">f</span>&nbsp;<span class="op" id="4340054">*</span><span class="ident" id="4340055">File</span><span class="op" id="4340059">)</span>&nbsp;<span class="ident" id="4340061">DWARF</span><span class="op" id="4340066">(</span><span class="op" id="4340067">)</span>&nbsp;<span class="op" id="4340069">(</span><span class="op" id="4340070">*</span><span class="ident" id="4340071">dwarf</span><span class="op" id="4340076">.</span><span class="ident" id="4340077">Data</span><span class="op" id="4340081">,</span>&nbsp;<span class="builtintype" id="4340083">error</span><span class="op" id="4340088">)</span>&nbsp;<span class="op" id="4340090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340093">//&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;DWARF&nbsp;sections,&nbsp;but&nbsp;these</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340144">//&nbsp;are&nbsp;the&nbsp;required&nbsp;ones,&nbsp;and&nbsp;the&nbsp;debug/dwarf&nbsp;package</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="4340199">//&nbsp;does&nbsp;not&nbsp;use&nbsp;the&nbsp;others,&nbsp;so&nbsp;don&#39;t&nbsp;bother&nbsp;loading&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340258">var</span>&nbsp;<span class="ident" id="4340262">names</span>&nbsp;<span class="op" id="4340268">=</span>&nbsp;<span class="op" id="4340270">[</span><span class="op" id="4340271">...</span><span class="op" id="4340274">]</span><span class="builtintype" id="4340275">string</span><span class="op" id="4340281">{</span><span class="string" id="4340282">&#34;abbrev&#34;</span><span class="op" id="4340290">,</span>&nbsp;<span class="string" id="4340292">&#34;info&#34;</span><span class="op" id="4340298">,</span>&nbsp;<span class="string" id="4340300">&#34;str&#34;</span><span class="op" id="4340305">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340308">var</span>&nbsp;<span class="ident" id="4340312">dat</span>&nbsp;<span class="op" id="4340316">[</span><span class="builtinfunc" id="4340317">len</span><span class="op" id="4340320">(</span><span class="ident" id="4340321">names</span><span class="op" id="4340326">)</span><span class="op" id="4340327">]</span><span class="op" id="4340328">[</span><span class="op" id="4340329">]</span><span class="builtintype" id="4340330">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340336">for</span>&nbsp;<span class="ident" id="4340340">i</span><span class="op" id="4340341">,</span>&nbsp;<span class="ident" id="4340343">name</span>&nbsp;<span class="op" id="4340348">:=</span>&nbsp;<span class="keyword" id="4340351">range</span>&nbsp;<span class="ident" id="4340357">names</span>&nbsp;<span class="op" id="4340363">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340367">name</span>&nbsp;<span class="op" id="4340372">=</span>&nbsp;<span class="string" id="4340374">&#34;__debug_&#34;</span>&nbsp;<span class="op" id="4340385">+</span>&nbsp;<span class="ident" id="4340387">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340394">s</span>&nbsp;<span class="op" id="4340396">:=</span>&nbsp;<span class="ident" id="4340399">f</span><span class="op" id="4340400">.</span><span class="ident" id="4340401">Section</span><span class="op" id="4340408">(</span><span class="ident" id="4340409">name</span><span class="op" id="4340413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340417">if</span>&nbsp;<span class="ident" id="4340420">s</span>&nbsp;<span class="op" id="4340422">==</span>&nbsp;<span class="ident" id="4340425">nil</span>&nbsp;<span class="op" id="4340429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340434">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340445">}</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340449">b</span><span class="op" id="4340450">,</span>&nbsp;<span class="ident" id="4340452">err</span>&nbsp;<span class="op" id="4340456">:=</span>&nbsp;<span class="ident" id="4340459">s</span><span class="op" id="4340460">.</span><span class="ident" id="4340461">Data</span><span class="op" id="4340465">(</span><span class="op" id="4340466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340470">if</span>&nbsp;<span class="ident" id="4340473">err</span>&nbsp;<span class="op" id="4340477">!=</span>&nbsp;<span class="ident" id="4340480">nil</span>&nbsp;<span class="op" id="4340484">&amp;&amp;</span>&nbsp;<span class="ident" id="4340487">uint64</span><span class="op" id="4340493">(</span><span class="builtinfunc" id="4340494">len</span><span class="op" id="4340497">(</span><span class="ident" id="4340498">b</span><span class="op" id="4340499">)</span><span class="op" id="4340500">)</span>&nbsp;<span class="op" id="4340502">&lt;</span>&nbsp;<span class="ident" id="4340504">s</span><span class="op" id="4340505">.</span><span class="ident" id="4340506">Size</span>&nbsp;<span class="op" id="4340511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340516">return</span>&nbsp;<span class="ident" id="4340523">nil</span><span class="op" id="4340526">,</span>&nbsp;<span class="ident" id="4340528">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340534">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340538">dat</span><span class="op" id="4340541">[</span><span class="ident" id="4340542">i</span><span class="op" id="4340543">]</span>&nbsp;<span class="op" id="4340545">=</span>&nbsp;<span class="ident" id="4340547">b</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340550">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340554">abbrev</span><span class="op" id="4340560">,</span>&nbsp;<span class="ident" id="4340562">info</span><span class="op" id="4340566">,</span>&nbsp;<span class="ident" id="4340568">str</span>&nbsp;<span class="op" id="4340572">:=</span>&nbsp;<span class="ident" id="4340575">dat</span><span class="op" id="4340578">[</span><span class="num" id="4340579">0</span><span class="op" id="4340580">]</span><span class="op" id="4340581">,</span>&nbsp;<span class="ident" id="4340583">dat</span><span class="op" id="4340586">[</span><span class="num" id="4340587">1</span><span class="op" id="4340588">]</span><span class="op" id="4340589">,</span>&nbsp;<span class="ident" id="4340591">dat</span><span class="op" id="4340594">[</span><span class="num" id="4340595">2</span><span class="op" id="4340596">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340599">return</span>&nbsp;<span class="ident" id="4340606">dwarf</span><span class="op" id="4340611">.</span><span class="ident" id="4340612">New</span><span class="op" id="4340615">(</span><span class="ident" id="4340616">abbrev</span><span class="op" id="4340622">,</span>&nbsp;<span class="ident" id="4340624">nil</span><span class="op" id="4340627">,</span>&nbsp;<span class="ident" id="4340629">nil</span><span class="op" id="4340632">,</span>&nbsp;<span class="ident" id="4340634">info</span><span class="op" id="4340638">,</span>&nbsp;<span class="ident" id="4340640">nil</span><span class="op" id="4340643">,</span>&nbsp;<span class="ident" id="4340645">nil</span><span class="op" id="4340648">,</span>&nbsp;<span class="ident" id="4340650">nil</span><span class="op" id="4340653">,</span>&nbsp;<span class="ident" id="4340655">str</span><span class="op" id="4340658">)</span><br>
<span class="lineno"></span><span class="op" id="4340660">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span><span class="comment" id="4340663">//&nbsp;ImportedSymbols&nbsp;returns&nbsp;the&nbsp;names&nbsp;of&nbsp;all&nbsp;symbols</span><br>
<span class="lineno"></span><span class="comment" id="4340715">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4340770">//&nbsp;satisfied&nbsp;by&nbsp;other&nbsp;libraries&nbsp;at&nbsp;dynamic&nbsp;load&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="4340824">func</span>&nbsp;<span class="op" id="4340829">(</span><span class="ident" id="4340830">f</span>&nbsp;<span class="op" id="4340832">*</span><span class="ident" id="4340833">File</span><span class="op" id="4340837">)</span>&nbsp;<span class="ident" id="4340839">ImportedSymbols</span><span class="op" id="4340854">(</span><span class="op" id="4340855">)</span>&nbsp;<span class="op" id="4340857">(</span><span class="op" id="4340858">[</span><span class="op" id="4340859">]</span><span class="builtintype" id="4340860">string</span><span class="op" id="4340866">,</span>&nbsp;<span class="builtintype" id="4340868">error</span><span class="op" id="4340873">)</span>&nbsp;<span class="op" id="4340875">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340878">if</span>&nbsp;<span class="ident" id="4340881">f</span><span class="op" id="4340882">.</span><span class="ident" id="4340883">Dysymtab</span>&nbsp;<span class="op" id="4340892">==</span>&nbsp;<span class="ident" id="4340895">nil</span>&nbsp;<span class="op" id="4340899">||</span>&nbsp;<span class="ident" id="4340902">f</span><span class="op" id="4340903">.</span><span class="ident" id="4340904">Symtab</span>&nbsp;<span class="op" id="4340911">==</span>&nbsp;<span class="ident" id="4340914">nil</span>&nbsp;<span class="op" id="4340918">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4340922">return</span>&nbsp;<span class="ident" id="4340929">nil</span><span class="op" id="4340932">,</span>&nbsp;<span class="op" id="4340934">&amp;</span><span class="ident" id="4340935">FormatError</span><span class="op" id="4340946">{</span><span class="num" id="4340947">0</span><span class="op" id="4340948">,</span>&nbsp;<span class="string" id="4340950">&#34;missing&nbsp;symbol&nbsp;table&#34;</span><span class="op" id="4340972">,</span>&nbsp;<span class="ident" id="4340974">nil</span><span class="op" id="4340977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4340980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4340984">st</span>&nbsp;<span class="op" id="4340987">:=</span>&nbsp;<span class="ident" id="4340990">f</span><span class="op" id="4340991">.</span><span class="ident" id="4340992">Symtab</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341000">dt</span>&nbsp;<span class="op" id="4341003">:=</span>&nbsp;<span class="ident" id="4341006">f</span><span class="op" id="4341007">.</span><span class="ident" id="4341008">Dysymtab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341018">var</span>&nbsp;<span class="ident" id="4341022">all</span>&nbsp;<span class="op" id="4341026">[</span><span class="op" id="4341027">]</span><span class="builtintype" id="4341028">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341036">for</span>&nbsp;<span class="ident" id="4341040">_</span><span class="op" id="4341041">,</span>&nbsp;<span class="ident" id="4341043">s</span>&nbsp;<span class="op" id="4341045">:=</span>&nbsp;<span class="keyword" id="4341048">range</span>&nbsp;<span class="ident" id="4341054">st</span><span class="op" id="4341056">.</span><span class="ident" id="4341057">Syms</span><span class="op" id="4341061">[</span><span class="ident" id="4341062">dt</span><span class="op" id="4341064">.</span><span class="ident" id="4341065">Iundefsym</span>&nbsp;<span class="op" id="4341075">:</span>&nbsp;<span class="ident" id="4341077">dt</span><span class="op" id="4341079">.</span><span class="ident" id="4341080">Iundefsym</span><span class="op" id="4341089">+</span><span class="ident" id="4341090">dt</span><span class="op" id="4341092">.</span><span class="ident" id="4341093">Nundefsym</span><span class="op" id="4341102">]</span>&nbsp;<span class="op" id="4341104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341108">all</span>&nbsp;<span class="op" id="4341112">=</span>&nbsp;<span class="builtinfunc" id="4341114">append</span><span class="op" id="4341120">(</span><span class="ident" id="4341121">all</span><span class="op" id="4341124">,</span>&nbsp;<span class="ident" id="4341126">s</span><span class="op" id="4341127">.</span><span class="ident" id="4341128">Name</span><span class="op" id="4341132">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341135">}</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341138">return</span>&nbsp;<span class="ident" id="4341145">all</span><span class="op" id="4341148">,</span>&nbsp;<span class="ident" id="4341150">nil</span><br>
<span class="lineno"></span><span class="op" id="4341154">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4341157">//&nbsp;ImportedLibraries&nbsp;returns&nbsp;the&nbsp;paths&nbsp;of&nbsp;all&nbsp;libraries</span><br>
<span class="lineno"></span><span class="comment" id="4341213">//&nbsp;referred&nbsp;to&nbsp;by&nbsp;the&nbsp;binary&nbsp;f&nbsp;that&nbsp;are&nbsp;expected&nbsp;to&nbsp;be</span><br>
<span class="lineno">515</span><span class="comment" id="4341268">//&nbsp;linked&nbsp;with&nbsp;the&nbsp;binary&nbsp;at&nbsp;dynamic&nbsp;link&nbsp;time.</span><br>
<span class="lineno"></span><span class="keyword" id="4341316">func</span>&nbsp;<span class="op" id="4341321">(</span><span class="ident" id="4341322">f</span>&nbsp;<span class="op" id="4341324">*</span><span class="ident" id="4341325">File</span><span class="op" id="4341329">)</span>&nbsp;<span class="ident" id="4341331">ImportedLibraries</span><span class="op" id="4341348">(</span><span class="op" id="4341349">)</span>&nbsp;<span class="op" id="4341351">(</span><span class="op" id="4341352">[</span><span class="op" id="4341353">]</span><span class="builtintype" id="4341354">string</span><span class="op" id="4341360">,</span>&nbsp;<span class="builtintype" id="4341362">error</span><span class="op" id="4341367">)</span>&nbsp;<span class="op" id="4341369">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341372">var</span>&nbsp;<span class="ident" id="4341376">all</span>&nbsp;<span class="op" id="4341380">[</span><span class="op" id="4341381">]</span><span class="builtintype" id="4341382">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341390">for</span>&nbsp;<span class="ident" id="4341394">_</span><span class="op" id="4341395">,</span>&nbsp;<span class="ident" id="4341397">l</span>&nbsp;<span class="op" id="4341399">:=</span>&nbsp;<span class="keyword" id="4341402">range</span>&nbsp;<span class="ident" id="4341408">f</span><span class="op" id="4341409">.</span><span class="ident" id="4341410">Loads</span>&nbsp;<span class="op" id="4341416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341420">if</span>&nbsp;<span class="ident" id="4341423">lib</span><span class="op" id="4341426">,</span>&nbsp;<span class="ident" id="4341428">ok</span>&nbsp;<span class="op" id="4341431">:=</span>&nbsp;<span class="ident" id="4341434">l</span><span class="op" id="4341435">.</span><span class="op" id="4341436">(</span><span class="op" id="4341437">*</span><span class="ident" id="4341438">Dylib</span><span class="op" id="4341443">)</span><span class="op" id="4341444">;</span>&nbsp;<span class="ident" id="4341446">ok</span>&nbsp;<span class="op" id="4341449">{</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="4341454">all</span>&nbsp;<span class="op" id="4341458">=</span>&nbsp;<span class="builtinfunc" id="4341460">append</span><span class="op" id="4341466">(</span><span class="ident" id="4341467">all</span><span class="op" id="4341470">,</span>&nbsp;<span class="ident" id="4341472">lib</span><span class="op" id="4341475">.</span><span class="ident" id="4341476">Name</span><span class="op" id="4341480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341484">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="4341487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="4341490">return</span>&nbsp;<span class="ident" id="4341497">all</span><span class="op" id="4341500">,</span>&nbsp;<span class="ident" id="4341502">nil</span><br>
<span class="lineno"></span><span class="op" id="4341506">}</span>
</div>
</body>
</html>
