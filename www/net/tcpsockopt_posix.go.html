<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3460197">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3460253">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3460307">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3460358">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;netbsd&nbsp;openbsd&nbsp;solaris&nbsp;windows</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3460431">package</span>&nbsp;<span class="ident" id="3460439">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3460444">import</span>&nbsp;<span class="op" id="3460451">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3460454">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3460460">&#34;syscall&#34;</span><br>
<span class="lineno"></span><span class="op" id="3460470">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3460473">func</span>&nbsp;<span class="ident" id="3460478">setNoDelay</span><span class="op" id="3460488">(</span><span class="ident" id="3460489">fd</span>&nbsp;<span class="op" id="3460492">*</span><span class="ident" id="3460493">netFD</span><span class="op" id="3460498">,</span>&nbsp;<span class="ident" id="3460500">noDelay</span>&nbsp;<span class="builtintype" id="3460508">bool</span><span class="op" id="3460512">)</span>&nbsp;<span class="builtintype" id="3460514">error</span>&nbsp;<span class="op" id="3460520">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3460523">if</span>&nbsp;<span class="ident" id="3460526">err</span>&nbsp;<span class="op" id="3460530">:=</span>&nbsp;<span class="ident" id="3460533">fd</span><span class="op" id="3460535">.</span><span class="ident" id="3460536">incref</span><span class="op" id="3460542">(</span><span class="op" id="3460543">)</span><span class="op" id="3460544">;</span>&nbsp;<span class="ident" id="3460546">err</span>&nbsp;<span class="op" id="3460550">!=</span>&nbsp;<span class="ident" id="3460553">nil</span>&nbsp;<span class="op" id="3460557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3460561">return</span>&nbsp;<span class="ident" id="3460568">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3460573">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3460576">defer</span>&nbsp;<span class="ident" id="3460582">fd</span><span class="op" id="3460584">.</span><span class="ident" id="3460585">decref</span><span class="op" id="3460591">(</span><span class="op" id="3460592">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3460595">return</span>&nbsp;<span class="ident" id="3460602">os</span><span class="op" id="3460604">.</span><span class="ident" id="3460605">NewSyscallError</span><span class="op" id="3460620">(</span><span class="string" id="3460621">&#34;setsockopt&#34;</span><span class="op" id="3460633">,</span>&nbsp;<span class="ident" id="3460635">syscall</span><span class="op" id="3460642">.</span><span class="ident" id="3460643">SetsockoptInt</span><span class="op" id="3460656">(</span><span class="ident" id="3460657">fd</span><span class="op" id="3460659">.</span><span class="ident" id="3460660">sysfd</span><span class="op" id="3460665">,</span>&nbsp;<span class="ident" id="3460667">syscall</span><span class="op" id="3460674">.</span><span class="ident" id="3460675">IPPROTO_TCP</span><span class="op" id="3460686">,</span>&nbsp;<span class="ident" id="3460688">syscall</span><span class="op" id="3460695">.</span><span class="ident" id="3460696">TCP_NODELAY</span><span class="op" id="3460707">,</span>&nbsp;<span class="ident" id="3460709">boolint</span><span class="op" id="3460716">(</span><span class="ident" id="3460717">noDelay</span><span class="op" id="3460724">)</span><span class="op" id="3460725">)</span><span class="op" id="3460726">)</span><br>
<span class="lineno">20</span><span class="op" id="3460728">}</span>
</div>
</body>
</html>
