<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>lonnie.io/e8vm/asm8</h2>
<ul>
<li><a href="/gostd/lonnie.io/e8vm/asm8/bare_func.go.html">bare_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_file.go.html">build_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_func.go.html">build_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_lib.go.html">build_lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/build_var.go.html">build_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/builder.go.html">builder.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/check_type.go.html">check_type.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_hex.go.html">data_hex.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_nums.go.html">data_nums.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/data_str.go.html">data_str.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/file.go.html">file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_decl.go.html">func_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/func_stmt.go.html">func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst.go.html">inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_all.go.html">inst_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_br.go.html">inst_br.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_imm.go.html">inst_imm.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_jmp.go.html">inst_jmp.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_reg.go.html">inst_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/inst_sys.go.html">inst_sys.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all.go.html">lex_all.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_all_test.go.html">lex_all_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_comment.go.html">lex_comment.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_operand.go.html">lex_operand.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lex_string.go.html">lex_string.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/lib.go.html">lib.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/package.go.html">package.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_arg.go.html">parse_arg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_file.go.html">parse_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func.go.html">parse_func.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_stmt.go.html">parse_func_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_func_test.go.html">parse_func_test.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_inst.go.html">parse_inst.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_label.go.html">parse_label.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_reg.go.html">parse_reg.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_sym.go.html">parse_sym.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var.go.html">parse_var.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parse_var_stmt.go.html">parse_var_stmt.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/parser.go.html">parser.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/single_file.go.html">single_file.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/stmt_lexer.go.html">stmt_lexer.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_scope.go.html">sym_scope.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/sym_table.go.html">sym_table.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/symbol.go.html">symbol.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/token.go.html">token.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_decl.go.html">var_decl.go</a></li>
<li><a href="/gostd/lonnie.io/e8vm/asm8/var_stmt.go.html">var_stmt.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="keyword" id="3643740">package</span>&nbsp;<span class="ident" id="3643748">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3643754">import</span>&nbsp;<span class="op" id="3643761">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643764">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="3643786">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3643789">var</span>&nbsp;<span class="op" id="3643793">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3643796">//&nbsp;op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3643803">opSysMap</span>&nbsp;<span class="op" id="3643812">=</span>&nbsp;<span class="keyword" id="3643814">map</span><span class="op" id="3643817">[</span><span class="builtintype" id="3643818">string</span><span class="op" id="3643824">]</span><span class="builtintype" id="3643825">uint32</span><span class="op" id="3643831">{</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643835">&#34;halt&#34;</span><span class="op" id="3643841">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="3643846">64</span><span class="op" id="3643848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643852">&#34;syscall&#34;</span><span class="op" id="3643861">:</span>&nbsp;<span class="num" id="3643863">65</span><span class="op" id="3643865">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643869">&#34;usermod&#34;</span><span class="op" id="3643878">:</span>&nbsp;<span class="num" id="3643880">66</span><span class="op" id="3643882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643886">&#34;iret&#34;</span><span class="op" id="3643892">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="3643897">68</span><span class="op" id="3643899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3643902">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3643906">//&nbsp;op&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3643917">opSys1Map</span>&nbsp;<span class="op" id="3643927">=</span>&nbsp;<span class="keyword" id="3643929">map</span><span class="op" id="3643932">[</span><span class="builtintype" id="3643933">string</span><span class="op" id="3643939">]</span><span class="builtintype" id="3643940">uint32</span><span class="op" id="3643946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643950">&#34;vtable&#34;</span><span class="op" id="3643958">:</span>&nbsp;<span class="num" id="3643960">67</span><span class="op" id="3643962">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3643966">&#34;cpuid&#34;</span><span class="op" id="3643973">:</span>&nbsp;&nbsp;<span class="num" id="3643976">69</span><span class="op" id="3643978">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3643981">}</span><br>
<span class="lineno"></span><span class="op" id="3643983">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3643986">func</span>&nbsp;<span class="ident" id="3643991">makeInstSys</span><span class="op" id="3644002">(</span><span class="ident" id="3644003">op</span><span class="op" id="3644005">,</span>&nbsp;<span class="ident" id="3644007">reg</span>&nbsp;<span class="builtintype" id="3644011">uint32</span><span class="op" id="3644017">)</span>&nbsp;<span class="op" id="3644019">*</span><span class="ident" id="3644020">inst</span>&nbsp;<span class="op" id="3644025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644028">ret</span>&nbsp;<span class="op" id="3644032">:=</span>&nbsp;<span class="op" id="3644035">(</span><span class="op" id="3644036">(</span><span class="ident" id="3644037">op</span>&nbsp;<span class="op" id="3644040">&amp;</span>&nbsp;<span class="num" id="3644042">0xff</span><span class="op" id="3644046">)</span>&nbsp;<span class="op" id="3644048">&lt;&lt;</span>&nbsp;<span class="num" id="3644051">24</span><span class="op" id="3644053">)</span>&nbsp;<span class="op" id="3644055">|</span>&nbsp;<span class="op" id="3644057">(</span><span class="op" id="3644058">(</span><span class="ident" id="3644059">reg</span>&nbsp;<span class="op" id="3644063">&amp;</span>&nbsp;<span class="num" id="3644065">0x7</span><span class="op" id="3644068">)</span>&nbsp;<span class="op" id="3644070">&lt;&lt;</span>&nbsp;<span class="num" id="3644073">21</span><span class="op" id="3644075">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644078">return</span>&nbsp;<span class="op" id="3644085">&amp;</span><span class="ident" id="3644086">inst</span><span class="op" id="3644090">{</span><span class="ident" id="3644091">inst</span><span class="op" id="3644095">:</span>&nbsp;<span class="ident" id="3644097">ret</span><span class="op" id="3644100">}</span><br>
<span class="lineno"></span><span class="op" id="3644102">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3644105">func</span>&nbsp;<span class="ident" id="3644110">parseInstSys</span><span class="op" id="3644122">(</span><span class="ident" id="3644123">p</span>&nbsp;<span class="op" id="3644125">*</span><span class="ident" id="3644126">parser</span><span class="op" id="3644132">,</span>&nbsp;<span class="ident" id="3644134">ops</span>&nbsp;<span class="op" id="3644138">[</span><span class="op" id="3644139">]</span><span class="op" id="3644140">*</span><span class="ident" id="3644141">lex8</span><span class="op" id="3644145">.</span><span class="ident" id="3644146">Token</span><span class="op" id="3644151">)</span>&nbsp;<span class="op" id="3644153">(</span><span class="op" id="3644154">*</span><span class="ident" id="3644155">inst</span><span class="op" id="3644159">,</span>&nbsp;<span class="builtintype" id="3644161">bool</span><span class="op" id="3644165">)</span>&nbsp;<span class="op" id="3644167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644170">op0</span>&nbsp;<span class="op" id="3644174">:=</span>&nbsp;<span class="ident" id="3644177">ops</span><span class="op" id="3644180">[</span><span class="num" id="3644181">0</span><span class="op" id="3644182">]</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644185">opName</span>&nbsp;<span class="op" id="3644192">:=</span>&nbsp;<span class="ident" id="3644195">op0</span><span class="op" id="3644198">.</span><span class="ident" id="3644199">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644204">args</span>&nbsp;<span class="op" id="3644209">:=</span>&nbsp;<span class="ident" id="3644212">ops</span><span class="op" id="3644215">[</span><span class="num" id="3644216">1</span><span class="op" id="3644217">:</span><span class="op" id="3644218">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644221">var</span>&nbsp;<span class="ident" id="3644225">op</span><span class="op" id="3644227">,</span>&nbsp;<span class="ident" id="3644229">reg</span>&nbsp;<span class="builtintype" id="3644233">uint32</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644242">argCount</span>&nbsp;<span class="op" id="3644251">:=</span>&nbsp;<span class="keyword" id="3644254">func</span><span class="op" id="3644258">(</span><span class="ident" id="3644259">n</span>&nbsp;<span class="builtintype" id="3644261">int</span><span class="op" id="3644264">)</span>&nbsp;<span class="builtintype" id="3644266">bool</span>&nbsp;<span class="op" id="3644271">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644275">if</span>&nbsp;<span class="op" id="3644278">!</span><span class="ident" id="3644279">argCount</span><span class="op" id="3644287">(</span><span class="ident" id="3644288">p</span><span class="op" id="3644289">,</span>&nbsp;<span class="ident" id="3644291">ops</span><span class="op" id="3644294">,</span>&nbsp;<span class="ident" id="3644296">n</span><span class="op" id="3644297">)</span>&nbsp;<span class="op" id="3644299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644304">return</span>&nbsp;<span class="builtintype" id="3644311">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644319">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644324">if</span>&nbsp;<span class="ident" id="3644327">n</span>&nbsp;<span class="op" id="3644329">&gt;=</span>&nbsp;<span class="num" id="3644332">1</span>&nbsp;<span class="op" id="3644334">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644339">reg</span>&nbsp;<span class="op" id="3644343">=</span>&nbsp;<span class="ident" id="3644345">parseReg</span><span class="op" id="3644353">(</span><span class="ident" id="3644354">p</span><span class="op" id="3644355">,</span>&nbsp;<span class="ident" id="3644357">args</span><span class="op" id="3644361">[</span><span class="num" id="3644362">0</span><span class="op" id="3644363">]</span><span class="op" id="3644364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644372">return</span>&nbsp;<span class="builtintype" id="3644379">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644389">var</span>&nbsp;<span class="ident" id="3644393">found</span>&nbsp;<span class="builtintype" id="3644399">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644405">if</span>&nbsp;<span class="ident" id="3644408">op</span><span class="op" id="3644410">,</span>&nbsp;<span class="ident" id="3644412">found</span>&nbsp;<span class="op" id="3644418">=</span>&nbsp;<span class="ident" id="3644420">opSysMap</span><span class="op" id="3644428">[</span><span class="ident" id="3644429">opName</span><span class="op" id="3644435">]</span><span class="op" id="3644436">;</span>&nbsp;<span class="ident" id="3644438">found</span>&nbsp;<span class="op" id="3644444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3644448">//&nbsp;op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644456">argCount</span><span class="op" id="3644464">(</span><span class="num" id="3644465">0</span><span class="op" id="3644466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644469">}</span>&nbsp;<span class="keyword" id="3644471">else</span>&nbsp;<span class="keyword" id="3644476">if</span>&nbsp;<span class="ident" id="3644479">op</span><span class="op" id="3644481">,</span>&nbsp;<span class="ident" id="3644483">found</span>&nbsp;<span class="op" id="3644489">=</span>&nbsp;<span class="ident" id="3644491">opSys1Map</span><span class="op" id="3644500">[</span><span class="ident" id="3644501">opName</span><span class="op" id="3644507">]</span><span class="op" id="3644508">;</span>&nbsp;<span class="ident" id="3644510">found</span>&nbsp;<span class="op" id="3644516">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3644520">//&nbsp;op&nbsp;reg</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3644532">argCount</span><span class="op" id="3644540">(</span><span class="num" id="3644541">1</span><span class="op" id="3644542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644545">}</span>&nbsp;<span class="keyword" id="3644547">else</span>&nbsp;<span class="op" id="3644552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644556">return</span>&nbsp;<span class="ident" id="3644563">nil</span><span class="op" id="3644566">,</span>&nbsp;<span class="builtintype" id="3644568">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3644575">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3644579">return</span>&nbsp;<span class="ident" id="3644586">makeInstSys</span><span class="op" id="3644597">(</span><span class="ident" id="3644598">op</span><span class="op" id="3644600">,</span>&nbsp;<span class="ident" id="3644602">reg</span><span class="op" id="3644605">)</span><span class="op" id="3644606">,</span>&nbsp;<span class="builtintype" id="3644608">true</span><br>
<span class="lineno"></span><span class="op" id="3644613">}</span>
</div>
</body>
</html>
