<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6073091">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6073147">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6073201">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="6073252">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6073275">package</span>&nbsp;<span class="ident" id="6073283">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="6073290">import</span>&nbsp;<span class="op" id="6073297">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6073300">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="6073319">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="6073326">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="6073329">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="6073406">//</span><br>
<span class="lineno"></span><span class="comment" id="6073409">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="6073496">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="6073574">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="6073652">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="6073724">//</span><br>
<span class="lineno"></span><span class="comment" id="6073727">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="6073808">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="6073887">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="6073940">//</span><br>
<span class="lineno"></span><span class="comment" id="6073943">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="6074018">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6074093">type</span>&nbsp;<span class="ident" id="6074098">LineTable</span>&nbsp;<span class="keyword" id="6074108">struct</span>&nbsp;<span class="op" id="6074115">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074118">Data</span>&nbsp;<span class="op" id="6074123">[</span><span class="op" id="6074124">]</span><span class="builtintype" id="6074125">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074131">PC</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6074136">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074144">Line</span>&nbsp;<span class="builtintype" id="6074149">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074155">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074172">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074181">sync</span><span class="op" id="6074185">.</span><span class="ident" id="6074186">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074193">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6074202">int</span>&nbsp;<span class="comment" id="6074206">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074260">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6074269">binary</span><span class="op" id="6074275">.</span><span class="ident" id="6074276">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074287">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="6074296">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074304">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="6074313">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074321">functab</span>&nbsp;&nbsp;<span class="op" id="6074330">[</span><span class="op" id="6074331">]</span><span class="builtintype" id="6074332">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074338">nfunctab</span>&nbsp;<span class="builtintype" id="6074347">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074355">filetab</span>&nbsp;&nbsp;<span class="op" id="6074364">[</span><span class="op" id="6074365">]</span><span class="builtintype" id="6074366">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074372">nfiletab</span>&nbsp;<span class="builtintype" id="6074381">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6074389">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="6074398">map</span><span class="op" id="6074401">[</span><span class="builtintype" id="6074402">string</span><span class="op" id="6074408">]</span><span class="builtintype" id="6074409">uint32</span><br>
<span class="lineno">45</span><span class="op" id="6074416">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6074419">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="6074490">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="6074555">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="6074629">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="6074640">const</span>&nbsp;<span class="ident" id="6074646">oldQuantum</span>&nbsp;<span class="op" id="6074657">=</span>&nbsp;<span class="num" id="6074659">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6074662">func</span>&nbsp;<span class="op" id="6074667">(</span><span class="ident" id="6074668">t</span>&nbsp;<span class="op" id="6074670">*</span><span class="ident" id="6074671">LineTable</span><span class="op" id="6074680">)</span>&nbsp;<span class="ident" id="6074682">parse</span><span class="op" id="6074687">(</span><span class="ident" id="6074688">targetPC</span>&nbsp;<span class="builtintype" id="6074697">uint64</span><span class="op" id="6074703">,</span>&nbsp;<span class="ident" id="6074705">targetLine</span>&nbsp;<span class="builtintype" id="6074716">int</span><span class="op" id="6074719">)</span>&nbsp;<span class="op" id="6074721">(</span><span class="ident" id="6074722">b</span>&nbsp;<span class="op" id="6074724">[</span><span class="op" id="6074725">]</span><span class="builtintype" id="6074726">byte</span><span class="op" id="6074730">,</span>&nbsp;<span class="ident" id="6074732">pc</span>&nbsp;<span class="builtintype" id="6074735">uint64</span><span class="op" id="6074741">,</span>&nbsp;<span class="ident" id="6074743">line</span>&nbsp;<span class="builtintype" id="6074748">int</span><span class="op" id="6074751">)</span>&nbsp;<span class="op" id="6074753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074756">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074813">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074845">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074907">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6074964">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6075003">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6075007">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6075070">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075127">b</span><span class="op" id="6075128">,</span>&nbsp;<span class="ident" id="6075130">pc</span><span class="op" id="6075132">,</span>&nbsp;<span class="ident" id="6075134">line</span>&nbsp;<span class="op" id="6075139">=</span>&nbsp;<span class="ident" id="6075141">t</span><span class="op" id="6075142">.</span><span class="ident" id="6075143">Data</span><span class="op" id="6075147">,</span>&nbsp;<span class="ident" id="6075149">t</span><span class="op" id="6075150">.</span><span class="ident" id="6075151">PC</span><span class="op" id="6075153">,</span>&nbsp;<span class="ident" id="6075155">t</span><span class="op" id="6075156">.</span><span class="ident" id="6075157">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075163">for</span>&nbsp;<span class="ident" id="6075167">pc</span>&nbsp;<span class="op" id="6075170">&lt;=</span>&nbsp;<span class="ident" id="6075173">targetPC</span>&nbsp;<span class="op" id="6075182">&amp;&amp;</span>&nbsp;<span class="ident" id="6075185">line</span>&nbsp;<span class="op" id="6075190">!=</span>&nbsp;<span class="ident" id="6075193">targetLine</span>&nbsp;<span class="op" id="6075204">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="6075207">len</span><span class="op" id="6075210">(</span><span class="ident" id="6075211">b</span><span class="op" id="6075212">)</span>&nbsp;<span class="op" id="6075214">&gt;</span>&nbsp;<span class="num" id="6075216">0</span>&nbsp;<span class="op" id="6075218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075222">code</span>&nbsp;<span class="op" id="6075227">:=</span>&nbsp;<span class="ident" id="6075230">b</span><span class="op" id="6075231">[</span><span class="num" id="6075232">0</span><span class="op" id="6075233">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075237">b</span>&nbsp;<span class="op" id="6075239">=</span>&nbsp;<span class="ident" id="6075241">b</span><span class="op" id="6075242">[</span><span class="num" id="6075243">1</span><span class="op" id="6075244">:</span><span class="op" id="6075245">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075249">switch</span>&nbsp;<span class="op" id="6075256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075260">case</span>&nbsp;<span class="ident" id="6075265">code</span>&nbsp;<span class="op" id="6075270">==</span>&nbsp;<span class="num" id="6075273">0</span><span class="op" id="6075274">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075279">if</span>&nbsp;<span class="builtinfunc" id="6075282">len</span><span class="op" id="6075285">(</span><span class="ident" id="6075286">b</span><span class="op" id="6075287">)</span>&nbsp;<span class="op" id="6075289">&lt;</span>&nbsp;<span class="num" id="6075291">4</span>&nbsp;<span class="op" id="6075293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075299">b</span>&nbsp;<span class="op" id="6075301">=</span>&nbsp;<span class="ident" id="6075303">b</span><span class="op" id="6075304">[</span><span class="num" id="6075305">0</span><span class="op" id="6075306">:</span><span class="num" id="6075307">0</span><span class="op" id="6075308">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075314">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6075323">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075328">val</span>&nbsp;<span class="op" id="6075332">:=</span>&nbsp;<span class="ident" id="6075335">binary</span><span class="op" id="6075341">.</span><span class="ident" id="6075342">BigEndian</span><span class="op" id="6075351">.</span><span class="ident" id="6075352">Uint32</span><span class="op" id="6075358">(</span><span class="ident" id="6075359">b</span><span class="op" id="6075360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075365">b</span>&nbsp;<span class="op" id="6075367">=</span>&nbsp;<span class="ident" id="6075369">b</span><span class="op" id="6075370">[</span><span class="num" id="6075371">4</span><span class="op" id="6075372">:</span><span class="op" id="6075373">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075378">line</span>&nbsp;<span class="op" id="6075383">+=</span>&nbsp;<span class="builtintype" id="6075386">int</span><span class="op" id="6075389">(</span><span class="ident" id="6075390">val</span><span class="op" id="6075393">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075397">case</span>&nbsp;<span class="ident" id="6075402">code</span>&nbsp;<span class="op" id="6075407">&lt;=</span>&nbsp;<span class="num" id="6075410">64</span><span class="op" id="6075412">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075417">line</span>&nbsp;<span class="op" id="6075422">+=</span>&nbsp;<span class="builtintype" id="6075425">int</span><span class="op" id="6075428">(</span><span class="ident" id="6075429">code</span><span class="op" id="6075433">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075437">case</span>&nbsp;<span class="ident" id="6075442">code</span>&nbsp;<span class="op" id="6075447">&lt;=</span>&nbsp;<span class="num" id="6075450">128</span><span class="op" id="6075453">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075458">line</span>&nbsp;<span class="op" id="6075463">-=</span>&nbsp;<span class="builtintype" id="6075466">int</span><span class="op" id="6075469">(</span><span class="ident" id="6075470">code</span>&nbsp;<span class="op" id="6075475">-</span>&nbsp;<span class="num" id="6075477">64</span><span class="op" id="6075479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075483">default</span><span class="op" id="6075490">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075495">pc</span>&nbsp;<span class="op" id="6075498">+=</span>&nbsp;<span class="ident" id="6075501">oldQuantum</span>&nbsp;<span class="op" id="6075512">*</span>&nbsp;<span class="builtintype" id="6075514">uint64</span><span class="op" id="6075520">(</span><span class="ident" id="6075521">code</span><span class="op" id="6075525">-</span><span class="num" id="6075526">128</span><span class="op" id="6075529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075534">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6075545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075549">pc</span>&nbsp;<span class="op" id="6075552">+=</span>&nbsp;<span class="ident" id="6075555">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6075567">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075570">return</span>&nbsp;<span class="ident" id="6075577">b</span><span class="op" id="6075578">,</span>&nbsp;<span class="ident" id="6075580">pc</span><span class="op" id="6075582">,</span>&nbsp;<span class="ident" id="6075584">line</span><br>
<span class="lineno"></span><span class="op" id="6075589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6075592">func</span>&nbsp;<span class="op" id="6075597">(</span><span class="ident" id="6075598">t</span>&nbsp;<span class="op" id="6075600">*</span><span class="ident" id="6075601">LineTable</span><span class="op" id="6075610">)</span>&nbsp;<span class="ident" id="6075612">slice</span><span class="op" id="6075617">(</span><span class="ident" id="6075618">pc</span>&nbsp;<span class="builtintype" id="6075621">uint64</span><span class="op" id="6075627">)</span>&nbsp;<span class="op" id="6075629">*</span><span class="ident" id="6075630">LineTable</span>&nbsp;<span class="op" id="6075640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075643">data</span><span class="op" id="6075647">,</span>&nbsp;<span class="ident" id="6075649">pc</span><span class="op" id="6075651">,</span>&nbsp;<span class="ident" id="6075653">line</span>&nbsp;<span class="op" id="6075658">:=</span>&nbsp;<span class="ident" id="6075661">t</span><span class="op" id="6075662">.</span><span class="ident" id="6075663">parse</span><span class="op" id="6075668">(</span><span class="ident" id="6075669">pc</span><span class="op" id="6075671">,</span>&nbsp;<span class="op" id="6075673">-</span><span class="num" id="6075674">1</span><span class="op" id="6075675">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075678">return</span>&nbsp;<span class="op" id="6075685">&amp;</span><span class="ident" id="6075686">LineTable</span><span class="op" id="6075695">{</span><span class="ident" id="6075696">Data</span><span class="op" id="6075700">:</span>&nbsp;<span class="ident" id="6075702">data</span><span class="op" id="6075706">,</span>&nbsp;<span class="ident" id="6075708">PC</span><span class="op" id="6075710">:</span>&nbsp;<span class="ident" id="6075712">pc</span><span class="op" id="6075714">,</span>&nbsp;<span class="ident" id="6075716">Line</span><span class="op" id="6075720">:</span>&nbsp;<span class="ident" id="6075722">line</span><span class="op" id="6075726">}</span><br>
<span class="lineno"></span><span class="op" id="6075728">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6075731">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="6075798">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="6075853">func</span>&nbsp;<span class="op" id="6075858">(</span><span class="ident" id="6075859">t</span>&nbsp;<span class="op" id="6075861">*</span><span class="ident" id="6075862">LineTable</span><span class="op" id="6075871">)</span>&nbsp;<span class="ident" id="6075873">PCToLine</span><span class="op" id="6075881">(</span><span class="ident" id="6075882">pc</span>&nbsp;<span class="builtintype" id="6075885">uint64</span><span class="op" id="6075891">)</span>&nbsp;<span class="builtintype" id="6075893">int</span>&nbsp;<span class="op" id="6075897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075900">if</span>&nbsp;<span class="ident" id="6075903">t</span><span class="op" id="6075904">.</span><span class="ident" id="6075905">isGo12</span><span class="op" id="6075911">(</span><span class="op" id="6075912">)</span>&nbsp;<span class="op" id="6075914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075918">return</span>&nbsp;<span class="ident" id="6075925">t</span><span class="op" id="6075926">.</span><span class="ident" id="6075927">go12PCToLine</span><span class="op" id="6075939">(</span><span class="ident" id="6075940">pc</span><span class="op" id="6075942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6075945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6075948">_</span><span class="op" id="6075949">,</span>&nbsp;<span class="ident" id="6075951">_</span><span class="op" id="6075952">,</span>&nbsp;<span class="ident" id="6075954">line</span>&nbsp;<span class="op" id="6075959">:=</span>&nbsp;<span class="ident" id="6075962">t</span><span class="op" id="6075963">.</span><span class="ident" id="6075964">parse</span><span class="op" id="6075969">(</span><span class="ident" id="6075970">pc</span><span class="op" id="6075972">,</span>&nbsp;<span class="op" id="6075974">-</span><span class="num" id="6075975">1</span><span class="op" id="6075976">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6075979">return</span>&nbsp;<span class="ident" id="6075986">line</span><br>
<span class="lineno"></span><span class="op" id="6075991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6075994">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="6076061">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="6076112">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="6076167">func</span>&nbsp;<span class="op" id="6076172">(</span><span class="ident" id="6076173">t</span>&nbsp;<span class="op" id="6076175">*</span><span class="ident" id="6076176">LineTable</span><span class="op" id="6076185">)</span>&nbsp;<span class="ident" id="6076187">LineToPC</span><span class="op" id="6076195">(</span><span class="ident" id="6076196">line</span>&nbsp;<span class="builtintype" id="6076201">int</span><span class="op" id="6076204">,</span>&nbsp;<span class="ident" id="6076206">maxpc</span>&nbsp;<span class="builtintype" id="6076212">uint64</span><span class="op" id="6076218">)</span>&nbsp;<span class="builtintype" id="6076220">uint64</span>&nbsp;<span class="op" id="6076227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076230">if</span>&nbsp;<span class="ident" id="6076233">t</span><span class="op" id="6076234">.</span><span class="ident" id="6076235">isGo12</span><span class="op" id="6076241">(</span><span class="op" id="6076242">)</span>&nbsp;<span class="op" id="6076244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076248">return</span>&nbsp;<span class="num" id="6076255">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6076258">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6076261">_</span><span class="op" id="6076262">,</span>&nbsp;<span class="ident" id="6076264">pc</span><span class="op" id="6076266">,</span>&nbsp;<span class="ident" id="6076268">line1</span>&nbsp;<span class="op" id="6076274">:=</span>&nbsp;<span class="ident" id="6076277">t</span><span class="op" id="6076278">.</span><span class="ident" id="6076279">parse</span><span class="op" id="6076284">(</span><span class="ident" id="6076285">maxpc</span><span class="op" id="6076290">,</span>&nbsp;<span class="ident" id="6076292">line</span><span class="op" id="6076296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076299">if</span>&nbsp;<span class="ident" id="6076302">line1</span>&nbsp;<span class="op" id="6076308">!=</span>&nbsp;<span class="ident" id="6076311">line</span>&nbsp;<span class="op" id="6076316">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076320">return</span>&nbsp;<span class="num" id="6076327">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6076330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6076333">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076397">return</span>&nbsp;<span class="ident" id="6076404">pc</span>&nbsp;<span class="op" id="6076407">-</span>&nbsp;<span class="ident" id="6076409">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="6076420">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6076423">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="6076467">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="6076505">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6076546">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="6076577">func</span>&nbsp;<span class="ident" id="6076582">NewLineTable</span><span class="op" id="6076594">(</span><span class="ident" id="6076595">data</span>&nbsp;<span class="op" id="6076600">[</span><span class="op" id="6076601">]</span><span class="builtintype" id="6076602">byte</span><span class="op" id="6076606">,</span>&nbsp;<span class="ident" id="6076608">text</span>&nbsp;<span class="builtintype" id="6076613">uint64</span><span class="op" id="6076619">)</span>&nbsp;<span class="op" id="6076621">*</span><span class="ident" id="6076622">LineTable</span>&nbsp;<span class="op" id="6076632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6076635">return</span>&nbsp;<span class="op" id="6076642">&amp;</span><span class="ident" id="6076643">LineTable</span><span class="op" id="6076652">{</span><span class="ident" id="6076653">Data</span><span class="op" id="6076657">:</span>&nbsp;<span class="ident" id="6076659">data</span><span class="op" id="6076663">,</span>&nbsp;<span class="ident" id="6076665">PC</span><span class="op" id="6076667">:</span>&nbsp;<span class="ident" id="6076669">text</span><span class="op" id="6076673">,</span>&nbsp;<span class="ident" id="6076675">Line</span><span class="op" id="6076679">:</span>&nbsp;<span class="num" id="6076681">0</span><span class="op" id="6076682">}</span><br>
<span class="lineno"></span><span class="op" id="6076684">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="6076687">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="6076718">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="6076750">//</span><br>
<span class="lineno"></span><span class="comment" id="6076753">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="6076820">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="6076888">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="6076962">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="6076986">//</span><br>
<span class="lineno"></span><span class="comment" id="6076989">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="6077059">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6077105">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6077173">func</span>&nbsp;<span class="op" id="6077178">(</span><span class="ident" id="6077179">t</span>&nbsp;<span class="op" id="6077181">*</span><span class="ident" id="6077182">LineTable</span><span class="op" id="6077191">)</span>&nbsp;<span class="ident" id="6077193">isGo12</span><span class="op" id="6077199">(</span><span class="op" id="6077200">)</span>&nbsp;<span class="builtintype" id="6077202">bool</span>&nbsp;<span class="op" id="6077207">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6077210">t</span><span class="op" id="6077211">.</span><span class="ident" id="6077212">go12Init</span><span class="op" id="6077220">(</span><span class="op" id="6077221">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077224">return</span>&nbsp;<span class="ident" id="6077231">t</span><span class="op" id="6077232">.</span><span class="ident" id="6077233">go12</span>&nbsp;<span class="op" id="6077238">==</span>&nbsp;<span class="num" id="6077241">1</span><br>
<span class="lineno"></span><span class="op" id="6077243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6077246">const</span>&nbsp;<span class="ident" id="6077252">go12magic</span>&nbsp;<span class="op" id="6077262">=</span>&nbsp;<span class="num" id="6077264">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="6077276">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="6077333">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="6077390">func</span>&nbsp;<span class="op" id="6077395">(</span><span class="ident" id="6077396">t</span>&nbsp;<span class="op" id="6077398">*</span><span class="ident" id="6077399">LineTable</span><span class="op" id="6077408">)</span>&nbsp;<span class="builtintype" id="6077410">uintptr</span><span class="op" id="6077417">(</span><span class="ident" id="6077418">b</span>&nbsp;<span class="op" id="6077420">[</span><span class="op" id="6077421">]</span><span class="builtintype" id="6077422">byte</span><span class="op" id="6077426">)</span>&nbsp;<span class="builtintype" id="6077428">uint64</span>&nbsp;<span class="op" id="6077435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077438">if</span>&nbsp;<span class="ident" id="6077441">t</span><span class="op" id="6077442">.</span><span class="ident" id="6077443">ptrsize</span>&nbsp;<span class="op" id="6077451">==</span>&nbsp;<span class="num" id="6077454">4</span>&nbsp;<span class="op" id="6077456">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077460">return</span>&nbsp;<span class="builtintype" id="6077467">uint64</span><span class="op" id="6077473">(</span><span class="ident" id="6077474">t</span><span class="op" id="6077475">.</span><span class="ident" id="6077476">binary</span><span class="op" id="6077482">.</span><span class="ident" id="6077483">Uint32</span><span class="op" id="6077489">(</span><span class="ident" id="6077490">b</span><span class="op" id="6077491">)</span><span class="op" id="6077492">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6077495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077498">return</span>&nbsp;<span class="ident" id="6077505">t</span><span class="op" id="6077506">.</span><span class="ident" id="6077507">binary</span><span class="op" id="6077513">.</span><span class="ident" id="6077514">Uint64</span><span class="op" id="6077520">(</span><span class="ident" id="6077521">b</span><span class="op" id="6077522">)</span><br>
<span class="lineno"></span><span class="op" id="6077524">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6077527">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="6077602">func</span>&nbsp;<span class="op" id="6077607">(</span><span class="ident" id="6077608">t</span>&nbsp;<span class="op" id="6077610">*</span><span class="ident" id="6077611">LineTable</span><span class="op" id="6077620">)</span>&nbsp;<span class="ident" id="6077622">go12Init</span><span class="op" id="6077630">(</span><span class="op" id="6077631">)</span>&nbsp;<span class="op" id="6077633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6077636">t</span><span class="op" id="6077637">.</span><span class="ident" id="6077638">mu</span><span class="op" id="6077640">.</span><span class="ident" id="6077641">Lock</span><span class="op" id="6077645">(</span><span class="op" id="6077646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077649">defer</span>&nbsp;<span class="ident" id="6077655">t</span><span class="op" id="6077656">.</span><span class="ident" id="6077657">mu</span><span class="op" id="6077659">.</span><span class="ident" id="6077660">Unlock</span><span class="op" id="6077666">(</span><span class="op" id="6077667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077670">if</span>&nbsp;<span class="ident" id="6077673">t</span><span class="op" id="6077674">.</span><span class="ident" id="6077675">go12</span>&nbsp;<span class="op" id="6077680">!=</span>&nbsp;<span class="num" id="6077683">0</span>&nbsp;<span class="op" id="6077685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077689">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6077697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077701">defer</span>&nbsp;<span class="keyword" id="6077707">func</span><span class="op" id="6077711">(</span><span class="op" id="6077712">)</span>&nbsp;<span class="op" id="6077714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6077718">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6077783">recover</span><span class="op" id="6077790">(</span><span class="op" id="6077791">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6077794">}</span><span class="op" id="6077795">(</span><span class="op" id="6077796">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6077800">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6077869">t</span><span class="op" id="6077870">.</span><span class="ident" id="6077871">go12</span>&nbsp;<span class="op" id="6077876">=</span>&nbsp;<span class="op" id="6077878">-</span><span class="num" id="6077879">1</span>&nbsp;<span class="comment" id="6077881">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6077919">if</span>&nbsp;<span class="builtinfunc" id="6077922">len</span><span class="op" id="6077925">(</span><span class="ident" id="6077926">t</span><span class="op" id="6077927">.</span><span class="ident" id="6077928">Data</span><span class="op" id="6077932">)</span>&nbsp;<span class="op" id="6077934">&lt;</span>&nbsp;<span class="num" id="6077936">16</span>&nbsp;<span class="op" id="6077939">||</span>&nbsp;<span class="ident" id="6077942">t</span><span class="op" id="6077943">.</span><span class="ident" id="6077944">Data</span><span class="op" id="6077948">[</span><span class="num" id="6077949">4</span><span class="op" id="6077950">]</span>&nbsp;<span class="op" id="6077952">!=</span>&nbsp;<span class="num" id="6077955">0</span>&nbsp;<span class="op" id="6077957">||</span>&nbsp;<span class="ident" id="6077960">t</span><span class="op" id="6077961">.</span><span class="ident" id="6077962">Data</span><span class="op" id="6077966">[</span><span class="num" id="6077967">5</span><span class="op" id="6077968">]</span>&nbsp;<span class="op" id="6077970">!=</span>&nbsp;<span class="num" id="6077973">0</span>&nbsp;<span class="op" id="6077975">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6077980">(</span><span class="ident" id="6077981">t</span><span class="op" id="6077982">.</span><span class="ident" id="6077983">Data</span><span class="op" id="6077987">[</span><span class="num" id="6077988">6</span><span class="op" id="6077989">]</span>&nbsp;<span class="op" id="6077991">!=</span>&nbsp;<span class="num" id="6077994">1</span>&nbsp;<span class="op" id="6077996">&amp;&amp;</span>&nbsp;<span class="ident" id="6077999">t</span><span class="op" id="6078000">.</span><span class="ident" id="6078001">Data</span><span class="op" id="6078005">[</span><span class="num" id="6078006">6</span><span class="op" id="6078007">]</span>&nbsp;<span class="op" id="6078009">!=</span>&nbsp;<span class="num" id="6078012">4</span><span class="op" id="6078013">)</span>&nbsp;<span class="op" id="6078015">||</span>&nbsp;<span class="comment" id="6078018">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6078034">(</span><span class="ident" id="6078035">t</span><span class="op" id="6078036">.</span><span class="ident" id="6078037">Data</span><span class="op" id="6078041">[</span><span class="num" id="6078042">7</span><span class="op" id="6078043">]</span>&nbsp;<span class="op" id="6078045">!=</span>&nbsp;<span class="num" id="6078048">4</span>&nbsp;<span class="op" id="6078050">&amp;&amp;</span>&nbsp;<span class="ident" id="6078053">t</span><span class="op" id="6078054">.</span><span class="ident" id="6078055">Data</span><span class="op" id="6078059">[</span><span class="num" id="6078060">7</span><span class="op" id="6078061">]</span>&nbsp;<span class="op" id="6078063">!=</span>&nbsp;<span class="num" id="6078066">8</span><span class="op" id="6078067">)</span>&nbsp;<span class="op" id="6078069">{</span>&nbsp;<span class="comment" id="6078071">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078089">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6078097">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078101">switch</span>&nbsp;<span class="builtintype" id="6078108">uint32</span><span class="op" id="6078114">(</span><span class="ident" id="6078115">go12magic</span><span class="op" id="6078124">)</span>&nbsp;<span class="op" id="6078126">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078129">case</span>&nbsp;<span class="ident" id="6078134">binary</span><span class="op" id="6078140">.</span><span class="ident" id="6078141">LittleEndian</span><span class="op" id="6078153">.</span><span class="ident" id="6078154">Uint32</span><span class="op" id="6078160">(</span><span class="ident" id="6078161">t</span><span class="op" id="6078162">.</span><span class="ident" id="6078163">Data</span><span class="op" id="6078167">)</span><span class="op" id="6078168">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078172">t</span><span class="op" id="6078173">.</span><span class="ident" id="6078174">binary</span>&nbsp;<span class="op" id="6078181">=</span>&nbsp;<span class="ident" id="6078183">binary</span><span class="op" id="6078189">.</span><span class="ident" id="6078190">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078204">case</span>&nbsp;<span class="ident" id="6078209">binary</span><span class="op" id="6078215">.</span><span class="ident" id="6078216">BigEndian</span><span class="op" id="6078225">.</span><span class="ident" id="6078226">Uint32</span><span class="op" id="6078232">(</span><span class="ident" id="6078233">t</span><span class="op" id="6078234">.</span><span class="ident" id="6078235">Data</span><span class="op" id="6078239">)</span><span class="op" id="6078240">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078244">t</span><span class="op" id="6078245">.</span><span class="ident" id="6078246">binary</span>&nbsp;<span class="op" id="6078253">=</span>&nbsp;<span class="ident" id="6078255">binary</span><span class="op" id="6078261">.</span><span class="ident" id="6078262">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078273">default</span><span class="op" id="6078280">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078284">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6078292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078296">t</span><span class="op" id="6078297">.</span><span class="ident" id="6078298">quantum</span>&nbsp;<span class="op" id="6078306">=</span>&nbsp;<span class="builtintype" id="6078308">uint32</span><span class="op" id="6078314">(</span><span class="ident" id="6078315">t</span><span class="op" id="6078316">.</span><span class="ident" id="6078317">Data</span><span class="op" id="6078321">[</span><span class="num" id="6078322">6</span><span class="op" id="6078323">]</span><span class="op" id="6078324">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078327">t</span><span class="op" id="6078328">.</span><span class="ident" id="6078329">ptrsize</span>&nbsp;<span class="op" id="6078337">=</span>&nbsp;<span class="builtintype" id="6078339">uint32</span><span class="op" id="6078345">(</span><span class="ident" id="6078346">t</span><span class="op" id="6078347">.</span><span class="ident" id="6078348">Data</span><span class="op" id="6078352">[</span><span class="num" id="6078353">7</span><span class="op" id="6078354">]</span><span class="op" id="6078355">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078359">t</span><span class="op" id="6078360">.</span><span class="ident" id="6078361">nfunctab</span>&nbsp;<span class="op" id="6078370">=</span>&nbsp;<span class="builtintype" id="6078372">uint32</span><span class="op" id="6078378">(</span><span class="ident" id="6078379">t</span><span class="op" id="6078380">.</span><span class="builtintype" id="6078381">uintptr</span><span class="op" id="6078388">(</span><span class="ident" id="6078389">t</span><span class="op" id="6078390">.</span><span class="ident" id="6078391">Data</span><span class="op" id="6078395">[</span><span class="num" id="6078396">8</span><span class="op" id="6078397">:</span><span class="op" id="6078398">]</span><span class="op" id="6078399">)</span><span class="op" id="6078400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078403">t</span><span class="op" id="6078404">.</span><span class="ident" id="6078405">functab</span>&nbsp;<span class="op" id="6078413">=</span>&nbsp;<span class="ident" id="6078415">t</span><span class="op" id="6078416">.</span><span class="ident" id="6078417">Data</span><span class="op" id="6078421">[</span><span class="num" id="6078422">8</span><span class="op" id="6078423">+</span><span class="ident" id="6078424">t</span><span class="op" id="6078425">.</span><span class="ident" id="6078426">ptrsize</span><span class="op" id="6078433">:</span><span class="op" id="6078434">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078437">functabsize</span>&nbsp;<span class="op" id="6078449">:=</span>&nbsp;<span class="ident" id="6078452">t</span><span class="op" id="6078453">.</span><span class="ident" id="6078454">nfunctab</span><span class="op" id="6078462">*</span><span class="num" id="6078463">2</span><span class="op" id="6078464">*</span><span class="ident" id="6078465">t</span><span class="op" id="6078466">.</span><span class="ident" id="6078467">ptrsize</span>&nbsp;<span class="op" id="6078475">+</span>&nbsp;<span class="ident" id="6078477">t</span><span class="op" id="6078478">.</span><span class="ident" id="6078479">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078488">fileoff</span>&nbsp;<span class="op" id="6078496">:=</span>&nbsp;<span class="ident" id="6078499">t</span><span class="op" id="6078500">.</span><span class="ident" id="6078501">binary</span><span class="op" id="6078507">.</span><span class="ident" id="6078508">Uint32</span><span class="op" id="6078514">(</span><span class="ident" id="6078515">t</span><span class="op" id="6078516">.</span><span class="ident" id="6078517">functab</span><span class="op" id="6078524">[</span><span class="ident" id="6078525">functabsize</span><span class="op" id="6078536">:</span><span class="op" id="6078537">]</span><span class="op" id="6078538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078541">t</span><span class="op" id="6078542">.</span><span class="ident" id="6078543">functab</span>&nbsp;<span class="op" id="6078551">=</span>&nbsp;<span class="ident" id="6078553">t</span><span class="op" id="6078554">.</span><span class="ident" id="6078555">functab</span><span class="op" id="6078562">[</span><span class="op" id="6078563">:</span><span class="ident" id="6078564">functabsize</span><span class="op" id="6078575">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078578">t</span><span class="op" id="6078579">.</span><span class="ident" id="6078580">filetab</span>&nbsp;<span class="op" id="6078588">=</span>&nbsp;<span class="ident" id="6078590">t</span><span class="op" id="6078591">.</span><span class="ident" id="6078592">Data</span><span class="op" id="6078596">[</span><span class="ident" id="6078597">fileoff</span><span class="op" id="6078604">:</span><span class="op" id="6078605">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078608">t</span><span class="op" id="6078609">.</span><span class="ident" id="6078610">nfiletab</span>&nbsp;<span class="op" id="6078619">=</span>&nbsp;<span class="ident" id="6078621">t</span><span class="op" id="6078622">.</span><span class="ident" id="6078623">binary</span><span class="op" id="6078629">.</span><span class="ident" id="6078630">Uint32</span><span class="op" id="6078636">(</span><span class="ident" id="6078637">t</span><span class="op" id="6078638">.</span><span class="ident" id="6078639">filetab</span><span class="op" id="6078646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078649">t</span><span class="op" id="6078650">.</span><span class="ident" id="6078651">filetab</span>&nbsp;<span class="op" id="6078659">=</span>&nbsp;<span class="ident" id="6078661">t</span><span class="op" id="6078662">.</span><span class="ident" id="6078663">filetab</span><span class="op" id="6078670">[</span><span class="op" id="6078671">:</span><span class="ident" id="6078672">t</span><span class="op" id="6078673">.</span><span class="ident" id="6078674">nfiletab</span><span class="op" id="6078682">*</span><span class="num" id="6078683">4</span><span class="op" id="6078684">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078688">t</span><span class="op" id="6078689">.</span><span class="ident" id="6078690">go12</span>&nbsp;<span class="op" id="6078695">=</span>&nbsp;<span class="num" id="6078697">1</span>&nbsp;<span class="comment" id="6078699">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="6078717">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6078720">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="6078794">func</span>&nbsp;<span class="op" id="6078799">(</span><span class="ident" id="6078800">t</span>&nbsp;<span class="op" id="6078802">*</span><span class="ident" id="6078803">LineTable</span><span class="op" id="6078812">)</span>&nbsp;<span class="ident" id="6078814">go12Funcs</span><span class="op" id="6078823">(</span><span class="op" id="6078824">)</span>&nbsp;<span class="op" id="6078826">[</span><span class="op" id="6078827">]</span><span class="ident" id="6078828">Func</span>&nbsp;<span class="op" id="6078833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6078836">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078888">defer</span>&nbsp;<span class="keyword" id="6078894">func</span><span class="op" id="6078898">(</span><span class="op" id="6078899">)</span>&nbsp;<span class="op" id="6078901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6078905">recover</span><span class="op" id="6078912">(</span><span class="op" id="6078913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6078916">}</span><span class="op" id="6078917">(</span><span class="op" id="6078918">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078922">n</span>&nbsp;<span class="op" id="6078924">:=</span>&nbsp;<span class="builtinfunc" id="6078927">len</span><span class="op" id="6078930">(</span><span class="ident" id="6078931">t</span><span class="op" id="6078932">.</span><span class="ident" id="6078933">functab</span><span class="op" id="6078940">)</span>&nbsp;<span class="op" id="6078942">/</span>&nbsp;<span class="builtintype" id="6078944">int</span><span class="op" id="6078947">(</span><span class="ident" id="6078948">t</span><span class="op" id="6078949">.</span><span class="ident" id="6078950">ptrsize</span><span class="op" id="6078957">)</span>&nbsp;<span class="op" id="6078959">/</span>&nbsp;<span class="num" id="6078961">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6078964">funcs</span>&nbsp;<span class="op" id="6078970">:=</span>&nbsp;<span class="builtinfunc" id="6078973">make</span><span class="op" id="6078977">(</span><span class="op" id="6078978">[</span><span class="op" id="6078979">]</span><span class="ident" id="6078980">Func</span><span class="op" id="6078984">,</span>&nbsp;<span class="ident" id="6078986">n</span><span class="op" id="6078987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6078990">for</span>&nbsp;<span class="ident" id="6078994">i</span>&nbsp;<span class="op" id="6078996">:=</span>&nbsp;<span class="keyword" id="6078999">range</span>&nbsp;<span class="ident" id="6079005">funcs</span>&nbsp;<span class="op" id="6079011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079015">f</span>&nbsp;<span class="op" id="6079017">:=</span>&nbsp;<span class="op" id="6079020">&amp;</span><span class="ident" id="6079021">funcs</span><span class="op" id="6079026">[</span><span class="ident" id="6079027">i</span><span class="op" id="6079028">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079032">f</span><span class="op" id="6079033">.</span><span class="ident" id="6079034">Entry</span>&nbsp;<span class="op" id="6079040">=</span>&nbsp;<span class="builtintype" id="6079042">uint64</span><span class="op" id="6079048">(</span><span class="ident" id="6079049">t</span><span class="op" id="6079050">.</span><span class="builtintype" id="6079051">uintptr</span><span class="op" id="6079058">(</span><span class="ident" id="6079059">t</span><span class="op" id="6079060">.</span><span class="ident" id="6079061">functab</span><span class="op" id="6079068">[</span><span class="num" id="6079069">2</span><span class="op" id="6079070">*</span><span class="ident" id="6079071">i</span><span class="op" id="6079072">*</span><span class="builtintype" id="6079073">int</span><span class="op" id="6079076">(</span><span class="ident" id="6079077">t</span><span class="op" id="6079078">.</span><span class="ident" id="6079079">ptrsize</span><span class="op" id="6079086">)</span><span class="op" id="6079087">:</span><span class="op" id="6079088">]</span><span class="op" id="6079089">)</span><span class="op" id="6079090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079094">f</span><span class="op" id="6079095">.</span><span class="ident" id="6079096">End</span>&nbsp;<span class="op" id="6079100">=</span>&nbsp;<span class="builtintype" id="6079102">uint64</span><span class="op" id="6079108">(</span><span class="ident" id="6079109">t</span><span class="op" id="6079110">.</span><span class="builtintype" id="6079111">uintptr</span><span class="op" id="6079118">(</span><span class="ident" id="6079119">t</span><span class="op" id="6079120">.</span><span class="ident" id="6079121">functab</span><span class="op" id="6079128">[</span><span class="op" id="6079129">(</span><span class="num" id="6079130">2</span><span class="op" id="6079131">*</span><span class="ident" id="6079132">i</span><span class="op" id="6079133">+</span><span class="num" id="6079134">2</span><span class="op" id="6079135">)</span><span class="op" id="6079136">*</span><span class="builtintype" id="6079137">int</span><span class="op" id="6079140">(</span><span class="ident" id="6079141">t</span><span class="op" id="6079142">.</span><span class="ident" id="6079143">ptrsize</span><span class="op" id="6079150">)</span><span class="op" id="6079151">:</span><span class="op" id="6079152">]</span><span class="op" id="6079153">)</span><span class="op" id="6079154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079158">info</span>&nbsp;<span class="op" id="6079163">:=</span>&nbsp;<span class="ident" id="6079166">t</span><span class="op" id="6079167">.</span><span class="ident" id="6079168">Data</span><span class="op" id="6079172">[</span><span class="ident" id="6079173">t</span><span class="op" id="6079174">.</span><span class="builtintype" id="6079175">uintptr</span><span class="op" id="6079182">(</span><span class="ident" id="6079183">t</span><span class="op" id="6079184">.</span><span class="ident" id="6079185">functab</span><span class="op" id="6079192">[</span><span class="op" id="6079193">(</span><span class="num" id="6079194">2</span><span class="op" id="6079195">*</span><span class="ident" id="6079196">i</span><span class="op" id="6079197">+</span><span class="num" id="6079198">1</span><span class="op" id="6079199">)</span><span class="op" id="6079200">*</span><span class="builtintype" id="6079201">int</span><span class="op" id="6079204">(</span><span class="ident" id="6079205">t</span><span class="op" id="6079206">.</span><span class="ident" id="6079207">ptrsize</span><span class="op" id="6079214">)</span><span class="op" id="6079215">:</span><span class="op" id="6079216">]</span><span class="op" id="6079217">)</span><span class="op" id="6079218">:</span><span class="op" id="6079219">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079223">f</span><span class="op" id="6079224">.</span><span class="ident" id="6079225">LineTable</span>&nbsp;<span class="op" id="6079235">=</span>&nbsp;<span class="ident" id="6079237">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079241">f</span><span class="op" id="6079242">.</span><span class="ident" id="6079243">FrameSize</span>&nbsp;<span class="op" id="6079253">=</span>&nbsp;<span class="builtintype" id="6079255">int</span><span class="op" id="6079258">(</span><span class="ident" id="6079259">t</span><span class="op" id="6079260">.</span><span class="ident" id="6079261">binary</span><span class="op" id="6079267">.</span><span class="ident" id="6079268">Uint32</span><span class="op" id="6079274">(</span><span class="ident" id="6079275">info</span><span class="op" id="6079279">[</span><span class="ident" id="6079280">t</span><span class="op" id="6079281">.</span><span class="ident" id="6079282">ptrsize</span><span class="op" id="6079289">+</span><span class="num" id="6079290">2</span><span class="op" id="6079291">*</span><span class="num" id="6079292">4</span><span class="op" id="6079293">:</span><span class="op" id="6079294">]</span><span class="op" id="6079295">)</span><span class="op" id="6079296">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079300">f</span><span class="op" id="6079301">.</span><span class="ident" id="6079302">Sym</span>&nbsp;<span class="op" id="6079306">=</span>&nbsp;<span class="op" id="6079308">&amp;</span><span class="ident" id="6079309">Sym</span><span class="op" id="6079312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079317">Value</span><span class="op" id="6079322">:</span>&nbsp;&nbsp;<span class="ident" id="6079325">f</span><span class="op" id="6079326">.</span><span class="ident" id="6079327">Entry</span><span class="op" id="6079332">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079337">Type</span><span class="op" id="6079341">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="6079345">&#39;T&#39;</span><span class="op" id="6079348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079353">Name</span><span class="op" id="6079357">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6079361">t</span><span class="op" id="6079362">.</span><span class="builtintype" id="6079363">string</span><span class="op" id="6079369">(</span><span class="ident" id="6079370">t</span><span class="op" id="6079371">.</span><span class="ident" id="6079372">binary</span><span class="op" id="6079378">.</span><span class="ident" id="6079379">Uint32</span><span class="op" id="6079385">(</span><span class="ident" id="6079386">info</span><span class="op" id="6079390">[</span><span class="ident" id="6079391">t</span><span class="op" id="6079392">.</span><span class="ident" id="6079393">ptrsize</span><span class="op" id="6079400">:</span><span class="op" id="6079401">]</span><span class="op" id="6079402">)</span><span class="op" id="6079403">)</span><span class="op" id="6079404">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079409">GoType</span><span class="op" id="6079415">:</span>&nbsp;<span class="num" id="6079417">0</span><span class="op" id="6079418">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079423">Func</span><span class="op" id="6079427">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="6079431">f</span><span class="op" id="6079432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6079436">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6079439">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079442">return</span>&nbsp;<span class="ident" id="6079449">funcs</span><br>
<span class="lineno"></span><span class="op" id="6079455">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="6079458">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="6079531">func</span>&nbsp;<span class="op" id="6079536">(</span><span class="ident" id="6079537">t</span>&nbsp;<span class="op" id="6079539">*</span><span class="ident" id="6079540">LineTable</span><span class="op" id="6079549">)</span>&nbsp;<span class="ident" id="6079551">findFunc</span><span class="op" id="6079559">(</span><span class="ident" id="6079560">pc</span>&nbsp;<span class="builtintype" id="6079563">uint64</span><span class="op" id="6079569">)</span>&nbsp;<span class="op" id="6079571">[</span><span class="op" id="6079572">]</span><span class="builtintype" id="6079573">byte</span>&nbsp;<span class="op" id="6079578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079581">if</span>&nbsp;<span class="ident" id="6079584">pc</span>&nbsp;<span class="op" id="6079587">&lt;</span>&nbsp;<span class="ident" id="6079589">t</span><span class="op" id="6079590">.</span><span class="builtintype" id="6079591">uintptr</span><span class="op" id="6079598">(</span><span class="ident" id="6079599">t</span><span class="op" id="6079600">.</span><span class="ident" id="6079601">functab</span><span class="op" id="6079608">)</span>&nbsp;<span class="op" id="6079610">||</span>&nbsp;<span class="ident" id="6079613">pc</span>&nbsp;<span class="op" id="6079616">&gt;=</span>&nbsp;<span class="ident" id="6079619">t</span><span class="op" id="6079620">.</span><span class="builtintype" id="6079621">uintptr</span><span class="op" id="6079628">(</span><span class="ident" id="6079629">t</span><span class="op" id="6079630">.</span><span class="ident" id="6079631">functab</span><span class="op" id="6079638">[</span><span class="builtinfunc" id="6079639">len</span><span class="op" id="6079642">(</span><span class="ident" id="6079643">t</span><span class="op" id="6079644">.</span><span class="ident" id="6079645">functab</span><span class="op" id="6079652">)</span><span class="op" id="6079653">-</span><span class="builtintype" id="6079654">int</span><span class="op" id="6079657">(</span><span class="ident" id="6079658">t</span><span class="op" id="6079659">.</span><span class="ident" id="6079660">ptrsize</span><span class="op" id="6079667">)</span><span class="op" id="6079668">:</span><span class="op" id="6079669">]</span><span class="op" id="6079670">)</span>&nbsp;<span class="op" id="6079672">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079676">return</span>&nbsp;<span class="builtintype" id="6079683">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6079688">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6079692">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6079751">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079816">f</span>&nbsp;<span class="op" id="6079818">:=</span>&nbsp;<span class="ident" id="6079821">t</span><span class="op" id="6079822">.</span><span class="ident" id="6079823">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079832">nf</span>&nbsp;<span class="op" id="6079835">:=</span>&nbsp;<span class="ident" id="6079838">t</span><span class="op" id="6079839">.</span><span class="ident" id="6079840">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079850">for</span>&nbsp;<span class="ident" id="6079854">nf</span>&nbsp;<span class="op" id="6079857">&gt;</span>&nbsp;<span class="num" id="6079859">0</span>&nbsp;<span class="op" id="6079861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079865">m</span>&nbsp;<span class="op" id="6079867">:=</span>&nbsp;<span class="ident" id="6079870">nf</span>&nbsp;<span class="op" id="6079873">/</span>&nbsp;<span class="num" id="6079875">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6079879">fm</span>&nbsp;<span class="op" id="6079882">:=</span>&nbsp;<span class="ident" id="6079885">f</span><span class="op" id="6079886">[</span><span class="num" id="6079887">2</span><span class="op" id="6079888">*</span><span class="ident" id="6079889">t</span><span class="op" id="6079890">.</span><span class="ident" id="6079891">ptrsize</span><span class="op" id="6079898">*</span><span class="ident" id="6079899">m</span><span class="op" id="6079900">:</span><span class="op" id="6079901">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079905">if</span>&nbsp;<span class="ident" id="6079908">t</span><span class="op" id="6079909">.</span><span class="builtintype" id="6079910">uintptr</span><span class="op" id="6079917">(</span><span class="ident" id="6079918">fm</span><span class="op" id="6079920">)</span>&nbsp;<span class="op" id="6079922">&lt;=</span>&nbsp;<span class="ident" id="6079925">pc</span>&nbsp;<span class="op" id="6079928">&amp;&amp;</span>&nbsp;<span class="ident" id="6079931">pc</span>&nbsp;<span class="op" id="6079934">&lt;</span>&nbsp;<span class="ident" id="6079936">t</span><span class="op" id="6079937">.</span><span class="builtintype" id="6079938">uintptr</span><span class="op" id="6079945">(</span><span class="ident" id="6079946">fm</span><span class="op" id="6079948">[</span><span class="num" id="6079949">2</span><span class="op" id="6079950">*</span><span class="ident" id="6079951">t</span><span class="op" id="6079952">.</span><span class="ident" id="6079953">ptrsize</span><span class="op" id="6079960">:</span><span class="op" id="6079961">]</span><span class="op" id="6079962">)</span>&nbsp;<span class="op" id="6079964">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6079969">return</span>&nbsp;<span class="ident" id="6079976">t</span><span class="op" id="6079977">.</span><span class="ident" id="6079978">Data</span><span class="op" id="6079982">[</span><span class="ident" id="6079983">t</span><span class="op" id="6079984">.</span><span class="builtintype" id="6079985">uintptr</span><span class="op" id="6079992">(</span><span class="ident" id="6079993">fm</span><span class="op" id="6079995">[</span><span class="ident" id="6079996">t</span><span class="op" id="6079997">.</span><span class="ident" id="6079998">ptrsize</span><span class="op" id="6080005">:</span><span class="op" id="6080006">]</span><span class="op" id="6080007">)</span><span class="op" id="6080008">:</span><span class="op" id="6080009">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080013">}</span>&nbsp;<span class="keyword" id="6080015">else</span>&nbsp;<span class="keyword" id="6080020">if</span>&nbsp;<span class="ident" id="6080023">pc</span>&nbsp;<span class="op" id="6080026">&lt;</span>&nbsp;<span class="ident" id="6080028">t</span><span class="op" id="6080029">.</span><span class="builtintype" id="6080030">uintptr</span><span class="op" id="6080037">(</span><span class="ident" id="6080038">fm</span><span class="op" id="6080040">)</span>&nbsp;<span class="op" id="6080042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080047">nf</span>&nbsp;<span class="op" id="6080050">=</span>&nbsp;<span class="ident" id="6080052">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080056">}</span>&nbsp;<span class="keyword" id="6080058">else</span>&nbsp;<span class="op" id="6080063">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080068">f</span>&nbsp;<span class="op" id="6080070">=</span>&nbsp;<span class="ident" id="6080072">f</span><span class="op" id="6080073">[</span><span class="op" id="6080074">(</span><span class="ident" id="6080075">m</span><span class="op" id="6080076">+</span><span class="num" id="6080077">1</span><span class="op" id="6080078">)</span><span class="op" id="6080079">*</span><span class="num" id="6080080">2</span><span class="op" id="6080081">*</span><span class="ident" id="6080082">t</span><span class="op" id="6080083">.</span><span class="ident" id="6080084">ptrsize</span><span class="op" id="6080091">:</span><span class="op" id="6080092">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080097">nf</span>&nbsp;<span class="op" id="6080100">-=</span>&nbsp;<span class="ident" id="6080103">m</span>&nbsp;<span class="op" id="6080105">+</span>&nbsp;<span class="num" id="6080107">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080114">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080117">return</span>&nbsp;<span class="builtintype" id="6080124">nil</span><br>
<span class="lineno"></span><span class="op" id="6080128">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="6080131">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="6080192">func</span>&nbsp;<span class="op" id="6080197">(</span><span class="ident" id="6080198">t</span>&nbsp;<span class="op" id="6080200">*</span><span class="ident" id="6080201">LineTable</span><span class="op" id="6080210">)</span>&nbsp;<span class="ident" id="6080212">readvarint</span><span class="op" id="6080222">(</span><span class="ident" id="6080223">pp</span>&nbsp;<span class="op" id="6080226">*</span><span class="op" id="6080227">[</span><span class="op" id="6080228">]</span><span class="builtintype" id="6080229">byte</span><span class="op" id="6080233">)</span>&nbsp;<span class="builtintype" id="6080235">uint32</span>&nbsp;<span class="op" id="6080242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080245">var</span>&nbsp;<span class="ident" id="6080249">v</span><span class="op" id="6080250">,</span>&nbsp;<span class="ident" id="6080252">shift</span>&nbsp;<span class="builtintype" id="6080258">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080266">p</span>&nbsp;<span class="op" id="6080268">:=</span>&nbsp;<span class="op" id="6080271">*</span><span class="ident" id="6080272">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080276">for</span>&nbsp;<span class="ident" id="6080280">shift</span>&nbsp;<span class="op" id="6080286">=</span>&nbsp;<span class="num" id="6080288">0</span><span class="op" id="6080289">;</span>&nbsp;<span class="op" id="6080291">;</span>&nbsp;<span class="ident" id="6080293">shift</span>&nbsp;<span class="op" id="6080299">+=</span>&nbsp;<span class="num" id="6080302">7</span>&nbsp;<span class="op" id="6080304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080308">b</span>&nbsp;<span class="op" id="6080310">:=</span>&nbsp;<span class="ident" id="6080313">p</span><span class="op" id="6080314">[</span><span class="num" id="6080315">0</span><span class="op" id="6080316">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080320">p</span>&nbsp;<span class="op" id="6080322">=</span>&nbsp;<span class="ident" id="6080324">p</span><span class="op" id="6080325">[</span><span class="num" id="6080326">1</span><span class="op" id="6080327">:</span><span class="op" id="6080328">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080332">v</span>&nbsp;<span class="op" id="6080334">|=</span>&nbsp;<span class="op" id="6080337">(</span><span class="builtintype" id="6080338">uint32</span><span class="op" id="6080344">(</span><span class="ident" id="6080345">b</span><span class="op" id="6080346">)</span>&nbsp;<span class="op" id="6080348">&amp;</span>&nbsp;<span class="num" id="6080350">0x7F</span><span class="op" id="6080354">)</span>&nbsp;<span class="op" id="6080356">&lt;&lt;</span>&nbsp;<span class="ident" id="6080359">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080367">if</span>&nbsp;<span class="ident" id="6080370">b</span><span class="op" id="6080371">&amp;</span><span class="num" id="6080372">0x80</span>&nbsp;<span class="op" id="6080377">==</span>&nbsp;<span class="num" id="6080380">0</span>&nbsp;<span class="op" id="6080382">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080387">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080398">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080401">*</span><span class="ident" id="6080402">pp</span>&nbsp;<span class="op" id="6080405">=</span>&nbsp;<span class="ident" id="6080407">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080410">return</span>&nbsp;<span class="ident" id="6080417">v</span><br>
<span class="lineno">265</span><span class="op" id="6080419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6080422">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="6080466">func</span>&nbsp;<span class="op" id="6080471">(</span><span class="ident" id="6080472">t</span>&nbsp;<span class="op" id="6080474">*</span><span class="ident" id="6080475">LineTable</span><span class="op" id="6080484">)</span>&nbsp;<span class="builtintype" id="6080486">string</span><span class="op" id="6080492">(</span><span class="ident" id="6080493">off</span>&nbsp;<span class="builtintype" id="6080497">uint32</span><span class="op" id="6080503">)</span>&nbsp;<span class="builtintype" id="6080505">string</span>&nbsp;<span class="op" id="6080512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080515">for</span>&nbsp;<span class="ident" id="6080519">i</span>&nbsp;<span class="op" id="6080521">:=</span>&nbsp;<span class="ident" id="6080524">off</span><span class="op" id="6080527">;</span>&nbsp;<span class="op" id="6080529">;</span>&nbsp;<span class="ident" id="6080531">i</span><span class="op" id="6080532">++</span>&nbsp;<span class="op" id="6080535">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080539">if</span>&nbsp;<span class="ident" id="6080542">t</span><span class="op" id="6080543">.</span><span class="ident" id="6080544">Data</span><span class="op" id="6080548">[</span><span class="ident" id="6080549">i</span><span class="op" id="6080550">]</span>&nbsp;<span class="op" id="6080552">==</span>&nbsp;<span class="num" id="6080555">0</span>&nbsp;<span class="op" id="6080557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080562">return</span>&nbsp;<span class="builtintype" id="6080569">string</span><span class="op" id="6080575">(</span><span class="ident" id="6080576">t</span><span class="op" id="6080577">.</span><span class="ident" id="6080578">Data</span><span class="op" id="6080582">[</span><span class="ident" id="6080583">off</span><span class="op" id="6080586">:</span><span class="ident" id="6080587">i</span><span class="op" id="6080588">]</span><span class="op" id="6080589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080596">}</span><br>
<span class="lineno"></span><span class="op" id="6080598">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="6080601">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6080667">func</span>&nbsp;<span class="op" id="6080672">(</span><span class="ident" id="6080673">t</span>&nbsp;<span class="op" id="6080675">*</span><span class="ident" id="6080676">LineTable</span><span class="op" id="6080685">)</span>&nbsp;<span class="ident" id="6080687">step</span><span class="op" id="6080691">(</span><span class="ident" id="6080692">p</span>&nbsp;<span class="op" id="6080694">*</span><span class="op" id="6080695">[</span><span class="op" id="6080696">]</span><span class="builtintype" id="6080697">byte</span><span class="op" id="6080701">,</span>&nbsp;<span class="ident" id="6080703">pc</span>&nbsp;<span class="op" id="6080706">*</span><span class="builtintype" id="6080707">uint64</span><span class="op" id="6080713">,</span>&nbsp;<span class="ident" id="6080715">val</span>&nbsp;<span class="op" id="6080719">*</span><span class="builtintype" id="6080720">int32</span><span class="op" id="6080725">,</span>&nbsp;<span class="ident" id="6080727">first</span>&nbsp;<span class="builtintype" id="6080733">bool</span><span class="op" id="6080737">)</span>&nbsp;<span class="builtintype" id="6080739">bool</span>&nbsp;<span class="op" id="6080744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080747">uvdelta</span>&nbsp;<span class="op" id="6080755">:=</span>&nbsp;<span class="ident" id="6080758">t</span><span class="op" id="6080759">.</span><span class="ident" id="6080760">readvarint</span><span class="op" id="6080770">(</span><span class="ident" id="6080771">p</span><span class="op" id="6080772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080775">if</span>&nbsp;<span class="ident" id="6080778">uvdelta</span>&nbsp;<span class="op" id="6080786">==</span>&nbsp;<span class="num" id="6080789">0</span>&nbsp;<span class="op" id="6080791">&amp;&amp;</span>&nbsp;<span class="op" id="6080794">!</span><span class="ident" id="6080795">first</span>&nbsp;<span class="op" id="6080801">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080805">return</span>&nbsp;<span class="builtintype" id="6080812">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080819">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6080822">if</span>&nbsp;<span class="ident" id="6080825">uvdelta</span><span class="op" id="6080832">&amp;</span><span class="num" id="6080833">1</span>&nbsp;<span class="op" id="6080835">!=</span>&nbsp;<span class="num" id="6080838">0</span>&nbsp;<span class="op" id="6080840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080844">uvdelta</span>&nbsp;<span class="op" id="6080852">=</span>&nbsp;<span class="op" id="6080854">^</span><span class="op" id="6080855">(</span><span class="ident" id="6080856">uvdelta</span>&nbsp;<span class="op" id="6080864">&gt;&gt;</span>&nbsp;<span class="num" id="6080867">1</span><span class="op" id="6080868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080871">}</span>&nbsp;<span class="keyword" id="6080873">else</span>&nbsp;<span class="op" id="6080878">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080882">uvdelta</span>&nbsp;<span class="op" id="6080890">&gt;&gt;=</span>&nbsp;<span class="num" id="6080894">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080900">vdelta</span>&nbsp;<span class="op" id="6080907">:=</span>&nbsp;<span class="builtintype" id="6080910">int32</span><span class="op" id="6080915">(</span><span class="ident" id="6080916">uvdelta</span><span class="op" id="6080923">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6080926">pcdelta</span>&nbsp;<span class="op" id="6080934">:=</span>&nbsp;<span class="ident" id="6080937">t</span><span class="op" id="6080938">.</span><span class="ident" id="6080939">readvarint</span><span class="op" id="6080949">(</span><span class="ident" id="6080950">p</span><span class="op" id="6080951">)</span>&nbsp;<span class="op" id="6080953">*</span>&nbsp;<span class="ident" id="6080955">t</span><span class="op" id="6080956">.</span><span class="ident" id="6080957">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080966">*</span><span class="ident" id="6080967">pc</span>&nbsp;<span class="op" id="6080970">+=</span>&nbsp;<span class="builtintype" id="6080973">uint64</span><span class="op" id="6080979">(</span><span class="ident" id="6080980">pcdelta</span><span class="op" id="6080987">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6080990">*</span><span class="ident" id="6080991">val</span>&nbsp;<span class="op" id="6080995">+=</span>&nbsp;<span class="ident" id="6080998">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081006">return</span>&nbsp;<span class="builtintype" id="6081013">true</span><br>
<span class="lineno"></span><span class="op" id="6081018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6081021">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="6081081">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="6081142">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="6081203">func</span>&nbsp;<span class="op" id="6081208">(</span><span class="ident" id="6081209">t</span>&nbsp;<span class="op" id="6081211">*</span><span class="ident" id="6081212">LineTable</span><span class="op" id="6081221">)</span>&nbsp;<span class="ident" id="6081223">pcvalue</span><span class="op" id="6081230">(</span><span class="ident" id="6081231">off</span>&nbsp;<span class="builtintype" id="6081235">uint32</span><span class="op" id="6081241">,</span>&nbsp;<span class="ident" id="6081243">entry</span><span class="op" id="6081248">,</span>&nbsp;<span class="ident" id="6081250">targetpc</span>&nbsp;<span class="builtintype" id="6081259">uint64</span><span class="op" id="6081265">)</span>&nbsp;<span class="builtintype" id="6081267">int32</span>&nbsp;<span class="op" id="6081273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081276">if</span>&nbsp;<span class="ident" id="6081279">off</span>&nbsp;<span class="op" id="6081283">==</span>&nbsp;<span class="num" id="6081286">0</span>&nbsp;<span class="op" id="6081288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081292">return</span>&nbsp;<span class="op" id="6081299">-</span><span class="num" id="6081300">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6081303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6081306">p</span>&nbsp;<span class="op" id="6081308">:=</span>&nbsp;<span class="ident" id="6081311">t</span><span class="op" id="6081312">.</span><span class="ident" id="6081313">Data</span><span class="op" id="6081317">[</span><span class="ident" id="6081318">off</span><span class="op" id="6081321">:</span><span class="op" id="6081322">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6081326">val</span>&nbsp;<span class="op" id="6081330">:=</span>&nbsp;<span class="builtintype" id="6081333">int32</span><span class="op" id="6081338">(</span><span class="op" id="6081339">-</span><span class="num" id="6081340">1</span><span class="op" id="6081341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6081344">pc</span>&nbsp;<span class="op" id="6081347">:=</span>&nbsp;<span class="ident" id="6081350">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081357">for</span>&nbsp;<span class="ident" id="6081361">t</span><span class="op" id="6081362">.</span><span class="ident" id="6081363">step</span><span class="op" id="6081367">(</span><span class="op" id="6081368">&amp;</span><span class="ident" id="6081369">p</span><span class="op" id="6081370">,</span>&nbsp;<span class="op" id="6081372">&amp;</span><span class="ident" id="6081373">pc</span><span class="op" id="6081375">,</span>&nbsp;<span class="op" id="6081377">&amp;</span><span class="ident" id="6081378">val</span><span class="op" id="6081381">,</span>&nbsp;<span class="ident" id="6081383">pc</span>&nbsp;<span class="op" id="6081386">==</span>&nbsp;<span class="ident" id="6081389">entry</span><span class="op" id="6081394">)</span>&nbsp;<span class="op" id="6081396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081400">if</span>&nbsp;<span class="ident" id="6081403">targetpc</span>&nbsp;<span class="op" id="6081412">&lt;</span>&nbsp;<span class="ident" id="6081414">pc</span>&nbsp;<span class="op" id="6081417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081422">return</span>&nbsp;<span class="ident" id="6081429">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6081435">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6081438">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081441">return</span>&nbsp;<span class="op" id="6081448">-</span><span class="num" id="6081449">1</span><br>
<span class="lineno"></span><span class="op" id="6081451">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6081454">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6081517">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="6081573">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="6081642">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="6081713">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6081788">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="6081865">func</span>&nbsp;<span class="op" id="6081870">(</span><span class="ident" id="6081871">t</span>&nbsp;<span class="op" id="6081873">*</span><span class="ident" id="6081874">LineTable</span><span class="op" id="6081883">)</span>&nbsp;<span class="ident" id="6081885">findFileLine</span><span class="op" id="6081897">(</span><span class="ident" id="6081898">entry</span>&nbsp;<span class="builtintype" id="6081904">uint64</span><span class="op" id="6081910">,</span>&nbsp;<span class="ident" id="6081912">filetab</span><span class="op" id="6081919">,</span>&nbsp;<span class="ident" id="6081921">linetab</span>&nbsp;<span class="builtintype" id="6081929">uint32</span><span class="op" id="6081935">,</span>&nbsp;<span class="ident" id="6081937">filenum</span><span class="op" id="6081944">,</span>&nbsp;<span class="ident" id="6081946">line</span>&nbsp;<span class="builtintype" id="6081951">int32</span><span class="op" id="6081956">)</span>&nbsp;<span class="builtintype" id="6081958">uint64</span>&nbsp;<span class="op" id="6081965">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6081968">if</span>&nbsp;<span class="ident" id="6081971">filetab</span>&nbsp;<span class="op" id="6081979">==</span>&nbsp;<span class="num" id="6081982">0</span>&nbsp;<span class="op" id="6081984">||</span>&nbsp;<span class="ident" id="6081987">linetab</span>&nbsp;<span class="op" id="6081995">==</span>&nbsp;<span class="num" id="6081998">0</span>&nbsp;<span class="op" id="6082000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082004">return</span>&nbsp;<span class="num" id="6082011">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082018">fp</span>&nbsp;<span class="op" id="6082021">:=</span>&nbsp;<span class="ident" id="6082024">t</span><span class="op" id="6082025">.</span><span class="ident" id="6082026">Data</span><span class="op" id="6082030">[</span><span class="ident" id="6082031">filetab</span><span class="op" id="6082038">:</span><span class="op" id="6082039">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082042">fl</span>&nbsp;<span class="op" id="6082045">:=</span>&nbsp;<span class="ident" id="6082048">t</span><span class="op" id="6082049">.</span><span class="ident" id="6082050">Data</span><span class="op" id="6082054">[</span><span class="ident" id="6082055">linetab</span><span class="op" id="6082062">:</span><span class="op" id="6082063">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082066">fileVal</span>&nbsp;<span class="op" id="6082074">:=</span>&nbsp;<span class="builtintype" id="6082077">int32</span><span class="op" id="6082082">(</span><span class="op" id="6082083">-</span><span class="num" id="6082084">1</span><span class="op" id="6082085">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082088">filePC</span>&nbsp;<span class="op" id="6082095">:=</span>&nbsp;<span class="ident" id="6082098">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082105">lineVal</span>&nbsp;<span class="op" id="6082113">:=</span>&nbsp;<span class="builtintype" id="6082116">int32</span><span class="op" id="6082121">(</span><span class="op" id="6082122">-</span><span class="num" id="6082123">1</span><span class="op" id="6082124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082127">linePC</span>&nbsp;<span class="op" id="6082134">:=</span>&nbsp;<span class="ident" id="6082137">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082144">fileStartPC</span>&nbsp;<span class="op" id="6082156">:=</span>&nbsp;<span class="ident" id="6082159">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082167">for</span>&nbsp;<span class="ident" id="6082171">t</span><span class="op" id="6082172">.</span><span class="ident" id="6082173">step</span><span class="op" id="6082177">(</span><span class="op" id="6082178">&amp;</span><span class="ident" id="6082179">fp</span><span class="op" id="6082181">,</span>&nbsp;<span class="op" id="6082183">&amp;</span><span class="ident" id="6082184">filePC</span><span class="op" id="6082190">,</span>&nbsp;<span class="op" id="6082192">&amp;</span><span class="ident" id="6082193">fileVal</span><span class="op" id="6082200">,</span>&nbsp;<span class="ident" id="6082202">filePC</span>&nbsp;<span class="op" id="6082209">==</span>&nbsp;<span class="ident" id="6082212">entry</span><span class="op" id="6082217">)</span>&nbsp;<span class="op" id="6082219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082223">if</span>&nbsp;<span class="ident" id="6082226">fileVal</span>&nbsp;<span class="op" id="6082234">==</span>&nbsp;<span class="ident" id="6082237">filenum</span>&nbsp;<span class="op" id="6082245">&amp;&amp;</span>&nbsp;<span class="ident" id="6082248">fileStartPC</span>&nbsp;<span class="op" id="6082260">&lt;</span>&nbsp;<span class="ident" id="6082262">filePC</span>&nbsp;<span class="op" id="6082269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6082274">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6082331">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6082390">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6082448">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082480">lineStartPC</span>&nbsp;<span class="op" id="6082492">:=</span>&nbsp;<span class="ident" id="6082495">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082505">for</span>&nbsp;<span class="ident" id="6082509">linePC</span>&nbsp;<span class="op" id="6082516">&lt;</span>&nbsp;<span class="ident" id="6082518">filePC</span>&nbsp;<span class="op" id="6082525">&amp;&amp;</span>&nbsp;<span class="ident" id="6082528">t</span><span class="op" id="6082529">.</span><span class="ident" id="6082530">step</span><span class="op" id="6082534">(</span><span class="op" id="6082535">&amp;</span><span class="ident" id="6082536">fl</span><span class="op" id="6082538">,</span>&nbsp;<span class="op" id="6082540">&amp;</span><span class="ident" id="6082541">linePC</span><span class="op" id="6082547">,</span>&nbsp;<span class="op" id="6082549">&amp;</span><span class="ident" id="6082550">lineVal</span><span class="op" id="6082557">,</span>&nbsp;<span class="ident" id="6082559">linePC</span>&nbsp;<span class="op" id="6082566">==</span>&nbsp;<span class="ident" id="6082569">entry</span><span class="op" id="6082574">)</span>&nbsp;<span class="op" id="6082576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6082582">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082650">if</span>&nbsp;<span class="ident" id="6082653">lineVal</span>&nbsp;<span class="op" id="6082661">==</span>&nbsp;<span class="ident" id="6082664">line</span>&nbsp;<span class="op" id="6082669">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082676">if</span>&nbsp;<span class="ident" id="6082679">fileStartPC</span>&nbsp;<span class="op" id="6082691">&lt;=</span>&nbsp;<span class="ident" id="6082694">lineStartPC</span>&nbsp;<span class="op" id="6082706">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082714">return</span>&nbsp;<span class="ident" id="6082721">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082745">if</span>&nbsp;<span class="ident" id="6082748">fileStartPC</span>&nbsp;<span class="op" id="6082760">&lt;</span>&nbsp;<span class="ident" id="6082762">linePC</span>&nbsp;<span class="op" id="6082769">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082777">return</span>&nbsp;<span class="ident" id="6082784">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082801">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082807">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082813">lineStartPC</span>&nbsp;<span class="op" id="6082825">=</span>&nbsp;<span class="ident" id="6082827">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082837">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082841">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6082845">fileStartPC</span>&nbsp;<span class="op" id="6082857">=</span>&nbsp;<span class="ident" id="6082859">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6082867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6082870">return</span>&nbsp;<span class="num" id="6082877">0</span><br>
<span class="lineno"></span><span class="op" id="6082879">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="6082882">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6082961">func</span>&nbsp;<span class="op" id="6082966">(</span><span class="ident" id="6082967">t</span>&nbsp;<span class="op" id="6082969">*</span><span class="ident" id="6082970">LineTable</span><span class="op" id="6082979">)</span>&nbsp;<span class="ident" id="6082981">go12PCToLine</span><span class="op" id="6082993">(</span><span class="ident" id="6082994">pc</span>&nbsp;<span class="builtintype" id="6082997">uint64</span><span class="op" id="6083003">)</span>&nbsp;<span class="op" id="6083005">(</span><span class="ident" id="6083006">line</span>&nbsp;<span class="builtintype" id="6083011">int</span><span class="op" id="6083014">)</span>&nbsp;<span class="op" id="6083016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083019">defer</span>&nbsp;<span class="keyword" id="6083025">func</span><span class="op" id="6083029">(</span><span class="op" id="6083030">)</span>&nbsp;<span class="op" id="6083032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083036">if</span>&nbsp;<span class="builtinfunc" id="6083039">recover</span><span class="op" id="6083046">(</span><span class="op" id="6083047">)</span>&nbsp;<span class="op" id="6083049">!=</span>&nbsp;<span class="builtintype" id="6083052">nil</span>&nbsp;<span class="op" id="6083056">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083061">line</span>&nbsp;<span class="op" id="6083066">=</span>&nbsp;<span class="op" id="6083068">-</span><span class="num" id="6083069">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083073">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083076">}</span><span class="op" id="6083077">(</span><span class="op" id="6083078">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083082">f</span>&nbsp;<span class="op" id="6083084">:=</span>&nbsp;<span class="ident" id="6083087">t</span><span class="op" id="6083088">.</span><span class="ident" id="6083089">findFunc</span><span class="op" id="6083097">(</span><span class="ident" id="6083098">pc</span><span class="op" id="6083100">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083103">if</span>&nbsp;<span class="ident" id="6083106">f</span>&nbsp;<span class="op" id="6083108">==</span>&nbsp;<span class="builtintype" id="6083111">nil</span>&nbsp;<span class="op" id="6083115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083119">return</span>&nbsp;<span class="op" id="6083126">-</span><span class="num" id="6083127">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083133">entry</span>&nbsp;<span class="op" id="6083139">:=</span>&nbsp;<span class="ident" id="6083142">t</span><span class="op" id="6083143">.</span><span class="builtintype" id="6083144">uintptr</span><span class="op" id="6083151">(</span><span class="ident" id="6083152">f</span><span class="op" id="6083153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083156">linetab</span>&nbsp;<span class="op" id="6083164">:=</span>&nbsp;<span class="ident" id="6083167">t</span><span class="op" id="6083168">.</span><span class="ident" id="6083169">binary</span><span class="op" id="6083175">.</span><span class="ident" id="6083176">Uint32</span><span class="op" id="6083182">(</span><span class="ident" id="6083183">f</span><span class="op" id="6083184">[</span><span class="ident" id="6083185">t</span><span class="op" id="6083186">.</span><span class="ident" id="6083187">ptrsize</span><span class="op" id="6083194">+</span><span class="num" id="6083195">5</span><span class="op" id="6083196">*</span><span class="num" id="6083197">4</span><span class="op" id="6083198">:</span><span class="op" id="6083199">]</span><span class="op" id="6083200">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083203">return</span>&nbsp;<span class="builtintype" id="6083210">int</span><span class="op" id="6083213">(</span><span class="ident" id="6083214">t</span><span class="op" id="6083215">.</span><span class="ident" id="6083216">pcvalue</span><span class="op" id="6083223">(</span><span class="ident" id="6083224">linetab</span><span class="op" id="6083231">,</span>&nbsp;<span class="ident" id="6083233">entry</span><span class="op" id="6083238">,</span>&nbsp;<span class="ident" id="6083240">pc</span><span class="op" id="6083242">)</span><span class="op" id="6083243">)</span><br>
<span class="lineno"></span><span class="op" id="6083245">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083248">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="6083325">func</span>&nbsp;<span class="op" id="6083330">(</span><span class="ident" id="6083331">t</span>&nbsp;<span class="op" id="6083333">*</span><span class="ident" id="6083334">LineTable</span><span class="op" id="6083343">)</span>&nbsp;<span class="ident" id="6083345">go12PCToFile</span><span class="op" id="6083357">(</span><span class="ident" id="6083358">pc</span>&nbsp;<span class="builtintype" id="6083361">uint64</span><span class="op" id="6083367">)</span>&nbsp;<span class="op" id="6083369">(</span><span class="ident" id="6083370">file</span>&nbsp;<span class="builtintype" id="6083375">string</span><span class="op" id="6083381">)</span>&nbsp;<span class="op" id="6083383">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083386">defer</span>&nbsp;<span class="keyword" id="6083392">func</span><span class="op" id="6083396">(</span><span class="op" id="6083397">)</span>&nbsp;<span class="op" id="6083399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083403">if</span>&nbsp;<span class="builtinfunc" id="6083406">recover</span><span class="op" id="6083413">(</span><span class="op" id="6083414">)</span>&nbsp;<span class="op" id="6083416">!=</span>&nbsp;<span class="builtintype" id="6083419">nil</span>&nbsp;<span class="op" id="6083423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083428">file</span>&nbsp;<span class="op" id="6083433">=</span>&nbsp;<span class="string" id="6083435">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083440">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083443">}</span><span class="op" id="6083444">(</span><span class="op" id="6083445">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083449">f</span>&nbsp;<span class="op" id="6083451">:=</span>&nbsp;<span class="ident" id="6083454">t</span><span class="op" id="6083455">.</span><span class="ident" id="6083456">findFunc</span><span class="op" id="6083464">(</span><span class="ident" id="6083465">pc</span><span class="op" id="6083467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083470">if</span>&nbsp;<span class="ident" id="6083473">f</span>&nbsp;<span class="op" id="6083475">==</span>&nbsp;<span class="builtintype" id="6083478">nil</span>&nbsp;<span class="op" id="6083482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083486">return</span>&nbsp;<span class="string" id="6083493">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083497">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083500">entry</span>&nbsp;<span class="op" id="6083506">:=</span>&nbsp;<span class="ident" id="6083509">t</span><span class="op" id="6083510">.</span><span class="builtintype" id="6083511">uintptr</span><span class="op" id="6083518">(</span><span class="ident" id="6083519">f</span><span class="op" id="6083520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083523">filetab</span>&nbsp;<span class="op" id="6083531">:=</span>&nbsp;<span class="ident" id="6083534">t</span><span class="op" id="6083535">.</span><span class="ident" id="6083536">binary</span><span class="op" id="6083542">.</span><span class="ident" id="6083543">Uint32</span><span class="op" id="6083549">(</span><span class="ident" id="6083550">f</span><span class="op" id="6083551">[</span><span class="ident" id="6083552">t</span><span class="op" id="6083553">.</span><span class="ident" id="6083554">ptrsize</span><span class="op" id="6083561">+</span><span class="num" id="6083562">4</span><span class="op" id="6083563">*</span><span class="num" id="6083564">4</span><span class="op" id="6083565">:</span><span class="op" id="6083566">]</span><span class="op" id="6083567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083570">fno</span>&nbsp;<span class="op" id="6083574">:=</span>&nbsp;<span class="ident" id="6083577">t</span><span class="op" id="6083578">.</span><span class="ident" id="6083579">pcvalue</span><span class="op" id="6083586">(</span><span class="ident" id="6083587">filetab</span><span class="op" id="6083594">,</span>&nbsp;<span class="ident" id="6083596">entry</span><span class="op" id="6083601">,</span>&nbsp;<span class="ident" id="6083603">pc</span><span class="op" id="6083605">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083608">if</span>&nbsp;<span class="ident" id="6083611">fno</span>&nbsp;<span class="op" id="6083615">&lt;=</span>&nbsp;<span class="num" id="6083618">0</span>&nbsp;<span class="op" id="6083620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083624">return</span>&nbsp;<span class="string" id="6083631">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083638">return</span>&nbsp;<span class="ident" id="6083645">t</span><span class="op" id="6083646">.</span><span class="builtintype" id="6083647">string</span><span class="op" id="6083653">(</span><span class="ident" id="6083654">t</span><span class="op" id="6083655">.</span><span class="ident" id="6083656">binary</span><span class="op" id="6083662">.</span><span class="ident" id="6083663">Uint32</span><span class="op" id="6083669">(</span><span class="ident" id="6083670">t</span><span class="op" id="6083671">.</span><span class="ident" id="6083672">filetab</span><span class="op" id="6083679">[</span><span class="num" id="6083680">4</span><span class="op" id="6083681">*</span><span class="ident" id="6083682">fno</span><span class="op" id="6083685">:</span><span class="op" id="6083686">]</span><span class="op" id="6083687">)</span><span class="op" id="6083688">)</span><br>
<span class="lineno"></span><span class="op" id="6083690">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6083693">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="6083782">func</span>&nbsp;<span class="op" id="6083787">(</span><span class="ident" id="6083788">t</span>&nbsp;<span class="op" id="6083790">*</span><span class="ident" id="6083791">LineTable</span><span class="op" id="6083800">)</span>&nbsp;<span class="ident" id="6083802">go12LineToPC</span><span class="op" id="6083814">(</span><span class="ident" id="6083815">file</span>&nbsp;<span class="builtintype" id="6083820">string</span><span class="op" id="6083826">,</span>&nbsp;<span class="ident" id="6083828">line</span>&nbsp;<span class="builtintype" id="6083833">int</span><span class="op" id="6083836">)</span>&nbsp;<span class="op" id="6083838">(</span><span class="ident" id="6083839">pc</span>&nbsp;<span class="builtintype" id="6083842">uint64</span><span class="op" id="6083848">)</span>&nbsp;<span class="op" id="6083850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083853">defer</span>&nbsp;<span class="keyword" id="6083859">func</span><span class="op" id="6083863">(</span><span class="op" id="6083864">)</span>&nbsp;<span class="op" id="6083866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083870">if</span>&nbsp;<span class="builtinfunc" id="6083873">recover</span><span class="op" id="6083880">(</span><span class="op" id="6083881">)</span>&nbsp;<span class="op" id="6083883">!=</span>&nbsp;<span class="builtintype" id="6083886">nil</span>&nbsp;<span class="op" id="6083890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083895">pc</span>&nbsp;<span class="op" id="6083898">=</span>&nbsp;<span class="num" id="6083900">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083904">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083907">}</span><span class="op" id="6083908">(</span><span class="op" id="6083909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083913">t</span><span class="op" id="6083914">.</span><span class="ident" id="6083915">initFileMap</span><span class="op" id="6083926">(</span><span class="op" id="6083927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6083930">filenum</span>&nbsp;<span class="op" id="6083938">:=</span>&nbsp;<span class="ident" id="6083941">t</span><span class="op" id="6083942">.</span><span class="ident" id="6083943">fileMap</span><span class="op" id="6083950">[</span><span class="ident" id="6083951">file</span><span class="op" id="6083955">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083958">if</span>&nbsp;<span class="ident" id="6083961">filenum</span>&nbsp;<span class="op" id="6083969">==</span>&nbsp;<span class="num" id="6083972">0</span>&nbsp;<span class="op" id="6083974">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6083978">return</span>&nbsp;<span class="num" id="6083985">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6083988">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6083992">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6084016">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="6084093">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084166">for</span>&nbsp;<span class="ident" id="6084170">i</span>&nbsp;<span class="op" id="6084172">:=</span>&nbsp;<span class="builtintype" id="6084175">uint32</span><span class="op" id="6084181">(</span><span class="num" id="6084182">0</span><span class="op" id="6084183">)</span><span class="op" id="6084184">;</span>&nbsp;<span class="ident" id="6084186">i</span>&nbsp;<span class="op" id="6084188">&lt;</span>&nbsp;<span class="ident" id="6084190">t</span><span class="op" id="6084191">.</span><span class="ident" id="6084192">nfunctab</span><span class="op" id="6084200">;</span>&nbsp;<span class="ident" id="6084202">i</span><span class="op" id="6084203">++</span>&nbsp;<span class="op" id="6084206">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084210">f</span>&nbsp;<span class="op" id="6084212">:=</span>&nbsp;<span class="ident" id="6084215">t</span><span class="op" id="6084216">.</span><span class="ident" id="6084217">Data</span><span class="op" id="6084221">[</span><span class="ident" id="6084222">t</span><span class="op" id="6084223">.</span><span class="builtintype" id="6084224">uintptr</span><span class="op" id="6084231">(</span><span class="ident" id="6084232">t</span><span class="op" id="6084233">.</span><span class="ident" id="6084234">functab</span><span class="op" id="6084241">[</span><span class="num" id="6084242">2</span><span class="op" id="6084243">*</span><span class="ident" id="6084244">t</span><span class="op" id="6084245">.</span><span class="ident" id="6084246">ptrsize</span><span class="op" id="6084253">*</span><span class="ident" id="6084254">i</span><span class="op" id="6084255">+</span><span class="ident" id="6084256">t</span><span class="op" id="6084257">.</span><span class="ident" id="6084258">ptrsize</span><span class="op" id="6084265">:</span><span class="op" id="6084266">]</span><span class="op" id="6084267">)</span><span class="op" id="6084268">:</span><span class="op" id="6084269">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084273">entry</span>&nbsp;<span class="op" id="6084279">:=</span>&nbsp;<span class="ident" id="6084282">t</span><span class="op" id="6084283">.</span><span class="builtintype" id="6084284">uintptr</span><span class="op" id="6084291">(</span><span class="ident" id="6084292">f</span><span class="op" id="6084293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084297">filetab</span>&nbsp;<span class="op" id="6084305">:=</span>&nbsp;<span class="ident" id="6084308">t</span><span class="op" id="6084309">.</span><span class="ident" id="6084310">binary</span><span class="op" id="6084316">.</span><span class="ident" id="6084317">Uint32</span><span class="op" id="6084323">(</span><span class="ident" id="6084324">f</span><span class="op" id="6084325">[</span><span class="ident" id="6084326">t</span><span class="op" id="6084327">.</span><span class="ident" id="6084328">ptrsize</span><span class="op" id="6084335">+</span><span class="num" id="6084336">4</span><span class="op" id="6084337">*</span><span class="num" id="6084338">4</span><span class="op" id="6084339">:</span><span class="op" id="6084340">]</span><span class="op" id="6084341">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084345">linetab</span>&nbsp;<span class="op" id="6084353">:=</span>&nbsp;<span class="ident" id="6084356">t</span><span class="op" id="6084357">.</span><span class="ident" id="6084358">binary</span><span class="op" id="6084364">.</span><span class="ident" id="6084365">Uint32</span><span class="op" id="6084371">(</span><span class="ident" id="6084372">f</span><span class="op" id="6084373">[</span><span class="ident" id="6084374">t</span><span class="op" id="6084375">.</span><span class="ident" id="6084376">ptrsize</span><span class="op" id="6084383">+</span><span class="num" id="6084384">5</span><span class="op" id="6084385">*</span><span class="num" id="6084386">4</span><span class="op" id="6084387">:</span><span class="op" id="6084388">]</span><span class="op" id="6084389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084393">pc</span>&nbsp;<span class="op" id="6084396">:=</span>&nbsp;<span class="ident" id="6084399">t</span><span class="op" id="6084400">.</span><span class="ident" id="6084401">findFileLine</span><span class="op" id="6084413">(</span><span class="ident" id="6084414">entry</span><span class="op" id="6084419">,</span>&nbsp;<span class="ident" id="6084421">filetab</span><span class="op" id="6084428">,</span>&nbsp;<span class="ident" id="6084430">linetab</span><span class="op" id="6084437">,</span>&nbsp;<span class="builtintype" id="6084439">int32</span><span class="op" id="6084444">(</span><span class="ident" id="6084445">filenum</span><span class="op" id="6084452">)</span><span class="op" id="6084453">,</span>&nbsp;<span class="builtintype" id="6084455">int32</span><span class="op" id="6084460">(</span><span class="ident" id="6084461">line</span><span class="op" id="6084465">)</span><span class="op" id="6084466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084470">if</span>&nbsp;<span class="ident" id="6084473">pc</span>&nbsp;<span class="op" id="6084476">!=</span>&nbsp;<span class="num" id="6084479">0</span>&nbsp;<span class="op" id="6084481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084486">return</span>&nbsp;<span class="ident" id="6084493">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6084498">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6084501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084504">return</span>&nbsp;<span class="num" id="6084511">0</span><br>
<span class="lineno"></span><span class="op" id="6084513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6084516">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="6084582">func</span>&nbsp;<span class="op" id="6084587">(</span><span class="ident" id="6084588">t</span>&nbsp;<span class="op" id="6084590">*</span><span class="ident" id="6084591">LineTable</span><span class="op" id="6084600">)</span>&nbsp;<span class="ident" id="6084602">initFileMap</span><span class="op" id="6084613">(</span><span class="op" id="6084614">)</span>&nbsp;<span class="op" id="6084616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084619">t</span><span class="op" id="6084620">.</span><span class="ident" id="6084621">mu</span><span class="op" id="6084623">.</span><span class="ident" id="6084624">Lock</span><span class="op" id="6084628">(</span><span class="op" id="6084629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084632">defer</span>&nbsp;<span class="ident" id="6084638">t</span><span class="op" id="6084639">.</span><span class="ident" id="6084640">mu</span><span class="op" id="6084642">.</span><span class="ident" id="6084643">Unlock</span><span class="op" id="6084649">(</span><span class="op" id="6084650">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084654">if</span>&nbsp;<span class="ident" id="6084657">t</span><span class="op" id="6084658">.</span><span class="ident" id="6084659">fileMap</span>&nbsp;<span class="op" id="6084667">!=</span>&nbsp;<span class="builtintype" id="6084670">nil</span>&nbsp;<span class="op" id="6084674">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084678">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6084686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084689">m</span>&nbsp;<span class="op" id="6084691">:=</span>&nbsp;<span class="builtinfunc" id="6084694">make</span><span class="op" id="6084698">(</span><span class="keyword" id="6084699">map</span><span class="op" id="6084702">[</span><span class="builtintype" id="6084703">string</span><span class="op" id="6084709">]</span><span class="builtintype" id="6084710">uint32</span><span class="op" id="6084716">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6084720">for</span>&nbsp;<span class="ident" id="6084724">i</span>&nbsp;<span class="op" id="6084726">:=</span>&nbsp;<span class="builtintype" id="6084729">uint32</span><span class="op" id="6084735">(</span><span class="num" id="6084736">1</span><span class="op" id="6084737">)</span><span class="op" id="6084738">;</span>&nbsp;<span class="ident" id="6084740">i</span>&nbsp;<span class="op" id="6084742">&lt;</span>&nbsp;<span class="ident" id="6084744">t</span><span class="op" id="6084745">.</span><span class="ident" id="6084746">nfiletab</span><span class="op" id="6084754">;</span>&nbsp;<span class="ident" id="6084756">i</span><span class="op" id="6084757">++</span>&nbsp;<span class="op" id="6084760">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084764">s</span>&nbsp;<span class="op" id="6084766">:=</span>&nbsp;<span class="ident" id="6084769">t</span><span class="op" id="6084770">.</span><span class="builtintype" id="6084771">string</span><span class="op" id="6084777">(</span><span class="ident" id="6084778">t</span><span class="op" id="6084779">.</span><span class="ident" id="6084780">binary</span><span class="op" id="6084786">.</span><span class="ident" id="6084787">Uint32</span><span class="op" id="6084793">(</span><span class="ident" id="6084794">t</span><span class="op" id="6084795">.</span><span class="ident" id="6084796">filetab</span><span class="op" id="6084803">[</span><span class="num" id="6084804">4</span><span class="op" id="6084805">*</span><span class="ident" id="6084806">i</span><span class="op" id="6084807">:</span><span class="op" id="6084808">]</span><span class="op" id="6084809">)</span><span class="op" id="6084810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084814">m</span><span class="op" id="6084815">[</span><span class="ident" id="6084816">s</span><span class="op" id="6084817">]</span>&nbsp;<span class="op" id="6084819">=</span>&nbsp;<span class="ident" id="6084821">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6084824">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6084827">t</span><span class="op" id="6084828">.</span><span class="ident" id="6084829">fileMap</span>&nbsp;<span class="op" id="6084837">=</span>&nbsp;<span class="ident" id="6084839">m</span><br>
<span class="lineno"></span><span class="op" id="6084841">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="6084844">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="6084916">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="6084993">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="6085058">func</span>&nbsp;<span class="op" id="6085063">(</span><span class="ident" id="6085064">t</span>&nbsp;<span class="op" id="6085066">*</span><span class="ident" id="6085067">LineTable</span><span class="op" id="6085076">)</span>&nbsp;<span class="ident" id="6085078">go12MapFiles</span><span class="op" id="6085090">(</span><span class="ident" id="6085091">m</span>&nbsp;<span class="keyword" id="6085093">map</span><span class="op" id="6085096">[</span><span class="builtintype" id="6085097">string</span><span class="op" id="6085103">]</span><span class="op" id="6085104">*</span><span class="ident" id="6085105">Obj</span><span class="op" id="6085108">,</span>&nbsp;<span class="ident" id="6085110">obj</span>&nbsp;<span class="op" id="6085114">*</span><span class="ident" id="6085115">Obj</span><span class="op" id="6085118">)</span>&nbsp;<span class="op" id="6085120">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6085123">defer</span>&nbsp;<span class="keyword" id="6085129">func</span><span class="op" id="6085133">(</span><span class="op" id="6085134">)</span>&nbsp;<span class="op" id="6085136">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="6085140">recover</span><span class="op" id="6085147">(</span><span class="op" id="6085148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6085151">}</span><span class="op" id="6085152">(</span><span class="op" id="6085153">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6085157">t</span><span class="op" id="6085158">.</span><span class="ident" id="6085159">initFileMap</span><span class="op" id="6085170">(</span><span class="op" id="6085171">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6085174">for</span>&nbsp;<span class="ident" id="6085178">file</span>&nbsp;<span class="op" id="6085183">:=</span>&nbsp;<span class="keyword" id="6085186">range</span>&nbsp;<span class="ident" id="6085192">t</span><span class="op" id="6085193">.</span><span class="ident" id="6085194">fileMap</span>&nbsp;<span class="op" id="6085202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6085206">m</span><span class="op" id="6085207">[</span><span class="ident" id="6085208">file</span><span class="op" id="6085212">]</span>&nbsp;<span class="op" id="6085214">=</span>&nbsp;<span class="ident" id="6085216">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6085221">}</span><br>
<span class="lineno"></span><span class="op" id="6085223">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
