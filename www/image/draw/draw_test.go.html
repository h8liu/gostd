<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="7609158">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7609213">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7609267">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7609318">package</span>&nbsp;<span class="ident" id="7609326">draw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609332">import</span>&nbsp;<span class="op" id="7609339">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609342">&#34;image&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609351">&#34;image/color&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609366">&#34;image/png&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609379">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7609385">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7609395">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7609398">func</span>&nbsp;<span class="ident" id="7609403">eq</span><span class="op" id="7609405">(</span><span class="ident" id="7609406">c0</span><span class="op" id="7609408">,</span>&nbsp;<span class="ident" id="7609410">c1</span>&nbsp;<span class="ident" id="7609413">color</span><span class="op" id="7609418">.</span><span class="ident" id="7609419">Color</span><span class="op" id="7609424">)</span>&nbsp;<span class="builtintype" id="7609426">bool</span>&nbsp;<span class="op" id="7609431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609434">r0</span><span class="op" id="7609436">,</span>&nbsp;<span class="ident" id="7609438">g0</span><span class="op" id="7609440">,</span>&nbsp;<span class="ident" id="7609442">b0</span><span class="op" id="7609444">,</span>&nbsp;<span class="ident" id="7609446">a0</span>&nbsp;<span class="op" id="7609449">:=</span>&nbsp;<span class="ident" id="7609452">c0</span><span class="op" id="7609454">.</span><span class="ident" id="7609455">RGBA</span><span class="op" id="7609459">(</span><span class="op" id="7609460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609463">r1</span><span class="op" id="7609465">,</span>&nbsp;<span class="ident" id="7609467">g1</span><span class="op" id="7609469">,</span>&nbsp;<span class="ident" id="7609471">b1</span><span class="op" id="7609473">,</span>&nbsp;<span class="ident" id="7609475">a1</span>&nbsp;<span class="op" id="7609478">:=</span>&nbsp;<span class="ident" id="7609481">c1</span><span class="op" id="7609483">.</span><span class="ident" id="7609484">RGBA</span><span class="op" id="7609488">(</span><span class="op" id="7609489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609492">return</span>&nbsp;<span class="ident" id="7609499">r0</span>&nbsp;<span class="op" id="7609502">==</span>&nbsp;<span class="ident" id="7609505">r1</span>&nbsp;<span class="op" id="7609508">&amp;&amp;</span>&nbsp;<span class="ident" id="7609511">g0</span>&nbsp;<span class="op" id="7609514">==</span>&nbsp;<span class="ident" id="7609517">g1</span>&nbsp;<span class="op" id="7609520">&amp;&amp;</span>&nbsp;<span class="ident" id="7609523">b0</span>&nbsp;<span class="op" id="7609526">==</span>&nbsp;<span class="ident" id="7609529">b1</span>&nbsp;<span class="op" id="7609532">&amp;&amp;</span>&nbsp;<span class="ident" id="7609535">a0</span>&nbsp;<span class="op" id="7609538">==</span>&nbsp;<span class="ident" id="7609541">a1</span><br>
<span class="lineno"></span><span class="op" id="7609544">}</span><br>
<span class="lineno">20</span><br>
<span class="lineno"></span><span class="keyword" id="7609547">func</span>&nbsp;<span class="ident" id="7609552">fillBlue</span><span class="op" id="7609560">(</span><span class="ident" id="7609561">alpha</span>&nbsp;<span class="builtintype" id="7609567">int</span><span class="op" id="7609570">)</span>&nbsp;<span class="ident" id="7609572">image</span><span class="op" id="7609577">.</span><span class="ident" id="7609578">Image</span>&nbsp;<span class="op" id="7609584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609587">return</span>&nbsp;<span class="ident" id="7609594">image</span><span class="op" id="7609599">.</span><span class="ident" id="7609600">NewUniform</span><span class="op" id="7609610">(</span><span class="ident" id="7609611">color</span><span class="op" id="7609616">.</span><span class="ident" id="7609617">RGBA</span><span class="op" id="7609621">{</span><span class="num" id="7609622">0</span><span class="op" id="7609623">,</span>&nbsp;<span class="num" id="7609625">0</span><span class="op" id="7609626">,</span>&nbsp;<span class="builtintype" id="7609628">uint8</span><span class="op" id="7609633">(</span><span class="ident" id="7609634">alpha</span><span class="op" id="7609639">)</span><span class="op" id="7609640">,</span>&nbsp;<span class="builtintype" id="7609642">uint8</span><span class="op" id="7609647">(</span><span class="ident" id="7609648">alpha</span><span class="op" id="7609653">)</span><span class="op" id="7609654">}</span><span class="op" id="7609655">)</span><br>
<span class="lineno"></span><span class="op" id="7609657">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="7609660">func</span>&nbsp;<span class="ident" id="7609665">fillAlpha</span><span class="op" id="7609674">(</span><span class="ident" id="7609675">alpha</span>&nbsp;<span class="builtintype" id="7609681">int</span><span class="op" id="7609684">)</span>&nbsp;<span class="ident" id="7609686">image</span><span class="op" id="7609691">.</span><span class="ident" id="7609692">Image</span>&nbsp;<span class="op" id="7609698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609701">return</span>&nbsp;<span class="ident" id="7609708">image</span><span class="op" id="7609713">.</span><span class="ident" id="7609714">NewUniform</span><span class="op" id="7609724">(</span><span class="ident" id="7609725">color</span><span class="op" id="7609730">.</span><span class="ident" id="7609731">Alpha</span><span class="op" id="7609736">{</span><span class="builtintype" id="7609737">uint8</span><span class="op" id="7609742">(</span><span class="ident" id="7609743">alpha</span><span class="op" id="7609748">)</span><span class="op" id="7609749">}</span><span class="op" id="7609750">)</span><br>
<span class="lineno"></span><span class="op" id="7609752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609755">func</span>&nbsp;<span class="ident" id="7609760">vgradGreen</span><span class="op" id="7609770">(</span><span class="ident" id="7609771">alpha</span>&nbsp;<span class="builtintype" id="7609777">int</span><span class="op" id="7609780">)</span>&nbsp;<span class="ident" id="7609782">image</span><span class="op" id="7609787">.</span><span class="ident" id="7609788">Image</span>&nbsp;<span class="op" id="7609794">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609797">m</span>&nbsp;<span class="op" id="7609799">:=</span>&nbsp;<span class="ident" id="7609802">image</span><span class="op" id="7609807">.</span><span class="ident" id="7609808">NewRGBA</span><span class="op" id="7609815">(</span><span class="ident" id="7609816">image</span><span class="op" id="7609821">.</span><span class="ident" id="7609822">Rect</span><span class="op" id="7609826">(</span><span class="num" id="7609827">0</span><span class="op" id="7609828">,</span>&nbsp;<span class="num" id="7609830">0</span><span class="op" id="7609831">,</span>&nbsp;<span class="num" id="7609833">16</span><span class="op" id="7609835">,</span>&nbsp;<span class="num" id="7609837">16</span><span class="op" id="7609839">)</span><span class="op" id="7609840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609843">for</span>&nbsp;<span class="ident" id="7609847">y</span>&nbsp;<span class="op" id="7609849">:=</span>&nbsp;<span class="num" id="7609852">0</span><span class="op" id="7609853">;</span>&nbsp;<span class="ident" id="7609855">y</span>&nbsp;<span class="op" id="7609857">&lt;</span>&nbsp;<span class="num" id="7609859">16</span><span class="op" id="7609861">;</span>&nbsp;<span class="ident" id="7609863">y</span><span class="op" id="7609864">++</span>&nbsp;<span class="op" id="7609867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609871">for</span>&nbsp;<span class="ident" id="7609875">x</span>&nbsp;<span class="op" id="7609877">:=</span>&nbsp;<span class="num" id="7609880">0</span><span class="op" id="7609881">;</span>&nbsp;<span class="ident" id="7609883">x</span>&nbsp;<span class="op" id="7609885">&lt;</span>&nbsp;<span class="num" id="7609887">16</span><span class="op" id="7609889">;</span>&nbsp;<span class="ident" id="7609891">x</span><span class="op" id="7609892">++</span>&nbsp;<span class="op" id="7609895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7609900">m</span><span class="op" id="7609901">.</span><span class="ident" id="7609902">Set</span><span class="op" id="7609905">(</span><span class="ident" id="7609906">x</span><span class="op" id="7609907">,</span>&nbsp;<span class="ident" id="7609909">y</span><span class="op" id="7609910">,</span>&nbsp;<span class="ident" id="7609912">color</span><span class="op" id="7609917">.</span><span class="ident" id="7609918">RGBA</span><span class="op" id="7609922">{</span><span class="num" id="7609923">0</span><span class="op" id="7609924">,</span>&nbsp;<span class="builtintype" id="7609926">uint8</span><span class="op" id="7609931">(</span><span class="ident" id="7609932">y</span>&nbsp;<span class="op" id="7609934">*</span>&nbsp;<span class="ident" id="7609936">alpha</span>&nbsp;<span class="op" id="7609942">/</span>&nbsp;<span class="num" id="7609944">15</span><span class="op" id="7609946">)</span><span class="op" id="7609947">,</span>&nbsp;<span class="num" id="7609949">0</span><span class="op" id="7609950">,</span>&nbsp;<span class="builtintype" id="7609952">uint8</span><span class="op" id="7609957">(</span><span class="ident" id="7609958">alpha</span><span class="op" id="7609963">)</span><span class="op" id="7609964">}</span><span class="op" id="7609965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609969">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7609972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7609975">return</span>&nbsp;<span class="ident" id="7609982">m</span><br>
<span class="lineno"></span><span class="op" id="7609984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7609987">func</span>&nbsp;<span class="ident" id="7609992">vgradAlpha</span><span class="op" id="7610002">(</span><span class="ident" id="7610003">alpha</span>&nbsp;<span class="builtintype" id="7610009">int</span><span class="op" id="7610012">)</span>&nbsp;<span class="ident" id="7610014">image</span><span class="op" id="7610019">.</span><span class="ident" id="7610020">Image</span>&nbsp;<span class="op" id="7610026">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610029">m</span>&nbsp;<span class="op" id="7610031">:=</span>&nbsp;<span class="ident" id="7610034">image</span><span class="op" id="7610039">.</span><span class="ident" id="7610040">NewAlpha</span><span class="op" id="7610048">(</span><span class="ident" id="7610049">image</span><span class="op" id="7610054">.</span><span class="ident" id="7610055">Rect</span><span class="op" id="7610059">(</span><span class="num" id="7610060">0</span><span class="op" id="7610061">,</span>&nbsp;<span class="num" id="7610063">0</span><span class="op" id="7610064">,</span>&nbsp;<span class="num" id="7610066">16</span><span class="op" id="7610068">,</span>&nbsp;<span class="num" id="7610070">16</span><span class="op" id="7610072">)</span><span class="op" id="7610073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610076">for</span>&nbsp;<span class="ident" id="7610080">y</span>&nbsp;<span class="op" id="7610082">:=</span>&nbsp;<span class="num" id="7610085">0</span><span class="op" id="7610086">;</span>&nbsp;<span class="ident" id="7610088">y</span>&nbsp;<span class="op" id="7610090">&lt;</span>&nbsp;<span class="num" id="7610092">16</span><span class="op" id="7610094">;</span>&nbsp;<span class="ident" id="7610096">y</span><span class="op" id="7610097">++</span>&nbsp;<span class="op" id="7610100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610104">for</span>&nbsp;<span class="ident" id="7610108">x</span>&nbsp;<span class="op" id="7610110">:=</span>&nbsp;<span class="num" id="7610113">0</span><span class="op" id="7610114">;</span>&nbsp;<span class="ident" id="7610116">x</span>&nbsp;<span class="op" id="7610118">&lt;</span>&nbsp;<span class="num" id="7610120">16</span><span class="op" id="7610122">;</span>&nbsp;<span class="ident" id="7610124">x</span><span class="op" id="7610125">++</span>&nbsp;<span class="op" id="7610128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610133">m</span><span class="op" id="7610134">.</span><span class="ident" id="7610135">Set</span><span class="op" id="7610138">(</span><span class="ident" id="7610139">x</span><span class="op" id="7610140">,</span>&nbsp;<span class="ident" id="7610142">y</span><span class="op" id="7610143">,</span>&nbsp;<span class="ident" id="7610145">color</span><span class="op" id="7610150">.</span><span class="ident" id="7610151">Alpha</span><span class="op" id="7610156">{</span><span class="builtintype" id="7610157">uint8</span><span class="op" id="7610162">(</span><span class="ident" id="7610163">y</span>&nbsp;<span class="op" id="7610165">*</span>&nbsp;<span class="ident" id="7610167">alpha</span>&nbsp;<span class="op" id="7610173">/</span>&nbsp;<span class="num" id="7610175">15</span><span class="op" id="7610177">)</span><span class="op" id="7610178">}</span><span class="op" id="7610179">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610183">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610186">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610189">return</span>&nbsp;<span class="ident" id="7610196">m</span><br>
<span class="lineno"></span><span class="op" id="7610198">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610201">func</span>&nbsp;<span class="ident" id="7610206">vgradGreenNRGBA</span><span class="op" id="7610221">(</span><span class="ident" id="7610222">alpha</span>&nbsp;<span class="builtintype" id="7610228">int</span><span class="op" id="7610231">)</span>&nbsp;<span class="ident" id="7610233">image</span><span class="op" id="7610238">.</span><span class="ident" id="7610239">Image</span>&nbsp;<span class="op" id="7610245">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610248">m</span>&nbsp;<span class="op" id="7610250">:=</span>&nbsp;<span class="ident" id="7610253">image</span><span class="op" id="7610258">.</span><span class="ident" id="7610259">NewNRGBA</span><span class="op" id="7610267">(</span><span class="ident" id="7610268">image</span><span class="op" id="7610273">.</span><span class="ident" id="7610274">Rect</span><span class="op" id="7610278">(</span><span class="num" id="7610279">0</span><span class="op" id="7610280">,</span>&nbsp;<span class="num" id="7610282">0</span><span class="op" id="7610283">,</span>&nbsp;<span class="num" id="7610285">16</span><span class="op" id="7610287">,</span>&nbsp;<span class="num" id="7610289">16</span><span class="op" id="7610291">)</span><span class="op" id="7610292">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610295">for</span>&nbsp;<span class="ident" id="7610299">y</span>&nbsp;<span class="op" id="7610301">:=</span>&nbsp;<span class="num" id="7610304">0</span><span class="op" id="7610305">;</span>&nbsp;<span class="ident" id="7610307">y</span>&nbsp;<span class="op" id="7610309">&lt;</span>&nbsp;<span class="num" id="7610311">16</span><span class="op" id="7610313">;</span>&nbsp;<span class="ident" id="7610315">y</span><span class="op" id="7610316">++</span>&nbsp;<span class="op" id="7610319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610323">for</span>&nbsp;<span class="ident" id="7610327">x</span>&nbsp;<span class="op" id="7610329">:=</span>&nbsp;<span class="num" id="7610332">0</span><span class="op" id="7610333">;</span>&nbsp;<span class="ident" id="7610335">x</span>&nbsp;<span class="op" id="7610337">&lt;</span>&nbsp;<span class="num" id="7610339">16</span><span class="op" id="7610341">;</span>&nbsp;<span class="ident" id="7610343">x</span><span class="op" id="7610344">++</span>&nbsp;<span class="op" id="7610347">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610352">m</span><span class="op" id="7610353">.</span><span class="ident" id="7610354">Set</span><span class="op" id="7610357">(</span><span class="ident" id="7610358">x</span><span class="op" id="7610359">,</span>&nbsp;<span class="ident" id="7610361">y</span><span class="op" id="7610362">,</span>&nbsp;<span class="ident" id="7610364">color</span><span class="op" id="7610369">.</span><span class="ident" id="7610370">RGBA</span><span class="op" id="7610374">{</span><span class="num" id="7610375">0</span><span class="op" id="7610376">,</span>&nbsp;<span class="builtintype" id="7610378">uint8</span><span class="op" id="7610383">(</span><span class="ident" id="7610384">y</span>&nbsp;<span class="op" id="7610386">*</span>&nbsp;<span class="num" id="7610388">0x11</span><span class="op" id="7610392">)</span><span class="op" id="7610393">,</span>&nbsp;<span class="num" id="7610395">0</span><span class="op" id="7610396">,</span>&nbsp;<span class="builtintype" id="7610398">uint8</span><span class="op" id="7610403">(</span><span class="ident" id="7610404">alpha</span><span class="op" id="7610409">)</span><span class="op" id="7610410">}</span><span class="op" id="7610411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610415">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610421">return</span>&nbsp;<span class="ident" id="7610428">m</span><br>
<span class="lineno"></span><span class="op" id="7610430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610433">func</span>&nbsp;<span class="ident" id="7610438">vgradCr</span><span class="op" id="7610445">(</span><span class="op" id="7610446">)</span>&nbsp;<span class="ident" id="7610448">image</span><span class="op" id="7610453">.</span><span class="ident" id="7610454">Image</span>&nbsp;<span class="op" id="7610460">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610463">m</span>&nbsp;<span class="op" id="7610465">:=</span>&nbsp;<span class="op" id="7610468">&amp;</span><span class="ident" id="7610469">image</span><span class="op" id="7610474">.</span><span class="ident" id="7610475">YCbCr</span><span class="op" id="7610480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610484">Y</span><span class="op" id="7610485">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7610500">make</span><span class="op" id="7610504">(</span><span class="op" id="7610505">[</span><span class="op" id="7610506">]</span><span class="builtintype" id="7610507">byte</span><span class="op" id="7610511">,</span>&nbsp;<span class="num" id="7610513">16</span><span class="op" id="7610515">*</span><span class="num" id="7610516">16</span><span class="op" id="7610518">)</span><span class="op" id="7610519">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610523">Cb</span><span class="op" id="7610525">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7610539">make</span><span class="op" id="7610543">(</span><span class="op" id="7610544">[</span><span class="op" id="7610545">]</span><span class="builtintype" id="7610546">byte</span><span class="op" id="7610550">,</span>&nbsp;<span class="num" id="7610552">16</span><span class="op" id="7610554">*</span><span class="num" id="7610555">16</span><span class="op" id="7610557">)</span><span class="op" id="7610558">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610562">Cr</span><span class="op" id="7610564">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="7610578">make</span><span class="op" id="7610582">(</span><span class="op" id="7610583">[</span><span class="op" id="7610584">]</span><span class="builtintype" id="7610585">byte</span><span class="op" id="7610589">,</span>&nbsp;<span class="num" id="7610591">16</span><span class="op" id="7610593">*</span><span class="num" id="7610594">16</span><span class="op" id="7610596">)</span><span class="op" id="7610597">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610601">YStride</span><span class="op" id="7610608">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7610617">16</span><span class="op" id="7610619">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610623">CStride</span><span class="op" id="7610630">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="7610639">16</span><span class="op" id="7610641">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610645">SubsampleRatio</span><span class="op" id="7610659">:</span>&nbsp;<span class="ident" id="7610661">image</span><span class="op" id="7610666">.</span><span class="ident" id="7610667">YCbCrSubsampleRatio444</span><span class="op" id="7610689">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610693">Rect</span><span class="op" id="7610697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7610709">image</span><span class="op" id="7610714">.</span><span class="ident" id="7610715">Rect</span><span class="op" id="7610719">(</span><span class="num" id="7610720">0</span><span class="op" id="7610721">,</span>&nbsp;<span class="num" id="7610723">0</span><span class="op" id="7610724">,</span>&nbsp;<span class="num" id="7610726">16</span><span class="op" id="7610728">,</span>&nbsp;<span class="num" id="7610730">16</span><span class="op" id="7610732">)</span><span class="op" id="7610733">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610736">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610739">for</span>&nbsp;<span class="ident" id="7610743">y</span>&nbsp;<span class="op" id="7610745">:=</span>&nbsp;<span class="num" id="7610748">0</span><span class="op" id="7610749">;</span>&nbsp;<span class="ident" id="7610751">y</span>&nbsp;<span class="op" id="7610753">&lt;</span>&nbsp;<span class="num" id="7610755">16</span><span class="op" id="7610757">;</span>&nbsp;<span class="ident" id="7610759">y</span><span class="op" id="7610760">++</span>&nbsp;<span class="op" id="7610763">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610767">for</span>&nbsp;<span class="ident" id="7610771">x</span>&nbsp;<span class="op" id="7610773">:=</span>&nbsp;<span class="num" id="7610776">0</span><span class="op" id="7610777">;</span>&nbsp;<span class="ident" id="7610779">x</span>&nbsp;<span class="op" id="7610781">&lt;</span>&nbsp;<span class="num" id="7610783">16</span><span class="op" id="7610785">;</span>&nbsp;<span class="ident" id="7610787">x</span><span class="op" id="7610788">++</span>&nbsp;<span class="op" id="7610791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610796">m</span><span class="op" id="7610797">.</span><span class="ident" id="7610798">Cr</span><span class="op" id="7610800">[</span><span class="ident" id="7610801">y</span><span class="op" id="7610802">*</span><span class="ident" id="7610803">m</span><span class="op" id="7610804">.</span><span class="ident" id="7610805">CStride</span><span class="op" id="7610812">+</span><span class="ident" id="7610813">x</span><span class="op" id="7610814">]</span>&nbsp;<span class="op" id="7610816">=</span>&nbsp;<span class="builtintype" id="7610818">uint8</span><span class="op" id="7610823">(</span><span class="ident" id="7610824">y</span>&nbsp;<span class="op" id="7610826">*</span>&nbsp;<span class="num" id="7610828">0x11</span><span class="op" id="7610832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610836">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7610839">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610842">return</span>&nbsp;<span class="ident" id="7610849">m</span><br>
<span class="lineno">75</span><span class="op" id="7610851">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7610854">func</span>&nbsp;<span class="ident" id="7610859">hgradRed</span><span class="op" id="7610867">(</span><span class="ident" id="7610868">alpha</span>&nbsp;<span class="builtintype" id="7610874">int</span><span class="op" id="7610877">)</span>&nbsp;<span class="ident" id="7610879">Image</span>&nbsp;<span class="op" id="7610885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610888">m</span>&nbsp;<span class="op" id="7610890">:=</span>&nbsp;<span class="ident" id="7610893">image</span><span class="op" id="7610898">.</span><span class="ident" id="7610899">NewRGBA</span><span class="op" id="7610906">(</span><span class="ident" id="7610907">image</span><span class="op" id="7610912">.</span><span class="ident" id="7610913">Rect</span><span class="op" id="7610917">(</span><span class="num" id="7610918">0</span><span class="op" id="7610919">,</span>&nbsp;<span class="num" id="7610921">0</span><span class="op" id="7610922">,</span>&nbsp;<span class="num" id="7610924">16</span><span class="op" id="7610926">,</span>&nbsp;<span class="num" id="7610928">16</span><span class="op" id="7610930">)</span><span class="op" id="7610931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610934">for</span>&nbsp;<span class="ident" id="7610938">y</span>&nbsp;<span class="op" id="7610940">:=</span>&nbsp;<span class="num" id="7610943">0</span><span class="op" id="7610944">;</span>&nbsp;<span class="ident" id="7610946">y</span>&nbsp;<span class="op" id="7610948">&lt;</span>&nbsp;<span class="num" id="7610950">16</span><span class="op" id="7610952">;</span>&nbsp;<span class="ident" id="7610954">y</span><span class="op" id="7610955">++</span>&nbsp;<span class="op" id="7610958">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7610962">for</span>&nbsp;<span class="ident" id="7610966">x</span>&nbsp;<span class="op" id="7610968">:=</span>&nbsp;<span class="num" id="7610971">0</span><span class="op" id="7610972">;</span>&nbsp;<span class="ident" id="7610974">x</span>&nbsp;<span class="op" id="7610976">&lt;</span>&nbsp;<span class="num" id="7610978">16</span><span class="op" id="7610980">;</span>&nbsp;<span class="ident" id="7610982">x</span><span class="op" id="7610983">++</span>&nbsp;<span class="op" id="7610986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7610991">m</span><span class="op" id="7610992">.</span><span class="ident" id="7610993">Set</span><span class="op" id="7610996">(</span><span class="ident" id="7610997">x</span><span class="op" id="7610998">,</span>&nbsp;<span class="ident" id="7611000">y</span><span class="op" id="7611001">,</span>&nbsp;<span class="ident" id="7611003">color</span><span class="op" id="7611008">.</span><span class="ident" id="7611009">RGBA</span><span class="op" id="7611013">{</span><span class="builtintype" id="7611014">uint8</span><span class="op" id="7611019">(</span><span class="ident" id="7611020">x</span>&nbsp;<span class="op" id="7611022">*</span>&nbsp;<span class="ident" id="7611024">alpha</span>&nbsp;<span class="op" id="7611030">/</span>&nbsp;<span class="num" id="7611032">15</span><span class="op" id="7611034">)</span><span class="op" id="7611035">,</span>&nbsp;<span class="num" id="7611037">0</span><span class="op" id="7611038">,</span>&nbsp;<span class="num" id="7611040">0</span><span class="op" id="7611041">,</span>&nbsp;<span class="builtintype" id="7611043">uint8</span><span class="op" id="7611048">(</span><span class="ident" id="7611049">alpha</span><span class="op" id="7611054">)</span><span class="op" id="7611055">}</span><span class="op" id="7611056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611063">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611066">return</span>&nbsp;<span class="ident" id="7611073">m</span><br>
<span class="lineno">85</span><span class="op" id="7611075">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7611078">func</span>&nbsp;<span class="ident" id="7611083">gradYellow</span><span class="op" id="7611093">(</span><span class="ident" id="7611094">alpha</span>&nbsp;<span class="builtintype" id="7611100">int</span><span class="op" id="7611103">)</span>&nbsp;<span class="ident" id="7611105">Image</span>&nbsp;<span class="op" id="7611111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611114">m</span>&nbsp;<span class="op" id="7611116">:=</span>&nbsp;<span class="ident" id="7611119">image</span><span class="op" id="7611124">.</span><span class="ident" id="7611125">NewRGBA</span><span class="op" id="7611132">(</span><span class="ident" id="7611133">image</span><span class="op" id="7611138">.</span><span class="ident" id="7611139">Rect</span><span class="op" id="7611143">(</span><span class="num" id="7611144">0</span><span class="op" id="7611145">,</span>&nbsp;<span class="num" id="7611147">0</span><span class="op" id="7611148">,</span>&nbsp;<span class="num" id="7611150">16</span><span class="op" id="7611152">,</span>&nbsp;<span class="num" id="7611154">16</span><span class="op" id="7611156">)</span><span class="op" id="7611157">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611160">for</span>&nbsp;<span class="ident" id="7611164">y</span>&nbsp;<span class="op" id="7611166">:=</span>&nbsp;<span class="num" id="7611169">0</span><span class="op" id="7611170">;</span>&nbsp;<span class="ident" id="7611172">y</span>&nbsp;<span class="op" id="7611174">&lt;</span>&nbsp;<span class="num" id="7611176">16</span><span class="op" id="7611178">;</span>&nbsp;<span class="ident" id="7611180">y</span><span class="op" id="7611181">++</span>&nbsp;<span class="op" id="7611184">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611188">for</span>&nbsp;<span class="ident" id="7611192">x</span>&nbsp;<span class="op" id="7611194">:=</span>&nbsp;<span class="num" id="7611197">0</span><span class="op" id="7611198">;</span>&nbsp;<span class="ident" id="7611200">x</span>&nbsp;<span class="op" id="7611202">&lt;</span>&nbsp;<span class="num" id="7611204">16</span><span class="op" id="7611206">;</span>&nbsp;<span class="ident" id="7611208">x</span><span class="op" id="7611209">++</span>&nbsp;<span class="op" id="7611212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611217">m</span><span class="op" id="7611218">.</span><span class="ident" id="7611219">Set</span><span class="op" id="7611222">(</span><span class="ident" id="7611223">x</span><span class="op" id="7611224">,</span>&nbsp;<span class="ident" id="7611226">y</span><span class="op" id="7611227">,</span>&nbsp;<span class="ident" id="7611229">color</span><span class="op" id="7611234">.</span><span class="ident" id="7611235">RGBA</span><span class="op" id="7611239">{</span><span class="builtintype" id="7611240">uint8</span><span class="op" id="7611245">(</span><span class="ident" id="7611246">x</span>&nbsp;<span class="op" id="7611248">*</span>&nbsp;<span class="ident" id="7611250">alpha</span>&nbsp;<span class="op" id="7611256">/</span>&nbsp;<span class="num" id="7611258">15</span><span class="op" id="7611260">)</span><span class="op" id="7611261">,</span>&nbsp;<span class="builtintype" id="7611263">uint8</span><span class="op" id="7611268">(</span><span class="ident" id="7611269">y</span>&nbsp;<span class="op" id="7611271">*</span>&nbsp;<span class="ident" id="7611273">alpha</span>&nbsp;<span class="op" id="7611279">/</span>&nbsp;<span class="num" id="7611281">15</span><span class="op" id="7611283">)</span><span class="op" id="7611284">,</span>&nbsp;<span class="num" id="7611286">0</span><span class="op" id="7611287">,</span>&nbsp;<span class="builtintype" id="7611289">uint8</span><span class="op" id="7611294">(</span><span class="ident" id="7611295">alpha</span><span class="op" id="7611300">)</span><span class="op" id="7611301">}</span><span class="op" id="7611302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7611312">return</span>&nbsp;<span class="ident" id="7611319">m</span><br>
<span class="lineno">95</span><span class="op" id="7611321">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7611324">type</span>&nbsp;<span class="ident" id="7611329">drawTest</span>&nbsp;<span class="keyword" id="7611338">struct</span>&nbsp;<span class="op" id="7611345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611348">desc</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7611357">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611365">src</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611374">image</span><span class="op" id="7611379">.</span><span class="ident" id="7611380">Image</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611387">mask</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611396">image</span><span class="op" id="7611401">.</span><span class="ident" id="7611402">Image</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611409">op</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7611418">Op</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7611422">expected</span>&nbsp;<span class="ident" id="7611431">color</span><span class="op" id="7611436">.</span><span class="ident" id="7611437">Color</span><br>
<span class="lineno"></span><span class="op" id="7611443">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="keyword" id="7611446">var</span>&nbsp;<span class="ident" id="7611450">drawTests</span>&nbsp;<span class="op" id="7611460">=</span>&nbsp;<span class="op" id="7611462">[</span><span class="op" id="7611463">]</span><span class="ident" id="7611464">drawTest</span><span class="op" id="7611472">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7611475">//&nbsp;Uniform&nbsp;mask&nbsp;(0%&nbsp;opaque).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611505">{</span><span class="string" id="7611506">&#34;nop&#34;</span><span class="op" id="7611511">,</span>&nbsp;<span class="ident" id="7611513">vgradGreen</span><span class="op" id="7611523">(</span><span class="num" id="7611524">255</span><span class="op" id="7611527">)</span><span class="op" id="7611528">,</span>&nbsp;<span class="ident" id="7611530">fillAlpha</span><span class="op" id="7611539">(</span><span class="num" id="7611540">0</span><span class="op" id="7611541">)</span><span class="op" id="7611542">,</span>&nbsp;<span class="ident" id="7611544">Over</span><span class="op" id="7611548">,</span>&nbsp;<span class="ident" id="7611550">color</span><span class="op" id="7611555">.</span><span class="ident" id="7611556">RGBA</span><span class="op" id="7611560">{</span><span class="num" id="7611561">136</span><span class="op" id="7611564">,</span>&nbsp;<span class="num" id="7611566">0</span><span class="op" id="7611567">,</span>&nbsp;<span class="num" id="7611569">0</span><span class="op" id="7611570">,</span>&nbsp;<span class="num" id="7611572">255</span><span class="op" id="7611575">}</span><span class="op" id="7611576">}</span><span class="op" id="7611577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611580">{</span><span class="string" id="7611581">&#34;clear&#34;</span><span class="op" id="7611588">,</span>&nbsp;<span class="ident" id="7611590">vgradGreen</span><span class="op" id="7611600">(</span><span class="num" id="7611601">255</span><span class="op" id="7611604">)</span><span class="op" id="7611605">,</span>&nbsp;<span class="ident" id="7611607">fillAlpha</span><span class="op" id="7611616">(</span><span class="num" id="7611617">0</span><span class="op" id="7611618">)</span><span class="op" id="7611619">,</span>&nbsp;<span class="ident" id="7611621">Src</span><span class="op" id="7611624">,</span>&nbsp;<span class="ident" id="7611626">color</span><span class="op" id="7611631">.</span><span class="ident" id="7611632">RGBA</span><span class="op" id="7611636">{</span><span class="num" id="7611637">0</span><span class="op" id="7611638">,</span>&nbsp;<span class="num" id="7611640">0</span><span class="op" id="7611641">,</span>&nbsp;<span class="num" id="7611643">0</span><span class="op" id="7611644">,</span>&nbsp;<span class="num" id="7611646">0</span><span class="op" id="7611647">}</span><span class="op" id="7611648">}</span><span class="op" id="7611649">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7611652">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;uniform&nbsp;source.</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7611706">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7611731">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7611778">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;90,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611818">{</span><span class="string" id="7611819">&#34;fill&#34;</span><span class="op" id="7611825">,</span>&nbsp;<span class="ident" id="7611827">fillBlue</span><span class="op" id="7611835">(</span><span class="num" id="7611836">90</span><span class="op" id="7611838">)</span><span class="op" id="7611839">,</span>&nbsp;<span class="ident" id="7611841">fillAlpha</span><span class="op" id="7611850">(</span><span class="num" id="7611851">255</span><span class="op" id="7611854">)</span><span class="op" id="7611855">,</span>&nbsp;<span class="ident" id="7611857">Over</span><span class="op" id="7611861">,</span>&nbsp;<span class="ident" id="7611863">color</span><span class="op" id="7611868">.</span><span class="ident" id="7611869">RGBA</span><span class="op" id="7611873">{</span><span class="num" id="7611874">88</span><span class="op" id="7611876">,</span>&nbsp;<span class="num" id="7611878">0</span><span class="op" id="7611879">,</span>&nbsp;<span class="num" id="7611881">90</span><span class="op" id="7611883">,</span>&nbsp;<span class="num" id="7611885">255</span><span class="op" id="7611888">}</span><span class="op" id="7611889">}</span><span class="op" id="7611890">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611893">{</span><span class="string" id="7611894">&#34;fillSrc&#34;</span><span class="op" id="7611903">,</span>&nbsp;<span class="ident" id="7611905">fillBlue</span><span class="op" id="7611913">(</span><span class="num" id="7611914">90</span><span class="op" id="7611916">)</span><span class="op" id="7611917">,</span>&nbsp;<span class="ident" id="7611919">fillAlpha</span><span class="op" id="7611928">(</span><span class="num" id="7611929">255</span><span class="op" id="7611932">)</span><span class="op" id="7611933">,</span>&nbsp;<span class="ident" id="7611935">Src</span><span class="op" id="7611938">,</span>&nbsp;<span class="ident" id="7611940">color</span><span class="op" id="7611945">.</span><span class="ident" id="7611946">RGBA</span><span class="op" id="7611950">{</span><span class="num" id="7611951">0</span><span class="op" id="7611952">,</span>&nbsp;<span class="num" id="7611954">0</span><span class="op" id="7611955">,</span>&nbsp;<span class="num" id="7611957">90</span><span class="op" id="7611959">,</span>&nbsp;<span class="num" id="7611961">90</span><span class="op" id="7611963">}</span><span class="op" id="7611964">}</span><span class="op" id="7611965">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7611968">{</span><span class="string" id="7611969">&#34;fillAlpha&#34;</span><span class="op" id="7611980">,</span>&nbsp;<span class="ident" id="7611982">fillBlue</span><span class="op" id="7611990">(</span><span class="num" id="7611991">90</span><span class="op" id="7611993">)</span><span class="op" id="7611994">,</span>&nbsp;<span class="ident" id="7611996">fillAlpha</span><span class="op" id="7612005">(</span><span class="num" id="7612006">192</span><span class="op" id="7612009">)</span><span class="op" id="7612010">,</span>&nbsp;<span class="ident" id="7612012">Over</span><span class="op" id="7612016">,</span>&nbsp;<span class="ident" id="7612018">color</span><span class="op" id="7612023">.</span><span class="ident" id="7612024">RGBA</span><span class="op" id="7612028">{</span><span class="num" id="7612029">100</span><span class="op" id="7612032">,</span>&nbsp;<span class="num" id="7612034">0</span><span class="op" id="7612035">,</span>&nbsp;<span class="num" id="7612037">68</span><span class="op" id="7612039">,</span>&nbsp;<span class="num" id="7612041">255</span><span class="op" id="7612044">}</span><span class="op" id="7612045">}</span><span class="op" id="7612046">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612049">{</span><span class="string" id="7612050">&#34;fillAlphaSrc&#34;</span><span class="op" id="7612064">,</span>&nbsp;<span class="ident" id="7612066">fillBlue</span><span class="op" id="7612074">(</span><span class="num" id="7612075">90</span><span class="op" id="7612077">)</span><span class="op" id="7612078">,</span>&nbsp;<span class="ident" id="7612080">fillAlpha</span><span class="op" id="7612089">(</span><span class="num" id="7612090">192</span><span class="op" id="7612093">)</span><span class="op" id="7612094">,</span>&nbsp;<span class="ident" id="7612096">Src</span><span class="op" id="7612099">,</span>&nbsp;<span class="ident" id="7612101">color</span><span class="op" id="7612106">.</span><span class="ident" id="7612107">RGBA</span><span class="op" id="7612111">{</span><span class="num" id="7612112">0</span><span class="op" id="7612113">,</span>&nbsp;<span class="num" id="7612115">0</span><span class="op" id="7612116">,</span>&nbsp;<span class="num" id="7612118">68</span><span class="op" id="7612120">,</span>&nbsp;<span class="num" id="7612122">68</span><span class="op" id="7612124">}</span><span class="op" id="7612125">}</span><span class="op" id="7612126">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612129">{</span><span class="string" id="7612130">&#34;fillNil&#34;</span><span class="op" id="7612139">,</span>&nbsp;<span class="ident" id="7612141">fillBlue</span><span class="op" id="7612149">(</span><span class="num" id="7612150">90</span><span class="op" id="7612152">)</span><span class="op" id="7612153">,</span>&nbsp;<span class="ident" id="7612155">nil</span><span class="op" id="7612158">,</span>&nbsp;<span class="ident" id="7612160">Over</span><span class="op" id="7612164">,</span>&nbsp;<span class="ident" id="7612166">color</span><span class="op" id="7612171">.</span><span class="ident" id="7612172">RGBA</span><span class="op" id="7612176">{</span><span class="num" id="7612177">88</span><span class="op" id="7612179">,</span>&nbsp;<span class="num" id="7612181">0</span><span class="op" id="7612182">,</span>&nbsp;<span class="num" id="7612184">90</span><span class="op" id="7612186">,</span>&nbsp;<span class="num" id="7612188">255</span><span class="op" id="7612191">}</span><span class="op" id="7612192">}</span><span class="op" id="7612193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612196">{</span><span class="string" id="7612197">&#34;fillNilSrc&#34;</span><span class="op" id="7612209">,</span>&nbsp;<span class="ident" id="7612211">fillBlue</span><span class="op" id="7612219">(</span><span class="num" id="7612220">90</span><span class="op" id="7612222">)</span><span class="op" id="7612223">,</span>&nbsp;<span class="ident" id="7612225">nil</span><span class="op" id="7612228">,</span>&nbsp;<span class="ident" id="7612230">Src</span><span class="op" id="7612233">,</span>&nbsp;<span class="ident" id="7612235">color</span><span class="op" id="7612240">.</span><span class="ident" id="7612241">RGBA</span><span class="op" id="7612245">{</span><span class="num" id="7612246">0</span><span class="op" id="7612247">,</span>&nbsp;<span class="num" id="7612249">0</span><span class="op" id="7612250">,</span>&nbsp;<span class="num" id="7612252">90</span><span class="op" id="7612254">,</span>&nbsp;<span class="num" id="7612256">90</span><span class="op" id="7612258">}</span><span class="op" id="7612259">}</span><span class="op" id="7612260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612263">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612318">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612343">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612390">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612430">{</span><span class="string" id="7612431">&#34;copy&#34;</span><span class="op" id="7612437">,</span>&nbsp;<span class="ident" id="7612439">vgradGreen</span><span class="op" id="7612449">(</span><span class="num" id="7612450">90</span><span class="op" id="7612452">)</span><span class="op" id="7612453">,</span>&nbsp;<span class="ident" id="7612455">fillAlpha</span><span class="op" id="7612464">(</span><span class="num" id="7612465">255</span><span class="op" id="7612468">)</span><span class="op" id="7612469">,</span>&nbsp;<span class="ident" id="7612471">Over</span><span class="op" id="7612475">,</span>&nbsp;<span class="ident" id="7612477">color</span><span class="op" id="7612482">.</span><span class="ident" id="7612483">RGBA</span><span class="op" id="7612487">{</span><span class="num" id="7612488">88</span><span class="op" id="7612490">,</span>&nbsp;<span class="num" id="7612492">48</span><span class="op" id="7612494">,</span>&nbsp;<span class="num" id="7612496">0</span><span class="op" id="7612497">,</span>&nbsp;<span class="num" id="7612499">255</span><span class="op" id="7612502">}</span><span class="op" id="7612503">}</span><span class="op" id="7612504">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612507">{</span><span class="string" id="7612508">&#34;copySrc&#34;</span><span class="op" id="7612517">,</span>&nbsp;<span class="ident" id="7612519">vgradGreen</span><span class="op" id="7612529">(</span><span class="num" id="7612530">90</span><span class="op" id="7612532">)</span><span class="op" id="7612533">,</span>&nbsp;<span class="ident" id="7612535">fillAlpha</span><span class="op" id="7612544">(</span><span class="num" id="7612545">255</span><span class="op" id="7612548">)</span><span class="op" id="7612549">,</span>&nbsp;<span class="ident" id="7612551">Src</span><span class="op" id="7612554">,</span>&nbsp;<span class="ident" id="7612556">color</span><span class="op" id="7612561">.</span><span class="ident" id="7612562">RGBA</span><span class="op" id="7612566">{</span><span class="num" id="7612567">0</span><span class="op" id="7612568">,</span>&nbsp;<span class="num" id="7612570">48</span><span class="op" id="7612572">,</span>&nbsp;<span class="num" id="7612574">0</span><span class="op" id="7612575">,</span>&nbsp;<span class="num" id="7612577">90</span><span class="op" id="7612579">}</span><span class="op" id="7612580">}</span><span class="op" id="7612581">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612584">{</span><span class="string" id="7612585">&#34;copyAlpha&#34;</span><span class="op" id="7612596">,</span>&nbsp;<span class="ident" id="7612598">vgradGreen</span><span class="op" id="7612608">(</span><span class="num" id="7612609">90</span><span class="op" id="7612611">)</span><span class="op" id="7612612">,</span>&nbsp;<span class="ident" id="7612614">fillAlpha</span><span class="op" id="7612623">(</span><span class="num" id="7612624">192</span><span class="op" id="7612627">)</span><span class="op" id="7612628">,</span>&nbsp;<span class="ident" id="7612630">Over</span><span class="op" id="7612634">,</span>&nbsp;<span class="ident" id="7612636">color</span><span class="op" id="7612641">.</span><span class="ident" id="7612642">RGBA</span><span class="op" id="7612646">{</span><span class="num" id="7612647">100</span><span class="op" id="7612650">,</span>&nbsp;<span class="num" id="7612652">36</span><span class="op" id="7612654">,</span>&nbsp;<span class="num" id="7612656">0</span><span class="op" id="7612657">,</span>&nbsp;<span class="num" id="7612659">255</span><span class="op" id="7612662">}</span><span class="op" id="7612663">}</span><span class="op" id="7612664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612667">{</span><span class="string" id="7612668">&#34;copyAlphaSrc&#34;</span><span class="op" id="7612682">,</span>&nbsp;<span class="ident" id="7612684">vgradGreen</span><span class="op" id="7612694">(</span><span class="num" id="7612695">90</span><span class="op" id="7612697">)</span><span class="op" id="7612698">,</span>&nbsp;<span class="ident" id="7612700">fillAlpha</span><span class="op" id="7612709">(</span><span class="num" id="7612710">192</span><span class="op" id="7612713">)</span><span class="op" id="7612714">,</span>&nbsp;<span class="ident" id="7612716">Src</span><span class="op" id="7612719">,</span>&nbsp;<span class="ident" id="7612721">color</span><span class="op" id="7612726">.</span><span class="ident" id="7612727">RGBA</span><span class="op" id="7612731">{</span><span class="num" id="7612732">0</span><span class="op" id="7612733">,</span>&nbsp;<span class="num" id="7612735">36</span><span class="op" id="7612737">,</span>&nbsp;<span class="num" id="7612739">0</span><span class="op" id="7612740">,</span>&nbsp;<span class="num" id="7612742">68</span><span class="op" id="7612744">}</span><span class="op" id="7612745">}</span><span class="op" id="7612746">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612749">{</span><span class="string" id="7612750">&#34;copyNil&#34;</span><span class="op" id="7612759">,</span>&nbsp;<span class="ident" id="7612761">vgradGreen</span><span class="op" id="7612771">(</span><span class="num" id="7612772">90</span><span class="op" id="7612774">)</span><span class="op" id="7612775">,</span>&nbsp;<span class="ident" id="7612777">nil</span><span class="op" id="7612780">,</span>&nbsp;<span class="ident" id="7612782">Over</span><span class="op" id="7612786">,</span>&nbsp;<span class="ident" id="7612788">color</span><span class="op" id="7612793">.</span><span class="ident" id="7612794">RGBA</span><span class="op" id="7612798">{</span><span class="num" id="7612799">88</span><span class="op" id="7612801">,</span>&nbsp;<span class="num" id="7612803">48</span><span class="op" id="7612805">,</span>&nbsp;<span class="num" id="7612807">0</span><span class="op" id="7612808">,</span>&nbsp;<span class="num" id="7612810">255</span><span class="op" id="7612813">}</span><span class="op" id="7612814">}</span><span class="op" id="7612815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7612818">{</span><span class="string" id="7612819">&#34;copyNilSrc&#34;</span><span class="op" id="7612831">,</span>&nbsp;<span class="ident" id="7612833">vgradGreen</span><span class="op" id="7612843">(</span><span class="num" id="7612844">90</span><span class="op" id="7612846">)</span><span class="op" id="7612847">,</span>&nbsp;<span class="ident" id="7612849">nil</span><span class="op" id="7612852">,</span>&nbsp;<span class="ident" id="7612854">Src</span><span class="op" id="7612857">,</span>&nbsp;<span class="ident" id="7612859">color</span><span class="op" id="7612864">.</span><span class="ident" id="7612865">RGBA</span><span class="op" id="7612869">{</span><span class="num" id="7612870">0</span><span class="op" id="7612871">,</span>&nbsp;<span class="num" id="7612873">48</span><span class="op" id="7612875">,</span>&nbsp;<span class="num" id="7612877">0</span><span class="op" id="7612878">,</span>&nbsp;<span class="num" id="7612880">90</span><span class="op" id="7612882">}</span><span class="op" id="7612883">}</span><span class="op" id="7612884">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612887">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;NRGBA&nbsp;source.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612948">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7612973">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613020">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;136,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;NRGBA-space,&nbsp;which&nbsp;is&nbsp;{0,&nbsp;48,&nbsp;0,&nbsp;90}&nbsp;in&nbsp;RGBA-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613115">//&nbsp;The&nbsp;result&nbsp;pixel&nbsp;is&nbsp;different&nbsp;than&nbsp;in&nbsp;the&nbsp;&#34;copy*&#34;&nbsp;test&nbsp;cases&nbsp;because&nbsp;of&nbsp;rounding&nbsp;errors.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613208">{</span><span class="string" id="7613209">&#34;nrgba&#34;</span><span class="op" id="7613216">,</span>&nbsp;<span class="ident" id="7613218">vgradGreenNRGBA</span><span class="op" id="7613233">(</span><span class="num" id="7613234">90</span><span class="op" id="7613236">)</span><span class="op" id="7613237">,</span>&nbsp;<span class="ident" id="7613239">fillAlpha</span><span class="op" id="7613248">(</span><span class="num" id="7613249">255</span><span class="op" id="7613252">)</span><span class="op" id="7613253">,</span>&nbsp;<span class="ident" id="7613255">Over</span><span class="op" id="7613259">,</span>&nbsp;<span class="ident" id="7613261">color</span><span class="op" id="7613266">.</span><span class="ident" id="7613267">RGBA</span><span class="op" id="7613271">{</span><span class="num" id="7613272">88</span><span class="op" id="7613274">,</span>&nbsp;<span class="num" id="7613276">46</span><span class="op" id="7613278">,</span>&nbsp;<span class="num" id="7613280">0</span><span class="op" id="7613281">,</span>&nbsp;<span class="num" id="7613283">255</span><span class="op" id="7613286">}</span><span class="op" id="7613287">}</span><span class="op" id="7613288">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613291">{</span><span class="string" id="7613292">&#34;nrgbaSrc&#34;</span><span class="op" id="7613302">,</span>&nbsp;<span class="ident" id="7613304">vgradGreenNRGBA</span><span class="op" id="7613319">(</span><span class="num" id="7613320">90</span><span class="op" id="7613322">)</span><span class="op" id="7613323">,</span>&nbsp;<span class="ident" id="7613325">fillAlpha</span><span class="op" id="7613334">(</span><span class="num" id="7613335">255</span><span class="op" id="7613338">)</span><span class="op" id="7613339">,</span>&nbsp;<span class="ident" id="7613341">Src</span><span class="op" id="7613344">,</span>&nbsp;<span class="ident" id="7613346">color</span><span class="op" id="7613351">.</span><span class="ident" id="7613352">RGBA</span><span class="op" id="7613356">{</span><span class="num" id="7613357">0</span><span class="op" id="7613358">,</span>&nbsp;<span class="num" id="7613360">46</span><span class="op" id="7613362">,</span>&nbsp;<span class="num" id="7613364">0</span><span class="op" id="7613365">,</span>&nbsp;<span class="num" id="7613367">90</span><span class="op" id="7613369">}</span><span class="op" id="7613370">}</span><span class="op" id="7613371">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613374">{</span><span class="string" id="7613375">&#34;nrgbaAlpha&#34;</span><span class="op" id="7613387">,</span>&nbsp;<span class="ident" id="7613389">vgradGreenNRGBA</span><span class="op" id="7613404">(</span><span class="num" id="7613405">90</span><span class="op" id="7613407">)</span><span class="op" id="7613408">,</span>&nbsp;<span class="ident" id="7613410">fillAlpha</span><span class="op" id="7613419">(</span><span class="num" id="7613420">192</span><span class="op" id="7613423">)</span><span class="op" id="7613424">,</span>&nbsp;<span class="ident" id="7613426">Over</span><span class="op" id="7613430">,</span>&nbsp;<span class="ident" id="7613432">color</span><span class="op" id="7613437">.</span><span class="ident" id="7613438">RGBA</span><span class="op" id="7613442">{</span><span class="num" id="7613443">100</span><span class="op" id="7613446">,</span>&nbsp;<span class="num" id="7613448">34</span><span class="op" id="7613450">,</span>&nbsp;<span class="num" id="7613452">0</span><span class="op" id="7613453">,</span>&nbsp;<span class="num" id="7613455">255</span><span class="op" id="7613458">}</span><span class="op" id="7613459">}</span><span class="op" id="7613460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613463">{</span><span class="string" id="7613464">&#34;nrgbaAlphaSrc&#34;</span><span class="op" id="7613479">,</span>&nbsp;<span class="ident" id="7613481">vgradGreenNRGBA</span><span class="op" id="7613496">(</span><span class="num" id="7613497">90</span><span class="op" id="7613499">)</span><span class="op" id="7613500">,</span>&nbsp;<span class="ident" id="7613502">fillAlpha</span><span class="op" id="7613511">(</span><span class="num" id="7613512">192</span><span class="op" id="7613515">)</span><span class="op" id="7613516">,</span>&nbsp;<span class="ident" id="7613518">Src</span><span class="op" id="7613521">,</span>&nbsp;<span class="ident" id="7613523">color</span><span class="op" id="7613528">.</span><span class="ident" id="7613529">RGBA</span><span class="op" id="7613533">{</span><span class="num" id="7613534">0</span><span class="op" id="7613535">,</span>&nbsp;<span class="num" id="7613537">34</span><span class="op" id="7613539">,</span>&nbsp;<span class="num" id="7613541">0</span><span class="op" id="7613542">,</span>&nbsp;<span class="num" id="7613544">68</span><span class="op" id="7613546">}</span><span class="op" id="7613547">}</span><span class="op" id="7613548">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613551">{</span><span class="string" id="7613552">&#34;nrgbaNil&#34;</span><span class="op" id="7613562">,</span>&nbsp;<span class="ident" id="7613564">vgradGreenNRGBA</span><span class="op" id="7613579">(</span><span class="num" id="7613580">90</span><span class="op" id="7613582">)</span><span class="op" id="7613583">,</span>&nbsp;<span class="ident" id="7613585">nil</span><span class="op" id="7613588">,</span>&nbsp;<span class="ident" id="7613590">Over</span><span class="op" id="7613594">,</span>&nbsp;<span class="ident" id="7613596">color</span><span class="op" id="7613601">.</span><span class="ident" id="7613602">RGBA</span><span class="op" id="7613606">{</span><span class="num" id="7613607">88</span><span class="op" id="7613609">,</span>&nbsp;<span class="num" id="7613611">46</span><span class="op" id="7613613">,</span>&nbsp;<span class="num" id="7613615">0</span><span class="op" id="7613616">,</span>&nbsp;<span class="num" id="7613618">255</span><span class="op" id="7613621">}</span><span class="op" id="7613622">}</span><span class="op" id="7613623">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613626">{</span><span class="string" id="7613627">&#34;nrgbaNilSrc&#34;</span><span class="op" id="7613640">,</span>&nbsp;<span class="ident" id="7613642">vgradGreenNRGBA</span><span class="op" id="7613657">(</span><span class="num" id="7613658">90</span><span class="op" id="7613660">)</span><span class="op" id="7613661">,</span>&nbsp;<span class="ident" id="7613663">nil</span><span class="op" id="7613666">,</span>&nbsp;<span class="ident" id="7613668">Src</span><span class="op" id="7613671">,</span>&nbsp;<span class="ident" id="7613673">color</span><span class="op" id="7613678">.</span><span class="ident" id="7613679">RGBA</span><span class="op" id="7613683">{</span><span class="num" id="7613684">0</span><span class="op" id="7613685">,</span>&nbsp;<span class="num" id="7613687">46</span><span class="op" id="7613689">,</span>&nbsp;<span class="num" id="7613691">0</span><span class="op" id="7613692">,</span>&nbsp;<span class="num" id="7613694">90</span><span class="op" id="7613696">}</span><span class="op" id="7613697">}</span><span class="op" id="7613698">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613701">//&nbsp;Uniform&nbsp;mask&nbsp;(100%,&nbsp;75%,&nbsp;nil)&nbsp;and&nbsp;variable&nbsp;YCbCr&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613762">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613787">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7613834">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;136}&nbsp;in&nbsp;YCbCr-space,&nbsp;which&nbsp;is&nbsp;{11,&nbsp;38,&nbsp;0,&nbsp;255}&nbsp;in&nbsp;RGB-space.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613926">{</span><span class="string" id="7613927">&#34;ycbcr&#34;</span><span class="op" id="7613934">,</span>&nbsp;<span class="ident" id="7613936">vgradCr</span><span class="op" id="7613943">(</span><span class="op" id="7613944">)</span><span class="op" id="7613945">,</span>&nbsp;<span class="ident" id="7613947">fillAlpha</span><span class="op" id="7613956">(</span><span class="num" id="7613957">255</span><span class="op" id="7613960">)</span><span class="op" id="7613961">,</span>&nbsp;<span class="ident" id="7613963">Over</span><span class="op" id="7613967">,</span>&nbsp;<span class="ident" id="7613969">color</span><span class="op" id="7613974">.</span><span class="ident" id="7613975">RGBA</span><span class="op" id="7613979">{</span><span class="num" id="7613980">11</span><span class="op" id="7613982">,</span>&nbsp;<span class="num" id="7613984">38</span><span class="op" id="7613986">,</span>&nbsp;<span class="num" id="7613988">0</span><span class="op" id="7613989">,</span>&nbsp;<span class="num" id="7613991">255</span><span class="op" id="7613994">}</span><span class="op" id="7613995">}</span><span class="op" id="7613996">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7613999">{</span><span class="string" id="7614000">&#34;ycbcrSrc&#34;</span><span class="op" id="7614010">,</span>&nbsp;<span class="ident" id="7614012">vgradCr</span><span class="op" id="7614019">(</span><span class="op" id="7614020">)</span><span class="op" id="7614021">,</span>&nbsp;<span class="ident" id="7614023">fillAlpha</span><span class="op" id="7614032">(</span><span class="num" id="7614033">255</span><span class="op" id="7614036">)</span><span class="op" id="7614037">,</span>&nbsp;<span class="ident" id="7614039">Src</span><span class="op" id="7614042">,</span>&nbsp;<span class="ident" id="7614044">color</span><span class="op" id="7614049">.</span><span class="ident" id="7614050">RGBA</span><span class="op" id="7614054">{</span><span class="num" id="7614055">11</span><span class="op" id="7614057">,</span>&nbsp;<span class="num" id="7614059">38</span><span class="op" id="7614061">,</span>&nbsp;<span class="num" id="7614063">0</span><span class="op" id="7614064">,</span>&nbsp;<span class="num" id="7614066">255</span><span class="op" id="7614069">}</span><span class="op" id="7614070">}</span><span class="op" id="7614071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614074">{</span><span class="string" id="7614075">&#34;ycbcrAlpha&#34;</span><span class="op" id="7614087">,</span>&nbsp;<span class="ident" id="7614089">vgradCr</span><span class="op" id="7614096">(</span><span class="op" id="7614097">)</span><span class="op" id="7614098">,</span>&nbsp;<span class="ident" id="7614100">fillAlpha</span><span class="op" id="7614109">(</span><span class="num" id="7614110">192</span><span class="op" id="7614113">)</span><span class="op" id="7614114">,</span>&nbsp;<span class="ident" id="7614116">Over</span><span class="op" id="7614120">,</span>&nbsp;<span class="ident" id="7614122">color</span><span class="op" id="7614127">.</span><span class="ident" id="7614128">RGBA</span><span class="op" id="7614132">{</span><span class="num" id="7614133">42</span><span class="op" id="7614135">,</span>&nbsp;<span class="num" id="7614137">28</span><span class="op" id="7614139">,</span>&nbsp;<span class="num" id="7614141">0</span><span class="op" id="7614142">,</span>&nbsp;<span class="num" id="7614144">255</span><span class="op" id="7614147">}</span><span class="op" id="7614148">}</span><span class="op" id="7614149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614152">{</span><span class="string" id="7614153">&#34;ycbcrAlphaSrc&#34;</span><span class="op" id="7614168">,</span>&nbsp;<span class="ident" id="7614170">vgradCr</span><span class="op" id="7614177">(</span><span class="op" id="7614178">)</span><span class="op" id="7614179">,</span>&nbsp;<span class="ident" id="7614181">fillAlpha</span><span class="op" id="7614190">(</span><span class="num" id="7614191">192</span><span class="op" id="7614194">)</span><span class="op" id="7614195">,</span>&nbsp;<span class="ident" id="7614197">Src</span><span class="op" id="7614200">,</span>&nbsp;<span class="ident" id="7614202">color</span><span class="op" id="7614207">.</span><span class="ident" id="7614208">RGBA</span><span class="op" id="7614212">{</span><span class="num" id="7614213">8</span><span class="op" id="7614214">,</span>&nbsp;<span class="num" id="7614216">28</span><span class="op" id="7614218">,</span>&nbsp;<span class="num" id="7614220">0</span><span class="op" id="7614221">,</span>&nbsp;<span class="num" id="7614223">192</span><span class="op" id="7614226">}</span><span class="op" id="7614227">}</span><span class="op" id="7614228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614231">{</span><span class="string" id="7614232">&#34;ycbcrNil&#34;</span><span class="op" id="7614242">,</span>&nbsp;<span class="ident" id="7614244">vgradCr</span><span class="op" id="7614251">(</span><span class="op" id="7614252">)</span><span class="op" id="7614253">,</span>&nbsp;<span class="ident" id="7614255">nil</span><span class="op" id="7614258">,</span>&nbsp;<span class="ident" id="7614260">Over</span><span class="op" id="7614264">,</span>&nbsp;<span class="ident" id="7614266">color</span><span class="op" id="7614271">.</span><span class="ident" id="7614272">RGBA</span><span class="op" id="7614276">{</span><span class="num" id="7614277">11</span><span class="op" id="7614279">,</span>&nbsp;<span class="num" id="7614281">38</span><span class="op" id="7614283">,</span>&nbsp;<span class="num" id="7614285">0</span><span class="op" id="7614286">,</span>&nbsp;<span class="num" id="7614288">255</span><span class="op" id="7614291">}</span><span class="op" id="7614292">}</span><span class="op" id="7614293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614296">{</span><span class="string" id="7614297">&#34;ycbcrNilSrc&#34;</span><span class="op" id="7614310">,</span>&nbsp;<span class="ident" id="7614312">vgradCr</span><span class="op" id="7614319">(</span><span class="op" id="7614320">)</span><span class="op" id="7614321">,</span>&nbsp;<span class="ident" id="7614323">nil</span><span class="op" id="7614326">,</span>&nbsp;<span class="ident" id="7614328">Src</span><span class="op" id="7614331">,</span>&nbsp;<span class="ident" id="7614333">color</span><span class="op" id="7614338">.</span><span class="ident" id="7614339">RGBA</span><span class="op" id="7614343">{</span><span class="num" id="7614344">11</span><span class="op" id="7614346">,</span>&nbsp;<span class="num" id="7614348">38</span><span class="op" id="7614350">,</span>&nbsp;<span class="num" id="7614352">0</span><span class="op" id="7614353">,</span>&nbsp;<span class="num" id="7614355">255</span><span class="op" id="7614358">}</span><span class="op" id="7614359">}</span><span class="op" id="7614360">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614363">//&nbsp;Variable&nbsp;mask&nbsp;and&nbsp;variable&nbsp;source.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614402">//&nbsp;At&nbsp;(x,&nbsp;y)&nbsp;==&nbsp;(8,&nbsp;8):</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614427">//&nbsp;The&nbsp;destination&nbsp;pixel&nbsp;is&nbsp;{136,&nbsp;0,&nbsp;0,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614474">//&nbsp;The&nbsp;source&nbsp;pixel&nbsp;is&nbsp;{0,&nbsp;0,&nbsp;255,&nbsp;255}.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614516">//&nbsp;The&nbsp;mask&nbsp;pixel&#39;s&nbsp;alpha&nbsp;is&nbsp;102,&nbsp;or&nbsp;40%.</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614559">{</span><span class="string" id="7614560">&#34;generic&#34;</span><span class="op" id="7614569">,</span>&nbsp;<span class="ident" id="7614571">fillBlue</span><span class="op" id="7614579">(</span><span class="num" id="7614580">255</span><span class="op" id="7614583">)</span><span class="op" id="7614584">,</span>&nbsp;<span class="ident" id="7614586">vgradAlpha</span><span class="op" id="7614596">(</span><span class="num" id="7614597">192</span><span class="op" id="7614600">)</span><span class="op" id="7614601">,</span>&nbsp;<span class="ident" id="7614603">Over</span><span class="op" id="7614607">,</span>&nbsp;<span class="ident" id="7614609">color</span><span class="op" id="7614614">.</span><span class="ident" id="7614615">RGBA</span><span class="op" id="7614619">{</span><span class="num" id="7614620">81</span><span class="op" id="7614622">,</span>&nbsp;<span class="num" id="7614624">0</span><span class="op" id="7614625">,</span>&nbsp;<span class="num" id="7614627">102</span><span class="op" id="7614630">,</span>&nbsp;<span class="num" id="7614632">255</span><span class="op" id="7614635">}</span><span class="op" id="7614636">}</span><span class="op" id="7614637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7614640">{</span><span class="string" id="7614641">&#34;genericSrc&#34;</span><span class="op" id="7614653">,</span>&nbsp;<span class="ident" id="7614655">fillBlue</span><span class="op" id="7614663">(</span><span class="num" id="7614664">255</span><span class="op" id="7614667">)</span><span class="op" id="7614668">,</span>&nbsp;<span class="ident" id="7614670">vgradAlpha</span><span class="op" id="7614680">(</span><span class="num" id="7614681">192</span><span class="op" id="7614684">)</span><span class="op" id="7614685">,</span>&nbsp;<span class="ident" id="7614687">Src</span><span class="op" id="7614690">,</span>&nbsp;<span class="ident" id="7614692">color</span><span class="op" id="7614697">.</span><span class="ident" id="7614698">RGBA</span><span class="op" id="7614702">{</span><span class="num" id="7614703">0</span><span class="op" id="7614704">,</span>&nbsp;<span class="num" id="7614706">0</span><span class="op" id="7614707">,</span>&nbsp;<span class="num" id="7614709">102</span><span class="op" id="7614712">,</span>&nbsp;<span class="num" id="7614714">102</span><span class="op" id="7614717">}</span><span class="op" id="7614718">}</span><span class="op" id="7614719">,</span><br>
<span class="lineno"></span><span class="op" id="7614721">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7614724">func</span>&nbsp;<span class="ident" id="7614729">makeGolden</span><span class="op" id="7614739">(</span><span class="ident" id="7614740">dst</span>&nbsp;<span class="ident" id="7614744">image</span><span class="op" id="7614749">.</span><span class="ident" id="7614750">Image</span><span class="op" id="7614755">,</span>&nbsp;<span class="ident" id="7614757">r</span>&nbsp;<span class="ident" id="7614759">image</span><span class="op" id="7614764">.</span><span class="ident" id="7614765">Rectangle</span><span class="op" id="7614774">,</span>&nbsp;<span class="ident" id="7614776">src</span>&nbsp;<span class="ident" id="7614780">image</span><span class="op" id="7614785">.</span><span class="ident" id="7614786">Image</span><span class="op" id="7614791">,</span>&nbsp;<span class="ident" id="7614793">sp</span>&nbsp;<span class="ident" id="7614796">image</span><span class="op" id="7614801">.</span><span class="ident" id="7614802">Point</span><span class="op" id="7614807">,</span>&nbsp;<span class="ident" id="7614809">mask</span>&nbsp;<span class="ident" id="7614814">image</span><span class="op" id="7614819">.</span><span class="ident" id="7614820">Image</span><span class="op" id="7614825">,</span>&nbsp;<span class="ident" id="7614827">mp</span>&nbsp;<span class="ident" id="7614830">image</span><span class="op" id="7614835">.</span><span class="ident" id="7614836">Point</span><span class="op" id="7614841">,</span>&nbsp;<span class="ident" id="7614843">op</span>&nbsp;<span class="ident" id="7614846">Op</span><span class="op" id="7614848">)</span>&nbsp;<span class="ident" id="7614850">image</span><span class="op" id="7614855">.</span><span class="ident" id="7614856">Image</span>&nbsp;<span class="op" id="7614862">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614865">//&nbsp;Since&nbsp;golden&nbsp;is&nbsp;a&nbsp;newly&nbsp;allocated&nbsp;image,&nbsp;we&nbsp;don&#39;t&nbsp;have&nbsp;to&nbsp;check&nbsp;if&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7614940">//&nbsp;input&nbsp;source&nbsp;and&nbsp;mask&nbsp;images&nbsp;and&nbsp;the&nbsp;output&nbsp;golden&nbsp;image&nbsp;overlap.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615010">b</span>&nbsp;<span class="op" id="7615012">:=</span>&nbsp;<span class="ident" id="7615015">dst</span><span class="op" id="7615018">.</span><span class="ident" id="7615019">Bounds</span><span class="op" id="7615025">(</span><span class="op" id="7615026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615029">sb</span>&nbsp;<span class="op" id="7615032">:=</span>&nbsp;<span class="ident" id="7615035">src</span><span class="op" id="7615038">.</span><span class="ident" id="7615039">Bounds</span><span class="op" id="7615045">(</span><span class="op" id="7615046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615049">mb</span>&nbsp;<span class="op" id="7615052">:=</span>&nbsp;<span class="ident" id="7615055">image</span><span class="op" id="7615060">.</span><span class="ident" id="7615061">Rect</span><span class="op" id="7615065">(</span><span class="op" id="7615066">-</span><span class="num" id="7615067">1e9</span><span class="op" id="7615070">,</span>&nbsp;<span class="op" id="7615072">-</span><span class="num" id="7615073">1e9</span><span class="op" id="7615076">,</span>&nbsp;<span class="num" id="7615078">1e9</span><span class="op" id="7615081">,</span>&nbsp;<span class="num" id="7615083">1e9</span><span class="op" id="7615086">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615089">if</span>&nbsp;<span class="ident" id="7615092">mask</span>&nbsp;<span class="op" id="7615097">!=</span>&nbsp;<span class="ident" id="7615100">nil</span>&nbsp;<span class="op" id="7615104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615108">mb</span>&nbsp;<span class="op" id="7615111">=</span>&nbsp;<span class="ident" id="7615113">mask</span><span class="op" id="7615117">.</span><span class="ident" id="7615118">Bounds</span><span class="op" id="7615124">(</span><span class="op" id="7615125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615131">golden</span>&nbsp;<span class="op" id="7615138">:=</span>&nbsp;<span class="ident" id="7615141">image</span><span class="op" id="7615146">.</span><span class="ident" id="7615147">NewRGBA</span><span class="op" id="7615154">(</span><span class="ident" id="7615155">image</span><span class="op" id="7615160">.</span><span class="ident" id="7615161">Rect</span><span class="op" id="7615165">(</span><span class="num" id="7615166">0</span><span class="op" id="7615167">,</span>&nbsp;<span class="num" id="7615169">0</span><span class="op" id="7615170">,</span>&nbsp;<span class="ident" id="7615172">b</span><span class="op" id="7615173">.</span><span class="ident" id="7615174">Max</span><span class="op" id="7615177">.</span><span class="ident" id="7615178">X</span><span class="op" id="7615179">,</span>&nbsp;<span class="ident" id="7615181">b</span><span class="op" id="7615182">.</span><span class="ident" id="7615183">Max</span><span class="op" id="7615186">.</span><span class="ident" id="7615187">Y</span><span class="op" id="7615188">)</span><span class="op" id="7615189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615192">for</span>&nbsp;<span class="ident" id="7615196">y</span>&nbsp;<span class="op" id="7615198">:=</span>&nbsp;<span class="ident" id="7615201">r</span><span class="op" id="7615202">.</span><span class="ident" id="7615203">Min</span><span class="op" id="7615206">.</span><span class="ident" id="7615207">Y</span><span class="op" id="7615208">;</span>&nbsp;<span class="ident" id="7615210">y</span>&nbsp;<span class="op" id="7615212">&lt;</span>&nbsp;<span class="ident" id="7615214">r</span><span class="op" id="7615215">.</span><span class="ident" id="7615216">Max</span><span class="op" id="7615219">.</span><span class="ident" id="7615220">Y</span><span class="op" id="7615221">;</span>&nbsp;<span class="ident" id="7615223">y</span><span class="op" id="7615224">++</span>&nbsp;<span class="op" id="7615227">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615231">sy</span>&nbsp;<span class="op" id="7615234">:=</span>&nbsp;<span class="ident" id="7615237">y</span>&nbsp;<span class="op" id="7615239">+</span>&nbsp;<span class="ident" id="7615241">sp</span><span class="op" id="7615243">.</span><span class="ident" id="7615244">Y</span>&nbsp;<span class="op" id="7615246">-</span>&nbsp;<span class="ident" id="7615248">r</span><span class="op" id="7615249">.</span><span class="ident" id="7615250">Min</span><span class="op" id="7615253">.</span><span class="ident" id="7615254">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615258">my</span>&nbsp;<span class="op" id="7615261">:=</span>&nbsp;<span class="ident" id="7615264">y</span>&nbsp;<span class="op" id="7615266">+</span>&nbsp;<span class="ident" id="7615268">mp</span><span class="op" id="7615270">.</span><span class="ident" id="7615271">Y</span>&nbsp;<span class="op" id="7615273">-</span>&nbsp;<span class="ident" id="7615275">r</span><span class="op" id="7615276">.</span><span class="ident" id="7615277">Min</span><span class="op" id="7615280">.</span><span class="ident" id="7615281">Y</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615285">for</span>&nbsp;<span class="ident" id="7615289">x</span>&nbsp;<span class="op" id="7615291">:=</span>&nbsp;<span class="ident" id="7615294">r</span><span class="op" id="7615295">.</span><span class="ident" id="7615296">Min</span><span class="op" id="7615299">.</span><span class="ident" id="7615300">X</span><span class="op" id="7615301">;</span>&nbsp;<span class="ident" id="7615303">x</span>&nbsp;<span class="op" id="7615305">&lt;</span>&nbsp;<span class="ident" id="7615307">r</span><span class="op" id="7615308">.</span><span class="ident" id="7615309">Max</span><span class="op" id="7615312">.</span><span class="ident" id="7615313">X</span><span class="op" id="7615314">;</span>&nbsp;<span class="ident" id="7615316">x</span><span class="op" id="7615317">++</span>&nbsp;<span class="op" id="7615320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615325">if</span>&nbsp;<span class="op" id="7615328">!</span><span class="op" id="7615329">(</span><span class="ident" id="7615330">image</span><span class="op" id="7615335">.</span><span class="ident" id="7615336">Pt</span><span class="op" id="7615338">(</span><span class="ident" id="7615339">x</span><span class="op" id="7615340">,</span>&nbsp;<span class="ident" id="7615342">y</span><span class="op" id="7615343">)</span><span class="op" id="7615344">.</span><span class="ident" id="7615345">In</span><span class="op" id="7615347">(</span><span class="ident" id="7615348">b</span><span class="op" id="7615349">)</span><span class="op" id="7615350">)</span>&nbsp;<span class="op" id="7615352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615358">continue</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615370">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615375">sx</span>&nbsp;<span class="op" id="7615378">:=</span>&nbsp;<span class="ident" id="7615381">x</span>&nbsp;<span class="op" id="7615383">+</span>&nbsp;<span class="ident" id="7615385">sp</span><span class="op" id="7615387">.</span><span class="ident" id="7615388">X</span>&nbsp;<span class="op" id="7615390">-</span>&nbsp;<span class="ident" id="7615392">r</span><span class="op" id="7615393">.</span><span class="ident" id="7615394">Min</span><span class="op" id="7615397">.</span><span class="ident" id="7615398">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615403">if</span>&nbsp;<span class="op" id="7615406">!</span><span class="op" id="7615407">(</span><span class="ident" id="7615408">image</span><span class="op" id="7615413">.</span><span class="ident" id="7615414">Pt</span><span class="op" id="7615416">(</span><span class="ident" id="7615417">sx</span><span class="op" id="7615419">,</span>&nbsp;<span class="ident" id="7615421">sy</span><span class="op" id="7615423">)</span><span class="op" id="7615424">.</span><span class="ident" id="7615425">In</span><span class="op" id="7615427">(</span><span class="ident" id="7615428">sb</span><span class="op" id="7615430">)</span><span class="op" id="7615431">)</span>&nbsp;<span class="op" id="7615433">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615439">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615451">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615456">mx</span>&nbsp;<span class="op" id="7615459">:=</span>&nbsp;<span class="ident" id="7615462">x</span>&nbsp;<span class="op" id="7615464">+</span>&nbsp;<span class="ident" id="7615466">mp</span><span class="op" id="7615468">.</span><span class="ident" id="7615469">X</span>&nbsp;<span class="op" id="7615471">-</span>&nbsp;<span class="ident" id="7615473">r</span><span class="op" id="7615474">.</span><span class="ident" id="7615475">Min</span><span class="op" id="7615478">.</span><span class="ident" id="7615479">X</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615484">if</span>&nbsp;<span class="op" id="7615487">!</span><span class="op" id="7615488">(</span><span class="ident" id="7615489">image</span><span class="op" id="7615494">.</span><span class="ident" id="7615495">Pt</span><span class="op" id="7615497">(</span><span class="ident" id="7615498">mx</span><span class="op" id="7615500">,</span>&nbsp;<span class="ident" id="7615502">my</span><span class="op" id="7615504">)</span><span class="op" id="7615505">.</span><span class="ident" id="7615506">In</span><span class="op" id="7615508">(</span><span class="ident" id="7615509">mb</span><span class="op" id="7615511">)</span><span class="op" id="7615512">)</span>&nbsp;<span class="op" id="7615514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615520">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615532">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615538">const</span>&nbsp;<span class="ident" id="7615544">M</span>&nbsp;<span class="op" id="7615546">=</span>&nbsp;<span class="num" id="7615548">1</span><span class="op" id="7615549">&lt;&lt;</span><span class="num" id="7615551">16</span>&nbsp;<span class="op" id="7615554">-</span>&nbsp;<span class="num" id="7615556">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615561">var</span>&nbsp;<span class="ident" id="7615565">dr</span><span class="op" id="7615567">,</span>&nbsp;<span class="ident" id="7615569">dg</span><span class="op" id="7615571">,</span>&nbsp;<span class="ident" id="7615573">db</span><span class="op" id="7615575">,</span>&nbsp;<span class="ident" id="7615577">da</span>&nbsp;<span class="builtintype" id="7615580">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615590">if</span>&nbsp;<span class="ident" id="7615593">op</span>&nbsp;<span class="op" id="7615596">==</span>&nbsp;<span class="ident" id="7615599">Over</span>&nbsp;<span class="op" id="7615604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615610">dr</span><span class="op" id="7615612">,</span>&nbsp;<span class="ident" id="7615614">dg</span><span class="op" id="7615616">,</span>&nbsp;<span class="ident" id="7615618">db</span><span class="op" id="7615620">,</span>&nbsp;<span class="ident" id="7615622">da</span>&nbsp;<span class="op" id="7615625">=</span>&nbsp;<span class="ident" id="7615627">dst</span><span class="op" id="7615630">.</span><span class="ident" id="7615631">At</span><span class="op" id="7615633">(</span><span class="ident" id="7615634">x</span><span class="op" id="7615635">,</span>&nbsp;<span class="ident" id="7615637">y</span><span class="op" id="7615638">)</span><span class="op" id="7615639">.</span><span class="ident" id="7615640">RGBA</span><span class="op" id="7615644">(</span><span class="op" id="7615645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615650">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615655">sr</span><span class="op" id="7615657">,</span>&nbsp;<span class="ident" id="7615659">sg</span><span class="op" id="7615661">,</span>&nbsp;<span class="ident" id="7615663">sb</span><span class="op" id="7615665">,</span>&nbsp;<span class="ident" id="7615667">sa</span>&nbsp;<span class="op" id="7615670">:=</span>&nbsp;<span class="ident" id="7615673">src</span><span class="op" id="7615676">.</span><span class="ident" id="7615677">At</span><span class="op" id="7615679">(</span><span class="ident" id="7615680">sx</span><span class="op" id="7615682">,</span>&nbsp;<span class="ident" id="7615684">sy</span><span class="op" id="7615686">)</span><span class="op" id="7615687">.</span><span class="ident" id="7615688">RGBA</span><span class="op" id="7615692">(</span><span class="op" id="7615693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615698">ma</span>&nbsp;<span class="op" id="7615701">:=</span>&nbsp;<span class="builtintype" id="7615704">uint32</span><span class="op" id="7615710">(</span><span class="ident" id="7615711">M</span><span class="op" id="7615712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615717">if</span>&nbsp;<span class="ident" id="7615720">mask</span>&nbsp;<span class="op" id="7615725">!=</span>&nbsp;<span class="ident" id="7615728">nil</span>&nbsp;<span class="op" id="7615732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615738">_</span><span class="op" id="7615739">,</span>&nbsp;<span class="ident" id="7615741">_</span><span class="op" id="7615742">,</span>&nbsp;<span class="ident" id="7615744">_</span><span class="op" id="7615745">,</span>&nbsp;<span class="ident" id="7615747">ma</span>&nbsp;<span class="op" id="7615750">=</span>&nbsp;<span class="ident" id="7615752">mask</span><span class="op" id="7615756">.</span><span class="ident" id="7615757">At</span><span class="op" id="7615759">(</span><span class="ident" id="7615760">mx</span><span class="op" id="7615762">,</span>&nbsp;<span class="ident" id="7615764">my</span><span class="op" id="7615766">)</span><span class="op" id="7615767">.</span><span class="ident" id="7615768">RGBA</span><span class="op" id="7615772">(</span><span class="op" id="7615773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615778">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615783">a</span>&nbsp;<span class="op" id="7615785">:=</span>&nbsp;<span class="ident" id="7615788">M</span>&nbsp;<span class="op" id="7615790">-</span>&nbsp;<span class="op" id="7615792">(</span><span class="ident" id="7615793">sa</span>&nbsp;<span class="op" id="7615796">*</span>&nbsp;<span class="ident" id="7615798">ma</span>&nbsp;<span class="op" id="7615801">/</span>&nbsp;<span class="ident" id="7615803">M</span><span class="op" id="7615804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7615809">golden</span><span class="op" id="7615815">.</span><span class="ident" id="7615816">Set</span><span class="op" id="7615819">(</span><span class="ident" id="7615820">x</span><span class="op" id="7615821">,</span>&nbsp;<span class="ident" id="7615823">y</span><span class="op" id="7615824">,</span>&nbsp;<span class="ident" id="7615826">color</span><span class="op" id="7615831">.</span><span class="ident" id="7615832">RGBA64</span><span class="op" id="7615838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7615844">uint16</span><span class="op" id="7615850">(</span><span class="op" id="7615851">(</span><span class="ident" id="7615852">dr</span><span class="op" id="7615854">*</span><span class="ident" id="7615855">a</span>&nbsp;<span class="op" id="7615857">+</span>&nbsp;<span class="ident" id="7615859">sr</span><span class="op" id="7615861">*</span><span class="ident" id="7615862">ma</span><span class="op" id="7615864">)</span>&nbsp;<span class="op" id="7615866">/</span>&nbsp;<span class="ident" id="7615868">M</span><span class="op" id="7615869">)</span><span class="op" id="7615870">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7615876">uint16</span><span class="op" id="7615882">(</span><span class="op" id="7615883">(</span><span class="ident" id="7615884">dg</span><span class="op" id="7615886">*</span><span class="ident" id="7615887">a</span>&nbsp;<span class="op" id="7615889">+</span>&nbsp;<span class="ident" id="7615891">sg</span><span class="op" id="7615893">*</span><span class="ident" id="7615894">ma</span><span class="op" id="7615896">)</span>&nbsp;<span class="op" id="7615898">/</span>&nbsp;<span class="ident" id="7615900">M</span><span class="op" id="7615901">)</span><span class="op" id="7615902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7615908">uint16</span><span class="op" id="7615914">(</span><span class="op" id="7615915">(</span><span class="ident" id="7615916">db</span><span class="op" id="7615918">*</span><span class="ident" id="7615919">a</span>&nbsp;<span class="op" id="7615921">+</span>&nbsp;<span class="ident" id="7615923">sb</span><span class="op" id="7615925">*</span><span class="ident" id="7615926">ma</span><span class="op" id="7615928">)</span>&nbsp;<span class="op" id="7615930">/</span>&nbsp;<span class="ident" id="7615932">M</span><span class="op" id="7615933">)</span><span class="op" id="7615934">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="7615940">uint16</span><span class="op" id="7615946">(</span><span class="op" id="7615947">(</span><span class="ident" id="7615948">da</span><span class="op" id="7615950">*</span><span class="ident" id="7615951">a</span>&nbsp;<span class="op" id="7615953">+</span>&nbsp;<span class="ident" id="7615955">sa</span><span class="op" id="7615957">*</span><span class="ident" id="7615958">ma</span><span class="op" id="7615960">)</span>&nbsp;<span class="op" id="7615962">/</span>&nbsp;<span class="ident" id="7615964">M</span><span class="op" id="7615965">)</span><span class="op" id="7615966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615971">}</span><span class="op" id="7615972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7615979">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7615982">return</span>&nbsp;<span class="ident" id="7615989">golden</span><span class="op" id="7615995">.</span><span class="ident" id="7615996">SubImage</span><span class="op" id="7616004">(</span><span class="ident" id="7616005">b</span><span class="op" id="7616006">)</span><br>
<span class="lineno">205</span><span class="op" id="7616008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7616011">func</span>&nbsp;<span class="ident" id="7616016">TestDraw</span><span class="op" id="7616024">(</span><span class="ident" id="7616025">t</span>&nbsp;<span class="op" id="7616027">*</span><span class="ident" id="7616028">testing</span><span class="op" id="7616035">.</span><span class="ident" id="7616036">T</span><span class="op" id="7616037">)</span>&nbsp;<span class="op" id="7616039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616042">rr</span>&nbsp;<span class="op" id="7616045">:=</span>&nbsp;<span class="op" id="7616048">[</span><span class="op" id="7616049">]</span><span class="ident" id="7616050">image</span><span class="op" id="7616055">.</span><span class="ident" id="7616056">Rectangle</span><span class="op" id="7616065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616069">image</span><span class="op" id="7616074">.</span><span class="ident" id="7616075">Rect</span><span class="op" id="7616079">(</span><span class="num" id="7616080">0</span><span class="op" id="7616081">,</span>&nbsp;<span class="num" id="7616083">0</span><span class="op" id="7616084">,</span>&nbsp;<span class="num" id="7616086">0</span><span class="op" id="7616087">,</span>&nbsp;<span class="num" id="7616089">0</span><span class="op" id="7616090">)</span><span class="op" id="7616091">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616095">image</span><span class="op" id="7616100">.</span><span class="ident" id="7616101">Rect</span><span class="op" id="7616105">(</span><span class="num" id="7616106">0</span><span class="op" id="7616107">,</span>&nbsp;<span class="num" id="7616109">0</span><span class="op" id="7616110">,</span>&nbsp;<span class="num" id="7616112">16</span><span class="op" id="7616114">,</span>&nbsp;<span class="num" id="7616116">16</span><span class="op" id="7616118">)</span><span class="op" id="7616119">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616123">image</span><span class="op" id="7616128">.</span><span class="ident" id="7616129">Rect</span><span class="op" id="7616133">(</span><span class="num" id="7616134">3</span><span class="op" id="7616135">,</span>&nbsp;<span class="num" id="7616137">5</span><span class="op" id="7616138">,</span>&nbsp;<span class="num" id="7616140">12</span><span class="op" id="7616142">,</span>&nbsp;<span class="num" id="7616144">10</span><span class="op" id="7616146">)</span><span class="op" id="7616147">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616151">image</span><span class="op" id="7616156">.</span><span class="ident" id="7616157">Rect</span><span class="op" id="7616161">(</span><span class="num" id="7616162">0</span><span class="op" id="7616163">,</span>&nbsp;<span class="num" id="7616165">0</span><span class="op" id="7616166">,</span>&nbsp;<span class="num" id="7616168">9</span><span class="op" id="7616169">,</span>&nbsp;<span class="num" id="7616171">9</span><span class="op" id="7616172">)</span><span class="op" id="7616173">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616177">image</span><span class="op" id="7616182">.</span><span class="ident" id="7616183">Rect</span><span class="op" id="7616187">(</span><span class="num" id="7616188">8</span><span class="op" id="7616189">,</span>&nbsp;<span class="num" id="7616191">8</span><span class="op" id="7616192">,</span>&nbsp;<span class="num" id="7616194">16</span><span class="op" id="7616196">,</span>&nbsp;<span class="num" id="7616198">16</span><span class="op" id="7616200">)</span><span class="op" id="7616201">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616205">image</span><span class="op" id="7616210">.</span><span class="ident" id="7616211">Rect</span><span class="op" id="7616215">(</span><span class="num" id="7616216">8</span><span class="op" id="7616217">,</span>&nbsp;<span class="num" id="7616219">0</span><span class="op" id="7616220">,</span>&nbsp;<span class="num" id="7616222">9</span><span class="op" id="7616223">,</span>&nbsp;<span class="num" id="7616225">16</span><span class="op" id="7616227">)</span><span class="op" id="7616228">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616232">image</span><span class="op" id="7616237">.</span><span class="ident" id="7616238">Rect</span><span class="op" id="7616242">(</span><span class="num" id="7616243">0</span><span class="op" id="7616244">,</span>&nbsp;<span class="num" id="7616246">8</span><span class="op" id="7616247">,</span>&nbsp;<span class="num" id="7616249">16</span><span class="op" id="7616251">,</span>&nbsp;<span class="num" id="7616253">9</span><span class="op" id="7616254">)</span><span class="op" id="7616255">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616259">image</span><span class="op" id="7616264">.</span><span class="ident" id="7616265">Rect</span><span class="op" id="7616269">(</span><span class="num" id="7616270">8</span><span class="op" id="7616271">,</span>&nbsp;<span class="num" id="7616273">8</span><span class="op" id="7616274">,</span>&nbsp;<span class="num" id="7616276">9</span><span class="op" id="7616277">,</span>&nbsp;<span class="num" id="7616279">9</span><span class="op" id="7616280">)</span><span class="op" id="7616281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616285">image</span><span class="op" id="7616290">.</span><span class="ident" id="7616291">Rect</span><span class="op" id="7616295">(</span><span class="num" id="7616296">8</span><span class="op" id="7616297">,</span>&nbsp;<span class="num" id="7616299">8</span><span class="op" id="7616300">,</span>&nbsp;<span class="num" id="7616302">8</span><span class="op" id="7616303">,</span>&nbsp;<span class="num" id="7616305">8</span><span class="op" id="7616306">)</span><span class="op" id="7616307">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7616310">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616313">for</span>&nbsp;<span class="ident" id="7616317">_</span><span class="op" id="7616318">,</span>&nbsp;<span class="ident" id="7616320">r</span>&nbsp;<span class="op" id="7616322">:=</span>&nbsp;<span class="keyword" id="7616325">range</span>&nbsp;<span class="ident" id="7616331">rr</span>&nbsp;<span class="op" id="7616334">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616337">loop</span><span class="op" id="7616341">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616345">for</span>&nbsp;<span class="ident" id="7616349">_</span><span class="op" id="7616350">,</span>&nbsp;<span class="ident" id="7616352">test</span>&nbsp;<span class="op" id="7616357">:=</span>&nbsp;<span class="keyword" id="7616360">range</span>&nbsp;<span class="ident" id="7616366">drawTests</span>&nbsp;<span class="op" id="7616376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616381">dst</span>&nbsp;<span class="op" id="7616385">:=</span>&nbsp;<span class="ident" id="7616388">hgradRed</span><span class="op" id="7616396">(</span><span class="num" id="7616397">255</span><span class="op" id="7616400">)</span><span class="op" id="7616401">.</span><span class="op" id="7616402">(</span><span class="op" id="7616403">*</span><span class="ident" id="7616404">image</span><span class="op" id="7616409">.</span><span class="ident" id="7616410">RGBA</span><span class="op" id="7616414">)</span><span class="op" id="7616415">.</span><span class="ident" id="7616416">SubImage</span><span class="op" id="7616424">(</span><span class="ident" id="7616425">r</span><span class="op" id="7616426">)</span><span class="op" id="7616427">.</span><span class="op" id="7616428">(</span><span class="ident" id="7616429">Image</span><span class="op" id="7616434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7616439">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616540">golden</span>&nbsp;<span class="op" id="7616547">:=</span>&nbsp;<span class="ident" id="7616550">makeGolden</span><span class="op" id="7616560">(</span><span class="ident" id="7616561">dst</span><span class="op" id="7616564">,</span>&nbsp;<span class="ident" id="7616566">image</span><span class="op" id="7616571">.</span><span class="ident" id="7616572">Rect</span><span class="op" id="7616576">(</span><span class="num" id="7616577">0</span><span class="op" id="7616578">,</span>&nbsp;<span class="num" id="7616580">0</span><span class="op" id="7616581">,</span>&nbsp;<span class="num" id="7616583">16</span><span class="op" id="7616585">,</span>&nbsp;<span class="num" id="7616587">16</span><span class="op" id="7616589">)</span><span class="op" id="7616590">,</span>&nbsp;<span class="ident" id="7616592">test</span><span class="op" id="7616596">.</span><span class="ident" id="7616597">src</span><span class="op" id="7616600">,</span>&nbsp;<span class="ident" id="7616602">image</span><span class="op" id="7616607">.</span><span class="ident" id="7616608">ZP</span><span class="op" id="7616610">,</span>&nbsp;<span class="ident" id="7616612">test</span><span class="op" id="7616616">.</span><span class="ident" id="7616617">mask</span><span class="op" id="7616621">,</span>&nbsp;<span class="ident" id="7616623">image</span><span class="op" id="7616628">.</span><span class="ident" id="7616629">ZP</span><span class="op" id="7616631">,</span>&nbsp;<span class="ident" id="7616633">test</span><span class="op" id="7616637">.</span><span class="ident" id="7616638">op</span><span class="op" id="7616640">)</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616645">b</span>&nbsp;<span class="op" id="7616647">:=</span>&nbsp;<span class="ident" id="7616650">dst</span><span class="op" id="7616653">.</span><span class="ident" id="7616654">Bounds</span><span class="op" id="7616660">(</span><span class="op" id="7616661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616666">if</span>&nbsp;<span class="op" id="7616669">!</span><span class="ident" id="7616670">b</span><span class="op" id="7616671">.</span><span class="ident" id="7616672">Eq</span><span class="op" id="7616674">(</span><span class="ident" id="7616675">golden</span><span class="op" id="7616681">.</span><span class="ident" id="7616682">Bounds</span><span class="op" id="7616688">(</span><span class="op" id="7616689">)</span><span class="op" id="7616690">)</span>&nbsp;<span class="op" id="7616692">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616698">t</span><span class="op" id="7616699">.</span><span class="ident" id="7616700">Errorf</span><span class="op" id="7616706">(</span><span class="string" id="7616707">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7616740">,</span>&nbsp;<span class="ident" id="7616742">r</span><span class="op" id="7616743">,</span>&nbsp;<span class="ident" id="7616745">test</span><span class="op" id="7616749">.</span><span class="ident" id="7616750">desc</span><span class="op" id="7616754">,</span>&nbsp;<span class="ident" id="7616756">dst</span><span class="op" id="7616759">.</span><span class="ident" id="7616760">Bounds</span><span class="op" id="7616766">(</span><span class="op" id="7616767">)</span><span class="op" id="7616768">,</span>&nbsp;<span class="ident" id="7616770">golden</span><span class="op" id="7616776">.</span><span class="ident" id="7616777">Bounds</span><span class="op" id="7616783">(</span><span class="op" id="7616784">)</span><span class="op" id="7616785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616791">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7616803">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7616808">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7616905">DrawMask</span><span class="op" id="7616913">(</span><span class="ident" id="7616914">dst</span><span class="op" id="7616917">,</span>&nbsp;<span class="ident" id="7616919">image</span><span class="op" id="7616924">.</span><span class="ident" id="7616925">Rect</span><span class="op" id="7616929">(</span><span class="num" id="7616930">0</span><span class="op" id="7616931">,</span>&nbsp;<span class="num" id="7616933">0</span><span class="op" id="7616934">,</span>&nbsp;<span class="num" id="7616936">16</span><span class="op" id="7616938">,</span>&nbsp;<span class="num" id="7616940">16</span><span class="op" id="7616942">)</span><span class="op" id="7616943">,</span>&nbsp;<span class="ident" id="7616945">test</span><span class="op" id="7616949">.</span><span class="ident" id="7616950">src</span><span class="op" id="7616953">,</span>&nbsp;<span class="ident" id="7616955">image</span><span class="op" id="7616960">.</span><span class="ident" id="7616961">ZP</span><span class="op" id="7616963">,</span>&nbsp;<span class="ident" id="7616965">test</span><span class="op" id="7616969">.</span><span class="ident" id="7616970">mask</span><span class="op" id="7616974">,</span>&nbsp;<span class="ident" id="7616976">image</span><span class="op" id="7616981">.</span><span class="ident" id="7616982">ZP</span><span class="op" id="7616984">,</span>&nbsp;<span class="ident" id="7616986">test</span><span class="op" id="7616990">.</span><span class="ident" id="7616991">op</span><span class="op" id="7616993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7616998">if</span>&nbsp;<span class="ident" id="7617001">image</span><span class="op" id="7617006">.</span><span class="ident" id="7617007">Pt</span><span class="op" id="7617009">(</span><span class="num" id="7617010">8</span><span class="op" id="7617011">,</span>&nbsp;<span class="num" id="7617013">8</span><span class="op" id="7617014">)</span><span class="op" id="7617015">.</span><span class="ident" id="7617016">In</span><span class="op" id="7617018">(</span><span class="ident" id="7617019">r</span><span class="op" id="7617020">)</span>&nbsp;<span class="op" id="7617022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7617028">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;pixel&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;matches&nbsp;what&nbsp;we&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7617099">//&nbsp;(the&nbsp;expected&nbsp;value&nbsp;can&nbsp;be&nbsp;verified&nbsp;by&nbsp;hand).</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617152">if</span>&nbsp;<span class="op" id="7617155">!</span><span class="ident" id="7617156">eq</span><span class="op" id="7617158">(</span><span class="ident" id="7617159">dst</span><span class="op" id="7617162">.</span><span class="ident" id="7617163">At</span><span class="op" id="7617165">(</span><span class="num" id="7617166">8</span><span class="op" id="7617167">,</span>&nbsp;<span class="num" id="7617169">8</span><span class="op" id="7617170">)</span><span class="op" id="7617171">,</span>&nbsp;<span class="ident" id="7617173">test</span><span class="op" id="7617177">.</span><span class="ident" id="7617178">expected</span><span class="op" id="7617186">)</span>&nbsp;<span class="op" id="7617188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617195">t</span><span class="op" id="7617196">.</span><span class="ident" id="7617197">Errorf</span><span class="op" id="7617203">(</span><span class="string" id="7617204">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(8,&nbsp;8)&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7617240">,</span>&nbsp;<span class="ident" id="7617242">r</span><span class="op" id="7617243">,</span>&nbsp;<span class="ident" id="7617245">test</span><span class="op" id="7617249">.</span><span class="ident" id="7617250">desc</span><span class="op" id="7617254">,</span>&nbsp;<span class="ident" id="7617256">dst</span><span class="op" id="7617259">.</span><span class="ident" id="7617260">At</span><span class="op" id="7617262">(</span><span class="num" id="7617263">8</span><span class="op" id="7617264">,</span>&nbsp;<span class="num" id="7617266">8</span><span class="op" id="7617267">)</span><span class="op" id="7617268">,</span>&nbsp;<span class="ident" id="7617270">test</span><span class="op" id="7617274">.</span><span class="ident" id="7617275">expected</span><span class="op" id="7617283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617290">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617303">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617308">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7617313">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617381">for</span>&nbsp;<span class="ident" id="7617385">y</span>&nbsp;<span class="op" id="7617387">:=</span>&nbsp;<span class="ident" id="7617390">b</span><span class="op" id="7617391">.</span><span class="ident" id="7617392">Min</span><span class="op" id="7617395">.</span><span class="ident" id="7617396">Y</span><span class="op" id="7617397">;</span>&nbsp;<span class="ident" id="7617399">y</span>&nbsp;<span class="op" id="7617401">&lt;</span>&nbsp;<span class="ident" id="7617403">b</span><span class="op" id="7617404">.</span><span class="ident" id="7617405">Max</span><span class="op" id="7617408">.</span><span class="ident" id="7617409">Y</span><span class="op" id="7617410">;</span>&nbsp;<span class="ident" id="7617412">y</span><span class="op" id="7617413">++</span>&nbsp;<span class="op" id="7617416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617422">for</span>&nbsp;<span class="ident" id="7617426">x</span>&nbsp;<span class="op" id="7617428">:=</span>&nbsp;<span class="ident" id="7617431">b</span><span class="op" id="7617432">.</span><span class="ident" id="7617433">Min</span><span class="op" id="7617436">.</span><span class="ident" id="7617437">X</span><span class="op" id="7617438">;</span>&nbsp;<span class="ident" id="7617440">x</span>&nbsp;<span class="op" id="7617442">&lt;</span>&nbsp;<span class="ident" id="7617444">b</span><span class="op" id="7617445">.</span><span class="ident" id="7617446">Max</span><span class="op" id="7617449">.</span><span class="ident" id="7617450">X</span><span class="op" id="7617451">;</span>&nbsp;<span class="ident" id="7617453">x</span><span class="op" id="7617454">++</span>&nbsp;<span class="op" id="7617457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617464">if</span>&nbsp;<span class="op" id="7617467">!</span><span class="ident" id="7617468">eq</span><span class="op" id="7617470">(</span><span class="ident" id="7617471">dst</span><span class="op" id="7617474">.</span><span class="ident" id="7617475">At</span><span class="op" id="7617477">(</span><span class="ident" id="7617478">x</span><span class="op" id="7617479">,</span>&nbsp;<span class="ident" id="7617481">y</span><span class="op" id="7617482">)</span><span class="op" id="7617483">,</span>&nbsp;<span class="ident" id="7617485">golden</span><span class="op" id="7617491">.</span><span class="ident" id="7617492">At</span><span class="op" id="7617494">(</span><span class="ident" id="7617495">x</span><span class="op" id="7617496">,</span>&nbsp;<span class="ident" id="7617498">y</span><span class="op" id="7617499">)</span><span class="op" id="7617500">)</span>&nbsp;<span class="op" id="7617502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617510">t</span><span class="op" id="7617511">.</span><span class="ident" id="7617512">Errorf</span><span class="op" id="7617518">(</span><span class="string" id="7617519">&#34;draw&nbsp;%v&nbsp;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7617565">,</span>&nbsp;<span class="ident" id="7617567">r</span><span class="op" id="7617568">,</span>&nbsp;<span class="ident" id="7617570">test</span><span class="op" id="7617574">.</span><span class="ident" id="7617575">desc</span><span class="op" id="7617579">,</span>&nbsp;<span class="ident" id="7617581">x</span><span class="op" id="7617582">,</span>&nbsp;<span class="ident" id="7617584">y</span><span class="op" id="7617585">,</span>&nbsp;<span class="ident" id="7617587">dst</span><span class="op" id="7617590">.</span><span class="ident" id="7617591">At</span><span class="op" id="7617593">(</span><span class="ident" id="7617594">x</span><span class="op" id="7617595">,</span>&nbsp;<span class="ident" id="7617597">y</span><span class="op" id="7617598">)</span><span class="op" id="7617599">,</span>&nbsp;<span class="ident" id="7617601">golden</span><span class="op" id="7617607">.</span><span class="ident" id="7617608">At</span><span class="op" id="7617610">(</span><span class="ident" id="7617611">x</span><span class="op" id="7617612">,</span>&nbsp;<span class="ident" id="7617614">y</span><span class="op" id="7617615">)</span><span class="op" id="7617616">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617624">continue</span>&nbsp;<span class="ident" id="7617633">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617649">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617658">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7617661">}</span><br>
<span class="lineno"></span><span class="op" id="7617663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7617666">func</span>&nbsp;<span class="ident" id="7617671">TestDrawOverlap</span><span class="op" id="7617686">(</span><span class="ident" id="7617687">t</span>&nbsp;<span class="op" id="7617689">*</span><span class="ident" id="7617690">testing</span><span class="op" id="7617697">.</span><span class="ident" id="7617698">T</span><span class="op" id="7617699">)</span>&nbsp;<span class="op" id="7617701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617704">for</span>&nbsp;<span class="ident" id="7617708">_</span><span class="op" id="7617709">,</span>&nbsp;<span class="ident" id="7617711">op</span>&nbsp;<span class="op" id="7617714">:=</span>&nbsp;<span class="keyword" id="7617717">range</span>&nbsp;<span class="op" id="7617723">[</span><span class="op" id="7617724">]</span><span class="ident" id="7617725">Op</span><span class="op" id="7617727">{</span><span class="ident" id="7617728">Over</span><span class="op" id="7617732">,</span>&nbsp;<span class="ident" id="7617734">Src</span><span class="op" id="7617737">}</span>&nbsp;<span class="op" id="7617739">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617743">for</span>&nbsp;<span class="ident" id="7617747">yoff</span>&nbsp;<span class="op" id="7617752">:=</span>&nbsp;<span class="op" id="7617755">-</span><span class="num" id="7617756">2</span><span class="op" id="7617757">;</span>&nbsp;<span class="ident" id="7617759">yoff</span>&nbsp;<span class="op" id="7617764">&lt;=</span>&nbsp;<span class="num" id="7617767">2</span><span class="op" id="7617768">;</span>&nbsp;<span class="ident" id="7617770">yoff</span><span class="op" id="7617774">++</span>&nbsp;<span class="op" id="7617777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617781">loop</span><span class="op" id="7617785">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7617790">for</span>&nbsp;<span class="ident" id="7617794">xoff</span>&nbsp;<span class="op" id="7617799">:=</span>&nbsp;<span class="op" id="7617802">-</span><span class="num" id="7617803">2</span><span class="op" id="7617804">;</span>&nbsp;<span class="ident" id="7617806">xoff</span>&nbsp;<span class="op" id="7617811">&lt;=</span>&nbsp;<span class="num" id="7617814">2</span><span class="op" id="7617815">;</span>&nbsp;<span class="ident" id="7617817">xoff</span><span class="op" id="7617821">++</span>&nbsp;<span class="op" id="7617824">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617830">m</span>&nbsp;<span class="op" id="7617832">:=</span>&nbsp;<span class="ident" id="7617835">gradYellow</span><span class="op" id="7617845">(</span><span class="num" id="7617846">127</span><span class="op" id="7617849">)</span><span class="op" id="7617850">.</span><span class="op" id="7617851">(</span><span class="op" id="7617852">*</span><span class="ident" id="7617853">image</span><span class="op" id="7617858">.</span><span class="ident" id="7617859">RGBA</span><span class="op" id="7617863">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617869">dst</span>&nbsp;<span class="op" id="7617873">:=</span>&nbsp;<span class="ident" id="7617876">m</span><span class="op" id="7617877">.</span><span class="ident" id="7617878">SubImage</span><span class="op" id="7617886">(</span><span class="ident" id="7617887">image</span><span class="op" id="7617892">.</span><span class="ident" id="7617893">Rect</span><span class="op" id="7617897">(</span><span class="num" id="7617898">5</span><span class="op" id="7617899">,</span>&nbsp;<span class="num" id="7617901">5</span><span class="op" id="7617902">,</span>&nbsp;<span class="num" id="7617904">10</span><span class="op" id="7617906">,</span>&nbsp;<span class="num" id="7617908">10</span><span class="op" id="7617910">)</span><span class="op" id="7617911">)</span><span class="op" id="7617912">.</span><span class="op" id="7617913">(</span><span class="op" id="7617914">*</span><span class="ident" id="7617915">image</span><span class="op" id="7617920">.</span><span class="ident" id="7617921">RGBA</span><span class="op" id="7617925">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7617931">src</span>&nbsp;<span class="op" id="7617935">:=</span>&nbsp;<span class="ident" id="7617938">m</span><span class="op" id="7617939">.</span><span class="ident" id="7617940">SubImage</span><span class="op" id="7617948">(</span><span class="ident" id="7617949">image</span><span class="op" id="7617954">.</span><span class="ident" id="7617955">Rect</span><span class="op" id="7617959">(</span><span class="num" id="7617960">5</span><span class="op" id="7617961">+</span><span class="ident" id="7617962">xoff</span><span class="op" id="7617966">,</span>&nbsp;<span class="num" id="7617968">5</span><span class="op" id="7617969">+</span><span class="ident" id="7617970">yoff</span><span class="op" id="7617974">,</span>&nbsp;<span class="num" id="7617976">10</span><span class="op" id="7617978">+</span><span class="ident" id="7617979">xoff</span><span class="op" id="7617983">,</span>&nbsp;<span class="num" id="7617985">10</span><span class="op" id="7617987">+</span><span class="ident" id="7617988">yoff</span><span class="op" id="7617992">)</span><span class="op" id="7617993">)</span><span class="op" id="7617994">.</span><span class="op" id="7617995">(</span><span class="op" id="7617996">*</span><span class="ident" id="7617997">image</span><span class="op" id="7618002">.</span><span class="ident" id="7618003">RGBA</span><span class="op" id="7618007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7618013">b</span>&nbsp;<span class="op" id="7618015">:=</span>&nbsp;<span class="ident" id="7618018">dst</span><span class="op" id="7618021">.</span><span class="ident" id="7618022">Bounds</span><span class="op" id="7618028">(</span><span class="op" id="7618029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7618035">//&nbsp;Draw&nbsp;the&nbsp;(src,&nbsp;mask,&nbsp;op)&nbsp;onto&nbsp;a&nbsp;copy&nbsp;of&nbsp;dst&nbsp;using&nbsp;a&nbsp;slow&nbsp;but&nbsp;obviously&nbsp;correct&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7618137">golden</span>&nbsp;<span class="op" id="7618144">:=</span>&nbsp;<span class="ident" id="7618147">makeGolden</span><span class="op" id="7618157">(</span><span class="ident" id="7618158">dst</span><span class="op" id="7618161">,</span>&nbsp;<span class="ident" id="7618163">b</span><span class="op" id="7618164">,</span>&nbsp;<span class="ident" id="7618166">src</span><span class="op" id="7618169">,</span>&nbsp;<span class="ident" id="7618171">src</span><span class="op" id="7618174">.</span><span class="ident" id="7618175">Bounds</span><span class="op" id="7618181">(</span><span class="op" id="7618182">)</span><span class="op" id="7618183">.</span><span class="ident" id="7618184">Min</span><span class="op" id="7618187">,</span>&nbsp;<span class="ident" id="7618189">nil</span><span class="op" id="7618192">,</span>&nbsp;<span class="ident" id="7618194">image</span><span class="op" id="7618199">.</span><span class="ident" id="7618200">ZP</span><span class="op" id="7618202">,</span>&nbsp;<span class="ident" id="7618204">op</span><span class="op" id="7618206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618212">if</span>&nbsp;<span class="op" id="7618215">!</span><span class="ident" id="7618216">b</span><span class="op" id="7618217">.</span><span class="ident" id="7618218">Eq</span><span class="op" id="7618220">(</span><span class="ident" id="7618221">golden</span><span class="op" id="7618227">.</span><span class="ident" id="7618228">Bounds</span><span class="op" id="7618234">(</span><span class="op" id="7618235">)</span><span class="op" id="7618236">)</span>&nbsp;<span class="op" id="7618238">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7618245">t</span><span class="op" id="7618246">.</span><span class="ident" id="7618247">Errorf</span><span class="op" id="7618253">(</span><span class="string" id="7618254">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;bounds&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7618304">,</span>&nbsp;<span class="ident" id="7618306">xoff</span><span class="op" id="7618310">,</span>&nbsp;<span class="ident" id="7618312">yoff</span><span class="op" id="7618316">,</span>&nbsp;<span class="ident" id="7618318">dst</span><span class="op" id="7618321">.</span><span class="ident" id="7618322">Bounds</span><span class="op" id="7618328">(</span><span class="op" id="7618329">)</span><span class="op" id="7618330">,</span>&nbsp;<span class="ident" id="7618332">golden</span><span class="op" id="7618338">.</span><span class="ident" id="7618339">Bounds</span><span class="op" id="7618345">(</span><span class="op" id="7618346">)</span><span class="op" id="7618347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618354">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7618373">//&nbsp;Draw&nbsp;the&nbsp;same&nbsp;combination&nbsp;onto&nbsp;the&nbsp;actual&nbsp;dst&nbsp;using&nbsp;the&nbsp;optimized&nbsp;DrawMask&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7618471">DrawMask</span><span class="op" id="7618479">(</span><span class="ident" id="7618480">dst</span><span class="op" id="7618483">,</span>&nbsp;<span class="ident" id="7618485">b</span><span class="op" id="7618486">,</span>&nbsp;<span class="ident" id="7618488">src</span><span class="op" id="7618491">,</span>&nbsp;<span class="ident" id="7618493">src</span><span class="op" id="7618496">.</span><span class="ident" id="7618497">Bounds</span><span class="op" id="7618503">(</span><span class="op" id="7618504">)</span><span class="op" id="7618505">.</span><span class="ident" id="7618506">Min</span><span class="op" id="7618509">,</span>&nbsp;<span class="ident" id="7618511">nil</span><span class="op" id="7618514">,</span>&nbsp;<span class="ident" id="7618516">image</span><span class="op" id="7618521">.</span><span class="ident" id="7618522">ZP</span><span class="op" id="7618524">,</span>&nbsp;<span class="ident" id="7618526">op</span><span class="op" id="7618528">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7618534">//&nbsp;Check&nbsp;that&nbsp;the&nbsp;resultant&nbsp;dst&nbsp;image&nbsp;matches&nbsp;the&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618603">for</span>&nbsp;<span class="ident" id="7618607">y</span>&nbsp;<span class="op" id="7618609">:=</span>&nbsp;<span class="ident" id="7618612">b</span><span class="op" id="7618613">.</span><span class="ident" id="7618614">Min</span><span class="op" id="7618617">.</span><span class="ident" id="7618618">Y</span><span class="op" id="7618619">;</span>&nbsp;<span class="ident" id="7618621">y</span>&nbsp;<span class="op" id="7618623">&lt;</span>&nbsp;<span class="ident" id="7618625">b</span><span class="op" id="7618626">.</span><span class="ident" id="7618627">Max</span><span class="op" id="7618630">.</span><span class="ident" id="7618631">Y</span><span class="op" id="7618632">;</span>&nbsp;<span class="ident" id="7618634">y</span><span class="op" id="7618635">++</span>&nbsp;<span class="op" id="7618638">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618645">for</span>&nbsp;<span class="ident" id="7618649">x</span>&nbsp;<span class="op" id="7618651">:=</span>&nbsp;<span class="ident" id="7618654">b</span><span class="op" id="7618655">.</span><span class="ident" id="7618656">Min</span><span class="op" id="7618659">.</span><span class="ident" id="7618660">X</span><span class="op" id="7618661">;</span>&nbsp;<span class="ident" id="7618663">x</span>&nbsp;<span class="op" id="7618665">&lt;</span>&nbsp;<span class="ident" id="7618667">b</span><span class="op" id="7618668">.</span><span class="ident" id="7618669">Max</span><span class="op" id="7618672">.</span><span class="ident" id="7618673">X</span><span class="op" id="7618674">;</span>&nbsp;<span class="ident" id="7618676">x</span><span class="op" id="7618677">++</span>&nbsp;<span class="op" id="7618680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618688">if</span>&nbsp;<span class="op" id="7618691">!</span><span class="ident" id="7618692">eq</span><span class="op" id="7618694">(</span><span class="ident" id="7618695">dst</span><span class="op" id="7618698">.</span><span class="ident" id="7618699">At</span><span class="op" id="7618701">(</span><span class="ident" id="7618702">x</span><span class="op" id="7618703">,</span>&nbsp;<span class="ident" id="7618705">y</span><span class="op" id="7618706">)</span><span class="op" id="7618707">,</span>&nbsp;<span class="ident" id="7618709">golden</span><span class="op" id="7618715">.</span><span class="ident" id="7618716">At</span><span class="op" id="7618718">(</span><span class="ident" id="7618719">x</span><span class="op" id="7618720">,</span>&nbsp;<span class="ident" id="7618722">y</span><span class="op" id="7618723">)</span><span class="op" id="7618724">)</span>&nbsp;<span class="op" id="7618726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7618735">t</span><span class="op" id="7618736">.</span><span class="ident" id="7618737">Errorf</span><span class="op" id="7618743">(</span><span class="string" id="7618744">&#34;drawOverlap&nbsp;xoff=%d,yoff=%d:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;golden&nbsp;%v&#34;</span><span class="op" id="7618807">,</span>&nbsp;<span class="ident" id="7618809">xoff</span><span class="op" id="7618813">,</span>&nbsp;<span class="ident" id="7618815">yoff</span><span class="op" id="7618819">,</span>&nbsp;<span class="ident" id="7618821">x</span><span class="op" id="7618822">,</span>&nbsp;<span class="ident" id="7618824">y</span><span class="op" id="7618825">,</span>&nbsp;<span class="ident" id="7618827">dst</span><span class="op" id="7618830">.</span><span class="ident" id="7618831">At</span><span class="op" id="7618833">(</span><span class="ident" id="7618834">x</span><span class="op" id="7618835">,</span>&nbsp;<span class="ident" id="7618837">y</span><span class="op" id="7618838">)</span><span class="op" id="7618839">,</span>&nbsp;<span class="ident" id="7618841">golden</span><span class="op" id="7618847">.</span><span class="ident" id="7618848">At</span><span class="op" id="7618850">(</span><span class="ident" id="7618851">x</span><span class="op" id="7618852">,</span>&nbsp;<span class="ident" id="7618854">y</span><span class="op" id="7618855">)</span><span class="op" id="7618856">)</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7618865">continue</span>&nbsp;<span class="ident" id="7618874">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618892">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618903">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7618910">}</span><br>
<span class="lineno"></span><span class="op" id="7618912">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7618915">//&nbsp;TestNonZeroSrcPt&nbsp;checks&nbsp;drawing&nbsp;with&nbsp;a&nbsp;non-zero&nbsp;src&nbsp;point&nbsp;parameter.</span><br>
<span class="lineno">285</span><span class="keyword" id="7618987">func</span>&nbsp;<span class="ident" id="7618992">TestNonZeroSrcPt</span><span class="op" id="7619008">(</span><span class="ident" id="7619009">t</span>&nbsp;<span class="op" id="7619011">*</span><span class="ident" id="7619012">testing</span><span class="op" id="7619019">.</span><span class="ident" id="7619020">T</span><span class="op" id="7619021">)</span>&nbsp;<span class="op" id="7619023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619026">a</span>&nbsp;<span class="op" id="7619028">:=</span>&nbsp;<span class="ident" id="7619031">image</span><span class="op" id="7619036">.</span><span class="ident" id="7619037">NewRGBA</span><span class="op" id="7619044">(</span><span class="ident" id="7619045">image</span><span class="op" id="7619050">.</span><span class="ident" id="7619051">Rect</span><span class="op" id="7619055">(</span><span class="num" id="7619056">0</span><span class="op" id="7619057">,</span>&nbsp;<span class="num" id="7619059">0</span><span class="op" id="7619060">,</span>&nbsp;<span class="num" id="7619062">1</span><span class="op" id="7619063">,</span>&nbsp;<span class="num" id="7619065">1</span><span class="op" id="7619066">)</span><span class="op" id="7619067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619070">b</span>&nbsp;<span class="op" id="7619072">:=</span>&nbsp;<span class="ident" id="7619075">image</span><span class="op" id="7619080">.</span><span class="ident" id="7619081">NewRGBA</span><span class="op" id="7619088">(</span><span class="ident" id="7619089">image</span><span class="op" id="7619094">.</span><span class="ident" id="7619095">Rect</span><span class="op" id="7619099">(</span><span class="num" id="7619100">0</span><span class="op" id="7619101">,</span>&nbsp;<span class="num" id="7619103">0</span><span class="op" id="7619104">,</span>&nbsp;<span class="num" id="7619106">2</span><span class="op" id="7619107">,</span>&nbsp;<span class="num" id="7619109">2</span><span class="op" id="7619110">)</span><span class="op" id="7619111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619114">b</span><span class="op" id="7619115">.</span><span class="ident" id="7619116">Set</span><span class="op" id="7619119">(</span><span class="num" id="7619120">0</span><span class="op" id="7619121">,</span>&nbsp;<span class="num" id="7619123">0</span><span class="op" id="7619124">,</span>&nbsp;<span class="ident" id="7619126">color</span><span class="op" id="7619131">.</span><span class="ident" id="7619132">RGBA</span><span class="op" id="7619136">{</span><span class="num" id="7619137">0</span><span class="op" id="7619138">,</span>&nbsp;<span class="num" id="7619140">0</span><span class="op" id="7619141">,</span>&nbsp;<span class="num" id="7619143">0</span><span class="op" id="7619144">,</span>&nbsp;<span class="num" id="7619146">5</span><span class="op" id="7619147">}</span><span class="op" id="7619148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619151">b</span><span class="op" id="7619152">.</span><span class="ident" id="7619153">Set</span><span class="op" id="7619156">(</span><span class="num" id="7619157">1</span><span class="op" id="7619158">,</span>&nbsp;<span class="num" id="7619160">0</span><span class="op" id="7619161">,</span>&nbsp;<span class="ident" id="7619163">color</span><span class="op" id="7619168">.</span><span class="ident" id="7619169">RGBA</span><span class="op" id="7619173">{</span><span class="num" id="7619174">0</span><span class="op" id="7619175">,</span>&nbsp;<span class="num" id="7619177">0</span><span class="op" id="7619178">,</span>&nbsp;<span class="num" id="7619180">5</span><span class="op" id="7619181">,</span>&nbsp;<span class="num" id="7619183">5</span><span class="op" id="7619184">}</span><span class="op" id="7619185">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619188">b</span><span class="op" id="7619189">.</span><span class="ident" id="7619190">Set</span><span class="op" id="7619193">(</span><span class="num" id="7619194">0</span><span class="op" id="7619195">,</span>&nbsp;<span class="num" id="7619197">1</span><span class="op" id="7619198">,</span>&nbsp;<span class="ident" id="7619200">color</span><span class="op" id="7619205">.</span><span class="ident" id="7619206">RGBA</span><span class="op" id="7619210">{</span><span class="num" id="7619211">0</span><span class="op" id="7619212">,</span>&nbsp;<span class="num" id="7619214">5</span><span class="op" id="7619215">,</span>&nbsp;<span class="num" id="7619217">0</span><span class="op" id="7619218">,</span>&nbsp;<span class="num" id="7619220">5</span><span class="op" id="7619221">}</span><span class="op" id="7619222">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619225">b</span><span class="op" id="7619226">.</span><span class="ident" id="7619227">Set</span><span class="op" id="7619230">(</span><span class="num" id="7619231">1</span><span class="op" id="7619232">,</span>&nbsp;<span class="num" id="7619234">1</span><span class="op" id="7619235">,</span>&nbsp;<span class="ident" id="7619237">color</span><span class="op" id="7619242">.</span><span class="ident" id="7619243">RGBA</span><span class="op" id="7619247">{</span><span class="num" id="7619248">5</span><span class="op" id="7619249">,</span>&nbsp;<span class="num" id="7619251">0</span><span class="op" id="7619252">,</span>&nbsp;<span class="num" id="7619254">0</span><span class="op" id="7619255">,</span>&nbsp;<span class="num" id="7619257">5</span><span class="op" id="7619258">}</span><span class="op" id="7619259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619262">Draw</span><span class="op" id="7619266">(</span><span class="ident" id="7619267">a</span><span class="op" id="7619268">,</span>&nbsp;<span class="ident" id="7619270">image</span><span class="op" id="7619275">.</span><span class="ident" id="7619276">Rect</span><span class="op" id="7619280">(</span><span class="num" id="7619281">0</span><span class="op" id="7619282">,</span>&nbsp;<span class="num" id="7619284">0</span><span class="op" id="7619285">,</span>&nbsp;<span class="num" id="7619287">1</span><span class="op" id="7619288">,</span>&nbsp;<span class="num" id="7619290">1</span><span class="op" id="7619291">)</span><span class="op" id="7619292">,</span>&nbsp;<span class="ident" id="7619294">b</span><span class="op" id="7619295">,</span>&nbsp;<span class="ident" id="7619297">image</span><span class="op" id="7619302">.</span><span class="ident" id="7619303">Pt</span><span class="op" id="7619305">(</span><span class="num" id="7619306">1</span><span class="op" id="7619307">,</span>&nbsp;<span class="num" id="7619309">1</span><span class="op" id="7619310">)</span><span class="op" id="7619311">,</span>&nbsp;<span class="ident" id="7619313">Over</span><span class="op" id="7619317">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7619320">if</span>&nbsp;<span class="op" id="7619323">!</span><span class="ident" id="7619324">eq</span><span class="op" id="7619326">(</span><span class="ident" id="7619327">color</span><span class="op" id="7619332">.</span><span class="ident" id="7619333">RGBA</span><span class="op" id="7619337">{</span><span class="num" id="7619338">5</span><span class="op" id="7619339">,</span>&nbsp;<span class="num" id="7619341">0</span><span class="op" id="7619342">,</span>&nbsp;<span class="num" id="7619344">0</span><span class="op" id="7619345">,</span>&nbsp;<span class="num" id="7619347">5</span><span class="op" id="7619348">}</span><span class="op" id="7619349">,</span>&nbsp;<span class="ident" id="7619351">a</span><span class="op" id="7619352">.</span><span class="ident" id="7619353">At</span><span class="op" id="7619355">(</span><span class="num" id="7619356">0</span><span class="op" id="7619357">,</span>&nbsp;<span class="num" id="7619359">0</span><span class="op" id="7619360">)</span><span class="op" id="7619361">)</span>&nbsp;<span class="op" id="7619363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619367">t</span><span class="op" id="7619368">.</span><span class="ident" id="7619369">Errorf</span><span class="op" id="7619375">(</span><span class="string" id="7619376">&#34;non-zero&nbsp;src&nbsp;pt:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7619409">,</span>&nbsp;<span class="ident" id="7619411">color</span><span class="op" id="7619416">.</span><span class="ident" id="7619417">RGBA</span><span class="op" id="7619421">{</span><span class="num" id="7619422">5</span><span class="op" id="7619423">,</span>&nbsp;<span class="num" id="7619425">0</span><span class="op" id="7619426">,</span>&nbsp;<span class="num" id="7619428">0</span><span class="op" id="7619429">,</span>&nbsp;<span class="num" id="7619431">5</span><span class="op" id="7619432">}</span><span class="op" id="7619433">,</span>&nbsp;<span class="ident" id="7619435">a</span><span class="op" id="7619436">.</span><span class="ident" id="7619437">At</span><span class="op" id="7619439">(</span><span class="num" id="7619440">0</span><span class="op" id="7619441">,</span>&nbsp;<span class="num" id="7619443">0</span><span class="op" id="7619444">)</span><span class="op" id="7619445">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619448">}</span><br>
<span class="lineno"></span><span class="op" id="7619450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7619453">func</span>&nbsp;<span class="ident" id="7619458">TestFill</span><span class="op" id="7619466">(</span><span class="ident" id="7619467">t</span>&nbsp;<span class="op" id="7619469">*</span><span class="ident" id="7619470">testing</span><span class="op" id="7619477">.</span><span class="ident" id="7619478">T</span><span class="op" id="7619479">)</span>&nbsp;<span class="op" id="7619481">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619484">rr</span>&nbsp;<span class="op" id="7619487">:=</span>&nbsp;<span class="op" id="7619490">[</span><span class="op" id="7619491">]</span><span class="ident" id="7619492">image</span><span class="op" id="7619497">.</span><span class="ident" id="7619498">Rectangle</span><span class="op" id="7619507">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619511">image</span><span class="op" id="7619516">.</span><span class="ident" id="7619517">Rect</span><span class="op" id="7619521">(</span><span class="num" id="7619522">0</span><span class="op" id="7619523">,</span>&nbsp;<span class="num" id="7619525">0</span><span class="op" id="7619526">,</span>&nbsp;<span class="num" id="7619528">0</span><span class="op" id="7619529">,</span>&nbsp;<span class="num" id="7619531">0</span><span class="op" id="7619532">)</span><span class="op" id="7619533">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619537">image</span><span class="op" id="7619542">.</span><span class="ident" id="7619543">Rect</span><span class="op" id="7619547">(</span><span class="num" id="7619548">0</span><span class="op" id="7619549">,</span>&nbsp;<span class="num" id="7619551">0</span><span class="op" id="7619552">,</span>&nbsp;<span class="num" id="7619554">40</span><span class="op" id="7619556">,</span>&nbsp;<span class="num" id="7619558">30</span><span class="op" id="7619560">)</span><span class="op" id="7619561">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619565">image</span><span class="op" id="7619570">.</span><span class="ident" id="7619571">Rect</span><span class="op" id="7619575">(</span><span class="num" id="7619576">10</span><span class="op" id="7619578">,</span>&nbsp;<span class="num" id="7619580">0</span><span class="op" id="7619581">,</span>&nbsp;<span class="num" id="7619583">40</span><span class="op" id="7619585">,</span>&nbsp;<span class="num" id="7619587">30</span><span class="op" id="7619589">)</span><span class="op" id="7619590">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619594">image</span><span class="op" id="7619599">.</span><span class="ident" id="7619600">Rect</span><span class="op" id="7619604">(</span><span class="num" id="7619605">0</span><span class="op" id="7619606">,</span>&nbsp;<span class="num" id="7619608">20</span><span class="op" id="7619610">,</span>&nbsp;<span class="num" id="7619612">40</span><span class="op" id="7619614">,</span>&nbsp;<span class="num" id="7619616">30</span><span class="op" id="7619618">)</span><span class="op" id="7619619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619623">image</span><span class="op" id="7619628">.</span><span class="ident" id="7619629">Rect</span><span class="op" id="7619633">(</span><span class="num" id="7619634">10</span><span class="op" id="7619636">,</span>&nbsp;<span class="num" id="7619638">20</span><span class="op" id="7619640">,</span>&nbsp;<span class="num" id="7619642">40</span><span class="op" id="7619644">,</span>&nbsp;<span class="num" id="7619646">30</span><span class="op" id="7619648">)</span><span class="op" id="7619649">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619653">image</span><span class="op" id="7619658">.</span><span class="ident" id="7619659">Rect</span><span class="op" id="7619663">(</span><span class="num" id="7619664">10</span><span class="op" id="7619666">,</span>&nbsp;<span class="num" id="7619668">20</span><span class="op" id="7619670">,</span>&nbsp;<span class="num" id="7619672">15</span><span class="op" id="7619674">,</span>&nbsp;<span class="num" id="7619676">25</span><span class="op" id="7619678">)</span><span class="op" id="7619679">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619683">image</span><span class="op" id="7619688">.</span><span class="ident" id="7619689">Rect</span><span class="op" id="7619693">(</span><span class="num" id="7619694">10</span><span class="op" id="7619696">,</span>&nbsp;<span class="num" id="7619698">0</span><span class="op" id="7619699">,</span>&nbsp;<span class="num" id="7619701">35</span><span class="op" id="7619703">,</span>&nbsp;<span class="num" id="7619705">30</span><span class="op" id="7619707">)</span><span class="op" id="7619708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619712">image</span><span class="op" id="7619717">.</span><span class="ident" id="7619718">Rect</span><span class="op" id="7619722">(</span><span class="num" id="7619723">0</span><span class="op" id="7619724">,</span>&nbsp;<span class="num" id="7619726">15</span><span class="op" id="7619728">,</span>&nbsp;<span class="num" id="7619730">40</span><span class="op" id="7619732">,</span>&nbsp;<span class="num" id="7619734">16</span><span class="op" id="7619736">)</span><span class="op" id="7619737">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619741">image</span><span class="op" id="7619746">.</span><span class="ident" id="7619747">Rect</span><span class="op" id="7619751">(</span><span class="num" id="7619752">24</span><span class="op" id="7619754">,</span>&nbsp;<span class="num" id="7619756">24</span><span class="op" id="7619758">,</span>&nbsp;<span class="num" id="7619760">25</span><span class="op" id="7619762">,</span>&nbsp;<span class="num" id="7619764">25</span><span class="op" id="7619766">)</span><span class="op" id="7619767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619771">image</span><span class="op" id="7619776">.</span><span class="ident" id="7619777">Rect</span><span class="op" id="7619781">(</span><span class="num" id="7619782">23</span><span class="op" id="7619784">,</span>&nbsp;<span class="num" id="7619786">23</span><span class="op" id="7619788">,</span>&nbsp;<span class="num" id="7619790">26</span><span class="op" id="7619792">,</span>&nbsp;<span class="num" id="7619794">26</span><span class="op" id="7619796">)</span><span class="op" id="7619797">,</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619801">image</span><span class="op" id="7619806">.</span><span class="ident" id="7619807">Rect</span><span class="op" id="7619811">(</span><span class="num" id="7619812">22</span><span class="op" id="7619814">,</span>&nbsp;<span class="num" id="7619816">22</span><span class="op" id="7619818">,</span>&nbsp;<span class="num" id="7619820">27</span><span class="op" id="7619822">,</span>&nbsp;<span class="num" id="7619824">27</span><span class="op" id="7619826">)</span><span class="op" id="7619827">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619831">image</span><span class="op" id="7619836">.</span><span class="ident" id="7619837">Rect</span><span class="op" id="7619841">(</span><span class="num" id="7619842">21</span><span class="op" id="7619844">,</span>&nbsp;<span class="num" id="7619846">21</span><span class="op" id="7619848">,</span>&nbsp;<span class="num" id="7619850">28</span><span class="op" id="7619852">,</span>&nbsp;<span class="num" id="7619854">28</span><span class="op" id="7619856">)</span><span class="op" id="7619857">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619861">image</span><span class="op" id="7619866">.</span><span class="ident" id="7619867">Rect</span><span class="op" id="7619871">(</span><span class="num" id="7619872">20</span><span class="op" id="7619874">,</span>&nbsp;<span class="num" id="7619876">20</span><span class="op" id="7619878">,</span>&nbsp;<span class="num" id="7619880">29</span><span class="op" id="7619882">,</span>&nbsp;<span class="num" id="7619884">29</span><span class="op" id="7619886">)</span><span class="op" id="7619887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7619890">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7619893">for</span>&nbsp;<span class="ident" id="7619897">_</span><span class="op" id="7619898">,</span>&nbsp;<span class="ident" id="7619900">r</span>&nbsp;<span class="op" id="7619902">:=</span>&nbsp;<span class="keyword" id="7619905">range</span>&nbsp;<span class="ident" id="7619911">rr</span>&nbsp;<span class="op" id="7619914">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619918">m</span>&nbsp;<span class="op" id="7619920">:=</span>&nbsp;<span class="ident" id="7619923">image</span><span class="op" id="7619928">.</span><span class="ident" id="7619929">NewRGBA</span><span class="op" id="7619936">(</span><span class="ident" id="7619937">image</span><span class="op" id="7619942">.</span><span class="ident" id="7619943">Rect</span><span class="op" id="7619947">(</span><span class="num" id="7619948">0</span><span class="op" id="7619949">,</span>&nbsp;<span class="num" id="7619951">0</span><span class="op" id="7619952">,</span>&nbsp;<span class="num" id="7619954">40</span><span class="op" id="7619956">,</span>&nbsp;<span class="num" id="7619958">30</span><span class="op" id="7619960">)</span><span class="op" id="7619961">)</span><span class="op" id="7619962">.</span><span class="ident" id="7619963">SubImage</span><span class="op" id="7619971">(</span><span class="ident" id="7619972">r</span><span class="op" id="7619973">)</span><span class="op" id="7619974">.</span><span class="op" id="7619975">(</span><span class="op" id="7619976">*</span><span class="ident" id="7619977">image</span><span class="op" id="7619982">.</span><span class="ident" id="7619983">RGBA</span><span class="op" id="7619987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7619991">b</span>&nbsp;<span class="op" id="7619993">:=</span>&nbsp;<span class="ident" id="7619996">m</span><span class="op" id="7619997">.</span><span class="ident" id="7619998">Bounds</span><span class="op" id="7620004">(</span><span class="op" id="7620005">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620009">c</span>&nbsp;<span class="op" id="7620011">:=</span>&nbsp;<span class="ident" id="7620014">color</span><span class="op" id="7620019">.</span><span class="ident" id="7620020">RGBA</span><span class="op" id="7620024">{</span><span class="num" id="7620025">11</span><span class="op" id="7620027">,</span>&nbsp;<span class="num" id="7620029">0</span><span class="op" id="7620030">,</span>&nbsp;<span class="num" id="7620032">0</span><span class="op" id="7620033">,</span>&nbsp;<span class="num" id="7620035">255</span><span class="op" id="7620038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620042">src</span>&nbsp;<span class="op" id="7620046">:=</span>&nbsp;<span class="op" id="7620049">&amp;</span><span class="ident" id="7620050">image</span><span class="op" id="7620055">.</span><span class="ident" id="7620056">Uniform</span><span class="op" id="7620063">{</span><span class="ident" id="7620064">C</span><span class="op" id="7620065">:</span>&nbsp;<span class="ident" id="7620067">c</span><span class="op" id="7620068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620072">check</span>&nbsp;<span class="op" id="7620078">:=</span>&nbsp;<span class="keyword" id="7620081">func</span><span class="op" id="7620085">(</span><span class="ident" id="7620086">desc</span>&nbsp;<span class="builtintype" id="7620091">string</span><span class="op" id="7620097">)</span>&nbsp;<span class="op" id="7620099">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620104">for</span>&nbsp;<span class="ident" id="7620108">y</span>&nbsp;<span class="op" id="7620110">:=</span>&nbsp;<span class="ident" id="7620113">b</span><span class="op" id="7620114">.</span><span class="ident" id="7620115">Min</span><span class="op" id="7620118">.</span><span class="ident" id="7620119">Y</span><span class="op" id="7620120">;</span>&nbsp;<span class="ident" id="7620122">y</span>&nbsp;<span class="op" id="7620124">&lt;</span>&nbsp;<span class="ident" id="7620126">b</span><span class="op" id="7620127">.</span><span class="ident" id="7620128">Max</span><span class="op" id="7620131">.</span><span class="ident" id="7620132">Y</span><span class="op" id="7620133">;</span>&nbsp;<span class="ident" id="7620135">y</span><span class="op" id="7620136">++</span>&nbsp;<span class="op" id="7620139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620145">for</span>&nbsp;<span class="ident" id="7620149">x</span>&nbsp;<span class="op" id="7620151">:=</span>&nbsp;<span class="ident" id="7620154">b</span><span class="op" id="7620155">.</span><span class="ident" id="7620156">Min</span><span class="op" id="7620159">.</span><span class="ident" id="7620160">X</span><span class="op" id="7620161">;</span>&nbsp;<span class="ident" id="7620163">x</span>&nbsp;<span class="op" id="7620165">&lt;</span>&nbsp;<span class="ident" id="7620167">b</span><span class="op" id="7620168">.</span><span class="ident" id="7620169">Max</span><span class="op" id="7620172">.</span><span class="ident" id="7620173">X</span><span class="op" id="7620174">;</span>&nbsp;<span class="ident" id="7620176">x</span><span class="op" id="7620177">++</span>&nbsp;<span class="op" id="7620180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620187">if</span>&nbsp;<span class="op" id="7620190">!</span><span class="ident" id="7620191">eq</span><span class="op" id="7620193">(</span><span class="ident" id="7620194">c</span><span class="op" id="7620195">,</span>&nbsp;<span class="ident" id="7620197">m</span><span class="op" id="7620198">.</span><span class="ident" id="7620199">At</span><span class="op" id="7620201">(</span><span class="ident" id="7620202">x</span><span class="op" id="7620203">,</span>&nbsp;<span class="ident" id="7620205">y</span><span class="op" id="7620206">)</span><span class="op" id="7620207">)</span>&nbsp;<span class="op" id="7620209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620217">t</span><span class="op" id="7620218">.</span><span class="ident" id="7620219">Errorf</span><span class="op" id="7620225">(</span><span class="string" id="7620226">&#34;%s&nbsp;fill:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;sub-image&nbsp;bounds=%v:&nbsp;want&nbsp;%v&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7620285">,</span>&nbsp;<span class="ident" id="7620287">desc</span><span class="op" id="7620291">,</span>&nbsp;<span class="ident" id="7620293">x</span><span class="op" id="7620294">,</span>&nbsp;<span class="ident" id="7620296">y</span><span class="op" id="7620297">,</span>&nbsp;<span class="ident" id="7620299">r</span><span class="op" id="7620300">,</span>&nbsp;<span class="ident" id="7620302">c</span><span class="op" id="7620303">,</span>&nbsp;<span class="ident" id="7620305">m</span><span class="op" id="7620306">.</span><span class="ident" id="7620307">At</span><span class="op" id="7620309">(</span><span class="ident" id="7620310">x</span><span class="op" id="7620311">,</span>&nbsp;<span class="ident" id="7620313">y</span><span class="op" id="7620314">)</span><span class="op" id="7620315">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620323">return</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620341">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620346">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7620354">//&nbsp;Draw&nbsp;1&nbsp;pixel&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620383">for</span>&nbsp;<span class="ident" id="7620387">y</span>&nbsp;<span class="op" id="7620389">:=</span>&nbsp;<span class="ident" id="7620392">b</span><span class="op" id="7620393">.</span><span class="ident" id="7620394">Min</span><span class="op" id="7620397">.</span><span class="ident" id="7620398">Y</span><span class="op" id="7620399">;</span>&nbsp;<span class="ident" id="7620401">y</span>&nbsp;<span class="op" id="7620403">&lt;</span>&nbsp;<span class="ident" id="7620405">b</span><span class="op" id="7620406">.</span><span class="ident" id="7620407">Max</span><span class="op" id="7620410">.</span><span class="ident" id="7620411">Y</span><span class="op" id="7620412">;</span>&nbsp;<span class="ident" id="7620414">y</span><span class="op" id="7620415">++</span>&nbsp;<span class="op" id="7620418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620423">for</span>&nbsp;<span class="ident" id="7620427">x</span>&nbsp;<span class="op" id="7620429">:=</span>&nbsp;<span class="ident" id="7620432">b</span><span class="op" id="7620433">.</span><span class="ident" id="7620434">Min</span><span class="op" id="7620437">.</span><span class="ident" id="7620438">X</span><span class="op" id="7620439">;</span>&nbsp;<span class="ident" id="7620441">x</span>&nbsp;<span class="op" id="7620443">&lt;</span>&nbsp;<span class="ident" id="7620445">b</span><span class="op" id="7620446">.</span><span class="ident" id="7620447">Max</span><span class="op" id="7620450">.</span><span class="ident" id="7620451">X</span><span class="op" id="7620452">;</span>&nbsp;<span class="ident" id="7620454">x</span><span class="op" id="7620455">++</span>&nbsp;<span class="op" id="7620458">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620464">DrawMask</span><span class="op" id="7620472">(</span><span class="ident" id="7620473">m</span><span class="op" id="7620474">,</span>&nbsp;<span class="ident" id="7620476">image</span><span class="op" id="7620481">.</span><span class="ident" id="7620482">Rect</span><span class="op" id="7620486">(</span><span class="ident" id="7620487">x</span><span class="op" id="7620488">,</span>&nbsp;<span class="ident" id="7620490">y</span><span class="op" id="7620491">,</span>&nbsp;<span class="ident" id="7620493">x</span><span class="op" id="7620494">+</span><span class="num" id="7620495">1</span><span class="op" id="7620496">,</span>&nbsp;<span class="ident" id="7620498">y</span><span class="op" id="7620499">+</span><span class="num" id="7620500">1</span><span class="op" id="7620501">)</span><span class="op" id="7620502">,</span>&nbsp;<span class="ident" id="7620504">src</span><span class="op" id="7620507">,</span>&nbsp;<span class="ident" id="7620509">image</span><span class="op" id="7620514">.</span><span class="ident" id="7620515">ZP</span><span class="op" id="7620517">,</span>&nbsp;<span class="ident" id="7620519">nil</span><span class="op" id="7620522">,</span>&nbsp;<span class="ident" id="7620524">image</span><span class="op" id="7620529">.</span><span class="ident" id="7620530">ZP</span><span class="op" id="7620532">,</span>&nbsp;<span class="ident" id="7620534">Src</span><span class="op" id="7620537">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620542">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620546">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620550">check</span><span class="op" id="7620555">(</span><span class="string" id="7620556">&#34;pixel&#34;</span><span class="op" id="7620563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7620567">//&nbsp;Draw&nbsp;1&nbsp;row&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620594">c</span>&nbsp;<span class="op" id="7620596">=</span>&nbsp;<span class="ident" id="7620598">color</span><span class="op" id="7620603">.</span><span class="ident" id="7620604">RGBA</span><span class="op" id="7620608">{</span><span class="num" id="7620609">0</span><span class="op" id="7620610">,</span>&nbsp;<span class="num" id="7620612">22</span><span class="op" id="7620614">,</span>&nbsp;<span class="num" id="7620616">0</span><span class="op" id="7620617">,</span>&nbsp;<span class="num" id="7620619">255</span><span class="op" id="7620622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620626">src</span>&nbsp;<span class="op" id="7620630">=</span>&nbsp;<span class="op" id="7620632">&amp;</span><span class="ident" id="7620633">image</span><span class="op" id="7620638">.</span><span class="ident" id="7620639">Uniform</span><span class="op" id="7620646">{</span><span class="ident" id="7620647">C</span><span class="op" id="7620648">:</span>&nbsp;<span class="ident" id="7620650">c</span><span class="op" id="7620651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620655">for</span>&nbsp;<span class="ident" id="7620659">y</span>&nbsp;<span class="op" id="7620661">:=</span>&nbsp;<span class="ident" id="7620664">b</span><span class="op" id="7620665">.</span><span class="ident" id="7620666">Min</span><span class="op" id="7620669">.</span><span class="ident" id="7620670">Y</span><span class="op" id="7620671">;</span>&nbsp;<span class="ident" id="7620673">y</span>&nbsp;<span class="op" id="7620675">&lt;</span>&nbsp;<span class="ident" id="7620677">b</span><span class="op" id="7620678">.</span><span class="ident" id="7620679">Max</span><span class="op" id="7620682">.</span><span class="ident" id="7620683">Y</span><span class="op" id="7620684">;</span>&nbsp;<span class="ident" id="7620686">y</span><span class="op" id="7620687">++</span>&nbsp;<span class="op" id="7620690">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620695">DrawMask</span><span class="op" id="7620703">(</span><span class="ident" id="7620704">m</span><span class="op" id="7620705">,</span>&nbsp;<span class="ident" id="7620707">image</span><span class="op" id="7620712">.</span><span class="ident" id="7620713">Rect</span><span class="op" id="7620717">(</span><span class="ident" id="7620718">b</span><span class="op" id="7620719">.</span><span class="ident" id="7620720">Min</span><span class="op" id="7620723">.</span><span class="ident" id="7620724">X</span><span class="op" id="7620725">,</span>&nbsp;<span class="ident" id="7620727">y</span><span class="op" id="7620728">,</span>&nbsp;<span class="ident" id="7620730">b</span><span class="op" id="7620731">.</span><span class="ident" id="7620732">Max</span><span class="op" id="7620735">.</span><span class="ident" id="7620736">X</span><span class="op" id="7620737">,</span>&nbsp;<span class="ident" id="7620739">y</span><span class="op" id="7620740">+</span><span class="num" id="7620741">1</span><span class="op" id="7620742">)</span><span class="op" id="7620743">,</span>&nbsp;<span class="ident" id="7620745">src</span><span class="op" id="7620748">,</span>&nbsp;<span class="ident" id="7620750">image</span><span class="op" id="7620755">.</span><span class="ident" id="7620756">ZP</span><span class="op" id="7620758">,</span>&nbsp;<span class="ident" id="7620760">nil</span><span class="op" id="7620763">,</span>&nbsp;<span class="ident" id="7620765">image</span><span class="op" id="7620770">.</span><span class="ident" id="7620771">ZP</span><span class="op" id="7620773">,</span>&nbsp;<span class="ident" id="7620775">Src</span><span class="op" id="7620778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7620782">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620786">check</span><span class="op" id="7620791">(</span><span class="string" id="7620792">&#34;row&#34;</span><span class="op" id="7620797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7620801">//&nbsp;Draw&nbsp;1&nbsp;column&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620831">c</span>&nbsp;<span class="op" id="7620833">=</span>&nbsp;<span class="ident" id="7620835">color</span><span class="op" id="7620840">.</span><span class="ident" id="7620841">RGBA</span><span class="op" id="7620845">{</span><span class="num" id="7620846">0</span><span class="op" id="7620847">,</span>&nbsp;<span class="num" id="7620849">0</span><span class="op" id="7620850">,</span>&nbsp;<span class="num" id="7620852">33</span><span class="op" id="7620854">,</span>&nbsp;<span class="num" id="7620856">255</span><span class="op" id="7620859">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620863">src</span>&nbsp;<span class="op" id="7620867">=</span>&nbsp;<span class="op" id="7620869">&amp;</span><span class="ident" id="7620870">image</span><span class="op" id="7620875">.</span><span class="ident" id="7620876">Uniform</span><span class="op" id="7620883">{</span><span class="ident" id="7620884">C</span><span class="op" id="7620885">:</span>&nbsp;<span class="ident" id="7620887">c</span><span class="op" id="7620888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7620892">for</span>&nbsp;<span class="ident" id="7620896">x</span>&nbsp;<span class="op" id="7620898">:=</span>&nbsp;<span class="ident" id="7620901">b</span><span class="op" id="7620902">.</span><span class="ident" id="7620903">Min</span><span class="op" id="7620906">.</span><span class="ident" id="7620907">X</span><span class="op" id="7620908">;</span>&nbsp;<span class="ident" id="7620910">x</span>&nbsp;<span class="op" id="7620912">&lt;</span>&nbsp;<span class="ident" id="7620914">b</span><span class="op" id="7620915">.</span><span class="ident" id="7620916">Max</span><span class="op" id="7620919">.</span><span class="ident" id="7620920">X</span><span class="op" id="7620921">;</span>&nbsp;<span class="ident" id="7620923">x</span><span class="op" id="7620924">++</span>&nbsp;<span class="op" id="7620927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7620932">DrawMask</span><span class="op" id="7620940">(</span><span class="ident" id="7620941">m</span><span class="op" id="7620942">,</span>&nbsp;<span class="ident" id="7620944">image</span><span class="op" id="7620949">.</span><span class="ident" id="7620950">Rect</span><span class="op" id="7620954">(</span><span class="ident" id="7620955">x</span><span class="op" id="7620956">,</span>&nbsp;<span class="ident" id="7620958">b</span><span class="op" id="7620959">.</span><span class="ident" id="7620960">Min</span><span class="op" id="7620963">.</span><span class="ident" id="7620964">Y</span><span class="op" id="7620965">,</span>&nbsp;<span class="ident" id="7620967">x</span><span class="op" id="7620968">+</span><span class="num" id="7620969">1</span><span class="op" id="7620970">,</span>&nbsp;<span class="ident" id="7620972">b</span><span class="op" id="7620973">.</span><span class="ident" id="7620974">Max</span><span class="op" id="7620977">.</span><span class="ident" id="7620978">Y</span><span class="op" id="7620979">)</span><span class="op" id="7620980">,</span>&nbsp;<span class="ident" id="7620982">src</span><span class="op" id="7620985">,</span>&nbsp;<span class="ident" id="7620987">image</span><span class="op" id="7620992">.</span><span class="ident" id="7620993">ZP</span><span class="op" id="7620995">,</span>&nbsp;<span class="ident" id="7620997">nil</span><span class="op" id="7621000">,</span>&nbsp;<span class="ident" id="7621002">image</span><span class="op" id="7621007">.</span><span class="ident" id="7621008">ZP</span><span class="op" id="7621010">,</span>&nbsp;<span class="ident" id="7621012">Src</span><span class="op" id="7621015">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621023">check</span><span class="op" id="7621028">(</span><span class="string" id="7621029">&#34;column&#34;</span><span class="op" id="7621037">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7621041">//&nbsp;Draw&nbsp;the&nbsp;whole&nbsp;image&nbsp;at&nbsp;once.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621076">c</span>&nbsp;<span class="op" id="7621078">=</span>&nbsp;<span class="ident" id="7621080">color</span><span class="op" id="7621085">.</span><span class="ident" id="7621086">RGBA</span><span class="op" id="7621090">{</span><span class="num" id="7621091">44</span><span class="op" id="7621093">,</span>&nbsp;<span class="num" id="7621095">55</span><span class="op" id="7621097">,</span>&nbsp;<span class="num" id="7621099">66</span><span class="op" id="7621101">,</span>&nbsp;<span class="num" id="7621103">77</span><span class="op" id="7621105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621109">src</span>&nbsp;<span class="op" id="7621113">=</span>&nbsp;<span class="op" id="7621115">&amp;</span><span class="ident" id="7621116">image</span><span class="op" id="7621121">.</span><span class="ident" id="7621122">Uniform</span><span class="op" id="7621129">{</span><span class="ident" id="7621130">C</span><span class="op" id="7621131">:</span>&nbsp;<span class="ident" id="7621133">c</span><span class="op" id="7621134">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621138">DrawMask</span><span class="op" id="7621146">(</span><span class="ident" id="7621147">m</span><span class="op" id="7621148">,</span>&nbsp;<span class="ident" id="7621150">b</span><span class="op" id="7621151">,</span>&nbsp;<span class="ident" id="7621153">src</span><span class="op" id="7621156">,</span>&nbsp;<span class="ident" id="7621158">image</span><span class="op" id="7621163">.</span><span class="ident" id="7621164">ZP</span><span class="op" id="7621166">,</span>&nbsp;<span class="ident" id="7621168">nil</span><span class="op" id="7621171">,</span>&nbsp;<span class="ident" id="7621173">image</span><span class="op" id="7621178">.</span><span class="ident" id="7621179">ZP</span><span class="op" id="7621181">,</span>&nbsp;<span class="ident" id="7621183">Src</span><span class="op" id="7621186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621190">check</span><span class="op" id="7621195">(</span><span class="string" id="7621196">&#34;whole&#34;</span><span class="op" id="7621203">)</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7621206">}</span><br>
<span class="lineno"></span><span class="op" id="7621208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7621211">//&nbsp;TestFloydSteinbergCheckerboard&nbsp;tests&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;Floyd-Steinberg</span><br>
<span class="lineno"></span><span class="comment" id="7621286">//&nbsp;error&nbsp;diffusion&nbsp;of&nbsp;a&nbsp;uniform&nbsp;50%&nbsp;gray&nbsp;source&nbsp;image&nbsp;with&nbsp;a&nbsp;black-and-white</span><br>
<span class="lineno">360</span><span class="comment" id="7621363">//&nbsp;palette&nbsp;is&nbsp;a&nbsp;checkerboard&nbsp;pattern.</span><br>
<span class="lineno"></span><span class="keyword" id="7621401">func</span>&nbsp;<span class="ident" id="7621406">TestFloydSteinbergCheckerboard</span><span class="op" id="7621436">(</span><span class="ident" id="7621437">t</span>&nbsp;<span class="op" id="7621439">*</span><span class="ident" id="7621440">testing</span><span class="op" id="7621447">.</span><span class="ident" id="7621448">T</span><span class="op" id="7621449">)</span>&nbsp;<span class="op" id="7621451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621454">b</span>&nbsp;<span class="op" id="7621456">:=</span>&nbsp;<span class="ident" id="7621459">image</span><span class="op" id="7621464">.</span><span class="ident" id="7621465">Rect</span><span class="op" id="7621469">(</span><span class="num" id="7621470">0</span><span class="op" id="7621471">,</span>&nbsp;<span class="num" id="7621473">0</span><span class="op" id="7621474">,</span>&nbsp;<span class="num" id="7621476">640</span><span class="op" id="7621479">,</span>&nbsp;<span class="num" id="7621481">480</span><span class="op" id="7621484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7621487">//&nbsp;We&nbsp;can&#39;t&nbsp;represent&nbsp;50%&nbsp;exactly,&nbsp;but&nbsp;0x7fff&nbsp;/&nbsp;0xffff&nbsp;is&nbsp;close&nbsp;enough.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621560">src</span>&nbsp;<span class="op" id="7621564">:=</span>&nbsp;<span class="op" id="7621567">&amp;</span><span class="ident" id="7621568">image</span><span class="op" id="7621573">.</span><span class="ident" id="7621574">Uniform</span><span class="op" id="7621581">{</span><span class="ident" id="7621582">color</span><span class="op" id="7621587">.</span><span class="ident" id="7621588">Gray16</span><span class="op" id="7621594">{</span><span class="num" id="7621595">0x7fff</span><span class="op" id="7621601">}</span><span class="op" id="7621602">}</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621605">dst</span>&nbsp;<span class="op" id="7621609">:=</span>&nbsp;<span class="ident" id="7621612">image</span><span class="op" id="7621617">.</span><span class="ident" id="7621618">NewPaletted</span><span class="op" id="7621629">(</span><span class="ident" id="7621630">b</span><span class="op" id="7621631">,</span>&nbsp;<span class="ident" id="7621633">color</span><span class="op" id="7621638">.</span><span class="ident" id="7621639">Palette</span><span class="op" id="7621646">{</span><span class="ident" id="7621647">color</span><span class="op" id="7621652">.</span><span class="ident" id="7621653">Black</span><span class="op" id="7621658">,</span>&nbsp;<span class="ident" id="7621660">color</span><span class="op" id="7621665">.</span><span class="ident" id="7621666">White</span><span class="op" id="7621671">}</span><span class="op" id="7621672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621675">FloydSteinberg</span><span class="op" id="7621689">.</span><span class="ident" id="7621690">Draw</span><span class="op" id="7621694">(</span><span class="ident" id="7621695">dst</span><span class="op" id="7621698">,</span>&nbsp;<span class="ident" id="7621700">b</span><span class="op" id="7621701">,</span>&nbsp;<span class="ident" id="7621703">src</span><span class="op" id="7621706">,</span>&nbsp;<span class="ident" id="7621708">image</span><span class="op" id="7621713">.</span><span class="ident" id="7621714">Point</span><span class="op" id="7621719">{</span><span class="op" id="7621720">}</span><span class="op" id="7621721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621724">nErr</span>&nbsp;<span class="op" id="7621729">:=</span>&nbsp;<span class="num" id="7621732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621735">for</span>&nbsp;<span class="ident" id="7621739">y</span>&nbsp;<span class="op" id="7621741">:=</span>&nbsp;<span class="ident" id="7621744">b</span><span class="op" id="7621745">.</span><span class="ident" id="7621746">Min</span><span class="op" id="7621749">.</span><span class="ident" id="7621750">Y</span><span class="op" id="7621751">;</span>&nbsp;<span class="ident" id="7621753">y</span>&nbsp;<span class="op" id="7621755">&lt;</span>&nbsp;<span class="ident" id="7621757">b</span><span class="op" id="7621758">.</span><span class="ident" id="7621759">Max</span><span class="op" id="7621762">.</span><span class="ident" id="7621763">Y</span><span class="op" id="7621764">;</span>&nbsp;<span class="ident" id="7621766">y</span><span class="op" id="7621767">++</span>&nbsp;<span class="op" id="7621770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621774">for</span>&nbsp;<span class="ident" id="7621778">x</span>&nbsp;<span class="op" id="7621780">:=</span>&nbsp;<span class="ident" id="7621783">b</span><span class="op" id="7621784">.</span><span class="ident" id="7621785">Min</span><span class="op" id="7621788">.</span><span class="ident" id="7621789">X</span><span class="op" id="7621790">;</span>&nbsp;<span class="ident" id="7621792">x</span>&nbsp;<span class="op" id="7621794">&lt;</span>&nbsp;<span class="ident" id="7621796">b</span><span class="op" id="7621797">.</span><span class="ident" id="7621798">Max</span><span class="op" id="7621801">.</span><span class="ident" id="7621802">X</span><span class="op" id="7621803">;</span>&nbsp;<span class="ident" id="7621805">x</span><span class="op" id="7621806">++</span>&nbsp;<span class="op" id="7621809">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621814">got</span>&nbsp;<span class="op" id="7621818">:=</span>&nbsp;<span class="ident" id="7621821">dst</span><span class="op" id="7621824">.</span><span class="ident" id="7621825">Pix</span><span class="op" id="7621828">[</span><span class="ident" id="7621829">dst</span><span class="op" id="7621832">.</span><span class="ident" id="7621833">PixOffset</span><span class="op" id="7621842">(</span><span class="ident" id="7621843">x</span><span class="op" id="7621844">,</span>&nbsp;<span class="ident" id="7621846">y</span><span class="op" id="7621847">)</span><span class="op" id="7621848">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621853">want</span>&nbsp;<span class="op" id="7621858">:=</span>&nbsp;<span class="builtintype" id="7621861">uint8</span><span class="op" id="7621866">(</span><span class="ident" id="7621867">x</span><span class="op" id="7621868">+</span><span class="ident" id="7621869">y</span><span class="op" id="7621870">)</span>&nbsp;<span class="op" id="7621872">%</span>&nbsp;<span class="num" id="7621874">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621879">if</span>&nbsp;<span class="ident" id="7621882">got</span>&nbsp;<span class="op" id="7621886">!=</span>&nbsp;<span class="ident" id="7621889">want</span>&nbsp;<span class="op" id="7621894">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621900">t</span><span class="op" id="7621901">.</span><span class="ident" id="7621902">Errorf</span><span class="op" id="7621908">(</span><span class="string" id="7621909">&#34;at&nbsp;(%d,&nbsp;%d):&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7621939">,</span>&nbsp;<span class="ident" id="7621941">x</span><span class="op" id="7621942">,</span>&nbsp;<span class="ident" id="7621944">y</span><span class="op" id="7621945">,</span>&nbsp;<span class="ident" id="7621947">got</span><span class="op" id="7621950">,</span>&nbsp;<span class="ident" id="7621952">want</span><span class="op" id="7621956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7621962">if</span>&nbsp;<span class="ident" id="7621965">nErr</span><span class="op" id="7621969">++</span><span class="op" id="7621971">;</span>&nbsp;<span class="ident" id="7621973">nErr</span>&nbsp;<span class="op" id="7621978">==</span>&nbsp;<span class="num" id="7621981">10</span>&nbsp;<span class="op" id="7621984">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7621991">t</span><span class="op" id="7621992">.</span><span class="ident" id="7621993">Fatal</span><span class="op" id="7621998">(</span><span class="string" id="7621999">&#34;there&nbsp;may&nbsp;be&nbsp;more&nbsp;errors&#34;</span><span class="op" id="7622025">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622036">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622040">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622043">}</span><br>
<span class="lineno">380</span><span class="op" id="7622045">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7622048">//&nbsp;embeddedPaletted&nbsp;is&nbsp;an&nbsp;Image&nbsp;that&nbsp;behaves&nbsp;like&nbsp;an&nbsp;*image.Paletted&nbsp;but&nbsp;whose</span><br>
<span class="lineno"></span><span class="comment" id="7622127">//&nbsp;type&nbsp;is&nbsp;not&nbsp;*image.Paletted.</span><br>
<span class="lineno"></span><span class="keyword" id="7622159">type</span>&nbsp;<span class="ident" id="7622164">embeddedPaletted</span>&nbsp;<span class="keyword" id="7622181">struct</span>&nbsp;<span class="op" id="7622188">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622191">*</span><span class="ident" id="7622192">image</span><span class="op" id="7622197">.</span><span class="ident" id="7622198">Paletted</span><br>
<span class="lineno"></span><span class="op" id="7622207">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7622210">//&nbsp;TestPaletted&nbsp;tests&nbsp;that&nbsp;the&nbsp;drawPaletted&nbsp;function&nbsp;behaves&nbsp;the&nbsp;same</span><br>
<span class="lineno"></span><span class="comment" id="7622280">//&nbsp;regardless&nbsp;of&nbsp;whether&nbsp;dst&nbsp;is&nbsp;an&nbsp;*image.Paletted.</span><br>
<span class="lineno">390</span><span class="keyword" id="7622332">func</span>&nbsp;<span class="ident" id="7622337">TestPaletted</span><span class="op" id="7622349">(</span><span class="ident" id="7622350">t</span>&nbsp;<span class="op" id="7622352">*</span><span class="ident" id="7622353">testing</span><span class="op" id="7622360">.</span><span class="ident" id="7622361">T</span><span class="op" id="7622362">)</span>&nbsp;<span class="op" id="7622364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622367">f</span><span class="op" id="7622368">,</span>&nbsp;<span class="ident" id="7622370">err</span>&nbsp;<span class="op" id="7622374">:=</span>&nbsp;<span class="ident" id="7622377">os</span><span class="op" id="7622379">.</span><span class="ident" id="7622380">Open</span><span class="op" id="7622384">(</span><span class="string" id="7622385">&#34;../testdata/video-001.png&#34;</span><span class="op" id="7622412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622415">if</span>&nbsp;<span class="ident" id="7622418">err</span>&nbsp;<span class="op" id="7622422">!=</span>&nbsp;<span class="ident" id="7622425">nil</span>&nbsp;<span class="op" id="7622429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622433">t</span><span class="op" id="7622434">.</span><span class="ident" id="7622435">Fatalf</span><span class="op" id="7622441">(</span><span class="string" id="7622442">&#34;open:&nbsp;%v&#34;</span><span class="op" id="7622452">,</span>&nbsp;<span class="ident" id="7622454">err</span><span class="op" id="7622457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622460">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622463">defer</span>&nbsp;<span class="ident" id="7622469">f</span><span class="op" id="7622470">.</span><span class="ident" id="7622471">Close</span><span class="op" id="7622476">(</span><span class="op" id="7622477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622480">src</span><span class="op" id="7622483">,</span>&nbsp;<span class="ident" id="7622485">err</span>&nbsp;<span class="op" id="7622489">:=</span>&nbsp;<span class="ident" id="7622492">png</span><span class="op" id="7622495">.</span><span class="ident" id="7622496">Decode</span><span class="op" id="7622502">(</span><span class="ident" id="7622503">f</span><span class="op" id="7622504">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622507">if</span>&nbsp;<span class="ident" id="7622510">err</span>&nbsp;<span class="op" id="7622514">!=</span>&nbsp;<span class="ident" id="7622517">nil</span>&nbsp;<span class="op" id="7622521">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622525">t</span><span class="op" id="7622526">.</span><span class="ident" id="7622527">Fatalf</span><span class="op" id="7622533">(</span><span class="string" id="7622534">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7622546">,</span>&nbsp;<span class="ident" id="7622548">err</span><span class="op" id="7622551">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622554">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622557">b</span>&nbsp;<span class="op" id="7622559">:=</span>&nbsp;<span class="ident" id="7622562">src</span><span class="op" id="7622565">.</span><span class="ident" id="7622566">Bounds</span><span class="op" id="7622572">(</span><span class="op" id="7622573">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622577">cgaPalette</span>&nbsp;<span class="op" id="7622588">:=</span>&nbsp;<span class="ident" id="7622591">color</span><span class="op" id="7622596">.</span><span class="ident" id="7622597">Palette</span><span class="op" id="7622604">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622608">color</span><span class="op" id="7622613">.</span><span class="ident" id="7622614">RGBA</span><span class="op" id="7622618">{</span><span class="num" id="7622619">0x00</span><span class="op" id="7622623">,</span>&nbsp;<span class="num" id="7622625">0x00</span><span class="op" id="7622629">,</span>&nbsp;<span class="num" id="7622631">0x00</span><span class="op" id="7622635">,</span>&nbsp;<span class="num" id="7622637">0xff</span><span class="op" id="7622641">}</span><span class="op" id="7622642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622646">color</span><span class="op" id="7622651">.</span><span class="ident" id="7622652">RGBA</span><span class="op" id="7622656">{</span><span class="num" id="7622657">0x55</span><span class="op" id="7622661">,</span>&nbsp;<span class="num" id="7622663">0xff</span><span class="op" id="7622667">,</span>&nbsp;<span class="num" id="7622669">0xff</span><span class="op" id="7622673">,</span>&nbsp;<span class="num" id="7622675">0xff</span><span class="op" id="7622679">}</span><span class="op" id="7622680">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622684">color</span><span class="op" id="7622689">.</span><span class="ident" id="7622690">RGBA</span><span class="op" id="7622694">{</span><span class="num" id="7622695">0xff</span><span class="op" id="7622699">,</span>&nbsp;<span class="num" id="7622701">0x55</span><span class="op" id="7622705">,</span>&nbsp;<span class="num" id="7622707">0xff</span><span class="op" id="7622711">,</span>&nbsp;<span class="num" id="7622713">0xff</span><span class="op" id="7622717">}</span><span class="op" id="7622718">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622722">color</span><span class="op" id="7622727">.</span><span class="ident" id="7622728">RGBA</span><span class="op" id="7622732">{</span><span class="num" id="7622733">0xff</span><span class="op" id="7622737">,</span>&nbsp;<span class="num" id="7622739">0xff</span><span class="op" id="7622743">,</span>&nbsp;<span class="num" id="7622745">0xff</span><span class="op" id="7622749">,</span>&nbsp;<span class="num" id="7622751">0xff</span><span class="op" id="7622755">}</span><span class="op" id="7622756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622762">drawers</span>&nbsp;<span class="op" id="7622770">:=</span>&nbsp;<span class="keyword" id="7622773">map</span><span class="op" id="7622776">[</span><span class="builtintype" id="7622777">string</span><span class="op" id="7622783">]</span><span class="ident" id="7622784">Drawer</span><span class="op" id="7622790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7622794">&#34;src&#34;</span><span class="op" id="7622799">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7622813">Src</span><span class="op" id="7622816">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7622820">&#34;floyd-steinberg&#34;</span><span class="op" id="7622837">:</span>&nbsp;<span class="ident" id="7622839">FloydSteinberg</span><span class="op" id="7622853">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7622856">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="7622859">loop</span><span class="op" id="7622863">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7622866">for</span>&nbsp;<span class="ident" id="7622870">dName</span><span class="op" id="7622875">,</span>&nbsp;<span class="ident" id="7622877">d</span>&nbsp;<span class="op" id="7622879">:=</span>&nbsp;<span class="keyword" id="7622882">range</span>&nbsp;<span class="ident" id="7622888">drawers</span>&nbsp;<span class="op" id="7622896">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622900">dst0</span>&nbsp;<span class="op" id="7622905">:=</span>&nbsp;<span class="ident" id="7622908">image</span><span class="op" id="7622913">.</span><span class="ident" id="7622914">NewPaletted</span><span class="op" id="7622925">(</span><span class="ident" id="7622926">b</span><span class="op" id="7622927">,</span>&nbsp;<span class="ident" id="7622929">cgaPalette</span><span class="op" id="7622939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622943">dst1</span>&nbsp;<span class="op" id="7622948">:=</span>&nbsp;<span class="ident" id="7622951">image</span><span class="op" id="7622956">.</span><span class="ident" id="7622957">NewPaletted</span><span class="op" id="7622968">(</span><span class="ident" id="7622969">b</span><span class="op" id="7622970">,</span>&nbsp;<span class="ident" id="7622972">cgaPalette</span><span class="op" id="7622982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7622986">d</span><span class="op" id="7622987">.</span><span class="ident" id="7622988">Draw</span><span class="op" id="7622992">(</span><span class="ident" id="7622993">dst0</span><span class="op" id="7622997">,</span>&nbsp;<span class="ident" id="7622999">b</span><span class="op" id="7623000">,</span>&nbsp;<span class="ident" id="7623002">src</span><span class="op" id="7623005">,</span>&nbsp;<span class="ident" id="7623007">image</span><span class="op" id="7623012">.</span><span class="ident" id="7623013">Point</span><span class="op" id="7623018">{</span><span class="op" id="7623019">}</span><span class="op" id="7623020">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623024">d</span><span class="op" id="7623025">.</span><span class="ident" id="7623026">Draw</span><span class="op" id="7623030">(</span><span class="ident" id="7623031">embeddedPaletted</span><span class="op" id="7623047">{</span><span class="ident" id="7623048">dst1</span><span class="op" id="7623052">}</span><span class="op" id="7623053">,</span>&nbsp;<span class="ident" id="7623055">b</span><span class="op" id="7623056">,</span>&nbsp;<span class="ident" id="7623058">src</span><span class="op" id="7623061">,</span>&nbsp;<span class="ident" id="7623063">image</span><span class="op" id="7623068">.</span><span class="ident" id="7623069">Point</span><span class="op" id="7623074">{</span><span class="op" id="7623075">}</span><span class="op" id="7623076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623080">for</span>&nbsp;<span class="ident" id="7623084">y</span>&nbsp;<span class="op" id="7623086">:=</span>&nbsp;<span class="ident" id="7623089">b</span><span class="op" id="7623090">.</span><span class="ident" id="7623091">Min</span><span class="op" id="7623094">.</span><span class="ident" id="7623095">Y</span><span class="op" id="7623096">;</span>&nbsp;<span class="ident" id="7623098">y</span>&nbsp;<span class="op" id="7623100">&lt;</span>&nbsp;<span class="ident" id="7623102">b</span><span class="op" id="7623103">.</span><span class="ident" id="7623104">Max</span><span class="op" id="7623107">.</span><span class="ident" id="7623108">Y</span><span class="op" id="7623109">;</span>&nbsp;<span class="ident" id="7623111">y</span><span class="op" id="7623112">++</span>&nbsp;<span class="op" id="7623115">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623120">for</span>&nbsp;<span class="ident" id="7623124">x</span>&nbsp;<span class="op" id="7623126">:=</span>&nbsp;<span class="ident" id="7623129">b</span><span class="op" id="7623130">.</span><span class="ident" id="7623131">Min</span><span class="op" id="7623134">.</span><span class="ident" id="7623135">X</span><span class="op" id="7623136">;</span>&nbsp;<span class="ident" id="7623138">x</span>&nbsp;<span class="op" id="7623140">&lt;</span>&nbsp;<span class="ident" id="7623142">b</span><span class="op" id="7623143">.</span><span class="ident" id="7623144">Max</span><span class="op" id="7623147">.</span><span class="ident" id="7623148">X</span><span class="op" id="7623149">;</span>&nbsp;<span class="ident" id="7623151">x</span><span class="op" id="7623152">++</span>&nbsp;<span class="op" id="7623155">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623161">if</span>&nbsp;<span class="op" id="7623164">!</span><span class="ident" id="7623165">eq</span><span class="op" id="7623167">(</span><span class="ident" id="7623168">dst0</span><span class="op" id="7623172">.</span><span class="ident" id="7623173">At</span><span class="op" id="7623175">(</span><span class="ident" id="7623176">x</span><span class="op" id="7623177">,</span>&nbsp;<span class="ident" id="7623179">y</span><span class="op" id="7623180">)</span><span class="op" id="7623181">,</span>&nbsp;<span class="ident" id="7623183">dst1</span><span class="op" id="7623187">.</span><span class="ident" id="7623188">At</span><span class="op" id="7623190">(</span><span class="ident" id="7623191">x</span><span class="op" id="7623192">,</span>&nbsp;<span class="ident" id="7623194">y</span><span class="op" id="7623195">)</span><span class="op" id="7623196">)</span>&nbsp;<span class="op" id="7623198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623205">t</span><span class="op" id="7623206">.</span><span class="ident" id="7623207">Errorf</span><span class="op" id="7623213">(</span><span class="string" id="7623214">&#34;%s:&nbsp;at&nbsp;(%d,&nbsp;%d),&nbsp;%v&nbsp;versus&nbsp;%v&#34;</span><span class="op" id="7623245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7623253">dName</span><span class="op" id="7623258">,</span>&nbsp;<span class="ident" id="7623260">x</span><span class="op" id="7623261">,</span>&nbsp;<span class="ident" id="7623263">y</span><span class="op" id="7623264">,</span>&nbsp;<span class="ident" id="7623266">dst0</span><span class="op" id="7623270">.</span><span class="ident" id="7623271">At</span><span class="op" id="7623273">(</span><span class="ident" id="7623274">x</span><span class="op" id="7623275">,</span>&nbsp;<span class="ident" id="7623277">y</span><span class="op" id="7623278">)</span><span class="op" id="7623279">,</span>&nbsp;<span class="ident" id="7623281">dst1</span><span class="op" id="7623285">.</span><span class="ident" id="7623286">At</span><span class="op" id="7623288">(</span><span class="ident" id="7623289">x</span><span class="op" id="7623290">,</span>&nbsp;<span class="ident" id="7623292">y</span><span class="op" id="7623293">)</span><span class="op" id="7623294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7623301">continue</span>&nbsp;<span class="ident" id="7623310">loop</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623324">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623328">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7623331">}</span><br>
<span class="lineno"></span><span class="op" id="7623333">}</span>
</div>
</body>
</html>
