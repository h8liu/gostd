<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5283076">package</span>&nbsp;<span class="ident" id="5283084">main</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5283090">import</span>&nbsp;<span class="op" id="5283097">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283100">&#34;bytes&#34;</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283109">&#34;flag&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283117">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5283124">//&nbsp;&#34;io/ioutil&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283140">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283146">&#34;strings&#34;</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283158">&#34;lonnie.io/e8vm/arch8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283182">&#34;lonnie.io/e8vm/asm8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283205">&#34;lonnie.io/e8vm/dasm8&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5283229">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno">15</span><span class="op" id="5283251">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5283254">var</span>&nbsp;<span class="op" id="5283258">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283261">doDasm</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5283273">=</span>&nbsp;<span class="ident" id="5283275"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283279">.</span><span class="ident" id="5283280">Bool</span><span class="op" id="5283284">(</span><span class="string" id="5283285">&#34;d&#34;</span><span class="op" id="5283288">,</span>&nbsp;<span class="ident" id="5283290">false</span><span class="op" id="5283295">,</span>&nbsp;<span class="string" id="5283297">&#34;do&nbsp;dump&#34;</span><span class="op" id="5283306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283309">ncycle</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5283321">=</span>&nbsp;<span class="ident" id="5283323"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283327">.</span><span class="ident" id="5283328">Int</span><span class="op" id="5283331">(</span><span class="string" id="5283332">&#34;n&#34;</span><span class="op" id="5283335">,</span>&nbsp;<span class="num" id="5283337">100000</span><span class="op" id="5283343">,</span>&nbsp;<span class="string" id="5283345">&#34;max&nbsp;cycles&nbsp;to&nbsp;execute&#34;</span><span class="op" id="5283368">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283371">memSize</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5283383">=</span>&nbsp;<span class="ident" id="5283385"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283389">.</span><span class="ident" id="5283390">Int</span><span class="op" id="5283393">(</span><span class="string" id="5283394">&#34;m&#34;</span><span class="op" id="5283397">,</span>&nbsp;<span class="num" id="5283399">1</span><span class="op" id="5283400">&lt;&lt;</span><span class="num" id="5283402">30</span><span class="op" id="5283404">,</span>&nbsp;<span class="string" id="5283406">&#34;memory&nbsp;size&#34;</span><span class="op" id="5283419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283422">printStatus</span>&nbsp;<span class="op" id="5283434">=</span>&nbsp;<span class="ident" id="5283436"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283440">.</span><span class="ident" id="5283441">Bool</span><span class="op" id="5283445">(</span><span class="string" id="5283446">&#34;s&#34;</span><span class="op" id="5283449">,</span>&nbsp;<span class="ident" id="5283451">false</span><span class="op" id="5283456">,</span>&nbsp;<span class="string" id="5283458">&#34;print&nbsp;status&nbsp;after&nbsp;execution&#34;</span><span class="op" id="5283488">)</span><br>
<span class="lineno"></span><span class="op" id="5283490">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5283493">func</span>&nbsp;<span class="ident" id="5283498">run</span><span class="op" id="5283501">(</span><span class="ident" id="5283502">bs</span>&nbsp;<span class="op" id="5283505">[</span><span class="op" id="5283506">]</span><span class="builtintype" id="5283507">byte</span><span class="op" id="5283511">)</span>&nbsp;<span class="op" id="5283513">(</span><span class="builtintype" id="5283514">int</span><span class="op" id="5283517">,</span>&nbsp;<span class="builtintype" id="5283519">error</span><span class="op" id="5283524">)</span>&nbsp;<span class="op" id="5283526">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283529">r</span>&nbsp;<span class="op" id="5283531">:=</span>&nbsp;<span class="ident" id="5283534"><a href="/lonnie.io/e8vm/main.go.html#5283100">bytes</a></span><span class="op" id="5283539">.</span><span class="ident" id="5283540">NewBuffer</span><span class="op" id="5283549">(</span><span class="ident" id="5283550"><a href="/lonnie.io/e8vm/main.go.html#5283502">bs</a></span><span class="op" id="5283552">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5283556">//&nbsp;create&nbsp;a&nbsp;single&nbsp;core&nbsp;machine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283589">m</span>&nbsp;<span class="op" id="5283591">:=</span>&nbsp;<span class="ident" id="5283594"><a href="/lonnie.io/e8vm/main.go.html#5283158">arch8</a></span><span class="op" id="5283599">.</span><span class="ident" id="5283600">NewMachine</span><span class="op" id="5283610">(</span><span class="builtintype" id="5283611">uint32</span><span class="op" id="5283617">(</span><span class="op" id="5283618">*</span><span class="ident" id="5283619"><a href="/lonnie.io/e8vm/main.go.html#5283371">memSize</a></span><span class="op" id="5283626">)</span><span class="op" id="5283627">,</span>&nbsp;<span class="num" id="5283629">1</span><span class="op" id="5283630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283633">e</span>&nbsp;<span class="op" id="5283635">:=</span>&nbsp;<span class="ident" id="5283638"><a href="/lonnie.io/e8vm/main.go.html#5283589">m</a></span><span class="op" id="5283639">.</span><span class="ident" id="5283640">LoadImage</span><span class="op" id="5283649">(</span><span class="ident" id="5283650"><a href="/lonnie.io/e8vm/main.go.html#5283529">r</a></span><span class="op" id="5283651">,</span>&nbsp;<span class="ident" id="5283653"><a href="/lonnie.io/e8vm/main.go.html#5283158">arch8</a></span><span class="op" id="5283658">.</span><span class="ident" id="5283659">InitPC</span><span class="op" id="5283665">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283668">if</span>&nbsp;<span class="ident" id="5283671"><a href="/lonnie.io/e8vm/main.go.html#5283633">e</a></span>&nbsp;<span class="op" id="5283673">!=</span>&nbsp;<span class="ident" id="5283676">nil</span>&nbsp;<span class="op" id="5283680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283684">return</span>&nbsp;<span class="num" id="5283691">0</span><span class="op" id="5283692">,</span>&nbsp;<span class="ident" id="5283694"><a href="/lonnie.io/e8vm/main.go.html#5283633">e</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283697">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283701">ret</span><span class="op" id="5283704">,</span>&nbsp;<span class="ident" id="5283706">exp</span>&nbsp;<span class="op" id="5283710">:=</span>&nbsp;<span class="ident" id="5283713"><a href="/lonnie.io/e8vm/main.go.html#5283589">m</a></span><span class="op" id="5283714">.</span><span class="ident" id="5283715">Run</span><span class="op" id="5283718">(</span><span class="op" id="5283719">*</span><span class="ident" id="5283720"><a href="/lonnie.io/e8vm/main.go.html#5283309">ncycle</a></span><span class="op" id="5283726">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283729">if</span>&nbsp;<span class="op" id="5283732">*</span><span class="ident" id="5283733"><a href="/lonnie.io/e8vm/main.go.html#5283422">printStatus</a></span>&nbsp;<span class="op" id="5283745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283749"><a href="/lonnie.io/e8vm/main.go.html#5283589">m</a></span><span class="op" id="5283750">.</span><span class="ident" id="5283751">PrintCoreStatus</span><span class="op" id="5283766">(</span><span class="op" id="5283767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283770">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283774">if</span>&nbsp;<span class="ident" id="5283777"><a href="/lonnie.io/e8vm/main.go.html#5283706">exp</a></span>&nbsp;<span class="op" id="5283781">==</span>&nbsp;<span class="ident" id="5283784">nil</span>&nbsp;<span class="op" id="5283788">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283792">return</span>&nbsp;<span class="ident" id="5283799"><a href="/lonnie.io/e8vm/main.go.html#5283701">ret</a></span><span class="op" id="5283802">,</span>&nbsp;<span class="ident" id="5283804">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283812">return</span>&nbsp;<span class="ident" id="5283819"><a href="/lonnie.io/e8vm/main.go.html#5283701">ret</a></span><span class="op" id="5283822">,</span>&nbsp;<span class="ident" id="5283824"><a href="/lonnie.io/e8vm/main.go.html#5283706">exp</a></span><br>
<span class="lineno"></span><span class="op" id="5283828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="5283831">func</span>&nbsp;<span class="ident" id="5283836">main</span><span class="op" id="5283840">(</span><span class="op" id="5283841">)</span>&nbsp;<span class="op" id="5283843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283846"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283850">.</span><span class="ident" id="5283851">Parse</span><span class="op" id="5283856">(</span><span class="op" id="5283857">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283861">args</span>&nbsp;<span class="op" id="5283866">:=</span>&nbsp;<span class="ident" id="5283869"><a href="/lonnie.io/e8vm/main.go.html#5283109">flag</a></span><span class="op" id="5283873">.</span><span class="ident" id="5283874">Args</span><span class="op" id="5283878">(</span><span class="op" id="5283879">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5283882">if</span>&nbsp;<span class="builtinfunc" id="5283885">len</span><span class="op" id="5283888">(</span><span class="ident" id="5283889"><a href="/lonnie.io/e8vm/main.go.html#5283861">args</a></span><span class="op" id="5283893">)</span>&nbsp;<span class="op" id="5283895">!=</span>&nbsp;<span class="num" id="5283898">1</span>&nbsp;<span class="op" id="5283900">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283904"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5283907">.</span><span class="ident" id="5283908">Fprintf</span><span class="op" id="5283915">(</span><span class="ident" id="5283916"><a href="/lonnie.io/e8vm/main.go.html#5283140">os</a></span><span class="op" id="5283918">.</span><span class="ident" id="5283919">Stderr</span><span class="op" id="5283925">,</span>&nbsp;<span class="string" id="5283927">&#34;need&nbsp;exactly&nbsp;one&nbsp;input&nbsp;file\n&#34;</span><span class="op" id="5283958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283962"><a href="/lonnie.io/e8vm/main.go.html#5283140">os</a></span><span class="op" id="5283964">.</span><span class="ident" id="5283965">Exit</span><span class="op" id="5283969">(</span><span class="op" id="5283970">-</span><span class="num" id="5283971">1</span><span class="op" id="5283972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5283975">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283979">fname</span>&nbsp;<span class="op" id="5283985">:=</span>&nbsp;<span class="ident" id="5283988"><a href="/lonnie.io/e8vm/main.go.html#5283861">args</a></span><span class="op" id="5283992">[</span><span class="num" id="5283993">0</span><span class="op" id="5283994">]</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5283997">f</span><span class="op" id="5283998">,</span>&nbsp;<span class="ident" id="5284000">e</span>&nbsp;<span class="op" id="5284002">:=</span>&nbsp;<span class="ident" id="5284005"><a href="/lonnie.io/e8vm/main.go.html#5283140">os</a></span><span class="op" id="5284007">.</span><span class="ident" id="5284008">Open</span><span class="op" id="5284012">(</span><span class="ident" id="5284013"><a href="/lonnie.io/e8vm/main.go.html#5283979">fname</a></span><span class="op" id="5284018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284021">if</span>&nbsp;<span class="ident" id="5284024"><a href="/lonnie.io/e8vm/main.go.html#5284000">e</a></span>&nbsp;<span class="op" id="5284026">!=</span>&nbsp;<span class="ident" id="5284029">nil</span>&nbsp;<span class="op" id="5284033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284037"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5284040">.</span><span class="ident" id="5284041">Fprintf</span><span class="op" id="5284048">(</span><span class="ident" id="5284049"><a href="/lonnie.io/e8vm/main.go.html#5283140">os</a></span><span class="op" id="5284051">.</span><span class="ident" id="5284052">Stderr</span><span class="op" id="5284058">,</span>&nbsp;<span class="string" id="5284060">&#34;open:&nbsp;%s&#34;</span><span class="op" id="5284070">,</span>&nbsp;<span class="ident" id="5284072"><a href="/lonnie.io/e8vm/main.go.html#5284000">e</a></span><span class="op" id="5284073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284077"><a href="/lonnie.io/e8vm/main.go.html#5283140">os</a></span><span class="op" id="5284079">.</span><span class="ident" id="5284080">Exit</span><span class="op" id="5284084">(</span><span class="op" id="5284085">-</span><span class="num" id="5284086">1</span><span class="op" id="5284087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284090">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284094">var</span>&nbsp;<span class="ident" id="5284098">bs</span>&nbsp;<span class="op" id="5284101">[</span><span class="op" id="5284102">]</span><span class="builtintype" id="5284103">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284109">var</span>&nbsp;<span class="ident" id="5284113">es</span>&nbsp;<span class="op" id="5284116">[</span><span class="op" id="5284117">]</span><span class="op" id="5284118">*</span><span class="ident" id="5284119"><a href="/lonnie.io/e8vm/main.go.html#5283229">lex8</a></span><span class="op" id="5284123">.</span><span class="ident" id="5284124">Error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284131">if</span>&nbsp;<span class="ident" id="5284134"><a href="/lonnie.io/e8vm/main.go.html#5283146">strings</a></span><span class="op" id="5284141">.</span><span class="ident" id="5284142">HasSuffix</span><span class="op" id="5284151">(</span><span class="ident" id="5284152"><a href="/lonnie.io/e8vm/main.go.html#5283979">fname</a></span><span class="op" id="5284157">,</span>&nbsp;<span class="string" id="5284159">&#34;_bare.s&#34;</span><span class="op" id="5284168">)</span>&nbsp;<span class="op" id="5284170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284174"><a href="/lonnie.io/e8vm/main.go.html#5284098">bs</a></span><span class="op" id="5284176">,</span>&nbsp;<span class="ident" id="5284178"><a href="/lonnie.io/e8vm/main.go.html#5284113">es</a></span>&nbsp;<span class="op" id="5284181">=</span>&nbsp;<span class="ident" id="5284183"><a href="/lonnie.io/e8vm/main.go.html#5283182">asm8</a></span><span class="op" id="5284187">.</span><span class="ident" id="5284188">BuildBareFunc</span><span class="op" id="5284201">(</span><span class="ident" id="5284202"><a href="/lonnie.io/e8vm/main.go.html#5283979">fname</a></span><span class="op" id="5284207">,</span>&nbsp;<span class="ident" id="5284209"><a href="/lonnie.io/e8vm/main.go.html#5283997">f</a></span><span class="op" id="5284210">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284213">}</span>&nbsp;<span class="keyword" id="5284215">else</span>&nbsp;<span class="op" id="5284220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284224"><a href="/lonnie.io/e8vm/main.go.html#5284098">bs</a></span><span class="op" id="5284226">,</span>&nbsp;<span class="ident" id="5284228"><a href="/lonnie.io/e8vm/main.go.html#5284113">es</a></span>&nbsp;<span class="op" id="5284231">=</span>&nbsp;<span class="ident" id="5284233"><a href="/lonnie.io/e8vm/main.go.html#5283182">asm8</a></span><span class="op" id="5284237">.</span><span class="ident" id="5284238">BuildSingleFile</span><span class="op" id="5284253">(</span><span class="ident" id="5284254"><a href="/lonnie.io/e8vm/main.go.html#5283979">fname</a></span><span class="op" id="5284259">,</span>&nbsp;<span class="ident" id="5284261"><a href="/lonnie.io/e8vm/main.go.html#5283997">f</a></span><span class="op" id="5284262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284269">if</span>&nbsp;<span class="builtinfunc" id="5284272">len</span><span class="op" id="5284275">(</span><span class="ident" id="5284276"><a href="/lonnie.io/e8vm/main.go.html#5284113">es</a></span><span class="op" id="5284278">)</span>&nbsp;<span class="op" id="5284280">&gt;</span>&nbsp;<span class="num" id="5284282">0</span>&nbsp;<span class="op" id="5284284">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284288">for</span>&nbsp;<span class="ident" id="5284292">_</span><span class="op" id="5284293">,</span>&nbsp;<span class="ident" id="5284295">e</span>&nbsp;<span class="op" id="5284297">:=</span>&nbsp;<span class="keyword" id="5284300">range</span>&nbsp;<span class="ident" id="5284306"><a href="/lonnie.io/e8vm/main.go.html#5284113">es</a></span>&nbsp;<span class="op" id="5284309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284314"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5284317">.</span><span class="ident" id="5284318">Println</span><span class="op" id="5284325">(</span><span class="ident" id="5284326"><a href="/lonnie.io/e8vm/main.go.html#5284295">e</a></span><span class="op" id="5284327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284331">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284334">}</span>&nbsp;<span class="keyword" id="5284336">else</span>&nbsp;<span class="op" id="5284341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284345">if</span>&nbsp;<span class="op" id="5284348">*</span><span class="ident" id="5284349"><a href="/lonnie.io/e8vm/main.go.html#5283261">doDasm</a></span>&nbsp;<span class="op" id="5284356">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284361">lines</span>&nbsp;<span class="op" id="5284367">:=</span>&nbsp;<span class="ident" id="5284370"><a href="/lonnie.io/e8vm/main.go.html#5283205">dasm8</a></span><span class="op" id="5284375">.</span><span class="ident" id="5284376">Dasm</span><span class="op" id="5284380">(</span><span class="ident" id="5284381"><a href="/lonnie.io/e8vm/main.go.html#5284098">bs</a></span><span class="op" id="5284383">,</span>&nbsp;<span class="ident" id="5284385"><a href="/lonnie.io/e8vm/main.go.html#5283158">arch8</a></span><span class="op" id="5284390">.</span><span class="ident" id="5284391">InitPC</span><span class="op" id="5284397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284402">for</span>&nbsp;<span class="ident" id="5284406">_</span><span class="op" id="5284407">,</span>&nbsp;<span class="ident" id="5284409">line</span>&nbsp;<span class="op" id="5284414">:=</span>&nbsp;<span class="keyword" id="5284417">range</span>&nbsp;<span class="ident" id="5284423"><a href="/lonnie.io/e8vm/main.go.html#5284361">lines</a></span>&nbsp;<span class="op" id="5284429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284435"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5284438">.</span><span class="ident" id="5284439">Println</span><span class="op" id="5284446">(</span><span class="ident" id="5284447"><a href="/lonnie.io/e8vm/main.go.html#5284409">line</a></span><span class="op" id="5284451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284460">}</span>&nbsp;<span class="keyword" id="5284462">else</span>&nbsp;<span class="op" id="5284467">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284472">n</span><span class="op" id="5284473">,</span>&nbsp;<span class="ident" id="5284475">e</span>&nbsp;<span class="op" id="5284477">:=</span>&nbsp;<span class="ident" id="5284480"><a href="/lonnie.io/e8vm/main.go.html#5283498">run</a></span><span class="op" id="5284483">(</span><span class="ident" id="5284484"><a href="/lonnie.io/e8vm/main.go.html#5284098">bs</a></span><span class="op" id="5284486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284491"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5284494">.</span><span class="ident" id="5284495">Printf</span><span class="op" id="5284501">(</span><span class="string" id="5284502">&#34;(%d&nbsp;cycles)\n&#34;</span><span class="op" id="5284517">,</span>&nbsp;<span class="ident" id="5284519"><a href="/lonnie.io/e8vm/main.go.html#5284472">n</a></span><span class="op" id="5284520">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5284525">if</span>&nbsp;<span class="ident" id="5284528"><a href="/lonnie.io/e8vm/main.go.html#5284475">e</a></span>&nbsp;<span class="op" id="5284530">!=</span>&nbsp;<span class="ident" id="5284533">nil</span>&nbsp;<span class="op" id="5284537">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5284543"><a href="/lonnie.io/e8vm/main.go.html#5283117">fmt</a></span><span class="op" id="5284546">.</span><span class="ident" id="5284547">Println</span><span class="op" id="5284554">(</span><span class="ident" id="5284555"><a href="/lonnie.io/e8vm/main.go.html#5284475">e</a></span><span class="op" id="5284556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284561">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284565">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5284568">}</span><br>
<span class="lineno"></span><span class="op" id="5284570">}</span>
</div>
</body>
</html>
