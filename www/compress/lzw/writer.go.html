<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6332133">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6332188">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6332242">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6332293">package</span>&nbsp;<span class="ident" id="6332301">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6332306">import</span>&nbsp;<span class="op" id="6332313">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6332316">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6332325">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6332335">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6332342">&#34;io&#34;</span><br>
<span class="lineno"></span><span class="op" id="6332347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6332350">//&nbsp;A&nbsp;writer&nbsp;is&nbsp;a&nbsp;buffered,&nbsp;flushable&nbsp;writer.</span><br>
<span class="lineno">15</span><span class="keyword" id="6332395">type</span>&nbsp;<span class="ident" id="6332400">writer</span>&nbsp;<span class="keyword" id="6332407">interface</span>&nbsp;<span class="op" id="6332417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6332420"><a href="/compress/lzw/writer.go.html#6332342">io</a></span><span class="op" id="6332422">.</span><span class="ident" id="6332423">ByteWriter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6332435">Flush</span><span class="op" id="6332440">(</span><span class="op" id="6332441">)</span>&nbsp;<span class="builtintype" id="6332443">error</span><br>
<span class="lineno"></span><span class="op" id="6332449">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="6332452">//&nbsp;An&nbsp;errWriteCloser&nbsp;is&nbsp;an&nbsp;io.WriteCloser&nbsp;that&nbsp;always&nbsp;returns&nbsp;a&nbsp;given&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="6332529">type</span>&nbsp;<span class="ident" id="6332534">errWriteCloser</span>&nbsp;<span class="keyword" id="6332549">struct</span>&nbsp;<span class="op" id="6332556">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6332559">err</span>&nbsp;<span class="builtintype" id="6332563">error</span><br>
<span class="lineno"></span><span class="op" id="6332569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword" id="6332572">func</span>&nbsp;<span class="op" id="6332577">(</span><span class="ident" id="6332578">e</span>&nbsp;<span class="op" id="6332580">*</span><span class="ident" id="6332581"><a href="/compress/lzw/writer.go.html#6332534">errWriteCloser</a></span><span class="op" id="6332595">)</span>&nbsp;<span class="ident" id="6332597">Write</span><span class="op" id="6332602">(</span><span class="op" id="6332603">[</span><span class="op" id="6332604">]</span><span class="builtintype" id="6332605">byte</span><span class="op" id="6332609">)</span>&nbsp;<span class="op" id="6332611">(</span><span class="builtintype" id="6332612">int</span><span class="op" id="6332615">,</span>&nbsp;<span class="builtintype" id="6332617">error</span><span class="op" id="6332622">)</span>&nbsp;<span class="op" id="6332624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6332627">return</span>&nbsp;<span class="num" id="6332634">0</span><span class="op" id="6332635">,</span>&nbsp;<span class="ident" id="6332637"><a href="/compress/lzw/writer.go.html#6332578">e</a></span><span class="op" id="6332638">.</span><span class="ident" id="6332639">err</span><br>
<span class="lineno"></span><span class="op" id="6332643">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6332646">func</span>&nbsp;<span class="op" id="6332651">(</span><span class="ident" id="6332652">e</span>&nbsp;<span class="op" id="6332654">*</span><span class="ident" id="6332655"><a href="/compress/lzw/writer.go.html#6332534">errWriteCloser</a></span><span class="op" id="6332669">)</span>&nbsp;<span class="ident" id="6332671">Close</span><span class="op" id="6332676">(</span><span class="op" id="6332677">)</span>&nbsp;<span class="builtintype" id="6332679">error</span>&nbsp;<span class="op" id="6332685">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6332688">return</span>&nbsp;<span class="ident" id="6332695"><a href="/compress/lzw/writer.go.html#6332652">e</a></span><span class="op" id="6332696">.</span><span class="ident" id="6332697">err</span><br>
<span class="lineno"></span><span class="op" id="6332701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6332704">const</span>&nbsp;<span class="op" id="6332710">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6332713">//&nbsp;A&nbsp;code&nbsp;is&nbsp;a&nbsp;12&nbsp;bit&nbsp;value,&nbsp;stored&nbsp;as&nbsp;a&nbsp;uint32&nbsp;when&nbsp;encoding&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6332785">//&nbsp;type&nbsp;conversions&nbsp;when&nbsp;shifting&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6332826">maxCode</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6332838">=</span>&nbsp;<span class="num" id="6332840">1</span><span class="op" id="6332841">&lt;&lt;</span><span class="num" id="6332843">12</span>&nbsp;<span class="op" id="6332846">-</span>&nbsp;<span class="num" id="6332848">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6332851">invalidCode</span>&nbsp;<span class="op" id="6332863">=</span>&nbsp;<span class="num" id="6332865">1</span><span class="op" id="6332866">&lt;&lt;</span><span class="num" id="6332868">32</span>&nbsp;<span class="op" id="6332871">-</span>&nbsp;<span class="num" id="6332873">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6332876">//&nbsp;There&nbsp;are&nbsp;1&lt;&lt;12&nbsp;possible&nbsp;codes,&nbsp;which&nbsp;is&nbsp;an&nbsp;upper&nbsp;bound&nbsp;on&nbsp;the&nbsp;number&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6332953">//&nbsp;valid&nbsp;hash&nbsp;table&nbsp;entries&nbsp;at&nbsp;any&nbsp;given&nbsp;point&nbsp;in&nbsp;time.&nbsp;tableSize&nbsp;is&nbsp;4x&nbsp;that.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333032">tableSize</span>&nbsp;<span class="op" id="6333042">=</span>&nbsp;<span class="num" id="6333044">4</span>&nbsp;<span class="op" id="6333046">*</span>&nbsp;<span class="num" id="6333048">1</span>&nbsp;<span class="op" id="6333050">&lt;&lt;</span>&nbsp;<span class="num" id="6333053">12</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333057">tableMask</span>&nbsp;<span class="op" id="6333067">=</span>&nbsp;<span class="ident" id="6333069"><a href="/compress/lzw/writer.go.html#6333032">tableSize</a></span>&nbsp;<span class="op" id="6333079">-</span>&nbsp;<span class="num" id="6333081">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333084">//&nbsp;A&nbsp;hash&nbsp;table&nbsp;entry&nbsp;is&nbsp;a&nbsp;uint32.&nbsp;Zero&nbsp;is&nbsp;an&nbsp;invalid&nbsp;entry&nbsp;since&nbsp;the</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333155">//&nbsp;lower&nbsp;12&nbsp;bits&nbsp;of&nbsp;a&nbsp;valid&nbsp;entry&nbsp;must&nbsp;be&nbsp;a&nbsp;non-literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333218">invalidEntry</span>&nbsp;<span class="op" id="6333231">=</span>&nbsp;<span class="num" id="6333233">0</span><br>
<span class="lineno">45</span><span class="op" id="6333235">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6333238">//&nbsp;encoder&nbsp;is&nbsp;LZW&nbsp;compressor.</span><br>
<span class="lineno"></span><span class="keyword" id="6333268">type</span>&nbsp;<span class="ident" id="6333273">encoder</span>&nbsp;<span class="keyword" id="6333281">struct</span>&nbsp;<span class="op" id="6333288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333291">//&nbsp;w&nbsp;is&nbsp;the&nbsp;writer&nbsp;that&nbsp;compressed&nbsp;bytes&nbsp;are&nbsp;written&nbsp;to.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333349">w</span>&nbsp;<span class="ident" id="6333351"><a href="/compress/lzw/writer.go.html#6332400">writer</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333359">//&nbsp;order,&nbsp;write,&nbsp;bits,&nbsp;nBits&nbsp;and&nbsp;width&nbsp;are&nbsp;the&nbsp;state&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333417">//&nbsp;converting&nbsp;a&nbsp;code&nbsp;stream&nbsp;into&nbsp;a&nbsp;byte&nbsp;stream.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333466">order</span>&nbsp;<span class="ident" id="6333472"><a href="/compress/lzw/reader.go.html#6326022">Order</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333479">write</span>&nbsp;<span class="keyword" id="6333485">func</span><span class="op" id="6333489">(</span><span class="op" id="6333490">*</span><span class="ident" id="6333491"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6333498">,</span>&nbsp;<span class="builtintype" id="6333500">uint32</span><span class="op" id="6333506">)</span>&nbsp;<span class="builtintype" id="6333508">error</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333515">bits</span>&nbsp;&nbsp;<span class="builtintype" id="6333521">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333529">nBits</span>&nbsp;<span class="builtintype" id="6333535">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333541">width</span>&nbsp;<span class="builtintype" id="6333547">uint</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333553">//&nbsp;litWidth&nbsp;is&nbsp;the&nbsp;width&nbsp;in&nbsp;bits&nbsp;of&nbsp;literal&nbsp;codes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333605">litWidth</span>&nbsp;<span class="builtintype" id="6333614">uint</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333620">//&nbsp;hi&nbsp;is&nbsp;the&nbsp;code&nbsp;implied&nbsp;by&nbsp;the&nbsp;next&nbsp;code&nbsp;emission.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333674">//&nbsp;overflow&nbsp;is&nbsp;the&nbsp;code&nbsp;at&nbsp;which&nbsp;hi&nbsp;overflows&nbsp;the&nbsp;code&nbsp;width.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333737">hi</span><span class="op" id="6333739">,</span>&nbsp;<span class="ident" id="6333741">overflow</span>&nbsp;<span class="builtintype" id="6333750">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333758">//&nbsp;savedCode&nbsp;is&nbsp;the&nbsp;accumulated&nbsp;code&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;the&nbsp;most&nbsp;recent&nbsp;Write</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333832">//&nbsp;call.&nbsp;It&nbsp;is&nbsp;equal&nbsp;to&nbsp;invalidCode&nbsp;if&nbsp;there&nbsp;was&nbsp;no&nbsp;such&nbsp;call.</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6333896">savedCode</span>&nbsp;<span class="builtintype" id="6333906">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333914">//&nbsp;err&nbsp;is&nbsp;the&nbsp;first&nbsp;error&nbsp;encountered&nbsp;during&nbsp;writing.&nbsp;Closing&nbsp;the&nbsp;encoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6333989">//&nbsp;will&nbsp;make&nbsp;any&nbsp;future&nbsp;Write&nbsp;calls&nbsp;return&nbsp;errClosed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334043">err</span>&nbsp;<span class="builtintype" id="6334047">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6334054">//&nbsp;table&nbsp;is&nbsp;the&nbsp;hash&nbsp;table&nbsp;from&nbsp;20-bit&nbsp;keys&nbsp;to&nbsp;12-bit&nbsp;values.&nbsp;Each&nbsp;table</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6334128">//&nbsp;entry&nbsp;contains&nbsp;key&lt;&lt;12|val&nbsp;and&nbsp;collisions&nbsp;resolve&nbsp;by&nbsp;linear&nbsp;probing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6334201">//&nbsp;The&nbsp;keys&nbsp;consist&nbsp;of&nbsp;a&nbsp;12-bit&nbsp;code&nbsp;prefix&nbsp;and&nbsp;an&nbsp;8-bit&nbsp;byte&nbsp;suffix.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6334272">//&nbsp;The&nbsp;values&nbsp;are&nbsp;a&nbsp;12-bit&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334306">table</span>&nbsp;<span class="op" id="6334312">[</span><span class="ident" id="6334313"><a href="/compress/lzw/writer.go.html#6333032">tableSize</a></span><span class="op" id="6334322">]</span><span class="builtintype" id="6334323">uint32</span><br>
<span class="lineno"></span><span class="op" id="6334330">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="comment" id="6334333">//&nbsp;writeLSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Least&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="6334404">func</span>&nbsp;<span class="op" id="6334409">(</span><span class="ident" id="6334410">e</span>&nbsp;<span class="op" id="6334412">*</span><span class="ident" id="6334413"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6334420">)</span>&nbsp;<span class="ident" id="6334422">writeLSB</span><span class="op" id="6334430">(</span><span class="ident" id="6334431">c</span>&nbsp;<span class="builtintype" id="6334433">uint32</span><span class="op" id="6334439">)</span>&nbsp;<span class="builtintype" id="6334441">error</span>&nbsp;<span class="op" id="6334447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334450"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334451">.</span><span class="ident" id="6334452">bits</span>&nbsp;<span class="op" id="6334457">|=</span>&nbsp;<span class="ident" id="6334460"><a href="/compress/lzw/writer.go.html#6334431">c</a></span>&nbsp;<span class="op" id="6334462">&lt;&lt;</span>&nbsp;<span class="ident" id="6334465"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334466">.</span><span class="ident" id="6334467">nBits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334474"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334475">.</span><span class="ident" id="6334476">nBits</span>&nbsp;<span class="op" id="6334482">+=</span>&nbsp;<span class="ident" id="6334485"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334486">.</span><span class="ident" id="6334487">width</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334494">for</span>&nbsp;<span class="ident" id="6334498"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334499">.</span><span class="ident" id="6334500">nBits</span>&nbsp;<span class="op" id="6334506">&gt;=</span>&nbsp;<span class="num" id="6334509">8</span>&nbsp;<span class="op" id="6334511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334515">if</span>&nbsp;<span class="ident" id="6334518">err</span>&nbsp;<span class="op" id="6334522">:=</span>&nbsp;<span class="ident" id="6334525"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334526">.</span><span class="ident" id="6334527">w</span><span class="op" id="6334528">.</span><span class="ident" id="6334529">WriteByte</span><span class="op" id="6334538">(</span><span class="builtintype" id="6334539">uint8</span><span class="op" id="6334544">(</span><span class="ident" id="6334545"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334546">.</span><span class="ident" id="6334547">bits</span><span class="op" id="6334551">)</span><span class="op" id="6334552">)</span><span class="op" id="6334553">;</span>&nbsp;<span class="ident" id="6334555"><a href="/compress/lzw/writer.go.html#6334518">err</a></span>&nbsp;<span class="op" id="6334559">!=</span>&nbsp;<span class="ident" id="6334562">nil</span>&nbsp;<span class="op" id="6334566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334571">return</span>&nbsp;<span class="ident" id="6334578"><a href="/compress/lzw/writer.go.html#6334518">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6334584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334588"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334589">.</span><span class="ident" id="6334590">bits</span>&nbsp;<span class="op" id="6334595">&gt;&gt;=</span>&nbsp;<span class="num" id="6334599">8</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334603"><a href="/compress/lzw/writer.go.html#6334410">e</a></span><span class="op" id="6334604">.</span><span class="ident" id="6334605">nBits</span>&nbsp;<span class="op" id="6334611">-=</span>&nbsp;<span class="num" id="6334614">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6334617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334620">return</span>&nbsp;<span class="ident" id="6334627">nil</span><br>
<span class="lineno"></span><span class="op" id="6334631">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="comment" id="6334634">//&nbsp;writeMSB&nbsp;writes&nbsp;the&nbsp;code&nbsp;c&nbsp;for&nbsp;&#34;Most&nbsp;Significant&nbsp;Bits&nbsp;first&#34;&nbsp;data.</span><br>
<span class="lineno"></span><span class="keyword" id="6334704">func</span>&nbsp;<span class="op" id="6334709">(</span><span class="ident" id="6334710">e</span>&nbsp;<span class="op" id="6334712">*</span><span class="ident" id="6334713"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6334720">)</span>&nbsp;<span class="ident" id="6334722">writeMSB</span><span class="op" id="6334730">(</span><span class="ident" id="6334731">c</span>&nbsp;<span class="builtintype" id="6334733">uint32</span><span class="op" id="6334739">)</span>&nbsp;<span class="builtintype" id="6334741">error</span>&nbsp;<span class="op" id="6334747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334750"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334751">.</span><span class="ident" id="6334752">bits</span>&nbsp;<span class="op" id="6334757">|=</span>&nbsp;<span class="ident" id="6334760"><a href="/compress/lzw/writer.go.html#6334731">c</a></span>&nbsp;<span class="op" id="6334762">&lt;&lt;</span>&nbsp;<span class="op" id="6334765">(</span><span class="num" id="6334766">32</span>&nbsp;<span class="op" id="6334769">-</span>&nbsp;<span class="ident" id="6334771"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334772">.</span><span class="ident" id="6334773">width</span>&nbsp;<span class="op" id="6334779">-</span>&nbsp;<span class="ident" id="6334781"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334782">.</span><span class="ident" id="6334783">nBits</span><span class="op" id="6334788">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334791"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334792">.</span><span class="ident" id="6334793">nBits</span>&nbsp;<span class="op" id="6334799">+=</span>&nbsp;<span class="ident" id="6334802"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334803">.</span><span class="ident" id="6334804">width</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334811">for</span>&nbsp;<span class="ident" id="6334815"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334816">.</span><span class="ident" id="6334817">nBits</span>&nbsp;<span class="op" id="6334823">&gt;=</span>&nbsp;<span class="num" id="6334826">8</span>&nbsp;<span class="op" id="6334828">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334832">if</span>&nbsp;<span class="ident" id="6334835">err</span>&nbsp;<span class="op" id="6334839">:=</span>&nbsp;<span class="ident" id="6334842"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334843">.</span><span class="ident" id="6334844">w</span><span class="op" id="6334845">.</span><span class="ident" id="6334846">WriteByte</span><span class="op" id="6334855">(</span><span class="builtintype" id="6334856">uint8</span><span class="op" id="6334861">(</span><span class="ident" id="6334862"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334863">.</span><span class="ident" id="6334864">bits</span>&nbsp;<span class="op" id="6334869">&gt;&gt;</span>&nbsp;<span class="num" id="6334872">24</span><span class="op" id="6334874">)</span><span class="op" id="6334875">)</span><span class="op" id="6334876">;</span>&nbsp;<span class="ident" id="6334878"><a href="/compress/lzw/writer.go.html#6334835">err</a></span>&nbsp;<span class="op" id="6334882">!=</span>&nbsp;<span class="ident" id="6334885">nil</span>&nbsp;<span class="op" id="6334889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334894">return</span>&nbsp;<span class="ident" id="6334901"><a href="/compress/lzw/writer.go.html#6334835">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6334907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334911"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334912">.</span><span class="ident" id="6334913">bits</span>&nbsp;<span class="op" id="6334918">&lt;&lt;=</span>&nbsp;<span class="num" id="6334922">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6334926"><a href="/compress/lzw/writer.go.html#6334710">e</a></span><span class="op" id="6334927">.</span><span class="ident" id="6334928">nBits</span>&nbsp;<span class="op" id="6334934">-=</span>&nbsp;<span class="num" id="6334937">8</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6334940">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6334943">return</span>&nbsp;<span class="ident" id="6334950">nil</span><br>
<span class="lineno"></span><span class="op" id="6334954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6334957">//&nbsp;errOutOfCodes&nbsp;is&nbsp;an&nbsp;internal&nbsp;error&nbsp;that&nbsp;means&nbsp;that&nbsp;the&nbsp;encoder&nbsp;has&nbsp;run&nbsp;out</span><br>
<span class="lineno">105</span><span class="comment" id="6335035">//&nbsp;of&nbsp;unused&nbsp;codes&nbsp;and&nbsp;a&nbsp;clear&nbsp;code&nbsp;needs&nbsp;to&nbsp;be&nbsp;sent&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="6335094">var</span>&nbsp;<span class="ident" id="6335098">errOutOfCodes</span>&nbsp;<span class="op" id="6335112">=</span>&nbsp;<span class="ident" id="6335114"><a href="/compress/lzw/writer.go.html#6332325">errors</a></span><span class="op" id="6335120">.</span><span class="ident" id="6335121">New</span><span class="op" id="6335124">(</span><span class="string" id="6335125">&#34;lzw:&nbsp;out&nbsp;of&nbsp;codes&#34;</span><span class="op" id="6335144">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6335147">//&nbsp;incHi&nbsp;increments&nbsp;e.hi&nbsp;and&nbsp;checks&nbsp;for&nbsp;both&nbsp;overflow&nbsp;and&nbsp;running&nbsp;out&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6335220">//&nbsp;unused&nbsp;codes.&nbsp;In&nbsp;the&nbsp;latter&nbsp;case,&nbsp;incHi&nbsp;sends&nbsp;a&nbsp;clear&nbsp;code,&nbsp;resets&nbsp;the</span><br>
<span class="lineno">110</span><span class="comment" id="6335294">//&nbsp;encoder&nbsp;state&nbsp;and&nbsp;returns&nbsp;errOutOfCodes.</span><br>
<span class="lineno"></span><span class="keyword" id="6335338">func</span>&nbsp;<span class="op" id="6335343">(</span><span class="ident" id="6335344">e</span>&nbsp;<span class="op" id="6335346">*</span><span class="ident" id="6335347"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6335354">)</span>&nbsp;<span class="ident" id="6335356">incHi</span><span class="op" id="6335361">(</span><span class="op" id="6335362">)</span>&nbsp;<span class="builtintype" id="6335364">error</span>&nbsp;<span class="op" id="6335370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335373"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335374">.</span><span class="ident" id="6335375">hi</span><span class="op" id="6335377">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335381">if</span>&nbsp;<span class="ident" id="6335384"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335385">.</span><span class="ident" id="6335386">hi</span>&nbsp;<span class="op" id="6335389">==</span>&nbsp;<span class="ident" id="6335392"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335393">.</span><span class="ident" id="6335394">overflow</span>&nbsp;<span class="op" id="6335403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335407"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335408">.</span><span class="ident" id="6335409">width</span><span class="op" id="6335414">++</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335419"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335420">.</span><span class="ident" id="6335421">overflow</span>&nbsp;<span class="op" id="6335430">&lt;&lt;=</span>&nbsp;<span class="num" id="6335434">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335440">if</span>&nbsp;<span class="ident" id="6335443"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335444">.</span><span class="ident" id="6335445">hi</span>&nbsp;<span class="op" id="6335448">==</span>&nbsp;<span class="ident" id="6335451"><a href="/compress/lzw/writer.go.html#6332826">maxCode</a></span>&nbsp;<span class="op" id="6335459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335463">clear</span>&nbsp;<span class="op" id="6335469">:=</span>&nbsp;<span class="builtintype" id="6335472">uint32</span><span class="op" id="6335478">(</span><span class="num" id="6335479">1</span><span class="op" id="6335480">)</span>&nbsp;<span class="op" id="6335482">&lt;&lt;</span>&nbsp;<span class="ident" id="6335485"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335486">.</span><span class="ident" id="6335487">litWidth</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335498">if</span>&nbsp;<span class="ident" id="6335501">err</span>&nbsp;<span class="op" id="6335505">:=</span>&nbsp;<span class="ident" id="6335508"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335509">.</span><span class="ident" id="6335510">write</span><span class="op" id="6335515">(</span><span class="ident" id="6335516"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335517">,</span>&nbsp;<span class="ident" id="6335519"><a href="/compress/lzw/writer.go.html#6335463">clear</a></span><span class="op" id="6335524">)</span><span class="op" id="6335525">;</span>&nbsp;<span class="ident" id="6335527"><a href="/compress/lzw/writer.go.html#6335501">err</a></span>&nbsp;<span class="op" id="6335531">!=</span>&nbsp;<span class="ident" id="6335534">nil</span>&nbsp;<span class="op" id="6335538">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335543">return</span>&nbsp;<span class="ident" id="6335550"><a href="/compress/lzw/writer.go.html#6335501">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335556">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335560"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335561">.</span><span class="ident" id="6335562">width</span>&nbsp;<span class="op" id="6335568">=</span>&nbsp;<span class="builtintype" id="6335570">uint</span><span class="op" id="6335574">(</span><span class="ident" id="6335575"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335576">.</span><span class="ident" id="6335577">litWidth</span><span class="op" id="6335585">)</span>&nbsp;<span class="op" id="6335587">+</span>&nbsp;<span class="num" id="6335589">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335593"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335594">.</span><span class="ident" id="6335595">hi</span>&nbsp;<span class="op" id="6335598">=</span>&nbsp;<span class="ident" id="6335600"><a href="/compress/lzw/writer.go.html#6335463">clear</a></span>&nbsp;<span class="op" id="6335606">+</span>&nbsp;<span class="num" id="6335608">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335612"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335613">.</span><span class="ident" id="6335614">overflow</span>&nbsp;<span class="op" id="6335623">=</span>&nbsp;<span class="ident" id="6335625"><a href="/compress/lzw/writer.go.html#6335463">clear</a></span>&nbsp;<span class="op" id="6335631">&lt;&lt;</span>&nbsp;<span class="num" id="6335634">1</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335638">for</span>&nbsp;<span class="ident" id="6335642">i</span>&nbsp;<span class="op" id="6335644">:=</span>&nbsp;<span class="keyword" id="6335647">range</span>&nbsp;<span class="ident" id="6335653"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335654">.</span><span class="ident" id="6335655">table</span>&nbsp;<span class="op" id="6335661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335666"><a href="/compress/lzw/writer.go.html#6335344">e</a></span><span class="op" id="6335667">.</span><span class="ident" id="6335668">table</span><span class="op" id="6335673">[</span><span class="ident" id="6335674"><a href="/compress/lzw/writer.go.html#6335642">i</a></span><span class="op" id="6335675">]</span>&nbsp;<span class="op" id="6335677">=</span>&nbsp;<span class="ident" id="6335679"><a href="/compress/lzw/writer.go.html#6333218">invalidEntry</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335694">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335698">return</span>&nbsp;<span class="ident" id="6335705"><a href="/compress/lzw/writer.go.html#6335098">errOutOfCodes</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335720">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335723">return</span>&nbsp;<span class="ident" id="6335730">nil</span><br>
<span class="lineno"></span><span class="op" id="6335734">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6335737">//&nbsp;Write&nbsp;writes&nbsp;a&nbsp;compressed&nbsp;representation&nbsp;of&nbsp;p&nbsp;to&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="6335812">func</span>&nbsp;<span class="op" id="6335817">(</span><span class="ident" id="6335818">e</span>&nbsp;<span class="op" id="6335820">*</span><span class="ident" id="6335821"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6335828">)</span>&nbsp;<span class="ident" id="6335830">Write</span><span class="op" id="6335835">(</span><span class="ident" id="6335836">p</span>&nbsp;<span class="op" id="6335838">[</span><span class="op" id="6335839">]</span><span class="builtintype" id="6335840">byte</span><span class="op" id="6335844">)</span>&nbsp;<span class="op" id="6335846">(</span><span class="ident" id="6335847">n</span>&nbsp;<span class="builtintype" id="6335849">int</span><span class="op" id="6335852">,</span>&nbsp;<span class="ident" id="6335854">err</span>&nbsp;<span class="builtintype" id="6335858">error</span><span class="op" id="6335863">)</span>&nbsp;<span class="op" id="6335865">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335868">if</span>&nbsp;<span class="ident" id="6335871"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6335872">.</span><span class="ident" id="6335873">err</span>&nbsp;<span class="op" id="6335877">!=</span>&nbsp;<span class="ident" id="6335880">nil</span>&nbsp;<span class="op" id="6335884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335888">return</span>&nbsp;<span class="num" id="6335895">0</span><span class="op" id="6335896">,</span>&nbsp;<span class="ident" id="6335898"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6335899">.</span><span class="ident" id="6335900">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335908">if</span>&nbsp;<span class="builtinfunc" id="6335911">len</span><span class="op" id="6335914">(</span><span class="ident" id="6335915"><a href="/compress/lzw/writer.go.html#6335836">p</a></span><span class="op" id="6335916">)</span>&nbsp;<span class="op" id="6335918">==</span>&nbsp;<span class="num" id="6335921">0</span>&nbsp;<span class="op" id="6335923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6335927">return</span>&nbsp;<span class="num" id="6335934">0</span><span class="op" id="6335935">,</span>&nbsp;<span class="ident" id="6335937">nil</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6335942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335945"><a href="/compress/lzw/writer.go.html#6335847">n</a></span>&nbsp;<span class="op" id="6335947">=</span>&nbsp;<span class="builtinfunc" id="6335949">len</span><span class="op" id="6335952">(</span><span class="ident" id="6335953"><a href="/compress/lzw/writer.go.html#6335836">p</a></span><span class="op" id="6335954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335957">litMask</span>&nbsp;<span class="op" id="6335965">:=</span>&nbsp;<span class="builtintype" id="6335968">uint32</span><span class="op" id="6335974">(</span><span class="num" id="6335975">1</span><span class="op" id="6335976">&lt;&lt;</span><span class="ident" id="6335978"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6335979">.</span><span class="ident" id="6335980">litWidth</span>&nbsp;<span class="op" id="6335989">-</span>&nbsp;<span class="num" id="6335991">1</span><span class="op" id="6335992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6335995">code</span>&nbsp;<span class="op" id="6336000">:=</span>&nbsp;<span class="ident" id="6336003"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336004">.</span><span class="ident" id="6336005">savedCode</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336016">if</span>&nbsp;<span class="ident" id="6336019"><a href="/compress/lzw/writer.go.html#6335995">code</a></span>&nbsp;<span class="op" id="6336024">==</span>&nbsp;<span class="ident" id="6336027"><a href="/compress/lzw/writer.go.html#6332851">invalidCode</a></span>&nbsp;<span class="op" id="6336039">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336043">//&nbsp;The&nbsp;first&nbsp;code&nbsp;sent&nbsp;is&nbsp;always&nbsp;a&nbsp;literal&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336094"><a href="/compress/lzw/writer.go.html#6335995">code</a></span><span class="op" id="6336098">,</span>&nbsp;<span class="ident" id="6336100"><a href="/compress/lzw/writer.go.html#6335836">p</a></span>&nbsp;<span class="op" id="6336102">=</span>&nbsp;<span class="builtintype" id="6336104">uint32</span><span class="op" id="6336110">(</span><span class="ident" id="6336111"><a href="/compress/lzw/writer.go.html#6335836">p</a></span><span class="op" id="6336112">[</span><span class="num" id="6336113">0</span><span class="op" id="6336114">]</span><span class="op" id="6336115">)</span><span class="op" id="6336116">&amp;</span><span class="ident" id="6336117"><a href="/compress/lzw/writer.go.html#6335957">litMask</a></span><span class="op" id="6336124">,</span>&nbsp;<span class="ident" id="6336126"><a href="/compress/lzw/writer.go.html#6335836">p</a></span><span class="op" id="6336127">[</span><span class="num" id="6336128">1</span><span class="op" id="6336129">:</span><span class="op" id="6336130">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336133">}</span><br>
<span class="lineno"></span><span class="ident" id="6336135">loop</span><span class="op" id="6336139">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336142">for</span>&nbsp;<span class="ident" id="6336146">_</span><span class="op" id="6336147">,</span>&nbsp;<span class="ident" id="6336149">x</span>&nbsp;<span class="op" id="6336151">:=</span>&nbsp;<span class="keyword" id="6336154">range</span>&nbsp;<span class="ident" id="6336160"><a href="/compress/lzw/writer.go.html#6335836">p</a></span>&nbsp;<span class="op" id="6336162">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336166">literal</span>&nbsp;<span class="op" id="6336174">:=</span>&nbsp;<span class="builtintype" id="6336177">uint32</span><span class="op" id="6336183">(</span><span class="ident" id="6336184"><a href="/compress/lzw/writer.go.html#6336149">x</a></span><span class="op" id="6336185">)</span>&nbsp;<span class="op" id="6336187">&amp;</span>&nbsp;<span class="ident" id="6336189"><a href="/compress/lzw/writer.go.html#6335957">litMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336199">key</span>&nbsp;<span class="op" id="6336203">:=</span>&nbsp;<span class="ident" id="6336206"><a href="/compress/lzw/writer.go.html#6335995">code</a></span><span class="op" id="6336210">&lt;&lt;</span><span class="num" id="6336212">8</span>&nbsp;<span class="op" id="6336214">|</span>&nbsp;<span class="ident" id="6336216"><a href="/compress/lzw/writer.go.html#6336166">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336226">//&nbsp;If&nbsp;there&nbsp;is&nbsp;a&nbsp;hash&nbsp;table&nbsp;hit&nbsp;for&nbsp;this&nbsp;key&nbsp;then&nbsp;we&nbsp;continue&nbsp;the&nbsp;loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336299">//&nbsp;and&nbsp;do&nbsp;not&nbsp;emit&nbsp;a&nbsp;code&nbsp;yet.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336332">hash</span>&nbsp;<span class="op" id="6336337">:=</span>&nbsp;<span class="op" id="6336340">(</span><span class="ident" id="6336341"><a href="/compress/lzw/writer.go.html#6336199">key</a></span><span class="op" id="6336344">&gt;&gt;</span><span class="num" id="6336346">12</span>&nbsp;<span class="op" id="6336349">^</span>&nbsp;<span class="ident" id="6336351"><a href="/compress/lzw/writer.go.html#6336199">key</a></span><span class="op" id="6336354">)</span>&nbsp;<span class="op" id="6336356">&amp;</span>&nbsp;<span class="ident" id="6336358"><a href="/compress/lzw/writer.go.html#6333057">tableMask</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336370">for</span>&nbsp;<span class="ident" id="6336374">h</span><span class="op" id="6336375">,</span>&nbsp;<span class="ident" id="6336377">t</span>&nbsp;<span class="op" id="6336379">:=</span>&nbsp;<span class="ident" id="6336382"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span><span class="op" id="6336386">,</span>&nbsp;<span class="ident" id="6336388"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336389">.</span><span class="ident" id="6336390">table</span><span class="op" id="6336395">[</span><span class="ident" id="6336396"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span><span class="op" id="6336400">]</span><span class="op" id="6336401">;</span>&nbsp;<span class="ident" id="6336403"><a href="/compress/lzw/writer.go.html#6336377">t</a></span>&nbsp;<span class="op" id="6336405">!=</span>&nbsp;<span class="ident" id="6336408"><a href="/compress/lzw/writer.go.html#6333218">invalidEntry</a></span><span class="op" id="6336420">;</span>&nbsp;<span class="op" id="6336422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336427">if</span>&nbsp;<span class="ident" id="6336430"><a href="/compress/lzw/writer.go.html#6336199">key</a></span>&nbsp;<span class="op" id="6336434">==</span>&nbsp;<span class="ident" id="6336437"><a href="/compress/lzw/writer.go.html#6336377">t</a></span><span class="op" id="6336438">&gt;&gt;</span><span class="num" id="6336440">12</span>&nbsp;<span class="op" id="6336443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336449"><a href="/compress/lzw/writer.go.html#6335995">code</a></span>&nbsp;<span class="op" id="6336454">=</span>&nbsp;<span class="ident" id="6336456"><a href="/compress/lzw/writer.go.html#6336377">t</a></span>&nbsp;<span class="op" id="6336458">&amp;</span>&nbsp;<span class="ident" id="6336460"><a href="/compress/lzw/writer.go.html#6332826">maxCode</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336472">continue</span>&nbsp;<span class="ident" id="6336481">loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336489">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336494"><a href="/compress/lzw/writer.go.html#6336374">h</a></span>&nbsp;<span class="op" id="6336496">=</span>&nbsp;<span class="op" id="6336498">(</span><span class="ident" id="6336499"><a href="/compress/lzw/writer.go.html#6336374">h</a></span>&nbsp;<span class="op" id="6336501">+</span>&nbsp;<span class="num" id="6336503">1</span><span class="op" id="6336504">)</span>&nbsp;<span class="op" id="6336506">&amp;</span>&nbsp;<span class="ident" id="6336508"><a href="/compress/lzw/writer.go.html#6333057">tableMask</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336521"><a href="/compress/lzw/writer.go.html#6336377">t</a></span>&nbsp;<span class="op" id="6336523">=</span>&nbsp;<span class="ident" id="6336525"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336526">.</span><span class="ident" id="6336527">table</span><span class="op" id="6336532">[</span><span class="ident" id="6336533"><a href="/compress/lzw/writer.go.html#6336374">h</a></span><span class="op" id="6336534">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336538">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336542">//&nbsp;Otherwise,&nbsp;write&nbsp;the&nbsp;current&nbsp;code,&nbsp;and&nbsp;literal&nbsp;becomes&nbsp;the&nbsp;start&nbsp;of</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336615">//&nbsp;the&nbsp;next&nbsp;emitted&nbsp;code.</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336643">if</span>&nbsp;<span class="ident" id="6336646"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336647">.</span><span class="ident" id="6336648">err</span>&nbsp;<span class="op" id="6336652">=</span>&nbsp;<span class="ident" id="6336654"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336655">.</span><span class="ident" id="6336656">write</span><span class="op" id="6336661">(</span><span class="ident" id="6336662"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336663">,</span>&nbsp;<span class="ident" id="6336665"><a href="/compress/lzw/writer.go.html#6335995">code</a></span><span class="op" id="6336669">)</span><span class="op" id="6336670">;</span>&nbsp;<span class="ident" id="6336672"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336673">.</span><span class="ident" id="6336674">err</span>&nbsp;<span class="op" id="6336678">!=</span>&nbsp;<span class="ident" id="6336681">nil</span>&nbsp;<span class="op" id="6336685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336690">return</span>&nbsp;<span class="num" id="6336697">0</span><span class="op" id="6336698">,</span>&nbsp;<span class="ident" id="6336700"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336701">.</span><span class="ident" id="6336702">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336708">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336712"><a href="/compress/lzw/writer.go.html#6335995">code</a></span>&nbsp;<span class="op" id="6336717">=</span>&nbsp;<span class="ident" id="6336719"><a href="/compress/lzw/writer.go.html#6336166">literal</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336729">//&nbsp;Increment&nbsp;e.hi,&nbsp;the&nbsp;next&nbsp;implied&nbsp;code.&nbsp;If&nbsp;we&nbsp;run&nbsp;out&nbsp;of&nbsp;codes,&nbsp;reset</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6336803">//&nbsp;the&nbsp;encoder&nbsp;state&nbsp;(including&nbsp;clearing&nbsp;the&nbsp;hash&nbsp;table)&nbsp;and&nbsp;continue.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336876">if</span>&nbsp;<span class="ident" id="6336879">err1</span>&nbsp;<span class="op" id="6336884">:=</span>&nbsp;<span class="ident" id="6336887"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336888">.</span><span class="ident" id="6336889">incHi</span><span class="op" id="6336894">(</span><span class="op" id="6336895">)</span><span class="op" id="6336896">;</span>&nbsp;<span class="ident" id="6336898"><a href="/compress/lzw/writer.go.html#6336879">err1</a></span>&nbsp;<span class="op" id="6336903">!=</span>&nbsp;<span class="ident" id="6336906">nil</span>&nbsp;<span class="op" id="6336910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336915">if</span>&nbsp;<span class="ident" id="6336918"><a href="/compress/lzw/writer.go.html#6336879">err1</a></span>&nbsp;<span class="op" id="6336923">==</span>&nbsp;<span class="ident" id="6336926"><a href="/compress/lzw/writer.go.html#6335098">errOutOfCodes</a></span>&nbsp;<span class="op" id="6336940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336946">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336958">}</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6336963"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336964">.</span><span class="ident" id="6336965">err</span>&nbsp;<span class="op" id="6336969">=</span>&nbsp;<span class="ident" id="6336971"><a href="/compress/lzw/writer.go.html#6336879">err1</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6336979">return</span>&nbsp;<span class="num" id="6336986">0</span><span class="op" id="6336987">,</span>&nbsp;<span class="ident" id="6336989"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6336990">.</span><span class="ident" id="6336991">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6336997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6337001">//&nbsp;Otherwise,&nbsp;insert&nbsp;key&nbsp;-&gt;&nbsp;e.hi&nbsp;into&nbsp;the&nbsp;map&nbsp;that&nbsp;e.table&nbsp;represents.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337074">for</span>&nbsp;<span class="op" id="6337078">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337083">if</span>&nbsp;<span class="ident" id="6337086"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6337087">.</span><span class="ident" id="6337088">table</span><span class="op" id="6337093">[</span><span class="ident" id="6337094"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span><span class="op" id="6337098">]</span>&nbsp;<span class="op" id="6337100">==</span>&nbsp;<span class="ident" id="6337103"><a href="/compress/lzw/writer.go.html#6333218">invalidEntry</a></span>&nbsp;<span class="op" id="6337116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337122"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6337123">.</span><span class="ident" id="6337124">table</span><span class="op" id="6337129">[</span><span class="ident" id="6337130"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span><span class="op" id="6337134">]</span>&nbsp;<span class="op" id="6337136">=</span>&nbsp;<span class="op" id="6337138">(</span><span class="ident" id="6337139"><a href="/compress/lzw/writer.go.html#6336199">key</a></span>&nbsp;<span class="op" id="6337143">&lt;&lt;</span>&nbsp;<span class="num" id="6337146">12</span><span class="op" id="6337148">)</span>&nbsp;<span class="op" id="6337150">|</span>&nbsp;<span class="ident" id="6337152"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6337153">.</span><span class="ident" id="6337154">hi</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337161">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337175"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span>&nbsp;<span class="op" id="6337180">=</span>&nbsp;<span class="op" id="6337182">(</span><span class="ident" id="6337183"><a href="/compress/lzw/writer.go.html#6336332">hash</a></span>&nbsp;<span class="op" id="6337188">+</span>&nbsp;<span class="num" id="6337190">1</span><span class="op" id="6337191">)</span>&nbsp;<span class="op" id="6337193">&amp;</span>&nbsp;<span class="ident" id="6337195"><a href="/compress/lzw/writer.go.html#6333057">tableMask</a></span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337213"><a href="/compress/lzw/writer.go.html#6335818">e</a></span><span class="op" id="6337214">.</span><span class="ident" id="6337215">savedCode</span>&nbsp;<span class="op" id="6337225">=</span>&nbsp;<span class="ident" id="6337227"><a href="/compress/lzw/writer.go.html#6335995">code</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337233">return</span>&nbsp;<span class="ident" id="6337240"><a href="/compress/lzw/writer.go.html#6335847">n</a></span><span class="op" id="6337241">,</span>&nbsp;<span class="ident" id="6337243">nil</span><br>
<span class="lineno"></span><span class="op" id="6337247">}</span><br>
<span class="lineno">190</span><br>
<span class="lineno"></span><span class="comment" id="6337250">//&nbsp;Close&nbsp;closes&nbsp;the&nbsp;encoder,&nbsp;flushing&nbsp;any&nbsp;pending&nbsp;output.&nbsp;It&nbsp;does&nbsp;not&nbsp;close&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6337329">//&nbsp;flush&nbsp;e&#39;s&nbsp;underlying&nbsp;writer.</span><br>
<span class="lineno"></span><span class="keyword" id="6337361">func</span>&nbsp;<span class="op" id="6337366">(</span><span class="ident" id="6337367">e</span>&nbsp;<span class="op" id="6337369">*</span><span class="ident" id="6337370"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6337377">)</span>&nbsp;<span class="ident" id="6337379">Close</span><span class="op" id="6337384">(</span><span class="op" id="6337385">)</span>&nbsp;<span class="builtintype" id="6337387">error</span>&nbsp;<span class="op" id="6337393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337396">if</span>&nbsp;<span class="ident" id="6337399"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337400">.</span><span class="ident" id="6337401">err</span>&nbsp;<span class="op" id="6337405">!=</span>&nbsp;<span class="ident" id="6337408">nil</span>&nbsp;<span class="op" id="6337412">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337416">if</span>&nbsp;<span class="ident" id="6337419"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337420">.</span><span class="ident" id="6337421">err</span>&nbsp;<span class="op" id="6337425">==</span>&nbsp;<span class="ident" id="6337428"><a href="/compress/lzw/reader.go.html#6330877">errClosed</a></span>&nbsp;<span class="op" id="6337438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337443">return</span>&nbsp;<span class="ident" id="6337450">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337460">return</span>&nbsp;<span class="ident" id="6337467"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337468">.</span><span class="ident" id="6337469">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337474">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6337477">//&nbsp;Make&nbsp;any&nbsp;future&nbsp;calls&nbsp;to&nbsp;Write&nbsp;return&nbsp;errClosed.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337530"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337531">.</span><span class="ident" id="6337532">err</span>&nbsp;<span class="op" id="6337536">=</span>&nbsp;<span class="ident" id="6337538"><a href="/compress/lzw/reader.go.html#6330877">errClosed</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6337549">//&nbsp;Write&nbsp;the&nbsp;savedCode&nbsp;if&nbsp;valid.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337583">if</span>&nbsp;<span class="ident" id="6337586"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337587">.</span><span class="ident" id="6337588">savedCode</span>&nbsp;<span class="op" id="6337598">!=</span>&nbsp;<span class="ident" id="6337601"><a href="/compress/lzw/writer.go.html#6332851">invalidCode</a></span>&nbsp;<span class="op" id="6337613">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337617">if</span>&nbsp;<span class="ident" id="6337620">err</span>&nbsp;<span class="op" id="6337624">:=</span>&nbsp;<span class="ident" id="6337627"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337628">.</span><span class="ident" id="6337629">write</span><span class="op" id="6337634">(</span><span class="ident" id="6337635"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337636">,</span>&nbsp;<span class="ident" id="6337638"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337639">.</span><span class="ident" id="6337640">savedCode</span><span class="op" id="6337649">)</span><span class="op" id="6337650">;</span>&nbsp;<span class="ident" id="6337652"><a href="/compress/lzw/writer.go.html#6337620">err</a></span>&nbsp;<span class="op" id="6337656">!=</span>&nbsp;<span class="ident" id="6337659">nil</span>&nbsp;<span class="op" id="6337663">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337668">return</span>&nbsp;<span class="ident" id="6337675"><a href="/compress/lzw/writer.go.html#6337620">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337681">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337685">if</span>&nbsp;<span class="ident" id="6337688">err</span>&nbsp;<span class="op" id="6337692">:=</span>&nbsp;<span class="ident" id="6337695"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337696">.</span><span class="ident" id="6337697">incHi</span><span class="op" id="6337702">(</span><span class="op" id="6337703">)</span><span class="op" id="6337704">;</span>&nbsp;<span class="ident" id="6337706"><a href="/compress/lzw/writer.go.html#6337688">err</a></span>&nbsp;<span class="op" id="6337710">!=</span>&nbsp;<span class="ident" id="6337713">nil</span>&nbsp;<span class="op" id="6337717">&amp;&amp;</span>&nbsp;<span class="ident" id="6337720"><a href="/compress/lzw/writer.go.html#6337688">err</a></span>&nbsp;<span class="op" id="6337724">!=</span>&nbsp;<span class="ident" id="6337727"><a href="/compress/lzw/writer.go.html#6335098">errOutOfCodes</a></span>&nbsp;<span class="op" id="6337741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337746">return</span>&nbsp;<span class="ident" id="6337753"><a href="/compress/lzw/writer.go.html#6337688">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337759">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6337765">//&nbsp;Write&nbsp;the&nbsp;eof&nbsp;code.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337789">eof</span>&nbsp;<span class="op" id="6337793">:=</span>&nbsp;<span class="builtintype" id="6337796">uint32</span><span class="op" id="6337802">(</span><span class="num" id="6337803">1</span><span class="op" id="6337804">)</span><span class="op" id="6337805">&lt;&lt;</span><span class="ident" id="6337807"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337808">.</span><span class="ident" id="6337809">litWidth</span>&nbsp;<span class="op" id="6337818">+</span>&nbsp;<span class="num" id="6337820">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337823">if</span>&nbsp;<span class="ident" id="6337826">err</span>&nbsp;<span class="op" id="6337830">:=</span>&nbsp;<span class="ident" id="6337833"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337834">.</span><span class="ident" id="6337835">write</span><span class="op" id="6337840">(</span><span class="ident" id="6337841"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337842">,</span>&nbsp;<span class="ident" id="6337844"><a href="/compress/lzw/writer.go.html#6337789">eof</a></span><span class="op" id="6337847">)</span><span class="op" id="6337848">;</span>&nbsp;<span class="ident" id="6337850"><a href="/compress/lzw/writer.go.html#6337826">err</a></span>&nbsp;<span class="op" id="6337854">!=</span>&nbsp;<span class="ident" id="6337857">nil</span>&nbsp;<span class="op" id="6337861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337865">return</span>&nbsp;<span class="ident" id="6337872"><a href="/compress/lzw/writer.go.html#6337826">err</a></span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337877">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6337880">//&nbsp;Write&nbsp;the&nbsp;final&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337906">if</span>&nbsp;<span class="ident" id="6337909"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337910">.</span><span class="ident" id="6337911">nBits</span>&nbsp;<span class="op" id="6337917">&gt;</span>&nbsp;<span class="num" id="6337919">0</span>&nbsp;<span class="op" id="6337921">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337925">if</span>&nbsp;<span class="ident" id="6337928"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337929">.</span><span class="ident" id="6337930">order</span>&nbsp;<span class="op" id="6337936">==</span>&nbsp;<span class="ident" id="6337939"><a href="/compress/lzw/reader.go.html#6326225">MSB</a></span>&nbsp;<span class="op" id="6337943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6337948"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337949">.</span><span class="ident" id="6337950">bits</span>&nbsp;<span class="op" id="6337955">&gt;&gt;=</span>&nbsp;<span class="num" id="6337959">24</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6337964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6337968">if</span>&nbsp;<span class="ident" id="6337971">err</span>&nbsp;<span class="op" id="6337975">:=</span>&nbsp;<span class="ident" id="6337978"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337979">.</span><span class="ident" id="6337980">w</span><span class="op" id="6337981">.</span><span class="ident" id="6337982">WriteByte</span><span class="op" id="6337991">(</span><span class="builtintype" id="6337992">uint8</span><span class="op" id="6337997">(</span><span class="ident" id="6337998"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6337999">.</span><span class="ident" id="6338000">bits</span><span class="op" id="6338004">)</span><span class="op" id="6338005">)</span><span class="op" id="6338006">;</span>&nbsp;<span class="ident" id="6338008"><a href="/compress/lzw/writer.go.html#6337971">err</a></span>&nbsp;<span class="op" id="6338012">!=</span>&nbsp;<span class="ident" id="6338015">nil</span>&nbsp;<span class="op" id="6338019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338024">return</span>&nbsp;<span class="ident" id="6338031"><a href="/compress/lzw/writer.go.html#6337971">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6338037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6338040">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338043">return</span>&nbsp;<span class="ident" id="6338050"><a href="/compress/lzw/writer.go.html#6337367">e</a></span><span class="op" id="6338051">.</span><span class="ident" id="6338052">w</span><span class="op" id="6338053">.</span><span class="ident" id="6338054">Flush</span><span class="op" id="6338059">(</span><span class="op" id="6338060">)</span><br>
<span class="lineno"></span><span class="op" id="6338062">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6338065">//&nbsp;NewWriter&nbsp;creates&nbsp;a&nbsp;new&nbsp;io.WriteCloser.</span><br>
<span class="lineno"></span><span class="comment" id="6338108">//&nbsp;Writes&nbsp;to&nbsp;the&nbsp;returned&nbsp;io.WriteCloser&nbsp;are&nbsp;compressed&nbsp;and&nbsp;written&nbsp;to&nbsp;w.</span><br>
<span class="lineno">230</span><span class="comment" id="6338182">//&nbsp;It&nbsp;is&nbsp;the&nbsp;caller&#39;s&nbsp;responsibility&nbsp;to&nbsp;call&nbsp;Close&nbsp;on&nbsp;the&nbsp;WriteCloser&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="6338257">//&nbsp;finished&nbsp;writing.</span><br>
<span class="lineno"></span><span class="comment" id="6338278">//&nbsp;The&nbsp;number&nbsp;of&nbsp;bits&nbsp;to&nbsp;use&nbsp;for&nbsp;literal&nbsp;codes,&nbsp;litWidth,&nbsp;must&nbsp;be&nbsp;in&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6338351">//&nbsp;range&nbsp;[2,8]&nbsp;and&nbsp;is&nbsp;typically&nbsp;8.</span><br>
<span class="lineno"></span><span class="keyword" id="6338386">func</span>&nbsp;<span class="ident" id="6338391">NewWriter</span><span class="op" id="6338400">(</span><span class="ident" id="6338401">w</span>&nbsp;<span class="ident" id="6338403"><a href="/compress/lzw/writer.go.html#6332342">io</a></span><span class="op" id="6338405">.</span><span class="ident" id="6338406">Writer</span><span class="op" id="6338412">,</span>&nbsp;<span class="ident" id="6338414">order</span>&nbsp;<span class="ident" id="6338420"><a href="/compress/lzw/reader.go.html#6326022">Order</a></span><span class="op" id="6338425">,</span>&nbsp;<span class="ident" id="6338427">litWidth</span>&nbsp;<span class="builtintype" id="6338436">int</span><span class="op" id="6338439">)</span>&nbsp;<span class="ident" id="6338441"><a href="/compress/lzw/writer.go.html#6332342">io</a></span><span class="op" id="6338443">.</span><span class="ident" id="6338444">WriteCloser</span>&nbsp;<span class="op" id="6338456">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338459">var</span>&nbsp;<span class="ident" id="6338463">write</span>&nbsp;<span class="keyword" id="6338469">func</span><span class="op" id="6338473">(</span><span class="op" id="6338474">*</span><span class="ident" id="6338475"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6338482">,</span>&nbsp;<span class="builtintype" id="6338484">uint32</span><span class="op" id="6338490">)</span>&nbsp;<span class="builtintype" id="6338492">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338499">switch</span>&nbsp;<span class="ident" id="6338506"><a href="/compress/lzw/writer.go.html#6338414">order</a></span>&nbsp;<span class="op" id="6338512">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338515">case</span>&nbsp;<span class="ident" id="6338520"><a href="/compress/lzw/reader.go.html#6326118">LSB</a></span><span class="op" id="6338523">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338527"><a href="/compress/lzw/writer.go.html#6338463">write</a></span>&nbsp;<span class="op" id="6338533">=</span>&nbsp;<span class="op" id="6338535">(</span><span class="op" id="6338536">*</span><span class="ident" id="6338537"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6338544">)</span><span class="op" id="6338545">.</span><span class="ident" id="6338546">writeLSB</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338556">case</span>&nbsp;<span class="ident" id="6338561"><a href="/compress/lzw/reader.go.html#6326225">MSB</a></span><span class="op" id="6338564">:</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338568"><a href="/compress/lzw/writer.go.html#6338463">write</a></span>&nbsp;<span class="op" id="6338574">=</span>&nbsp;<span class="op" id="6338576">(</span><span class="op" id="6338577">*</span><span class="ident" id="6338578"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6338585">)</span><span class="op" id="6338586">.</span><span class="ident" id="6338587">writeMSB</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338597">default</span><span class="op" id="6338604">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338608">return</span>&nbsp;<span class="op" id="6338615">&amp;</span><span class="ident" id="6338616"><a href="/compress/lzw/writer.go.html#6332534">errWriteCloser</a></span><span class="op" id="6338630">{</span><span class="ident" id="6338631"><a href="/compress/lzw/writer.go.html#6332325">errors</a></span><span class="op" id="6338637">.</span><span class="ident" id="6338638">New</span><span class="op" id="6338641">(</span><span class="string" id="6338642">&#34;lzw:&nbsp;unknown&nbsp;order&#34;</span><span class="op" id="6338662">)</span><span class="op" id="6338663">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6338666">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338669">if</span>&nbsp;<span class="ident" id="6338672"><a href="/compress/lzw/writer.go.html#6338427">litWidth</a></span>&nbsp;<span class="op" id="6338681">&lt;</span>&nbsp;<span class="num" id="6338683">2</span>&nbsp;<span class="op" id="6338685">||</span>&nbsp;<span class="num" id="6338688">8</span>&nbsp;<span class="op" id="6338690">&lt;</span>&nbsp;<span class="ident" id="6338692"><a href="/compress/lzw/writer.go.html#6338427">litWidth</a></span>&nbsp;<span class="op" id="6338701">{</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338705">return</span>&nbsp;<span class="op" id="6338712">&amp;</span><span class="ident" id="6338713"><a href="/compress/lzw/writer.go.html#6332534">errWriteCloser</a></span><span class="op" id="6338727">{</span><span class="ident" id="6338728"><a href="/compress/lzw/writer.go.html#6332335">fmt</a></span><span class="op" id="6338731">.</span><span class="ident" id="6338732">Errorf</span><span class="op" id="6338738">(</span><span class="string" id="6338739">&#34;lzw:&nbsp;litWidth&nbsp;%d&nbsp;out&nbsp;of&nbsp;range&#34;</span><span class="op" id="6338770">,</span>&nbsp;<span class="ident" id="6338772"><a href="/compress/lzw/writer.go.html#6338427">litWidth</a></span><span class="op" id="6338780">)</span><span class="op" id="6338781">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6338784">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338787">bw</span><span class="op" id="6338789">,</span>&nbsp;<span class="ident" id="6338791">ok</span>&nbsp;<span class="op" id="6338794">:=</span>&nbsp;<span class="ident" id="6338797"><a href="/compress/lzw/writer.go.html#6338401">w</a></span><span class="op" id="6338798">.</span><span class="op" id="6338799">(</span><span class="ident" id="6338800"><a href="/compress/lzw/writer.go.html#6332400">writer</a></span><span class="op" id="6338806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338809">if</span>&nbsp;<span class="op" id="6338812">!</span><span class="ident" id="6338813"><a href="/compress/lzw/writer.go.html#6338791">ok</a></span>&nbsp;<span class="op" id="6338816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338820"><a href="/compress/lzw/writer.go.html#6338787">bw</a></span>&nbsp;<span class="op" id="6338823">=</span>&nbsp;<span class="ident" id="6338825"><a href="/compress/lzw/writer.go.html#6332316">bufio</a></span><span class="op" id="6338830">.</span><span class="ident" id="6338831">NewWriter</span><span class="op" id="6338840">(</span><span class="ident" id="6338841"><a href="/compress/lzw/writer.go.html#6338401">w</a></span><span class="op" id="6338842">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6338845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338848">lw</span>&nbsp;<span class="op" id="6338851">:=</span>&nbsp;<span class="builtintype" id="6338854">uint</span><span class="op" id="6338858">(</span><span class="ident" id="6338859"><a href="/compress/lzw/writer.go.html#6338427">litWidth</a></span><span class="op" id="6338867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6338870">return</span>&nbsp;<span class="op" id="6338877">&amp;</span><span class="ident" id="6338878"><a href="/compress/lzw/writer.go.html#6333273">encoder</a></span><span class="op" id="6338885">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338889">w</span><span class="op" id="6338890">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6338900"><a href="/compress/lzw/writer.go.html#6338787">bw</a></span><span class="op" id="6338902">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338906">order</span><span class="op" id="6338911">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6338917"><a href="/compress/lzw/writer.go.html#6338414">order</a></span><span class="op" id="6338922">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338926">write</span><span class="op" id="6338931">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6338937"><a href="/compress/lzw/writer.go.html#6338463">write</a></span><span class="op" id="6338942">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338946">width</span><span class="op" id="6338951">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6338957">1</span>&nbsp;<span class="op" id="6338959">+</span>&nbsp;<span class="ident" id="6338961"><a href="/compress/lzw/writer.go.html#6338848">lw</a></span><span class="op" id="6338963">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338967">litWidth</span><span class="op" id="6338975">:</span>&nbsp;&nbsp;<span class="ident" id="6338978"><a href="/compress/lzw/writer.go.html#6338848">lw</a></span><span class="op" id="6338980">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6338984">hi</span><span class="op" id="6338986">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="6338995">1</span><span class="op" id="6338996">&lt;&lt;</span><span class="ident" id="6338998"><a href="/compress/lzw/writer.go.html#6338848">lw</a></span>&nbsp;<span class="op" id="6339001">+</span>&nbsp;<span class="num" id="6339003">1</span><span class="op" id="6339004">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339008">overflow</span><span class="op" id="6339016">:</span>&nbsp;&nbsp;<span class="num" id="6339019">1</span>&nbsp;<span class="op" id="6339021">&lt;&lt;</span>&nbsp;<span class="op" id="6339024">(</span><span class="ident" id="6339025"><a href="/compress/lzw/writer.go.html#6338848">lw</a></span>&nbsp;<span class="op" id="6339028">+</span>&nbsp;<span class="num" id="6339030">1</span><span class="op" id="6339031">)</span><span class="op" id="6339032">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6339036">savedCode</span><span class="op" id="6339045">:</span>&nbsp;<span class="ident" id="6339047"><a href="/compress/lzw/writer.go.html#6332851">invalidCode</a></span><span class="op" id="6339058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6339061">}</span><br>
<span class="lineno"></span><span class="op" id="6339063">}</span>
</div>
</body>
</html>
