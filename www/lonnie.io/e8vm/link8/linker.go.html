<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5369879">package</span>&nbsp;<span class="ident" id="5369887">link8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5369894">//&nbsp;Linker&nbsp;provides&nbsp;the&nbsp;framework&nbsp;to&nbsp;link&nbsp;packages&nbsp;together.</span><br>
<span class="lineno"></span><span class="keyword" id="5369954">type</span>&nbsp;<span class="ident" id="5369959">Linker</span>&nbsp;<span class="keyword" id="5369966">struct</span>&nbsp;<span class="op" id="5369973">{</span><br>
<span class="lineno">5</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369976">pkgs</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5369985">[</span><span class="op" id="5369986">]</span><span class="op" id="5369987">*</span><span class="ident" id="5369988"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5369997">pkgIndex</span>&nbsp;<span class="keyword" id="5370006">map</span><span class="op" id="5370009">[</span><span class="builtintype" id="5370010">string</span><span class="op" id="5370016">]</span><span class="builtintype" id="5370017">int</span><br>
<span class="lineno"></span><span class="op" id="5370021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5370024">//&nbsp;NewLinker&nbsp;creates&nbsp;a&nbsp;new&nbsp;linker&nbsp;with&nbsp;no&nbsp;packages.</span><br>
<span class="lineno">10</span><span class="keyword" id="5370076">func</span>&nbsp;<span class="ident" id="5370081">NewLinker</span><span class="op" id="5370090">(</span><span class="op" id="5370091">)</span>&nbsp;<span class="op" id="5370093">*</span><span class="ident" id="5370094"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span>&nbsp;<span class="op" id="5370101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370104">ret</span>&nbsp;<span class="op" id="5370108">:=</span>&nbsp;<span class="builtinfunc" id="5370111">new</span><span class="op" id="5370114">(</span><span class="ident" id="5370115"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5370121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370124"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370104">ret</a></span><span class="op" id="5370127">.</span><span class="ident" id="5370128">pkgIndex</span>&nbsp;<span class="op" id="5370137">=</span>&nbsp;<span class="builtinfunc" id="5370139">make</span><span class="op" id="5370143">(</span><span class="keyword" id="5370144">map</span><span class="op" id="5370147">[</span><span class="builtintype" id="5370148">string</span><span class="op" id="5370154">]</span><span class="builtintype" id="5370155">int</span><span class="op" id="5370158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370161">return</span>&nbsp;<span class="ident" id="5370168"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370104">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5370172">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="5370175">//&nbsp;AddPkg&nbsp;adds&nbsp;a&nbsp;package&nbsp;into&nbsp;the&nbsp;linker.</span><br>
<span class="lineno"></span><span class="comment" id="5370217">//&nbsp;It&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;package&nbsp;and&nbsp;if&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5370275">//&nbsp;is&nbsp;new.</span><br>
<span class="lineno"></span><span class="keyword" id="5370286">func</span>&nbsp;<span class="op" id="5370291">(</span><span class="ident" id="5370292">lnk</span>&nbsp;<span class="op" id="5370296">*</span><span class="ident" id="5370297"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5370303">)</span>&nbsp;<span class="ident" id="5370305">AddPkg</span><span class="op" id="5370311">(</span><span class="ident" id="5370312">p</span>&nbsp;<span class="op" id="5370314">*</span><span class="ident" id="5370315"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span><span class="op" id="5370322">)</span>&nbsp;<span class="op" id="5370324">(</span><span class="ident" id="5370325">index</span>&nbsp;<span class="builtintype" id="5370331">int</span><span class="op" id="5370334">,</span>&nbsp;<span class="ident" id="5370336">isNew</span>&nbsp;<span class="builtintype" id="5370342">bool</span><span class="op" id="5370346">)</span>&nbsp;<span class="op" id="5370348">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370351">path</span>&nbsp;<span class="op" id="5370356">:=</span>&nbsp;<span class="ident" id="5370359"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370312">p</a></span><span class="op" id="5370360">.</span><span class="ident" id="5370361">path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370367"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370325">index</a></span><span class="op" id="5370372">,</span>&nbsp;<span class="ident" id="5370374">found</span>&nbsp;<span class="op" id="5370380">:=</span>&nbsp;<span class="ident" id="5370383"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370292">lnk</a></span><span class="op" id="5370386">.</span><span class="ident" id="5370387">pkgIndex</span><span class="op" id="5370395">[</span><span class="ident" id="5370396"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370351">path</a></span><span class="op" id="5370400">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370403">if</span>&nbsp;<span class="ident" id="5370406"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370374">found</a></span>&nbsp;<span class="op" id="5370412">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370416">return</span>&nbsp;<span class="ident" id="5370423"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370325">index</a></span><span class="op" id="5370428">,</span>&nbsp;<span class="ident" id="5370430">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370437">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370441"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370325">index</a></span>&nbsp;<span class="op" id="5370447">=</span>&nbsp;<span class="builtinfunc" id="5370449">len</span><span class="op" id="5370452">(</span><span class="ident" id="5370453"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370292">lnk</a></span><span class="op" id="5370456">.</span><span class="ident" id="5370457">pkgs</span><span class="op" id="5370461">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370464"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370292">lnk</a></span><span class="op" id="5370467">.</span><span class="ident" id="5370468">pkgs</span>&nbsp;<span class="op" id="5370473">=</span>&nbsp;<span class="builtinfunc" id="5370475">append</span><span class="op" id="5370481">(</span><span class="ident" id="5370482"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370292">lnk</a></span><span class="op" id="5370485">.</span><span class="ident" id="5370486">pkgs</span><span class="op" id="5370490">,</span>&nbsp;<span class="ident" id="5370492"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370312">p</a></span><span class="op" id="5370493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370496"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370292">lnk</a></span><span class="op" id="5370499">.</span><span class="ident" id="5370500">pkgIndex</span><span class="op" id="5370508">[</span><span class="ident" id="5370509"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370351">path</a></span><span class="op" id="5370513">]</span>&nbsp;<span class="op" id="5370515">=</span>&nbsp;<span class="ident" id="5370517"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370325">index</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370524">return</span>&nbsp;<span class="ident" id="5370531"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370325">index</a></span><span class="op" id="5370536">,</span>&nbsp;<span class="ident" id="5370538">true</span><br>
<span class="lineno">30</span><span class="op" id="5370543">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5370546">//&nbsp;AddPkgs&nbsp;adds&nbsp;the&nbsp;package&nbsp;and&nbsp;recursively&nbsp;adds&nbsp;the&nbsp;packages</span><br>
<span class="lineno"></span><span class="comment" id="5370608">//&nbsp;it&nbsp;requires.&nbsp;It&nbsp;returns&nbsp;the&nbsp;package&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5370654">func</span>&nbsp;<span class="op" id="5370659">(</span><span class="ident" id="5370660">lnk</span>&nbsp;<span class="op" id="5370664">*</span><span class="ident" id="5370665"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5370671">)</span>&nbsp;<span class="ident" id="5370673">AddPkgs</span><span class="op" id="5370680">(</span><span class="ident" id="5370681">p</span>&nbsp;<span class="op" id="5370683">*</span><span class="ident" id="5370684"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span><span class="op" id="5370691">)</span>&nbsp;<span class="builtintype" id="5370693">int</span>&nbsp;<span class="op" id="5370697">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370700">index</span><span class="op" id="5370705">,</span>&nbsp;<span class="ident" id="5370707">isNew</span>&nbsp;<span class="op" id="5370713">:=</span>&nbsp;<span class="ident" id="5370716"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370660">lnk</a></span><span class="op" id="5370719">.</span><span class="ident" id="5370720">AddPkg</span><span class="op" id="5370726">(</span><span class="ident" id="5370727"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370681">p</a></span><span class="op" id="5370728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370731">if</span>&nbsp;<span class="ident" id="5370734"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370707">isNew</a></span>&nbsp;<span class="op" id="5370740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370744">for</span>&nbsp;<span class="ident" id="5370748">_</span><span class="op" id="5370749">,</span>&nbsp;<span class="ident" id="5370751">req</span>&nbsp;<span class="op" id="5370755">:=</span>&nbsp;<span class="keyword" id="5370758">range</span>&nbsp;<span class="ident" id="5370764"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370681">p</a></span><span class="op" id="5370765">.</span><span class="ident" id="5370766">requires</span>&nbsp;<span class="op" id="5370775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370780"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370660">lnk</a></span><span class="op" id="5370783">.</span><span class="ident" id="5370784">AddPkgs</span><span class="op" id="5370791">(</span><span class="ident" id="5370792"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370751">req</a></span><span class="op" id="5370795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370799">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370806">return</span>&nbsp;<span class="ident" id="5370813"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370700">index</a></span><br>
<span class="lineno"></span><span class="op" id="5370819">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="comment" id="5370822">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;index&nbsp;of&nbsp;the&nbsp;particular&nbsp;package.</span><br>
<span class="lineno"></span><span class="keyword" id="5370879">func</span>&nbsp;<span class="op" id="5370884">(</span><span class="ident" id="5370885">lnk</span>&nbsp;<span class="op" id="5370889">*</span><span class="ident" id="5370890"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5370896">)</span>&nbsp;<span class="ident" id="5370898">PkgIndex</span><span class="op" id="5370906">(</span><span class="ident" id="5370907">path</span>&nbsp;<span class="builtintype" id="5370912">string</span><span class="op" id="5370918">)</span>&nbsp;<span class="builtintype" id="5370920">int</span>&nbsp;<span class="op" id="5370924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5370927">ret</span><span class="op" id="5370930">,</span>&nbsp;<span class="ident" id="5370932">found</span>&nbsp;<span class="op" id="5370938">:=</span>&nbsp;<span class="ident" id="5370941"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370885">lnk</a></span><span class="op" id="5370944">.</span><span class="ident" id="5370945">pkgIndex</span><span class="op" id="5370953">[</span><span class="ident" id="5370954"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370907">path</a></span><span class="op" id="5370958">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370961">if</span>&nbsp;<span class="op" id="5370964">!</span><span class="ident" id="5370965"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370932">found</a></span>&nbsp;<span class="op" id="5370971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5370975">panic</span><span class="op" id="5370980">(</span><span class="string" id="5370981">&#34;not&nbsp;found&#34;</span><span class="op" id="5370992">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5370995">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5370998">return</span>&nbsp;<span class="ident" id="5371005"><a href="/lonnie.io/e8vm/link8/linker.go.html#5370927">ret</a></span><br>
<span class="lineno"></span><span class="op" id="5371009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5371012">//&nbsp;Pkg&nbsp;returns&nbsp;the&nbsp;package&nbsp;of&nbsp;index&nbsp;i.</span><br>
<span class="lineno">55</span><span class="keyword" id="5371051">func</span>&nbsp;<span class="op" id="5371056">(</span><span class="ident" id="5371057">lnk</span>&nbsp;<span class="op" id="5371061">*</span><span class="ident" id="5371062"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5371068">)</span>&nbsp;<span class="ident" id="5371070">Pkg</span><span class="op" id="5371073">(</span><span class="ident" id="5371074">i</span>&nbsp;<span class="builtintype" id="5371076">int</span><span class="op" id="5371079">)</span>&nbsp;<span class="op" id="5371081">*</span><span class="ident" id="5371082"><a href="/lonnie.io/e8vm/link8/package.go.html#5371347">Package</a></span>&nbsp;<span class="op" id="5371090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371093">return</span>&nbsp;<span class="ident" id="5371100"><a href="/lonnie.io/e8vm/link8/linker.go.html#5371057">lnk</a></span><span class="op" id="5371103">.</span><span class="ident" id="5371104">pkgs</span><span class="op" id="5371108">[</span><span class="ident" id="5371109"><a href="/lonnie.io/e8vm/link8/linker.go.html#5371074">i</a></span><span class="op" id="5371110">]</span><br>
<span class="lineno"></span><span class="op" id="5371112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5371115">//&nbsp;Npkg&nbsp;retunrs&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;packages.</span><br>
<span class="lineno">60</span><span class="keyword" id="5371161">func</span>&nbsp;<span class="op" id="5371166">(</span><span class="ident" id="5371167">lnk</span>&nbsp;<span class="op" id="5371171">*</span><span class="ident" id="5371172"><a href="/lonnie.io/e8vm/link8/linker.go.html#5369959">Linker</a></span><span class="op" id="5371178">)</span>&nbsp;<span class="ident" id="5371180">Npkg</span><span class="op" id="5371184">(</span><span class="op" id="5371185">)</span>&nbsp;<span class="builtintype" id="5371187">int</span>&nbsp;<span class="op" id="5371191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5371194">return</span>&nbsp;<span class="builtinfunc" id="5371201">len</span><span class="op" id="5371204">(</span><span class="ident" id="5371205"><a href="/lonnie.io/e8vm/link8/linker.go.html#5371167">lnk</a></span><span class="op" id="5371208">.</span><span class="ident" id="5371209">pkgs</span><span class="op" id="5371213">)</span><br>
<span class="lineno"></span><span class="op" id="5371215">}</span>
</div>
</body>
</html>
