<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html" class="current">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1670657">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1670712">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1670766">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1670817">package</span>&nbsp;<span class="ident" id="1670825">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1670834">import</span>&nbsp;<span class="string" id="1670841">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1670851">func</span>&nbsp;<span class="ident" id="1670856">newsysmon</span><span class="op" id="1670865">(</span><span class="op" id="1670866">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1670869">func</span>&nbsp;<span class="ident" id="1670874">runtime_init</span><span class="op" id="1670886">(</span><span class="op" id="1670887">)</span><br>
<span class="lineno"></span><span class="keyword" id="1670889">func</span>&nbsp;<span class="ident" id="1670894">main_init</span><span class="op" id="1670903">(</span><span class="op" id="1670904">)</span><br>
<span class="lineno"></span><span class="keyword" id="1670906">func</span>&nbsp;<span class="ident" id="1670911">main_main</span><span class="op" id="1670920">(</span><span class="op" id="1670921">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="1670924">//&nbsp;The&nbsp;main&nbsp;goroutine.</span><br>
<span class="lineno"></span><span class="keyword" id="1670947">func</span>&nbsp;<span class="ident" id="1670952">main</span><span class="op" id="1670956">(</span><span class="op" id="1670957">)</span>&nbsp;<span class="op" id="1670959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1670962">g</span>&nbsp;<span class="op" id="1670964">:=</span>&nbsp;<span class="ident" id="1670967"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1670971">(</span><span class="op" id="1670972">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1670976">//&nbsp;Racectx&nbsp;of&nbsp;m0-&gt;g0&nbsp;is&nbsp;used&nbsp;only&nbsp;as&nbsp;the&nbsp;parent&nbsp;of&nbsp;the&nbsp;main&nbsp;goroutine.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671048">//&nbsp;It&nbsp;must&nbsp;not&nbsp;be&nbsp;used&nbsp;for&nbsp;anything&nbsp;else.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671091"><a href="/gostd/runtime/proc.go.html#1670962">g</a></span><span class="op" id="1671092">.</span><span class="ident" id="1671093"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1671094">.</span><span class="ident" id="1671095"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787822">g0</a></span><span class="op" id="1671097">.</span><span class="ident" id="1671098"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787754">racectx</a></span>&nbsp;<span class="op" id="1671106">=</span>&nbsp;<span class="num" id="1671108">0</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671112">//&nbsp;Max&nbsp;stack&nbsp;size&nbsp;is&nbsp;1&nbsp;GB&nbsp;on&nbsp;64-bit,&nbsp;250&nbsp;MB&nbsp;on&nbsp;32-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671168">//&nbsp;Using&nbsp;decimal&nbsp;instead&nbsp;of&nbsp;binary&nbsp;GB&nbsp;and&nbsp;MB&nbsp;because</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671222">//&nbsp;they&nbsp;look&nbsp;nicer&nbsp;in&nbsp;the&nbsp;stack&nbsp;overflow&nbsp;failure&nbsp;message.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671281">if</span>&nbsp;<span class="ident" id="1671284"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span>&nbsp;<span class="op" id="1671292">==</span>&nbsp;<span class="num" id="1671295">8</span>&nbsp;<span class="op" id="1671297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671301"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791491">maxstacksize</a></span>&nbsp;<span class="op" id="1671314">=</span>&nbsp;<span class="num" id="1671316">1000000000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671328">}</span>&nbsp;<span class="keyword" id="1671330">else</span>&nbsp;<span class="op" id="1671335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671339"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791491">maxstacksize</a></span>&nbsp;<span class="op" id="1671352">=</span>&nbsp;<span class="num" id="1671354">250000000</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671365">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671369"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1671372">(</span><span class="ident" id="1671373"><a href="/gostd/runtime/proc.go.html#1670856">newsysmon</a></span><span class="op" id="1671382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671386">//&nbsp;Lock&nbsp;the&nbsp;main&nbsp;goroutine&nbsp;onto&nbsp;this,&nbsp;the&nbsp;main&nbsp;OS&nbsp;thread,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671445">//&nbsp;during&nbsp;initialization.&nbsp;&nbsp;Most&nbsp;programs&nbsp;won&#39;t&nbsp;care,&nbsp;but&nbsp;a&nbsp;few</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671509">//&nbsp;do&nbsp;require&nbsp;certain&nbsp;calls&nbsp;to&nbsp;be&nbsp;made&nbsp;by&nbsp;the&nbsp;main&nbsp;thread.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671569">//&nbsp;Those&nbsp;can&nbsp;arrange&nbsp;for&nbsp;main.main&nbsp;to&nbsp;run&nbsp;in&nbsp;the&nbsp;main&nbsp;thread</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671631">//&nbsp;by&nbsp;calling&nbsp;runtime.LockOSThread&nbsp;during&nbsp;initialization</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671689">//&nbsp;to&nbsp;preserve&nbsp;the&nbsp;lock.</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671715"><a href="/gostd/runtime/stubs.go.html#1742831">lockOSThread</a></span><span class="op" id="1671727">(</span><span class="op" id="1671728">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671732">if</span>&nbsp;<span class="ident" id="1671735"><a href="/gostd/runtime/proc.go.html#1670962">g</a></span><span class="op" id="1671736">.</span><span class="ident" id="1671737"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span>&nbsp;<span class="op" id="1671739">!=</span>&nbsp;<span class="op" id="1671742">&amp;</span><span class="ident" id="1671743"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1803597">m0</a></span>&nbsp;<span class="op" id="1671746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671750"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1671757">(</span><span class="string" id="1671758">&#34;runtime.main&nbsp;not&nbsp;on&nbsp;m0&#34;</span><span class="op" id="1671782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671785">}</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671789"><a href="/gostd/runtime/proc.go.html#1670874">runtime_init</a></span><span class="op" id="1671801">(</span><span class="op" id="1671802">)</span>&nbsp;<span class="comment" id="1671804">//&nbsp;must&nbsp;be&nbsp;before&nbsp;defer</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1671830">//&nbsp;Defer&nbsp;unlock&nbsp;so&nbsp;that&nbsp;runtime.Goexit&nbsp;during&nbsp;init&nbsp;does&nbsp;the&nbsp;unlock&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671903">needUnlock</span>&nbsp;<span class="op" id="1671914">:=</span>&nbsp;<span class="builtintype" id="1671917">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671923">defer</span>&nbsp;<span class="keyword" id="1671929">func</span><span class="op" id="1671933">(</span><span class="op" id="1671934">)</span>&nbsp;<span class="op" id="1671936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1671940">if</span>&nbsp;<span class="ident" id="1671943"><a href="/gostd/runtime/proc.go.html#1671903">needUnlock</a></span>&nbsp;<span class="op" id="1671954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671959"><a href="/gostd/runtime/stubs.go.html#1742851">unlockOSThread</a></span><span class="op" id="1671973">(</span><span class="op" id="1671974">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1671981">}</span><span class="op" id="1671982">(</span><span class="op" id="1671983">)</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1671987"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793070">memstats</a></span><span class="op" id="1671995">.</span><span class="ident" id="1671996"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1792990">enablegc</a></span>&nbsp;<span class="op" id="1672005">=</span>&nbsp;<span class="builtintype" id="1672007">true</span>&nbsp;<span class="comment" id="1672012">//&nbsp;now&nbsp;that&nbsp;runtime&nbsp;is&nbsp;initialized,&nbsp;GC&nbsp;is&nbsp;okay</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672061"><a href="/gostd/runtime/proc.go.html#1670894">main_init</a></span><span class="op" id="1672070">(</span><span class="op" id="1672071">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672075"><a href="/gostd/runtime/proc.go.html#1671903">needUnlock</a></span>&nbsp;<span class="op" id="1672086">=</span>&nbsp;<span class="builtintype" id="1672088">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672095"><a href="/gostd/runtime/stubs.go.html#1742851">unlockOSThread</a></span><span class="op" id="1672109">(</span><span class="op" id="1672110">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672114"><a href="/gostd/runtime/proc.go.html#1670911">main_main</a></span><span class="op" id="1672123">(</span><span class="op" id="1672124">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672127">if</span>&nbsp;<span class="ident" id="1672130"><a href="/gostd/runtime/race0.go.html#1676514">raceenabled</a></span>&nbsp;<span class="op" id="1672142">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672146"><a href="/gostd/runtime/race0.go.html#1676904">racefini</a></span><span class="op" id="1672154">(</span><span class="op" id="1672155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1672162">//&nbsp;Make&nbsp;racy&nbsp;client&nbsp;program&nbsp;work:&nbsp;if&nbsp;panicking&nbsp;on</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1672213">//&nbsp;another&nbsp;goroutine&nbsp;at&nbsp;the&nbsp;same&nbsp;time&nbsp;as&nbsp;main&nbsp;returns,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1672269">//&nbsp;let&nbsp;the&nbsp;other&nbsp;goroutine&nbsp;finish&nbsp;printing&nbsp;the&nbsp;panic&nbsp;trace.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1672330">//&nbsp;Once&nbsp;it&nbsp;does,&nbsp;it&nbsp;will&nbsp;exit.&nbsp;See&nbsp;issue&nbsp;3934.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672378">if</span>&nbsp;<span class="ident" id="1672381"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791314">panicking</a></span>&nbsp;<span class="op" id="1672391">!=</span>&nbsp;<span class="num" id="1672394">0</span>&nbsp;<span class="op" id="1672396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672400"><a href="/gostd/runtime/proc.go.html#1673271">gopark</a></span><span class="op" id="1672406">(</span><span class="builtintype" id="1672407">nil</span><span class="op" id="1672410">,</span>&nbsp;<span class="builtintype" id="1672412">nil</span><span class="op" id="1672415">,</span>&nbsp;<span class="string" id="1672417">&#34;panicwait&#34;</span><span class="op" id="1672428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672431">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672435"><a href="/gostd/runtime/stubs.go.html#1743896">exit</a></span><span class="op" id="1672439">(</span><span class="num" id="1672440">0</span><span class="op" id="1672441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672444">for</span>&nbsp;<span class="op" id="1672448">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672452">var</span>&nbsp;<span class="ident" id="1672456">x</span>&nbsp;<span class="op" id="1672458">*</span><span class="builtintype" id="1672459">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672467">*</span><span class="ident" id="1672468"><a href="/gostd/runtime/proc.go.html#1672456">x</a></span>&nbsp;<span class="op" id="1672470">=</span>&nbsp;<span class="num" id="1672472">0</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672475">}</span><br>
<span class="lineno"></span><span class="op" id="1672477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1672480">var</span>&nbsp;<span class="ident" id="1672484">parkunlock_c</span>&nbsp;<span class="builtintype" id="1672497">byte</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="comment" id="1672503">//&nbsp;start&nbsp;forcegc&nbsp;helper&nbsp;goroutine</span><br>
<span class="lineno"></span><span class="keyword" id="1672537">func</span>&nbsp;<span class="ident" id="1672542">init</span><span class="op" id="1672546">(</span><span class="op" id="1672547">)</span>&nbsp;<span class="op" id="1672549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672552">go</span>&nbsp;<span class="ident" id="1672555"><a href="/gostd/runtime/proc.go.html#1672579">forcegchelper</a></span><span class="op" id="1672568">(</span><span class="op" id="1672569">)</span><br>
<span class="lineno"></span><span class="op" id="1672571">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="1672574">func</span>&nbsp;<span class="ident" id="1672579">forcegchelper</span><span class="op" id="1672592">(</span><span class="op" id="1672593">)</span>&nbsp;<span class="op" id="1672595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672598"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672605">.</span><span class="ident" id="1672606"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790521">g</a></span>&nbsp;<span class="op" id="1672608">=</span>&nbsp;<span class="ident" id="1672610"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1672614">(</span><span class="op" id="1672615">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672618"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672625">.</span><span class="ident" id="1672626"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790521">g</a></span><span class="op" id="1672627">.</span><span class="ident" id="1672628"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787526">issystem</a></span>&nbsp;<span class="op" id="1672637">=</span>&nbsp;<span class="builtintype" id="1672639">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672645">for</span>&nbsp;<span class="op" id="1672649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672653"><a href="/gostd/runtime/lock_futex.go.html#1585337">lock</a></span><span class="op" id="1672657">(</span><span class="op" id="1672658">&amp;</span><span class="ident" id="1672659"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672666">.</span><span class="ident" id="1672667"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790509">lock</a></span><span class="op" id="1672671">)</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672675">if</span>&nbsp;<span class="ident" id="1672678"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672685">.</span><span class="ident" id="1672686"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790527">idle</a></span>&nbsp;<span class="op" id="1672691">!=</span>&nbsp;<span class="num" id="1672694">0</span>&nbsp;<span class="op" id="1672696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672701"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1672708">(</span><span class="string" id="1672709">&#34;forcegc:&nbsp;phase&nbsp;error&#34;</span><span class="op" id="1672731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672739"><a href="/gostd/runtime/atomic.go.html#1481615">atomicstore</a></span><span class="op" id="1672750">(</span><span class="op" id="1672751">&amp;</span><span class="ident" id="1672752"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672759">.</span><span class="ident" id="1672760"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790527">idle</a></span><span class="op" id="1672764">,</span>&nbsp;<span class="num" id="1672766">1</span><span class="op" id="1672767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672771"><a href="/gostd/runtime/proc.go.html#1673799">goparkunlock</a></span><span class="op" id="1672783">(</span><span class="op" id="1672784">&amp;</span><span class="ident" id="1672785"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791533">forcegc</a></span><span class="op" id="1672792">.</span><span class="ident" id="1672793"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790509">lock</a></span><span class="op" id="1672797">,</span>&nbsp;<span class="string" id="1672799">&#34;force&nbsp;gc&nbsp;(idle)&#34;</span><span class="op" id="1672816">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1672820">//&nbsp;this&nbsp;goroutine&nbsp;is&nbsp;explicitly&nbsp;resumed&nbsp;by&nbsp;sysmon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1672872">if</span>&nbsp;<span class="ident" id="1672875"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791471">debug</a></span><span class="op" id="1672880">.</span><span class="ident" id="1672881"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1790305">gctrace</a></span>&nbsp;<span class="op" id="1672889">&gt;</span>&nbsp;<span class="num" id="1672891">0</span>&nbsp;<span class="op" id="1672893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1672898">println</span><span class="op" id="1672905">(</span><span class="string" id="1672906">&#34;GC&nbsp;forced&#34;</span><span class="op" id="1672917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672921">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1672925"><a href="/gostd/runtime/malloc.go.html#1600340">gogc</a></span><span class="op" id="1672929">(</span><span class="num" id="1672930">1</span><span class="op" id="1672931">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1672934">}</span><br>
<span class="lineno"></span><span class="op" id="1672936">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1672939">//go:nosplit</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span><span class="comment" id="1672953">//&nbsp;Gosched&nbsp;yields&nbsp;the&nbsp;processor,&nbsp;allowing&nbsp;other&nbsp;goroutines&nbsp;to&nbsp;run.&nbsp;&nbsp;It&nbsp;does&nbsp;not</span><br>
<span class="lineno"></span><span class="comment" id="1673033">//&nbsp;suspend&nbsp;the&nbsp;current&nbsp;goroutine,&nbsp;so&nbsp;execution&nbsp;resumes&nbsp;automatically.</span><br>
<span class="lineno"></span><span class="keyword" id="1673103">func</span>&nbsp;<span class="ident" id="1673108">Gosched</span><span class="op" id="1673115">(</span><span class="op" id="1673116">)</span>&nbsp;<span class="op" id="1673118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673121"><a href="/gostd/runtime/stubs.go.html#1739644">mcall</a></span><span class="op" id="1673126">(</span><span class="ident" id="1673127"><a href="/gostd/runtime/stubs.go.html#1742021">gosched_m</a></span><span class="op" id="1673136">)</span><br>
<span class="lineno"></span><span class="op" id="1673138">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span><span class="comment" id="1673141">//&nbsp;Puts&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;into&nbsp;a&nbsp;waiting&nbsp;state&nbsp;and&nbsp;calls&nbsp;unlockf.</span><br>
<span class="lineno"></span><span class="comment" id="1673211">//&nbsp;If&nbsp;unlockf&nbsp;returns&nbsp;false,&nbsp;the&nbsp;goroutine&nbsp;is&nbsp;resumed.</span><br>
<span class="lineno"></span><span class="keyword" id="1673266">func</span>&nbsp;<span class="ident" id="1673271">gopark</span><span class="op" id="1673277">(</span><span class="ident" id="1673278">unlockf</span>&nbsp;<span class="ident" id="1673286"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1673292">.</span><span class="ident" id="1673293">Pointer</span><span class="op" id="1673300">,</span>&nbsp;<span class="ident" id="1673302">lock</span>&nbsp;<span class="ident" id="1673307"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1673313">.</span><span class="ident" id="1673314">Pointer</span><span class="op" id="1673321">,</span>&nbsp;<span class="ident" id="1673323">reason</span>&nbsp;<span class="builtintype" id="1673330">string</span><span class="op" id="1673336">)</span>&nbsp;<span class="op" id="1673338">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673341">mp</span>&nbsp;<span class="op" id="1673344">:=</span>&nbsp;<span class="ident" id="1673347"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1673355">(</span><span class="op" id="1673356">)</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673359">gp</span>&nbsp;<span class="op" id="1673362">:=</span>&nbsp;<span class="ident" id="1673365"><a href="/gostd/runtime/proc.go.html#1673341">mp</a></span><span class="op" id="1673367">.</span><span class="ident" id="1673368"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787912">curg</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673374">status</span>&nbsp;<span class="op" id="1673381">:=</span>&nbsp;<span class="ident" id="1673384"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1673395">(</span><span class="ident" id="1673396"><a href="/gostd/runtime/proc.go.html#1673359">gp</a></span><span class="op" id="1673398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1673401">if</span>&nbsp;<span class="ident" id="1673404"><a href="/gostd/runtime/proc.go.html#1673374">status</a></span>&nbsp;<span class="op" id="1673411">!=</span>&nbsp;<span class="ident" id="1673414"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785794">_Grunning</a></span>&nbsp;<span class="op" id="1673424">&amp;&amp;</span>&nbsp;<span class="ident" id="1673427"><a href="/gostd/runtime/proc.go.html#1673374">status</a></span>&nbsp;<span class="op" id="1673434">!=</span>&nbsp;<span class="ident" id="1673437"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785989">_Gscanrunning</a></span>&nbsp;<span class="op" id="1673451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673455"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1673462">(</span><span class="string" id="1673463">&#34;gopark:&nbsp;bad&nbsp;g&nbsp;status&#34;</span><span class="op" id="1673485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1673488">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673491"><a href="/gostd/runtime/proc.go.html#1673341">mp</a></span><span class="op" id="1673493">.</span><span class="ident" id="1673494"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788500">waitlock</a></span>&nbsp;<span class="op" id="1673503">=</span>&nbsp;<span class="ident" id="1673505"><a href="/gostd/runtime/proc.go.html#1673302">lock</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673511"><a href="/gostd/runtime/proc.go.html#1673341">mp</a></span><span class="op" id="1673513">.</span><span class="ident" id="1673514"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788472">waitunlockf</a></span>&nbsp;<span class="op" id="1673526">=</span>&nbsp;<span class="ident" id="1673528"><a href="/gostd/runtime/proc.go.html#1673278">unlockf</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673537"><a href="/gostd/runtime/proc.go.html#1673359">gp</a></span><span class="op" id="1673539">.</span><span class="ident" id="1673540"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787493">waitreason</a></span>&nbsp;<span class="op" id="1673551">=</span>&nbsp;<span class="ident" id="1673553"><a href="/gostd/runtime/proc.go.html#1673323">reason</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673561"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1673569">(</span><span class="ident" id="1673570"><a href="/gostd/runtime/proc.go.html#1673341">mp</a></span><span class="op" id="1673572">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1673575">//&nbsp;can&#39;t&nbsp;do&nbsp;anything&nbsp;that&nbsp;might&nbsp;move&nbsp;the&nbsp;G&nbsp;between&nbsp;Ms&nbsp;here.</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673636"><a href="/gostd/runtime/stubs.go.html#1739644">mcall</a></span><span class="op" id="1673641">(</span><span class="ident" id="1673642"><a href="/gostd/runtime/stubs.go.html#1742040">park_m</a></span><span class="op" id="1673648">)</span><br>
<span class="lineno"></span><span class="op" id="1673650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1673653">//&nbsp;Puts&nbsp;the&nbsp;current&nbsp;goroutine&nbsp;into&nbsp;a&nbsp;waiting&nbsp;state&nbsp;and&nbsp;unlocks&nbsp;the&nbsp;lock.</span><br>
<span class="lineno"></span><span class="comment" id="1673726">//&nbsp;The&nbsp;goroutine&nbsp;can&nbsp;be&nbsp;made&nbsp;runnable&nbsp;again&nbsp;by&nbsp;calling&nbsp;goready(gp).</span><br>
<span class="lineno">135</span><span class="keyword" id="1673794">func</span>&nbsp;<span class="ident" id="1673799">goparkunlock</span><span class="op" id="1673811">(</span><span class="ident" id="1673812">lock</span>&nbsp;<span class="op" id="1673817">*</span><span class="ident" id="1673818"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786208">mutex</a></span><span class="op" id="1673823">,</span>&nbsp;<span class="ident" id="1673825">reason</span>&nbsp;<span class="builtintype" id="1673832">string</span><span class="op" id="1673838">)</span>&nbsp;<span class="op" id="1673840">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673843"><a href="/gostd/runtime/proc.go.html#1673271">gopark</a></span><span class="op" id="1673849">(</span><span class="ident" id="1673850"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1673856">.</span><span class="ident" id="1673857">Pointer</span><span class="op" id="1673864">(</span><span class="op" id="1673865">&amp;</span><span class="ident" id="1673866"><a href="/gostd/runtime/proc.go.html#1672484">parkunlock_c</a></span><span class="op" id="1673878">)</span><span class="op" id="1673879">,</span>&nbsp;<span class="ident" id="1673881"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1673887">.</span><span class="ident" id="1673888">Pointer</span><span class="op" id="1673895">(</span><span class="ident" id="1673896"><a href="/gostd/runtime/proc.go.html#1673812">lock</a></span><span class="op" id="1673900">)</span><span class="op" id="1673901">,</span>&nbsp;<span class="ident" id="1673903"><a href="/gostd/runtime/proc.go.html#1673825">reason</a></span><span class="op" id="1673909">)</span><br>
<span class="lineno"></span><span class="op" id="1673911">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1673914">func</span>&nbsp;<span class="ident" id="1673919">goready</span><span class="op" id="1673926">(</span><span class="ident" id="1673927">gp</span>&nbsp;<span class="op" id="1673930">*</span><span class="ident" id="1673931"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1673932">)</span>&nbsp;<span class="op" id="1673934">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673937">mp</span>&nbsp;<span class="op" id="1673940">:=</span>&nbsp;<span class="ident" id="1673943"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1673951">(</span><span class="op" id="1673952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673955"><a href="/gostd/runtime/proc.go.html#1673937">mp</a></span><span class="op" id="1673957">.</span><span class="ident" id="1673958"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788547">ptrarg</a></span><span class="op" id="1673964">[</span><span class="num" id="1673965">0</span><span class="op" id="1673966">]</span>&nbsp;<span class="op" id="1673968">=</span>&nbsp;<span class="ident" id="1673970"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1673976">.</span><span class="ident" id="1673977">Pointer</span><span class="op" id="1673984">(</span><span class="ident" id="1673985"><a href="/gostd/runtime/proc.go.html#1673927">gp</a></span><span class="op" id="1673987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1673990"><a href="/gostd/runtime/stubs.go.html#1741035">onM</a></span><span class="op" id="1673993">(</span><span class="ident" id="1673994"><a href="/gostd/runtime/stubs.go.html#1742379">ready_m</a></span><span class="op" id="1674001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674004"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1674012">(</span><span class="ident" id="1674013"><a href="/gostd/runtime/proc.go.html#1673937">mp</a></span><span class="op" id="1674015">)</span><br>
<span class="lineno"></span><span class="op" id="1674017">}</span><br>
<span class="lineno">145</span><br>
<span class="lineno"></span><span class="comment" id="1674020">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1674033">func</span>&nbsp;<span class="ident" id="1674038">acquireSudog</span><span class="op" id="1674050">(</span><span class="op" id="1674051">)</span>&nbsp;<span class="op" id="1674053">*</span><span class="ident" id="1674054"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786749">sudog</a></span>&nbsp;<span class="op" id="1674060">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674063">c</span>&nbsp;<span class="op" id="1674065">:=</span>&nbsp;<span class="ident" id="1674068"><a href="/gostd/runtime/stubs.go.html#1738974">gomcache</a></span><span class="op" id="1674076">(</span><span class="op" id="1674077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674080">s</span>&nbsp;<span class="op" id="1674082">:=</span>&nbsp;<span class="ident" id="1674085"><a href="/gostd/runtime/proc.go.html#1674063">c</a></span><span class="op" id="1674086">.</span><span class="ident" id="1674087"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793491">sudogcache</a></span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674099">if</span>&nbsp;<span class="ident" id="1674102"><a href="/gostd/runtime/proc.go.html#1674080">s</a></span>&nbsp;<span class="op" id="1674104">!=</span>&nbsp;<span class="builtintype" id="1674107">nil</span>&nbsp;<span class="op" id="1674111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674115">if</span>&nbsp;<span class="ident" id="1674118"><a href="/gostd/runtime/proc.go.html#1674080">s</a></span><span class="op" id="1674119">.</span><span class="ident" id="1674120"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786817">elem</a></span>&nbsp;<span class="op" id="1674125">!=</span>&nbsp;<span class="builtintype" id="1674128">nil</span>&nbsp;<span class="op" id="1674132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674137"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1674144">(</span><span class="string" id="1674145">&#34;acquireSudog:&nbsp;found&nbsp;s.elem&nbsp;!=&nbsp;nil&nbsp;in&nbsp;cache&#34;</span><span class="op" id="1674189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1674193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674197"><a href="/gostd/runtime/proc.go.html#1674063">c</a></span><span class="op" id="1674198">.</span><span class="ident" id="1674199"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793491">sudogcache</a></span>&nbsp;<span class="op" id="1674210">=</span>&nbsp;<span class="ident" id="1674212"><a href="/gostd/runtime/proc.go.html#1674080">s</a></span><span class="op" id="1674213">.</span><span class="ident" id="1674214"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786791">next</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674221"><a href="/gostd/runtime/proc.go.html#1674080">s</a></span><span class="op" id="1674222">.</span><span class="ident" id="1674223"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786791">next</a></span>&nbsp;<span class="op" id="1674228">=</span>&nbsp;<span class="builtintype" id="1674230">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674236">return</span>&nbsp;<span class="ident" id="1674243"><a href="/gostd/runtime/proc.go.html#1674080">s</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1674246">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674250">//&nbsp;Delicate&nbsp;dance:&nbsp;the&nbsp;semaphore&nbsp;implementation&nbsp;calls</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674305">//&nbsp;acquireSudog,&nbsp;acquireSudog&nbsp;calls&nbsp;new(sudog),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674354">//&nbsp;new&nbsp;calls&nbsp;malloc,&nbsp;malloc&nbsp;can&nbsp;call&nbsp;the&nbsp;garbage&nbsp;collector,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674415">//&nbsp;and&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;calls&nbsp;the&nbsp;semaphore&nbsp;implementation</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674480">//&nbsp;in&nbsp;stoptheworld.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674501">//&nbsp;Break&nbsp;the&nbsp;cycle&nbsp;by&nbsp;doing&nbsp;acquirem/releasem&nbsp;around&nbsp;new(sudog).</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674567">//&nbsp;The&nbsp;acquirem/releasem&nbsp;increments&nbsp;m.locks&nbsp;during&nbsp;new(sudog),</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1674631">//&nbsp;which&nbsp;keeps&nbsp;the&nbsp;garbage&nbsp;collector&nbsp;from&nbsp;being&nbsp;invoked.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674689">mp</span>&nbsp;<span class="op" id="1674692">:=</span>&nbsp;<span class="ident" id="1674695"><a href="/gostd/runtime/stubs.go.html#1738934">acquirem</a></span><span class="op" id="1674703">(</span><span class="op" id="1674704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674707">p</span>&nbsp;<span class="op" id="1674709">:=</span>&nbsp;<span class="builtinfunc" id="1674712">new</span><span class="op" id="1674715">(</span><span class="ident" id="1674716"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786749">sudog</a></span><span class="op" id="1674721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674724"><a href="/gostd/runtime/stubs.go.html#1738953">releasem</a></span><span class="op" id="1674732">(</span><span class="ident" id="1674733"><a href="/gostd/runtime/proc.go.html#1674689">mp</a></span><span class="op" id="1674735">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674738">return</span>&nbsp;<span class="ident" id="1674745"><a href="/gostd/runtime/proc.go.html#1674707">p</a></span><br>
<span class="lineno"></span><span class="op" id="1674747">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1674750">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1674763">func</span>&nbsp;<span class="ident" id="1674768">releaseSudog</span><span class="op" id="1674780">(</span><span class="ident" id="1674781">s</span>&nbsp;<span class="op" id="1674783">*</span><span class="ident" id="1674784"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786749">sudog</a></span><span class="op" id="1674789">)</span>&nbsp;<span class="op" id="1674791">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674794">if</span>&nbsp;<span class="ident" id="1674797"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1674798">.</span><span class="ident" id="1674799"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786817">elem</a></span>&nbsp;<span class="op" id="1674804">!=</span>&nbsp;<span class="builtintype" id="1674807">nil</span>&nbsp;<span class="op" id="1674811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674815"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1674822">(</span><span class="string" id="1674823">&#34;runtime:&nbsp;sudog&nbsp;with&nbsp;non-nil&nbsp;elem&#34;</span><span class="op" id="1674857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1674860">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674863">if</span>&nbsp;<span class="ident" id="1674866"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1674867">.</span><span class="ident" id="1674868"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786771">selectdone</a></span>&nbsp;<span class="op" id="1674879">!=</span>&nbsp;<span class="builtintype" id="1674882">nil</span>&nbsp;<span class="op" id="1674886">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674890"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1674897">(</span><span class="string" id="1674898">&#34;runtime:&nbsp;sudog&nbsp;with&nbsp;non-nil&nbsp;selectdone&#34;</span><span class="op" id="1674938">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1674941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1674944">if</span>&nbsp;<span class="ident" id="1674947"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1674948">.</span><span class="ident" id="1674949"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786791">next</a></span>&nbsp;<span class="op" id="1674954">!=</span>&nbsp;<span class="builtintype" id="1674957">nil</span>&nbsp;<span class="op" id="1674961">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1674965"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1674972">(</span><span class="string" id="1674973">&#34;runtime:&nbsp;sudog&nbsp;with&nbsp;non-nil&nbsp;next&#34;</span><span class="op" id="1675007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1675010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675013">if</span>&nbsp;<span class="ident" id="1675016"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1675017">.</span><span class="ident" id="1675018"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786804">prev</a></span>&nbsp;<span class="op" id="1675023">!=</span>&nbsp;<span class="builtintype" id="1675026">nil</span>&nbsp;<span class="op" id="1675030">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675034"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1675041">(</span><span class="string" id="1675042">&#34;runtime:&nbsp;sudog&nbsp;with&nbsp;non-nil&nbsp;prev&#34;</span><span class="op" id="1675076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1675079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675082">if</span>&nbsp;<span class="ident" id="1675085"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1675086">.</span><span class="ident" id="1675087"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786873">waitlink</a></span>&nbsp;<span class="op" id="1675096">!=</span>&nbsp;<span class="builtintype" id="1675099">nil</span>&nbsp;<span class="op" id="1675103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675107"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1675114">(</span><span class="string" id="1675115">&#34;runtime:&nbsp;sudog&nbsp;with&nbsp;non-nil&nbsp;waitlink&#34;</span><span class="op" id="1675153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1675156">}</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675159">gp</span>&nbsp;<span class="op" id="1675162">:=</span>&nbsp;<span class="ident" id="1675165"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1675169">(</span><span class="op" id="1675170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675173">if</span>&nbsp;<span class="ident" id="1675176"><a href="/gostd/runtime/proc.go.html#1675159">gp</a></span><span class="op" id="1675178">.</span><span class="ident" id="1675179"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787421">param</a></span>&nbsp;<span class="op" id="1675185">!=</span>&nbsp;<span class="builtintype" id="1675188">nil</span>&nbsp;<span class="op" id="1675192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675196"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1675203">(</span><span class="string" id="1675204">&#34;runtime:&nbsp;releaseSudog&nbsp;with&nbsp;non-nil&nbsp;gp.param&#34;</span><span class="op" id="1675249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1675252">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675255">c</span>&nbsp;<span class="op" id="1675257">:=</span>&nbsp;<span class="ident" id="1675260"><a href="/gostd/runtime/stubs.go.html#1738974">gomcache</a></span><span class="op" id="1675268">(</span><span class="op" id="1675269">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675272"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><span class="op" id="1675273">.</span><span class="ident" id="1675274"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1786791">next</a></span>&nbsp;<span class="op" id="1675279">=</span>&nbsp;<span class="ident" id="1675281"><a href="/gostd/runtime/proc.go.html#1675255">c</a></span><span class="op" id="1675282">.</span><span class="ident" id="1675283"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793491">sudogcache</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675295"><a href="/gostd/runtime/proc.go.html#1675255">c</a></span><span class="op" id="1675296">.</span><span class="ident" id="1675297"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1793491">sudogcache</a></span>&nbsp;<span class="op" id="1675308">=</span>&nbsp;<span class="ident" id="1675310"><a href="/gostd/runtime/proc.go.html#1674781">s</a></span><br>
<span class="lineno"></span><span class="op" id="1675312">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1675315">//&nbsp;funcPC&nbsp;returns&nbsp;the&nbsp;entry&nbsp;PC&nbsp;of&nbsp;the&nbsp;function&nbsp;f.</span><br>
<span class="lineno">200</span><span class="comment" id="1675365">//&nbsp;It&nbsp;assumes&nbsp;that&nbsp;f&nbsp;is&nbsp;a&nbsp;func&nbsp;value.&nbsp;Otherwise&nbsp;the&nbsp;behavior&nbsp;is&nbsp;undefined.</span><br>
<span class="lineno"></span><span class="comment" id="1675440">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1675453">func</span>&nbsp;<span class="ident" id="1675458">funcPC</span><span class="op" id="1675464">(</span><span class="ident" id="1675465">f</span>&nbsp;<span class="keyword" id="1675467">interface</span><span class="op" id="1675476">{</span><span class="op" id="1675477">}</span><span class="op" id="1675478">)</span>&nbsp;<span class="builtintype" id="1675480">uintptr</span>&nbsp;<span class="op" id="1675488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675491">return</span>&nbsp;<span class="op" id="1675498">*</span><span class="op" id="1675499">*</span><span class="op" id="1675500">(</span><span class="op" id="1675501">*</span><span class="op" id="1675502">*</span><span class="builtintype" id="1675503">uintptr</span><span class="op" id="1675510">)</span><span class="op" id="1675511">(</span><span class="ident" id="1675512"><a href="/gostd/runtime/stubs.go.html#1738643">add</a></span><span class="op" id="1675515">(</span><span class="ident" id="1675516"><a href="/gostd/runtime/proc.go.html#1670841">unsafe</a></span><span class="op" id="1675522">.</span><span class="ident" id="1675523">Pointer</span><span class="op" id="1675530">(</span><span class="op" id="1675531">&amp;</span><span class="ident" id="1675532"><a href="/gostd/runtime/proc.go.html#1675465">f</a></span><span class="op" id="1675533">)</span><span class="op" id="1675534">,</span>&nbsp;<span class="ident" id="1675536"><a href="/gostd/runtime/stubs.go.html#1738408">ptrSize</a></span><span class="op" id="1675543">)</span><span class="op" id="1675544">)</span><br>
<span class="lineno"></span><span class="op" id="1675546">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="comment" id="1675549">//&nbsp;called&nbsp;from&nbsp;assembly</span><br>
<span class="lineno"></span><span class="keyword" id="1675573">func</span>&nbsp;<span class="ident" id="1675578">badmcall</span><span class="op" id="1675586">(</span><span class="ident" id="1675587">fn</span>&nbsp;<span class="keyword" id="1675590">func</span><span class="op" id="1675594">(</span><span class="op" id="1675595">*</span><span class="ident" id="1675596"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1675597">)</span><span class="op" id="1675598">)</span>&nbsp;<span class="op" id="1675600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675603"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1675610">(</span><span class="string" id="1675611">&#34;runtime:&nbsp;mcall&nbsp;called&nbsp;on&nbsp;m-&gt;g0&nbsp;stack&#34;</span><span class="op" id="1675649">)</span><br>
<span class="lineno"></span><span class="op" id="1675651">}</span><br>
<span class="lineno">210</span><br>
<span class="lineno"></span><span class="keyword" id="1675654">func</span>&nbsp;<span class="ident" id="1675659">badmcall2</span><span class="op" id="1675668">(</span><span class="ident" id="1675669">fn</span>&nbsp;<span class="keyword" id="1675672">func</span><span class="op" id="1675676">(</span><span class="op" id="1675677">*</span><span class="ident" id="1675678"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1675679">)</span><span class="op" id="1675680">)</span>&nbsp;<span class="op" id="1675682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675685"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1675692">(</span><span class="string" id="1675693">&#34;runtime:&nbsp;mcall&nbsp;function&nbsp;returned&#34;</span><span class="op" id="1675727">)</span><br>
<span class="lineno"></span><span class="op" id="1675729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">215</span><span class="keyword" id="1675732">func</span>&nbsp;<span class="ident" id="1675737">badreflectcall</span><span class="op" id="1675751">(</span><span class="op" id="1675752">)</span>&nbsp;<span class="op" id="1675754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1675757">panic</span><span class="op" id="1675762">(</span><span class="string" id="1675763">&#34;runtime:&nbsp;arg&nbsp;size&nbsp;to&nbsp;reflect.call&nbsp;more&nbsp;than&nbsp;1GB&#34;</span><span class="op" id="1675812">)</span><br>
<span class="lineno"></span><span class="op" id="1675814">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1675817">func</span>&nbsp;<span class="ident" id="1675822">lockedOSThread</span><span class="op" id="1675836">(</span><span class="op" id="1675837">)</span>&nbsp;<span class="builtintype" id="1675839">bool</span>&nbsp;<span class="op" id="1675844">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1675847">gp</span>&nbsp;<span class="op" id="1675850">:=</span>&nbsp;<span class="ident" id="1675853"><a href="/gostd/runtime/stubs.go.html#1738919">getg</a></span><span class="op" id="1675857">(</span><span class="op" id="1675858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675861">return</span>&nbsp;<span class="ident" id="1675868"><a href="/gostd/runtime/proc.go.html#1675847">gp</a></span><span class="op" id="1675870">.</span><span class="ident" id="1675871"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787649">lockedm</a></span>&nbsp;<span class="op" id="1675879">!=</span>&nbsp;<span class="builtintype" id="1675882">nil</span>&nbsp;<span class="op" id="1675886">&amp;&amp;</span>&nbsp;<span class="ident" id="1675889"><a href="/gostd/runtime/proc.go.html#1675847">gp</a></span><span class="op" id="1675891">.</span><span class="ident" id="1675892"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787643">m</a></span><span class="op" id="1675893">.</span><span class="ident" id="1675894"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788242">lockedg</a></span>&nbsp;<span class="op" id="1675902">!=</span>&nbsp;<span class="builtintype" id="1675905">nil</span><br>
<span class="lineno"></span><span class="op" id="1675909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1675912">func</span>&nbsp;<span class="ident" id="1675917">newP</span><span class="op" id="1675921">(</span><span class="op" id="1675922">)</span>&nbsp;<span class="op" id="1675924">*</span><span class="ident" id="1675925"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788596">p</a></span>&nbsp;<span class="op" id="1675927">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675930">return</span>&nbsp;<span class="builtinfunc" id="1675937">new</span><span class="op" id="1675940">(</span><span class="ident" id="1675941"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1788596">p</a></span><span class="op" id="1675942">)</span><br>
<span class="lineno"></span><span class="op" id="1675944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1675947">func</span>&nbsp;<span class="ident" id="1675952">newM</span><span class="op" id="1675956">(</span><span class="op" id="1675957">)</span>&nbsp;<span class="op" id="1675959">*</span><span class="ident" id="1675960"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787810">m</a></span>&nbsp;<span class="op" id="1675962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1675965">return</span>&nbsp;<span class="builtinfunc" id="1675972">new</span><span class="op" id="1675975">(</span><span class="ident" id="1675976"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787810">m</a></span><span class="op" id="1675977">)</span><br>
<span class="lineno">230</span><span class="op" id="1675979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1675982">func</span>&nbsp;<span class="ident" id="1675987">newG</span><span class="op" id="1675991">(</span><span class="op" id="1675992">)</span>&nbsp;<span class="op" id="1675994">*</span><span class="ident" id="1675995"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span>&nbsp;<span class="op" id="1675997">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1676000">return</span>&nbsp;<span class="builtinfunc" id="1676007">new</span><span class="op" id="1676010">(</span><span class="ident" id="1676011"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1676012">)</span><br>
<span class="lineno"></span><span class="op" id="1676014">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="keyword" id="1676017">func</span>&nbsp;<span class="ident" id="1676022">allgadd</span><span class="op" id="1676029">(</span><span class="ident" id="1676030">gp</span>&nbsp;<span class="op" id="1676033">*</span><span class="ident" id="1676034"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1787271">g</a></span><span class="op" id="1676035">)</span>&nbsp;<span class="op" id="1676037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1676040">if</span>&nbsp;<span class="ident" id="1676043"><a href="/gostd/runtime/stubs.go.html#1738998">readgstatus</a></span><span class="op" id="1676054">(</span><span class="ident" id="1676055"><a href="/gostd/runtime/proc.go.html#1676030">gp</a></span><span class="op" id="1676057">)</span>&nbsp;<span class="op" id="1676059">==</span>&nbsp;<span class="ident" id="1676062"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1785756">_Gidle</a></span>&nbsp;<span class="op" id="1676069">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676073"><a href="/gostd/runtime/panic.go.html#1664327">gothrow</a></span><span class="op" id="1676080">(</span><span class="string" id="1676081">&#34;allgadd:&nbsp;bad&nbsp;status&nbsp;Gidle&#34;</span><span class="op" id="1676108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1676111">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676115"><a href="/gostd/runtime/lock_futex.go.html#1585337">lock</a></span><span class="op" id="1676119">(</span><span class="op" id="1676120">&amp;</span><span class="ident" id="1676121"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1803629">allglock</a></span><span class="op" id="1676129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676132"><a href="/gostd/runtime/mprof.go.html#1633530">allgs</a></span>&nbsp;<span class="op" id="1676138">=</span>&nbsp;<span class="builtinfunc" id="1676140">append</span><span class="op" id="1676146">(</span><span class="ident" id="1676147"><a href="/gostd/runtime/mprof.go.html#1633530">allgs</a></span><span class="op" id="1676152">,</span>&nbsp;<span class="ident" id="1676154"><a href="/gostd/runtime/proc.go.html#1676030">gp</a></span><span class="op" id="1676156">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676159"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791196">allg</a></span>&nbsp;<span class="op" id="1676164">=</span>&nbsp;<span class="op" id="1676166">&amp;</span><span class="ident" id="1676167"><a href="/gostd/runtime/mprof.go.html#1633530">allgs</a></span><span class="op" id="1676172">[</span><span class="num" id="1676173">0</span><span class="op" id="1676174">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676177"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1791209">allglen</a></span>&nbsp;<span class="op" id="1676185">=</span>&nbsp;<span class="builtintype" id="1676187">uintptr</span><span class="op" id="1676194">(</span><span class="builtinfunc" id="1676195">len</span><span class="op" id="1676198">(</span><span class="ident" id="1676199"><a href="/gostd/runtime/mprof.go.html#1633530">allgs</a></span><span class="op" id="1676204">)</span><span class="op" id="1676205">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1676208"><a href="/gostd/runtime/lock_futex.go.html#1586629">unlock</a></span><span class="op" id="1676214">(</span><span class="op" id="1676215">&amp;</span><span class="ident" id="1676216"><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html#1803629">allglock</a></span><span class="op" id="1676224">)</span><br>
<span class="lineno"></span><span class="op" id="1676226">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
