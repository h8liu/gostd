<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword">package</span>&nbsp;<span class="ident">scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">import</span>&nbsp;<span class="op">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">fset</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">NewFileSet</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">const</span>&nbsp;<span class="comment">/*&nbsp;class&nbsp;*/</span>&nbsp;<span class="op">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">special</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">iota</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">literal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">operator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">keyword</span><br>
<span class="lineno"></span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span><span class="keyword">func</span>&nbsp;<span class="ident">tokenclass</span><span class="op">(</span><span class="ident">tok</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Token</span><span class="op">)</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">switch</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">tok</span><span class="op">.</span><span class="ident">IsLiteral</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">literal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">tok</span><span class="op">.</span><span class="ident">IsOperator</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">operator</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">tok</span><span class="op">.</span><span class="ident">IsKeyword</span><span class="op">(</span><span class="op">)</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">keyword</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">special</span><br>
<span class="lineno">35</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">elt</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tok</span>&nbsp;&nbsp;&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">lit</span>&nbsp;&nbsp;&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">class</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">tokens</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">...</span><span class="op">]</span><span class="ident">elt</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Special&nbsp;tokens</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;/*&nbsp;a&nbsp;comment&nbsp;*/&#34;</span><span class="op">,</span>&nbsp;<span class="ident">special</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;//&nbsp;a&nbsp;comment&nbsp;\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">special</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;/*\r*/&#34;</span><span class="op">,</span>&nbsp;<span class="ident">special</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;//\r\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">special</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Identifiers&nbsp;and&nbsp;basic&nbsp;type&nbsp;literals</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;foobar&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;a۰۱۸&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo६४&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;bar９８７６&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;ŝ&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;was&nbsp;bug&nbsp;(issue&nbsp;4000)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">,</span>&nbsp;<span class="string">&#34;ŝfoo&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;was&nbsp;bug&nbsp;(issue&nbsp;4000)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="string">&#34;0&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="string">&#34;1&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="string">&#34;123456789012345678890&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="string">&#34;01234567&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="string">&#34;0xcafebabe&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;0.&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;.0&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;3.14159265&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e0&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e+100&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e-100&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="string">&#34;2.71828e-1000&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;0i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;1i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;012345678901234567889i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;123456789012345678890i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;0.i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;.0i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;3.14159265i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e0i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e+100i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;1e-100i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMAG</span><span class="op">,</span>&nbsp;<span class="string">&#34;2.71828e-1000i&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;a&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;\\000&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;\\xFF&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;\\uff16&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;\\U0000ff16&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="string">&#34;`foobar`&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="string">&#34;`&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`foo<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar`</span>&nbsp;<span class="op">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;`&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">literal</span><span class="op">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="string">&#34;`\r`&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="string">&#34;`foo\r\nbar`&#34;</span><span class="op">,</span>&nbsp;<span class="ident">literal</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Operators&nbsp;and&nbsp;delimiters</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ADD</span><span class="op">,</span>&nbsp;<span class="string">&#34;+&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SUB</span><span class="op">,</span>&nbsp;<span class="string">&#34;-&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">MUL</span><span class="op">,</span>&nbsp;<span class="string">&#34;*&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">QUO</span><span class="op">,</span>&nbsp;<span class="string">&#34;/&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">REM</span><span class="op">,</span>&nbsp;<span class="string">&#34;%&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">100</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">AND</span><span class="op">,</span>&nbsp;<span class="string">&#34;&amp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">OR</span><span class="op">,</span>&nbsp;<span class="string">&#34;|&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">XOR</span><span class="op">,</span>&nbsp;<span class="string">&#34;^&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SHL</span><span class="op">,</span>&nbsp;<span class="string">&#34;&lt;&lt;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SHR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&gt;&gt;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">AND_NOT</span><span class="op">,</span>&nbsp;<span class="string">&#34;&amp;^&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ADD_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;+=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SUB_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;-=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">MUL_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;*=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">QUO_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;/=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">REM_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;%=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">AND_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;&amp;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">OR_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;|=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">XOR_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;^=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SHL_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;&lt;&lt;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SHR_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;&gt;&gt;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">AND_NOT_ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;&amp;^=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">120</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LAND</span><span class="op">,</span>&nbsp;<span class="string">&#34;&amp;&amp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LOR</span><span class="op">,</span>&nbsp;<span class="string">&#34;||&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ARROW</span><span class="op">,</span>&nbsp;<span class="string">&#34;&lt;-&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INC</span><span class="op">,</span>&nbsp;<span class="string">&#34;++&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">DEC</span><span class="op">,</span>&nbsp;<span class="string">&#34;--&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">EQL</span><span class="op">,</span>&nbsp;<span class="string">&#34;==&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LSS</span><span class="op">,</span>&nbsp;<span class="string">&#34;&lt;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">GTR</span><span class="op">,</span>&nbsp;<span class="string">&#34;&gt;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ASSIGN</span><span class="op">,</span>&nbsp;<span class="string">&#34;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">NOT</span><span class="op">,</span>&nbsp;<span class="string">&#34;!&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">NEQ</span><span class="op">,</span>&nbsp;<span class="string">&#34;!=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LEQ</span><span class="op">,</span>&nbsp;<span class="string">&#34;&lt;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">GEQ</span><span class="op">,</span>&nbsp;<span class="string">&#34;&gt;=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">DEFINE</span><span class="op">,</span>&nbsp;<span class="string">&#34;:=&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ELLIPSIS</span><span class="op">,</span>&nbsp;<span class="string">&#34;...&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LPAREN</span><span class="op">,</span>&nbsp;<span class="string">&#34;(&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LBRACK</span><span class="op">,</span>&nbsp;<span class="string">&#34;[&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">LBRACE</span><span class="op">,</span>&nbsp;<span class="string">&#34;{&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COMMA</span><span class="op">,</span>&nbsp;<span class="string">&#34;,&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">PERIOD</span><span class="op">,</span>&nbsp;<span class="string">&#34;.&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">RPAREN</span><span class="op">,</span>&nbsp;<span class="string">&#34;)&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">RBRACK</span><span class="op">,</span>&nbsp;<span class="string">&#34;]&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">RBRACE</span><span class="op">,</span>&nbsp;<span class="string">&#34;}&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SEMICOLON</span><span class="op">,</span>&nbsp;<span class="string">&#34;;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">COLON</span><span class="op">,</span>&nbsp;<span class="string">&#34;:&#34;</span><span class="op">,</span>&nbsp;<span class="ident">operator</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;Keywords</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">BREAK</span><span class="op">,</span>&nbsp;<span class="string">&#34;break&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CASE</span><span class="op">,</span>&nbsp;<span class="string">&#34;case&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CHAN</span><span class="op">,</span>&nbsp;<span class="string">&#34;chan&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CONST</span><span class="op">,</span>&nbsp;<span class="string">&#34;const&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">CONTINUE</span><span class="op">,</span>&nbsp;<span class="string">&#34;continue&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">DEFAULT</span><span class="op">,</span>&nbsp;<span class="string">&#34;default&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">DEFER</span><span class="op">,</span>&nbsp;<span class="string">&#34;defer&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">ELSE</span><span class="op">,</span>&nbsp;<span class="string">&#34;else&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FALLTHROUGH</span><span class="op">,</span>&nbsp;<span class="string">&#34;fallthrough&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FOR</span><span class="op">,</span>&nbsp;<span class="string">&#34;for&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">FUNC</span><span class="op">,</span>&nbsp;<span class="string">&#34;func&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">GO</span><span class="op">,</span>&nbsp;<span class="string">&#34;go&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">GOTO</span><span class="op">,</span>&nbsp;<span class="string">&#34;goto&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IF</span><span class="op">,</span>&nbsp;<span class="string">&#34;if&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">IMPORT</span><span class="op">,</span>&nbsp;<span class="string">&#34;import&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">INTERFACE</span><span class="op">,</span>&nbsp;<span class="string">&#34;interface&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">MAP</span><span class="op">,</span>&nbsp;<span class="string">&#34;map&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">PACKAGE</span><span class="op">,</span>&nbsp;<span class="string">&#34;package&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">RANGE</span><span class="op">,</span>&nbsp;<span class="string">&#34;range&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">RETURN</span><span class="op">,</span>&nbsp;<span class="string">&#34;return&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SELECT</span><span class="op">,</span>&nbsp;<span class="string">&#34;select&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">STRUCT</span><span class="op">,</span>&nbsp;<span class="string">&#34;struct&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">SWITCH</span><span class="op">,</span>&nbsp;<span class="string">&#34;switch&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">TYPE</span><span class="op">,</span>&nbsp;<span class="string">&#34;type&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">VAR</span><span class="op">,</span>&nbsp;<span class="string">&#34;var&#34;</span><span class="op">,</span>&nbsp;<span class="ident">keyword</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">const</span>&nbsp;<span class="ident">whitespace</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;&nbsp;&nbsp;\t&nbsp;&nbsp;\n\n\n&#34;</span>&nbsp;<span class="comment">//&nbsp;to&nbsp;separate&nbsp;tokens</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="keyword">var</span>&nbsp;<span class="ident">source</span>&nbsp;<span class="op">=</span>&nbsp;<span class="keyword">func</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">src</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">t</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">tokens</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">append</span><span class="op">(</span><span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">t</span><span class="op">.</span><span class="ident">lit</span><span class="op">...</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">append</span><span class="op">(</span><span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">whitespace</span><span class="op">...</span><span class="op">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">src</span><br>
<span class="lineno"></span><span class="op">}</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">newlineCount</span><span class="op">(</span><span class="ident">s</span>&nbsp;<span class="builtintype">string</span><span class="op">)</span>&nbsp;<span class="builtintype">int</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">n</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><span class="op">;</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&lt;</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">s</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">i</span><span class="op">++</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#39;\n&#39;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">n</span><span class="op">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">return</span>&nbsp;<span class="ident">n</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">checkPos</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="builtintype">string</span><span class="op">,</span>&nbsp;<span class="ident">p</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Pos</span><span class="op">,</span>&nbsp;<span class="ident">expected</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Position</span><span class="op">(</span><span class="ident">p</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Filename</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Filename</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;filename&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Filename</span><span class="op">,</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Filename</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Offset</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Offset</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;position&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Offset</span><span class="op">,</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Offset</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Line</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Line</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;line&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Line</span><span class="op">,</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Line</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Column</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Column</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;column&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Column</span><span class="op">,</span>&nbsp;<span class="ident">expected</span><span class="op">.</span><span class="ident">Column</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="comment">//&nbsp;Verify&nbsp;that&nbsp;calling&nbsp;Scan()&nbsp;provides&nbsp;the&nbsp;correct&nbsp;results.</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestScan</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">whitespace_linecount</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">newlineCount</span><span class="op">(</span><span class="ident">whitespace</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;error&nbsp;handler</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">eh</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">func</span><span class="op">(</span><span class="ident">_</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">,</span>&nbsp;<span class="ident">msg</span>&nbsp;<span class="builtintype">string</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;error&nbsp;handler&nbsp;called&nbsp;(msg&nbsp;=&nbsp;%s)&#34;</span><span class="op">,</span>&nbsp;<span class="ident">msg</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;verify&nbsp;scan</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">source</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">source</span><span class="op">,</span>&nbsp;<span class="ident">eh</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">|</span><span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;set&nbsp;up&nbsp;expected&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">epos</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Filename</span><span class="op">:</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Offset</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">0</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Line</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num">1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Column</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="num">1</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">240</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">index</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;check&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;correction&nbsp;for&nbsp;EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">epos</span><span class="op">.</span><span class="ident">Line</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">newlineCount</span><span class="op">(</span><span class="builtintype">string</span><span class="op">(</span><span class="ident">source</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">epos</span><span class="op">.</span><span class="ident">Column</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">2</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkPos</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">epos</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;check&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">e</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">elt</span><span class="op">{</span><span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">special</span><span class="op">}</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">index</span>&nbsp;<span class="op">&lt;</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">tokens</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">e</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">tokens</span><span class="op">[</span><span class="ident">index</span><span class="op">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">index</span><span class="op">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;token&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;check&nbsp;token&nbsp;class</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tokenclass</span><span class="op">(</span><span class="ident">tok</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">class</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;class&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">tokenclass</span><span class="op">(</span><span class="ident">tok</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">class</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;check&nbsp;literal</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;&#34;</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">switch</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;no&nbsp;CRs&nbsp;in&nbsp;comments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">stripCR</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//-style&nbsp;comment&nbsp;literal&nbsp;doesn&#39;t&nbsp;contain&nbsp;newline</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">elit</span><span class="op">[</span><span class="num">1</span><span class="op">]</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#39;/&#39;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">elit</span><span class="op">[</span><span class="num">0</span>&nbsp;<span class="op">:</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">elit</span><span class="op">)</span><span class="op">-</span><span class="num">1</span><span class="op">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">IDENT</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">case</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">SEMICOLON</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">default</span><span class="op">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span><span class="op">.</span><span class="ident">IsLiteral</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;no&nbsp;CRs&nbsp;in&nbsp;raw&nbsp;string&nbsp;literals</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">elit</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#39;`&#39;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtintype">string</span><span class="op">(</span><span class="ident">stripCR</span><span class="op">(</span><span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">elit</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span><span class="op">.</span><span class="ident">IsKeyword</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">elit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">elit</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;literal&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">elit</span><span class="op">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;update&nbsp;position</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">epos</span><span class="op">.</span><span class="ident">Offset</span>&nbsp;<span class="op">+=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><span class="op">)</span>&nbsp;<span class="op">+</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">whitespace</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">epos</span><span class="op">.</span><span class="ident">Line</span>&nbsp;<span class="op">+=</span>&nbsp;<span class="ident">newlineCount</span><span class="op">(</span><span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><span class="op">)</span>&nbsp;<span class="op">+</span>&nbsp;<span class="ident">whitespace_linecount</span><br>
<span class="lineno"></span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">0</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;errors&#34;</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">310</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">checkSemi</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">,</span>&nbsp;<span class="ident">line</span>&nbsp;<span class="builtintype">string</span><span class="op">,</span>&nbsp;<span class="ident">mode</span>&nbsp;<span class="ident">Mode</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">S</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">file</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;TestSemis&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">line</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">line</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">mode</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;the&nbsp;illegal&nbsp;token&nbsp;literal&nbsp;indicates&nbsp;what</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;kind&nbsp;of&nbsp;semicolon&nbsp;literal&nbsp;to&nbsp;expect</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">semiLit</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">lit</span><span class="op">[</span><span class="num">0</span><span class="op">]</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#39;#&#39;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">semiLit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;next&nbsp;token&nbsp;must&nbsp;be&nbsp;a&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">semiPos</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">file</span><span class="op">.</span><span class="ident">Position</span><span class="op">(</span><span class="ident">pos</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">semiPos</span><span class="op">.</span><span class="ident">Offset</span><span class="op">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">semiPos</span><span class="op">.</span><span class="ident">Column</span><span class="op">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">SEMICOLON</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">semiLit</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">`bad&nbsp;literal&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%q,&nbsp;expected&nbsp;%q`</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">semiLit</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkPos</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">semiPos</span><span class="op">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;token&nbsp;for&nbsp;%q:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">SEMICOLON</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;token&nbsp;for&nbsp;%q:&nbsp;got&nbsp;;,&nbsp;expected&nbsp;no&nbsp;;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword">var</span>&nbsp;<span class="ident">lines</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">string</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;#&nbsp;indicates&nbsp;a&nbsp;semicolon&nbsp;present&nbsp;in&nbsp;the&nbsp;source</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;$&nbsp;indicates&nbsp;an&nbsp;automatically&nbsp;inserted&nbsp;semicolon</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;\ufeff#;&#34;</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;first&nbsp;BOM&nbsp;is&nbsp;ignored</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;#;&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;123$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;1.2$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&#39;x&#39;$\n&#34;</span><span class="op">,</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">`&#34;x&#34;`</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">&#34;$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;`x`$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;+\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;-\n&#34;</span><span class="op">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;*\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;/\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;%\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&amp;\n&#34;</span><span class="op">,</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;|\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;^\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&lt;&lt;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&gt;&gt;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&amp;^\n&#34;</span><span class="op">,</span><br>
<span class="lineno">370</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;+=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;-=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;*=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;/=\n&#34;</span><span class="op">,</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;%=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&amp;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;|=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;^=\n&#34;</span><span class="op">,</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&lt;&lt;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&gt;&gt;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&amp;^=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&amp;&amp;\n&#34;</span><span class="op">,</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;||\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&lt;-\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;++$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;--$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;==\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&lt;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&gt;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;!\n&#34;</span><span class="op">,</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;!=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&lt;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;&gt;=\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;:=\n&#34;</span><span class="op">,</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;...\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;(\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;[\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;{\n&#34;</span><span class="op">,</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;,\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;.\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;)$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;]$\n&#34;</span><span class="op">,</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;}$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;#;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;:\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;break$\n&#34;</span><span class="op">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;case\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;chan\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;const\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;continue$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;default\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;defer\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;else\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;fallthrough$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;for\n&#34;</span><span class="op">,</span><br>
<span class="lineno">425</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;func\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;go\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;goto\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;if\n&#34;</span><span class="op">,</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;import\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;interface\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;map\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;package\n&#34;</span><span class="op">,</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;range\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;return$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;select\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;struct\n&#34;</span><span class="op">,</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;switch\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;type\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;var\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$//comment\n&#34;</span><span class="op">,</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$//comment&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$/*comment*/\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$/*\n*/&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$/*comment*/&nbsp;&nbsp;&nbsp;&nbsp;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo$/*\n*/&nbsp;&nbsp;&nbsp;&nbsp;&#34;</span><span class="op">,</span><br>
<span class="lineno">450</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$//&nbsp;comment\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$//&nbsp;comment&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*comment*/\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*\n*/&#34;</span><span class="op">,</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*&nbsp;&nbsp;*/&nbsp;/*&nbsp;\n&nbsp;*/&nbsp;bar$/**/\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*0*/&nbsp;/*1*/&nbsp;/*2*/\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*comment*/&nbsp;&nbsp;&nbsp;&nbsp;\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*0*/&nbsp;/*1*/&nbsp;/*2*/&nbsp;&nbsp;&nbsp;&nbsp;\n&#34;</span><span class="op">,</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp$/**/&nbsp;/*-------------*/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*----\n*/bar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$/*&nbsp;&nbsp;\n*/baa$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*&nbsp;an&nbsp;EOF&nbsp;terminates&nbsp;a&nbsp;line&nbsp;*/&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*&nbsp;an&nbsp;EOF&nbsp;terminates&nbsp;a&nbsp;line&nbsp;*/&nbsp;/*&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;foo&nbsp;&nbsp;&nbsp;&nbsp;$/*&nbsp;an&nbsp;EOF&nbsp;terminates&nbsp;a&nbsp;line&nbsp;*/&nbsp;//&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;package&nbsp;main$\n\nfunc&nbsp;main()&nbsp;{\n\tif&nbsp;{\n\t\treturn&nbsp;/*&nbsp;*/&nbsp;}$\n}$\n&#34;</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;package&nbsp;main$&#34;</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestSemis</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">line</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">lines</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkSemi</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkSemi</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;if&nbsp;the&nbsp;input&nbsp;ended&nbsp;in&nbsp;newlines,&nbsp;the&nbsp;input&nbsp;must&nbsp;tokenize&nbsp;the</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;same&nbsp;with&nbsp;or&nbsp;without&nbsp;those&nbsp;newlines</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">line</span><span class="op">)</span>&nbsp;<span class="op">-</span>&nbsp;<span class="num">1</span><span class="op">;</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&gt;=</span>&nbsp;<span class="num">0</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">line</span><span class="op">[</span><span class="ident">i</span><span class="op">]</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#39;\n&#39;</span><span class="op">;</span>&nbsp;<span class="ident">i</span><span class="op">--</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkSemi</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="ident">i</span><span class="op">]</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkSemi</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">line</span><span class="op">[</span><span class="num">0</span><span class="op">:</span><span class="ident">i</span><span class="op">]</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">segment</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">srcline</span>&nbsp;&nbsp;<span class="builtintype">string</span>&nbsp;<span class="comment">//&nbsp;a&nbsp;line&nbsp;of&nbsp;source&nbsp;text</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">filename</span>&nbsp;<span class="builtintype">string</span>&nbsp;<span class="comment">//&nbsp;filename&nbsp;for&nbsp;current&nbsp;token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">line</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;line&nbsp;number&nbsp;for&nbsp;current&nbsp;token</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">segments</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">segment</span><span class="op">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;exactly&nbsp;one&nbsp;token&nbsp;per&nbsp;line&nbsp;since&nbsp;the&nbsp;test&nbsp;consumes&nbsp;one&nbsp;token&nbsp;per&nbsp;segment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;&nbsp;&nbsp;line1&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;TestLineComments&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\nline2&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;TestLineComments&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\nline3&nbsp;&nbsp;//line&nbsp;File1.go:100&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;TestLineComments&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;bad&nbsp;line&nbsp;comment,&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\nline4&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;TestLineComments&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;File1.go:100\n&nbsp;&nbsp;line100&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;File1.go&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">100</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;&nbsp;\t&nbsp;:42\n&nbsp;&nbsp;line1&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="num">42</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;File2.go:200\n&nbsp;&nbsp;line200&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;File2.go&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">200</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;foo\t:42\n&nbsp;&nbsp;line42&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">42</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n&nbsp;//line&nbsp;foo:42\n&nbsp;&nbsp;line44&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">44</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;bad&nbsp;line&nbsp;comment,&nbsp;ignored</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;foo&nbsp;42\n&nbsp;&nbsp;line46&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">46</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;bad&nbsp;line&nbsp;comment,&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;foo:42&nbsp;extra&nbsp;text\n&nbsp;&nbsp;line48&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">48</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;bad&nbsp;line&nbsp;comment,&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;./foo:42\n&nbsp;&nbsp;line42&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;foo&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">42</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;a/b/c/File1.go:100\n&nbsp;&nbsp;line100&#34;</span><span class="op">,</span>&nbsp;<span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;a&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;b&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;c&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;File1.go&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="num">100</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">505</span><br>
<span class="lineno"></span><span class="keyword">var</span>&nbsp;<span class="ident">unixsegments</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">segment</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;/bar:42\n&nbsp;&nbsp;line42&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;/bar&#34;</span><span class="op">,</span>&nbsp;<span class="num">42</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span><span class="keyword">var</span>&nbsp;<span class="ident">winsegments</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="ident">segment</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;c:\\bar:42\n&nbsp;&nbsp;line42&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;c:\\bar&#34;</span><span class="op">,</span>&nbsp;<span class="num">42</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\n//line&nbsp;c:\\dir\\File1.go:100\n&nbsp;&nbsp;line100&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;c:\\dir\\File1.go&#34;</span><span class="op">,</span>&nbsp;<span class="num">100</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">515</span><span class="comment">//&nbsp;Verify&nbsp;that&nbsp;comments&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;//line&nbsp;filename:line&#34;&nbsp;are&nbsp;interpreted&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestLineComments</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">segs</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">segments</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">runtime</span><span class="op">.</span><span class="ident">GOOS</span>&nbsp;<span class="op">==</span>&nbsp;<span class="string">&#34;windows&#34;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">segs</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">append</span><span class="op">(</span><span class="ident">segs</span><span class="op">,</span>&nbsp;<span class="ident">winsegments</span><span class="op">...</span><span class="op">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span>&nbsp;<span class="keyword">else</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">segs</span>&nbsp;<span class="op">=</span>&nbsp;<span class="builtinfunc">append</span><span class="op">(</span><span class="ident">segs</span><span class="op">,</span>&nbsp;<span class="ident">unixsegments</span><span class="op">...</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;make&nbsp;source</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">src</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">e</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">segs</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span>&nbsp;<span class="op">+=</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">srcline</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;verify&nbsp;scan</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">S</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">file</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="ident">filepath</span><span class="op">.</span><span class="ident">Join</span><span class="op">(</span><span class="string">&#34;dir&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;TestLineComments&#34;</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">S</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">segs</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">p</span><span class="op">,</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">file</span><span class="op">.</span><span class="ident">Position</span><span class="op">(</span><span class="ident">p</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkPos</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">p</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Filename</span><span class="op">:</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">filename</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Offset</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Offset</span><span class="op">,</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Line</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">line</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">Column</span><span class="op">:</span>&nbsp;&nbsp;&nbsp;<span class="ident">pos</span><span class="op">.</span><span class="ident">Column</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">ErrorCount</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">0</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;errors&#34;</span><span class="op">,</span>&nbsp;<span class="ident">S</span><span class="op">.</span><span class="ident">ErrorCount</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">550</span><span class="comment">//&nbsp;Verify&nbsp;that&nbsp;initializing&nbsp;the&nbsp;same&nbsp;scanner&nbsp;more&nbsp;than&nbsp;once&nbsp;works&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestInit</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;1st&nbsp;init</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src1</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;if&nbsp;true&nbsp;{&nbsp;}&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">f1</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;src1&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src1</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">f1</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src1</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">f1</span><span class="op">.</span><span class="ident">Size</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src1</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;file&nbsp;size:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">f1</span><span class="op">.</span><span class="ident">Size</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src1</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;if</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="comment">//&nbsp;{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">LBRACE</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;token:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">LBRACE</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment">//&nbsp;2nd&nbsp;init</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src2</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="string">&#34;go&nbsp;true&nbsp;{&nbsp;]&#34;</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">f2</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;src2&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src2</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">f2</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src2</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">f2</span><span class="op">.</span><span class="ident">Size</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src2</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;file&nbsp;size:&nbsp;got&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">f2</span><span class="op">.</span><span class="ident">Size</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src2</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span>&nbsp;<span class="comment">//&nbsp;go</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">GO</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;bad&nbsp;token:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">GO</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">0</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;errors&#34;</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword">func</span>&nbsp;<span class="ident">TestStdErrorHander</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">const</span>&nbsp;<span class="ident">src</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;@\n&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="comment">//&nbsp;illegal&nbsp;character,&nbsp;cause&nbsp;an&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;@&nbsp;@\n&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="comment">//&nbsp;two&nbsp;errors&nbsp;on&nbsp;the&nbsp;same&nbsp;line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;//line&nbsp;File2:20\n&#34;</span>&nbsp;<span class="op">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;@\n&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="comment">//&nbsp;different&nbsp;file,&nbsp;but&nbsp;same&nbsp;line</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;//line&nbsp;File2:1\n&#34;</span>&nbsp;<span class="op">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;@&nbsp;@\n&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="comment">//&nbsp;same&nbsp;file,&nbsp;decreasing&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;//line&nbsp;File1:1\n&#34;</span>&nbsp;<span class="op">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string">&#34;@&nbsp;@&nbsp;@&#34;</span>&nbsp;<span class="comment">//&nbsp;original&nbsp;file,&nbsp;line&nbsp;1&nbsp;again</span><br>
<span class="lineno"></span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">list</span>&nbsp;<span class="ident">ErrorList</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">eh</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">func</span><span class="op">(</span><span class="ident">pos</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">,</span>&nbsp;<span class="ident">msg</span>&nbsp;<span class="builtintype">string</span><span class="op">)</span>&nbsp;<span class="op">{</span>&nbsp;<span class="ident">list</span><span class="op">.</span><span class="ident">Add</span><span class="op">(</span><span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">msg</span><span class="op">)</span>&nbsp;<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;File1&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">eh</span><span class="op">,</span>&nbsp;<span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><span class="op">;</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">605</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;errors,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">ErrorCount</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">9</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;raw&nbsp;errors,&nbsp;expected&nbsp;9&#34;</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PrintError</span><span class="op">(</span><span class="ident">os</span><span class="op">.</span><span class="ident">Stderr</span><span class="op">,</span>&nbsp;<span class="ident">list</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">list</span><span class="op">.</span><span class="ident">Sort</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">9</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;sorted&nbsp;errors,&nbsp;expected&nbsp;9&#34;</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PrintError</span><span class="op">(</span><span class="ident">os</span><span class="op">.</span><span class="ident">Stderr</span><span class="op">,</span>&nbsp;<span class="ident">list</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">620</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">list</span><span class="op">.</span><span class="ident">RemoveMultiples</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="num">4</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;found&nbsp;%d&nbsp;one-per-line&nbsp;errors,&nbsp;expected&nbsp;4&#34;</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">list</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">PrintError</span><span class="op">(</span><span class="ident">os</span><span class="op">.</span><span class="ident">Stderr</span><span class="op">,</span>&nbsp;<span class="ident">list</span><span class="op">)</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">type</span>&nbsp;<span class="ident">errorCollector</span>&nbsp;<span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">cnt</span>&nbsp;<span class="builtintype">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;number&nbsp;of&nbsp;errors&nbsp;encountered</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">msg</span>&nbsp;<span class="builtintype">string</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;last&nbsp;error&nbsp;message&nbsp;encountered</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span>&nbsp;<span class="comment">//&nbsp;last&nbsp;error&nbsp;position&nbsp;encountered</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">checkError</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">,</span>&nbsp;<span class="ident">src</span>&nbsp;<span class="builtintype">string</span><span class="op">,</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Token</span><span class="op">,</span>&nbsp;<span class="ident">pos</span>&nbsp;<span class="builtintype">int</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="builtintype">string</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">h</span>&nbsp;<span class="ident">errorCollector</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">eh</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">func</span><span class="op">(</span><span class="ident">pos</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Position</span><span class="op">,</span>&nbsp;<span class="ident">msg</span>&nbsp;<span class="builtintype">string</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">h</span><span class="op">.</span><span class="ident">cnt</span><span class="op">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">h</span><span class="op">.</span><span class="ident">msg</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">msg</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">h</span><span class="op">.</span><span class="ident">pos</span>&nbsp;<span class="op">=</span>&nbsp;<span class="ident">pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="builtintype">byte</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="ident">eh</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">|</span><span class="ident">dontInsertSemis</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok0</span><span class="op">,</span>&nbsp;<span class="ident">lit0</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok0</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%q:&nbsp;got&nbsp;%s,&nbsp;expected&nbsp;%s&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">tok0</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok0</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span>&nbsp;<span class="op">&amp;&amp;</span>&nbsp;<span class="ident">lit0</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">lit</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%q:&nbsp;got&nbsp;literal&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">lit0</span><span class="op">,</span>&nbsp;<span class="ident">lit</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">cnt</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="string">&#34;&#34;</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">cnt</span>&nbsp;<span class="op">=</span>&nbsp;<span class="num">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">cnt</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">cnt</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%q:&nbsp;got&nbsp;cnt&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">cnt</span><span class="op">,</span>&nbsp;<span class="ident">cnt</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">msg</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%q:&nbsp;got&nbsp;msg&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">msg</span><span class="op">,</span>&nbsp;<span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">pos</span><span class="op">.</span><span class="ident">Offset</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">pos</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">t</span><span class="op">.</span><span class="ident">Errorf</span><span class="op">(</span><span class="string">&#34;%q:&nbsp;got&nbsp;offset&nbsp;%d,&nbsp;expected&nbsp;%d&#34;</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">h</span><span class="op">.</span><span class="ident">pos</span><span class="op">.</span><span class="ident">Offset</span><span class="op">,</span>&nbsp;<span class="ident">pos</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">665</span><span class="keyword">var</span>&nbsp;<span class="ident">errors</span>&nbsp;<span class="op">=</span>&nbsp;<span class="op">[</span><span class="op">]</span><span class="keyword">struct</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">tok</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">pos</span>&nbsp;<span class="builtintype">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">lit</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">err</span>&nbsp;<span class="builtintype">string</span><br>
<span class="lineno"></span><span class="op">}</span><span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\a&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0007&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`#`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0023&nbsp;&#39;#&#39;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`…`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+2026&nbsp;&#39;…&#39;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;&nbsp;&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;&nbsp;&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;12&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;12&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;123&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;123&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;rune&nbsp;literal&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\0&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\0&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\07&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\07&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\8&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\8&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;unknown&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\08&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\08&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0038&nbsp;&#39;8&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\x&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\x&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\x0&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\x0&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\x0g&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\x0g&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0067&nbsp;&#39;g&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u0&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u0&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u00&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">5</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u00&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">6</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u000`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">6</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u000`</span><span class="op">,</span>&nbsp;<span class="string">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\u0000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\u0000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U0&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U0&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U00&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">5</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U00&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">6</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U0000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">7</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U0000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U00000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">8</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U00000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U000000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">9</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U000000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U0000000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">10</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U0000000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;U+0027&nbsp;&#39;&#39;&#39;&nbsp;in&nbsp;escape&nbsp;sequence&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U0000000`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">10</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U0000000`</span><span class="op">,</span>&nbsp;<span class="string">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\U00000000&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\U00000000&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\Uffffffff&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\Uffffffff&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;escape&nbsp;sequence&nbsp;is&nbsp;invalid&nbsp;Unicode&nbsp;code&nbsp;point&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#39;\`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="string">`&#39;\`</span><span class="op">,</span>&nbsp;<span class="string">&#34;escape&nbsp;sequence&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;&#39;\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;&#39;\n&nbsp;&nbsp;&nbsp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;rune&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#34;&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#34;&#34;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#34;abc`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#34;abc`</span><span class="op">,</span>&nbsp;<span class="string">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\&#34;abc\n&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#34;abc`</span><span class="op">,</span>&nbsp;<span class="string">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\&#34;abc\n&nbsp;&nbsp;&nbsp;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">`&#34;abc`</span><span class="op">,</span>&nbsp;<span class="string">&#34;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;``&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;``&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;`&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;`&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;raw&nbsp;string&nbsp;literal&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;/**/&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;/**/&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;/*&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;/*&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;comment&nbsp;not&nbsp;terminated&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;077&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;077&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;078.&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;078.&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;07801234567.&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;07801234567.&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;078e0&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">FLOAT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;078e0&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;078&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;078&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;07800000009&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;07800000009&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;octal&nbsp;number&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;0x&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;0x&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;0X&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">INT</span><span class="op">,</span>&nbsp;<span class="num">0</span><span class="op">,</span>&nbsp;<span class="string">&#34;0X&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;hexadecimal&nbsp;number&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\&#34;abc\x00def\&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">&#34;\&#34;abc\x00def\&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;character&nbsp;NUL&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\&#34;abc\x80def\&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">&#34;\&#34;abc\x80def\&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;UTF-8&nbsp;encoding&#34;</span><span class="op">}</span><span class="op">,</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;\ufeff\ufeff&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">ILLEGAL</span><span class="op">,</span>&nbsp;<span class="num">3</span><span class="op">,</span>&nbsp;<span class="string">&#34;\ufeff\ufeff&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;only&nbsp;first&nbsp;BOM&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;//\ufeff&#34;</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">COMMENT</span><span class="op">,</span>&nbsp;<span class="num">2</span><span class="op">,</span>&nbsp;<span class="string">&#34;//\ufeff&#34;</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;only&nbsp;first&nbsp;BOM&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">&#34;&#39;\ufeff&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`&#39;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">CHAR</span><span class="op">,</span>&nbsp;<span class="num">1</span><span class="op">,</span>&nbsp;<span class="string">&#34;&#39;\ufeff&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`&#39;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;only&nbsp;first&nbsp;BOM&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">{</span><span class="string">`&#34;`</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">&#34;abc\ufeffdef&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`&#34;`</span><span class="op">,</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">STRING</span><span class="op">,</span>&nbsp;<span class="num">4</span><span class="op">,</span>&nbsp;<span class="string">`&#34;`</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">&#34;abc\ufeffdef&#34;</span>&nbsp;<span class="op">+</span>&nbsp;<span class="string">`&#34;`</span><span class="op">,</span>&nbsp;<span class="string">&#34;illegal&nbsp;byte&nbsp;order&nbsp;mark&#34;</span><span class="op">}</span><span class="op">,</span>&nbsp;<span class="comment">//&nbsp;only&nbsp;first&nbsp;BOM&nbsp;is&nbsp;ignored</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno">730</span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">TestScanErrors</span><span class="op">(</span><span class="ident">t</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">T</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">e</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="keyword">range</span>&nbsp;<span class="ident">errors</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">checkError</span><span class="op">(</span><span class="ident">t</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">pos</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">lit</span><span class="op">,</span>&nbsp;<span class="ident">e</span><span class="op">.</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">735</span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">BenchmarkScan</span><span class="op">(</span><span class="ident">b</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">B</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">.</span><span class="ident">StopTimer</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">fset</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">NewFileSet</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">file</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="string">&#34;&#34;</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">source</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">.</span><span class="ident">StartTimer</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><span class="op">;</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&lt;</span>&nbsp;<span class="ident">b</span><span class="op">.</span><span class="ident">N</span><span class="op">;</span>&nbsp;<span class="ident">i</span><span class="op">++</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">source</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">)</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span><span class="op">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword">func</span>&nbsp;<span class="ident">BenchmarkScanFile</span><span class="op">(</span><span class="ident">b</span>&nbsp;<span class="op">*</span><span class="ident">testing</span><span class="op">.</span><span class="ident">B</span><span class="op">)</span>&nbsp;<span class="op">{</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">.</span><span class="ident">StopTimer</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">const</span>&nbsp;<span class="ident">filename</span>&nbsp;<span class="op">=</span>&nbsp;<span class="string">&#34;scanner.go&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">ioutil</span><span class="op">.</span><span class="ident">ReadFile</span><span class="op">(</span><span class="ident">filename</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">err</span>&nbsp;<span class="op">!=</span>&nbsp;<span class="ident">nil</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc">panic</span><span class="op">(</span><span class="ident">err</span><span class="op">)</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">fset</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">NewFileSet</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">file</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">AddFile</span><span class="op">(</span><span class="ident">filename</span><span class="op">,</span>&nbsp;<span class="ident">fset</span><span class="op">.</span><span class="ident">Base</span><span class="op">(</span><span class="op">)</span><span class="op">,</span>&nbsp;<span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">.</span><span class="ident">SetBytes</span><span class="op">(</span><span class="ident">int64</span><span class="op">(</span><span class="builtinfunc">len</span><span class="op">(</span><span class="ident">src</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">var</span>&nbsp;<span class="ident">s</span>&nbsp;<span class="ident">Scanner</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">b</span><span class="op">.</span><span class="ident">StartTimer</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="num">0</span><span class="op">;</span>&nbsp;<span class="ident">i</span>&nbsp;<span class="op">&lt;</span>&nbsp;<span class="ident">b</span><span class="op">.</span><span class="ident">N</span><span class="op">;</span>&nbsp;<span class="ident">i</span><span class="op">++</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">s</span><span class="op">.</span><span class="ident">Init</span><span class="op">(</span><span class="ident">file</span><span class="op">,</span>&nbsp;<span class="ident">src</span><span class="op">,</span>&nbsp;<span class="ident">nil</span><span class="op">,</span>&nbsp;<span class="ident">ScanComments</span><span class="op">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">for</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident">_</span><span class="op">,</span>&nbsp;<span class="ident">tok</span><span class="op">,</span>&nbsp;<span class="ident">_</span>&nbsp;<span class="op">:=</span>&nbsp;<span class="ident">s</span><span class="op">.</span><span class="ident">Scan</span><span class="op">(</span><span class="op">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">if</span>&nbsp;<span class="ident">tok</span>&nbsp;<span class="op">==</span>&nbsp;<span class="ident">token</span><span class="op">.</span><span class="ident">EOF</span>&nbsp;<span class="op">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op">}</span><br>
<span class="lineno">775</span><span class="op">}</span>
</div>
</body>
</html>
