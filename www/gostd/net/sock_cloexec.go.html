<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3382180">//&nbsp;Copyright&nbsp;2013&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3382235">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3382289">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="3382340">//&nbsp;This&nbsp;file&nbsp;implements&nbsp;sysSocket&nbsp;and&nbsp;accept&nbsp;for&nbsp;platforms&nbsp;that</span><br>
<span class="lineno"></span><span class="comment" id="3382404">//&nbsp;provide&nbsp;a&nbsp;fast&nbsp;path&nbsp;for&nbsp;setting&nbsp;SetNonblock&nbsp;and&nbsp;CloseOnExec.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3382469">//&nbsp;+build&nbsp;freebsd&nbsp;linux</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="3382494">package</span>&nbsp;<span class="ident" id="3382502">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3382507">import</span>&nbsp;<span class="string" id="3382514">&#34;syscall&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3382525">//&nbsp;Wrapper&nbsp;around&nbsp;the&nbsp;socket&nbsp;system&nbsp;call&nbsp;that&nbsp;marks&nbsp;the&nbsp;returned&nbsp;file</span><br>
<span class="lineno">15</span><span class="comment" id="3382595">//&nbsp;descriptor&nbsp;as&nbsp;nonblocking&nbsp;and&nbsp;close-on-exec.</span><br>
<span class="lineno"></span><span class="keyword" id="3382643">func</span>&nbsp;<span class="ident" id="3382648">sysSocket</span><span class="op" id="3382657">(</span><span class="ident" id="3382658">family</span><span class="op" id="3382664">,</span>&nbsp;<span class="ident" id="3382666">sotype</span><span class="op" id="3382672">,</span>&nbsp;<span class="ident" id="3382674">proto</span>&nbsp;<span class="builtintype" id="3382680">int</span><span class="op" id="3382683">)</span>&nbsp;<span class="op" id="3382685">(</span><span class="builtintype" id="3382686">int</span><span class="op" id="3382689">,</span>&nbsp;<span class="builtintype" id="3382691">error</span><span class="op" id="3382696">)</span>&nbsp;<span class="op" id="3382698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3382701">s</span><span class="op" id="3382702">,</span>&nbsp;<span class="ident" id="3382704">err</span>&nbsp;<span class="op" id="3382708">:=</span>&nbsp;<span class="ident" id="3382711">syscall</span><span class="op" id="3382718">.</span><span class="ident" id="3382719">Socket</span><span class="op" id="3382725">(</span><span class="ident" id="3382726">family</span><span class="op" id="3382732">,</span>&nbsp;<span class="ident" id="3382734">sotype</span><span class="op" id="3382740">|</span><span class="ident" id="3382741">syscall</span><span class="op" id="3382748">.</span><span class="ident" id="3382749">SOCK_NONBLOCK</span><span class="op" id="3382762">|</span><span class="ident" id="3382763">syscall</span><span class="op" id="3382770">.</span><span class="ident" id="3382771">SOCK_CLOEXEC</span><span class="op" id="3382783">,</span>&nbsp;<span class="ident" id="3382785">proto</span><span class="op" id="3382790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3382793">//&nbsp;On&nbsp;Linux&nbsp;the&nbsp;SOCK_NONBLOCK&nbsp;and&nbsp;SOCK_CLOEXEC&nbsp;flags&nbsp;were</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3382852">//&nbsp;introduced&nbsp;in&nbsp;2.6.27&nbsp;kernel&nbsp;and&nbsp;on&nbsp;FreeBSD&nbsp;both&nbsp;flags&nbsp;were</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3382915">//&nbsp;introduced&nbsp;in&nbsp;10&nbsp;kernel.&nbsp;If&nbsp;we&nbsp;get&nbsp;an&nbsp;EINVAL&nbsp;error&nbsp;on&nbsp;Linux</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3382979">//&nbsp;or&nbsp;EPROTONOSUPPORT&nbsp;error&nbsp;on&nbsp;FreeBSD,&nbsp;fall&nbsp;back&nbsp;to&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383039">//&nbsp;socket&nbsp;without&nbsp;them.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383064">if</span>&nbsp;<span class="ident" id="3383067">err</span>&nbsp;<span class="op" id="3383071">==</span>&nbsp;<span class="ident" id="3383074">nil</span>&nbsp;<span class="op" id="3383078">||</span>&nbsp;<span class="op" id="3383081">(</span><span class="ident" id="3383082">err</span>&nbsp;<span class="op" id="3383086">!=</span>&nbsp;<span class="ident" id="3383089">syscall</span><span class="op" id="3383096">.</span><span class="ident" id="3383097">EPROTONOSUPPORT</span>&nbsp;<span class="op" id="3383113">&amp;&amp;</span>&nbsp;<span class="ident" id="3383116">err</span>&nbsp;<span class="op" id="3383120">!=</span>&nbsp;<span class="ident" id="3383123">syscall</span><span class="op" id="3383130">.</span><span class="ident" id="3383131">EINVAL</span><span class="op" id="3383137">)</span>&nbsp;<span class="op" id="3383139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383143">return</span>&nbsp;<span class="ident" id="3383150">s</span><span class="op" id="3383151">,</span>&nbsp;<span class="ident" id="3383153">err</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383158">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383162">//&nbsp;See&nbsp;../syscall/exec_unix.go&nbsp;for&nbsp;description&nbsp;of&nbsp;ForkLock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383223">syscall</span><span class="op" id="3383230">.</span><span class="ident" id="3383231">ForkLock</span><span class="op" id="3383239">.</span><span class="ident" id="3383240">RLock</span><span class="op" id="3383245">(</span><span class="op" id="3383246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383249">s</span><span class="op" id="3383250">,</span>&nbsp;<span class="ident" id="3383252">err</span>&nbsp;<span class="op" id="3383256">=</span>&nbsp;<span class="ident" id="3383258">syscall</span><span class="op" id="3383265">.</span><span class="ident" id="3383266">Socket</span><span class="op" id="3383272">(</span><span class="ident" id="3383273">family</span><span class="op" id="3383279">,</span>&nbsp;<span class="ident" id="3383281">sotype</span><span class="op" id="3383287">,</span>&nbsp;<span class="ident" id="3383289">proto</span><span class="op" id="3383294">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383297">if</span>&nbsp;<span class="ident" id="3383300">err</span>&nbsp;<span class="op" id="3383304">==</span>&nbsp;<span class="ident" id="3383307">nil</span>&nbsp;<span class="op" id="3383311">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383315">syscall</span><span class="op" id="3383322">.</span><span class="ident" id="3383323">CloseOnExec</span><span class="op" id="3383334">(</span><span class="ident" id="3383335">s</span><span class="op" id="3383336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383339">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383342">syscall</span><span class="op" id="3383349">.</span><span class="ident" id="3383350">ForkLock</span><span class="op" id="3383358">.</span><span class="ident" id="3383359">RUnlock</span><span class="op" id="3383366">(</span><span class="op" id="3383367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383370">if</span>&nbsp;<span class="ident" id="3383373">err</span>&nbsp;<span class="op" id="3383377">!=</span>&nbsp;<span class="ident" id="3383380">nil</span>&nbsp;<span class="op" id="3383384">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383388">return</span>&nbsp;<span class="op" id="3383395">-</span><span class="num" id="3383396">1</span><span class="op" id="3383397">,</span>&nbsp;<span class="ident" id="3383399">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383407">if</span>&nbsp;<span class="ident" id="3383410">err</span>&nbsp;<span class="op" id="3383414">=</span>&nbsp;<span class="ident" id="3383416">syscall</span><span class="op" id="3383423">.</span><span class="ident" id="3383424">SetNonblock</span><span class="op" id="3383435">(</span><span class="ident" id="3383436">s</span><span class="op" id="3383437">,</span>&nbsp;<span class="builtintype" id="3383439">true</span><span class="op" id="3383443">)</span><span class="op" id="3383444">;</span>&nbsp;<span class="ident" id="3383446">err</span>&nbsp;<span class="op" id="3383450">!=</span>&nbsp;<span class="ident" id="3383453">nil</span>&nbsp;<span class="op" id="3383457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383461">syscall</span><span class="op" id="3383468">.</span><span class="ident" id="3383469">Close</span><span class="op" id="3383474">(</span><span class="ident" id="3383475">s</span><span class="op" id="3383476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383480">return</span>&nbsp;<span class="op" id="3383487">-</span><span class="num" id="3383488">1</span><span class="op" id="3383489">,</span>&nbsp;<span class="ident" id="3383491">err</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3383496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3383499">return</span>&nbsp;<span class="ident" id="3383506">s</span><span class="op" id="3383507">,</span>&nbsp;<span class="ident" id="3383509">nil</span><br>
<span class="lineno"></span><span class="op" id="3383513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3383516">//&nbsp;Wrapper&nbsp;around&nbsp;the&nbsp;accept&nbsp;system&nbsp;call&nbsp;that&nbsp;marks&nbsp;the&nbsp;returned&nbsp;file</span><br>
<span class="lineno">45</span><span class="comment" id="3383586">//&nbsp;descriptor&nbsp;as&nbsp;nonblocking&nbsp;and&nbsp;close-on-exec.</span><br>
<span class="lineno"></span><span class="keyword" id="3383634">func</span>&nbsp;<span class="ident" id="3383639">accept</span><span class="op" id="3383645">(</span><span class="ident" id="3383646">s</span>&nbsp;<span class="builtintype" id="3383648">int</span><span class="op" id="3383651">)</span>&nbsp;<span class="op" id="3383653">(</span><span class="builtintype" id="3383654">int</span><span class="op" id="3383657">,</span>&nbsp;<span class="ident" id="3383659">syscall</span><span class="op" id="3383666">.</span><span class="ident" id="3383667">Sockaddr</span><span class="op" id="3383675">,</span>&nbsp;<span class="builtintype" id="3383677">error</span><span class="op" id="3383682">)</span>&nbsp;<span class="op" id="3383684">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3383687">ns</span><span class="op" id="3383689">,</span>&nbsp;<span class="ident" id="3383691">sa</span><span class="op" id="3383693">,</span>&nbsp;<span class="ident" id="3383695">err</span>&nbsp;<span class="op" id="3383699">:=</span>&nbsp;<span class="ident" id="3383702">syscall</span><span class="op" id="3383709">.</span><span class="ident" id="3383710">Accept4</span><span class="op" id="3383717">(</span><span class="ident" id="3383718">s</span><span class="op" id="3383719">,</span>&nbsp;<span class="ident" id="3383721">syscall</span><span class="op" id="3383728">.</span><span class="ident" id="3383729">SOCK_NONBLOCK</span><span class="op" id="3383742">|</span><span class="ident" id="3383743">syscall</span><span class="op" id="3383750">.</span><span class="ident" id="3383751">SOCK_CLOEXEC</span><span class="op" id="3383763">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383766">//&nbsp;On&nbsp;Linux&nbsp;the&nbsp;accept4&nbsp;system&nbsp;call&nbsp;was&nbsp;introduced&nbsp;in&nbsp;2.6.28</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383828">//&nbsp;kernel&nbsp;and&nbsp;on&nbsp;FreeBSD&nbsp;it&nbsp;was&nbsp;introduced&nbsp;in&nbsp;10&nbsp;kernel.&nbsp;If&nbsp;we</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383892">//&nbsp;get&nbsp;an&nbsp;ENOSYS&nbsp;error&nbsp;on&nbsp;both&nbsp;Linux&nbsp;and&nbsp;FreeBSD,&nbsp;or&nbsp;EINVAL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3383953">//&nbsp;error&nbsp;on&nbsp;Linux,&nbsp;fall&nbsp;back&nbsp;to&nbsp;using&nbsp;accept.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384000">switch</span>&nbsp;<span class="ident" id="3384007">err</span>&nbsp;<span class="op" id="3384011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384014">default</span><span class="op" id="3384021">:</span>&nbsp;<span class="comment" id="3384023">//&nbsp;nil&nbsp;and&nbsp;errors&nbsp;other&nbsp;than&nbsp;the&nbsp;ones&nbsp;listed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384070">return</span>&nbsp;<span class="ident" id="3384077">ns</span><span class="op" id="3384079">,</span>&nbsp;<span class="ident" id="3384081">sa</span><span class="op" id="3384083">,</span>&nbsp;<span class="ident" id="3384085">err</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384090">case</span>&nbsp;<span class="ident" id="3384095">syscall</span><span class="op" id="3384102">.</span><span class="ident" id="3384103">ENOSYS</span><span class="op" id="3384109">:</span>&nbsp;<span class="comment" id="3384111">//&nbsp;syscall&nbsp;missing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384131">case</span>&nbsp;<span class="ident" id="3384136">syscall</span><span class="op" id="3384143">.</span><span class="ident" id="3384144">EINVAL</span><span class="op" id="3384150">:</span>&nbsp;<span class="comment" id="3384152">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384194">case</span>&nbsp;<span class="ident" id="3384199">syscall</span><span class="op" id="3384206">.</span><span class="ident" id="3384207">EACCES</span><span class="op" id="3384213">:</span>&nbsp;<span class="comment" id="3384215">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384257">case</span>&nbsp;<span class="ident" id="3384262">syscall</span><span class="op" id="3384269">.</span><span class="ident" id="3384270">EFAULT</span><span class="op" id="3384276">:</span>&nbsp;<span class="comment" id="3384278">//&nbsp;some&nbsp;Linux&nbsp;use&nbsp;this&nbsp;instead&nbsp;of&nbsp;ENOSYS</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3384320">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384324">//&nbsp;See&nbsp;../syscall/exec_unix.go&nbsp;for&nbsp;description&nbsp;of&nbsp;ForkLock.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384385">//&nbsp;It&nbsp;is&nbsp;probably&nbsp;okay&nbsp;to&nbsp;hold&nbsp;the&nbsp;lock&nbsp;across&nbsp;syscall.Accept</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384448">//&nbsp;because&nbsp;we&nbsp;have&nbsp;put&nbsp;fd.sysfd&nbsp;into&nbsp;non-blocking&nbsp;mode.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384505">//&nbsp;However,&nbsp;a&nbsp;call&nbsp;to&nbsp;the&nbsp;File&nbsp;method&nbsp;will&nbsp;put&nbsp;it&nbsp;back&nbsp;into</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3384566">//&nbsp;blocking&nbsp;mode.&nbsp;We&nbsp;can&#39;t&nbsp;take&nbsp;that&nbsp;risk,&nbsp;so&nbsp;no&nbsp;use&nbsp;of&nbsp;ForkLock&nbsp;here.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384638">ns</span><span class="op" id="3384640">,</span>&nbsp;<span class="ident" id="3384642">sa</span><span class="op" id="3384644">,</span>&nbsp;<span class="ident" id="3384646">err</span>&nbsp;<span class="op" id="3384650">=</span>&nbsp;<span class="ident" id="3384652">syscall</span><span class="op" id="3384659">.</span><span class="ident" id="3384660">Accept</span><span class="op" id="3384666">(</span><span class="ident" id="3384667">s</span><span class="op" id="3384668">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384671">if</span>&nbsp;<span class="ident" id="3384674">err</span>&nbsp;<span class="op" id="3384678">==</span>&nbsp;<span class="ident" id="3384681">nil</span>&nbsp;<span class="op" id="3384685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384689">syscall</span><span class="op" id="3384696">.</span><span class="ident" id="3384697">CloseOnExec</span><span class="op" id="3384708">(</span><span class="ident" id="3384709">ns</span><span class="op" id="3384711">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3384714">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384717">if</span>&nbsp;<span class="ident" id="3384720">err</span>&nbsp;<span class="op" id="3384724">!=</span>&nbsp;<span class="ident" id="3384727">nil</span>&nbsp;<span class="op" id="3384731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384735">return</span>&nbsp;<span class="op" id="3384742">-</span><span class="num" id="3384743">1</span><span class="op" id="3384744">,</span>&nbsp;<span class="ident" id="3384746">nil</span><span class="op" id="3384749">,</span>&nbsp;<span class="ident" id="3384751">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3384756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384759">if</span>&nbsp;<span class="ident" id="3384762">err</span>&nbsp;<span class="op" id="3384766">=</span>&nbsp;<span class="ident" id="3384768">syscall</span><span class="op" id="3384775">.</span><span class="ident" id="3384776">SetNonblock</span><span class="op" id="3384787">(</span><span class="ident" id="3384788">ns</span><span class="op" id="3384790">,</span>&nbsp;<span class="builtintype" id="3384792">true</span><span class="op" id="3384796">)</span><span class="op" id="3384797">;</span>&nbsp;<span class="ident" id="3384799">err</span>&nbsp;<span class="op" id="3384803">!=</span>&nbsp;<span class="ident" id="3384806">nil</span>&nbsp;<span class="op" id="3384810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3384814">syscall</span><span class="op" id="3384821">.</span><span class="ident" id="3384822">Close</span><span class="op" id="3384827">(</span><span class="ident" id="3384828">ns</span><span class="op" id="3384830">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384834">return</span>&nbsp;<span class="op" id="3384841">-</span><span class="num" id="3384842">1</span><span class="op" id="3384843">,</span>&nbsp;<span class="ident" id="3384845">nil</span><span class="op" id="3384848">,</span>&nbsp;<span class="ident" id="3384850">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3384855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3384858">return</span>&nbsp;<span class="ident" id="3384865">ns</span><span class="op" id="3384867">,</span>&nbsp;<span class="ident" id="3384869">sa</span><span class="op" id="3384871">,</span>&nbsp;<span class="ident" id="3384873">nil</span><br>
<span class="lineno"></span><span class="op" id="3384877">}</span>
</div>
</body>
</html>
