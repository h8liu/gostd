<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sync/atomic</h2>
<ul>
<li><a href="/gostd/sync/atomic/atomic_test.go.html">atomic_test.go</a></li>
<li><a href="/gostd/sync/atomic/doc.go.html">doc.go</a></li>
<li><a href="/gostd/sync/atomic/value.go.html">value.go</a></li>
<li><a href="/gostd/sync/atomic/value_test.go.html">value_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1142375">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1142431">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1142485">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1142536">package</span>&nbsp;<span class="ident" id="1142544">atomic_test</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1142557">import</span>&nbsp;<span class="op" id="1142564">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1142567">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1142574">&#34;runtime&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1142585">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1142596">.</span>&nbsp;<span class="string" id="1142598">&#34;sync/atomic&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1142613">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1142624">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1142633">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="1142636">//&nbsp;Tests&nbsp;of&nbsp;correct&nbsp;behavior,&nbsp;without&nbsp;contention.</span><br>
<span class="lineno"></span><span class="comment" id="1142686">//&nbsp;(Does&nbsp;the&nbsp;function&nbsp;work&nbsp;as&nbsp;advertised?)</span><br>
<span class="lineno"></span><span class="comment" id="1142729">//</span><br>
<span class="lineno"></span><span class="comment" id="1142732">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;Add&nbsp;functions&nbsp;add&nbsp;correctly.</span><br>
<span class="lineno">20</span><span class="comment" id="1142778">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;CompareAndSwap&nbsp;functions&nbsp;actually</span><br>
<span class="lineno"></span><span class="comment" id="1142829">//&nbsp;do&nbsp;the&nbsp;comparison&nbsp;and&nbsp;the&nbsp;swap&nbsp;correctly.</span><br>
<span class="lineno"></span><span class="comment" id="1142874">//</span><br>
<span class="lineno"></span><span class="comment" id="1142877">//&nbsp;The&nbsp;loop&nbsp;over&nbsp;power-of-two&nbsp;values&nbsp;is&nbsp;meant&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="1142926">//&nbsp;ensure&nbsp;that&nbsp;the&nbsp;operations&nbsp;apply&nbsp;to&nbsp;the&nbsp;full&nbsp;word&nbsp;size.</span><br>
<span class="lineno">25</span><span class="comment" id="1142985">//&nbsp;The&nbsp;struct&nbsp;fields&nbsp;x.before&nbsp;and&nbsp;x.after&nbsp;check&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="1143042">//&nbsp;operations&nbsp;do&nbsp;not&nbsp;extend&nbsp;past&nbsp;the&nbsp;full&nbsp;word&nbsp;size.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1143096">const</span>&nbsp;<span class="op" id="1143102">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143105">magic32</span>&nbsp;<span class="op" id="1143113">=</span>&nbsp;<span class="num" id="1143115">0xdedbeef</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143126">magic64</span>&nbsp;<span class="op" id="1143134">=</span>&nbsp;<span class="num" id="1143136">0xdeddeadbeefbeef</span><br>
<span class="lineno"></span><span class="op" id="1143154">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1143157">//&nbsp;Do&nbsp;the&nbsp;64-bit&nbsp;functions&nbsp;panic?&nbsp;&nbsp;If&nbsp;so,&nbsp;don&#39;t&nbsp;bother&nbsp;testing.</span><br>
<span class="lineno"></span><span class="keyword" id="1143221">var</span>&nbsp;<span class="ident" id="1143225">test64err</span>&nbsp;<span class="op" id="1143235">=</span>&nbsp;<span class="keyword" id="1143237">func</span><span class="op" id="1143241">(</span><span class="op" id="1143242">)</span>&nbsp;<span class="op" id="1143244">(</span><span class="ident" id="1143245">err</span>&nbsp;<span class="keyword" id="1143249">interface</span><span class="op" id="1143258">{</span><span class="op" id="1143259">}</span><span class="op" id="1143260">)</span>&nbsp;<span class="op" id="1143262">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143265">defer</span>&nbsp;<span class="keyword" id="1143271">func</span><span class="op" id="1143275">(</span><span class="op" id="1143276">)</span>&nbsp;<span class="op" id="1143278">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143282">err</span>&nbsp;<span class="op" id="1143286">=</span>&nbsp;<span class="builtinfunc" id="1143288">recover</span><span class="op" id="1143295">(</span><span class="op" id="1143296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143299">}</span><span class="op" id="1143300">(</span><span class="op" id="1143301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143304">var</span>&nbsp;<span class="ident" id="1143308">x</span>&nbsp;<span class="ident" id="1143310">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143317">AddInt64</span><span class="op" id="1143325">(</span><span class="op" id="1143326">&amp;</span><span class="ident" id="1143327">x</span><span class="op" id="1143328">,</span>&nbsp;<span class="num" id="1143330">1</span><span class="op" id="1143331">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143334">return</span>&nbsp;<span class="ident" id="1143341">nil</span><br>
<span class="lineno"></span><span class="op" id="1143345">}</span><span class="op" id="1143346">(</span><span class="op" id="1143347">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1143350">func</span>&nbsp;<span class="ident" id="1143355">TestSwapInt32</span><span class="op" id="1143368">(</span><span class="ident" id="1143369">t</span>&nbsp;<span class="op" id="1143371">*</span><span class="ident" id="1143372">testing</span><span class="op" id="1143379">.</span><span class="ident" id="1143380">T</span><span class="op" id="1143381">)</span>&nbsp;<span class="op" id="1143383">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143386">var</span>&nbsp;<span class="ident" id="1143390">x</span>&nbsp;<span class="keyword" id="1143392">struct</span>&nbsp;<span class="op" id="1143399">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143403">before</span>&nbsp;<span class="builtintype" id="1143410">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143418">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1143425">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143433">after</span>&nbsp;&nbsp;<span class="builtintype" id="1143440">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143450">x</span><span class="op" id="1143451">.</span><span class="ident" id="1143452">before</span>&nbsp;<span class="op" id="1143459">=</span>&nbsp;<span class="ident" id="1143461">magic32</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143470">x</span><span class="op" id="1143471">.</span><span class="ident" id="1143472">after</span>&nbsp;<span class="op" id="1143478">=</span>&nbsp;<span class="ident" id="1143480">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143489">var</span>&nbsp;<span class="ident" id="1143493">j</span>&nbsp;<span class="builtintype" id="1143495">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143502">for</span>&nbsp;<span class="ident" id="1143506">delta</span>&nbsp;<span class="op" id="1143512">:=</span>&nbsp;<span class="builtintype" id="1143515">int32</span><span class="op" id="1143520">(</span><span class="num" id="1143521">1</span><span class="op" id="1143522">)</span><span class="op" id="1143523">;</span>&nbsp;<span class="ident" id="1143525">delta</span><span class="op" id="1143530">+</span><span class="ident" id="1143531">delta</span>&nbsp;<span class="op" id="1143537">&gt;</span>&nbsp;<span class="ident" id="1143539">delta</span><span class="op" id="1143544">;</span>&nbsp;<span class="ident" id="1143546">delta</span>&nbsp;<span class="op" id="1143552">+=</span>&nbsp;<span class="ident" id="1143555">delta</span>&nbsp;<span class="op" id="1143561">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143565">k</span>&nbsp;<span class="op" id="1143567">:=</span>&nbsp;<span class="ident" id="1143570">SwapInt32</span><span class="op" id="1143579">(</span><span class="op" id="1143580">&amp;</span><span class="ident" id="1143581">x</span><span class="op" id="1143582">.</span><span class="ident" id="1143583">i</span><span class="op" id="1143584">,</span>&nbsp;<span class="ident" id="1143586">delta</span><span class="op" id="1143591">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143595">if</span>&nbsp;<span class="ident" id="1143598">x</span><span class="op" id="1143599">.</span><span class="ident" id="1143600">i</span>&nbsp;<span class="op" id="1143602">!=</span>&nbsp;<span class="ident" id="1143605">delta</span>&nbsp;<span class="op" id="1143611">||</span>&nbsp;<span class="ident" id="1143614">k</span>&nbsp;<span class="op" id="1143616">!=</span>&nbsp;<span class="ident" id="1143619">j</span>&nbsp;<span class="op" id="1143621">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143626">t</span><span class="op" id="1143627">.</span><span class="ident" id="1143628">Fatalf</span><span class="op" id="1143634">(</span><span class="string" id="1143635">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1143660">,</span>&nbsp;<span class="ident" id="1143662">delta</span><span class="op" id="1143667">,</span>&nbsp;<span class="ident" id="1143669">x</span><span class="op" id="1143670">.</span><span class="ident" id="1143671">i</span><span class="op" id="1143672">,</span>&nbsp;<span class="ident" id="1143674">j</span><span class="op" id="1143675">,</span>&nbsp;<span class="ident" id="1143677">k</span><span class="op" id="1143678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143686">j</span>&nbsp;<span class="op" id="1143688">=</span>&nbsp;<span class="ident" id="1143690">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143697">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143700">if</span>&nbsp;<span class="ident" id="1143703">x</span><span class="op" id="1143704">.</span><span class="ident" id="1143705">before</span>&nbsp;<span class="op" id="1143712">!=</span>&nbsp;<span class="ident" id="1143715">magic32</span>&nbsp;<span class="op" id="1143723">||</span>&nbsp;<span class="ident" id="1143726">x</span><span class="op" id="1143727">.</span><span class="ident" id="1143728">after</span>&nbsp;<span class="op" id="1143734">!=</span>&nbsp;<span class="ident" id="1143737">magic32</span>&nbsp;<span class="op" id="1143745">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143749">t</span><span class="op" id="1143750">.</span><span class="ident" id="1143751">Fatalf</span><span class="op" id="1143757">(</span><span class="string" id="1143758">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1143795">,</span>&nbsp;<span class="ident" id="1143797">x</span><span class="op" id="1143798">.</span><span class="ident" id="1143799">before</span><span class="op" id="1143805">,</span>&nbsp;<span class="ident" id="1143807">x</span><span class="op" id="1143808">.</span><span class="ident" id="1143809">after</span><span class="op" id="1143814">,</span>&nbsp;<span class="ident" id="1143816">magic32</span><span class="op" id="1143823">,</span>&nbsp;<span class="ident" id="1143825">magic32</span><span class="op" id="1143832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143835">}</span><br>
<span class="lineno"></span><span class="op" id="1143837">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1143840">func</span>&nbsp;<span class="ident" id="1143845">TestSwapUint32</span><span class="op" id="1143859">(</span><span class="ident" id="1143860">t</span>&nbsp;<span class="op" id="1143862">*</span><span class="ident" id="1143863">testing</span><span class="op" id="1143870">.</span><span class="ident" id="1143871">T</span><span class="op" id="1143872">)</span>&nbsp;<span class="op" id="1143874">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143877">var</span>&nbsp;<span class="ident" id="1143881">x</span>&nbsp;<span class="keyword" id="1143883">struct</span>&nbsp;<span class="op" id="1143890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143894">before</span>&nbsp;<span class="builtintype" id="1143901">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143910">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1143917">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143926">after</span>&nbsp;&nbsp;<span class="builtintype" id="1143933">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1143941">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143944">x</span><span class="op" id="1143945">.</span><span class="ident" id="1143946">before</span>&nbsp;<span class="op" id="1143953">=</span>&nbsp;<span class="ident" id="1143955">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1143964">x</span><span class="op" id="1143965">.</span><span class="ident" id="1143966">after</span>&nbsp;<span class="op" id="1143972">=</span>&nbsp;<span class="ident" id="1143974">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143983">var</span>&nbsp;<span class="ident" id="1143987">j</span>&nbsp;<span class="builtintype" id="1143989">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1143997">for</span>&nbsp;<span class="ident" id="1144001">delta</span>&nbsp;<span class="op" id="1144007">:=</span>&nbsp;<span class="builtintype" id="1144010">uint32</span><span class="op" id="1144016">(</span><span class="num" id="1144017">1</span><span class="op" id="1144018">)</span><span class="op" id="1144019">;</span>&nbsp;<span class="ident" id="1144021">delta</span><span class="op" id="1144026">+</span><span class="ident" id="1144027">delta</span>&nbsp;<span class="op" id="1144033">&gt;</span>&nbsp;<span class="ident" id="1144035">delta</span><span class="op" id="1144040">;</span>&nbsp;<span class="ident" id="1144042">delta</span>&nbsp;<span class="op" id="1144048">+=</span>&nbsp;<span class="ident" id="1144051">delta</span>&nbsp;<span class="op" id="1144057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144061">k</span>&nbsp;<span class="op" id="1144063">:=</span>&nbsp;<span class="ident" id="1144066">SwapUint32</span><span class="op" id="1144076">(</span><span class="op" id="1144077">&amp;</span><span class="ident" id="1144078">x</span><span class="op" id="1144079">.</span><span class="ident" id="1144080">i</span><span class="op" id="1144081">,</span>&nbsp;<span class="ident" id="1144083">delta</span><span class="op" id="1144088">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144092">if</span>&nbsp;<span class="ident" id="1144095">x</span><span class="op" id="1144096">.</span><span class="ident" id="1144097">i</span>&nbsp;<span class="op" id="1144099">!=</span>&nbsp;<span class="ident" id="1144102">delta</span>&nbsp;<span class="op" id="1144108">||</span>&nbsp;<span class="ident" id="1144111">k</span>&nbsp;<span class="op" id="1144113">!=</span>&nbsp;<span class="ident" id="1144116">j</span>&nbsp;<span class="op" id="1144118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144123">t</span><span class="op" id="1144124">.</span><span class="ident" id="1144125">Fatalf</span><span class="op" id="1144131">(</span><span class="string" id="1144132">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1144157">,</span>&nbsp;<span class="ident" id="1144159">delta</span><span class="op" id="1144164">,</span>&nbsp;<span class="ident" id="1144166">x</span><span class="op" id="1144167">.</span><span class="ident" id="1144168">i</span><span class="op" id="1144169">,</span>&nbsp;<span class="ident" id="1144171">j</span><span class="op" id="1144172">,</span>&nbsp;<span class="ident" id="1144174">k</span><span class="op" id="1144175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144179">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144183">j</span>&nbsp;<span class="op" id="1144185">=</span>&nbsp;<span class="ident" id="1144187">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144194">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144197">if</span>&nbsp;<span class="ident" id="1144200">x</span><span class="op" id="1144201">.</span><span class="ident" id="1144202">before</span>&nbsp;<span class="op" id="1144209">!=</span>&nbsp;<span class="ident" id="1144212">magic32</span>&nbsp;<span class="op" id="1144220">||</span>&nbsp;<span class="ident" id="1144223">x</span><span class="op" id="1144224">.</span><span class="ident" id="1144225">after</span>&nbsp;<span class="op" id="1144231">!=</span>&nbsp;<span class="ident" id="1144234">magic32</span>&nbsp;<span class="op" id="1144242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144246">t</span><span class="op" id="1144247">.</span><span class="ident" id="1144248">Fatalf</span><span class="op" id="1144254">(</span><span class="string" id="1144255">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1144292">,</span>&nbsp;<span class="ident" id="1144294">x</span><span class="op" id="1144295">.</span><span class="ident" id="1144296">before</span><span class="op" id="1144302">,</span>&nbsp;<span class="ident" id="1144304">x</span><span class="op" id="1144305">.</span><span class="ident" id="1144306">after</span><span class="op" id="1144311">,</span>&nbsp;<span class="ident" id="1144313">magic32</span><span class="op" id="1144320">,</span>&nbsp;<span class="ident" id="1144322">magic32</span><span class="op" id="1144329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144332">}</span><br>
<span class="lineno"></span><span class="op" id="1144334">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="1144337">func</span>&nbsp;<span class="ident" id="1144342">TestSwapInt64</span><span class="op" id="1144355">(</span><span class="ident" id="1144356">t</span>&nbsp;<span class="op" id="1144358">*</span><span class="ident" id="1144359">testing</span><span class="op" id="1144366">.</span><span class="ident" id="1144367">T</span><span class="op" id="1144368">)</span>&nbsp;<span class="op" id="1144370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144373">if</span>&nbsp;<span class="ident" id="1144376">test64err</span>&nbsp;<span class="op" id="1144386">!=</span>&nbsp;<span class="ident" id="1144389">nil</span>&nbsp;<span class="op" id="1144393">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144397">t</span><span class="op" id="1144398">.</span><span class="ident" id="1144399">Skipf</span><span class="op" id="1144404">(</span><span class="string" id="1144405">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1144432">,</span>&nbsp;<span class="ident" id="1144434">test64err</span><span class="op" id="1144443">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144446">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144449">var</span>&nbsp;<span class="ident" id="1144453">x</span>&nbsp;<span class="keyword" id="1144455">struct</span>&nbsp;<span class="op" id="1144462">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144466">before</span>&nbsp;<span class="ident" id="1144473">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144481">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1144488">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144496">after</span>&nbsp;&nbsp;<span class="ident" id="1144503">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144513">x</span><span class="op" id="1144514">.</span><span class="ident" id="1144515">before</span>&nbsp;<span class="op" id="1144522">=</span>&nbsp;<span class="ident" id="1144524">magic64</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144533">x</span><span class="op" id="1144534">.</span><span class="ident" id="1144535">after</span>&nbsp;<span class="op" id="1144541">=</span>&nbsp;<span class="ident" id="1144543">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144552">var</span>&nbsp;<span class="ident" id="1144556">j</span>&nbsp;<span class="ident" id="1144558">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144565">for</span>&nbsp;<span class="ident" id="1144569">delta</span>&nbsp;<span class="op" id="1144575">:=</span>&nbsp;<span class="ident" id="1144578">int64</span><span class="op" id="1144583">(</span><span class="num" id="1144584">1</span><span class="op" id="1144585">)</span><span class="op" id="1144586">;</span>&nbsp;<span class="ident" id="1144588">delta</span><span class="op" id="1144593">+</span><span class="ident" id="1144594">delta</span>&nbsp;<span class="op" id="1144600">&gt;</span>&nbsp;<span class="ident" id="1144602">delta</span><span class="op" id="1144607">;</span>&nbsp;<span class="ident" id="1144609">delta</span>&nbsp;<span class="op" id="1144615">+=</span>&nbsp;<span class="ident" id="1144618">delta</span>&nbsp;<span class="op" id="1144624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144628">k</span>&nbsp;<span class="op" id="1144630">:=</span>&nbsp;<span class="ident" id="1144633">SwapInt64</span><span class="op" id="1144642">(</span><span class="op" id="1144643">&amp;</span><span class="ident" id="1144644">x</span><span class="op" id="1144645">.</span><span class="ident" id="1144646">i</span><span class="op" id="1144647">,</span>&nbsp;<span class="ident" id="1144649">delta</span><span class="op" id="1144654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144658">if</span>&nbsp;<span class="ident" id="1144661">x</span><span class="op" id="1144662">.</span><span class="ident" id="1144663">i</span>&nbsp;<span class="op" id="1144665">!=</span>&nbsp;<span class="ident" id="1144668">delta</span>&nbsp;<span class="op" id="1144674">||</span>&nbsp;<span class="ident" id="1144677">k</span>&nbsp;<span class="op" id="1144679">!=</span>&nbsp;<span class="ident" id="1144682">j</span>&nbsp;<span class="op" id="1144684">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144689">t</span><span class="op" id="1144690">.</span><span class="ident" id="1144691">Fatalf</span><span class="op" id="1144697">(</span><span class="string" id="1144698">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1144723">,</span>&nbsp;<span class="ident" id="1144725">delta</span><span class="op" id="1144730">,</span>&nbsp;<span class="ident" id="1144732">x</span><span class="op" id="1144733">.</span><span class="ident" id="1144734">i</span><span class="op" id="1144735">,</span>&nbsp;<span class="ident" id="1144737">j</span><span class="op" id="1144738">,</span>&nbsp;<span class="ident" id="1144740">k</span><span class="op" id="1144741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144749">j</span>&nbsp;<span class="op" id="1144751">=</span>&nbsp;<span class="ident" id="1144753">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144763">if</span>&nbsp;<span class="ident" id="1144766">x</span><span class="op" id="1144767">.</span><span class="ident" id="1144768">before</span>&nbsp;<span class="op" id="1144775">!=</span>&nbsp;<span class="ident" id="1144778">magic64</span>&nbsp;<span class="op" id="1144786">||</span>&nbsp;<span class="ident" id="1144789">x</span><span class="op" id="1144790">.</span><span class="ident" id="1144791">after</span>&nbsp;<span class="op" id="1144797">!=</span>&nbsp;<span class="ident" id="1144800">magic64</span>&nbsp;<span class="op" id="1144808">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144812">t</span><span class="op" id="1144813">.</span><span class="ident" id="1144814">Fatalf</span><span class="op" id="1144820">(</span><span class="string" id="1144821">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1144858">,</span>&nbsp;<span class="ident" id="1144860">x</span><span class="op" id="1144861">.</span><span class="ident" id="1144862">before</span><span class="op" id="1144868">,</span>&nbsp;<span class="ident" id="1144870">x</span><span class="op" id="1144871">.</span><span class="ident" id="1144872">after</span><span class="op" id="1144877">,</span>&nbsp;<span class="ident" id="1144879">uint64</span><span class="op" id="1144885">(</span><span class="ident" id="1144886">magic64</span><span class="op" id="1144893">)</span><span class="op" id="1144894">,</span>&nbsp;<span class="ident" id="1144896">uint64</span><span class="op" id="1144902">(</span><span class="ident" id="1144903">magic64</span><span class="op" id="1144910">)</span><span class="op" id="1144911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1144914">}</span><br>
<span class="lineno"></span><span class="op" id="1144916">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1144919">func</span>&nbsp;<span class="ident" id="1144924">TestSwapUint64</span><span class="op" id="1144938">(</span><span class="ident" id="1144939">t</span>&nbsp;<span class="op" id="1144941">*</span><span class="ident" id="1144942">testing</span><span class="op" id="1144949">.</span><span class="ident" id="1144950">T</span><span class="op" id="1144951">)</span>&nbsp;<span class="op" id="1144953">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1144956">if</span>&nbsp;<span class="ident" id="1144959">test64err</span>&nbsp;<span class="op" id="1144969">!=</span>&nbsp;<span class="ident" id="1144972">nil</span>&nbsp;<span class="op" id="1144976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1144980">t</span><span class="op" id="1144981">.</span><span class="ident" id="1144982">Skipf</span><span class="op" id="1144987">(</span><span class="string" id="1144988">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1145015">,</span>&nbsp;<span class="ident" id="1145017">test64err</span><span class="op" id="1145026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145032">var</span>&nbsp;<span class="ident" id="1145036">x</span>&nbsp;<span class="keyword" id="1145038">struct</span>&nbsp;<span class="op" id="1145045">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145049">before</span>&nbsp;<span class="ident" id="1145056">uint64</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145065">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1145072">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145081">after</span>&nbsp;&nbsp;<span class="ident" id="1145088">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145096">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145099">x</span><span class="op" id="1145100">.</span><span class="ident" id="1145101">before</span>&nbsp;<span class="op" id="1145108">=</span>&nbsp;<span class="ident" id="1145110">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145119">x</span><span class="op" id="1145120">.</span><span class="ident" id="1145121">after</span>&nbsp;<span class="op" id="1145127">=</span>&nbsp;<span class="ident" id="1145129">magic64</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145138">var</span>&nbsp;<span class="ident" id="1145142">j</span>&nbsp;<span class="ident" id="1145144">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145152">for</span>&nbsp;<span class="ident" id="1145156">delta</span>&nbsp;<span class="op" id="1145162">:=</span>&nbsp;<span class="ident" id="1145165">uint64</span><span class="op" id="1145171">(</span><span class="num" id="1145172">1</span><span class="op" id="1145173">)</span><span class="op" id="1145174">;</span>&nbsp;<span class="ident" id="1145176">delta</span><span class="op" id="1145181">+</span><span class="ident" id="1145182">delta</span>&nbsp;<span class="op" id="1145188">&gt;</span>&nbsp;<span class="ident" id="1145190">delta</span><span class="op" id="1145195">;</span>&nbsp;<span class="ident" id="1145197">delta</span>&nbsp;<span class="op" id="1145203">+=</span>&nbsp;<span class="ident" id="1145206">delta</span>&nbsp;<span class="op" id="1145212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145216">k</span>&nbsp;<span class="op" id="1145218">:=</span>&nbsp;<span class="ident" id="1145221">SwapUint64</span><span class="op" id="1145231">(</span><span class="op" id="1145232">&amp;</span><span class="ident" id="1145233">x</span><span class="op" id="1145234">.</span><span class="ident" id="1145235">i</span><span class="op" id="1145236">,</span>&nbsp;<span class="ident" id="1145238">delta</span><span class="op" id="1145243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145247">if</span>&nbsp;<span class="ident" id="1145250">x</span><span class="op" id="1145251">.</span><span class="ident" id="1145252">i</span>&nbsp;<span class="op" id="1145254">!=</span>&nbsp;<span class="ident" id="1145257">delta</span>&nbsp;<span class="op" id="1145263">||</span>&nbsp;<span class="ident" id="1145266">k</span>&nbsp;<span class="op" id="1145268">!=</span>&nbsp;<span class="ident" id="1145271">j</span>&nbsp;<span class="op" id="1145273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145278">t</span><span class="op" id="1145279">.</span><span class="ident" id="1145280">Fatalf</span><span class="op" id="1145286">(</span><span class="string" id="1145287">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1145312">,</span>&nbsp;<span class="ident" id="1145314">delta</span><span class="op" id="1145319">,</span>&nbsp;<span class="ident" id="1145321">x</span><span class="op" id="1145322">.</span><span class="ident" id="1145323">i</span><span class="op" id="1145324">,</span>&nbsp;<span class="ident" id="1145326">j</span><span class="op" id="1145327">,</span>&nbsp;<span class="ident" id="1145329">k</span><span class="op" id="1145330">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145338">j</span>&nbsp;<span class="op" id="1145340">=</span>&nbsp;<span class="ident" id="1145342">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145349">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145352">if</span>&nbsp;<span class="ident" id="1145355">x</span><span class="op" id="1145356">.</span><span class="ident" id="1145357">before</span>&nbsp;<span class="op" id="1145364">!=</span>&nbsp;<span class="ident" id="1145367">magic64</span>&nbsp;<span class="op" id="1145375">||</span>&nbsp;<span class="ident" id="1145378">x</span><span class="op" id="1145379">.</span><span class="ident" id="1145380">after</span>&nbsp;<span class="op" id="1145386">!=</span>&nbsp;<span class="ident" id="1145389">magic64</span>&nbsp;<span class="op" id="1145397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145401">t</span><span class="op" id="1145402">.</span><span class="ident" id="1145403">Fatalf</span><span class="op" id="1145409">(</span><span class="string" id="1145410">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1145447">,</span>&nbsp;<span class="ident" id="1145449">x</span><span class="op" id="1145450">.</span><span class="ident" id="1145451">before</span><span class="op" id="1145457">,</span>&nbsp;<span class="ident" id="1145459">x</span><span class="op" id="1145460">.</span><span class="ident" id="1145461">after</span><span class="op" id="1145466">,</span>&nbsp;<span class="ident" id="1145468">uint64</span><span class="op" id="1145474">(</span><span class="ident" id="1145475">magic64</span><span class="op" id="1145482">)</span><span class="op" id="1145483">,</span>&nbsp;<span class="ident" id="1145485">uint64</span><span class="op" id="1145491">(</span><span class="ident" id="1145492">magic64</span><span class="op" id="1145499">)</span><span class="op" id="1145500">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145503">}</span><br>
<span class="lineno"></span><span class="op" id="1145505">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1145508">func</span>&nbsp;<span class="ident" id="1145513">TestSwapUintptr</span><span class="op" id="1145528">(</span><span class="ident" id="1145529">t</span>&nbsp;<span class="op" id="1145531">*</span><span class="ident" id="1145532">testing</span><span class="op" id="1145539">.</span><span class="ident" id="1145540">T</span><span class="op" id="1145541">)</span>&nbsp;<span class="op" id="1145543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145546">var</span>&nbsp;<span class="ident" id="1145550">x</span>&nbsp;<span class="keyword" id="1145552">struct</span>&nbsp;<span class="op" id="1145559">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145563">before</span>&nbsp;<span class="builtintype" id="1145570">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145580">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1145587">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145597">after</span>&nbsp;&nbsp;<span class="builtintype" id="1145604">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145616">var</span>&nbsp;<span class="ident" id="1145620">m</span>&nbsp;<span class="ident" id="1145622">uint64</span>&nbsp;<span class="op" id="1145629">=</span>&nbsp;<span class="ident" id="1145631">magic64</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145640">magicptr</span>&nbsp;<span class="op" id="1145649">:=</span>&nbsp;<span class="builtintype" id="1145652">uintptr</span><span class="op" id="1145659">(</span><span class="ident" id="1145660">m</span><span class="op" id="1145661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145664">x</span><span class="op" id="1145665">.</span><span class="ident" id="1145666">before</span>&nbsp;<span class="op" id="1145673">=</span>&nbsp;<span class="ident" id="1145675">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145685">x</span><span class="op" id="1145686">.</span><span class="ident" id="1145687">after</span>&nbsp;<span class="op" id="1145693">=</span>&nbsp;<span class="ident" id="1145695">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145705">var</span>&nbsp;<span class="ident" id="1145709">j</span>&nbsp;<span class="builtintype" id="1145711">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145720">for</span>&nbsp;<span class="ident" id="1145724">delta</span>&nbsp;<span class="op" id="1145730">:=</span>&nbsp;<span class="builtintype" id="1145733">uintptr</span><span class="op" id="1145740">(</span><span class="num" id="1145741">1</span><span class="op" id="1145742">)</span><span class="op" id="1145743">;</span>&nbsp;<span class="ident" id="1145745">delta</span><span class="op" id="1145750">+</span><span class="ident" id="1145751">delta</span>&nbsp;<span class="op" id="1145757">&gt;</span>&nbsp;<span class="ident" id="1145759">delta</span><span class="op" id="1145764">;</span>&nbsp;<span class="ident" id="1145766">delta</span>&nbsp;<span class="op" id="1145772">+=</span>&nbsp;<span class="ident" id="1145775">delta</span>&nbsp;<span class="op" id="1145781">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145785">k</span>&nbsp;<span class="op" id="1145787">:=</span>&nbsp;<span class="ident" id="1145790">SwapUintptr</span><span class="op" id="1145801">(</span><span class="op" id="1145802">&amp;</span><span class="ident" id="1145803">x</span><span class="op" id="1145804">.</span><span class="ident" id="1145805">i</span><span class="op" id="1145806">,</span>&nbsp;<span class="ident" id="1145808">delta</span><span class="op" id="1145813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145817">if</span>&nbsp;<span class="ident" id="1145820">x</span><span class="op" id="1145821">.</span><span class="ident" id="1145822">i</span>&nbsp;<span class="op" id="1145824">!=</span>&nbsp;<span class="ident" id="1145827">delta</span>&nbsp;<span class="op" id="1145833">||</span>&nbsp;<span class="ident" id="1145836">k</span>&nbsp;<span class="op" id="1145838">!=</span>&nbsp;<span class="ident" id="1145841">j</span>&nbsp;<span class="op" id="1145843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145848">t</span><span class="op" id="1145849">.</span><span class="ident" id="1145850">Fatalf</span><span class="op" id="1145856">(</span><span class="string" id="1145857">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1145882">,</span>&nbsp;<span class="ident" id="1145884">delta</span><span class="op" id="1145889">,</span>&nbsp;<span class="ident" id="1145891">x</span><span class="op" id="1145892">.</span><span class="ident" id="1145893">i</span><span class="op" id="1145894">,</span>&nbsp;<span class="ident" id="1145896">j</span><span class="op" id="1145897">,</span>&nbsp;<span class="ident" id="1145899">k</span><span class="op" id="1145900">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145908">j</span>&nbsp;<span class="op" id="1145910">=</span>&nbsp;<span class="ident" id="1145912">delta</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1145919">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1145922">if</span>&nbsp;<span class="ident" id="1145925">x</span><span class="op" id="1145926">.</span><span class="ident" id="1145927">before</span>&nbsp;<span class="op" id="1145934">!=</span>&nbsp;<span class="ident" id="1145937">magicptr</span>&nbsp;<span class="op" id="1145946">||</span>&nbsp;<span class="ident" id="1145949">x</span><span class="op" id="1145950">.</span><span class="ident" id="1145951">after</span>&nbsp;<span class="op" id="1145957">!=</span>&nbsp;<span class="ident" id="1145960">magicptr</span>&nbsp;<span class="op" id="1145969">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1145973">t</span><span class="op" id="1145974">.</span><span class="ident" id="1145975">Fatalf</span><span class="op" id="1145981">(</span><span class="string" id="1145982">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1146019">,</span>&nbsp;<span class="ident" id="1146021">x</span><span class="op" id="1146022">.</span><span class="ident" id="1146023">before</span><span class="op" id="1146029">,</span>&nbsp;<span class="ident" id="1146031">x</span><span class="op" id="1146032">.</span><span class="ident" id="1146033">after</span><span class="op" id="1146038">,</span>&nbsp;<span class="ident" id="1146040">magicptr</span><span class="op" id="1146048">,</span>&nbsp;<span class="ident" id="1146050">magicptr</span><span class="op" id="1146058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146061">}</span><br>
<span class="lineno"></span><span class="op" id="1146063">}</span><br>
<span class="lineno">155</span><br>
<span class="lineno"></span><span class="keyword" id="1146066">func</span>&nbsp;<span class="ident" id="1146071">TestSwapPointer</span><span class="op" id="1146086">(</span><span class="ident" id="1146087">t</span>&nbsp;<span class="op" id="1146089">*</span><span class="ident" id="1146090">testing</span><span class="op" id="1146097">.</span><span class="ident" id="1146098">T</span><span class="op" id="1146099">)</span>&nbsp;<span class="op" id="1146101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146104">var</span>&nbsp;<span class="ident" id="1146108">x</span>&nbsp;<span class="keyword" id="1146110">struct</span>&nbsp;<span class="op" id="1146117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146121">before</span>&nbsp;<span class="builtintype" id="1146128">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146138">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1146145">unsafe</span><span class="op" id="1146151">.</span><span class="ident" id="1146152">Pointer</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146162">after</span>&nbsp;&nbsp;<span class="builtintype" id="1146169">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146178">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146181">var</span>&nbsp;<span class="ident" id="1146185">m</span>&nbsp;<span class="ident" id="1146187">uint64</span>&nbsp;<span class="op" id="1146194">=</span>&nbsp;<span class="ident" id="1146196">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146205">magicptr</span>&nbsp;<span class="op" id="1146214">:=</span>&nbsp;<span class="builtintype" id="1146217">uintptr</span><span class="op" id="1146224">(</span><span class="ident" id="1146225">m</span><span class="op" id="1146226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146229">x</span><span class="op" id="1146230">.</span><span class="ident" id="1146231">before</span>&nbsp;<span class="op" id="1146238">=</span>&nbsp;<span class="ident" id="1146240">magicptr</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146250">x</span><span class="op" id="1146251">.</span><span class="ident" id="1146252">after</span>&nbsp;<span class="op" id="1146258">=</span>&nbsp;<span class="ident" id="1146260">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146270">var</span>&nbsp;<span class="ident" id="1146274">j</span>&nbsp;<span class="builtintype" id="1146276">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146285">for</span>&nbsp;<span class="ident" id="1146289">delta</span>&nbsp;<span class="op" id="1146295">:=</span>&nbsp;<span class="builtintype" id="1146298">uintptr</span><span class="op" id="1146305">(</span><span class="num" id="1146306">1</span><span class="op" id="1146307">)</span><span class="op" id="1146308">;</span>&nbsp;<span class="ident" id="1146310">delta</span><span class="op" id="1146315">+</span><span class="ident" id="1146316">delta</span>&nbsp;<span class="op" id="1146322">&gt;</span>&nbsp;<span class="ident" id="1146324">delta</span><span class="op" id="1146329">;</span>&nbsp;<span class="ident" id="1146331">delta</span>&nbsp;<span class="op" id="1146337">+=</span>&nbsp;<span class="ident" id="1146340">delta</span>&nbsp;<span class="op" id="1146346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146350">k</span>&nbsp;<span class="op" id="1146352">:=</span>&nbsp;<span class="ident" id="1146355">SwapPointer</span><span class="op" id="1146366">(</span><span class="op" id="1146367">&amp;</span><span class="ident" id="1146368">x</span><span class="op" id="1146369">.</span><span class="ident" id="1146370">i</span><span class="op" id="1146371">,</span>&nbsp;<span class="ident" id="1146373">unsafe</span><span class="op" id="1146379">.</span><span class="ident" id="1146380">Pointer</span><span class="op" id="1146387">(</span><span class="ident" id="1146388">delta</span><span class="op" id="1146393">)</span><span class="op" id="1146394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146398">if</span>&nbsp;<span class="builtintype" id="1146401">uintptr</span><span class="op" id="1146408">(</span><span class="ident" id="1146409">x</span><span class="op" id="1146410">.</span><span class="ident" id="1146411">i</span><span class="op" id="1146412">)</span>&nbsp;<span class="op" id="1146414">!=</span>&nbsp;<span class="ident" id="1146417">delta</span>&nbsp;<span class="op" id="1146423">||</span>&nbsp;<span class="builtintype" id="1146426">uintptr</span><span class="op" id="1146433">(</span><span class="ident" id="1146434">k</span><span class="op" id="1146435">)</span>&nbsp;<span class="op" id="1146437">!=</span>&nbsp;<span class="ident" id="1146440">j</span>&nbsp;<span class="op" id="1146442">{</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146447">t</span><span class="op" id="1146448">.</span><span class="ident" id="1146449">Fatalf</span><span class="op" id="1146455">(</span><span class="string" id="1146456">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1146481">,</span>&nbsp;<span class="ident" id="1146483">delta</span><span class="op" id="1146488">,</span>&nbsp;<span class="ident" id="1146490">x</span><span class="op" id="1146491">.</span><span class="ident" id="1146492">i</span><span class="op" id="1146493">,</span>&nbsp;<span class="ident" id="1146495">j</span><span class="op" id="1146496">,</span>&nbsp;<span class="ident" id="1146498">k</span><span class="op" id="1146499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146503">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146507">j</span>&nbsp;<span class="op" id="1146509">=</span>&nbsp;<span class="ident" id="1146511">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146518">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146521">if</span>&nbsp;<span class="ident" id="1146524">x</span><span class="op" id="1146525">.</span><span class="ident" id="1146526">before</span>&nbsp;<span class="op" id="1146533">!=</span>&nbsp;<span class="ident" id="1146536">magicptr</span>&nbsp;<span class="op" id="1146545">||</span>&nbsp;<span class="ident" id="1146548">x</span><span class="op" id="1146549">.</span><span class="ident" id="1146550">after</span>&nbsp;<span class="op" id="1146556">!=</span>&nbsp;<span class="ident" id="1146559">magicptr</span>&nbsp;<span class="op" id="1146568">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146572">t</span><span class="op" id="1146573">.</span><span class="ident" id="1146574">Fatalf</span><span class="op" id="1146580">(</span><span class="string" id="1146581">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1146618">,</span>&nbsp;<span class="ident" id="1146620">x</span><span class="op" id="1146621">.</span><span class="ident" id="1146622">before</span><span class="op" id="1146628">,</span>&nbsp;<span class="ident" id="1146630">x</span><span class="op" id="1146631">.</span><span class="ident" id="1146632">after</span><span class="op" id="1146637">,</span>&nbsp;<span class="ident" id="1146639">magicptr</span><span class="op" id="1146647">,</span>&nbsp;<span class="ident" id="1146649">magicptr</span><span class="op" id="1146657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146660">}</span><br>
<span class="lineno"></span><span class="op" id="1146662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1146665">func</span>&nbsp;<span class="ident" id="1146670">TestAddInt32</span><span class="op" id="1146682">(</span><span class="ident" id="1146683">t</span>&nbsp;<span class="op" id="1146685">*</span><span class="ident" id="1146686">testing</span><span class="op" id="1146693">.</span><span class="ident" id="1146694">T</span><span class="op" id="1146695">)</span>&nbsp;<span class="op" id="1146697">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146700">var</span>&nbsp;<span class="ident" id="1146704">x</span>&nbsp;<span class="keyword" id="1146706">struct</span>&nbsp;<span class="op" id="1146713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146717">before</span>&nbsp;<span class="builtintype" id="1146724">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146732">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1146739">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146747">after</span>&nbsp;&nbsp;<span class="builtintype" id="1146754">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1146761">}</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146764">x</span><span class="op" id="1146765">.</span><span class="ident" id="1146766">before</span>&nbsp;<span class="op" id="1146773">=</span>&nbsp;<span class="ident" id="1146775">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146784">x</span><span class="op" id="1146785">.</span><span class="ident" id="1146786">after</span>&nbsp;<span class="op" id="1146792">=</span>&nbsp;<span class="ident" id="1146794">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146803">var</span>&nbsp;<span class="ident" id="1146807">j</span>&nbsp;<span class="builtintype" id="1146809">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146816">for</span>&nbsp;<span class="ident" id="1146820">delta</span>&nbsp;<span class="op" id="1146826">:=</span>&nbsp;<span class="builtintype" id="1146829">int32</span><span class="op" id="1146834">(</span><span class="num" id="1146835">1</span><span class="op" id="1146836">)</span><span class="op" id="1146837">;</span>&nbsp;<span class="ident" id="1146839">delta</span><span class="op" id="1146844">+</span><span class="ident" id="1146845">delta</span>&nbsp;<span class="op" id="1146851">&gt;</span>&nbsp;<span class="ident" id="1146853">delta</span><span class="op" id="1146858">;</span>&nbsp;<span class="ident" id="1146860">delta</span>&nbsp;<span class="op" id="1146866">+=</span>&nbsp;<span class="ident" id="1146869">delta</span>&nbsp;<span class="op" id="1146875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146879">k</span>&nbsp;<span class="op" id="1146881">:=</span>&nbsp;<span class="ident" id="1146884">AddInt32</span><span class="op" id="1146892">(</span><span class="op" id="1146893">&amp;</span><span class="ident" id="1146894">x</span><span class="op" id="1146895">.</span><span class="ident" id="1146896">i</span><span class="op" id="1146897">,</span>&nbsp;<span class="ident" id="1146899">delta</span><span class="op" id="1146904">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146908">j</span>&nbsp;<span class="op" id="1146910">+=</span>&nbsp;<span class="ident" id="1146913">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1146921">if</span>&nbsp;<span class="ident" id="1146924">x</span><span class="op" id="1146925">.</span><span class="ident" id="1146926">i</span>&nbsp;<span class="op" id="1146928">!=</span>&nbsp;<span class="ident" id="1146931">j</span>&nbsp;<span class="op" id="1146933">||</span>&nbsp;<span class="ident" id="1146936">k</span>&nbsp;<span class="op" id="1146938">!=</span>&nbsp;<span class="ident" id="1146941">j</span>&nbsp;<span class="op" id="1146943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1146948">t</span><span class="op" id="1146949">.</span><span class="ident" id="1146950">Fatalf</span><span class="op" id="1146956">(</span><span class="string" id="1146957">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1146982">,</span>&nbsp;<span class="ident" id="1146984">delta</span><span class="op" id="1146989">,</span>&nbsp;<span class="ident" id="1146991">x</span><span class="op" id="1146992">.</span><span class="ident" id="1146993">i</span><span class="op" id="1146994">,</span>&nbsp;<span class="ident" id="1146996">j</span><span class="op" id="1146997">,</span>&nbsp;<span class="ident" id="1146999">k</span><span class="op" id="1147000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147004">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147007">}</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147010">if</span>&nbsp;<span class="ident" id="1147013">x</span><span class="op" id="1147014">.</span><span class="ident" id="1147015">before</span>&nbsp;<span class="op" id="1147022">!=</span>&nbsp;<span class="ident" id="1147025">magic32</span>&nbsp;<span class="op" id="1147033">||</span>&nbsp;<span class="ident" id="1147036">x</span><span class="op" id="1147037">.</span><span class="ident" id="1147038">after</span>&nbsp;<span class="op" id="1147044">!=</span>&nbsp;<span class="ident" id="1147047">magic32</span>&nbsp;<span class="op" id="1147055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147059">t</span><span class="op" id="1147060">.</span><span class="ident" id="1147061">Fatalf</span><span class="op" id="1147067">(</span><span class="string" id="1147068">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1147105">,</span>&nbsp;<span class="ident" id="1147107">x</span><span class="op" id="1147108">.</span><span class="ident" id="1147109">before</span><span class="op" id="1147115">,</span>&nbsp;<span class="ident" id="1147117">x</span><span class="op" id="1147118">.</span><span class="ident" id="1147119">after</span><span class="op" id="1147124">,</span>&nbsp;<span class="ident" id="1147126">magic32</span><span class="op" id="1147133">,</span>&nbsp;<span class="ident" id="1147135">magic32</span><span class="op" id="1147142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147145">}</span><br>
<span class="lineno"></span><span class="op" id="1147147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">200</span><span class="keyword" id="1147150">func</span>&nbsp;<span class="ident" id="1147155">TestAddUint32</span><span class="op" id="1147168">(</span><span class="ident" id="1147169">t</span>&nbsp;<span class="op" id="1147171">*</span><span class="ident" id="1147172">testing</span><span class="op" id="1147179">.</span><span class="ident" id="1147180">T</span><span class="op" id="1147181">)</span>&nbsp;<span class="op" id="1147183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147186">var</span>&nbsp;<span class="ident" id="1147190">x</span>&nbsp;<span class="keyword" id="1147192">struct</span>&nbsp;<span class="op" id="1147199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147203">before</span>&nbsp;<span class="builtintype" id="1147210">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147219">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1147226">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147235">after</span>&nbsp;&nbsp;<span class="builtintype" id="1147242">uint32</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147253">x</span><span class="op" id="1147254">.</span><span class="ident" id="1147255">before</span>&nbsp;<span class="op" id="1147262">=</span>&nbsp;<span class="ident" id="1147264">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147273">x</span><span class="op" id="1147274">.</span><span class="ident" id="1147275">after</span>&nbsp;<span class="op" id="1147281">=</span>&nbsp;<span class="ident" id="1147283">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147292">var</span>&nbsp;<span class="ident" id="1147296">j</span>&nbsp;<span class="builtintype" id="1147298">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147306">for</span>&nbsp;<span class="ident" id="1147310">delta</span>&nbsp;<span class="op" id="1147316">:=</span>&nbsp;<span class="builtintype" id="1147319">uint32</span><span class="op" id="1147325">(</span><span class="num" id="1147326">1</span><span class="op" id="1147327">)</span><span class="op" id="1147328">;</span>&nbsp;<span class="ident" id="1147330">delta</span><span class="op" id="1147335">+</span><span class="ident" id="1147336">delta</span>&nbsp;<span class="op" id="1147342">&gt;</span>&nbsp;<span class="ident" id="1147344">delta</span><span class="op" id="1147349">;</span>&nbsp;<span class="ident" id="1147351">delta</span>&nbsp;<span class="op" id="1147357">+=</span>&nbsp;<span class="ident" id="1147360">delta</span>&nbsp;<span class="op" id="1147366">{</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147370">k</span>&nbsp;<span class="op" id="1147372">:=</span>&nbsp;<span class="ident" id="1147375">AddUint32</span><span class="op" id="1147384">(</span><span class="op" id="1147385">&amp;</span><span class="ident" id="1147386">x</span><span class="op" id="1147387">.</span><span class="ident" id="1147388">i</span><span class="op" id="1147389">,</span>&nbsp;<span class="ident" id="1147391">delta</span><span class="op" id="1147396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147400">j</span>&nbsp;<span class="op" id="1147402">+=</span>&nbsp;<span class="ident" id="1147405">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147413">if</span>&nbsp;<span class="ident" id="1147416">x</span><span class="op" id="1147417">.</span><span class="ident" id="1147418">i</span>&nbsp;<span class="op" id="1147420">!=</span>&nbsp;<span class="ident" id="1147423">j</span>&nbsp;<span class="op" id="1147425">||</span>&nbsp;<span class="ident" id="1147428">k</span>&nbsp;<span class="op" id="1147430">!=</span>&nbsp;<span class="ident" id="1147433">j</span>&nbsp;<span class="op" id="1147435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147440">t</span><span class="op" id="1147441">.</span><span class="ident" id="1147442">Fatalf</span><span class="op" id="1147448">(</span><span class="string" id="1147449">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1147474">,</span>&nbsp;<span class="ident" id="1147476">delta</span><span class="op" id="1147481">,</span>&nbsp;<span class="ident" id="1147483">x</span><span class="op" id="1147484">.</span><span class="ident" id="1147485">i</span><span class="op" id="1147486">,</span>&nbsp;<span class="ident" id="1147488">j</span><span class="op" id="1147489">,</span>&nbsp;<span class="ident" id="1147491">k</span><span class="op" id="1147492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147496">}</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147499">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147502">if</span>&nbsp;<span class="ident" id="1147505">x</span><span class="op" id="1147506">.</span><span class="ident" id="1147507">before</span>&nbsp;<span class="op" id="1147514">!=</span>&nbsp;<span class="ident" id="1147517">magic32</span>&nbsp;<span class="op" id="1147525">||</span>&nbsp;<span class="ident" id="1147528">x</span><span class="op" id="1147529">.</span><span class="ident" id="1147530">after</span>&nbsp;<span class="op" id="1147536">!=</span>&nbsp;<span class="ident" id="1147539">magic32</span>&nbsp;<span class="op" id="1147547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147551">t</span><span class="op" id="1147552">.</span><span class="ident" id="1147553">Fatalf</span><span class="op" id="1147559">(</span><span class="string" id="1147560">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1147597">,</span>&nbsp;<span class="ident" id="1147599">x</span><span class="op" id="1147600">.</span><span class="ident" id="1147601">before</span><span class="op" id="1147607">,</span>&nbsp;<span class="ident" id="1147609">x</span><span class="op" id="1147610">.</span><span class="ident" id="1147611">after</span><span class="op" id="1147616">,</span>&nbsp;<span class="ident" id="1147618">magic32</span><span class="op" id="1147625">,</span>&nbsp;<span class="ident" id="1147627">magic32</span><span class="op" id="1147634">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147637">}</span><br>
<span class="lineno"></span><span class="op" id="1147639">}</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="keyword" id="1147642">func</span>&nbsp;<span class="ident" id="1147647">TestAddInt64</span><span class="op" id="1147659">(</span><span class="ident" id="1147660">t</span>&nbsp;<span class="op" id="1147662">*</span><span class="ident" id="1147663">testing</span><span class="op" id="1147670">.</span><span class="ident" id="1147671">T</span><span class="op" id="1147672">)</span>&nbsp;<span class="op" id="1147674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147677">if</span>&nbsp;<span class="ident" id="1147680">test64err</span>&nbsp;<span class="op" id="1147690">!=</span>&nbsp;<span class="ident" id="1147693">nil</span>&nbsp;<span class="op" id="1147697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147701">t</span><span class="op" id="1147702">.</span><span class="ident" id="1147703">Skipf</span><span class="op" id="1147708">(</span><span class="string" id="1147709">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1147736">,</span>&nbsp;<span class="ident" id="1147738">test64err</span><span class="op" id="1147747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147750">}</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147753">var</span>&nbsp;<span class="ident" id="1147757">x</span>&nbsp;<span class="keyword" id="1147759">struct</span>&nbsp;<span class="op" id="1147766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147770">before</span>&nbsp;<span class="ident" id="1147777">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147785">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1147792">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147800">after</span>&nbsp;&nbsp;<span class="ident" id="1147807">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1147814">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147817">x</span><span class="op" id="1147818">.</span><span class="ident" id="1147819">before</span>&nbsp;<span class="op" id="1147826">=</span>&nbsp;<span class="ident" id="1147828">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147837">x</span><span class="op" id="1147838">.</span><span class="ident" id="1147839">after</span>&nbsp;<span class="op" id="1147845">=</span>&nbsp;<span class="ident" id="1147847">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147856">var</span>&nbsp;<span class="ident" id="1147860">j</span>&nbsp;<span class="ident" id="1147862">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147869">for</span>&nbsp;<span class="ident" id="1147873">delta</span>&nbsp;<span class="op" id="1147879">:=</span>&nbsp;<span class="ident" id="1147882">int64</span><span class="op" id="1147887">(</span><span class="num" id="1147888">1</span><span class="op" id="1147889">)</span><span class="op" id="1147890">;</span>&nbsp;<span class="ident" id="1147892">delta</span><span class="op" id="1147897">+</span><span class="ident" id="1147898">delta</span>&nbsp;<span class="op" id="1147904">&gt;</span>&nbsp;<span class="ident" id="1147906">delta</span><span class="op" id="1147911">;</span>&nbsp;<span class="ident" id="1147913">delta</span>&nbsp;<span class="op" id="1147919">+=</span>&nbsp;<span class="ident" id="1147922">delta</span>&nbsp;<span class="op" id="1147928">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147932">k</span>&nbsp;<span class="op" id="1147934">:=</span>&nbsp;<span class="ident" id="1147937">AddInt64</span><span class="op" id="1147945">(</span><span class="op" id="1147946">&amp;</span><span class="ident" id="1147947">x</span><span class="op" id="1147948">.</span><span class="ident" id="1147949">i</span><span class="op" id="1147950">,</span>&nbsp;<span class="ident" id="1147952">delta</span><span class="op" id="1147957">)</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1147961">j</span>&nbsp;<span class="op" id="1147963">+=</span>&nbsp;<span class="ident" id="1147966">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1147974">if</span>&nbsp;<span class="ident" id="1147977">x</span><span class="op" id="1147978">.</span><span class="ident" id="1147979">i</span>&nbsp;<span class="op" id="1147981">!=</span>&nbsp;<span class="ident" id="1147984">j</span>&nbsp;<span class="op" id="1147986">||</span>&nbsp;<span class="ident" id="1147989">k</span>&nbsp;<span class="op" id="1147991">!=</span>&nbsp;<span class="ident" id="1147994">j</span>&nbsp;<span class="op" id="1147996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148001">t</span><span class="op" id="1148002">.</span><span class="ident" id="1148003">Fatalf</span><span class="op" id="1148009">(</span><span class="string" id="1148010">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1148035">,</span>&nbsp;<span class="ident" id="1148037">delta</span><span class="op" id="1148042">,</span>&nbsp;<span class="ident" id="1148044">x</span><span class="op" id="1148045">.</span><span class="ident" id="1148046">i</span><span class="op" id="1148047">,</span>&nbsp;<span class="ident" id="1148049">j</span><span class="op" id="1148050">,</span>&nbsp;<span class="ident" id="1148052">k</span><span class="op" id="1148053">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148060">}</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148063">if</span>&nbsp;<span class="ident" id="1148066">x</span><span class="op" id="1148067">.</span><span class="ident" id="1148068">before</span>&nbsp;<span class="op" id="1148075">!=</span>&nbsp;<span class="ident" id="1148078">magic64</span>&nbsp;<span class="op" id="1148086">||</span>&nbsp;<span class="ident" id="1148089">x</span><span class="op" id="1148090">.</span><span class="ident" id="1148091">after</span>&nbsp;<span class="op" id="1148097">!=</span>&nbsp;<span class="ident" id="1148100">magic64</span>&nbsp;<span class="op" id="1148108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148112">t</span><span class="op" id="1148113">.</span><span class="ident" id="1148114">Fatalf</span><span class="op" id="1148120">(</span><span class="string" id="1148121">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1148158">,</span>&nbsp;<span class="ident" id="1148160">x</span><span class="op" id="1148161">.</span><span class="ident" id="1148162">before</span><span class="op" id="1148168">,</span>&nbsp;<span class="ident" id="1148170">x</span><span class="op" id="1148171">.</span><span class="ident" id="1148172">after</span><span class="op" id="1148177">,</span>&nbsp;<span class="ident" id="1148179">int64</span><span class="op" id="1148184">(</span><span class="ident" id="1148185">magic64</span><span class="op" id="1148192">)</span><span class="op" id="1148193">,</span>&nbsp;<span class="ident" id="1148195">int64</span><span class="op" id="1148200">(</span><span class="ident" id="1148201">magic64</span><span class="op" id="1148208">)</span><span class="op" id="1148209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148212">}</span><br>
<span class="lineno"></span><span class="op" id="1148214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="1148217">func</span>&nbsp;<span class="ident" id="1148222">TestAddUint64</span><span class="op" id="1148235">(</span><span class="ident" id="1148236">t</span>&nbsp;<span class="op" id="1148238">*</span><span class="ident" id="1148239">testing</span><span class="op" id="1148246">.</span><span class="ident" id="1148247">T</span><span class="op" id="1148248">)</span>&nbsp;<span class="op" id="1148250">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148253">if</span>&nbsp;<span class="ident" id="1148256">test64err</span>&nbsp;<span class="op" id="1148266">!=</span>&nbsp;<span class="ident" id="1148269">nil</span>&nbsp;<span class="op" id="1148273">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148277">t</span><span class="op" id="1148278">.</span><span class="ident" id="1148279">Skipf</span><span class="op" id="1148284">(</span><span class="string" id="1148285">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1148312">,</span>&nbsp;<span class="ident" id="1148314">test64err</span><span class="op" id="1148323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148329">var</span>&nbsp;<span class="ident" id="1148333">x</span>&nbsp;<span class="keyword" id="1148335">struct</span>&nbsp;<span class="op" id="1148342">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148346">before</span>&nbsp;<span class="ident" id="1148353">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148362">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1148369">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148378">after</span>&nbsp;&nbsp;<span class="ident" id="1148385">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148393">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148396">x</span><span class="op" id="1148397">.</span><span class="ident" id="1148398">before</span>&nbsp;<span class="op" id="1148405">=</span>&nbsp;<span class="ident" id="1148407">magic64</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148416">x</span><span class="op" id="1148417">.</span><span class="ident" id="1148418">after</span>&nbsp;<span class="op" id="1148424">=</span>&nbsp;<span class="ident" id="1148426">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148435">var</span>&nbsp;<span class="ident" id="1148439">j</span>&nbsp;<span class="ident" id="1148441">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148449">for</span>&nbsp;<span class="ident" id="1148453">delta</span>&nbsp;<span class="op" id="1148459">:=</span>&nbsp;<span class="ident" id="1148462">uint64</span><span class="op" id="1148468">(</span><span class="num" id="1148469">1</span><span class="op" id="1148470">)</span><span class="op" id="1148471">;</span>&nbsp;<span class="ident" id="1148473">delta</span><span class="op" id="1148478">+</span><span class="ident" id="1148479">delta</span>&nbsp;<span class="op" id="1148485">&gt;</span>&nbsp;<span class="ident" id="1148487">delta</span><span class="op" id="1148492">;</span>&nbsp;<span class="ident" id="1148494">delta</span>&nbsp;<span class="op" id="1148500">+=</span>&nbsp;<span class="ident" id="1148503">delta</span>&nbsp;<span class="op" id="1148509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148513">k</span>&nbsp;<span class="op" id="1148515">:=</span>&nbsp;<span class="ident" id="1148518">AddUint64</span><span class="op" id="1148527">(</span><span class="op" id="1148528">&amp;</span><span class="ident" id="1148529">x</span><span class="op" id="1148530">.</span><span class="ident" id="1148531">i</span><span class="op" id="1148532">,</span>&nbsp;<span class="ident" id="1148534">delta</span><span class="op" id="1148539">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148543">j</span>&nbsp;<span class="op" id="1148545">+=</span>&nbsp;<span class="ident" id="1148548">delta</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148556">if</span>&nbsp;<span class="ident" id="1148559">x</span><span class="op" id="1148560">.</span><span class="ident" id="1148561">i</span>&nbsp;<span class="op" id="1148563">!=</span>&nbsp;<span class="ident" id="1148566">j</span>&nbsp;<span class="op" id="1148568">||</span>&nbsp;<span class="ident" id="1148571">k</span>&nbsp;<span class="op" id="1148573">!=</span>&nbsp;<span class="ident" id="1148576">j</span>&nbsp;<span class="op" id="1148578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148583">t</span><span class="op" id="1148584">.</span><span class="ident" id="1148585">Fatalf</span><span class="op" id="1148591">(</span><span class="string" id="1148592">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1148617">,</span>&nbsp;<span class="ident" id="1148619">delta</span><span class="op" id="1148624">,</span>&nbsp;<span class="ident" id="1148626">x</span><span class="op" id="1148627">.</span><span class="ident" id="1148628">i</span><span class="op" id="1148629">,</span>&nbsp;<span class="ident" id="1148631">j</span><span class="op" id="1148632">,</span>&nbsp;<span class="ident" id="1148634">k</span><span class="op" id="1148635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148639">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148645">if</span>&nbsp;<span class="ident" id="1148648">x</span><span class="op" id="1148649">.</span><span class="ident" id="1148650">before</span>&nbsp;<span class="op" id="1148657">!=</span>&nbsp;<span class="ident" id="1148660">magic64</span>&nbsp;<span class="op" id="1148668">||</span>&nbsp;<span class="ident" id="1148671">x</span><span class="op" id="1148672">.</span><span class="ident" id="1148673">after</span>&nbsp;<span class="op" id="1148679">!=</span>&nbsp;<span class="ident" id="1148682">magic64</span>&nbsp;<span class="op" id="1148690">{</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148694">t</span><span class="op" id="1148695">.</span><span class="ident" id="1148696">Fatalf</span><span class="op" id="1148702">(</span><span class="string" id="1148703">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1148740">,</span>&nbsp;<span class="ident" id="1148742">x</span><span class="op" id="1148743">.</span><span class="ident" id="1148744">before</span><span class="op" id="1148750">,</span>&nbsp;<span class="ident" id="1148752">x</span><span class="op" id="1148753">.</span><span class="ident" id="1148754">after</span><span class="op" id="1148759">,</span>&nbsp;<span class="ident" id="1148761">uint64</span><span class="op" id="1148767">(</span><span class="ident" id="1148768">magic64</span><span class="op" id="1148775">)</span><span class="op" id="1148776">,</span>&nbsp;<span class="ident" id="1148778">uint64</span><span class="op" id="1148784">(</span><span class="ident" id="1148785">magic64</span><span class="op" id="1148792">)</span><span class="op" id="1148793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148796">}</span><br>
<span class="lineno"></span><span class="op" id="1148798">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1148801">func</span>&nbsp;<span class="ident" id="1148806">TestAddUintptr</span><span class="op" id="1148820">(</span><span class="ident" id="1148821">t</span>&nbsp;<span class="op" id="1148823">*</span><span class="ident" id="1148824">testing</span><span class="op" id="1148831">.</span><span class="ident" id="1148832">T</span><span class="op" id="1148833">)</span>&nbsp;<span class="op" id="1148835">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148838">var</span>&nbsp;<span class="ident" id="1148842">x</span>&nbsp;<span class="keyword" id="1148844">struct</span>&nbsp;<span class="op" id="1148851">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148855">before</span>&nbsp;<span class="builtintype" id="1148862">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148872">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1148879">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148889">after</span>&nbsp;&nbsp;<span class="builtintype" id="1148896">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1148905">}</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148908">var</span>&nbsp;<span class="ident" id="1148912">m</span>&nbsp;<span class="ident" id="1148914">uint64</span>&nbsp;<span class="op" id="1148921">=</span>&nbsp;<span class="ident" id="1148923">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148932">magicptr</span>&nbsp;<span class="op" id="1148941">:=</span>&nbsp;<span class="builtintype" id="1148944">uintptr</span><span class="op" id="1148951">(</span><span class="ident" id="1148952">m</span><span class="op" id="1148953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148956">x</span><span class="op" id="1148957">.</span><span class="ident" id="1148958">before</span>&nbsp;<span class="op" id="1148965">=</span>&nbsp;<span class="ident" id="1148967">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1148977">x</span><span class="op" id="1148978">.</span><span class="ident" id="1148979">after</span>&nbsp;<span class="op" id="1148985">=</span>&nbsp;<span class="ident" id="1148987">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1148997">var</span>&nbsp;<span class="ident" id="1149001">j</span>&nbsp;<span class="builtintype" id="1149003">uintptr</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149012">for</span>&nbsp;<span class="ident" id="1149016">delta</span>&nbsp;<span class="op" id="1149022">:=</span>&nbsp;<span class="builtintype" id="1149025">uintptr</span><span class="op" id="1149032">(</span><span class="num" id="1149033">1</span><span class="op" id="1149034">)</span><span class="op" id="1149035">;</span>&nbsp;<span class="ident" id="1149037">delta</span><span class="op" id="1149042">+</span><span class="ident" id="1149043">delta</span>&nbsp;<span class="op" id="1149049">&gt;</span>&nbsp;<span class="ident" id="1149051">delta</span><span class="op" id="1149056">;</span>&nbsp;<span class="ident" id="1149058">delta</span>&nbsp;<span class="op" id="1149064">+=</span>&nbsp;<span class="ident" id="1149067">delta</span>&nbsp;<span class="op" id="1149073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149077">k</span>&nbsp;<span class="op" id="1149079">:=</span>&nbsp;<span class="ident" id="1149082">AddUintptr</span><span class="op" id="1149092">(</span><span class="op" id="1149093">&amp;</span><span class="ident" id="1149094">x</span><span class="op" id="1149095">.</span><span class="ident" id="1149096">i</span><span class="op" id="1149097">,</span>&nbsp;<span class="ident" id="1149099">delta</span><span class="op" id="1149104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149108">j</span>&nbsp;<span class="op" id="1149110">+=</span>&nbsp;<span class="ident" id="1149113">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149121">if</span>&nbsp;<span class="ident" id="1149124">x</span><span class="op" id="1149125">.</span><span class="ident" id="1149126">i</span>&nbsp;<span class="op" id="1149128">!=</span>&nbsp;<span class="ident" id="1149131">j</span>&nbsp;<span class="op" id="1149133">||</span>&nbsp;<span class="ident" id="1149136">k</span>&nbsp;<span class="op" id="1149138">!=</span>&nbsp;<span class="ident" id="1149141">j</span>&nbsp;<span class="op" id="1149143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149148">t</span><span class="op" id="1149149">.</span><span class="ident" id="1149150">Fatalf</span><span class="op" id="1149156">(</span><span class="string" id="1149157">&#34;delta=%d&nbsp;i=%d&nbsp;j=%d&nbsp;k=%d&#34;</span><span class="op" id="1149182">,</span>&nbsp;<span class="ident" id="1149184">delta</span><span class="op" id="1149189">,</span>&nbsp;<span class="ident" id="1149191">x</span><span class="op" id="1149192">.</span><span class="ident" id="1149193">i</span><span class="op" id="1149194">,</span>&nbsp;<span class="ident" id="1149196">j</span><span class="op" id="1149197">,</span>&nbsp;<span class="ident" id="1149199">k</span><span class="op" id="1149200">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149204">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149207">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149210">if</span>&nbsp;<span class="ident" id="1149213">x</span><span class="op" id="1149214">.</span><span class="ident" id="1149215">before</span>&nbsp;<span class="op" id="1149222">!=</span>&nbsp;<span class="ident" id="1149225">magicptr</span>&nbsp;<span class="op" id="1149234">||</span>&nbsp;<span class="ident" id="1149237">x</span><span class="op" id="1149238">.</span><span class="ident" id="1149239">after</span>&nbsp;<span class="op" id="1149245">!=</span>&nbsp;<span class="ident" id="1149248">magicptr</span>&nbsp;<span class="op" id="1149257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149261">t</span><span class="op" id="1149262">.</span><span class="ident" id="1149263">Fatalf</span><span class="op" id="1149269">(</span><span class="string" id="1149270">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1149307">,</span>&nbsp;<span class="ident" id="1149309">x</span><span class="op" id="1149310">.</span><span class="ident" id="1149311">before</span><span class="op" id="1149317">,</span>&nbsp;<span class="ident" id="1149319">x</span><span class="op" id="1149320">.</span><span class="ident" id="1149321">after</span><span class="op" id="1149326">,</span>&nbsp;<span class="ident" id="1149328">magicptr</span><span class="op" id="1149336">,</span>&nbsp;<span class="ident" id="1149338">magicptr</span><span class="op" id="1149346">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149349">}</span><br>
<span class="lineno">290</span><span class="op" id="1149351">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1149354">func</span>&nbsp;<span class="ident" id="1149359">TestCompareAndSwapInt32</span><span class="op" id="1149382">(</span><span class="ident" id="1149383">t</span>&nbsp;<span class="op" id="1149385">*</span><span class="ident" id="1149386">testing</span><span class="op" id="1149393">.</span><span class="ident" id="1149394">T</span><span class="op" id="1149395">)</span>&nbsp;<span class="op" id="1149397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149400">var</span>&nbsp;<span class="ident" id="1149404">x</span>&nbsp;<span class="keyword" id="1149406">struct</span>&nbsp;<span class="op" id="1149413">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149417">before</span>&nbsp;<span class="builtintype" id="1149424">int32</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149432">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1149439">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149447">after</span>&nbsp;&nbsp;<span class="builtintype" id="1149454">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149464">x</span><span class="op" id="1149465">.</span><span class="ident" id="1149466">before</span>&nbsp;<span class="op" id="1149473">=</span>&nbsp;<span class="ident" id="1149475">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149484">x</span><span class="op" id="1149485">.</span><span class="ident" id="1149486">after</span>&nbsp;<span class="op" id="1149492">=</span>&nbsp;<span class="ident" id="1149494">magic32</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149503">for</span>&nbsp;<span class="ident" id="1149507">val</span>&nbsp;<span class="op" id="1149511">:=</span>&nbsp;<span class="builtintype" id="1149514">int32</span><span class="op" id="1149519">(</span><span class="num" id="1149520">1</span><span class="op" id="1149521">)</span><span class="op" id="1149522">;</span>&nbsp;<span class="ident" id="1149524">val</span><span class="op" id="1149527">+</span><span class="ident" id="1149528">val</span>&nbsp;<span class="op" id="1149532">&gt;</span>&nbsp;<span class="ident" id="1149534">val</span><span class="op" id="1149537">;</span>&nbsp;<span class="ident" id="1149539">val</span>&nbsp;<span class="op" id="1149543">+=</span>&nbsp;<span class="ident" id="1149546">val</span>&nbsp;<span class="op" id="1149550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149554">x</span><span class="op" id="1149555">.</span><span class="ident" id="1149556">i</span>&nbsp;<span class="op" id="1149558">=</span>&nbsp;<span class="ident" id="1149560">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149566">if</span>&nbsp;<span class="op" id="1149569">!</span><span class="ident" id="1149570">CompareAndSwapInt32</span><span class="op" id="1149589">(</span><span class="op" id="1149590">&amp;</span><span class="ident" id="1149591">x</span><span class="op" id="1149592">.</span><span class="ident" id="1149593">i</span><span class="op" id="1149594">,</span>&nbsp;<span class="ident" id="1149596">val</span><span class="op" id="1149599">,</span>&nbsp;<span class="ident" id="1149601">val</span><span class="op" id="1149604">+</span><span class="num" id="1149605">1</span><span class="op" id="1149606">)</span>&nbsp;<span class="op" id="1149608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149613">t</span><span class="op" id="1149614">.</span><span class="ident" id="1149615">Fatalf</span><span class="op" id="1149621">(</span><span class="string" id="1149622">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1149651">,</span>&nbsp;<span class="ident" id="1149653">val</span><span class="op" id="1149656">,</span>&nbsp;<span class="ident" id="1149658">val</span><span class="op" id="1149661">+</span><span class="num" id="1149662">1</span><span class="op" id="1149663">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149667">}</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149671">if</span>&nbsp;<span class="ident" id="1149674">x</span><span class="op" id="1149675">.</span><span class="ident" id="1149676">i</span>&nbsp;<span class="op" id="1149678">!=</span>&nbsp;<span class="ident" id="1149681">val</span><span class="op" id="1149684">+</span><span class="num" id="1149685">1</span>&nbsp;<span class="op" id="1149687">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149692">t</span><span class="op" id="1149693">.</span><span class="ident" id="1149694">Fatalf</span><span class="op" id="1149700">(</span><span class="string" id="1149701">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1149742">,</span>&nbsp;<span class="ident" id="1149744">x</span><span class="op" id="1149745">.</span><span class="ident" id="1149746">i</span><span class="op" id="1149747">,</span>&nbsp;<span class="ident" id="1149749">val</span><span class="op" id="1149752">+</span><span class="num" id="1149753">1</span><span class="op" id="1149754">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149762">x</span><span class="op" id="1149763">.</span><span class="ident" id="1149764">i</span>&nbsp;<span class="op" id="1149766">=</span>&nbsp;<span class="ident" id="1149768">val</span>&nbsp;<span class="op" id="1149772">+</span>&nbsp;<span class="num" id="1149774">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149778">if</span>&nbsp;<span class="ident" id="1149781">CompareAndSwapInt32</span><span class="op" id="1149800">(</span><span class="op" id="1149801">&amp;</span><span class="ident" id="1149802">x</span><span class="op" id="1149803">.</span><span class="ident" id="1149804">i</span><span class="op" id="1149805">,</span>&nbsp;<span class="ident" id="1149807">val</span><span class="op" id="1149810">,</span>&nbsp;<span class="ident" id="1149812">val</span><span class="op" id="1149815">+</span><span class="num" id="1149816">2</span><span class="op" id="1149817">)</span>&nbsp;<span class="op" id="1149819">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149824">t</span><span class="op" id="1149825">.</span><span class="ident" id="1149826">Fatalf</span><span class="op" id="1149832">(</span><span class="string" id="1149833">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1149866">,</span>&nbsp;<span class="ident" id="1149868">val</span><span class="op" id="1149871">,</span>&nbsp;<span class="ident" id="1149873">val</span><span class="op" id="1149876">+</span><span class="num" id="1149877">2</span><span class="op" id="1149878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149886">if</span>&nbsp;<span class="ident" id="1149889">x</span><span class="op" id="1149890">.</span><span class="ident" id="1149891">i</span>&nbsp;<span class="op" id="1149893">!=</span>&nbsp;<span class="ident" id="1149896">val</span><span class="op" id="1149899">+</span><span class="num" id="1149900">1</span>&nbsp;<span class="op" id="1149902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1149907">t</span><span class="op" id="1149908">.</span><span class="ident" id="1149909">Fatalf</span><span class="op" id="1149915">(</span><span class="string" id="1149916">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1149957">,</span>&nbsp;<span class="ident" id="1149959">x</span><span class="op" id="1149960">.</span><span class="ident" id="1149961">i</span><span class="op" id="1149962">,</span>&nbsp;<span class="ident" id="1149964">val</span><span class="op" id="1149967">+</span><span class="num" id="1149968">1</span><span class="op" id="1149969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149973">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1149976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1149979">if</span>&nbsp;<span class="ident" id="1149982">x</span><span class="op" id="1149983">.</span><span class="ident" id="1149984">before</span>&nbsp;<span class="op" id="1149991">!=</span>&nbsp;<span class="ident" id="1149994">magic32</span>&nbsp;<span class="op" id="1150002">||</span>&nbsp;<span class="ident" id="1150005">x</span><span class="op" id="1150006">.</span><span class="ident" id="1150007">after</span>&nbsp;<span class="op" id="1150013">!=</span>&nbsp;<span class="ident" id="1150016">magic32</span>&nbsp;<span class="op" id="1150024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150028">t</span><span class="op" id="1150029">.</span><span class="ident" id="1150030">Fatalf</span><span class="op" id="1150036">(</span><span class="string" id="1150037">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1150074">,</span>&nbsp;<span class="ident" id="1150076">x</span><span class="op" id="1150077">.</span><span class="ident" id="1150078">before</span><span class="op" id="1150084">,</span>&nbsp;<span class="ident" id="1150086">x</span><span class="op" id="1150087">.</span><span class="ident" id="1150088">after</span><span class="op" id="1150093">,</span>&nbsp;<span class="ident" id="1150095">magic32</span><span class="op" id="1150102">,</span>&nbsp;<span class="ident" id="1150104">magic32</span><span class="op" id="1150111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150114">}</span><br>
<span class="lineno"></span><span class="op" id="1150116">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="1150119">func</span>&nbsp;<span class="ident" id="1150124">TestCompareAndSwapUint32</span><span class="op" id="1150148">(</span><span class="ident" id="1150149">t</span>&nbsp;<span class="op" id="1150151">*</span><span class="ident" id="1150152">testing</span><span class="op" id="1150159">.</span><span class="ident" id="1150160">T</span><span class="op" id="1150161">)</span>&nbsp;<span class="op" id="1150163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150166">var</span>&nbsp;<span class="ident" id="1150170">x</span>&nbsp;<span class="keyword" id="1150172">struct</span>&nbsp;<span class="op" id="1150179">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150183">before</span>&nbsp;<span class="builtintype" id="1150190">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150199">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1150206">uint32</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150215">after</span>&nbsp;&nbsp;<span class="builtintype" id="1150222">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150230">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150233">x</span><span class="op" id="1150234">.</span><span class="ident" id="1150235">before</span>&nbsp;<span class="op" id="1150242">=</span>&nbsp;<span class="ident" id="1150244">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150253">x</span><span class="op" id="1150254">.</span><span class="ident" id="1150255">after</span>&nbsp;<span class="op" id="1150261">=</span>&nbsp;<span class="ident" id="1150263">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150272">for</span>&nbsp;<span class="ident" id="1150276">val</span>&nbsp;<span class="op" id="1150280">:=</span>&nbsp;<span class="builtintype" id="1150283">uint32</span><span class="op" id="1150289">(</span><span class="num" id="1150290">1</span><span class="op" id="1150291">)</span><span class="op" id="1150292">;</span>&nbsp;<span class="ident" id="1150294">val</span><span class="op" id="1150297">+</span><span class="ident" id="1150298">val</span>&nbsp;<span class="op" id="1150302">&gt;</span>&nbsp;<span class="ident" id="1150304">val</span><span class="op" id="1150307">;</span>&nbsp;<span class="ident" id="1150309">val</span>&nbsp;<span class="op" id="1150313">+=</span>&nbsp;<span class="ident" id="1150316">val</span>&nbsp;<span class="op" id="1150320">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150324">x</span><span class="op" id="1150325">.</span><span class="ident" id="1150326">i</span>&nbsp;<span class="op" id="1150328">=</span>&nbsp;<span class="ident" id="1150330">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150336">if</span>&nbsp;<span class="op" id="1150339">!</span><span class="ident" id="1150340">CompareAndSwapUint32</span><span class="op" id="1150360">(</span><span class="op" id="1150361">&amp;</span><span class="ident" id="1150362">x</span><span class="op" id="1150363">.</span><span class="ident" id="1150364">i</span><span class="op" id="1150365">,</span>&nbsp;<span class="ident" id="1150367">val</span><span class="op" id="1150370">,</span>&nbsp;<span class="ident" id="1150372">val</span><span class="op" id="1150375">+</span><span class="num" id="1150376">1</span><span class="op" id="1150377">)</span>&nbsp;<span class="op" id="1150379">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150384">t</span><span class="op" id="1150385">.</span><span class="ident" id="1150386">Fatalf</span><span class="op" id="1150392">(</span><span class="string" id="1150393">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1150422">,</span>&nbsp;<span class="ident" id="1150424">val</span><span class="op" id="1150427">,</span>&nbsp;<span class="ident" id="1150429">val</span><span class="op" id="1150432">+</span><span class="num" id="1150433">1</span><span class="op" id="1150434">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150442">if</span>&nbsp;<span class="ident" id="1150445">x</span><span class="op" id="1150446">.</span><span class="ident" id="1150447">i</span>&nbsp;<span class="op" id="1150449">!=</span>&nbsp;<span class="ident" id="1150452">val</span><span class="op" id="1150455">+</span><span class="num" id="1150456">1</span>&nbsp;<span class="op" id="1150458">{</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150463">t</span><span class="op" id="1150464">.</span><span class="ident" id="1150465">Fatalf</span><span class="op" id="1150471">(</span><span class="string" id="1150472">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1150513">,</span>&nbsp;<span class="ident" id="1150515">x</span><span class="op" id="1150516">.</span><span class="ident" id="1150517">i</span><span class="op" id="1150518">,</span>&nbsp;<span class="ident" id="1150520">val</span><span class="op" id="1150523">+</span><span class="num" id="1150524">1</span><span class="op" id="1150525">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150533">x</span><span class="op" id="1150534">.</span><span class="ident" id="1150535">i</span>&nbsp;<span class="op" id="1150537">=</span>&nbsp;<span class="ident" id="1150539">val</span>&nbsp;<span class="op" id="1150543">+</span>&nbsp;<span class="num" id="1150545">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150549">if</span>&nbsp;<span class="ident" id="1150552">CompareAndSwapUint32</span><span class="op" id="1150572">(</span><span class="op" id="1150573">&amp;</span><span class="ident" id="1150574">x</span><span class="op" id="1150575">.</span><span class="ident" id="1150576">i</span><span class="op" id="1150577">,</span>&nbsp;<span class="ident" id="1150579">val</span><span class="op" id="1150582">,</span>&nbsp;<span class="ident" id="1150584">val</span><span class="op" id="1150587">+</span><span class="num" id="1150588">2</span><span class="op" id="1150589">)</span>&nbsp;<span class="op" id="1150591">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150596">t</span><span class="op" id="1150597">.</span><span class="ident" id="1150598">Fatalf</span><span class="op" id="1150604">(</span><span class="string" id="1150605">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1150638">,</span>&nbsp;<span class="ident" id="1150640">val</span><span class="op" id="1150643">,</span>&nbsp;<span class="ident" id="1150645">val</span><span class="op" id="1150648">+</span><span class="num" id="1150649">2</span><span class="op" id="1150650">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150654">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150658">if</span>&nbsp;<span class="ident" id="1150661">x</span><span class="op" id="1150662">.</span><span class="ident" id="1150663">i</span>&nbsp;<span class="op" id="1150665">!=</span>&nbsp;<span class="ident" id="1150668">val</span><span class="op" id="1150671">+</span><span class="num" id="1150672">1</span>&nbsp;<span class="op" id="1150674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150679">t</span><span class="op" id="1150680">.</span><span class="ident" id="1150681">Fatalf</span><span class="op" id="1150687">(</span><span class="string" id="1150688">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1150729">,</span>&nbsp;<span class="ident" id="1150731">x</span><span class="op" id="1150732">.</span><span class="ident" id="1150733">i</span><span class="op" id="1150734">,</span>&nbsp;<span class="ident" id="1150736">val</span><span class="op" id="1150739">+</span><span class="num" id="1150740">1</span><span class="op" id="1150741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150748">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150751">if</span>&nbsp;<span class="ident" id="1150754">x</span><span class="op" id="1150755">.</span><span class="ident" id="1150756">before</span>&nbsp;<span class="op" id="1150763">!=</span>&nbsp;<span class="ident" id="1150766">magic32</span>&nbsp;<span class="op" id="1150774">||</span>&nbsp;<span class="ident" id="1150777">x</span><span class="op" id="1150778">.</span><span class="ident" id="1150779">after</span>&nbsp;<span class="op" id="1150785">!=</span>&nbsp;<span class="ident" id="1150788">magic32</span>&nbsp;<span class="op" id="1150796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150800">t</span><span class="op" id="1150801">.</span><span class="ident" id="1150802">Fatalf</span><span class="op" id="1150808">(</span><span class="string" id="1150809">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1150846">,</span>&nbsp;<span class="ident" id="1150848">x</span><span class="op" id="1150849">.</span><span class="ident" id="1150850">before</span><span class="op" id="1150856">,</span>&nbsp;<span class="ident" id="1150858">x</span><span class="op" id="1150859">.</span><span class="ident" id="1150860">after</span><span class="op" id="1150865">,</span>&nbsp;<span class="ident" id="1150867">magic32</span><span class="op" id="1150874">,</span>&nbsp;<span class="ident" id="1150876">magic32</span><span class="op" id="1150883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1150886">}</span><br>
<span class="lineno"></span><span class="op" id="1150888">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">350</span><span class="keyword" id="1150891">func</span>&nbsp;<span class="ident" id="1150896">TestCompareAndSwapInt64</span><span class="op" id="1150919">(</span><span class="ident" id="1150920">t</span>&nbsp;<span class="op" id="1150922">*</span><span class="ident" id="1150923">testing</span><span class="op" id="1150930">.</span><span class="ident" id="1150931">T</span><span class="op" id="1150932">)</span>&nbsp;<span class="op" id="1150934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1150937">if</span>&nbsp;<span class="ident" id="1150940">test64err</span>&nbsp;<span class="op" id="1150950">!=</span>&nbsp;<span class="ident" id="1150953">nil</span>&nbsp;<span class="op" id="1150957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1150961">t</span><span class="op" id="1150962">.</span><span class="ident" id="1150963">Skipf</span><span class="op" id="1150968">(</span><span class="string" id="1150969">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1150996">,</span>&nbsp;<span class="ident" id="1150998">test64err</span><span class="op" id="1151007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151013">var</span>&nbsp;<span class="ident" id="1151017">x</span>&nbsp;<span class="keyword" id="1151019">struct</span>&nbsp;<span class="op" id="1151026">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151030">before</span>&nbsp;<span class="ident" id="1151037">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151045">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1151052">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151060">after</span>&nbsp;&nbsp;<span class="ident" id="1151067">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151077">x</span><span class="op" id="1151078">.</span><span class="ident" id="1151079">before</span>&nbsp;<span class="op" id="1151086">=</span>&nbsp;<span class="ident" id="1151088">magic64</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151097">x</span><span class="op" id="1151098">.</span><span class="ident" id="1151099">after</span>&nbsp;<span class="op" id="1151105">=</span>&nbsp;<span class="ident" id="1151107">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151116">for</span>&nbsp;<span class="ident" id="1151120">val</span>&nbsp;<span class="op" id="1151124">:=</span>&nbsp;<span class="ident" id="1151127">int64</span><span class="op" id="1151132">(</span><span class="num" id="1151133">1</span><span class="op" id="1151134">)</span><span class="op" id="1151135">;</span>&nbsp;<span class="ident" id="1151137">val</span><span class="op" id="1151140">+</span><span class="ident" id="1151141">val</span>&nbsp;<span class="op" id="1151145">&gt;</span>&nbsp;<span class="ident" id="1151147">val</span><span class="op" id="1151150">;</span>&nbsp;<span class="ident" id="1151152">val</span>&nbsp;<span class="op" id="1151156">+=</span>&nbsp;<span class="ident" id="1151159">val</span>&nbsp;<span class="op" id="1151163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151167">x</span><span class="op" id="1151168">.</span><span class="ident" id="1151169">i</span>&nbsp;<span class="op" id="1151171">=</span>&nbsp;<span class="ident" id="1151173">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151179">if</span>&nbsp;<span class="op" id="1151182">!</span><span class="ident" id="1151183">CompareAndSwapInt64</span><span class="op" id="1151202">(</span><span class="op" id="1151203">&amp;</span><span class="ident" id="1151204">x</span><span class="op" id="1151205">.</span><span class="ident" id="1151206">i</span><span class="op" id="1151207">,</span>&nbsp;<span class="ident" id="1151209">val</span><span class="op" id="1151212">,</span>&nbsp;<span class="ident" id="1151214">val</span><span class="op" id="1151217">+</span><span class="num" id="1151218">1</span><span class="op" id="1151219">)</span>&nbsp;<span class="op" id="1151221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151226">t</span><span class="op" id="1151227">.</span><span class="ident" id="1151228">Fatalf</span><span class="op" id="1151234">(</span><span class="string" id="1151235">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1151264">,</span>&nbsp;<span class="ident" id="1151266">val</span><span class="op" id="1151269">,</span>&nbsp;<span class="ident" id="1151271">val</span><span class="op" id="1151274">+</span><span class="num" id="1151275">1</span><span class="op" id="1151276">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151284">if</span>&nbsp;<span class="ident" id="1151287">x</span><span class="op" id="1151288">.</span><span class="ident" id="1151289">i</span>&nbsp;<span class="op" id="1151291">!=</span>&nbsp;<span class="ident" id="1151294">val</span><span class="op" id="1151297">+</span><span class="num" id="1151298">1</span>&nbsp;<span class="op" id="1151300">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151305">t</span><span class="op" id="1151306">.</span><span class="ident" id="1151307">Fatalf</span><span class="op" id="1151313">(</span><span class="string" id="1151314">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1151355">,</span>&nbsp;<span class="ident" id="1151357">x</span><span class="op" id="1151358">.</span><span class="ident" id="1151359">i</span><span class="op" id="1151360">,</span>&nbsp;<span class="ident" id="1151362">val</span><span class="op" id="1151365">+</span><span class="num" id="1151366">1</span><span class="op" id="1151367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151371">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151375">x</span><span class="op" id="1151376">.</span><span class="ident" id="1151377">i</span>&nbsp;<span class="op" id="1151379">=</span>&nbsp;<span class="ident" id="1151381">val</span>&nbsp;<span class="op" id="1151385">+</span>&nbsp;<span class="num" id="1151387">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151391">if</span>&nbsp;<span class="ident" id="1151394">CompareAndSwapInt64</span><span class="op" id="1151413">(</span><span class="op" id="1151414">&amp;</span><span class="ident" id="1151415">x</span><span class="op" id="1151416">.</span><span class="ident" id="1151417">i</span><span class="op" id="1151418">,</span>&nbsp;<span class="ident" id="1151420">val</span><span class="op" id="1151423">,</span>&nbsp;<span class="ident" id="1151425">val</span><span class="op" id="1151428">+</span><span class="num" id="1151429">2</span><span class="op" id="1151430">)</span>&nbsp;<span class="op" id="1151432">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151437">t</span><span class="op" id="1151438">.</span><span class="ident" id="1151439">Fatalf</span><span class="op" id="1151445">(</span><span class="string" id="1151446">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1151479">,</span>&nbsp;<span class="ident" id="1151481">val</span><span class="op" id="1151484">,</span>&nbsp;<span class="ident" id="1151486">val</span><span class="op" id="1151489">+</span><span class="num" id="1151490">2</span><span class="op" id="1151491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151495">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151499">if</span>&nbsp;<span class="ident" id="1151502">x</span><span class="op" id="1151503">.</span><span class="ident" id="1151504">i</span>&nbsp;<span class="op" id="1151506">!=</span>&nbsp;<span class="ident" id="1151509">val</span><span class="op" id="1151512">+</span><span class="num" id="1151513">1</span>&nbsp;<span class="op" id="1151515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151520">t</span><span class="op" id="1151521">.</span><span class="ident" id="1151522">Fatalf</span><span class="op" id="1151528">(</span><span class="string" id="1151529">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1151570">,</span>&nbsp;<span class="ident" id="1151572">x</span><span class="op" id="1151573">.</span><span class="ident" id="1151574">i</span><span class="op" id="1151575">,</span>&nbsp;<span class="ident" id="1151577">val</span><span class="op" id="1151580">+</span><span class="num" id="1151581">1</span><span class="op" id="1151582">)</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151586">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151589">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151592">if</span>&nbsp;<span class="ident" id="1151595">x</span><span class="op" id="1151596">.</span><span class="ident" id="1151597">before</span>&nbsp;<span class="op" id="1151604">!=</span>&nbsp;<span class="ident" id="1151607">magic64</span>&nbsp;<span class="op" id="1151615">||</span>&nbsp;<span class="ident" id="1151618">x</span><span class="op" id="1151619">.</span><span class="ident" id="1151620">after</span>&nbsp;<span class="op" id="1151626">!=</span>&nbsp;<span class="ident" id="1151629">magic64</span>&nbsp;<span class="op" id="1151637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151641">t</span><span class="op" id="1151642">.</span><span class="ident" id="1151643">Fatalf</span><span class="op" id="1151649">(</span><span class="string" id="1151650">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1151687">,</span>&nbsp;<span class="ident" id="1151689">x</span><span class="op" id="1151690">.</span><span class="ident" id="1151691">before</span><span class="op" id="1151697">,</span>&nbsp;<span class="ident" id="1151699">x</span><span class="op" id="1151700">.</span><span class="ident" id="1151701">after</span><span class="op" id="1151706">,</span>&nbsp;<span class="ident" id="1151708">uint64</span><span class="op" id="1151714">(</span><span class="ident" id="1151715">magic64</span><span class="op" id="1151722">)</span><span class="op" id="1151723">,</span>&nbsp;<span class="ident" id="1151725">uint64</span><span class="op" id="1151731">(</span><span class="ident" id="1151732">magic64</span><span class="op" id="1151739">)</span><span class="op" id="1151740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151743">}</span><br>
<span class="lineno">380</span><span class="op" id="1151745">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1151748">func</span>&nbsp;<span class="ident" id="1151753">testCompareAndSwapUint64</span><span class="op" id="1151777">(</span><span class="ident" id="1151778">t</span>&nbsp;<span class="op" id="1151780">*</span><span class="ident" id="1151781">testing</span><span class="op" id="1151788">.</span><span class="ident" id="1151789">T</span><span class="op" id="1151790">,</span>&nbsp;<span class="ident" id="1151792">cas</span>&nbsp;<span class="keyword" id="1151796">func</span><span class="op" id="1151800">(</span><span class="op" id="1151801">*</span><span class="ident" id="1151802">uint64</span><span class="op" id="1151808">,</span>&nbsp;<span class="ident" id="1151810">uint64</span><span class="op" id="1151816">,</span>&nbsp;<span class="ident" id="1151818">uint64</span><span class="op" id="1151824">)</span>&nbsp;<span class="builtintype" id="1151826">bool</span><span class="op" id="1151830">)</span>&nbsp;<span class="op" id="1151832">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151835">if</span>&nbsp;<span class="ident" id="1151838">test64err</span>&nbsp;<span class="op" id="1151848">!=</span>&nbsp;<span class="ident" id="1151851">nil</span>&nbsp;<span class="op" id="1151855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151859">t</span><span class="op" id="1151860">.</span><span class="ident" id="1151861">Skipf</span><span class="op" id="1151866">(</span><span class="string" id="1151867">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1151894">,</span>&nbsp;<span class="ident" id="1151896">test64err</span><span class="op" id="1151905">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151908">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1151911">var</span>&nbsp;<span class="ident" id="1151915">x</span>&nbsp;<span class="keyword" id="1151917">struct</span>&nbsp;<span class="op" id="1151924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151928">before</span>&nbsp;<span class="ident" id="1151935">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151944">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1151951">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151960">after</span>&nbsp;&nbsp;<span class="ident" id="1151967">uint64</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1151975">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151978">x</span><span class="op" id="1151979">.</span><span class="ident" id="1151980">before</span>&nbsp;<span class="op" id="1151987">=</span>&nbsp;<span class="ident" id="1151989">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1151998">x</span><span class="op" id="1151999">.</span><span class="ident" id="1152000">after</span>&nbsp;<span class="op" id="1152006">=</span>&nbsp;<span class="ident" id="1152008">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152017">for</span>&nbsp;<span class="ident" id="1152021">val</span>&nbsp;<span class="op" id="1152025">:=</span>&nbsp;<span class="ident" id="1152028">uint64</span><span class="op" id="1152034">(</span><span class="num" id="1152035">1</span><span class="op" id="1152036">)</span><span class="op" id="1152037">;</span>&nbsp;<span class="ident" id="1152039">val</span><span class="op" id="1152042">+</span><span class="ident" id="1152043">val</span>&nbsp;<span class="op" id="1152047">&gt;</span>&nbsp;<span class="ident" id="1152049">val</span><span class="op" id="1152052">;</span>&nbsp;<span class="ident" id="1152054">val</span>&nbsp;<span class="op" id="1152058">+=</span>&nbsp;<span class="ident" id="1152061">val</span>&nbsp;<span class="op" id="1152065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152069">x</span><span class="op" id="1152070">.</span><span class="ident" id="1152071">i</span>&nbsp;<span class="op" id="1152073">=</span>&nbsp;<span class="ident" id="1152075">val</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152081">if</span>&nbsp;<span class="op" id="1152084">!</span><span class="ident" id="1152085">cas</span><span class="op" id="1152088">(</span><span class="op" id="1152089">&amp;</span><span class="ident" id="1152090">x</span><span class="op" id="1152091">.</span><span class="ident" id="1152092">i</span><span class="op" id="1152093">,</span>&nbsp;<span class="ident" id="1152095">val</span><span class="op" id="1152098">,</span>&nbsp;<span class="ident" id="1152100">val</span><span class="op" id="1152103">+</span><span class="num" id="1152104">1</span><span class="op" id="1152105">)</span>&nbsp;<span class="op" id="1152107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152112">t</span><span class="op" id="1152113">.</span><span class="ident" id="1152114">Fatalf</span><span class="op" id="1152120">(</span><span class="string" id="1152121">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1152150">,</span>&nbsp;<span class="ident" id="1152152">val</span><span class="op" id="1152155">,</span>&nbsp;<span class="ident" id="1152157">val</span><span class="op" id="1152160">+</span><span class="num" id="1152161">1</span><span class="op" id="1152162">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152166">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152170">if</span>&nbsp;<span class="ident" id="1152173">x</span><span class="op" id="1152174">.</span><span class="ident" id="1152175">i</span>&nbsp;<span class="op" id="1152177">!=</span>&nbsp;<span class="ident" id="1152180">val</span><span class="op" id="1152183">+</span><span class="num" id="1152184">1</span>&nbsp;<span class="op" id="1152186">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152191">t</span><span class="op" id="1152192">.</span><span class="ident" id="1152193">Fatalf</span><span class="op" id="1152199">(</span><span class="string" id="1152200">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1152241">,</span>&nbsp;<span class="ident" id="1152243">x</span><span class="op" id="1152244">.</span><span class="ident" id="1152245">i</span><span class="op" id="1152246">,</span>&nbsp;<span class="ident" id="1152248">val</span><span class="op" id="1152251">+</span><span class="num" id="1152252">1</span><span class="op" id="1152253">)</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152257">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152261">x</span><span class="op" id="1152262">.</span><span class="ident" id="1152263">i</span>&nbsp;<span class="op" id="1152265">=</span>&nbsp;<span class="ident" id="1152267">val</span>&nbsp;<span class="op" id="1152271">+</span>&nbsp;<span class="num" id="1152273">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152277">if</span>&nbsp;<span class="ident" id="1152280">cas</span><span class="op" id="1152283">(</span><span class="op" id="1152284">&amp;</span><span class="ident" id="1152285">x</span><span class="op" id="1152286">.</span><span class="ident" id="1152287">i</span><span class="op" id="1152288">,</span>&nbsp;<span class="ident" id="1152290">val</span><span class="op" id="1152293">,</span>&nbsp;<span class="ident" id="1152295">val</span><span class="op" id="1152298">+</span><span class="num" id="1152299">2</span><span class="op" id="1152300">)</span>&nbsp;<span class="op" id="1152302">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152307">t</span><span class="op" id="1152308">.</span><span class="ident" id="1152309">Fatalf</span><span class="op" id="1152315">(</span><span class="string" id="1152316">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1152349">,</span>&nbsp;<span class="ident" id="1152351">val</span><span class="op" id="1152354">,</span>&nbsp;<span class="ident" id="1152356">val</span><span class="op" id="1152359">+</span><span class="num" id="1152360">2</span><span class="op" id="1152361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152365">}</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152369">if</span>&nbsp;<span class="ident" id="1152372">x</span><span class="op" id="1152373">.</span><span class="ident" id="1152374">i</span>&nbsp;<span class="op" id="1152376">!=</span>&nbsp;<span class="ident" id="1152379">val</span><span class="op" id="1152382">+</span><span class="num" id="1152383">1</span>&nbsp;<span class="op" id="1152385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152390">t</span><span class="op" id="1152391">.</span><span class="ident" id="1152392">Fatalf</span><span class="op" id="1152398">(</span><span class="string" id="1152399">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1152440">,</span>&nbsp;<span class="ident" id="1152442">x</span><span class="op" id="1152443">.</span><span class="ident" id="1152444">i</span><span class="op" id="1152445">,</span>&nbsp;<span class="ident" id="1152447">val</span><span class="op" id="1152450">+</span><span class="num" id="1152451">1</span><span class="op" id="1152452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152456">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152462">if</span>&nbsp;<span class="ident" id="1152465">x</span><span class="op" id="1152466">.</span><span class="ident" id="1152467">before</span>&nbsp;<span class="op" id="1152474">!=</span>&nbsp;<span class="ident" id="1152477">magic64</span>&nbsp;<span class="op" id="1152485">||</span>&nbsp;<span class="ident" id="1152488">x</span><span class="op" id="1152489">.</span><span class="ident" id="1152490">after</span>&nbsp;<span class="op" id="1152496">!=</span>&nbsp;<span class="ident" id="1152499">magic64</span>&nbsp;<span class="op" id="1152507">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152511">t</span><span class="op" id="1152512">.</span><span class="ident" id="1152513">Fatalf</span><span class="op" id="1152519">(</span><span class="string" id="1152520">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1152557">,</span>&nbsp;<span class="ident" id="1152559">x</span><span class="op" id="1152560">.</span><span class="ident" id="1152561">before</span><span class="op" id="1152567">,</span>&nbsp;<span class="ident" id="1152569">x</span><span class="op" id="1152570">.</span><span class="ident" id="1152571">after</span><span class="op" id="1152576">,</span>&nbsp;<span class="ident" id="1152578">uint64</span><span class="op" id="1152584">(</span><span class="ident" id="1152585">magic64</span><span class="op" id="1152592">)</span><span class="op" id="1152593">,</span>&nbsp;<span class="ident" id="1152595">uint64</span><span class="op" id="1152601">(</span><span class="ident" id="1152602">magic64</span><span class="op" id="1152609">)</span><span class="op" id="1152610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152613">}</span><br>
<span class="lineno"></span><span class="op" id="1152615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1152618">func</span>&nbsp;<span class="ident" id="1152623">TestCompareAndSwapUint64</span><span class="op" id="1152647">(</span><span class="ident" id="1152648">t</span>&nbsp;<span class="op" id="1152650">*</span><span class="ident" id="1152651">testing</span><span class="op" id="1152658">.</span><span class="ident" id="1152659">T</span><span class="op" id="1152660">)</span>&nbsp;<span class="op" id="1152662">{</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152665">testCompareAndSwapUint64</span><span class="op" id="1152689">(</span><span class="ident" id="1152690">t</span><span class="op" id="1152691">,</span>&nbsp;<span class="ident" id="1152693">CompareAndSwapUint64</span><span class="op" id="1152713">)</span><br>
<span class="lineno"></span><span class="op" id="1152715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1152718">func</span>&nbsp;<span class="ident" id="1152723">TestCompareAndSwapUintptr</span><span class="op" id="1152748">(</span><span class="ident" id="1152749">t</span>&nbsp;<span class="op" id="1152751">*</span><span class="ident" id="1152752">testing</span><span class="op" id="1152759">.</span><span class="ident" id="1152760">T</span><span class="op" id="1152761">)</span>&nbsp;<span class="op" id="1152763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152766">var</span>&nbsp;<span class="ident" id="1152770">x</span>&nbsp;<span class="keyword" id="1152772">struct</span>&nbsp;<span class="op" id="1152779">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152783">before</span>&nbsp;<span class="builtintype" id="1152790">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152800">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1152807">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152817">after</span>&nbsp;&nbsp;<span class="builtintype" id="1152824">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1152833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152836">var</span>&nbsp;<span class="ident" id="1152840">m</span>&nbsp;<span class="ident" id="1152842">uint64</span>&nbsp;<span class="op" id="1152849">=</span>&nbsp;<span class="ident" id="1152851">magic64</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152860">magicptr</span>&nbsp;<span class="op" id="1152869">:=</span>&nbsp;<span class="builtintype" id="1152872">uintptr</span><span class="op" id="1152879">(</span><span class="ident" id="1152880">m</span><span class="op" id="1152881">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152884">x</span><span class="op" id="1152885">.</span><span class="ident" id="1152886">before</span>&nbsp;<span class="op" id="1152893">=</span>&nbsp;<span class="ident" id="1152895">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152905">x</span><span class="op" id="1152906">.</span><span class="ident" id="1152907">after</span>&nbsp;<span class="op" id="1152913">=</span>&nbsp;<span class="ident" id="1152915">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152925">for</span>&nbsp;<span class="ident" id="1152929">val</span>&nbsp;<span class="op" id="1152933">:=</span>&nbsp;<span class="builtintype" id="1152936">uintptr</span><span class="op" id="1152943">(</span><span class="num" id="1152944">1</span><span class="op" id="1152945">)</span><span class="op" id="1152946">;</span>&nbsp;<span class="ident" id="1152948">val</span><span class="op" id="1152951">+</span><span class="ident" id="1152952">val</span>&nbsp;<span class="op" id="1152956">&gt;</span>&nbsp;<span class="ident" id="1152958">val</span><span class="op" id="1152961">;</span>&nbsp;<span class="ident" id="1152963">val</span>&nbsp;<span class="op" id="1152967">+=</span>&nbsp;<span class="ident" id="1152970">val</span>&nbsp;<span class="op" id="1152974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1152978">x</span><span class="op" id="1152979">.</span><span class="ident" id="1152980">i</span>&nbsp;<span class="op" id="1152982">=</span>&nbsp;<span class="ident" id="1152984">val</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1152990">if</span>&nbsp;<span class="op" id="1152993">!</span><span class="ident" id="1152994">CompareAndSwapUintptr</span><span class="op" id="1153015">(</span><span class="op" id="1153016">&amp;</span><span class="ident" id="1153017">x</span><span class="op" id="1153018">.</span><span class="ident" id="1153019">i</span><span class="op" id="1153020">,</span>&nbsp;<span class="ident" id="1153022">val</span><span class="op" id="1153025">,</span>&nbsp;<span class="ident" id="1153027">val</span><span class="op" id="1153030">+</span><span class="num" id="1153031">1</span><span class="op" id="1153032">)</span>&nbsp;<span class="op" id="1153034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153039">t</span><span class="op" id="1153040">.</span><span class="ident" id="1153041">Fatalf</span><span class="op" id="1153047">(</span><span class="string" id="1153048">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1153077">,</span>&nbsp;<span class="ident" id="1153079">val</span><span class="op" id="1153082">,</span>&nbsp;<span class="ident" id="1153084">val</span><span class="op" id="1153087">+</span><span class="num" id="1153088">1</span><span class="op" id="1153089">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153093">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153097">if</span>&nbsp;<span class="ident" id="1153100">x</span><span class="op" id="1153101">.</span><span class="ident" id="1153102">i</span>&nbsp;<span class="op" id="1153104">!=</span>&nbsp;<span class="ident" id="1153107">val</span><span class="op" id="1153110">+</span><span class="num" id="1153111">1</span>&nbsp;<span class="op" id="1153113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153118">t</span><span class="op" id="1153119">.</span><span class="ident" id="1153120">Fatalf</span><span class="op" id="1153126">(</span><span class="string" id="1153127">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1153168">,</span>&nbsp;<span class="ident" id="1153170">x</span><span class="op" id="1153171">.</span><span class="ident" id="1153172">i</span><span class="op" id="1153173">,</span>&nbsp;<span class="ident" id="1153175">val</span><span class="op" id="1153178">+</span><span class="num" id="1153179">1</span><span class="op" id="1153180">)</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153188">x</span><span class="op" id="1153189">.</span><span class="ident" id="1153190">i</span>&nbsp;<span class="op" id="1153192">=</span>&nbsp;<span class="ident" id="1153194">val</span>&nbsp;<span class="op" id="1153198">+</span>&nbsp;<span class="num" id="1153200">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153204">if</span>&nbsp;<span class="ident" id="1153207">CompareAndSwapUintptr</span><span class="op" id="1153228">(</span><span class="op" id="1153229">&amp;</span><span class="ident" id="1153230">x</span><span class="op" id="1153231">.</span><span class="ident" id="1153232">i</span><span class="op" id="1153233">,</span>&nbsp;<span class="ident" id="1153235">val</span><span class="op" id="1153238">,</span>&nbsp;<span class="ident" id="1153240">val</span><span class="op" id="1153243">+</span><span class="num" id="1153244">2</span><span class="op" id="1153245">)</span>&nbsp;<span class="op" id="1153247">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153252">t</span><span class="op" id="1153253">.</span><span class="ident" id="1153254">Fatalf</span><span class="op" id="1153260">(</span><span class="string" id="1153261">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1153294">,</span>&nbsp;<span class="ident" id="1153296">val</span><span class="op" id="1153299">,</span>&nbsp;<span class="ident" id="1153301">val</span><span class="op" id="1153304">+</span><span class="num" id="1153305">2</span><span class="op" id="1153306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153310">}</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153314">if</span>&nbsp;<span class="ident" id="1153317">x</span><span class="op" id="1153318">.</span><span class="ident" id="1153319">i</span>&nbsp;<span class="op" id="1153321">!=</span>&nbsp;<span class="ident" id="1153324">val</span><span class="op" id="1153327">+</span><span class="num" id="1153328">1</span>&nbsp;<span class="op" id="1153330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153335">t</span><span class="op" id="1153336">.</span><span class="ident" id="1153337">Fatalf</span><span class="op" id="1153343">(</span><span class="string" id="1153344">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1153385">,</span>&nbsp;<span class="ident" id="1153387">x</span><span class="op" id="1153388">.</span><span class="ident" id="1153389">i</span><span class="op" id="1153390">,</span>&nbsp;<span class="ident" id="1153392">val</span><span class="op" id="1153395">+</span><span class="num" id="1153396">1</span><span class="op" id="1153397">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153404">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153407">if</span>&nbsp;<span class="ident" id="1153410">x</span><span class="op" id="1153411">.</span><span class="ident" id="1153412">before</span>&nbsp;<span class="op" id="1153419">!=</span>&nbsp;<span class="ident" id="1153422">magicptr</span>&nbsp;<span class="op" id="1153431">||</span>&nbsp;<span class="ident" id="1153434">x</span><span class="op" id="1153435">.</span><span class="ident" id="1153436">after</span>&nbsp;<span class="op" id="1153442">!=</span>&nbsp;<span class="ident" id="1153445">magicptr</span>&nbsp;<span class="op" id="1153454">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153458">t</span><span class="op" id="1153459">.</span><span class="ident" id="1153460">Fatalf</span><span class="op" id="1153466">(</span><span class="string" id="1153467">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1153504">,</span>&nbsp;<span class="ident" id="1153506">x</span><span class="op" id="1153507">.</span><span class="ident" id="1153508">before</span><span class="op" id="1153514">,</span>&nbsp;<span class="ident" id="1153516">x</span><span class="op" id="1153517">.</span><span class="ident" id="1153518">after</span><span class="op" id="1153523">,</span>&nbsp;<span class="ident" id="1153525">magicptr</span><span class="op" id="1153533">,</span>&nbsp;<span class="ident" id="1153535">magicptr</span><span class="op" id="1153543">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153546">}</span><br>
<span class="lineno"></span><span class="op" id="1153548">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1153551">func</span>&nbsp;<span class="ident" id="1153556">TestCompareAndSwapPointer</span><span class="op" id="1153581">(</span><span class="ident" id="1153582">t</span>&nbsp;<span class="op" id="1153584">*</span><span class="ident" id="1153585">testing</span><span class="op" id="1153592">.</span><span class="ident" id="1153593">T</span><span class="op" id="1153594">)</span>&nbsp;<span class="op" id="1153596">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153599">var</span>&nbsp;<span class="ident" id="1153603">x</span>&nbsp;<span class="keyword" id="1153605">struct</span>&nbsp;<span class="op" id="1153612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153616">before</span>&nbsp;<span class="builtintype" id="1153623">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153633">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1153640">unsafe</span><span class="op" id="1153646">.</span><span class="ident" id="1153647">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153657">after</span>&nbsp;&nbsp;<span class="builtintype" id="1153664">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153673">}</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153676">var</span>&nbsp;<span class="ident" id="1153680">m</span>&nbsp;<span class="ident" id="1153682">uint64</span>&nbsp;<span class="op" id="1153689">=</span>&nbsp;<span class="ident" id="1153691">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153700">magicptr</span>&nbsp;<span class="op" id="1153709">:=</span>&nbsp;<span class="builtintype" id="1153712">uintptr</span><span class="op" id="1153719">(</span><span class="ident" id="1153720">m</span><span class="op" id="1153721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153724">x</span><span class="op" id="1153725">.</span><span class="ident" id="1153726">before</span>&nbsp;<span class="op" id="1153733">=</span>&nbsp;<span class="ident" id="1153735">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153745">x</span><span class="op" id="1153746">.</span><span class="ident" id="1153747">after</span>&nbsp;<span class="op" id="1153753">=</span>&nbsp;<span class="ident" id="1153755">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153765">for</span>&nbsp;<span class="ident" id="1153769">val</span>&nbsp;<span class="op" id="1153773">:=</span>&nbsp;<span class="builtintype" id="1153776">uintptr</span><span class="op" id="1153783">(</span><span class="num" id="1153784">1</span><span class="op" id="1153785">)</span><span class="op" id="1153786">;</span>&nbsp;<span class="ident" id="1153788">val</span><span class="op" id="1153791">+</span><span class="ident" id="1153792">val</span>&nbsp;<span class="op" id="1153796">&gt;</span>&nbsp;<span class="ident" id="1153798">val</span><span class="op" id="1153801">;</span>&nbsp;<span class="ident" id="1153803">val</span>&nbsp;<span class="op" id="1153807">+=</span>&nbsp;<span class="ident" id="1153810">val</span>&nbsp;<span class="op" id="1153814">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153818">x</span><span class="op" id="1153819">.</span><span class="ident" id="1153820">i</span>&nbsp;<span class="op" id="1153822">=</span>&nbsp;<span class="ident" id="1153824">unsafe</span><span class="op" id="1153830">.</span><span class="ident" id="1153831">Pointer</span><span class="op" id="1153838">(</span><span class="ident" id="1153839">val</span><span class="op" id="1153842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153846">if</span>&nbsp;<span class="op" id="1153849">!</span><span class="ident" id="1153850">CompareAndSwapPointer</span><span class="op" id="1153871">(</span><span class="op" id="1153872">&amp;</span><span class="ident" id="1153873">x</span><span class="op" id="1153874">.</span><span class="ident" id="1153875">i</span><span class="op" id="1153876">,</span>&nbsp;<span class="ident" id="1153878">unsafe</span><span class="op" id="1153884">.</span><span class="ident" id="1153885">Pointer</span><span class="op" id="1153892">(</span><span class="ident" id="1153893">val</span><span class="op" id="1153896">)</span><span class="op" id="1153897">,</span>&nbsp;<span class="ident" id="1153899">unsafe</span><span class="op" id="1153905">.</span><span class="ident" id="1153906">Pointer</span><span class="op" id="1153913">(</span><span class="ident" id="1153914">val</span><span class="op" id="1153917">+</span><span class="num" id="1153918">1</span><span class="op" id="1153919">)</span><span class="op" id="1153920">)</span>&nbsp;<span class="op" id="1153922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1153927">t</span><span class="op" id="1153928">.</span><span class="ident" id="1153929">Fatalf</span><span class="op" id="1153935">(</span><span class="string" id="1153936">&#34;should&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1153965">,</span>&nbsp;<span class="ident" id="1153967">val</span><span class="op" id="1153970">,</span>&nbsp;<span class="ident" id="1153972">val</span><span class="op" id="1153975">+</span><span class="num" id="1153976">1</span><span class="op" id="1153977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1153981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1153985">if</span>&nbsp;<span class="ident" id="1153988">x</span><span class="op" id="1153989">.</span><span class="ident" id="1153990">i</span>&nbsp;<span class="op" id="1153992">!=</span>&nbsp;<span class="ident" id="1153995">unsafe</span><span class="op" id="1154001">.</span><span class="ident" id="1154002">Pointer</span><span class="op" id="1154009">(</span><span class="ident" id="1154010">val</span><span class="op" id="1154013">+</span><span class="num" id="1154014">1</span><span class="op" id="1154015">)</span>&nbsp;<span class="op" id="1154017">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154022">t</span><span class="op" id="1154023">.</span><span class="ident" id="1154024">Fatalf</span><span class="op" id="1154030">(</span><span class="string" id="1154031">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1154072">,</span>&nbsp;<span class="ident" id="1154074">x</span><span class="op" id="1154075">.</span><span class="ident" id="1154076">i</span><span class="op" id="1154077">,</span>&nbsp;<span class="ident" id="1154079">val</span><span class="op" id="1154082">+</span><span class="num" id="1154083">1</span><span class="op" id="1154084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154088">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154092">x</span><span class="op" id="1154093">.</span><span class="ident" id="1154094">i</span>&nbsp;<span class="op" id="1154096">=</span>&nbsp;<span class="ident" id="1154098">unsafe</span><span class="op" id="1154104">.</span><span class="ident" id="1154105">Pointer</span><span class="op" id="1154112">(</span><span class="ident" id="1154113">val</span>&nbsp;<span class="op" id="1154117">+</span>&nbsp;<span class="num" id="1154119">1</span><span class="op" id="1154120">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154124">if</span>&nbsp;<span class="ident" id="1154127">CompareAndSwapPointer</span><span class="op" id="1154148">(</span><span class="op" id="1154149">&amp;</span><span class="ident" id="1154150">x</span><span class="op" id="1154151">.</span><span class="ident" id="1154152">i</span><span class="op" id="1154153">,</span>&nbsp;<span class="ident" id="1154155">unsafe</span><span class="op" id="1154161">.</span><span class="ident" id="1154162">Pointer</span><span class="op" id="1154169">(</span><span class="ident" id="1154170">val</span><span class="op" id="1154173">)</span><span class="op" id="1154174">,</span>&nbsp;<span class="ident" id="1154176">unsafe</span><span class="op" id="1154182">.</span><span class="ident" id="1154183">Pointer</span><span class="op" id="1154190">(</span><span class="ident" id="1154191">val</span><span class="op" id="1154194">+</span><span class="num" id="1154195">2</span><span class="op" id="1154196">)</span><span class="op" id="1154197">)</span>&nbsp;<span class="op" id="1154199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154204">t</span><span class="op" id="1154205">.</span><span class="ident" id="1154206">Fatalf</span><span class="op" id="1154212">(</span><span class="string" id="1154213">&#34;should&nbsp;not&nbsp;have&nbsp;swapped&nbsp;%#x&nbsp;%#x&#34;</span><span class="op" id="1154246">,</span>&nbsp;<span class="ident" id="1154248">val</span><span class="op" id="1154251">,</span>&nbsp;<span class="ident" id="1154253">val</span><span class="op" id="1154256">+</span><span class="num" id="1154257">2</span><span class="op" id="1154258">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154266">if</span>&nbsp;<span class="ident" id="1154269">x</span><span class="op" id="1154270">.</span><span class="ident" id="1154271">i</span>&nbsp;<span class="op" id="1154273">!=</span>&nbsp;<span class="ident" id="1154276">unsafe</span><span class="op" id="1154282">.</span><span class="ident" id="1154283">Pointer</span><span class="op" id="1154290">(</span><span class="ident" id="1154291">val</span><span class="op" id="1154294">+</span><span class="num" id="1154295">1</span><span class="op" id="1154296">)</span>&nbsp;<span class="op" id="1154298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154303">t</span><span class="op" id="1154304">.</span><span class="ident" id="1154305">Fatalf</span><span class="op" id="1154311">(</span><span class="string" id="1154312">&#34;wrong&nbsp;x.i&nbsp;after&nbsp;swap:&nbsp;x.i=%#x&nbsp;val+1=%#x&#34;</span><span class="op" id="1154353">,</span>&nbsp;<span class="ident" id="1154355">x</span><span class="op" id="1154356">.</span><span class="ident" id="1154357">i</span><span class="op" id="1154358">,</span>&nbsp;<span class="ident" id="1154360">val</span><span class="op" id="1154363">+</span><span class="num" id="1154364">1</span><span class="op" id="1154365">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154369">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154372">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154375">if</span>&nbsp;<span class="ident" id="1154378">x</span><span class="op" id="1154379">.</span><span class="ident" id="1154380">before</span>&nbsp;<span class="op" id="1154387">!=</span>&nbsp;<span class="ident" id="1154390">magicptr</span>&nbsp;<span class="op" id="1154399">||</span>&nbsp;<span class="ident" id="1154402">x</span><span class="op" id="1154403">.</span><span class="ident" id="1154404">after</span>&nbsp;<span class="op" id="1154410">!=</span>&nbsp;<span class="ident" id="1154413">magicptr</span>&nbsp;<span class="op" id="1154422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154426">t</span><span class="op" id="1154427">.</span><span class="ident" id="1154428">Fatalf</span><span class="op" id="1154434">(</span><span class="string" id="1154435">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1154472">,</span>&nbsp;<span class="ident" id="1154474">x</span><span class="op" id="1154475">.</span><span class="ident" id="1154476">before</span><span class="op" id="1154482">,</span>&nbsp;<span class="ident" id="1154484">x</span><span class="op" id="1154485">.</span><span class="ident" id="1154486">after</span><span class="op" id="1154491">,</span>&nbsp;<span class="ident" id="1154493">magicptr</span><span class="op" id="1154501">,</span>&nbsp;<span class="ident" id="1154503">magicptr</span><span class="op" id="1154511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154514">}</span><br>
<span class="lineno"></span><span class="op" id="1154516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">480</span><span class="keyword" id="1154519">func</span>&nbsp;<span class="ident" id="1154524">TestLoadInt32</span><span class="op" id="1154537">(</span><span class="ident" id="1154538">t</span>&nbsp;<span class="op" id="1154540">*</span><span class="ident" id="1154541">testing</span><span class="op" id="1154548">.</span><span class="ident" id="1154549">T</span><span class="op" id="1154550">)</span>&nbsp;<span class="op" id="1154552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154555">var</span>&nbsp;<span class="ident" id="1154559">x</span>&nbsp;<span class="keyword" id="1154561">struct</span>&nbsp;<span class="op" id="1154568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154572">before</span>&nbsp;<span class="builtintype" id="1154579">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154587">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1154594">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154602">after</span>&nbsp;&nbsp;<span class="builtintype" id="1154609">int32</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154616">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154619">x</span><span class="op" id="1154620">.</span><span class="ident" id="1154621">before</span>&nbsp;<span class="op" id="1154628">=</span>&nbsp;<span class="ident" id="1154630">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154639">x</span><span class="op" id="1154640">.</span><span class="ident" id="1154641">after</span>&nbsp;<span class="op" id="1154647">=</span>&nbsp;<span class="ident" id="1154649">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154658">for</span>&nbsp;<span class="ident" id="1154662">delta</span>&nbsp;<span class="op" id="1154668">:=</span>&nbsp;<span class="builtintype" id="1154671">int32</span><span class="op" id="1154676">(</span><span class="num" id="1154677">1</span><span class="op" id="1154678">)</span><span class="op" id="1154679">;</span>&nbsp;<span class="ident" id="1154681">delta</span><span class="op" id="1154686">+</span><span class="ident" id="1154687">delta</span>&nbsp;<span class="op" id="1154693">&gt;</span>&nbsp;<span class="ident" id="1154695">delta</span><span class="op" id="1154700">;</span>&nbsp;<span class="ident" id="1154702">delta</span>&nbsp;<span class="op" id="1154708">+=</span>&nbsp;<span class="ident" id="1154711">delta</span>&nbsp;<span class="op" id="1154717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154721">k</span>&nbsp;<span class="op" id="1154723">:=</span>&nbsp;<span class="ident" id="1154726">LoadInt32</span><span class="op" id="1154735">(</span><span class="op" id="1154736">&amp;</span><span class="ident" id="1154737">x</span><span class="op" id="1154738">.</span><span class="ident" id="1154739">i</span><span class="op" id="1154740">)</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154744">if</span>&nbsp;<span class="ident" id="1154747">k</span>&nbsp;<span class="op" id="1154749">!=</span>&nbsp;<span class="ident" id="1154752">x</span><span class="op" id="1154753">.</span><span class="ident" id="1154754">i</span>&nbsp;<span class="op" id="1154756">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154761">t</span><span class="op" id="1154762">.</span><span class="ident" id="1154763">Fatalf</span><span class="op" id="1154769">(</span><span class="string" id="1154770">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1154790">,</span>&nbsp;<span class="ident" id="1154792">delta</span><span class="op" id="1154797">,</span>&nbsp;<span class="ident" id="1154799">x</span><span class="op" id="1154800">.</span><span class="ident" id="1154801">i</span><span class="op" id="1154802">,</span>&nbsp;<span class="ident" id="1154804">k</span><span class="op" id="1154805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154809">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154813">x</span><span class="op" id="1154814">.</span><span class="ident" id="1154815">i</span>&nbsp;<span class="op" id="1154817">+=</span>&nbsp;<span class="ident" id="1154820">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154827">}</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1154830">if</span>&nbsp;<span class="ident" id="1154833">x</span><span class="op" id="1154834">.</span><span class="ident" id="1154835">before</span>&nbsp;<span class="op" id="1154842">!=</span>&nbsp;<span class="ident" id="1154845">magic32</span>&nbsp;<span class="op" id="1154853">||</span>&nbsp;<span class="ident" id="1154856">x</span><span class="op" id="1154857">.</span><span class="ident" id="1154858">after</span>&nbsp;<span class="op" id="1154864">!=</span>&nbsp;<span class="ident" id="1154867">magic32</span>&nbsp;<span class="op" id="1154875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1154879">t</span><span class="op" id="1154880">.</span><span class="ident" id="1154881">Fatalf</span><span class="op" id="1154887">(</span><span class="string" id="1154888">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1154925">,</span>&nbsp;<span class="ident" id="1154927">x</span><span class="op" id="1154928">.</span><span class="ident" id="1154929">before</span><span class="op" id="1154935">,</span>&nbsp;<span class="ident" id="1154937">x</span><span class="op" id="1154938">.</span><span class="ident" id="1154939">after</span><span class="op" id="1154944">,</span>&nbsp;<span class="ident" id="1154946">magic32</span><span class="op" id="1154953">,</span>&nbsp;<span class="ident" id="1154955">magic32</span><span class="op" id="1154962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1154965">}</span><br>
<span class="lineno"></span><span class="op" id="1154967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">500</span><span class="keyword" id="1154970">func</span>&nbsp;<span class="ident" id="1154975">TestLoadUint32</span><span class="op" id="1154989">(</span><span class="ident" id="1154990">t</span>&nbsp;<span class="op" id="1154992">*</span><span class="ident" id="1154993">testing</span><span class="op" id="1155000">.</span><span class="ident" id="1155001">T</span><span class="op" id="1155002">)</span>&nbsp;<span class="op" id="1155004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155007">var</span>&nbsp;<span class="ident" id="1155011">x</span>&nbsp;<span class="keyword" id="1155013">struct</span>&nbsp;<span class="op" id="1155020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155024">before</span>&nbsp;<span class="builtintype" id="1155031">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155040">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1155047">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155056">after</span>&nbsp;&nbsp;<span class="builtintype" id="1155063">uint32</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155074">x</span><span class="op" id="1155075">.</span><span class="ident" id="1155076">before</span>&nbsp;<span class="op" id="1155083">=</span>&nbsp;<span class="ident" id="1155085">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155094">x</span><span class="op" id="1155095">.</span><span class="ident" id="1155096">after</span>&nbsp;<span class="op" id="1155102">=</span>&nbsp;<span class="ident" id="1155104">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155113">for</span>&nbsp;<span class="ident" id="1155117">delta</span>&nbsp;<span class="op" id="1155123">:=</span>&nbsp;<span class="builtintype" id="1155126">uint32</span><span class="op" id="1155132">(</span><span class="num" id="1155133">1</span><span class="op" id="1155134">)</span><span class="op" id="1155135">;</span>&nbsp;<span class="ident" id="1155137">delta</span><span class="op" id="1155142">+</span><span class="ident" id="1155143">delta</span>&nbsp;<span class="op" id="1155149">&gt;</span>&nbsp;<span class="ident" id="1155151">delta</span><span class="op" id="1155156">;</span>&nbsp;<span class="ident" id="1155158">delta</span>&nbsp;<span class="op" id="1155164">+=</span>&nbsp;<span class="ident" id="1155167">delta</span>&nbsp;<span class="op" id="1155173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155177">k</span>&nbsp;<span class="op" id="1155179">:=</span>&nbsp;<span class="ident" id="1155182">LoadUint32</span><span class="op" id="1155192">(</span><span class="op" id="1155193">&amp;</span><span class="ident" id="1155194">x</span><span class="op" id="1155195">.</span><span class="ident" id="1155196">i</span><span class="op" id="1155197">)</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155201">if</span>&nbsp;<span class="ident" id="1155204">k</span>&nbsp;<span class="op" id="1155206">!=</span>&nbsp;<span class="ident" id="1155209">x</span><span class="op" id="1155210">.</span><span class="ident" id="1155211">i</span>&nbsp;<span class="op" id="1155213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155218">t</span><span class="op" id="1155219">.</span><span class="ident" id="1155220">Fatalf</span><span class="op" id="1155226">(</span><span class="string" id="1155227">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1155247">,</span>&nbsp;<span class="ident" id="1155249">delta</span><span class="op" id="1155254">,</span>&nbsp;<span class="ident" id="1155256">x</span><span class="op" id="1155257">.</span><span class="ident" id="1155258">i</span><span class="op" id="1155259">,</span>&nbsp;<span class="ident" id="1155261">k</span><span class="op" id="1155262">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155266">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155270">x</span><span class="op" id="1155271">.</span><span class="ident" id="1155272">i</span>&nbsp;<span class="op" id="1155274">+=</span>&nbsp;<span class="ident" id="1155277">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155284">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155287">if</span>&nbsp;<span class="ident" id="1155290">x</span><span class="op" id="1155291">.</span><span class="ident" id="1155292">before</span>&nbsp;<span class="op" id="1155299">!=</span>&nbsp;<span class="ident" id="1155302">magic32</span>&nbsp;<span class="op" id="1155310">||</span>&nbsp;<span class="ident" id="1155313">x</span><span class="op" id="1155314">.</span><span class="ident" id="1155315">after</span>&nbsp;<span class="op" id="1155321">!=</span>&nbsp;<span class="ident" id="1155324">magic32</span>&nbsp;<span class="op" id="1155332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155336">t</span><span class="op" id="1155337">.</span><span class="ident" id="1155338">Fatalf</span><span class="op" id="1155344">(</span><span class="string" id="1155345">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1155382">,</span>&nbsp;<span class="ident" id="1155384">x</span><span class="op" id="1155385">.</span><span class="ident" id="1155386">before</span><span class="op" id="1155392">,</span>&nbsp;<span class="ident" id="1155394">x</span><span class="op" id="1155395">.</span><span class="ident" id="1155396">after</span><span class="op" id="1155401">,</span>&nbsp;<span class="ident" id="1155403">magic32</span><span class="op" id="1155410">,</span>&nbsp;<span class="ident" id="1155412">magic32</span><span class="op" id="1155419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155422">}</span><br>
<span class="lineno"></span><span class="op" id="1155424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">520</span><span class="keyword" id="1155427">func</span>&nbsp;<span class="ident" id="1155432">TestLoadInt64</span><span class="op" id="1155445">(</span><span class="ident" id="1155446">t</span>&nbsp;<span class="op" id="1155448">*</span><span class="ident" id="1155449">testing</span><span class="op" id="1155456">.</span><span class="ident" id="1155457">T</span><span class="op" id="1155458">)</span>&nbsp;<span class="op" id="1155460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155463">if</span>&nbsp;<span class="ident" id="1155466">test64err</span>&nbsp;<span class="op" id="1155476">!=</span>&nbsp;<span class="ident" id="1155479">nil</span>&nbsp;<span class="op" id="1155483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155487">t</span><span class="op" id="1155488">.</span><span class="ident" id="1155489">Skipf</span><span class="op" id="1155494">(</span><span class="string" id="1155495">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1155522">,</span>&nbsp;<span class="ident" id="1155524">test64err</span><span class="op" id="1155533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155539">var</span>&nbsp;<span class="ident" id="1155543">x</span>&nbsp;<span class="keyword" id="1155545">struct</span>&nbsp;<span class="op" id="1155552">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155556">before</span>&nbsp;<span class="ident" id="1155563">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155571">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1155578">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155586">after</span>&nbsp;&nbsp;<span class="ident" id="1155593">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155600">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155603">x</span><span class="op" id="1155604">.</span><span class="ident" id="1155605">before</span>&nbsp;<span class="op" id="1155612">=</span>&nbsp;<span class="ident" id="1155614">magic64</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155623">x</span><span class="op" id="1155624">.</span><span class="ident" id="1155625">after</span>&nbsp;<span class="op" id="1155631">=</span>&nbsp;<span class="ident" id="1155633">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155642">for</span>&nbsp;<span class="ident" id="1155646">delta</span>&nbsp;<span class="op" id="1155652">:=</span>&nbsp;<span class="ident" id="1155655">int64</span><span class="op" id="1155660">(</span><span class="num" id="1155661">1</span><span class="op" id="1155662">)</span><span class="op" id="1155663">;</span>&nbsp;<span class="ident" id="1155665">delta</span><span class="op" id="1155670">+</span><span class="ident" id="1155671">delta</span>&nbsp;<span class="op" id="1155677">&gt;</span>&nbsp;<span class="ident" id="1155679">delta</span><span class="op" id="1155684">;</span>&nbsp;<span class="ident" id="1155686">delta</span>&nbsp;<span class="op" id="1155692">+=</span>&nbsp;<span class="ident" id="1155695">delta</span>&nbsp;<span class="op" id="1155701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155705">k</span>&nbsp;<span class="op" id="1155707">:=</span>&nbsp;<span class="ident" id="1155710">LoadInt64</span><span class="op" id="1155719">(</span><span class="op" id="1155720">&amp;</span><span class="ident" id="1155721">x</span><span class="op" id="1155722">.</span><span class="ident" id="1155723">i</span><span class="op" id="1155724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155728">if</span>&nbsp;<span class="ident" id="1155731">k</span>&nbsp;<span class="op" id="1155733">!=</span>&nbsp;<span class="ident" id="1155736">x</span><span class="op" id="1155737">.</span><span class="ident" id="1155738">i</span>&nbsp;<span class="op" id="1155740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155745">t</span><span class="op" id="1155746">.</span><span class="ident" id="1155747">Fatalf</span><span class="op" id="1155753">(</span><span class="string" id="1155754">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1155774">,</span>&nbsp;<span class="ident" id="1155776">delta</span><span class="op" id="1155781">,</span>&nbsp;<span class="ident" id="1155783">x</span><span class="op" id="1155784">.</span><span class="ident" id="1155785">i</span><span class="op" id="1155786">,</span>&nbsp;<span class="ident" id="1155788">k</span><span class="op" id="1155789">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155793">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155797">x</span><span class="op" id="1155798">.</span><span class="ident" id="1155799">i</span>&nbsp;<span class="op" id="1155801">+=</span>&nbsp;<span class="ident" id="1155804">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1155814">if</span>&nbsp;<span class="ident" id="1155817">x</span><span class="op" id="1155818">.</span><span class="ident" id="1155819">before</span>&nbsp;<span class="op" id="1155826">!=</span>&nbsp;<span class="ident" id="1155829">magic64</span>&nbsp;<span class="op" id="1155837">||</span>&nbsp;<span class="ident" id="1155840">x</span><span class="op" id="1155841">.</span><span class="ident" id="1155842">after</span>&nbsp;<span class="op" id="1155848">!=</span>&nbsp;<span class="ident" id="1155851">magic64</span>&nbsp;<span class="op" id="1155859">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1155863">t</span><span class="op" id="1155864">.</span><span class="ident" id="1155865">Fatalf</span><span class="op" id="1155871">(</span><span class="string" id="1155872">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1155909">,</span>&nbsp;<span class="ident" id="1155911">x</span><span class="op" id="1155912">.</span><span class="ident" id="1155913">before</span><span class="op" id="1155919">,</span>&nbsp;<span class="ident" id="1155921">x</span><span class="op" id="1155922">.</span><span class="ident" id="1155923">after</span><span class="op" id="1155928">,</span>&nbsp;<span class="ident" id="1155930">uint64</span><span class="op" id="1155936">(</span><span class="ident" id="1155937">magic64</span><span class="op" id="1155944">)</span><span class="op" id="1155945">,</span>&nbsp;<span class="ident" id="1155947">uint64</span><span class="op" id="1155953">(</span><span class="ident" id="1155954">magic64</span><span class="op" id="1155961">)</span><span class="op" id="1155962">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1155965">}</span><br>
<span class="lineno"></span><span class="op" id="1155967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1155970">func</span>&nbsp;<span class="ident" id="1155975">TestLoadUint64</span><span class="op" id="1155989">(</span><span class="ident" id="1155990">t</span>&nbsp;<span class="op" id="1155992">*</span><span class="ident" id="1155993">testing</span><span class="op" id="1156000">.</span><span class="ident" id="1156001">T</span><span class="op" id="1156002">)</span>&nbsp;<span class="op" id="1156004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156007">if</span>&nbsp;<span class="ident" id="1156010">test64err</span>&nbsp;<span class="op" id="1156020">!=</span>&nbsp;<span class="ident" id="1156023">nil</span>&nbsp;<span class="op" id="1156027">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156031">t</span><span class="op" id="1156032">.</span><span class="ident" id="1156033">Skipf</span><span class="op" id="1156038">(</span><span class="string" id="1156039">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1156066">,</span>&nbsp;<span class="ident" id="1156068">test64err</span><span class="op" id="1156077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156083">var</span>&nbsp;<span class="ident" id="1156087">x</span>&nbsp;<span class="keyword" id="1156089">struct</span>&nbsp;<span class="op" id="1156096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156100">before</span>&nbsp;<span class="ident" id="1156107">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156116">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1156123">uint64</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156132">after</span>&nbsp;&nbsp;<span class="ident" id="1156139">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156147">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156150">x</span><span class="op" id="1156151">.</span><span class="ident" id="1156152">before</span>&nbsp;<span class="op" id="1156159">=</span>&nbsp;<span class="ident" id="1156161">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156170">x</span><span class="op" id="1156171">.</span><span class="ident" id="1156172">after</span>&nbsp;<span class="op" id="1156178">=</span>&nbsp;<span class="ident" id="1156180">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156189">for</span>&nbsp;<span class="ident" id="1156193">delta</span>&nbsp;<span class="op" id="1156199">:=</span>&nbsp;<span class="ident" id="1156202">uint64</span><span class="op" id="1156208">(</span><span class="num" id="1156209">1</span><span class="op" id="1156210">)</span><span class="op" id="1156211">;</span>&nbsp;<span class="ident" id="1156213">delta</span><span class="op" id="1156218">+</span><span class="ident" id="1156219">delta</span>&nbsp;<span class="op" id="1156225">&gt;</span>&nbsp;<span class="ident" id="1156227">delta</span><span class="op" id="1156232">;</span>&nbsp;<span class="ident" id="1156234">delta</span>&nbsp;<span class="op" id="1156240">+=</span>&nbsp;<span class="ident" id="1156243">delta</span>&nbsp;<span class="op" id="1156249">{</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156253">k</span>&nbsp;<span class="op" id="1156255">:=</span>&nbsp;<span class="ident" id="1156258">LoadUint64</span><span class="op" id="1156268">(</span><span class="op" id="1156269">&amp;</span><span class="ident" id="1156270">x</span><span class="op" id="1156271">.</span><span class="ident" id="1156272">i</span><span class="op" id="1156273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156277">if</span>&nbsp;<span class="ident" id="1156280">k</span>&nbsp;<span class="op" id="1156282">!=</span>&nbsp;<span class="ident" id="1156285">x</span><span class="op" id="1156286">.</span><span class="ident" id="1156287">i</span>&nbsp;<span class="op" id="1156289">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156294">t</span><span class="op" id="1156295">.</span><span class="ident" id="1156296">Fatalf</span><span class="op" id="1156302">(</span><span class="string" id="1156303">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1156323">,</span>&nbsp;<span class="ident" id="1156325">delta</span><span class="op" id="1156330">,</span>&nbsp;<span class="ident" id="1156332">x</span><span class="op" id="1156333">.</span><span class="ident" id="1156334">i</span><span class="op" id="1156335">,</span>&nbsp;<span class="ident" id="1156337">k</span><span class="op" id="1156338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156346">x</span><span class="op" id="1156347">.</span><span class="ident" id="1156348">i</span>&nbsp;<span class="op" id="1156350">+=</span>&nbsp;<span class="ident" id="1156353">delta</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156360">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156363">if</span>&nbsp;<span class="ident" id="1156366">x</span><span class="op" id="1156367">.</span><span class="ident" id="1156368">before</span>&nbsp;<span class="op" id="1156375">!=</span>&nbsp;<span class="ident" id="1156378">magic64</span>&nbsp;<span class="op" id="1156386">||</span>&nbsp;<span class="ident" id="1156389">x</span><span class="op" id="1156390">.</span><span class="ident" id="1156391">after</span>&nbsp;<span class="op" id="1156397">!=</span>&nbsp;<span class="ident" id="1156400">magic64</span>&nbsp;<span class="op" id="1156408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156412">t</span><span class="op" id="1156413">.</span><span class="ident" id="1156414">Fatalf</span><span class="op" id="1156420">(</span><span class="string" id="1156421">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1156458">,</span>&nbsp;<span class="ident" id="1156460">x</span><span class="op" id="1156461">.</span><span class="ident" id="1156462">before</span><span class="op" id="1156468">,</span>&nbsp;<span class="ident" id="1156470">x</span><span class="op" id="1156471">.</span><span class="ident" id="1156472">after</span><span class="op" id="1156477">,</span>&nbsp;<span class="ident" id="1156479">uint64</span><span class="op" id="1156485">(</span><span class="ident" id="1156486">magic64</span><span class="op" id="1156493">)</span><span class="op" id="1156494">,</span>&nbsp;<span class="ident" id="1156496">uint64</span><span class="op" id="1156502">(</span><span class="ident" id="1156503">magic64</span><span class="op" id="1156510">)</span><span class="op" id="1156511">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156514">}</span><br>
<span class="lineno"></span><span class="op" id="1156516">}</span><br>
<span class="lineno">565</span><br>
<span class="lineno"></span><span class="keyword" id="1156519">func</span>&nbsp;<span class="ident" id="1156524">TestLoadUintptr</span><span class="op" id="1156539">(</span><span class="ident" id="1156540">t</span>&nbsp;<span class="op" id="1156542">*</span><span class="ident" id="1156543">testing</span><span class="op" id="1156550">.</span><span class="ident" id="1156551">T</span><span class="op" id="1156552">)</span>&nbsp;<span class="op" id="1156554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156557">var</span>&nbsp;<span class="ident" id="1156561">x</span>&nbsp;<span class="keyword" id="1156563">struct</span>&nbsp;<span class="op" id="1156570">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156574">before</span>&nbsp;<span class="builtintype" id="1156581">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156591">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1156598">uintptr</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156608">after</span>&nbsp;&nbsp;<span class="builtintype" id="1156615">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156624">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156627">var</span>&nbsp;<span class="ident" id="1156631">m</span>&nbsp;<span class="ident" id="1156633">uint64</span>&nbsp;<span class="op" id="1156640">=</span>&nbsp;<span class="ident" id="1156642">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156651">magicptr</span>&nbsp;<span class="op" id="1156660">:=</span>&nbsp;<span class="builtintype" id="1156663">uintptr</span><span class="op" id="1156670">(</span><span class="ident" id="1156671">m</span><span class="op" id="1156672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156675">x</span><span class="op" id="1156676">.</span><span class="ident" id="1156677">before</span>&nbsp;<span class="op" id="1156684">=</span>&nbsp;<span class="ident" id="1156686">magicptr</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156696">x</span><span class="op" id="1156697">.</span><span class="ident" id="1156698">after</span>&nbsp;<span class="op" id="1156704">=</span>&nbsp;<span class="ident" id="1156706">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156716">for</span>&nbsp;<span class="ident" id="1156720">delta</span>&nbsp;<span class="op" id="1156726">:=</span>&nbsp;<span class="builtintype" id="1156729">uintptr</span><span class="op" id="1156736">(</span><span class="num" id="1156737">1</span><span class="op" id="1156738">)</span><span class="op" id="1156739">;</span>&nbsp;<span class="ident" id="1156741">delta</span><span class="op" id="1156746">+</span><span class="ident" id="1156747">delta</span>&nbsp;<span class="op" id="1156753">&gt;</span>&nbsp;<span class="ident" id="1156755">delta</span><span class="op" id="1156760">;</span>&nbsp;<span class="ident" id="1156762">delta</span>&nbsp;<span class="op" id="1156768">+=</span>&nbsp;<span class="ident" id="1156771">delta</span>&nbsp;<span class="op" id="1156777">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156781">k</span>&nbsp;<span class="op" id="1156783">:=</span>&nbsp;<span class="ident" id="1156786">LoadUintptr</span><span class="op" id="1156797">(</span><span class="op" id="1156798">&amp;</span><span class="ident" id="1156799">x</span><span class="op" id="1156800">.</span><span class="ident" id="1156801">i</span><span class="op" id="1156802">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156806">if</span>&nbsp;<span class="ident" id="1156809">k</span>&nbsp;<span class="op" id="1156811">!=</span>&nbsp;<span class="ident" id="1156814">x</span><span class="op" id="1156815">.</span><span class="ident" id="1156816">i</span>&nbsp;<span class="op" id="1156818">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156823">t</span><span class="op" id="1156824">.</span><span class="ident" id="1156825">Fatalf</span><span class="op" id="1156831">(</span><span class="string" id="1156832">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1156852">,</span>&nbsp;<span class="ident" id="1156854">delta</span><span class="op" id="1156859">,</span>&nbsp;<span class="ident" id="1156861">x</span><span class="op" id="1156862">.</span><span class="ident" id="1156863">i</span><span class="op" id="1156864">,</span>&nbsp;<span class="ident" id="1156866">k</span><span class="op" id="1156867">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156875">x</span><span class="op" id="1156876">.</span><span class="ident" id="1156877">i</span>&nbsp;<span class="op" id="1156879">+=</span>&nbsp;<span class="ident" id="1156882">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1156889">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1156892">if</span>&nbsp;<span class="ident" id="1156895">x</span><span class="op" id="1156896">.</span><span class="ident" id="1156897">before</span>&nbsp;<span class="op" id="1156904">!=</span>&nbsp;<span class="ident" id="1156907">magicptr</span>&nbsp;<span class="op" id="1156916">||</span>&nbsp;<span class="ident" id="1156919">x</span><span class="op" id="1156920">.</span><span class="ident" id="1156921">after</span>&nbsp;<span class="op" id="1156927">!=</span>&nbsp;<span class="ident" id="1156930">magicptr</span>&nbsp;<span class="op" id="1156939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1156943">t</span><span class="op" id="1156944">.</span><span class="ident" id="1156945">Fatalf</span><span class="op" id="1156951">(</span><span class="string" id="1156952">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1156989">,</span>&nbsp;<span class="ident" id="1156991">x</span><span class="op" id="1156992">.</span><span class="ident" id="1156993">before</span><span class="op" id="1156999">,</span>&nbsp;<span class="ident" id="1157001">x</span><span class="op" id="1157002">.</span><span class="ident" id="1157003">after</span><span class="op" id="1157008">,</span>&nbsp;<span class="ident" id="1157010">magicptr</span><span class="op" id="1157018">,</span>&nbsp;<span class="ident" id="1157020">magicptr</span><span class="op" id="1157028">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157031">}</span><br>
<span class="lineno"></span><span class="op" id="1157033">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1157036">func</span>&nbsp;<span class="ident" id="1157041">TestLoadPointer</span><span class="op" id="1157056">(</span><span class="ident" id="1157057">t</span>&nbsp;<span class="op" id="1157059">*</span><span class="ident" id="1157060">testing</span><span class="op" id="1157067">.</span><span class="ident" id="1157068">T</span><span class="op" id="1157069">)</span>&nbsp;<span class="op" id="1157071">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157074">var</span>&nbsp;<span class="ident" id="1157078">x</span>&nbsp;<span class="keyword" id="1157080">struct</span>&nbsp;<span class="op" id="1157087">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157091">before</span>&nbsp;<span class="builtintype" id="1157098">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157108">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1157115">unsafe</span><span class="op" id="1157121">.</span><span class="ident" id="1157122">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157132">after</span>&nbsp;&nbsp;<span class="builtintype" id="1157139">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157148">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157151">var</span>&nbsp;<span class="ident" id="1157155">m</span>&nbsp;<span class="ident" id="1157157">uint64</span>&nbsp;<span class="op" id="1157164">=</span>&nbsp;<span class="ident" id="1157166">magic64</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157175">magicptr</span>&nbsp;<span class="op" id="1157184">:=</span>&nbsp;<span class="builtintype" id="1157187">uintptr</span><span class="op" id="1157194">(</span><span class="ident" id="1157195">m</span><span class="op" id="1157196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157199">x</span><span class="op" id="1157200">.</span><span class="ident" id="1157201">before</span>&nbsp;<span class="op" id="1157208">=</span>&nbsp;<span class="ident" id="1157210">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157220">x</span><span class="op" id="1157221">.</span><span class="ident" id="1157222">after</span>&nbsp;<span class="op" id="1157228">=</span>&nbsp;<span class="ident" id="1157230">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157240">for</span>&nbsp;<span class="ident" id="1157244">delta</span>&nbsp;<span class="op" id="1157250">:=</span>&nbsp;<span class="builtintype" id="1157253">uintptr</span><span class="op" id="1157260">(</span><span class="num" id="1157261">1</span><span class="op" id="1157262">)</span><span class="op" id="1157263">;</span>&nbsp;<span class="ident" id="1157265">delta</span><span class="op" id="1157270">+</span><span class="ident" id="1157271">delta</span>&nbsp;<span class="op" id="1157277">&gt;</span>&nbsp;<span class="ident" id="1157279">delta</span><span class="op" id="1157284">;</span>&nbsp;<span class="ident" id="1157286">delta</span>&nbsp;<span class="op" id="1157292">+=</span>&nbsp;<span class="ident" id="1157295">delta</span>&nbsp;<span class="op" id="1157301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157305">k</span>&nbsp;<span class="op" id="1157307">:=</span>&nbsp;<span class="ident" id="1157310">LoadPointer</span><span class="op" id="1157321">(</span><span class="op" id="1157322">&amp;</span><span class="ident" id="1157323">x</span><span class="op" id="1157324">.</span><span class="ident" id="1157325">i</span><span class="op" id="1157326">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157330">if</span>&nbsp;<span class="ident" id="1157333">k</span>&nbsp;<span class="op" id="1157335">!=</span>&nbsp;<span class="ident" id="1157338">x</span><span class="op" id="1157339">.</span><span class="ident" id="1157340">i</span>&nbsp;<span class="op" id="1157342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157347">t</span><span class="op" id="1157348">.</span><span class="ident" id="1157349">Fatalf</span><span class="op" id="1157355">(</span><span class="string" id="1157356">&#34;delta=%d&nbsp;i=%d&nbsp;k=%d&#34;</span><span class="op" id="1157376">,</span>&nbsp;<span class="ident" id="1157378">delta</span><span class="op" id="1157383">,</span>&nbsp;<span class="ident" id="1157385">x</span><span class="op" id="1157386">.</span><span class="ident" id="1157387">i</span><span class="op" id="1157388">,</span>&nbsp;<span class="ident" id="1157390">k</span><span class="op" id="1157391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157395">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157399">x</span><span class="op" id="1157400">.</span><span class="ident" id="1157401">i</span>&nbsp;<span class="op" id="1157403">=</span>&nbsp;<span class="ident" id="1157405">unsafe</span><span class="op" id="1157411">.</span><span class="ident" id="1157412">Pointer</span><span class="op" id="1157419">(</span><span class="builtintype" id="1157420">uintptr</span><span class="op" id="1157427">(</span><span class="ident" id="1157428">x</span><span class="op" id="1157429">.</span><span class="ident" id="1157430">i</span><span class="op" id="1157431">)</span>&nbsp;<span class="op" id="1157433">+</span>&nbsp;<span class="ident" id="1157435">delta</span><span class="op" id="1157440">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157443">}</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157446">if</span>&nbsp;<span class="ident" id="1157449">x</span><span class="op" id="1157450">.</span><span class="ident" id="1157451">before</span>&nbsp;<span class="op" id="1157458">!=</span>&nbsp;<span class="ident" id="1157461">magicptr</span>&nbsp;<span class="op" id="1157470">||</span>&nbsp;<span class="ident" id="1157473">x</span><span class="op" id="1157474">.</span><span class="ident" id="1157475">after</span>&nbsp;<span class="op" id="1157481">!=</span>&nbsp;<span class="ident" id="1157484">magicptr</span>&nbsp;<span class="op" id="1157493">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157497">t</span><span class="op" id="1157498">.</span><span class="ident" id="1157499">Fatalf</span><span class="op" id="1157505">(</span><span class="string" id="1157506">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1157543">,</span>&nbsp;<span class="ident" id="1157545">x</span><span class="op" id="1157546">.</span><span class="ident" id="1157547">before</span><span class="op" id="1157553">,</span>&nbsp;<span class="ident" id="1157555">x</span><span class="op" id="1157556">.</span><span class="ident" id="1157557">after</span><span class="op" id="1157562">,</span>&nbsp;<span class="ident" id="1157564">magicptr</span><span class="op" id="1157572">,</span>&nbsp;<span class="ident" id="1157574">magicptr</span><span class="op" id="1157582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157585">}</span><br>
<span class="lineno"></span><span class="op" id="1157587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span><span class="keyword" id="1157590">func</span>&nbsp;<span class="ident" id="1157595">TestStoreInt32</span><span class="op" id="1157609">(</span><span class="ident" id="1157610">t</span>&nbsp;<span class="op" id="1157612">*</span><span class="ident" id="1157613">testing</span><span class="op" id="1157620">.</span><span class="ident" id="1157621">T</span><span class="op" id="1157622">)</span>&nbsp;<span class="op" id="1157624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157627">var</span>&nbsp;<span class="ident" id="1157631">x</span>&nbsp;<span class="keyword" id="1157633">struct</span>&nbsp;<span class="op" id="1157640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157644">before</span>&nbsp;<span class="builtintype" id="1157651">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157659">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1157666">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157674">after</span>&nbsp;&nbsp;<span class="builtintype" id="1157681">int32</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157688">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157691">x</span><span class="op" id="1157692">.</span><span class="ident" id="1157693">before</span>&nbsp;<span class="op" id="1157700">=</span>&nbsp;<span class="ident" id="1157702">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157711">x</span><span class="op" id="1157712">.</span><span class="ident" id="1157713">after</span>&nbsp;<span class="op" id="1157719">=</span>&nbsp;<span class="ident" id="1157721">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157730">v</span>&nbsp;<span class="op" id="1157732">:=</span>&nbsp;<span class="builtintype" id="1157735">int32</span><span class="op" id="1157740">(</span><span class="num" id="1157741">0</span><span class="op" id="1157742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157745">for</span>&nbsp;<span class="ident" id="1157749">delta</span>&nbsp;<span class="op" id="1157755">:=</span>&nbsp;<span class="builtintype" id="1157758">int32</span><span class="op" id="1157763">(</span><span class="num" id="1157764">1</span><span class="op" id="1157765">)</span><span class="op" id="1157766">;</span>&nbsp;<span class="ident" id="1157768">delta</span><span class="op" id="1157773">+</span><span class="ident" id="1157774">delta</span>&nbsp;<span class="op" id="1157780">&gt;</span>&nbsp;<span class="ident" id="1157782">delta</span><span class="op" id="1157787">;</span>&nbsp;<span class="ident" id="1157789">delta</span>&nbsp;<span class="op" id="1157795">+=</span>&nbsp;<span class="ident" id="1157798">delta</span>&nbsp;<span class="op" id="1157804">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157808">StoreInt32</span><span class="op" id="1157818">(</span><span class="op" id="1157819">&amp;</span><span class="ident" id="1157820">x</span><span class="op" id="1157821">.</span><span class="ident" id="1157822">i</span><span class="op" id="1157823">,</span>&nbsp;<span class="ident" id="1157825">v</span><span class="op" id="1157826">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157830">if</span>&nbsp;<span class="ident" id="1157833">x</span><span class="op" id="1157834">.</span><span class="ident" id="1157835">i</span>&nbsp;<span class="op" id="1157837">!=</span>&nbsp;<span class="ident" id="1157840">v</span>&nbsp;<span class="op" id="1157842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157847">t</span><span class="op" id="1157848">.</span><span class="ident" id="1157849">Fatalf</span><span class="op" id="1157855">(</span><span class="string" id="1157856">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1157876">,</span>&nbsp;<span class="ident" id="1157878">delta</span><span class="op" id="1157883">,</span>&nbsp;<span class="ident" id="1157885">x</span><span class="op" id="1157886">.</span><span class="ident" id="1157887">i</span><span class="op" id="1157888">,</span>&nbsp;<span class="ident" id="1157890">v</span><span class="op" id="1157891">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157895">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157899">v</span>&nbsp;<span class="op" id="1157901">+=</span>&nbsp;<span class="ident" id="1157904">delta</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1157911">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1157914">if</span>&nbsp;<span class="ident" id="1157917">x</span><span class="op" id="1157918">.</span><span class="ident" id="1157919">before</span>&nbsp;<span class="op" id="1157926">!=</span>&nbsp;<span class="ident" id="1157929">magic32</span>&nbsp;<span class="op" id="1157937">||</span>&nbsp;<span class="ident" id="1157940">x</span><span class="op" id="1157941">.</span><span class="ident" id="1157942">after</span>&nbsp;<span class="op" id="1157948">!=</span>&nbsp;<span class="ident" id="1157951">magic32</span>&nbsp;<span class="op" id="1157959">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1157963">t</span><span class="op" id="1157964">.</span><span class="ident" id="1157965">Fatalf</span><span class="op" id="1157971">(</span><span class="string" id="1157972">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1158009">,</span>&nbsp;<span class="ident" id="1158011">x</span><span class="op" id="1158012">.</span><span class="ident" id="1158013">before</span><span class="op" id="1158019">,</span>&nbsp;<span class="ident" id="1158021">x</span><span class="op" id="1158022">.</span><span class="ident" id="1158023">after</span><span class="op" id="1158028">,</span>&nbsp;<span class="ident" id="1158030">magic32</span><span class="op" id="1158037">,</span>&nbsp;<span class="ident" id="1158039">magic32</span><span class="op" id="1158046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158049">}</span><br>
<span class="lineno"></span><span class="op" id="1158051">}</span><br>
<span class="lineno">630</span><br>
<span class="lineno"></span><span class="keyword" id="1158054">func</span>&nbsp;<span class="ident" id="1158059">TestStoreUint32</span><span class="op" id="1158074">(</span><span class="ident" id="1158075">t</span>&nbsp;<span class="op" id="1158077">*</span><span class="ident" id="1158078">testing</span><span class="op" id="1158085">.</span><span class="ident" id="1158086">T</span><span class="op" id="1158087">)</span>&nbsp;<span class="op" id="1158089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158092">var</span>&nbsp;<span class="ident" id="1158096">x</span>&nbsp;<span class="keyword" id="1158098">struct</span>&nbsp;<span class="op" id="1158105">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158109">before</span>&nbsp;<span class="builtintype" id="1158116">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158125">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1158132">uint32</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158141">after</span>&nbsp;&nbsp;<span class="builtintype" id="1158148">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158159">x</span><span class="op" id="1158160">.</span><span class="ident" id="1158161">before</span>&nbsp;<span class="op" id="1158168">=</span>&nbsp;<span class="ident" id="1158170">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158179">x</span><span class="op" id="1158180">.</span><span class="ident" id="1158181">after</span>&nbsp;<span class="op" id="1158187">=</span>&nbsp;<span class="ident" id="1158189">magic32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158198">v</span>&nbsp;<span class="op" id="1158200">:=</span>&nbsp;<span class="builtintype" id="1158203">uint32</span><span class="op" id="1158209">(</span><span class="num" id="1158210">0</span><span class="op" id="1158211">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158214">for</span>&nbsp;<span class="ident" id="1158218">delta</span>&nbsp;<span class="op" id="1158224">:=</span>&nbsp;<span class="builtintype" id="1158227">uint32</span><span class="op" id="1158233">(</span><span class="num" id="1158234">1</span><span class="op" id="1158235">)</span><span class="op" id="1158236">;</span>&nbsp;<span class="ident" id="1158238">delta</span><span class="op" id="1158243">+</span><span class="ident" id="1158244">delta</span>&nbsp;<span class="op" id="1158250">&gt;</span>&nbsp;<span class="ident" id="1158252">delta</span><span class="op" id="1158257">;</span>&nbsp;<span class="ident" id="1158259">delta</span>&nbsp;<span class="op" id="1158265">+=</span>&nbsp;<span class="ident" id="1158268">delta</span>&nbsp;<span class="op" id="1158274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158278">StoreUint32</span><span class="op" id="1158289">(</span><span class="op" id="1158290">&amp;</span><span class="ident" id="1158291">x</span><span class="op" id="1158292">.</span><span class="ident" id="1158293">i</span><span class="op" id="1158294">,</span>&nbsp;<span class="ident" id="1158296">v</span><span class="op" id="1158297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158301">if</span>&nbsp;<span class="ident" id="1158304">x</span><span class="op" id="1158305">.</span><span class="ident" id="1158306">i</span>&nbsp;<span class="op" id="1158308">!=</span>&nbsp;<span class="ident" id="1158311">v</span>&nbsp;<span class="op" id="1158313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158318">t</span><span class="op" id="1158319">.</span><span class="ident" id="1158320">Fatalf</span><span class="op" id="1158326">(</span><span class="string" id="1158327">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1158347">,</span>&nbsp;<span class="ident" id="1158349">delta</span><span class="op" id="1158354">,</span>&nbsp;<span class="ident" id="1158356">x</span><span class="op" id="1158357">.</span><span class="ident" id="1158358">i</span><span class="op" id="1158359">,</span>&nbsp;<span class="ident" id="1158361">v</span><span class="op" id="1158362">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158366">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158370">v</span>&nbsp;<span class="op" id="1158372">+=</span>&nbsp;<span class="ident" id="1158375">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158385">if</span>&nbsp;<span class="ident" id="1158388">x</span><span class="op" id="1158389">.</span><span class="ident" id="1158390">before</span>&nbsp;<span class="op" id="1158397">!=</span>&nbsp;<span class="ident" id="1158400">magic32</span>&nbsp;<span class="op" id="1158408">||</span>&nbsp;<span class="ident" id="1158411">x</span><span class="op" id="1158412">.</span><span class="ident" id="1158413">after</span>&nbsp;<span class="op" id="1158419">!=</span>&nbsp;<span class="ident" id="1158422">magic32</span>&nbsp;<span class="op" id="1158430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158434">t</span><span class="op" id="1158435">.</span><span class="ident" id="1158436">Fatalf</span><span class="op" id="1158442">(</span><span class="string" id="1158443">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1158480">,</span>&nbsp;<span class="ident" id="1158482">x</span><span class="op" id="1158483">.</span><span class="ident" id="1158484">before</span><span class="op" id="1158490">,</span>&nbsp;<span class="ident" id="1158492">x</span><span class="op" id="1158493">.</span><span class="ident" id="1158494">after</span><span class="op" id="1158499">,</span>&nbsp;<span class="ident" id="1158501">magic32</span><span class="op" id="1158508">,</span>&nbsp;<span class="ident" id="1158510">magic32</span><span class="op" id="1158517">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158520">}</span><br>
<span class="lineno">650</span><span class="op" id="1158522">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1158525">func</span>&nbsp;<span class="ident" id="1158530">TestStoreInt64</span><span class="op" id="1158544">(</span><span class="ident" id="1158545">t</span>&nbsp;<span class="op" id="1158547">*</span><span class="ident" id="1158548">testing</span><span class="op" id="1158555">.</span><span class="ident" id="1158556">T</span><span class="op" id="1158557">)</span>&nbsp;<span class="op" id="1158559">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158562">if</span>&nbsp;<span class="ident" id="1158565">test64err</span>&nbsp;<span class="op" id="1158575">!=</span>&nbsp;<span class="ident" id="1158578">nil</span>&nbsp;<span class="op" id="1158582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158586">t</span><span class="op" id="1158587">.</span><span class="ident" id="1158588">Skipf</span><span class="op" id="1158593">(</span><span class="string" id="1158594">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1158621">,</span>&nbsp;<span class="ident" id="1158623">test64err</span><span class="op" id="1158632">)</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158638">var</span>&nbsp;<span class="ident" id="1158642">x</span>&nbsp;<span class="keyword" id="1158644">struct</span>&nbsp;<span class="op" id="1158651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158655">before</span>&nbsp;<span class="ident" id="1158662">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158670">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1158677">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158685">after</span>&nbsp;&nbsp;<span class="ident" id="1158692">int64</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158702">x</span><span class="op" id="1158703">.</span><span class="ident" id="1158704">before</span>&nbsp;<span class="op" id="1158711">=</span>&nbsp;<span class="ident" id="1158713">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158722">x</span><span class="op" id="1158723">.</span><span class="ident" id="1158724">after</span>&nbsp;<span class="op" id="1158730">=</span>&nbsp;<span class="ident" id="1158732">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158741">v</span>&nbsp;<span class="op" id="1158743">:=</span>&nbsp;<span class="ident" id="1158746">int64</span><span class="op" id="1158751">(</span><span class="num" id="1158752">0</span><span class="op" id="1158753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158756">for</span>&nbsp;<span class="ident" id="1158760">delta</span>&nbsp;<span class="op" id="1158766">:=</span>&nbsp;<span class="ident" id="1158769">int64</span><span class="op" id="1158774">(</span><span class="num" id="1158775">1</span><span class="op" id="1158776">)</span><span class="op" id="1158777">;</span>&nbsp;<span class="ident" id="1158779">delta</span><span class="op" id="1158784">+</span><span class="ident" id="1158785">delta</span>&nbsp;<span class="op" id="1158791">&gt;</span>&nbsp;<span class="ident" id="1158793">delta</span><span class="op" id="1158798">;</span>&nbsp;<span class="ident" id="1158800">delta</span>&nbsp;<span class="op" id="1158806">+=</span>&nbsp;<span class="ident" id="1158809">delta</span>&nbsp;<span class="op" id="1158815">{</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158819">StoreInt64</span><span class="op" id="1158829">(</span><span class="op" id="1158830">&amp;</span><span class="ident" id="1158831">x</span><span class="op" id="1158832">.</span><span class="ident" id="1158833">i</span><span class="op" id="1158834">,</span>&nbsp;<span class="ident" id="1158836">v</span><span class="op" id="1158837">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158841">if</span>&nbsp;<span class="ident" id="1158844">x</span><span class="op" id="1158845">.</span><span class="ident" id="1158846">i</span>&nbsp;<span class="op" id="1158848">!=</span>&nbsp;<span class="ident" id="1158851">v</span>&nbsp;<span class="op" id="1158853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158858">t</span><span class="op" id="1158859">.</span><span class="ident" id="1158860">Fatalf</span><span class="op" id="1158866">(</span><span class="string" id="1158867">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1158887">,</span>&nbsp;<span class="ident" id="1158889">delta</span><span class="op" id="1158894">,</span>&nbsp;<span class="ident" id="1158896">x</span><span class="op" id="1158897">.</span><span class="ident" id="1158898">i</span><span class="op" id="1158899">,</span>&nbsp;<span class="ident" id="1158901">v</span><span class="op" id="1158902">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158906">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158910">v</span>&nbsp;<span class="op" id="1158912">+=</span>&nbsp;<span class="ident" id="1158915">delta</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1158922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1158925">if</span>&nbsp;<span class="ident" id="1158928">x</span><span class="op" id="1158929">.</span><span class="ident" id="1158930">before</span>&nbsp;<span class="op" id="1158937">!=</span>&nbsp;<span class="ident" id="1158940">magic64</span>&nbsp;<span class="op" id="1158948">||</span>&nbsp;<span class="ident" id="1158951">x</span><span class="op" id="1158952">.</span><span class="ident" id="1158953">after</span>&nbsp;<span class="op" id="1158959">!=</span>&nbsp;<span class="ident" id="1158962">magic64</span>&nbsp;<span class="op" id="1158970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1158974">t</span><span class="op" id="1158975">.</span><span class="ident" id="1158976">Fatalf</span><span class="op" id="1158982">(</span><span class="string" id="1158983">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1159020">,</span>&nbsp;<span class="ident" id="1159022">x</span><span class="op" id="1159023">.</span><span class="ident" id="1159024">before</span><span class="op" id="1159030">,</span>&nbsp;<span class="ident" id="1159032">x</span><span class="op" id="1159033">.</span><span class="ident" id="1159034">after</span><span class="op" id="1159039">,</span>&nbsp;<span class="ident" id="1159041">uint64</span><span class="op" id="1159047">(</span><span class="ident" id="1159048">magic64</span><span class="op" id="1159055">)</span><span class="op" id="1159056">,</span>&nbsp;<span class="ident" id="1159058">uint64</span><span class="op" id="1159064">(</span><span class="ident" id="1159065">magic64</span><span class="op" id="1159072">)</span><span class="op" id="1159073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159076">}</span><br>
<span class="lineno"></span><span class="op" id="1159078">}</span><br>
<span class="lineno">675</span><br>
<span class="lineno"></span><span class="keyword" id="1159081">func</span>&nbsp;<span class="ident" id="1159086">TestStoreUint64</span><span class="op" id="1159101">(</span><span class="ident" id="1159102">t</span>&nbsp;<span class="op" id="1159104">*</span><span class="ident" id="1159105">testing</span><span class="op" id="1159112">.</span><span class="ident" id="1159113">T</span><span class="op" id="1159114">)</span>&nbsp;<span class="op" id="1159116">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159119">if</span>&nbsp;<span class="ident" id="1159122">test64err</span>&nbsp;<span class="op" id="1159132">!=</span>&nbsp;<span class="ident" id="1159135">nil</span>&nbsp;<span class="op" id="1159139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159143">t</span><span class="op" id="1159144">.</span><span class="ident" id="1159145">Skipf</span><span class="op" id="1159150">(</span><span class="string" id="1159151">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1159178">,</span>&nbsp;<span class="ident" id="1159180">test64err</span><span class="op" id="1159189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159192">}</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159195">var</span>&nbsp;<span class="ident" id="1159199">x</span>&nbsp;<span class="keyword" id="1159201">struct</span>&nbsp;<span class="op" id="1159208">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159212">before</span>&nbsp;<span class="ident" id="1159219">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159228">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1159235">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159244">after</span>&nbsp;&nbsp;<span class="ident" id="1159251">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159259">}</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159262">x</span><span class="op" id="1159263">.</span><span class="ident" id="1159264">before</span>&nbsp;<span class="op" id="1159271">=</span>&nbsp;<span class="ident" id="1159273">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159282">x</span><span class="op" id="1159283">.</span><span class="ident" id="1159284">after</span>&nbsp;<span class="op" id="1159290">=</span>&nbsp;<span class="ident" id="1159292">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159301">v</span>&nbsp;<span class="op" id="1159303">:=</span>&nbsp;<span class="ident" id="1159306">uint64</span><span class="op" id="1159312">(</span><span class="num" id="1159313">0</span><span class="op" id="1159314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159317">for</span>&nbsp;<span class="ident" id="1159321">delta</span>&nbsp;<span class="op" id="1159327">:=</span>&nbsp;<span class="ident" id="1159330">uint64</span><span class="op" id="1159336">(</span><span class="num" id="1159337">1</span><span class="op" id="1159338">)</span><span class="op" id="1159339">;</span>&nbsp;<span class="ident" id="1159341">delta</span><span class="op" id="1159346">+</span><span class="ident" id="1159347">delta</span>&nbsp;<span class="op" id="1159353">&gt;</span>&nbsp;<span class="ident" id="1159355">delta</span><span class="op" id="1159360">;</span>&nbsp;<span class="ident" id="1159362">delta</span>&nbsp;<span class="op" id="1159368">+=</span>&nbsp;<span class="ident" id="1159371">delta</span>&nbsp;<span class="op" id="1159377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159381">StoreUint64</span><span class="op" id="1159392">(</span><span class="op" id="1159393">&amp;</span><span class="ident" id="1159394">x</span><span class="op" id="1159395">.</span><span class="ident" id="1159396">i</span><span class="op" id="1159397">,</span>&nbsp;<span class="ident" id="1159399">v</span><span class="op" id="1159400">)</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159404">if</span>&nbsp;<span class="ident" id="1159407">x</span><span class="op" id="1159408">.</span><span class="ident" id="1159409">i</span>&nbsp;<span class="op" id="1159411">!=</span>&nbsp;<span class="ident" id="1159414">v</span>&nbsp;<span class="op" id="1159416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159421">t</span><span class="op" id="1159422">.</span><span class="ident" id="1159423">Fatalf</span><span class="op" id="1159429">(</span><span class="string" id="1159430">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1159450">,</span>&nbsp;<span class="ident" id="1159452">delta</span><span class="op" id="1159457">,</span>&nbsp;<span class="ident" id="1159459">x</span><span class="op" id="1159460">.</span><span class="ident" id="1159461">i</span><span class="op" id="1159462">,</span>&nbsp;<span class="ident" id="1159464">v</span><span class="op" id="1159465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159473">v</span>&nbsp;<span class="op" id="1159475">+=</span>&nbsp;<span class="ident" id="1159478">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159485">}</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159488">if</span>&nbsp;<span class="ident" id="1159491">x</span><span class="op" id="1159492">.</span><span class="ident" id="1159493">before</span>&nbsp;<span class="op" id="1159500">!=</span>&nbsp;<span class="ident" id="1159503">magic64</span>&nbsp;<span class="op" id="1159511">||</span>&nbsp;<span class="ident" id="1159514">x</span><span class="op" id="1159515">.</span><span class="ident" id="1159516">after</span>&nbsp;<span class="op" id="1159522">!=</span>&nbsp;<span class="ident" id="1159525">magic64</span>&nbsp;<span class="op" id="1159533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159537">t</span><span class="op" id="1159538">.</span><span class="ident" id="1159539">Fatalf</span><span class="op" id="1159545">(</span><span class="string" id="1159546">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1159583">,</span>&nbsp;<span class="ident" id="1159585">x</span><span class="op" id="1159586">.</span><span class="ident" id="1159587">before</span><span class="op" id="1159593">,</span>&nbsp;<span class="ident" id="1159595">x</span><span class="op" id="1159596">.</span><span class="ident" id="1159597">after</span><span class="op" id="1159602">,</span>&nbsp;<span class="ident" id="1159604">uint64</span><span class="op" id="1159610">(</span><span class="ident" id="1159611">magic64</span><span class="op" id="1159618">)</span><span class="op" id="1159619">,</span>&nbsp;<span class="ident" id="1159621">uint64</span><span class="op" id="1159627">(</span><span class="ident" id="1159628">magic64</span><span class="op" id="1159635">)</span><span class="op" id="1159636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159639">}</span><br>
<span class="lineno"></span><span class="op" id="1159641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">700</span><span class="keyword" id="1159644">func</span>&nbsp;<span class="ident" id="1159649">TestStoreUintptr</span><span class="op" id="1159665">(</span><span class="ident" id="1159666">t</span>&nbsp;<span class="op" id="1159668">*</span><span class="ident" id="1159669">testing</span><span class="op" id="1159676">.</span><span class="ident" id="1159677">T</span><span class="op" id="1159678">)</span>&nbsp;<span class="op" id="1159680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159683">var</span>&nbsp;<span class="ident" id="1159687">x</span>&nbsp;<span class="keyword" id="1159689">struct</span>&nbsp;<span class="op" id="1159696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159700">before</span>&nbsp;<span class="builtintype" id="1159707">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159717">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="1159724">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159734">after</span>&nbsp;&nbsp;<span class="builtintype" id="1159741">uintptr</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1159750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159753">var</span>&nbsp;<span class="ident" id="1159757">m</span>&nbsp;<span class="ident" id="1159759">uint64</span>&nbsp;<span class="op" id="1159766">=</span>&nbsp;<span class="ident" id="1159768">magic64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159777">magicptr</span>&nbsp;<span class="op" id="1159786">:=</span>&nbsp;<span class="builtintype" id="1159789">uintptr</span><span class="op" id="1159796">(</span><span class="ident" id="1159797">m</span><span class="op" id="1159798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159801">x</span><span class="op" id="1159802">.</span><span class="ident" id="1159803">before</span>&nbsp;<span class="op" id="1159810">=</span>&nbsp;<span class="ident" id="1159812">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159822">x</span><span class="op" id="1159823">.</span><span class="ident" id="1159824">after</span>&nbsp;<span class="op" id="1159830">=</span>&nbsp;<span class="ident" id="1159832">magicptr</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159842">v</span>&nbsp;<span class="op" id="1159844">:=</span>&nbsp;<span class="builtintype" id="1159847">uintptr</span><span class="op" id="1159854">(</span><span class="num" id="1159855">0</span><span class="op" id="1159856">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159859">for</span>&nbsp;<span class="ident" id="1159863">delta</span>&nbsp;<span class="op" id="1159869">:=</span>&nbsp;<span class="builtintype" id="1159872">uintptr</span><span class="op" id="1159879">(</span><span class="num" id="1159880">1</span><span class="op" id="1159881">)</span><span class="op" id="1159882">;</span>&nbsp;<span class="ident" id="1159884">delta</span><span class="op" id="1159889">+</span><span class="ident" id="1159890">delta</span>&nbsp;<span class="op" id="1159896">&gt;</span>&nbsp;<span class="ident" id="1159898">delta</span><span class="op" id="1159903">;</span>&nbsp;<span class="ident" id="1159905">delta</span>&nbsp;<span class="op" id="1159911">+=</span>&nbsp;<span class="ident" id="1159914">delta</span>&nbsp;<span class="op" id="1159920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159924">StoreUintptr</span><span class="op" id="1159936">(</span><span class="op" id="1159937">&amp;</span><span class="ident" id="1159938">x</span><span class="op" id="1159939">.</span><span class="ident" id="1159940">i</span><span class="op" id="1159941">,</span>&nbsp;<span class="ident" id="1159943">v</span><span class="op" id="1159944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1159948">if</span>&nbsp;<span class="ident" id="1159951">x</span><span class="op" id="1159952">.</span><span class="ident" id="1159953">i</span>&nbsp;<span class="op" id="1159955">!=</span>&nbsp;<span class="ident" id="1159958">v</span>&nbsp;<span class="op" id="1159960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1159965">t</span><span class="op" id="1159966">.</span><span class="ident" id="1159967">Fatalf</span><span class="op" id="1159973">(</span><span class="string" id="1159974">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1159994">,</span>&nbsp;<span class="ident" id="1159996">delta</span><span class="op" id="1160001">,</span>&nbsp;<span class="ident" id="1160003">x</span><span class="op" id="1160004">.</span><span class="ident" id="1160005">i</span><span class="op" id="1160006">,</span>&nbsp;<span class="ident" id="1160008">v</span><span class="op" id="1160009">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160013">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160017">v</span>&nbsp;<span class="op" id="1160019">+=</span>&nbsp;<span class="ident" id="1160022">delta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160032">if</span>&nbsp;<span class="ident" id="1160035">x</span><span class="op" id="1160036">.</span><span class="ident" id="1160037">before</span>&nbsp;<span class="op" id="1160044">!=</span>&nbsp;<span class="ident" id="1160047">magicptr</span>&nbsp;<span class="op" id="1160056">||</span>&nbsp;<span class="ident" id="1160059">x</span><span class="op" id="1160060">.</span><span class="ident" id="1160061">after</span>&nbsp;<span class="op" id="1160067">!=</span>&nbsp;<span class="ident" id="1160070">magicptr</span>&nbsp;<span class="op" id="1160079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160083">t</span><span class="op" id="1160084">.</span><span class="ident" id="1160085">Fatalf</span><span class="op" id="1160091">(</span><span class="string" id="1160092">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1160129">,</span>&nbsp;<span class="ident" id="1160131">x</span><span class="op" id="1160132">.</span><span class="ident" id="1160133">before</span><span class="op" id="1160139">,</span>&nbsp;<span class="ident" id="1160141">x</span><span class="op" id="1160142">.</span><span class="ident" id="1160143">after</span><span class="op" id="1160148">,</span>&nbsp;<span class="ident" id="1160150">magicptr</span><span class="op" id="1160158">,</span>&nbsp;<span class="ident" id="1160160">magicptr</span><span class="op" id="1160168">)</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160171">}</span><br>
<span class="lineno"></span><span class="op" id="1160173">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1160176">func</span>&nbsp;<span class="ident" id="1160181">TestStorePointer</span><span class="op" id="1160197">(</span><span class="ident" id="1160198">t</span>&nbsp;<span class="op" id="1160200">*</span><span class="ident" id="1160201">testing</span><span class="op" id="1160208">.</span><span class="ident" id="1160209">T</span><span class="op" id="1160210">)</span>&nbsp;<span class="op" id="1160212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160215">var</span>&nbsp;<span class="ident" id="1160219">x</span>&nbsp;<span class="keyword" id="1160221">struct</span>&nbsp;<span class="op" id="1160228">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160232">before</span>&nbsp;<span class="builtintype" id="1160239">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160249">i</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1160256">unsafe</span><span class="op" id="1160262">.</span><span class="ident" id="1160263">Pointer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160273">after</span>&nbsp;&nbsp;<span class="builtintype" id="1160280">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160289">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160292">var</span>&nbsp;<span class="ident" id="1160296">m</span>&nbsp;<span class="ident" id="1160298">uint64</span>&nbsp;<span class="op" id="1160305">=</span>&nbsp;<span class="ident" id="1160307">magic64</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160316">magicptr</span>&nbsp;<span class="op" id="1160325">:=</span>&nbsp;<span class="builtintype" id="1160328">uintptr</span><span class="op" id="1160335">(</span><span class="ident" id="1160336">m</span><span class="op" id="1160337">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160340">x</span><span class="op" id="1160341">.</span><span class="ident" id="1160342">before</span>&nbsp;<span class="op" id="1160349">=</span>&nbsp;<span class="ident" id="1160351">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160361">x</span><span class="op" id="1160362">.</span><span class="ident" id="1160363">after</span>&nbsp;<span class="op" id="1160369">=</span>&nbsp;<span class="ident" id="1160371">magicptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160381">v</span>&nbsp;<span class="op" id="1160383">:=</span>&nbsp;<span class="ident" id="1160386">unsafe</span><span class="op" id="1160392">.</span><span class="ident" id="1160393">Pointer</span><span class="op" id="1160400">(</span><span class="builtintype" id="1160401">uintptr</span><span class="op" id="1160408">(</span><span class="num" id="1160409">0</span><span class="op" id="1160410">)</span><span class="op" id="1160411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160414">for</span>&nbsp;<span class="ident" id="1160418">delta</span>&nbsp;<span class="op" id="1160424">:=</span>&nbsp;<span class="builtintype" id="1160427">uintptr</span><span class="op" id="1160434">(</span><span class="num" id="1160435">1</span><span class="op" id="1160436">)</span><span class="op" id="1160437">;</span>&nbsp;<span class="ident" id="1160439">delta</span><span class="op" id="1160444">+</span><span class="ident" id="1160445">delta</span>&nbsp;<span class="op" id="1160451">&gt;</span>&nbsp;<span class="ident" id="1160453">delta</span><span class="op" id="1160458">;</span>&nbsp;<span class="ident" id="1160460">delta</span>&nbsp;<span class="op" id="1160466">+=</span>&nbsp;<span class="ident" id="1160469">delta</span>&nbsp;<span class="op" id="1160475">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160479">StorePointer</span><span class="op" id="1160491">(</span><span class="op" id="1160492">&amp;</span><span class="ident" id="1160493">x</span><span class="op" id="1160494">.</span><span class="ident" id="1160495">i</span><span class="op" id="1160496">,</span>&nbsp;<span class="ident" id="1160498">unsafe</span><span class="op" id="1160504">.</span><span class="ident" id="1160505">Pointer</span><span class="op" id="1160512">(</span><span class="ident" id="1160513">v</span><span class="op" id="1160514">)</span><span class="op" id="1160515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160519">if</span>&nbsp;<span class="ident" id="1160522">x</span><span class="op" id="1160523">.</span><span class="ident" id="1160524">i</span>&nbsp;<span class="op" id="1160526">!=</span>&nbsp;<span class="ident" id="1160529">v</span>&nbsp;<span class="op" id="1160531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160536">t</span><span class="op" id="1160537">.</span><span class="ident" id="1160538">Fatalf</span><span class="op" id="1160544">(</span><span class="string" id="1160545">&#34;delta=%d&nbsp;i=%d&nbsp;v=%d&#34;</span><span class="op" id="1160565">,</span>&nbsp;<span class="ident" id="1160567">delta</span><span class="op" id="1160572">,</span>&nbsp;<span class="ident" id="1160574">x</span><span class="op" id="1160575">.</span><span class="ident" id="1160576">i</span><span class="op" id="1160577">,</span>&nbsp;<span class="ident" id="1160579">v</span><span class="op" id="1160580">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160584">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160588">v</span>&nbsp;<span class="op" id="1160590">=</span>&nbsp;<span class="ident" id="1160592">unsafe</span><span class="op" id="1160598">.</span><span class="ident" id="1160599">Pointer</span><span class="op" id="1160606">(</span><span class="builtintype" id="1160607">uintptr</span><span class="op" id="1160614">(</span><span class="ident" id="1160615">v</span><span class="op" id="1160616">)</span>&nbsp;<span class="op" id="1160618">+</span>&nbsp;<span class="ident" id="1160620">delta</span><span class="op" id="1160625">)</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1160631">if</span>&nbsp;<span class="ident" id="1160634">x</span><span class="op" id="1160635">.</span><span class="ident" id="1160636">before</span>&nbsp;<span class="op" id="1160643">!=</span>&nbsp;<span class="ident" id="1160646">magicptr</span>&nbsp;<span class="op" id="1160655">||</span>&nbsp;<span class="ident" id="1160658">x</span><span class="op" id="1160659">.</span><span class="ident" id="1160660">after</span>&nbsp;<span class="op" id="1160666">!=</span>&nbsp;<span class="ident" id="1160669">magicptr</span>&nbsp;<span class="op" id="1160678">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1160682">t</span><span class="op" id="1160683">.</span><span class="ident" id="1160684">Fatalf</span><span class="op" id="1160690">(</span><span class="string" id="1160691">&#34;wrong&nbsp;magic:&nbsp;%#x&nbsp;_&nbsp;%#x&nbsp;!=&nbsp;%#x&nbsp;_&nbsp;%#x&#34;</span><span class="op" id="1160728">,</span>&nbsp;<span class="ident" id="1160730">x</span><span class="op" id="1160731">.</span><span class="ident" id="1160732">before</span><span class="op" id="1160738">,</span>&nbsp;<span class="ident" id="1160740">x</span><span class="op" id="1160741">.</span><span class="ident" id="1160742">after</span><span class="op" id="1160747">,</span>&nbsp;<span class="ident" id="1160749">magicptr</span><span class="op" id="1160757">,</span>&nbsp;<span class="ident" id="1160759">magicptr</span><span class="op" id="1160767">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1160770">}</span><br>
<span class="lineno"></span><span class="op" id="1160772">}</span><br>
<span class="lineno">745</span><br>
<span class="lineno"></span><span class="comment" id="1160775">//&nbsp;Tests&nbsp;of&nbsp;correct&nbsp;behavior,&nbsp;with&nbsp;contention.</span><br>
<span class="lineno"></span><span class="comment" id="1160822">//&nbsp;(Is&nbsp;the&nbsp;function&nbsp;atomic?)</span><br>
<span class="lineno"></span><span class="comment" id="1160851">//</span><br>
<span class="lineno"></span><span class="comment" id="1160854">//&nbsp;For&nbsp;each&nbsp;function,&nbsp;we&nbsp;write&nbsp;a&nbsp;&#34;hammer&#34;&nbsp;function&nbsp;that&nbsp;repeatedly</span><br>
<span class="lineno">750</span><span class="comment" id="1160921">//&nbsp;uses&nbsp;the&nbsp;atomic&nbsp;operation&nbsp;to&nbsp;add&nbsp;1&nbsp;to&nbsp;a&nbsp;value.&nbsp;&nbsp;After&nbsp;running</span><br>
<span class="lineno"></span><span class="comment" id="1160986">//&nbsp;multiple&nbsp;hammers&nbsp;in&nbsp;parallel,&nbsp;check&nbsp;that&nbsp;we&nbsp;end&nbsp;with&nbsp;the&nbsp;correct</span><br>
<span class="lineno"></span><span class="comment" id="1161054">//&nbsp;total.</span><br>
<span class="lineno"></span><span class="comment" id="1161064">//&nbsp;Swap&nbsp;can&#39;t&nbsp;add&nbsp;1,&nbsp;so&nbsp;it&nbsp;uses&nbsp;a&nbsp;different&nbsp;scheme.</span><br>
<span class="lineno"></span><span class="comment" id="1161116">//&nbsp;The&nbsp;functions&nbsp;repeatedly&nbsp;generate&nbsp;a&nbsp;pseudo-random&nbsp;number&nbsp;such&nbsp;that</span><br>
<span class="lineno">755</span><span class="comment" id="1161186">//&nbsp;low&nbsp;bits&nbsp;are&nbsp;equal&nbsp;to&nbsp;high&nbsp;bits,&nbsp;swap,&nbsp;check&nbsp;that&nbsp;the&nbsp;old&nbsp;value</span><br>
<span class="lineno"></span><span class="comment" id="1161253">//&nbsp;has&nbsp;low&nbsp;and&nbsp;high&nbsp;bits&nbsp;equal.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1161286">var</span>&nbsp;<span class="ident" id="1161290">hammer32</span>&nbsp;<span class="op" id="1161299">=</span>&nbsp;<span class="keyword" id="1161301">map</span><span class="op" id="1161304">[</span><span class="builtintype" id="1161305">string</span><span class="op" id="1161311">]</span><span class="keyword" id="1161312">func</span><span class="op" id="1161316">(</span><span class="op" id="1161317">*</span><span class="builtintype" id="1161318">uint32</span><span class="op" id="1161324">,</span>&nbsp;<span class="builtintype" id="1161326">int</span><span class="op" id="1161329">)</span><span class="op" id="1161330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161333">&#34;SwapInt32&#34;</span><span class="op" id="1161344">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161358">hammerSwapInt32</span><span class="op" id="1161373">,</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161376">&#34;SwapUint32&#34;</span><span class="op" id="1161388">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161401">hammerSwapUint32</span><span class="op" id="1161417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161420">&#34;SwapUintptr&#34;</span><span class="op" id="1161433">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161445">hammerSwapUintptr32</span><span class="op" id="1161464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161467">&#34;SwapPointer&#34;</span><span class="op" id="1161480">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161492">hammerSwapPointer32</span><span class="op" id="1161511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161514">&#34;AddInt32&#34;</span><span class="op" id="1161524">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161539">hammerAddInt32</span><span class="op" id="1161553">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161556">&#34;AddUint32&#34;</span><span class="op" id="1161567">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161581">hammerAddUint32</span><span class="op" id="1161596">,</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161599">&#34;AddUintptr&#34;</span><span class="op" id="1161611">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1161624">hammerAddUintptr32</span><span class="op" id="1161642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161645">&#34;CompareAndSwapInt32&#34;</span><span class="op" id="1161666">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1161670">hammerCompareAndSwapInt32</span><span class="op" id="1161695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161698">&#34;CompareAndSwapUint32&#34;</span><span class="op" id="1161720">:</span>&nbsp;&nbsp;<span class="ident" id="1161723">hammerCompareAndSwapUint32</span><span class="op" id="1161749">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161752">&#34;CompareAndSwapUintptr&#34;</span><span class="op" id="1161775">:</span>&nbsp;<span class="ident" id="1161777">hammerCompareAndSwapUintptr32</span><span class="op" id="1161806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1161809">&#34;CompareAndSwapPointer&#34;</span><span class="op" id="1161832">:</span>&nbsp;<span class="ident" id="1161834">hammerCompareAndSwapPointer32</span><span class="op" id="1161863">,</span><br>
<span class="lineno">770</span><span class="op" id="1161865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1161868">func</span>&nbsp;<span class="ident" id="1161873">init</span><span class="op" id="1161877">(</span><span class="op" id="1161878">)</span>&nbsp;<span class="op" id="1161880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1161883">var</span>&nbsp;<span class="ident" id="1161887">v</span>&nbsp;<span class="ident" id="1161889">uint64</span>&nbsp;<span class="op" id="1161896">=</span>&nbsp;<span class="num" id="1161898">1</span>&nbsp;<span class="op" id="1161900">&lt;&lt;</span>&nbsp;<span class="num" id="1161903">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1161907">if</span>&nbsp;<span class="builtintype" id="1161910">uintptr</span><span class="op" id="1161917">(</span><span class="ident" id="1161918">v</span><span class="op" id="1161919">)</span>&nbsp;<span class="op" id="1161921">!=</span>&nbsp;<span class="num" id="1161924">0</span>&nbsp;<span class="op" id="1161926">{</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1161930">//&nbsp;64-bit&nbsp;system;&nbsp;clear&nbsp;uintptr&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1161970">delete</span><span class="op" id="1161976">(</span><span class="ident" id="1161977">hammer32</span><span class="op" id="1161985">,</span>&nbsp;<span class="string" id="1161987">&#34;SwapUintptr&#34;</span><span class="op" id="1162000">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162004">delete</span><span class="op" id="1162010">(</span><span class="ident" id="1162011">hammer32</span><span class="op" id="1162019">,</span>&nbsp;<span class="string" id="1162021">&#34;SwapPointer&#34;</span><span class="op" id="1162034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162038">delete</span><span class="op" id="1162044">(</span><span class="ident" id="1162045">hammer32</span><span class="op" id="1162053">,</span>&nbsp;<span class="string" id="1162055">&#34;AddUintptr&#34;</span><span class="op" id="1162067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162071">delete</span><span class="op" id="1162077">(</span><span class="ident" id="1162078">hammer32</span><span class="op" id="1162086">,</span>&nbsp;<span class="string" id="1162088">&#34;CompareAndSwapUintptr&#34;</span><span class="op" id="1162111">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162115">delete</span><span class="op" id="1162121">(</span><span class="ident" id="1162122">hammer32</span><span class="op" id="1162130">,</span>&nbsp;<span class="string" id="1162132">&#34;CompareAndSwapPointer&#34;</span><span class="op" id="1162155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1162158">}</span><br>
<span class="lineno"></span><span class="op" id="1162160">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1162163">func</span>&nbsp;<span class="ident" id="1162168">hammerSwapInt32</span><span class="op" id="1162183">(</span><span class="ident" id="1162184">uaddr</span>&nbsp;<span class="op" id="1162190">*</span><span class="builtintype" id="1162191">uint32</span><span class="op" id="1162197">,</span>&nbsp;<span class="ident" id="1162199">count</span>&nbsp;<span class="builtintype" id="1162205">int</span><span class="op" id="1162208">)</span>&nbsp;<span class="op" id="1162210">{</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162213">addr</span>&nbsp;<span class="op" id="1162218">:=</span>&nbsp;<span class="op" id="1162221">(</span><span class="op" id="1162222">*</span><span class="builtintype" id="1162223">int32</span><span class="op" id="1162228">)</span><span class="op" id="1162229">(</span><span class="ident" id="1162230">unsafe</span><span class="op" id="1162236">.</span><span class="ident" id="1162237">Pointer</span><span class="op" id="1162244">(</span><span class="ident" id="1162245">uaddr</span><span class="op" id="1162250">)</span><span class="op" id="1162251">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162254">seed</span>&nbsp;<span class="op" id="1162259">:=</span>&nbsp;<span class="builtintype" id="1162262">int</span><span class="op" id="1162265">(</span><span class="builtintype" id="1162266">uintptr</span><span class="op" id="1162273">(</span><span class="ident" id="1162274">unsafe</span><span class="op" id="1162280">.</span><span class="ident" id="1162281">Pointer</span><span class="op" id="1162288">(</span><span class="op" id="1162289">&amp;</span><span class="ident" id="1162290">count</span><span class="op" id="1162295">)</span><span class="op" id="1162296">)</span><span class="op" id="1162297">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1162300">for</span>&nbsp;<span class="ident" id="1162304">i</span>&nbsp;<span class="op" id="1162306">:=</span>&nbsp;<span class="num" id="1162309">0</span><span class="op" id="1162310">;</span>&nbsp;<span class="ident" id="1162312">i</span>&nbsp;<span class="op" id="1162314">&lt;</span>&nbsp;<span class="ident" id="1162316">count</span><span class="op" id="1162321">;</span>&nbsp;<span class="ident" id="1162323">i</span><span class="op" id="1162324">++</span>&nbsp;<span class="op" id="1162327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162331">new</span>&nbsp;<span class="op" id="1162335">:=</span>&nbsp;<span class="builtintype" id="1162338">uint32</span><span class="op" id="1162344">(</span><span class="ident" id="1162345">seed</span><span class="op" id="1162349">+</span><span class="ident" id="1162350">i</span><span class="op" id="1162351">)</span><span class="op" id="1162352">&lt;&lt;</span><span class="num" id="1162354">16</span>&nbsp;<span class="op" id="1162357">|</span>&nbsp;<span class="builtintype" id="1162359">uint32</span><span class="op" id="1162365">(</span><span class="ident" id="1162366">seed</span><span class="op" id="1162370">+</span><span class="ident" id="1162371">i</span><span class="op" id="1162372">)</span><span class="op" id="1162373">&lt;&lt;</span><span class="num" id="1162375">16</span><span class="op" id="1162377">&gt;&gt;</span><span class="num" id="1162379">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162384">old</span>&nbsp;<span class="op" id="1162388">:=</span>&nbsp;<span class="builtintype" id="1162391">uint32</span><span class="op" id="1162397">(</span><span class="ident" id="1162398">SwapInt32</span><span class="op" id="1162407">(</span><span class="ident" id="1162408">addr</span><span class="op" id="1162412">,</span>&nbsp;<span class="builtintype" id="1162414">int32</span><span class="op" id="1162419">(</span><span class="builtinfunc" id="1162420">new</span><span class="op" id="1162423">)</span><span class="op" id="1162424">)</span><span class="op" id="1162425">)</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1162429">if</span>&nbsp;<span class="ident" id="1162432">old</span><span class="op" id="1162435">&gt;&gt;</span><span class="num" id="1162437">16</span>&nbsp;<span class="op" id="1162440">!=</span>&nbsp;<span class="ident" id="1162443">old</span><span class="op" id="1162446">&lt;&lt;</span><span class="num" id="1162448">16</span><span class="op" id="1162450">&gt;&gt;</span><span class="num" id="1162452">16</span>&nbsp;<span class="op" id="1162455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162460">panic</span><span class="op" id="1162465">(</span><span class="ident" id="1162466">fmt</span><span class="op" id="1162469">.</span><span class="ident" id="1162470">Sprintf</span><span class="op" id="1162477">(</span><span class="string" id="1162478">&#34;SwapInt32&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1162507">,</span>&nbsp;<span class="ident" id="1162509">old</span><span class="op" id="1162512">)</span><span class="op" id="1162513">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1162517">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1162520">}</span><br>
<span class="lineno"></span><span class="op" id="1162522">}</span><br>
<span class="lineno">795</span><br>
<span class="lineno"></span><span class="keyword" id="1162525">func</span>&nbsp;<span class="ident" id="1162530">hammerSwapUint32</span><span class="op" id="1162546">(</span><span class="ident" id="1162547">addr</span>&nbsp;<span class="op" id="1162552">*</span><span class="builtintype" id="1162553">uint32</span><span class="op" id="1162559">,</span>&nbsp;<span class="ident" id="1162561">count</span>&nbsp;<span class="builtintype" id="1162567">int</span><span class="op" id="1162570">)</span>&nbsp;<span class="op" id="1162572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162575">seed</span>&nbsp;<span class="op" id="1162580">:=</span>&nbsp;<span class="builtintype" id="1162583">int</span><span class="op" id="1162586">(</span><span class="builtintype" id="1162587">uintptr</span><span class="op" id="1162594">(</span><span class="ident" id="1162595">unsafe</span><span class="op" id="1162601">.</span><span class="ident" id="1162602">Pointer</span><span class="op" id="1162609">(</span><span class="op" id="1162610">&amp;</span><span class="ident" id="1162611">count</span><span class="op" id="1162616">)</span><span class="op" id="1162617">)</span><span class="op" id="1162618">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1162621">for</span>&nbsp;<span class="ident" id="1162625">i</span>&nbsp;<span class="op" id="1162627">:=</span>&nbsp;<span class="num" id="1162630">0</span><span class="op" id="1162631">;</span>&nbsp;<span class="ident" id="1162633">i</span>&nbsp;<span class="op" id="1162635">&lt;</span>&nbsp;<span class="ident" id="1162637">count</span><span class="op" id="1162642">;</span>&nbsp;<span class="ident" id="1162644">i</span><span class="op" id="1162645">++</span>&nbsp;<span class="op" id="1162648">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162652">new</span>&nbsp;<span class="op" id="1162656">:=</span>&nbsp;<span class="builtintype" id="1162659">uint32</span><span class="op" id="1162665">(</span><span class="ident" id="1162666">seed</span><span class="op" id="1162670">+</span><span class="ident" id="1162671">i</span><span class="op" id="1162672">)</span><span class="op" id="1162673">&lt;&lt;</span><span class="num" id="1162675">16</span>&nbsp;<span class="op" id="1162678">|</span>&nbsp;<span class="builtintype" id="1162680">uint32</span><span class="op" id="1162686">(</span><span class="ident" id="1162687">seed</span><span class="op" id="1162691">+</span><span class="ident" id="1162692">i</span><span class="op" id="1162693">)</span><span class="op" id="1162694">&lt;&lt;</span><span class="num" id="1162696">16</span><span class="op" id="1162698">&gt;&gt;</span><span class="num" id="1162700">16</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162705">old</span>&nbsp;<span class="op" id="1162709">:=</span>&nbsp;<span class="ident" id="1162712">SwapUint32</span><span class="op" id="1162722">(</span><span class="ident" id="1162723">addr</span><span class="op" id="1162727">,</span>&nbsp;<span class="builtinfunc" id="1162729">new</span><span class="op" id="1162732">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1162736">if</span>&nbsp;<span class="ident" id="1162739">old</span><span class="op" id="1162742">&gt;&gt;</span><span class="num" id="1162744">16</span>&nbsp;<span class="op" id="1162747">!=</span>&nbsp;<span class="ident" id="1162750">old</span><span class="op" id="1162753">&lt;&lt;</span><span class="num" id="1162755">16</span><span class="op" id="1162757">&gt;&gt;</span><span class="num" id="1162759">16</span>&nbsp;<span class="op" id="1162762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1162767">panic</span><span class="op" id="1162772">(</span><span class="ident" id="1162773">fmt</span><span class="op" id="1162776">.</span><span class="ident" id="1162777">Sprintf</span><span class="op" id="1162784">(</span><span class="string" id="1162785">&#34;SwapUint32&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1162815">,</span>&nbsp;<span class="ident" id="1162817">old</span><span class="op" id="1162820">)</span><span class="op" id="1162821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1162825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1162828">}</span><br>
<span class="lineno">805</span><span class="op" id="1162830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1162833">func</span>&nbsp;<span class="ident" id="1162838">hammerSwapUintptr32</span><span class="op" id="1162857">(</span><span class="ident" id="1162858">uaddr</span>&nbsp;<span class="op" id="1162864">*</span><span class="builtintype" id="1162865">uint32</span><span class="op" id="1162871">,</span>&nbsp;<span class="ident" id="1162873">count</span>&nbsp;<span class="builtintype" id="1162879">int</span><span class="op" id="1162882">)</span>&nbsp;<span class="op" id="1162884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1162887">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;32-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1162925">//&nbsp;not&nbsp;called&nbsp;on&nbsp;64-bit&nbsp;systems.</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1162959">addr</span>&nbsp;<span class="op" id="1162964">:=</span>&nbsp;<span class="op" id="1162967">(</span><span class="op" id="1162968">*</span><span class="builtintype" id="1162969">uintptr</span><span class="op" id="1162976">)</span><span class="op" id="1162977">(</span><span class="ident" id="1162978">unsafe</span><span class="op" id="1162984">.</span><span class="ident" id="1162985">Pointer</span><span class="op" id="1162992">(</span><span class="ident" id="1162993">uaddr</span><span class="op" id="1162998">)</span><span class="op" id="1162999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163002">seed</span>&nbsp;<span class="op" id="1163007">:=</span>&nbsp;<span class="builtintype" id="1163010">int</span><span class="op" id="1163013">(</span><span class="builtintype" id="1163014">uintptr</span><span class="op" id="1163021">(</span><span class="ident" id="1163022">unsafe</span><span class="op" id="1163028">.</span><span class="ident" id="1163029">Pointer</span><span class="op" id="1163036">(</span><span class="op" id="1163037">&amp;</span><span class="ident" id="1163038">count</span><span class="op" id="1163043">)</span><span class="op" id="1163044">)</span><span class="op" id="1163045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163048">for</span>&nbsp;<span class="ident" id="1163052">i</span>&nbsp;<span class="op" id="1163054">:=</span>&nbsp;<span class="num" id="1163057">0</span><span class="op" id="1163058">;</span>&nbsp;<span class="ident" id="1163060">i</span>&nbsp;<span class="op" id="1163062">&lt;</span>&nbsp;<span class="ident" id="1163064">count</span><span class="op" id="1163069">;</span>&nbsp;<span class="ident" id="1163071">i</span><span class="op" id="1163072">++</span>&nbsp;<span class="op" id="1163075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1163079">new</span>&nbsp;<span class="op" id="1163083">:=</span>&nbsp;<span class="builtintype" id="1163086">uintptr</span><span class="op" id="1163093">(</span><span class="ident" id="1163094">seed</span><span class="op" id="1163098">+</span><span class="ident" id="1163099">i</span><span class="op" id="1163100">)</span><span class="op" id="1163101">&lt;&lt;</span><span class="num" id="1163103">16</span>&nbsp;<span class="op" id="1163106">|</span>&nbsp;<span class="builtintype" id="1163108">uintptr</span><span class="op" id="1163115">(</span><span class="ident" id="1163116">seed</span><span class="op" id="1163120">+</span><span class="ident" id="1163121">i</span><span class="op" id="1163122">)</span><span class="op" id="1163123">&lt;&lt;</span><span class="num" id="1163125">16</span><span class="op" id="1163127">&gt;&gt;</span><span class="num" id="1163129">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163134">old</span>&nbsp;<span class="op" id="1163138">:=</span>&nbsp;<span class="ident" id="1163141">SwapUintptr</span><span class="op" id="1163152">(</span><span class="ident" id="1163153">addr</span><span class="op" id="1163157">,</span>&nbsp;<span class="builtinfunc" id="1163159">new</span><span class="op" id="1163162">)</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163166">if</span>&nbsp;<span class="ident" id="1163169">old</span><span class="op" id="1163172">&gt;&gt;</span><span class="num" id="1163174">16</span>&nbsp;<span class="op" id="1163177">!=</span>&nbsp;<span class="ident" id="1163180">old</span><span class="op" id="1163183">&lt;&lt;</span><span class="num" id="1163185">16</span><span class="op" id="1163187">&gt;&gt;</span><span class="num" id="1163189">16</span>&nbsp;<span class="op" id="1163192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1163197">panic</span><span class="op" id="1163202">(</span><span class="ident" id="1163203">fmt</span><span class="op" id="1163206">.</span><span class="ident" id="1163207">Sprintf</span><span class="op" id="1163214">(</span><span class="string" id="1163215">&#34;SwapUintptr&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%#08x&#34;</span><span class="op" id="1163249">,</span>&nbsp;<span class="ident" id="1163251">old</span><span class="op" id="1163254">)</span><span class="op" id="1163255">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163259">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163262">}</span><br>
<span class="lineno"></span><span class="op" id="1163264">}</span><br>
<span class="lineno">820</span><br>
<span class="lineno"></span><span class="keyword" id="1163267">func</span>&nbsp;<span class="ident" id="1163272">hammerSwapPointer32</span><span class="op" id="1163291">(</span><span class="ident" id="1163292">uaddr</span>&nbsp;<span class="op" id="1163298">*</span><span class="builtintype" id="1163299">uint32</span><span class="op" id="1163305">,</span>&nbsp;<span class="ident" id="1163307">count</span>&nbsp;<span class="builtintype" id="1163313">int</span><span class="op" id="1163316">)</span>&nbsp;<span class="op" id="1163318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1163321">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;32-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1163359">//&nbsp;not&nbsp;called&nbsp;on&nbsp;64-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163393">addr</span>&nbsp;<span class="op" id="1163398">:=</span>&nbsp;<span class="op" id="1163401">(</span><span class="op" id="1163402">*</span><span class="ident" id="1163403">unsafe</span><span class="op" id="1163409">.</span><span class="ident" id="1163410">Pointer</span><span class="op" id="1163417">)</span><span class="op" id="1163418">(</span><span class="ident" id="1163419">unsafe</span><span class="op" id="1163425">.</span><span class="ident" id="1163426">Pointer</span><span class="op" id="1163433">(</span><span class="ident" id="1163434">uaddr</span><span class="op" id="1163439">)</span><span class="op" id="1163440">)</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163443">seed</span>&nbsp;<span class="op" id="1163448">:=</span>&nbsp;<span class="builtintype" id="1163451">int</span><span class="op" id="1163454">(</span><span class="builtintype" id="1163455">uintptr</span><span class="op" id="1163462">(</span><span class="ident" id="1163463">unsafe</span><span class="op" id="1163469">.</span><span class="ident" id="1163470">Pointer</span><span class="op" id="1163477">(</span><span class="op" id="1163478">&amp;</span><span class="ident" id="1163479">count</span><span class="op" id="1163484">)</span><span class="op" id="1163485">)</span><span class="op" id="1163486">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163489">for</span>&nbsp;<span class="ident" id="1163493">i</span>&nbsp;<span class="op" id="1163495">:=</span>&nbsp;<span class="num" id="1163498">0</span><span class="op" id="1163499">;</span>&nbsp;<span class="ident" id="1163501">i</span>&nbsp;<span class="op" id="1163503">&lt;</span>&nbsp;<span class="ident" id="1163505">count</span><span class="op" id="1163510">;</span>&nbsp;<span class="ident" id="1163512">i</span><span class="op" id="1163513">++</span>&nbsp;<span class="op" id="1163516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1163520">new</span>&nbsp;<span class="op" id="1163524">:=</span>&nbsp;<span class="builtintype" id="1163527">uintptr</span><span class="op" id="1163534">(</span><span class="ident" id="1163535">seed</span><span class="op" id="1163539">+</span><span class="ident" id="1163540">i</span><span class="op" id="1163541">)</span><span class="op" id="1163542">&lt;&lt;</span><span class="num" id="1163544">16</span>&nbsp;<span class="op" id="1163547">|</span>&nbsp;<span class="builtintype" id="1163549">uintptr</span><span class="op" id="1163556">(</span><span class="ident" id="1163557">seed</span><span class="op" id="1163561">+</span><span class="ident" id="1163562">i</span><span class="op" id="1163563">)</span><span class="op" id="1163564">&lt;&lt;</span><span class="num" id="1163566">16</span><span class="op" id="1163568">&gt;&gt;</span><span class="num" id="1163570">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163575">old</span>&nbsp;<span class="op" id="1163579">:=</span>&nbsp;<span class="builtintype" id="1163582">uintptr</span><span class="op" id="1163589">(</span><span class="ident" id="1163590">SwapPointer</span><span class="op" id="1163601">(</span><span class="ident" id="1163602">addr</span><span class="op" id="1163606">,</span>&nbsp;<span class="ident" id="1163608">unsafe</span><span class="op" id="1163614">.</span><span class="ident" id="1163615">Pointer</span><span class="op" id="1163622">(</span><span class="builtinfunc" id="1163623">new</span><span class="op" id="1163626">)</span><span class="op" id="1163627">)</span><span class="op" id="1163628">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163632">if</span>&nbsp;<span class="ident" id="1163635">old</span><span class="op" id="1163638">&gt;&gt;</span><span class="num" id="1163640">16</span>&nbsp;<span class="op" id="1163643">!=</span>&nbsp;<span class="ident" id="1163646">old</span><span class="op" id="1163649">&lt;&lt;</span><span class="num" id="1163651">16</span><span class="op" id="1163653">&gt;&gt;</span><span class="num" id="1163655">16</span>&nbsp;<span class="op" id="1163658">{</span><br>
<span class="lineno">830</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1163663">panic</span><span class="op" id="1163668">(</span><span class="ident" id="1163669">fmt</span><span class="op" id="1163672">.</span><span class="ident" id="1163673">Sprintf</span><span class="op" id="1163680">(</span><span class="string" id="1163681">&#34;SwapPointer&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%#08x&#34;</span><span class="op" id="1163715">,</span>&nbsp;<span class="ident" id="1163717">old</span><span class="op" id="1163720">)</span><span class="op" id="1163721">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163728">}</span><br>
<span class="lineno"></span><span class="op" id="1163730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">835</span><span class="keyword" id="1163733">func</span>&nbsp;<span class="ident" id="1163738">hammerAddInt32</span><span class="op" id="1163752">(</span><span class="ident" id="1163753">uaddr</span>&nbsp;<span class="op" id="1163759">*</span><span class="builtintype" id="1163760">uint32</span><span class="op" id="1163766">,</span>&nbsp;<span class="ident" id="1163768">count</span>&nbsp;<span class="builtintype" id="1163774">int</span><span class="op" id="1163777">)</span>&nbsp;<span class="op" id="1163779">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163782">addr</span>&nbsp;<span class="op" id="1163787">:=</span>&nbsp;<span class="op" id="1163790">(</span><span class="op" id="1163791">*</span><span class="builtintype" id="1163792">int32</span><span class="op" id="1163797">)</span><span class="op" id="1163798">(</span><span class="ident" id="1163799">unsafe</span><span class="op" id="1163805">.</span><span class="ident" id="1163806">Pointer</span><span class="op" id="1163813">(</span><span class="ident" id="1163814">uaddr</span><span class="op" id="1163819">)</span><span class="op" id="1163820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163823">for</span>&nbsp;<span class="ident" id="1163827">i</span>&nbsp;<span class="op" id="1163829">:=</span>&nbsp;<span class="num" id="1163832">0</span><span class="op" id="1163833">;</span>&nbsp;<span class="ident" id="1163835">i</span>&nbsp;<span class="op" id="1163837">&lt;</span>&nbsp;<span class="ident" id="1163839">count</span><span class="op" id="1163844">;</span>&nbsp;<span class="ident" id="1163846">i</span><span class="op" id="1163847">++</span>&nbsp;<span class="op" id="1163850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163854">AddInt32</span><span class="op" id="1163862">(</span><span class="ident" id="1163863">addr</span><span class="op" id="1163867">,</span>&nbsp;<span class="num" id="1163869">1</span><span class="op" id="1163870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163873">}</span><br>
<span class="lineno">840</span><span class="op" id="1163875">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1163878">func</span>&nbsp;<span class="ident" id="1163883">hammerAddUint32</span><span class="op" id="1163898">(</span><span class="ident" id="1163899">addr</span>&nbsp;<span class="op" id="1163904">*</span><span class="builtintype" id="1163905">uint32</span><span class="op" id="1163911">,</span>&nbsp;<span class="ident" id="1163913">count</span>&nbsp;<span class="builtintype" id="1163919">int</span><span class="op" id="1163922">)</span>&nbsp;<span class="op" id="1163924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1163927">for</span>&nbsp;<span class="ident" id="1163931">i</span>&nbsp;<span class="op" id="1163933">:=</span>&nbsp;<span class="num" id="1163936">0</span><span class="op" id="1163937">;</span>&nbsp;<span class="ident" id="1163939">i</span>&nbsp;<span class="op" id="1163941">&lt;</span>&nbsp;<span class="ident" id="1163943">count</span><span class="op" id="1163948">;</span>&nbsp;<span class="ident" id="1163950">i</span><span class="op" id="1163951">++</span>&nbsp;<span class="op" id="1163954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1163958">AddUint32</span><span class="op" id="1163967">(</span><span class="ident" id="1163968">addr</span><span class="op" id="1163972">,</span>&nbsp;<span class="num" id="1163974">1</span><span class="op" id="1163975">)</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1163978">}</span><br>
<span class="lineno"></span><span class="op" id="1163980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1163983">func</span>&nbsp;<span class="ident" id="1163988">hammerAddUintptr32</span><span class="op" id="1164006">(</span><span class="ident" id="1164007">uaddr</span>&nbsp;<span class="op" id="1164013">*</span><span class="builtintype" id="1164014">uint32</span><span class="op" id="1164020">,</span>&nbsp;<span class="ident" id="1164022">count</span>&nbsp;<span class="builtintype" id="1164028">int</span><span class="op" id="1164031">)</span>&nbsp;<span class="op" id="1164033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1164036">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;32-bit.</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1164074">//&nbsp;not&nbsp;called&nbsp;on&nbsp;64-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164108">addr</span>&nbsp;<span class="op" id="1164113">:=</span>&nbsp;<span class="op" id="1164116">(</span><span class="op" id="1164117">*</span><span class="builtintype" id="1164118">uintptr</span><span class="op" id="1164125">)</span><span class="op" id="1164126">(</span><span class="ident" id="1164127">unsafe</span><span class="op" id="1164133">.</span><span class="ident" id="1164134">Pointer</span><span class="op" id="1164141">(</span><span class="ident" id="1164142">uaddr</span><span class="op" id="1164147">)</span><span class="op" id="1164148">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164151">for</span>&nbsp;<span class="ident" id="1164155">i</span>&nbsp;<span class="op" id="1164157">:=</span>&nbsp;<span class="num" id="1164160">0</span><span class="op" id="1164161">;</span>&nbsp;<span class="ident" id="1164163">i</span>&nbsp;<span class="op" id="1164165">&lt;</span>&nbsp;<span class="ident" id="1164167">count</span><span class="op" id="1164172">;</span>&nbsp;<span class="ident" id="1164174">i</span><span class="op" id="1164175">++</span>&nbsp;<span class="op" id="1164178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164182">AddUintptr</span><span class="op" id="1164192">(</span><span class="ident" id="1164193">addr</span><span class="op" id="1164197">,</span>&nbsp;<span class="num" id="1164199">1</span><span class="op" id="1164200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164203">}</span><br>
<span class="lineno">855</span><span class="op" id="1164205">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1164208">func</span>&nbsp;<span class="ident" id="1164213">hammerCompareAndSwapInt32</span><span class="op" id="1164238">(</span><span class="ident" id="1164239">uaddr</span>&nbsp;<span class="op" id="1164245">*</span><span class="builtintype" id="1164246">uint32</span><span class="op" id="1164252">,</span>&nbsp;<span class="ident" id="1164254">count</span>&nbsp;<span class="builtintype" id="1164260">int</span><span class="op" id="1164263">)</span>&nbsp;<span class="op" id="1164265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164268">addr</span>&nbsp;<span class="op" id="1164273">:=</span>&nbsp;<span class="op" id="1164276">(</span><span class="op" id="1164277">*</span><span class="builtintype" id="1164278">int32</span><span class="op" id="1164283">)</span><span class="op" id="1164284">(</span><span class="ident" id="1164285">unsafe</span><span class="op" id="1164291">.</span><span class="ident" id="1164292">Pointer</span><span class="op" id="1164299">(</span><span class="ident" id="1164300">uaddr</span><span class="op" id="1164305">)</span><span class="op" id="1164306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164309">for</span>&nbsp;<span class="ident" id="1164313">i</span>&nbsp;<span class="op" id="1164315">:=</span>&nbsp;<span class="num" id="1164318">0</span><span class="op" id="1164319">;</span>&nbsp;<span class="ident" id="1164321">i</span>&nbsp;<span class="op" id="1164323">&lt;</span>&nbsp;<span class="ident" id="1164325">count</span><span class="op" id="1164330">;</span>&nbsp;<span class="ident" id="1164332">i</span><span class="op" id="1164333">++</span>&nbsp;<span class="op" id="1164336">{</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164340">for</span>&nbsp;<span class="op" id="1164344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164349">v</span>&nbsp;<span class="op" id="1164351">:=</span>&nbsp;<span class="ident" id="1164354">LoadInt32</span><span class="op" id="1164363">(</span><span class="ident" id="1164364">addr</span><span class="op" id="1164368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164373">if</span>&nbsp;<span class="ident" id="1164376">CompareAndSwapInt32</span><span class="op" id="1164395">(</span><span class="ident" id="1164396">addr</span><span class="op" id="1164400">,</span>&nbsp;<span class="ident" id="1164402">v</span><span class="op" id="1164403">,</span>&nbsp;<span class="ident" id="1164405">v</span><span class="op" id="1164406">+</span><span class="num" id="1164407">1</span><span class="op" id="1164408">)</span>&nbsp;<span class="op" id="1164410">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164416">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164425">}</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164432">}</span><br>
<span class="lineno"></span><span class="op" id="1164434">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1164437">func</span>&nbsp;<span class="ident" id="1164442">hammerCompareAndSwapUint32</span><span class="op" id="1164468">(</span><span class="ident" id="1164469">addr</span>&nbsp;<span class="op" id="1164474">*</span><span class="builtintype" id="1164475">uint32</span><span class="op" id="1164481">,</span>&nbsp;<span class="ident" id="1164483">count</span>&nbsp;<span class="builtintype" id="1164489">int</span><span class="op" id="1164492">)</span>&nbsp;<span class="op" id="1164494">{</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164497">for</span>&nbsp;<span class="ident" id="1164501">i</span>&nbsp;<span class="op" id="1164503">:=</span>&nbsp;<span class="num" id="1164506">0</span><span class="op" id="1164507">;</span>&nbsp;<span class="ident" id="1164509">i</span>&nbsp;<span class="op" id="1164511">&lt;</span>&nbsp;<span class="ident" id="1164513">count</span><span class="op" id="1164518">;</span>&nbsp;<span class="ident" id="1164520">i</span><span class="op" id="1164521">++</span>&nbsp;<span class="op" id="1164524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164528">for</span>&nbsp;<span class="op" id="1164532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164537">v</span>&nbsp;<span class="op" id="1164539">:=</span>&nbsp;<span class="ident" id="1164542">LoadUint32</span><span class="op" id="1164552">(</span><span class="ident" id="1164553">addr</span><span class="op" id="1164557">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164562">if</span>&nbsp;<span class="ident" id="1164565">CompareAndSwapUint32</span><span class="op" id="1164585">(</span><span class="ident" id="1164586">addr</span><span class="op" id="1164590">,</span>&nbsp;<span class="ident" id="1164592">v</span><span class="op" id="1164593">,</span>&nbsp;<span class="ident" id="1164595">v</span><span class="op" id="1164596">+</span><span class="num" id="1164597">1</span><span class="op" id="1164598">)</span>&nbsp;<span class="op" id="1164600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164606">break</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164619">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164622">}</span><br>
<span class="lineno"></span><span class="op" id="1164624">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">880</span><span class="keyword" id="1164627">func</span>&nbsp;<span class="ident" id="1164632">hammerCompareAndSwapUintptr32</span><span class="op" id="1164661">(</span><span class="ident" id="1164662">uaddr</span>&nbsp;<span class="op" id="1164668">*</span><span class="builtintype" id="1164669">uint32</span><span class="op" id="1164675">,</span>&nbsp;<span class="ident" id="1164677">count</span>&nbsp;<span class="builtintype" id="1164683">int</span><span class="op" id="1164686">)</span>&nbsp;<span class="op" id="1164688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1164691">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;32-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1164729">//&nbsp;not&nbsp;called&nbsp;on&nbsp;64-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164763">addr</span>&nbsp;<span class="op" id="1164768">:=</span>&nbsp;<span class="op" id="1164771">(</span><span class="op" id="1164772">*</span><span class="builtintype" id="1164773">uintptr</span><span class="op" id="1164780">)</span><span class="op" id="1164781">(</span><span class="ident" id="1164782">unsafe</span><span class="op" id="1164788">.</span><span class="ident" id="1164789">Pointer</span><span class="op" id="1164796">(</span><span class="ident" id="1164797">uaddr</span><span class="op" id="1164802">)</span><span class="op" id="1164803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164806">for</span>&nbsp;<span class="ident" id="1164810">i</span>&nbsp;<span class="op" id="1164812">:=</span>&nbsp;<span class="num" id="1164815">0</span><span class="op" id="1164816">;</span>&nbsp;<span class="ident" id="1164818">i</span>&nbsp;<span class="op" id="1164820">&lt;</span>&nbsp;<span class="ident" id="1164822">count</span><span class="op" id="1164827">;</span>&nbsp;<span class="ident" id="1164829">i</span><span class="op" id="1164830">++</span>&nbsp;<span class="op" id="1164833">{</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164837">for</span>&nbsp;<span class="op" id="1164841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1164846">v</span>&nbsp;<span class="op" id="1164848">:=</span>&nbsp;<span class="ident" id="1164851">LoadUintptr</span><span class="op" id="1164862">(</span><span class="ident" id="1164863">addr</span><span class="op" id="1164867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164872">if</span>&nbsp;<span class="ident" id="1164875">CompareAndSwapUintptr</span><span class="op" id="1164896">(</span><span class="ident" id="1164897">addr</span><span class="op" id="1164901">,</span>&nbsp;<span class="ident" id="1164903">v</span><span class="op" id="1164904">,</span>&nbsp;<span class="ident" id="1164906">v</span><span class="op" id="1164907">+</span><span class="num" id="1164908">1</span><span class="op" id="1164909">)</span>&nbsp;<span class="op" id="1164911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1164917">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164926">}</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164930">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1164933">}</span><br>
<span class="lineno"></span><span class="op" id="1164935">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1164938">func</span>&nbsp;<span class="ident" id="1164943">hammerCompareAndSwapPointer32</span><span class="op" id="1164972">(</span><span class="ident" id="1164973">uaddr</span>&nbsp;<span class="op" id="1164979">*</span><span class="builtintype" id="1164980">uint32</span><span class="op" id="1164986">,</span>&nbsp;<span class="ident" id="1164988">count</span>&nbsp;<span class="builtintype" id="1164994">int</span><span class="op" id="1164997">)</span>&nbsp;<span class="op" id="1164999">{</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1165002">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;32-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1165040">//&nbsp;not&nbsp;called&nbsp;on&nbsp;64-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165074">addr</span>&nbsp;<span class="op" id="1165079">:=</span>&nbsp;<span class="op" id="1165082">(</span><span class="op" id="1165083">*</span><span class="ident" id="1165084">unsafe</span><span class="op" id="1165090">.</span><span class="ident" id="1165091">Pointer</span><span class="op" id="1165098">)</span><span class="op" id="1165099">(</span><span class="ident" id="1165100">unsafe</span><span class="op" id="1165106">.</span><span class="ident" id="1165107">Pointer</span><span class="op" id="1165114">(</span><span class="ident" id="1165115">uaddr</span><span class="op" id="1165120">)</span><span class="op" id="1165121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165124">for</span>&nbsp;<span class="ident" id="1165128">i</span>&nbsp;<span class="op" id="1165130">:=</span>&nbsp;<span class="num" id="1165133">0</span><span class="op" id="1165134">;</span>&nbsp;<span class="ident" id="1165136">i</span>&nbsp;<span class="op" id="1165138">&lt;</span>&nbsp;<span class="ident" id="1165140">count</span><span class="op" id="1165145">;</span>&nbsp;<span class="ident" id="1165147">i</span><span class="op" id="1165148">++</span>&nbsp;<span class="op" id="1165151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165155">for</span>&nbsp;<span class="op" id="1165159">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165164">v</span>&nbsp;<span class="op" id="1165166">:=</span>&nbsp;<span class="ident" id="1165169">LoadPointer</span><span class="op" id="1165180">(</span><span class="ident" id="1165181">addr</span><span class="op" id="1165185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165190">if</span>&nbsp;<span class="ident" id="1165193">CompareAndSwapPointer</span><span class="op" id="1165214">(</span><span class="ident" id="1165215">addr</span><span class="op" id="1165219">,</span>&nbsp;<span class="ident" id="1165221">v</span><span class="op" id="1165222">,</span>&nbsp;<span class="ident" id="1165224">unsafe</span><span class="op" id="1165230">.</span><span class="ident" id="1165231">Pointer</span><span class="op" id="1165238">(</span><span class="builtintype" id="1165239">uintptr</span><span class="op" id="1165246">(</span><span class="ident" id="1165247">v</span><span class="op" id="1165248">)</span><span class="op" id="1165249">+</span><span class="num" id="1165250">1</span><span class="op" id="1165251">)</span><span class="op" id="1165252">)</span>&nbsp;<span class="op" id="1165254">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165260">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165269">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165273">}</span><br>
<span class="lineno">905</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165276">}</span><br>
<span class="lineno"></span><span class="op" id="1165278">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1165281">func</span>&nbsp;<span class="ident" id="1165286">TestHammer32</span><span class="op" id="1165298">(</span><span class="ident" id="1165299">t</span>&nbsp;<span class="op" id="1165301">*</span><span class="ident" id="1165302">testing</span><span class="op" id="1165309">.</span><span class="ident" id="1165310">T</span><span class="op" id="1165311">)</span>&nbsp;<span class="op" id="1165313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165316">const</span>&nbsp;<span class="ident" id="1165322">p</span>&nbsp;<span class="op" id="1165324">=</span>&nbsp;<span class="num" id="1165326">4</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165329">n</span>&nbsp;<span class="op" id="1165331">:=</span>&nbsp;<span class="num" id="1165334">100000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165342">if</span>&nbsp;<span class="ident" id="1165345">testing</span><span class="op" id="1165352">.</span><span class="ident" id="1165353">Short</span><span class="op" id="1165358">(</span><span class="op" id="1165359">)</span>&nbsp;<span class="op" id="1165361">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165365">n</span>&nbsp;<span class="op" id="1165367">=</span>&nbsp;<span class="num" id="1165369">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165375">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165378">defer</span>&nbsp;<span class="ident" id="1165384">runtime</span><span class="op" id="1165391">.</span><span class="ident" id="1165392">GOMAXPROCS</span><span class="op" id="1165402">(</span><span class="ident" id="1165403">runtime</span><span class="op" id="1165410">.</span><span class="ident" id="1165411">GOMAXPROCS</span><span class="op" id="1165421">(</span><span class="ident" id="1165422">p</span><span class="op" id="1165423">)</span><span class="op" id="1165424">)</span><br>
<span class="lineno">915</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165428">for</span>&nbsp;<span class="ident" id="1165432">name</span><span class="op" id="1165436">,</span>&nbsp;<span class="ident" id="1165438">testf</span>&nbsp;<span class="op" id="1165444">:=</span>&nbsp;<span class="keyword" id="1165447">range</span>&nbsp;<span class="ident" id="1165453">hammer32</span>&nbsp;<span class="op" id="1165462">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165466">c</span>&nbsp;<span class="op" id="1165468">:=</span>&nbsp;<span class="builtinfunc" id="1165471">make</span><span class="op" id="1165475">(</span><span class="keyword" id="1165476">chan</span>&nbsp;<span class="builtintype" id="1165481">int</span><span class="op" id="1165484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165488">var</span>&nbsp;<span class="ident" id="1165492">val</span>&nbsp;<span class="builtintype" id="1165496">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165505">for</span>&nbsp;<span class="ident" id="1165509">i</span>&nbsp;<span class="op" id="1165511">:=</span>&nbsp;<span class="num" id="1165514">0</span><span class="op" id="1165515">;</span>&nbsp;<span class="ident" id="1165517">i</span>&nbsp;<span class="op" id="1165519">&lt;</span>&nbsp;<span class="ident" id="1165521">p</span><span class="op" id="1165522">;</span>&nbsp;<span class="ident" id="1165524">i</span><span class="op" id="1165525">++</span>&nbsp;<span class="op" id="1165528">{</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165533">go</span>&nbsp;<span class="keyword" id="1165536">func</span><span class="op" id="1165540">(</span><span class="op" id="1165541">)</span>&nbsp;<span class="op" id="1165543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165549">defer</span>&nbsp;<span class="keyword" id="1165555">func</span><span class="op" id="1165559">(</span><span class="op" id="1165560">)</span>&nbsp;<span class="op" id="1165562">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165569">if</span>&nbsp;<span class="ident" id="1165572">err</span>&nbsp;<span class="op" id="1165576">:=</span>&nbsp;<span class="builtinfunc" id="1165579">recover</span><span class="op" id="1165586">(</span><span class="op" id="1165587">)</span><span class="op" id="1165588">;</span>&nbsp;<span class="ident" id="1165590">err</span>&nbsp;<span class="op" id="1165594">!=</span>&nbsp;<span class="ident" id="1165597">nil</span>&nbsp;<span class="op" id="1165601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165609">t</span><span class="op" id="1165610">.</span><span class="ident" id="1165611">Error</span><span class="op" id="1165616">(</span><span class="ident" id="1165617">err</span><span class="op" id="1165620">.</span><span class="op" id="1165621">(</span><span class="builtintype" id="1165622">string</span><span class="op" id="1165628">)</span><span class="op" id="1165629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165636">}</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165643">c</span>&nbsp;<span class="op" id="1165645">&lt;-</span>&nbsp;<span class="num" id="1165648">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165654">}</span><span class="op" id="1165655">(</span><span class="op" id="1165656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165662">testf</span><span class="op" id="1165667">(</span><span class="op" id="1165668">&amp;</span><span class="ident" id="1165669">val</span><span class="op" id="1165672">,</span>&nbsp;<span class="ident" id="1165674">n</span><span class="op" id="1165675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165680">}</span><span class="op" id="1165681">(</span><span class="op" id="1165682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165686">}</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165690">for</span>&nbsp;<span class="ident" id="1165694">i</span>&nbsp;<span class="op" id="1165696">:=</span>&nbsp;<span class="num" id="1165699">0</span><span class="op" id="1165700">;</span>&nbsp;<span class="ident" id="1165702">i</span>&nbsp;<span class="op" id="1165704">&lt;</span>&nbsp;<span class="ident" id="1165706">p</span><span class="op" id="1165707">;</span>&nbsp;<span class="ident" id="1165709">i</span><span class="op" id="1165710">++</span>&nbsp;<span class="op" id="1165713">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165718">&lt;-</span><span class="ident" id="1165720">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165724">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1165728">if</span>&nbsp;<span class="op" id="1165731">!</span><span class="ident" id="1165732">strings</span><span class="op" id="1165739">.</span><span class="ident" id="1165740">HasPrefix</span><span class="op" id="1165749">(</span><span class="ident" id="1165750">name</span><span class="op" id="1165754">,</span>&nbsp;<span class="string" id="1165756">&#34;Swap&#34;</span><span class="op" id="1165762">)</span>&nbsp;<span class="op" id="1165764">&amp;&amp;</span>&nbsp;<span class="ident" id="1165767">val</span>&nbsp;<span class="op" id="1165771">!=</span>&nbsp;<span class="builtintype" id="1165774">uint32</span><span class="op" id="1165780">(</span><span class="ident" id="1165781">n</span><span class="op" id="1165782">)</span><span class="op" id="1165783">*</span><span class="ident" id="1165784">p</span>&nbsp;<span class="op" id="1165786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1165791">t</span><span class="op" id="1165792">.</span><span class="ident" id="1165793">Fatalf</span><span class="op" id="1165799">(</span><span class="string" id="1165800">&#34;%s:&nbsp;val=%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1165820">,</span>&nbsp;<span class="ident" id="1165822">name</span><span class="op" id="1165826">,</span>&nbsp;<span class="ident" id="1165828">val</span><span class="op" id="1165831">,</span>&nbsp;<span class="ident" id="1165833">n</span><span class="op" id="1165834">*</span><span class="ident" id="1165835">p</span><span class="op" id="1165836">)</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165840">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1165843">}</span><br>
<span class="lineno"></span><span class="op" id="1165845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1165848">var</span>&nbsp;<span class="ident" id="1165852">hammer64</span>&nbsp;<span class="op" id="1165861">=</span>&nbsp;<span class="keyword" id="1165863">map</span><span class="op" id="1165866">[</span><span class="builtintype" id="1165867">string</span><span class="op" id="1165873">]</span><span class="keyword" id="1165874">func</span><span class="op" id="1165878">(</span><span class="op" id="1165879">*</span><span class="ident" id="1165880">uint64</span><span class="op" id="1165886">,</span>&nbsp;<span class="builtintype" id="1165888">int</span><span class="op" id="1165891">)</span><span class="op" id="1165892">{</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1165895">&#34;SwapInt64&#34;</span><span class="op" id="1165906">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1165920">hammerSwapInt64</span><span class="op" id="1165935">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1165938">&#34;SwapUint64&#34;</span><span class="op" id="1165950">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1165963">hammerSwapUint64</span><span class="op" id="1165979">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1165982">&#34;SwapUintptr&#34;</span><span class="op" id="1165995">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1166007">hammerSwapUintptr64</span><span class="op" id="1166026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166029">&#34;SwapPointer&#34;</span><span class="op" id="1166042">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1166054">hammerSwapPointer64</span><span class="op" id="1166073">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166076">&#34;AddInt64&#34;</span><span class="op" id="1166086">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1166101">hammerAddInt64</span><span class="op" id="1166115">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166118">&#34;AddUint64&#34;</span><span class="op" id="1166129">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1166143">hammerAddUint64</span><span class="op" id="1166158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166161">&#34;AddUintptr&#34;</span><span class="op" id="1166173">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1166186">hammerAddUintptr64</span><span class="op" id="1166204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166207">&#34;CompareAndSwapInt64&#34;</span><span class="op" id="1166228">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="1166232">hammerCompareAndSwapInt64</span><span class="op" id="1166257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166260">&#34;CompareAndSwapUint64&#34;</span><span class="op" id="1166282">:</span>&nbsp;&nbsp;<span class="ident" id="1166285">hammerCompareAndSwapUint64</span><span class="op" id="1166311">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166314">&#34;CompareAndSwapUintptr&#34;</span><span class="op" id="1166337">:</span>&nbsp;<span class="ident" id="1166339">hammerCompareAndSwapUintptr64</span><span class="op" id="1166368">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1166371">&#34;CompareAndSwapPointer&#34;</span><span class="op" id="1166394">:</span>&nbsp;<span class="ident" id="1166396">hammerCompareAndSwapPointer64</span><span class="op" id="1166425">,</span><br>
<span class="lineno"></span><span class="op" id="1166427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1166430">func</span>&nbsp;<span class="ident" id="1166435">init</span><span class="op" id="1166439">(</span><span class="op" id="1166440">)</span>&nbsp;<span class="op" id="1166442">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1166445">var</span>&nbsp;<span class="ident" id="1166449">v</span>&nbsp;<span class="ident" id="1166451">uint64</span>&nbsp;<span class="op" id="1166458">=</span>&nbsp;<span class="num" id="1166460">1</span>&nbsp;<span class="op" id="1166462">&lt;&lt;</span>&nbsp;<span class="num" id="1166465">50</span><br>
<span class="lineno">955</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1166469">if</span>&nbsp;<span class="builtintype" id="1166472">uintptr</span><span class="op" id="1166479">(</span><span class="ident" id="1166480">v</span><span class="op" id="1166481">)</span>&nbsp;<span class="op" id="1166483">==</span>&nbsp;<span class="num" id="1166486">0</span>&nbsp;<span class="op" id="1166488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1166492">//&nbsp;32-bit&nbsp;system;&nbsp;clear&nbsp;uintptr&nbsp;tests</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166532">delete</span><span class="op" id="1166538">(</span><span class="ident" id="1166539">hammer64</span><span class="op" id="1166547">,</span>&nbsp;<span class="string" id="1166549">&#34;SwapUintptr&#34;</span><span class="op" id="1166562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166566">delete</span><span class="op" id="1166572">(</span><span class="ident" id="1166573">hammer64</span><span class="op" id="1166581">,</span>&nbsp;<span class="string" id="1166583">&#34;SwapPointer&#34;</span><span class="op" id="1166596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166600">delete</span><span class="op" id="1166606">(</span><span class="ident" id="1166607">hammer64</span><span class="op" id="1166615">,</span>&nbsp;<span class="string" id="1166617">&#34;AddUintptr&#34;</span><span class="op" id="1166629">)</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166633">delete</span><span class="op" id="1166639">(</span><span class="ident" id="1166640">hammer64</span><span class="op" id="1166648">,</span>&nbsp;<span class="string" id="1166650">&#34;CompareAndSwapUintptr&#34;</span><span class="op" id="1166673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166677">delete</span><span class="op" id="1166683">(</span><span class="ident" id="1166684">hammer64</span><span class="op" id="1166692">,</span>&nbsp;<span class="string" id="1166694">&#34;CompareAndSwapPointer&#34;</span><span class="op" id="1166717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1166720">}</span><br>
<span class="lineno"></span><span class="op" id="1166722">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">965</span><span class="keyword" id="1166725">func</span>&nbsp;<span class="ident" id="1166730">hammerSwapInt64</span><span class="op" id="1166745">(</span><span class="ident" id="1166746">uaddr</span>&nbsp;<span class="op" id="1166752">*</span><span class="ident" id="1166753">uint64</span><span class="op" id="1166759">,</span>&nbsp;<span class="ident" id="1166761">count</span>&nbsp;<span class="builtintype" id="1166767">int</span><span class="op" id="1166770">)</span>&nbsp;<span class="op" id="1166772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1166775">addr</span>&nbsp;<span class="op" id="1166780">:=</span>&nbsp;<span class="op" id="1166783">(</span><span class="op" id="1166784">*</span><span class="ident" id="1166785">int64</span><span class="op" id="1166790">)</span><span class="op" id="1166791">(</span><span class="ident" id="1166792">unsafe</span><span class="op" id="1166798">.</span><span class="ident" id="1166799">Pointer</span><span class="op" id="1166806">(</span><span class="ident" id="1166807">uaddr</span><span class="op" id="1166812">)</span><span class="op" id="1166813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1166816">seed</span>&nbsp;<span class="op" id="1166821">:=</span>&nbsp;<span class="builtintype" id="1166824">int</span><span class="op" id="1166827">(</span><span class="builtintype" id="1166828">uintptr</span><span class="op" id="1166835">(</span><span class="ident" id="1166836">unsafe</span><span class="op" id="1166842">.</span><span class="ident" id="1166843">Pointer</span><span class="op" id="1166850">(</span><span class="op" id="1166851">&amp;</span><span class="ident" id="1166852">count</span><span class="op" id="1166857">)</span><span class="op" id="1166858">)</span><span class="op" id="1166859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1166862">for</span>&nbsp;<span class="ident" id="1166866">i</span>&nbsp;<span class="op" id="1166868">:=</span>&nbsp;<span class="num" id="1166871">0</span><span class="op" id="1166872">;</span>&nbsp;<span class="ident" id="1166874">i</span>&nbsp;<span class="op" id="1166876">&lt;</span>&nbsp;<span class="ident" id="1166878">count</span><span class="op" id="1166883">;</span>&nbsp;<span class="ident" id="1166885">i</span><span class="op" id="1166886">++</span>&nbsp;<span class="op" id="1166889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1166893">new</span>&nbsp;<span class="op" id="1166897">:=</span>&nbsp;<span class="ident" id="1166900">uint64</span><span class="op" id="1166906">(</span><span class="ident" id="1166907">seed</span><span class="op" id="1166911">+</span><span class="ident" id="1166912">i</span><span class="op" id="1166913">)</span><span class="op" id="1166914">&lt;&lt;</span><span class="num" id="1166916">32</span>&nbsp;<span class="op" id="1166919">|</span>&nbsp;<span class="ident" id="1166921">uint64</span><span class="op" id="1166927">(</span><span class="ident" id="1166928">seed</span><span class="op" id="1166932">+</span><span class="ident" id="1166933">i</span><span class="op" id="1166934">)</span><span class="op" id="1166935">&lt;&lt;</span><span class="num" id="1166937">32</span><span class="op" id="1166939">&gt;&gt;</span><span class="num" id="1166941">32</span><br>
<span class="lineno">970</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1166946">old</span>&nbsp;<span class="op" id="1166950">:=</span>&nbsp;<span class="ident" id="1166953">uint64</span><span class="op" id="1166959">(</span><span class="ident" id="1166960">SwapInt64</span><span class="op" id="1166969">(</span><span class="ident" id="1166970">addr</span><span class="op" id="1166974">,</span>&nbsp;<span class="ident" id="1166976">int64</span><span class="op" id="1166981">(</span><span class="builtinfunc" id="1166982">new</span><span class="op" id="1166985">)</span><span class="op" id="1166986">)</span><span class="op" id="1166987">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1166991">if</span>&nbsp;<span class="ident" id="1166994">old</span><span class="op" id="1166997">&gt;&gt;</span><span class="num" id="1166999">32</span>&nbsp;<span class="op" id="1167002">!=</span>&nbsp;<span class="ident" id="1167005">old</span><span class="op" id="1167008">&lt;&lt;</span><span class="num" id="1167010">32</span><span class="op" id="1167012">&gt;&gt;</span><span class="num" id="1167014">32</span>&nbsp;<span class="op" id="1167017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1167022">panic</span><span class="op" id="1167027">(</span><span class="ident" id="1167028">fmt</span><span class="op" id="1167031">.</span><span class="ident" id="1167032">Sprintf</span><span class="op" id="1167039">(</span><span class="string" id="1167040">&#34;SwapInt64&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1167069">,</span>&nbsp;<span class="ident" id="1167071">old</span><span class="op" id="1167074">)</span><span class="op" id="1167075">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167082">}</span><br>
<span class="lineno">975</span><span class="op" id="1167084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1167087">func</span>&nbsp;<span class="ident" id="1167092">hammerSwapUint64</span><span class="op" id="1167108">(</span><span class="ident" id="1167109">addr</span>&nbsp;<span class="op" id="1167114">*</span><span class="ident" id="1167115">uint64</span><span class="op" id="1167121">,</span>&nbsp;<span class="ident" id="1167123">count</span>&nbsp;<span class="builtintype" id="1167129">int</span><span class="op" id="1167132">)</span>&nbsp;<span class="op" id="1167134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167137">seed</span>&nbsp;<span class="op" id="1167142">:=</span>&nbsp;<span class="builtintype" id="1167145">int</span><span class="op" id="1167148">(</span><span class="builtintype" id="1167149">uintptr</span><span class="op" id="1167156">(</span><span class="ident" id="1167157">unsafe</span><span class="op" id="1167163">.</span><span class="ident" id="1167164">Pointer</span><span class="op" id="1167171">(</span><span class="op" id="1167172">&amp;</span><span class="ident" id="1167173">count</span><span class="op" id="1167178">)</span><span class="op" id="1167179">)</span><span class="op" id="1167180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1167183">for</span>&nbsp;<span class="ident" id="1167187">i</span>&nbsp;<span class="op" id="1167189">:=</span>&nbsp;<span class="num" id="1167192">0</span><span class="op" id="1167193">;</span>&nbsp;<span class="ident" id="1167195">i</span>&nbsp;<span class="op" id="1167197">&lt;</span>&nbsp;<span class="ident" id="1167199">count</span><span class="op" id="1167204">;</span>&nbsp;<span class="ident" id="1167206">i</span><span class="op" id="1167207">++</span>&nbsp;<span class="op" id="1167210">{</span><br>
<span class="lineno">980</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1167214">new</span>&nbsp;<span class="op" id="1167218">:=</span>&nbsp;<span class="ident" id="1167221">uint64</span><span class="op" id="1167227">(</span><span class="ident" id="1167228">seed</span><span class="op" id="1167232">+</span><span class="ident" id="1167233">i</span><span class="op" id="1167234">)</span><span class="op" id="1167235">&lt;&lt;</span><span class="num" id="1167237">32</span>&nbsp;<span class="op" id="1167240">|</span>&nbsp;<span class="ident" id="1167242">uint64</span><span class="op" id="1167248">(</span><span class="ident" id="1167249">seed</span><span class="op" id="1167253">+</span><span class="ident" id="1167254">i</span><span class="op" id="1167255">)</span><span class="op" id="1167256">&lt;&lt;</span><span class="num" id="1167258">32</span><span class="op" id="1167260">&gt;&gt;</span><span class="num" id="1167262">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167267">old</span>&nbsp;<span class="op" id="1167271">:=</span>&nbsp;<span class="ident" id="1167274">SwapUint64</span><span class="op" id="1167284">(</span><span class="ident" id="1167285">addr</span><span class="op" id="1167289">,</span>&nbsp;<span class="builtinfunc" id="1167291">new</span><span class="op" id="1167294">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1167298">if</span>&nbsp;<span class="ident" id="1167301">old</span><span class="op" id="1167304">&gt;&gt;</span><span class="num" id="1167306">32</span>&nbsp;<span class="op" id="1167309">!=</span>&nbsp;<span class="ident" id="1167312">old</span><span class="op" id="1167315">&lt;&lt;</span><span class="num" id="1167317">32</span><span class="op" id="1167319">&gt;&gt;</span><span class="num" id="1167321">32</span>&nbsp;<span class="op" id="1167324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1167329">panic</span><span class="op" id="1167334">(</span><span class="ident" id="1167335">fmt</span><span class="op" id="1167338">.</span><span class="ident" id="1167339">Sprintf</span><span class="op" id="1167346">(</span><span class="string" id="1167347">&#34;SwapUint64&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1167377">,</span>&nbsp;<span class="ident" id="1167379">old</span><span class="op" id="1167382">)</span><span class="op" id="1167383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167387">}</span><br>
<span class="lineno">985</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167390">}</span><br>
<span class="lineno"></span><span class="op" id="1167392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1167395">func</span>&nbsp;<span class="ident" id="1167400">hammerSwapUintptr64</span><span class="op" id="1167419">(</span><span class="ident" id="1167420">uaddr</span>&nbsp;<span class="op" id="1167426">*</span><span class="ident" id="1167427">uint64</span><span class="op" id="1167433">,</span>&nbsp;<span class="ident" id="1167435">count</span>&nbsp;<span class="builtintype" id="1167441">int</span><span class="op" id="1167444">)</span>&nbsp;<span class="op" id="1167446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1167449">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;64-bit.</span><br>
<span class="lineno">990</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1167487">//&nbsp;not&nbsp;called&nbsp;on&nbsp;32-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167521">addr</span>&nbsp;<span class="op" id="1167526">:=</span>&nbsp;<span class="op" id="1167529">(</span><span class="op" id="1167530">*</span><span class="builtintype" id="1167531">uintptr</span><span class="op" id="1167538">)</span><span class="op" id="1167539">(</span><span class="ident" id="1167540">unsafe</span><span class="op" id="1167546">.</span><span class="ident" id="1167547">Pointer</span><span class="op" id="1167554">(</span><span class="ident" id="1167555">uaddr</span><span class="op" id="1167560">)</span><span class="op" id="1167561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167564">seed</span>&nbsp;<span class="op" id="1167569">:=</span>&nbsp;<span class="builtintype" id="1167572">int</span><span class="op" id="1167575">(</span><span class="builtintype" id="1167576">uintptr</span><span class="op" id="1167583">(</span><span class="ident" id="1167584">unsafe</span><span class="op" id="1167590">.</span><span class="ident" id="1167591">Pointer</span><span class="op" id="1167598">(</span><span class="op" id="1167599">&amp;</span><span class="ident" id="1167600">count</span><span class="op" id="1167605">)</span><span class="op" id="1167606">)</span><span class="op" id="1167607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1167610">for</span>&nbsp;<span class="ident" id="1167614">i</span>&nbsp;<span class="op" id="1167616">:=</span>&nbsp;<span class="num" id="1167619">0</span><span class="op" id="1167620">;</span>&nbsp;<span class="ident" id="1167622">i</span>&nbsp;<span class="op" id="1167624">&lt;</span>&nbsp;<span class="ident" id="1167626">count</span><span class="op" id="1167631">;</span>&nbsp;<span class="ident" id="1167633">i</span><span class="op" id="1167634">++</span>&nbsp;<span class="op" id="1167637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1167641">new</span>&nbsp;<span class="op" id="1167645">:=</span>&nbsp;<span class="builtintype" id="1167648">uintptr</span><span class="op" id="1167655">(</span><span class="ident" id="1167656">seed</span><span class="op" id="1167660">+</span><span class="ident" id="1167661">i</span><span class="op" id="1167662">)</span><span class="op" id="1167663">&lt;&lt;</span><span class="num" id="1167665">32</span>&nbsp;<span class="op" id="1167668">|</span>&nbsp;<span class="builtintype" id="1167670">uintptr</span><span class="op" id="1167677">(</span><span class="ident" id="1167678">seed</span><span class="op" id="1167682">+</span><span class="ident" id="1167683">i</span><span class="op" id="1167684">)</span><span class="op" id="1167685">&lt;&lt;</span><span class="num" id="1167687">32</span><span class="op" id="1167689">&gt;&gt;</span><span class="num" id="1167691">32</span><br>
<span class="lineno">995</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167696">old</span>&nbsp;<span class="op" id="1167700">:=</span>&nbsp;<span class="ident" id="1167703">SwapUintptr</span><span class="op" id="1167714">(</span><span class="ident" id="1167715">addr</span><span class="op" id="1167719">,</span>&nbsp;<span class="builtinfunc" id="1167721">new</span><span class="op" id="1167724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1167728">if</span>&nbsp;<span class="ident" id="1167731">old</span><span class="op" id="1167734">&gt;&gt;</span><span class="num" id="1167736">32</span>&nbsp;<span class="op" id="1167739">!=</span>&nbsp;<span class="ident" id="1167742">old</span><span class="op" id="1167745">&lt;&lt;</span><span class="num" id="1167747">32</span><span class="op" id="1167749">&gt;&gt;</span><span class="num" id="1167751">32</span>&nbsp;<span class="op" id="1167754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1167759">panic</span><span class="op" id="1167764">(</span><span class="ident" id="1167765">fmt</span><span class="op" id="1167768">.</span><span class="ident" id="1167769">Sprintf</span><span class="op" id="1167776">(</span><span class="string" id="1167777">&#34;SwapUintptr&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1167808">,</span>&nbsp;<span class="ident" id="1167810">old</span><span class="op" id="1167813">)</span><span class="op" id="1167814">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167818">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1167821">}</span><br>
<span class="lineno">1000</span><span class="op" id="1167823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1167826">func</span>&nbsp;<span class="ident" id="1167831">hammerSwapPointer64</span><span class="op" id="1167850">(</span><span class="ident" id="1167851">uaddr</span>&nbsp;<span class="op" id="1167857">*</span><span class="ident" id="1167858">uint64</span><span class="op" id="1167864">,</span>&nbsp;<span class="ident" id="1167866">count</span>&nbsp;<span class="builtintype" id="1167872">int</span><span class="op" id="1167875">)</span>&nbsp;<span class="op" id="1167877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1167880">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;64-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1167918">//&nbsp;not&nbsp;called&nbsp;on&nbsp;32-bit&nbsp;systems.</span><br>
<span class="lineno">1005</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1167952">addr</span>&nbsp;<span class="op" id="1167957">:=</span>&nbsp;<span class="op" id="1167960">(</span><span class="op" id="1167961">*</span><span class="ident" id="1167962">unsafe</span><span class="op" id="1167968">.</span><span class="ident" id="1167969">Pointer</span><span class="op" id="1167976">)</span><span class="op" id="1167977">(</span><span class="ident" id="1167978">unsafe</span><span class="op" id="1167984">.</span><span class="ident" id="1167985">Pointer</span><span class="op" id="1167992">(</span><span class="ident" id="1167993">uaddr</span><span class="op" id="1167998">)</span><span class="op" id="1167999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168002">seed</span>&nbsp;<span class="op" id="1168007">:=</span>&nbsp;<span class="builtintype" id="1168010">int</span><span class="op" id="1168013">(</span><span class="builtintype" id="1168014">uintptr</span><span class="op" id="1168021">(</span><span class="ident" id="1168022">unsafe</span><span class="op" id="1168028">.</span><span class="ident" id="1168029">Pointer</span><span class="op" id="1168036">(</span><span class="op" id="1168037">&amp;</span><span class="ident" id="1168038">count</span><span class="op" id="1168043">)</span><span class="op" id="1168044">)</span><span class="op" id="1168045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168048">for</span>&nbsp;<span class="ident" id="1168052">i</span>&nbsp;<span class="op" id="1168054">:=</span>&nbsp;<span class="num" id="1168057">0</span><span class="op" id="1168058">;</span>&nbsp;<span class="ident" id="1168060">i</span>&nbsp;<span class="op" id="1168062">&lt;</span>&nbsp;<span class="ident" id="1168064">count</span><span class="op" id="1168069">;</span>&nbsp;<span class="ident" id="1168071">i</span><span class="op" id="1168072">++</span>&nbsp;<span class="op" id="1168075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1168079">new</span>&nbsp;<span class="op" id="1168083">:=</span>&nbsp;<span class="builtintype" id="1168086">uintptr</span><span class="op" id="1168093">(</span><span class="ident" id="1168094">seed</span><span class="op" id="1168098">+</span><span class="ident" id="1168099">i</span><span class="op" id="1168100">)</span><span class="op" id="1168101">&lt;&lt;</span><span class="num" id="1168103">32</span>&nbsp;<span class="op" id="1168106">|</span>&nbsp;<span class="builtintype" id="1168108">uintptr</span><span class="op" id="1168115">(</span><span class="ident" id="1168116">seed</span><span class="op" id="1168120">+</span><span class="ident" id="1168121">i</span><span class="op" id="1168122">)</span><span class="op" id="1168123">&lt;&lt;</span><span class="num" id="1168125">32</span><span class="op" id="1168127">&gt;&gt;</span><span class="num" id="1168129">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168134">old</span>&nbsp;<span class="op" id="1168138">:=</span>&nbsp;<span class="builtintype" id="1168141">uintptr</span><span class="op" id="1168148">(</span><span class="ident" id="1168149">SwapPointer</span><span class="op" id="1168160">(</span><span class="ident" id="1168161">addr</span><span class="op" id="1168165">,</span>&nbsp;<span class="ident" id="1168167">unsafe</span><span class="op" id="1168173">.</span><span class="ident" id="1168174">Pointer</span><span class="op" id="1168181">(</span><span class="builtinfunc" id="1168182">new</span><span class="op" id="1168185">)</span><span class="op" id="1168186">)</span><span class="op" id="1168187">)</span><br>
<span class="lineno">1010</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168191">if</span>&nbsp;<span class="ident" id="1168194">old</span><span class="op" id="1168197">&gt;&gt;</span><span class="num" id="1168199">32</span>&nbsp;<span class="op" id="1168202">!=</span>&nbsp;<span class="ident" id="1168205">old</span><span class="op" id="1168208">&lt;&lt;</span><span class="num" id="1168210">32</span><span class="op" id="1168212">&gt;&gt;</span><span class="num" id="1168214">32</span>&nbsp;<span class="op" id="1168217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1168222">panic</span><span class="op" id="1168227">(</span><span class="ident" id="1168228">fmt</span><span class="op" id="1168231">.</span><span class="ident" id="1168232">Sprintf</span><span class="op" id="1168239">(</span><span class="string" id="1168240">&#34;SwapPointer&nbsp;is&nbsp;not&nbsp;atomic:&nbsp;%v&#34;</span><span class="op" id="1168271">,</span>&nbsp;<span class="ident" id="1168273">old</span><span class="op" id="1168276">)</span><span class="op" id="1168277">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168281">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168284">}</span><br>
<span class="lineno"></span><span class="op" id="1168286">}</span><br>
<span class="lineno">1015</span><br>
<span class="lineno"></span><span class="keyword" id="1168289">func</span>&nbsp;<span class="ident" id="1168294">hammerAddInt64</span><span class="op" id="1168308">(</span><span class="ident" id="1168309">uaddr</span>&nbsp;<span class="op" id="1168315">*</span><span class="ident" id="1168316">uint64</span><span class="op" id="1168322">,</span>&nbsp;<span class="ident" id="1168324">count</span>&nbsp;<span class="builtintype" id="1168330">int</span><span class="op" id="1168333">)</span>&nbsp;<span class="op" id="1168335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168338">addr</span>&nbsp;<span class="op" id="1168343">:=</span>&nbsp;<span class="op" id="1168346">(</span><span class="op" id="1168347">*</span><span class="ident" id="1168348">int64</span><span class="op" id="1168353">)</span><span class="op" id="1168354">(</span><span class="ident" id="1168355">unsafe</span><span class="op" id="1168361">.</span><span class="ident" id="1168362">Pointer</span><span class="op" id="1168369">(</span><span class="ident" id="1168370">uaddr</span><span class="op" id="1168375">)</span><span class="op" id="1168376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168379">for</span>&nbsp;<span class="ident" id="1168383">i</span>&nbsp;<span class="op" id="1168385">:=</span>&nbsp;<span class="num" id="1168388">0</span><span class="op" id="1168389">;</span>&nbsp;<span class="ident" id="1168391">i</span>&nbsp;<span class="op" id="1168393">&lt;</span>&nbsp;<span class="ident" id="1168395">count</span><span class="op" id="1168400">;</span>&nbsp;<span class="ident" id="1168402">i</span><span class="op" id="1168403">++</span>&nbsp;<span class="op" id="1168406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168410">AddInt64</span><span class="op" id="1168418">(</span><span class="ident" id="1168419">addr</span><span class="op" id="1168423">,</span>&nbsp;<span class="num" id="1168425">1</span><span class="op" id="1168426">)</span><br>
<span class="lineno">1020</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168429">}</span><br>
<span class="lineno"></span><span class="op" id="1168431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1168434">func</span>&nbsp;<span class="ident" id="1168439">hammerAddUint64</span><span class="op" id="1168454">(</span><span class="ident" id="1168455">addr</span>&nbsp;<span class="op" id="1168460">*</span><span class="ident" id="1168461">uint64</span><span class="op" id="1168467">,</span>&nbsp;<span class="ident" id="1168469">count</span>&nbsp;<span class="builtintype" id="1168475">int</span><span class="op" id="1168478">)</span>&nbsp;<span class="op" id="1168480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168483">for</span>&nbsp;<span class="ident" id="1168487">i</span>&nbsp;<span class="op" id="1168489">:=</span>&nbsp;<span class="num" id="1168492">0</span><span class="op" id="1168493">;</span>&nbsp;<span class="ident" id="1168495">i</span>&nbsp;<span class="op" id="1168497">&lt;</span>&nbsp;<span class="ident" id="1168499">count</span><span class="op" id="1168504">;</span>&nbsp;<span class="ident" id="1168506">i</span><span class="op" id="1168507">++</span>&nbsp;<span class="op" id="1168510">{</span><br>
<span class="lineno">1025</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168514">AddUint64</span><span class="op" id="1168523">(</span><span class="ident" id="1168524">addr</span><span class="op" id="1168528">,</span>&nbsp;<span class="num" id="1168530">1</span><span class="op" id="1168531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168534">}</span><br>
<span class="lineno"></span><span class="op" id="1168536">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1168539">func</span>&nbsp;<span class="ident" id="1168544">hammerAddUintptr64</span><span class="op" id="1168562">(</span><span class="ident" id="1168563">uaddr</span>&nbsp;<span class="op" id="1168569">*</span><span class="ident" id="1168570">uint64</span><span class="op" id="1168576">,</span>&nbsp;<span class="ident" id="1168578">count</span>&nbsp;<span class="builtintype" id="1168584">int</span><span class="op" id="1168587">)</span>&nbsp;<span class="op" id="1168589">{</span><br>
<span class="lineno">1030</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1168592">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;64-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1168630">//&nbsp;not&nbsp;called&nbsp;on&nbsp;32-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168664">addr</span>&nbsp;<span class="op" id="1168669">:=</span>&nbsp;<span class="op" id="1168672">(</span><span class="op" id="1168673">*</span><span class="builtintype" id="1168674">uintptr</span><span class="op" id="1168681">)</span><span class="op" id="1168682">(</span><span class="ident" id="1168683">unsafe</span><span class="op" id="1168689">.</span><span class="ident" id="1168690">Pointer</span><span class="op" id="1168697">(</span><span class="ident" id="1168698">uaddr</span><span class="op" id="1168703">)</span><span class="op" id="1168704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168707">for</span>&nbsp;<span class="ident" id="1168711">i</span>&nbsp;<span class="op" id="1168713">:=</span>&nbsp;<span class="num" id="1168716">0</span><span class="op" id="1168717">;</span>&nbsp;<span class="ident" id="1168719">i</span>&nbsp;<span class="op" id="1168721">&lt;</span>&nbsp;<span class="ident" id="1168723">count</span><span class="op" id="1168728">;</span>&nbsp;<span class="ident" id="1168730">i</span><span class="op" id="1168731">++</span>&nbsp;<span class="op" id="1168734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168738">AddUintptr</span><span class="op" id="1168748">(</span><span class="ident" id="1168749">addr</span><span class="op" id="1168753">,</span>&nbsp;<span class="num" id="1168755">1</span><span class="op" id="1168756">)</span><br>
<span class="lineno">1035</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168759">}</span><br>
<span class="lineno"></span><span class="op" id="1168761">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1168764">func</span>&nbsp;<span class="ident" id="1168769">hammerCompareAndSwapInt64</span><span class="op" id="1168794">(</span><span class="ident" id="1168795">uaddr</span>&nbsp;<span class="op" id="1168801">*</span><span class="ident" id="1168802">uint64</span><span class="op" id="1168808">,</span>&nbsp;<span class="ident" id="1168810">count</span>&nbsp;<span class="builtintype" id="1168816">int</span><span class="op" id="1168819">)</span>&nbsp;<span class="op" id="1168821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168824">addr</span>&nbsp;<span class="op" id="1168829">:=</span>&nbsp;<span class="op" id="1168832">(</span><span class="op" id="1168833">*</span><span class="ident" id="1168834">int64</span><span class="op" id="1168839">)</span><span class="op" id="1168840">(</span><span class="ident" id="1168841">unsafe</span><span class="op" id="1168847">.</span><span class="ident" id="1168848">Pointer</span><span class="op" id="1168855">(</span><span class="ident" id="1168856">uaddr</span><span class="op" id="1168861">)</span><span class="op" id="1168862">)</span><br>
<span class="lineno">1040</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168865">for</span>&nbsp;<span class="ident" id="1168869">i</span>&nbsp;<span class="op" id="1168871">:=</span>&nbsp;<span class="num" id="1168874">0</span><span class="op" id="1168875">;</span>&nbsp;<span class="ident" id="1168877">i</span>&nbsp;<span class="op" id="1168879">&lt;</span>&nbsp;<span class="ident" id="1168881">count</span><span class="op" id="1168886">;</span>&nbsp;<span class="ident" id="1168888">i</span><span class="op" id="1168889">++</span>&nbsp;<span class="op" id="1168892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168896">for</span>&nbsp;<span class="op" id="1168900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1168905">v</span>&nbsp;<span class="op" id="1168907">:=</span>&nbsp;<span class="ident" id="1168910">LoadInt64</span><span class="op" id="1168919">(</span><span class="ident" id="1168920">addr</span><span class="op" id="1168924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168929">if</span>&nbsp;<span class="ident" id="1168932">CompareAndSwapInt64</span><span class="op" id="1168951">(</span><span class="ident" id="1168952">addr</span><span class="op" id="1168956">,</span>&nbsp;<span class="ident" id="1168958">v</span><span class="op" id="1168959">,</span>&nbsp;<span class="ident" id="1168961">v</span><span class="op" id="1168962">+</span><span class="num" id="1168963">1</span><span class="op" id="1168964">)</span>&nbsp;<span class="op" id="1168966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1168972">break</span><br>
<span class="lineno">1045</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168981">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1168988">}</span><br>
<span class="lineno"></span><span class="op" id="1168990">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1050</span><span class="keyword" id="1168993">func</span>&nbsp;<span class="ident" id="1168998">hammerCompareAndSwapUint64</span><span class="op" id="1169024">(</span><span class="ident" id="1169025">addr</span>&nbsp;<span class="op" id="1169030">*</span><span class="ident" id="1169031">uint64</span><span class="op" id="1169037">,</span>&nbsp;<span class="ident" id="1169039">count</span>&nbsp;<span class="builtintype" id="1169045">int</span><span class="op" id="1169048">)</span>&nbsp;<span class="op" id="1169050">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169053">for</span>&nbsp;<span class="ident" id="1169057">i</span>&nbsp;<span class="op" id="1169059">:=</span>&nbsp;<span class="num" id="1169062">0</span><span class="op" id="1169063">;</span>&nbsp;<span class="ident" id="1169065">i</span>&nbsp;<span class="op" id="1169067">&lt;</span>&nbsp;<span class="ident" id="1169069">count</span><span class="op" id="1169074">;</span>&nbsp;<span class="ident" id="1169076">i</span><span class="op" id="1169077">++</span>&nbsp;<span class="op" id="1169080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169084">for</span>&nbsp;<span class="op" id="1169088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169093">v</span>&nbsp;<span class="op" id="1169095">:=</span>&nbsp;<span class="ident" id="1169098">LoadUint64</span><span class="op" id="1169108">(</span><span class="ident" id="1169109">addr</span><span class="op" id="1169113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169118">if</span>&nbsp;<span class="ident" id="1169121">CompareAndSwapUint64</span><span class="op" id="1169141">(</span><span class="ident" id="1169142">addr</span><span class="op" id="1169146">,</span>&nbsp;<span class="ident" id="1169148">v</span><span class="op" id="1169149">,</span>&nbsp;<span class="ident" id="1169151">v</span><span class="op" id="1169152">+</span><span class="num" id="1169153">1</span><span class="op" id="1169154">)</span>&nbsp;<span class="op" id="1169156">{</span><br>
<span class="lineno">1055</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169162">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169175">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169178">}</span><br>
<span class="lineno"></span><span class="op" id="1169180">}</span><br>
<span class="lineno">1060</span><br>
<span class="lineno"></span><span class="keyword" id="1169183">func</span>&nbsp;<span class="ident" id="1169188">hammerCompareAndSwapUintptr64</span><span class="op" id="1169217">(</span><span class="ident" id="1169218">uaddr</span>&nbsp;<span class="op" id="1169224">*</span><span class="ident" id="1169225">uint64</span><span class="op" id="1169231">,</span>&nbsp;<span class="ident" id="1169233">count</span>&nbsp;<span class="builtintype" id="1169239">int</span><span class="op" id="1169242">)</span>&nbsp;<span class="op" id="1169244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1169247">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;64-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1169285">//&nbsp;not&nbsp;called&nbsp;on&nbsp;32-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169319">addr</span>&nbsp;<span class="op" id="1169324">:=</span>&nbsp;<span class="op" id="1169327">(</span><span class="op" id="1169328">*</span><span class="builtintype" id="1169329">uintptr</span><span class="op" id="1169336">)</span><span class="op" id="1169337">(</span><span class="ident" id="1169338">unsafe</span><span class="op" id="1169344">.</span><span class="ident" id="1169345">Pointer</span><span class="op" id="1169352">(</span><span class="ident" id="1169353">uaddr</span><span class="op" id="1169358">)</span><span class="op" id="1169359">)</span><br>
<span class="lineno">1065</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169362">for</span>&nbsp;<span class="ident" id="1169366">i</span>&nbsp;<span class="op" id="1169368">:=</span>&nbsp;<span class="num" id="1169371">0</span><span class="op" id="1169372">;</span>&nbsp;<span class="ident" id="1169374">i</span>&nbsp;<span class="op" id="1169376">&lt;</span>&nbsp;<span class="ident" id="1169378">count</span><span class="op" id="1169383">;</span>&nbsp;<span class="ident" id="1169385">i</span><span class="op" id="1169386">++</span>&nbsp;<span class="op" id="1169389">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169393">for</span>&nbsp;<span class="op" id="1169397">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169402">v</span>&nbsp;<span class="op" id="1169404">:=</span>&nbsp;<span class="ident" id="1169407">LoadUintptr</span><span class="op" id="1169418">(</span><span class="ident" id="1169419">addr</span><span class="op" id="1169423">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169428">if</span>&nbsp;<span class="ident" id="1169431">CompareAndSwapUintptr</span><span class="op" id="1169452">(</span><span class="ident" id="1169453">addr</span><span class="op" id="1169457">,</span>&nbsp;<span class="ident" id="1169459">v</span><span class="op" id="1169460">,</span>&nbsp;<span class="ident" id="1169462">v</span><span class="op" id="1169463">+</span><span class="num" id="1169464">1</span><span class="op" id="1169465">)</span>&nbsp;<span class="op" id="1169467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169473">break</span><br>
<span class="lineno">1070</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169482">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169486">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169489">}</span><br>
<span class="lineno"></span><span class="op" id="1169491">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1075</span><span class="keyword" id="1169494">func</span>&nbsp;<span class="ident" id="1169499">hammerCompareAndSwapPointer64</span><span class="op" id="1169528">(</span><span class="ident" id="1169529">uaddr</span>&nbsp;<span class="op" id="1169535">*</span><span class="ident" id="1169536">uint64</span><span class="op" id="1169542">,</span>&nbsp;<span class="ident" id="1169544">count</span>&nbsp;<span class="builtintype" id="1169550">int</span><span class="op" id="1169553">)</span>&nbsp;<span class="op" id="1169555">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1169558">//&nbsp;only&nbsp;safe&nbsp;when&nbsp;uintptr&nbsp;is&nbsp;64-bit.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1169596">//&nbsp;not&nbsp;called&nbsp;on&nbsp;32-bit&nbsp;systems.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169630">addr</span>&nbsp;<span class="op" id="1169635">:=</span>&nbsp;<span class="op" id="1169638">(</span><span class="op" id="1169639">*</span><span class="ident" id="1169640">unsafe</span><span class="op" id="1169646">.</span><span class="ident" id="1169647">Pointer</span><span class="op" id="1169654">)</span><span class="op" id="1169655">(</span><span class="ident" id="1169656">unsafe</span><span class="op" id="1169662">.</span><span class="ident" id="1169663">Pointer</span><span class="op" id="1169670">(</span><span class="ident" id="1169671">uaddr</span><span class="op" id="1169676">)</span><span class="op" id="1169677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169680">for</span>&nbsp;<span class="ident" id="1169684">i</span>&nbsp;<span class="op" id="1169686">:=</span>&nbsp;<span class="num" id="1169689">0</span><span class="op" id="1169690">;</span>&nbsp;<span class="ident" id="1169692">i</span>&nbsp;<span class="op" id="1169694">&lt;</span>&nbsp;<span class="ident" id="1169696">count</span><span class="op" id="1169701">;</span>&nbsp;<span class="ident" id="1169703">i</span><span class="op" id="1169704">++</span>&nbsp;<span class="op" id="1169707">{</span><br>
<span class="lineno">1080</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169711">for</span>&nbsp;<span class="op" id="1169715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169720">v</span>&nbsp;<span class="op" id="1169722">:=</span>&nbsp;<span class="ident" id="1169725">LoadPointer</span><span class="op" id="1169736">(</span><span class="ident" id="1169737">addr</span><span class="op" id="1169741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169746">if</span>&nbsp;<span class="ident" id="1169749">CompareAndSwapPointer</span><span class="op" id="1169770">(</span><span class="ident" id="1169771">addr</span><span class="op" id="1169775">,</span>&nbsp;<span class="ident" id="1169777">v</span><span class="op" id="1169778">,</span>&nbsp;<span class="ident" id="1169780">unsafe</span><span class="op" id="1169786">.</span><span class="ident" id="1169787">Pointer</span><span class="op" id="1169794">(</span><span class="builtintype" id="1169795">uintptr</span><span class="op" id="1169802">(</span><span class="ident" id="1169803">v</span><span class="op" id="1169804">)</span><span class="op" id="1169805">+</span><span class="num" id="1169806">1</span><span class="op" id="1169807">)</span><span class="op" id="1169808">)</span>&nbsp;<span class="op" id="1169810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169816">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169825">}</span><br>
<span class="lineno">1085</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169832">}</span><br>
<span class="lineno"></span><span class="op" id="1169834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1169837">func</span>&nbsp;<span class="ident" id="1169842">TestHammer64</span><span class="op" id="1169854">(</span><span class="ident" id="1169855">t</span>&nbsp;<span class="op" id="1169857">*</span><span class="ident" id="1169858">testing</span><span class="op" id="1169865">.</span><span class="ident" id="1169866">T</span><span class="op" id="1169867">)</span>&nbsp;<span class="op" id="1169869">{</span><br>
<span class="lineno">1090</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169872">if</span>&nbsp;<span class="ident" id="1169875">test64err</span>&nbsp;<span class="op" id="1169885">!=</span>&nbsp;<span class="ident" id="1169888">nil</span>&nbsp;<span class="op" id="1169892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169896">t</span><span class="op" id="1169897">.</span><span class="ident" id="1169898">Skipf</span><span class="op" id="1169903">(</span><span class="string" id="1169904">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1169931">,</span>&nbsp;<span class="ident" id="1169933">test64err</span><span class="op" id="1169942">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1169945">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169948">const</span>&nbsp;<span class="ident" id="1169954">p</span>&nbsp;<span class="op" id="1169956">=</span>&nbsp;<span class="num" id="1169958">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169961">n</span>&nbsp;<span class="op" id="1169963">:=</span>&nbsp;<span class="num" id="1169966">100000</span><br>
<span class="lineno">1095</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1169974">if</span>&nbsp;<span class="ident" id="1169977">testing</span><span class="op" id="1169984">.</span><span class="ident" id="1169985">Short</span><span class="op" id="1169990">(</span><span class="op" id="1169991">)</span>&nbsp;<span class="op" id="1169993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1169997">n</span>&nbsp;<span class="op" id="1169999">=</span>&nbsp;<span class="num" id="1170001">1000</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170007">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170010">defer</span>&nbsp;<span class="ident" id="1170016">runtime</span><span class="op" id="1170023">.</span><span class="ident" id="1170024">GOMAXPROCS</span><span class="op" id="1170034">(</span><span class="ident" id="1170035">runtime</span><span class="op" id="1170042">.</span><span class="ident" id="1170043">GOMAXPROCS</span><span class="op" id="1170053">(</span><span class="ident" id="1170054">p</span><span class="op" id="1170055">)</span><span class="op" id="1170056">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">1100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170060">for</span>&nbsp;<span class="ident" id="1170064">name</span><span class="op" id="1170068">,</span>&nbsp;<span class="ident" id="1170070">testf</span>&nbsp;<span class="op" id="1170076">:=</span>&nbsp;<span class="keyword" id="1170079">range</span>&nbsp;<span class="ident" id="1170085">hammer64</span>&nbsp;<span class="op" id="1170094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170098">c</span>&nbsp;<span class="op" id="1170100">:=</span>&nbsp;<span class="builtinfunc" id="1170103">make</span><span class="op" id="1170107">(</span><span class="keyword" id="1170108">chan</span>&nbsp;<span class="builtintype" id="1170113">int</span><span class="op" id="1170116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170120">var</span>&nbsp;<span class="ident" id="1170124">val</span>&nbsp;<span class="ident" id="1170128">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170137">for</span>&nbsp;<span class="ident" id="1170141">i</span>&nbsp;<span class="op" id="1170143">:=</span>&nbsp;<span class="num" id="1170146">0</span><span class="op" id="1170147">;</span>&nbsp;<span class="ident" id="1170149">i</span>&nbsp;<span class="op" id="1170151">&lt;</span>&nbsp;<span class="ident" id="1170153">p</span><span class="op" id="1170154">;</span>&nbsp;<span class="ident" id="1170156">i</span><span class="op" id="1170157">++</span>&nbsp;<span class="op" id="1170160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170165">go</span>&nbsp;<span class="keyword" id="1170168">func</span><span class="op" id="1170172">(</span><span class="op" id="1170173">)</span>&nbsp;<span class="op" id="1170175">{</span><br>
<span class="lineno">1105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170181">defer</span>&nbsp;<span class="keyword" id="1170187">func</span><span class="op" id="1170191">(</span><span class="op" id="1170192">)</span>&nbsp;<span class="op" id="1170194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170201">if</span>&nbsp;<span class="ident" id="1170204">err</span>&nbsp;<span class="op" id="1170208">:=</span>&nbsp;<span class="builtinfunc" id="1170211">recover</span><span class="op" id="1170218">(</span><span class="op" id="1170219">)</span><span class="op" id="1170220">;</span>&nbsp;<span class="ident" id="1170222">err</span>&nbsp;<span class="op" id="1170226">!=</span>&nbsp;<span class="ident" id="1170229">nil</span>&nbsp;<span class="op" id="1170233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170241">t</span><span class="op" id="1170242">.</span><span class="ident" id="1170243">Error</span><span class="op" id="1170248">(</span><span class="ident" id="1170249">err</span><span class="op" id="1170252">.</span><span class="op" id="1170253">(</span><span class="builtintype" id="1170254">string</span><span class="op" id="1170260">)</span><span class="op" id="1170261">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170275">c</span>&nbsp;<span class="op" id="1170277">&lt;-</span>&nbsp;<span class="num" id="1170280">1</span><br>
<span class="lineno">1110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170286">}</span><span class="op" id="1170287">(</span><span class="op" id="1170288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170294">testf</span><span class="op" id="1170299">(</span><span class="op" id="1170300">&amp;</span><span class="ident" id="1170301">val</span><span class="op" id="1170304">,</span>&nbsp;<span class="ident" id="1170306">n</span><span class="op" id="1170307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170312">}</span><span class="op" id="1170313">(</span><span class="op" id="1170314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170322">for</span>&nbsp;<span class="ident" id="1170326">i</span>&nbsp;<span class="op" id="1170328">:=</span>&nbsp;<span class="num" id="1170331">0</span><span class="op" id="1170332">;</span>&nbsp;<span class="ident" id="1170334">i</span>&nbsp;<span class="op" id="1170336">&lt;</span>&nbsp;<span class="ident" id="1170338">p</span><span class="op" id="1170339">;</span>&nbsp;<span class="ident" id="1170341">i</span><span class="op" id="1170342">++</span>&nbsp;<span class="op" id="1170345">{</span><br>
<span class="lineno">1115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170350">&lt;-</span><span class="ident" id="1170352">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170360">if</span>&nbsp;<span class="op" id="1170363">!</span><span class="ident" id="1170364">strings</span><span class="op" id="1170371">.</span><span class="ident" id="1170372">HasPrefix</span><span class="op" id="1170381">(</span><span class="ident" id="1170382">name</span><span class="op" id="1170386">,</span>&nbsp;<span class="string" id="1170388">&#34;Swap&#34;</span><span class="op" id="1170394">)</span>&nbsp;<span class="op" id="1170396">&amp;&amp;</span>&nbsp;<span class="ident" id="1170399">val</span>&nbsp;<span class="op" id="1170403">!=</span>&nbsp;<span class="ident" id="1170406">uint64</span><span class="op" id="1170412">(</span><span class="ident" id="1170413">n</span><span class="op" id="1170414">)</span><span class="op" id="1170415">*</span><span class="ident" id="1170416">p</span>&nbsp;<span class="op" id="1170418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170423">t</span><span class="op" id="1170424">.</span><span class="ident" id="1170425">Fatalf</span><span class="op" id="1170431">(</span><span class="string" id="1170432">&#34;%s:&nbsp;val=%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="1170452">,</span>&nbsp;<span class="ident" id="1170454">name</span><span class="op" id="1170458">,</span>&nbsp;<span class="ident" id="1170460">val</span><span class="op" id="1170463">,</span>&nbsp;<span class="ident" id="1170465">n</span><span class="op" id="1170466">*</span><span class="ident" id="1170467">p</span><span class="op" id="1170468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170472">}</span><br>
<span class="lineno">1120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170475">}</span><br>
<span class="lineno"></span><span class="op" id="1170477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1170480">func</span>&nbsp;<span class="ident" id="1170485">hammerStoreLoadInt32</span><span class="op" id="1170505">(</span><span class="ident" id="1170506">t</span>&nbsp;<span class="op" id="1170508">*</span><span class="ident" id="1170509">testing</span><span class="op" id="1170516">.</span><span class="ident" id="1170517">T</span><span class="op" id="1170518">,</span>&nbsp;<span class="ident" id="1170520">paddr</span>&nbsp;<span class="ident" id="1170526">unsafe</span><span class="op" id="1170532">.</span><span class="ident" id="1170533">Pointer</span><span class="op" id="1170540">)</span>&nbsp;<span class="op" id="1170542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170545">addr</span>&nbsp;<span class="op" id="1170550">:=</span>&nbsp;<span class="op" id="1170553">(</span><span class="op" id="1170554">*</span><span class="builtintype" id="1170555">int32</span><span class="op" id="1170560">)</span><span class="op" id="1170561">(</span><span class="ident" id="1170562">paddr</span><span class="op" id="1170567">)</span><br>
<span class="lineno">1125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170570">v</span>&nbsp;<span class="op" id="1170572">:=</span>&nbsp;<span class="ident" id="1170575">LoadInt32</span><span class="op" id="1170584">(</span><span class="ident" id="1170585">addr</span><span class="op" id="1170589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170592">vlo</span>&nbsp;<span class="op" id="1170596">:=</span>&nbsp;<span class="ident" id="1170599">v</span>&nbsp;<span class="op" id="1170601">&amp;</span>&nbsp;<span class="op" id="1170603">(</span><span class="op" id="1170604">(</span><span class="num" id="1170605">1</span>&nbsp;<span class="op" id="1170607">&lt;&lt;</span>&nbsp;<span class="num" id="1170610">16</span><span class="op" id="1170612">)</span>&nbsp;<span class="op" id="1170614">-</span>&nbsp;<span class="num" id="1170616">1</span><span class="op" id="1170617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170620">vhi</span>&nbsp;<span class="op" id="1170624">:=</span>&nbsp;<span class="ident" id="1170627">v</span>&nbsp;<span class="op" id="1170629">&gt;&gt;</span>&nbsp;<span class="num" id="1170632">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170636">if</span>&nbsp;<span class="ident" id="1170639">vlo</span>&nbsp;<span class="op" id="1170643">!=</span>&nbsp;<span class="ident" id="1170646">vhi</span>&nbsp;<span class="op" id="1170650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170654">t</span><span class="op" id="1170655">.</span><span class="ident" id="1170656">Fatalf</span><span class="op" id="1170662">(</span><span class="string" id="1170663">&#34;Int32:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1170682">,</span>&nbsp;<span class="ident" id="1170684">vlo</span><span class="op" id="1170687">,</span>&nbsp;<span class="ident" id="1170689">vhi</span><span class="op" id="1170692">)</span><br>
<span class="lineno">1130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1170698">new</span>&nbsp;<span class="op" id="1170702">:=</span>&nbsp;<span class="ident" id="1170705">v</span>&nbsp;<span class="op" id="1170707">+</span>&nbsp;<span class="num" id="1170709">1</span>&nbsp;<span class="op" id="1170711">+</span>&nbsp;<span class="num" id="1170713">1</span><span class="op" id="1170714">&lt;&lt;</span><span class="num" id="1170716">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170720">if</span>&nbsp;<span class="ident" id="1170723">vlo</span>&nbsp;<span class="op" id="1170727">==</span>&nbsp;<span class="num" id="1170730">1e4</span>&nbsp;<span class="op" id="1170734">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1170738">new</span>&nbsp;<span class="op" id="1170742">=</span>&nbsp;<span class="num" id="1170744">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170747">}</span><br>
<span class="lineno">1135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170750">StoreInt32</span><span class="op" id="1170760">(</span><span class="ident" id="1170761">addr</span><span class="op" id="1170765">,</span>&nbsp;<span class="builtinfunc" id="1170767">new</span><span class="op" id="1170770">)</span><br>
<span class="lineno"></span><span class="op" id="1170772">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1170775">func</span>&nbsp;<span class="ident" id="1170780">hammerStoreLoadUint32</span><span class="op" id="1170801">(</span><span class="ident" id="1170802">t</span>&nbsp;<span class="op" id="1170804">*</span><span class="ident" id="1170805">testing</span><span class="op" id="1170812">.</span><span class="ident" id="1170813">T</span><span class="op" id="1170814">,</span>&nbsp;<span class="ident" id="1170816">paddr</span>&nbsp;<span class="ident" id="1170822">unsafe</span><span class="op" id="1170828">.</span><span class="ident" id="1170829">Pointer</span><span class="op" id="1170836">)</span>&nbsp;<span class="op" id="1170838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170841">addr</span>&nbsp;<span class="op" id="1170846">:=</span>&nbsp;<span class="op" id="1170849">(</span><span class="op" id="1170850">*</span><span class="builtintype" id="1170851">uint32</span><span class="op" id="1170857">)</span><span class="op" id="1170858">(</span><span class="ident" id="1170859">paddr</span><span class="op" id="1170864">)</span><br>
<span class="lineno">1140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170867">v</span>&nbsp;<span class="op" id="1170869">:=</span>&nbsp;<span class="ident" id="1170872">LoadUint32</span><span class="op" id="1170882">(</span><span class="ident" id="1170883">addr</span><span class="op" id="1170887">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170890">vlo</span>&nbsp;<span class="op" id="1170894">:=</span>&nbsp;<span class="ident" id="1170897">v</span>&nbsp;<span class="op" id="1170899">&amp;</span>&nbsp;<span class="op" id="1170901">(</span><span class="op" id="1170902">(</span><span class="num" id="1170903">1</span>&nbsp;<span class="op" id="1170905">&lt;&lt;</span>&nbsp;<span class="num" id="1170908">16</span><span class="op" id="1170910">)</span>&nbsp;<span class="op" id="1170912">-</span>&nbsp;<span class="num" id="1170914">1</span><span class="op" id="1170915">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170918">vhi</span>&nbsp;<span class="op" id="1170922">:=</span>&nbsp;<span class="ident" id="1170925">v</span>&nbsp;<span class="op" id="1170927">&gt;&gt;</span>&nbsp;<span class="num" id="1170930">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1170934">if</span>&nbsp;<span class="ident" id="1170937">vlo</span>&nbsp;<span class="op" id="1170941">!=</span>&nbsp;<span class="ident" id="1170944">vhi</span>&nbsp;<span class="op" id="1170948">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1170952">t</span><span class="op" id="1170953">.</span><span class="ident" id="1170954">Fatalf</span><span class="op" id="1170960">(</span><span class="string" id="1170961">&#34;Uint32:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1170981">,</span>&nbsp;<span class="ident" id="1170983">vlo</span><span class="op" id="1170986">,</span>&nbsp;<span class="ident" id="1170988">vhi</span><span class="op" id="1170991">)</span><br>
<span class="lineno">1145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1170994">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1170997">new</span>&nbsp;<span class="op" id="1171001">:=</span>&nbsp;<span class="ident" id="1171004">v</span>&nbsp;<span class="op" id="1171006">+</span>&nbsp;<span class="num" id="1171008">1</span>&nbsp;<span class="op" id="1171010">+</span>&nbsp;<span class="num" id="1171012">1</span><span class="op" id="1171013">&lt;&lt;</span><span class="num" id="1171015">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171019">if</span>&nbsp;<span class="ident" id="1171022">vlo</span>&nbsp;<span class="op" id="1171026">==</span>&nbsp;<span class="num" id="1171029">1e4</span>&nbsp;<span class="op" id="1171033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171037">new</span>&nbsp;<span class="op" id="1171041">=</span>&nbsp;<span class="num" id="1171043">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171046">}</span><br>
<span class="lineno">1150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171049">StoreUint32</span><span class="op" id="1171060">(</span><span class="ident" id="1171061">addr</span><span class="op" id="1171065">,</span>&nbsp;<span class="builtinfunc" id="1171067">new</span><span class="op" id="1171070">)</span><br>
<span class="lineno"></span><span class="op" id="1171072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1171075">func</span>&nbsp;<span class="ident" id="1171080">hammerStoreLoadInt64</span><span class="op" id="1171100">(</span><span class="ident" id="1171101">t</span>&nbsp;<span class="op" id="1171103">*</span><span class="ident" id="1171104">testing</span><span class="op" id="1171111">.</span><span class="ident" id="1171112">T</span><span class="op" id="1171113">,</span>&nbsp;<span class="ident" id="1171115">paddr</span>&nbsp;<span class="ident" id="1171121">unsafe</span><span class="op" id="1171127">.</span><span class="ident" id="1171128">Pointer</span><span class="op" id="1171135">)</span>&nbsp;<span class="op" id="1171137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171140">addr</span>&nbsp;<span class="op" id="1171145">:=</span>&nbsp;<span class="op" id="1171148">(</span><span class="op" id="1171149">*</span><span class="ident" id="1171150">int64</span><span class="op" id="1171155">)</span><span class="op" id="1171156">(</span><span class="ident" id="1171157">paddr</span><span class="op" id="1171162">)</span><br>
<span class="lineno">1155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171165">v</span>&nbsp;<span class="op" id="1171167">:=</span>&nbsp;<span class="ident" id="1171170">LoadInt64</span><span class="op" id="1171179">(</span><span class="ident" id="1171180">addr</span><span class="op" id="1171184">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171187">vlo</span>&nbsp;<span class="op" id="1171191">:=</span>&nbsp;<span class="ident" id="1171194">v</span>&nbsp;<span class="op" id="1171196">&amp;</span>&nbsp;<span class="op" id="1171198">(</span><span class="op" id="1171199">(</span><span class="num" id="1171200">1</span>&nbsp;<span class="op" id="1171202">&lt;&lt;</span>&nbsp;<span class="num" id="1171205">32</span><span class="op" id="1171207">)</span>&nbsp;<span class="op" id="1171209">-</span>&nbsp;<span class="num" id="1171211">1</span><span class="op" id="1171212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171215">vhi</span>&nbsp;<span class="op" id="1171219">:=</span>&nbsp;<span class="ident" id="1171222">v</span>&nbsp;<span class="op" id="1171224">&gt;&gt;</span>&nbsp;<span class="num" id="1171227">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171231">if</span>&nbsp;<span class="ident" id="1171234">vlo</span>&nbsp;<span class="op" id="1171238">!=</span>&nbsp;<span class="ident" id="1171241">vhi</span>&nbsp;<span class="op" id="1171245">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171249">t</span><span class="op" id="1171250">.</span><span class="ident" id="1171251">Fatalf</span><span class="op" id="1171257">(</span><span class="string" id="1171258">&#34;Int64:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1171277">,</span>&nbsp;<span class="ident" id="1171279">vlo</span><span class="op" id="1171282">,</span>&nbsp;<span class="ident" id="1171284">vhi</span><span class="op" id="1171287">)</span><br>
<span class="lineno">1160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171293">new</span>&nbsp;<span class="op" id="1171297">:=</span>&nbsp;<span class="ident" id="1171300">v</span>&nbsp;<span class="op" id="1171302">+</span>&nbsp;<span class="num" id="1171304">1</span>&nbsp;<span class="op" id="1171306">+</span>&nbsp;<span class="num" id="1171308">1</span><span class="op" id="1171309">&lt;&lt;</span><span class="num" id="1171311">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171315">StoreInt64</span><span class="op" id="1171325">(</span><span class="ident" id="1171326">addr</span><span class="op" id="1171330">,</span>&nbsp;<span class="builtinfunc" id="1171332">new</span><span class="op" id="1171335">)</span><br>
<span class="lineno"></span><span class="op" id="1171337">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1165</span><span class="keyword" id="1171340">func</span>&nbsp;<span class="ident" id="1171345">hammerStoreLoadUint64</span><span class="op" id="1171366">(</span><span class="ident" id="1171367">t</span>&nbsp;<span class="op" id="1171369">*</span><span class="ident" id="1171370">testing</span><span class="op" id="1171377">.</span><span class="ident" id="1171378">T</span><span class="op" id="1171379">,</span>&nbsp;<span class="ident" id="1171381">paddr</span>&nbsp;<span class="ident" id="1171387">unsafe</span><span class="op" id="1171393">.</span><span class="ident" id="1171394">Pointer</span><span class="op" id="1171401">)</span>&nbsp;<span class="op" id="1171403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171406">addr</span>&nbsp;<span class="op" id="1171411">:=</span>&nbsp;<span class="op" id="1171414">(</span><span class="op" id="1171415">*</span><span class="ident" id="1171416">uint64</span><span class="op" id="1171422">)</span><span class="op" id="1171423">(</span><span class="ident" id="1171424">paddr</span><span class="op" id="1171429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171432">v</span>&nbsp;<span class="op" id="1171434">:=</span>&nbsp;<span class="ident" id="1171437">LoadUint64</span><span class="op" id="1171447">(</span><span class="ident" id="1171448">addr</span><span class="op" id="1171452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171455">vlo</span>&nbsp;<span class="op" id="1171459">:=</span>&nbsp;<span class="ident" id="1171462">v</span>&nbsp;<span class="op" id="1171464">&amp;</span>&nbsp;<span class="op" id="1171466">(</span><span class="op" id="1171467">(</span><span class="num" id="1171468">1</span>&nbsp;<span class="op" id="1171470">&lt;&lt;</span>&nbsp;<span class="num" id="1171473">32</span><span class="op" id="1171475">)</span>&nbsp;<span class="op" id="1171477">-</span>&nbsp;<span class="num" id="1171479">1</span><span class="op" id="1171480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171483">vhi</span>&nbsp;<span class="op" id="1171487">:=</span>&nbsp;<span class="ident" id="1171490">v</span>&nbsp;<span class="op" id="1171492">&gt;&gt;</span>&nbsp;<span class="num" id="1171495">32</span><br>
<span class="lineno">1170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171499">if</span>&nbsp;<span class="ident" id="1171502">vlo</span>&nbsp;<span class="op" id="1171506">!=</span>&nbsp;<span class="ident" id="1171509">vhi</span>&nbsp;<span class="op" id="1171513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171517">t</span><span class="op" id="1171518">.</span><span class="ident" id="1171519">Fatalf</span><span class="op" id="1171525">(</span><span class="string" id="1171526">&#34;Uint64:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1171546">,</span>&nbsp;<span class="ident" id="1171548">vlo</span><span class="op" id="1171551">,</span>&nbsp;<span class="ident" id="1171553">vhi</span><span class="op" id="1171556">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171559">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171562">new</span>&nbsp;<span class="op" id="1171566">:=</span>&nbsp;<span class="ident" id="1171569">v</span>&nbsp;<span class="op" id="1171571">+</span>&nbsp;<span class="num" id="1171573">1</span>&nbsp;<span class="op" id="1171575">+</span>&nbsp;<span class="num" id="1171577">1</span><span class="op" id="1171578">&lt;&lt;</span><span class="num" id="1171580">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171584">StoreUint64</span><span class="op" id="1171595">(</span><span class="ident" id="1171596">addr</span><span class="op" id="1171600">,</span>&nbsp;<span class="builtinfunc" id="1171602">new</span><span class="op" id="1171605">)</span><br>
<span class="lineno">1175</span><span class="op" id="1171607">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1171610">func</span>&nbsp;<span class="ident" id="1171615">hammerStoreLoadUintptr</span><span class="op" id="1171637">(</span><span class="ident" id="1171638">t</span>&nbsp;<span class="op" id="1171640">*</span><span class="ident" id="1171641">testing</span><span class="op" id="1171648">.</span><span class="ident" id="1171649">T</span><span class="op" id="1171650">,</span>&nbsp;<span class="ident" id="1171652">paddr</span>&nbsp;<span class="ident" id="1171658">unsafe</span><span class="op" id="1171664">.</span><span class="ident" id="1171665">Pointer</span><span class="op" id="1171672">)</span>&nbsp;<span class="op" id="1171674">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171677">addr</span>&nbsp;<span class="op" id="1171682">:=</span>&nbsp;<span class="op" id="1171685">(</span><span class="op" id="1171686">*</span><span class="builtintype" id="1171687">uintptr</span><span class="op" id="1171694">)</span><span class="op" id="1171695">(</span><span class="ident" id="1171696">paddr</span><span class="op" id="1171701">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171704">var</span>&nbsp;<span class="ident" id="1171708">test64</span>&nbsp;<span class="ident" id="1171715">uint64</span>&nbsp;<span class="op" id="1171722">=</span>&nbsp;<span class="num" id="1171724">1</span>&nbsp;<span class="op" id="1171726">&lt;&lt;</span>&nbsp;<span class="num" id="1171729">50</span><br>
<span class="lineno">1180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171733">arch32</span>&nbsp;<span class="op" id="1171740">:=</span>&nbsp;<span class="builtintype" id="1171743">uintptr</span><span class="op" id="1171750">(</span><span class="ident" id="1171751">test64</span><span class="op" id="1171757">)</span>&nbsp;<span class="op" id="1171759">==</span>&nbsp;<span class="num" id="1171762">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171765">v</span>&nbsp;<span class="op" id="1171767">:=</span>&nbsp;<span class="ident" id="1171770">LoadUintptr</span><span class="op" id="1171781">(</span><span class="ident" id="1171782">addr</span><span class="op" id="1171786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171789">new</span>&nbsp;<span class="op" id="1171793">:=</span>&nbsp;<span class="ident" id="1171796">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171799">if</span>&nbsp;<span class="ident" id="1171802">arch32</span>&nbsp;<span class="op" id="1171809">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171813">vlo</span>&nbsp;<span class="op" id="1171817">:=</span>&nbsp;<span class="ident" id="1171820">v</span>&nbsp;<span class="op" id="1171822">&amp;</span>&nbsp;<span class="op" id="1171824">(</span><span class="op" id="1171825">(</span><span class="num" id="1171826">1</span>&nbsp;<span class="op" id="1171828">&lt;&lt;</span>&nbsp;<span class="num" id="1171831">16</span><span class="op" id="1171833">)</span>&nbsp;<span class="op" id="1171835">-</span>&nbsp;<span class="num" id="1171837">1</span><span class="op" id="1171838">)</span><br>
<span class="lineno">1185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171842">vhi</span>&nbsp;<span class="op" id="1171846">:=</span>&nbsp;<span class="ident" id="1171849">v</span>&nbsp;<span class="op" id="1171851">&gt;&gt;</span>&nbsp;<span class="num" id="1171854">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171859">if</span>&nbsp;<span class="ident" id="1171862">vlo</span>&nbsp;<span class="op" id="1171866">!=</span>&nbsp;<span class="ident" id="1171869">vhi</span>&nbsp;<span class="op" id="1171873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171878">t</span><span class="op" id="1171879">.</span><span class="ident" id="1171880">Fatalf</span><span class="op" id="1171886">(</span><span class="string" id="1171887">&#34;Uintptr:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1171908">,</span>&nbsp;<span class="ident" id="1171910">vlo</span><span class="op" id="1171913">,</span>&nbsp;<span class="ident" id="1171915">vhi</span><span class="op" id="1171918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171922">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171926">new</span>&nbsp;<span class="op" id="1171930">=</span>&nbsp;<span class="ident" id="1171932">v</span>&nbsp;<span class="op" id="1171934">+</span>&nbsp;<span class="num" id="1171936">1</span>&nbsp;<span class="op" id="1171938">+</span>&nbsp;<span class="num" id="1171940">1</span><span class="op" id="1171941">&lt;&lt;</span><span class="num" id="1171943">16</span><br>
<span class="lineno">1190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1171948">if</span>&nbsp;<span class="ident" id="1171951">vlo</span>&nbsp;<span class="op" id="1171955">==</span>&nbsp;<span class="num" id="1171958">1e4</span>&nbsp;<span class="op" id="1171962">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1171967">new</span>&nbsp;<span class="op" id="1171971">=</span>&nbsp;<span class="num" id="1171973">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171977">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1171980">}</span>&nbsp;<span class="keyword" id="1171982">else</span>&nbsp;<span class="op" id="1171987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1171991">vlo</span>&nbsp;<span class="op" id="1171995">:=</span>&nbsp;<span class="ident" id="1171998">v</span>&nbsp;<span class="op" id="1172000">&amp;</span>&nbsp;<span class="op" id="1172002">(</span><span class="op" id="1172003">(</span><span class="num" id="1172004">1</span>&nbsp;<span class="op" id="1172006">&lt;&lt;</span>&nbsp;<span class="num" id="1172009">32</span><span class="op" id="1172011">)</span>&nbsp;<span class="op" id="1172013">-</span>&nbsp;<span class="num" id="1172015">1</span><span class="op" id="1172016">)</span><br>
<span class="lineno">1195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172020">vhi</span>&nbsp;<span class="op" id="1172024">:=</span>&nbsp;<span class="ident" id="1172027">v</span>&nbsp;<span class="op" id="1172029">&gt;&gt;</span>&nbsp;<span class="num" id="1172032">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172037">if</span>&nbsp;<span class="ident" id="1172040">vlo</span>&nbsp;<span class="op" id="1172044">!=</span>&nbsp;<span class="ident" id="1172047">vhi</span>&nbsp;<span class="op" id="1172051">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172056">t</span><span class="op" id="1172057">.</span><span class="ident" id="1172058">Fatalf</span><span class="op" id="1172064">(</span><span class="string" id="1172065">&#34;Uintptr:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1172086">,</span>&nbsp;<span class="ident" id="1172088">vlo</span><span class="op" id="1172091">,</span>&nbsp;<span class="ident" id="1172093">vhi</span><span class="op" id="1172096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172100">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172104">inc</span>&nbsp;<span class="op" id="1172108">:=</span>&nbsp;<span class="ident" id="1172111">uint64</span><span class="op" id="1172117">(</span><span class="num" id="1172118">1</span>&nbsp;<span class="op" id="1172120">+</span>&nbsp;<span class="num" id="1172122">1</span><span class="op" id="1172123">&lt;&lt;</span><span class="num" id="1172125">32</span><span class="op" id="1172127">)</span><br>
<span class="lineno">1200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1172131">new</span>&nbsp;<span class="op" id="1172135">=</span>&nbsp;<span class="ident" id="1172137">v</span>&nbsp;<span class="op" id="1172139">+</span>&nbsp;<span class="builtintype" id="1172141">uintptr</span><span class="op" id="1172148">(</span><span class="ident" id="1172149">inc</span><span class="op" id="1172152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172155">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172158">StoreUintptr</span><span class="op" id="1172170">(</span><span class="ident" id="1172171">addr</span><span class="op" id="1172175">,</span>&nbsp;<span class="builtinfunc" id="1172177">new</span><span class="op" id="1172180">)</span><br>
<span class="lineno"></span><span class="op" id="1172182">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1205</span><span class="keyword" id="1172185">func</span>&nbsp;<span class="ident" id="1172190">hammerStoreLoadPointer</span><span class="op" id="1172212">(</span><span class="ident" id="1172213">t</span>&nbsp;<span class="op" id="1172215">*</span><span class="ident" id="1172216">testing</span><span class="op" id="1172223">.</span><span class="ident" id="1172224">T</span><span class="op" id="1172225">,</span>&nbsp;<span class="ident" id="1172227">paddr</span>&nbsp;<span class="ident" id="1172233">unsafe</span><span class="op" id="1172239">.</span><span class="ident" id="1172240">Pointer</span><span class="op" id="1172247">)</span>&nbsp;<span class="op" id="1172249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172252">addr</span>&nbsp;<span class="op" id="1172257">:=</span>&nbsp;<span class="op" id="1172260">(</span><span class="op" id="1172261">*</span><span class="ident" id="1172262">unsafe</span><span class="op" id="1172268">.</span><span class="ident" id="1172269">Pointer</span><span class="op" id="1172276">)</span><span class="op" id="1172277">(</span><span class="ident" id="1172278">paddr</span><span class="op" id="1172283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172286">var</span>&nbsp;<span class="ident" id="1172290">test64</span>&nbsp;<span class="ident" id="1172297">uint64</span>&nbsp;<span class="op" id="1172304">=</span>&nbsp;<span class="num" id="1172306">1</span>&nbsp;<span class="op" id="1172308">&lt;&lt;</span>&nbsp;<span class="num" id="1172311">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172315">arch32</span>&nbsp;<span class="op" id="1172322">:=</span>&nbsp;<span class="builtintype" id="1172325">uintptr</span><span class="op" id="1172332">(</span><span class="ident" id="1172333">test64</span><span class="op" id="1172339">)</span>&nbsp;<span class="op" id="1172341">==</span>&nbsp;<span class="num" id="1172344">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172347">v</span>&nbsp;<span class="op" id="1172349">:=</span>&nbsp;<span class="builtintype" id="1172352">uintptr</span><span class="op" id="1172359">(</span><span class="ident" id="1172360">LoadPointer</span><span class="op" id="1172371">(</span><span class="ident" id="1172372">addr</span><span class="op" id="1172376">)</span><span class="op" id="1172377">)</span><br>
<span class="lineno">1210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1172380">new</span>&nbsp;<span class="op" id="1172384">:=</span>&nbsp;<span class="ident" id="1172387">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172390">if</span>&nbsp;<span class="ident" id="1172393">arch32</span>&nbsp;<span class="op" id="1172400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172404">vlo</span>&nbsp;<span class="op" id="1172408">:=</span>&nbsp;<span class="ident" id="1172411">v</span>&nbsp;<span class="op" id="1172413">&amp;</span>&nbsp;<span class="op" id="1172415">(</span><span class="op" id="1172416">(</span><span class="num" id="1172417">1</span>&nbsp;<span class="op" id="1172419">&lt;&lt;</span>&nbsp;<span class="num" id="1172422">16</span><span class="op" id="1172424">)</span>&nbsp;<span class="op" id="1172426">-</span>&nbsp;<span class="num" id="1172428">1</span><span class="op" id="1172429">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172433">vhi</span>&nbsp;<span class="op" id="1172437">:=</span>&nbsp;<span class="ident" id="1172440">v</span>&nbsp;<span class="op" id="1172442">&gt;&gt;</span>&nbsp;<span class="num" id="1172445">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172450">if</span>&nbsp;<span class="ident" id="1172453">vlo</span>&nbsp;<span class="op" id="1172457">!=</span>&nbsp;<span class="ident" id="1172460">vhi</span>&nbsp;<span class="op" id="1172464">{</span><br>
<span class="lineno">1215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172469">t</span><span class="op" id="1172470">.</span><span class="ident" id="1172471">Fatalf</span><span class="op" id="1172477">(</span><span class="string" id="1172478">&#34;Pointer:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1172499">,</span>&nbsp;<span class="ident" id="1172501">vlo</span><span class="op" id="1172504">,</span>&nbsp;<span class="ident" id="1172506">vhi</span><span class="op" id="1172509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172513">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1172517">new</span>&nbsp;<span class="op" id="1172521">=</span>&nbsp;<span class="ident" id="1172523">v</span>&nbsp;<span class="op" id="1172525">+</span>&nbsp;<span class="num" id="1172527">1</span>&nbsp;<span class="op" id="1172529">+</span>&nbsp;<span class="num" id="1172531">1</span><span class="op" id="1172532">&lt;&lt;</span><span class="num" id="1172534">16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172539">if</span>&nbsp;<span class="ident" id="1172542">vlo</span>&nbsp;<span class="op" id="1172546">==</span>&nbsp;<span class="num" id="1172549">1e4</span>&nbsp;<span class="op" id="1172553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1172558">new</span>&nbsp;<span class="op" id="1172562">=</span>&nbsp;<span class="num" id="1172564">0</span><br>
<span class="lineno">1220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172571">}</span>&nbsp;<span class="keyword" id="1172573">else</span>&nbsp;<span class="op" id="1172578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172582">vlo</span>&nbsp;<span class="op" id="1172586">:=</span>&nbsp;<span class="ident" id="1172589">v</span>&nbsp;<span class="op" id="1172591">&amp;</span>&nbsp;<span class="op" id="1172593">(</span><span class="op" id="1172594">(</span><span class="num" id="1172595">1</span>&nbsp;<span class="op" id="1172597">&lt;&lt;</span>&nbsp;<span class="num" id="1172600">32</span><span class="op" id="1172602">)</span>&nbsp;<span class="op" id="1172604">-</span>&nbsp;<span class="num" id="1172606">1</span><span class="op" id="1172607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172611">vhi</span>&nbsp;<span class="op" id="1172615">:=</span>&nbsp;<span class="ident" id="1172618">v</span>&nbsp;<span class="op" id="1172620">&gt;&gt;</span>&nbsp;<span class="num" id="1172623">32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172628">if</span>&nbsp;<span class="ident" id="1172631">vlo</span>&nbsp;<span class="op" id="1172635">!=</span>&nbsp;<span class="ident" id="1172638">vhi</span>&nbsp;<span class="op" id="1172642">{</span><br>
<span class="lineno">1225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172647">t</span><span class="op" id="1172648">.</span><span class="ident" id="1172649">Fatalf</span><span class="op" id="1172655">(</span><span class="string" id="1172656">&#34;Pointer:&nbsp;%#x&nbsp;!=&nbsp;%#x&#34;</span><span class="op" id="1172677">,</span>&nbsp;<span class="ident" id="1172679">vlo</span><span class="op" id="1172682">,</span>&nbsp;<span class="ident" id="1172684">vhi</span><span class="op" id="1172687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172695">inc</span>&nbsp;<span class="op" id="1172699">:=</span>&nbsp;<span class="ident" id="1172702">uint64</span><span class="op" id="1172708">(</span><span class="num" id="1172709">1</span>&nbsp;<span class="op" id="1172711">+</span>&nbsp;<span class="num" id="1172713">1</span><span class="op" id="1172714">&lt;&lt;</span><span class="num" id="1172716">32</span><span class="op" id="1172718">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1172722">new</span>&nbsp;<span class="op" id="1172726">=</span>&nbsp;<span class="ident" id="1172728">v</span>&nbsp;<span class="op" id="1172730">+</span>&nbsp;<span class="builtintype" id="1172732">uintptr</span><span class="op" id="1172739">(</span><span class="ident" id="1172740">inc</span><span class="op" id="1172743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1172746">}</span><br>
<span class="lineno">1230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172749">StorePointer</span><span class="op" id="1172761">(</span><span class="ident" id="1172762">addr</span><span class="op" id="1172766">,</span>&nbsp;<span class="ident" id="1172768">unsafe</span><span class="op" id="1172774">.</span><span class="ident" id="1172775">Pointer</span><span class="op" id="1172782">(</span><span class="builtinfunc" id="1172783">new</span><span class="op" id="1172786">)</span><span class="op" id="1172787">)</span><br>
<span class="lineno"></span><span class="op" id="1172789">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1172792">func</span>&nbsp;<span class="ident" id="1172797">TestHammerStoreLoad</span><span class="op" id="1172816">(</span><span class="ident" id="1172817">t</span>&nbsp;<span class="op" id="1172819">*</span><span class="ident" id="1172820">testing</span><span class="op" id="1172827">.</span><span class="ident" id="1172828">T</span><span class="op" id="1172829">)</span>&nbsp;<span class="op" id="1172831">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172834">var</span>&nbsp;<span class="ident" id="1172838">tests</span>&nbsp;<span class="op" id="1172844">[</span><span class="op" id="1172845">]</span><span class="keyword" id="1172846">func</span><span class="op" id="1172850">(</span><span class="op" id="1172851">*</span><span class="ident" id="1172852">testing</span><span class="op" id="1172859">.</span><span class="ident" id="1172860">T</span><span class="op" id="1172861">,</span>&nbsp;<span class="ident" id="1172863">unsafe</span><span class="op" id="1172869">.</span><span class="ident" id="1172870">Pointer</span><span class="op" id="1172877">)</span><br>
<span class="lineno">1235</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172880">tests</span>&nbsp;<span class="op" id="1172886">=</span>&nbsp;<span class="builtinfunc" id="1172888">append</span><span class="op" id="1172894">(</span><span class="ident" id="1172895">tests</span><span class="op" id="1172900">,</span>&nbsp;<span class="ident" id="1172902">hammerStoreLoadInt32</span><span class="op" id="1172922">,</span>&nbsp;<span class="ident" id="1172924">hammerStoreLoadUint32</span><span class="op" id="1172945">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1172949">hammerStoreLoadUintptr</span><span class="op" id="1172971">,</span>&nbsp;<span class="ident" id="1172973">hammerStoreLoadPointer</span><span class="op" id="1172995">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1172998">if</span>&nbsp;<span class="ident" id="1173001">test64err</span>&nbsp;<span class="op" id="1173011">==</span>&nbsp;<span class="ident" id="1173014">nil</span>&nbsp;<span class="op" id="1173018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173022">tests</span>&nbsp;<span class="op" id="1173028">=</span>&nbsp;<span class="builtinfunc" id="1173030">append</span><span class="op" id="1173036">(</span><span class="ident" id="1173037">tests</span><span class="op" id="1173042">,</span>&nbsp;<span class="ident" id="1173044">hammerStoreLoadInt64</span><span class="op" id="1173064">,</span>&nbsp;<span class="ident" id="1173066">hammerStoreLoadUint64</span><span class="op" id="1173087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173090">}</span><br>
<span class="lineno">1240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173093">n</span>&nbsp;<span class="op" id="1173095">:=</span>&nbsp;<span class="builtintype" id="1173098">int</span><span class="op" id="1173101">(</span><span class="num" id="1173102">1e6</span><span class="op" id="1173105">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173108">if</span>&nbsp;<span class="ident" id="1173111">testing</span><span class="op" id="1173118">.</span><span class="ident" id="1173119">Short</span><span class="op" id="1173124">(</span><span class="op" id="1173125">)</span>&nbsp;<span class="op" id="1173127">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173131">n</span>&nbsp;<span class="op" id="1173133">=</span>&nbsp;<span class="builtintype" id="1173135">int</span><span class="op" id="1173138">(</span><span class="num" id="1173139">1e4</span><span class="op" id="1173142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173148">const</span>&nbsp;<span class="ident" id="1173154">procs</span>&nbsp;<span class="op" id="1173160">=</span>&nbsp;<span class="num" id="1173162">8</span><br>
<span class="lineno">1245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173165">defer</span>&nbsp;<span class="ident" id="1173171">runtime</span><span class="op" id="1173178">.</span><span class="ident" id="1173179">GOMAXPROCS</span><span class="op" id="1173189">(</span><span class="ident" id="1173190">runtime</span><span class="op" id="1173197">.</span><span class="ident" id="1173198">GOMAXPROCS</span><span class="op" id="1173208">(</span><span class="ident" id="1173209">procs</span><span class="op" id="1173214">)</span><span class="op" id="1173215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173218">for</span>&nbsp;<span class="ident" id="1173222">_</span><span class="op" id="1173223">,</span>&nbsp;<span class="ident" id="1173225">tt</span>&nbsp;<span class="op" id="1173228">:=</span>&nbsp;<span class="keyword" id="1173231">range</span>&nbsp;<span class="ident" id="1173237">tests</span>&nbsp;<span class="op" id="1173243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173247">c</span>&nbsp;<span class="op" id="1173249">:=</span>&nbsp;<span class="builtinfunc" id="1173252">make</span><span class="op" id="1173256">(</span><span class="keyword" id="1173257">chan</span>&nbsp;<span class="builtintype" id="1173262">int</span><span class="op" id="1173265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173269">var</span>&nbsp;<span class="ident" id="1173273">val</span>&nbsp;<span class="ident" id="1173277">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173286">for</span>&nbsp;<span class="ident" id="1173290">p</span>&nbsp;<span class="op" id="1173292">:=</span>&nbsp;<span class="num" id="1173295">0</span><span class="op" id="1173296">;</span>&nbsp;<span class="ident" id="1173298">p</span>&nbsp;<span class="op" id="1173300">&lt;</span>&nbsp;<span class="ident" id="1173302">procs</span><span class="op" id="1173307">;</span>&nbsp;<span class="ident" id="1173309">p</span><span class="op" id="1173310">++</span>&nbsp;<span class="op" id="1173313">{</span><br>
<span class="lineno">1250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173318">go</span>&nbsp;<span class="keyword" id="1173321">func</span><span class="op" id="1173325">(</span><span class="op" id="1173326">)</span>&nbsp;<span class="op" id="1173328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173334">for</span>&nbsp;<span class="ident" id="1173338">i</span>&nbsp;<span class="op" id="1173340">:=</span>&nbsp;<span class="num" id="1173343">0</span><span class="op" id="1173344">;</span>&nbsp;<span class="ident" id="1173346">i</span>&nbsp;<span class="op" id="1173348">&lt;</span>&nbsp;<span class="ident" id="1173350">n</span><span class="op" id="1173351">;</span>&nbsp;<span class="ident" id="1173353">i</span><span class="op" id="1173354">++</span>&nbsp;<span class="op" id="1173357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173364">tt</span><span class="op" id="1173366">(</span><span class="ident" id="1173367">t</span><span class="op" id="1173368">,</span>&nbsp;<span class="ident" id="1173370">unsafe</span><span class="op" id="1173376">.</span><span class="ident" id="1173377">Pointer</span><span class="op" id="1173384">(</span><span class="op" id="1173385">&amp;</span><span class="ident" id="1173386">val</span><span class="op" id="1173389">)</span><span class="op" id="1173390">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173402">c</span>&nbsp;<span class="op" id="1173404">&lt;-</span>&nbsp;<span class="num" id="1173407">1</span><br>
<span class="lineno">1255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173412">}</span><span class="op" id="1173413">(</span><span class="op" id="1173414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173422">for</span>&nbsp;<span class="ident" id="1173426">p</span>&nbsp;<span class="op" id="1173428">:=</span>&nbsp;<span class="num" id="1173431">0</span><span class="op" id="1173432">;</span>&nbsp;<span class="ident" id="1173434">p</span>&nbsp;<span class="op" id="1173436">&lt;</span>&nbsp;<span class="ident" id="1173438">procs</span><span class="op" id="1173443">;</span>&nbsp;<span class="ident" id="1173445">p</span><span class="op" id="1173446">++</span>&nbsp;<span class="op" id="1173449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173454">&lt;-</span><span class="ident" id="1173456">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173460">}</span><br>
<span class="lineno">1260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173463">}</span><br>
<span class="lineno"></span><span class="op" id="1173465">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1173468">func</span>&nbsp;<span class="ident" id="1173473">TestStoreLoadSeqCst32</span><span class="op" id="1173494">(</span><span class="ident" id="1173495">t</span>&nbsp;<span class="op" id="1173497">*</span><span class="ident" id="1173498">testing</span><span class="op" id="1173505">.</span><span class="ident" id="1173506">T</span><span class="op" id="1173507">)</span>&nbsp;<span class="op" id="1173509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173512">if</span>&nbsp;<span class="ident" id="1173515">runtime</span><span class="op" id="1173522">.</span><span class="ident" id="1173523">NumCPU</span><span class="op" id="1173529">(</span><span class="op" id="1173530">)</span>&nbsp;<span class="op" id="1173532">==</span>&nbsp;<span class="num" id="1173535">1</span>&nbsp;<span class="op" id="1173537">{</span><br>
<span class="lineno">1265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173541">t</span><span class="op" id="1173542">.</span><span class="ident" id="1173543">Skipf</span><span class="op" id="1173548">(</span><span class="string" id="1173549">&#34;Skipping&nbsp;test&nbsp;on&nbsp;%v&nbsp;processor&nbsp;machine&#34;</span><span class="op" id="1173588">,</span>&nbsp;<span class="ident" id="1173590">runtime</span><span class="op" id="1173597">.</span><span class="ident" id="1173598">NumCPU</span><span class="op" id="1173604">(</span><span class="op" id="1173605">)</span><span class="op" id="1173606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173609">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173612">defer</span>&nbsp;<span class="ident" id="1173618">runtime</span><span class="op" id="1173625">.</span><span class="ident" id="1173626">GOMAXPROCS</span><span class="op" id="1173636">(</span><span class="ident" id="1173637">runtime</span><span class="op" id="1173644">.</span><span class="ident" id="1173645">GOMAXPROCS</span><span class="op" id="1173655">(</span><span class="num" id="1173656">4</span><span class="op" id="1173657">)</span><span class="op" id="1173658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173661">N</span>&nbsp;<span class="op" id="1173663">:=</span>&nbsp;<span class="builtintype" id="1173666">int32</span><span class="op" id="1173671">(</span><span class="num" id="1173672">1e3</span><span class="op" id="1173675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173678">if</span>&nbsp;<span class="ident" id="1173681">testing</span><span class="op" id="1173688">.</span><span class="ident" id="1173689">Short</span><span class="op" id="1173694">(</span><span class="op" id="1173695">)</span>&nbsp;<span class="op" id="1173697">{</span><br>
<span class="lineno">1270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173701">N</span>&nbsp;<span class="op" id="1173703">=</span>&nbsp;<span class="builtintype" id="1173705">int32</span><span class="op" id="1173710">(</span><span class="num" id="1173711">1e2</span><span class="op" id="1173714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1173717">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173720">c</span>&nbsp;<span class="op" id="1173722">:=</span>&nbsp;<span class="builtinfunc" id="1173725">make</span><span class="op" id="1173729">(</span><span class="keyword" id="1173730">chan</span>&nbsp;<span class="builtintype" id="1173735">bool</span><span class="op" id="1173739">,</span>&nbsp;<span class="num" id="1173741">2</span><span class="op" id="1173742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173745">X</span>&nbsp;<span class="op" id="1173747">:=</span>&nbsp;<span class="op" id="1173750">[</span><span class="num" id="1173751">2</span><span class="op" id="1173752">]</span><span class="builtintype" id="1173753">int32</span><span class="op" id="1173758">{</span><span class="op" id="1173759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173762">ack</span>&nbsp;<span class="op" id="1173766">:=</span>&nbsp;<span class="op" id="1173769">[</span><span class="num" id="1173770">2</span><span class="op" id="1173771">]</span><span class="op" id="1173772">[</span><span class="num" id="1173773">3</span><span class="op" id="1173774">]</span><span class="builtintype" id="1173775">int32</span><span class="op" id="1173780">{</span><span class="op" id="1173781">{</span><span class="op" id="1173782">-</span><span class="num" id="1173783">1</span><span class="op" id="1173784">,</span>&nbsp;<span class="op" id="1173786">-</span><span class="num" id="1173787">1</span><span class="op" id="1173788">,</span>&nbsp;<span class="op" id="1173790">-</span><span class="num" id="1173791">1</span><span class="op" id="1173792">}</span><span class="op" id="1173793">,</span>&nbsp;<span class="op" id="1173795">{</span><span class="op" id="1173796">-</span><span class="num" id="1173797">1</span><span class="op" id="1173798">,</span>&nbsp;<span class="op" id="1173800">-</span><span class="num" id="1173801">1</span><span class="op" id="1173802">,</span>&nbsp;<span class="op" id="1173804">-</span><span class="num" id="1173805">1</span><span class="op" id="1173806">}</span><span class="op" id="1173807">}</span><br>
<span class="lineno">1275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173810">for</span>&nbsp;<span class="ident" id="1173814">p</span>&nbsp;<span class="op" id="1173816">:=</span>&nbsp;<span class="num" id="1173819">0</span><span class="op" id="1173820">;</span>&nbsp;<span class="ident" id="1173822">p</span>&nbsp;<span class="op" id="1173824">&lt;</span>&nbsp;<span class="num" id="1173826">2</span><span class="op" id="1173827">;</span>&nbsp;<span class="ident" id="1173829">p</span><span class="op" id="1173830">++</span>&nbsp;<span class="op" id="1173833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173837">go</span>&nbsp;<span class="keyword" id="1173840">func</span><span class="op" id="1173844">(</span><span class="ident" id="1173845">me</span>&nbsp;<span class="builtintype" id="1173848">int</span><span class="op" id="1173851">)</span>&nbsp;<span class="op" id="1173853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173858">he</span>&nbsp;<span class="op" id="1173861">:=</span>&nbsp;<span class="num" id="1173864">1</span>&nbsp;<span class="op" id="1173866">-</span>&nbsp;<span class="ident" id="1173868">me</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173874">for</span>&nbsp;<span class="ident" id="1173878">i</span>&nbsp;<span class="op" id="1173880">:=</span>&nbsp;<span class="builtintype" id="1173883">int32</span><span class="op" id="1173888">(</span><span class="num" id="1173889">1</span><span class="op" id="1173890">)</span><span class="op" id="1173891">;</span>&nbsp;<span class="ident" id="1173893">i</span>&nbsp;<span class="op" id="1173895">&lt;</span>&nbsp;<span class="ident" id="1173897">N</span><span class="op" id="1173898">;</span>&nbsp;<span class="ident" id="1173900">i</span><span class="op" id="1173901">++</span>&nbsp;<span class="op" id="1173904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173910">StoreInt32</span><span class="op" id="1173920">(</span><span class="op" id="1173921">&amp;</span><span class="ident" id="1173922">X</span><span class="op" id="1173923">[</span><span class="ident" id="1173924">me</span><span class="op" id="1173926">]</span><span class="op" id="1173927">,</span>&nbsp;<span class="ident" id="1173929">i</span><span class="op" id="1173930">)</span><br>
<span class="lineno">1280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173936">my</span>&nbsp;<span class="op" id="1173939">:=</span>&nbsp;<span class="ident" id="1173942">LoadInt32</span><span class="op" id="1173951">(</span><span class="op" id="1173952">&amp;</span><span class="ident" id="1173953">X</span><span class="op" id="1173954">[</span><span class="ident" id="1173955">he</span><span class="op" id="1173957">]</span><span class="op" id="1173958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1173964">StoreInt32</span><span class="op" id="1173974">(</span><span class="op" id="1173975">&amp;</span><span class="ident" id="1173976">ack</span><span class="op" id="1173979">[</span><span class="ident" id="1173980">me</span><span class="op" id="1173982">]</span><span class="op" id="1173983">[</span><span class="ident" id="1173984">i</span><span class="op" id="1173985">%</span><span class="num" id="1173986">3</span><span class="op" id="1173987">]</span><span class="op" id="1173988">,</span>&nbsp;<span class="ident" id="1173990">my</span><span class="op" id="1173992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1173998">for</span>&nbsp;<span class="ident" id="1174002">w</span>&nbsp;<span class="op" id="1174004">:=</span>&nbsp;<span class="num" id="1174007">1</span><span class="op" id="1174008">;</span>&nbsp;<span class="ident" id="1174010">LoadInt32</span><span class="op" id="1174019">(</span><span class="op" id="1174020">&amp;</span><span class="ident" id="1174021">ack</span><span class="op" id="1174024">[</span><span class="ident" id="1174025">he</span><span class="op" id="1174027">]</span><span class="op" id="1174028">[</span><span class="ident" id="1174029">i</span><span class="op" id="1174030">%</span><span class="num" id="1174031">3</span><span class="op" id="1174032">]</span><span class="op" id="1174033">)</span>&nbsp;<span class="op" id="1174035">==</span>&nbsp;<span class="op" id="1174038">-</span><span class="num" id="1174039">1</span><span class="op" id="1174040">;</span>&nbsp;<span class="ident" id="1174042">w</span><span class="op" id="1174043">++</span>&nbsp;<span class="op" id="1174046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174053">if</span>&nbsp;<span class="ident" id="1174056">w</span><span class="op" id="1174057">%</span><span class="num" id="1174058">1000</span>&nbsp;<span class="op" id="1174063">==</span>&nbsp;<span class="num" id="1174066">0</span>&nbsp;<span class="op" id="1174068">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174076">runtime</span><span class="op" id="1174083">.</span><span class="ident" id="1174084">Gosched</span><span class="op" id="1174091">(</span><span class="op" id="1174092">)</span><br>
<span class="lineno">1285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174099">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174111">his</span>&nbsp;<span class="op" id="1174115">:=</span>&nbsp;<span class="ident" id="1174118">LoadInt32</span><span class="op" id="1174127">(</span><span class="op" id="1174128">&amp;</span><span class="ident" id="1174129">ack</span><span class="op" id="1174132">[</span><span class="ident" id="1174133">he</span><span class="op" id="1174135">]</span><span class="op" id="1174136">[</span><span class="ident" id="1174137">i</span><span class="op" id="1174138">%</span><span class="num" id="1174139">3</span><span class="op" id="1174140">]</span><span class="op" id="1174141">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174147">if</span>&nbsp;<span class="op" id="1174150">(</span><span class="ident" id="1174151">my</span>&nbsp;<span class="op" id="1174154">!=</span>&nbsp;<span class="ident" id="1174157">i</span>&nbsp;<span class="op" id="1174159">&amp;&amp;</span>&nbsp;<span class="ident" id="1174162">my</span>&nbsp;<span class="op" id="1174165">!=</span>&nbsp;<span class="ident" id="1174168">i</span><span class="op" id="1174169">-</span><span class="num" id="1174170">1</span><span class="op" id="1174171">)</span>&nbsp;<span class="op" id="1174173">||</span>&nbsp;<span class="op" id="1174176">(</span><span class="ident" id="1174177">his</span>&nbsp;<span class="op" id="1174181">!=</span>&nbsp;<span class="ident" id="1174184">i</span>&nbsp;<span class="op" id="1174186">&amp;&amp;</span>&nbsp;<span class="ident" id="1174189">his</span>&nbsp;<span class="op" id="1174193">!=</span>&nbsp;<span class="ident" id="1174196">i</span><span class="op" id="1174197">-</span><span class="num" id="1174198">1</span><span class="op" id="1174199">)</span>&nbsp;<span class="op" id="1174201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174208">t</span><span class="op" id="1174209">.</span><span class="ident" id="1174210">Fatalf</span><span class="op" id="1174216">(</span><span class="string" id="1174217">&#34;invalid&nbsp;values:&nbsp;%d/%d&nbsp;(%d)&#34;</span><span class="op" id="1174245">,</span>&nbsp;<span class="ident" id="1174247">my</span><span class="op" id="1174249">,</span>&nbsp;<span class="ident" id="1174251">his</span><span class="op" id="1174254">,</span>&nbsp;<span class="ident" id="1174256">i</span><span class="op" id="1174257">)</span><br>
<span class="lineno">1290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174263">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174269">if</span>&nbsp;<span class="ident" id="1174272">my</span>&nbsp;<span class="op" id="1174275">!=</span>&nbsp;<span class="ident" id="1174278">i</span>&nbsp;<span class="op" id="1174280">&amp;&amp;</span>&nbsp;<span class="ident" id="1174283">his</span>&nbsp;<span class="op" id="1174287">!=</span>&nbsp;<span class="ident" id="1174290">i</span>&nbsp;<span class="op" id="1174292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174299">t</span><span class="op" id="1174300">.</span><span class="ident" id="1174301">Fatalf</span><span class="op" id="1174307">(</span><span class="string" id="1174308">&#34;store/load&nbsp;are&nbsp;not&nbsp;sequentially&nbsp;consistent:&nbsp;%d/%d&nbsp;(%d)&#34;</span><span class="op" id="1174364">,</span>&nbsp;<span class="ident" id="1174366">my</span><span class="op" id="1174368">,</span>&nbsp;<span class="ident" id="1174370">his</span><span class="op" id="1174373">,</span>&nbsp;<span class="ident" id="1174375">i</span><span class="op" id="1174376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174382">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174388">StoreInt32</span><span class="op" id="1174398">(</span><span class="op" id="1174399">&amp;</span><span class="ident" id="1174400">ack</span><span class="op" id="1174403">[</span><span class="ident" id="1174404">me</span><span class="op" id="1174406">]</span><span class="op" id="1174407">[</span><span class="op" id="1174408">(</span><span class="ident" id="1174409">i</span><span class="op" id="1174410">-</span><span class="num" id="1174411">1</span><span class="op" id="1174412">)</span><span class="op" id="1174413">%</span><span class="num" id="1174414">3</span><span class="op" id="1174415">]</span><span class="op" id="1174416">,</span>&nbsp;<span class="op" id="1174418">-</span><span class="num" id="1174419">1</span><span class="op" id="1174420">)</span><br>
<span class="lineno">1295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174425">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174430">c</span>&nbsp;<span class="op" id="1174432">&lt;-</span>&nbsp;<span class="builtintype" id="1174435">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174442">}</span><span class="op" id="1174443">(</span><span class="ident" id="1174444">p</span><span class="op" id="1174445">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174448">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174451">&lt;-</span><span class="ident" id="1174453">c</span><br>
<span class="lineno">1300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174456">&lt;-</span><span class="ident" id="1174458">c</span><br>
<span class="lineno"></span><span class="op" id="1174460">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1174463">func</span>&nbsp;<span class="ident" id="1174468">TestStoreLoadSeqCst64</span><span class="op" id="1174489">(</span><span class="ident" id="1174490">t</span>&nbsp;<span class="op" id="1174492">*</span><span class="ident" id="1174493">testing</span><span class="op" id="1174500">.</span><span class="ident" id="1174501">T</span><span class="op" id="1174502">)</span>&nbsp;<span class="op" id="1174504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174507">if</span>&nbsp;<span class="ident" id="1174510">runtime</span><span class="op" id="1174517">.</span><span class="ident" id="1174518">NumCPU</span><span class="op" id="1174524">(</span><span class="op" id="1174525">)</span>&nbsp;<span class="op" id="1174527">==</span>&nbsp;<span class="num" id="1174530">1</span>&nbsp;<span class="op" id="1174532">{</span><br>
<span class="lineno">1305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174536">t</span><span class="op" id="1174537">.</span><span class="ident" id="1174538">Skipf</span><span class="op" id="1174543">(</span><span class="string" id="1174544">&#34;Skipping&nbsp;test&nbsp;on&nbsp;%v&nbsp;processor&nbsp;machine&#34;</span><span class="op" id="1174583">,</span>&nbsp;<span class="ident" id="1174585">runtime</span><span class="op" id="1174592">.</span><span class="ident" id="1174593">NumCPU</span><span class="op" id="1174599">(</span><span class="op" id="1174600">)</span><span class="op" id="1174601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174604">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174607">if</span>&nbsp;<span class="ident" id="1174610">test64err</span>&nbsp;<span class="op" id="1174620">!=</span>&nbsp;<span class="ident" id="1174623">nil</span>&nbsp;<span class="op" id="1174627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174631">t</span><span class="op" id="1174632">.</span><span class="ident" id="1174633">Skipf</span><span class="op" id="1174638">(</span><span class="string" id="1174639">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1174666">,</span>&nbsp;<span class="ident" id="1174668">test64err</span><span class="op" id="1174677">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174680">}</span><br>
<span class="lineno">1310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174683">defer</span>&nbsp;<span class="ident" id="1174689">runtime</span><span class="op" id="1174696">.</span><span class="ident" id="1174697">GOMAXPROCS</span><span class="op" id="1174707">(</span><span class="ident" id="1174708">runtime</span><span class="op" id="1174715">.</span><span class="ident" id="1174716">GOMAXPROCS</span><span class="op" id="1174726">(</span><span class="num" id="1174727">4</span><span class="op" id="1174728">)</span><span class="op" id="1174729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174732">N</span>&nbsp;<span class="op" id="1174734">:=</span>&nbsp;<span class="ident" id="1174737">int64</span><span class="op" id="1174742">(</span><span class="num" id="1174743">1e3</span><span class="op" id="1174746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174749">if</span>&nbsp;<span class="ident" id="1174752">testing</span><span class="op" id="1174759">.</span><span class="ident" id="1174760">Short</span><span class="op" id="1174765">(</span><span class="op" id="1174766">)</span>&nbsp;<span class="op" id="1174768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174772">N</span>&nbsp;<span class="op" id="1174774">=</span>&nbsp;<span class="ident" id="1174776">int64</span><span class="op" id="1174781">(</span><span class="num" id="1174782">1e2</span><span class="op" id="1174785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1174788">}</span><br>
<span class="lineno">1315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174791">c</span>&nbsp;<span class="op" id="1174793">:=</span>&nbsp;<span class="builtinfunc" id="1174796">make</span><span class="op" id="1174800">(</span><span class="keyword" id="1174801">chan</span>&nbsp;<span class="builtintype" id="1174806">bool</span><span class="op" id="1174810">,</span>&nbsp;<span class="num" id="1174812">2</span><span class="op" id="1174813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174816">X</span>&nbsp;<span class="op" id="1174818">:=</span>&nbsp;<span class="op" id="1174821">[</span><span class="num" id="1174822">2</span><span class="op" id="1174823">]</span><span class="ident" id="1174824">int64</span><span class="op" id="1174829">{</span><span class="op" id="1174830">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174833">ack</span>&nbsp;<span class="op" id="1174837">:=</span>&nbsp;<span class="op" id="1174840">[</span><span class="num" id="1174841">2</span><span class="op" id="1174842">]</span><span class="op" id="1174843">[</span><span class="num" id="1174844">3</span><span class="op" id="1174845">]</span><span class="ident" id="1174846">int64</span><span class="op" id="1174851">{</span><span class="op" id="1174852">{</span><span class="op" id="1174853">-</span><span class="num" id="1174854">1</span><span class="op" id="1174855">,</span>&nbsp;<span class="op" id="1174857">-</span><span class="num" id="1174858">1</span><span class="op" id="1174859">,</span>&nbsp;<span class="op" id="1174861">-</span><span class="num" id="1174862">1</span><span class="op" id="1174863">}</span><span class="op" id="1174864">,</span>&nbsp;<span class="op" id="1174866">{</span><span class="op" id="1174867">-</span><span class="num" id="1174868">1</span><span class="op" id="1174869">,</span>&nbsp;<span class="op" id="1174871">-</span><span class="num" id="1174872">1</span><span class="op" id="1174873">,</span>&nbsp;<span class="op" id="1174875">-</span><span class="num" id="1174876">1</span><span class="op" id="1174877">}</span><span class="op" id="1174878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174881">for</span>&nbsp;<span class="ident" id="1174885">p</span>&nbsp;<span class="op" id="1174887">:=</span>&nbsp;<span class="num" id="1174890">0</span><span class="op" id="1174891">;</span>&nbsp;<span class="ident" id="1174893">p</span>&nbsp;<span class="op" id="1174895">&lt;</span>&nbsp;<span class="num" id="1174897">2</span><span class="op" id="1174898">;</span>&nbsp;<span class="ident" id="1174900">p</span><span class="op" id="1174901">++</span>&nbsp;<span class="op" id="1174904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174908">go</span>&nbsp;<span class="keyword" id="1174911">func</span><span class="op" id="1174915">(</span><span class="ident" id="1174916">me</span>&nbsp;<span class="builtintype" id="1174919">int</span><span class="op" id="1174922">)</span>&nbsp;<span class="op" id="1174924">{</span><br>
<span class="lineno">1320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174929">he</span>&nbsp;<span class="op" id="1174932">:=</span>&nbsp;<span class="num" id="1174935">1</span>&nbsp;<span class="op" id="1174937">-</span>&nbsp;<span class="ident" id="1174939">me</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1174945">for</span>&nbsp;<span class="ident" id="1174949">i</span>&nbsp;<span class="op" id="1174951">:=</span>&nbsp;<span class="ident" id="1174954">int64</span><span class="op" id="1174959">(</span><span class="num" id="1174960">1</span><span class="op" id="1174961">)</span><span class="op" id="1174962">;</span>&nbsp;<span class="ident" id="1174964">i</span>&nbsp;<span class="op" id="1174966">&lt;</span>&nbsp;<span class="ident" id="1174968">N</span><span class="op" id="1174969">;</span>&nbsp;<span class="ident" id="1174971">i</span><span class="op" id="1174972">++</span>&nbsp;<span class="op" id="1174975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1174981">StoreInt64</span><span class="op" id="1174991">(</span><span class="op" id="1174992">&amp;</span><span class="ident" id="1174993">X</span><span class="op" id="1174994">[</span><span class="ident" id="1174995">me</span><span class="op" id="1174997">]</span><span class="op" id="1174998">,</span>&nbsp;<span class="ident" id="1175000">i</span><span class="op" id="1175001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175007">my</span>&nbsp;<span class="op" id="1175010">:=</span>&nbsp;<span class="ident" id="1175013">LoadInt64</span><span class="op" id="1175022">(</span><span class="op" id="1175023">&amp;</span><span class="ident" id="1175024">X</span><span class="op" id="1175025">[</span><span class="ident" id="1175026">he</span><span class="op" id="1175028">]</span><span class="op" id="1175029">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175035">StoreInt64</span><span class="op" id="1175045">(</span><span class="op" id="1175046">&amp;</span><span class="ident" id="1175047">ack</span><span class="op" id="1175050">[</span><span class="ident" id="1175051">me</span><span class="op" id="1175053">]</span><span class="op" id="1175054">[</span><span class="ident" id="1175055">i</span><span class="op" id="1175056">%</span><span class="num" id="1175057">3</span><span class="op" id="1175058">]</span><span class="op" id="1175059">,</span>&nbsp;<span class="ident" id="1175061">my</span><span class="op" id="1175063">)</span><br>
<span class="lineno">1325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175069">for</span>&nbsp;<span class="ident" id="1175073">w</span>&nbsp;<span class="op" id="1175075">:=</span>&nbsp;<span class="num" id="1175078">1</span><span class="op" id="1175079">;</span>&nbsp;<span class="ident" id="1175081">LoadInt64</span><span class="op" id="1175090">(</span><span class="op" id="1175091">&amp;</span><span class="ident" id="1175092">ack</span><span class="op" id="1175095">[</span><span class="ident" id="1175096">he</span><span class="op" id="1175098">]</span><span class="op" id="1175099">[</span><span class="ident" id="1175100">i</span><span class="op" id="1175101">%</span><span class="num" id="1175102">3</span><span class="op" id="1175103">]</span><span class="op" id="1175104">)</span>&nbsp;<span class="op" id="1175106">==</span>&nbsp;<span class="op" id="1175109">-</span><span class="num" id="1175110">1</span><span class="op" id="1175111">;</span>&nbsp;<span class="ident" id="1175113">w</span><span class="op" id="1175114">++</span>&nbsp;<span class="op" id="1175117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175124">if</span>&nbsp;<span class="ident" id="1175127">w</span><span class="op" id="1175128">%</span><span class="num" id="1175129">1000</span>&nbsp;<span class="op" id="1175134">==</span>&nbsp;<span class="num" id="1175137">0</span>&nbsp;<span class="op" id="1175139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175147">runtime</span><span class="op" id="1175154">.</span><span class="ident" id="1175155">Gosched</span><span class="op" id="1175162">(</span><span class="op" id="1175163">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175170">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175176">}</span><br>
<span class="lineno">1330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175182">his</span>&nbsp;<span class="op" id="1175186">:=</span>&nbsp;<span class="ident" id="1175189">LoadInt64</span><span class="op" id="1175198">(</span><span class="op" id="1175199">&amp;</span><span class="ident" id="1175200">ack</span><span class="op" id="1175203">[</span><span class="ident" id="1175204">he</span><span class="op" id="1175206">]</span><span class="op" id="1175207">[</span><span class="ident" id="1175208">i</span><span class="op" id="1175209">%</span><span class="num" id="1175210">3</span><span class="op" id="1175211">]</span><span class="op" id="1175212">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175218">if</span>&nbsp;<span class="op" id="1175221">(</span><span class="ident" id="1175222">my</span>&nbsp;<span class="op" id="1175225">!=</span>&nbsp;<span class="ident" id="1175228">i</span>&nbsp;<span class="op" id="1175230">&amp;&amp;</span>&nbsp;<span class="ident" id="1175233">my</span>&nbsp;<span class="op" id="1175236">!=</span>&nbsp;<span class="ident" id="1175239">i</span><span class="op" id="1175240">-</span><span class="num" id="1175241">1</span><span class="op" id="1175242">)</span>&nbsp;<span class="op" id="1175244">||</span>&nbsp;<span class="op" id="1175247">(</span><span class="ident" id="1175248">his</span>&nbsp;<span class="op" id="1175252">!=</span>&nbsp;<span class="ident" id="1175255">i</span>&nbsp;<span class="op" id="1175257">&amp;&amp;</span>&nbsp;<span class="ident" id="1175260">his</span>&nbsp;<span class="op" id="1175264">!=</span>&nbsp;<span class="ident" id="1175267">i</span><span class="op" id="1175268">-</span><span class="num" id="1175269">1</span><span class="op" id="1175270">)</span>&nbsp;<span class="op" id="1175272">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175279">t</span><span class="op" id="1175280">.</span><span class="ident" id="1175281">Fatalf</span><span class="op" id="1175287">(</span><span class="string" id="1175288">&#34;invalid&nbsp;values:&nbsp;%d/%d&nbsp;(%d)&#34;</span><span class="op" id="1175316">,</span>&nbsp;<span class="ident" id="1175318">my</span><span class="op" id="1175320">,</span>&nbsp;<span class="ident" id="1175322">his</span><span class="op" id="1175325">,</span>&nbsp;<span class="ident" id="1175327">i</span><span class="op" id="1175328">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175334">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175340">if</span>&nbsp;<span class="ident" id="1175343">my</span>&nbsp;<span class="op" id="1175346">!=</span>&nbsp;<span class="ident" id="1175349">i</span>&nbsp;<span class="op" id="1175351">&amp;&amp;</span>&nbsp;<span class="ident" id="1175354">his</span>&nbsp;<span class="op" id="1175358">!=</span>&nbsp;<span class="ident" id="1175361">i</span>&nbsp;<span class="op" id="1175363">{</span><br>
<span class="lineno">1335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175370">t</span><span class="op" id="1175371">.</span><span class="ident" id="1175372">Fatalf</span><span class="op" id="1175378">(</span><span class="string" id="1175379">&#34;store/load&nbsp;are&nbsp;not&nbsp;sequentially&nbsp;consistent:&nbsp;%d/%d&nbsp;(%d)&#34;</span><span class="op" id="1175435">,</span>&nbsp;<span class="ident" id="1175437">my</span><span class="op" id="1175439">,</span>&nbsp;<span class="ident" id="1175441">his</span><span class="op" id="1175444">,</span>&nbsp;<span class="ident" id="1175446">i</span><span class="op" id="1175447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175459">StoreInt64</span><span class="op" id="1175469">(</span><span class="op" id="1175470">&amp;</span><span class="ident" id="1175471">ack</span><span class="op" id="1175474">[</span><span class="ident" id="1175475">me</span><span class="op" id="1175477">]</span><span class="op" id="1175478">[</span><span class="op" id="1175479">(</span><span class="ident" id="1175480">i</span><span class="op" id="1175481">-</span><span class="num" id="1175482">1</span><span class="op" id="1175483">)</span><span class="op" id="1175484">%</span><span class="num" id="1175485">3</span><span class="op" id="1175486">]</span><span class="op" id="1175487">,</span>&nbsp;<span class="op" id="1175489">-</span><span class="num" id="1175490">1</span><span class="op" id="1175491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175496">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175501">c</span>&nbsp;<span class="op" id="1175503">&lt;-</span>&nbsp;<span class="builtintype" id="1175506">true</span><br>
<span class="lineno">1340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175513">}</span><span class="op" id="1175514">(</span><span class="ident" id="1175515">p</span><span class="op" id="1175516">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175522">&lt;-</span><span class="ident" id="1175524">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175527">&lt;-</span><span class="ident" id="1175529">c</span><br>
<span class="lineno"></span><span class="op" id="1175531">}</span><br>
<span class="lineno">1345</span><br>
<span class="lineno"></span><span class="keyword" id="1175534">func</span>&nbsp;<span class="ident" id="1175539">TestStoreLoadRelAcq32</span><span class="op" id="1175560">(</span><span class="ident" id="1175561">t</span>&nbsp;<span class="op" id="1175563">*</span><span class="ident" id="1175564">testing</span><span class="op" id="1175571">.</span><span class="ident" id="1175572">T</span><span class="op" id="1175573">)</span>&nbsp;<span class="op" id="1175575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175578">if</span>&nbsp;<span class="ident" id="1175581">runtime</span><span class="op" id="1175588">.</span><span class="ident" id="1175589">NumCPU</span><span class="op" id="1175595">(</span><span class="op" id="1175596">)</span>&nbsp;<span class="op" id="1175598">==</span>&nbsp;<span class="num" id="1175601">1</span>&nbsp;<span class="op" id="1175603">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175607">t</span><span class="op" id="1175608">.</span><span class="ident" id="1175609">Skipf</span><span class="op" id="1175614">(</span><span class="string" id="1175615">&#34;Skipping&nbsp;test&nbsp;on&nbsp;%v&nbsp;processor&nbsp;machine&#34;</span><span class="op" id="1175654">,</span>&nbsp;<span class="ident" id="1175656">runtime</span><span class="op" id="1175663">.</span><span class="ident" id="1175664">NumCPU</span><span class="op" id="1175670">(</span><span class="op" id="1175671">)</span><span class="op" id="1175672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175675">}</span><br>
<span class="lineno">1350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175678">defer</span>&nbsp;<span class="ident" id="1175684">runtime</span><span class="op" id="1175691">.</span><span class="ident" id="1175692">GOMAXPROCS</span><span class="op" id="1175702">(</span><span class="ident" id="1175703">runtime</span><span class="op" id="1175710">.</span><span class="ident" id="1175711">GOMAXPROCS</span><span class="op" id="1175721">(</span><span class="num" id="1175722">4</span><span class="op" id="1175723">)</span><span class="op" id="1175724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175727">N</span>&nbsp;<span class="op" id="1175729">:=</span>&nbsp;<span class="builtintype" id="1175732">int32</span><span class="op" id="1175737">(</span><span class="num" id="1175738">1e3</span><span class="op" id="1175741">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175744">if</span>&nbsp;<span class="ident" id="1175747">testing</span><span class="op" id="1175754">.</span><span class="ident" id="1175755">Short</span><span class="op" id="1175760">(</span><span class="op" id="1175761">)</span>&nbsp;<span class="op" id="1175763">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175767">N</span>&nbsp;<span class="op" id="1175769">=</span>&nbsp;<span class="builtintype" id="1175771">int32</span><span class="op" id="1175776">(</span><span class="num" id="1175777">1e2</span><span class="op" id="1175780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175783">}</span><br>
<span class="lineno">1355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175786">c</span>&nbsp;<span class="op" id="1175788">:=</span>&nbsp;<span class="builtinfunc" id="1175791">make</span><span class="op" id="1175795">(</span><span class="keyword" id="1175796">chan</span>&nbsp;<span class="builtintype" id="1175801">bool</span><span class="op" id="1175805">,</span>&nbsp;<span class="num" id="1175807">2</span><span class="op" id="1175808">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175811">type</span>&nbsp;<span class="ident" id="1175816">Data</span>&nbsp;<span class="keyword" id="1175821">struct</span>&nbsp;<span class="op" id="1175828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175832">signal</span>&nbsp;<span class="builtintype" id="1175839">int32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175847">pad1</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1175854">[</span><span class="num" id="1175855">128</span><span class="op" id="1175858">]</span><span class="builtintype" id="1175859">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175866">data1</span>&nbsp;&nbsp;<span class="builtintype" id="1175873">int32</span><br>
<span class="lineno">1360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175881">pad2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1175888">[</span><span class="num" id="1175889">128</span><span class="op" id="1175892">]</span><span class="builtintype" id="1175893">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1175900">data2</span>&nbsp;&nbsp;<span class="builtintype" id="1175907">float32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1175916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175919">var</span>&nbsp;<span class="ident" id="1175923">X</span>&nbsp;<span class="ident" id="1175925">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175931">for</span>&nbsp;<span class="ident" id="1175935">p</span>&nbsp;<span class="op" id="1175937">:=</span>&nbsp;<span class="builtintype" id="1175940">int32</span><span class="op" id="1175945">(</span><span class="num" id="1175946">0</span><span class="op" id="1175947">)</span><span class="op" id="1175948">;</span>&nbsp;<span class="ident" id="1175950">p</span>&nbsp;<span class="op" id="1175952">&lt;</span>&nbsp;<span class="num" id="1175954">2</span><span class="op" id="1175955">;</span>&nbsp;<span class="ident" id="1175957">p</span><span class="op" id="1175958">++</span>&nbsp;<span class="op" id="1175961">{</span><br>
<span class="lineno">1365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175965">go</span>&nbsp;<span class="keyword" id="1175968">func</span><span class="op" id="1175972">(</span><span class="ident" id="1175973">p</span>&nbsp;<span class="builtintype" id="1175975">int32</span><span class="op" id="1175980">)</span>&nbsp;<span class="op" id="1175982">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1175987">for</span>&nbsp;<span class="ident" id="1175991">i</span>&nbsp;<span class="op" id="1175993">:=</span>&nbsp;<span class="builtintype" id="1175996">int32</span><span class="op" id="1176001">(</span><span class="num" id="1176002">1</span><span class="op" id="1176003">)</span><span class="op" id="1176004">;</span>&nbsp;<span class="ident" id="1176006">i</span>&nbsp;<span class="op" id="1176008">&lt;</span>&nbsp;<span class="ident" id="1176010">N</span><span class="op" id="1176011">;</span>&nbsp;<span class="ident" id="1176013">i</span><span class="op" id="1176014">++</span>&nbsp;<span class="op" id="1176017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176023">if</span>&nbsp;<span class="op" id="1176026">(</span><span class="ident" id="1176027">i</span><span class="op" id="1176028">+</span><span class="ident" id="1176029">p</span><span class="op" id="1176030">)</span><span class="op" id="1176031">%</span><span class="num" id="1176032">2</span>&nbsp;<span class="op" id="1176034">==</span>&nbsp;<span class="num" id="1176037">0</span>&nbsp;<span class="op" id="1176039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176046">X</span><span class="op" id="1176047">.</span><span class="ident" id="1176048">data1</span>&nbsp;<span class="op" id="1176054">=</span>&nbsp;<span class="ident" id="1176056">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176063">X</span><span class="op" id="1176064">.</span><span class="ident" id="1176065">data2</span>&nbsp;<span class="op" id="1176071">=</span>&nbsp;<span class="builtintype" id="1176073">float32</span><span class="op" id="1176080">(</span><span class="ident" id="1176081">i</span><span class="op" id="1176082">)</span><br>
<span class="lineno">1370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176089">StoreInt32</span><span class="op" id="1176099">(</span><span class="op" id="1176100">&amp;</span><span class="ident" id="1176101">X</span><span class="op" id="1176102">.</span><span class="ident" id="1176103">signal</span><span class="op" id="1176109">,</span>&nbsp;<span class="ident" id="1176111">i</span><span class="op" id="1176112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176118">}</span>&nbsp;<span class="keyword" id="1176120">else</span>&nbsp;<span class="op" id="1176125">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176132">for</span>&nbsp;<span class="ident" id="1176136">w</span>&nbsp;<span class="op" id="1176138">:=</span>&nbsp;<span class="num" id="1176141">1</span><span class="op" id="1176142">;</span>&nbsp;<span class="ident" id="1176144">LoadInt32</span><span class="op" id="1176153">(</span><span class="op" id="1176154">&amp;</span><span class="ident" id="1176155">X</span><span class="op" id="1176156">.</span><span class="ident" id="1176157">signal</span><span class="op" id="1176163">)</span>&nbsp;<span class="op" id="1176165">!=</span>&nbsp;<span class="ident" id="1176168">i</span><span class="op" id="1176169">;</span>&nbsp;<span class="ident" id="1176171">w</span><span class="op" id="1176172">++</span>&nbsp;<span class="op" id="1176175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176183">if</span>&nbsp;<span class="ident" id="1176186">w</span><span class="op" id="1176187">%</span><span class="num" id="1176188">1000</span>&nbsp;<span class="op" id="1176193">==</span>&nbsp;<span class="num" id="1176196">0</span>&nbsp;<span class="op" id="1176198">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176207">runtime</span><span class="op" id="1176214">.</span><span class="ident" id="1176215">Gosched</span><span class="op" id="1176222">(</span><span class="op" id="1176223">)</span><br>
<span class="lineno">1375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176238">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176245">d1</span>&nbsp;<span class="op" id="1176248">:=</span>&nbsp;<span class="ident" id="1176251">X</span><span class="op" id="1176252">.</span><span class="ident" id="1176253">data1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176264">d2</span>&nbsp;<span class="op" id="1176267">:=</span>&nbsp;<span class="ident" id="1176270">X</span><span class="op" id="1176271">.</span><span class="ident" id="1176272">data2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176283">if</span>&nbsp;<span class="ident" id="1176286">d1</span>&nbsp;<span class="op" id="1176289">!=</span>&nbsp;<span class="ident" id="1176292">i</span>&nbsp;<span class="op" id="1176294">||</span>&nbsp;<span class="ident" id="1176297">d2</span>&nbsp;<span class="op" id="1176300">!=</span>&nbsp;<span class="builtintype" id="1176303">float32</span><span class="op" id="1176310">(</span><span class="ident" id="1176311">i</span><span class="op" id="1176312">)</span>&nbsp;<span class="op" id="1176314">{</span><br>
<span class="lineno">1380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176322">t</span><span class="op" id="1176323">.</span><span class="ident" id="1176324">Fatalf</span><span class="op" id="1176330">(</span><span class="string" id="1176331">&#34;incorrect&nbsp;data:&nbsp;%d/%g&nbsp;(%d)&#34;</span><span class="op" id="1176359">,</span>&nbsp;<span class="ident" id="1176361">d1</span><span class="op" id="1176363">,</span>&nbsp;<span class="ident" id="1176365">d2</span><span class="op" id="1176367">,</span>&nbsp;<span class="ident" id="1176369">i</span><span class="op" id="1176370">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176388">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176393">c</span>&nbsp;<span class="op" id="1176395">&lt;-</span>&nbsp;<span class="builtintype" id="1176398">true</span><br>
<span class="lineno">1385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176405">}</span><span class="op" id="1176406">(</span><span class="ident" id="1176407">p</span><span class="op" id="1176408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176414">&lt;-</span><span class="ident" id="1176416">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176419">&lt;-</span><span class="ident" id="1176421">c</span><br>
<span class="lineno"></span><span class="op" id="1176423">}</span><br>
<span class="lineno">1390</span><br>
<span class="lineno"></span><span class="keyword" id="1176426">func</span>&nbsp;<span class="ident" id="1176431">TestStoreLoadRelAcq64</span><span class="op" id="1176452">(</span><span class="ident" id="1176453">t</span>&nbsp;<span class="op" id="1176455">*</span><span class="ident" id="1176456">testing</span><span class="op" id="1176463">.</span><span class="ident" id="1176464">T</span><span class="op" id="1176465">)</span>&nbsp;<span class="op" id="1176467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176470">if</span>&nbsp;<span class="ident" id="1176473">runtime</span><span class="op" id="1176480">.</span><span class="ident" id="1176481">NumCPU</span><span class="op" id="1176487">(</span><span class="op" id="1176488">)</span>&nbsp;<span class="op" id="1176490">==</span>&nbsp;<span class="num" id="1176493">1</span>&nbsp;<span class="op" id="1176495">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176499">t</span><span class="op" id="1176500">.</span><span class="ident" id="1176501">Skipf</span><span class="op" id="1176506">(</span><span class="string" id="1176507">&#34;Skipping&nbsp;test&nbsp;on&nbsp;%v&nbsp;processor&nbsp;machine&#34;</span><span class="op" id="1176546">,</span>&nbsp;<span class="ident" id="1176548">runtime</span><span class="op" id="1176555">.</span><span class="ident" id="1176556">NumCPU</span><span class="op" id="1176562">(</span><span class="op" id="1176563">)</span><span class="op" id="1176564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176567">}</span><br>
<span class="lineno">1395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176570">if</span>&nbsp;<span class="ident" id="1176573">test64err</span>&nbsp;<span class="op" id="1176583">!=</span>&nbsp;<span class="ident" id="1176586">nil</span>&nbsp;<span class="op" id="1176590">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176594">t</span><span class="op" id="1176595">.</span><span class="ident" id="1176596">Skipf</span><span class="op" id="1176601">(</span><span class="string" id="1176602">&#34;Skipping&nbsp;64-bit&nbsp;tests:&nbsp;%v&#34;</span><span class="op" id="1176629">,</span>&nbsp;<span class="ident" id="1176631">test64err</span><span class="op" id="1176640">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176646">defer</span>&nbsp;<span class="ident" id="1176652">runtime</span><span class="op" id="1176659">.</span><span class="ident" id="1176660">GOMAXPROCS</span><span class="op" id="1176670">(</span><span class="ident" id="1176671">runtime</span><span class="op" id="1176678">.</span><span class="ident" id="1176679">GOMAXPROCS</span><span class="op" id="1176689">(</span><span class="num" id="1176690">4</span><span class="op" id="1176691">)</span><span class="op" id="1176692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176695">N</span>&nbsp;<span class="op" id="1176697">:=</span>&nbsp;<span class="ident" id="1176700">int64</span><span class="op" id="1176705">(</span><span class="num" id="1176706">1e3</span><span class="op" id="1176709">)</span><br>
<span class="lineno">1400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176712">if</span>&nbsp;<span class="ident" id="1176715">testing</span><span class="op" id="1176722">.</span><span class="ident" id="1176723">Short</span><span class="op" id="1176728">(</span><span class="op" id="1176729">)</span>&nbsp;<span class="op" id="1176731">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176735">N</span>&nbsp;<span class="op" id="1176737">=</span>&nbsp;<span class="ident" id="1176739">int64</span><span class="op" id="1176744">(</span><span class="num" id="1176745">1e2</span><span class="op" id="1176748">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176751">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176754">c</span>&nbsp;<span class="op" id="1176756">:=</span>&nbsp;<span class="builtinfunc" id="1176759">make</span><span class="op" id="1176763">(</span><span class="keyword" id="1176764">chan</span>&nbsp;<span class="builtintype" id="1176769">bool</span><span class="op" id="1176773">,</span>&nbsp;<span class="num" id="1176775">2</span><span class="op" id="1176776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176779">type</span>&nbsp;<span class="ident" id="1176784">Data</span>&nbsp;<span class="keyword" id="1176789">struct</span>&nbsp;<span class="op" id="1176796">{</span><br>
<span class="lineno">1405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176800">signal</span>&nbsp;<span class="ident" id="1176807">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176815">pad1</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1176822">[</span><span class="num" id="1176823">128</span><span class="op" id="1176826">]</span><span class="builtintype" id="1176827">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176834">data1</span>&nbsp;&nbsp;<span class="ident" id="1176841">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176849">pad2</span>&nbsp;&nbsp;&nbsp;<span class="op" id="1176856">[</span><span class="num" id="1176857">128</span><span class="op" id="1176860">]</span><span class="builtintype" id="1176861">int8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1176868">data2</span>&nbsp;&nbsp;<span class="builtintype" id="1176875">float64</span><br>
<span class="lineno">1410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1176884">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176887">var</span>&nbsp;<span class="ident" id="1176891">X</span>&nbsp;<span class="ident" id="1176893">Data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176899">for</span>&nbsp;<span class="ident" id="1176903">p</span>&nbsp;<span class="op" id="1176905">:=</span>&nbsp;<span class="ident" id="1176908">int64</span><span class="op" id="1176913">(</span><span class="num" id="1176914">0</span><span class="op" id="1176915">)</span><span class="op" id="1176916">;</span>&nbsp;<span class="ident" id="1176918">p</span>&nbsp;<span class="op" id="1176920">&lt;</span>&nbsp;<span class="num" id="1176922">2</span><span class="op" id="1176923">;</span>&nbsp;<span class="ident" id="1176925">p</span><span class="op" id="1176926">++</span>&nbsp;<span class="op" id="1176929">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176933">go</span>&nbsp;<span class="keyword" id="1176936">func</span><span class="op" id="1176940">(</span><span class="ident" id="1176941">p</span>&nbsp;<span class="ident" id="1176943">int64</span><span class="op" id="1176948">)</span>&nbsp;<span class="op" id="1176950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176955">for</span>&nbsp;<span class="ident" id="1176959">i</span>&nbsp;<span class="op" id="1176961">:=</span>&nbsp;<span class="ident" id="1176964">int64</span><span class="op" id="1176969">(</span><span class="num" id="1176970">1</span><span class="op" id="1176971">)</span><span class="op" id="1176972">;</span>&nbsp;<span class="ident" id="1176974">i</span>&nbsp;<span class="op" id="1176976">&lt;</span>&nbsp;<span class="ident" id="1176978">N</span><span class="op" id="1176979">;</span>&nbsp;<span class="ident" id="1176981">i</span><span class="op" id="1176982">++</span>&nbsp;<span class="op" id="1176985">{</span><br>
<span class="lineno">1415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1176991">if</span>&nbsp;<span class="op" id="1176994">(</span><span class="ident" id="1176995">i</span><span class="op" id="1176996">+</span><span class="ident" id="1176997">p</span><span class="op" id="1176998">)</span><span class="op" id="1176999">%</span><span class="num" id="1177000">2</span>&nbsp;<span class="op" id="1177002">==</span>&nbsp;<span class="num" id="1177005">0</span>&nbsp;<span class="op" id="1177007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177014">X</span><span class="op" id="1177015">.</span><span class="ident" id="1177016">data1</span>&nbsp;<span class="op" id="1177022">=</span>&nbsp;<span class="ident" id="1177024">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177031">X</span><span class="op" id="1177032">.</span><span class="ident" id="1177033">data2</span>&nbsp;<span class="op" id="1177039">=</span>&nbsp;<span class="builtintype" id="1177041">float64</span><span class="op" id="1177048">(</span><span class="ident" id="1177049">i</span><span class="op" id="1177050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177057">StoreInt64</span><span class="op" id="1177067">(</span><span class="op" id="1177068">&amp;</span><span class="ident" id="1177069">X</span><span class="op" id="1177070">.</span><span class="ident" id="1177071">signal</span><span class="op" id="1177077">,</span>&nbsp;<span class="ident" id="1177079">i</span><span class="op" id="1177080">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177086">}</span>&nbsp;<span class="keyword" id="1177088">else</span>&nbsp;<span class="op" id="1177093">{</span><br>
<span class="lineno">1420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177100">for</span>&nbsp;<span class="ident" id="1177104">w</span>&nbsp;<span class="op" id="1177106">:=</span>&nbsp;<span class="num" id="1177109">1</span><span class="op" id="1177110">;</span>&nbsp;<span class="ident" id="1177112">LoadInt64</span><span class="op" id="1177121">(</span><span class="op" id="1177122">&amp;</span><span class="ident" id="1177123">X</span><span class="op" id="1177124">.</span><span class="ident" id="1177125">signal</span><span class="op" id="1177131">)</span>&nbsp;<span class="op" id="1177133">!=</span>&nbsp;<span class="ident" id="1177136">i</span><span class="op" id="1177137">;</span>&nbsp;<span class="ident" id="1177139">w</span><span class="op" id="1177140">++</span>&nbsp;<span class="op" id="1177143">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177151">if</span>&nbsp;<span class="ident" id="1177154">w</span><span class="op" id="1177155">%</span><span class="num" id="1177156">1000</span>&nbsp;<span class="op" id="1177161">==</span>&nbsp;<span class="num" id="1177164">0</span>&nbsp;<span class="op" id="1177166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177175">runtime</span><span class="op" id="1177182">.</span><span class="ident" id="1177183">Gosched</span><span class="op" id="1177190">(</span><span class="op" id="1177191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177206">}</span><br>
<span class="lineno">1425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177213">d1</span>&nbsp;<span class="op" id="1177216">:=</span>&nbsp;<span class="ident" id="1177219">X</span><span class="op" id="1177220">.</span><span class="ident" id="1177221">data1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177232">d2</span>&nbsp;<span class="op" id="1177235">:=</span>&nbsp;<span class="ident" id="1177238">X</span><span class="op" id="1177239">.</span><span class="ident" id="1177240">data2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177251">if</span>&nbsp;<span class="ident" id="1177254">d1</span>&nbsp;<span class="op" id="1177257">!=</span>&nbsp;<span class="ident" id="1177260">i</span>&nbsp;<span class="op" id="1177262">||</span>&nbsp;<span class="ident" id="1177265">d2</span>&nbsp;<span class="op" id="1177268">!=</span>&nbsp;<span class="builtintype" id="1177271">float64</span><span class="op" id="1177278">(</span><span class="ident" id="1177279">i</span><span class="op" id="1177280">)</span>&nbsp;<span class="op" id="1177282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177290">t</span><span class="op" id="1177291">.</span><span class="ident" id="1177292">Fatalf</span><span class="op" id="1177298">(</span><span class="string" id="1177299">&#34;incorrect&nbsp;data:&nbsp;%d/%g&nbsp;(%d)&#34;</span><span class="op" id="1177327">,</span>&nbsp;<span class="ident" id="1177329">d1</span><span class="op" id="1177331">,</span>&nbsp;<span class="ident" id="1177333">d2</span><span class="op" id="1177335">,</span>&nbsp;<span class="ident" id="1177337">i</span><span class="op" id="1177338">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177345">}</span><br>
<span class="lineno">1430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177351">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177356">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177361">c</span>&nbsp;<span class="op" id="1177363">&lt;-</span>&nbsp;<span class="builtintype" id="1177366">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177373">}</span><span class="op" id="1177374">(</span><span class="ident" id="1177375">p</span><span class="op" id="1177376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177379">}</span><br>
<span class="lineno">1435</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177382">&lt;-</span><span class="ident" id="1177384">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177387">&lt;-</span><span class="ident" id="1177389">c</span><br>
<span class="lineno"></span><span class="op" id="1177391">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1177394">func</span>&nbsp;<span class="ident" id="1177399">shouldPanic</span><span class="op" id="1177410">(</span><span class="ident" id="1177411">t</span>&nbsp;<span class="op" id="1177413">*</span><span class="ident" id="1177414">testing</span><span class="op" id="1177421">.</span><span class="ident" id="1177422">T</span><span class="op" id="1177423">,</span>&nbsp;<span class="ident" id="1177425">name</span>&nbsp;<span class="builtintype" id="1177430">string</span><span class="op" id="1177436">,</span>&nbsp;<span class="ident" id="1177438">f</span>&nbsp;<span class="keyword" id="1177440">func</span><span class="op" id="1177444">(</span><span class="op" id="1177445">)</span><span class="op" id="1177446">)</span>&nbsp;<span class="op" id="1177448">{</span><br>
<span class="lineno">1440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177451">defer</span>&nbsp;<span class="keyword" id="1177457">func</span><span class="op" id="1177461">(</span><span class="op" id="1177462">)</span>&nbsp;<span class="op" id="1177464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177468">if</span>&nbsp;<span class="builtinfunc" id="1177471">recover</span><span class="op" id="1177478">(</span><span class="op" id="1177479">)</span>&nbsp;<span class="op" id="1177481">==</span>&nbsp;<span class="ident" id="1177484">nil</span>&nbsp;<span class="op" id="1177488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177493">t</span><span class="op" id="1177494">.</span><span class="ident" id="1177495">Errorf</span><span class="op" id="1177501">(</span><span class="string" id="1177502">&#34;%s&nbsp;did&nbsp;not&nbsp;panic&#34;</span><span class="op" id="1177520">,</span>&nbsp;<span class="ident" id="1177522">name</span><span class="op" id="1177526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177533">}</span><span class="op" id="1177534">(</span><span class="op" id="1177535">)</span><br>
<span class="lineno">1445</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177538">f</span><span class="op" id="1177539">(</span><span class="op" id="1177540">)</span><br>
<span class="lineno"></span><span class="op" id="1177542">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1177545">func</span>&nbsp;<span class="ident" id="1177550">TestUnaligned64</span><span class="op" id="1177565">(</span><span class="ident" id="1177566">t</span>&nbsp;<span class="op" id="1177568">*</span><span class="ident" id="1177569">testing</span><span class="op" id="1177576">.</span><span class="ident" id="1177577">T</span><span class="op" id="1177578">)</span>&nbsp;<span class="op" id="1177580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1177583">//&nbsp;Unaligned&nbsp;64-bit&nbsp;atomics&nbsp;on&nbsp;32-bit&nbsp;systems&nbsp;are</span><br>
<span class="lineno">1450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1177634">//&nbsp;a&nbsp;continual&nbsp;source&nbsp;of&nbsp;pain.&nbsp;Test&nbsp;that&nbsp;on&nbsp;32-bit&nbsp;systems&nbsp;they&nbsp;crash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1177705">//&nbsp;instead&nbsp;of&nbsp;failing&nbsp;silently.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1177738">if</span>&nbsp;<span class="ident" id="1177741">unsafe</span><span class="op" id="1177747">.</span><span class="ident" id="1177748">Sizeof</span><span class="op" id="1177754">(</span><span class="builtintype" id="1177755">int</span><span class="op" id="1177758">(</span><span class="num" id="1177759">0</span><span class="op" id="1177760">)</span><span class="op" id="1177761">)</span>&nbsp;<span class="op" id="1177763">!=</span>&nbsp;<span class="num" id="1177766">4</span>&nbsp;<span class="op" id="1177768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177772">t</span><span class="op" id="1177773">.</span><span class="ident" id="1177774">Skip</span><span class="op" id="1177778">(</span><span class="string" id="1177779">&#34;test&nbsp;only&nbsp;runs&nbsp;on&nbsp;32-bit&nbsp;systems&#34;</span><span class="op" id="1177813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1177816">}</span><br>
<span class="lineno">1455</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177820">x</span>&nbsp;<span class="op" id="1177822">:=</span>&nbsp;<span class="builtinfunc" id="1177825">make</span><span class="op" id="1177829">(</span><span class="op" id="1177830">[</span><span class="op" id="1177831">]</span><span class="builtintype" id="1177832">uint32</span><span class="op" id="1177838">,</span>&nbsp;<span class="num" id="1177840">4</span><span class="op" id="1177841">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177844">p</span>&nbsp;<span class="op" id="1177846">:=</span>&nbsp;<span class="op" id="1177849">(</span><span class="op" id="1177850">*</span><span class="ident" id="1177851">uint64</span><span class="op" id="1177857">)</span><span class="op" id="1177858">(</span><span class="ident" id="1177859">unsafe</span><span class="op" id="1177865">.</span><span class="ident" id="1177866">Pointer</span><span class="op" id="1177873">(</span><span class="op" id="1177874">&amp;</span><span class="ident" id="1177875">x</span><span class="op" id="1177876">[</span><span class="num" id="1177877">1</span><span class="op" id="1177878">]</span><span class="op" id="1177879">)</span><span class="op" id="1177880">)</span>&nbsp;<span class="comment" id="1177882">//&nbsp;misaligned</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177898">shouldPanic</span><span class="op" id="1177909">(</span><span class="ident" id="1177910">t</span><span class="op" id="1177911">,</span>&nbsp;<span class="string" id="1177913">&#34;LoadUint64&#34;</span><span class="op" id="1177925">,</span>&nbsp;<span class="keyword" id="1177927">func</span><span class="op" id="1177931">(</span><span class="op" id="1177932">)</span>&nbsp;<span class="op" id="1177934">{</span>&nbsp;<span class="ident" id="1177936">LoadUint64</span><span class="op" id="1177946">(</span><span class="ident" id="1177947">p</span><span class="op" id="1177948">)</span>&nbsp;<span class="op" id="1177950">}</span><span class="op" id="1177951">)</span><br>
<span class="lineno">1460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1177954">shouldPanic</span><span class="op" id="1177965">(</span><span class="ident" id="1177966">t</span><span class="op" id="1177967">,</span>&nbsp;<span class="string" id="1177969">&#34;StoreUint64&#34;</span><span class="op" id="1177982">,</span>&nbsp;<span class="keyword" id="1177984">func</span><span class="op" id="1177988">(</span><span class="op" id="1177989">)</span>&nbsp;<span class="op" id="1177991">{</span>&nbsp;<span class="ident" id="1177993">StoreUint64</span><span class="op" id="1178004">(</span><span class="ident" id="1178005">p</span><span class="op" id="1178006">,</span>&nbsp;<span class="num" id="1178008">1</span><span class="op" id="1178009">)</span>&nbsp;<span class="op" id="1178011">}</span><span class="op" id="1178012">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1178015">shouldPanic</span><span class="op" id="1178026">(</span><span class="ident" id="1178027">t</span><span class="op" id="1178028">,</span>&nbsp;<span class="string" id="1178030">&#34;CompareAndSwapUint64&#34;</span><span class="op" id="1178052">,</span>&nbsp;<span class="keyword" id="1178054">func</span><span class="op" id="1178058">(</span><span class="op" id="1178059">)</span>&nbsp;<span class="op" id="1178061">{</span>&nbsp;<span class="ident" id="1178063">CompareAndSwapUint64</span><span class="op" id="1178083">(</span><span class="ident" id="1178084">p</span><span class="op" id="1178085">,</span>&nbsp;<span class="num" id="1178087">1</span><span class="op" id="1178088">,</span>&nbsp;<span class="num" id="1178090">2</span><span class="op" id="1178091">)</span>&nbsp;<span class="op" id="1178093">}</span><span class="op" id="1178094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1178097">shouldPanic</span><span class="op" id="1178108">(</span><span class="ident" id="1178109">t</span><span class="op" id="1178110">,</span>&nbsp;<span class="string" id="1178112">&#34;AddUint64&#34;</span><span class="op" id="1178123">,</span>&nbsp;<span class="keyword" id="1178125">func</span><span class="op" id="1178129">(</span><span class="op" id="1178130">)</span>&nbsp;<span class="op" id="1178132">{</span>&nbsp;<span class="ident" id="1178134">AddUint64</span><span class="op" id="1178143">(</span><span class="ident" id="1178144">p</span><span class="op" id="1178145">,</span>&nbsp;<span class="num" id="1178147">3</span><span class="op" id="1178148">)</span>&nbsp;<span class="op" id="1178150">}</span><span class="op" id="1178151">)</span><br>
<span class="lineno"></span><span class="op" id="1178153">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">1465</span><span class="keyword" id="1178156">func</span>&nbsp;<span class="ident" id="1178161">TestNilDeref</span><span class="op" id="1178173">(</span><span class="ident" id="1178174">t</span>&nbsp;<span class="op" id="1178176">*</span><span class="ident" id="1178177">testing</span><span class="op" id="1178184">.</span><span class="ident" id="1178185">T</span><span class="op" id="1178186">)</span>&nbsp;<span class="op" id="1178188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178191">if</span>&nbsp;<span class="ident" id="1178194">p</span>&nbsp;<span class="op" id="1178196">:=</span>&nbsp;<span class="ident" id="1178199">runtime</span><span class="op" id="1178206">.</span><span class="ident" id="1178207">GOOS</span>&nbsp;<span class="op" id="1178212">+</span>&nbsp;<span class="string" id="1178214">&#34;/&#34;</span>&nbsp;<span class="op" id="1178218">+</span>&nbsp;<span class="ident" id="1178220">runtime</span><span class="op" id="1178227">.</span><span class="ident" id="1178228">GOARCH</span><span class="op" id="1178234">;</span>&nbsp;<span class="ident" id="1178236">p</span>&nbsp;<span class="op" id="1178238">==</span>&nbsp;<span class="string" id="1178241">&#34;freebsd/arm&#34;</span>&nbsp;<span class="op" id="1178255">||</span>&nbsp;<span class="ident" id="1178258">p</span>&nbsp;<span class="op" id="1178260">==</span>&nbsp;<span class="string" id="1178263">&#34;netbsd/arm&#34;</span>&nbsp;<span class="op" id="1178276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1178280">t</span><span class="op" id="1178281">.</span><span class="ident" id="1178282">Skipf</span><span class="op" id="1178287">(</span><span class="string" id="1178288">&#34;issue&nbsp;7338:&nbsp;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="1178321">,</span>&nbsp;<span class="ident" id="1178323">p</span><span class="op" id="1178324">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1178327">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1178330">funcs</span>&nbsp;<span class="op" id="1178336">:=</span>&nbsp;<span class="op" id="1178339">[</span><span class="op" id="1178340">...</span><span class="op" id="1178343">]</span><span class="keyword" id="1178344">func</span><span class="op" id="1178348">(</span><span class="op" id="1178349">)</span><span class="op" id="1178350">{</span><br>
<span class="lineno">1470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178354">func</span><span class="op" id="1178358">(</span><span class="op" id="1178359">)</span>&nbsp;<span class="op" id="1178361">{</span>&nbsp;<span class="ident" id="1178363">CompareAndSwapInt32</span><span class="op" id="1178382">(</span><span class="ident" id="1178383">nil</span><span class="op" id="1178386">,</span>&nbsp;<span class="num" id="1178388">0</span><span class="op" id="1178389">,</span>&nbsp;<span class="num" id="1178391">0</span><span class="op" id="1178392">)</span>&nbsp;<span class="op" id="1178394">}</span><span class="op" id="1178395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178399">func</span><span class="op" id="1178403">(</span><span class="op" id="1178404">)</span>&nbsp;<span class="op" id="1178406">{</span>&nbsp;<span class="ident" id="1178408">CompareAndSwapInt64</span><span class="op" id="1178427">(</span><span class="ident" id="1178428">nil</span><span class="op" id="1178431">,</span>&nbsp;<span class="num" id="1178433">0</span><span class="op" id="1178434">,</span>&nbsp;<span class="num" id="1178436">0</span><span class="op" id="1178437">)</span>&nbsp;<span class="op" id="1178439">}</span><span class="op" id="1178440">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178444">func</span><span class="op" id="1178448">(</span><span class="op" id="1178449">)</span>&nbsp;<span class="op" id="1178451">{</span>&nbsp;<span class="ident" id="1178453">CompareAndSwapUint32</span><span class="op" id="1178473">(</span><span class="ident" id="1178474">nil</span><span class="op" id="1178477">,</span>&nbsp;<span class="num" id="1178479">0</span><span class="op" id="1178480">,</span>&nbsp;<span class="num" id="1178482">0</span><span class="op" id="1178483">)</span>&nbsp;<span class="op" id="1178485">}</span><span class="op" id="1178486">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178490">func</span><span class="op" id="1178494">(</span><span class="op" id="1178495">)</span>&nbsp;<span class="op" id="1178497">{</span>&nbsp;<span class="ident" id="1178499">CompareAndSwapUint64</span><span class="op" id="1178519">(</span><span class="ident" id="1178520">nil</span><span class="op" id="1178523">,</span>&nbsp;<span class="num" id="1178525">0</span><span class="op" id="1178526">,</span>&nbsp;<span class="num" id="1178528">0</span><span class="op" id="1178529">)</span>&nbsp;<span class="op" id="1178531">}</span><span class="op" id="1178532">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178536">func</span><span class="op" id="1178540">(</span><span class="op" id="1178541">)</span>&nbsp;<span class="op" id="1178543">{</span>&nbsp;<span class="ident" id="1178545">CompareAndSwapUintptr</span><span class="op" id="1178566">(</span><span class="ident" id="1178567">nil</span><span class="op" id="1178570">,</span>&nbsp;<span class="num" id="1178572">0</span><span class="op" id="1178573">,</span>&nbsp;<span class="num" id="1178575">0</span><span class="op" id="1178576">)</span>&nbsp;<span class="op" id="1178578">}</span><span class="op" id="1178579">,</span><br>
<span class="lineno">1475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178583">func</span><span class="op" id="1178587">(</span><span class="op" id="1178588">)</span>&nbsp;<span class="op" id="1178590">{</span>&nbsp;<span class="ident" id="1178592">CompareAndSwapPointer</span><span class="op" id="1178613">(</span><span class="ident" id="1178614">nil</span><span class="op" id="1178617">,</span>&nbsp;<span class="ident" id="1178619">nil</span><span class="op" id="1178622">,</span>&nbsp;<span class="ident" id="1178624">nil</span><span class="op" id="1178627">)</span>&nbsp;<span class="op" id="1178629">}</span><span class="op" id="1178630">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178634">func</span><span class="op" id="1178638">(</span><span class="op" id="1178639">)</span>&nbsp;<span class="op" id="1178641">{</span>&nbsp;<span class="ident" id="1178643">SwapInt32</span><span class="op" id="1178652">(</span><span class="ident" id="1178653">nil</span><span class="op" id="1178656">,</span>&nbsp;<span class="num" id="1178658">0</span><span class="op" id="1178659">)</span>&nbsp;<span class="op" id="1178661">}</span><span class="op" id="1178662">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178666">func</span><span class="op" id="1178670">(</span><span class="op" id="1178671">)</span>&nbsp;<span class="op" id="1178673">{</span>&nbsp;<span class="ident" id="1178675">SwapUint32</span><span class="op" id="1178685">(</span><span class="ident" id="1178686">nil</span><span class="op" id="1178689">,</span>&nbsp;<span class="num" id="1178691">0</span><span class="op" id="1178692">)</span>&nbsp;<span class="op" id="1178694">}</span><span class="op" id="1178695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178699">func</span><span class="op" id="1178703">(</span><span class="op" id="1178704">)</span>&nbsp;<span class="op" id="1178706">{</span>&nbsp;<span class="ident" id="1178708">SwapInt64</span><span class="op" id="1178717">(</span><span class="ident" id="1178718">nil</span><span class="op" id="1178721">,</span>&nbsp;<span class="num" id="1178723">0</span><span class="op" id="1178724">)</span>&nbsp;<span class="op" id="1178726">}</span><span class="op" id="1178727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178731">func</span><span class="op" id="1178735">(</span><span class="op" id="1178736">)</span>&nbsp;<span class="op" id="1178738">{</span>&nbsp;<span class="ident" id="1178740">SwapUint64</span><span class="op" id="1178750">(</span><span class="ident" id="1178751">nil</span><span class="op" id="1178754">,</span>&nbsp;<span class="num" id="1178756">0</span><span class="op" id="1178757">)</span>&nbsp;<span class="op" id="1178759">}</span><span class="op" id="1178760">,</span><br>
<span class="lineno">1480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178764">func</span><span class="op" id="1178768">(</span><span class="op" id="1178769">)</span>&nbsp;<span class="op" id="1178771">{</span>&nbsp;<span class="ident" id="1178773">SwapUintptr</span><span class="op" id="1178784">(</span><span class="ident" id="1178785">nil</span><span class="op" id="1178788">,</span>&nbsp;<span class="num" id="1178790">0</span><span class="op" id="1178791">)</span>&nbsp;<span class="op" id="1178793">}</span><span class="op" id="1178794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178798">func</span><span class="op" id="1178802">(</span><span class="op" id="1178803">)</span>&nbsp;<span class="op" id="1178805">{</span>&nbsp;<span class="ident" id="1178807">SwapPointer</span><span class="op" id="1178818">(</span><span class="ident" id="1178819">nil</span><span class="op" id="1178822">,</span>&nbsp;<span class="ident" id="1178824">nil</span><span class="op" id="1178827">)</span>&nbsp;<span class="op" id="1178829">}</span><span class="op" id="1178830">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178834">func</span><span class="op" id="1178838">(</span><span class="op" id="1178839">)</span>&nbsp;<span class="op" id="1178841">{</span>&nbsp;<span class="ident" id="1178843">AddInt32</span><span class="op" id="1178851">(</span><span class="ident" id="1178852">nil</span><span class="op" id="1178855">,</span>&nbsp;<span class="num" id="1178857">0</span><span class="op" id="1178858">)</span>&nbsp;<span class="op" id="1178860">}</span><span class="op" id="1178861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178865">func</span><span class="op" id="1178869">(</span><span class="op" id="1178870">)</span>&nbsp;<span class="op" id="1178872">{</span>&nbsp;<span class="ident" id="1178874">AddUint32</span><span class="op" id="1178883">(</span><span class="ident" id="1178884">nil</span><span class="op" id="1178887">,</span>&nbsp;<span class="num" id="1178889">0</span><span class="op" id="1178890">)</span>&nbsp;<span class="op" id="1178892">}</span><span class="op" id="1178893">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178897">func</span><span class="op" id="1178901">(</span><span class="op" id="1178902">)</span>&nbsp;<span class="op" id="1178904">{</span>&nbsp;<span class="ident" id="1178906">AddInt64</span><span class="op" id="1178914">(</span><span class="ident" id="1178915">nil</span><span class="op" id="1178918">,</span>&nbsp;<span class="num" id="1178920">0</span><span class="op" id="1178921">)</span>&nbsp;<span class="op" id="1178923">}</span><span class="op" id="1178924">,</span><br>
<span class="lineno">1485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178928">func</span><span class="op" id="1178932">(</span><span class="op" id="1178933">)</span>&nbsp;<span class="op" id="1178935">{</span>&nbsp;<span class="ident" id="1178937">AddUint64</span><span class="op" id="1178946">(</span><span class="ident" id="1178947">nil</span><span class="op" id="1178950">,</span>&nbsp;<span class="num" id="1178952">0</span><span class="op" id="1178953">)</span>&nbsp;<span class="op" id="1178955">}</span><span class="op" id="1178956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178960">func</span><span class="op" id="1178964">(</span><span class="op" id="1178965">)</span>&nbsp;<span class="op" id="1178967">{</span>&nbsp;<span class="ident" id="1178969">AddUintptr</span><span class="op" id="1178979">(</span><span class="ident" id="1178980">nil</span><span class="op" id="1178983">,</span>&nbsp;<span class="num" id="1178985">0</span><span class="op" id="1178986">)</span>&nbsp;<span class="op" id="1178988">}</span><span class="op" id="1178989">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1178993">func</span><span class="op" id="1178997">(</span><span class="op" id="1178998">)</span>&nbsp;<span class="op" id="1179000">{</span>&nbsp;<span class="ident" id="1179002">LoadInt32</span><span class="op" id="1179011">(</span><span class="ident" id="1179012">nil</span><span class="op" id="1179015">)</span>&nbsp;<span class="op" id="1179017">}</span><span class="op" id="1179018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179022">func</span><span class="op" id="1179026">(</span><span class="op" id="1179027">)</span>&nbsp;<span class="op" id="1179029">{</span>&nbsp;<span class="ident" id="1179031">LoadInt64</span><span class="op" id="1179040">(</span><span class="ident" id="1179041">nil</span><span class="op" id="1179044">)</span>&nbsp;<span class="op" id="1179046">}</span><span class="op" id="1179047">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179051">func</span><span class="op" id="1179055">(</span><span class="op" id="1179056">)</span>&nbsp;<span class="op" id="1179058">{</span>&nbsp;<span class="ident" id="1179060">LoadUint32</span><span class="op" id="1179070">(</span><span class="ident" id="1179071">nil</span><span class="op" id="1179074">)</span>&nbsp;<span class="op" id="1179076">}</span><span class="op" id="1179077">,</span><br>
<span class="lineno">1490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179081">func</span><span class="op" id="1179085">(</span><span class="op" id="1179086">)</span>&nbsp;<span class="op" id="1179088">{</span>&nbsp;<span class="ident" id="1179090">LoadUint64</span><span class="op" id="1179100">(</span><span class="ident" id="1179101">nil</span><span class="op" id="1179104">)</span>&nbsp;<span class="op" id="1179106">}</span><span class="op" id="1179107">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179111">func</span><span class="op" id="1179115">(</span><span class="op" id="1179116">)</span>&nbsp;<span class="op" id="1179118">{</span>&nbsp;<span class="ident" id="1179120">LoadUintptr</span><span class="op" id="1179131">(</span><span class="ident" id="1179132">nil</span><span class="op" id="1179135">)</span>&nbsp;<span class="op" id="1179137">}</span><span class="op" id="1179138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179142">func</span><span class="op" id="1179146">(</span><span class="op" id="1179147">)</span>&nbsp;<span class="op" id="1179149">{</span>&nbsp;<span class="ident" id="1179151">LoadPointer</span><span class="op" id="1179162">(</span><span class="ident" id="1179163">nil</span><span class="op" id="1179166">)</span>&nbsp;<span class="op" id="1179168">}</span><span class="op" id="1179169">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179173">func</span><span class="op" id="1179177">(</span><span class="op" id="1179178">)</span>&nbsp;<span class="op" id="1179180">{</span>&nbsp;<span class="ident" id="1179182">StoreInt32</span><span class="op" id="1179192">(</span><span class="ident" id="1179193">nil</span><span class="op" id="1179196">,</span>&nbsp;<span class="num" id="1179198">0</span><span class="op" id="1179199">)</span>&nbsp;<span class="op" id="1179201">}</span><span class="op" id="1179202">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179206">func</span><span class="op" id="1179210">(</span><span class="op" id="1179211">)</span>&nbsp;<span class="op" id="1179213">{</span>&nbsp;<span class="ident" id="1179215">StoreInt64</span><span class="op" id="1179225">(</span><span class="ident" id="1179226">nil</span><span class="op" id="1179229">,</span>&nbsp;<span class="num" id="1179231">0</span><span class="op" id="1179232">)</span>&nbsp;<span class="op" id="1179234">}</span><span class="op" id="1179235">,</span><br>
<span class="lineno">1495</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179239">func</span><span class="op" id="1179243">(</span><span class="op" id="1179244">)</span>&nbsp;<span class="op" id="1179246">{</span>&nbsp;<span class="ident" id="1179248">StoreUint32</span><span class="op" id="1179259">(</span><span class="ident" id="1179260">nil</span><span class="op" id="1179263">,</span>&nbsp;<span class="num" id="1179265">0</span><span class="op" id="1179266">)</span>&nbsp;<span class="op" id="1179268">}</span><span class="op" id="1179269">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179273">func</span><span class="op" id="1179277">(</span><span class="op" id="1179278">)</span>&nbsp;<span class="op" id="1179280">{</span>&nbsp;<span class="ident" id="1179282">StoreUint64</span><span class="op" id="1179293">(</span><span class="ident" id="1179294">nil</span><span class="op" id="1179297">,</span>&nbsp;<span class="num" id="1179299">0</span><span class="op" id="1179300">)</span>&nbsp;<span class="op" id="1179302">}</span><span class="op" id="1179303">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179307">func</span><span class="op" id="1179311">(</span><span class="op" id="1179312">)</span>&nbsp;<span class="op" id="1179314">{</span>&nbsp;<span class="ident" id="1179316">StoreUintptr</span><span class="op" id="1179328">(</span><span class="ident" id="1179329">nil</span><span class="op" id="1179332">,</span>&nbsp;<span class="num" id="1179334">0</span><span class="op" id="1179335">)</span>&nbsp;<span class="op" id="1179337">}</span><span class="op" id="1179338">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179342">func</span><span class="op" id="1179346">(</span><span class="op" id="1179347">)</span>&nbsp;<span class="op" id="1179349">{</span>&nbsp;<span class="ident" id="1179351">StorePointer</span><span class="op" id="1179363">(</span><span class="ident" id="1179364">nil</span><span class="op" id="1179367">,</span>&nbsp;<span class="ident" id="1179369">nil</span><span class="op" id="1179372">)</span>&nbsp;<span class="op" id="1179374">}</span><span class="op" id="1179375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1179378">}</span><br>
<span class="lineno">1500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179381">for</span>&nbsp;<span class="ident" id="1179385">_</span><span class="op" id="1179386">,</span>&nbsp;<span class="ident" id="1179388">f</span>&nbsp;<span class="op" id="1179390">:=</span>&nbsp;<span class="keyword" id="1179393">range</span>&nbsp;<span class="ident" id="1179399">funcs</span>&nbsp;<span class="op" id="1179405">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179409">func</span><span class="op" id="1179413">(</span><span class="op" id="1179414">)</span>&nbsp;<span class="op" id="1179416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1179421">defer</span>&nbsp;<span class="keyword" id="1179427">func</span><span class="op" id="1179431">(</span><span class="op" id="1179432">)</span>&nbsp;<span class="op" id="1179434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1179440">runtime</span><span class="op" id="1179447">.</span><span class="ident" id="1179448">GC</span><span class="op" id="1179450">(</span><span class="op" id="1179451">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1179457">recover</span><span class="op" id="1179464">(</span><span class="op" id="1179465">)</span><br>
<span class="lineno">1505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1179470">}</span><span class="op" id="1179471">(</span><span class="op" id="1179472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1179477">f</span><span class="op" id="1179478">(</span><span class="op" id="1179479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1179483">}</span><span class="op" id="1179484">(</span><span class="op" id="1179485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1179488">}</span><br>
<span class="lineno"></span><span class="op" id="1179490">}</span>
</div>
</body>
</html>
