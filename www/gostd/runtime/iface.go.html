<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1529800">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1529855">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1529909">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1529960">package</span>&nbsp;<span class="ident" id="1529968">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529977">import</span>&nbsp;<span class="op" id="1529984">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="1529987">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1529996">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1529999">const</span>&nbsp;<span class="op" id="1530005">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530008">hashSize</span>&nbsp;<span class="op" id="1530017">=</span>&nbsp;<span class="num" id="1530019">1009</span><br>
<span class="lineno"></span><span class="op" id="1530024">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1530027">var</span>&nbsp;<span class="op" id="1530031">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530034">ifaceLock</span>&nbsp;<span class="ident" id="1530044">mutex</span>&nbsp;<span class="comment" id="1530050">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530078">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530088">[</span><span class="ident" id="1530089">hashSize</span><span class="op" id="1530097">]</span><span class="op" id="1530098">*</span><span class="ident" id="1530099">itab</span><br>
<span class="lineno"></span><span class="op" id="1530104">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1530107">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1530177">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1530246">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1530315">type</span>&nbsp;<span class="ident" id="1530320">fInterface</span>&nbsp;<span class="keyword" id="1530331">interface</span>&nbsp;<span class="op" id="1530341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530344">f</span><span class="op" id="1530345">(</span><span class="op" id="1530346">)</span><br>
<span class="lineno">25</span><span class="op" id="1530348">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530351">func</span>&nbsp;<span class="ident" id="1530356">getitab</span><span class="op" id="1530363">(</span><span class="ident" id="1530364">inter</span>&nbsp;<span class="op" id="1530370">*</span><span class="ident" id="1530371">interfacetype</span><span class="op" id="1530384">,</span>&nbsp;<span class="ident" id="1530386">typ</span>&nbsp;<span class="op" id="1530390">*</span><span class="ident" id="1530391">_type</span><span class="op" id="1530396">,</span>&nbsp;<span class="ident" id="1530398">canfail</span>&nbsp;<span class="builtintype" id="1530406">bool</span><span class="op" id="1530410">)</span>&nbsp;<span class="op" id="1530412">*</span><span class="ident" id="1530413">itab</span>&nbsp;<span class="op" id="1530418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530421">if</span>&nbsp;<span class="builtinfunc" id="1530424">len</span><span class="op" id="1530427">(</span><span class="ident" id="1530428">inter</span><span class="op" id="1530433">.</span><span class="ident" id="1530434">mhdr</span><span class="op" id="1530438">)</span>&nbsp;<span class="op" id="1530440">==</span>&nbsp;<span class="num" id="1530443">0</span>&nbsp;<span class="op" id="1530445">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530449">gothrow</span><span class="op" id="1530456">(</span><span class="string" id="1530457">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1530490">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530497">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530511">x</span>&nbsp;<span class="op" id="1530513">:=</span>&nbsp;<span class="ident" id="1530516">typ</span><span class="op" id="1530519">.</span><span class="ident" id="1530520">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530523">if</span>&nbsp;<span class="ident" id="1530526">x</span>&nbsp;<span class="op" id="1530528">==</span>&nbsp;<span class="ident" id="1530531">nil</span>&nbsp;<span class="op" id="1530535">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530539">if</span>&nbsp;<span class="ident" id="1530542">canfail</span>&nbsp;<span class="op" id="1530550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530555">return</span>&nbsp;<span class="ident" id="1530562">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530572">i</span>&nbsp;<span class="op" id="1530574">:=</span>&nbsp;<span class="op" id="1530577">(</span><span class="op" id="1530578">*</span><span class="ident" id="1530579">imethod</span><span class="op" id="1530586">)</span><span class="op" id="1530587">(</span><span class="ident" id="1530588">add</span><span class="op" id="1530591">(</span><span class="ident" id="1530592">unsafe</span><span class="op" id="1530598">.</span><span class="ident" id="1530599">Pointer</span><span class="op" id="1530606">(</span><span class="ident" id="1530607">inter</span><span class="op" id="1530612">)</span><span class="op" id="1530613">,</span>&nbsp;<span class="ident" id="1530615">unsafe</span><span class="op" id="1530621">.</span><span class="ident" id="1530622">Sizeof</span><span class="op" id="1530628">(</span><span class="ident" id="1530629">interfacetype</span><span class="op" id="1530642">{</span><span class="op" id="1530643">}</span><span class="op" id="1530644">)</span><span class="op" id="1530645">)</span><span class="op" id="1530646">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1530650">panic</span><span class="op" id="1530655">(</span><span class="op" id="1530656">&amp;</span><span class="ident" id="1530657">TypeAssertionError</span><span class="op" id="1530675">{</span><span class="string" id="1530676">&#34;&#34;</span><span class="op" id="1530678">,</span>&nbsp;<span class="op" id="1530680">*</span><span class="ident" id="1530681">typ</span><span class="op" id="1530684">.</span><span class="ident" id="1530685">_string</span><span class="op" id="1530692">,</span>&nbsp;<span class="op" id="1530694">*</span><span class="ident" id="1530695">inter</span><span class="op" id="1530700">.</span><span class="ident" id="1530701">typ</span><span class="op" id="1530704">.</span><span class="ident" id="1530705">_string</span><span class="op" id="1530712">,</span>&nbsp;<span class="op" id="1530714">*</span><span class="ident" id="1530715">i</span><span class="op" id="1530716">.</span><span class="ident" id="1530717">name</span><span class="op" id="1530721">}</span><span class="op" id="1530722">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1530725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530729">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530784">h</span>&nbsp;<span class="op" id="1530786">:=</span>&nbsp;<span class="ident" id="1530789">inter</span><span class="op" id="1530794">.</span><span class="ident" id="1530795">typ</span><span class="op" id="1530798">.</span><span class="ident" id="1530799">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530805">h</span>&nbsp;<span class="op" id="1530807">+=</span>&nbsp;<span class="num" id="1530810">17</span>&nbsp;<span class="op" id="1530813">*</span>&nbsp;<span class="ident" id="1530815">typ</span><span class="op" id="1530818">.</span><span class="ident" id="1530819">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530825">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1530860">h</span>&nbsp;<span class="op" id="1530862">%=</span>&nbsp;<span class="ident" id="1530865">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530876">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1530923">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530967">var</span>&nbsp;<span class="ident" id="1530971">m</span>&nbsp;<span class="op" id="1530973">*</span><span class="ident" id="1530974">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530980">var</span>&nbsp;<span class="ident" id="1530984">locked</span>&nbsp;<span class="builtintype" id="1530991">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1530996">for</span>&nbsp;<span class="ident" id="1531000">locked</span>&nbsp;<span class="op" id="1531007">=</span>&nbsp;<span class="num" id="1531009">0</span><span class="op" id="1531010">;</span>&nbsp;<span class="ident" id="1531012">locked</span>&nbsp;<span class="op" id="1531019">&lt;</span>&nbsp;<span class="num" id="1531021">2</span><span class="op" id="1531022">;</span>&nbsp;<span class="ident" id="1531024">locked</span><span class="op" id="1531030">++</span>&nbsp;<span class="op" id="1531033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531037">if</span>&nbsp;<span class="ident" id="1531040">locked</span>&nbsp;<span class="op" id="1531047">!=</span>&nbsp;<span class="num" id="1531050">0</span>&nbsp;<span class="op" id="1531052">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531057">lock</span><span class="op" id="1531061">(</span><span class="op" id="1531062">&amp;</span><span class="ident" id="1531063">ifaceLock</span><span class="op" id="1531072">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531080">for</span>&nbsp;<span class="ident" id="1531084">m</span>&nbsp;<span class="op" id="1531086">=</span>&nbsp;<span class="op" id="1531088">(</span><span class="op" id="1531089">*</span><span class="ident" id="1531090">itab</span><span class="op" id="1531094">)</span><span class="op" id="1531095">(</span><span class="ident" id="1531096">atomicloadp</span><span class="op" id="1531107">(</span><span class="ident" id="1531108">unsafe</span><span class="op" id="1531114">.</span><span class="ident" id="1531115">Pointer</span><span class="op" id="1531122">(</span><span class="op" id="1531123">&amp;</span><span class="ident" id="1531124">hash</span><span class="op" id="1531128">[</span><span class="ident" id="1531129">h</span><span class="op" id="1531130">]</span><span class="op" id="1531131">)</span><span class="op" id="1531132">)</span><span class="op" id="1531133">)</span><span class="op" id="1531134">;</span>&nbsp;<span class="ident" id="1531136">m</span>&nbsp;<span class="op" id="1531138">!=</span>&nbsp;<span class="ident" id="1531141">nil</span><span class="op" id="1531144">;</span>&nbsp;<span class="ident" id="1531146">m</span>&nbsp;<span class="op" id="1531148">=</span>&nbsp;<span class="ident" id="1531150">m</span><span class="op" id="1531151">.</span><span class="ident" id="1531152">link</span>&nbsp;<span class="op" id="1531157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531162">if</span>&nbsp;<span class="ident" id="1531165">m</span><span class="op" id="1531166">.</span><span class="ident" id="1531167">inter</span>&nbsp;<span class="op" id="1531173">==</span>&nbsp;<span class="ident" id="1531176">inter</span>&nbsp;<span class="op" id="1531182">&amp;&amp;</span>&nbsp;<span class="ident" id="1531185">m</span><span class="op" id="1531186">.</span><span class="ident" id="1531187">_type</span>&nbsp;<span class="op" id="1531193">==</span>&nbsp;<span class="ident" id="1531196">typ</span>&nbsp;<span class="op" id="1531200">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531206">if</span>&nbsp;<span class="ident" id="1531209">m</span><span class="op" id="1531210">.</span><span class="ident" id="1531211">bad</span>&nbsp;<span class="op" id="1531215">!=</span>&nbsp;<span class="num" id="1531218">0</span>&nbsp;<span class="op" id="1531220">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531227">m</span>&nbsp;<span class="op" id="1531229">=</span>&nbsp;<span class="ident" id="1531231">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531240">if</span>&nbsp;<span class="op" id="1531243">!</span><span class="ident" id="1531244">canfail</span>&nbsp;<span class="op" id="1531252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531260">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531308">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531359">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531406">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531454">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531503">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531552">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531599">goto</span>&nbsp;<span class="ident" id="1531604">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531616">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531628">if</span>&nbsp;<span class="ident" id="1531631">locked</span>&nbsp;<span class="op" id="1531638">!=</span>&nbsp;<span class="num" id="1531641">0</span>&nbsp;<span class="op" id="1531643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531650">unlock</span><span class="op" id="1531656">(</span><span class="op" id="1531657">&amp;</span><span class="ident" id="1531658">ifaceLock</span><span class="op" id="1531667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1531679">return</span>&nbsp;<span class="ident" id="1531686">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531691">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1531698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531702">m</span>&nbsp;<span class="op" id="1531704">=</span>&nbsp;<span class="op" id="1531706">(</span><span class="op" id="1531707">*</span><span class="ident" id="1531708">itab</span><span class="op" id="1531712">)</span><span class="op" id="1531713">(</span><span class="ident" id="1531714">persistentalloc</span><span class="op" id="1531729">(</span><span class="ident" id="1531730">unsafe</span><span class="op" id="1531736">.</span><span class="ident" id="1531737">Sizeof</span><span class="op" id="1531743">(</span><span class="ident" id="1531744">itab</span><span class="op" id="1531748">{</span><span class="op" id="1531749">}</span><span class="op" id="1531750">)</span><span class="op" id="1531751">+</span><span class="builtintype" id="1531752">uintptr</span><span class="op" id="1531759">(</span><span class="builtinfunc" id="1531760">len</span><span class="op" id="1531763">(</span><span class="ident" id="1531764">inter</span><span class="op" id="1531769">.</span><span class="ident" id="1531770">mhdr</span><span class="op" id="1531774">)</span><span class="op" id="1531775">)</span><span class="op" id="1531776">*</span><span class="ident" id="1531777">ptrSize</span><span class="op" id="1531784">,</span>&nbsp;<span class="num" id="1531786">0</span><span class="op" id="1531787">,</span>&nbsp;<span class="op" id="1531789">&amp;</span><span class="ident" id="1531790">memstats</span><span class="op" id="1531798">.</span><span class="ident" id="1531799">other_sys</span><span class="op" id="1531808">)</span><span class="op" id="1531809">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531812">m</span><span class="op" id="1531813">.</span><span class="ident" id="1531814">inter</span>&nbsp;<span class="op" id="1531820">=</span>&nbsp;<span class="ident" id="1531822">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1531829">m</span><span class="op" id="1531830">.</span><span class="ident" id="1531831">_type</span>&nbsp;<span class="op" id="1531837">=</span>&nbsp;<span class="ident" id="1531839">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1531844">search</span><span class="op" id="1531850">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531853">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531904">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531940">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1531983">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532022">ni</span>&nbsp;<span class="op" id="1532025">:=</span>&nbsp;<span class="builtinfunc" id="1532028">len</span><span class="op" id="1532031">(</span><span class="ident" id="1532032">inter</span><span class="op" id="1532037">.</span><span class="ident" id="1532038">mhdr</span><span class="op" id="1532042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532045">nt</span>&nbsp;<span class="op" id="1532048">:=</span>&nbsp;<span class="builtinfunc" id="1532051">len</span><span class="op" id="1532054">(</span><span class="ident" id="1532055">x</span><span class="op" id="1532056">.</span><span class="ident" id="1532057">mhdr</span><span class="op" id="1532061">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532064">j</span>&nbsp;<span class="op" id="1532066">:=</span>&nbsp;<span class="num" id="1532069">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532072">for</span>&nbsp;<span class="ident" id="1532076">k</span>&nbsp;<span class="op" id="1532078">:=</span>&nbsp;<span class="num" id="1532081">0</span><span class="op" id="1532082">;</span>&nbsp;<span class="ident" id="1532084">k</span>&nbsp;<span class="op" id="1532086">&lt;</span>&nbsp;<span class="ident" id="1532088">ni</span><span class="op" id="1532090">;</span>&nbsp;<span class="ident" id="1532092">k</span><span class="op" id="1532093">++</span>&nbsp;<span class="op" id="1532096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532100">i</span>&nbsp;<span class="op" id="1532102">:=</span>&nbsp;<span class="op" id="1532105">(</span><span class="op" id="1532106">*</span><span class="ident" id="1532107">imethod</span><span class="op" id="1532114">)</span><span class="op" id="1532115">(</span><span class="ident" id="1532116">add</span><span class="op" id="1532119">(</span><span class="ident" id="1532120">unsafe</span><span class="op" id="1532126">.</span><span class="ident" id="1532127">Pointer</span><span class="op" id="1532134">(</span><span class="ident" id="1532135">inter</span><span class="op" id="1532140">)</span><span class="op" id="1532141">,</span>&nbsp;<span class="ident" id="1532143">unsafe</span><span class="op" id="1532149">.</span><span class="ident" id="1532150">Sizeof</span><span class="op" id="1532156">(</span><span class="ident" id="1532157">interfacetype</span><span class="op" id="1532170">{</span><span class="op" id="1532171">}</span><span class="op" id="1532172">)</span><span class="op" id="1532173">+</span><span class="builtintype" id="1532174">uintptr</span><span class="op" id="1532181">(</span><span class="ident" id="1532182">k</span><span class="op" id="1532183">)</span><span class="op" id="1532184">*</span><span class="ident" id="1532185">unsafe</span><span class="op" id="1532191">.</span><span class="ident" id="1532192">Sizeof</span><span class="op" id="1532198">(</span><span class="ident" id="1532199">imethod</span><span class="op" id="1532206">{</span><span class="op" id="1532207">}</span><span class="op" id="1532208">)</span><span class="op" id="1532209">)</span><span class="op" id="1532210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532214">iname</span>&nbsp;<span class="op" id="1532220">:=</span>&nbsp;<span class="ident" id="1532223">i</span><span class="op" id="1532224">.</span><span class="ident" id="1532225">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532232">ipkgpath</span>&nbsp;<span class="op" id="1532241">:=</span>&nbsp;<span class="ident" id="1532244">i</span><span class="op" id="1532245">.</span><span class="ident" id="1532246">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532256">itype</span>&nbsp;<span class="op" id="1532262">:=</span>&nbsp;<span class="ident" id="1532265">i</span><span class="op" id="1532266">.</span><span class="ident" id="1532267">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532275">for</span>&nbsp;<span class="op" id="1532279">;</span>&nbsp;<span class="ident" id="1532281">j</span>&nbsp;<span class="op" id="1532283">&lt;</span>&nbsp;<span class="ident" id="1532285">nt</span><span class="op" id="1532287">;</span>&nbsp;<span class="ident" id="1532289">j</span><span class="op" id="1532290">++</span>&nbsp;<span class="op" id="1532293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532298">t</span>&nbsp;<span class="op" id="1532300">:=</span>&nbsp;<span class="op" id="1532303">(</span><span class="op" id="1532304">*</span><span class="ident" id="1532305">method</span><span class="op" id="1532311">)</span><span class="op" id="1532312">(</span><span class="ident" id="1532313">add</span><span class="op" id="1532316">(</span><span class="ident" id="1532317">unsafe</span><span class="op" id="1532323">.</span><span class="ident" id="1532324">Pointer</span><span class="op" id="1532331">(</span><span class="ident" id="1532332">x</span><span class="op" id="1532333">)</span><span class="op" id="1532334">,</span>&nbsp;<span class="ident" id="1532336">unsafe</span><span class="op" id="1532342">.</span><span class="ident" id="1532343">Sizeof</span><span class="op" id="1532349">(</span><span class="ident" id="1532350">uncommontype</span><span class="op" id="1532362">{</span><span class="op" id="1532363">}</span><span class="op" id="1532364">)</span><span class="op" id="1532365">+</span><span class="builtintype" id="1532366">uintptr</span><span class="op" id="1532373">(</span><span class="ident" id="1532374">j</span><span class="op" id="1532375">)</span><span class="op" id="1532376">*</span><span class="ident" id="1532377">unsafe</span><span class="op" id="1532383">.</span><span class="ident" id="1532384">Sizeof</span><span class="op" id="1532390">(</span><span class="ident" id="1532391">method</span><span class="op" id="1532397">{</span><span class="op" id="1532398">}</span><span class="op" id="1532399">)</span><span class="op" id="1532400">)</span><span class="op" id="1532401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532406">if</span>&nbsp;<span class="ident" id="1532409">t</span><span class="op" id="1532410">.</span><span class="ident" id="1532411">mtyp</span>&nbsp;<span class="op" id="1532416">==</span>&nbsp;<span class="ident" id="1532419">itype</span>&nbsp;<span class="op" id="1532425">&amp;&amp;</span>&nbsp;<span class="ident" id="1532428">t</span><span class="op" id="1532429">.</span><span class="ident" id="1532430">name</span>&nbsp;<span class="op" id="1532435">==</span>&nbsp;<span class="ident" id="1532438">iname</span>&nbsp;<span class="op" id="1532444">&amp;&amp;</span>&nbsp;<span class="ident" id="1532447">t</span><span class="op" id="1532448">.</span><span class="ident" id="1532449">pkgpath</span>&nbsp;<span class="op" id="1532457">==</span>&nbsp;<span class="ident" id="1532460">ipkgpath</span>&nbsp;<span class="op" id="1532469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532475">if</span>&nbsp;<span class="ident" id="1532478">m</span>&nbsp;<span class="op" id="1532480">!=</span>&nbsp;<span class="ident" id="1532483">nil</span>&nbsp;<span class="op" id="1532487">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532494">*</span><span class="op" id="1532495">(</span><span class="op" id="1532496">*</span><span class="ident" id="1532497">unsafe</span><span class="op" id="1532503">.</span><span class="ident" id="1532504">Pointer</span><span class="op" id="1532511">)</span><span class="op" id="1532512">(</span><span class="ident" id="1532513">add</span><span class="op" id="1532516">(</span><span class="ident" id="1532517">unsafe</span><span class="op" id="1532523">.</span><span class="ident" id="1532524">Pointer</span><span class="op" id="1532531">(</span><span class="ident" id="1532532">m</span><span class="op" id="1532533">)</span><span class="op" id="1532534">,</span>&nbsp;<span class="ident" id="1532536">unsafe</span><span class="op" id="1532542">.</span><span class="ident" id="1532543">Sizeof</span><span class="op" id="1532549">(</span><span class="ident" id="1532550">itab</span><span class="op" id="1532554">{</span><span class="op" id="1532555">}</span><span class="op" id="1532556">)</span><span class="op" id="1532557">+</span><span class="builtintype" id="1532558">uintptr</span><span class="op" id="1532565">(</span><span class="ident" id="1532566">k</span><span class="op" id="1532567">)</span><span class="op" id="1532568">*</span><span class="ident" id="1532569">ptrSize</span><span class="op" id="1532576">)</span><span class="op" id="1532577">)</span>&nbsp;<span class="op" id="1532579">=</span>&nbsp;<span class="ident" id="1532581">t</span><span class="op" id="1532582">.</span><span class="ident" id="1532583">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532597">goto</span>&nbsp;<span class="ident" id="1532602">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532621">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1532625">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532649">if</span>&nbsp;<span class="op" id="1532652">!</span><span class="ident" id="1532653">canfail</span>&nbsp;<span class="op" id="1532661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532666">if</span>&nbsp;<span class="ident" id="1532669">locked</span>&nbsp;<span class="op" id="1532676">!=</span>&nbsp;<span class="num" id="1532679">0</span>&nbsp;<span class="op" id="1532681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532687">unlock</span><span class="op" id="1532693">(</span><span class="op" id="1532694">&amp;</span><span class="ident" id="1532695">ifaceLock</span><span class="op" id="1532704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532709">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1532714">panic</span><span class="op" id="1532719">(</span><span class="op" id="1532720">&amp;</span><span class="ident" id="1532721">TypeAssertionError</span><span class="op" id="1532739">{</span><span class="string" id="1532740">&#34;&#34;</span><span class="op" id="1532742">,</span>&nbsp;<span class="op" id="1532744">*</span><span class="ident" id="1532745">typ</span><span class="op" id="1532748">.</span><span class="ident" id="1532749">_string</span><span class="op" id="1532756">,</span>&nbsp;<span class="op" id="1532758">*</span><span class="ident" id="1532759">inter</span><span class="op" id="1532764">.</span><span class="ident" id="1532765">typ</span><span class="op" id="1532768">.</span><span class="ident" id="1532769">_string</span><span class="op" id="1532776">,</span>&nbsp;<span class="op" id="1532778">*</span><span class="ident" id="1532779">iname</span><span class="op" id="1532784">}</span><span class="op" id="1532785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532789">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532793">m</span><span class="op" id="1532794">.</span><span class="ident" id="1532795">bad</span>&nbsp;<span class="op" id="1532799">=</span>&nbsp;<span class="num" id="1532801">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532805">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532812">nextimethod</span><span class="op" id="1532823">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532826">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532829">if</span>&nbsp;<span class="ident" id="1532832">locked</span>&nbsp;<span class="op" id="1532839">==</span>&nbsp;<span class="num" id="1532842">0</span>&nbsp;<span class="op" id="1532844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532848">gothrow</span><span class="op" id="1532855">(</span><span class="string" id="1532856">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1532878">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1532881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532884">m</span><span class="op" id="1532885">.</span><span class="ident" id="1532886">link</span>&nbsp;<span class="op" id="1532891">=</span>&nbsp;<span class="ident" id="1532893">hash</span><span class="op" id="1532897">[</span><span class="ident" id="1532898">h</span><span class="op" id="1532899">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532902">atomicstorep</span><span class="op" id="1532914">(</span><span class="ident" id="1532915">unsafe</span><span class="op" id="1532921">.</span><span class="ident" id="1532922">Pointer</span><span class="op" id="1532929">(</span><span class="op" id="1532930">&amp;</span><span class="ident" id="1532931">hash</span><span class="op" id="1532935">[</span><span class="ident" id="1532936">h</span><span class="op" id="1532937">]</span><span class="op" id="1532938">)</span><span class="op" id="1532939">,</span>&nbsp;<span class="ident" id="1532941">unsafe</span><span class="op" id="1532947">.</span><span class="ident" id="1532948">Pointer</span><span class="op" id="1532955">(</span><span class="ident" id="1532956">m</span><span class="op" id="1532957">)</span><span class="op" id="1532958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1532961">unlock</span><span class="op" id="1532967">(</span><span class="op" id="1532968">&amp;</span><span class="ident" id="1532969">ifaceLock</span><span class="op" id="1532978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532981">if</span>&nbsp;<span class="ident" id="1532984">m</span><span class="op" id="1532985">.</span><span class="ident" id="1532986">bad</span>&nbsp;<span class="op" id="1532990">!=</span>&nbsp;<span class="num" id="1532993">0</span>&nbsp;<span class="op" id="1532995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1532999">return</span>&nbsp;<span class="ident" id="1533006">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1533011">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533014">return</span>&nbsp;<span class="ident" id="1533021">m</span><br>
<span class="lineno"></span><span class="op" id="1533023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1533026">func</span>&nbsp;<span class="ident" id="1533031">typ2Itab</span><span class="op" id="1533039">(</span><span class="ident" id="1533040">t</span>&nbsp;<span class="op" id="1533042">*</span><span class="ident" id="1533043">_type</span><span class="op" id="1533048">,</span>&nbsp;<span class="ident" id="1533050">inter</span>&nbsp;<span class="op" id="1533056">*</span><span class="ident" id="1533057">interfacetype</span><span class="op" id="1533070">,</span>&nbsp;<span class="ident" id="1533072">cache</span>&nbsp;<span class="op" id="1533078">*</span><span class="op" id="1533079">*</span><span class="ident" id="1533080">itab</span><span class="op" id="1533084">)</span>&nbsp;<span class="op" id="1533086">*</span><span class="ident" id="1533087">itab</span>&nbsp;<span class="op" id="1533092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533095">tab</span>&nbsp;<span class="op" id="1533099">:=</span>&nbsp;<span class="ident" id="1533102">getitab</span><span class="op" id="1533109">(</span><span class="ident" id="1533110">inter</span><span class="op" id="1533115">,</span>&nbsp;<span class="ident" id="1533117">t</span><span class="op" id="1533118">,</span>&nbsp;<span class="builtintype" id="1533120">false</span><span class="op" id="1533125">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533128">atomicstorep</span><span class="op" id="1533140">(</span><span class="ident" id="1533141">unsafe</span><span class="op" id="1533147">.</span><span class="ident" id="1533148">Pointer</span><span class="op" id="1533155">(</span><span class="ident" id="1533156">cache</span><span class="op" id="1533161">)</span><span class="op" id="1533162">,</span>&nbsp;<span class="ident" id="1533164">unsafe</span><span class="op" id="1533170">.</span><span class="ident" id="1533171">Pointer</span><span class="op" id="1533178">(</span><span class="ident" id="1533179">tab</span><span class="op" id="1533182">)</span><span class="op" id="1533183">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533186">return</span>&nbsp;<span class="ident" id="1533193">tab</span><br>
<span class="lineno"></span><span class="op" id="1533197">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1533200">func</span>&nbsp;<span class="ident" id="1533205">convT2E</span><span class="op" id="1533212">(</span><span class="ident" id="1533213">t</span>&nbsp;<span class="op" id="1533215">*</span><span class="ident" id="1533216">_type</span><span class="op" id="1533221">,</span>&nbsp;<span class="ident" id="1533223">elem</span>&nbsp;<span class="ident" id="1533228">unsafe</span><span class="op" id="1533234">.</span><span class="ident" id="1533235">Pointer</span><span class="op" id="1533242">)</span>&nbsp;<span class="op" id="1533244">(</span><span class="ident" id="1533245">e</span>&nbsp;<span class="keyword" id="1533247">interface</span><span class="op" id="1533256">{</span><span class="op" id="1533257">}</span><span class="op" id="1533258">)</span>&nbsp;<span class="op" id="1533260">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533263">size</span>&nbsp;<span class="op" id="1533268">:=</span>&nbsp;<span class="builtintype" id="1533271">uintptr</span><span class="op" id="1533278">(</span><span class="ident" id="1533279">t</span><span class="op" id="1533280">.</span><span class="ident" id="1533281">size</span><span class="op" id="1533285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533288">ep</span>&nbsp;<span class="op" id="1533291">:=</span>&nbsp;<span class="op" id="1533294">(</span><span class="op" id="1533295">*</span><span class="ident" id="1533296">eface</span><span class="op" id="1533301">)</span><span class="op" id="1533302">(</span><span class="ident" id="1533303">unsafe</span><span class="op" id="1533309">.</span><span class="ident" id="1533310">Pointer</span><span class="op" id="1533317">(</span><span class="op" id="1533318">&amp;</span><span class="ident" id="1533319">e</span><span class="op" id="1533320">)</span><span class="op" id="1533321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533324">if</span>&nbsp;<span class="ident" id="1533327">isDirectIface</span><span class="op" id="1533340">(</span><span class="ident" id="1533341">t</span><span class="op" id="1533342">)</span>&nbsp;<span class="op" id="1533344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533348">ep</span><span class="op" id="1533350">.</span><span class="ident" id="1533351">_type</span>&nbsp;<span class="op" id="1533357">=</span>&nbsp;<span class="ident" id="1533359">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533363">memmove</span><span class="op" id="1533370">(</span><span class="ident" id="1533371">unsafe</span><span class="op" id="1533377">.</span><span class="ident" id="1533378">Pointer</span><span class="op" id="1533385">(</span><span class="op" id="1533386">&amp;</span><span class="ident" id="1533387">ep</span><span class="op" id="1533389">.</span><span class="ident" id="1533390">data</span><span class="op" id="1533394">)</span><span class="op" id="1533395">,</span>&nbsp;<span class="ident" id="1533397">elem</span><span class="op" id="1533401">,</span>&nbsp;<span class="ident" id="1533403">size</span><span class="op" id="1533407">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1533410">}</span>&nbsp;<span class="keyword" id="1533412">else</span>&nbsp;<span class="op" id="1533417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533421">x</span>&nbsp;<span class="op" id="1533423">:=</span>&nbsp;<span class="ident" id="1533426">newobject</span><span class="op" id="1533435">(</span><span class="ident" id="1533436">t</span><span class="op" id="1533437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1533441">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1533506">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533582">memmove</span><span class="op" id="1533589">(</span><span class="ident" id="1533590">x</span><span class="op" id="1533591">,</span>&nbsp;<span class="ident" id="1533593">elem</span><span class="op" id="1533597">,</span>&nbsp;<span class="ident" id="1533599">size</span><span class="op" id="1533603">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533607">ep</span><span class="op" id="1533609">.</span><span class="ident" id="1533610">_type</span>&nbsp;<span class="op" id="1533616">=</span>&nbsp;<span class="ident" id="1533618">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533622">ep</span><span class="op" id="1533624">.</span><span class="ident" id="1533625">data</span>&nbsp;<span class="op" id="1533630">=</span>&nbsp;<span class="ident" id="1533632">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1533635">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533638">return</span><br>
<span class="lineno"></span><span class="op" id="1533645">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1533648">func</span>&nbsp;<span class="ident" id="1533653">convT2I</span><span class="op" id="1533660">(</span><span class="ident" id="1533661">t</span>&nbsp;<span class="op" id="1533663">*</span><span class="ident" id="1533664">_type</span><span class="op" id="1533669">,</span>&nbsp;<span class="ident" id="1533671">inter</span>&nbsp;<span class="op" id="1533677">*</span><span class="ident" id="1533678">interfacetype</span><span class="op" id="1533691">,</span>&nbsp;<span class="ident" id="1533693">cache</span>&nbsp;<span class="op" id="1533699">*</span><span class="op" id="1533700">*</span><span class="ident" id="1533701">itab</span><span class="op" id="1533705">,</span>&nbsp;<span class="ident" id="1533707">elem</span>&nbsp;<span class="ident" id="1533712">unsafe</span><span class="op" id="1533718">.</span><span class="ident" id="1533719">Pointer</span><span class="op" id="1533726">)</span>&nbsp;<span class="op" id="1533728">(</span><span class="ident" id="1533729">i</span>&nbsp;<span class="ident" id="1533731">fInterface</span><span class="op" id="1533741">)</span>&nbsp;<span class="op" id="1533743">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533746">tab</span>&nbsp;<span class="op" id="1533750">:=</span>&nbsp;<span class="op" id="1533753">(</span><span class="op" id="1533754">*</span><span class="ident" id="1533755">itab</span><span class="op" id="1533759">)</span><span class="op" id="1533760">(</span><span class="ident" id="1533761">atomicloadp</span><span class="op" id="1533772">(</span><span class="ident" id="1533773">unsafe</span><span class="op" id="1533779">.</span><span class="ident" id="1533780">Pointer</span><span class="op" id="1533787">(</span><span class="ident" id="1533788">cache</span><span class="op" id="1533793">)</span><span class="op" id="1533794">)</span><span class="op" id="1533795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533798">if</span>&nbsp;<span class="ident" id="1533801">tab</span>&nbsp;<span class="op" id="1533805">==</span>&nbsp;<span class="ident" id="1533808">nil</span>&nbsp;<span class="op" id="1533812">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533816">tab</span>&nbsp;<span class="op" id="1533820">=</span>&nbsp;<span class="ident" id="1533822">getitab</span><span class="op" id="1533829">(</span><span class="ident" id="1533830">inter</span><span class="op" id="1533835">,</span>&nbsp;<span class="ident" id="1533837">t</span><span class="op" id="1533838">,</span>&nbsp;<span class="builtintype" id="1533840">false</span><span class="op" id="1533845">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533849">atomicstorep</span><span class="op" id="1533861">(</span><span class="ident" id="1533862">unsafe</span><span class="op" id="1533868">.</span><span class="ident" id="1533869">Pointer</span><span class="op" id="1533876">(</span><span class="ident" id="1533877">cache</span><span class="op" id="1533882">)</span><span class="op" id="1533883">,</span>&nbsp;<span class="ident" id="1533885">unsafe</span><span class="op" id="1533891">.</span><span class="ident" id="1533892">Pointer</span><span class="op" id="1533899">(</span><span class="ident" id="1533900">tab</span><span class="op" id="1533903">)</span><span class="op" id="1533904">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1533907">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533910">size</span>&nbsp;<span class="op" id="1533915">:=</span>&nbsp;<span class="builtintype" id="1533918">uintptr</span><span class="op" id="1533925">(</span><span class="ident" id="1533926">t</span><span class="op" id="1533927">.</span><span class="ident" id="1533928">size</span><span class="op" id="1533932">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533935">pi</span>&nbsp;<span class="op" id="1533938">:=</span>&nbsp;<span class="op" id="1533941">(</span><span class="op" id="1533942">*</span><span class="ident" id="1533943">iface</span><span class="op" id="1533948">)</span><span class="op" id="1533949">(</span><span class="ident" id="1533950">unsafe</span><span class="op" id="1533956">.</span><span class="ident" id="1533957">Pointer</span><span class="op" id="1533964">(</span><span class="op" id="1533965">&amp;</span><span class="ident" id="1533966">i</span><span class="op" id="1533967">)</span><span class="op" id="1533968">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1533971">if</span>&nbsp;<span class="ident" id="1533974">isDirectIface</span><span class="op" id="1533987">(</span><span class="ident" id="1533988">t</span><span class="op" id="1533989">)</span>&nbsp;<span class="op" id="1533991">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1533995">pi</span><span class="op" id="1533997">.</span><span class="ident" id="1533998">tab</span>&nbsp;<span class="op" id="1534002">=</span>&nbsp;<span class="ident" id="1534004">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534010">memmove</span><span class="op" id="1534017">(</span><span class="ident" id="1534018">unsafe</span><span class="op" id="1534024">.</span><span class="ident" id="1534025">Pointer</span><span class="op" id="1534032">(</span><span class="op" id="1534033">&amp;</span><span class="ident" id="1534034">pi</span><span class="op" id="1534036">.</span><span class="ident" id="1534037">data</span><span class="op" id="1534041">)</span><span class="op" id="1534042">,</span>&nbsp;<span class="ident" id="1534044">elem</span><span class="op" id="1534048">,</span>&nbsp;<span class="ident" id="1534050">size</span><span class="op" id="1534054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534057">}</span>&nbsp;<span class="keyword" id="1534059">else</span>&nbsp;<span class="op" id="1534064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534068">x</span>&nbsp;<span class="op" id="1534070">:=</span>&nbsp;<span class="ident" id="1534073">newobject</span><span class="op" id="1534082">(</span><span class="ident" id="1534083">t</span><span class="op" id="1534084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534088">memmove</span><span class="op" id="1534095">(</span><span class="ident" id="1534096">x</span><span class="op" id="1534097">,</span>&nbsp;<span class="ident" id="1534099">elem</span><span class="op" id="1534103">,</span>&nbsp;<span class="ident" id="1534105">size</span><span class="op" id="1534109">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534113">pi</span><span class="op" id="1534115">.</span><span class="ident" id="1534116">tab</span>&nbsp;<span class="op" id="1534120">=</span>&nbsp;<span class="ident" id="1534122">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534128">pi</span><span class="op" id="1534130">.</span><span class="ident" id="1534131">data</span>&nbsp;<span class="op" id="1534136">=</span>&nbsp;<span class="ident" id="1534138">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534141">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534144">return</span><br>
<span class="lineno"></span><span class="op" id="1534151">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1534154">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1534231">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1534305">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1534318">func</span>&nbsp;<span class="ident" id="1534323">assertI2T</span><span class="op" id="1534332">(</span><span class="ident" id="1534333">t</span>&nbsp;<span class="op" id="1534335">*</span><span class="ident" id="1534336">_type</span><span class="op" id="1534341">,</span>&nbsp;<span class="ident" id="1534343">i</span>&nbsp;<span class="ident" id="1534345">fInterface</span><span class="op" id="1534355">)</span>&nbsp;<span class="op" id="1534357">(</span><span class="ident" id="1534358">r</span>&nbsp;<span class="keyword" id="1534360">struct</span><span class="op" id="1534366">{</span><span class="op" id="1534367">}</span><span class="op" id="1534368">)</span>&nbsp;<span class="op" id="1534370">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534373">ip</span>&nbsp;<span class="op" id="1534376">:=</span>&nbsp;<span class="op" id="1534379">(</span><span class="op" id="1534380">*</span><span class="ident" id="1534381">iface</span><span class="op" id="1534386">)</span><span class="op" id="1534387">(</span><span class="ident" id="1534388">unsafe</span><span class="op" id="1534394">.</span><span class="ident" id="1534395">Pointer</span><span class="op" id="1534402">(</span><span class="op" id="1534403">&amp;</span><span class="ident" id="1534404">i</span><span class="op" id="1534405">)</span><span class="op" id="1534406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534409">tab</span>&nbsp;<span class="op" id="1534413">:=</span>&nbsp;<span class="ident" id="1534416">ip</span><span class="op" id="1534418">.</span><span class="ident" id="1534419">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534424">if</span>&nbsp;<span class="ident" id="1534427">tab</span>&nbsp;<span class="op" id="1534431">==</span>&nbsp;<span class="ident" id="1534434">nil</span>&nbsp;<span class="op" id="1534438">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1534442">panic</span><span class="op" id="1534447">(</span><span class="op" id="1534448">&amp;</span><span class="ident" id="1534449">TypeAssertionError</span><span class="op" id="1534467">{</span><span class="string" id="1534468">&#34;&#34;</span><span class="op" id="1534470">,</span>&nbsp;<span class="string" id="1534472">&#34;&#34;</span><span class="op" id="1534474">,</span>&nbsp;<span class="op" id="1534476">*</span><span class="ident" id="1534477">t</span><span class="op" id="1534478">.</span><span class="ident" id="1534479">_string</span><span class="op" id="1534486">,</span>&nbsp;<span class="string" id="1534488">&#34;&#34;</span><span class="op" id="1534490">}</span><span class="op" id="1534491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534494">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534497">if</span>&nbsp;<span class="ident" id="1534500">tab</span><span class="op" id="1534503">.</span><span class="ident" id="1534504">_type</span>&nbsp;<span class="op" id="1534510">!=</span>&nbsp;<span class="ident" id="1534513">t</span>&nbsp;<span class="op" id="1534515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1534519">panic</span><span class="op" id="1534524">(</span><span class="op" id="1534525">&amp;</span><span class="ident" id="1534526">TypeAssertionError</span><span class="op" id="1534544">{</span><span class="op" id="1534545">*</span><span class="ident" id="1534546">tab</span><span class="op" id="1534549">.</span><span class="ident" id="1534550">inter</span><span class="op" id="1534555">.</span><span class="ident" id="1534556">typ</span><span class="op" id="1534559">.</span><span class="ident" id="1534560">_string</span><span class="op" id="1534567">,</span>&nbsp;<span class="op" id="1534569">*</span><span class="ident" id="1534570">tab</span><span class="op" id="1534573">.</span><span class="ident" id="1534574">_type</span><span class="op" id="1534579">.</span><span class="ident" id="1534580">_string</span><span class="op" id="1534587">,</span>&nbsp;<span class="op" id="1534589">*</span><span class="ident" id="1534590">t</span><span class="op" id="1534591">.</span><span class="ident" id="1534592">_string</span><span class="op" id="1534599">,</span>&nbsp;<span class="string" id="1534601">&#34;&#34;</span><span class="op" id="1534603">}</span><span class="op" id="1534604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534610">size</span>&nbsp;<span class="op" id="1534615">:=</span>&nbsp;<span class="builtintype" id="1534618">uintptr</span><span class="op" id="1534625">(</span><span class="ident" id="1534626">t</span><span class="op" id="1534627">.</span><span class="ident" id="1534628">size</span><span class="op" id="1534632">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534635">if</span>&nbsp;<span class="ident" id="1534638">isDirectIface</span><span class="op" id="1534651">(</span><span class="ident" id="1534652">t</span><span class="op" id="1534653">)</span>&nbsp;<span class="op" id="1534655">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534659">memmove</span><span class="op" id="1534666">(</span><span class="ident" id="1534667">unsafe</span><span class="op" id="1534673">.</span><span class="ident" id="1534674">Pointer</span><span class="op" id="1534681">(</span><span class="op" id="1534682">&amp;</span><span class="ident" id="1534683">r</span><span class="op" id="1534684">)</span><span class="op" id="1534685">,</span>&nbsp;<span class="ident" id="1534687">unsafe</span><span class="op" id="1534693">.</span><span class="ident" id="1534694">Pointer</span><span class="op" id="1534701">(</span><span class="op" id="1534702">&amp;</span><span class="ident" id="1534703">ip</span><span class="op" id="1534705">.</span><span class="ident" id="1534706">data</span><span class="op" id="1534710">)</span><span class="op" id="1534711">,</span>&nbsp;<span class="ident" id="1534713">size</span><span class="op" id="1534717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534720">}</span>&nbsp;<span class="keyword" id="1534722">else</span>&nbsp;<span class="op" id="1534727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534731">memmove</span><span class="op" id="1534738">(</span><span class="ident" id="1534739">unsafe</span><span class="op" id="1534745">.</span><span class="ident" id="1534746">Pointer</span><span class="op" id="1534753">(</span><span class="op" id="1534754">&amp;</span><span class="ident" id="1534755">r</span><span class="op" id="1534756">)</span><span class="op" id="1534757">,</span>&nbsp;<span class="ident" id="1534759">ip</span><span class="op" id="1534761">.</span><span class="ident" id="1534762">data</span><span class="op" id="1534766">,</span>&nbsp;<span class="ident" id="1534768">size</span><span class="op" id="1534772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1534775">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534778">return</span><br>
<span class="lineno">190</span><span class="op" id="1534785">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1534788">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1534801">func</span>&nbsp;<span class="ident" id="1534806">assertI2T2</span><span class="op" id="1534816">(</span><span class="ident" id="1534817">t</span>&nbsp;<span class="op" id="1534819">*</span><span class="ident" id="1534820">_type</span><span class="op" id="1534825">,</span>&nbsp;<span class="ident" id="1534827">i</span>&nbsp;<span class="ident" id="1534829">fInterface</span><span class="op" id="1534839">)</span>&nbsp;<span class="op" id="1534841">(</span><span class="ident" id="1534842">r</span>&nbsp;<span class="builtintype" id="1534844">byte</span><span class="op" id="1534848">)</span>&nbsp;<span class="op" id="1534850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534853">ip</span>&nbsp;<span class="op" id="1534856">:=</span>&nbsp;<span class="op" id="1534859">(</span><span class="op" id="1534860">*</span><span class="ident" id="1534861">iface</span><span class="op" id="1534866">)</span><span class="op" id="1534867">(</span><span class="ident" id="1534868">unsafe</span><span class="op" id="1534874">.</span><span class="ident" id="1534875">Pointer</span><span class="op" id="1534882">(</span><span class="op" id="1534883">&amp;</span><span class="ident" id="1534884">i</span><span class="op" id="1534885">)</span><span class="op" id="1534886">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534889">size</span>&nbsp;<span class="op" id="1534894">:=</span>&nbsp;<span class="builtintype" id="1534897">uintptr</span><span class="op" id="1534904">(</span><span class="ident" id="1534905">t</span><span class="op" id="1534906">.</span><span class="ident" id="1534907">size</span><span class="op" id="1534911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534914">ok</span>&nbsp;<span class="op" id="1534917">:=</span>&nbsp;<span class="op" id="1534920">(</span><span class="op" id="1534921">*</span><span class="builtintype" id="1534922">bool</span><span class="op" id="1534926">)</span><span class="op" id="1534927">(</span><span class="ident" id="1534928">add</span><span class="op" id="1534931">(</span><span class="ident" id="1534932">unsafe</span><span class="op" id="1534938">.</span><span class="ident" id="1534939">Pointer</span><span class="op" id="1534946">(</span><span class="op" id="1534947">&amp;</span><span class="ident" id="1534948">r</span><span class="op" id="1534949">)</span><span class="op" id="1534950">,</span>&nbsp;<span class="ident" id="1534952">size</span><span class="op" id="1534956">)</span><span class="op" id="1534957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1534960">tab</span>&nbsp;<span class="op" id="1534964">:=</span>&nbsp;<span class="ident" id="1534967">ip</span><span class="op" id="1534969">.</span><span class="ident" id="1534970">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1534975">if</span>&nbsp;<span class="ident" id="1534978">tab</span>&nbsp;<span class="op" id="1534982">==</span>&nbsp;<span class="ident" id="1534985">nil</span>&nbsp;<span class="op" id="1534989">||</span>&nbsp;<span class="ident" id="1534992">tab</span><span class="op" id="1534995">.</span><span class="ident" id="1534996">_type</span>&nbsp;<span class="op" id="1535002">!=</span>&nbsp;<span class="ident" id="1535005">t</span>&nbsp;<span class="op" id="1535007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535011">*</span><span class="ident" id="1535012">ok</span>&nbsp;<span class="op" id="1535015">=</span>&nbsp;<span class="builtintype" id="1535017">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535025">memclr</span><span class="op" id="1535031">(</span><span class="ident" id="1535032">unsafe</span><span class="op" id="1535038">.</span><span class="ident" id="1535039">Pointer</span><span class="op" id="1535046">(</span><span class="op" id="1535047">&amp;</span><span class="ident" id="1535048">r</span><span class="op" id="1535049">)</span><span class="op" id="1535050">,</span>&nbsp;<span class="ident" id="1535052">size</span><span class="op" id="1535056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535060">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535071">*</span><span class="ident" id="1535072">ok</span>&nbsp;<span class="op" id="1535075">=</span>&nbsp;<span class="builtintype" id="1535077">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535083">if</span>&nbsp;<span class="ident" id="1535086">isDirectIface</span><span class="op" id="1535099">(</span><span class="ident" id="1535100">t</span><span class="op" id="1535101">)</span>&nbsp;<span class="op" id="1535103">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535107">memmove</span><span class="op" id="1535114">(</span><span class="ident" id="1535115">unsafe</span><span class="op" id="1535121">.</span><span class="ident" id="1535122">Pointer</span><span class="op" id="1535129">(</span><span class="op" id="1535130">&amp;</span><span class="ident" id="1535131">r</span><span class="op" id="1535132">)</span><span class="op" id="1535133">,</span>&nbsp;<span class="ident" id="1535135">unsafe</span><span class="op" id="1535141">.</span><span class="ident" id="1535142">Pointer</span><span class="op" id="1535149">(</span><span class="op" id="1535150">&amp;</span><span class="ident" id="1535151">ip</span><span class="op" id="1535153">.</span><span class="ident" id="1535154">data</span><span class="op" id="1535158">)</span><span class="op" id="1535159">,</span>&nbsp;<span class="ident" id="1535161">size</span><span class="op" id="1535165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535168">}</span>&nbsp;<span class="keyword" id="1535170">else</span>&nbsp;<span class="op" id="1535175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535179">memmove</span><span class="op" id="1535186">(</span><span class="ident" id="1535187">unsafe</span><span class="op" id="1535193">.</span><span class="ident" id="1535194">Pointer</span><span class="op" id="1535201">(</span><span class="op" id="1535202">&amp;</span><span class="ident" id="1535203">r</span><span class="op" id="1535204">)</span><span class="op" id="1535205">,</span>&nbsp;<span class="ident" id="1535207">ip</span><span class="op" id="1535209">.</span><span class="ident" id="1535210">data</span><span class="op" id="1535214">,</span>&nbsp;<span class="ident" id="1535216">size</span><span class="op" id="1535220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535223">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535226">return</span><br>
<span class="lineno">210</span><span class="op" id="1535233">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1535236">func</span>&nbsp;<span class="ident" id="1535241">assertI2TOK</span><span class="op" id="1535252">(</span><span class="ident" id="1535253">t</span>&nbsp;<span class="op" id="1535255">*</span><span class="ident" id="1535256">_type</span><span class="op" id="1535261">,</span>&nbsp;<span class="ident" id="1535263">i</span>&nbsp;<span class="ident" id="1535265">fInterface</span><span class="op" id="1535275">)</span>&nbsp;<span class="builtintype" id="1535277">bool</span>&nbsp;<span class="op" id="1535282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535285">ip</span>&nbsp;<span class="op" id="1535288">:=</span>&nbsp;<span class="op" id="1535291">(</span><span class="op" id="1535292">*</span><span class="ident" id="1535293">iface</span><span class="op" id="1535298">)</span><span class="op" id="1535299">(</span><span class="ident" id="1535300">unsafe</span><span class="op" id="1535306">.</span><span class="ident" id="1535307">Pointer</span><span class="op" id="1535314">(</span><span class="op" id="1535315">&amp;</span><span class="ident" id="1535316">i</span><span class="op" id="1535317">)</span><span class="op" id="1535318">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535321">tab</span>&nbsp;<span class="op" id="1535325">:=</span>&nbsp;<span class="ident" id="1535328">ip</span><span class="op" id="1535330">.</span><span class="ident" id="1535331">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535336">return</span>&nbsp;<span class="ident" id="1535343">tab</span>&nbsp;<span class="op" id="1535347">!=</span>&nbsp;<span class="ident" id="1535350">nil</span>&nbsp;<span class="op" id="1535354">&amp;&amp;</span>&nbsp;<span class="ident" id="1535357">tab</span><span class="op" id="1535360">.</span><span class="ident" id="1535361">_type</span>&nbsp;<span class="op" id="1535367">==</span>&nbsp;<span class="ident" id="1535370">t</span><br>
<span class="lineno"></span><span class="op" id="1535372">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1535375">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1535388">func</span>&nbsp;<span class="ident" id="1535393">assertE2T</span><span class="op" id="1535402">(</span><span class="ident" id="1535403">t</span>&nbsp;<span class="op" id="1535405">*</span><span class="ident" id="1535406">_type</span><span class="op" id="1535411">,</span>&nbsp;<span class="ident" id="1535413">e</span>&nbsp;<span class="keyword" id="1535415">interface</span><span class="op" id="1535424">{</span><span class="op" id="1535425">}</span><span class="op" id="1535426">)</span>&nbsp;<span class="op" id="1535428">(</span><span class="ident" id="1535429">r</span>&nbsp;<span class="keyword" id="1535431">struct</span><span class="op" id="1535437">{</span><span class="op" id="1535438">}</span><span class="op" id="1535439">)</span>&nbsp;<span class="op" id="1535441">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535444">ep</span>&nbsp;<span class="op" id="1535447">:=</span>&nbsp;<span class="op" id="1535450">(</span><span class="op" id="1535451">*</span><span class="ident" id="1535452">eface</span><span class="op" id="1535457">)</span><span class="op" id="1535458">(</span><span class="ident" id="1535459">unsafe</span><span class="op" id="1535465">.</span><span class="ident" id="1535466">Pointer</span><span class="op" id="1535473">(</span><span class="op" id="1535474">&amp;</span><span class="ident" id="1535475">e</span><span class="op" id="1535476">)</span><span class="op" id="1535477">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535480">if</span>&nbsp;<span class="ident" id="1535483">ep</span><span class="op" id="1535485">.</span><span class="ident" id="1535486">_type</span>&nbsp;<span class="op" id="1535492">==</span>&nbsp;<span class="ident" id="1535495">nil</span>&nbsp;<span class="op" id="1535499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1535503">panic</span><span class="op" id="1535508">(</span><span class="op" id="1535509">&amp;</span><span class="ident" id="1535510">TypeAssertionError</span><span class="op" id="1535528">{</span><span class="string" id="1535529">&#34;&#34;</span><span class="op" id="1535531">,</span>&nbsp;<span class="string" id="1535533">&#34;&#34;</span><span class="op" id="1535535">,</span>&nbsp;<span class="op" id="1535537">*</span><span class="ident" id="1535538">t</span><span class="op" id="1535539">.</span><span class="ident" id="1535540">_string</span><span class="op" id="1535547">,</span>&nbsp;<span class="string" id="1535549">&#34;&#34;</span><span class="op" id="1535551">}</span><span class="op" id="1535552">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535555">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535558">if</span>&nbsp;<span class="ident" id="1535561">ep</span><span class="op" id="1535563">.</span><span class="ident" id="1535564">_type</span>&nbsp;<span class="op" id="1535570">!=</span>&nbsp;<span class="ident" id="1535573">t</span>&nbsp;<span class="op" id="1535575">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1535579">panic</span><span class="op" id="1535584">(</span><span class="op" id="1535585">&amp;</span><span class="ident" id="1535586">TypeAssertionError</span><span class="op" id="1535604">{</span><span class="string" id="1535605">&#34;&#34;</span><span class="op" id="1535607">,</span>&nbsp;<span class="op" id="1535609">*</span><span class="ident" id="1535610">ep</span><span class="op" id="1535612">.</span><span class="ident" id="1535613">_type</span><span class="op" id="1535618">.</span><span class="ident" id="1535619">_string</span><span class="op" id="1535626">,</span>&nbsp;<span class="op" id="1535628">*</span><span class="ident" id="1535629">t</span><span class="op" id="1535630">.</span><span class="ident" id="1535631">_string</span><span class="op" id="1535638">,</span>&nbsp;<span class="string" id="1535640">&#34;&#34;</span><span class="op" id="1535642">}</span><span class="op" id="1535643">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535646">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535649">size</span>&nbsp;<span class="op" id="1535654">:=</span>&nbsp;<span class="builtintype" id="1535657">uintptr</span><span class="op" id="1535664">(</span><span class="ident" id="1535665">t</span><span class="op" id="1535666">.</span><span class="ident" id="1535667">size</span><span class="op" id="1535671">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535674">if</span>&nbsp;<span class="ident" id="1535677">isDirectIface</span><span class="op" id="1535690">(</span><span class="ident" id="1535691">t</span><span class="op" id="1535692">)</span>&nbsp;<span class="op" id="1535694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535698">memmove</span><span class="op" id="1535705">(</span><span class="ident" id="1535706">unsafe</span><span class="op" id="1535712">.</span><span class="ident" id="1535713">Pointer</span><span class="op" id="1535720">(</span><span class="op" id="1535721">&amp;</span><span class="ident" id="1535722">r</span><span class="op" id="1535723">)</span><span class="op" id="1535724">,</span>&nbsp;<span class="ident" id="1535726">unsafe</span><span class="op" id="1535732">.</span><span class="ident" id="1535733">Pointer</span><span class="op" id="1535740">(</span><span class="op" id="1535741">&amp;</span><span class="ident" id="1535742">ep</span><span class="op" id="1535744">.</span><span class="ident" id="1535745">data</span><span class="op" id="1535749">)</span><span class="op" id="1535750">,</span>&nbsp;<span class="ident" id="1535752">size</span><span class="op" id="1535756">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535759">}</span>&nbsp;<span class="keyword" id="1535761">else</span>&nbsp;<span class="op" id="1535766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535770">memmove</span><span class="op" id="1535777">(</span><span class="ident" id="1535778">unsafe</span><span class="op" id="1535784">.</span><span class="ident" id="1535785">Pointer</span><span class="op" id="1535792">(</span><span class="op" id="1535793">&amp;</span><span class="ident" id="1535794">r</span><span class="op" id="1535795">)</span><span class="op" id="1535796">,</span>&nbsp;<span class="ident" id="1535798">ep</span><span class="op" id="1535800">.</span><span class="ident" id="1535801">data</span><span class="op" id="1535805">,</span>&nbsp;<span class="ident" id="1535807">size</span><span class="op" id="1535811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1535814">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1535817">return</span><br>
<span class="lineno"></span><span class="op" id="1535824">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1535827">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1535840">func</span>&nbsp;<span class="ident" id="1535845">assertE2T2</span><span class="op" id="1535855">(</span><span class="ident" id="1535856">t</span>&nbsp;<span class="op" id="1535858">*</span><span class="ident" id="1535859">_type</span><span class="op" id="1535864">,</span>&nbsp;<span class="ident" id="1535866">e</span>&nbsp;<span class="keyword" id="1535868">interface</span><span class="op" id="1535877">{</span><span class="op" id="1535878">}</span><span class="op" id="1535879">)</span>&nbsp;<span class="op" id="1535881">(</span><span class="ident" id="1535882">r</span>&nbsp;<span class="builtintype" id="1535884">byte</span><span class="op" id="1535888">)</span>&nbsp;<span class="op" id="1535890">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535893">ep</span>&nbsp;<span class="op" id="1535896">:=</span>&nbsp;<span class="op" id="1535899">(</span><span class="op" id="1535900">*</span><span class="ident" id="1535901">eface</span><span class="op" id="1535906">)</span><span class="op" id="1535907">(</span><span class="ident" id="1535908">unsafe</span><span class="op" id="1535914">.</span><span class="ident" id="1535915">Pointer</span><span class="op" id="1535922">(</span><span class="op" id="1535923">&amp;</span><span class="ident" id="1535924">e</span><span class="op" id="1535925">)</span><span class="op" id="1535926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535929">size</span>&nbsp;<span class="op" id="1535934">:=</span>&nbsp;<span class="builtintype" id="1535937">uintptr</span><span class="op" id="1535944">(</span><span class="ident" id="1535945">t</span><span class="op" id="1535946">.</span><span class="ident" id="1535947">size</span><span class="op" id="1535951">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1535954">ok</span>&nbsp;<span class="op" id="1535957">:=</span>&nbsp;<span class="op" id="1535960">(</span><span class="op" id="1535961">*</span><span class="builtintype" id="1535962">bool</span><span class="op" id="1535966">)</span><span class="op" id="1535967">(</span><span class="ident" id="1535968">add</span><span class="op" id="1535971">(</span><span class="ident" id="1535972">unsafe</span><span class="op" id="1535978">.</span><span class="ident" id="1535979">Pointer</span><span class="op" id="1535986">(</span><span class="op" id="1535987">&amp;</span><span class="ident" id="1535988">r</span><span class="op" id="1535989">)</span><span class="op" id="1535990">,</span>&nbsp;<span class="ident" id="1535992">size</span><span class="op" id="1535996">)</span><span class="op" id="1535997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536000">if</span>&nbsp;<span class="ident" id="1536003">ep</span><span class="op" id="1536005">.</span><span class="ident" id="1536006">_type</span>&nbsp;<span class="op" id="1536012">!=</span>&nbsp;<span class="ident" id="1536015">t</span>&nbsp;<span class="op" id="1536017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536021">*</span><span class="ident" id="1536022">ok</span>&nbsp;<span class="op" id="1536025">=</span>&nbsp;<span class="builtintype" id="1536027">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536035">memclr</span><span class="op" id="1536041">(</span><span class="ident" id="1536042">unsafe</span><span class="op" id="1536048">.</span><span class="ident" id="1536049">Pointer</span><span class="op" id="1536056">(</span><span class="op" id="1536057">&amp;</span><span class="ident" id="1536058">r</span><span class="op" id="1536059">)</span><span class="op" id="1536060">,</span>&nbsp;<span class="ident" id="1536062">size</span><span class="op" id="1536066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536070">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536078">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536081">*</span><span class="ident" id="1536082">ok</span>&nbsp;<span class="op" id="1536085">=</span>&nbsp;<span class="builtintype" id="1536087">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536093">if</span>&nbsp;<span class="ident" id="1536096">isDirectIface</span><span class="op" id="1536109">(</span><span class="ident" id="1536110">t</span><span class="op" id="1536111">)</span>&nbsp;<span class="op" id="1536113">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536117">memmove</span><span class="op" id="1536124">(</span><span class="ident" id="1536125">unsafe</span><span class="op" id="1536131">.</span><span class="ident" id="1536132">Pointer</span><span class="op" id="1536139">(</span><span class="op" id="1536140">&amp;</span><span class="ident" id="1536141">r</span><span class="op" id="1536142">)</span><span class="op" id="1536143">,</span>&nbsp;<span class="ident" id="1536145">unsafe</span><span class="op" id="1536151">.</span><span class="ident" id="1536152">Pointer</span><span class="op" id="1536159">(</span><span class="op" id="1536160">&amp;</span><span class="ident" id="1536161">ep</span><span class="op" id="1536163">.</span><span class="ident" id="1536164">data</span><span class="op" id="1536168">)</span><span class="op" id="1536169">,</span>&nbsp;<span class="ident" id="1536171">size</span><span class="op" id="1536175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536178">}</span>&nbsp;<span class="keyword" id="1536180">else</span>&nbsp;<span class="op" id="1536185">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536189">memmove</span><span class="op" id="1536196">(</span><span class="ident" id="1536197">unsafe</span><span class="op" id="1536203">.</span><span class="ident" id="1536204">Pointer</span><span class="op" id="1536211">(</span><span class="op" id="1536212">&amp;</span><span class="ident" id="1536213">r</span><span class="op" id="1536214">)</span><span class="op" id="1536215">,</span>&nbsp;<span class="ident" id="1536217">ep</span><span class="op" id="1536219">.</span><span class="ident" id="1536220">data</span><span class="op" id="1536224">,</span>&nbsp;<span class="ident" id="1536226">size</span><span class="op" id="1536230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536236">return</span><br>
<span class="lineno"></span><span class="op" id="1536243">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1536246">func</span>&nbsp;<span class="ident" id="1536251">assertE2TOK</span><span class="op" id="1536262">(</span><span class="ident" id="1536263">t</span>&nbsp;<span class="op" id="1536265">*</span><span class="ident" id="1536266">_type</span><span class="op" id="1536271">,</span>&nbsp;<span class="ident" id="1536273">e</span>&nbsp;<span class="keyword" id="1536275">interface</span><span class="op" id="1536284">{</span><span class="op" id="1536285">}</span><span class="op" id="1536286">)</span>&nbsp;<span class="builtintype" id="1536288">bool</span>&nbsp;<span class="op" id="1536293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536296">ep</span>&nbsp;<span class="op" id="1536299">:=</span>&nbsp;<span class="op" id="1536302">(</span><span class="op" id="1536303">*</span><span class="ident" id="1536304">eface</span><span class="op" id="1536309">)</span><span class="op" id="1536310">(</span><span class="ident" id="1536311">unsafe</span><span class="op" id="1536317">.</span><span class="ident" id="1536318">Pointer</span><span class="op" id="1536325">(</span><span class="op" id="1536326">&amp;</span><span class="ident" id="1536327">e</span><span class="op" id="1536328">)</span><span class="op" id="1536329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536332">return</span>&nbsp;<span class="ident" id="1536339">t</span>&nbsp;<span class="op" id="1536341">==</span>&nbsp;<span class="ident" id="1536344">ep</span><span class="op" id="1536346">.</span><span class="ident" id="1536347">_type</span><br>
<span class="lineno"></span><span class="op" id="1536353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1536356">func</span>&nbsp;<span class="ident" id="1536361">convI2E</span><span class="op" id="1536368">(</span><span class="ident" id="1536369">i</span>&nbsp;<span class="ident" id="1536371">fInterface</span><span class="op" id="1536381">)</span>&nbsp;<span class="op" id="1536383">(</span><span class="ident" id="1536384">r</span>&nbsp;<span class="keyword" id="1536386">interface</span><span class="op" id="1536395">{</span><span class="op" id="1536396">}</span><span class="op" id="1536397">)</span>&nbsp;<span class="op" id="1536399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536402">ip</span>&nbsp;<span class="op" id="1536405">:=</span>&nbsp;<span class="op" id="1536408">(</span><span class="op" id="1536409">*</span><span class="ident" id="1536410">iface</span><span class="op" id="1536415">)</span><span class="op" id="1536416">(</span><span class="ident" id="1536417">unsafe</span><span class="op" id="1536423">.</span><span class="ident" id="1536424">Pointer</span><span class="op" id="1536431">(</span><span class="op" id="1536432">&amp;</span><span class="ident" id="1536433">i</span><span class="op" id="1536434">)</span><span class="op" id="1536435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536438">tab</span>&nbsp;<span class="op" id="1536442">:=</span>&nbsp;<span class="ident" id="1536445">ip</span><span class="op" id="1536447">.</span><span class="ident" id="1536448">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536453">if</span>&nbsp;<span class="ident" id="1536456">tab</span>&nbsp;<span class="op" id="1536460">==</span>&nbsp;<span class="ident" id="1536463">nil</span>&nbsp;<span class="op" id="1536467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536471">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536479">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536482">rp</span>&nbsp;<span class="op" id="1536485">:=</span>&nbsp;<span class="op" id="1536488">(</span><span class="op" id="1536489">*</span><span class="ident" id="1536490">eface</span><span class="op" id="1536495">)</span><span class="op" id="1536496">(</span><span class="ident" id="1536497">unsafe</span><span class="op" id="1536503">.</span><span class="ident" id="1536504">Pointer</span><span class="op" id="1536511">(</span><span class="op" id="1536512">&amp;</span><span class="ident" id="1536513">r</span><span class="op" id="1536514">)</span><span class="op" id="1536515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536518">rp</span><span class="op" id="1536520">.</span><span class="ident" id="1536521">_type</span>&nbsp;<span class="op" id="1536527">=</span>&nbsp;<span class="ident" id="1536529">tab</span><span class="op" id="1536532">.</span><span class="ident" id="1536533">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536540">rp</span><span class="op" id="1536542">.</span><span class="ident" id="1536543">data</span>&nbsp;<span class="op" id="1536548">=</span>&nbsp;<span class="ident" id="1536550">ip</span><span class="op" id="1536552">.</span><span class="ident" id="1536553">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536559">return</span><br>
<span class="lineno">270</span><span class="op" id="1536566">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1536569">func</span>&nbsp;<span class="ident" id="1536574">assertI2E</span><span class="op" id="1536583">(</span><span class="ident" id="1536584">inter</span>&nbsp;<span class="op" id="1536590">*</span><span class="ident" id="1536591">interfacetype</span><span class="op" id="1536604">,</span>&nbsp;<span class="ident" id="1536606">i</span>&nbsp;<span class="ident" id="1536608">fInterface</span><span class="op" id="1536618">)</span>&nbsp;<span class="op" id="1536620">(</span><span class="ident" id="1536621">r</span>&nbsp;<span class="keyword" id="1536623">interface</span><span class="op" id="1536632">{</span><span class="op" id="1536633">}</span><span class="op" id="1536634">)</span>&nbsp;<span class="op" id="1536636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536639">ip</span>&nbsp;<span class="op" id="1536642">:=</span>&nbsp;<span class="op" id="1536645">(</span><span class="op" id="1536646">*</span><span class="ident" id="1536647">iface</span><span class="op" id="1536652">)</span><span class="op" id="1536653">(</span><span class="ident" id="1536654">unsafe</span><span class="op" id="1536660">.</span><span class="ident" id="1536661">Pointer</span><span class="op" id="1536668">(</span><span class="op" id="1536669">&amp;</span><span class="ident" id="1536670">i</span><span class="op" id="1536671">)</span><span class="op" id="1536672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536675">tab</span>&nbsp;<span class="op" id="1536679">:=</span>&nbsp;<span class="ident" id="1536682">ip</span><span class="op" id="1536684">.</span><span class="ident" id="1536685">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536690">if</span>&nbsp;<span class="ident" id="1536693">tab</span>&nbsp;<span class="op" id="1536697">==</span>&nbsp;<span class="ident" id="1536700">nil</span>&nbsp;<span class="op" id="1536704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1536708">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1536767">panic</span><span class="op" id="1536772">(</span><span class="op" id="1536773">&amp;</span><span class="ident" id="1536774">TypeAssertionError</span><span class="op" id="1536792">{</span><span class="string" id="1536793">&#34;&#34;</span><span class="op" id="1536795">,</span>&nbsp;<span class="string" id="1536797">&#34;&#34;</span><span class="op" id="1536799">,</span>&nbsp;<span class="op" id="1536801">*</span><span class="ident" id="1536802">inter</span><span class="op" id="1536807">.</span><span class="ident" id="1536808">typ</span><span class="op" id="1536811">.</span><span class="ident" id="1536812">_string</span><span class="op" id="1536819">,</span>&nbsp;<span class="string" id="1536821">&#34;&#34;</span><span class="op" id="1536823">}</span><span class="op" id="1536824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1536827">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536830">rp</span>&nbsp;<span class="op" id="1536833">:=</span>&nbsp;<span class="op" id="1536836">(</span><span class="op" id="1536837">*</span><span class="ident" id="1536838">eface</span><span class="op" id="1536843">)</span><span class="op" id="1536844">(</span><span class="ident" id="1536845">unsafe</span><span class="op" id="1536851">.</span><span class="ident" id="1536852">Pointer</span><span class="op" id="1536859">(</span><span class="op" id="1536860">&amp;</span><span class="ident" id="1536861">r</span><span class="op" id="1536862">)</span><span class="op" id="1536863">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536866">rp</span><span class="op" id="1536868">.</span><span class="ident" id="1536869">_type</span>&nbsp;<span class="op" id="1536875">=</span>&nbsp;<span class="ident" id="1536877">tab</span><span class="op" id="1536880">.</span><span class="ident" id="1536881">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536888">rp</span><span class="op" id="1536890">.</span><span class="ident" id="1536891">data</span>&nbsp;<span class="op" id="1536896">=</span>&nbsp;<span class="ident" id="1536898">ip</span><span class="op" id="1536900">.</span><span class="ident" id="1536901">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1536907">return</span><br>
<span class="lineno"></span><span class="op" id="1536914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1536917">func</span>&nbsp;<span class="ident" id="1536922">assertI2E2</span><span class="op" id="1536932">(</span><span class="ident" id="1536933">inter</span>&nbsp;<span class="op" id="1536939">*</span><span class="ident" id="1536940">interfacetype</span><span class="op" id="1536953">,</span>&nbsp;<span class="ident" id="1536955">i</span>&nbsp;<span class="ident" id="1536957">fInterface</span><span class="op" id="1536967">)</span>&nbsp;<span class="op" id="1536969">(</span><span class="ident" id="1536970">r</span>&nbsp;<span class="keyword" id="1536972">interface</span><span class="op" id="1536981">{</span><span class="op" id="1536982">}</span><span class="op" id="1536983">,</span>&nbsp;<span class="ident" id="1536985">ok</span>&nbsp;<span class="builtintype" id="1536988">bool</span><span class="op" id="1536992">)</span>&nbsp;<span class="op" id="1536994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1536997">ip</span>&nbsp;<span class="op" id="1537000">:=</span>&nbsp;<span class="op" id="1537003">(</span><span class="op" id="1537004">*</span><span class="ident" id="1537005">iface</span><span class="op" id="1537010">)</span><span class="op" id="1537011">(</span><span class="ident" id="1537012">unsafe</span><span class="op" id="1537018">.</span><span class="ident" id="1537019">Pointer</span><span class="op" id="1537026">(</span><span class="op" id="1537027">&amp;</span><span class="ident" id="1537028">i</span><span class="op" id="1537029">)</span><span class="op" id="1537030">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537033">tab</span>&nbsp;<span class="op" id="1537037">:=</span>&nbsp;<span class="ident" id="1537040">ip</span><span class="op" id="1537042">.</span><span class="ident" id="1537043">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537048">if</span>&nbsp;<span class="ident" id="1537051">tab</span>&nbsp;<span class="op" id="1537055">==</span>&nbsp;<span class="ident" id="1537058">nil</span>&nbsp;<span class="op" id="1537062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537066">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1537074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537077">rp</span>&nbsp;<span class="op" id="1537080">:=</span>&nbsp;<span class="op" id="1537083">(</span><span class="op" id="1537084">*</span><span class="ident" id="1537085">eface</span><span class="op" id="1537090">)</span><span class="op" id="1537091">(</span><span class="ident" id="1537092">unsafe</span><span class="op" id="1537098">.</span><span class="ident" id="1537099">Pointer</span><span class="op" id="1537106">(</span><span class="op" id="1537107">&amp;</span><span class="ident" id="1537108">r</span><span class="op" id="1537109">)</span><span class="op" id="1537110">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537113">rp</span><span class="op" id="1537115">.</span><span class="ident" id="1537116">_type</span>&nbsp;<span class="op" id="1537122">=</span>&nbsp;<span class="ident" id="1537124">tab</span><span class="op" id="1537127">.</span><span class="ident" id="1537128">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537135">rp</span><span class="op" id="1537137">.</span><span class="ident" id="1537138">data</span>&nbsp;<span class="op" id="1537143">=</span>&nbsp;<span class="ident" id="1537145">ip</span><span class="op" id="1537147">.</span><span class="ident" id="1537148">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537154">ok</span>&nbsp;<span class="op" id="1537157">=</span>&nbsp;<span class="builtintype" id="1537159">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537165">return</span><br>
<span class="lineno"></span><span class="op" id="1537172">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1537175">func</span>&nbsp;<span class="ident" id="1537180">convI2I</span><span class="op" id="1537187">(</span><span class="ident" id="1537188">inter</span>&nbsp;<span class="op" id="1537194">*</span><span class="ident" id="1537195">interfacetype</span><span class="op" id="1537208">,</span>&nbsp;<span class="ident" id="1537210">i</span>&nbsp;<span class="ident" id="1537212">fInterface</span><span class="op" id="1537222">)</span>&nbsp;<span class="op" id="1537224">(</span><span class="ident" id="1537225">r</span>&nbsp;<span class="ident" id="1537227">fInterface</span><span class="op" id="1537237">)</span>&nbsp;<span class="op" id="1537239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537242">ip</span>&nbsp;<span class="op" id="1537245">:=</span>&nbsp;<span class="op" id="1537248">(</span><span class="op" id="1537249">*</span><span class="ident" id="1537250">iface</span><span class="op" id="1537255">)</span><span class="op" id="1537256">(</span><span class="ident" id="1537257">unsafe</span><span class="op" id="1537263">.</span><span class="ident" id="1537264">Pointer</span><span class="op" id="1537271">(</span><span class="op" id="1537272">&amp;</span><span class="ident" id="1537273">i</span><span class="op" id="1537274">)</span><span class="op" id="1537275">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537278">tab</span>&nbsp;<span class="op" id="1537282">:=</span>&nbsp;<span class="ident" id="1537285">ip</span><span class="op" id="1537287">.</span><span class="ident" id="1537288">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537293">if</span>&nbsp;<span class="ident" id="1537296">tab</span>&nbsp;<span class="op" id="1537300">==</span>&nbsp;<span class="ident" id="1537303">nil</span>&nbsp;<span class="op" id="1537307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537311">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1537319">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537322">rp</span>&nbsp;<span class="op" id="1537325">:=</span>&nbsp;<span class="op" id="1537328">(</span><span class="op" id="1537329">*</span><span class="ident" id="1537330">iface</span><span class="op" id="1537335">)</span><span class="op" id="1537336">(</span><span class="ident" id="1537337">unsafe</span><span class="op" id="1537343">.</span><span class="ident" id="1537344">Pointer</span><span class="op" id="1537351">(</span><span class="op" id="1537352">&amp;</span><span class="ident" id="1537353">r</span><span class="op" id="1537354">)</span><span class="op" id="1537355">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537358">if</span>&nbsp;<span class="ident" id="1537361">tab</span><span class="op" id="1537364">.</span><span class="ident" id="1537365">inter</span>&nbsp;<span class="op" id="1537371">==</span>&nbsp;<span class="ident" id="1537374">inter</span>&nbsp;<span class="op" id="1537380">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537384">rp</span><span class="op" id="1537386">.</span><span class="ident" id="1537387">tab</span>&nbsp;<span class="op" id="1537391">=</span>&nbsp;<span class="ident" id="1537393">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537399">rp</span><span class="op" id="1537401">.</span><span class="ident" id="1537402">data</span>&nbsp;<span class="op" id="1537407">=</span>&nbsp;<span class="ident" id="1537409">ip</span><span class="op" id="1537411">.</span><span class="ident" id="1537412">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537419">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1537427">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537430">rp</span><span class="op" id="1537432">.</span><span class="ident" id="1537433">tab</span>&nbsp;<span class="op" id="1537437">=</span>&nbsp;<span class="ident" id="1537439">getitab</span><span class="op" id="1537446">(</span><span class="ident" id="1537447">inter</span><span class="op" id="1537452">,</span>&nbsp;<span class="ident" id="1537454">tab</span><span class="op" id="1537457">.</span><span class="ident" id="1537458">_type</span><span class="op" id="1537463">,</span>&nbsp;<span class="builtintype" id="1537465">false</span><span class="op" id="1537470">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537473">rp</span><span class="op" id="1537475">.</span><span class="ident" id="1537476">data</span>&nbsp;<span class="op" id="1537481">=</span>&nbsp;<span class="ident" id="1537483">ip</span><span class="op" id="1537485">.</span><span class="ident" id="1537486">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537492">return</span><br>
<span class="lineno"></span><span class="op" id="1537499">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1537502">func</span>&nbsp;<span class="ident" id="1537507">assertI2I</span><span class="op" id="1537516">(</span><span class="ident" id="1537517">inter</span>&nbsp;<span class="op" id="1537523">*</span><span class="ident" id="1537524">interfacetype</span><span class="op" id="1537537">,</span>&nbsp;<span class="ident" id="1537539">i</span>&nbsp;<span class="ident" id="1537541">fInterface</span><span class="op" id="1537551">)</span>&nbsp;<span class="op" id="1537553">(</span><span class="ident" id="1537554">r</span>&nbsp;<span class="ident" id="1537556">fInterface</span><span class="op" id="1537566">)</span>&nbsp;<span class="op" id="1537568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537571">ip</span>&nbsp;<span class="op" id="1537574">:=</span>&nbsp;<span class="op" id="1537577">(</span><span class="op" id="1537578">*</span><span class="ident" id="1537579">iface</span><span class="op" id="1537584">)</span><span class="op" id="1537585">(</span><span class="ident" id="1537586">unsafe</span><span class="op" id="1537592">.</span><span class="ident" id="1537593">Pointer</span><span class="op" id="1537600">(</span><span class="op" id="1537601">&amp;</span><span class="ident" id="1537602">i</span><span class="op" id="1537603">)</span><span class="op" id="1537604">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537607">tab</span>&nbsp;<span class="op" id="1537611">:=</span>&nbsp;<span class="ident" id="1537614">ip</span><span class="op" id="1537616">.</span><span class="ident" id="1537617">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537622">if</span>&nbsp;<span class="ident" id="1537625">tab</span>&nbsp;<span class="op" id="1537629">==</span>&nbsp;<span class="ident" id="1537632">nil</span>&nbsp;<span class="op" id="1537636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1537640">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1537699">panic</span><span class="op" id="1537704">(</span><span class="op" id="1537705">&amp;</span><span class="ident" id="1537706">TypeAssertionError</span><span class="op" id="1537724">{</span><span class="string" id="1537725">&#34;&#34;</span><span class="op" id="1537727">,</span>&nbsp;<span class="string" id="1537729">&#34;&#34;</span><span class="op" id="1537731">,</span>&nbsp;<span class="op" id="1537733">*</span><span class="ident" id="1537734">inter</span><span class="op" id="1537739">.</span><span class="ident" id="1537740">typ</span><span class="op" id="1537743">.</span><span class="ident" id="1537744">_string</span><span class="op" id="1537751">,</span>&nbsp;<span class="string" id="1537753">&#34;&#34;</span><span class="op" id="1537755">}</span><span class="op" id="1537756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1537759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537762">rp</span>&nbsp;<span class="op" id="1537765">:=</span>&nbsp;<span class="op" id="1537768">(</span><span class="op" id="1537769">*</span><span class="ident" id="1537770">iface</span><span class="op" id="1537775">)</span><span class="op" id="1537776">(</span><span class="ident" id="1537777">unsafe</span><span class="op" id="1537783">.</span><span class="ident" id="1537784">Pointer</span><span class="op" id="1537791">(</span><span class="op" id="1537792">&amp;</span><span class="ident" id="1537793">r</span><span class="op" id="1537794">)</span><span class="op" id="1537795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537798">if</span>&nbsp;<span class="ident" id="1537801">tab</span><span class="op" id="1537804">.</span><span class="ident" id="1537805">inter</span>&nbsp;<span class="op" id="1537811">==</span>&nbsp;<span class="ident" id="1537814">inter</span>&nbsp;<span class="op" id="1537820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537824">rp</span><span class="op" id="1537826">.</span><span class="ident" id="1537827">tab</span>&nbsp;<span class="op" id="1537831">=</span>&nbsp;<span class="ident" id="1537833">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537839">rp</span><span class="op" id="1537841">.</span><span class="ident" id="1537842">data</span>&nbsp;<span class="op" id="1537847">=</span>&nbsp;<span class="ident" id="1537849">ip</span><span class="op" id="1537851">.</span><span class="ident" id="1537852">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537859">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1537867">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537870">rp</span><span class="op" id="1537872">.</span><span class="ident" id="1537873">tab</span>&nbsp;<span class="op" id="1537877">=</span>&nbsp;<span class="ident" id="1537879">getitab</span><span class="op" id="1537886">(</span><span class="ident" id="1537887">inter</span><span class="op" id="1537892">,</span>&nbsp;<span class="ident" id="1537894">tab</span><span class="op" id="1537897">.</span><span class="ident" id="1537898">_type</span><span class="op" id="1537903">,</span>&nbsp;<span class="builtintype" id="1537905">false</span><span class="op" id="1537910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1537913">rp</span><span class="op" id="1537915">.</span><span class="ident" id="1537916">data</span>&nbsp;<span class="op" id="1537921">=</span>&nbsp;<span class="ident" id="1537923">ip</span><span class="op" id="1537925">.</span><span class="ident" id="1537926">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1537932">return</span><br>
<span class="lineno"></span><span class="op" id="1537939">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1537942">func</span>&nbsp;<span class="ident" id="1537947">assertI2I2</span><span class="op" id="1537957">(</span><span class="ident" id="1537958">inter</span>&nbsp;<span class="op" id="1537964">*</span><span class="ident" id="1537965">interfacetype</span><span class="op" id="1537978">,</span>&nbsp;<span class="ident" id="1537980">i</span>&nbsp;<span class="ident" id="1537982">fInterface</span><span class="op" id="1537992">)</span>&nbsp;<span class="op" id="1537994">(</span><span class="ident" id="1537995">r</span>&nbsp;<span class="ident" id="1537997">fInterface</span><span class="op" id="1538007">,</span>&nbsp;<span class="ident" id="1538009">ok</span>&nbsp;<span class="builtintype" id="1538012">bool</span><span class="op" id="1538016">)</span>&nbsp;<span class="op" id="1538018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538021">ip</span>&nbsp;<span class="op" id="1538024">:=</span>&nbsp;<span class="op" id="1538027">(</span><span class="op" id="1538028">*</span><span class="ident" id="1538029">iface</span><span class="op" id="1538034">)</span><span class="op" id="1538035">(</span><span class="ident" id="1538036">unsafe</span><span class="op" id="1538042">.</span><span class="ident" id="1538043">Pointer</span><span class="op" id="1538050">(</span><span class="op" id="1538051">&amp;</span><span class="ident" id="1538052">i</span><span class="op" id="1538053">)</span><span class="op" id="1538054">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538057">tab</span>&nbsp;<span class="op" id="1538061">:=</span>&nbsp;<span class="ident" id="1538064">ip</span><span class="op" id="1538066">.</span><span class="ident" id="1538067">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538072">if</span>&nbsp;<span class="ident" id="1538075">tab</span>&nbsp;<span class="op" id="1538079">==</span>&nbsp;<span class="ident" id="1538082">nil</span>&nbsp;<span class="op" id="1538086">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538090">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538101">rp</span>&nbsp;<span class="op" id="1538104">:=</span>&nbsp;<span class="op" id="1538107">(</span><span class="op" id="1538108">*</span><span class="ident" id="1538109">iface</span><span class="op" id="1538114">)</span><span class="op" id="1538115">(</span><span class="ident" id="1538116">unsafe</span><span class="op" id="1538122">.</span><span class="ident" id="1538123">Pointer</span><span class="op" id="1538130">(</span><span class="op" id="1538131">&amp;</span><span class="ident" id="1538132">r</span><span class="op" id="1538133">)</span><span class="op" id="1538134">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538137">if</span>&nbsp;<span class="ident" id="1538140">tab</span><span class="op" id="1538143">.</span><span class="ident" id="1538144">inter</span>&nbsp;<span class="op" id="1538150">==</span>&nbsp;<span class="ident" id="1538153">inter</span>&nbsp;<span class="op" id="1538159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538163">rp</span><span class="op" id="1538165">.</span><span class="ident" id="1538166">tab</span>&nbsp;<span class="op" id="1538170">=</span>&nbsp;<span class="ident" id="1538172">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538178">rp</span><span class="op" id="1538180">.</span><span class="ident" id="1538181">data</span>&nbsp;<span class="op" id="1538186">=</span>&nbsp;<span class="ident" id="1538188">ip</span><span class="op" id="1538190">.</span><span class="ident" id="1538191">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538198">ok</span>&nbsp;<span class="op" id="1538201">=</span>&nbsp;<span class="builtintype" id="1538203">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538210">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538221">tab</span>&nbsp;<span class="op" id="1538225">=</span>&nbsp;<span class="ident" id="1538227">getitab</span><span class="op" id="1538234">(</span><span class="ident" id="1538235">inter</span><span class="op" id="1538240">,</span>&nbsp;<span class="ident" id="1538242">tab</span><span class="op" id="1538245">.</span><span class="ident" id="1538246">_type</span><span class="op" id="1538251">,</span>&nbsp;<span class="builtintype" id="1538253">true</span><span class="op" id="1538257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538260">if</span>&nbsp;<span class="ident" id="1538263">tab</span>&nbsp;<span class="op" id="1538267">==</span>&nbsp;<span class="ident" id="1538270">nil</span>&nbsp;<span class="op" id="1538274">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538278">rp</span><span class="op" id="1538280">.</span><span class="ident" id="1538281">data</span>&nbsp;<span class="op" id="1538286">=</span>&nbsp;<span class="ident" id="1538288">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538294">rp</span><span class="op" id="1538296">.</span><span class="ident" id="1538297">tab</span>&nbsp;<span class="op" id="1538301">=</span>&nbsp;<span class="ident" id="1538303">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538309">ok</span>&nbsp;<span class="op" id="1538312">=</span>&nbsp;<span class="builtintype" id="1538314">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538322">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538330">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538333">rp</span><span class="op" id="1538335">.</span><span class="ident" id="1538336">tab</span>&nbsp;<span class="op" id="1538340">=</span>&nbsp;<span class="ident" id="1538342">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538347">rp</span><span class="op" id="1538349">.</span><span class="ident" id="1538350">data</span>&nbsp;<span class="op" id="1538355">=</span>&nbsp;<span class="ident" id="1538357">ip</span><span class="op" id="1538359">.</span><span class="ident" id="1538360">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538366">ok</span>&nbsp;<span class="op" id="1538369">=</span>&nbsp;<span class="builtintype" id="1538371">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538377">return</span><br>
<span class="lineno"></span><span class="op" id="1538384">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1538387">func</span>&nbsp;<span class="ident" id="1538392">assertE2I</span><span class="op" id="1538401">(</span><span class="ident" id="1538402">inter</span>&nbsp;<span class="op" id="1538408">*</span><span class="ident" id="1538409">interfacetype</span><span class="op" id="1538422">,</span>&nbsp;<span class="ident" id="1538424">e</span>&nbsp;<span class="keyword" id="1538426">interface</span><span class="op" id="1538435">{</span><span class="op" id="1538436">}</span><span class="op" id="1538437">)</span>&nbsp;<span class="op" id="1538439">(</span><span class="ident" id="1538440">r</span>&nbsp;<span class="ident" id="1538442">fInterface</span><span class="op" id="1538452">)</span>&nbsp;<span class="op" id="1538454">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538457">ep</span>&nbsp;<span class="op" id="1538460">:=</span>&nbsp;<span class="op" id="1538463">(</span><span class="op" id="1538464">*</span><span class="ident" id="1538465">eface</span><span class="op" id="1538470">)</span><span class="op" id="1538471">(</span><span class="ident" id="1538472">unsafe</span><span class="op" id="1538478">.</span><span class="ident" id="1538479">Pointer</span><span class="op" id="1538486">(</span><span class="op" id="1538487">&amp;</span><span class="ident" id="1538488">e</span><span class="op" id="1538489">)</span><span class="op" id="1538490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538493">t</span>&nbsp;<span class="op" id="1538495">:=</span>&nbsp;<span class="ident" id="1538498">ep</span><span class="op" id="1538500">.</span><span class="ident" id="1538501">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538508">if</span>&nbsp;<span class="ident" id="1538511">t</span>&nbsp;<span class="op" id="1538513">==</span>&nbsp;<span class="ident" id="1538516">nil</span>&nbsp;<span class="op" id="1538520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1538524">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1538583">panic</span><span class="op" id="1538588">(</span><span class="op" id="1538589">&amp;</span><span class="ident" id="1538590">TypeAssertionError</span><span class="op" id="1538608">{</span><span class="string" id="1538609">&#34;&#34;</span><span class="op" id="1538611">,</span>&nbsp;<span class="string" id="1538613">&#34;&#34;</span><span class="op" id="1538615">,</span>&nbsp;<span class="op" id="1538617">*</span><span class="ident" id="1538618">inter</span><span class="op" id="1538623">.</span><span class="ident" id="1538624">typ</span><span class="op" id="1538627">.</span><span class="ident" id="1538628">_string</span><span class="op" id="1538635">,</span>&nbsp;<span class="string" id="1538637">&#34;&#34;</span><span class="op" id="1538639">}</span><span class="op" id="1538640">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538643">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538646">rp</span>&nbsp;<span class="op" id="1538649">:=</span>&nbsp;<span class="op" id="1538652">(</span><span class="op" id="1538653">*</span><span class="ident" id="1538654">iface</span><span class="op" id="1538659">)</span><span class="op" id="1538660">(</span><span class="ident" id="1538661">unsafe</span><span class="op" id="1538667">.</span><span class="ident" id="1538668">Pointer</span><span class="op" id="1538675">(</span><span class="op" id="1538676">&amp;</span><span class="ident" id="1538677">r</span><span class="op" id="1538678">)</span><span class="op" id="1538679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538682">rp</span><span class="op" id="1538684">.</span><span class="ident" id="1538685">tab</span>&nbsp;<span class="op" id="1538689">=</span>&nbsp;<span class="ident" id="1538691">getitab</span><span class="op" id="1538698">(</span><span class="ident" id="1538699">inter</span><span class="op" id="1538704">,</span>&nbsp;<span class="ident" id="1538706">t</span><span class="op" id="1538707">,</span>&nbsp;<span class="builtintype" id="1538709">false</span><span class="op" id="1538714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538717">rp</span><span class="op" id="1538719">.</span><span class="ident" id="1538720">data</span>&nbsp;<span class="op" id="1538725">=</span>&nbsp;<span class="ident" id="1538727">ep</span><span class="op" id="1538729">.</span><span class="ident" id="1538730">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538736">return</span><br>
<span class="lineno">370</span><span class="op" id="1538743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1538746">func</span>&nbsp;<span class="ident" id="1538751">assertE2I2</span><span class="op" id="1538761">(</span><span class="ident" id="1538762">inter</span>&nbsp;<span class="op" id="1538768">*</span><span class="ident" id="1538769">interfacetype</span><span class="op" id="1538782">,</span>&nbsp;<span class="ident" id="1538784">e</span>&nbsp;<span class="keyword" id="1538786">interface</span><span class="op" id="1538795">{</span><span class="op" id="1538796">}</span><span class="op" id="1538797">)</span>&nbsp;<span class="op" id="1538799">(</span><span class="ident" id="1538800">r</span>&nbsp;<span class="ident" id="1538802">fInterface</span><span class="op" id="1538812">,</span>&nbsp;<span class="ident" id="1538814">ok</span>&nbsp;<span class="builtintype" id="1538817">bool</span><span class="op" id="1538821">)</span>&nbsp;<span class="op" id="1538823">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538826">ep</span>&nbsp;<span class="op" id="1538829">:=</span>&nbsp;<span class="op" id="1538832">(</span><span class="op" id="1538833">*</span><span class="ident" id="1538834">eface</span><span class="op" id="1538839">)</span><span class="op" id="1538840">(</span><span class="ident" id="1538841">unsafe</span><span class="op" id="1538847">.</span><span class="ident" id="1538848">Pointer</span><span class="op" id="1538855">(</span><span class="op" id="1538856">&amp;</span><span class="ident" id="1538857">e</span><span class="op" id="1538858">)</span><span class="op" id="1538859">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538862">t</span>&nbsp;<span class="op" id="1538864">:=</span>&nbsp;<span class="ident" id="1538867">ep</span><span class="op" id="1538869">.</span><span class="ident" id="1538870">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538877">if</span>&nbsp;<span class="ident" id="1538880">t</span>&nbsp;<span class="op" id="1538882">==</span>&nbsp;<span class="ident" id="1538885">nil</span>&nbsp;<span class="op" id="1538889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538893">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538901">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538904">tab</span>&nbsp;<span class="op" id="1538908">:=</span>&nbsp;<span class="ident" id="1538911">getitab</span><span class="op" id="1538918">(</span><span class="ident" id="1538919">inter</span><span class="op" id="1538924">,</span>&nbsp;<span class="ident" id="1538926">t</span><span class="op" id="1538927">,</span>&nbsp;<span class="builtintype" id="1538929">true</span><span class="op" id="1538933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538936">if</span>&nbsp;<span class="ident" id="1538939">tab</span>&nbsp;<span class="op" id="1538943">==</span>&nbsp;<span class="ident" id="1538946">nil</span>&nbsp;<span class="op" id="1538950">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1538954">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1538962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1538965">rp</span>&nbsp;<span class="op" id="1538968">:=</span>&nbsp;<span class="op" id="1538971">(</span><span class="op" id="1538972">*</span><span class="ident" id="1538973">iface</span><span class="op" id="1538978">)</span><span class="op" id="1538979">(</span><span class="ident" id="1538980">unsafe</span><span class="op" id="1538986">.</span><span class="ident" id="1538987">Pointer</span><span class="op" id="1538994">(</span><span class="op" id="1538995">&amp;</span><span class="ident" id="1538996">r</span><span class="op" id="1538997">)</span><span class="op" id="1538998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539001">rp</span><span class="op" id="1539003">.</span><span class="ident" id="1539004">tab</span>&nbsp;<span class="op" id="1539008">=</span>&nbsp;<span class="ident" id="1539010">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539015">rp</span><span class="op" id="1539017">.</span><span class="ident" id="1539018">data</span>&nbsp;<span class="op" id="1539023">=</span>&nbsp;<span class="ident" id="1539025">ep</span><span class="op" id="1539027">.</span><span class="ident" id="1539028">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539034">ok</span>&nbsp;<span class="op" id="1539037">=</span>&nbsp;<span class="builtintype" id="1539039">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539045">return</span><br>
<span class="lineno"></span><span class="op" id="1539052">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539055">func</span>&nbsp;<span class="ident" id="1539060">reflect_ifaceE2I</span><span class="op" id="1539076">(</span><span class="ident" id="1539077">inter</span>&nbsp;<span class="op" id="1539083">*</span><span class="ident" id="1539084">interfacetype</span><span class="op" id="1539097">,</span>&nbsp;<span class="ident" id="1539099">e</span>&nbsp;<span class="keyword" id="1539101">interface</span><span class="op" id="1539110">{</span><span class="op" id="1539111">}</span><span class="op" id="1539112">,</span>&nbsp;<span class="ident" id="1539114">dst</span>&nbsp;<span class="op" id="1539118">*</span><span class="ident" id="1539119">fInterface</span><span class="op" id="1539129">)</span>&nbsp;<span class="op" id="1539131">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539134">*</span><span class="ident" id="1539135">dst</span>&nbsp;<span class="op" id="1539139">=</span>&nbsp;<span class="ident" id="1539141">assertE2I</span><span class="op" id="1539150">(</span><span class="ident" id="1539151">inter</span><span class="op" id="1539156">,</span>&nbsp;<span class="ident" id="1539158">e</span><span class="op" id="1539159">)</span><br>
<span class="lineno"></span><span class="op" id="1539161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539164">func</span>&nbsp;<span class="ident" id="1539169">assertE2E</span><span class="op" id="1539178">(</span><span class="ident" id="1539179">inter</span>&nbsp;<span class="op" id="1539185">*</span><span class="ident" id="1539186">interfacetype</span><span class="op" id="1539199">,</span>&nbsp;<span class="ident" id="1539201">e</span>&nbsp;<span class="keyword" id="1539203">interface</span><span class="op" id="1539212">{</span><span class="op" id="1539213">}</span><span class="op" id="1539214">)</span>&nbsp;<span class="keyword" id="1539216">interface</span><span class="op" id="1539225">{</span><span class="op" id="1539226">}</span>&nbsp;<span class="op" id="1539228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539231">ep</span>&nbsp;<span class="op" id="1539234">:=</span>&nbsp;<span class="op" id="1539237">(</span><span class="op" id="1539238">*</span><span class="ident" id="1539239">eface</span><span class="op" id="1539244">)</span><span class="op" id="1539245">(</span><span class="ident" id="1539246">unsafe</span><span class="op" id="1539252">.</span><span class="ident" id="1539253">Pointer</span><span class="op" id="1539260">(</span><span class="op" id="1539261">&amp;</span><span class="ident" id="1539262">e</span><span class="op" id="1539263">)</span><span class="op" id="1539264">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539267">if</span>&nbsp;<span class="ident" id="1539270">ep</span><span class="op" id="1539272">.</span><span class="ident" id="1539273">_type</span>&nbsp;<span class="op" id="1539279">==</span>&nbsp;<span class="ident" id="1539282">nil</span>&nbsp;<span class="op" id="1539286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1539290">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="1539349">panic</span><span class="op" id="1539354">(</span><span class="op" id="1539355">&amp;</span><span class="ident" id="1539356">TypeAssertionError</span><span class="op" id="1539374">{</span><span class="string" id="1539375">&#34;&#34;</span><span class="op" id="1539377">,</span>&nbsp;<span class="string" id="1539379">&#34;&#34;</span><span class="op" id="1539381">,</span>&nbsp;<span class="op" id="1539383">*</span><span class="ident" id="1539384">inter</span><span class="op" id="1539389">.</span><span class="ident" id="1539390">typ</span><span class="op" id="1539393">.</span><span class="ident" id="1539394">_string</span><span class="op" id="1539401">,</span>&nbsp;<span class="string" id="1539403">&#34;&#34;</span><span class="op" id="1539405">}</span><span class="op" id="1539406">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539412">return</span>&nbsp;<span class="ident" id="1539419">e</span><br>
<span class="lineno">400</span><span class="op" id="1539421">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539424">func</span>&nbsp;<span class="ident" id="1539429">assertE2E2</span><span class="op" id="1539439">(</span><span class="ident" id="1539440">inter</span>&nbsp;<span class="op" id="1539446">*</span><span class="ident" id="1539447">interfacetype</span><span class="op" id="1539460">,</span>&nbsp;<span class="ident" id="1539462">e</span>&nbsp;<span class="keyword" id="1539464">interface</span><span class="op" id="1539473">{</span><span class="op" id="1539474">}</span><span class="op" id="1539475">)</span>&nbsp;<span class="op" id="1539477">(</span><span class="keyword" id="1539478">interface</span><span class="op" id="1539487">{</span><span class="op" id="1539488">}</span><span class="op" id="1539489">,</span>&nbsp;<span class="builtintype" id="1539491">bool</span><span class="op" id="1539495">)</span>&nbsp;<span class="op" id="1539497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539500">ep</span>&nbsp;<span class="op" id="1539503">:=</span>&nbsp;<span class="op" id="1539506">(</span><span class="op" id="1539507">*</span><span class="ident" id="1539508">eface</span><span class="op" id="1539513">)</span><span class="op" id="1539514">(</span><span class="ident" id="1539515">unsafe</span><span class="op" id="1539521">.</span><span class="ident" id="1539522">Pointer</span><span class="op" id="1539529">(</span><span class="op" id="1539530">&amp;</span><span class="ident" id="1539531">e</span><span class="op" id="1539532">)</span><span class="op" id="1539533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539536">if</span>&nbsp;<span class="ident" id="1539539">ep</span><span class="op" id="1539541">.</span><span class="ident" id="1539542">_type</span>&nbsp;<span class="op" id="1539548">==</span>&nbsp;<span class="ident" id="1539551">nil</span>&nbsp;<span class="op" id="1539555">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539559">return</span>&nbsp;<span class="ident" id="1539566">nil</span><span class="op" id="1539569">,</span>&nbsp;<span class="builtintype" id="1539571">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539578">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539581">return</span>&nbsp;<span class="ident" id="1539588">e</span><span class="op" id="1539589">,</span>&nbsp;<span class="builtintype" id="1539591">true</span><br>
<span class="lineno"></span><span class="op" id="1539596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1539599">func</span>&nbsp;<span class="ident" id="1539604">ifacethash</span><span class="op" id="1539614">(</span><span class="ident" id="1539615">i</span>&nbsp;<span class="ident" id="1539617">fInterface</span><span class="op" id="1539627">)</span>&nbsp;<span class="builtintype" id="1539629">uint32</span>&nbsp;<span class="op" id="1539636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539639">ip</span>&nbsp;<span class="op" id="1539642">:=</span>&nbsp;<span class="op" id="1539645">(</span><span class="op" id="1539646">*</span><span class="ident" id="1539647">iface</span><span class="op" id="1539652">)</span><span class="op" id="1539653">(</span><span class="ident" id="1539654">unsafe</span><span class="op" id="1539660">.</span><span class="ident" id="1539661">Pointer</span><span class="op" id="1539668">(</span><span class="op" id="1539669">&amp;</span><span class="ident" id="1539670">i</span><span class="op" id="1539671">)</span><span class="op" id="1539672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539675">tab</span>&nbsp;<span class="op" id="1539679">:=</span>&nbsp;<span class="ident" id="1539682">ip</span><span class="op" id="1539684">.</span><span class="ident" id="1539685">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539690">if</span>&nbsp;<span class="ident" id="1539693">tab</span>&nbsp;<span class="op" id="1539697">==</span>&nbsp;<span class="ident" id="1539700">nil</span>&nbsp;<span class="op" id="1539704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539708">return</span>&nbsp;<span class="num" id="1539715">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539718">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539721">return</span>&nbsp;<span class="ident" id="1539728">tab</span><span class="op" id="1539731">.</span><span class="ident" id="1539732">_type</span><span class="op" id="1539737">.</span><span class="ident" id="1539738">hash</span><br>
<span class="lineno"></span><span class="op" id="1539743">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539746">func</span>&nbsp;<span class="ident" id="1539751">efacethash</span><span class="op" id="1539761">(</span><span class="ident" id="1539762">e</span>&nbsp;<span class="keyword" id="1539764">interface</span><span class="op" id="1539773">{</span><span class="op" id="1539774">}</span><span class="op" id="1539775">)</span>&nbsp;<span class="builtintype" id="1539777">uint32</span>&nbsp;<span class="op" id="1539784">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539787">ep</span>&nbsp;<span class="op" id="1539790">:=</span>&nbsp;<span class="op" id="1539793">(</span><span class="op" id="1539794">*</span><span class="ident" id="1539795">eface</span><span class="op" id="1539800">)</span><span class="op" id="1539801">(</span><span class="ident" id="1539802">unsafe</span><span class="op" id="1539808">.</span><span class="ident" id="1539809">Pointer</span><span class="op" id="1539816">(</span><span class="op" id="1539817">&amp;</span><span class="ident" id="1539818">e</span><span class="op" id="1539819">)</span><span class="op" id="1539820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539823">t</span>&nbsp;<span class="op" id="1539825">:=</span>&nbsp;<span class="ident" id="1539828">ep</span><span class="op" id="1539830">.</span><span class="ident" id="1539831">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539838">if</span>&nbsp;<span class="ident" id="1539841">t</span>&nbsp;<span class="op" id="1539843">==</span>&nbsp;<span class="ident" id="1539846">nil</span>&nbsp;<span class="op" id="1539850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539854">return</span>&nbsp;<span class="num" id="1539861">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539864">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539867">return</span>&nbsp;<span class="ident" id="1539874">t</span><span class="op" id="1539875">.</span><span class="ident" id="1539876">hash</span><br>
<span class="lineno"></span><span class="op" id="1539881">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1539884">func</span>&nbsp;<span class="ident" id="1539889">iterate_itabs</span><span class="op" id="1539902">(</span><span class="ident" id="1539903">fn</span>&nbsp;<span class="keyword" id="1539906">func</span><span class="op" id="1539910">(</span><span class="op" id="1539911">*</span><span class="ident" id="1539912">itab</span><span class="op" id="1539916">)</span><span class="op" id="1539917">)</span>&nbsp;<span class="op" id="1539919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539922">for</span>&nbsp;<span class="ident" id="1539926">_</span><span class="op" id="1539927">,</span>&nbsp;<span class="ident" id="1539929">h</span>&nbsp;<span class="op" id="1539931">:=</span>&nbsp;<span class="keyword" id="1539934">range</span>&nbsp;<span class="op" id="1539940">&amp;</span><span class="ident" id="1539941">hash</span>&nbsp;<span class="op" id="1539946">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1539950">for</span>&nbsp;<span class="op" id="1539954">;</span>&nbsp;<span class="ident" id="1539956">h</span>&nbsp;<span class="op" id="1539958">!=</span>&nbsp;<span class="ident" id="1539961">nil</span><span class="op" id="1539964">;</span>&nbsp;<span class="ident" id="1539966">h</span>&nbsp;<span class="op" id="1539968">=</span>&nbsp;<span class="ident" id="1539970">h</span><span class="op" id="1539971">.</span><span class="ident" id="1539972">link</span>&nbsp;<span class="op" id="1539977">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1539982">fn</span><span class="op" id="1539984">(</span><span class="ident" id="1539985">h</span><span class="op" id="1539986">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1539993">}</span><br>
<span class="lineno"></span><span class="op" id="1539995">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1539998">func</span>&nbsp;<span class="ident" id="1540003">ifaceE2I2</span><span class="op" id="1540012">(</span><span class="ident" id="1540013">inter</span>&nbsp;<span class="op" id="1540019">*</span><span class="ident" id="1540020">interfacetype</span><span class="op" id="1540033">,</span>&nbsp;<span class="ident" id="1540035">e</span>&nbsp;<span class="keyword" id="1540037">interface</span><span class="op" id="1540046">{</span><span class="op" id="1540047">}</span><span class="op" id="1540048">,</span>&nbsp;<span class="ident" id="1540050">r</span>&nbsp;<span class="op" id="1540052">*</span><span class="ident" id="1540053">fInterface</span><span class="op" id="1540063">)</span>&nbsp;<span class="op" id="1540065">(</span><span class="ident" id="1540066">ok</span>&nbsp;<span class="builtintype" id="1540069">bool</span><span class="op" id="1540073">)</span>&nbsp;<span class="op" id="1540075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1540078">*</span><span class="ident" id="1540079">r</span><span class="op" id="1540080">,</span>&nbsp;<span class="ident" id="1540082">ok</span>&nbsp;<span class="op" id="1540085">=</span>&nbsp;<span class="ident" id="1540087">assertE2I2</span><span class="op" id="1540097">(</span><span class="ident" id="1540098">inter</span><span class="op" id="1540103">,</span>&nbsp;<span class="ident" id="1540105">e</span><span class="op" id="1540106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1540109">return</span><br>
<span class="lineno"></span><span class="op" id="1540116">}</span>
</div>
</body>
</html>
