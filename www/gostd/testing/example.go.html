<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html" class="current">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="5676057">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5676112">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5676166">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="5676217">package</span>&nbsp;<span class="ident" id="5676225">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5676234">import</span>&nbsp;<span class="op" id="5676241">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676244">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676253">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676260">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676266">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676272">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="5676283">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="5676290">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="5676293">type</span>&nbsp;<span class="ident" id="5676298">InternalExample</span>&nbsp;<span class="keyword" id="5676314">struct</span>&nbsp;<span class="op" id="5676321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676324">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5676331">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676339">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676346">func</span><span class="op" id="5676350">(</span><span class="op" id="5676351">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676354">Output</span>&nbsp;<span class="builtintype" id="5676361">string</span><br>
<span class="lineno">20</span><span class="op" id="5676368">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5676371">func</span>&nbsp;<span class="ident" id="5676376">RunExamples</span><span class="op" id="5676387">(</span><span class="ident" id="5676388">matchString</span>&nbsp;<span class="keyword" id="5676400">func</span><span class="op" id="5676404">(</span><span class="ident" id="5676405">pat</span><span class="op" id="5676408">,</span>&nbsp;<span class="ident" id="5676410">str</span>&nbsp;<span class="builtintype" id="5676414">string</span><span class="op" id="5676420">)</span>&nbsp;<span class="op" id="5676422">(</span><span class="builtintype" id="5676423">bool</span><span class="op" id="5676427">,</span>&nbsp;<span class="builtintype" id="5676429">error</span><span class="op" id="5676434">)</span><span class="op" id="5676435">,</span>&nbsp;<span class="ident" id="5676437">examples</span>&nbsp;<span class="op" id="5676446">[</span><span class="op" id="5676447">]</span><span class="ident" id="5676448">InternalExample</span><span class="op" id="5676463">)</span>&nbsp;<span class="op" id="5676465">(</span><span class="ident" id="5676466">ok</span>&nbsp;<span class="builtintype" id="5676469">bool</span><span class="op" id="5676473">)</span>&nbsp;<span class="op" id="5676475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676478">ok</span>&nbsp;<span class="op" id="5676481">=</span>&nbsp;<span class="builtintype" id="5676483">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676490">var</span>&nbsp;<span class="ident" id="5676494">eg</span>&nbsp;<span class="ident" id="5676497">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676515">for</span>&nbsp;<span class="ident" id="5676519">_</span><span class="op" id="5676520">,</span>&nbsp;<span class="ident" id="5676522">eg</span>&nbsp;<span class="op" id="5676525">=</span>&nbsp;<span class="keyword" id="5676527">range</span>&nbsp;<span class="ident" id="5676533">examples</span>&nbsp;<span class="op" id="5676542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676546">matched</span><span class="op" id="5676553">,</span>&nbsp;<span class="ident" id="5676555">err</span>&nbsp;<span class="op" id="5676559">:=</span>&nbsp;<span class="ident" id="5676562">matchString</span><span class="op" id="5676573">(</span><span class="op" id="5676574">*</span><span class="ident" id="5676575">match</span><span class="op" id="5676580">,</span>&nbsp;<span class="ident" id="5676582">eg</span><span class="op" id="5676584">.</span><span class="ident" id="5676585">Name</span><span class="op" id="5676589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676593">if</span>&nbsp;<span class="ident" id="5676596">err</span>&nbsp;<span class="op" id="5676600">!=</span>&nbsp;<span class="ident" id="5676603">nil</span>&nbsp;<span class="op" id="5676607">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676612">fmt</span><span class="op" id="5676615">.</span><span class="ident" id="5676616">Fprintf</span><span class="op" id="5676623">(</span><span class="ident" id="5676624">os</span><span class="op" id="5676626">.</span><span class="ident" id="5676627">Stderr</span><span class="op" id="5676633">,</span>&nbsp;<span class="string" id="5676635">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="5676680">,</span>&nbsp;<span class="ident" id="5676682">err</span><span class="op" id="5676685">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676690">os</span><span class="op" id="5676692">.</span><span class="ident" id="5676693">Exit</span><span class="op" id="5676697">(</span><span class="num" id="5676698">1</span><span class="op" id="5676699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676707">if</span>&nbsp;<span class="op" id="5676710">!</span><span class="ident" id="5676711">matched</span>&nbsp;<span class="op" id="5676719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676724">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676739">if</span>&nbsp;<span class="op" id="5676742">!</span><span class="ident" id="5676743">runExample</span><span class="op" id="5676753">(</span><span class="ident" id="5676754">eg</span><span class="op" id="5676756">)</span>&nbsp;<span class="op" id="5676758">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676763">ok</span>&nbsp;<span class="op" id="5676766">=</span>&nbsp;<span class="builtintype" id="5676768">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676776">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676779">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676783">return</span><br>
<span class="lineno"></span><span class="op" id="5676790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5676793">func</span>&nbsp;<span class="ident" id="5676798">runExample</span><span class="op" id="5676808">(</span><span class="ident" id="5676809">eg</span>&nbsp;<span class="ident" id="5676812">InternalExample</span><span class="op" id="5676827">)</span>&nbsp;<span class="op" id="5676829">(</span><span class="ident" id="5676830">ok</span>&nbsp;<span class="builtintype" id="5676833">bool</span><span class="op" id="5676837">)</span>&nbsp;<span class="op" id="5676839">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676842">if</span>&nbsp;<span class="op" id="5676845">*</span><span class="ident" id="5676846">chatty</span>&nbsp;<span class="op" id="5676853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676857">fmt</span><span class="op" id="5676860">.</span><span class="ident" id="5676861">Printf</span><span class="op" id="5676867">(</span><span class="string" id="5676868">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="5676883">,</span>&nbsp;<span class="ident" id="5676885">eg</span><span class="op" id="5676887">.</span><span class="ident" id="5676888">Name</span><span class="op" id="5676892">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5676895">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5676899">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676919">stdout</span>&nbsp;<span class="op" id="5676926">:=</span>&nbsp;<span class="ident" id="5676929">os</span><span class="op" id="5676931">.</span><span class="ident" id="5676932">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676940">r</span><span class="op" id="5676941">,</span>&nbsp;<span class="ident" id="5676943">w</span><span class="op" id="5676944">,</span>&nbsp;<span class="ident" id="5676946">err</span>&nbsp;<span class="op" id="5676950">:=</span>&nbsp;<span class="ident" id="5676953">os</span><span class="op" id="5676955">.</span><span class="ident" id="5676956">Pipe</span><span class="op" id="5676960">(</span><span class="op" id="5676961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5676964">if</span>&nbsp;<span class="ident" id="5676967">err</span>&nbsp;<span class="op" id="5676971">!=</span>&nbsp;<span class="ident" id="5676974">nil</span>&nbsp;<span class="op" id="5676978">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5676982">fmt</span><span class="op" id="5676985">.</span><span class="ident" id="5676986">Fprintln</span><span class="op" id="5676994">(</span><span class="ident" id="5676995">os</span><span class="op" id="5676997">.</span><span class="ident" id="5676998">Stderr</span><span class="op" id="5677004">,</span>&nbsp;<span class="ident" id="5677006">err</span><span class="op" id="5677009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677013">os</span><span class="op" id="5677015">.</span><span class="ident" id="5677016">Exit</span><span class="op" id="5677020">(</span><span class="num" id="5677021">1</span><span class="op" id="5677022">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677028">os</span><span class="op" id="5677030">.</span><span class="ident" id="5677031">Stdout</span>&nbsp;<span class="op" id="5677038">=</span>&nbsp;<span class="ident" id="5677040">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677043">outC</span>&nbsp;<span class="op" id="5677048">:=</span>&nbsp;<span class="builtinfunc" id="5677051">make</span><span class="op" id="5677055">(</span><span class="keyword" id="5677056">chan</span>&nbsp;<span class="builtintype" id="5677061">string</span><span class="op" id="5677067">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677070">go</span>&nbsp;<span class="keyword" id="5677073">func</span><span class="op" id="5677077">(</span><span class="op" id="5677078">)</span>&nbsp;<span class="op" id="5677080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677084">buf</span>&nbsp;<span class="op" id="5677088">:=</span>&nbsp;<span class="builtinfunc" id="5677091">new</span><span class="op" id="5677094">(</span><span class="ident" id="5677095">bytes</span><span class="op" id="5677100">.</span><span class="ident" id="5677101">Buffer</span><span class="op" id="5677107">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677111">_</span><span class="op" id="5677112">,</span>&nbsp;<span class="ident" id="5677114">err</span>&nbsp;<span class="op" id="5677118">:=</span>&nbsp;<span class="ident" id="5677121">io</span><span class="op" id="5677123">.</span><span class="ident" id="5677124">Copy</span><span class="op" id="5677128">(</span><span class="ident" id="5677129">buf</span><span class="op" id="5677132">,</span>&nbsp;<span class="ident" id="5677134">r</span><span class="op" id="5677135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677139">r</span><span class="op" id="5677140">.</span><span class="ident" id="5677141">Close</span><span class="op" id="5677146">(</span><span class="op" id="5677147">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677151">if</span>&nbsp;<span class="ident" id="5677154">err</span>&nbsp;<span class="op" id="5677158">!=</span>&nbsp;<span class="ident" id="5677161">nil</span>&nbsp;<span class="op" id="5677165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677170">fmt</span><span class="op" id="5677173">.</span><span class="ident" id="5677174">Fprintf</span><span class="op" id="5677181">(</span><span class="ident" id="5677182">os</span><span class="op" id="5677184">.</span><span class="ident" id="5677185">Stderr</span><span class="op" id="5677191">,</span>&nbsp;<span class="string" id="5677193">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="5677222">,</span>&nbsp;<span class="ident" id="5677224">err</span><span class="op" id="5677227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677232">os</span><span class="op" id="5677234">.</span><span class="ident" id="5677235">Exit</span><span class="op" id="5677239">(</span><span class="num" id="5677240">1</span><span class="op" id="5677241">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677249">outC</span>&nbsp;<span class="op" id="5677254">&lt;-</span>&nbsp;<span class="ident" id="5677257">buf</span><span class="op" id="5677260">.</span><span class="ident" id="5677261">String</span><span class="op" id="5677267">(</span><span class="op" id="5677268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677271">}</span><span class="op" id="5677272">(</span><span class="op" id="5677273">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677277">start</span>&nbsp;<span class="op" id="5677283">:=</span>&nbsp;<span class="ident" id="5677286">time</span><span class="op" id="5677290">.</span><span class="ident" id="5677291">Now</span><span class="op" id="5677294">(</span><span class="op" id="5677295">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677298">ok</span>&nbsp;<span class="op" id="5677301">=</span>&nbsp;<span class="builtintype" id="5677303">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5677310">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677383">defer</span>&nbsp;<span class="keyword" id="5677389">func</span><span class="op" id="5677393">(</span><span class="op" id="5677394">)</span>&nbsp;<span class="op" id="5677396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677400">dstr</span>&nbsp;<span class="op" id="5677405">:=</span>&nbsp;<span class="ident" id="5677408">fmtDuration</span><span class="op" id="5677419">(</span><span class="ident" id="5677420">time</span><span class="op" id="5677424">.</span><span class="ident" id="5677425">Now</span><span class="op" id="5677428">(</span><span class="op" id="5677429">)</span><span class="op" id="5677430">.</span><span class="ident" id="5677431">Sub</span><span class="op" id="5677434">(</span><span class="ident" id="5677435">start</span><span class="op" id="5677440">)</span><span class="op" id="5677441">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5677446">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677491">w</span><span class="op" id="5677492">.</span><span class="ident" id="5677493">Close</span><span class="op" id="5677498">(</span><span class="op" id="5677499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677503">os</span><span class="op" id="5677505">.</span><span class="ident" id="5677506">Stdout</span>&nbsp;<span class="op" id="5677513">=</span>&nbsp;<span class="ident" id="5677515">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677524">out</span>&nbsp;<span class="op" id="5677528">:=</span>&nbsp;<span class="op" id="5677531">&lt;-</span><span class="ident" id="5677533">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677541">var</span>&nbsp;<span class="ident" id="5677545">fail</span>&nbsp;<span class="builtintype" id="5677550">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677559">err</span>&nbsp;<span class="op" id="5677563">:=</span>&nbsp;<span class="builtinfunc" id="5677566">recover</span><span class="op" id="5677573">(</span><span class="op" id="5677574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677578">if</span>&nbsp;<span class="ident" id="5677581">g</span><span class="op" id="5677582">,</span>&nbsp;<span class="ident" id="5677584">e</span>&nbsp;<span class="op" id="5677586">:=</span>&nbsp;<span class="ident" id="5677589">strings</span><span class="op" id="5677596">.</span><span class="ident" id="5677597">TrimSpace</span><span class="op" id="5677606">(</span><span class="ident" id="5677607">out</span><span class="op" id="5677610">)</span><span class="op" id="5677611">,</span>&nbsp;<span class="ident" id="5677613">strings</span><span class="op" id="5677620">.</span><span class="ident" id="5677621">TrimSpace</span><span class="op" id="5677630">(</span><span class="ident" id="5677631">eg</span><span class="op" id="5677633">.</span><span class="ident" id="5677634">Output</span><span class="op" id="5677640">)</span><span class="op" id="5677641">;</span>&nbsp;<span class="ident" id="5677643">g</span>&nbsp;<span class="op" id="5677645">!=</span>&nbsp;<span class="ident" id="5677648">e</span>&nbsp;<span class="op" id="5677650">&amp;&amp;</span>&nbsp;<span class="ident" id="5677653">err</span>&nbsp;<span class="op" id="5677657">==</span>&nbsp;<span class="ident" id="5677660">nil</span>&nbsp;<span class="op" id="5677664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677669">fail</span>&nbsp;<span class="op" id="5677674">=</span>&nbsp;<span class="ident" id="5677676">fmt</span><span class="op" id="5677679">.</span><span class="ident" id="5677680">Sprintf</span><span class="op" id="5677687">(</span><span class="string" id="5677688">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="5677711">,</span>&nbsp;<span class="ident" id="5677713">g</span><span class="op" id="5677714">,</span>&nbsp;<span class="ident" id="5677716">e</span><span class="op" id="5677717">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677721">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677725">if</span>&nbsp;<span class="ident" id="5677728">fail</span>&nbsp;<span class="op" id="5677733">!=</span>&nbsp;<span class="string" id="5677736">&#34;&#34;</span>&nbsp;<span class="op" id="5677739">||</span>&nbsp;<span class="ident" id="5677742">err</span>&nbsp;<span class="op" id="5677746">!=</span>&nbsp;<span class="ident" id="5677749">nil</span>&nbsp;<span class="op" id="5677753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677758">fmt</span><span class="op" id="5677761">.</span><span class="ident" id="5677762">Printf</span><span class="op" id="5677768">(</span><span class="string" id="5677769">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="5677792">,</span>&nbsp;<span class="ident" id="5677794">eg</span><span class="op" id="5677796">.</span><span class="ident" id="5677797">Name</span><span class="op" id="5677801">,</span>&nbsp;<span class="ident" id="5677803">dstr</span><span class="op" id="5677807">,</span>&nbsp;<span class="ident" id="5677809">fail</span><span class="op" id="5677813">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677818">ok</span>&nbsp;<span class="op" id="5677821">=</span>&nbsp;<span class="builtintype" id="5677823">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677831">}</span>&nbsp;<span class="keyword" id="5677833">else</span>&nbsp;<span class="keyword" id="5677838">if</span>&nbsp;<span class="op" id="5677841">*</span><span class="ident" id="5677842">chatty</span>&nbsp;<span class="op" id="5677849">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677854">fmt</span><span class="op" id="5677857">.</span><span class="ident" id="5677858">Printf</span><span class="op" id="5677864">(</span><span class="string" id="5677865">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="5677886">,</span>&nbsp;<span class="ident" id="5677888">eg</span><span class="op" id="5677890">.</span><span class="ident" id="5677891">Name</span><span class="op" id="5677895">,</span>&nbsp;<span class="ident" id="5677897">dstr</span><span class="op" id="5677901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677909">if</span>&nbsp;<span class="ident" id="5677912">err</span>&nbsp;<span class="op" id="5677916">!=</span>&nbsp;<span class="ident" id="5677919">nil</span>&nbsp;<span class="op" id="5677923">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="5677928">panic</span><span class="op" id="5677933">(</span><span class="ident" id="5677934">err</span><span class="op" id="5677937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677941">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5677944">}</span><span class="op" id="5677945">(</span><span class="op" id="5677946">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="5677950">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="5677967">eg</span><span class="op" id="5677969">.</span><span class="ident" id="5677970">F</span><span class="op" id="5677971">(</span><span class="op" id="5677972">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="5677975">return</span><br>
<span class="lineno">100</span><span class="op" id="5677982">}</span>
</div>
</body>
</html>
