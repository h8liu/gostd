<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="1622214">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1622269">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1622323">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="1622374">//&nbsp;Parse&nbsp;&#34;zoneinfo&#34;&nbsp;time&nbsp;zone&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="1622410">//&nbsp;This&nbsp;is&nbsp;a&nbsp;fairly&nbsp;standard&nbsp;file&nbsp;format&nbsp;used&nbsp;on&nbsp;OS&nbsp;X,&nbsp;Linux,&nbsp;BSD,&nbsp;Sun,&nbsp;and&nbsp;others.</span><br>
<span class="lineno"></span><span class="comment" id="1622494">//&nbsp;See&nbsp;tzfile(5),&nbsp;http://en.wikipedia.org/wiki/Zoneinfo,</span><br>
<span class="lineno"></span><span class="comment" id="1622551">//&nbsp;and&nbsp;ftp://munnari.oz.au/pub/oldtz/</span><br>
<span class="lineno"></span><br>
<span class="lineno">10</span><span class="keyword" id="1622590">package</span>&nbsp;<span class="ident" id="1622598">time</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1622604">import</span>&nbsp;<span class="string" id="1622611">&#34;errors&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1622621">//&nbsp;Simple&nbsp;I/O&nbsp;interface&nbsp;to&nbsp;binary&nbsp;blob&nbsp;of&nbsp;data.</span><br>
<span class="lineno">15</span><span class="keyword" id="1622669">type</span>&nbsp;<span class="ident" id="1622674">data</span>&nbsp;<span class="keyword" id="1622679">struct</span>&nbsp;<span class="op" id="1622686">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622689">p</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1622695">[</span><span class="op" id="1622696">]</span><span class="builtintype" id="1622697">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1622703">error</span>&nbsp;<span class="builtintype" id="1622709">bool</span><br>
<span class="lineno"></span><span class="op" id="1622714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="1622717">func</span>&nbsp;<span class="op" id="1622722">(</span><span class="ident" id="1622723">d</span>&nbsp;<span class="op" id="1622725">*</span><span class="ident" id="1622726"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1622730">)</span>&nbsp;<span class="ident" id="1622732">read</span><span class="op" id="1622736">(</span><span class="ident" id="1622737">n</span>&nbsp;<span class="builtintype" id="1622739">int</span><span class="op" id="1622742">)</span>&nbsp;<span class="op" id="1622744">[</span><span class="op" id="1622745">]</span><span class="builtintype" id="1622746">byte</span>&nbsp;<span class="op" id="1622751">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622754">if</span>&nbsp;<span class="builtinfunc" id="1622757">len</span><span class="op" id="1622760">(</span><span class="ident" id="1622761"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622762">.</span><span class="ident" id="1622763">p</span><span class="op" id="1622764">)</span>&nbsp;<span class="op" id="1622766">&lt;</span>&nbsp;<span class="ident" id="1622768"><a href="/time/zoneinfo_read.go.html#1622737">n</a></span>&nbsp;<span class="op" id="1622770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622774"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622775">.</span><span class="ident" id="1622776">p</span>&nbsp;<span class="op" id="1622778">=</span>&nbsp;<span class="ident" id="1622780">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622786"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622787">.</span><span class="builtintype" id="1622788">error</span>&nbsp;<span class="op" id="1622794">=</span>&nbsp;<span class="builtintype" id="1622796">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622803">return</span>&nbsp;<span class="ident" id="1622810">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622815">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622818">p</span>&nbsp;<span class="op" id="1622820">:=</span>&nbsp;<span class="ident" id="1622823"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622824">.</span><span class="ident" id="1622825">p</span><span class="op" id="1622826">[</span><span class="num" id="1622827">0</span><span class="op" id="1622828">:</span><span class="ident" id="1622829"><a href="/time/zoneinfo_read.go.html#1622737">n</a></span><span class="op" id="1622830">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622833"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622834">.</span><span class="ident" id="1622835">p</span>&nbsp;<span class="op" id="1622837">=</span>&nbsp;<span class="ident" id="1622839"><a href="/time/zoneinfo_read.go.html#1622723">d</a></span><span class="op" id="1622840">.</span><span class="ident" id="1622841">p</span><span class="op" id="1622842">[</span><span class="ident" id="1622843"><a href="/time/zoneinfo_read.go.html#1622737">n</a></span><span class="op" id="1622844">:</span><span class="op" id="1622845">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622848">return</span>&nbsp;<span class="ident" id="1622855"><a href="/time/zoneinfo_read.go.html#1622818">p</a></span><br>
<span class="lineno"></span><span class="op" id="1622857">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="keyword" id="1622860">func</span>&nbsp;<span class="op" id="1622865">(</span><span class="ident" id="1622866">d</span>&nbsp;<span class="op" id="1622868">*</span><span class="ident" id="1622869"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1622873">)</span>&nbsp;<span class="ident" id="1622875">big4</span><span class="op" id="1622879">(</span><span class="op" id="1622880">)</span>&nbsp;<span class="op" id="1622882">(</span><span class="ident" id="1622883">n</span>&nbsp;<span class="builtintype" id="1622885">uint32</span><span class="op" id="1622891">,</span>&nbsp;<span class="ident" id="1622893">ok</span>&nbsp;<span class="builtintype" id="1622896">bool</span><span class="op" id="1622900">)</span>&nbsp;<span class="op" id="1622902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622905">p</span>&nbsp;<span class="op" id="1622907">:=</span>&nbsp;<span class="ident" id="1622910"><a href="/time/zoneinfo_read.go.html#1622866">d</a></span><span class="op" id="1622911">.</span><span class="ident" id="1622912">read</span><span class="op" id="1622916">(</span><span class="num" id="1622917">4</span><span class="op" id="1622918">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622921">if</span>&nbsp;<span class="builtinfunc" id="1622924">len</span><span class="op" id="1622927">(</span><span class="ident" id="1622928"><a href="/time/zoneinfo_read.go.html#1622905">p</a></span><span class="op" id="1622929">)</span>&nbsp;<span class="op" id="1622931">&lt;</span>&nbsp;<span class="num" id="1622933">4</span>&nbsp;<span class="op" id="1622935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1622939"><a href="/time/zoneinfo_read.go.html#1622866">d</a></span><span class="op" id="1622940">.</span><span class="builtintype" id="1622941">error</span>&nbsp;<span class="op" id="1622947">=</span>&nbsp;<span class="builtintype" id="1622949">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622956">return</span>&nbsp;<span class="num" id="1622963">0</span><span class="op" id="1622964">,</span>&nbsp;<span class="builtintype" id="1622966">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1622973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1622976">return</span>&nbsp;<span class="builtintype" id="1622983">uint32</span><span class="op" id="1622989">(</span><span class="ident" id="1622990"><a href="/time/zoneinfo_read.go.html#1622905">p</a></span><span class="op" id="1622991">[</span><span class="num" id="1622992">0</span><span class="op" id="1622993">]</span><span class="op" id="1622994">)</span><span class="op" id="1622995">&lt;&lt;</span><span class="num" id="1622997">24</span>&nbsp;<span class="op" id="1623000">|</span>&nbsp;<span class="builtintype" id="1623002">uint32</span><span class="op" id="1623008">(</span><span class="ident" id="1623009"><a href="/time/zoneinfo_read.go.html#1622905">p</a></span><span class="op" id="1623010">[</span><span class="num" id="1623011">1</span><span class="op" id="1623012">]</span><span class="op" id="1623013">)</span><span class="op" id="1623014">&lt;&lt;</span><span class="num" id="1623016">16</span>&nbsp;<span class="op" id="1623019">|</span>&nbsp;<span class="builtintype" id="1623021">uint32</span><span class="op" id="1623027">(</span><span class="ident" id="1623028"><a href="/time/zoneinfo_read.go.html#1622905">p</a></span><span class="op" id="1623029">[</span><span class="num" id="1623030">2</span><span class="op" id="1623031">]</span><span class="op" id="1623032">)</span><span class="op" id="1623033">&lt;&lt;</span><span class="num" id="1623035">8</span>&nbsp;<span class="op" id="1623037">|</span>&nbsp;<span class="builtintype" id="1623039">uint32</span><span class="op" id="1623045">(</span><span class="ident" id="1623046"><a href="/time/zoneinfo_read.go.html#1622905">p</a></span><span class="op" id="1623047">[</span><span class="num" id="1623048">3</span><span class="op" id="1623049">]</span><span class="op" id="1623050">)</span><span class="op" id="1623051">,</span>&nbsp;<span class="builtintype" id="1623053">true</span><br>
<span class="lineno"></span><span class="op" id="1623058">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="1623061">func</span>&nbsp;<span class="op" id="1623066">(</span><span class="ident" id="1623067">d</span>&nbsp;<span class="op" id="1623069">*</span><span class="ident" id="1623070"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1623074">)</span>&nbsp;<span class="builtintype" id="1623076">byte</span><span class="op" id="1623080">(</span><span class="op" id="1623081">)</span>&nbsp;<span class="op" id="1623083">(</span><span class="ident" id="1623084">n</span>&nbsp;<span class="builtintype" id="1623086">byte</span><span class="op" id="1623090">,</span>&nbsp;<span class="ident" id="1623092">ok</span>&nbsp;<span class="builtintype" id="1623095">bool</span><span class="op" id="1623099">)</span>&nbsp;<span class="op" id="1623101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1623104">p</span>&nbsp;<span class="op" id="1623106">:=</span>&nbsp;<span class="ident" id="1623109"><a href="/time/zoneinfo_read.go.html#1623067">d</a></span><span class="op" id="1623110">.</span><span class="ident" id="1623111">read</span><span class="op" id="1623115">(</span><span class="num" id="1623116">1</span><span class="op" id="1623117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623120">if</span>&nbsp;<span class="builtinfunc" id="1623123">len</span><span class="op" id="1623126">(</span><span class="ident" id="1623127"><a href="/time/zoneinfo_read.go.html#1623104">p</a></span><span class="op" id="1623128">)</span>&nbsp;<span class="op" id="1623130">&lt;</span>&nbsp;<span class="num" id="1623132">1</span>&nbsp;<span class="op" id="1623134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1623138"><a href="/time/zoneinfo_read.go.html#1623067">d</a></span><span class="op" id="1623139">.</span><span class="builtintype" id="1623140">error</span>&nbsp;<span class="op" id="1623146">=</span>&nbsp;<span class="builtintype" id="1623148">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623155">return</span>&nbsp;<span class="num" id="1623162">0</span><span class="op" id="1623163">,</span>&nbsp;<span class="builtintype" id="1623165">false</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1623172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623175">return</span>&nbsp;<span class="ident" id="1623182"><a href="/time/zoneinfo_read.go.html#1623104">p</a></span><span class="op" id="1623183">[</span><span class="num" id="1623184">0</span><span class="op" id="1623185">]</span><span class="op" id="1623186">,</span>&nbsp;<span class="builtintype" id="1623188">true</span><br>
<span class="lineno"></span><span class="op" id="1623193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1623196">//&nbsp;Make&nbsp;a&nbsp;string&nbsp;by&nbsp;stopping&nbsp;at&nbsp;the&nbsp;first&nbsp;NUL</span><br>
<span class="lineno">50</span><span class="keyword" id="1623242">func</span>&nbsp;<span class="ident" id="1623247">byteString</span><span class="op" id="1623257">(</span><span class="ident" id="1623258">p</span>&nbsp;<span class="op" id="1623260">[</span><span class="op" id="1623261">]</span><span class="builtintype" id="1623262">byte</span><span class="op" id="1623266">)</span>&nbsp;<span class="builtintype" id="1623268">string</span>&nbsp;<span class="op" id="1623275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623278">for</span>&nbsp;<span class="ident" id="1623282">i</span>&nbsp;<span class="op" id="1623284">:=</span>&nbsp;<span class="num" id="1623287">0</span><span class="op" id="1623288">;</span>&nbsp;<span class="ident" id="1623290"><a href="/time/zoneinfo_read.go.html#1623282">i</a></span>&nbsp;<span class="op" id="1623292">&lt;</span>&nbsp;<span class="builtinfunc" id="1623294">len</span><span class="op" id="1623297">(</span><span class="ident" id="1623298"><a href="/time/zoneinfo_read.go.html#1623258">p</a></span><span class="op" id="1623299">)</span><span class="op" id="1623300">;</span>&nbsp;<span class="ident" id="1623302"><a href="/time/zoneinfo_read.go.html#1623282">i</a></span><span class="op" id="1623303">++</span>&nbsp;<span class="op" id="1623306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623310">if</span>&nbsp;<span class="ident" id="1623313"><a href="/time/zoneinfo_read.go.html#1623258">p</a></span><span class="op" id="1623314">[</span><span class="ident" id="1623315"><a href="/time/zoneinfo_read.go.html#1623282">i</a></span><span class="op" id="1623316">]</span>&nbsp;<span class="op" id="1623318">==</span>&nbsp;<span class="num" id="1623321">0</span>&nbsp;<span class="op" id="1623323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623328">return</span>&nbsp;<span class="builtintype" id="1623335">string</span><span class="op" id="1623341">(</span><span class="ident" id="1623342"><a href="/time/zoneinfo_read.go.html#1623258">p</a></span><span class="op" id="1623343">[</span><span class="num" id="1623344">0</span><span class="op" id="1623345">:</span><span class="ident" id="1623346"><a href="/time/zoneinfo_read.go.html#1623282">i</a></span><span class="op" id="1623347">]</span><span class="op" id="1623348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1623352">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1623355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623358">return</span>&nbsp;<span class="builtintype" id="1623365">string</span><span class="op" id="1623371">(</span><span class="ident" id="1623372"><a href="/time/zoneinfo_read.go.html#1623258">p</a></span><span class="op" id="1623373">)</span><br>
<span class="lineno"></span><span class="op" id="1623375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1623378">var</span>&nbsp;<span class="ident" id="1623382">badData</span>&nbsp;<span class="op" id="1623390">=</span>&nbsp;<span class="ident" id="1623392"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1623398">.</span><span class="ident" id="1623399">New</span><span class="op" id="1623402">(</span><span class="string" id="1623403">&#34;malformed&nbsp;time&nbsp;zone&nbsp;information&#34;</span><span class="op" id="1623436">)</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="1623439">func</span>&nbsp;<span class="ident" id="1623444">loadZoneData</span><span class="op" id="1623456">(</span><span class="ident" id="1623457">bytes</span>&nbsp;<span class="op" id="1623463">[</span><span class="op" id="1623464">]</span><span class="builtintype" id="1623465">byte</span><span class="op" id="1623469">)</span>&nbsp;<span class="op" id="1623471">(</span><span class="ident" id="1623472">l</span>&nbsp;<span class="op" id="1623474">*</span><span class="ident" id="1623475"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1623483">,</span>&nbsp;<span class="ident" id="1623485">err</span>&nbsp;<span class="builtintype" id="1623489">error</span><span class="op" id="1623494">)</span>&nbsp;<span class="op" id="1623496">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1623499">d</span>&nbsp;<span class="op" id="1623501">:=</span>&nbsp;<span class="ident" id="1623504"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1623508">{</span><span class="ident" id="1623509"><a href="/time/zoneinfo_read.go.html#1623457">bytes</a></span><span class="op" id="1623514">,</span>&nbsp;<span class="builtintype" id="1623516">false</span><span class="op" id="1623521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623525">//&nbsp;4-byte&nbsp;magic&nbsp;&#34;TZif&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623549">if</span>&nbsp;<span class="ident" id="1623552">magic</span>&nbsp;<span class="op" id="1623558">:=</span>&nbsp;<span class="ident" id="1623561"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1623562">.</span><span class="ident" id="1623563">read</span><span class="op" id="1623567">(</span><span class="num" id="1623568">4</span><span class="op" id="1623569">)</span><span class="op" id="1623570">;</span>&nbsp;<span class="builtintype" id="1623572">string</span><span class="op" id="1623578">(</span><span class="ident" id="1623579"><a href="/time/zoneinfo_read.go.html#1623552">magic</a></span><span class="op" id="1623584">)</span>&nbsp;<span class="op" id="1623586">!=</span>&nbsp;<span class="string" id="1623589">&#34;TZif&#34;</span>&nbsp;<span class="op" id="1623596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623600">return</span>&nbsp;<span class="ident" id="1623607">nil</span><span class="op" id="1623610">,</span>&nbsp;<span class="ident" id="1623612"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1623621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623625">//&nbsp;1-byte&nbsp;version,&nbsp;then&nbsp;15&nbsp;bytes&nbsp;of&nbsp;padding</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623670">var</span>&nbsp;<span class="ident" id="1623674">p</span>&nbsp;<span class="op" id="1623676">[</span><span class="op" id="1623677">]</span><span class="builtintype" id="1623678">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623684">if</span>&nbsp;<span class="ident" id="1623687"><a href="/time/zoneinfo_read.go.html#1623674">p</a></span>&nbsp;<span class="op" id="1623689">=</span>&nbsp;<span class="ident" id="1623691"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1623692">.</span><span class="ident" id="1623693">read</span><span class="op" id="1623697">(</span><span class="num" id="1623698">16</span><span class="op" id="1623700">)</span><span class="op" id="1623701">;</span>&nbsp;<span class="builtinfunc" id="1623703">len</span><span class="op" id="1623706">(</span><span class="ident" id="1623707"><a href="/time/zoneinfo_read.go.html#1623674">p</a></span><span class="op" id="1623708">)</span>&nbsp;<span class="op" id="1623710">!=</span>&nbsp;<span class="num" id="1623713">16</span>&nbsp;<span class="op" id="1623716">||</span>&nbsp;<span class="ident" id="1623719"><a href="/time/zoneinfo_read.go.html#1623674">p</a></span><span class="op" id="1623720">[</span><span class="num" id="1623721">0</span><span class="op" id="1623722">]</span>&nbsp;<span class="op" id="1623724">!=</span>&nbsp;<span class="num" id="1623727">0</span>&nbsp;<span class="op" id="1623729">&amp;&amp;</span>&nbsp;<span class="ident" id="1623732"><a href="/time/zoneinfo_read.go.html#1623674">p</a></span><span class="op" id="1623733">[</span><span class="num" id="1623734">0</span><span class="op" id="1623735">]</span>&nbsp;<span class="op" id="1623737">!=</span>&nbsp;<span class="string" id="1623740">&#39;2&#39;</span>&nbsp;<span class="op" id="1623744">&amp;&amp;</span>&nbsp;<span class="ident" id="1623747"><a href="/time/zoneinfo_read.go.html#1623674">p</a></span><span class="op" id="1623748">[</span><span class="num" id="1623749">0</span><span class="op" id="1623750">]</span>&nbsp;<span class="op" id="1623752">!=</span>&nbsp;<span class="string" id="1623755">&#39;3&#39;</span>&nbsp;<span class="op" id="1623759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1623763">return</span>&nbsp;<span class="ident" id="1623770">nil</span><span class="op" id="1623773">,</span>&nbsp;<span class="ident" id="1623775"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1623784">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623788">//&nbsp;six&nbsp;big-endian&nbsp;32-bit&nbsp;integers:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623824">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;UTC/local&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623859">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;standard/wall&nbsp;indicators</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623898">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;leap&nbsp;seconds</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623925">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;transition&nbsp;times</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623956">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;local&nbsp;time&nbsp;zones</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1623987">//&nbsp;&nbsp;&nbsp;&nbspnumber&nbsp;of&nbsp;characters&nbsp;of&nbsp;time&nbsp;zone&nbsp;abbrev&nbsp;strings</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624040">const</span>&nbsp;<span class="op" id="1624046">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624050">NUTCLocal</span>&nbsp;<span class="op" id="1624060">=</span>&nbsp;<span class="ident" id="1624062">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624069">NStdWall</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624080">NLeap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624088">NTime</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624096">NZone</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624104">NChar</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1624111">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624114">var</span>&nbsp;<span class="ident" id="1624118">n</span>&nbsp;<span class="op" id="1624120">[</span><span class="num" id="1624121">6</span><span class="op" id="1624122">]</span><span class="builtintype" id="1624123">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624128">for</span>&nbsp;<span class="ident" id="1624132">i</span>&nbsp;<span class="op" id="1624134">:=</span>&nbsp;<span class="num" id="1624137">0</span><span class="op" id="1624138">;</span>&nbsp;<span class="ident" id="1624140"><a href="/time/zoneinfo_read.go.html#1624132">i</a></span>&nbsp;<span class="op" id="1624142">&lt;</span>&nbsp;<span class="num" id="1624144">6</span><span class="op" id="1624145">;</span>&nbsp;<span class="ident" id="1624147"><a href="/time/zoneinfo_read.go.html#1624132">i</a></span><span class="op" id="1624148">++</span>&nbsp;<span class="op" id="1624151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624155">nn</span><span class="op" id="1624157">,</span>&nbsp;<span class="ident" id="1624159">ok</span>&nbsp;<span class="op" id="1624162">:=</span>&nbsp;<span class="ident" id="1624165"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624166">.</span><span class="ident" id="1624167">big4</span><span class="op" id="1624171">(</span><span class="op" id="1624172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624176">if</span>&nbsp;<span class="op" id="1624179">!</span><span class="ident" id="1624180"><a href="/time/zoneinfo_read.go.html#1624159">ok</a></span>&nbsp;<span class="op" id="1624183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624188">return</span>&nbsp;<span class="ident" id="1624195">nil</span><span class="op" id="1624198">,</span>&nbsp;<span class="ident" id="1624200"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1624210">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624214"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624215">[</span><span class="ident" id="1624216"><a href="/time/zoneinfo_read.go.html#1624132">i</a></span><span class="op" id="1624217">]</span>&nbsp;<span class="op" id="1624219">=</span>&nbsp;<span class="builtintype" id="1624221">int</span><span class="op" id="1624224">(</span><span class="ident" id="1624225"><a href="/time/zoneinfo_read.go.html#1624155">nn</a></span><span class="op" id="1624227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1624230">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624234">//&nbsp;Transition&nbsp;times.</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624256">txtimes</span>&nbsp;<span class="op" id="1624264">:=</span>&nbsp;<span class="ident" id="1624267"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1624271">{</span><span class="ident" id="1624272"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624273">.</span><span class="ident" id="1624274">read</span><span class="op" id="1624278">(</span><span class="ident" id="1624279"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624280">[</span><span class="ident" id="1624281"><a href="/time/zoneinfo_read.go.html#1624088">NTime</a></span><span class="op" id="1624286">]</span>&nbsp;<span class="op" id="1624288">*</span>&nbsp;<span class="num" id="1624290">4</span><span class="op" id="1624291">)</span><span class="op" id="1624292">,</span>&nbsp;<span class="builtintype" id="1624294">false</span><span class="op" id="1624299">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624303">//&nbsp;Time&nbsp;zone&nbsp;indices&nbsp;for&nbsp;transition&nbsp;times.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624347">txzones</span>&nbsp;<span class="op" id="1624355">:=</span>&nbsp;<span class="ident" id="1624358"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624359">.</span><span class="ident" id="1624360">read</span><span class="op" id="1624364">(</span><span class="ident" id="1624365"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624366">[</span><span class="ident" id="1624367"><a href="/time/zoneinfo_read.go.html#1624088">NTime</a></span><span class="op" id="1624372">]</span><span class="op" id="1624373">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624377">//&nbsp;Zone&nbsp;info&nbsp;structures</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624402">zonedata</span>&nbsp;<span class="op" id="1624411">:=</span>&nbsp;<span class="ident" id="1624414"><a href="/time/zoneinfo_read.go.html#1622674">data</a></span><span class="op" id="1624418">{</span><span class="ident" id="1624419"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624420">.</span><span class="ident" id="1624421">read</span><span class="op" id="1624425">(</span><span class="ident" id="1624426"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624427">[</span><span class="ident" id="1624428"><a href="/time/zoneinfo_read.go.html#1624096">NZone</a></span><span class="op" id="1624433">]</span>&nbsp;<span class="op" id="1624435">*</span>&nbsp;<span class="num" id="1624437">6</span><span class="op" id="1624438">)</span><span class="op" id="1624439">,</span>&nbsp;<span class="builtintype" id="1624441">false</span><span class="op" id="1624446">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624450">//&nbsp;Time&nbsp;zone&nbsp;abbreviations.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624479">abbrev</span>&nbsp;<span class="op" id="1624486">:=</span>&nbsp;<span class="ident" id="1624489"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624490">.</span><span class="ident" id="1624491">read</span><span class="op" id="1624495">(</span><span class="ident" id="1624496"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624497">[</span><span class="ident" id="1624498"><a href="/time/zoneinfo_read.go.html#1624104">NChar</a></span><span class="op" id="1624503">]</span><span class="op" id="1624504">)</span><br>
<span class="lineno">110</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624508">//&nbsp;Leap-second&nbsp;time&nbsp;pairs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624535"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624536">.</span><span class="ident" id="1624537">read</span><span class="op" id="1624541">(</span><span class="ident" id="1624542"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624543">[</span><span class="ident" id="1624544"><a href="/time/zoneinfo_read.go.html#1624080">NLeap</a></span><span class="op" id="1624549">]</span>&nbsp;<span class="op" id="1624551">*</span>&nbsp;<span class="num" id="1624553">8</span><span class="op" id="1624554">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624558">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624612">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;standard&nbsp;time&nbsp;or&nbsp;wall&nbsp;time.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624661">isstd</span>&nbsp;<span class="op" id="1624667">:=</span>&nbsp;<span class="ident" id="1624670"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624671">.</span><span class="ident" id="1624672">read</span><span class="op" id="1624676">(</span><span class="ident" id="1624677"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624678">[</span><span class="ident" id="1624679"><a href="/time/zoneinfo_read.go.html#1624069">NStdWall</a></span><span class="op" id="1624687">]</span><span class="op" id="1624688">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624692">//&nbsp;Whether&nbsp;tx&nbsp;times&nbsp;associated&nbsp;with&nbsp;local&nbsp;time&nbsp;types</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624746">//&nbsp;are&nbsp;specified&nbsp;as&nbsp;UTC&nbsp;or&nbsp;local&nbsp;time.</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1624786">isutc</span>&nbsp;<span class="op" id="1624792">:=</span>&nbsp;<span class="ident" id="1624795"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624796">.</span><span class="ident" id="1624797">read</span><span class="op" id="1624801">(</span><span class="ident" id="1624802"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1624803">[</span><span class="ident" id="1624804"><a href="/time/zoneinfo_read.go.html#1624050">NUTCLocal</a></span><span class="op" id="1624813">]</span><span class="op" id="1624814">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624818">if</span>&nbsp;<span class="ident" id="1624821"><a href="/time/zoneinfo_read.go.html#1623499">d</a></span><span class="op" id="1624822">.</span><span class="builtintype" id="1624823">error</span>&nbsp;<span class="op" id="1624829">{</span>&nbsp;<span class="comment" id="1624831">//&nbsp;ran&nbsp;out&nbsp;of&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1624852">return</span>&nbsp;<span class="ident" id="1624859">nil</span><span class="op" id="1624862">,</span>&nbsp;<span class="ident" id="1624864"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1624873">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624877">//&nbsp;If&nbsp;version&nbsp;==&nbsp;2&nbsp;or&nbsp;3,&nbsp;the&nbsp;entire&nbsp;file&nbsp;repeats,&nbsp;this&nbsp;time&nbsp;using</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624944">//&nbsp;8-byte&nbsp;ints&nbsp;for&nbsp;txtimes&nbsp;and&nbsp;leap&nbsp;seconds.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1624990">//&nbsp;We&nbsp;won&#39;t&nbsp;need&nbsp;those&nbsp;until&nbsp;2106.</span><br>
<span class="lineno"></span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1625027">//&nbsp;Now&nbsp;we&nbsp;can&nbsp;build&nbsp;up&nbsp;a&nbsp;useful&nbsp;data&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1625076">//&nbsp;First&nbsp;the&nbsp;zone&nbsp;information.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1625108">//&nbsp;&nbsp;&nbsp;&nbsputcoff[4]&nbsp;isdst[1]&nbsp;nameindex[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625144">zone</span>&nbsp;<span class="op" id="1625149">:=</span>&nbsp;<span class="builtinfunc" id="1625152">make</span><span class="op" id="1625156">(</span><span class="op" id="1625157">[</span><span class="op" id="1625158">]</span><span class="ident" id="1625159"><a href="/time/zoneinfo.go.html#1615412">zone</a></span><span class="op" id="1625163">,</span>&nbsp;<span class="ident" id="1625165"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1625166">[</span><span class="ident" id="1625167"><a href="/time/zoneinfo_read.go.html#1624096">NZone</a></span><span class="op" id="1625172">]</span><span class="op" id="1625173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625176">for</span>&nbsp;<span class="ident" id="1625180">i</span>&nbsp;<span class="op" id="1625182">:=</span>&nbsp;<span class="keyword" id="1625185">range</span>&nbsp;<span class="ident" id="1625191"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span>&nbsp;<span class="op" id="1625196">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625200">var</span>&nbsp;<span class="ident" id="1625204">ok</span>&nbsp;<span class="builtintype" id="1625207">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625214">var</span>&nbsp;<span class="ident" id="1625218">n</span>&nbsp;<span class="builtintype" id="1625220">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625229">if</span>&nbsp;<span class="ident" id="1625232"><a href="/time/zoneinfo_read.go.html#1625218">n</a></span><span class="op" id="1625233">,</span>&nbsp;<span class="ident" id="1625235"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625238">=</span>&nbsp;<span class="ident" id="1625240"><a href="/time/zoneinfo_read.go.html#1624402">zonedata</a></span><span class="op" id="1625248">.</span><span class="ident" id="1625249">big4</span><span class="op" id="1625253">(</span><span class="op" id="1625254">)</span><span class="op" id="1625255">;</span>&nbsp;<span class="op" id="1625257">!</span><span class="ident" id="1625258"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625266">return</span>&nbsp;<span class="ident" id="1625273">nil</span><span class="op" id="1625276">,</span>&nbsp;<span class="ident" id="1625278"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625288">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625292"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span><span class="op" id="1625296">[</span><span class="ident" id="1625297"><a href="/time/zoneinfo_read.go.html#1625180">i</a></span><span class="op" id="1625298">]</span><span class="op" id="1625299">.</span><span class="ident" id="1625300">offset</span>&nbsp;<span class="op" id="1625307">=</span>&nbsp;<span class="builtintype" id="1625309">int</span><span class="op" id="1625312">(</span><span class="builtintype" id="1625313">int32</span><span class="op" id="1625318">(</span><span class="ident" id="1625319"><a href="/time/zoneinfo_read.go.html#1625218">n</a></span><span class="op" id="1625320">)</span><span class="op" id="1625321">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625325">var</span>&nbsp;<span class="ident" id="1625329">b</span>&nbsp;<span class="builtintype" id="1625331">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625338">if</span>&nbsp;<span class="ident" id="1625341"><a href="/time/zoneinfo_read.go.html#1625329">b</a></span><span class="op" id="1625342">,</span>&nbsp;<span class="ident" id="1625344"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625347">=</span>&nbsp;<span class="ident" id="1625349"><a href="/time/zoneinfo_read.go.html#1624402">zonedata</a></span><span class="op" id="1625357">.</span><span class="builtintype" id="1625358">byte</span><span class="op" id="1625362">(</span><span class="op" id="1625363">)</span><span class="op" id="1625364">;</span>&nbsp;<span class="op" id="1625366">!</span><span class="ident" id="1625367"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625370">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625375">return</span>&nbsp;<span class="ident" id="1625382">nil</span><span class="op" id="1625385">,</span>&nbsp;<span class="ident" id="1625387"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625397">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625401"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span><span class="op" id="1625405">[</span><span class="ident" id="1625406"><a href="/time/zoneinfo_read.go.html#1625180">i</a></span><span class="op" id="1625407">]</span><span class="op" id="1625408">.</span><span class="ident" id="1625409">isDST</span>&nbsp;<span class="op" id="1625415">=</span>&nbsp;<span class="ident" id="1625417"><a href="/time/zoneinfo_read.go.html#1625329">b</a></span>&nbsp;<span class="op" id="1625419">!=</span>&nbsp;<span class="num" id="1625422">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625426">if</span>&nbsp;<span class="ident" id="1625429"><a href="/time/zoneinfo_read.go.html#1625329">b</a></span><span class="op" id="1625430">,</span>&nbsp;<span class="ident" id="1625432"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625435">=</span>&nbsp;<span class="ident" id="1625437"><a href="/time/zoneinfo_read.go.html#1624402">zonedata</a></span><span class="op" id="1625445">.</span><span class="builtintype" id="1625446">byte</span><span class="op" id="1625450">(</span><span class="op" id="1625451">)</span><span class="op" id="1625452">;</span>&nbsp;<span class="op" id="1625454">!</span><span class="ident" id="1625455"><a href="/time/zoneinfo_read.go.html#1625204">ok</a></span>&nbsp;<span class="op" id="1625458">||</span>&nbsp;<span class="builtintype" id="1625461">int</span><span class="op" id="1625464">(</span><span class="ident" id="1625465"><a href="/time/zoneinfo_read.go.html#1625329">b</a></span><span class="op" id="1625466">)</span>&nbsp;<span class="op" id="1625468">&gt;=</span>&nbsp;<span class="builtinfunc" id="1625471">len</span><span class="op" id="1625474">(</span><span class="ident" id="1625475"><a href="/time/zoneinfo_read.go.html#1624479">abbrev</a></span><span class="op" id="1625481">)</span>&nbsp;<span class="op" id="1625483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625488">return</span>&nbsp;<span class="ident" id="1625495">nil</span><span class="op" id="1625498">,</span>&nbsp;<span class="ident" id="1625500"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625510">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625514"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span><span class="op" id="1625518">[</span><span class="ident" id="1625519"><a href="/time/zoneinfo_read.go.html#1625180">i</a></span><span class="op" id="1625520">]</span><span class="op" id="1625521">.</span><span class="ident" id="1625522">name</span>&nbsp;<span class="op" id="1625527">=</span>&nbsp;<span class="ident" id="1625529"><a href="/time/zoneinfo_read.go.html#1623247">byteString</a></span><span class="op" id="1625539">(</span><span class="ident" id="1625540"><a href="/time/zoneinfo_read.go.html#1624479">abbrev</a></span><span class="op" id="1625546">[</span><span class="ident" id="1625547"><a href="/time/zoneinfo_read.go.html#1625329">b</a></span><span class="op" id="1625548">:</span><span class="op" id="1625549">]</span><span class="op" id="1625550">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1625557">//&nbsp;Now&nbsp;the&nbsp;transition&nbsp;time&nbsp;info.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625591">tx</span>&nbsp;<span class="op" id="1625594">:=</span>&nbsp;<span class="builtinfunc" id="1625597">make</span><span class="op" id="1625601">(</span><span class="op" id="1625602">[</span><span class="op" id="1625603">]</span><span class="ident" id="1625604"><a href="/time/zoneinfo.go.html#1615625">zoneTrans</a></span><span class="op" id="1625613">,</span>&nbsp;<span class="ident" id="1625615"><a href="/time/zoneinfo_read.go.html#1624118">n</a></span><span class="op" id="1625616">[</span><span class="ident" id="1625617"><a href="/time/zoneinfo_read.go.html#1624088">NTime</a></span><span class="op" id="1625622">]</span><span class="op" id="1625623">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625626">for</span>&nbsp;<span class="ident" id="1625630">i</span>&nbsp;<span class="op" id="1625632">:=</span>&nbsp;<span class="keyword" id="1625635">range</span>&nbsp;<span class="ident" id="1625641"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span>&nbsp;<span class="op" id="1625644">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625648">var</span>&nbsp;<span class="ident" id="1625652">ok</span>&nbsp;<span class="builtintype" id="1625655">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625662">var</span>&nbsp;<span class="ident" id="1625666">n</span>&nbsp;<span class="builtintype" id="1625668">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625677">if</span>&nbsp;<span class="ident" id="1625680"><a href="/time/zoneinfo_read.go.html#1625666">n</a></span><span class="op" id="1625681">,</span>&nbsp;<span class="ident" id="1625683"><a href="/time/zoneinfo_read.go.html#1625652">ok</a></span>&nbsp;<span class="op" id="1625686">=</span>&nbsp;<span class="ident" id="1625688"><a href="/time/zoneinfo_read.go.html#1624256">txtimes</a></span><span class="op" id="1625695">.</span><span class="ident" id="1625696">big4</span><span class="op" id="1625700">(</span><span class="op" id="1625701">)</span><span class="op" id="1625702">;</span>&nbsp;<span class="op" id="1625704">!</span><span class="ident" id="1625705"><a href="/time/zoneinfo_read.go.html#1625652">ok</a></span>&nbsp;<span class="op" id="1625708">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625713">return</span>&nbsp;<span class="ident" id="1625720">nil</span><span class="op" id="1625723">,</span>&nbsp;<span class="ident" id="1625725"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625735">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625739"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1625741">[</span><span class="ident" id="1625742"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625743">]</span><span class="op" id="1625744">.</span><span class="ident" id="1625745">when</span>&nbsp;<span class="op" id="1625750">=</span>&nbsp;<span class="ident" id="1625752">int64</span><span class="op" id="1625757">(</span><span class="builtintype" id="1625758">int32</span><span class="op" id="1625763">(</span><span class="ident" id="1625764"><a href="/time/zoneinfo_read.go.html#1625666">n</a></span><span class="op" id="1625765">)</span><span class="op" id="1625766">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625770">if</span>&nbsp;<span class="builtintype" id="1625773">int</span><span class="op" id="1625776">(</span><span class="ident" id="1625777"><a href="/time/zoneinfo_read.go.html#1624347">txzones</a></span><span class="op" id="1625784">[</span><span class="ident" id="1625785"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625786">]</span><span class="op" id="1625787">)</span>&nbsp;<span class="op" id="1625789">&gt;=</span>&nbsp;<span class="builtinfunc" id="1625792">len</span><span class="op" id="1625795">(</span><span class="ident" id="1625796"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span><span class="op" id="1625800">)</span>&nbsp;<span class="op" id="1625802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625807">return</span>&nbsp;<span class="ident" id="1625814">nil</span><span class="op" id="1625817">,</span>&nbsp;<span class="ident" id="1625819"><a href="/time/zoneinfo_read.go.html#1623382">badData</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625833"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1625835">[</span><span class="ident" id="1625836"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625837">]</span><span class="op" id="1625838">.</span><span class="ident" id="1625839">index</span>&nbsp;<span class="op" id="1625845">=</span>&nbsp;<span class="ident" id="1625847"><a href="/time/zoneinfo_read.go.html#1624347">txzones</a></span><span class="op" id="1625854">[</span><span class="ident" id="1625855"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625856">]</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625860">if</span>&nbsp;<span class="ident" id="1625863"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span>&nbsp;<span class="op" id="1625865">&lt;</span>&nbsp;<span class="builtinfunc" id="1625867">len</span><span class="op" id="1625870">(</span><span class="ident" id="1625871"><a href="/time/zoneinfo_read.go.html#1624661">isstd</a></span><span class="op" id="1625876">)</span>&nbsp;<span class="op" id="1625878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625883"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1625885">[</span><span class="ident" id="1625886"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625887">]</span><span class="op" id="1625888">.</span><span class="ident" id="1625889">isstd</span>&nbsp;<span class="op" id="1625895">=</span>&nbsp;<span class="ident" id="1625897"><a href="/time/zoneinfo_read.go.html#1624661">isstd</a></span><span class="op" id="1625902">[</span><span class="ident" id="1625903"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625904">]</span>&nbsp;<span class="op" id="1625906">!=</span>&nbsp;<span class="num" id="1625909">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625913">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625917">if</span>&nbsp;<span class="ident" id="1625920"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span>&nbsp;<span class="op" id="1625922">&lt;</span>&nbsp;<span class="builtinfunc" id="1625924">len</span><span class="op" id="1625927">(</span><span class="ident" id="1625928"><a href="/time/zoneinfo_read.go.html#1624786">isutc</a></span><span class="op" id="1625933">)</span>&nbsp;<span class="op" id="1625935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1625940"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1625942">[</span><span class="ident" id="1625943"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625944">]</span><span class="op" id="1625945">.</span><span class="ident" id="1625946">isutc</span>&nbsp;<span class="op" id="1625952">=</span>&nbsp;<span class="ident" id="1625954"><a href="/time/zoneinfo_read.go.html#1624786">isutc</a></span><span class="op" id="1625959">[</span><span class="ident" id="1625960"><a href="/time/zoneinfo_read.go.html#1625630">i</a></span><span class="op" id="1625961">]</span>&nbsp;<span class="op" id="1625963">!=</span>&nbsp;<span class="num" id="1625966">0</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625970">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1625973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1625977">if</span>&nbsp;<span class="builtinfunc" id="1625980">len</span><span class="op" id="1625983">(</span><span class="ident" id="1625984"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1625986">)</span>&nbsp;<span class="op" id="1625988">==</span>&nbsp;<span class="num" id="1625991">0</span>&nbsp;<span class="op" id="1625993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1625997">//&nbsp;Build&nbsp;fake&nbsp;transition&nbsp;to&nbsp;cover&nbsp;all&nbsp;time.</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1626043">//&nbsp;This&nbsp;happens&nbsp;in&nbsp;fixed&nbsp;locations&nbsp;like&nbsp;&#34;Etc/GMT0&#34;.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626097"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span>&nbsp;<span class="op" id="1626100">=</span>&nbsp;<span class="builtinfunc" id="1626102">append</span><span class="op" id="1626108">(</span><span class="ident" id="1626109"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626111">,</span>&nbsp;<span class="ident" id="1626113"><a href="/time/zoneinfo.go.html#1615625">zoneTrans</a></span><span class="op" id="1626122">{</span><span class="ident" id="1626123">when</span><span class="op" id="1626127">:</span>&nbsp;<span class="ident" id="1626129"><a href="/time/zoneinfo.go.html#1615937">alpha</a></span><span class="op" id="1626134">,</span>&nbsp;<span class="ident" id="1626136">index</span><span class="op" id="1626141">:</span>&nbsp;<span class="num" id="1626143">0</span><span class="op" id="1626144">}</span><span class="op" id="1626145">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626148">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1626152">//&nbsp;Committed&nbsp;to&nbsp;succeed.</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626178"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span>&nbsp;<span class="op" id="1626180">=</span>&nbsp;<span class="op" id="1626182">&amp;</span><span class="ident" id="1626183"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1626191">{</span><span class="ident" id="1626192">zone</span><span class="op" id="1626196">:</span>&nbsp;<span class="ident" id="1626198"><a href="/time/zoneinfo_read.go.html#1625144">zone</a></span><span class="op" id="1626202">,</span>&nbsp;<span class="ident" id="1626204">tx</span><span class="op" id="1626206">:</span>&nbsp;<span class="ident" id="1626208"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1626214">//&nbsp;Fill&nbsp;in&nbsp;the&nbsp;cache&nbsp;with&nbsp;information&nbsp;about&nbsp;right&nbsp;now,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1626270">//&nbsp;since&nbsp;that&nbsp;will&nbsp;be&nbsp;the&nbsp;most&nbsp;common&nbsp;lookup.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626317">sec</span><span class="op" id="1626320">,</span>&nbsp;<span class="ident" id="1626322">_</span>&nbsp;<span class="op" id="1626324">:=</span>&nbsp;<span class="ident" id="1626327"><a href="/time/time.go.html#1602978">now</a></span><span class="op" id="1626330">(</span><span class="op" id="1626331">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626334">for</span>&nbsp;<span class="ident" id="1626338">i</span>&nbsp;<span class="op" id="1626340">:=</span>&nbsp;<span class="keyword" id="1626343">range</span>&nbsp;<span class="ident" id="1626349"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span>&nbsp;<span class="op" id="1626352">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626356">if</span>&nbsp;<span class="ident" id="1626359"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626361">[</span><span class="ident" id="1626362"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626363">]</span><span class="op" id="1626364">.</span><span class="ident" id="1626365">when</span>&nbsp;<span class="op" id="1626370">&lt;=</span>&nbsp;<span class="ident" id="1626373"><a href="/time/zoneinfo_read.go.html#1626317">sec</a></span>&nbsp;<span class="op" id="1626377">&amp;&amp;</span>&nbsp;<span class="op" id="1626380">(</span><span class="ident" id="1626381"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626382">+</span><span class="num" id="1626383">1</span>&nbsp;<span class="op" id="1626385">==</span>&nbsp;<span class="builtinfunc" id="1626388">len</span><span class="op" id="1626391">(</span><span class="ident" id="1626392"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626394">)</span>&nbsp;<span class="op" id="1626396">||</span>&nbsp;<span class="ident" id="1626399"><a href="/time/zoneinfo_read.go.html#1626317">sec</a></span>&nbsp;<span class="op" id="1626403">&lt;</span>&nbsp;<span class="ident" id="1626405"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626407">[</span><span class="ident" id="1626408"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626409">+</span><span class="num" id="1626410">1</span><span class="op" id="1626411">]</span><span class="op" id="1626412">.</span><span class="ident" id="1626413">when</span><span class="op" id="1626417">)</span>&nbsp;<span class="op" id="1626419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626424"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626425">.</span><span class="ident" id="1626426">cacheStart</span>&nbsp;<span class="op" id="1626437">=</span>&nbsp;<span class="ident" id="1626439"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626441">[</span><span class="ident" id="1626442"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626443">]</span><span class="op" id="1626444">.</span><span class="ident" id="1626445">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626453"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626454">.</span><span class="ident" id="1626455">cacheEnd</span>&nbsp;<span class="op" id="1626464">=</span>&nbsp;<span class="ident" id="1626466"><a href="/time/zoneinfo.go.html#1615973">omega</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626475">if</span>&nbsp;<span class="ident" id="1626478"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626479">+</span><span class="num" id="1626480">1</span>&nbsp;<span class="op" id="1626482">&lt;</span>&nbsp;<span class="builtinfunc" id="1626484">len</span><span class="op" id="1626487">(</span><span class="ident" id="1626488"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626490">)</span>&nbsp;<span class="op" id="1626492">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626498"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626499">.</span><span class="ident" id="1626500">cacheEnd</span>&nbsp;<span class="op" id="1626509">=</span>&nbsp;<span class="ident" id="1626511"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626513">[</span><span class="ident" id="1626514"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626515">+</span><span class="num" id="1626516">1</span><span class="op" id="1626517">]</span><span class="op" id="1626518">.</span><span class="ident" id="1626519">when</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626532"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626533">.</span><span class="ident" id="1626534">cacheZone</span>&nbsp;<span class="op" id="1626544">=</span>&nbsp;<span class="op" id="1626546">&amp;</span><span class="ident" id="1626547"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626548">.</span><span class="ident" id="1626549">zone</span><span class="op" id="1626553">[</span><span class="ident" id="1626554"><a href="/time/zoneinfo_read.go.html#1625591">tx</a></span><span class="op" id="1626556">[</span><span class="ident" id="1626557"><a href="/time/zoneinfo_read.go.html#1626338">i</a></span><span class="op" id="1626558">]</span><span class="op" id="1626559">.</span><span class="ident" id="1626560">index</span><span class="op" id="1626565">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626569">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626572">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626576">return</span>&nbsp;<span class="ident" id="1626583"><a href="/time/zoneinfo_read.go.html#1623472">l</a></span><span class="op" id="1626584">,</span>&nbsp;<span class="ident" id="1626586">nil</span><br>
<span class="lineno"></span><span class="op" id="1626590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1626593">func</span>&nbsp;<span class="ident" id="1626598">loadZoneFile</span><span class="op" id="1626610">(</span><span class="ident" id="1626611">dir</span><span class="op" id="1626614">,</span>&nbsp;<span class="ident" id="1626616">name</span>&nbsp;<span class="builtintype" id="1626621">string</span><span class="op" id="1626627">)</span>&nbsp;<span class="op" id="1626629">(</span><span class="ident" id="1626630">l</span>&nbsp;<span class="op" id="1626632">*</span><span class="ident" id="1626633"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1626641">,</span>&nbsp;<span class="ident" id="1626643">err</span>&nbsp;<span class="builtintype" id="1626647">error</span><span class="op" id="1626652">)</span>&nbsp;<span class="op" id="1626654">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626657">if</span>&nbsp;<span class="builtinfunc" id="1626660">len</span><span class="op" id="1626663">(</span><span class="ident" id="1626664"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span><span class="op" id="1626667">)</span>&nbsp;<span class="op" id="1626669">&gt;</span>&nbsp;<span class="num" id="1626671">4</span>&nbsp;<span class="op" id="1626673">&amp;&amp;</span>&nbsp;<span class="ident" id="1626676"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span><span class="op" id="1626679">[</span><span class="builtinfunc" id="1626680">len</span><span class="op" id="1626683">(</span><span class="ident" id="1626684"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span><span class="op" id="1626687">)</span><span class="op" id="1626688">-</span><span class="num" id="1626689">4</span><span class="op" id="1626690">:</span><span class="op" id="1626691">]</span>&nbsp;<span class="op" id="1626693">==</span>&nbsp;<span class="string" id="1626696">&#34;.zip&#34;</span>&nbsp;<span class="op" id="1626703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626707">return</span>&nbsp;<span class="ident" id="1626714"><a href="/time/zoneinfo_read.go.html#1627658">loadZoneZip</a></span><span class="op" id="1626725">(</span><span class="ident" id="1626726"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span><span class="op" id="1626729">,</span>&nbsp;<span class="ident" id="1626731"><a href="/time/zoneinfo_read.go.html#1626616">name</a></span><span class="op" id="1626735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626741">if</span>&nbsp;<span class="ident" id="1626744"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span>&nbsp;<span class="op" id="1626748">!=</span>&nbsp;<span class="string" id="1626751">&#34;&#34;</span>&nbsp;<span class="op" id="1626754">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626758"><a href="/time/zoneinfo_read.go.html#1626616">name</a></span>&nbsp;<span class="op" id="1626763">=</span>&nbsp;<span class="ident" id="1626765"><a href="/time/zoneinfo_read.go.html#1626611">dir</a></span>&nbsp;<span class="op" id="1626769">+</span>&nbsp;<span class="string" id="1626771">&#34;/&#34;</span>&nbsp;<span class="op" id="1626775">+</span>&nbsp;<span class="ident" id="1626777"><a href="/time/zoneinfo_read.go.html#1626616">name</a></span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626783">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1626786">buf</span><span class="op" id="1626789">,</span>&nbsp;<span class="ident" id="1626791"><a href="/time/zoneinfo_read.go.html#1626643">err</a></span>&nbsp;<span class="op" id="1626795">:=</span>&nbsp;<span class="ident" id="1626798"><a href="/time/sys_unix.go.html#1577639">readFile</a></span><span class="op" id="1626806">(</span><span class="ident" id="1626807"><a href="/time/zoneinfo_read.go.html#1626616">name</a></span><span class="op" id="1626811">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626814">if</span>&nbsp;<span class="ident" id="1626817"><a href="/time/zoneinfo_read.go.html#1626643">err</a></span>&nbsp;<span class="op" id="1626821">!=</span>&nbsp;<span class="ident" id="1626824">nil</span>&nbsp;<span class="op" id="1626828">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626832">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1626840">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1626843">return</span>&nbsp;<span class="ident" id="1626850"><a href="/time/zoneinfo_read.go.html#1623444">loadZoneData</a></span><span class="op" id="1626862">(</span><span class="ident" id="1626863"><a href="/time/zoneinfo_read.go.html#1626786">buf</a></span><span class="op" id="1626866">)</span><br>
<span class="lineno"></span><span class="op" id="1626868">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1626871">//&nbsp;There&nbsp;are&nbsp;500+&nbsp;zoneinfo&nbsp;files.&nbsp;&nbsp;Rather&nbsp;than&nbsp;distribute&nbsp;them&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="1626938">//&nbsp;individually,&nbsp;we&nbsp;ship&nbsp;them&nbsp;in&nbsp;an&nbsp;uncompressed&nbsp;zip&nbsp;file.</span><br>
<span class="lineno">215</span><span class="comment" id="1626997">//&nbsp;Used&nbsp;this&nbsp;way,&nbsp;the&nbsp;zip&nbsp;file&nbsp;format&nbsp;serves&nbsp;as&nbsp;a&nbsp;commonly&nbsp;readable</span><br>
<span class="lineno"></span><span class="comment" id="1627065">//&nbsp;container&nbsp;for&nbsp;the&nbsp;individual&nbsp;small&nbsp;files.&nbsp;&nbsp;We&nbsp;choose&nbsp;zip&nbsp;over&nbsp;tar</span><br>
<span class="lineno"></span><span class="comment" id="1627134">//&nbsp;because&nbsp;zip&nbsp;files&nbsp;have&nbsp;a&nbsp;contiguous&nbsp;table&nbsp;of&nbsp;contents,&nbsp;making</span><br>
<span class="lineno"></span><span class="comment" id="1627199">//&nbsp;individual&nbsp;file&nbsp;lookups&nbsp;faster,&nbsp;and&nbsp;because&nbsp;the&nbsp;per-file&nbsp;overhead</span><br>
<span class="lineno"></span><span class="comment" id="1627268">//&nbsp;in&nbsp;a&nbsp;zip&nbsp;file&nbsp;is&nbsp;considerably&nbsp;less&nbsp;than&nbsp;tar&#39;s&nbsp;512&nbsp;bytes.</span><br>
<span class="lineno">220</span><br>
<span class="lineno"></span><span class="comment" id="1627329">//&nbsp;get4&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;32-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="1627382">func</span>&nbsp;<span class="ident" id="1627387">get4</span><span class="op" id="1627391">(</span><span class="ident" id="1627392">b</span>&nbsp;<span class="op" id="1627394">[</span><span class="op" id="1627395">]</span><span class="builtintype" id="1627396">byte</span><span class="op" id="1627400">)</span>&nbsp;<span class="builtintype" id="1627402">int</span>&nbsp;<span class="op" id="1627406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627409">if</span>&nbsp;<span class="builtinfunc" id="1627412">len</span><span class="op" id="1627415">(</span><span class="ident" id="1627416"><a href="/time/zoneinfo_read.go.html#1627392">b</a></span><span class="op" id="1627417">)</span>&nbsp;<span class="op" id="1627419">&lt;</span>&nbsp;<span class="num" id="1627421">4</span>&nbsp;<span class="op" id="1627423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627427">return</span>&nbsp;<span class="num" id="1627434">0</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1627437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627440">return</span>&nbsp;<span class="builtintype" id="1627447">int</span><span class="op" id="1627450">(</span><span class="ident" id="1627451"><a href="/time/zoneinfo_read.go.html#1627392">b</a></span><span class="op" id="1627452">[</span><span class="num" id="1627453">0</span><span class="op" id="1627454">]</span><span class="op" id="1627455">)</span>&nbsp;<span class="op" id="1627457">|</span>&nbsp;<span class="builtintype" id="1627459">int</span><span class="op" id="1627462">(</span><span class="ident" id="1627463"><a href="/time/zoneinfo_read.go.html#1627392">b</a></span><span class="op" id="1627464">[</span><span class="num" id="1627465">1</span><span class="op" id="1627466">]</span><span class="op" id="1627467">)</span><span class="op" id="1627468">&lt;&lt;</span><span class="num" id="1627470">8</span>&nbsp;<span class="op" id="1627472">|</span>&nbsp;<span class="builtintype" id="1627474">int</span><span class="op" id="1627477">(</span><span class="ident" id="1627478"><a href="/time/zoneinfo_read.go.html#1627392">b</a></span><span class="op" id="1627479">[</span><span class="num" id="1627480">2</span><span class="op" id="1627481">]</span><span class="op" id="1627482">)</span><span class="op" id="1627483">&lt;&lt;</span><span class="num" id="1627485">16</span>&nbsp;<span class="op" id="1627488">|</span>&nbsp;<span class="builtintype" id="1627490">int</span><span class="op" id="1627493">(</span><span class="ident" id="1627494"><a href="/time/zoneinfo_read.go.html#1627392">b</a></span><span class="op" id="1627495">[</span><span class="num" id="1627496">3</span><span class="op" id="1627497">]</span><span class="op" id="1627498">)</span><span class="op" id="1627499">&lt;&lt;</span><span class="num" id="1627501">24</span><br>
<span class="lineno"></span><span class="op" id="1627504">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1627507">//&nbsp;get2&nbsp;returns&nbsp;the&nbsp;little-endian&nbsp;16-bit&nbsp;value&nbsp;in&nbsp;b.</span><br>
<span class="lineno">230</span><span class="keyword" id="1627560">func</span>&nbsp;<span class="ident" id="1627565">get2</span><span class="op" id="1627569">(</span><span class="ident" id="1627570">b</span>&nbsp;<span class="op" id="1627572">[</span><span class="op" id="1627573">]</span><span class="builtintype" id="1627574">byte</span><span class="op" id="1627578">)</span>&nbsp;<span class="builtintype" id="1627580">int</span>&nbsp;<span class="op" id="1627584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627587">if</span>&nbsp;<span class="builtinfunc" id="1627590">len</span><span class="op" id="1627593">(</span><span class="ident" id="1627594"><a href="/time/zoneinfo_read.go.html#1627570">b</a></span><span class="op" id="1627595">)</span>&nbsp;<span class="op" id="1627597">&lt;</span>&nbsp;<span class="num" id="1627599">2</span>&nbsp;<span class="op" id="1627601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627605">return</span>&nbsp;<span class="num" id="1627612">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1627615">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627618">return</span>&nbsp;<span class="builtintype" id="1627625">int</span><span class="op" id="1627628">(</span><span class="ident" id="1627629"><a href="/time/zoneinfo_read.go.html#1627570">b</a></span><span class="op" id="1627630">[</span><span class="num" id="1627631">0</span><span class="op" id="1627632">]</span><span class="op" id="1627633">)</span>&nbsp;<span class="op" id="1627635">|</span>&nbsp;<span class="builtintype" id="1627637">int</span><span class="op" id="1627640">(</span><span class="ident" id="1627641"><a href="/time/zoneinfo_read.go.html#1627570">b</a></span><span class="op" id="1627642">[</span><span class="num" id="1627643">1</span><span class="op" id="1627644">]</span><span class="op" id="1627645">)</span><span class="op" id="1627646">&lt;&lt;</span><span class="num" id="1627648">8</span><br>
<span class="lineno">235</span><span class="op" id="1627650">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1627653">func</span>&nbsp;<span class="ident" id="1627658">loadZoneZip</span><span class="op" id="1627669">(</span><span class="ident" id="1627670">zipfile</span><span class="op" id="1627677">,</span>&nbsp;<span class="ident" id="1627679">name</span>&nbsp;<span class="builtintype" id="1627684">string</span><span class="op" id="1627690">)</span>&nbsp;<span class="op" id="1627692">(</span><span class="ident" id="1627693">l</span>&nbsp;<span class="op" id="1627695">*</span><span class="ident" id="1627696"><a href="/time/zoneinfo.go.html#1614833">Location</a></span><span class="op" id="1627704">,</span>&nbsp;<span class="ident" id="1627706">err</span>&nbsp;<span class="builtintype" id="1627710">error</span><span class="op" id="1627715">)</span>&nbsp;<span class="op" id="1627717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627720">fd</span><span class="op" id="1627722">,</span>&nbsp;<span class="ident" id="1627724"><a href="/time/zoneinfo_read.go.html#1627706">err</a></span>&nbsp;<span class="op" id="1627728">:=</span>&nbsp;<span class="ident" id="1627731"><a href="/time/sys_unix.go.html#1578003">open</a></span><span class="op" id="1627735">(</span><span class="ident" id="1627736"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1627743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627746">if</span>&nbsp;<span class="ident" id="1627749"><a href="/time/zoneinfo_read.go.html#1627706">err</a></span>&nbsp;<span class="op" id="1627753">!=</span>&nbsp;<span class="ident" id="1627756">nil</span>&nbsp;<span class="op" id="1627760">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627764">return</span>&nbsp;<span class="ident" id="1627771">nil</span><span class="op" id="1627774">,</span>&nbsp;<span class="ident" id="1627776"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1627782">.</span><span class="ident" id="1627783">New</span><span class="op" id="1627786">(</span><span class="string" id="1627787">&#34;open&nbsp;&#34;</span>&nbsp;<span class="op" id="1627795">+</span>&nbsp;<span class="ident" id="1627797"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span>&nbsp;<span class="op" id="1627805">+</span>&nbsp;<span class="string" id="1627807">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="1627812">+</span>&nbsp;<span class="ident" id="1627814"><a href="/time/zoneinfo_read.go.html#1627706">err</a></span><span class="op" id="1627817">.</span><span class="ident" id="1627818">Error</span><span class="op" id="1627823">(</span><span class="op" id="1627824">)</span><span class="op" id="1627825">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1627828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627831">defer</span>&nbsp;<span class="ident" id="1627837"><a href="/time/sys_unix.go.html#1578161">closefd</a></span><span class="op" id="1627844">(</span><span class="ident" id="1627845"><a href="/time/zoneinfo_read.go.html#1627720">fd</a></span><span class="op" id="1627847">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1627851">const</span>&nbsp;<span class="op" id="1627857">(</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627861">zecheader</span>&nbsp;<span class="op" id="1627871">=</span>&nbsp;<span class="num" id="1627873">0x06054b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627886">zcheader</span>&nbsp;&nbsp;<span class="op" id="1627896">=</span>&nbsp;<span class="num" id="1627898">0x02014b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627911">ztailsize</span>&nbsp;<span class="op" id="1627921">=</span>&nbsp;<span class="num" id="1627923">22</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627929">zheadersize</span>&nbsp;<span class="op" id="1627941">=</span>&nbsp;<span class="num" id="1627943">30</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627948">zheader</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1627960">=</span>&nbsp;<span class="num" id="1627962">0x04034b50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1627974">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1627978">buf</span>&nbsp;<span class="op" id="1627982">:=</span>&nbsp;<span class="builtinfunc" id="1627985">make</span><span class="op" id="1627989">(</span><span class="op" id="1627990">[</span><span class="op" id="1627991">]</span><span class="builtintype" id="1627992">byte</span><span class="op" id="1627996">,</span>&nbsp;<span class="ident" id="1627998"><a href="/time/zoneinfo_read.go.html#1627911">ztailsize</a></span><span class="op" id="1628007">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628010">if</span>&nbsp;<span class="ident" id="1628013">err</span>&nbsp;<span class="op" id="1628017">:=</span>&nbsp;<span class="ident" id="1628020"><a href="/time/sys_unix.go.html#1578215">preadn</a></span><span class="op" id="1628026">(</span><span class="ident" id="1628027"><a href="/time/zoneinfo_read.go.html#1627720">fd</a></span><span class="op" id="1628029">,</span>&nbsp;<span class="ident" id="1628031"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628034">,</span>&nbsp;<span class="op" id="1628036">-</span><span class="ident" id="1628037"><a href="/time/zoneinfo_read.go.html#1627911">ztailsize</a></span><span class="op" id="1628046">)</span><span class="op" id="1628047">;</span>&nbsp;<span class="ident" id="1628049"><a href="/time/zoneinfo_read.go.html#1628013">err</a></span>&nbsp;<span class="op" id="1628053">!=</span>&nbsp;<span class="ident" id="1628056">nil</span>&nbsp;<span class="op" id="1628060">||</span>&nbsp;<span class="ident" id="1628063"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628067">(</span><span class="ident" id="1628068"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628071">)</span>&nbsp;<span class="op" id="1628073">!=</span>&nbsp;<span class="ident" id="1628076"><a href="/time/zoneinfo_read.go.html#1627861">zecheader</a></span>&nbsp;<span class="op" id="1628086">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628090">return</span>&nbsp;<span class="ident" id="1628097">nil</span><span class="op" id="1628100">,</span>&nbsp;<span class="ident" id="1628102"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1628108">.</span><span class="ident" id="1628109">New</span><span class="op" id="1628112">(</span><span class="string" id="1628113">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="1628133">+</span>&nbsp;<span class="ident" id="1628135"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1628142">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1628145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628148">n</span>&nbsp;<span class="op" id="1628150">:=</span>&nbsp;<span class="ident" id="1628153"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1628157">(</span><span class="ident" id="1628158"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628161">[</span><span class="num" id="1628162">10</span><span class="op" id="1628164">:</span><span class="op" id="1628165">]</span><span class="op" id="1628166">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628169">size</span>&nbsp;<span class="op" id="1628174">:=</span>&nbsp;<span class="ident" id="1628177"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628181">(</span><span class="ident" id="1628182"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628185">[</span><span class="num" id="1628186">12</span><span class="op" id="1628188">:</span><span class="op" id="1628189">]</span><span class="op" id="1628190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628193">off</span>&nbsp;<span class="op" id="1628197">:=</span>&nbsp;<span class="ident" id="1628200"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628204">(</span><span class="ident" id="1628205"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628208">[</span><span class="num" id="1628209">16</span><span class="op" id="1628211">:</span><span class="op" id="1628212">]</span><span class="op" id="1628213">)</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628217"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span>&nbsp;<span class="op" id="1628221">=</span>&nbsp;<span class="builtinfunc" id="1628223">make</span><span class="op" id="1628227">(</span><span class="op" id="1628228">[</span><span class="op" id="1628229">]</span><span class="builtintype" id="1628230">byte</span><span class="op" id="1628234">,</span>&nbsp;<span class="ident" id="1628236"><a href="/time/zoneinfo_read.go.html#1628169">size</a></span><span class="op" id="1628240">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628243">if</span>&nbsp;<span class="ident" id="1628246">err</span>&nbsp;<span class="op" id="1628250">:=</span>&nbsp;<span class="ident" id="1628253"><a href="/time/sys_unix.go.html#1578215">preadn</a></span><span class="op" id="1628259">(</span><span class="ident" id="1628260"><a href="/time/zoneinfo_read.go.html#1627720">fd</a></span><span class="op" id="1628262">,</span>&nbsp;<span class="ident" id="1628264"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628267">,</span>&nbsp;<span class="ident" id="1628269"><a href="/time/zoneinfo_read.go.html#1628193">off</a></span><span class="op" id="1628272">)</span><span class="op" id="1628273">;</span>&nbsp;<span class="ident" id="1628275"><a href="/time/zoneinfo_read.go.html#1628246">err</a></span>&nbsp;<span class="op" id="1628279">!=</span>&nbsp;<span class="ident" id="1628282">nil</span>&nbsp;<span class="op" id="1628286">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628290">return</span>&nbsp;<span class="ident" id="1628297">nil</span><span class="op" id="1628300">,</span>&nbsp;<span class="ident" id="1628302"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1628308">.</span><span class="ident" id="1628309">New</span><span class="op" id="1628312">(</span><span class="string" id="1628313">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="1628333">+</span>&nbsp;<span class="ident" id="1628335"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1628342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1628345">}</span><br>
<span class="lineno">265</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628349">for</span>&nbsp;<span class="ident" id="1628353">i</span>&nbsp;<span class="op" id="1628355">:=</span>&nbsp;<span class="num" id="1628358">0</span><span class="op" id="1628359">;</span>&nbsp;<span class="ident" id="1628361"><a href="/time/zoneinfo_read.go.html#1628353">i</a></span>&nbsp;<span class="op" id="1628363">&lt;</span>&nbsp;<span class="ident" id="1628365"><a href="/time/zoneinfo_read.go.html#1628148">n</a></span><span class="op" id="1628366">;</span>&nbsp;<span class="ident" id="1628368"><a href="/time/zoneinfo_read.go.html#1628353">i</a></span><span class="op" id="1628369">++</span>&nbsp;<span class="op" id="1628372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628376">//&nbsp;zip&nbsp;entry&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628399">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628415">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspmadevers[1]</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628434">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspmadeos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628451">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628469">//&nbsp;&nbsp;&nbsp;&nbsp7&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628485">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628501">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628517">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628536">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628555">//&nbsp;&nbsp;&nbsp;&nbsp16&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628570">//&nbsp;&nbsp;&nbsp;&nbsp20&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628587">//&nbsp;&nbsp;&nbsp;&nbsp24&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628606">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628625">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628641">//&nbsp;&nbsp;&nbsp;&nbsp32&nbsp;&nbsp;&nbsp;&nbspfclen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628658">//&nbsp;&nbsp;&nbsp;&nbsp34&nbsp;&nbsp;&nbsp;&nbspdisknum[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628677">//&nbsp;&nbsp;&nbsp;&nbsp36&nbsp;&nbsp;&nbsp;&nbspiattr[2]</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628694">//&nbsp;&nbsp;&nbsp;&nbsp38&nbsp;&nbsp;&nbsp;&nbspeattr[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628711">//&nbsp;&nbsp;&nbsp;&nbsp42&nbsp;&nbsp;&nbsp;&nbspoff[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628726">//&nbsp;&nbsp;&nbsp;&nbsp46&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628748">//&nbsp;&nbsp;&nbsp;&nbsp46+namelen+xlen+fclen&nbsp;-&nbsp;next&nbsp;header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1628789">//</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628794">if</span>&nbsp;<span class="ident" id="1628797"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628801">(</span><span class="ident" id="1628802"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628805">)</span>&nbsp;<span class="op" id="1628807">!=</span>&nbsp;<span class="ident" id="1628810"><a href="/time/zoneinfo_read.go.html#1627886">zcheader</a></span>&nbsp;<span class="op" id="1628819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1628824">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1628832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628836">meth</span>&nbsp;<span class="op" id="1628841">:=</span>&nbsp;<span class="ident" id="1628844"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1628848">(</span><span class="ident" id="1628849"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628852">[</span><span class="num" id="1628853">10</span><span class="op" id="1628855">:</span><span class="op" id="1628856">]</span><span class="op" id="1628857">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628861">size</span>&nbsp;<span class="op" id="1628866">:=</span>&nbsp;<span class="ident" id="1628869"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628873">(</span><span class="ident" id="1628874"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628877">[</span><span class="num" id="1628878">24</span><span class="op" id="1628880">:</span><span class="op" id="1628881">]</span><span class="op" id="1628882">)</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628886">namelen</span>&nbsp;<span class="op" id="1628894">:=</span>&nbsp;<span class="ident" id="1628897"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1628901">(</span><span class="ident" id="1628902"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628905">[</span><span class="num" id="1628906">28</span><span class="op" id="1628908">:</span><span class="op" id="1628909">]</span><span class="op" id="1628910">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628914">xlen</span>&nbsp;<span class="op" id="1628919">:=</span>&nbsp;<span class="ident" id="1628922"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1628926">(</span><span class="ident" id="1628927"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628930">[</span><span class="num" id="1628931">30</span><span class="op" id="1628933">:</span><span class="op" id="1628934">]</span><span class="op" id="1628935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628939">fclen</span>&nbsp;<span class="op" id="1628945">:=</span>&nbsp;<span class="ident" id="1628948"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1628952">(</span><span class="ident" id="1628953"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628956">[</span><span class="num" id="1628957">32</span><span class="op" id="1628959">:</span><span class="op" id="1628960">]</span><span class="op" id="1628961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628965">off</span>&nbsp;<span class="op" id="1628969">:=</span>&nbsp;<span class="ident" id="1628972"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1628976">(</span><span class="ident" id="1628977"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1628980">[</span><span class="num" id="1628981">42</span><span class="op" id="1628983">:</span><span class="op" id="1628984">]</span><span class="op" id="1628985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1628989">zname</span>&nbsp;<span class="op" id="1628995">:=</span>&nbsp;<span class="ident" id="1628998"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629001">[</span><span class="num" id="1629002">46</span>&nbsp;<span class="op" id="1629005">:</span>&nbsp;<span class="num" id="1629007">46</span><span class="op" id="1629009">+</span><span class="ident" id="1629010"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span><span class="op" id="1629017">]</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629021"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span>&nbsp;<span class="op" id="1629025">=</span>&nbsp;<span class="ident" id="1629027"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629030">[</span><span class="num" id="1629031">46</span><span class="op" id="1629033">+</span><span class="ident" id="1629034"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span><span class="op" id="1629041">+</span><span class="ident" id="1629042"><a href="/time/zoneinfo_read.go.html#1628914">xlen</a></span><span class="op" id="1629046">+</span><span class="ident" id="1629047"><a href="/time/zoneinfo_read.go.html#1628939">fclen</a></span><span class="op" id="1629052">:</span><span class="op" id="1629053">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629057">if</span>&nbsp;<span class="builtintype" id="1629060">string</span><span class="op" id="1629066">(</span><span class="ident" id="1629067"><a href="/time/zoneinfo_read.go.html#1628989">zname</a></span><span class="op" id="1629072">)</span>&nbsp;<span class="op" id="1629074">!=</span>&nbsp;<span class="ident" id="1629077"><a href="/time/zoneinfo_read.go.html#1627679">name</a></span>&nbsp;<span class="op" id="1629082">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629087">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1629098">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629102">if</span>&nbsp;<span class="ident" id="1629105"><a href="/time/zoneinfo_read.go.html#1628836">meth</a></span>&nbsp;<span class="op" id="1629110">!=</span>&nbsp;<span class="num" id="1629113">0</span>&nbsp;<span class="op" id="1629115">{</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629120">return</span>&nbsp;<span class="ident" id="1629127">nil</span><span class="op" id="1629130">,</span>&nbsp;<span class="ident" id="1629132"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1629138">.</span><span class="ident" id="1629139">New</span><span class="op" id="1629142">(</span><span class="string" id="1629143">&#34;unsupported&nbsp;compression&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="1629174">+</span>&nbsp;<span class="ident" id="1629176"><a href="/time/zoneinfo_read.go.html#1627679">name</a></span>&nbsp;<span class="op" id="1629181">+</span>&nbsp;<span class="string" id="1629183">&#34;&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="1629190">+</span>&nbsp;<span class="ident" id="1629192"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1629199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1629203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629208">//&nbsp;zip&nbsp;per-file&nbsp;header&nbsp;layout:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629241">//&nbsp;&nbsp;&nbsp;&nbsp0&nbsp;&nbsp;&nbsp;&nbspmagic[4]</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629257">//&nbsp;&nbsp;&nbsp;&nbsp4&nbsp;&nbsp;&nbsp;&nbspextvers[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629275">//&nbsp;&nbsp;&nbsp;&nbsp5&nbsp;&nbsp;&nbsp;&nbspextos[1]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629291">//&nbsp;&nbsp;&nbsp;&nbsp6&nbsp;&nbsp;&nbsp;&nbspflags[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629307">//&nbsp;&nbsp;&nbsp;&nbsp8&nbsp;&nbsp;&nbsp;&nbspmeth[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629322">//&nbsp;&nbsp;&nbsp;&nbsp10&nbsp;&nbsp;&nbsp;&nbspmodtime[2]</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629341">//&nbsp;&nbsp;&nbsp;&nbsp12&nbsp;&nbsp;&nbsp;&nbspmoddate[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629360">//&nbsp;&nbsp;&nbsp;&nbsp14&nbsp;&nbsp;&nbsp;&nbspcrc[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629375">//&nbsp;&nbsp;&nbsp;&nbsp18&nbsp;&nbsp;&nbsp;&nbspcsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629392">//&nbsp;&nbsp;&nbsp;&nbsp22&nbsp;&nbsp;&nbsp;&nbspuncsize[4]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629411">//&nbsp;&nbsp;&nbsp;&nbsp26&nbsp;&nbsp;&nbsp;&nbspnamelen[2]</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629430">//&nbsp;&nbsp;&nbsp;&nbsp28&nbsp;&nbsp;&nbsp;&nbspxlen[2]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629446">//&nbsp;&nbsp;&nbsp;&nbsp30&nbsp;&nbsp;&nbsp;&nbspname[namelen]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629468">//&nbsp;&nbsp;&nbsp;&nbsp30+namelen+xlen&nbsp;-&nbsp;file&nbsp;data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="1629501">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629506"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span>&nbsp;<span class="op" id="1629510">=</span>&nbsp;<span class="builtinfunc" id="1629512">make</span><span class="op" id="1629516">(</span><span class="op" id="1629517">[</span><span class="op" id="1629518">]</span><span class="builtintype" id="1629519">byte</span><span class="op" id="1629523">,</span>&nbsp;<span class="ident" id="1629525"><a href="/time/zoneinfo_read.go.html#1627929">zheadersize</a></span><span class="op" id="1629536">+</span><span class="ident" id="1629537"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span><span class="op" id="1629544">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629548">if</span>&nbsp;<span class="ident" id="1629551">err</span>&nbsp;<span class="op" id="1629555">:=</span>&nbsp;<span class="ident" id="1629558"><a href="/time/sys_unix.go.html#1578215">preadn</a></span><span class="op" id="1629564">(</span><span class="ident" id="1629565"><a href="/time/zoneinfo_read.go.html#1627720">fd</a></span><span class="op" id="1629567">,</span>&nbsp;<span class="ident" id="1629569"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629572">,</span>&nbsp;<span class="ident" id="1629574"><a href="/time/zoneinfo_read.go.html#1628965">off</a></span><span class="op" id="1629577">)</span><span class="op" id="1629578">;</span>&nbsp;<span class="ident" id="1629580"><a href="/time/zoneinfo_read.go.html#1629551">err</a></span>&nbsp;<span class="op" id="1629584">!=</span>&nbsp;<span class="ident" id="1629587">nil</span>&nbsp;<span class="op" id="1629591">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629597"><a href="/time/zoneinfo_read.go.html#1627387">get4</a></span><span class="op" id="1629601">(</span><span class="ident" id="1629602"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629605">)</span>&nbsp;<span class="op" id="1629607">!=</span>&nbsp;<span class="ident" id="1629610"><a href="/time/zoneinfo_read.go.html#1627948">zheader</a></span>&nbsp;<span class="op" id="1629618">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629624"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1629628">(</span><span class="ident" id="1629629"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629632">[</span><span class="num" id="1629633">8</span><span class="op" id="1629634">:</span><span class="op" id="1629635">]</span><span class="op" id="1629636">)</span>&nbsp;<span class="op" id="1629638">!=</span>&nbsp;<span class="ident" id="1629641"><a href="/time/zoneinfo_read.go.html#1628836">meth</a></span>&nbsp;<span class="op" id="1629646">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629652"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1629656">(</span><span class="ident" id="1629657"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629660">[</span><span class="num" id="1629661">26</span><span class="op" id="1629663">:</span><span class="op" id="1629664">]</span><span class="op" id="1629665">)</span>&nbsp;<span class="op" id="1629667">!=</span>&nbsp;<span class="ident" id="1629670"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span>&nbsp;<span class="op" id="1629678">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtintype" id="1629684">string</span><span class="op" id="1629690">(</span><span class="ident" id="1629691"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629694">[</span><span class="num" id="1629695">30</span><span class="op" id="1629697">:</span><span class="num" id="1629698">30</span><span class="op" id="1629700">+</span><span class="ident" id="1629701"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span><span class="op" id="1629708">]</span><span class="op" id="1629709">)</span>&nbsp;<span class="op" id="1629711">!=</span>&nbsp;<span class="ident" id="1629714"><a href="/time/zoneinfo_read.go.html#1627679">name</a></span>&nbsp;<span class="op" id="1629719">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629724">return</span>&nbsp;<span class="ident" id="1629731">nil</span><span class="op" id="1629734">,</span>&nbsp;<span class="ident" id="1629736"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1629742">.</span><span class="ident" id="1629743">New</span><span class="op" id="1629746">(</span><span class="string" id="1629747">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="1629767">+</span>&nbsp;<span class="ident" id="1629769"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1629776">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1629780">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629784"><a href="/time/zoneinfo_read.go.html#1628914">xlen</a></span>&nbsp;<span class="op" id="1629789">=</span>&nbsp;<span class="ident" id="1629791"><a href="/time/zoneinfo_read.go.html#1627565">get2</a></span><span class="op" id="1629795">(</span><span class="ident" id="1629796"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629799">[</span><span class="num" id="1629800">28</span><span class="op" id="1629802">:</span><span class="op" id="1629803">]</span><span class="op" id="1629804">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="1629809"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span>&nbsp;<span class="op" id="1629813">=</span>&nbsp;<span class="builtinfunc" id="1629815">make</span><span class="op" id="1629819">(</span><span class="op" id="1629820">[</span><span class="op" id="1629821">]</span><span class="builtintype" id="1629822">byte</span><span class="op" id="1629826">,</span>&nbsp;<span class="ident" id="1629828"><a href="/time/zoneinfo_read.go.html#1628861">size</a></span><span class="op" id="1629832">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629836">if</span>&nbsp;<span class="ident" id="1629839">err</span>&nbsp;<span class="op" id="1629843">:=</span>&nbsp;<span class="ident" id="1629846"><a href="/time/sys_unix.go.html#1578215">preadn</a></span><span class="op" id="1629852">(</span><span class="ident" id="1629853"><a href="/time/zoneinfo_read.go.html#1627720">fd</a></span><span class="op" id="1629855">,</span>&nbsp;<span class="ident" id="1629857"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629860">,</span>&nbsp;<span class="ident" id="1629862"><a href="/time/zoneinfo_read.go.html#1628965">off</a></span><span class="op" id="1629865">+</span><span class="num" id="1629866">30</span><span class="op" id="1629868">+</span><span class="ident" id="1629869"><a href="/time/zoneinfo_read.go.html#1628886">namelen</a></span><span class="op" id="1629876">+</span><span class="ident" id="1629877"><a href="/time/zoneinfo_read.go.html#1628914">xlen</a></span><span class="op" id="1629881">)</span><span class="op" id="1629882">;</span>&nbsp;<span class="ident" id="1629884"><a href="/time/zoneinfo_read.go.html#1629839">err</a></span>&nbsp;<span class="op" id="1629888">!=</span>&nbsp;<span class="ident" id="1629891">nil</span>&nbsp;<span class="op" id="1629895">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629900">return</span>&nbsp;<span class="ident" id="1629907">nil</span><span class="op" id="1629910">,</span>&nbsp;<span class="ident" id="1629912"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1629918">.</span><span class="ident" id="1629919">New</span><span class="op" id="1629922">(</span><span class="string" id="1629923">&#34;corrupt&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="1629943">+</span>&nbsp;<span class="ident" id="1629945"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1629952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1629956">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629961">return</span>&nbsp;<span class="ident" id="1629968"><a href="/time/zoneinfo_read.go.html#1623444">loadZoneData</a></span><span class="op" id="1629980">(</span><span class="ident" id="1629981"><a href="/time/zoneinfo_read.go.html#1627978">buf</a></span><span class="op" id="1629984">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="1629987">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="1629991">return</span>&nbsp;<span class="ident" id="1629998">nil</span><span class="op" id="1630001">,</span>&nbsp;<span class="ident" id="1630003"><a href="/time/zoneinfo_read.go.html#1622611">errors</a></span><span class="op" id="1630009">.</span><span class="ident" id="1630010">New</span><span class="op" id="1630013">(</span><span class="string" id="1630014">&#34;cannot&nbsp;find&nbsp;&#34;</span>&nbsp;<span class="op" id="1630029">+</span>&nbsp;<span class="ident" id="1630031"><a href="/time/zoneinfo_read.go.html#1627679">name</a></span>&nbsp;<span class="op" id="1630036">+</span>&nbsp;<span class="string" id="1630038">&#34;&nbsp;in&nbsp;zip&nbsp;file&nbsp;&#34;</span>&nbsp;<span class="op" id="1630054">+</span>&nbsp;<span class="ident" id="1630056"><a href="/time/zoneinfo_read.go.html#1627670">zipfile</a></span><span class="op" id="1630063">)</span><br>
<span class="lineno"></span><span class="op" id="1630065">}</span>
</div>
</body>
</html>
