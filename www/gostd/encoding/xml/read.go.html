<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6034250">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6034306">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6034360">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6034411">package</span>&nbsp;<span class="ident" id="6034419">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6034424">import</span>&nbsp;<span class="op" id="6034431">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034434">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034443">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034455">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034465">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034472">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034483">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6034494">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6034504">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034507">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6034591">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6034655">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6034724">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6034744">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6034807">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6034831">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6034897">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6034962">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6035028">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6035042">//</span><br>
<span class="lineno"></span><span class="comment" id="6035045">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6035111">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6035180">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6035246">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6035262">//</span><br>
<span class="lineno"></span><span class="comment" id="6035265">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6035337">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6035413">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6035477">//</span><br>
<span class="lineno"></span><span class="comment" id="6035480">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6035547">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6035620">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6035687">//</span><br>
<span class="lineno"></span><span class="comment" id="6035690">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6035755">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6035813">//</span><br>
<span class="lineno">45</span><span class="comment" id="6035816">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6035878">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6035944">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6036015">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6036041">//</span><br>
<span class="lineno">50</span><span class="comment" id="6036044">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6036108">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6036179">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6036252">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6036313">//</span><br>
<span class="lineno">55</span><span class="comment" id="6036316">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6036380">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6036452">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6036509">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6036577">//</span><br>
<span class="lineno">60</span><span class="comment" id="6036580">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6036649">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6036717">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6036784">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6036827">//</span><br>
<span class="lineno">65</span><span class="comment" id="6036830">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6036898">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6036965">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6037039">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6037111">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6037180">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6037225">//</span><br>
<span class="lineno"></span><span class="comment" id="6037228">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6037296">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6037361">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6037428">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6037474">//</span><br>
<span class="lineno"></span><span class="comment" id="6037477">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6037547">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6037623">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6037674">//</span><br>
<span class="lineno"></span><span class="comment" id="6037677">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6037750">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6037821">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6037882">//</span><br>
<span class="lineno">85</span><span class="comment" id="6037885">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6037953">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6037998">//</span><br>
<span class="lineno"></span><span class="comment" id="6038001">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6038064">//</span><br>
<span class="lineno">90</span><span class="comment" id="6038067">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6038136">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6038203">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6038245">//</span><br>
<span class="lineno"></span><span class="comment" id="6038248">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6038317">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6038354">//</span><br>
<span class="lineno"></span><span class="comment" id="6038357">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6038428">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6038493">//</span><br>
<span class="lineno">100</span><span class="comment" id="6038496">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6038561">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6038623">//</span><br>
<span class="lineno"></span><span class="comment" id="6038626">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6038695">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6038757">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6038825">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6038838">//</span><br>
<span class="lineno"></span><span class="comment" id="6038841">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6038906">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6038923">//</span><br>
<span class="lineno"></span><span class="comment" id="6038926">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6038995">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6039071">//</span><br>
<span class="lineno"></span><span class="keyword" id="6039074">func</span>&nbsp;<span class="ident" id="6039079">Unmarshal</span><span class="op" id="6039088">(</span><span class="ident" id="6039089">data</span>&nbsp;<span class="op" id="6039094">[</span><span class="op" id="6039095">]</span><span class="builtintype" id="6039096">byte</span><span class="op" id="6039100">,</span>&nbsp;<span class="ident" id="6039102">v</span>&nbsp;<span class="keyword" id="6039104">interface</span><span class="op" id="6039113">{</span><span class="op" id="6039114">}</span><span class="op" id="6039115">)</span>&nbsp;<span class="builtintype" id="6039117">error</span>&nbsp;<span class="op" id="6039123">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039126">return</span>&nbsp;<span class="ident" id="6039133">NewDecoder</span><span class="op" id="6039143">(</span><span class="ident" id="6039144">bytes</span><span class="op" id="6039149">.</span><span class="ident" id="6039150">NewReader</span><span class="op" id="6039159">(</span><span class="ident" id="6039160">data</span><span class="op" id="6039164">)</span><span class="op" id="6039165">)</span><span class="op" id="6039166">.</span><span class="ident" id="6039167">Decode</span><span class="op" id="6039173">(</span><span class="ident" id="6039174">v</span><span class="op" id="6039175">)</span><br>
<span class="lineno"></span><span class="op" id="6039177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6039180">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6039244">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6039281">func</span>&nbsp;<span class="op" id="6039286">(</span><span class="ident" id="6039287">d</span>&nbsp;<span class="op" id="6039289">*</span><span class="ident" id="6039290">Decoder</span><span class="op" id="6039297">)</span>&nbsp;<span class="ident" id="6039299">Decode</span><span class="op" id="6039305">(</span><span class="ident" id="6039306">v</span>&nbsp;<span class="keyword" id="6039308">interface</span><span class="op" id="6039317">{</span><span class="op" id="6039318">}</span><span class="op" id="6039319">)</span>&nbsp;<span class="builtintype" id="6039321">error</span>&nbsp;<span class="op" id="6039327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039330">return</span>&nbsp;<span class="ident" id="6039337">d</span><span class="op" id="6039338">.</span><span class="ident" id="6039339">DecodeElement</span><span class="op" id="6039352">(</span><span class="ident" id="6039353">v</span><span class="op" id="6039354">,</span>&nbsp;<span class="ident" id="6039356">nil</span><span class="op" id="6039359">)</span><br>
<span class="lineno"></span><span class="op" id="6039361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6039364">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6039427">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6039483">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6039546">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6039605">func</span>&nbsp;<span class="op" id="6039610">(</span><span class="ident" id="6039611">d</span>&nbsp;<span class="op" id="6039613">*</span><span class="ident" id="6039614">Decoder</span><span class="op" id="6039621">)</span>&nbsp;<span class="ident" id="6039623">DecodeElement</span><span class="op" id="6039636">(</span><span class="ident" id="6039637">v</span>&nbsp;<span class="keyword" id="6039639">interface</span><span class="op" id="6039648">{</span><span class="op" id="6039649">}</span><span class="op" id="6039650">,</span>&nbsp;<span class="ident" id="6039652">start</span>&nbsp;<span class="op" id="6039658">*</span><span class="ident" id="6039659">StartElement</span><span class="op" id="6039671">)</span>&nbsp;<span class="builtintype" id="6039673">error</span>&nbsp;<span class="op" id="6039679">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6039682">val</span>&nbsp;<span class="op" id="6039686">:=</span>&nbsp;<span class="ident" id="6039689">reflect</span><span class="op" id="6039696">.</span><span class="ident" id="6039697">ValueOf</span><span class="op" id="6039704">(</span><span class="ident" id="6039705">v</span><span class="op" id="6039706">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039709">if</span>&nbsp;<span class="ident" id="6039712">val</span><span class="op" id="6039715">.</span><span class="ident" id="6039716">Kind</span><span class="op" id="6039720">(</span><span class="op" id="6039721">)</span>&nbsp;<span class="op" id="6039723">!=</span>&nbsp;<span class="ident" id="6039726">reflect</span><span class="op" id="6039733">.</span><span class="ident" id="6039734">Ptr</span>&nbsp;<span class="op" id="6039738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039742">return</span>&nbsp;<span class="ident" id="6039749">errors</span><span class="op" id="6039755">.</span><span class="ident" id="6039756">New</span><span class="op" id="6039759">(</span><span class="string" id="6039760">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6039793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6039796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6039799">return</span>&nbsp;<span class="ident" id="6039806">d</span><span class="op" id="6039807">.</span><span class="ident" id="6039808">unmarshal</span><span class="op" id="6039817">(</span><span class="ident" id="6039818">val</span><span class="op" id="6039821">.</span><span class="ident" id="6039822">Elem</span><span class="op" id="6039826">(</span><span class="op" id="6039827">)</span><span class="op" id="6039828">,</span>&nbsp;<span class="ident" id="6039830">start</span><span class="op" id="6039835">)</span><br>
<span class="lineno"></span><span class="op" id="6039837">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6039840">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6039911">type</span>&nbsp;<span class="ident" id="6039916">UnmarshalError</span>&nbsp;<span class="builtintype" id="6039931">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6039939">func</span>&nbsp;<span class="op" id="6039944">(</span><span class="ident" id="6039945">e</span>&nbsp;<span class="ident" id="6039947">UnmarshalError</span><span class="op" id="6039961">)</span>&nbsp;<span class="ident" id="6039963">Error</span><span class="op" id="6039968">(</span><span class="op" id="6039969">)</span>&nbsp;<span class="builtintype" id="6039971">string</span>&nbsp;<span class="op" id="6039978">{</span>&nbsp;<span class="keyword" id="6039980">return</span>&nbsp;<span class="builtintype" id="6039987">string</span><span class="op" id="6039993">(</span><span class="ident" id="6039994">e</span><span class="op" id="6039995">)</span>&nbsp;<span class="op" id="6039997">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6040000">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6040074">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6040119">//</span><br>
<span class="lineno"></span><span class="comment" id="6040122">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6040167">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6040210">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6040275">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6040298">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6040352">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6040411">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6040471">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6040529">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6040562">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6040622">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6040657">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6040697">type</span>&nbsp;<span class="ident" id="6040702">Unmarshaler</span>&nbsp;<span class="keyword" id="6040714">interface</span>&nbsp;<span class="op" id="6040724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6040727">UnmarshalXML</span><span class="op" id="6040739">(</span><span class="ident" id="6040740">d</span>&nbsp;<span class="op" id="6040742">*</span><span class="ident" id="6040743">Decoder</span><span class="op" id="6040750">,</span>&nbsp;<span class="ident" id="6040752">start</span>&nbsp;<span class="ident" id="6040758">StartElement</span><span class="op" id="6040770">)</span>&nbsp;<span class="builtintype" id="6040772">error</span><br>
<span class="lineno"></span><span class="op" id="6040778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6040781">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6040859">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6040906">//</span><br>
<span class="lineno"></span><span class="comment" id="6040909">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6040961">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6041026">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6041049">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6041109">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6041144">type</span>&nbsp;<span class="ident" id="6041149">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6041165">interface</span>&nbsp;<span class="op" id="6041175">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041178">UnmarshalXMLAttr</span><span class="op" id="6041194">(</span><span class="ident" id="6041195">attr</span>&nbsp;<span class="ident" id="6041200">Attr</span><span class="op" id="6041204">)</span>&nbsp;<span class="builtintype" id="6041206">error</span><br>
<span class="lineno">170</span><span class="op" id="6041212">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6041215">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6041303">func</span>&nbsp;<span class="ident" id="6041308">receiverType</span><span class="op" id="6041320">(</span><span class="ident" id="6041321">val</span>&nbsp;<span class="keyword" id="6041325">interface</span><span class="op" id="6041334">{</span><span class="op" id="6041335">}</span><span class="op" id="6041336">)</span>&nbsp;<span class="builtintype" id="6041338">string</span>&nbsp;<span class="op" id="6041345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041348">t</span>&nbsp;<span class="op" id="6041350">:=</span>&nbsp;<span class="ident" id="6041353">reflect</span><span class="op" id="6041360">.</span><span class="ident" id="6041361">TypeOf</span><span class="op" id="6041367">(</span><span class="ident" id="6041368">val</span><span class="op" id="6041371">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041374">if</span>&nbsp;<span class="ident" id="6041377">t</span><span class="op" id="6041378">.</span><span class="ident" id="6041379">Name</span><span class="op" id="6041383">(</span><span class="op" id="6041384">)</span>&nbsp;<span class="op" id="6041386">!=</span>&nbsp;<span class="string" id="6041389">&#34;&#34;</span>&nbsp;<span class="op" id="6041392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041396">return</span>&nbsp;<span class="ident" id="6041403">t</span><span class="op" id="6041404">.</span><span class="ident" id="6041405">String</span><span class="op" id="6041411">(</span><span class="op" id="6041412">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041418">return</span>&nbsp;<span class="string" id="6041425">&#34;(&#34;</span>&nbsp;<span class="op" id="6041429">+</span>&nbsp;<span class="ident" id="6041431">t</span><span class="op" id="6041432">.</span><span class="ident" id="6041433">String</span><span class="op" id="6041439">(</span><span class="op" id="6041440">)</span>&nbsp;<span class="op" id="6041442">+</span>&nbsp;<span class="string" id="6041444">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6041448">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6041451">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6041515">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6041559">func</span>&nbsp;<span class="op" id="6041564">(</span><span class="ident" id="6041565">p</span>&nbsp;<span class="op" id="6041567">*</span><span class="ident" id="6041568">Decoder</span><span class="op" id="6041575">)</span>&nbsp;<span class="ident" id="6041577">unmarshalInterface</span><span class="op" id="6041595">(</span><span class="ident" id="6041596">val</span>&nbsp;<span class="ident" id="6041600">Unmarshaler</span><span class="op" id="6041611">,</span>&nbsp;<span class="ident" id="6041613">start</span>&nbsp;<span class="op" id="6041619">*</span><span class="ident" id="6041620">StartElement</span><span class="op" id="6041632">)</span>&nbsp;<span class="builtintype" id="6041634">error</span>&nbsp;<span class="op" id="6041640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6041643">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041712">p</span><span class="op" id="6041713">.</span><span class="ident" id="6041714">pushEOF</span><span class="op" id="6041721">(</span><span class="op" id="6041722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041726">p</span><span class="op" id="6041727">.</span><span class="ident" id="6041728">unmarshalDepth</span><span class="op" id="6041742">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041746">err</span>&nbsp;<span class="op" id="6041750">:=</span>&nbsp;<span class="ident" id="6041753">val</span><span class="op" id="6041756">.</span><span class="ident" id="6041757">UnmarshalXML</span><span class="op" id="6041769">(</span><span class="ident" id="6041770">p</span><span class="op" id="6041771">,</span>&nbsp;<span class="op" id="6041773">*</span><span class="ident" id="6041774">start</span><span class="op" id="6041779">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041782">p</span><span class="op" id="6041783">.</span><span class="ident" id="6041784">unmarshalDepth</span><span class="op" id="6041798">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041802">if</span>&nbsp;<span class="ident" id="6041805">err</span>&nbsp;<span class="op" id="6041809">!=</span>&nbsp;<span class="ident" id="6041812">nil</span>&nbsp;<span class="op" id="6041816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6041820">p</span><span class="op" id="6041821">.</span><span class="ident" id="6041822">popEOF</span><span class="op" id="6041828">(</span><span class="op" id="6041829">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041833">return</span>&nbsp;<span class="ident" id="6041840">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041849">if</span>&nbsp;<span class="op" id="6041852">!</span><span class="ident" id="6041853">p</span><span class="op" id="6041854">.</span><span class="ident" id="6041855">popEOF</span><span class="op" id="6041861">(</span><span class="op" id="6041862">)</span>&nbsp;<span class="op" id="6041864">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041868">return</span>&nbsp;<span class="ident" id="6041875">fmt</span><span class="op" id="6041878">.</span><span class="ident" id="6041879">Errorf</span><span class="op" id="6041885">(</span><span class="string" id="6041886">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6041944">,</span>&nbsp;<span class="ident" id="6041946">receiverType</span><span class="op" id="6041958">(</span><span class="ident" id="6041959">val</span><span class="op" id="6041962">)</span><span class="op" id="6041963">,</span>&nbsp;<span class="ident" id="6041965">start</span><span class="op" id="6041970">.</span><span class="ident" id="6041971">Name</span><span class="op" id="6041975">.</span><span class="ident" id="6041976">Local</span><span class="op" id="6041981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6041984">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6041988">return</span>&nbsp;<span class="ident" id="6041995">nil</span><br>
<span class="lineno">200</span><span class="op" id="6041999">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6042002">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6042070">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6042134">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6042172">func</span>&nbsp;<span class="op" id="6042177">(</span><span class="ident" id="6042178">p</span>&nbsp;<span class="op" id="6042180">*</span><span class="ident" id="6042181">Decoder</span><span class="op" id="6042188">)</span>&nbsp;<span class="ident" id="6042190">unmarshalTextInterface</span><span class="op" id="6042212">(</span><span class="ident" id="6042213">val</span>&nbsp;<span class="ident" id="6042217">encoding</span><span class="op" id="6042225">.</span><span class="ident" id="6042226">TextUnmarshaler</span><span class="op" id="6042241">,</span>&nbsp;<span class="ident" id="6042243">start</span>&nbsp;<span class="op" id="6042249">*</span><span class="ident" id="6042250">StartElement</span><span class="op" id="6042262">)</span>&nbsp;<span class="builtintype" id="6042264">error</span>&nbsp;<span class="op" id="6042270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042273">var</span>&nbsp;<span class="ident" id="6042277">buf</span>&nbsp;<span class="op" id="6042281">[</span><span class="op" id="6042282">]</span><span class="builtintype" id="6042283">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042289">depth</span>&nbsp;<span class="op" id="6042295">:=</span>&nbsp;<span class="num" id="6042298">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042301">for</span>&nbsp;<span class="ident" id="6042305">depth</span>&nbsp;<span class="op" id="6042311">&gt;</span>&nbsp;<span class="num" id="6042313">0</span>&nbsp;<span class="op" id="6042315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042319">t</span><span class="op" id="6042320">,</span>&nbsp;<span class="ident" id="6042322">err</span>&nbsp;<span class="op" id="6042326">:=</span>&nbsp;<span class="ident" id="6042329">p</span><span class="op" id="6042330">.</span><span class="ident" id="6042331">Token</span><span class="op" id="6042336">(</span><span class="op" id="6042337">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042341">if</span>&nbsp;<span class="ident" id="6042344">err</span>&nbsp;<span class="op" id="6042348">!=</span>&nbsp;<span class="ident" id="6042351">nil</span>&nbsp;<span class="op" id="6042355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042360">return</span>&nbsp;<span class="ident" id="6042367">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042373">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042377">switch</span>&nbsp;<span class="ident" id="6042384">t</span>&nbsp;<span class="op" id="6042386">:=</span>&nbsp;<span class="ident" id="6042389">t</span><span class="op" id="6042390">.</span><span class="op" id="6042391">(</span><span class="keyword" id="6042392">type</span><span class="op" id="6042396">)</span>&nbsp;<span class="op" id="6042398">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042402">case</span>&nbsp;<span class="ident" id="6042407">CharData</span><span class="op" id="6042415">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042420">if</span>&nbsp;<span class="ident" id="6042423">depth</span>&nbsp;<span class="op" id="6042429">==</span>&nbsp;<span class="num" id="6042432">1</span>&nbsp;<span class="op" id="6042434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042440">buf</span>&nbsp;<span class="op" id="6042444">=</span>&nbsp;<span class="builtinfunc" id="6042446">append</span><span class="op" id="6042452">(</span><span class="ident" id="6042453">buf</span><span class="op" id="6042456">,</span>&nbsp;<span class="ident" id="6042458">t</span><span class="op" id="6042459">...</span><span class="op" id="6042462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042467">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042471">case</span>&nbsp;<span class="ident" id="6042476">StartElement</span><span class="op" id="6042488">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042493">depth</span><span class="op" id="6042498">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042503">case</span>&nbsp;<span class="ident" id="6042508">EndElement</span><span class="op" id="6042518">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042523">depth</span><span class="op" id="6042528">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042533">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042539">return</span>&nbsp;<span class="ident" id="6042546">val</span><span class="op" id="6042549">.</span><span class="ident" id="6042550">UnmarshalText</span><span class="op" id="6042563">(</span><span class="ident" id="6042564">buf</span><span class="op" id="6042567">)</span><br>
<span class="lineno">225</span><span class="op" id="6042569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6042572">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6042633">func</span>&nbsp;<span class="op" id="6042638">(</span><span class="ident" id="6042639">p</span>&nbsp;<span class="op" id="6042641">*</span><span class="ident" id="6042642">Decoder</span><span class="op" id="6042649">)</span>&nbsp;<span class="ident" id="6042651">unmarshalAttr</span><span class="op" id="6042664">(</span><span class="ident" id="6042665">val</span>&nbsp;<span class="ident" id="6042669">reflect</span><span class="op" id="6042676">.</span><span class="ident" id="6042677">Value</span><span class="op" id="6042682">,</span>&nbsp;<span class="ident" id="6042684">attr</span>&nbsp;<span class="ident" id="6042689">Attr</span><span class="op" id="6042693">)</span>&nbsp;<span class="builtintype" id="6042695">error</span>&nbsp;<span class="op" id="6042701">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042704">if</span>&nbsp;<span class="ident" id="6042707">val</span><span class="op" id="6042710">.</span><span class="ident" id="6042711">Kind</span><span class="op" id="6042715">(</span><span class="op" id="6042716">)</span>&nbsp;<span class="op" id="6042718">==</span>&nbsp;<span class="ident" id="6042721">reflect</span><span class="op" id="6042728">.</span><span class="ident" id="6042729">Ptr</span>&nbsp;<span class="op" id="6042733">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042737">if</span>&nbsp;<span class="ident" id="6042740">val</span><span class="op" id="6042743">.</span><span class="ident" id="6042744">IsNil</span><span class="op" id="6042749">(</span><span class="op" id="6042750">)</span>&nbsp;<span class="op" id="6042752">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042757">val</span><span class="op" id="6042760">.</span><span class="ident" id="6042761">Set</span><span class="op" id="6042764">(</span><span class="ident" id="6042765">reflect</span><span class="op" id="6042772">.</span><span class="ident" id="6042773">New</span><span class="op" id="6042776">(</span><span class="ident" id="6042777">val</span><span class="op" id="6042780">.</span><span class="ident" id="6042781">Type</span><span class="op" id="6042785">(</span><span class="op" id="6042786">)</span><span class="op" id="6042787">.</span><span class="ident" id="6042788">Elem</span><span class="op" id="6042792">(</span><span class="op" id="6042793">)</span><span class="op" id="6042794">)</span><span class="op" id="6042795">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6042803">val</span>&nbsp;<span class="op" id="6042807">=</span>&nbsp;<span class="ident" id="6042809">val</span><span class="op" id="6042812">.</span><span class="ident" id="6042813">Elem</span><span class="op" id="6042817">(</span><span class="op" id="6042818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6042821">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6042825">if</span>&nbsp;<span class="ident" id="6042828">val</span><span class="op" id="6042831">.</span><span class="ident" id="6042832">CanInterface</span><span class="op" id="6042844">(</span><span class="op" id="6042845">)</span>&nbsp;<span class="op" id="6042847">&amp;&amp;</span>&nbsp;<span class="ident" id="6042850">val</span><span class="op" id="6042853">.</span><span class="ident" id="6042854">Type</span><span class="op" id="6042858">(</span><span class="op" id="6042859">)</span><span class="op" id="6042860">.</span><span class="ident" id="6042861">Implements</span><span class="op" id="6042871">(</span><span class="ident" id="6042872">unmarshalerAttrType</span><span class="op" id="6042891">)</span>&nbsp;<span class="op" id="6042893">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042897">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6042954">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043018">return</span>&nbsp;<span class="ident" id="6043025">val</span><span class="op" id="6043028">.</span><span class="ident" id="6043029">Interface</span><span class="op" id="6043038">(</span><span class="op" id="6043039">)</span><span class="op" id="6043040">.</span><span class="op" id="6043041">(</span><span class="ident" id="6043042">UnmarshalerAttr</span><span class="op" id="6043057">)</span><span class="op" id="6043058">.</span><span class="ident" id="6043059">UnmarshalXMLAttr</span><span class="op" id="6043075">(</span><span class="ident" id="6043076">attr</span><span class="op" id="6043080">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043083">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043086">if</span>&nbsp;<span class="ident" id="6043089">val</span><span class="op" id="6043092">.</span><span class="ident" id="6043093">CanAddr</span><span class="op" id="6043100">(</span><span class="op" id="6043101">)</span>&nbsp;<span class="op" id="6043103">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043107">pv</span>&nbsp;<span class="op" id="6043110">:=</span>&nbsp;<span class="ident" id="6043113">val</span><span class="op" id="6043116">.</span><span class="ident" id="6043117">Addr</span><span class="op" id="6043121">(</span><span class="op" id="6043122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043126">if</span>&nbsp;<span class="ident" id="6043129">pv</span><span class="op" id="6043131">.</span><span class="ident" id="6043132">CanInterface</span><span class="op" id="6043144">(</span><span class="op" id="6043145">)</span>&nbsp;<span class="op" id="6043147">&amp;&amp;</span>&nbsp;<span class="ident" id="6043150">pv</span><span class="op" id="6043152">.</span><span class="ident" id="6043153">Type</span><span class="op" id="6043157">(</span><span class="op" id="6043158">)</span><span class="op" id="6043159">.</span><span class="ident" id="6043160">Implements</span><span class="op" id="6043170">(</span><span class="ident" id="6043171">unmarshalerAttrType</span><span class="op" id="6043190">)</span>&nbsp;<span class="op" id="6043192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043197">return</span>&nbsp;<span class="ident" id="6043204">pv</span><span class="op" id="6043206">.</span><span class="ident" id="6043207">Interface</span><span class="op" id="6043216">(</span><span class="op" id="6043217">)</span><span class="op" id="6043218">.</span><span class="op" id="6043219">(</span><span class="ident" id="6043220">UnmarshalerAttr</span><span class="op" id="6043235">)</span><span class="op" id="6043236">.</span><span class="ident" id="6043237">UnmarshalXMLAttr</span><span class="op" id="6043253">(</span><span class="ident" id="6043254">attr</span><span class="op" id="6043258">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043265">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043269">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043327">if</span>&nbsp;<span class="ident" id="6043330">val</span><span class="op" id="6043333">.</span><span class="ident" id="6043334">CanInterface</span><span class="op" id="6043346">(</span><span class="op" id="6043347">)</span>&nbsp;<span class="op" id="6043349">&amp;&amp;</span>&nbsp;<span class="ident" id="6043352">val</span><span class="op" id="6043355">.</span><span class="ident" id="6043356">Type</span><span class="op" id="6043360">(</span><span class="op" id="6043361">)</span><span class="op" id="6043362">.</span><span class="ident" id="6043363">Implements</span><span class="op" id="6043373">(</span><span class="ident" id="6043374">textUnmarshalerType</span><span class="op" id="6043393">)</span>&nbsp;<span class="op" id="6043395">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043399">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6043456">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043520">return</span>&nbsp;<span class="ident" id="6043527">val</span><span class="op" id="6043530">.</span><span class="ident" id="6043531">Interface</span><span class="op" id="6043540">(</span><span class="op" id="6043541">)</span><span class="op" id="6043542">.</span><span class="op" id="6043543">(</span><span class="ident" id="6043544">encoding</span><span class="op" id="6043552">.</span><span class="ident" id="6043553">TextUnmarshaler</span><span class="op" id="6043568">)</span><span class="op" id="6043569">.</span><span class="ident" id="6043570">UnmarshalText</span><span class="op" id="6043583">(</span><span class="op" id="6043584">[</span><span class="op" id="6043585">]</span><span class="builtintype" id="6043586">byte</span><span class="op" id="6043590">(</span><span class="ident" id="6043591">attr</span><span class="op" id="6043595">.</span><span class="ident" id="6043596">Value</span><span class="op" id="6043601">)</span><span class="op" id="6043602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043605">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043608">if</span>&nbsp;<span class="ident" id="6043611">val</span><span class="op" id="6043614">.</span><span class="ident" id="6043615">CanAddr</span><span class="op" id="6043622">(</span><span class="op" id="6043623">)</span>&nbsp;<span class="op" id="6043625">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043629">pv</span>&nbsp;<span class="op" id="6043632">:=</span>&nbsp;<span class="ident" id="6043635">val</span><span class="op" id="6043638">.</span><span class="ident" id="6043639">Addr</span><span class="op" id="6043643">(</span><span class="op" id="6043644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043648">if</span>&nbsp;<span class="ident" id="6043651">pv</span><span class="op" id="6043653">.</span><span class="ident" id="6043654">CanInterface</span><span class="op" id="6043666">(</span><span class="op" id="6043667">)</span>&nbsp;<span class="op" id="6043669">&amp;&amp;</span>&nbsp;<span class="ident" id="6043672">pv</span><span class="op" id="6043674">.</span><span class="ident" id="6043675">Type</span><span class="op" id="6043679">(</span><span class="op" id="6043680">)</span><span class="op" id="6043681">.</span><span class="ident" id="6043682">Implements</span><span class="op" id="6043692">(</span><span class="ident" id="6043693">textUnmarshalerType</span><span class="op" id="6043712">)</span>&nbsp;<span class="op" id="6043714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043719">return</span>&nbsp;<span class="ident" id="6043726">pv</span><span class="op" id="6043728">.</span><span class="ident" id="6043729">Interface</span><span class="op" id="6043738">(</span><span class="op" id="6043739">)</span><span class="op" id="6043740">.</span><span class="op" id="6043741">(</span><span class="ident" id="6043742">encoding</span><span class="op" id="6043750">.</span><span class="ident" id="6043751">TextUnmarshaler</span><span class="op" id="6043766">)</span><span class="op" id="6043767">.</span><span class="ident" id="6043768">UnmarshalText</span><span class="op" id="6043781">(</span><span class="op" id="6043782">[</span><span class="op" id="6043783">]</span><span class="builtintype" id="6043784">byte</span><span class="op" id="6043788">(</span><span class="ident" id="6043789">attr</span><span class="op" id="6043793">.</span><span class="ident" id="6043794">Value</span><span class="op" id="6043799">)</span><span class="op" id="6043800">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6043807">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043811">copyValue</span><span class="op" id="6043820">(</span><span class="ident" id="6043821">val</span><span class="op" id="6043824">,</span>&nbsp;<span class="op" id="6043826">[</span><span class="op" id="6043827">]</span><span class="builtintype" id="6043828">byte</span><span class="op" id="6043832">(</span><span class="ident" id="6043833">attr</span><span class="op" id="6043837">.</span><span class="ident" id="6043838">Value</span><span class="op" id="6043843">)</span><span class="op" id="6043844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6043847">return</span>&nbsp;<span class="ident" id="6043854">nil</span><br>
<span class="lineno"></span><span class="op" id="6043858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6043861">var</span>&nbsp;<span class="op" id="6043865">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043868">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6043888">=</span>&nbsp;<span class="ident" id="6043890">reflect</span><span class="op" id="6043897">.</span><span class="ident" id="6043898">TypeOf</span><span class="op" id="6043904">(</span><span class="op" id="6043905">(</span><span class="op" id="6043906">*</span><span class="ident" id="6043907">Unmarshaler</span><span class="op" id="6043918">)</span><span class="op" id="6043919">(</span><span class="ident" id="6043920">nil</span><span class="op" id="6043923">)</span><span class="op" id="6043924">)</span><span class="op" id="6043925">.</span><span class="ident" id="6043926">Elem</span><span class="op" id="6043930">(</span><span class="op" id="6043931">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6043934">unmarshalerAttrType</span>&nbsp;<span class="op" id="6043954">=</span>&nbsp;<span class="ident" id="6043956">reflect</span><span class="op" id="6043963">.</span><span class="ident" id="6043964">TypeOf</span><span class="op" id="6043970">(</span><span class="op" id="6043971">(</span><span class="op" id="6043972">*</span><span class="ident" id="6043973">UnmarshalerAttr</span><span class="op" id="6043988">)</span><span class="op" id="6043989">(</span><span class="ident" id="6043990">nil</span><span class="op" id="6043993">)</span><span class="op" id="6043994">)</span><span class="op" id="6043995">.</span><span class="ident" id="6043996">Elem</span><span class="op" id="6044000">(</span><span class="op" id="6044001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044004">textUnmarshalerType</span>&nbsp;<span class="op" id="6044024">=</span>&nbsp;<span class="ident" id="6044026">reflect</span><span class="op" id="6044033">.</span><span class="ident" id="6044034">TypeOf</span><span class="op" id="6044040">(</span><span class="op" id="6044041">(</span><span class="op" id="6044042">*</span><span class="ident" id="6044043">encoding</span><span class="op" id="6044051">.</span><span class="ident" id="6044052">TextUnmarshaler</span><span class="op" id="6044067">)</span><span class="op" id="6044068">(</span><span class="ident" id="6044069">nil</span><span class="op" id="6044072">)</span><span class="op" id="6044073">)</span><span class="op" id="6044074">.</span><span class="ident" id="6044075">Elem</span><span class="op" id="6044079">(</span><span class="op" id="6044080">)</span><br>
<span class="lineno"></span><span class="op" id="6044082">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6044085">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6044129">func</span>&nbsp;<span class="op" id="6044134">(</span><span class="ident" id="6044135">p</span>&nbsp;<span class="op" id="6044137">*</span><span class="ident" id="6044138">Decoder</span><span class="op" id="6044145">)</span>&nbsp;<span class="ident" id="6044147">unmarshal</span><span class="op" id="6044156">(</span><span class="ident" id="6044157">val</span>&nbsp;<span class="ident" id="6044161">reflect</span><span class="op" id="6044168">.</span><span class="ident" id="6044169">Value</span><span class="op" id="6044174">,</span>&nbsp;<span class="ident" id="6044176">start</span>&nbsp;<span class="op" id="6044182">*</span><span class="ident" id="6044183">StartElement</span><span class="op" id="6044195">)</span>&nbsp;<span class="builtintype" id="6044197">error</span>&nbsp;<span class="op" id="6044203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044206">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044244">if</span>&nbsp;<span class="ident" id="6044247">start</span>&nbsp;<span class="op" id="6044253">==</span>&nbsp;<span class="ident" id="6044256">nil</span>&nbsp;<span class="op" id="6044260">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044264">for</span>&nbsp;<span class="op" id="6044268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044273">tok</span><span class="op" id="6044276">,</span>&nbsp;<span class="ident" id="6044278">err</span>&nbsp;<span class="op" id="6044282">:=</span>&nbsp;<span class="ident" id="6044285">p</span><span class="op" id="6044286">.</span><span class="ident" id="6044287">Token</span><span class="op" id="6044292">(</span><span class="op" id="6044293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044298">if</span>&nbsp;<span class="ident" id="6044301">err</span>&nbsp;<span class="op" id="6044305">!=</span>&nbsp;<span class="ident" id="6044308">nil</span>&nbsp;<span class="op" id="6044312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044318">return</span>&nbsp;<span class="ident" id="6044325">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044332">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044337">if</span>&nbsp;<span class="ident" id="6044340">t</span><span class="op" id="6044341">,</span>&nbsp;<span class="ident" id="6044343">ok</span>&nbsp;<span class="op" id="6044346">:=</span>&nbsp;<span class="ident" id="6044349">tok</span><span class="op" id="6044352">.</span><span class="op" id="6044353">(</span><span class="ident" id="6044354">StartElement</span><span class="op" id="6044366">)</span><span class="op" id="6044367">;</span>&nbsp;<span class="ident" id="6044369">ok</span>&nbsp;<span class="op" id="6044372">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044378">start</span>&nbsp;<span class="op" id="6044384">=</span>&nbsp;<span class="op" id="6044386">&amp;</span><span class="ident" id="6044387">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044393">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044402">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044406">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044409">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044413">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044475">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044501">if</span>&nbsp;<span class="ident" id="6044504">val</span><span class="op" id="6044507">.</span><span class="ident" id="6044508">Kind</span><span class="op" id="6044512">(</span><span class="op" id="6044513">)</span>&nbsp;<span class="op" id="6044515">==</span>&nbsp;<span class="ident" id="6044518">reflect</span><span class="op" id="6044525">.</span><span class="ident" id="6044526">Interface</span>&nbsp;<span class="op" id="6044536">&amp;&amp;</span>&nbsp;<span class="op" id="6044539">!</span><span class="ident" id="6044540">val</span><span class="op" id="6044543">.</span><span class="ident" id="6044544">IsNil</span><span class="op" id="6044549">(</span><span class="op" id="6044550">)</span>&nbsp;<span class="op" id="6044552">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044556">e</span>&nbsp;<span class="op" id="6044558">:=</span>&nbsp;<span class="ident" id="6044561">val</span><span class="op" id="6044564">.</span><span class="ident" id="6044565">Elem</span><span class="op" id="6044569">(</span><span class="op" id="6044570">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044574">if</span>&nbsp;<span class="ident" id="6044577">e</span><span class="op" id="6044578">.</span><span class="ident" id="6044579">Kind</span><span class="op" id="6044583">(</span><span class="op" id="6044584">)</span>&nbsp;<span class="op" id="6044586">==</span>&nbsp;<span class="ident" id="6044589">reflect</span><span class="op" id="6044596">.</span><span class="ident" id="6044597">Ptr</span>&nbsp;<span class="op" id="6044601">&amp;&amp;</span>&nbsp;<span class="op" id="6044604">!</span><span class="ident" id="6044605">e</span><span class="op" id="6044606">.</span><span class="ident" id="6044607">IsNil</span><span class="op" id="6044612">(</span><span class="op" id="6044613">)</span>&nbsp;<span class="op" id="6044615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044620">val</span>&nbsp;<span class="op" id="6044624">=</span>&nbsp;<span class="ident" id="6044626">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044633">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044637">if</span>&nbsp;<span class="ident" id="6044640">val</span><span class="op" id="6044643">.</span><span class="ident" id="6044644">Kind</span><span class="op" id="6044648">(</span><span class="op" id="6044649">)</span>&nbsp;<span class="op" id="6044651">==</span>&nbsp;<span class="ident" id="6044654">reflect</span><span class="op" id="6044661">.</span><span class="ident" id="6044662">Ptr</span>&nbsp;<span class="op" id="6044666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044670">if</span>&nbsp;<span class="ident" id="6044673">val</span><span class="op" id="6044676">.</span><span class="ident" id="6044677">IsNil</span><span class="op" id="6044682">(</span><span class="op" id="6044683">)</span>&nbsp;<span class="op" id="6044685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044690">val</span><span class="op" id="6044693">.</span><span class="ident" id="6044694">Set</span><span class="op" id="6044697">(</span><span class="ident" id="6044698">reflect</span><span class="op" id="6044705">.</span><span class="ident" id="6044706">New</span><span class="op" id="6044709">(</span><span class="ident" id="6044710">val</span><span class="op" id="6044713">.</span><span class="ident" id="6044714">Type</span><span class="op" id="6044718">(</span><span class="op" id="6044719">)</span><span class="op" id="6044720">.</span><span class="ident" id="6044721">Elem</span><span class="op" id="6044725">(</span><span class="op" id="6044726">)</span><span class="op" id="6044727">)</span><span class="op" id="6044728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044732">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6044736">val</span>&nbsp;<span class="op" id="6044740">=</span>&nbsp;<span class="ident" id="6044742">val</span><span class="op" id="6044745">.</span><span class="ident" id="6044746">Elem</span><span class="op" id="6044750">(</span><span class="op" id="6044751">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6044754">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044758">if</span>&nbsp;<span class="ident" id="6044761">val</span><span class="op" id="6044764">.</span><span class="ident" id="6044765">CanInterface</span><span class="op" id="6044777">(</span><span class="op" id="6044778">)</span>&nbsp;<span class="op" id="6044780">&amp;&amp;</span>&nbsp;<span class="ident" id="6044783">val</span><span class="op" id="6044786">.</span><span class="ident" id="6044787">Type</span><span class="op" id="6044791">(</span><span class="op" id="6044792">)</span><span class="op" id="6044793">.</span><span class="ident" id="6044794">Implements</span><span class="op" id="6044804">(</span><span class="ident" id="6044805">unmarshalerType</span><span class="op" id="6044820">)</span>&nbsp;<span class="op" id="6044822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044826">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6044883">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6044947">return</span>&nbsp;<span class="ident" id="6044954">p</span><span class="op" id="6044955">.</span><span class="ident" id="6044956">unmarshalInterface</span><span class="op" id="6044974">(</span><span class="ident" id="6044975">val</span><span class="op" id="6044978">.</span><span class="ident" id="6044979">Interface</span><span class="op" id="6044988">(</span><span class="op" id="6044989">)</span><span class="op" id="6044990">.</span><span class="op" id="6044991">(</span><span class="ident" id="6044992">Unmarshaler</span><span class="op" id="6045003">)</span><span class="op" id="6045004">,</span>&nbsp;<span class="ident" id="6045006">start</span><span class="op" id="6045011">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045014">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045018">if</span>&nbsp;<span class="ident" id="6045021">val</span><span class="op" id="6045024">.</span><span class="ident" id="6045025">CanAddr</span><span class="op" id="6045032">(</span><span class="op" id="6045033">)</span>&nbsp;<span class="op" id="6045035">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045039">pv</span>&nbsp;<span class="op" id="6045042">:=</span>&nbsp;<span class="ident" id="6045045">val</span><span class="op" id="6045048">.</span><span class="ident" id="6045049">Addr</span><span class="op" id="6045053">(</span><span class="op" id="6045054">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045058">if</span>&nbsp;<span class="ident" id="6045061">pv</span><span class="op" id="6045063">.</span><span class="ident" id="6045064">CanInterface</span><span class="op" id="6045076">(</span><span class="op" id="6045077">)</span>&nbsp;<span class="op" id="6045079">&amp;&amp;</span>&nbsp;<span class="ident" id="6045082">pv</span><span class="op" id="6045084">.</span><span class="ident" id="6045085">Type</span><span class="op" id="6045089">(</span><span class="op" id="6045090">)</span><span class="op" id="6045091">.</span><span class="ident" id="6045092">Implements</span><span class="op" id="6045102">(</span><span class="ident" id="6045103">unmarshalerType</span><span class="op" id="6045118">)</span>&nbsp;<span class="op" id="6045120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045125">return</span>&nbsp;<span class="ident" id="6045132">p</span><span class="op" id="6045133">.</span><span class="ident" id="6045134">unmarshalInterface</span><span class="op" id="6045152">(</span><span class="ident" id="6045153">pv</span><span class="op" id="6045155">.</span><span class="ident" id="6045156">Interface</span><span class="op" id="6045165">(</span><span class="op" id="6045166">)</span><span class="op" id="6045167">.</span><span class="op" id="6045168">(</span><span class="ident" id="6045169">Unmarshaler</span><span class="op" id="6045180">)</span><span class="op" id="6045181">,</span>&nbsp;<span class="ident" id="6045183">start</span><span class="op" id="6045188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045192">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045195">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045199">if</span>&nbsp;<span class="ident" id="6045202">val</span><span class="op" id="6045205">.</span><span class="ident" id="6045206">CanInterface</span><span class="op" id="6045218">(</span><span class="op" id="6045219">)</span>&nbsp;<span class="op" id="6045221">&amp;&amp;</span>&nbsp;<span class="ident" id="6045224">val</span><span class="op" id="6045227">.</span><span class="ident" id="6045228">Type</span><span class="op" id="6045232">(</span><span class="op" id="6045233">)</span><span class="op" id="6045234">.</span><span class="ident" id="6045235">Implements</span><span class="op" id="6045245">(</span><span class="ident" id="6045246">textUnmarshalerType</span><span class="op" id="6045265">)</span>&nbsp;<span class="op" id="6045267">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045271">return</span>&nbsp;<span class="ident" id="6045278">p</span><span class="op" id="6045279">.</span><span class="ident" id="6045280">unmarshalTextInterface</span><span class="op" id="6045302">(</span><span class="ident" id="6045303">val</span><span class="op" id="6045306">.</span><span class="ident" id="6045307">Interface</span><span class="op" id="6045316">(</span><span class="op" id="6045317">)</span><span class="op" id="6045318">.</span><span class="op" id="6045319">(</span><span class="ident" id="6045320">encoding</span><span class="op" id="6045328">.</span><span class="ident" id="6045329">TextUnmarshaler</span><span class="op" id="6045344">)</span><span class="op" id="6045345">,</span>&nbsp;<span class="ident" id="6045347">start</span><span class="op" id="6045352">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045355">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045359">if</span>&nbsp;<span class="ident" id="6045362">val</span><span class="op" id="6045365">.</span><span class="ident" id="6045366">CanAddr</span><span class="op" id="6045373">(</span><span class="op" id="6045374">)</span>&nbsp;<span class="op" id="6045376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045380">pv</span>&nbsp;<span class="op" id="6045383">:=</span>&nbsp;<span class="ident" id="6045386">val</span><span class="op" id="6045389">.</span><span class="ident" id="6045390">Addr</span><span class="op" id="6045394">(</span><span class="op" id="6045395">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045399">if</span>&nbsp;<span class="ident" id="6045402">pv</span><span class="op" id="6045404">.</span><span class="ident" id="6045405">CanInterface</span><span class="op" id="6045417">(</span><span class="op" id="6045418">)</span>&nbsp;<span class="op" id="6045420">&amp;&amp;</span>&nbsp;<span class="ident" id="6045423">pv</span><span class="op" id="6045425">.</span><span class="ident" id="6045426">Type</span><span class="op" id="6045430">(</span><span class="op" id="6045431">)</span><span class="op" id="6045432">.</span><span class="ident" id="6045433">Implements</span><span class="op" id="6045443">(</span><span class="ident" id="6045444">textUnmarshalerType</span><span class="op" id="6045463">)</span>&nbsp;<span class="op" id="6045465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045470">return</span>&nbsp;<span class="ident" id="6045477">p</span><span class="op" id="6045478">.</span><span class="ident" id="6045479">unmarshalTextInterface</span><span class="op" id="6045501">(</span><span class="ident" id="6045502">pv</span><span class="op" id="6045504">.</span><span class="ident" id="6045505">Interface</span><span class="op" id="6045514">(</span><span class="op" id="6045515">)</span><span class="op" id="6045516">.</span><span class="op" id="6045517">(</span><span class="ident" id="6045518">encoding</span><span class="op" id="6045526">.</span><span class="ident" id="6045527">TextUnmarshaler</span><span class="op" id="6045542">)</span><span class="op" id="6045543">,</span>&nbsp;<span class="ident" id="6045545">start</span><span class="op" id="6045550">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045554">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045557">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045561">var</span>&nbsp;<span class="op" id="6045565">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045569">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6045582">[</span><span class="op" id="6045583">]</span><span class="builtintype" id="6045584">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045591">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6045604">reflect</span><span class="op" id="6045611">.</span><span class="ident" id="6045612">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045620">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6045633">[</span><span class="op" id="6045634">]</span><span class="builtintype" id="6045635">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045642">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6045655">reflect</span><span class="op" id="6045662">.</span><span class="ident" id="6045663">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045671">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6045684">reflect</span><span class="op" id="6045691">.</span><span class="ident" id="6045692">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045700">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6045713">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045719">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6045732">[</span><span class="op" id="6045733">]</span><span class="builtintype" id="6045734">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045741">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6045754">reflect</span><span class="op" id="6045761">.</span><span class="ident" id="6045762">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045770">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6045783">reflect</span><span class="op" id="6045790">.</span><span class="ident" id="6045791">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045799">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6045812">*</span><span class="ident" id="6045813">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6045824">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6045837">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6045844">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045848">switch</span>&nbsp;<span class="ident" id="6045855">v</span>&nbsp;<span class="op" id="6045857">:=</span>&nbsp;<span class="ident" id="6045860">val</span><span class="op" id="6045863">;</span>&nbsp;<span class="ident" id="6045865">v</span><span class="op" id="6045866">.</span><span class="ident" id="6045867">Kind</span><span class="op" id="6045871">(</span><span class="op" id="6045872">)</span>&nbsp;<span class="op" id="6045874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045877">default</span><span class="op" id="6045884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045888">return</span>&nbsp;<span class="ident" id="6045895">errors</span><span class="op" id="6045901">.</span><span class="ident" id="6045902">New</span><span class="op" id="6045905">(</span><span class="string" id="6045906">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6045922">+</span>&nbsp;<span class="ident" id="6045924">v</span><span class="op" id="6045925">.</span><span class="ident" id="6045926">Type</span><span class="op" id="6045930">(</span><span class="op" id="6045931">)</span><span class="op" id="6045932">.</span><span class="ident" id="6045933">String</span><span class="op" id="6045939">(</span><span class="op" id="6045940">)</span><span class="op" id="6045941">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6045945">case</span>&nbsp;<span class="ident" id="6045950">reflect</span><span class="op" id="6045957">.</span><span class="ident" id="6045958">Interface</span><span class="op" id="6045967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6045971">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046028">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046083">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046121">return</span>&nbsp;<span class="ident" id="6046128">p</span><span class="op" id="6046129">.</span><span class="ident" id="6046130">Skip</span><span class="op" id="6046134">(</span><span class="op" id="6046135">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046139">case</span>&nbsp;<span class="ident" id="6046144">reflect</span><span class="op" id="6046151">.</span><span class="ident" id="6046152">Slice</span><span class="op" id="6046157">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046161">typ</span>&nbsp;<span class="op" id="6046165">:=</span>&nbsp;<span class="ident" id="6046168">v</span><span class="op" id="6046169">.</span><span class="ident" id="6046170">Type</span><span class="op" id="6046174">(</span><span class="op" id="6046175">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046179">if</span>&nbsp;<span class="ident" id="6046182">typ</span><span class="op" id="6046185">.</span><span class="ident" id="6046186">Elem</span><span class="op" id="6046190">(</span><span class="op" id="6046191">)</span><span class="op" id="6046192">.</span><span class="ident" id="6046193">Kind</span><span class="op" id="6046197">(</span><span class="op" id="6046198">)</span>&nbsp;<span class="op" id="6046200">==</span>&nbsp;<span class="ident" id="6046203">reflect</span><span class="op" id="6046210">.</span><span class="ident" id="6046211">Uint8</span>&nbsp;<span class="op" id="6046217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046222">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046235">saveData</span>&nbsp;<span class="op" id="6046244">=</span>&nbsp;<span class="ident" id="6046246">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046251">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6046259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046264">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046294">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046311">n</span>&nbsp;<span class="op" id="6046313">:=</span>&nbsp;<span class="ident" id="6046316">v</span><span class="op" id="6046317">.</span><span class="ident" id="6046318">Len</span><span class="op" id="6046321">(</span><span class="op" id="6046322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046326">if</span>&nbsp;<span class="ident" id="6046329">n</span>&nbsp;<span class="op" id="6046331">&gt;=</span>&nbsp;<span class="ident" id="6046334">v</span><span class="op" id="6046335">.</span><span class="ident" id="6046336">Cap</span><span class="op" id="6046339">(</span><span class="op" id="6046340">)</span>&nbsp;<span class="op" id="6046342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046347">ncap</span>&nbsp;<span class="op" id="6046352">:=</span>&nbsp;<span class="num" id="6046355">2</span>&nbsp;<span class="op" id="6046357">*</span>&nbsp;<span class="ident" id="6046359">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046364">if</span>&nbsp;<span class="ident" id="6046367">ncap</span>&nbsp;<span class="op" id="6046372">&lt;</span>&nbsp;<span class="num" id="6046374">4</span>&nbsp;<span class="op" id="6046376">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046382">ncap</span>&nbsp;<span class="op" id="6046387">=</span>&nbsp;<span class="num" id="6046389">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6046394">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6046399">new</span>&nbsp;<span class="op" id="6046403">:=</span>&nbsp;<span class="ident" id="6046406">reflect</span><span class="op" id="6046413">.</span><span class="ident" id="6046414">MakeSlice</span><span class="op" id="6046423">(</span><span class="ident" id="6046424">typ</span><span class="op" id="6046427">,</span>&nbsp;<span class="ident" id="6046429">n</span><span class="op" id="6046430">,</span>&nbsp;<span class="ident" id="6046432">ncap</span><span class="op" id="6046436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046441">reflect</span><span class="op" id="6046448">.</span><span class="ident" id="6046449">Copy</span><span class="op" id="6046453">(</span><span class="builtinfunc" id="6046454">new</span><span class="op" id="6046457">,</span>&nbsp;<span class="ident" id="6046459">v</span><span class="op" id="6046460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046465">v</span><span class="op" id="6046466">.</span><span class="ident" id="6046467">Set</span><span class="op" id="6046470">(</span><span class="builtinfunc" id="6046471">new</span><span class="op" id="6046474">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6046478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046482">v</span><span class="op" id="6046483">.</span><span class="ident" id="6046484">SetLen</span><span class="op" id="6046490">(</span><span class="ident" id="6046491">n</span>&nbsp;<span class="op" id="6046493">+</span>&nbsp;<span class="num" id="6046495">1</span><span class="op" id="6046496">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6046501">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046540">if</span>&nbsp;<span class="ident" id="6046543">err</span>&nbsp;<span class="op" id="6046547">:=</span>&nbsp;<span class="ident" id="6046550">p</span><span class="op" id="6046551">.</span><span class="ident" id="6046552">unmarshal</span><span class="op" id="6046561">(</span><span class="ident" id="6046562">v</span><span class="op" id="6046563">.</span><span class="ident" id="6046564">Index</span><span class="op" id="6046569">(</span><span class="ident" id="6046570">n</span><span class="op" id="6046571">)</span><span class="op" id="6046572">,</span>&nbsp;<span class="ident" id="6046574">start</span><span class="op" id="6046579">)</span><span class="op" id="6046580">;</span>&nbsp;<span class="ident" id="6046582">err</span>&nbsp;<span class="op" id="6046586">!=</span>&nbsp;<span class="ident" id="6046589">nil</span>&nbsp;<span class="op" id="6046593">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046598">v</span><span class="op" id="6046599">.</span><span class="ident" id="6046600">SetLen</span><span class="op" id="6046606">(</span><span class="ident" id="6046607">n</span><span class="op" id="6046608">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046613">return</span>&nbsp;<span class="ident" id="6046620">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6046626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046630">return</span>&nbsp;<span class="ident" id="6046637">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046643">case</span>&nbsp;<span class="ident" id="6046648">reflect</span><span class="op" id="6046655">.</span><span class="ident" id="6046656">Bool</span><span class="op" id="6046660">,</span>&nbsp;<span class="ident" id="6046662">reflect</span><span class="op" id="6046669">.</span><span class="ident" id="6046670">Float32</span><span class="op" id="6046677">,</span>&nbsp;<span class="ident" id="6046679">reflect</span><span class="op" id="6046686">.</span><span class="ident" id="6046687">Float64</span><span class="op" id="6046694">,</span>&nbsp;<span class="ident" id="6046696">reflect</span><span class="op" id="6046703">.</span><span class="ident" id="6046704">Int</span><span class="op" id="6046707">,</span>&nbsp;<span class="ident" id="6046709">reflect</span><span class="op" id="6046716">.</span><span class="ident" id="6046717">Int8</span><span class="op" id="6046721">,</span>&nbsp;<span class="ident" id="6046723">reflect</span><span class="op" id="6046730">.</span><span class="ident" id="6046731">Int16</span><span class="op" id="6046736">,</span>&nbsp;<span class="ident" id="6046738">reflect</span><span class="op" id="6046745">.</span><span class="ident" id="6046746">Int32</span><span class="op" id="6046751">,</span>&nbsp;<span class="ident" id="6046753">reflect</span><span class="op" id="6046760">.</span><span class="ident" id="6046761">Int64</span><span class="op" id="6046766">,</span>&nbsp;<span class="ident" id="6046768">reflect</span><span class="op" id="6046775">.</span><span class="ident" id="6046776">Uint</span><span class="op" id="6046780">,</span>&nbsp;<span class="ident" id="6046782">reflect</span><span class="op" id="6046789">.</span><span class="ident" id="6046790">Uint8</span><span class="op" id="6046795">,</span>&nbsp;<span class="ident" id="6046797">reflect</span><span class="op" id="6046804">.</span><span class="ident" id="6046805">Uint16</span><span class="op" id="6046811">,</span>&nbsp;<span class="ident" id="6046813">reflect</span><span class="op" id="6046820">.</span><span class="ident" id="6046821">Uint32</span><span class="op" id="6046827">,</span>&nbsp;<span class="ident" id="6046829">reflect</span><span class="op" id="6046836">.</span><span class="ident" id="6046837">Uint64</span><span class="op" id="6046843">,</span>&nbsp;<span class="ident" id="6046845">reflect</span><span class="op" id="6046852">.</span><span class="ident" id="6046853">Uintptr</span><span class="op" id="6046860">,</span>&nbsp;<span class="ident" id="6046862">reflect</span><span class="op" id="6046869">.</span><span class="ident" id="6046870">String</span><span class="op" id="6046876">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046880">saveData</span>&nbsp;<span class="op" id="6046889">=</span>&nbsp;<span class="ident" id="6046891">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046895">case</span>&nbsp;<span class="ident" id="6046900">reflect</span><span class="op" id="6046907">.</span><span class="ident" id="6046908">Struct</span><span class="op" id="6046914">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046918">typ</span>&nbsp;<span class="op" id="6046922">:=</span>&nbsp;<span class="ident" id="6046925">v</span><span class="op" id="6046926">.</span><span class="ident" id="6046927">Type</span><span class="op" id="6046931">(</span><span class="op" id="6046932">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046936">if</span>&nbsp;<span class="ident" id="6046939">typ</span>&nbsp;<span class="op" id="6046943">==</span>&nbsp;<span class="ident" id="6046946">nameType</span>&nbsp;<span class="op" id="6046955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6046960">v</span><span class="op" id="6046961">.</span><span class="ident" id="6046962">Set</span><span class="op" id="6046965">(</span><span class="ident" id="6046966">reflect</span><span class="op" id="6046973">.</span><span class="ident" id="6046974">ValueOf</span><span class="op" id="6046981">(</span><span class="ident" id="6046982">start</span><span class="op" id="6046987">.</span><span class="ident" id="6046988">Name</span><span class="op" id="6046992">)</span><span class="op" id="6046993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6046998">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047011">sv</span>&nbsp;<span class="op" id="6047014">=</span>&nbsp;<span class="ident" id="6047016">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047020">tinfo</span><span class="op" id="6047025">,</span>&nbsp;<span class="ident" id="6047027">err</span>&nbsp;<span class="op" id="6047031">=</span>&nbsp;<span class="ident" id="6047033">getTypeInfo</span><span class="op" id="6047044">(</span><span class="ident" id="6047045">typ</span><span class="op" id="6047048">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047052">if</span>&nbsp;<span class="ident" id="6047055">err</span>&nbsp;<span class="op" id="6047059">!=</span>&nbsp;<span class="ident" id="6047062">nil</span>&nbsp;<span class="op" id="6047066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047071">return</span>&nbsp;<span class="ident" id="6047078">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047084">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047089">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047128">if</span>&nbsp;<span class="ident" id="6047131">tinfo</span><span class="op" id="6047136">.</span><span class="ident" id="6047137">xmlname</span>&nbsp;<span class="op" id="6047145">!=</span>&nbsp;<span class="ident" id="6047148">nil</span>&nbsp;<span class="op" id="6047152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047157">finfo</span>&nbsp;<span class="op" id="6047163">:=</span>&nbsp;<span class="ident" id="6047166">tinfo</span><span class="op" id="6047171">.</span><span class="ident" id="6047172">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047183">if</span>&nbsp;<span class="ident" id="6047186">finfo</span><span class="op" id="6047191">.</span><span class="ident" id="6047192">name</span>&nbsp;<span class="op" id="6047197">!=</span>&nbsp;<span class="string" id="6047200">&#34;&#34;</span>&nbsp;<span class="op" id="6047203">&amp;&amp;</span>&nbsp;<span class="ident" id="6047206">finfo</span><span class="op" id="6047211">.</span><span class="ident" id="6047212">name</span>&nbsp;<span class="op" id="6047217">!=</span>&nbsp;<span class="ident" id="6047220">start</span><span class="op" id="6047225">.</span><span class="ident" id="6047226">Name</span><span class="op" id="6047230">.</span><span class="ident" id="6047231">Local</span>&nbsp;<span class="op" id="6047237">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047243">return</span>&nbsp;<span class="ident" id="6047250">UnmarshalError</span><span class="op" id="6047264">(</span><span class="string" id="6047265">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6047291">+</span>&nbsp;<span class="ident" id="6047293">finfo</span><span class="op" id="6047298">.</span><span class="ident" id="6047299">name</span>&nbsp;<span class="op" id="6047304">+</span>&nbsp;<span class="string" id="6047306">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6047321">+</span>&nbsp;<span class="ident" id="6047323">start</span><span class="op" id="6047328">.</span><span class="ident" id="6047329">Name</span><span class="op" id="6047333">.</span><span class="ident" id="6047334">Local</span>&nbsp;<span class="op" id="6047340">+</span>&nbsp;<span class="string" id="6047342">&#34;&gt;&#34;</span><span class="op" id="6047345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047350">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047355">if</span>&nbsp;<span class="ident" id="6047358">finfo</span><span class="op" id="6047363">.</span><span class="ident" id="6047364">xmlns</span>&nbsp;<span class="op" id="6047370">!=</span>&nbsp;<span class="string" id="6047373">&#34;&#34;</span>&nbsp;<span class="op" id="6047376">&amp;&amp;</span>&nbsp;<span class="ident" id="6047379">finfo</span><span class="op" id="6047384">.</span><span class="ident" id="6047385">xmlns</span>&nbsp;<span class="op" id="6047391">!=</span>&nbsp;<span class="ident" id="6047394">start</span><span class="op" id="6047399">.</span><span class="ident" id="6047400">Name</span><span class="op" id="6047404">.</span><span class="ident" id="6047405">Space</span>&nbsp;<span class="op" id="6047411">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047417">e</span>&nbsp;<span class="op" id="6047419">:=</span>&nbsp;<span class="string" id="6047422">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6047443">+</span>&nbsp;<span class="ident" id="6047445">finfo</span><span class="op" id="6047450">.</span><span class="ident" id="6047451">name</span>&nbsp;<span class="op" id="6047456">+</span>&nbsp;<span class="string" id="6047458">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6047477">+</span>&nbsp;<span class="ident" id="6047479">finfo</span><span class="op" id="6047484">.</span><span class="ident" id="6047485">xmlns</span>&nbsp;<span class="op" id="6047491">+</span>&nbsp;<span class="string" id="6047493">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047510">if</span>&nbsp;<span class="ident" id="6047513">start</span><span class="op" id="6047518">.</span><span class="ident" id="6047519">Name</span><span class="op" id="6047523">.</span><span class="ident" id="6047524">Space</span>&nbsp;<span class="op" id="6047530">==</span>&nbsp;<span class="string" id="6047533">&#34;&#34;</span>&nbsp;<span class="op" id="6047536">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047543">e</span>&nbsp;<span class="op" id="6047545">+=</span>&nbsp;<span class="string" id="6047548">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047568">}</span>&nbsp;<span class="keyword" id="6047570">else</span>&nbsp;<span class="op" id="6047575">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047582">e</span>&nbsp;<span class="op" id="6047584">+=</span>&nbsp;<span class="ident" id="6047587">start</span><span class="op" id="6047592">.</span><span class="ident" id="6047593">Name</span><span class="op" id="6047597">.</span><span class="ident" id="6047598">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047608">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047614">return</span>&nbsp;<span class="ident" id="6047621">UnmarshalError</span><span class="op" id="6047635">(</span><span class="ident" id="6047636">e</span><span class="op" id="6047637">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047642">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047647">fv</span>&nbsp;<span class="op" id="6047650">:=</span>&nbsp;<span class="ident" id="6047653">finfo</span><span class="op" id="6047658">.</span><span class="ident" id="6047659">value</span><span class="op" id="6047664">(</span><span class="ident" id="6047665">sv</span><span class="op" id="6047667">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047672">if</span>&nbsp;<span class="ident" id="6047675">_</span><span class="op" id="6047676">,</span>&nbsp;<span class="ident" id="6047678">ok</span>&nbsp;<span class="op" id="6047681">:=</span>&nbsp;<span class="ident" id="6047684">fv</span><span class="op" id="6047686">.</span><span class="ident" id="6047687">Interface</span><span class="op" id="6047696">(</span><span class="op" id="6047697">)</span><span class="op" id="6047698">.</span><span class="op" id="6047699">(</span><span class="ident" id="6047700">Name</span><span class="op" id="6047704">)</span><span class="op" id="6047705">;</span>&nbsp;<span class="ident" id="6047707">ok</span>&nbsp;<span class="op" id="6047710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047716">fv</span><span class="op" id="6047718">.</span><span class="ident" id="6047719">Set</span><span class="op" id="6047722">(</span><span class="ident" id="6047723">reflect</span><span class="op" id="6047730">.</span><span class="ident" id="6047731">ValueOf</span><span class="op" id="6047738">(</span><span class="ident" id="6047739">start</span><span class="op" id="6047744">.</span><span class="ident" id="6047745">Name</span><span class="op" id="6047749">)</span><span class="op" id="6047750">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047755">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6047759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047764">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047788">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047861">for</span>&nbsp;<span class="ident" id="6047865">i</span>&nbsp;<span class="op" id="6047867">:=</span>&nbsp;<span class="keyword" id="6047870">range</span>&nbsp;<span class="ident" id="6047876">tinfo</span><span class="op" id="6047881">.</span><span class="ident" id="6047882">fields</span>&nbsp;<span class="op" id="6047889">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047894">finfo</span>&nbsp;<span class="op" id="6047900">:=</span>&nbsp;<span class="op" id="6047903">&amp;</span><span class="ident" id="6047904">tinfo</span><span class="op" id="6047909">.</span><span class="ident" id="6047910">fields</span><span class="op" id="6047916">[</span><span class="ident" id="6047917">i</span><span class="op" id="6047918">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047923">switch</span>&nbsp;<span class="ident" id="6047930">finfo</span><span class="op" id="6047935">.</span><span class="ident" id="6047936">flags</span>&nbsp;<span class="op" id="6047942">&amp;</span>&nbsp;<span class="ident" id="6047944">fMode</span>&nbsp;<span class="op" id="6047950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6047955">case</span>&nbsp;<span class="ident" id="6047960">fAttr</span><span class="op" id="6047965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6047971">strv</span>&nbsp;<span class="op" id="6047976">:=</span>&nbsp;<span class="ident" id="6047979">finfo</span><span class="op" id="6047984">.</span><span class="ident" id="6047985">value</span><span class="op" id="6047990">(</span><span class="ident" id="6047991">sv</span><span class="op" id="6047993">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6047999">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048026">for</span>&nbsp;<span class="ident" id="6048030">_</span><span class="op" id="6048031">,</span>&nbsp;<span class="ident" id="6048033">a</span>&nbsp;<span class="op" id="6048035">:=</span>&nbsp;<span class="keyword" id="6048038">range</span>&nbsp;<span class="ident" id="6048044">start</span><span class="op" id="6048049">.</span><span class="ident" id="6048050">Attr</span>&nbsp;<span class="op" id="6048055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048062">if</span>&nbsp;<span class="ident" id="6048065">a</span><span class="op" id="6048066">.</span><span class="ident" id="6048067">Name</span><span class="op" id="6048071">.</span><span class="ident" id="6048072">Local</span>&nbsp;<span class="op" id="6048078">==</span>&nbsp;<span class="ident" id="6048081">finfo</span><span class="op" id="6048086">.</span><span class="ident" id="6048087">name</span>&nbsp;<span class="op" id="6048092">&amp;&amp;</span>&nbsp;<span class="op" id="6048095">(</span><span class="ident" id="6048096">finfo</span><span class="op" id="6048101">.</span><span class="ident" id="6048102">xmlns</span>&nbsp;<span class="op" id="6048108">==</span>&nbsp;<span class="string" id="6048111">&#34;&#34;</span>&nbsp;<span class="op" id="6048114">||</span>&nbsp;<span class="ident" id="6048117">finfo</span><span class="op" id="6048122">.</span><span class="ident" id="6048123">xmlns</span>&nbsp;<span class="op" id="6048129">==</span>&nbsp;<span class="ident" id="6048132">a</span><span class="op" id="6048133">.</span><span class="ident" id="6048134">Name</span><span class="op" id="6048138">.</span><span class="ident" id="6048139">Space</span><span class="op" id="6048144">)</span>&nbsp;<span class="op" id="6048146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048154">if</span>&nbsp;<span class="ident" id="6048157">err</span>&nbsp;<span class="op" id="6048161">:=</span>&nbsp;<span class="ident" id="6048164">p</span><span class="op" id="6048165">.</span><span class="ident" id="6048166">unmarshalAttr</span><span class="op" id="6048179">(</span><span class="ident" id="6048180">strv</span><span class="op" id="6048184">,</span>&nbsp;<span class="ident" id="6048186">a</span><span class="op" id="6048187">)</span><span class="op" id="6048188">;</span>&nbsp;<span class="ident" id="6048190">err</span>&nbsp;<span class="op" id="6048194">!=</span>&nbsp;<span class="ident" id="6048197">nil</span>&nbsp;<span class="op" id="6048201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048210">return</span>&nbsp;<span class="ident" id="6048217">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048227">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048235">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048246">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048252">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048258">case</span>&nbsp;<span class="ident" id="6048263">fCharData</span><span class="op" id="6048272">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048278">if</span>&nbsp;<span class="op" id="6048281">!</span><span class="ident" id="6048282">saveData</span><span class="op" id="6048290">.</span><span class="ident" id="6048291">IsValid</span><span class="op" id="6048298">(</span><span class="op" id="6048299">)</span>&nbsp;<span class="op" id="6048301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048308">saveData</span>&nbsp;<span class="op" id="6048317">=</span>&nbsp;<span class="ident" id="6048319">finfo</span><span class="op" id="6048324">.</span><span class="ident" id="6048325">value</span><span class="op" id="6048330">(</span><span class="ident" id="6048331">sv</span><span class="op" id="6048333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048339">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048345">case</span>&nbsp;<span class="ident" id="6048350">fComment</span><span class="op" id="6048358">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048364">if</span>&nbsp;<span class="op" id="6048367">!</span><span class="ident" id="6048368">saveComment</span><span class="op" id="6048379">.</span><span class="ident" id="6048380">IsValid</span><span class="op" id="6048387">(</span><span class="op" id="6048388">)</span>&nbsp;<span class="op" id="6048390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048397">saveComment</span>&nbsp;<span class="op" id="6048409">=</span>&nbsp;<span class="ident" id="6048411">finfo</span><span class="op" id="6048416">.</span><span class="ident" id="6048417">value</span><span class="op" id="6048422">(</span><span class="ident" id="6048423">sv</span><span class="op" id="6048425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048431">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048437">case</span>&nbsp;<span class="ident" id="6048442">fAny</span><span class="op" id="6048446">,</span>&nbsp;<span class="ident" id="6048448">fAny</span>&nbsp;<span class="op" id="6048453">|</span>&nbsp;<span class="ident" id="6048455">fElement</span><span class="op" id="6048463">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048469">if</span>&nbsp;<span class="op" id="6048472">!</span><span class="ident" id="6048473">saveAny</span><span class="op" id="6048480">.</span><span class="ident" id="6048481">IsValid</span><span class="op" id="6048488">(</span><span class="op" id="6048489">)</span>&nbsp;<span class="op" id="6048491">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048498">saveAny</span>&nbsp;<span class="op" id="6048506">=</span>&nbsp;<span class="ident" id="6048508">finfo</span><span class="op" id="6048513">.</span><span class="ident" id="6048514">value</span><span class="op" id="6048519">(</span><span class="ident" id="6048520">sv</span><span class="op" id="6048522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048528">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048534">case</span>&nbsp;<span class="ident" id="6048539">fInnerXml</span><span class="op" id="6048548">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048554">if</span>&nbsp;<span class="op" id="6048557">!</span><span class="ident" id="6048558">saveXML</span><span class="op" id="6048565">.</span><span class="ident" id="6048566">IsValid</span><span class="op" id="6048573">(</span><span class="op" id="6048574">)</span>&nbsp;<span class="op" id="6048576">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048583">saveXML</span>&nbsp;<span class="op" id="6048591">=</span>&nbsp;<span class="ident" id="6048593">finfo</span><span class="op" id="6048598">.</span><span class="ident" id="6048599">value</span><span class="op" id="6048604">(</span><span class="ident" id="6048605">sv</span><span class="op" id="6048607">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048614">if</span>&nbsp;<span class="ident" id="6048617">p</span><span class="op" id="6048618">.</span><span class="ident" id="6048619">saved</span>&nbsp;<span class="op" id="6048625">==</span>&nbsp;<span class="ident" id="6048628">nil</span>&nbsp;<span class="op" id="6048632">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048640">saveXMLIndex</span>&nbsp;<span class="op" id="6048653">=</span>&nbsp;<span class="num" id="6048655">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048663">p</span><span class="op" id="6048664">.</span><span class="ident" id="6048665">saved</span>&nbsp;<span class="op" id="6048671">=</span>&nbsp;<span class="builtinfunc" id="6048673">new</span><span class="op" id="6048676">(</span><span class="ident" id="6048677">bytes</span><span class="op" id="6048682">.</span><span class="ident" id="6048683">Buffer</span><span class="op" id="6048689">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048696">}</span>&nbsp;<span class="keyword" id="6048698">else</span>&nbsp;<span class="op" id="6048703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048711">saveXMLIndex</span>&nbsp;<span class="op" id="6048724">=</span>&nbsp;<span class="ident" id="6048726">p</span><span class="op" id="6048727">.</span><span class="ident" id="6048728">savedOffset</span><span class="op" id="6048739">(</span><span class="op" id="6048740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048753">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048758">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048765">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048769">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6048791">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6048830">Loop</span><span class="op" id="6048834">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048837">for</span>&nbsp;<span class="op" id="6048841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048845">var</span>&nbsp;<span class="ident" id="6048849">savedOffset</span>&nbsp;<span class="builtintype" id="6048861">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048867">if</span>&nbsp;<span class="ident" id="6048870">saveXML</span><span class="op" id="6048877">.</span><span class="ident" id="6048878">IsValid</span><span class="op" id="6048885">(</span><span class="op" id="6048886">)</span>&nbsp;<span class="op" id="6048888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048893">savedOffset</span>&nbsp;<span class="op" id="6048905">=</span>&nbsp;<span class="ident" id="6048907">p</span><span class="op" id="6048908">.</span><span class="ident" id="6048909">savedOffset</span><span class="op" id="6048920">(</span><span class="op" id="6048921">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048925">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6048929">tok</span><span class="op" id="6048932">,</span>&nbsp;<span class="ident" id="6048934">err</span>&nbsp;<span class="op" id="6048938">:=</span>&nbsp;<span class="ident" id="6048941">p</span><span class="op" id="6048942">.</span><span class="ident" id="6048943">Token</span><span class="op" id="6048948">(</span><span class="op" id="6048949">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048953">if</span>&nbsp;<span class="ident" id="6048956">err</span>&nbsp;<span class="op" id="6048960">!=</span>&nbsp;<span class="ident" id="6048963">nil</span>&nbsp;<span class="op" id="6048967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048972">return</span>&nbsp;<span class="ident" id="6048979">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6048985">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6048989">switch</span>&nbsp;<span class="ident" id="6048996">t</span>&nbsp;<span class="op" id="6048998">:=</span>&nbsp;<span class="ident" id="6049001">tok</span><span class="op" id="6049004">.</span><span class="op" id="6049005">(</span><span class="keyword" id="6049006">type</span><span class="op" id="6049010">)</span>&nbsp;<span class="op" id="6049012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049016">case</span>&nbsp;<span class="ident" id="6049021">StartElement</span><span class="op" id="6049033">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049038">consumed</span>&nbsp;<span class="op" id="6049047">:=</span>&nbsp;<span class="builtintype" id="6049050">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049059">if</span>&nbsp;<span class="ident" id="6049062">sv</span><span class="op" id="6049064">.</span><span class="ident" id="6049065">IsValid</span><span class="op" id="6049072">(</span><span class="op" id="6049073">)</span>&nbsp;<span class="op" id="6049075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049081">consumed</span><span class="op" id="6049089">,</span>&nbsp;<span class="ident" id="6049091">err</span>&nbsp;<span class="op" id="6049095">=</span>&nbsp;<span class="ident" id="6049097">p</span><span class="op" id="6049098">.</span><span class="ident" id="6049099">unmarshalPath</span><span class="op" id="6049112">(</span><span class="ident" id="6049113">tinfo</span><span class="op" id="6049118">,</span>&nbsp;<span class="ident" id="6049120">sv</span><span class="op" id="6049122">,</span>&nbsp;<span class="ident" id="6049124">nil</span><span class="op" id="6049127">,</span>&nbsp;<span class="op" id="6049129">&amp;</span><span class="ident" id="6049130">t</span><span class="op" id="6049131">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049137">if</span>&nbsp;<span class="ident" id="6049140">err</span>&nbsp;<span class="op" id="6049144">!=</span>&nbsp;<span class="ident" id="6049147">nil</span>&nbsp;<span class="op" id="6049151">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049158">return</span>&nbsp;<span class="ident" id="6049165">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049173">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049179">if</span>&nbsp;<span class="op" id="6049182">!</span><span class="ident" id="6049183">consumed</span>&nbsp;<span class="op" id="6049192">&amp;&amp;</span>&nbsp;<span class="ident" id="6049195">saveAny</span><span class="op" id="6049202">.</span><span class="ident" id="6049203">IsValid</span><span class="op" id="6049210">(</span><span class="op" id="6049211">)</span>&nbsp;<span class="op" id="6049213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049220">consumed</span>&nbsp;<span class="op" id="6049229">=</span>&nbsp;<span class="builtintype" id="6049231">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049241">if</span>&nbsp;<span class="ident" id="6049244">err</span>&nbsp;<span class="op" id="6049248">:=</span>&nbsp;<span class="ident" id="6049251">p</span><span class="op" id="6049252">.</span><span class="ident" id="6049253">unmarshal</span><span class="op" id="6049262">(</span><span class="ident" id="6049263">saveAny</span><span class="op" id="6049270">,</span>&nbsp;<span class="op" id="6049272">&amp;</span><span class="ident" id="6049273">t</span><span class="op" id="6049274">)</span><span class="op" id="6049275">;</span>&nbsp;<span class="ident" id="6049277">err</span>&nbsp;<span class="op" id="6049281">!=</span>&nbsp;<span class="ident" id="6049284">nil</span>&nbsp;<span class="op" id="6049288">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049296">return</span>&nbsp;<span class="ident" id="6049303">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049312">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049323">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049328">if</span>&nbsp;<span class="op" id="6049331">!</span><span class="ident" id="6049332">consumed</span>&nbsp;<span class="op" id="6049341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049347">if</span>&nbsp;<span class="ident" id="6049350">err</span>&nbsp;<span class="op" id="6049354">:=</span>&nbsp;<span class="ident" id="6049357">p</span><span class="op" id="6049358">.</span><span class="ident" id="6049359">Skip</span><span class="op" id="6049363">(</span><span class="op" id="6049364">)</span><span class="op" id="6049365">;</span>&nbsp;<span class="ident" id="6049367">err</span>&nbsp;<span class="op" id="6049371">!=</span>&nbsp;<span class="ident" id="6049374">nil</span>&nbsp;<span class="op" id="6049378">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049385">return</span>&nbsp;<span class="ident" id="6049392">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049400">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049405">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049410">case</span>&nbsp;<span class="ident" id="6049415">EndElement</span><span class="op" id="6049425">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049430">if</span>&nbsp;<span class="ident" id="6049433">saveXML</span><span class="op" id="6049440">.</span><span class="ident" id="6049441">IsValid</span><span class="op" id="6049448">(</span><span class="op" id="6049449">)</span>&nbsp;<span class="op" id="6049451">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049457">saveXMLData</span>&nbsp;<span class="op" id="6049469">=</span>&nbsp;<span class="ident" id="6049471">p</span><span class="op" id="6049472">.</span><span class="ident" id="6049473">saved</span><span class="op" id="6049478">.</span><span class="ident" id="6049479">Bytes</span><span class="op" id="6049484">(</span><span class="op" id="6049485">)</span><span class="op" id="6049486">[</span><span class="ident" id="6049487">saveXMLIndex</span><span class="op" id="6049499">:</span><span class="ident" id="6049500">savedOffset</span><span class="op" id="6049511">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049517">if</span>&nbsp;<span class="ident" id="6049520">saveXMLIndex</span>&nbsp;<span class="op" id="6049533">==</span>&nbsp;<span class="num" id="6049536">0</span>&nbsp;<span class="op" id="6049538">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049545">p</span><span class="op" id="6049546">.</span><span class="ident" id="6049547">saved</span>&nbsp;<span class="op" id="6049553">=</span>&nbsp;<span class="ident" id="6049555">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049573">break</span>&nbsp;<span class="ident" id="6049579">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049587">case</span>&nbsp;<span class="ident" id="6049592">CharData</span><span class="op" id="6049600">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049605">if</span>&nbsp;<span class="ident" id="6049608">saveData</span><span class="op" id="6049616">.</span><span class="ident" id="6049617">IsValid</span><span class="op" id="6049624">(</span><span class="op" id="6049625">)</span>&nbsp;<span class="op" id="6049627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049633">data</span>&nbsp;<span class="op" id="6049638">=</span>&nbsp;<span class="builtinfunc" id="6049640">append</span><span class="op" id="6049646">(</span><span class="ident" id="6049647">data</span><span class="op" id="6049651">,</span>&nbsp;<span class="ident" id="6049653">t</span><span class="op" id="6049654">...</span><span class="op" id="6049657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049662">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049667">case</span>&nbsp;<span class="ident" id="6049672">Comment</span><span class="op" id="6049679">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049684">if</span>&nbsp;<span class="ident" id="6049687">saveComment</span><span class="op" id="6049698">.</span><span class="ident" id="6049699">IsValid</span><span class="op" id="6049706">(</span><span class="op" id="6049707">)</span>&nbsp;<span class="op" id="6049709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049715">comment</span>&nbsp;<span class="op" id="6049723">=</span>&nbsp;<span class="builtinfunc" id="6049725">append</span><span class="op" id="6049731">(</span><span class="ident" id="6049732">comment</span><span class="op" id="6049739">,</span>&nbsp;<span class="ident" id="6049741">t</span><span class="op" id="6049742">...</span><span class="op" id="6049745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049750">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049754">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049757">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049761">if</span>&nbsp;<span class="ident" id="6049764">saveData</span><span class="op" id="6049772">.</span><span class="ident" id="6049773">IsValid</span><span class="op" id="6049780">(</span><span class="op" id="6049781">)</span>&nbsp;<span class="op" id="6049783">&amp;&amp;</span>&nbsp;<span class="ident" id="6049786">saveData</span><span class="op" id="6049794">.</span><span class="ident" id="6049795">CanInterface</span><span class="op" id="6049807">(</span><span class="op" id="6049808">)</span>&nbsp;<span class="op" id="6049810">&amp;&amp;</span>&nbsp;<span class="ident" id="6049813">saveData</span><span class="op" id="6049821">.</span><span class="ident" id="6049822">Type</span><span class="op" id="6049826">(</span><span class="op" id="6049827">)</span><span class="op" id="6049828">.</span><span class="ident" id="6049829">Implements</span><span class="op" id="6049839">(</span><span class="ident" id="6049840">textUnmarshalerType</span><span class="op" id="6049859">)</span>&nbsp;<span class="op" id="6049861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049865">if</span>&nbsp;<span class="ident" id="6049868">err</span>&nbsp;<span class="op" id="6049872">:=</span>&nbsp;<span class="ident" id="6049875">saveData</span><span class="op" id="6049883">.</span><span class="ident" id="6049884">Interface</span><span class="op" id="6049893">(</span><span class="op" id="6049894">)</span><span class="op" id="6049895">.</span><span class="op" id="6049896">(</span><span class="ident" id="6049897">encoding</span><span class="op" id="6049905">.</span><span class="ident" id="6049906">TextUnmarshaler</span><span class="op" id="6049921">)</span><span class="op" id="6049922">.</span><span class="ident" id="6049923">UnmarshalText</span><span class="op" id="6049936">(</span><span class="ident" id="6049937">data</span><span class="op" id="6049941">)</span><span class="op" id="6049942">;</span>&nbsp;<span class="ident" id="6049944">err</span>&nbsp;<span class="op" id="6049948">!=</span>&nbsp;<span class="ident" id="6049951">nil</span>&nbsp;<span class="op" id="6049955">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6049960">return</span>&nbsp;<span class="ident" id="6049967">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6049973">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6049977">saveData</span>&nbsp;<span class="op" id="6049986">=</span>&nbsp;<span class="ident" id="6049988">reflect</span><span class="op" id="6049995">.</span><span class="ident" id="6049996">Value</span><span class="op" id="6050001">{</span><span class="op" id="6050002">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050005">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050009">if</span>&nbsp;<span class="ident" id="6050012">saveData</span><span class="op" id="6050020">.</span><span class="ident" id="6050021">IsValid</span><span class="op" id="6050028">(</span><span class="op" id="6050029">)</span>&nbsp;<span class="op" id="6050031">&amp;&amp;</span>&nbsp;<span class="ident" id="6050034">saveData</span><span class="op" id="6050042">.</span><span class="ident" id="6050043">CanAddr</span><span class="op" id="6050050">(</span><span class="op" id="6050051">)</span>&nbsp;<span class="op" id="6050053">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050057">pv</span>&nbsp;<span class="op" id="6050060">:=</span>&nbsp;<span class="ident" id="6050063">saveData</span><span class="op" id="6050071">.</span><span class="ident" id="6050072">Addr</span><span class="op" id="6050076">(</span><span class="op" id="6050077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050081">if</span>&nbsp;<span class="ident" id="6050084">pv</span><span class="op" id="6050086">.</span><span class="ident" id="6050087">CanInterface</span><span class="op" id="6050099">(</span><span class="op" id="6050100">)</span>&nbsp;<span class="op" id="6050102">&amp;&amp;</span>&nbsp;<span class="ident" id="6050105">pv</span><span class="op" id="6050107">.</span><span class="ident" id="6050108">Type</span><span class="op" id="6050112">(</span><span class="op" id="6050113">)</span><span class="op" id="6050114">.</span><span class="ident" id="6050115">Implements</span><span class="op" id="6050125">(</span><span class="ident" id="6050126">textUnmarshalerType</span><span class="op" id="6050145">)</span>&nbsp;<span class="op" id="6050147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050152">if</span>&nbsp;<span class="ident" id="6050155">err</span>&nbsp;<span class="op" id="6050159">:=</span>&nbsp;<span class="ident" id="6050162">pv</span><span class="op" id="6050164">.</span><span class="ident" id="6050165">Interface</span><span class="op" id="6050174">(</span><span class="op" id="6050175">)</span><span class="op" id="6050176">.</span><span class="op" id="6050177">(</span><span class="ident" id="6050178">encoding</span><span class="op" id="6050186">.</span><span class="ident" id="6050187">TextUnmarshaler</span><span class="op" id="6050202">)</span><span class="op" id="6050203">.</span><span class="ident" id="6050204">UnmarshalText</span><span class="op" id="6050217">(</span><span class="ident" id="6050218">data</span><span class="op" id="6050222">)</span><span class="op" id="6050223">;</span>&nbsp;<span class="ident" id="6050225">err</span>&nbsp;<span class="op" id="6050229">!=</span>&nbsp;<span class="ident" id="6050232">nil</span>&nbsp;<span class="op" id="6050236">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050242">return</span>&nbsp;<span class="ident" id="6050249">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050256">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050261">saveData</span>&nbsp;<span class="op" id="6050270">=</span>&nbsp;<span class="ident" id="6050272">reflect</span><span class="op" id="6050279">.</span><span class="ident" id="6050280">Value</span><span class="op" id="6050285">{</span><span class="op" id="6050286">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050290">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050297">if</span>&nbsp;<span class="ident" id="6050300">err</span>&nbsp;<span class="op" id="6050304">:=</span>&nbsp;<span class="ident" id="6050307">copyValue</span><span class="op" id="6050316">(</span><span class="ident" id="6050317">saveData</span><span class="op" id="6050325">,</span>&nbsp;<span class="ident" id="6050327">data</span><span class="op" id="6050331">)</span><span class="op" id="6050332">;</span>&nbsp;<span class="ident" id="6050334">err</span>&nbsp;<span class="op" id="6050338">!=</span>&nbsp;<span class="ident" id="6050341">nil</span>&nbsp;<span class="op" id="6050345">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050349">return</span>&nbsp;<span class="ident" id="6050356">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050365">switch</span>&nbsp;<span class="ident" id="6050372">t</span>&nbsp;<span class="op" id="6050374">:=</span>&nbsp;<span class="ident" id="6050377">saveComment</span><span class="op" id="6050388">;</span>&nbsp;<span class="ident" id="6050390">t</span><span class="op" id="6050391">.</span><span class="ident" id="6050392">Kind</span><span class="op" id="6050396">(</span><span class="op" id="6050397">)</span>&nbsp;<span class="op" id="6050399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050402">case</span>&nbsp;<span class="ident" id="6050407">reflect</span><span class="op" id="6050414">.</span><span class="ident" id="6050415">String</span><span class="op" id="6050421">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050425">t</span><span class="op" id="6050426">.</span><span class="ident" id="6050427">SetString</span><span class="op" id="6050436">(</span><span class="builtintype" id="6050437">string</span><span class="op" id="6050443">(</span><span class="ident" id="6050444">comment</span><span class="op" id="6050451">)</span><span class="op" id="6050452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050455">case</span>&nbsp;<span class="ident" id="6050460">reflect</span><span class="op" id="6050467">.</span><span class="ident" id="6050468">Slice</span><span class="op" id="6050473">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050477">t</span><span class="op" id="6050478">.</span><span class="ident" id="6050479">Set</span><span class="op" id="6050482">(</span><span class="ident" id="6050483">reflect</span><span class="op" id="6050490">.</span><span class="ident" id="6050491">ValueOf</span><span class="op" id="6050498">(</span><span class="ident" id="6050499">comment</span><span class="op" id="6050506">)</span><span class="op" id="6050507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050510">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050514">switch</span>&nbsp;<span class="ident" id="6050521">t</span>&nbsp;<span class="op" id="6050523">:=</span>&nbsp;<span class="ident" id="6050526">saveXML</span><span class="op" id="6050533">;</span>&nbsp;<span class="ident" id="6050535">t</span><span class="op" id="6050536">.</span><span class="ident" id="6050537">Kind</span><span class="op" id="6050541">(</span><span class="op" id="6050542">)</span>&nbsp;<span class="op" id="6050544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050547">case</span>&nbsp;<span class="ident" id="6050552">reflect</span><span class="op" id="6050559">.</span><span class="ident" id="6050560">String</span><span class="op" id="6050566">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050570">t</span><span class="op" id="6050571">.</span><span class="ident" id="6050572">SetString</span><span class="op" id="6050581">(</span><span class="builtintype" id="6050582">string</span><span class="op" id="6050588">(</span><span class="ident" id="6050589">saveXMLData</span><span class="op" id="6050600">)</span><span class="op" id="6050601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050604">case</span>&nbsp;<span class="ident" id="6050609">reflect</span><span class="op" id="6050616">.</span><span class="ident" id="6050617">Slice</span><span class="op" id="6050622">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050626">t</span><span class="op" id="6050627">.</span><span class="ident" id="6050628">Set</span><span class="op" id="6050631">(</span><span class="ident" id="6050632">reflect</span><span class="op" id="6050639">.</span><span class="ident" id="6050640">ValueOf</span><span class="op" id="6050647">(</span><span class="ident" id="6050648">saveXMLData</span><span class="op" id="6050659">)</span><span class="op" id="6050660">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050663">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050667">return</span>&nbsp;<span class="ident" id="6050674">nil</span><br>
<span class="lineno"></span><span class="op" id="6050678">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6050681">func</span>&nbsp;<span class="ident" id="6050686">copyValue</span><span class="op" id="6050695">(</span><span class="ident" id="6050696">dst</span>&nbsp;<span class="ident" id="6050700">reflect</span><span class="op" id="6050707">.</span><span class="ident" id="6050708">Value</span><span class="op" id="6050713">,</span>&nbsp;<span class="ident" id="6050715">src</span>&nbsp;<span class="op" id="6050719">[</span><span class="op" id="6050720">]</span><span class="builtintype" id="6050721">byte</span><span class="op" id="6050725">)</span>&nbsp;<span class="op" id="6050727">(</span><span class="ident" id="6050728">err</span>&nbsp;<span class="builtintype" id="6050732">error</span><span class="op" id="6050737">)</span>&nbsp;<span class="op" id="6050739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050742">dst0</span>&nbsp;<span class="op" id="6050747">:=</span>&nbsp;<span class="ident" id="6050750">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050756">if</span>&nbsp;<span class="ident" id="6050759">dst</span><span class="op" id="6050762">.</span><span class="ident" id="6050763">Kind</span><span class="op" id="6050767">(</span><span class="op" id="6050768">)</span>&nbsp;<span class="op" id="6050770">==</span>&nbsp;<span class="ident" id="6050773">reflect</span><span class="op" id="6050780">.</span><span class="ident" id="6050781">Ptr</span>&nbsp;<span class="op" id="6050785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050789">if</span>&nbsp;<span class="ident" id="6050792">dst</span><span class="op" id="6050795">.</span><span class="ident" id="6050796">IsNil</span><span class="op" id="6050801">(</span><span class="op" id="6050802">)</span>&nbsp;<span class="op" id="6050804">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050809">dst</span><span class="op" id="6050812">.</span><span class="ident" id="6050813">Set</span><span class="op" id="6050816">(</span><span class="ident" id="6050817">reflect</span><span class="op" id="6050824">.</span><span class="ident" id="6050825">New</span><span class="op" id="6050828">(</span><span class="ident" id="6050829">dst</span><span class="op" id="6050832">.</span><span class="ident" id="6050833">Type</span><span class="op" id="6050837">(</span><span class="op" id="6050838">)</span><span class="op" id="6050839">.</span><span class="ident" id="6050840">Elem</span><span class="op" id="6050844">(</span><span class="op" id="6050845">)</span><span class="op" id="6050846">)</span><span class="op" id="6050847">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6050855">dst</span>&nbsp;<span class="op" id="6050859">=</span>&nbsp;<span class="ident" id="6050861">dst</span><span class="op" id="6050864">.</span><span class="ident" id="6050865">Elem</span><span class="op" id="6050869">(</span><span class="op" id="6050870">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6050873">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050877">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050904">switch</span>&nbsp;<span class="ident" id="6050911">dst</span><span class="op" id="6050914">.</span><span class="ident" id="6050915">Kind</span><span class="op" id="6050919">(</span><span class="op" id="6050920">)</span>&nbsp;<span class="op" id="6050922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050925">case</span>&nbsp;<span class="ident" id="6050930">reflect</span><span class="op" id="6050937">.</span><span class="ident" id="6050938">Invalid</span><span class="op" id="6050945">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6050949">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050973">default</span><span class="op" id="6050980">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6050984">return</span>&nbsp;<span class="ident" id="6050991">errors</span><span class="op" id="6050997">.</span><span class="ident" id="6050998">New</span><span class="op" id="6051001">(</span><span class="string" id="6051002">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6051027">+</span>&nbsp;<span class="ident" id="6051029">dst0</span><span class="op" id="6051033">.</span><span class="ident" id="6051034">Type</span><span class="op" id="6051038">(</span><span class="op" id="6051039">)</span><span class="op" id="6051040">.</span><span class="ident" id="6051041">String</span><span class="op" id="6051047">(</span><span class="op" id="6051048">)</span><span class="op" id="6051049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051052">case</span>&nbsp;<span class="ident" id="6051057">reflect</span><span class="op" id="6051064">.</span><span class="ident" id="6051065">Int</span><span class="op" id="6051068">,</span>&nbsp;<span class="ident" id="6051070">reflect</span><span class="op" id="6051077">.</span><span class="ident" id="6051078">Int8</span><span class="op" id="6051082">,</span>&nbsp;<span class="ident" id="6051084">reflect</span><span class="op" id="6051091">.</span><span class="ident" id="6051092">Int16</span><span class="op" id="6051097">,</span>&nbsp;<span class="ident" id="6051099">reflect</span><span class="op" id="6051106">.</span><span class="ident" id="6051107">Int32</span><span class="op" id="6051112">,</span>&nbsp;<span class="ident" id="6051114">reflect</span><span class="op" id="6051121">.</span><span class="ident" id="6051122">Int64</span><span class="op" id="6051127">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051131">itmp</span><span class="op" id="6051135">,</span>&nbsp;<span class="ident" id="6051137">err</span>&nbsp;<span class="op" id="6051141">:=</span>&nbsp;<span class="ident" id="6051144">strconv</span><span class="op" id="6051151">.</span><span class="ident" id="6051152">ParseInt</span><span class="op" id="6051160">(</span><span class="builtintype" id="6051161">string</span><span class="op" id="6051167">(</span><span class="ident" id="6051168">src</span><span class="op" id="6051171">)</span><span class="op" id="6051172">,</span>&nbsp;<span class="num" id="6051174">10</span><span class="op" id="6051176">,</span>&nbsp;<span class="ident" id="6051178">dst</span><span class="op" id="6051181">.</span><span class="ident" id="6051182">Type</span><span class="op" id="6051186">(</span><span class="op" id="6051187">)</span><span class="op" id="6051188">.</span><span class="ident" id="6051189">Bits</span><span class="op" id="6051193">(</span><span class="op" id="6051194">)</span><span class="op" id="6051195">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051199">if</span>&nbsp;<span class="ident" id="6051202">err</span>&nbsp;<span class="op" id="6051206">!=</span>&nbsp;<span class="ident" id="6051209">nil</span>&nbsp;<span class="op" id="6051213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051218">return</span>&nbsp;<span class="ident" id="6051225">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051235">dst</span><span class="op" id="6051238">.</span><span class="ident" id="6051239">SetInt</span><span class="op" id="6051245">(</span><span class="ident" id="6051246">itmp</span><span class="op" id="6051250">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051253">case</span>&nbsp;<span class="ident" id="6051258">reflect</span><span class="op" id="6051265">.</span><span class="ident" id="6051266">Uint</span><span class="op" id="6051270">,</span>&nbsp;<span class="ident" id="6051272">reflect</span><span class="op" id="6051279">.</span><span class="ident" id="6051280">Uint8</span><span class="op" id="6051285">,</span>&nbsp;<span class="ident" id="6051287">reflect</span><span class="op" id="6051294">.</span><span class="ident" id="6051295">Uint16</span><span class="op" id="6051301">,</span>&nbsp;<span class="ident" id="6051303">reflect</span><span class="op" id="6051310">.</span><span class="ident" id="6051311">Uint32</span><span class="op" id="6051317">,</span>&nbsp;<span class="ident" id="6051319">reflect</span><span class="op" id="6051326">.</span><span class="ident" id="6051327">Uint64</span><span class="op" id="6051333">,</span>&nbsp;<span class="ident" id="6051335">reflect</span><span class="op" id="6051342">.</span><span class="ident" id="6051343">Uintptr</span><span class="op" id="6051350">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051354">utmp</span><span class="op" id="6051358">,</span>&nbsp;<span class="ident" id="6051360">err</span>&nbsp;<span class="op" id="6051364">:=</span>&nbsp;<span class="ident" id="6051367">strconv</span><span class="op" id="6051374">.</span><span class="ident" id="6051375">ParseUint</span><span class="op" id="6051384">(</span><span class="builtintype" id="6051385">string</span><span class="op" id="6051391">(</span><span class="ident" id="6051392">src</span><span class="op" id="6051395">)</span><span class="op" id="6051396">,</span>&nbsp;<span class="num" id="6051398">10</span><span class="op" id="6051400">,</span>&nbsp;<span class="ident" id="6051402">dst</span><span class="op" id="6051405">.</span><span class="ident" id="6051406">Type</span><span class="op" id="6051410">(</span><span class="op" id="6051411">)</span><span class="op" id="6051412">.</span><span class="ident" id="6051413">Bits</span><span class="op" id="6051417">(</span><span class="op" id="6051418">)</span><span class="op" id="6051419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051423">if</span>&nbsp;<span class="ident" id="6051426">err</span>&nbsp;<span class="op" id="6051430">!=</span>&nbsp;<span class="ident" id="6051433">nil</span>&nbsp;<span class="op" id="6051437">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051442">return</span>&nbsp;<span class="ident" id="6051449">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051455">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051459">dst</span><span class="op" id="6051462">.</span><span class="ident" id="6051463">SetUint</span><span class="op" id="6051470">(</span><span class="ident" id="6051471">utmp</span><span class="op" id="6051475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051478">case</span>&nbsp;<span class="ident" id="6051483">reflect</span><span class="op" id="6051490">.</span><span class="ident" id="6051491">Float32</span><span class="op" id="6051498">,</span>&nbsp;<span class="ident" id="6051500">reflect</span><span class="op" id="6051507">.</span><span class="ident" id="6051508">Float64</span><span class="op" id="6051515">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051519">ftmp</span><span class="op" id="6051523">,</span>&nbsp;<span class="ident" id="6051525">err</span>&nbsp;<span class="op" id="6051529">:=</span>&nbsp;<span class="ident" id="6051532">strconv</span><span class="op" id="6051539">.</span><span class="ident" id="6051540">ParseFloat</span><span class="op" id="6051550">(</span><span class="builtintype" id="6051551">string</span><span class="op" id="6051557">(</span><span class="ident" id="6051558">src</span><span class="op" id="6051561">)</span><span class="op" id="6051562">,</span>&nbsp;<span class="ident" id="6051564">dst</span><span class="op" id="6051567">.</span><span class="ident" id="6051568">Type</span><span class="op" id="6051572">(</span><span class="op" id="6051573">)</span><span class="op" id="6051574">.</span><span class="ident" id="6051575">Bits</span><span class="op" id="6051579">(</span><span class="op" id="6051580">)</span><span class="op" id="6051581">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051585">if</span>&nbsp;<span class="ident" id="6051588">err</span>&nbsp;<span class="op" id="6051592">!=</span>&nbsp;<span class="ident" id="6051595">nil</span>&nbsp;<span class="op" id="6051599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051604">return</span>&nbsp;<span class="ident" id="6051611">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051621">dst</span><span class="op" id="6051624">.</span><span class="ident" id="6051625">SetFloat</span><span class="op" id="6051633">(</span><span class="ident" id="6051634">ftmp</span><span class="op" id="6051638">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051641">case</span>&nbsp;<span class="ident" id="6051646">reflect</span><span class="op" id="6051653">.</span><span class="ident" id="6051654">Bool</span><span class="op" id="6051658">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051662">value</span><span class="op" id="6051667">,</span>&nbsp;<span class="ident" id="6051669">err</span>&nbsp;<span class="op" id="6051673">:=</span>&nbsp;<span class="ident" id="6051676">strconv</span><span class="op" id="6051683">.</span><span class="ident" id="6051684">ParseBool</span><span class="op" id="6051693">(</span><span class="ident" id="6051694">strings</span><span class="op" id="6051701">.</span><span class="ident" id="6051702">TrimSpace</span><span class="op" id="6051711">(</span><span class="builtintype" id="6051712">string</span><span class="op" id="6051718">(</span><span class="ident" id="6051719">src</span><span class="op" id="6051722">)</span><span class="op" id="6051723">)</span><span class="op" id="6051724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051728">if</span>&nbsp;<span class="ident" id="6051731">err</span>&nbsp;<span class="op" id="6051735">!=</span>&nbsp;<span class="ident" id="6051738">nil</span>&nbsp;<span class="op" id="6051742">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051747">return</span>&nbsp;<span class="ident" id="6051754">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051760">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051764">dst</span><span class="op" id="6051767">.</span><span class="ident" id="6051768">SetBool</span><span class="op" id="6051775">(</span><span class="ident" id="6051776">value</span><span class="op" id="6051781">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051784">case</span>&nbsp;<span class="ident" id="6051789">reflect</span><span class="op" id="6051796">.</span><span class="ident" id="6051797">String</span><span class="op" id="6051803">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051807">dst</span><span class="op" id="6051810">.</span><span class="ident" id="6051811">SetString</span><span class="op" id="6051820">(</span><span class="builtintype" id="6051821">string</span><span class="op" id="6051827">(</span><span class="ident" id="6051828">src</span><span class="op" id="6051831">)</span><span class="op" id="6051832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051835">case</span>&nbsp;<span class="ident" id="6051840">reflect</span><span class="op" id="6051847">.</span><span class="ident" id="6051848">Slice</span><span class="op" id="6051853">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051857">if</span>&nbsp;<span class="builtinfunc" id="6051860">len</span><span class="op" id="6051863">(</span><span class="ident" id="6051864">src</span><span class="op" id="6051867">)</span>&nbsp;<span class="op" id="6051869">==</span>&nbsp;<span class="num" id="6051872">0</span>&nbsp;<span class="op" id="6051874">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6051879">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051910">src</span>&nbsp;<span class="op" id="6051914">=</span>&nbsp;<span class="op" id="6051916">[</span><span class="op" id="6051917">]</span><span class="builtintype" id="6051918">byte</span><span class="op" id="6051922">{</span><span class="op" id="6051923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6051931">dst</span><span class="op" id="6051934">.</span><span class="ident" id="6051935">SetBytes</span><span class="op" id="6051943">(</span><span class="ident" id="6051944">src</span><span class="op" id="6051947">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6051950">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6051953">return</span>&nbsp;<span class="ident" id="6051960">nil</span><br>
<span class="lineno">605</span><span class="op" id="6051964">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6051967">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6052031">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6052070">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6052139">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6052206">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6052273">func</span>&nbsp;<span class="op" id="6052278">(</span><span class="ident" id="6052279">p</span>&nbsp;<span class="op" id="6052281">*</span><span class="ident" id="6052282">Decoder</span><span class="op" id="6052289">)</span>&nbsp;<span class="ident" id="6052291">unmarshalPath</span><span class="op" id="6052304">(</span><span class="ident" id="6052305">tinfo</span>&nbsp;<span class="op" id="6052311">*</span><span class="ident" id="6052312">typeInfo</span><span class="op" id="6052320">,</span>&nbsp;<span class="ident" id="6052322">sv</span>&nbsp;<span class="ident" id="6052325">reflect</span><span class="op" id="6052332">.</span><span class="ident" id="6052333">Value</span><span class="op" id="6052338">,</span>&nbsp;<span class="ident" id="6052340">parents</span>&nbsp;<span class="op" id="6052348">[</span><span class="op" id="6052349">]</span><span class="builtintype" id="6052350">string</span><span class="op" id="6052356">,</span>&nbsp;<span class="ident" id="6052358">start</span>&nbsp;<span class="op" id="6052364">*</span><span class="ident" id="6052365">StartElement</span><span class="op" id="6052377">)</span>&nbsp;<span class="op" id="6052379">(</span><span class="ident" id="6052380">consumed</span>&nbsp;<span class="builtintype" id="6052389">bool</span><span class="op" id="6052393">,</span>&nbsp;<span class="ident" id="6052395">err</span>&nbsp;<span class="builtintype" id="6052399">error</span><span class="op" id="6052404">)</span>&nbsp;<span class="op" id="6052406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052409">recurse</span>&nbsp;<span class="op" id="6052417">:=</span>&nbsp;<span class="builtintype" id="6052420">false</span><br>
<span class="lineno"></span><span class="ident" id="6052426">Loop</span><span class="op" id="6052430">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052433">for</span>&nbsp;<span class="ident" id="6052437">i</span>&nbsp;<span class="op" id="6052439">:=</span>&nbsp;<span class="keyword" id="6052442">range</span>&nbsp;<span class="ident" id="6052448">tinfo</span><span class="op" id="6052453">.</span><span class="ident" id="6052454">fields</span>&nbsp;<span class="op" id="6052461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6052465">finfo</span>&nbsp;<span class="op" id="6052471">:=</span>&nbsp;<span class="op" id="6052474">&amp;</span><span class="ident" id="6052475">tinfo</span><span class="op" id="6052480">.</span><span class="ident" id="6052481">fields</span><span class="op" id="6052487">[</span><span class="ident" id="6052488">i</span><span class="op" id="6052489">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052493">if</span>&nbsp;<span class="ident" id="6052496">finfo</span><span class="op" id="6052501">.</span><span class="ident" id="6052502">flags</span><span class="op" id="6052507">&amp;</span><span class="ident" id="6052508">fElement</span>&nbsp;<span class="op" id="6052517">==</span>&nbsp;<span class="num" id="6052520">0</span>&nbsp;<span class="op" id="6052522">||</span>&nbsp;<span class="builtinfunc" id="6052525">len</span><span class="op" id="6052528">(</span><span class="ident" id="6052529">finfo</span><span class="op" id="6052534">.</span><span class="ident" id="6052535">parents</span><span class="op" id="6052542">)</span>&nbsp;<span class="op" id="6052544">&lt;</span>&nbsp;<span class="builtinfunc" id="6052546">len</span><span class="op" id="6052549">(</span><span class="ident" id="6052550">parents</span><span class="op" id="6052557">)</span>&nbsp;<span class="op" id="6052559">||</span>&nbsp;<span class="ident" id="6052562">finfo</span><span class="op" id="6052567">.</span><span class="ident" id="6052568">xmlns</span>&nbsp;<span class="op" id="6052574">!=</span>&nbsp;<span class="string" id="6052577">&#34;&#34;</span>&nbsp;<span class="op" id="6052580">&amp;&amp;</span>&nbsp;<span class="ident" id="6052583">finfo</span><span class="op" id="6052588">.</span><span class="ident" id="6052589">xmlns</span>&nbsp;<span class="op" id="6052595">!=</span>&nbsp;<span class="ident" id="6052598">start</span><span class="op" id="6052603">.</span><span class="ident" id="6052604">Name</span><span class="op" id="6052608">.</span><span class="ident" id="6052609">Space</span>&nbsp;<span class="op" id="6052615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052620">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052631">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052635">for</span>&nbsp;<span class="ident" id="6052639">j</span>&nbsp;<span class="op" id="6052641">:=</span>&nbsp;<span class="keyword" id="6052644">range</span>&nbsp;<span class="ident" id="6052650">parents</span>&nbsp;<span class="op" id="6052658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052663">if</span>&nbsp;<span class="ident" id="6052666">parents</span><span class="op" id="6052673">[</span><span class="ident" id="6052674">j</span><span class="op" id="6052675">]</span>&nbsp;<span class="op" id="6052677">!=</span>&nbsp;<span class="ident" id="6052680">finfo</span><span class="op" id="6052685">.</span><span class="ident" id="6052686">parents</span><span class="op" id="6052693">[</span><span class="ident" id="6052694">j</span><span class="op" id="6052695">]</span>&nbsp;<span class="op" id="6052697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052703">continue</span>&nbsp;<span class="ident" id="6052712">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052724">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052728">if</span>&nbsp;<span class="builtinfunc" id="6052731">len</span><span class="op" id="6052734">(</span><span class="ident" id="6052735">finfo</span><span class="op" id="6052740">.</span><span class="ident" id="6052741">parents</span><span class="op" id="6052748">)</span>&nbsp;<span class="op" id="6052750">==</span>&nbsp;<span class="builtinfunc" id="6052753">len</span><span class="op" id="6052756">(</span><span class="ident" id="6052757">parents</span><span class="op" id="6052764">)</span>&nbsp;<span class="op" id="6052766">&amp;&amp;</span>&nbsp;<span class="ident" id="6052769">finfo</span><span class="op" id="6052774">.</span><span class="ident" id="6052775">name</span>&nbsp;<span class="op" id="6052780">==</span>&nbsp;<span class="ident" id="6052783">start</span><span class="op" id="6052788">.</span><span class="ident" id="6052789">Name</span><span class="op" id="6052793">.</span><span class="ident" id="6052794">Local</span>&nbsp;<span class="op" id="6052800">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6052805">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052854">return</span>&nbsp;<span class="builtintype" id="6052861">true</span><span class="op" id="6052865">,</span>&nbsp;<span class="ident" id="6052867">p</span><span class="op" id="6052868">.</span><span class="ident" id="6052869">unmarshal</span><span class="op" id="6052878">(</span><span class="ident" id="6052879">finfo</span><span class="op" id="6052884">.</span><span class="ident" id="6052885">value</span><span class="op" id="6052890">(</span><span class="ident" id="6052891">sv</span><span class="op" id="6052893">)</span><span class="op" id="6052894">,</span>&nbsp;<span class="ident" id="6052896">start</span><span class="op" id="6052901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6052905">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6052909">if</span>&nbsp;<span class="builtinfunc" id="6052912">len</span><span class="op" id="6052915">(</span><span class="ident" id="6052916">finfo</span><span class="op" id="6052921">.</span><span class="ident" id="6052922">parents</span><span class="op" id="6052929">)</span>&nbsp;<span class="op" id="6052931">&gt;</span>&nbsp;<span class="builtinfunc" id="6052933">len</span><span class="op" id="6052936">(</span><span class="ident" id="6052937">parents</span><span class="op" id="6052944">)</span>&nbsp;<span class="op" id="6052946">&amp;&amp;</span>&nbsp;<span class="ident" id="6052949">finfo</span><span class="op" id="6052954">.</span><span class="ident" id="6052955">parents</span><span class="op" id="6052962">[</span><span class="builtinfunc" id="6052963">len</span><span class="op" id="6052966">(</span><span class="ident" id="6052967">parents</span><span class="op" id="6052974">)</span><span class="op" id="6052975">]</span>&nbsp;<span class="op" id="6052977">==</span>&nbsp;<span class="ident" id="6052980">start</span><span class="op" id="6052985">.</span><span class="ident" id="6052986">Name</span><span class="op" id="6052990">.</span><span class="ident" id="6052991">Local</span>&nbsp;<span class="op" id="6052997">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053002">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053055">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053111">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053152">recurse</span>&nbsp;<span class="op" id="6053160">=</span>&nbsp;<span class="builtintype" id="6053162">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053171">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053219">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053252">parents</span>&nbsp;<span class="op" id="6053260">=</span>&nbsp;<span class="ident" id="6053262">finfo</span><span class="op" id="6053267">.</span><span class="ident" id="6053268">parents</span><span class="op" id="6053275">[</span><span class="op" id="6053276">:</span><span class="builtinfunc" id="6053277">len</span><span class="op" id="6053280">(</span><span class="ident" id="6053281">parents</span><span class="op" id="6053288">)</span><span class="op" id="6053289">+</span><span class="num" id="6053290">1</span><span class="op" id="6053291">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053296">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053304">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053310">if</span>&nbsp;<span class="op" id="6053313">!</span><span class="ident" id="6053314">recurse</span>&nbsp;<span class="op" id="6053322">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053326">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053370">return</span>&nbsp;<span class="builtintype" id="6053377">false</span><span class="op" id="6053382">,</span>&nbsp;<span class="ident" id="6053384">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053389">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053392">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053454">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6053515">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053563">for</span>&nbsp;<span class="op" id="6053567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053571">var</span>&nbsp;<span class="ident" id="6053575">tok</span>&nbsp;<span class="ident" id="6053579">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053587">tok</span><span class="op" id="6053590">,</span>&nbsp;<span class="ident" id="6053592">err</span>&nbsp;<span class="op" id="6053596">=</span>&nbsp;<span class="ident" id="6053598">p</span><span class="op" id="6053599">.</span><span class="ident" id="6053600">Token</span><span class="op" id="6053605">(</span><span class="op" id="6053606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053610">if</span>&nbsp;<span class="ident" id="6053613">err</span>&nbsp;<span class="op" id="6053617">!=</span>&nbsp;<span class="ident" id="6053620">nil</span>&nbsp;<span class="op" id="6053624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053629">return</span>&nbsp;<span class="builtintype" id="6053636">true</span><span class="op" id="6053640">,</span>&nbsp;<span class="ident" id="6053642">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053652">switch</span>&nbsp;<span class="ident" id="6053659">t</span>&nbsp;<span class="op" id="6053661">:=</span>&nbsp;<span class="ident" id="6053664">tok</span><span class="op" id="6053667">.</span><span class="op" id="6053668">(</span><span class="keyword" id="6053669">type</span><span class="op" id="6053673">)</span>&nbsp;<span class="op" id="6053675">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053679">case</span>&nbsp;<span class="ident" id="6053684">StartElement</span><span class="op" id="6053696">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6053701">consumed2</span><span class="op" id="6053710">,</span>&nbsp;<span class="ident" id="6053712">err</span>&nbsp;<span class="op" id="6053716">:=</span>&nbsp;<span class="ident" id="6053719">p</span><span class="op" id="6053720">.</span><span class="ident" id="6053721">unmarshalPath</span><span class="op" id="6053734">(</span><span class="ident" id="6053735">tinfo</span><span class="op" id="6053740">,</span>&nbsp;<span class="ident" id="6053742">sv</span><span class="op" id="6053744">,</span>&nbsp;<span class="ident" id="6053746">parents</span><span class="op" id="6053753">,</span>&nbsp;<span class="op" id="6053755">&amp;</span><span class="ident" id="6053756">t</span><span class="op" id="6053757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053762">if</span>&nbsp;<span class="ident" id="6053765">err</span>&nbsp;<span class="op" id="6053769">!=</span>&nbsp;<span class="ident" id="6053772">nil</span>&nbsp;<span class="op" id="6053776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053782">return</span>&nbsp;<span class="builtintype" id="6053789">true</span><span class="op" id="6053793">,</span>&nbsp;<span class="ident" id="6053795">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053802">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053807">if</span>&nbsp;<span class="op" id="6053810">!</span><span class="ident" id="6053811">consumed2</span>&nbsp;<span class="op" id="6053821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053827">if</span>&nbsp;<span class="ident" id="6053830">err</span>&nbsp;<span class="op" id="6053834">:=</span>&nbsp;<span class="ident" id="6053837">p</span><span class="op" id="6053838">.</span><span class="ident" id="6053839">Skip</span><span class="op" id="6053843">(</span><span class="op" id="6053844">)</span><span class="op" id="6053845">;</span>&nbsp;<span class="ident" id="6053847">err</span>&nbsp;<span class="op" id="6053851">!=</span>&nbsp;<span class="ident" id="6053854">nil</span>&nbsp;<span class="op" id="6053858">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053865">return</span>&nbsp;<span class="builtintype" id="6053872">true</span><span class="op" id="6053876">,</span>&nbsp;<span class="ident" id="6053878">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053891">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053895">case</span>&nbsp;<span class="ident" id="6053900">EndElement</span><span class="op" id="6053910">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6053915">return</span>&nbsp;<span class="builtintype" id="6053922">true</span><span class="op" id="6053926">,</span>&nbsp;<span class="ident" id="6053928">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053934">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6053937">}</span><br>
<span class="lineno"></span><span class="op" id="6053939">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6053942">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6054001">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6054061">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6054129">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6054156">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6054220">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6054286">func</span>&nbsp;<span class="op" id="6054291">(</span><span class="ident" id="6054292">d</span>&nbsp;<span class="op" id="6054294">*</span><span class="ident" id="6054295">Decoder</span><span class="op" id="6054302">)</span>&nbsp;<span class="ident" id="6054304">Skip</span><span class="op" id="6054308">(</span><span class="op" id="6054309">)</span>&nbsp;<span class="builtintype" id="6054311">error</span>&nbsp;<span class="op" id="6054317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054320">for</span>&nbsp;<span class="op" id="6054324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6054328">tok</span><span class="op" id="6054331">,</span>&nbsp;<span class="ident" id="6054333">err</span>&nbsp;<span class="op" id="6054337">:=</span>&nbsp;<span class="ident" id="6054340">d</span><span class="op" id="6054341">.</span><span class="ident" id="6054342">Token</span><span class="op" id="6054347">(</span><span class="op" id="6054348">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054352">if</span>&nbsp;<span class="ident" id="6054355">err</span>&nbsp;<span class="op" id="6054359">!=</span>&nbsp;<span class="ident" id="6054362">nil</span>&nbsp;<span class="op" id="6054366">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054371">return</span>&nbsp;<span class="ident" id="6054378">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054384">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054388">switch</span>&nbsp;<span class="ident" id="6054395">tok</span><span class="op" id="6054398">.</span><span class="op" id="6054399">(</span><span class="keyword" id="6054400">type</span><span class="op" id="6054404">)</span>&nbsp;<span class="op" id="6054406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054410">case</span>&nbsp;<span class="ident" id="6054415">StartElement</span><span class="op" id="6054427">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054432">if</span>&nbsp;<span class="ident" id="6054435">err</span>&nbsp;<span class="op" id="6054439">:=</span>&nbsp;<span class="ident" id="6054442">d</span><span class="op" id="6054443">.</span><span class="ident" id="6054444">Skip</span><span class="op" id="6054448">(</span><span class="op" id="6054449">)</span><span class="op" id="6054450">;</span>&nbsp;<span class="ident" id="6054452">err</span>&nbsp;<span class="op" id="6054456">!=</span>&nbsp;<span class="ident" id="6054459">nil</span>&nbsp;<span class="op" id="6054463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054469">return</span>&nbsp;<span class="ident" id="6054476">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054483">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054487">case</span>&nbsp;<span class="ident" id="6054492">EndElement</span><span class="op" id="6054502">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6054507">return</span>&nbsp;<span class="ident" id="6054514">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6054523">}</span><br>
<span class="lineno"></span><span class="op" id="6054525">}</span>
</div>
</body>
</html>
