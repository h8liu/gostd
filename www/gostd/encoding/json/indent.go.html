<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/json</h2>
<ul>
<li><a href="/gostd/encoding/json/bench_test.go.html">bench_test.go</a></li>
<li><a href="/gostd/encoding/json/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/json/decode_test.go.html">decode_test.go</a></li>
<li><a href="/gostd/encoding/json/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/json/encode_test.go.html">encode_test.go</a></li>
<li><a href="/gostd/encoding/json/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/json/fold.go.html">fold.go</a></li>
<li><a href="/gostd/encoding/json/fold_test.go.html">fold_test.go</a></li>
<li><a href="/gostd/encoding/json/indent.go.html" class="current">indent.go</a></li>
<li><a href="/gostd/encoding/json/scanner.go.html">scanner.go</a></li>
<li><a href="/gostd/encoding/json/scanner_test.go.html">scanner_test.go</a></li>
<li><a href="/gostd/encoding/json/stream.go.html">stream.go</a></li>
<li><a href="/gostd/encoding/json/stream_test.go.html">stream_test.go</a></li>
<li><a href="/gostd/encoding/json/tagkey_test.go.html">tagkey_test.go</a></li>
<li><a href="/gostd/encoding/json/tags.go.html">tags.go</a></li>
<li><a href="/gostd/encoding/json/tags_test.go.html">tags_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3749780">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3749836">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3749890">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3749941">package</span>&nbsp;<span class="ident" id="3749949">json</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3749955">import</span>&nbsp;<span class="string" id="3749962">&#34;bytes&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3749971">//&nbsp;Compact&nbsp;appends&nbsp;to&nbsp;dst&nbsp;the&nbsp;JSON-encoded&nbsp;src&nbsp;with</span><br>
<span class="lineno">10</span><span class="comment" id="3750023">//&nbsp;insignificant&nbsp;space&nbsp;characters&nbsp;elided.</span><br>
<span class="lineno"></span><span class="keyword" id="3750065">func</span>&nbsp;<span class="ident" id="3750070">Compact</span><span class="op" id="3750077">(</span><span class="ident" id="3750078">dst</span>&nbsp;<span class="op" id="3750082">*</span><span class="ident" id="3750083">bytes</span><span class="op" id="3750088">.</span><span class="ident" id="3750089">Buffer</span><span class="op" id="3750095">,</span>&nbsp;<span class="ident" id="3750097">src</span>&nbsp;<span class="op" id="3750101">[</span><span class="op" id="3750102">]</span><span class="builtintype" id="3750103">byte</span><span class="op" id="3750107">)</span>&nbsp;<span class="builtintype" id="3750109">error</span>&nbsp;<span class="op" id="3750115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750118">return</span>&nbsp;<span class="ident" id="3750125">compact</span><span class="op" id="3750132">(</span><span class="ident" id="3750133">dst</span><span class="op" id="3750136">,</span>&nbsp;<span class="ident" id="3750138">src</span><span class="op" id="3750141">,</span>&nbsp;<span class="builtintype" id="3750143">false</span><span class="op" id="3750148">)</span><br>
<span class="lineno"></span><span class="op" id="3750150">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3750153">func</span>&nbsp;<span class="ident" id="3750158">compact</span><span class="op" id="3750165">(</span><span class="ident" id="3750166">dst</span>&nbsp;<span class="op" id="3750170">*</span><span class="ident" id="3750171">bytes</span><span class="op" id="3750176">.</span><span class="ident" id="3750177">Buffer</span><span class="op" id="3750183">,</span>&nbsp;<span class="ident" id="3750185">src</span>&nbsp;<span class="op" id="3750189">[</span><span class="op" id="3750190">]</span><span class="builtintype" id="3750191">byte</span><span class="op" id="3750195">,</span>&nbsp;<span class="ident" id="3750197">escape</span>&nbsp;<span class="builtintype" id="3750204">bool</span><span class="op" id="3750208">)</span>&nbsp;<span class="builtintype" id="3750210">error</span>&nbsp;<span class="op" id="3750216">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750219">origLen</span>&nbsp;<span class="op" id="3750227">:=</span>&nbsp;<span class="ident" id="3750230">dst</span><span class="op" id="3750233">.</span><span class="ident" id="3750234">Len</span><span class="op" id="3750237">(</span><span class="op" id="3750238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750241">var</span>&nbsp;<span class="ident" id="3750245">scan</span>&nbsp;<span class="ident" id="3750250">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750259">scan</span><span class="op" id="3750263">.</span><span class="ident" id="3750264">reset</span><span class="op" id="3750269">(</span><span class="op" id="3750270">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750273">start</span>&nbsp;<span class="op" id="3750279">:=</span>&nbsp;<span class="num" id="3750282">0</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750285">for</span>&nbsp;<span class="ident" id="3750289">i</span><span class="op" id="3750290">,</span>&nbsp;<span class="ident" id="3750292">c</span>&nbsp;<span class="op" id="3750294">:=</span>&nbsp;<span class="keyword" id="3750297">range</span>&nbsp;<span class="ident" id="3750303">src</span>&nbsp;<span class="op" id="3750307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750311">if</span>&nbsp;<span class="ident" id="3750314">escape</span>&nbsp;<span class="op" id="3750321">&amp;&amp;</span>&nbsp;<span class="op" id="3750324">(</span><span class="ident" id="3750325">c</span>&nbsp;<span class="op" id="3750327">==</span>&nbsp;<span class="string" id="3750330">&#39;&lt;&#39;</span>&nbsp;<span class="op" id="3750334">||</span>&nbsp;<span class="ident" id="3750337">c</span>&nbsp;<span class="op" id="3750339">==</span>&nbsp;<span class="string" id="3750342">&#39;&gt;&#39;</span>&nbsp;<span class="op" id="3750346">||</span>&nbsp;<span class="ident" id="3750349">c</span>&nbsp;<span class="op" id="3750351">==</span>&nbsp;<span class="string" id="3750354">&#39;&amp;&#39;</span><span class="op" id="3750357">)</span>&nbsp;<span class="op" id="3750359">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750364">if</span>&nbsp;<span class="ident" id="3750367">start</span>&nbsp;<span class="op" id="3750373">&lt;</span>&nbsp;<span class="ident" id="3750375">i</span>&nbsp;<span class="op" id="3750377">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750383">dst</span><span class="op" id="3750386">.</span><span class="ident" id="3750387">Write</span><span class="op" id="3750392">(</span><span class="ident" id="3750393">src</span><span class="op" id="3750396">[</span><span class="ident" id="3750397">start</span><span class="op" id="3750402">:</span><span class="ident" id="3750403">i</span><span class="op" id="3750404">]</span><span class="op" id="3750405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750410">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750415">dst</span><span class="op" id="3750418">.</span><span class="ident" id="3750419">WriteString</span><span class="op" id="3750430">(</span><span class="string" id="3750431">`\u00`</span><span class="op" id="3750437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750442">dst</span><span class="op" id="3750445">.</span><span class="ident" id="3750446">WriteByte</span><span class="op" id="3750455">(</span><span class="ident" id="3750456">hex</span><span class="op" id="3750459">[</span><span class="ident" id="3750460">c</span><span class="op" id="3750461">&gt;&gt;</span><span class="num" id="3750463">4</span><span class="op" id="3750464">]</span><span class="op" id="3750465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750470">dst</span><span class="op" id="3750473">.</span><span class="ident" id="3750474">WriteByte</span><span class="op" id="3750483">(</span><span class="ident" id="3750484">hex</span><span class="op" id="3750487">[</span><span class="ident" id="3750488">c</span><span class="op" id="3750489">&amp;</span><span class="num" id="3750490">0xF</span><span class="op" id="3750493">]</span><span class="op" id="3750494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750499">start</span>&nbsp;<span class="op" id="3750505">=</span>&nbsp;<span class="ident" id="3750507">i</span>&nbsp;<span class="op" id="3750509">+</span>&nbsp;<span class="num" id="3750511">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750515">}</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3750519">//&nbsp;Convert&nbsp;U+2028&nbsp;and&nbsp;U+2029&nbsp;(E2&nbsp;80&nbsp;A8&nbsp;and&nbsp;E2&nbsp;80&nbsp;A9).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750575">if</span>&nbsp;<span class="ident" id="3750578">c</span>&nbsp;<span class="op" id="3750580">==</span>&nbsp;<span class="num" id="3750583">0xE2</span>&nbsp;<span class="op" id="3750588">&amp;&amp;</span>&nbsp;<span class="ident" id="3750591">i</span><span class="op" id="3750592">+</span><span class="num" id="3750593">2</span>&nbsp;<span class="op" id="3750595">&lt;</span>&nbsp;<span class="builtinfunc" id="3750597">len</span><span class="op" id="3750600">(</span><span class="ident" id="3750601">src</span><span class="op" id="3750604">)</span>&nbsp;<span class="op" id="3750606">&amp;&amp;</span>&nbsp;<span class="ident" id="3750609">src</span><span class="op" id="3750612">[</span><span class="ident" id="3750613">i</span><span class="op" id="3750614">+</span><span class="num" id="3750615">1</span><span class="op" id="3750616">]</span>&nbsp;<span class="op" id="3750618">==</span>&nbsp;<span class="num" id="3750621">0x80</span>&nbsp;<span class="op" id="3750626">&amp;&amp;</span>&nbsp;<span class="ident" id="3750629">src</span><span class="op" id="3750632">[</span><span class="ident" id="3750633">i</span><span class="op" id="3750634">+</span><span class="num" id="3750635">2</span><span class="op" id="3750636">]</span><span class="op" id="3750637">&amp;^</span><span class="num" id="3750639">1</span>&nbsp;<span class="op" id="3750641">==</span>&nbsp;<span class="num" id="3750644">0xA8</span>&nbsp;<span class="op" id="3750649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750654">if</span>&nbsp;<span class="ident" id="3750657">start</span>&nbsp;<span class="op" id="3750663">&lt;</span>&nbsp;<span class="ident" id="3750665">i</span>&nbsp;<span class="op" id="3750667">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750673">dst</span><span class="op" id="3750676">.</span><span class="ident" id="3750677">Write</span><span class="op" id="3750682">(</span><span class="ident" id="3750683">src</span><span class="op" id="3750686">[</span><span class="ident" id="3750687">start</span><span class="op" id="3750692">:</span><span class="ident" id="3750693">i</span><span class="op" id="3750694">]</span><span class="op" id="3750695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750700">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750705">dst</span><span class="op" id="3750708">.</span><span class="ident" id="3750709">WriteString</span><span class="op" id="3750720">(</span><span class="string" id="3750721">`\u202`</span><span class="op" id="3750728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750733">dst</span><span class="op" id="3750736">.</span><span class="ident" id="3750737">WriteByte</span><span class="op" id="3750746">(</span><span class="ident" id="3750747">hex</span><span class="op" id="3750750">[</span><span class="ident" id="3750751">src</span><span class="op" id="3750754">[</span><span class="ident" id="3750755">i</span><span class="op" id="3750756">+</span><span class="num" id="3750757">2</span><span class="op" id="3750758">]</span><span class="op" id="3750759">&amp;</span><span class="num" id="3750760">0xF</span><span class="op" id="3750763">]</span><span class="op" id="3750764">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750769">start</span>&nbsp;<span class="op" id="3750775">=</span>&nbsp;<span class="ident" id="3750777">i</span>&nbsp;<span class="op" id="3750779">+</span>&nbsp;<span class="num" id="3750781">3</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750785">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750789">v</span>&nbsp;<span class="op" id="3750791">:=</span>&nbsp;<span class="ident" id="3750794">scan</span><span class="op" id="3750798">.</span><span class="ident" id="3750799">step</span><span class="op" id="3750803">(</span><span class="op" id="3750804">&amp;</span><span class="ident" id="3750805">scan</span><span class="op" id="3750809">,</span>&nbsp;<span class="builtintype" id="3750811">int</span><span class="op" id="3750814">(</span><span class="ident" id="3750815">c</span><span class="op" id="3750816">)</span><span class="op" id="3750817">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750821">if</span>&nbsp;<span class="ident" id="3750824">v</span>&nbsp;<span class="op" id="3750826">&gt;=</span>&nbsp;<span class="ident" id="3750829">scanSkipSpace</span>&nbsp;<span class="op" id="3750843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750848">if</span>&nbsp;<span class="ident" id="3750851">v</span>&nbsp;<span class="op" id="3750853">==</span>&nbsp;<span class="ident" id="3750856">scanError</span>&nbsp;<span class="op" id="3750866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750872">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750886">if</span>&nbsp;<span class="ident" id="3750889">start</span>&nbsp;<span class="op" id="3750895">&lt;</span>&nbsp;<span class="ident" id="3750897">i</span>&nbsp;<span class="op" id="3750899">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750905">dst</span><span class="op" id="3750908">.</span><span class="ident" id="3750909">Write</span><span class="op" id="3750914">(</span><span class="ident" id="3750915">src</span><span class="op" id="3750918">[</span><span class="ident" id="3750919">start</span><span class="op" id="3750924">:</span><span class="ident" id="3750925">i</span><span class="op" id="3750926">]</span><span class="op" id="3750927">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750937">start</span>&nbsp;<span class="op" id="3750943">=</span>&nbsp;<span class="ident" id="3750945">i</span>&nbsp;<span class="op" id="3750947">+</span>&nbsp;<span class="num" id="3750949">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750953">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3750956">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3750959">if</span>&nbsp;<span class="ident" id="3750962">scan</span><span class="op" id="3750966">.</span><span class="ident" id="3750967">eof</span><span class="op" id="3750970">(</span><span class="op" id="3750971">)</span>&nbsp;<span class="op" id="3750973">==</span>&nbsp;<span class="ident" id="3750976">scanError</span>&nbsp;<span class="op" id="3750986">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3750990">dst</span><span class="op" id="3750993">.</span><span class="ident" id="3750994">Truncate</span><span class="op" id="3751002">(</span><span class="ident" id="3751003">origLen</span><span class="op" id="3751010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751014">return</span>&nbsp;<span class="ident" id="3751021">scan</span><span class="op" id="3751025">.</span><span class="ident" id="3751026">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3751031">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751034">if</span>&nbsp;<span class="ident" id="3751037">start</span>&nbsp;<span class="op" id="3751043">&lt;</span>&nbsp;<span class="builtinfunc" id="3751045">len</span><span class="op" id="3751048">(</span><span class="ident" id="3751049">src</span><span class="op" id="3751052">)</span>&nbsp;<span class="op" id="3751054">{</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751058">dst</span><span class="op" id="3751061">.</span><span class="ident" id="3751062">Write</span><span class="op" id="3751067">(</span><span class="ident" id="3751068">src</span><span class="op" id="3751071">[</span><span class="ident" id="3751072">start</span><span class="op" id="3751077">:</span><span class="op" id="3751078">]</span><span class="op" id="3751079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3751082">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751085">return</span>&nbsp;<span class="ident" id="3751092">nil</span><br>
<span class="lineno"></span><span class="op" id="3751096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span><span class="keyword" id="3751099">func</span>&nbsp;<span class="ident" id="3751104">newline</span><span class="op" id="3751111">(</span><span class="ident" id="3751112">dst</span>&nbsp;<span class="op" id="3751116">*</span><span class="ident" id="3751117">bytes</span><span class="op" id="3751122">.</span><span class="ident" id="3751123">Buffer</span><span class="op" id="3751129">,</span>&nbsp;<span class="ident" id="3751131">prefix</span><span class="op" id="3751137">,</span>&nbsp;<span class="ident" id="3751139">indent</span>&nbsp;<span class="builtintype" id="3751146">string</span><span class="op" id="3751152">,</span>&nbsp;<span class="ident" id="3751154">depth</span>&nbsp;<span class="builtintype" id="3751160">int</span><span class="op" id="3751163">)</span>&nbsp;<span class="op" id="3751165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751168">dst</span><span class="op" id="3751171">.</span><span class="ident" id="3751172">WriteByte</span><span class="op" id="3751181">(</span><span class="string" id="3751182">&#39;\n&#39;</span><span class="op" id="3751186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751189">dst</span><span class="op" id="3751192">.</span><span class="ident" id="3751193">WriteString</span><span class="op" id="3751204">(</span><span class="ident" id="3751205">prefix</span><span class="op" id="3751211">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751214">for</span>&nbsp;<span class="ident" id="3751218">i</span>&nbsp;<span class="op" id="3751220">:=</span>&nbsp;<span class="num" id="3751223">0</span><span class="op" id="3751224">;</span>&nbsp;<span class="ident" id="3751226">i</span>&nbsp;<span class="op" id="3751228">&lt;</span>&nbsp;<span class="ident" id="3751230">depth</span><span class="op" id="3751235">;</span>&nbsp;<span class="ident" id="3751237">i</span><span class="op" id="3751238">++</span>&nbsp;<span class="op" id="3751241">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751245">dst</span><span class="op" id="3751248">.</span><span class="ident" id="3751249">WriteString</span><span class="op" id="3751260">(</span><span class="ident" id="3751261">indent</span><span class="op" id="3751267">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3751270">}</span><br>
<span class="lineno"></span><span class="op" id="3751272">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3751275">//&nbsp;Indent&nbsp;appends&nbsp;to&nbsp;dst&nbsp;an&nbsp;indented&nbsp;form&nbsp;of&nbsp;the&nbsp;JSON-encoded&nbsp;src.</span><br>
<span class="lineno"></span><span class="comment" id="3751342">//&nbsp;Each&nbsp;element&nbsp;in&nbsp;a&nbsp;JSON&nbsp;object&nbsp;or&nbsp;array&nbsp;begins&nbsp;on&nbsp;a&nbsp;new,</span><br>
<span class="lineno">70</span><span class="comment" id="3751401">//&nbsp;indented&nbsp;line&nbsp;beginning&nbsp;with&nbsp;prefix&nbsp;followed&nbsp;by&nbsp;one&nbsp;or&nbsp;more</span><br>
<span class="lineno"></span><span class="comment" id="3751464">//&nbsp;copies&nbsp;of&nbsp;indent&nbsp;according&nbsp;to&nbsp;the&nbsp;indentation&nbsp;nesting.</span><br>
<span class="lineno"></span><span class="comment" id="3751522">//&nbsp;The&nbsp;data&nbsp;appended&nbsp;to&nbsp;dst&nbsp;does&nbsp;not&nbsp;begin&nbsp;with&nbsp;the&nbsp;prefix&nbsp;nor</span><br>
<span class="lineno"></span><span class="comment" id="3751585">//&nbsp;any&nbsp;indentation,&nbsp;and&nbsp;has&nbsp;no&nbsp;trailing&nbsp;newline,&nbsp;to&nbsp;make&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="3751645">//&nbsp;easier&nbsp;to&nbsp;embed&nbsp;inside&nbsp;other&nbsp;formatted&nbsp;JSON&nbsp;data.</span><br>
<span class="lineno">75</span><span class="keyword" id="3751698">func</span>&nbsp;<span class="ident" id="3751703">Indent</span><span class="op" id="3751709">(</span><span class="ident" id="3751710">dst</span>&nbsp;<span class="op" id="3751714">*</span><span class="ident" id="3751715">bytes</span><span class="op" id="3751720">.</span><span class="ident" id="3751721">Buffer</span><span class="op" id="3751727">,</span>&nbsp;<span class="ident" id="3751729">src</span>&nbsp;<span class="op" id="3751733">[</span><span class="op" id="3751734">]</span><span class="builtintype" id="3751735">byte</span><span class="op" id="3751739">,</span>&nbsp;<span class="ident" id="3751741">prefix</span><span class="op" id="3751747">,</span>&nbsp;<span class="ident" id="3751749">indent</span>&nbsp;<span class="builtintype" id="3751756">string</span><span class="op" id="3751762">)</span>&nbsp;<span class="builtintype" id="3751764">error</span>&nbsp;<span class="op" id="3751770">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751773">origLen</span>&nbsp;<span class="op" id="3751781">:=</span>&nbsp;<span class="ident" id="3751784">dst</span><span class="op" id="3751787">.</span><span class="ident" id="3751788">Len</span><span class="op" id="3751791">(</span><span class="op" id="3751792">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751795">var</span>&nbsp;<span class="ident" id="3751799">scan</span>&nbsp;<span class="ident" id="3751804">scanner</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751813">scan</span><span class="op" id="3751817">.</span><span class="ident" id="3751818">reset</span><span class="op" id="3751823">(</span><span class="op" id="3751824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751827">needIndent</span>&nbsp;<span class="op" id="3751838">:=</span>&nbsp;<span class="builtintype" id="3751841">false</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751848">depth</span>&nbsp;<span class="op" id="3751854">:=</span>&nbsp;<span class="num" id="3751857">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751860">for</span>&nbsp;<span class="ident" id="3751864">_</span><span class="op" id="3751865">,</span>&nbsp;<span class="ident" id="3751867">c</span>&nbsp;<span class="op" id="3751869">:=</span>&nbsp;<span class="keyword" id="3751872">range</span>&nbsp;<span class="ident" id="3751878">src</span>&nbsp;<span class="op" id="3751882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751886">scan</span><span class="op" id="3751890">.</span><span class="ident" id="3751891">bytes</span><span class="op" id="3751896">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3751901">v</span>&nbsp;<span class="op" id="3751903">:=</span>&nbsp;<span class="ident" id="3751906">scan</span><span class="op" id="3751910">.</span><span class="ident" id="3751911">step</span><span class="op" id="3751915">(</span><span class="op" id="3751916">&amp;</span><span class="ident" id="3751917">scan</span><span class="op" id="3751921">,</span>&nbsp;<span class="builtintype" id="3751923">int</span><span class="op" id="3751926">(</span><span class="ident" id="3751927">c</span><span class="op" id="3751928">)</span><span class="op" id="3751929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751933">if</span>&nbsp;<span class="ident" id="3751936">v</span>&nbsp;<span class="op" id="3751938">==</span>&nbsp;<span class="ident" id="3751941">scanSkipSpace</span>&nbsp;<span class="op" id="3751955">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751960">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3751971">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751975">if</span>&nbsp;<span class="ident" id="3751978">v</span>&nbsp;<span class="op" id="3751980">==</span>&nbsp;<span class="ident" id="3751983">scanError</span>&nbsp;<span class="op" id="3751993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3751998">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752006">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752010">if</span>&nbsp;<span class="ident" id="3752013">needIndent</span>&nbsp;<span class="op" id="3752024">&amp;&amp;</span>&nbsp;<span class="ident" id="3752027">v</span>&nbsp;<span class="op" id="3752029">!=</span>&nbsp;<span class="ident" id="3752032">scanEndObject</span>&nbsp;<span class="op" id="3752046">&amp;&amp;</span>&nbsp;<span class="ident" id="3752049">v</span>&nbsp;<span class="op" id="3752051">!=</span>&nbsp;<span class="ident" id="3752054">scanEndArray</span>&nbsp;<span class="op" id="3752067">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752072">needIndent</span>&nbsp;<span class="op" id="3752083">=</span>&nbsp;<span class="builtintype" id="3752085">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752094">depth</span><span class="op" id="3752099">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752105">newline</span><span class="op" id="3752112">(</span><span class="ident" id="3752113">dst</span><span class="op" id="3752116">,</span>&nbsp;<span class="ident" id="3752118">prefix</span><span class="op" id="3752124">,</span>&nbsp;<span class="ident" id="3752126">indent</span><span class="op" id="3752132">,</span>&nbsp;<span class="ident" id="3752134">depth</span><span class="op" id="3752139">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752143">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3752148">//&nbsp;Emit&nbsp;semantically&nbsp;uninteresting&nbsp;bytes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3752191">//&nbsp;(in&nbsp;particular,&nbsp;punctuation&nbsp;in&nbsp;strings)&nbsp;unmodified.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752248">if</span>&nbsp;<span class="ident" id="3752251">v</span>&nbsp;<span class="op" id="3752253">==</span>&nbsp;<span class="ident" id="3752256">scanContinue</span>&nbsp;<span class="op" id="3752269">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752274">dst</span><span class="op" id="3752277">.</span><span class="ident" id="3752278">WriteByte</span><span class="op" id="3752287">(</span><span class="ident" id="3752288">c</span><span class="op" id="3752289">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752294">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752305">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3752310">//&nbsp;Add&nbsp;spacing&nbsp;around&nbsp;real&nbsp;punctuation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752352">switch</span>&nbsp;<span class="ident" id="3752359">c</span>&nbsp;<span class="op" id="3752361">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752365">case</span>&nbsp;<span class="string" id="3752370">&#39;{&#39;</span><span class="op" id="3752373">,</span>&nbsp;<span class="string" id="3752375">&#39;[&#39;</span><span class="op" id="3752378">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3752383">//&nbsp;delay&nbsp;indent&nbsp;so&nbsp;that&nbsp;empty&nbsp;object&nbsp;and&nbsp;array&nbsp;are&nbsp;formatted&nbsp;as&nbsp;{}&nbsp;and&nbsp;[].</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752461">needIndent</span>&nbsp;<span class="op" id="3752472">=</span>&nbsp;<span class="builtintype" id="3752474">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752482">dst</span><span class="op" id="3752485">.</span><span class="ident" id="3752486">WriteByte</span><span class="op" id="3752495">(</span><span class="ident" id="3752496">c</span><span class="op" id="3752497">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752502">case</span>&nbsp;<span class="string" id="3752507">&#39;,&#39;</span><span class="op" id="3752510">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752515">dst</span><span class="op" id="3752518">.</span><span class="ident" id="3752519">WriteByte</span><span class="op" id="3752528">(</span><span class="ident" id="3752529">c</span><span class="op" id="3752530">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752535">newline</span><span class="op" id="3752542">(</span><span class="ident" id="3752543">dst</span><span class="op" id="3752546">,</span>&nbsp;<span class="ident" id="3752548">prefix</span><span class="op" id="3752554">,</span>&nbsp;<span class="ident" id="3752556">indent</span><span class="op" id="3752562">,</span>&nbsp;<span class="ident" id="3752564">depth</span><span class="op" id="3752569">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752574">case</span>&nbsp;<span class="string" id="3752579">&#39;:&#39;</span><span class="op" id="3752582">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752587">dst</span><span class="op" id="3752590">.</span><span class="ident" id="3752591">WriteByte</span><span class="op" id="3752600">(</span><span class="ident" id="3752601">c</span><span class="op" id="3752602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752607">dst</span><span class="op" id="3752610">.</span><span class="ident" id="3752611">WriteByte</span><span class="op" id="3752620">(</span><span class="string" id="3752621">&#39;&nbsp;&#39;</span><span class="op" id="3752624">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752629">case</span>&nbsp;<span class="string" id="3752634">&#39;}&#39;</span><span class="op" id="3752637">,</span>&nbsp;<span class="string" id="3752639">&#39;]&#39;</span><span class="op" id="3752642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752647">if</span>&nbsp;<span class="ident" id="3752650">needIndent</span>&nbsp;<span class="op" id="3752661">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3752667">//&nbsp;suppress&nbsp;indent&nbsp;in&nbsp;empty&nbsp;object/array</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752712">needIndent</span>&nbsp;<span class="op" id="3752723">=</span>&nbsp;<span class="builtintype" id="3752725">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752734">}</span>&nbsp;<span class="keyword" id="3752736">else</span>&nbsp;<span class="op" id="3752741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752747">depth</span><span class="op" id="3752752">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752759">newline</span><span class="op" id="3752766">(</span><span class="ident" id="3752767">dst</span><span class="op" id="3752770">,</span>&nbsp;<span class="ident" id="3752772">prefix</span><span class="op" id="3752778">,</span>&nbsp;<span class="ident" id="3752780">indent</span><span class="op" id="3752786">,</span>&nbsp;<span class="ident" id="3752788">depth</span><span class="op" id="3752793">)</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752798">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752803">dst</span><span class="op" id="3752806">.</span><span class="ident" id="3752807">WriteByte</span><span class="op" id="3752816">(</span><span class="ident" id="3752817">c</span><span class="op" id="3752818">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752823">default</span><span class="op" id="3752830">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752835">dst</span><span class="op" id="3752838">.</span><span class="ident" id="3752839">WriteByte</span><span class="op" id="3752848">(</span><span class="ident" id="3752849">c</span><span class="op" id="3752850">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752854">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752857">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752860">if</span>&nbsp;<span class="ident" id="3752863">scan</span><span class="op" id="3752867">.</span><span class="ident" id="3752868">eof</span><span class="op" id="3752871">(</span><span class="op" id="3752872">)</span>&nbsp;<span class="op" id="3752874">==</span>&nbsp;<span class="ident" id="3752877">scanError</span>&nbsp;<span class="op" id="3752887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3752891">dst</span><span class="op" id="3752894">.</span><span class="ident" id="3752895">Truncate</span><span class="op" id="3752903">(</span><span class="ident" id="3752904">origLen</span><span class="op" id="3752911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752915">return</span>&nbsp;<span class="ident" id="3752922">scan</span><span class="op" id="3752926">.</span><span class="ident" id="3752927">err</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3752932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3752935">return</span>&nbsp;<span class="ident" id="3752942">nil</span><br>
<span class="lineno"></span><span class="op" id="3752946">}</span>
</div>
</body>
</html>
