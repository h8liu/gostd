<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html" class="current">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8200747">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8200803">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8200857">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8200908">package</span>&nbsp;<span class="ident" id="8200916">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8200922">import</span>&nbsp;<span class="op" id="8200929">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200932">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200941">&#34;bytes&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200950">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200957">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200963">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200974">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200985">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8200996">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8201006">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8201009">type</span>&nbsp;<span class="ident" id="8201014">reqTest</span>&nbsp;<span class="keyword" id="8201022">struct</span>&nbsp;<span class="op" id="8201029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201032">Raw</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8201040">string</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201048">Req</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201056">*</span><span class="ident" id="8201057">Request</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201066">Body</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8201074">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201082">Trailer</span>&nbsp;<span class="ident" id="8201090">Header</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201098">Error</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8201106">string</span><br>
<span class="lineno"></span><span class="op" id="8201113">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8201116">var</span>&nbsp;<span class="ident" id="8201120">noError</span>&nbsp;<span class="op" id="8201128">=</span>&nbsp;<span class="string" id="8201130">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8201133">var</span>&nbsp;<span class="ident" id="8201137">noBody</span>&nbsp;<span class="op" id="8201144">=</span>&nbsp;<span class="string" id="8201146">&#34;&#34;</span><br>
<span class="lineno"></span><span class="keyword" id="8201149">var</span>&nbsp;<span class="ident" id="8201153">noTrailer</span>&nbsp;<span class="ident" id="8201163">Header</span>&nbsp;<span class="op" id="8201170">=</span>&nbsp;<span class="ident" id="8201172">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8201177">var</span>&nbsp;<span class="ident" id="8201181">reqTests</span>&nbsp;<span class="op" id="8201190">=</span>&nbsp;<span class="op" id="8201192">[</span><span class="op" id="8201193">]</span><span class="ident" id="8201194">reqTest</span><span class="op" id="8201201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8201204">//&nbsp;Baseline&nbsp;test;&nbsp;All&nbsp;Request&nbsp;fields&nbsp;included&nbsp;for&nbsp;template&nbsp;use</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201268">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201272">&#34;GET&nbsp;http://www.techcrunch.com/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8201318">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201323">&#34;Host:&nbsp;www.techcrunch.com\r\n&#34;</span>&nbsp;<span class="op" id="8201354">+</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201359">&#34;User-Agent:&nbsp;Fake\r\n&#34;</span>&nbsp;<span class="op" id="8201382">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201387">&#34;Accept:&nbsp;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\n&#34;</span>&nbsp;<span class="op" id="8201465">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201470">&#34;Accept-Language:&nbsp;en-us,en;q=0.5\r\n&#34;</span>&nbsp;<span class="op" id="8201508">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201513">&#34;Accept-Encoding:&nbsp;gzip,deflate\r\n&#34;</span>&nbsp;<span class="op" id="8201549">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201554">&#34;Accept-Charset:&nbsp;ISO-8859-1,utf-8;q=0.7,*;q=0.7\r\n&#34;</span>&nbsp;<span class="op" id="8201607">+</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201612">&#34;Keep-Alive:&nbsp;300\r\n&#34;</span>&nbsp;<span class="op" id="8201634">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201639">&#34;Content-Length:&nbsp;7\r\n&#34;</span>&nbsp;<span class="op" id="8201663">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201668">&#34;Proxy-Connection:&nbsp;keep-alive\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8201707">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201712">&#34;abcdef\n???&#34;</span><span class="op" id="8201725">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201730">&amp;</span><span class="ident" id="8201731">Request</span><span class="op" id="8201738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201743">Method</span><span class="op" id="8201749">:</span>&nbsp;<span class="string" id="8201751">&#34;GET&#34;</span><span class="op" id="8201756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201761">URL</span><span class="op" id="8201764">:</span>&nbsp;<span class="op" id="8201766">&amp;</span><span class="ident" id="8201767">url</span><span class="op" id="8201770">.</span><span class="ident" id="8201771">URL</span><span class="op" id="8201774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201780">Scheme</span><span class="op" id="8201786">:</span>&nbsp;<span class="string" id="8201788">&#34;http&#34;</span><span class="op" id="8201794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201800">Host</span><span class="op" id="8201804">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8201808">&#34;www.techcrunch.com&#34;</span><span class="op" id="8201828">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201834">Path</span><span class="op" id="8201838">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="8201842">&#34;/&#34;</span><span class="op" id="8201845">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8201850">}</span><span class="op" id="8201851">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201856">Proto</span><span class="op" id="8201861">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8201868">&#34;HTTP/1.1&#34;</span><span class="op" id="8201878">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201883">ProtoMajor</span><span class="op" id="8201893">:</span>&nbsp;<span class="num" id="8201895">1</span><span class="op" id="8201896">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201901">ProtoMinor</span><span class="op" id="8201911">:</span>&nbsp;<span class="num" id="8201913">1</span><span class="op" id="8201914">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8201919">Header</span><span class="op" id="8201925">:</span>&nbsp;<span class="ident" id="8201927">Header</span><span class="op" id="8201933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8201939">&#34;Accept&#34;</span><span class="op" id="8201947">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8201959">{</span><span class="string" id="8201960">&#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#34;</span><span class="op" id="8202025">}</span><span class="op" id="8202026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202032">&#34;Accept-Language&#34;</span><span class="op" id="8202049">:</span>&nbsp;&nbsp;<span class="op" id="8202052">{</span><span class="string" id="8202053">&#34;en-us,en;q=0.5&#34;</span><span class="op" id="8202069">}</span><span class="op" id="8202070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202076">&#34;Accept-Encoding&#34;</span><span class="op" id="8202093">:</span>&nbsp;&nbsp;<span class="op" id="8202096">{</span><span class="string" id="8202097">&#34;gzip,deflate&#34;</span><span class="op" id="8202111">}</span><span class="op" id="8202112">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202118">&#34;Accept-Charset&#34;</span><span class="op" id="8202134">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8202138">{</span><span class="string" id="8202139">&#34;ISO-8859-1,utf-8;q=0.7,*;q=0.7&#34;</span><span class="op" id="8202171">}</span><span class="op" id="8202172">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202178">&#34;Keep-Alive&#34;</span><span class="op" id="8202190">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8202198">{</span><span class="string" id="8202199">&#34;300&#34;</span><span class="op" id="8202204">}</span><span class="op" id="8202205">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202211">&#34;Proxy-Connection&#34;</span><span class="op" id="8202229">:</span>&nbsp;<span class="op" id="8202231">{</span><span class="string" id="8202232">&#34;keep-alive&#34;</span><span class="op" id="8202244">}</span><span class="op" id="8202245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202251">&#34;Content-Length&#34;</span><span class="op" id="8202267">:</span>&nbsp;&nbsp;&nbsp;<span class="op" id="8202271">{</span><span class="string" id="8202272">&#34;7&#34;</span><span class="op" id="8202275">}</span><span class="op" id="8202276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202282">&#34;User-Agent&#34;</span><span class="op" id="8202294">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8202302">{</span><span class="string" id="8202303">&#34;Fake&#34;</span><span class="op" id="8202309">}</span><span class="op" id="8202310">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202315">}</span><span class="op" id="8202316">,</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202321">Close</span><span class="op" id="8202326">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202336">false</span><span class="op" id="8202341">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202346">ContentLength</span><span class="op" id="8202359">:</span>&nbsp;<span class="num" id="8202361">7</span><span class="op" id="8202362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202367">Host</span><span class="op" id="8202371">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202382">&#34;www.techcrunch.com&#34;</span><span class="op" id="8202402">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202407">RequestURI</span><span class="op" id="8202417">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202422">&#34;http://www.techcrunch.com/&#34;</span><span class="op" id="8202450">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202454">}</span><span class="op" id="8202455">,</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202460">&#34;abcdef\n&#34;</span><span class="op" id="8202470">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202475">noTrailer</span><span class="op" id="8202484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202488">noError</span><span class="op" id="8202495">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202498">}</span><span class="op" id="8202499">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8202503">//&nbsp;GET&nbsp;request&nbsp;with&nbsp;no&nbsp;body&nbsp;(the&nbsp;normal&nbsp;case)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202554">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8202575">+</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8202580">&#34;Host:&nbsp;foo.com\r\n\r\n&#34;</span><span class="op" id="8202603">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202608">&amp;</span><span class="ident" id="8202609">Request</span><span class="op" id="8202616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202621">Method</span><span class="op" id="8202627">:</span>&nbsp;<span class="string" id="8202629">&#34;GET&#34;</span><span class="op" id="8202634">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202639">URL</span><span class="op" id="8202642">:</span>&nbsp;<span class="op" id="8202644">&amp;</span><span class="ident" id="8202645">url</span><span class="op" id="8202648">.</span><span class="ident" id="8202649">URL</span><span class="op" id="8202652">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202658">Path</span><span class="op" id="8202662">:</span>&nbsp;<span class="string" id="8202664">&#34;/&#34;</span><span class="op" id="8202667">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202672">}</span><span class="op" id="8202673">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202678">Proto</span><span class="op" id="8202683">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202693">&#34;HTTP/1.1&#34;</span><span class="op" id="8202703">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202708">ProtoMajor</span><span class="op" id="8202718">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8202723">1</span><span class="op" id="8202724">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202729">ProtoMinor</span><span class="op" id="8202739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8202744">1</span><span class="op" id="8202745">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202750">Header</span><span class="op" id="8202756">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8202765">Header</span><span class="op" id="8202771">{</span><span class="op" id="8202772">}</span><span class="op" id="8202773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202778">Close</span><span class="op" id="8202783">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8202793">false</span><span class="op" id="8202798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202803">ContentLength</span><span class="op" id="8202816">:</span>&nbsp;<span class="num" id="8202818">0</span><span class="op" id="8202819">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202824">Host</span><span class="op" id="8202828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202839">&#34;foo.com&#34;</span><span class="op" id="8202848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202853">RequestURI</span><span class="op" id="8202863">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8202868">&#34;/&#34;</span><span class="op" id="8202871">,</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202875">}</span><span class="op" id="8202876">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202881">noBody</span><span class="op" id="8202887">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202891">noTrailer</span><span class="op" id="8202900">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8202904">noError</span><span class="op" id="8202911">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8202914">}</span><span class="op" id="8202915">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8202919">//&nbsp;Tests&nbsp;that&nbsp;we&nbsp;don&#39;t&nbsp;parse&nbsp;a&nbsp;path&nbsp;that&nbsp;looks&nbsp;like&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8202974">//&nbsp;scheme-relative&nbsp;URI&nbsp;as&nbsp;a&nbsp;scheme-relative&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203024">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203028">&#34;GET&nbsp;//user@host/is/actually/a/path/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8203079">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203084">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8203104">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203109">&amp;</span><span class="ident" id="8203110">Request</span><span class="op" id="8203117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203122">Method</span><span class="op" id="8203128">:</span>&nbsp;<span class="string" id="8203130">&#34;GET&#34;</span><span class="op" id="8203135">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203140">URL</span><span class="op" id="8203143">:</span>&nbsp;<span class="op" id="8203145">&amp;</span><span class="ident" id="8203146">url</span><span class="op" id="8203149">.</span><span class="ident" id="8203150">URL</span><span class="op" id="8203153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203159">Path</span><span class="op" id="8203163">:</span>&nbsp;<span class="string" id="8203165">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8203198">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203203">}</span><span class="op" id="8203204">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203209">Proto</span><span class="op" id="8203214">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203224">&#34;HTTP/1.1&#34;</span><span class="op" id="8203234">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203239">ProtoMajor</span><span class="op" id="8203249">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8203254">1</span><span class="op" id="8203255">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203260">ProtoMinor</span><span class="op" id="8203270">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8203275">1</span><span class="op" id="8203276">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203281">Header</span><span class="op" id="8203287">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8203296">Header</span><span class="op" id="8203302">{</span><span class="op" id="8203303">}</span><span class="op" id="8203304">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203309">Close</span><span class="op" id="8203314">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8203324">false</span><span class="op" id="8203329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203334">ContentLength</span><span class="op" id="8203347">:</span>&nbsp;<span class="num" id="8203349">0</span><span class="op" id="8203350">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203355">Host</span><span class="op" id="8203359">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203370">&#34;test&#34;</span><span class="op" id="8203376">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203381">RequestURI</span><span class="op" id="8203391">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8203396">&#34;//user@host/is/actually/a/path/&#34;</span><span class="op" id="8203429">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203433">}</span><span class="op" id="8203434">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203439">noBody</span><span class="op" id="8203445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203449">noTrailer</span><span class="op" id="8203458">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203462">noError</span><span class="op" id="8203469">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203472">}</span><span class="op" id="8203473">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8203477">//&nbsp;Tests&nbsp;a&nbsp;bogus&nbsp;abs_path&nbsp;on&nbsp;the&nbsp;Request-Line&nbsp;(RFC&nbsp;2616&nbsp;section&nbsp;5.1.2)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203549">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203553">&#34;GET&nbsp;../../../../etc/passwd&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8203595">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203600">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8203620">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203624">nil</span><span class="op" id="8203627">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203631">noBody</span><span class="op" id="8203637">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203641">noTrailer</span><span class="op" id="8203650">,</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203654">&#34;parse&nbsp;../../../../etc/passwd:&nbsp;invalid&nbsp;URI&nbsp;for&nbsp;request&#34;</span><span class="op" id="8203709">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203712">}</span><span class="op" id="8203713">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8203717">//&nbsp;Tests&nbsp;missing&nbsp;URL:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203740">{</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203744">&#34;GET&nbsp;&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8203764">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203769">&#34;Host:&nbsp;test\r\n\r\n&#34;</span><span class="op" id="8203789">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203793">nil</span><span class="op" id="8203796">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203800">noBody</span><span class="op" id="8203806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8203810">noTrailer</span><span class="op" id="8203819">,</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203823">&#34;parse&nbsp;:&nbsp;empty&nbsp;url&#34;</span><span class="op" id="8203842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203845">}</span><span class="op" id="8203846">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8203850">//&nbsp;Tests&nbsp;chunked&nbsp;body&nbsp;with&nbsp;trailer:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8203887">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203891">&#34;POST&nbsp;/&nbsp;HTTP/1.1\r\n&#34;</span>&nbsp;<span class="op" id="8203913">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203918">&#34;Host:&nbsp;foo.com\r\n&#34;</span>&nbsp;<span class="op" id="8203938">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203943">&#34;Transfer-Encoding:&nbsp;chunked\r\n\r\n&#34;</span>&nbsp;<span class="op" id="8203980">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8203985">&#34;3\r\nfoo\r\n&#34;</span>&nbsp;<span class="op" id="8204000">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204005">&#34;3\r\nbar\r\n&#34;</span>&nbsp;<span class="op" id="8204020">+</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204025">&#34;0\r\n&#34;</span>&nbsp;<span class="op" id="8204033">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204038">&#34;Trailer-Key:&nbsp;Trailer-Value\r\n&#34;</span>&nbsp;<span class="op" id="8204071">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204076">&#34;\r\n&#34;</span><span class="op" id="8204082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204086">&amp;</span><span class="ident" id="8204087">Request</span><span class="op" id="8204094">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204099">Method</span><span class="op" id="8204105">:</span>&nbsp;<span class="string" id="8204107">&#34;POST&#34;</span><span class="op" id="8204113">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204118">URL</span><span class="op" id="8204121">:</span>&nbsp;<span class="op" id="8204123">&amp;</span><span class="ident" id="8204124">url</span><span class="op" id="8204127">.</span><span class="ident" id="8204128">URL</span><span class="op" id="8204131">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204137">Path</span><span class="op" id="8204141">:</span>&nbsp;<span class="string" id="8204143">&#34;/&#34;</span><span class="op" id="8204146">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204151">}</span><span class="op" id="8204152">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204157">TransferEncoding</span><span class="op" id="8204173">:</span>&nbsp;<span class="op" id="8204175">[</span><span class="op" id="8204176">]</span><span class="builtintype" id="8204177">string</span><span class="op" id="8204183">{</span><span class="string" id="8204184">&#34;chunked&#34;</span><span class="op" id="8204193">}</span><span class="op" id="8204194">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204199">Proto</span><span class="op" id="8204204">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204217">&#34;HTTP/1.1&#34;</span><span class="op" id="8204227">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204232">ProtoMajor</span><span class="op" id="8204242">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8204250">1</span><span class="op" id="8204251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204256">ProtoMinor</span><span class="op" id="8204266">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8204274">1</span><span class="op" id="8204275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204280">Header</span><span class="op" id="8204286">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204298">Header</span><span class="op" id="8204304">{</span><span class="op" id="8204305">}</span><span class="op" id="8204306">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204311">ContentLength</span><span class="op" id="8204324">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8204329">-</span><span class="num" id="8204330">1</span><span class="op" id="8204331">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204336">Host</span><span class="op" id="8204340">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204354">&#34;foo.com&#34;</span><span class="op" id="8204363">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204368">RequestURI</span><span class="op" id="8204378">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204386">&#34;/&#34;</span><span class="op" id="8204389">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204393">}</span><span class="op" id="8204394">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204399">&#34;foobar&#34;</span><span class="op" id="8204407">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204411">Header</span><span class="op" id="8204417">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204422">&#34;Trailer-Key&#34;</span><span class="op" id="8204435">:</span>&nbsp;<span class="op" id="8204437">{</span><span class="string" id="8204438">&#34;Trailer-Value&#34;</span><span class="op" id="8204453">}</span><span class="op" id="8204454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204458">}</span><span class="op" id="8204459">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204463">noError</span><span class="op" id="8204470">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204473">}</span><span class="op" id="8204474">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8204478">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;domain&nbsp;name:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204516">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204520">&#34;CONNECT&nbsp;www.google.com:443&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8204565">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204570">&amp;</span><span class="ident" id="8204571">Request</span><span class="op" id="8204578">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204583">Method</span><span class="op" id="8204589">:</span>&nbsp;<span class="string" id="8204591">&#34;CONNECT&#34;</span><span class="op" id="8204600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204605">URL</span><span class="op" id="8204608">:</span>&nbsp;<span class="op" id="8204610">&amp;</span><span class="ident" id="8204611">url</span><span class="op" id="8204614">.</span><span class="ident" id="8204615">URL</span><span class="op" id="8204618">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204624">Host</span><span class="op" id="8204628">:</span>&nbsp;<span class="string" id="8204630">&#34;www.google.com:443&#34;</span><span class="op" id="8204650">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204655">}</span><span class="op" id="8204656">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204661">Proto</span><span class="op" id="8204666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204676">&#34;HTTP/1.1&#34;</span><span class="op" id="8204686">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204691">ProtoMajor</span><span class="op" id="8204701">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8204706">1</span><span class="op" id="8204707">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204712">ProtoMinor</span><span class="op" id="8204722">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8204727">1</span><span class="op" id="8204728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204733">Header</span><span class="op" id="8204739">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8204748">Header</span><span class="op" id="8204754">{</span><span class="op" id="8204755">}</span><span class="op" id="8204756">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204761">Close</span><span class="op" id="8204766">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8204776">false</span><span class="op" id="8204781">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204786">ContentLength</span><span class="op" id="8204799">:</span>&nbsp;<span class="num" id="8204801">0</span><span class="op" id="8204802">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204807">Host</span><span class="op" id="8204811">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204822">&#34;www.google.com:443&#34;</span><span class="op" id="8204842">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204847">RequestURI</span><span class="op" id="8204857">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8204862">&#34;www.google.com:443&#34;</span><span class="op" id="8204882">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204886">}</span><span class="op" id="8204887">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204892">noBody</span><span class="op" id="8204898">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204902">noTrailer</span><span class="op" id="8204911">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8204915">noError</span><span class="op" id="8204922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204925">}</span><span class="op" id="8204926">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8204930">//&nbsp;CONNECT&nbsp;request&nbsp;with&nbsp;IP&nbsp;address:</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8204967">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8204971">&#34;CONNECT&nbsp;127.0.0.1:6060&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8205012">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205017">&amp;</span><span class="ident" id="8205018">Request</span><span class="op" id="8205025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205030">Method</span><span class="op" id="8205036">:</span>&nbsp;<span class="string" id="8205038">&#34;CONNECT&#34;</span><span class="op" id="8205047">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205052">URL</span><span class="op" id="8205055">:</span>&nbsp;<span class="op" id="8205057">&amp;</span><span class="ident" id="8205058">url</span><span class="op" id="8205061">.</span><span class="ident" id="8205062">URL</span><span class="op" id="8205065">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205071">Host</span><span class="op" id="8205075">:</span>&nbsp;<span class="string" id="8205077">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8205093">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205098">}</span><span class="op" id="8205099">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205104">Proto</span><span class="op" id="8205109">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205119">&#34;HTTP/1.1&#34;</span><span class="op" id="8205129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205134">ProtoMajor</span><span class="op" id="8205144">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8205149">1</span><span class="op" id="8205150">,</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205155">ProtoMinor</span><span class="op" id="8205165">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8205170">1</span><span class="op" id="8205171">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205176">Header</span><span class="op" id="8205182">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205191">Header</span><span class="op" id="8205197">{</span><span class="op" id="8205198">}</span><span class="op" id="8205199">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205204">Close</span><span class="op" id="8205209">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8205219">false</span><span class="op" id="8205224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205229">ContentLength</span><span class="op" id="8205242">:</span>&nbsp;<span class="num" id="8205244">0</span><span class="op" id="8205245">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205250">Host</span><span class="op" id="8205254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205265">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8205281">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205286">RequestURI</span><span class="op" id="8205296">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205301">&#34;127.0.0.1:6060&#34;</span><span class="op" id="8205317">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205321">}</span><span class="op" id="8205322">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205327">noBody</span><span class="op" id="8205333">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205337">noTrailer</span><span class="op" id="8205346">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205350">noError</span><span class="op" id="8205357">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205360">}</span><span class="op" id="8205361">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205365">//&nbsp;CONNECT&nbsp;request&nbsp;for&nbsp;RPC:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205394">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205398">&#34;CONNECT&nbsp;/_goRPC_&nbsp;HTTP/1.1\r\n\r\n&#34;</span><span class="op" id="8205433">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205438">&amp;</span><span class="ident" id="8205439">Request</span><span class="op" id="8205446">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205451">Method</span><span class="op" id="8205457">:</span>&nbsp;<span class="string" id="8205459">&#34;CONNECT&#34;</span><span class="op" id="8205468">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205473">URL</span><span class="op" id="8205476">:</span>&nbsp;<span class="op" id="8205478">&amp;</span><span class="ident" id="8205479">url</span><span class="op" id="8205482">.</span><span class="ident" id="8205483">URL</span><span class="op" id="8205486">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205492">Path</span><span class="op" id="8205496">:</span>&nbsp;<span class="string" id="8205498">&#34;/_goRPC_&#34;</span><span class="op" id="8205508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205513">}</span><span class="op" id="8205514">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205519">Proto</span><span class="op" id="8205524">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205534">&#34;HTTP/1.1&#34;</span><span class="op" id="8205544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205549">ProtoMajor</span><span class="op" id="8205559">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8205564">1</span><span class="op" id="8205565">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205570">ProtoMinor</span><span class="op" id="8205580">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="num" id="8205585">1</span><span class="op" id="8205586">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205591">Header</span><span class="op" id="8205597">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="8205606">Header</span><span class="op" id="8205612">{</span><span class="op" id="8205613">}</span><span class="op" id="8205614">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205619">Close</span><span class="op" id="8205624">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8205634">false</span><span class="op" id="8205639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205644">ContentLength</span><span class="op" id="8205657">:</span>&nbsp;<span class="num" id="8205659">0</span><span class="op" id="8205660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205665">Host</span><span class="op" id="8205669">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205680">&#34;&#34;</span><span class="op" id="8205682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205687">RequestURI</span><span class="op" id="8205697">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205702">&#34;/_goRPC_&#34;</span><span class="op" id="8205712">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205716">}</span><span class="op" id="8205717">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205722">noBody</span><span class="op" id="8205728">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205732">noTrailer</span><span class="op" id="8205741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205745">noError</span><span class="op" id="8205752">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205755">}</span><span class="op" id="8205756">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8205760">//&nbsp;SSDP&nbsp;Notify&nbsp;request.&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205807">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8205811">&#34;NOTIFY&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8205853">,</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205857">&amp;</span><span class="ident" id="8205858">Request</span><span class="op" id="8205865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205870">Method</span><span class="op" id="8205876">:</span>&nbsp;<span class="string" id="8205878">&#34;NOTIFY&#34;</span><span class="op" id="8205886">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205891">URL</span><span class="op" id="8205894">:</span>&nbsp;<span class="op" id="8205896">&amp;</span><span class="ident" id="8205897">url</span><span class="op" id="8205900">.</span><span class="ident" id="8205901">URL</span><span class="op" id="8205904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205910">Path</span><span class="op" id="8205914">:</span>&nbsp;<span class="string" id="8205916">&#34;*&#34;</span><span class="op" id="8205919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8205924">}</span><span class="op" id="8205925">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205930">Proto</span><span class="op" id="8205935">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8205942">&#34;HTTP/1.1&#34;</span><span class="op" id="8205952">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205957">ProtoMajor</span><span class="op" id="8205967">:</span>&nbsp;<span class="num" id="8205969">1</span><span class="op" id="8205970">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205975">ProtoMinor</span><span class="op" id="8205985">:</span>&nbsp;<span class="num" id="8205987">1</span><span class="op" id="8205988">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8205993">Header</span><span class="op" id="8205999">:</span>&nbsp;<span class="ident" id="8206001">Header</span><span class="op" id="8206007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206013">&#34;Server&#34;</span><span class="op" id="8206021">:</span>&nbsp;<span class="op" id="8206023">[</span><span class="op" id="8206024">]</span><span class="builtintype" id="8206025">string</span><span class="op" id="8206031">{</span><span class="string" id="8206032">&#34;foo&#34;</span><span class="op" id="8206037">}</span><span class="op" id="8206038">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206043">}</span><span class="op" id="8206044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206049">Close</span><span class="op" id="8206054">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8206064">false</span><span class="op" id="8206069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206074">ContentLength</span><span class="op" id="8206087">:</span>&nbsp;<span class="num" id="8206089">0</span><span class="op" id="8206090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206095">RequestURI</span><span class="op" id="8206105">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8206110">&#34;*&#34;</span><span class="op" id="8206113">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206117">}</span><span class="op" id="8206118">,</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206123">noBody</span><span class="op" id="8206129">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206133">noTrailer</span><span class="op" id="8206142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206146">noError</span><span class="op" id="8206153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206156">}</span><span class="op" id="8206157">,</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8206161">//&nbsp;OPTIONS&nbsp;request.&nbsp;Similar&nbsp;to&nbsp;golang.org/issue/3692</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206215">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206219">&#34;OPTIONS&nbsp;*&nbsp;HTTP/1.1\r\nServer:&nbsp;foo\r\n\r\n&#34;</span><span class="op" id="8206262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206266">&amp;</span><span class="ident" id="8206267">Request</span><span class="op" id="8206274">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206279">Method</span><span class="op" id="8206285">:</span>&nbsp;<span class="string" id="8206287">&#34;OPTIONS&#34;</span><span class="op" id="8206296">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206301">URL</span><span class="op" id="8206304">:</span>&nbsp;<span class="op" id="8206306">&amp;</span><span class="ident" id="8206307">url</span><span class="op" id="8206310">.</span><span class="ident" id="8206311">URL</span><span class="op" id="8206314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206320">Path</span><span class="op" id="8206324">:</span>&nbsp;<span class="string" id="8206326">&#34;*&#34;</span><span class="op" id="8206329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206334">}</span><span class="op" id="8206335">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206340">Proto</span><span class="op" id="8206345">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8206352">&#34;HTTP/1.1&#34;</span><span class="op" id="8206362">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206367">ProtoMajor</span><span class="op" id="8206377">:</span>&nbsp;<span class="num" id="8206379">1</span><span class="op" id="8206380">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206385">ProtoMinor</span><span class="op" id="8206395">:</span>&nbsp;<span class="num" id="8206397">1</span><span class="op" id="8206398">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206403">Header</span><span class="op" id="8206409">:</span>&nbsp;<span class="ident" id="8206411">Header</span><span class="op" id="8206417">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206423">&#34;Server&#34;</span><span class="op" id="8206431">:</span>&nbsp;<span class="op" id="8206433">[</span><span class="op" id="8206434">]</span><span class="builtintype" id="8206435">string</span><span class="op" id="8206441">{</span><span class="string" id="8206442">&#34;foo&#34;</span><span class="op" id="8206447">}</span><span class="op" id="8206448">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206453">}</span><span class="op" id="8206454">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206459">Close</span><span class="op" id="8206464">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8206474">false</span><span class="op" id="8206479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206484">ContentLength</span><span class="op" id="8206497">:</span>&nbsp;<span class="num" id="8206499">0</span><span class="op" id="8206500">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206505">RequestURI</span><span class="op" id="8206515">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8206520">&#34;*&#34;</span><span class="op" id="8206523">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206527">}</span><span class="op" id="8206528">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206533">noBody</span><span class="op" id="8206539">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206543">noTrailer</span><span class="op" id="8206552">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206556">noError</span><span class="op" id="8206563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206566">}</span><span class="op" id="8206567">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8206571">//&nbsp;Connection:&nbsp;close.&nbsp;golang.org/issue/8261</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206620">&#34;GET&nbsp;/&nbsp;HTTP/1.1\r\nHost:&nbsp;issue8261.com\r\nConnection:&nbsp;close\r\n\r\n&#34;</span><span class="op" id="8206688">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206692">&amp;</span><span class="ident" id="8206693">Request</span><span class="op" id="8206700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206705">Method</span><span class="op" id="8206711">:</span>&nbsp;<span class="string" id="8206713">&#34;GET&#34;</span><span class="op" id="8206718">,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206723">URL</span><span class="op" id="8206726">:</span>&nbsp;<span class="op" id="8206728">&amp;</span><span class="ident" id="8206729">url</span><span class="op" id="8206732">.</span><span class="ident" id="8206733">URL</span><span class="op" id="8206736">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206742">Path</span><span class="op" id="8206746">:</span>&nbsp;<span class="string" id="8206748">&#34;/&#34;</span><span class="op" id="8206751">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206756">}</span><span class="op" id="8206757">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206762">Header</span><span class="op" id="8206768">:</span>&nbsp;<span class="ident" id="8206770">Header</span><span class="op" id="8206776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8206782">//&nbsp;This&nbsp;wasn&#39;t&nbsp;removed&nbsp;from&nbsp;Go&nbsp;1.0&nbsp;to</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8206824">//&nbsp;Go&nbsp;1.3,&nbsp;so&nbsp;locking&nbsp;it&nbsp;in&nbsp;that&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8206864">//&nbsp;keep&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8206882">&#34;Connection&#34;</span><span class="op" id="8206894">:</span>&nbsp;<span class="op" id="8206896">[</span><span class="op" id="8206897">]</span><span class="builtintype" id="8206898">string</span><span class="op" id="8206904">{</span><span class="string" id="8206905">&#34;close&#34;</span><span class="op" id="8206912">}</span><span class="op" id="8206913">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8206918">}</span><span class="op" id="8206919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206924">Host</span><span class="op" id="8206928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8206936">&#34;issue8261.com&#34;</span><span class="op" id="8206951">,</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206956">Proto</span><span class="op" id="8206961">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="8206968">&#34;HTTP/1.1&#34;</span><span class="op" id="8206978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8206983">ProtoMajor</span><span class="op" id="8206993">:</span>&nbsp;<span class="num" id="8206995">1</span><span class="op" id="8206996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207001">ProtoMinor</span><span class="op" id="8207011">:</span>&nbsp;<span class="num" id="8207013">1</span><span class="op" id="8207014">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207019">Close</span><span class="op" id="8207024">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8207031">true</span><span class="op" id="8207035">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207040">RequestURI</span><span class="op" id="8207050">:</span>&nbsp;<span class="string" id="8207052">&#34;/&#34;</span><span class="op" id="8207055">,</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207059">}</span><span class="op" id="8207060">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207065">noBody</span><span class="op" id="8207071">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207075">noTrailer</span><span class="op" id="8207084">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207088">noError</span><span class="op" id="8207095">,</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207098">}</span><span class="op" id="8207099">,</span><br>
<span class="lineno"></span><span class="op" id="8207101">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8207104">func</span>&nbsp;<span class="ident" id="8207109">TestReadRequest</span><span class="op" id="8207124">(</span><span class="ident" id="8207125">t</span>&nbsp;<span class="op" id="8207127">*</span><span class="ident" id="8207128">testing</span><span class="op" id="8207135">.</span><span class="ident" id="8207136">T</span><span class="op" id="8207137">)</span>&nbsp;<span class="op" id="8207139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207142">for</span>&nbsp;<span class="ident" id="8207146">i</span>&nbsp;<span class="op" id="8207148">:=</span>&nbsp;<span class="keyword" id="8207151">range</span>&nbsp;<span class="ident" id="8207157">reqTests</span>&nbsp;<span class="op" id="8207166">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207170">tt</span>&nbsp;<span class="op" id="8207173">:=</span>&nbsp;<span class="op" id="8207176">&amp;</span><span class="ident" id="8207177">reqTests</span><span class="op" id="8207185">[</span><span class="ident" id="8207186">i</span><span class="op" id="8207187">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207191">req</span><span class="op" id="8207194">,</span>&nbsp;<span class="ident" id="8207196">err</span>&nbsp;<span class="op" id="8207200">:=</span>&nbsp;<span class="ident" id="8207203">ReadRequest</span><span class="op" id="8207214">(</span><span class="ident" id="8207215">bufio</span><span class="op" id="8207220">.</span><span class="ident" id="8207221">NewReader</span><span class="op" id="8207230">(</span><span class="ident" id="8207231">strings</span><span class="op" id="8207238">.</span><span class="ident" id="8207239">NewReader</span><span class="op" id="8207248">(</span><span class="ident" id="8207249">tt</span><span class="op" id="8207251">.</span><span class="ident" id="8207252">Raw</span><span class="op" id="8207255">)</span><span class="op" id="8207256">)</span><span class="op" id="8207257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207261">if</span>&nbsp;<span class="ident" id="8207264">err</span>&nbsp;<span class="op" id="8207268">!=</span>&nbsp;<span class="ident" id="8207271">nil</span>&nbsp;<span class="op" id="8207275">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207280">if</span>&nbsp;<span class="ident" id="8207283">err</span><span class="op" id="8207286">.</span><span class="ident" id="8207287">Error</span><span class="op" id="8207292">(</span><span class="op" id="8207293">)</span>&nbsp;<span class="op" id="8207295">!=</span>&nbsp;<span class="ident" id="8207298">tt</span><span class="op" id="8207300">.</span><span class="ident" id="8207301">Error</span>&nbsp;<span class="op" id="8207307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207313">t</span><span class="op" id="8207314">.</span><span class="ident" id="8207315">Errorf</span><span class="op" id="8207321">(</span><span class="string" id="8207322">&#34;#%d:&nbsp;error&nbsp;%q,&nbsp;want&nbsp;error&nbsp;%q&#34;</span><span class="op" id="8207352">,</span>&nbsp;<span class="ident" id="8207354">i</span><span class="op" id="8207355">,</span>&nbsp;<span class="ident" id="8207357">err</span><span class="op" id="8207360">.</span><span class="ident" id="8207361">Error</span><span class="op" id="8207366">(</span><span class="op" id="8207367">)</span><span class="op" id="8207368">,</span>&nbsp;<span class="ident" id="8207370">tt</span><span class="op" id="8207372">.</span><span class="ident" id="8207373">Error</span><span class="op" id="8207378">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207388">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207403">rbody</span>&nbsp;<span class="op" id="8207409">:=</span>&nbsp;<span class="ident" id="8207412">req</span><span class="op" id="8207415">.</span><span class="ident" id="8207416">Body</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207423">req</span><span class="op" id="8207426">.</span><span class="ident" id="8207427">Body</span>&nbsp;<span class="op" id="8207432">=</span>&nbsp;<span class="ident" id="8207434">nil</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207440">testName</span>&nbsp;<span class="op" id="8207449">:=</span>&nbsp;<span class="ident" id="8207452">fmt</span><span class="op" id="8207455">.</span><span class="ident" id="8207456">Sprintf</span><span class="op" id="8207463">(</span><span class="string" id="8207464">&#34;Test&nbsp;%d&nbsp;(%q)&#34;</span><span class="op" id="8207478">,</span>&nbsp;<span class="ident" id="8207480">i</span><span class="op" id="8207481">,</span>&nbsp;<span class="ident" id="8207483">tt</span><span class="op" id="8207485">.</span><span class="ident" id="8207486">Raw</span><span class="op" id="8207489">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207493">diff</span><span class="op" id="8207497">(</span><span class="ident" id="8207498">t</span><span class="op" id="8207499">,</span>&nbsp;<span class="ident" id="8207501">testName</span><span class="op" id="8207509">,</span>&nbsp;<span class="ident" id="8207511">req</span><span class="op" id="8207514">,</span>&nbsp;<span class="ident" id="8207516">tt</span><span class="op" id="8207518">.</span><span class="ident" id="8207519">Req</span><span class="op" id="8207522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207526">var</span>&nbsp;<span class="ident" id="8207530">bout</span>&nbsp;<span class="ident" id="8207535">bytes</span><span class="op" id="8207540">.</span><span class="ident" id="8207541">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207550">if</span>&nbsp;<span class="ident" id="8207553">rbody</span>&nbsp;<span class="op" id="8207559">!=</span>&nbsp;<span class="ident" id="8207562">nil</span>&nbsp;<span class="op" id="8207566">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207571">_</span><span class="op" id="8207572">,</span>&nbsp;<span class="ident" id="8207574">err</span>&nbsp;<span class="op" id="8207578">:=</span>&nbsp;<span class="ident" id="8207581">io</span><span class="op" id="8207583">.</span><span class="ident" id="8207584">Copy</span><span class="op" id="8207588">(</span><span class="op" id="8207589">&amp;</span><span class="ident" id="8207590">bout</span><span class="op" id="8207594">,</span>&nbsp;<span class="ident" id="8207596">rbody</span><span class="op" id="8207601">)</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207606">if</span>&nbsp;<span class="ident" id="8207609">err</span>&nbsp;<span class="op" id="8207613">!=</span>&nbsp;<span class="ident" id="8207616">nil</span>&nbsp;<span class="op" id="8207620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207626">t</span><span class="op" id="8207627">.</span><span class="ident" id="8207628">Fatalf</span><span class="op" id="8207634">(</span><span class="string" id="8207635">&#34;%s:&nbsp;copying&nbsp;body:&nbsp;%v&#34;</span><span class="op" id="8207657">,</span>&nbsp;<span class="ident" id="8207659">testName</span><span class="op" id="8207667">,</span>&nbsp;<span class="ident" id="8207669">err</span><span class="op" id="8207672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207677">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207682">rbody</span><span class="op" id="8207687">.</span><span class="ident" id="8207688">Close</span><span class="op" id="8207693">(</span><span class="op" id="8207694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207698">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207702">body</span>&nbsp;<span class="op" id="8207707">:=</span>&nbsp;<span class="ident" id="8207710">bout</span><span class="op" id="8207714">.</span><span class="ident" id="8207715">String</span><span class="op" id="8207721">(</span><span class="op" id="8207722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207726">if</span>&nbsp;<span class="ident" id="8207729">body</span>&nbsp;<span class="op" id="8207734">!=</span>&nbsp;<span class="ident" id="8207737">tt</span><span class="op" id="8207739">.</span><span class="ident" id="8207740">Body</span>&nbsp;<span class="op" id="8207745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207750">t</span><span class="op" id="8207751">.</span><span class="ident" id="8207752">Errorf</span><span class="op" id="8207758">(</span><span class="string" id="8207759">&#34;%s:&nbsp;Body&nbsp;=&nbsp;%q&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8207782">,</span>&nbsp;<span class="ident" id="8207784">testName</span><span class="op" id="8207792">,</span>&nbsp;<span class="ident" id="8207794">body</span><span class="op" id="8207798">,</span>&nbsp;<span class="ident" id="8207800">tt</span><span class="op" id="8207802">.</span><span class="ident" id="8207803">Body</span><span class="op" id="8207807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207811">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8207815">if</span>&nbsp;<span class="op" id="8207818">!</span><span class="ident" id="8207819">reflect</span><span class="op" id="8207826">.</span><span class="ident" id="8207827">DeepEqual</span><span class="op" id="8207836">(</span><span class="ident" id="8207837">tt</span><span class="op" id="8207839">.</span><span class="ident" id="8207840">Trailer</span><span class="op" id="8207847">,</span>&nbsp;<span class="ident" id="8207849">req</span><span class="op" id="8207852">.</span><span class="ident" id="8207853">Trailer</span><span class="op" id="8207860">)</span>&nbsp;<span class="op" id="8207862">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8207867">t</span><span class="op" id="8207868">.</span><span class="ident" id="8207869">Errorf</span><span class="op" id="8207875">(</span><span class="string" id="8207876">&#34;%s:&nbsp;Trailers&nbsp;differ.\n&nbsp;got:&nbsp;%v\nwant:&nbsp;%v&#34;</span><span class="op" id="8207918">,</span>&nbsp;<span class="ident" id="8207920">testName</span><span class="op" id="8207928">,</span>&nbsp;<span class="ident" id="8207930">req</span><span class="op" id="8207933">.</span><span class="ident" id="8207934">Trailer</span><span class="op" id="8207941">,</span>&nbsp;<span class="ident" id="8207943">tt</span><span class="op" id="8207945">.</span><span class="ident" id="8207946">Trailer</span><span class="op" id="8207953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207957">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8207960">}</span><br>
<span class="lineno"></span><span class="op" id="8207962">}</span>
</div>
</body>
</html>
