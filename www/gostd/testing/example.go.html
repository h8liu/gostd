<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>testing</h2>
<ul>
<li><a href="/gostd/testing/allocs.go.html">allocs.go</a></li>
<li><a href="/gostd/testing/allocs_test.go.html">allocs_test.go</a></li>
<li><a href="/gostd/testing/benchmark.go.html">benchmark.go</a></li>
<li><a href="/gostd/testing/benchmark_test.go.html">benchmark_test.go</a></li>
<li><a href="/gostd/testing/cover.go.html">cover.go</a></li>
<li><a href="/gostd/testing/example.go.html">example.go</a></li>
<li><a href="/gostd/testing/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/testing/testing.go.html">testing.go</a></li>
<li><a href="/gostd/testing/testing_test.go.html">testing_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6429323">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6429378">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6429432">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6429483">package</span>&nbsp;<span class="ident" id="6429491">testing</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6429500">import</span>&nbsp;<span class="op" id="6429507">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429510">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429519">&#34;fmt&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429526">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429532">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429538">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6429549">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="6429556">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="6429559">type</span>&nbsp;<span class="ident" id="6429564">InternalExample</span>&nbsp;<span class="keyword" id="6429580">struct</span>&nbsp;<span class="op" id="6429587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429590">Name</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6429597">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429605">F</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="6429612">func</span><span class="op" id="6429616">(</span><span class="op" id="6429617">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429620">Output</span>&nbsp;<span class="builtintype" id="6429627">string</span><br>
<span class="lineno">20</span><span class="op" id="6429634">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6429637">func</span>&nbsp;<span class="ident" id="6429642">RunExamples</span><span class="op" id="6429653">(</span><span class="ident" id="6429654">matchString</span>&nbsp;<span class="keyword" id="6429666">func</span><span class="op" id="6429670">(</span><span class="ident" id="6429671">pat</span><span class="op" id="6429674">,</span>&nbsp;<span class="ident" id="6429676">str</span>&nbsp;<span class="builtintype" id="6429680">string</span><span class="op" id="6429686">)</span>&nbsp;<span class="op" id="6429688">(</span><span class="builtintype" id="6429689">bool</span><span class="op" id="6429693">,</span>&nbsp;<span class="builtintype" id="6429695">error</span><span class="op" id="6429700">)</span><span class="op" id="6429701">,</span>&nbsp;<span class="ident" id="6429703">examples</span>&nbsp;<span class="op" id="6429712">[</span><span class="op" id="6429713">]</span><span class="ident" id="6429714">InternalExample</span><span class="op" id="6429729">)</span>&nbsp;<span class="op" id="6429731">(</span><span class="ident" id="6429732">ok</span>&nbsp;<span class="builtintype" id="6429735">bool</span><span class="op" id="6429739">)</span>&nbsp;<span class="op" id="6429741">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429744">ok</span>&nbsp;<span class="op" id="6429747">=</span>&nbsp;<span class="builtintype" id="6429749">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429756">var</span>&nbsp;<span class="ident" id="6429760">eg</span>&nbsp;<span class="ident" id="6429763">InternalExample</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429781">for</span>&nbsp;<span class="ident" id="6429785">_</span><span class="op" id="6429786">,</span>&nbsp;<span class="ident" id="6429788">eg</span>&nbsp;<span class="op" id="6429791">=</span>&nbsp;<span class="keyword" id="6429793">range</span>&nbsp;<span class="ident" id="6429799">examples</span>&nbsp;<span class="op" id="6429808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429812">matched</span><span class="op" id="6429819">,</span>&nbsp;<span class="ident" id="6429821">err</span>&nbsp;<span class="op" id="6429825">:=</span>&nbsp;<span class="ident" id="6429828">matchString</span><span class="op" id="6429839">(</span><span class="op" id="6429840">*</span><span class="ident" id="6429841">match</span><span class="op" id="6429846">,</span>&nbsp;<span class="ident" id="6429848">eg</span><span class="op" id="6429850">.</span><span class="ident" id="6429851">Name</span><span class="op" id="6429855">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429859">if</span>&nbsp;<span class="ident" id="6429862">err</span>&nbsp;<span class="op" id="6429866">!=</span>&nbsp;<span class="ident" id="6429869">nil</span>&nbsp;<span class="op" id="6429873">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429878">fmt</span><span class="op" id="6429881">.</span><span class="ident" id="6429882">Fprintf</span><span class="op" id="6429889">(</span><span class="ident" id="6429890">os</span><span class="op" id="6429892">.</span><span class="ident" id="6429893">Stderr</span><span class="op" id="6429899">,</span>&nbsp;<span class="string" id="6429901">&#34;testing:&nbsp;invalid&nbsp;regexp&nbsp;for&nbsp;-test.run:&nbsp;%s\n&#34;</span><span class="op" id="6429946">,</span>&nbsp;<span class="ident" id="6429948">err</span><span class="op" id="6429951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6429956">os</span><span class="op" id="6429958">.</span><span class="ident" id="6429959">Exit</span><span class="op" id="6429963">(</span><span class="num" id="6429964">1</span><span class="op" id="6429965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6429969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429973">if</span>&nbsp;<span class="op" id="6429976">!</span><span class="ident" id="6429977">matched</span>&nbsp;<span class="op" id="6429985">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6429990">continue</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430001">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430005">if</span>&nbsp;<span class="op" id="6430008">!</span><span class="ident" id="6430009">runExample</span><span class="op" id="6430019">(</span><span class="ident" id="6430020">eg</span><span class="op" id="6430022">)</span>&nbsp;<span class="op" id="6430024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430029">ok</span>&nbsp;<span class="op" id="6430032">=</span>&nbsp;<span class="builtintype" id="6430034">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430045">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430049">return</span><br>
<span class="lineno"></span><span class="op" id="6430056">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6430059">func</span>&nbsp;<span class="ident" id="6430064">runExample</span><span class="op" id="6430074">(</span><span class="ident" id="6430075">eg</span>&nbsp;<span class="ident" id="6430078">InternalExample</span><span class="op" id="6430093">)</span>&nbsp;<span class="op" id="6430095">(</span><span class="ident" id="6430096">ok</span>&nbsp;<span class="builtintype" id="6430099">bool</span><span class="op" id="6430103">)</span>&nbsp;<span class="op" id="6430105">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430108">if</span>&nbsp;<span class="op" id="6430111">*</span><span class="ident" id="6430112">chatty</span>&nbsp;<span class="op" id="6430119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430123">fmt</span><span class="op" id="6430126">.</span><span class="ident" id="6430127">Printf</span><span class="op" id="6430133">(</span><span class="string" id="6430134">&#34;===&nbsp;RUN:&nbsp;%s\n&#34;</span><span class="op" id="6430149">,</span>&nbsp;<span class="ident" id="6430151">eg</span><span class="op" id="6430153">.</span><span class="ident" id="6430154">Name</span><span class="op" id="6430158">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430165">//&nbsp;Capture&nbsp;stdout.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430185">stdout</span>&nbsp;<span class="op" id="6430192">:=</span>&nbsp;<span class="ident" id="6430195">os</span><span class="op" id="6430197">.</span><span class="ident" id="6430198">Stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430206">r</span><span class="op" id="6430207">,</span>&nbsp;<span class="ident" id="6430209">w</span><span class="op" id="6430210">,</span>&nbsp;<span class="ident" id="6430212">err</span>&nbsp;<span class="op" id="6430216">:=</span>&nbsp;<span class="ident" id="6430219">os</span><span class="op" id="6430221">.</span><span class="ident" id="6430222">Pipe</span><span class="op" id="6430226">(</span><span class="op" id="6430227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430230">if</span>&nbsp;<span class="ident" id="6430233">err</span>&nbsp;<span class="op" id="6430237">!=</span>&nbsp;<span class="ident" id="6430240">nil</span>&nbsp;<span class="op" id="6430244">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430248">fmt</span><span class="op" id="6430251">.</span><span class="ident" id="6430252">Fprintln</span><span class="op" id="6430260">(</span><span class="ident" id="6430261">os</span><span class="op" id="6430263">.</span><span class="ident" id="6430264">Stderr</span><span class="op" id="6430270">,</span>&nbsp;<span class="ident" id="6430272">err</span><span class="op" id="6430275">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430279">os</span><span class="op" id="6430281">.</span><span class="ident" id="6430282">Exit</span><span class="op" id="6430286">(</span><span class="num" id="6430287">1</span><span class="op" id="6430288">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430291">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430294">os</span><span class="op" id="6430296">.</span><span class="ident" id="6430297">Stdout</span>&nbsp;<span class="op" id="6430304">=</span>&nbsp;<span class="ident" id="6430306">w</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430309">outC</span>&nbsp;<span class="op" id="6430314">:=</span>&nbsp;<span class="builtinfunc" id="6430317">make</span><span class="op" id="6430321">(</span><span class="keyword" id="6430322">chan</span>&nbsp;<span class="builtintype" id="6430327">string</span><span class="op" id="6430333">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430336">go</span>&nbsp;<span class="keyword" id="6430339">func</span><span class="op" id="6430343">(</span><span class="op" id="6430344">)</span>&nbsp;<span class="op" id="6430346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430350">buf</span>&nbsp;<span class="op" id="6430354">:=</span>&nbsp;<span class="builtinfunc" id="6430357">new</span><span class="op" id="6430360">(</span><span class="ident" id="6430361">bytes</span><span class="op" id="6430366">.</span><span class="ident" id="6430367">Buffer</span><span class="op" id="6430373">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430377">_</span><span class="op" id="6430378">,</span>&nbsp;<span class="ident" id="6430380">err</span>&nbsp;<span class="op" id="6430384">:=</span>&nbsp;<span class="ident" id="6430387">io</span><span class="op" id="6430389">.</span><span class="ident" id="6430390">Copy</span><span class="op" id="6430394">(</span><span class="ident" id="6430395">buf</span><span class="op" id="6430398">,</span>&nbsp;<span class="ident" id="6430400">r</span><span class="op" id="6430401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430405">r</span><span class="op" id="6430406">.</span><span class="ident" id="6430407">Close</span><span class="op" id="6430412">(</span><span class="op" id="6430413">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430417">if</span>&nbsp;<span class="ident" id="6430420">err</span>&nbsp;<span class="op" id="6430424">!=</span>&nbsp;<span class="ident" id="6430427">nil</span>&nbsp;<span class="op" id="6430431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430436">fmt</span><span class="op" id="6430439">.</span><span class="ident" id="6430440">Fprintf</span><span class="op" id="6430447">(</span><span class="ident" id="6430448">os</span><span class="op" id="6430450">.</span><span class="ident" id="6430451">Stderr</span><span class="op" id="6430457">,</span>&nbsp;<span class="string" id="6430459">&#34;testing:&nbsp;copying&nbsp;pipe:&nbsp;%v\n&#34;</span><span class="op" id="6430488">,</span>&nbsp;<span class="ident" id="6430490">err</span><span class="op" id="6430493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430498">os</span><span class="op" id="6430500">.</span><span class="ident" id="6430501">Exit</span><span class="op" id="6430505">(</span><span class="num" id="6430506">1</span><span class="op" id="6430507">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430515">outC</span>&nbsp;<span class="op" id="6430520">&lt;-</span>&nbsp;<span class="ident" id="6430523">buf</span><span class="op" id="6430526">.</span><span class="ident" id="6430527">String</span><span class="op" id="6430533">(</span><span class="op" id="6430534">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430537">}</span><span class="op" id="6430538">(</span><span class="op" id="6430539">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430543">start</span>&nbsp;<span class="op" id="6430549">:=</span>&nbsp;<span class="ident" id="6430552">time</span><span class="op" id="6430556">.</span><span class="ident" id="6430557">Now</span><span class="op" id="6430560">(</span><span class="op" id="6430561">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430564">ok</span>&nbsp;<span class="op" id="6430567">=</span>&nbsp;<span class="builtintype" id="6430569">true</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430576">//&nbsp;Clean&nbsp;up&nbsp;in&nbsp;a&nbsp;deferred&nbsp;call&nbsp;so&nbsp;we&nbsp;can&nbsp;recover&nbsp;if&nbsp;the&nbsp;example&nbsp;panics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430649">defer</span>&nbsp;<span class="keyword" id="6430655">func</span><span class="op" id="6430659">(</span><span class="op" id="6430660">)</span>&nbsp;<span class="op" id="6430662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430666">dstr</span>&nbsp;<span class="op" id="6430671">:=</span>&nbsp;<span class="ident" id="6430674">fmtDuration</span><span class="op" id="6430685">(</span><span class="ident" id="6430686">time</span><span class="op" id="6430690">.</span><span class="ident" id="6430691">Now</span><span class="op" id="6430694">(</span><span class="op" id="6430695">)</span><span class="op" id="6430696">.</span><span class="ident" id="6430697">Sub</span><span class="op" id="6430700">(</span><span class="ident" id="6430701">start</span><span class="op" id="6430706">)</span><span class="op" id="6430707">)</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6430712">//&nbsp;Close&nbsp;pipe,&nbsp;restore&nbsp;stdout,&nbsp;get&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430757">w</span><span class="op" id="6430758">.</span><span class="ident" id="6430759">Close</span><span class="op" id="6430764">(</span><span class="op" id="6430765">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430769">os</span><span class="op" id="6430771">.</span><span class="ident" id="6430772">Stdout</span>&nbsp;<span class="op" id="6430779">=</span>&nbsp;<span class="ident" id="6430781">stdout</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430790">out</span>&nbsp;<span class="op" id="6430794">:=</span>&nbsp;<span class="op" id="6430797">&lt;-</span><span class="ident" id="6430799">outC</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430807">var</span>&nbsp;<span class="ident" id="6430811">fail</span>&nbsp;<span class="builtintype" id="6430816">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430825">err</span>&nbsp;<span class="op" id="6430829">:=</span>&nbsp;<span class="builtinfunc" id="6430832">recover</span><span class="op" id="6430839">(</span><span class="op" id="6430840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430844">if</span>&nbsp;<span class="ident" id="6430847">g</span><span class="op" id="6430848">,</span>&nbsp;<span class="ident" id="6430850">e</span>&nbsp;<span class="op" id="6430852">:=</span>&nbsp;<span class="ident" id="6430855">strings</span><span class="op" id="6430862">.</span><span class="ident" id="6430863">TrimSpace</span><span class="op" id="6430872">(</span><span class="ident" id="6430873">out</span><span class="op" id="6430876">)</span><span class="op" id="6430877">,</span>&nbsp;<span class="ident" id="6430879">strings</span><span class="op" id="6430886">.</span><span class="ident" id="6430887">TrimSpace</span><span class="op" id="6430896">(</span><span class="ident" id="6430897">eg</span><span class="op" id="6430899">.</span><span class="ident" id="6430900">Output</span><span class="op" id="6430906">)</span><span class="op" id="6430907">;</span>&nbsp;<span class="ident" id="6430909">g</span>&nbsp;<span class="op" id="6430911">!=</span>&nbsp;<span class="ident" id="6430914">e</span>&nbsp;<span class="op" id="6430916">&amp;&amp;</span>&nbsp;<span class="ident" id="6430919">err</span>&nbsp;<span class="op" id="6430923">==</span>&nbsp;<span class="ident" id="6430926">nil</span>&nbsp;<span class="op" id="6430930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6430935">fail</span>&nbsp;<span class="op" id="6430940">=</span>&nbsp;<span class="ident" id="6430942">fmt</span><span class="op" id="6430945">.</span><span class="ident" id="6430946">Sprintf</span><span class="op" id="6430953">(</span><span class="string" id="6430954">&#34;got:\n%s\nwant:\n%s\n&#34;</span><span class="op" id="6430977">,</span>&nbsp;<span class="ident" id="6430979">g</span><span class="op" id="6430980">,</span>&nbsp;<span class="ident" id="6430982">e</span><span class="op" id="6430983">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6430987">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6430991">if</span>&nbsp;<span class="ident" id="6430994">fail</span>&nbsp;<span class="op" id="6430999">!=</span>&nbsp;<span class="string" id="6431002">&#34;&#34;</span>&nbsp;<span class="op" id="6431005">||</span>&nbsp;<span class="ident" id="6431008">err</span>&nbsp;<span class="op" id="6431012">!=</span>&nbsp;<span class="ident" id="6431015">nil</span>&nbsp;<span class="op" id="6431019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431024">fmt</span><span class="op" id="6431027">.</span><span class="ident" id="6431028">Printf</span><span class="op" id="6431034">(</span><span class="string" id="6431035">&#34;---&nbsp;FAIL:&nbsp;%s&nbsp;(%s)\n%s&#34;</span><span class="op" id="6431058">,</span>&nbsp;<span class="ident" id="6431060">eg</span><span class="op" id="6431062">.</span><span class="ident" id="6431063">Name</span><span class="op" id="6431067">,</span>&nbsp;<span class="ident" id="6431069">dstr</span><span class="op" id="6431073">,</span>&nbsp;<span class="ident" id="6431075">fail</span><span class="op" id="6431079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431084">ok</span>&nbsp;<span class="op" id="6431087">=</span>&nbsp;<span class="builtintype" id="6431089">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431097">}</span>&nbsp;<span class="keyword" id="6431099">else</span>&nbsp;<span class="keyword" id="6431104">if</span>&nbsp;<span class="op" id="6431107">*</span><span class="ident" id="6431108">chatty</span>&nbsp;<span class="op" id="6431115">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431120">fmt</span><span class="op" id="6431123">.</span><span class="ident" id="6431124">Printf</span><span class="op" id="6431130">(</span><span class="string" id="6431131">&#34;---&nbsp;PASS:&nbsp;%s&nbsp;(%s)\n&#34;</span><span class="op" id="6431152">,</span>&nbsp;<span class="ident" id="6431154">eg</span><span class="op" id="6431156">.</span><span class="ident" id="6431157">Name</span><span class="op" id="6431161">,</span>&nbsp;<span class="ident" id="6431163">dstr</span><span class="op" id="6431167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431175">if</span>&nbsp;<span class="ident" id="6431178">err</span>&nbsp;<span class="op" id="6431182">!=</span>&nbsp;<span class="ident" id="6431185">nil</span>&nbsp;<span class="op" id="6431189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6431194">panic</span><span class="op" id="6431199">(</span><span class="ident" id="6431200">err</span><span class="op" id="6431203">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431207">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6431210">}</span><span class="op" id="6431211">(</span><span class="op" id="6431212">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6431216">//&nbsp;Run&nbsp;example.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6431233">eg</span><span class="op" id="6431235">.</span><span class="ident" id="6431236">F</span><span class="op" id="6431237">(</span><span class="op" id="6431238">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6431241">return</span><br>
<span class="lineno">100</span><span class="op" id="6431248">}</span>
</div>
</body>
</html>
