<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7707621">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7707676">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7707730">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="7707781">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707848">package</span>&nbsp;<span class="ident" id="7707856">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7707861">import</span>&nbsp;<span class="op" id="7707868">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707871">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707880">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707890">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707897">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707903">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707910">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707921">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7707932">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="7707939">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7707942">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708002">type</span>&nbsp;<span class="ident" id="7708007">ByteStruct</span>&nbsp;<span class="keyword" id="7708018">struct</span>&nbsp;<span class="op" id="7708025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708028">a</span>&nbsp;<span class="builtintype" id="7708030">byte</span>&nbsp;<span class="comment" id="7708035">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7708060">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="7708063">type</span>&nbsp;<span class="ident" id="7708068">StringStruct</span>&nbsp;<span class="keyword" id="7708081">struct</span>&nbsp;<span class="op" id="7708088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708091">s</span>&nbsp;<span class="builtintype" id="7708093">string</span>&nbsp;<span class="comment" id="7708100">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7708125">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="7708128">type</span>&nbsp;<span class="ident" id="7708133">ArrayStruct</span>&nbsp;<span class="keyword" id="7708145">struct</span>&nbsp;<span class="op" id="7708152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708155">a</span>&nbsp;<span class="op" id="7708157">[</span><span class="num" id="7708158">8192</span><span class="op" id="7708162">]</span><span class="builtintype" id="7708163">byte</span>&nbsp;<span class="comment" id="7708168">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="7708193">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708196">type</span>&nbsp;<span class="ident" id="7708201">Gobber</span>&nbsp;<span class="builtintype" id="7708208">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="7708213">type</span>&nbsp;<span class="ident" id="7708218">ValueGobber</span>&nbsp;<span class="builtintype" id="7708230">string</span>&nbsp;<span class="comment" id="7708237">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708287">type</span>&nbsp;<span class="ident" id="7708292">BinaryGobber</span>&nbsp;<span class="builtintype" id="7708305">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="7708310">type</span>&nbsp;<span class="ident" id="7708315">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="7708333">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708341">type</span>&nbsp;<span class="ident" id="7708346">TextGobber</span>&nbsp;<span class="builtintype" id="7708357">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708362">type</span>&nbsp;<span class="ident" id="7708367">TextValueGobber</span>&nbsp;<span class="builtintype" id="7708383">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="7708391">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708416">func</span>&nbsp;<span class="op" id="7708421">(</span><span class="ident" id="7708422">g</span>&nbsp;<span class="op" id="7708424">*</span><span class="ident" id="7708425">ByteStruct</span><span class="op" id="7708435">)</span>&nbsp;<span class="ident" id="7708437">GobEncode</span><span class="op" id="7708446">(</span><span class="op" id="7708447">)</span>&nbsp;<span class="op" id="7708449">(</span><span class="op" id="7708450">[</span><span class="op" id="7708451">]</span><span class="builtintype" id="7708452">byte</span><span class="op" id="7708456">,</span>&nbsp;<span class="builtintype" id="7708458">error</span><span class="op" id="7708463">)</span>&nbsp;<span class="op" id="7708465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708468">b</span>&nbsp;<span class="op" id="7708470">:=</span>&nbsp;<span class="builtinfunc" id="7708473">make</span><span class="op" id="7708477">(</span><span class="op" id="7708478">[</span><span class="op" id="7708479">]</span><span class="builtintype" id="7708480">byte</span><span class="op" id="7708484">,</span>&nbsp;<span class="num" id="7708486">3</span><span class="op" id="7708487">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708490">b</span><span class="op" id="7708491">[</span><span class="num" id="7708492">0</span><span class="op" id="7708493">]</span>&nbsp;<span class="op" id="7708495">=</span>&nbsp;<span class="ident" id="7708497">g</span><span class="op" id="7708498">.</span><span class="ident" id="7708499">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708502">b</span><span class="op" id="7708503">[</span><span class="num" id="7708504">1</span><span class="op" id="7708505">]</span>&nbsp;<span class="op" id="7708507">=</span>&nbsp;<span class="ident" id="7708509">g</span><span class="op" id="7708510">.</span><span class="ident" id="7708511">a</span>&nbsp;<span class="op" id="7708513">+</span>&nbsp;<span class="num" id="7708515">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708518">b</span><span class="op" id="7708519">[</span><span class="num" id="7708520">2</span><span class="op" id="7708521">]</span>&nbsp;<span class="op" id="7708523">=</span>&nbsp;<span class="ident" id="7708525">g</span><span class="op" id="7708526">.</span><span class="ident" id="7708527">a</span>&nbsp;<span class="op" id="7708529">+</span>&nbsp;<span class="num" id="7708531">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708534">return</span>&nbsp;<span class="ident" id="7708541">b</span><span class="op" id="7708542">,</span>&nbsp;<span class="ident" id="7708544">nil</span><br>
<span class="lineno"></span><span class="op" id="7708548">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="7708551">func</span>&nbsp;<span class="op" id="7708556">(</span><span class="ident" id="7708557">g</span>&nbsp;<span class="op" id="7708559">*</span><span class="ident" id="7708560">ByteStruct</span><span class="op" id="7708570">)</span>&nbsp;<span class="ident" id="7708572">GobDecode</span><span class="op" id="7708581">(</span><span class="ident" id="7708582">data</span>&nbsp;<span class="op" id="7708587">[</span><span class="op" id="7708588">]</span><span class="builtintype" id="7708589">byte</span><span class="op" id="7708593">)</span>&nbsp;<span class="builtintype" id="7708595">error</span>&nbsp;<span class="op" id="7708601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708604">if</span>&nbsp;<span class="ident" id="7708607">g</span>&nbsp;<span class="op" id="7708609">==</span>&nbsp;<span class="ident" id="7708612">nil</span>&nbsp;<span class="op" id="7708616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708620">return</span>&nbsp;<span class="ident" id="7708627">errors</span><span class="op" id="7708633">.</span><span class="ident" id="7708634">New</span><span class="op" id="7708637">(</span><span class="string" id="7708638">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="7708652">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708655">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7708658">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708696">if</span>&nbsp;<span class="builtinfunc" id="7708699">len</span><span class="op" id="7708702">(</span><span class="ident" id="7708703">data</span><span class="op" id="7708707">)</span>&nbsp;<span class="op" id="7708709">==</span>&nbsp;<span class="num" id="7708712">0</span>&nbsp;<span class="op" id="7708714">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708718">return</span>&nbsp;<span class="ident" id="7708725">io</span><span class="op" id="7708727">.</span><span class="ident" id="7708728">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7708736">g</span><span class="op" id="7708737">.</span><span class="ident" id="7708738">a</span>&nbsp;<span class="op" id="7708740">=</span>&nbsp;<span class="ident" id="7708742">data</span><span class="op" id="7708746">[</span><span class="num" id="7708747">0</span><span class="op" id="7708748">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708751">for</span>&nbsp;<span class="ident" id="7708755">i</span><span class="op" id="7708756">,</span>&nbsp;<span class="ident" id="7708758">c</span>&nbsp;<span class="op" id="7708760">:=</span>&nbsp;<span class="keyword" id="7708763">range</span>&nbsp;<span class="ident" id="7708769">data</span>&nbsp;<span class="op" id="7708774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708778">if</span>&nbsp;<span class="ident" id="7708781">c</span>&nbsp;<span class="op" id="7708783">!=</span>&nbsp;<span class="ident" id="7708786">g</span><span class="op" id="7708787">.</span><span class="ident" id="7708788">a</span><span class="op" id="7708789">+</span><span class="builtintype" id="7708790">byte</span><span class="op" id="7708794">(</span><span class="ident" id="7708795">i</span><span class="op" id="7708796">)</span>&nbsp;<span class="op" id="7708798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708803">return</span>&nbsp;<span class="ident" id="7708810">errors</span><span class="op" id="7708816">.</span><span class="ident" id="7708817">New</span><span class="op" id="7708820">(</span><span class="string" id="7708821">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7708844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708848">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7708851">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708854">return</span>&nbsp;<span class="ident" id="7708861">nil</span><br>
<span class="lineno"></span><span class="op" id="7708865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708868">func</span>&nbsp;<span class="op" id="7708873">(</span><span class="ident" id="7708874">g</span>&nbsp;<span class="op" id="7708876">*</span><span class="ident" id="7708877">StringStruct</span><span class="op" id="7708889">)</span>&nbsp;<span class="ident" id="7708891">GobEncode</span><span class="op" id="7708900">(</span><span class="op" id="7708901">)</span>&nbsp;<span class="op" id="7708903">(</span><span class="op" id="7708904">[</span><span class="op" id="7708905">]</span><span class="builtintype" id="7708906">byte</span><span class="op" id="7708910">,</span>&nbsp;<span class="builtintype" id="7708912">error</span><span class="op" id="7708917">)</span>&nbsp;<span class="op" id="7708919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7708922">return</span>&nbsp;<span class="op" id="7708929">[</span><span class="op" id="7708930">]</span><span class="builtintype" id="7708931">byte</span><span class="op" id="7708935">(</span><span class="ident" id="7708936">g</span><span class="op" id="7708937">.</span><span class="ident" id="7708938">s</span><span class="op" id="7708939">)</span><span class="op" id="7708940">,</span>&nbsp;<span class="ident" id="7708942">nil</span><br>
<span class="lineno">75</span><span class="op" id="7708946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7708949">func</span>&nbsp;<span class="op" id="7708954">(</span><span class="ident" id="7708955">g</span>&nbsp;<span class="op" id="7708957">*</span><span class="ident" id="7708958">StringStruct</span><span class="op" id="7708970">)</span>&nbsp;<span class="ident" id="7708972">GobDecode</span><span class="op" id="7708981">(</span><span class="ident" id="7708982">data</span>&nbsp;<span class="op" id="7708987">[</span><span class="op" id="7708988">]</span><span class="builtintype" id="7708989">byte</span><span class="op" id="7708993">)</span>&nbsp;<span class="builtintype" id="7708995">error</span>&nbsp;<span class="op" id="7709001">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7709004">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709042">if</span>&nbsp;<span class="builtinfunc" id="7709045">len</span><span class="op" id="7709048">(</span><span class="ident" id="7709049">data</span><span class="op" id="7709053">)</span>&nbsp;<span class="op" id="7709055">==</span>&nbsp;<span class="num" id="7709058">0</span>&nbsp;<span class="op" id="7709060">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709064">return</span>&nbsp;<span class="ident" id="7709071">io</span><span class="op" id="7709073">.</span><span class="ident" id="7709074">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709082">a</span>&nbsp;<span class="op" id="7709084">:=</span>&nbsp;<span class="ident" id="7709087">data</span><span class="op" id="7709091">[</span><span class="num" id="7709092">0</span><span class="op" id="7709093">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709096">for</span>&nbsp;<span class="ident" id="7709100">i</span><span class="op" id="7709101">,</span>&nbsp;<span class="ident" id="7709103">c</span>&nbsp;<span class="op" id="7709105">:=</span>&nbsp;<span class="keyword" id="7709108">range</span>&nbsp;<span class="ident" id="7709114">data</span>&nbsp;<span class="op" id="7709119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709123">if</span>&nbsp;<span class="ident" id="7709126">c</span>&nbsp;<span class="op" id="7709128">!=</span>&nbsp;<span class="ident" id="7709131">a</span><span class="op" id="7709132">+</span><span class="builtintype" id="7709133">byte</span><span class="op" id="7709137">(</span><span class="ident" id="7709138">i</span><span class="op" id="7709139">)</span>&nbsp;<span class="op" id="7709141">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709146">return</span>&nbsp;<span class="ident" id="7709153">errors</span><span class="op" id="7709159">.</span><span class="ident" id="7709160">New</span><span class="op" id="7709163">(</span><span class="string" id="7709164">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="7709187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709191">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709197">g</span><span class="op" id="7709198">.</span><span class="ident" id="7709199">s</span>&nbsp;<span class="op" id="7709201">=</span>&nbsp;<span class="builtintype" id="7709203">string</span><span class="op" id="7709209">(</span><span class="ident" id="7709210">data</span><span class="op" id="7709214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709217">return</span>&nbsp;<span class="ident" id="7709224">nil</span><br>
<span class="lineno">90</span><span class="op" id="7709228">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709231">func</span>&nbsp;<span class="op" id="7709236">(</span><span class="ident" id="7709237">a</span>&nbsp;<span class="op" id="7709239">*</span><span class="ident" id="7709240">ArrayStruct</span><span class="op" id="7709251">)</span>&nbsp;<span class="ident" id="7709253">GobEncode</span><span class="op" id="7709262">(</span><span class="op" id="7709263">)</span>&nbsp;<span class="op" id="7709265">(</span><span class="op" id="7709266">[</span><span class="op" id="7709267">]</span><span class="builtintype" id="7709268">byte</span><span class="op" id="7709272">,</span>&nbsp;<span class="builtintype" id="7709274">error</span><span class="op" id="7709279">)</span>&nbsp;<span class="op" id="7709281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709284">return</span>&nbsp;<span class="ident" id="7709291">a</span><span class="op" id="7709292">.</span><span class="ident" id="7709293">a</span><span class="op" id="7709294">[</span><span class="op" id="7709295">:</span><span class="op" id="7709296">]</span><span class="op" id="7709297">,</span>&nbsp;<span class="ident" id="7709299">nil</span><br>
<span class="lineno"></span><span class="op" id="7709303">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="7709306">func</span>&nbsp;<span class="op" id="7709311">(</span><span class="ident" id="7709312">a</span>&nbsp;<span class="op" id="7709314">*</span><span class="ident" id="7709315">ArrayStruct</span><span class="op" id="7709326">)</span>&nbsp;<span class="ident" id="7709328">GobDecode</span><span class="op" id="7709337">(</span><span class="ident" id="7709338">data</span>&nbsp;<span class="op" id="7709343">[</span><span class="op" id="7709344">]</span><span class="builtintype" id="7709345">byte</span><span class="op" id="7709349">)</span>&nbsp;<span class="builtintype" id="7709351">error</span>&nbsp;<span class="op" id="7709357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709360">if</span>&nbsp;<span class="builtinfunc" id="7709363">len</span><span class="op" id="7709366">(</span><span class="ident" id="7709367">data</span><span class="op" id="7709371">)</span>&nbsp;<span class="op" id="7709373">!=</span>&nbsp;<span class="builtinfunc" id="7709376">len</span><span class="op" id="7709379">(</span><span class="ident" id="7709380">a</span><span class="op" id="7709381">.</span><span class="ident" id="7709382">a</span><span class="op" id="7709383">)</span>&nbsp;<span class="op" id="7709385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709389">return</span>&nbsp;<span class="ident" id="7709396">errors</span><span class="op" id="7709402">.</span><span class="ident" id="7709403">New</span><span class="op" id="7709406">(</span><span class="string" id="7709407">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="7709437">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7709440">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7709443">copy</span><span class="op" id="7709447">(</span><span class="ident" id="7709448">a</span><span class="op" id="7709449">.</span><span class="ident" id="7709450">a</span><span class="op" id="7709451">[</span><span class="op" id="7709452">:</span><span class="op" id="7709453">]</span><span class="op" id="7709454">,</span>&nbsp;<span class="ident" id="7709456">data</span><span class="op" id="7709460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709463">return</span>&nbsp;<span class="ident" id="7709470">nil</span><br>
<span class="lineno"></span><span class="op" id="7709474">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709477">func</span>&nbsp;<span class="op" id="7709482">(</span><span class="ident" id="7709483">g</span>&nbsp;<span class="op" id="7709485">*</span><span class="ident" id="7709486">Gobber</span><span class="op" id="7709492">)</span>&nbsp;<span class="ident" id="7709494">GobEncode</span><span class="op" id="7709503">(</span><span class="op" id="7709504">)</span>&nbsp;<span class="op" id="7709506">(</span><span class="op" id="7709507">[</span><span class="op" id="7709508">]</span><span class="builtintype" id="7709509">byte</span><span class="op" id="7709513">,</span>&nbsp;<span class="builtintype" id="7709515">error</span><span class="op" id="7709520">)</span>&nbsp;<span class="op" id="7709522">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709525">return</span>&nbsp;<span class="op" id="7709532">[</span><span class="op" id="7709533">]</span><span class="builtintype" id="7709534">byte</span><span class="op" id="7709538">(</span><span class="ident" id="7709539">fmt</span><span class="op" id="7709542">.</span><span class="ident" id="7709543">Sprintf</span><span class="op" id="7709550">(</span><span class="string" id="7709551">&#34;VALUE=%d&#34;</span><span class="op" id="7709561">,</span>&nbsp;<span class="op" id="7709563">*</span><span class="ident" id="7709564">g</span><span class="op" id="7709565">)</span><span class="op" id="7709566">)</span><span class="op" id="7709567">,</span>&nbsp;<span class="ident" id="7709569">nil</span><br>
<span class="lineno"></span><span class="op" id="7709573">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709576">func</span>&nbsp;<span class="op" id="7709581">(</span><span class="ident" id="7709582">g</span>&nbsp;<span class="op" id="7709584">*</span><span class="ident" id="7709585">Gobber</span><span class="op" id="7709591">)</span>&nbsp;<span class="ident" id="7709593">GobDecode</span><span class="op" id="7709602">(</span><span class="ident" id="7709603">data</span>&nbsp;<span class="op" id="7709608">[</span><span class="op" id="7709609">]</span><span class="builtintype" id="7709610">byte</span><span class="op" id="7709614">)</span>&nbsp;<span class="builtintype" id="7709616">error</span>&nbsp;<span class="op" id="7709622">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709625">_</span><span class="op" id="7709626">,</span>&nbsp;<span class="ident" id="7709628">err</span>&nbsp;<span class="op" id="7709632">:=</span>&nbsp;<span class="ident" id="7709635">fmt</span><span class="op" id="7709638">.</span><span class="ident" id="7709639">Sscanf</span><span class="op" id="7709645">(</span><span class="builtintype" id="7709646">string</span><span class="op" id="7709652">(</span><span class="ident" id="7709653">data</span><span class="op" id="7709657">)</span><span class="op" id="7709658">,</span>&nbsp;<span class="string" id="7709660">&#34;VALUE=%d&#34;</span><span class="op" id="7709670">,</span>&nbsp;<span class="op" id="7709672">(</span><span class="op" id="7709673">*</span><span class="builtintype" id="7709674">int</span><span class="op" id="7709677">)</span><span class="op" id="7709678">(</span><span class="ident" id="7709679">g</span><span class="op" id="7709680">)</span><span class="op" id="7709681">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709684">return</span>&nbsp;<span class="ident" id="7709691">err</span><br>
<span class="lineno"></span><span class="op" id="7709695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709698">func</span>&nbsp;<span class="op" id="7709703">(</span><span class="ident" id="7709704">g</span>&nbsp;<span class="op" id="7709706">*</span><span class="ident" id="7709707">BinaryGobber</span><span class="op" id="7709719">)</span>&nbsp;<span class="ident" id="7709721">MarshalBinary</span><span class="op" id="7709734">(</span><span class="op" id="7709735">)</span>&nbsp;<span class="op" id="7709737">(</span><span class="op" id="7709738">[</span><span class="op" id="7709739">]</span><span class="builtintype" id="7709740">byte</span><span class="op" id="7709744">,</span>&nbsp;<span class="builtintype" id="7709746">error</span><span class="op" id="7709751">)</span>&nbsp;<span class="op" id="7709753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709756">return</span>&nbsp;<span class="op" id="7709763">[</span><span class="op" id="7709764">]</span><span class="builtintype" id="7709765">byte</span><span class="op" id="7709769">(</span><span class="ident" id="7709770">fmt</span><span class="op" id="7709773">.</span><span class="ident" id="7709774">Sprintf</span><span class="op" id="7709781">(</span><span class="string" id="7709782">&#34;VALUE=%d&#34;</span><span class="op" id="7709792">,</span>&nbsp;<span class="op" id="7709794">*</span><span class="ident" id="7709795">g</span><span class="op" id="7709796">)</span><span class="op" id="7709797">)</span><span class="op" id="7709798">,</span>&nbsp;<span class="ident" id="7709800">nil</span><br>
<span class="lineno">115</span><span class="op" id="7709804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709807">func</span>&nbsp;<span class="op" id="7709812">(</span><span class="ident" id="7709813">g</span>&nbsp;<span class="op" id="7709815">*</span><span class="ident" id="7709816">BinaryGobber</span><span class="op" id="7709828">)</span>&nbsp;<span class="ident" id="7709830">UnmarshalBinary</span><span class="op" id="7709845">(</span><span class="ident" id="7709846">data</span>&nbsp;<span class="op" id="7709851">[</span><span class="op" id="7709852">]</span><span class="builtintype" id="7709853">byte</span><span class="op" id="7709857">)</span>&nbsp;<span class="builtintype" id="7709859">error</span>&nbsp;<span class="op" id="7709865">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7709868">_</span><span class="op" id="7709869">,</span>&nbsp;<span class="ident" id="7709871">err</span>&nbsp;<span class="op" id="7709875">:=</span>&nbsp;<span class="ident" id="7709878">fmt</span><span class="op" id="7709881">.</span><span class="ident" id="7709882">Sscanf</span><span class="op" id="7709888">(</span><span class="builtintype" id="7709889">string</span><span class="op" id="7709895">(</span><span class="ident" id="7709896">data</span><span class="op" id="7709900">)</span><span class="op" id="7709901">,</span>&nbsp;<span class="string" id="7709903">&#34;VALUE=%d&#34;</span><span class="op" id="7709913">,</span>&nbsp;<span class="op" id="7709915">(</span><span class="op" id="7709916">*</span><span class="builtintype" id="7709917">int</span><span class="op" id="7709920">)</span><span class="op" id="7709921">(</span><span class="ident" id="7709922">g</span><span class="op" id="7709923">)</span><span class="op" id="7709924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709927">return</span>&nbsp;<span class="ident" id="7709934">err</span><br>
<span class="lineno">120</span><span class="op" id="7709938">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7709941">func</span>&nbsp;<span class="op" id="7709946">(</span><span class="ident" id="7709947">g</span>&nbsp;<span class="op" id="7709949">*</span><span class="ident" id="7709950">TextGobber</span><span class="op" id="7709960">)</span>&nbsp;<span class="ident" id="7709962">MarshalText</span><span class="op" id="7709973">(</span><span class="op" id="7709974">)</span>&nbsp;<span class="op" id="7709976">(</span><span class="op" id="7709977">[</span><span class="op" id="7709978">]</span><span class="builtintype" id="7709979">byte</span><span class="op" id="7709983">,</span>&nbsp;<span class="builtintype" id="7709985">error</span><span class="op" id="7709990">)</span>&nbsp;<span class="op" id="7709992">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7709995">return</span>&nbsp;<span class="op" id="7710002">[</span><span class="op" id="7710003">]</span><span class="builtintype" id="7710004">byte</span><span class="op" id="7710008">(</span><span class="ident" id="7710009">fmt</span><span class="op" id="7710012">.</span><span class="ident" id="7710013">Sprintf</span><span class="op" id="7710020">(</span><span class="string" id="7710021">&#34;VALUE=%d&#34;</span><span class="op" id="7710031">,</span>&nbsp;<span class="op" id="7710033">*</span><span class="ident" id="7710034">g</span><span class="op" id="7710035">)</span><span class="op" id="7710036">)</span><span class="op" id="7710037">,</span>&nbsp;<span class="ident" id="7710039">nil</span><br>
<span class="lineno"></span><span class="op" id="7710043">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="7710046">func</span>&nbsp;<span class="op" id="7710051">(</span><span class="ident" id="7710052">g</span>&nbsp;<span class="op" id="7710054">*</span><span class="ident" id="7710055">TextGobber</span><span class="op" id="7710065">)</span>&nbsp;<span class="ident" id="7710067">UnmarshalText</span><span class="op" id="7710080">(</span><span class="ident" id="7710081">data</span>&nbsp;<span class="op" id="7710086">[</span><span class="op" id="7710087">]</span><span class="builtintype" id="7710088">byte</span><span class="op" id="7710092">)</span>&nbsp;<span class="builtintype" id="7710094">error</span>&nbsp;<span class="op" id="7710100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710103">_</span><span class="op" id="7710104">,</span>&nbsp;<span class="ident" id="7710106">err</span>&nbsp;<span class="op" id="7710110">:=</span>&nbsp;<span class="ident" id="7710113">fmt</span><span class="op" id="7710116">.</span><span class="ident" id="7710117">Sscanf</span><span class="op" id="7710123">(</span><span class="builtintype" id="7710124">string</span><span class="op" id="7710130">(</span><span class="ident" id="7710131">data</span><span class="op" id="7710135">)</span><span class="op" id="7710136">,</span>&nbsp;<span class="string" id="7710138">&#34;VALUE=%d&#34;</span><span class="op" id="7710148">,</span>&nbsp;<span class="op" id="7710150">(</span><span class="op" id="7710151">*</span><span class="builtintype" id="7710152">int</span><span class="op" id="7710155">)</span><span class="op" id="7710156">(</span><span class="ident" id="7710157">g</span><span class="op" id="7710158">)</span><span class="op" id="7710159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710162">return</span>&nbsp;<span class="ident" id="7710169">err</span><br>
<span class="lineno"></span><span class="op" id="7710173">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="7710176">func</span>&nbsp;<span class="op" id="7710181">(</span><span class="ident" id="7710182">v</span>&nbsp;<span class="ident" id="7710184">ValueGobber</span><span class="op" id="7710195">)</span>&nbsp;<span class="ident" id="7710197">GobEncode</span><span class="op" id="7710206">(</span><span class="op" id="7710207">)</span>&nbsp;<span class="op" id="7710209">(</span><span class="op" id="7710210">[</span><span class="op" id="7710211">]</span><span class="builtintype" id="7710212">byte</span><span class="op" id="7710216">,</span>&nbsp;<span class="builtintype" id="7710218">error</span><span class="op" id="7710223">)</span>&nbsp;<span class="op" id="7710225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710228">return</span>&nbsp;<span class="op" id="7710235">[</span><span class="op" id="7710236">]</span><span class="builtintype" id="7710237">byte</span><span class="op" id="7710241">(</span><span class="ident" id="7710242">fmt</span><span class="op" id="7710245">.</span><span class="ident" id="7710246">Sprintf</span><span class="op" id="7710253">(</span><span class="string" id="7710254">&#34;VALUE=%s&#34;</span><span class="op" id="7710264">,</span>&nbsp;<span class="ident" id="7710266">v</span><span class="op" id="7710267">)</span><span class="op" id="7710268">)</span><span class="op" id="7710269">,</span>&nbsp;<span class="ident" id="7710271">nil</span><br>
<span class="lineno"></span><span class="op" id="7710275">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="7710278">func</span>&nbsp;<span class="op" id="7710283">(</span><span class="ident" id="7710284">v</span>&nbsp;<span class="op" id="7710286">*</span><span class="ident" id="7710287">ValueGobber</span><span class="op" id="7710298">)</span>&nbsp;<span class="ident" id="7710300">GobDecode</span><span class="op" id="7710309">(</span><span class="ident" id="7710310">data</span>&nbsp;<span class="op" id="7710315">[</span><span class="op" id="7710316">]</span><span class="builtintype" id="7710317">byte</span><span class="op" id="7710321">)</span>&nbsp;<span class="builtintype" id="7710323">error</span>&nbsp;<span class="op" id="7710329">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710332">_</span><span class="op" id="7710333">,</span>&nbsp;<span class="ident" id="7710335">err</span>&nbsp;<span class="op" id="7710339">:=</span>&nbsp;<span class="ident" id="7710342">fmt</span><span class="op" id="7710345">.</span><span class="ident" id="7710346">Sscanf</span><span class="op" id="7710352">(</span><span class="builtintype" id="7710353">string</span><span class="op" id="7710359">(</span><span class="ident" id="7710360">data</span><span class="op" id="7710364">)</span><span class="op" id="7710365">,</span>&nbsp;<span class="string" id="7710367">&#34;VALUE=%s&#34;</span><span class="op" id="7710377">,</span>&nbsp;<span class="op" id="7710379">(</span><span class="op" id="7710380">*</span><span class="builtintype" id="7710381">string</span><span class="op" id="7710387">)</span><span class="op" id="7710388">(</span><span class="ident" id="7710389">v</span><span class="op" id="7710390">)</span><span class="op" id="7710391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710394">return</span>&nbsp;<span class="ident" id="7710401">err</span><br>
<span class="lineno"></span><span class="op" id="7710405">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="7710408">func</span>&nbsp;<span class="op" id="7710413">(</span><span class="ident" id="7710414">v</span>&nbsp;<span class="ident" id="7710416">BinaryValueGobber</span><span class="op" id="7710433">)</span>&nbsp;<span class="ident" id="7710435">MarshalBinary</span><span class="op" id="7710448">(</span><span class="op" id="7710449">)</span>&nbsp;<span class="op" id="7710451">(</span><span class="op" id="7710452">[</span><span class="op" id="7710453">]</span><span class="builtintype" id="7710454">byte</span><span class="op" id="7710458">,</span>&nbsp;<span class="builtintype" id="7710460">error</span><span class="op" id="7710465">)</span>&nbsp;<span class="op" id="7710467">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710470">return</span>&nbsp;<span class="op" id="7710477">[</span><span class="op" id="7710478">]</span><span class="builtintype" id="7710479">byte</span><span class="op" id="7710483">(</span><span class="ident" id="7710484">fmt</span><span class="op" id="7710487">.</span><span class="ident" id="7710488">Sprintf</span><span class="op" id="7710495">(</span><span class="string" id="7710496">&#34;VALUE=%s&#34;</span><span class="op" id="7710506">,</span>&nbsp;<span class="ident" id="7710508">v</span><span class="op" id="7710509">)</span><span class="op" id="7710510">)</span><span class="op" id="7710511">,</span>&nbsp;<span class="ident" id="7710513">nil</span><br>
<span class="lineno"></span><span class="op" id="7710517">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710520">func</span>&nbsp;<span class="op" id="7710525">(</span><span class="ident" id="7710526">v</span>&nbsp;<span class="op" id="7710528">*</span><span class="ident" id="7710529">BinaryValueGobber</span><span class="op" id="7710546">)</span>&nbsp;<span class="ident" id="7710548">UnmarshalBinary</span><span class="op" id="7710563">(</span><span class="ident" id="7710564">data</span>&nbsp;<span class="op" id="7710569">[</span><span class="op" id="7710570">]</span><span class="builtintype" id="7710571">byte</span><span class="op" id="7710575">)</span>&nbsp;<span class="builtintype" id="7710577">error</span>&nbsp;<span class="op" id="7710583">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710586">_</span><span class="op" id="7710587">,</span>&nbsp;<span class="ident" id="7710589">err</span>&nbsp;<span class="op" id="7710593">:=</span>&nbsp;<span class="ident" id="7710596">fmt</span><span class="op" id="7710599">.</span><span class="ident" id="7710600">Sscanf</span><span class="op" id="7710606">(</span><span class="builtintype" id="7710607">string</span><span class="op" id="7710613">(</span><span class="ident" id="7710614">data</span><span class="op" id="7710618">)</span><span class="op" id="7710619">,</span>&nbsp;<span class="string" id="7710621">&#34;VALUE=%s&#34;</span><span class="op" id="7710631">,</span>&nbsp;<span class="op" id="7710633">(</span><span class="op" id="7710634">*</span><span class="builtintype" id="7710635">string</span><span class="op" id="7710641">)</span><span class="op" id="7710642">(</span><span class="ident" id="7710643">v</span><span class="op" id="7710644">)</span><span class="op" id="7710645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710648">return</span>&nbsp;<span class="ident" id="7710655">err</span><br>
<span class="lineno"></span><span class="op" id="7710659">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710662">func</span>&nbsp;<span class="op" id="7710667">(</span><span class="ident" id="7710668">v</span>&nbsp;<span class="ident" id="7710670">TextValueGobber</span><span class="op" id="7710685">)</span>&nbsp;<span class="ident" id="7710687">MarshalText</span><span class="op" id="7710698">(</span><span class="op" id="7710699">)</span>&nbsp;<span class="op" id="7710701">(</span><span class="op" id="7710702">[</span><span class="op" id="7710703">]</span><span class="builtintype" id="7710704">byte</span><span class="op" id="7710708">,</span>&nbsp;<span class="builtintype" id="7710710">error</span><span class="op" id="7710715">)</span>&nbsp;<span class="op" id="7710717">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710720">return</span>&nbsp;<span class="op" id="7710727">[</span><span class="op" id="7710728">]</span><span class="builtintype" id="7710729">byte</span><span class="op" id="7710733">(</span><span class="ident" id="7710734">fmt</span><span class="op" id="7710737">.</span><span class="ident" id="7710738">Sprintf</span><span class="op" id="7710745">(</span><span class="string" id="7710746">&#34;VALUE=%s&#34;</span><span class="op" id="7710756">,</span>&nbsp;<span class="ident" id="7710758">v</span><span class="op" id="7710759">)</span><span class="op" id="7710760">)</span><span class="op" id="7710761">,</span>&nbsp;<span class="ident" id="7710763">nil</span><br>
<span class="lineno"></span><span class="op" id="7710767">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7710770">func</span>&nbsp;<span class="op" id="7710775">(</span><span class="ident" id="7710776">v</span>&nbsp;<span class="op" id="7710778">*</span><span class="ident" id="7710779">TextValueGobber</span><span class="op" id="7710794">)</span>&nbsp;<span class="ident" id="7710796">UnmarshalText</span><span class="op" id="7710809">(</span><span class="ident" id="7710810">data</span>&nbsp;<span class="op" id="7710815">[</span><span class="op" id="7710816">]</span><span class="builtintype" id="7710817">byte</span><span class="op" id="7710821">)</span>&nbsp;<span class="builtintype" id="7710823">error</span>&nbsp;<span class="op" id="7710829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710832">_</span><span class="op" id="7710833">,</span>&nbsp;<span class="ident" id="7710835">err</span>&nbsp;<span class="op" id="7710839">:=</span>&nbsp;<span class="ident" id="7710842">fmt</span><span class="op" id="7710845">.</span><span class="ident" id="7710846">Sscanf</span><span class="op" id="7710852">(</span><span class="builtintype" id="7710853">string</span><span class="op" id="7710859">(</span><span class="ident" id="7710860">data</span><span class="op" id="7710864">)</span><span class="op" id="7710865">,</span>&nbsp;<span class="string" id="7710867">&#34;VALUE=%s&#34;</span><span class="op" id="7710877">,</span>&nbsp;<span class="op" id="7710879">(</span><span class="op" id="7710880">*</span><span class="builtintype" id="7710881">string</span><span class="op" id="7710887">)</span><span class="op" id="7710888">(</span><span class="ident" id="7710889">v</span><span class="op" id="7710890">)</span><span class="op" id="7710891">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7710894">return</span>&nbsp;<span class="ident" id="7710901">err</span><br>
<span class="lineno"></span><span class="op" id="7710905">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7710908">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="7710954">type</span>&nbsp;<span class="ident" id="7710959">GobTest0</span>&nbsp;<span class="keyword" id="7710968">struct</span>&nbsp;<span class="op" id="7710975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7710978">X</span>&nbsp;<span class="builtintype" id="7710980">int</span>&nbsp;<span class="comment" id="7710984">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711041">G</span>&nbsp;<span class="op" id="7711043">*</span><span class="ident" id="7711044">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="7711055">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="7711058">type</span>&nbsp;<span class="ident" id="7711063">GobTest1</span>&nbsp;<span class="keyword" id="7711072">struct</span>&nbsp;<span class="op" id="7711079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711082">X</span>&nbsp;<span class="builtintype" id="7711084">int</span>&nbsp;<span class="comment" id="7711088">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711145">G</span>&nbsp;<span class="op" id="7711147">*</span><span class="ident" id="7711148">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="7711161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="7711164">type</span>&nbsp;<span class="ident" id="7711169">GobTest2</span>&nbsp;<span class="keyword" id="7711178">struct</span>&nbsp;<span class="op" id="7711185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711188">X</span>&nbsp;<span class="builtintype" id="7711190">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7711197">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711254">G</span>&nbsp;<span class="builtintype" id="7711256">string</span>&nbsp;<span class="comment" id="7711263">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="7711307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="7711310">type</span>&nbsp;<span class="ident" id="7711315">GobTest3</span>&nbsp;<span class="keyword" id="7711324">struct</span>&nbsp;<span class="op" id="7711331">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711334">X</span>&nbsp;<span class="builtintype" id="7711336">int</span>&nbsp;<span class="comment" id="7711340">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711397">G</span>&nbsp;<span class="op" id="7711399">*</span><span class="ident" id="7711400">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711408">B</span>&nbsp;<span class="op" id="7711410">*</span><span class="ident" id="7711411">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711425">T</span>&nbsp;<span class="op" id="7711427">*</span><span class="ident" id="7711428">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="7711439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7711442">type</span>&nbsp;<span class="ident" id="7711447">GobTest4</span>&nbsp;<span class="keyword" id="7711456">struct</span>&nbsp;<span class="op" id="7711463">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711466">X</span>&nbsp;&nbsp;<span class="builtintype" id="7711469">int</span>&nbsp;<span class="comment" id="7711473">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711530">V</span>&nbsp;&nbsp;<span class="ident" id="7711533">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711546">BV</span>&nbsp;<span class="ident" id="7711549">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711568">TV</span>&nbsp;<span class="ident" id="7711571">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7711587">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7711590">type</span>&nbsp;<span class="ident" id="7711595">GobTest5</span>&nbsp;<span class="keyword" id="7711604">struct</span>&nbsp;<span class="op" id="7711611">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711614">X</span>&nbsp;&nbsp;<span class="builtintype" id="7711617">int</span>&nbsp;<span class="comment" id="7711621">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711678">V</span>&nbsp;&nbsp;<span class="op" id="7711681">*</span><span class="ident" id="7711682">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711695">BV</span>&nbsp;<span class="op" id="7711698">*</span><span class="ident" id="7711699">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711718">TV</span>&nbsp;<span class="op" id="7711721">*</span><span class="ident" id="7711722">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7711738">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="7711741">type</span>&nbsp;<span class="ident" id="7711746">GobTest6</span>&nbsp;<span class="keyword" id="7711755">struct</span>&nbsp;<span class="op" id="7711762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711765">X</span>&nbsp;&nbsp;<span class="builtintype" id="7711768">int</span>&nbsp;<span class="comment" id="7711772">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711829">V</span>&nbsp;&nbsp;<span class="ident" id="7711832">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711845">W</span>&nbsp;&nbsp;<span class="op" id="7711848">*</span><span class="ident" id="7711849">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711862">BV</span>&nbsp;<span class="ident" id="7711865">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711884">BW</span>&nbsp;<span class="op" id="7711887">*</span><span class="ident" id="7711888">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711907">TV</span>&nbsp;<span class="ident" id="7711910">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711927">TW</span>&nbsp;<span class="op" id="7711930">*</span><span class="ident" id="7711931">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7711947">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="7711950">type</span>&nbsp;<span class="ident" id="7711955">GobTest7</span>&nbsp;<span class="keyword" id="7711964">struct</span>&nbsp;<span class="op" id="7711971">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7711974">X</span>&nbsp;&nbsp;<span class="builtintype" id="7711977">int</span>&nbsp;<span class="comment" id="7711981">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712038">V</span>&nbsp;&nbsp;<span class="op" id="7712041">*</span><span class="ident" id="7712042">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712055">W</span>&nbsp;&nbsp;<span class="ident" id="7712058">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712071">BV</span>&nbsp;<span class="op" id="7712074">*</span><span class="ident" id="7712075">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712094">BW</span>&nbsp;<span class="ident" id="7712097">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712116">TV</span>&nbsp;<span class="op" id="7712119">*</span><span class="ident" id="7712120">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712137">TW</span>&nbsp;<span class="ident" id="7712140">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="7712156">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="7712159">type</span>&nbsp;<span class="ident" id="7712164">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="7712185">struct</span>&nbsp;<span class="op" id="7712192">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712195">X</span>&nbsp;<span class="builtintype" id="7712197">int</span>&nbsp;<span class="comment" id="7712201">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="7712257">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="7712260">type</span>&nbsp;<span class="ident" id="7712265">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="7712284">struct</span>&nbsp;<span class="op" id="7712291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712294">X</span>&nbsp;<span class="builtintype" id="7712296">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712309">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712366">G</span>&nbsp;<span class="ident" id="7712368">StringStruct</span>&nbsp;<span class="comment" id="7712381">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7712399">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="7712402">type</span>&nbsp;<span class="ident" id="7712407">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="7712429">struct</span>&nbsp;<span class="op" id="7712436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712439">X</span>&nbsp;<span class="builtintype" id="7712441">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712457">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712514">G</span>&nbsp;<span class="op" id="7712516">*</span><span class="op" id="7712517">*</span><span class="op" id="7712518">*</span><span class="ident" id="7712519">StringStruct</span>&nbsp;<span class="comment" id="7712532">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7712565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="7712568">type</span>&nbsp;<span class="ident" id="7712573">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="7712592">struct</span>&nbsp;<span class="op" id="7712599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712602">X</span>&nbsp;<span class="builtintype" id="7712604">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712616">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712673">A</span>&nbsp;<span class="ident" id="7712675">ArrayStruct</span>&nbsp;<span class="comment" id="7712687">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="7712705">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="7712708">type</span>&nbsp;<span class="ident" id="7712713">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="7712740">struct</span>&nbsp;<span class="op" id="7712747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712750">X</span>&nbsp;<span class="builtintype" id="7712752">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7712767">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712824">A</span>&nbsp;<span class="op" id="7712826">*</span><span class="op" id="7712827">*</span><span class="op" id="7712828">*</span><span class="ident" id="7712829">ArrayStruct</span>&nbsp;<span class="comment" id="7712841">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="7712878">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="7712881">func</span>&nbsp;<span class="ident" id="7712886">TestGobEncoderField</span><span class="op" id="7712905">(</span><span class="ident" id="7712906">t</span>&nbsp;<span class="op" id="7712908">*</span><span class="ident" id="7712909">testing</span><span class="op" id="7712916">.</span><span class="ident" id="7712917">T</span><span class="op" id="7712918">)</span>&nbsp;<span class="op" id="7712920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712923">b</span>&nbsp;<span class="op" id="7712925">:=</span>&nbsp;<span class="builtinfunc" id="7712928">new</span><span class="op" id="7712931">(</span><span class="ident" id="7712932">bytes</span><span class="op" id="7712937">.</span><span class="ident" id="7712938">Buffer</span><span class="op" id="7712944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7712947">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7712985">enc</span>&nbsp;<span class="op" id="7712989">:=</span>&nbsp;<span class="ident" id="7712992">NewEncoder</span><span class="op" id="7713002">(</span><span class="ident" id="7713003">b</span><span class="op" id="7713004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713007">err</span>&nbsp;<span class="op" id="7713011">:=</span>&nbsp;<span class="ident" id="7713014">enc</span><span class="op" id="7713017">.</span><span class="ident" id="7713018">Encode</span><span class="op" id="7713024">(</span><span class="ident" id="7713025">GobTest0</span><span class="op" id="7713033">{</span><span class="num" id="7713034">17</span><span class="op" id="7713036">,</span>&nbsp;<span class="op" id="7713038">&amp;</span><span class="ident" id="7713039">ByteStruct</span><span class="op" id="7713049">{</span><span class="string" id="7713050">&#39;A&#39;</span><span class="op" id="7713053">}</span><span class="op" id="7713054">}</span><span class="op" id="7713055">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713058">if</span>&nbsp;<span class="ident" id="7713061">err</span>&nbsp;<span class="op" id="7713065">!=</span>&nbsp;<span class="ident" id="7713068">nil</span>&nbsp;<span class="op" id="7713072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713076">t</span><span class="op" id="7713077">.</span><span class="ident" id="7713078">Fatal</span><span class="op" id="7713083">(</span><span class="string" id="7713084">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7713099">,</span>&nbsp;<span class="ident" id="7713101">err</span><span class="op" id="7713104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713107">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713110">dec</span>&nbsp;<span class="op" id="7713114">:=</span>&nbsp;<span class="ident" id="7713117">NewDecoder</span><span class="op" id="7713127">(</span><span class="ident" id="7713128">b</span><span class="op" id="7713129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713132">x</span>&nbsp;<span class="op" id="7713134">:=</span>&nbsp;<span class="builtinfunc" id="7713137">new</span><span class="op" id="7713140">(</span><span class="ident" id="7713141">GobTest0</span><span class="op" id="7713149">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713152">err</span>&nbsp;<span class="op" id="7713156">=</span>&nbsp;<span class="ident" id="7713158">dec</span><span class="op" id="7713161">.</span><span class="ident" id="7713162">Decode</span><span class="op" id="7713168">(</span><span class="ident" id="7713169">x</span><span class="op" id="7713170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713173">if</span>&nbsp;<span class="ident" id="7713176">err</span>&nbsp;<span class="op" id="7713180">!=</span>&nbsp;<span class="ident" id="7713183">nil</span>&nbsp;<span class="op" id="7713187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713191">t</span><span class="op" id="7713192">.</span><span class="ident" id="7713193">Fatal</span><span class="op" id="7713198">(</span><span class="string" id="7713199">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7713214">,</span>&nbsp;<span class="ident" id="7713216">err</span><span class="op" id="7713219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713225">if</span>&nbsp;<span class="ident" id="7713228">x</span><span class="op" id="7713229">.</span><span class="ident" id="7713230">G</span><span class="op" id="7713231">.</span><span class="ident" id="7713232">a</span>&nbsp;<span class="op" id="7713234">!=</span>&nbsp;<span class="string" id="7713237">&#39;A&#39;</span>&nbsp;<span class="op" id="7713241">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713245">t</span><span class="op" id="7713246">.</span><span class="ident" id="7713247">Errorf</span><span class="op" id="7713253">(</span><span class="string" id="7713254">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7713275">,</span>&nbsp;<span class="ident" id="7713277">x</span><span class="op" id="7713278">.</span><span class="ident" id="7713279">G</span><span class="op" id="7713280">.</span><span class="ident" id="7713281">a</span><span class="op" id="7713282">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713288">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713328">b</span><span class="op" id="7713329">.</span><span class="ident" id="7713330">Reset</span><span class="op" id="7713335">(</span><span class="op" id="7713336">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713339">gobber</span>&nbsp;<span class="op" id="7713346">:=</span>&nbsp;<span class="ident" id="7713349">Gobber</span><span class="op" id="7713355">(</span><span class="num" id="7713356">23</span><span class="op" id="7713358">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713361">bgobber</span>&nbsp;<span class="op" id="7713369">:=</span>&nbsp;<span class="ident" id="7713372">BinaryGobber</span><span class="op" id="7713384">(</span><span class="num" id="7713385">24</span><span class="op" id="7713387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713390">tgobber</span>&nbsp;<span class="op" id="7713398">:=</span>&nbsp;<span class="ident" id="7713401">TextGobber</span><span class="op" id="7713411">(</span><span class="num" id="7713412">25</span><span class="op" id="7713414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713417">err</span>&nbsp;<span class="op" id="7713421">=</span>&nbsp;<span class="ident" id="7713423">enc</span><span class="op" id="7713426">.</span><span class="ident" id="7713427">Encode</span><span class="op" id="7713433">(</span><span class="ident" id="7713434">GobTest3</span><span class="op" id="7713442">{</span><span class="num" id="7713443">17</span><span class="op" id="7713445">,</span>&nbsp;<span class="op" id="7713447">&amp;</span><span class="ident" id="7713448">gobber</span><span class="op" id="7713454">,</span>&nbsp;<span class="op" id="7713456">&amp;</span><span class="ident" id="7713457">bgobber</span><span class="op" id="7713464">,</span>&nbsp;<span class="op" id="7713466">&amp;</span><span class="ident" id="7713467">tgobber</span><span class="op" id="7713474">}</span><span class="op" id="7713475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713478">if</span>&nbsp;<span class="ident" id="7713481">err</span>&nbsp;<span class="op" id="7713485">!=</span>&nbsp;<span class="ident" id="7713488">nil</span>&nbsp;<span class="op" id="7713492">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713496">t</span><span class="op" id="7713497">.</span><span class="ident" id="7713498">Fatal</span><span class="op" id="7713503">(</span><span class="string" id="7713504">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7713519">,</span>&nbsp;<span class="ident" id="7713521">err</span><span class="op" id="7713524">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713527">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713530">y</span>&nbsp;<span class="op" id="7713532">:=</span>&nbsp;<span class="builtinfunc" id="7713535">new</span><span class="op" id="7713538">(</span><span class="ident" id="7713539">GobTest3</span><span class="op" id="7713547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713550">err</span>&nbsp;<span class="op" id="7713554">=</span>&nbsp;<span class="ident" id="7713556">dec</span><span class="op" id="7713559">.</span><span class="ident" id="7713560">Decode</span><span class="op" id="7713566">(</span><span class="ident" id="7713567">y</span><span class="op" id="7713568">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713571">if</span>&nbsp;<span class="ident" id="7713574">err</span>&nbsp;<span class="op" id="7713578">!=</span>&nbsp;<span class="ident" id="7713581">nil</span>&nbsp;<span class="op" id="7713585">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713589">t</span><span class="op" id="7713590">.</span><span class="ident" id="7713591">Fatal</span><span class="op" id="7713596">(</span><span class="string" id="7713597">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7713612">,</span>&nbsp;<span class="ident" id="7713614">err</span><span class="op" id="7713617">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7713623">if</span>&nbsp;<span class="op" id="7713626">*</span><span class="ident" id="7713627">y</span><span class="op" id="7713628">.</span><span class="ident" id="7713629">G</span>&nbsp;<span class="op" id="7713631">!=</span>&nbsp;<span class="num" id="7713634">23</span>&nbsp;<span class="op" id="7713637">||</span>&nbsp;<span class="op" id="7713640">*</span><span class="ident" id="7713641">y</span><span class="op" id="7713642">.</span><span class="ident" id="7713643">B</span>&nbsp;<span class="op" id="7713645">!=</span>&nbsp;<span class="num" id="7713648">24</span>&nbsp;<span class="op" id="7713651">||</span>&nbsp;<span class="op" id="7713654">*</span><span class="ident" id="7713655">y</span><span class="op" id="7713656">.</span><span class="ident" id="7713657">T</span>&nbsp;<span class="op" id="7713659">!=</span>&nbsp;<span class="num" id="7713662">25</span>&nbsp;<span class="op" id="7713665">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713669">t</span><span class="op" id="7713670">.</span><span class="ident" id="7713671">Errorf</span><span class="op" id="7713677">(</span><span class="string" id="7713678">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7713699">,</span>&nbsp;<span class="op" id="7713701">*</span><span class="ident" id="7713702">y</span><span class="op" id="7713703">.</span><span class="ident" id="7713704">G</span><span class="op" id="7713705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7713708">}</span><br>
<span class="lineno"></span><span class="op" id="7713710">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="7713713">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="7713780">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7713823">func</span>&nbsp;<span class="ident" id="7713828">TestGobEncoderValueField</span><span class="op" id="7713852">(</span><span class="ident" id="7713853">t</span>&nbsp;<span class="op" id="7713855">*</span><span class="ident" id="7713856">testing</span><span class="op" id="7713863">.</span><span class="ident" id="7713864">T</span><span class="op" id="7713865">)</span>&nbsp;<span class="op" id="7713867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713870">b</span>&nbsp;<span class="op" id="7713872">:=</span>&nbsp;<span class="builtinfunc" id="7713875">new</span><span class="op" id="7713878">(</span><span class="ident" id="7713879">bytes</span><span class="op" id="7713884">.</span><span class="ident" id="7713885">Buffer</span><span class="op" id="7713891">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7713894">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713932">enc</span>&nbsp;<span class="op" id="7713936">:=</span>&nbsp;<span class="ident" id="7713939">NewEncoder</span><span class="op" id="7713949">(</span><span class="ident" id="7713950">b</span><span class="op" id="7713951">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7713954">err</span>&nbsp;<span class="op" id="7713958">:=</span>&nbsp;<span class="ident" id="7713961">enc</span><span class="op" id="7713964">.</span><span class="ident" id="7713965">Encode</span><span class="op" id="7713971">(</span><span class="op" id="7713972">&amp;</span><span class="ident" id="7713973">GobTestValueEncDec</span><span class="op" id="7713991">{</span><span class="num" id="7713992">17</span><span class="op" id="7713994">,</span>&nbsp;<span class="ident" id="7713996">StringStruct</span><span class="op" id="7714008">{</span><span class="string" id="7714009">&#34;HIJKL&#34;</span><span class="op" id="7714016">}</span><span class="op" id="7714017">}</span><span class="op" id="7714018">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714021">if</span>&nbsp;<span class="ident" id="7714024">err</span>&nbsp;<span class="op" id="7714028">!=</span>&nbsp;<span class="ident" id="7714031">nil</span>&nbsp;<span class="op" id="7714035">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714039">t</span><span class="op" id="7714040">.</span><span class="ident" id="7714041">Fatal</span><span class="op" id="7714046">(</span><span class="string" id="7714047">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7714062">,</span>&nbsp;<span class="ident" id="7714064">err</span><span class="op" id="7714067">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714070">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714073">dec</span>&nbsp;<span class="op" id="7714077">:=</span>&nbsp;<span class="ident" id="7714080">NewDecoder</span><span class="op" id="7714090">(</span><span class="ident" id="7714091">b</span><span class="op" id="7714092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714095">x</span>&nbsp;<span class="op" id="7714097">:=</span>&nbsp;<span class="builtinfunc" id="7714100">new</span><span class="op" id="7714103">(</span><span class="ident" id="7714104">GobTestValueEncDec</span><span class="op" id="7714122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714125">err</span>&nbsp;<span class="op" id="7714129">=</span>&nbsp;<span class="ident" id="7714131">dec</span><span class="op" id="7714134">.</span><span class="ident" id="7714135">Decode</span><span class="op" id="7714141">(</span><span class="ident" id="7714142">x</span><span class="op" id="7714143">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714146">if</span>&nbsp;<span class="ident" id="7714149">err</span>&nbsp;<span class="op" id="7714153">!=</span>&nbsp;<span class="ident" id="7714156">nil</span>&nbsp;<span class="op" id="7714160">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714164">t</span><span class="op" id="7714165">.</span><span class="ident" id="7714166">Fatal</span><span class="op" id="7714171">(</span><span class="string" id="7714172">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7714187">,</span>&nbsp;<span class="ident" id="7714189">err</span><span class="op" id="7714192">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714195">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714198">if</span>&nbsp;<span class="ident" id="7714201">x</span><span class="op" id="7714202">.</span><span class="ident" id="7714203">G</span><span class="op" id="7714204">.</span><span class="ident" id="7714205">s</span>&nbsp;<span class="op" id="7714207">!=</span>&nbsp;<span class="string" id="7714210">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7714218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714222">t</span><span class="op" id="7714223">.</span><span class="ident" id="7714224">Errorf</span><span class="op" id="7714230">(</span><span class="string" id="7714231">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7714256">,</span>&nbsp;<span class="ident" id="7714258">x</span><span class="op" id="7714259">.</span><span class="ident" id="7714260">G</span><span class="op" id="7714261">.</span><span class="ident" id="7714262">s</span><span class="op" id="7714263">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714266">}</span><br>
<span class="lineno">295</span><span class="op" id="7714268">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7714271">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="7714324">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="7714360">func</span>&nbsp;<span class="ident" id="7714365">TestGobEncoderIndirectField</span><span class="op" id="7714392">(</span><span class="ident" id="7714393">t</span>&nbsp;<span class="op" id="7714395">*</span><span class="ident" id="7714396">testing</span><span class="op" id="7714403">.</span><span class="ident" id="7714404">T</span><span class="op" id="7714405">)</span>&nbsp;<span class="op" id="7714407">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714410">b</span>&nbsp;<span class="op" id="7714412">:=</span>&nbsp;<span class="builtinfunc" id="7714415">new</span><span class="op" id="7714418">(</span><span class="ident" id="7714419">bytes</span><span class="op" id="7714424">.</span><span class="ident" id="7714425">Buffer</span><span class="op" id="7714431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7714434">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714472">enc</span>&nbsp;<span class="op" id="7714476">:=</span>&nbsp;<span class="ident" id="7714479">NewEncoder</span><span class="op" id="7714489">(</span><span class="ident" id="7714490">b</span><span class="op" id="7714491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714494">s</span>&nbsp;<span class="op" id="7714496">:=</span>&nbsp;<span class="op" id="7714499">&amp;</span><span class="ident" id="7714500">StringStruct</span><span class="op" id="7714512">{</span><span class="string" id="7714513">&#34;HIJKL&#34;</span><span class="op" id="7714520">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714523">sp</span>&nbsp;<span class="op" id="7714526">:=</span>&nbsp;<span class="op" id="7714529">&amp;</span><span class="ident" id="7714530">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714533">err</span>&nbsp;<span class="op" id="7714537">:=</span>&nbsp;<span class="ident" id="7714540">enc</span><span class="op" id="7714543">.</span><span class="ident" id="7714544">Encode</span><span class="op" id="7714550">(</span><span class="ident" id="7714551">GobTestIndirectEncDec</span><span class="op" id="7714572">{</span><span class="num" id="7714573">17</span><span class="op" id="7714575">,</span>&nbsp;<span class="op" id="7714577">&amp;</span><span class="ident" id="7714578">sp</span><span class="op" id="7714580">}</span><span class="op" id="7714581">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714584">if</span>&nbsp;<span class="ident" id="7714587">err</span>&nbsp;<span class="op" id="7714591">!=</span>&nbsp;<span class="ident" id="7714594">nil</span>&nbsp;<span class="op" id="7714598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714602">t</span><span class="op" id="7714603">.</span><span class="ident" id="7714604">Fatal</span><span class="op" id="7714609">(</span><span class="string" id="7714610">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7714625">,</span>&nbsp;<span class="ident" id="7714627">err</span><span class="op" id="7714630">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714633">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714636">dec</span>&nbsp;<span class="op" id="7714640">:=</span>&nbsp;<span class="ident" id="7714643">NewDecoder</span><span class="op" id="7714653">(</span><span class="ident" id="7714654">b</span><span class="op" id="7714655">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714658">x</span>&nbsp;<span class="op" id="7714660">:=</span>&nbsp;<span class="builtinfunc" id="7714663">new</span><span class="op" id="7714666">(</span><span class="ident" id="7714667">GobTestIndirectEncDec</span><span class="op" id="7714688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714691">err</span>&nbsp;<span class="op" id="7714695">=</span>&nbsp;<span class="ident" id="7714697">dec</span><span class="op" id="7714700">.</span><span class="ident" id="7714701">Decode</span><span class="op" id="7714707">(</span><span class="ident" id="7714708">x</span><span class="op" id="7714709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714712">if</span>&nbsp;<span class="ident" id="7714715">err</span>&nbsp;<span class="op" id="7714719">!=</span>&nbsp;<span class="ident" id="7714722">nil</span>&nbsp;<span class="op" id="7714726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714730">t</span><span class="op" id="7714731">.</span><span class="ident" id="7714732">Fatal</span><span class="op" id="7714737">(</span><span class="string" id="7714738">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7714753">,</span>&nbsp;<span class="ident" id="7714755">err</span><span class="op" id="7714758">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714761">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714764">if</span>&nbsp;<span class="op" id="7714767">(</span><span class="op" id="7714768">*</span><span class="op" id="7714769">*</span><span class="op" id="7714770">*</span><span class="ident" id="7714771">x</span><span class="op" id="7714772">.</span><span class="ident" id="7714773">G</span><span class="op" id="7714774">)</span><span class="op" id="7714775">.</span><span class="ident" id="7714776">s</span>&nbsp;<span class="op" id="7714778">!=</span>&nbsp;<span class="string" id="7714781">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="7714789">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714793">t</span><span class="op" id="7714794">.</span><span class="ident" id="7714795">Errorf</span><span class="op" id="7714801">(</span><span class="string" id="7714802">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7714827">,</span>&nbsp;<span class="op" id="7714829">(</span><span class="op" id="7714830">*</span><span class="op" id="7714831">*</span><span class="op" id="7714832">*</span><span class="ident" id="7714833">x</span><span class="op" id="7714834">.</span><span class="ident" id="7714835">G</span><span class="op" id="7714836">)</span><span class="op" id="7714837">.</span><span class="ident" id="7714838">s</span><span class="op" id="7714839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7714842">}</span><br>
<span class="lineno"></span><span class="op" id="7714844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="7714847">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7714888">func</span>&nbsp;<span class="ident" id="7714893">TestGobEncoderArrayField</span><span class="op" id="7714917">(</span><span class="ident" id="7714918">t</span>&nbsp;<span class="op" id="7714920">*</span><span class="ident" id="7714921">testing</span><span class="op" id="7714928">.</span><span class="ident" id="7714929">T</span><span class="op" id="7714930">)</span>&nbsp;<span class="op" id="7714932">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714935">b</span>&nbsp;<span class="op" id="7714937">:=</span>&nbsp;<span class="builtinfunc" id="7714940">new</span><span class="op" id="7714943">(</span><span class="ident" id="7714944">bytes</span><span class="op" id="7714949">.</span><span class="ident" id="7714950">Buffer</span><span class="op" id="7714956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7714959">enc</span>&nbsp;<span class="op" id="7714963">:=</span>&nbsp;<span class="ident" id="7714966">NewEncoder</span><span class="op" id="7714976">(</span><span class="ident" id="7714977">b</span><span class="op" id="7714978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7714981">var</span>&nbsp;<span class="ident" id="7714985">a</span>&nbsp;<span class="ident" id="7714987">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715007">a</span><span class="op" id="7715008">.</span><span class="ident" id="7715009">X</span>&nbsp;<span class="op" id="7715011">=</span>&nbsp;<span class="num" id="7715013">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715017">for</span>&nbsp;<span class="ident" id="7715021">i</span>&nbsp;<span class="op" id="7715023">:=</span>&nbsp;<span class="keyword" id="7715026">range</span>&nbsp;<span class="ident" id="7715032">a</span><span class="op" id="7715033">.</span><span class="ident" id="7715034">A</span><span class="op" id="7715035">.</span><span class="ident" id="7715036">a</span>&nbsp;<span class="op" id="7715038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715042">a</span><span class="op" id="7715043">.</span><span class="ident" id="7715044">A</span><span class="op" id="7715045">.</span><span class="ident" id="7715046">a</span><span class="op" id="7715047">[</span><span class="ident" id="7715048">i</span><span class="op" id="7715049">]</span>&nbsp;<span class="op" id="7715051">=</span>&nbsp;<span class="builtintype" id="7715053">byte</span><span class="op" id="7715057">(</span><span class="ident" id="7715058">i</span><span class="op" id="7715059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715065">err</span>&nbsp;<span class="op" id="7715069">:=</span>&nbsp;<span class="ident" id="7715072">enc</span><span class="op" id="7715075">.</span><span class="ident" id="7715076">Encode</span><span class="op" id="7715082">(</span><span class="op" id="7715083">&amp;</span><span class="ident" id="7715084">a</span><span class="op" id="7715085">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715088">if</span>&nbsp;<span class="ident" id="7715091">err</span>&nbsp;<span class="op" id="7715095">!=</span>&nbsp;<span class="ident" id="7715098">nil</span>&nbsp;<span class="op" id="7715102">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715106">t</span><span class="op" id="7715107">.</span><span class="ident" id="7715108">Fatal</span><span class="op" id="7715113">(</span><span class="string" id="7715114">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7715129">,</span>&nbsp;<span class="ident" id="7715131">err</span><span class="op" id="7715134">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715137">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715140">dec</span>&nbsp;<span class="op" id="7715144">:=</span>&nbsp;<span class="ident" id="7715147">NewDecoder</span><span class="op" id="7715157">(</span><span class="ident" id="7715158">b</span><span class="op" id="7715159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715162">x</span>&nbsp;<span class="op" id="7715164">:=</span>&nbsp;<span class="builtinfunc" id="7715167">new</span><span class="op" id="7715170">(</span><span class="ident" id="7715171">GobTestArrayEncDec</span><span class="op" id="7715189">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715192">err</span>&nbsp;<span class="op" id="7715196">=</span>&nbsp;<span class="ident" id="7715198">dec</span><span class="op" id="7715201">.</span><span class="ident" id="7715202">Decode</span><span class="op" id="7715208">(</span><span class="ident" id="7715209">x</span><span class="op" id="7715210">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715213">if</span>&nbsp;<span class="ident" id="7715216">err</span>&nbsp;<span class="op" id="7715220">!=</span>&nbsp;<span class="ident" id="7715223">nil</span>&nbsp;<span class="op" id="7715227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715231">t</span><span class="op" id="7715232">.</span><span class="ident" id="7715233">Fatal</span><span class="op" id="7715238">(</span><span class="string" id="7715239">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7715254">,</span>&nbsp;<span class="ident" id="7715256">err</span><span class="op" id="7715259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715262">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715265">for</span>&nbsp;<span class="ident" id="7715269">i</span><span class="op" id="7715270">,</span>&nbsp;<span class="ident" id="7715272">v</span>&nbsp;<span class="op" id="7715274">:=</span>&nbsp;<span class="keyword" id="7715277">range</span>&nbsp;<span class="ident" id="7715283">x</span><span class="op" id="7715284">.</span><span class="ident" id="7715285">A</span><span class="op" id="7715286">.</span><span class="ident" id="7715287">a</span>&nbsp;<span class="op" id="7715289">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715293">if</span>&nbsp;<span class="ident" id="7715296">v</span>&nbsp;<span class="op" id="7715298">!=</span>&nbsp;<span class="builtintype" id="7715301">byte</span><span class="op" id="7715305">(</span><span class="ident" id="7715306">i</span><span class="op" id="7715307">)</span>&nbsp;<span class="op" id="7715309">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715314">t</span><span class="op" id="7715315">.</span><span class="ident" id="7715316">Errorf</span><span class="op" id="7715322">(</span><span class="string" id="7715323">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7715343">,</span>&nbsp;<span class="builtintype" id="7715345">byte</span><span class="op" id="7715349">(</span><span class="ident" id="7715350">i</span><span class="op" id="7715351">)</span><span class="op" id="7715352">,</span>&nbsp;<span class="ident" id="7715354">v</span><span class="op" id="7715355">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715360">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715368">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715371">}</span><br>
<span class="lineno">345</span><span class="op" id="7715373">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7715376">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="7715430">func</span>&nbsp;<span class="ident" id="7715435">TestGobEncoderIndirectArrayField</span><span class="op" id="7715467">(</span><span class="ident" id="7715468">t</span>&nbsp;<span class="op" id="7715470">*</span><span class="ident" id="7715471">testing</span><span class="op" id="7715478">.</span><span class="ident" id="7715479">T</span><span class="op" id="7715480">)</span>&nbsp;<span class="op" id="7715482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715485">b</span>&nbsp;<span class="op" id="7715487">:=</span>&nbsp;<span class="builtinfunc" id="7715490">new</span><span class="op" id="7715493">(</span><span class="ident" id="7715494">bytes</span><span class="op" id="7715499">.</span><span class="ident" id="7715500">Buffer</span><span class="op" id="7715506">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715509">enc</span>&nbsp;<span class="op" id="7715513">:=</span>&nbsp;<span class="ident" id="7715516">NewEncoder</span><span class="op" id="7715526">(</span><span class="ident" id="7715527">b</span><span class="op" id="7715528">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715531">var</span>&nbsp;<span class="ident" id="7715535">a</span>&nbsp;<span class="ident" id="7715537">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715565">a</span><span class="op" id="7715566">.</span><span class="ident" id="7715567">X</span>&nbsp;<span class="op" id="7715569">=</span>&nbsp;<span class="num" id="7715571">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715575">var</span>&nbsp;<span class="ident" id="7715579">array</span>&nbsp;<span class="ident" id="7715585">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715598">ap</span>&nbsp;<span class="op" id="7715601">:=</span>&nbsp;<span class="op" id="7715604">&amp;</span><span class="ident" id="7715605">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715612">app</span>&nbsp;<span class="op" id="7715616">:=</span>&nbsp;<span class="op" id="7715619">&amp;</span><span class="ident" id="7715620">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715624">a</span><span class="op" id="7715625">.</span><span class="ident" id="7715626">A</span>&nbsp;<span class="op" id="7715628">=</span>&nbsp;<span class="op" id="7715630">&amp;</span><span class="ident" id="7715631">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715636">for</span>&nbsp;<span class="ident" id="7715640">i</span>&nbsp;<span class="op" id="7715642">:=</span>&nbsp;<span class="keyword" id="7715645">range</span>&nbsp;<span class="ident" id="7715651">array</span><span class="op" id="7715656">.</span><span class="ident" id="7715657">a</span>&nbsp;<span class="op" id="7715659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715663">array</span><span class="op" id="7715668">.</span><span class="ident" id="7715669">a</span><span class="op" id="7715670">[</span><span class="ident" id="7715671">i</span><span class="op" id="7715672">]</span>&nbsp;<span class="op" id="7715674">=</span>&nbsp;<span class="builtintype" id="7715676">byte</span><span class="op" id="7715680">(</span><span class="ident" id="7715681">i</span><span class="op" id="7715682">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715685">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715688">err</span>&nbsp;<span class="op" id="7715692">:=</span>&nbsp;<span class="ident" id="7715695">enc</span><span class="op" id="7715698">.</span><span class="ident" id="7715699">Encode</span><span class="op" id="7715705">(</span><span class="ident" id="7715706">a</span><span class="op" id="7715707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715710">if</span>&nbsp;<span class="ident" id="7715713">err</span>&nbsp;<span class="op" id="7715717">!=</span>&nbsp;<span class="ident" id="7715720">nil</span>&nbsp;<span class="op" id="7715724">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715728">t</span><span class="op" id="7715729">.</span><span class="ident" id="7715730">Fatal</span><span class="op" id="7715735">(</span><span class="string" id="7715736">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7715751">,</span>&nbsp;<span class="ident" id="7715753">err</span><span class="op" id="7715756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715762">dec</span>&nbsp;<span class="op" id="7715766">:=</span>&nbsp;<span class="ident" id="7715769">NewDecoder</span><span class="op" id="7715779">(</span><span class="ident" id="7715780">b</span><span class="op" id="7715781">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715784">x</span>&nbsp;<span class="op" id="7715786">:=</span>&nbsp;<span class="builtinfunc" id="7715789">new</span><span class="op" id="7715792">(</span><span class="ident" id="7715793">GobTestIndirectArrayEncDec</span><span class="op" id="7715819">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715822">err</span>&nbsp;<span class="op" id="7715826">=</span>&nbsp;<span class="ident" id="7715828">dec</span><span class="op" id="7715831">.</span><span class="ident" id="7715832">Decode</span><span class="op" id="7715838">(</span><span class="ident" id="7715839">x</span><span class="op" id="7715840">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715843">if</span>&nbsp;<span class="ident" id="7715846">err</span>&nbsp;<span class="op" id="7715850">!=</span>&nbsp;<span class="ident" id="7715853">nil</span>&nbsp;<span class="op" id="7715857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715861">t</span><span class="op" id="7715862">.</span><span class="ident" id="7715863">Fatal</span><span class="op" id="7715868">(</span><span class="string" id="7715869">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7715884">,</span>&nbsp;<span class="ident" id="7715886">err</span><span class="op" id="7715889">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7715892">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715895">for</span>&nbsp;<span class="ident" id="7715899">i</span><span class="op" id="7715900">,</span>&nbsp;<span class="ident" id="7715902">v</span>&nbsp;<span class="op" id="7715904">:=</span>&nbsp;<span class="keyword" id="7715907">range</span>&nbsp;<span class="op" id="7715913">(</span><span class="op" id="7715914">*</span><span class="op" id="7715915">*</span><span class="op" id="7715916">*</span><span class="ident" id="7715917">x</span><span class="op" id="7715918">.</span><span class="ident" id="7715919">A</span><span class="op" id="7715920">)</span><span class="op" id="7715921">.</span><span class="ident" id="7715922">a</span>&nbsp;<span class="op" id="7715924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715928">if</span>&nbsp;<span class="ident" id="7715931">v</span>&nbsp;<span class="op" id="7715933">!=</span>&nbsp;<span class="builtintype" id="7715936">byte</span><span class="op" id="7715940">(</span><span class="ident" id="7715941">i</span><span class="op" id="7715942">)</span>&nbsp;<span class="op" id="7715944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7715949">t</span><span class="op" id="7715950">.</span><span class="ident" id="7715951">Errorf</span><span class="op" id="7715957">(</span><span class="string" id="7715958">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="7715978">,</span>&nbsp;<span class="builtintype" id="7715980">byte</span><span class="op" id="7715984">(</span><span class="ident" id="7715985">i</span><span class="op" id="7715986">)</span><span class="op" id="7715987">,</span>&nbsp;<span class="ident" id="7715989">v</span><span class="op" id="7715990">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7715995">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716003">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716006">}</span><br>
<span class="lineno"></span><span class="op" id="7716008">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7716011">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="7716073">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="7716136">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="7716197">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="7716257">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="7716280">func</span>&nbsp;<span class="ident" id="7716285">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="7716320">(</span><span class="ident" id="7716321">t</span>&nbsp;<span class="op" id="7716323">*</span><span class="ident" id="7716324">testing</span><span class="op" id="7716331">.</span><span class="ident" id="7716332">T</span><span class="op" id="7716333">)</span>&nbsp;<span class="op" id="7716335">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716338">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716382">b</span>&nbsp;<span class="op" id="7716384">:=</span>&nbsp;<span class="builtinfunc" id="7716387">new</span><span class="op" id="7716390">(</span><span class="ident" id="7716391">bytes</span><span class="op" id="7716396">.</span><span class="ident" id="7716397">Buffer</span><span class="op" id="7716403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716406">enc</span>&nbsp;<span class="op" id="7716410">:=</span>&nbsp;<span class="ident" id="7716413">NewEncoder</span><span class="op" id="7716423">(</span><span class="ident" id="7716424">b</span><span class="op" id="7716425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716428">err</span>&nbsp;<span class="op" id="7716432">:=</span>&nbsp;<span class="ident" id="7716435">enc</span><span class="op" id="7716438">.</span><span class="ident" id="7716439">Encode</span><span class="op" id="7716445">(</span><span class="ident" id="7716446">GobTest1</span><span class="op" id="7716454">{</span><span class="num" id="7716455">17</span><span class="op" id="7716457">,</span>&nbsp;<span class="op" id="7716459">&amp;</span><span class="ident" id="7716460">StringStruct</span><span class="op" id="7716472">{</span><span class="string" id="7716473">&#34;ABC&#34;</span><span class="op" id="7716478">}</span><span class="op" id="7716479">}</span><span class="op" id="7716480">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716483">if</span>&nbsp;<span class="ident" id="7716486">err</span>&nbsp;<span class="op" id="7716490">!=</span>&nbsp;<span class="ident" id="7716493">nil</span>&nbsp;<span class="op" id="7716497">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716501">t</span><span class="op" id="7716502">.</span><span class="ident" id="7716503">Fatal</span><span class="op" id="7716508">(</span><span class="string" id="7716509">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7716524">,</span>&nbsp;<span class="ident" id="7716526">err</span><span class="op" id="7716529">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716535">dec</span>&nbsp;<span class="op" id="7716539">:=</span>&nbsp;<span class="ident" id="7716542">NewDecoder</span><span class="op" id="7716552">(</span><span class="ident" id="7716553">b</span><span class="op" id="7716554">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716557">x</span>&nbsp;<span class="op" id="7716559">:=</span>&nbsp;<span class="builtinfunc" id="7716562">new</span><span class="op" id="7716565">(</span><span class="ident" id="7716566">GobTest0</span><span class="op" id="7716574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716577">err</span>&nbsp;<span class="op" id="7716581">=</span>&nbsp;<span class="ident" id="7716583">dec</span><span class="op" id="7716586">.</span><span class="ident" id="7716587">Decode</span><span class="op" id="7716593">(</span><span class="ident" id="7716594">x</span><span class="op" id="7716595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716598">if</span>&nbsp;<span class="ident" id="7716601">err</span>&nbsp;<span class="op" id="7716605">!=</span>&nbsp;<span class="ident" id="7716608">nil</span>&nbsp;<span class="op" id="7716612">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716616">t</span><span class="op" id="7716617">.</span><span class="ident" id="7716618">Fatal</span><span class="op" id="7716623">(</span><span class="string" id="7716624">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7716639">,</span>&nbsp;<span class="ident" id="7716641">err</span><span class="op" id="7716644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716647">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716650">if</span>&nbsp;<span class="ident" id="7716653">x</span><span class="op" id="7716654">.</span><span class="ident" id="7716655">G</span><span class="op" id="7716656">.</span><span class="ident" id="7716657">a</span>&nbsp;<span class="op" id="7716659">!=</span>&nbsp;<span class="string" id="7716662">&#39;A&#39;</span>&nbsp;<span class="op" id="7716666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716670">t</span><span class="op" id="7716671">.</span><span class="ident" id="7716672">Errorf</span><span class="op" id="7716678">(</span><span class="string" id="7716679">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7716700">,</span>&nbsp;<span class="ident" id="7716702">x</span><span class="op" id="7716703">.</span><span class="ident" id="7716704">G</span><span class="op" id="7716705">.</span><span class="ident" id="7716706">a</span><span class="op" id="7716707">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716710">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7716713">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716775">b</span><span class="op" id="7716776">.</span><span class="ident" id="7716777">Reset</span><span class="op" id="7716782">(</span><span class="op" id="7716783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716786">err</span>&nbsp;<span class="op" id="7716790">=</span>&nbsp;<span class="ident" id="7716792">enc</span><span class="op" id="7716795">.</span><span class="ident" id="7716796">Encode</span><span class="op" id="7716802">(</span><span class="ident" id="7716803">GobTest0</span><span class="op" id="7716811">{</span><span class="num" id="7716812">17</span><span class="op" id="7716814">,</span>&nbsp;<span class="op" id="7716816">&amp;</span><span class="ident" id="7716817">ByteStruct</span><span class="op" id="7716827">{</span><span class="string" id="7716828">&#39;X&#39;</span><span class="op" id="7716831">}</span><span class="op" id="7716832">}</span><span class="op" id="7716833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716836">if</span>&nbsp;<span class="ident" id="7716839">err</span>&nbsp;<span class="op" id="7716843">!=</span>&nbsp;<span class="ident" id="7716846">nil</span>&nbsp;<span class="op" id="7716850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716854">t</span><span class="op" id="7716855">.</span><span class="ident" id="7716856">Fatal</span><span class="op" id="7716861">(</span><span class="string" id="7716862">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7716877">,</span>&nbsp;<span class="ident" id="7716879">err</span><span class="op" id="7716882">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716885">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716888">y</span>&nbsp;<span class="op" id="7716890">:=</span>&nbsp;<span class="builtinfunc" id="7716893">new</span><span class="op" id="7716896">(</span><span class="ident" id="7716897">GobTest1</span><span class="op" id="7716905">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716908">err</span>&nbsp;<span class="op" id="7716912">=</span>&nbsp;<span class="ident" id="7716914">dec</span><span class="op" id="7716917">.</span><span class="ident" id="7716918">Decode</span><span class="op" id="7716924">(</span><span class="ident" id="7716925">y</span><span class="op" id="7716926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716929">if</span>&nbsp;<span class="ident" id="7716932">err</span>&nbsp;<span class="op" id="7716936">!=</span>&nbsp;<span class="ident" id="7716939">nil</span>&nbsp;<span class="op" id="7716943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7716947">t</span><span class="op" id="7716948">.</span><span class="ident" id="7716949">Fatal</span><span class="op" id="7716954">(</span><span class="string" id="7716955">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7716970">,</span>&nbsp;<span class="ident" id="7716972">err</span><span class="op" id="7716975">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7716978">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7716981">if</span>&nbsp;<span class="ident" id="7716984">y</span><span class="op" id="7716985">.</span><span class="ident" id="7716986">G</span><span class="op" id="7716987">.</span><span class="ident" id="7716988">s</span>&nbsp;<span class="op" id="7716990">!=</span>&nbsp;<span class="string" id="7716993">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="7716999">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717003">t</span><span class="op" id="7717004">.</span><span class="ident" id="7717005">Fatalf</span><span class="op" id="7717011">(</span><span class="string" id="7717012">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7717035">,</span>&nbsp;<span class="ident" id="7717037">y</span><span class="op" id="7717038">.</span><span class="ident" id="7717039">G</span><span class="op" id="7717040">.</span><span class="ident" id="7717041">s</span><span class="op" id="7717042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717045">}</span><br>
<span class="lineno"></span><span class="op" id="7717047">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="7717050">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="7717112">func</span>&nbsp;<span class="ident" id="7717117">TestGobEncoderValueEncoder</span><span class="op" id="7717143">(</span><span class="ident" id="7717144">t</span>&nbsp;<span class="op" id="7717146">*</span><span class="ident" id="7717147">testing</span><span class="op" id="7717154">.</span><span class="ident" id="7717155">T</span><span class="op" id="7717156">)</span>&nbsp;<span class="op" id="7717158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7717161">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717205">b</span>&nbsp;<span class="op" id="7717207">:=</span>&nbsp;<span class="builtinfunc" id="7717210">new</span><span class="op" id="7717213">(</span><span class="ident" id="7717214">bytes</span><span class="op" id="7717219">.</span><span class="ident" id="7717220">Buffer</span><span class="op" id="7717226">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717229">enc</span>&nbsp;<span class="op" id="7717233">:=</span>&nbsp;<span class="ident" id="7717236">NewEncoder</span><span class="op" id="7717246">(</span><span class="ident" id="7717247">b</span><span class="op" id="7717248">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717251">err</span>&nbsp;<span class="op" id="7717255">:=</span>&nbsp;<span class="ident" id="7717258">enc</span><span class="op" id="7717261">.</span><span class="ident" id="7717262">Encode</span><span class="op" id="7717268">(</span><span class="ident" id="7717269">GobTest4</span><span class="op" id="7717277">{</span><span class="num" id="7717278">17</span><span class="op" id="7717280">,</span>&nbsp;<span class="ident" id="7717282">ValueGobber</span><span class="op" id="7717293">(</span><span class="string" id="7717294">&#34;hello&#34;</span><span class="op" id="7717301">)</span><span class="op" id="7717302">,</span>&nbsp;<span class="ident" id="7717304">BinaryValueGobber</span><span class="op" id="7717321">(</span><span class="string" id="7717322">&#34;Καλημέρα&#34;</span><span class="op" id="7717340">)</span><span class="op" id="7717341">,</span>&nbsp;<span class="ident" id="7717343">TextValueGobber</span><span class="op" id="7717358">(</span><span class="string" id="7717359">&#34;こんにちは&#34;</span><span class="op" id="7717376">)</span><span class="op" id="7717377">}</span><span class="op" id="7717378">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717381">if</span>&nbsp;<span class="ident" id="7717384">err</span>&nbsp;<span class="op" id="7717388">!=</span>&nbsp;<span class="ident" id="7717391">nil</span>&nbsp;<span class="op" id="7717395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717399">t</span><span class="op" id="7717400">.</span><span class="ident" id="7717401">Fatal</span><span class="op" id="7717406">(</span><span class="string" id="7717407">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7717422">,</span>&nbsp;<span class="ident" id="7717424">err</span><span class="op" id="7717427">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717430">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717433">dec</span>&nbsp;<span class="op" id="7717437">:=</span>&nbsp;<span class="ident" id="7717440">NewDecoder</span><span class="op" id="7717450">(</span><span class="ident" id="7717451">b</span><span class="op" id="7717452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717455">x</span>&nbsp;<span class="op" id="7717457">:=</span>&nbsp;<span class="builtinfunc" id="7717460">new</span><span class="op" id="7717463">(</span><span class="ident" id="7717464">GobTest5</span><span class="op" id="7717472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717475">err</span>&nbsp;<span class="op" id="7717479">=</span>&nbsp;<span class="ident" id="7717481">dec</span><span class="op" id="7717484">.</span><span class="ident" id="7717485">Decode</span><span class="op" id="7717491">(</span><span class="ident" id="7717492">x</span><span class="op" id="7717493">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717496">if</span>&nbsp;<span class="ident" id="7717499">err</span>&nbsp;<span class="op" id="7717503">!=</span>&nbsp;<span class="ident" id="7717506">nil</span>&nbsp;<span class="op" id="7717510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717514">t</span><span class="op" id="7717515">.</span><span class="ident" id="7717516">Fatal</span><span class="op" id="7717521">(</span><span class="string" id="7717522">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7717537">,</span>&nbsp;<span class="ident" id="7717539">err</span><span class="op" id="7717542">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717545">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7717548">if</span>&nbsp;<span class="op" id="7717551">*</span><span class="ident" id="7717552">x</span><span class="op" id="7717553">.</span><span class="ident" id="7717554">V</span>&nbsp;<span class="op" id="7717556">!=</span>&nbsp;<span class="string" id="7717559">&#34;hello&#34;</span>&nbsp;<span class="op" id="7717567">||</span>&nbsp;<span class="op" id="7717570">*</span><span class="ident" id="7717571">x</span><span class="op" id="7717572">.</span><span class="ident" id="7717573">BV</span>&nbsp;<span class="op" id="7717576">!=</span>&nbsp;<span class="string" id="7717579">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="7717598">||</span>&nbsp;<span class="op" id="7717601">*</span><span class="ident" id="7717602">x</span><span class="op" id="7717603">.</span><span class="ident" id="7717604">TV</span>&nbsp;<span class="op" id="7717607">!=</span>&nbsp;<span class="string" id="7717610">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="7717628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717632">t</span><span class="op" id="7717633">.</span><span class="ident" id="7717634">Errorf</span><span class="op" id="7717640">(</span><span class="string" id="7717641">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="7717666">,</span>&nbsp;<span class="op" id="7717668">*</span><span class="ident" id="7717669">x</span><span class="op" id="7717670">.</span><span class="ident" id="7717671">V</span><span class="op" id="7717672">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7717675">}</span><br>
<span class="lineno"></span><span class="op" id="7717677">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="7717680">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7717748">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="7717789">func</span>&nbsp;<span class="ident" id="7717794">TestGobEncoderValueThenPointer</span><span class="op" id="7717824">(</span><span class="ident" id="7717825">t</span>&nbsp;<span class="op" id="7717827">*</span><span class="ident" id="7717828">testing</span><span class="op" id="7717835">.</span><span class="ident" id="7717836">T</span><span class="op" id="7717837">)</span>&nbsp;<span class="op" id="7717839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717842">v</span>&nbsp;<span class="op" id="7717844">:=</span>&nbsp;<span class="ident" id="7717847">ValueGobber</span><span class="op" id="7717858">(</span><span class="string" id="7717859">&#34;forty-two&#34;</span><span class="op" id="7717870">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717873">w</span>&nbsp;<span class="op" id="7717875">:=</span>&nbsp;<span class="ident" id="7717878">ValueGobber</span><span class="op" id="7717889">(</span><span class="string" id="7717890">&#34;six-by-nine&#34;</span><span class="op" id="7717903">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717906">bv</span>&nbsp;<span class="op" id="7717909">:=</span>&nbsp;<span class="ident" id="7717912">BinaryValueGobber</span><span class="op" id="7717929">(</span><span class="string" id="7717930">&#34;1nanocentury&#34;</span><span class="op" id="7717944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717947">bw</span>&nbsp;<span class="op" id="7717950">:=</span>&nbsp;<span class="ident" id="7717953">BinaryValueGobber</span><span class="op" id="7717970">(</span><span class="string" id="7717971">&#34;πseconds&#34;</span><span class="op" id="7717982">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7717985">tv</span>&nbsp;<span class="op" id="7717988">:=</span>&nbsp;<span class="ident" id="7717991">TextValueGobber</span><span class="op" id="7718006">(</span><span class="string" id="7718007">&#34;gravitationalacceleration&#34;</span><span class="op" id="7718034">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718037">tw</span>&nbsp;<span class="op" id="7718040">:=</span>&nbsp;<span class="ident" id="7718043">TextValueGobber</span><span class="op" id="7718058">(</span><span class="string" id="7718059">&#34;π²ft/s²&#34;</span><span class="op" id="7718071">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718075">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7718146">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718210">b</span>&nbsp;<span class="op" id="7718212">:=</span>&nbsp;<span class="builtinfunc" id="7718215">new</span><span class="op" id="7718218">(</span><span class="ident" id="7718219">bytes</span><span class="op" id="7718224">.</span><span class="ident" id="7718225">Buffer</span><span class="op" id="7718231">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718234">enc</span>&nbsp;<span class="op" id="7718238">:=</span>&nbsp;<span class="ident" id="7718241">NewEncoder</span><span class="op" id="7718251">(</span><span class="ident" id="7718252">b</span><span class="op" id="7718253">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718256">if</span>&nbsp;<span class="ident" id="7718259">err</span>&nbsp;<span class="op" id="7718263">:=</span>&nbsp;<span class="ident" id="7718266">enc</span><span class="op" id="7718269">.</span><span class="ident" id="7718270">Encode</span><span class="op" id="7718276">(</span><span class="ident" id="7718277">GobTest6</span><span class="op" id="7718285">{</span><span class="num" id="7718286">42</span><span class="op" id="7718288">,</span>&nbsp;<span class="ident" id="7718290">v</span><span class="op" id="7718291">,</span>&nbsp;<span class="op" id="7718293">&amp;</span><span class="ident" id="7718294">w</span><span class="op" id="7718295">,</span>&nbsp;<span class="ident" id="7718297">bv</span><span class="op" id="7718299">,</span>&nbsp;<span class="op" id="7718301">&amp;</span><span class="ident" id="7718302">bw</span><span class="op" id="7718304">,</span>&nbsp;<span class="ident" id="7718306">tv</span><span class="op" id="7718308">,</span>&nbsp;<span class="op" id="7718310">&amp;</span><span class="ident" id="7718311">tw</span><span class="op" id="7718313">}</span><span class="op" id="7718314">)</span><span class="op" id="7718315">;</span>&nbsp;<span class="ident" id="7718317">err</span>&nbsp;<span class="op" id="7718321">!=</span>&nbsp;<span class="ident" id="7718324">nil</span>&nbsp;<span class="op" id="7718328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718332">t</span><span class="op" id="7718333">.</span><span class="ident" id="7718334">Fatal</span><span class="op" id="7718339">(</span><span class="string" id="7718340">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7718355">,</span>&nbsp;<span class="ident" id="7718357">err</span><span class="op" id="7718360">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718366">dec</span>&nbsp;<span class="op" id="7718370">:=</span>&nbsp;<span class="ident" id="7718373">NewDecoder</span><span class="op" id="7718383">(</span><span class="ident" id="7718384">b</span><span class="op" id="7718385">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718388">x</span>&nbsp;<span class="op" id="7718390">:=</span>&nbsp;<span class="builtinfunc" id="7718393">new</span><span class="op" id="7718396">(</span><span class="ident" id="7718397">GobTest6</span><span class="op" id="7718405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718408">if</span>&nbsp;<span class="ident" id="7718411">err</span>&nbsp;<span class="op" id="7718415">:=</span>&nbsp;<span class="ident" id="7718418">dec</span><span class="op" id="7718421">.</span><span class="ident" id="7718422">Decode</span><span class="op" id="7718428">(</span><span class="ident" id="7718429">x</span><span class="op" id="7718430">)</span><span class="op" id="7718431">;</span>&nbsp;<span class="ident" id="7718433">err</span>&nbsp;<span class="op" id="7718437">!=</span>&nbsp;<span class="ident" id="7718440">nil</span>&nbsp;<span class="op" id="7718444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718448">t</span><span class="op" id="7718449">.</span><span class="ident" id="7718450">Fatal</span><span class="op" id="7718455">(</span><span class="string" id="7718456">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7718471">,</span>&nbsp;<span class="ident" id="7718473">err</span><span class="op" id="7718476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718479">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718483">if</span>&nbsp;<span class="ident" id="7718486">got</span><span class="op" id="7718489">,</span>&nbsp;<span class="ident" id="7718491">want</span>&nbsp;<span class="op" id="7718496">:=</span>&nbsp;<span class="ident" id="7718499">x</span><span class="op" id="7718500">.</span><span class="ident" id="7718501">V</span><span class="op" id="7718502">,</span>&nbsp;<span class="ident" id="7718504">v</span><span class="op" id="7718505">;</span>&nbsp;<span class="ident" id="7718507">got</span>&nbsp;<span class="op" id="7718511">!=</span>&nbsp;<span class="ident" id="7718514">want</span>&nbsp;<span class="op" id="7718519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718523">t</span><span class="op" id="7718524">.</span><span class="ident" id="7718525">Errorf</span><span class="op" id="7718531">(</span><span class="string" id="7718532">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718549">,</span>&nbsp;<span class="ident" id="7718551">got</span><span class="op" id="7718554">,</span>&nbsp;<span class="ident" id="7718556">want</span><span class="op" id="7718560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718566">if</span>&nbsp;<span class="ident" id="7718569">got</span><span class="op" id="7718572">,</span>&nbsp;<span class="ident" id="7718574">want</span>&nbsp;<span class="op" id="7718579">:=</span>&nbsp;<span class="ident" id="7718582">x</span><span class="op" id="7718583">.</span><span class="ident" id="7718584">W</span><span class="op" id="7718585">,</span>&nbsp;<span class="ident" id="7718587">w</span><span class="op" id="7718588">;</span>&nbsp;<span class="ident" id="7718590">got</span>&nbsp;<span class="op" id="7718594">==</span>&nbsp;<span class="ident" id="7718597">nil</span>&nbsp;<span class="op" id="7718601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718605">t</span><span class="op" id="7718606">.</span><span class="ident" id="7718607">Errorf</span><span class="op" id="7718613">(</span><span class="string" id="7718614">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718632">,</span>&nbsp;<span class="ident" id="7718634">want</span><span class="op" id="7718638">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718641">}</span>&nbsp;<span class="keyword" id="7718643">else</span>&nbsp;<span class="keyword" id="7718648">if</span>&nbsp;<span class="op" id="7718651">*</span><span class="ident" id="7718652">got</span>&nbsp;<span class="op" id="7718656">!=</span>&nbsp;<span class="ident" id="7718659">want</span>&nbsp;<span class="op" id="7718664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718668">t</span><span class="op" id="7718669">.</span><span class="ident" id="7718670">Errorf</span><span class="op" id="7718676">(</span><span class="string" id="7718677">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718694">,</span>&nbsp;<span class="op" id="7718696">*</span><span class="ident" id="7718697">got</span><span class="op" id="7718700">,</span>&nbsp;<span class="ident" id="7718702">want</span><span class="op" id="7718706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718709">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718713">if</span>&nbsp;<span class="ident" id="7718716">got</span><span class="op" id="7718719">,</span>&nbsp;<span class="ident" id="7718721">want</span>&nbsp;<span class="op" id="7718726">:=</span>&nbsp;<span class="ident" id="7718729">x</span><span class="op" id="7718730">.</span><span class="ident" id="7718731">BV</span><span class="op" id="7718733">,</span>&nbsp;<span class="ident" id="7718735">bv</span><span class="op" id="7718737">;</span>&nbsp;<span class="ident" id="7718739">got</span>&nbsp;<span class="op" id="7718743">!=</span>&nbsp;<span class="ident" id="7718746">want</span>&nbsp;<span class="op" id="7718751">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718755">t</span><span class="op" id="7718756">.</span><span class="ident" id="7718757">Errorf</span><span class="op" id="7718763">(</span><span class="string" id="7718764">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718782">,</span>&nbsp;<span class="ident" id="7718784">got</span><span class="op" id="7718787">,</span>&nbsp;<span class="ident" id="7718789">want</span><span class="op" id="7718793">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718796">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718799">if</span>&nbsp;<span class="ident" id="7718802">got</span><span class="op" id="7718805">,</span>&nbsp;<span class="ident" id="7718807">want</span>&nbsp;<span class="op" id="7718812">:=</span>&nbsp;<span class="ident" id="7718815">x</span><span class="op" id="7718816">.</span><span class="ident" id="7718817">BW</span><span class="op" id="7718819">,</span>&nbsp;<span class="ident" id="7718821">bw</span><span class="op" id="7718823">;</span>&nbsp;<span class="ident" id="7718825">got</span>&nbsp;<span class="op" id="7718829">==</span>&nbsp;<span class="ident" id="7718832">nil</span>&nbsp;<span class="op" id="7718836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718840">t</span><span class="op" id="7718841">.</span><span class="ident" id="7718842">Errorf</span><span class="op" id="7718848">(</span><span class="string" id="7718849">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718868">,</span>&nbsp;<span class="ident" id="7718870">want</span><span class="op" id="7718874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718877">}</span>&nbsp;<span class="keyword" id="7718879">else</span>&nbsp;<span class="keyword" id="7718884">if</span>&nbsp;<span class="op" id="7718887">*</span><span class="ident" id="7718888">got</span>&nbsp;<span class="op" id="7718892">!=</span>&nbsp;<span class="ident" id="7718895">want</span>&nbsp;<span class="op" id="7718900">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718904">t</span><span class="op" id="7718905">.</span><span class="ident" id="7718906">Errorf</span><span class="op" id="7718912">(</span><span class="string" id="7718913">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7718931">,</span>&nbsp;<span class="op" id="7718933">*</span><span class="ident" id="7718934">got</span><span class="op" id="7718937">,</span>&nbsp;<span class="ident" id="7718939">want</span><span class="op" id="7718943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7718946">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7718950">if</span>&nbsp;<span class="ident" id="7718953">got</span><span class="op" id="7718956">,</span>&nbsp;<span class="ident" id="7718958">want</span>&nbsp;<span class="op" id="7718963">:=</span>&nbsp;<span class="ident" id="7718966">x</span><span class="op" id="7718967">.</span><span class="ident" id="7718968">TV</span><span class="op" id="7718970">,</span>&nbsp;<span class="ident" id="7718972">tv</span><span class="op" id="7718974">;</span>&nbsp;<span class="ident" id="7718976">got</span>&nbsp;<span class="op" id="7718980">!=</span>&nbsp;<span class="ident" id="7718983">want</span>&nbsp;<span class="op" id="7718988">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7718992">t</span><span class="op" id="7718993">.</span><span class="ident" id="7718994">Errorf</span><span class="op" id="7719000">(</span><span class="string" id="7719001">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719019">,</span>&nbsp;<span class="ident" id="7719021">got</span><span class="op" id="7719024">,</span>&nbsp;<span class="ident" id="7719026">want</span><span class="op" id="7719030">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719033">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719036">if</span>&nbsp;<span class="ident" id="7719039">got</span><span class="op" id="7719042">,</span>&nbsp;<span class="ident" id="7719044">want</span>&nbsp;<span class="op" id="7719049">:=</span>&nbsp;<span class="ident" id="7719052">x</span><span class="op" id="7719053">.</span><span class="ident" id="7719054">TW</span><span class="op" id="7719056">,</span>&nbsp;<span class="ident" id="7719058">tw</span><span class="op" id="7719060">;</span>&nbsp;<span class="ident" id="7719062">got</span>&nbsp;<span class="op" id="7719066">==</span>&nbsp;<span class="ident" id="7719069">nil</span>&nbsp;<span class="op" id="7719073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719077">t</span><span class="op" id="7719078">.</span><span class="ident" id="7719079">Errorf</span><span class="op" id="7719085">(</span><span class="string" id="7719086">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719105">,</span>&nbsp;<span class="ident" id="7719107">want</span><span class="op" id="7719111">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719114">}</span>&nbsp;<span class="keyword" id="7719116">else</span>&nbsp;<span class="keyword" id="7719121">if</span>&nbsp;<span class="op" id="7719124">*</span><span class="ident" id="7719125">got</span>&nbsp;<span class="op" id="7719129">!=</span>&nbsp;<span class="ident" id="7719132">want</span>&nbsp;<span class="op" id="7719137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719141">t</span><span class="op" id="7719142">.</span><span class="ident" id="7719143">Errorf</span><span class="op" id="7719149">(</span><span class="string" id="7719150">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719168">,</span>&nbsp;<span class="op" id="7719170">*</span><span class="ident" id="7719171">got</span><span class="op" id="7719174">,</span>&nbsp;<span class="ident" id="7719176">want</span><span class="op" id="7719180">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719183">}</span><br>
<span class="lineno"></span><span class="op" id="7719185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7719188">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="7719256">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="7719286">func</span>&nbsp;<span class="ident" id="7719291">TestGobEncoderPointerThenValue</span><span class="op" id="7719321">(</span><span class="ident" id="7719322">t</span>&nbsp;<span class="op" id="7719324">*</span><span class="ident" id="7719325">testing</span><span class="op" id="7719332">.</span><span class="ident" id="7719333">T</span><span class="op" id="7719334">)</span>&nbsp;<span class="op" id="7719336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719339">v</span>&nbsp;<span class="op" id="7719341">:=</span>&nbsp;<span class="ident" id="7719344">ValueGobber</span><span class="op" id="7719355">(</span><span class="string" id="7719356">&#34;forty-two&#34;</span><span class="op" id="7719367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719370">w</span>&nbsp;<span class="op" id="7719372">:=</span>&nbsp;<span class="ident" id="7719375">ValueGobber</span><span class="op" id="7719386">(</span><span class="string" id="7719387">&#34;six-by-nine&#34;</span><span class="op" id="7719400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719403">bv</span>&nbsp;<span class="op" id="7719406">:=</span>&nbsp;<span class="ident" id="7719409">BinaryValueGobber</span><span class="op" id="7719426">(</span><span class="string" id="7719427">&#34;1nanocentury&#34;</span><span class="op" id="7719441">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719444">bw</span>&nbsp;<span class="op" id="7719447">:=</span>&nbsp;<span class="ident" id="7719450">BinaryValueGobber</span><span class="op" id="7719467">(</span><span class="string" id="7719468">&#34;πseconds&#34;</span><span class="op" id="7719479">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719482">tv</span>&nbsp;<span class="op" id="7719485">:=</span>&nbsp;<span class="ident" id="7719488">TextValueGobber</span><span class="op" id="7719503">(</span><span class="string" id="7719504">&#34;gravitationalacceleration&#34;</span><span class="op" id="7719531">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719534">tw</span>&nbsp;<span class="op" id="7719537">:=</span>&nbsp;<span class="ident" id="7719540">TextValueGobber</span><span class="op" id="7719555">(</span><span class="string" id="7719556">&#34;π²ft/s²&#34;</span><span class="op" id="7719568">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719572">b</span>&nbsp;<span class="op" id="7719574">:=</span>&nbsp;<span class="builtinfunc" id="7719577">new</span><span class="op" id="7719580">(</span><span class="ident" id="7719581">bytes</span><span class="op" id="7719586">.</span><span class="ident" id="7719587">Buffer</span><span class="op" id="7719593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719596">enc</span>&nbsp;<span class="op" id="7719600">:=</span>&nbsp;<span class="ident" id="7719603">NewEncoder</span><span class="op" id="7719613">(</span><span class="ident" id="7719614">b</span><span class="op" id="7719615">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719618">if</span>&nbsp;<span class="ident" id="7719621">err</span>&nbsp;<span class="op" id="7719625">:=</span>&nbsp;<span class="ident" id="7719628">enc</span><span class="op" id="7719631">.</span><span class="ident" id="7719632">Encode</span><span class="op" id="7719638">(</span><span class="ident" id="7719639">GobTest7</span><span class="op" id="7719647">{</span><span class="num" id="7719648">42</span><span class="op" id="7719650">,</span>&nbsp;<span class="op" id="7719652">&amp;</span><span class="ident" id="7719653">v</span><span class="op" id="7719654">,</span>&nbsp;<span class="ident" id="7719656">w</span><span class="op" id="7719657">,</span>&nbsp;<span class="op" id="7719659">&amp;</span><span class="ident" id="7719660">bv</span><span class="op" id="7719662">,</span>&nbsp;<span class="ident" id="7719664">bw</span><span class="op" id="7719666">,</span>&nbsp;<span class="op" id="7719668">&amp;</span><span class="ident" id="7719669">tv</span><span class="op" id="7719671">,</span>&nbsp;<span class="ident" id="7719673">tw</span><span class="op" id="7719675">}</span><span class="op" id="7719676">)</span><span class="op" id="7719677">;</span>&nbsp;<span class="ident" id="7719679">err</span>&nbsp;<span class="op" id="7719683">!=</span>&nbsp;<span class="ident" id="7719686">nil</span>&nbsp;<span class="op" id="7719690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719694">t</span><span class="op" id="7719695">.</span><span class="ident" id="7719696">Fatal</span><span class="op" id="7719701">(</span><span class="string" id="7719702">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7719717">,</span>&nbsp;<span class="ident" id="7719719">err</span><span class="op" id="7719722">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719728">dec</span>&nbsp;<span class="op" id="7719732">:=</span>&nbsp;<span class="ident" id="7719735">NewDecoder</span><span class="op" id="7719745">(</span><span class="ident" id="7719746">b</span><span class="op" id="7719747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719750">x</span>&nbsp;<span class="op" id="7719752">:=</span>&nbsp;<span class="builtinfunc" id="7719755">new</span><span class="op" id="7719758">(</span><span class="ident" id="7719759">GobTest7</span><span class="op" id="7719767">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719770">if</span>&nbsp;<span class="ident" id="7719773">err</span>&nbsp;<span class="op" id="7719777">:=</span>&nbsp;<span class="ident" id="7719780">dec</span><span class="op" id="7719783">.</span><span class="ident" id="7719784">Decode</span><span class="op" id="7719790">(</span><span class="ident" id="7719791">x</span><span class="op" id="7719792">)</span><span class="op" id="7719793">;</span>&nbsp;<span class="ident" id="7719795">err</span>&nbsp;<span class="op" id="7719799">!=</span>&nbsp;<span class="ident" id="7719802">nil</span>&nbsp;<span class="op" id="7719806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719810">t</span><span class="op" id="7719811">.</span><span class="ident" id="7719812">Fatal</span><span class="op" id="7719817">(</span><span class="string" id="7719818">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7719833">,</span>&nbsp;<span class="ident" id="7719835">err</span><span class="op" id="7719838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719845">if</span>&nbsp;<span class="ident" id="7719848">got</span><span class="op" id="7719851">,</span>&nbsp;<span class="ident" id="7719853">want</span>&nbsp;<span class="op" id="7719858">:=</span>&nbsp;<span class="ident" id="7719861">x</span><span class="op" id="7719862">.</span><span class="ident" id="7719863">V</span><span class="op" id="7719864">,</span>&nbsp;<span class="ident" id="7719866">v</span><span class="op" id="7719867">;</span>&nbsp;<span class="ident" id="7719869">got</span>&nbsp;<span class="op" id="7719873">==</span>&nbsp;<span class="ident" id="7719876">nil</span>&nbsp;<span class="op" id="7719880">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719884">t</span><span class="op" id="7719885">.</span><span class="ident" id="7719886">Errorf</span><span class="op" id="7719892">(</span><span class="string" id="7719893">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719911">,</span>&nbsp;<span class="ident" id="7719913">want</span><span class="op" id="7719917">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719920">}</span>&nbsp;<span class="keyword" id="7719922">else</span>&nbsp;<span class="keyword" id="7719927">if</span>&nbsp;<span class="op" id="7719930">*</span><span class="ident" id="7719931">got</span>&nbsp;<span class="op" id="7719935">!=</span>&nbsp;<span class="ident" id="7719938">want</span>&nbsp;<span class="op" id="7719943">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7719947">t</span><span class="op" id="7719948">.</span><span class="ident" id="7719949">Errorf</span><span class="op" id="7719955">(</span><span class="string" id="7719956">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7719973">,</span>&nbsp;<span class="op" id="7719975">*</span><span class="ident" id="7719976">got</span><span class="op" id="7719979">,</span>&nbsp;<span class="ident" id="7719981">want</span><span class="op" id="7719985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7719988">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7719991">if</span>&nbsp;<span class="ident" id="7719994">got</span><span class="op" id="7719997">,</span>&nbsp;<span class="ident" id="7719999">want</span>&nbsp;<span class="op" id="7720004">:=</span>&nbsp;<span class="ident" id="7720007">x</span><span class="op" id="7720008">.</span><span class="ident" id="7720009">W</span><span class="op" id="7720010">,</span>&nbsp;<span class="ident" id="7720012">w</span><span class="op" id="7720013">;</span>&nbsp;<span class="ident" id="7720015">got</span>&nbsp;<span class="op" id="7720019">!=</span>&nbsp;<span class="ident" id="7720022">want</span>&nbsp;<span class="op" id="7720027">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720031">t</span><span class="op" id="7720032">.</span><span class="ident" id="7720033">Errorf</span><span class="op" id="7720039">(</span><span class="string" id="7720040">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720057">,</span>&nbsp;<span class="ident" id="7720059">got</span><span class="op" id="7720062">,</span>&nbsp;<span class="ident" id="7720064">want</span><span class="op" id="7720068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720071">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720075">if</span>&nbsp;<span class="ident" id="7720078">got</span><span class="op" id="7720081">,</span>&nbsp;<span class="ident" id="7720083">want</span>&nbsp;<span class="op" id="7720088">:=</span>&nbsp;<span class="ident" id="7720091">x</span><span class="op" id="7720092">.</span><span class="ident" id="7720093">BV</span><span class="op" id="7720095">,</span>&nbsp;<span class="ident" id="7720097">bv</span><span class="op" id="7720099">;</span>&nbsp;<span class="ident" id="7720101">got</span>&nbsp;<span class="op" id="7720105">==</span>&nbsp;<span class="ident" id="7720108">nil</span>&nbsp;<span class="op" id="7720112">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720116">t</span><span class="op" id="7720117">.</span><span class="ident" id="7720118">Errorf</span><span class="op" id="7720124">(</span><span class="string" id="7720125">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720144">,</span>&nbsp;<span class="ident" id="7720146">want</span><span class="op" id="7720150">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720153">}</span>&nbsp;<span class="keyword" id="7720155">else</span>&nbsp;<span class="keyword" id="7720160">if</span>&nbsp;<span class="op" id="7720163">*</span><span class="ident" id="7720164">got</span>&nbsp;<span class="op" id="7720168">!=</span>&nbsp;<span class="ident" id="7720171">want</span>&nbsp;<span class="op" id="7720176">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720180">t</span><span class="op" id="7720181">.</span><span class="ident" id="7720182">Errorf</span><span class="op" id="7720188">(</span><span class="string" id="7720189">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720207">,</span>&nbsp;<span class="op" id="7720209">*</span><span class="ident" id="7720210">got</span><span class="op" id="7720213">,</span>&nbsp;<span class="ident" id="7720215">want</span><span class="op" id="7720219">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720225">if</span>&nbsp;<span class="ident" id="7720228">got</span><span class="op" id="7720231">,</span>&nbsp;<span class="ident" id="7720233">want</span>&nbsp;<span class="op" id="7720238">:=</span>&nbsp;<span class="ident" id="7720241">x</span><span class="op" id="7720242">.</span><span class="ident" id="7720243">BW</span><span class="op" id="7720245">,</span>&nbsp;<span class="ident" id="7720247">bw</span><span class="op" id="7720249">;</span>&nbsp;<span class="ident" id="7720251">got</span>&nbsp;<span class="op" id="7720255">!=</span>&nbsp;<span class="ident" id="7720258">want</span>&nbsp;<span class="op" id="7720263">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720267">t</span><span class="op" id="7720268">.</span><span class="ident" id="7720269">Errorf</span><span class="op" id="7720275">(</span><span class="string" id="7720276">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720294">,</span>&nbsp;<span class="ident" id="7720296">got</span><span class="op" id="7720299">,</span>&nbsp;<span class="ident" id="7720301">want</span><span class="op" id="7720305">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720312">if</span>&nbsp;<span class="ident" id="7720315">got</span><span class="op" id="7720318">,</span>&nbsp;<span class="ident" id="7720320">want</span>&nbsp;<span class="op" id="7720325">:=</span>&nbsp;<span class="ident" id="7720328">x</span><span class="op" id="7720329">.</span><span class="ident" id="7720330">TV</span><span class="op" id="7720332">,</span>&nbsp;<span class="ident" id="7720334">tv</span><span class="op" id="7720336">;</span>&nbsp;<span class="ident" id="7720338">got</span>&nbsp;<span class="op" id="7720342">==</span>&nbsp;<span class="ident" id="7720345">nil</span>&nbsp;<span class="op" id="7720349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720353">t</span><span class="op" id="7720354">.</span><span class="ident" id="7720355">Errorf</span><span class="op" id="7720361">(</span><span class="string" id="7720362">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720381">,</span>&nbsp;<span class="ident" id="7720383">want</span><span class="op" id="7720387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720390">}</span>&nbsp;<span class="keyword" id="7720392">else</span>&nbsp;<span class="keyword" id="7720397">if</span>&nbsp;<span class="op" id="7720400">*</span><span class="ident" id="7720401">got</span>&nbsp;<span class="op" id="7720405">!=</span>&nbsp;<span class="ident" id="7720408">want</span>&nbsp;<span class="op" id="7720413">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720417">t</span><span class="op" id="7720418">.</span><span class="ident" id="7720419">Errorf</span><span class="op" id="7720425">(</span><span class="string" id="7720426">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720444">,</span>&nbsp;<span class="op" id="7720446">*</span><span class="ident" id="7720447">got</span><span class="op" id="7720450">,</span>&nbsp;<span class="ident" id="7720452">want</span><span class="op" id="7720456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720459">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720462">if</span>&nbsp;<span class="ident" id="7720465">got</span><span class="op" id="7720468">,</span>&nbsp;<span class="ident" id="7720470">want</span>&nbsp;<span class="op" id="7720475">:=</span>&nbsp;<span class="ident" id="7720478">x</span><span class="op" id="7720479">.</span><span class="ident" id="7720480">TW</span><span class="op" id="7720482">,</span>&nbsp;<span class="ident" id="7720484">tw</span><span class="op" id="7720486">;</span>&nbsp;<span class="ident" id="7720488">got</span>&nbsp;<span class="op" id="7720492">!=</span>&nbsp;<span class="ident" id="7720495">want</span>&nbsp;<span class="op" id="7720500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720504">t</span><span class="op" id="7720505">.</span><span class="ident" id="7720506">Errorf</span><span class="op" id="7720512">(</span><span class="string" id="7720513">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7720531">,</span>&nbsp;<span class="ident" id="7720533">got</span><span class="op" id="7720536">,</span>&nbsp;<span class="ident" id="7720538">want</span><span class="op" id="7720542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720545">}</span><br>
<span class="lineno">535</span><span class="op" id="7720547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7720550">func</span>&nbsp;<span class="ident" id="7720555">TestGobEncoderFieldTypeError</span><span class="op" id="7720583">(</span><span class="ident" id="7720584">t</span>&nbsp;<span class="op" id="7720586">*</span><span class="ident" id="7720587">testing</span><span class="op" id="7720594">.</span><span class="ident" id="7720595">T</span><span class="op" id="7720596">)</span>&nbsp;<span class="op" id="7720598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7720601">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720638">b</span>&nbsp;<span class="op" id="7720640">:=</span>&nbsp;<span class="builtinfunc" id="7720643">new</span><span class="op" id="7720646">(</span><span class="ident" id="7720647">bytes</span><span class="op" id="7720652">.</span><span class="ident" id="7720653">Buffer</span><span class="op" id="7720659">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720662">enc</span>&nbsp;<span class="op" id="7720666">:=</span>&nbsp;<span class="ident" id="7720669">NewEncoder</span><span class="op" id="7720679">(</span><span class="ident" id="7720680">b</span><span class="op" id="7720681">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720684">err</span>&nbsp;<span class="op" id="7720688">:=</span>&nbsp;<span class="ident" id="7720691">enc</span><span class="op" id="7720694">.</span><span class="ident" id="7720695">Encode</span><span class="op" id="7720701">(</span><span class="ident" id="7720702">GobTest1</span><span class="op" id="7720710">{</span><span class="num" id="7720711">17</span><span class="op" id="7720713">,</span>&nbsp;<span class="op" id="7720715">&amp;</span><span class="ident" id="7720716">StringStruct</span><span class="op" id="7720728">{</span><span class="string" id="7720729">&#34;ABC&#34;</span><span class="op" id="7720734">}</span><span class="op" id="7720735">}</span><span class="op" id="7720736">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720739">if</span>&nbsp;<span class="ident" id="7720742">err</span>&nbsp;<span class="op" id="7720746">!=</span>&nbsp;<span class="ident" id="7720749">nil</span>&nbsp;<span class="op" id="7720753">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720757">t</span><span class="op" id="7720758">.</span><span class="ident" id="7720759">Fatal</span><span class="op" id="7720764">(</span><span class="string" id="7720765">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7720780">,</span>&nbsp;<span class="ident" id="7720782">err</span><span class="op" id="7720785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720788">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720791">dec</span>&nbsp;<span class="op" id="7720795">:=</span>&nbsp;<span class="ident" id="7720798">NewDecoder</span><span class="op" id="7720808">(</span><span class="ident" id="7720809">b</span><span class="op" id="7720810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720813">x</span>&nbsp;<span class="op" id="7720815">:=</span>&nbsp;<span class="op" id="7720818">&amp;</span><span class="ident" id="7720819">GobTest2</span><span class="op" id="7720827">{</span><span class="op" id="7720828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720831">err</span>&nbsp;<span class="op" id="7720835">=</span>&nbsp;<span class="ident" id="7720837">dec</span><span class="op" id="7720840">.</span><span class="ident" id="7720841">Decode</span><span class="op" id="7720847">(</span><span class="ident" id="7720848">x</span><span class="op" id="7720849">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720852">if</span>&nbsp;<span class="ident" id="7720855">err</span>&nbsp;<span class="op" id="7720859">==</span>&nbsp;<span class="ident" id="7720862">nil</span>&nbsp;<span class="op" id="7720866">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7720870">t</span><span class="op" id="7720871">.</span><span class="ident" id="7720872">Fatal</span><span class="op" id="7720877">(</span><span class="string" id="7720878">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="7720948">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7720951">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7720954">if</span>&nbsp;<span class="ident" id="7720957">strings</span><span class="op" id="7720964">.</span><span class="ident" id="7720965">Index</span><span class="op" id="7720970">(</span><span class="ident" id="7720971">err</span><span class="op" id="7720974">.</span><span class="ident" id="7720975">Error</span><span class="op" id="7720980">(</span><span class="op" id="7720981">)</span><span class="op" id="7720982">,</span>&nbsp;<span class="string" id="7720984">&#34;type&#34;</span><span class="op" id="7720990">)</span>&nbsp;<span class="op" id="7720992">&lt;</span>&nbsp;<span class="num" id="7720994">0</span>&nbsp;<span class="op" id="7720996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721000">t</span><span class="op" id="7721001">.</span><span class="ident" id="7721002">Fatal</span><span class="op" id="7721007">(</span><span class="string" id="7721008">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7721034">,</span>&nbsp;<span class="ident" id="7721036">err</span><span class="op" id="7721039">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7721045">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721082">b</span><span class="op" id="7721083">.</span><span class="ident" id="7721084">Reset</span><span class="op" id="7721089">(</span><span class="op" id="7721090">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721093">err</span>&nbsp;<span class="op" id="7721097">=</span>&nbsp;<span class="ident" id="7721099">enc</span><span class="op" id="7721102">.</span><span class="ident" id="7721103">Encode</span><span class="op" id="7721109">(</span><span class="ident" id="7721110">GobTest2</span><span class="op" id="7721118">{</span><span class="num" id="7721119">17</span><span class="op" id="7721121">,</span>&nbsp;<span class="string" id="7721123">&#34;ABC&#34;</span><span class="op" id="7721128">}</span><span class="op" id="7721129">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721132">if</span>&nbsp;<span class="ident" id="7721135">err</span>&nbsp;<span class="op" id="7721139">!=</span>&nbsp;<span class="ident" id="7721142">nil</span>&nbsp;<span class="op" id="7721146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721150">t</span><span class="op" id="7721151">.</span><span class="ident" id="7721152">Fatal</span><span class="op" id="7721157">(</span><span class="string" id="7721158">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7721173">,</span>&nbsp;<span class="ident" id="7721175">err</span><span class="op" id="7721178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721181">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721184">y</span>&nbsp;<span class="op" id="7721186">:=</span>&nbsp;<span class="op" id="7721189">&amp;</span><span class="ident" id="7721190">GobTest1</span><span class="op" id="7721198">{</span><span class="op" id="7721199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721202">err</span>&nbsp;<span class="op" id="7721206">=</span>&nbsp;<span class="ident" id="7721208">dec</span><span class="op" id="7721211">.</span><span class="ident" id="7721212">Decode</span><span class="op" id="7721218">(</span><span class="ident" id="7721219">y</span><span class="op" id="7721220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721223">if</span>&nbsp;<span class="ident" id="7721226">err</span>&nbsp;<span class="op" id="7721230">==</span>&nbsp;<span class="ident" id="7721233">nil</span>&nbsp;<span class="op" id="7721237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721241">t</span><span class="op" id="7721242">.</span><span class="ident" id="7721243">Fatal</span><span class="op" id="7721248">(</span><span class="string" id="7721249">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="7721319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721322">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721325">if</span>&nbsp;<span class="ident" id="7721328">strings</span><span class="op" id="7721335">.</span><span class="ident" id="7721336">Index</span><span class="op" id="7721341">(</span><span class="ident" id="7721342">err</span><span class="op" id="7721345">.</span><span class="ident" id="7721346">Error</span><span class="op" id="7721351">(</span><span class="op" id="7721352">)</span><span class="op" id="7721353">,</span>&nbsp;<span class="string" id="7721355">&#34;type&#34;</span><span class="op" id="7721361">)</span>&nbsp;<span class="op" id="7721363">&lt;</span>&nbsp;<span class="num" id="7721365">0</span>&nbsp;<span class="op" id="7721367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721371">t</span><span class="op" id="7721372">.</span><span class="ident" id="7721373">Fatal</span><span class="op" id="7721378">(</span><span class="string" id="7721379">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="7721405">,</span>&nbsp;<span class="ident" id="7721407">err</span><span class="op" id="7721410">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721413">}</span><br>
<span class="lineno"></span><span class="op" id="7721415">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="7721418">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="7721503">func</span>&nbsp;<span class="ident" id="7721508">TestGobEncoderStructSingleton</span><span class="op" id="7721537">(</span><span class="ident" id="7721538">t</span>&nbsp;<span class="op" id="7721540">*</span><span class="ident" id="7721541">testing</span><span class="op" id="7721548">.</span><span class="ident" id="7721549">T</span><span class="op" id="7721550">)</span>&nbsp;<span class="op" id="7721552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721555">b</span>&nbsp;<span class="op" id="7721557">:=</span>&nbsp;<span class="builtinfunc" id="7721560">new</span><span class="op" id="7721563">(</span><span class="ident" id="7721564">bytes</span><span class="op" id="7721569">.</span><span class="ident" id="7721570">Buffer</span><span class="op" id="7721576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721579">enc</span>&nbsp;<span class="op" id="7721583">:=</span>&nbsp;<span class="ident" id="7721586">NewEncoder</span><span class="op" id="7721596">(</span><span class="ident" id="7721597">b</span><span class="op" id="7721598">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721601">err</span>&nbsp;<span class="op" id="7721605">:=</span>&nbsp;<span class="ident" id="7721608">enc</span><span class="op" id="7721611">.</span><span class="ident" id="7721612">Encode</span><span class="op" id="7721618">(</span><span class="op" id="7721619">&amp;</span><span class="ident" id="7721620">ByteStruct</span><span class="op" id="7721630">{</span><span class="string" id="7721631">&#39;A&#39;</span><span class="op" id="7721634">}</span><span class="op" id="7721635">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721638">if</span>&nbsp;<span class="ident" id="7721641">err</span>&nbsp;<span class="op" id="7721645">!=</span>&nbsp;<span class="ident" id="7721648">nil</span>&nbsp;<span class="op" id="7721652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721656">t</span><span class="op" id="7721657">.</span><span class="ident" id="7721658">Fatal</span><span class="op" id="7721663">(</span><span class="string" id="7721664">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7721679">,</span>&nbsp;<span class="ident" id="7721681">err</span><span class="op" id="7721684">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721687">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721690">dec</span>&nbsp;<span class="op" id="7721694">:=</span>&nbsp;<span class="ident" id="7721697">NewDecoder</span><span class="op" id="7721707">(</span><span class="ident" id="7721708">b</span><span class="op" id="7721709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721712">x</span>&nbsp;<span class="op" id="7721714">:=</span>&nbsp;<span class="builtinfunc" id="7721717">new</span><span class="op" id="7721720">(</span><span class="ident" id="7721721">ByteStruct</span><span class="op" id="7721731">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721734">err</span>&nbsp;<span class="op" id="7721738">=</span>&nbsp;<span class="ident" id="7721740">dec</span><span class="op" id="7721743">.</span><span class="ident" id="7721744">Decode</span><span class="op" id="7721750">(</span><span class="ident" id="7721751">x</span><span class="op" id="7721752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721755">if</span>&nbsp;<span class="ident" id="7721758">err</span>&nbsp;<span class="op" id="7721762">!=</span>&nbsp;<span class="ident" id="7721765">nil</span>&nbsp;<span class="op" id="7721769">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721773">t</span><span class="op" id="7721774">.</span><span class="ident" id="7721775">Fatal</span><span class="op" id="7721780">(</span><span class="string" id="7721781">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7721796">,</span>&nbsp;<span class="ident" id="7721798">err</span><span class="op" id="7721801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721807">if</span>&nbsp;<span class="ident" id="7721810">x</span><span class="op" id="7721811">.</span><span class="ident" id="7721812">a</span>&nbsp;<span class="op" id="7721814">!=</span>&nbsp;<span class="string" id="7721817">&#39;A&#39;</span>&nbsp;<span class="op" id="7721821">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721825">t</span><span class="op" id="7721826">.</span><span class="ident" id="7721827">Errorf</span><span class="op" id="7721833">(</span><span class="string" id="7721834">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7721855">,</span>&nbsp;<span class="ident" id="7721857">x</span><span class="op" id="7721858">.</span><span class="ident" id="7721859">a</span><span class="op" id="7721860">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7721863">}</span><br>
<span class="lineno"></span><span class="op" id="7721865">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7721868">func</span>&nbsp;<span class="ident" id="7721873">TestGobEncoderNonStructSingleton</span><span class="op" id="7721905">(</span><span class="ident" id="7721906">t</span>&nbsp;<span class="op" id="7721908">*</span><span class="ident" id="7721909">testing</span><span class="op" id="7721916">.</span><span class="ident" id="7721917">T</span><span class="op" id="7721918">)</span>&nbsp;<span class="op" id="7721920">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721923">b</span>&nbsp;<span class="op" id="7721925">:=</span>&nbsp;<span class="builtinfunc" id="7721928">new</span><span class="op" id="7721931">(</span><span class="ident" id="7721932">bytes</span><span class="op" id="7721937">.</span><span class="ident" id="7721938">Buffer</span><span class="op" id="7721944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721947">enc</span>&nbsp;<span class="op" id="7721951">:=</span>&nbsp;<span class="ident" id="7721954">NewEncoder</span><span class="op" id="7721964">(</span><span class="ident" id="7721965">b</span><span class="op" id="7721966">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7721969">var</span>&nbsp;<span class="ident" id="7721973">g</span>&nbsp;<span class="ident" id="7721975">Gobber</span>&nbsp;<span class="op" id="7721982">=</span>&nbsp;<span class="num" id="7721984">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7721990">err</span>&nbsp;<span class="op" id="7721994">:=</span>&nbsp;<span class="ident" id="7721997">enc</span><span class="op" id="7722000">.</span><span class="ident" id="7722001">Encode</span><span class="op" id="7722007">(</span><span class="op" id="7722008">&amp;</span><span class="ident" id="7722009">g</span><span class="op" id="7722010">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722013">if</span>&nbsp;<span class="ident" id="7722016">err</span>&nbsp;<span class="op" id="7722020">!=</span>&nbsp;<span class="ident" id="7722023">nil</span>&nbsp;<span class="op" id="7722027">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722031">t</span><span class="op" id="7722032">.</span><span class="ident" id="7722033">Fatal</span><span class="op" id="7722038">(</span><span class="string" id="7722039">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7722054">,</span>&nbsp;<span class="ident" id="7722056">err</span><span class="op" id="7722059">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722065">dec</span>&nbsp;<span class="op" id="7722069">:=</span>&nbsp;<span class="ident" id="7722072">NewDecoder</span><span class="op" id="7722082">(</span><span class="ident" id="7722083">b</span><span class="op" id="7722084">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722087">var</span>&nbsp;<span class="ident" id="7722091">x</span>&nbsp;<span class="ident" id="7722093">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722101">err</span>&nbsp;<span class="op" id="7722105">=</span>&nbsp;<span class="ident" id="7722107">dec</span><span class="op" id="7722110">.</span><span class="ident" id="7722111">Decode</span><span class="op" id="7722117">(</span><span class="op" id="7722118">&amp;</span><span class="ident" id="7722119">x</span><span class="op" id="7722120">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722123">if</span>&nbsp;<span class="ident" id="7722126">err</span>&nbsp;<span class="op" id="7722130">!=</span>&nbsp;<span class="ident" id="7722133">nil</span>&nbsp;<span class="op" id="7722137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722141">t</span><span class="op" id="7722142">.</span><span class="ident" id="7722143">Fatal</span><span class="op" id="7722148">(</span><span class="string" id="7722149">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7722164">,</span>&nbsp;<span class="ident" id="7722166">err</span><span class="op" id="7722169">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722172">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722175">if</span>&nbsp;<span class="ident" id="7722178">x</span>&nbsp;<span class="op" id="7722180">!=</span>&nbsp;<span class="num" id="7722183">1234</span>&nbsp;<span class="op" id="7722188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722192">t</span><span class="op" id="7722193">.</span><span class="ident" id="7722194">Errorf</span><span class="op" id="7722200">(</span><span class="string" id="7722201">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="7722223">,</span>&nbsp;<span class="ident" id="7722225">x</span><span class="op" id="7722226">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722229">}</span><br>
<span class="lineno"></span><span class="op" id="7722231">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7722234">func</span>&nbsp;<span class="ident" id="7722239">TestGobEncoderIgnoreStructField</span><span class="op" id="7722270">(</span><span class="ident" id="7722271">t</span>&nbsp;<span class="op" id="7722273">*</span><span class="ident" id="7722274">testing</span><span class="op" id="7722281">.</span><span class="ident" id="7722282">T</span><span class="op" id="7722283">)</span>&nbsp;<span class="op" id="7722285">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722288">b</span>&nbsp;<span class="op" id="7722290">:=</span>&nbsp;<span class="builtinfunc" id="7722293">new</span><span class="op" id="7722296">(</span><span class="ident" id="7722297">bytes</span><span class="op" id="7722302">.</span><span class="ident" id="7722303">Buffer</span><span class="op" id="7722309">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722312">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722350">enc</span>&nbsp;<span class="op" id="7722354">:=</span>&nbsp;<span class="ident" id="7722357">NewEncoder</span><span class="op" id="7722367">(</span><span class="ident" id="7722368">b</span><span class="op" id="7722369">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722372">err</span>&nbsp;<span class="op" id="7722376">:=</span>&nbsp;<span class="ident" id="7722379">enc</span><span class="op" id="7722382">.</span><span class="ident" id="7722383">Encode</span><span class="op" id="7722389">(</span><span class="ident" id="7722390">GobTest0</span><span class="op" id="7722398">{</span><span class="num" id="7722399">17</span><span class="op" id="7722401">,</span>&nbsp;<span class="op" id="7722403">&amp;</span><span class="ident" id="7722404">ByteStruct</span><span class="op" id="7722414">{</span><span class="string" id="7722415">&#39;A&#39;</span><span class="op" id="7722418">}</span><span class="op" id="7722419">}</span><span class="op" id="7722420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722423">if</span>&nbsp;<span class="ident" id="7722426">err</span>&nbsp;<span class="op" id="7722430">!=</span>&nbsp;<span class="ident" id="7722433">nil</span>&nbsp;<span class="op" id="7722437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722441">t</span><span class="op" id="7722442">.</span><span class="ident" id="7722443">Fatal</span><span class="op" id="7722448">(</span><span class="string" id="7722449">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7722464">,</span>&nbsp;<span class="ident" id="7722466">err</span><span class="op" id="7722469">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722475">dec</span>&nbsp;<span class="op" id="7722479">:=</span>&nbsp;<span class="ident" id="7722482">NewDecoder</span><span class="op" id="7722492">(</span><span class="ident" id="7722493">b</span><span class="op" id="7722494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722497">x</span>&nbsp;<span class="op" id="7722499">:=</span>&nbsp;<span class="builtinfunc" id="7722502">new</span><span class="op" id="7722505">(</span><span class="ident" id="7722506">GobTestIgnoreEncoder</span><span class="op" id="7722526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722529">err</span>&nbsp;<span class="op" id="7722533">=</span>&nbsp;<span class="ident" id="7722535">dec</span><span class="op" id="7722538">.</span><span class="ident" id="7722539">Decode</span><span class="op" id="7722545">(</span><span class="ident" id="7722546">x</span><span class="op" id="7722547">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722550">if</span>&nbsp;<span class="ident" id="7722553">err</span>&nbsp;<span class="op" id="7722557">!=</span>&nbsp;<span class="ident" id="7722560">nil</span>&nbsp;<span class="op" id="7722564">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722568">t</span><span class="op" id="7722569">.</span><span class="ident" id="7722570">Fatal</span><span class="op" id="7722575">(</span><span class="string" id="7722576">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7722591">,</span>&nbsp;<span class="ident" id="7722593">err</span><span class="op" id="7722596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722602">if</span>&nbsp;<span class="ident" id="7722605">x</span><span class="op" id="7722606">.</span><span class="ident" id="7722607">X</span>&nbsp;<span class="op" id="7722609">!=</span>&nbsp;<span class="num" id="7722612">17</span>&nbsp;<span class="op" id="7722615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722619">t</span><span class="op" id="7722620">.</span><span class="ident" id="7722621">Errorf</span><span class="op" id="7722627">(</span><span class="string" id="7722628">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7722648">,</span>&nbsp;<span class="ident" id="7722650">x</span><span class="op" id="7722651">.</span><span class="ident" id="7722652">X</span><span class="op" id="7722653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722656">}</span><br>
<span class="lineno">625</span><span class="op" id="7722658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7722661">func</span>&nbsp;<span class="ident" id="7722666">TestGobEncoderIgnoreNonStructField</span><span class="op" id="7722700">(</span><span class="ident" id="7722701">t</span>&nbsp;<span class="op" id="7722703">*</span><span class="ident" id="7722704">testing</span><span class="op" id="7722711">.</span><span class="ident" id="7722712">T</span><span class="op" id="7722713">)</span>&nbsp;<span class="op" id="7722715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722718">b</span>&nbsp;<span class="op" id="7722720">:=</span>&nbsp;<span class="builtinfunc" id="7722723">new</span><span class="op" id="7722726">(</span><span class="ident" id="7722727">bytes</span><span class="op" id="7722732">.</span><span class="ident" id="7722733">Buffer</span><span class="op" id="7722739">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7722742">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722780">enc</span>&nbsp;<span class="op" id="7722784">:=</span>&nbsp;<span class="ident" id="7722787">NewEncoder</span><span class="op" id="7722797">(</span><span class="ident" id="7722798">b</span><span class="op" id="7722799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722802">gobber</span>&nbsp;<span class="op" id="7722809">:=</span>&nbsp;<span class="ident" id="7722812">Gobber</span><span class="op" id="7722818">(</span><span class="num" id="7722819">23</span><span class="op" id="7722821">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722824">bgobber</span>&nbsp;<span class="op" id="7722832">:=</span>&nbsp;<span class="ident" id="7722835">BinaryGobber</span><span class="op" id="7722847">(</span><span class="num" id="7722848">24</span><span class="op" id="7722850">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722853">tgobber</span>&nbsp;<span class="op" id="7722861">:=</span>&nbsp;<span class="ident" id="7722864">TextGobber</span><span class="op" id="7722874">(</span><span class="num" id="7722875">25</span><span class="op" id="7722877">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722880">err</span>&nbsp;<span class="op" id="7722884">:=</span>&nbsp;<span class="ident" id="7722887">enc</span><span class="op" id="7722890">.</span><span class="ident" id="7722891">Encode</span><span class="op" id="7722897">(</span><span class="ident" id="7722898">GobTest3</span><span class="op" id="7722906">{</span><span class="num" id="7722907">17</span><span class="op" id="7722909">,</span>&nbsp;<span class="op" id="7722911">&amp;</span><span class="ident" id="7722912">gobber</span><span class="op" id="7722918">,</span>&nbsp;<span class="op" id="7722920">&amp;</span><span class="ident" id="7722921">bgobber</span><span class="op" id="7722928">,</span>&nbsp;<span class="op" id="7722930">&amp;</span><span class="ident" id="7722931">tgobber</span><span class="op" id="7722938">}</span><span class="op" id="7722939">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7722942">if</span>&nbsp;<span class="ident" id="7722945">err</span>&nbsp;<span class="op" id="7722949">!=</span>&nbsp;<span class="ident" id="7722952">nil</span>&nbsp;<span class="op" id="7722956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722960">t</span><span class="op" id="7722961">.</span><span class="ident" id="7722962">Fatal</span><span class="op" id="7722967">(</span><span class="string" id="7722968">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7722983">,</span>&nbsp;<span class="ident" id="7722985">err</span><span class="op" id="7722988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7722991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7722994">dec</span>&nbsp;<span class="op" id="7722998">:=</span>&nbsp;<span class="ident" id="7723001">NewDecoder</span><span class="op" id="7723011">(</span><span class="ident" id="7723012">b</span><span class="op" id="7723013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723016">x</span>&nbsp;<span class="op" id="7723018">:=</span>&nbsp;<span class="builtinfunc" id="7723021">new</span><span class="op" id="7723024">(</span><span class="ident" id="7723025">GobTestIgnoreEncoder</span><span class="op" id="7723045">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723048">err</span>&nbsp;<span class="op" id="7723052">=</span>&nbsp;<span class="ident" id="7723054">dec</span><span class="op" id="7723057">.</span><span class="ident" id="7723058">Decode</span><span class="op" id="7723064">(</span><span class="ident" id="7723065">x</span><span class="op" id="7723066">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723069">if</span>&nbsp;<span class="ident" id="7723072">err</span>&nbsp;<span class="op" id="7723076">!=</span>&nbsp;<span class="ident" id="7723079">nil</span>&nbsp;<span class="op" id="7723083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723087">t</span><span class="op" id="7723088">.</span><span class="ident" id="7723089">Fatal</span><span class="op" id="7723094">(</span><span class="string" id="7723095">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7723110">,</span>&nbsp;<span class="ident" id="7723112">err</span><span class="op" id="7723115">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723118">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723121">if</span>&nbsp;<span class="ident" id="7723124">x</span><span class="op" id="7723125">.</span><span class="ident" id="7723126">X</span>&nbsp;<span class="op" id="7723128">!=</span>&nbsp;<span class="num" id="7723131">17</span>&nbsp;<span class="op" id="7723134">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723138">t</span><span class="op" id="7723139">.</span><span class="ident" id="7723140">Errorf</span><span class="op" id="7723146">(</span><span class="string" id="7723147">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="7723167">,</span>&nbsp;<span class="ident" id="7723169">x</span><span class="op" id="7723170">.</span><span class="ident" id="7723171">X</span><span class="op" id="7723172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723175">}</span><br>
<span class="lineno"></span><span class="op" id="7723177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723180">func</span>&nbsp;<span class="ident" id="7723185">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="7723215">(</span><span class="ident" id="7723216">t</span>&nbsp;<span class="op" id="7723218">*</span><span class="ident" id="7723219">testing</span><span class="op" id="7723226">.</span><span class="ident" id="7723227">T</span><span class="op" id="7723228">)</span>&nbsp;<span class="op" id="7723230">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723233">b</span>&nbsp;<span class="op" id="7723235">:=</span>&nbsp;<span class="builtinfunc" id="7723238">new</span><span class="op" id="7723241">(</span><span class="ident" id="7723242">bytes</span><span class="op" id="7723247">.</span><span class="ident" id="7723248">Buffer</span><span class="op" id="7723254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7723257">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723295">enc</span>&nbsp;<span class="op" id="7723299">:=</span>&nbsp;<span class="ident" id="7723302">NewEncoder</span><span class="op" id="7723312">(</span><span class="ident" id="7723313">b</span><span class="op" id="7723314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723317">err</span>&nbsp;<span class="op" id="7723321">:=</span>&nbsp;<span class="ident" id="7723324">enc</span><span class="op" id="7723327">.</span><span class="ident" id="7723328">Encode</span><span class="op" id="7723334">(</span><span class="ident" id="7723335">GobTest0</span><span class="op" id="7723343">{</span><span class="ident" id="7723344">X</span><span class="op" id="7723345">:</span>&nbsp;<span class="num" id="7723347">18</span><span class="op" id="7723349">}</span><span class="op" id="7723350">)</span>&nbsp;<span class="comment" id="7723352">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723365">if</span>&nbsp;<span class="ident" id="7723368">err</span>&nbsp;<span class="op" id="7723372">!=</span>&nbsp;<span class="ident" id="7723375">nil</span>&nbsp;<span class="op" id="7723379">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723383">t</span><span class="op" id="7723384">.</span><span class="ident" id="7723385">Fatal</span><span class="op" id="7723390">(</span><span class="string" id="7723391">&#34;encode&nbsp;error:&#34;</span><span class="op" id="7723406">,</span>&nbsp;<span class="ident" id="7723408">err</span><span class="op" id="7723411">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723414">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723417">dec</span>&nbsp;<span class="op" id="7723421">:=</span>&nbsp;<span class="ident" id="7723424">NewDecoder</span><span class="op" id="7723434">(</span><span class="ident" id="7723435">b</span><span class="op" id="7723436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723439">x</span>&nbsp;<span class="op" id="7723441">:=</span>&nbsp;<span class="builtinfunc" id="7723444">new</span><span class="op" id="7723447">(</span><span class="ident" id="7723448">GobTest0</span><span class="op" id="7723456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723459">err</span>&nbsp;<span class="op" id="7723463">=</span>&nbsp;<span class="ident" id="7723465">dec</span><span class="op" id="7723468">.</span><span class="ident" id="7723469">Decode</span><span class="op" id="7723475">(</span><span class="ident" id="7723476">x</span><span class="op" id="7723477">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723480">if</span>&nbsp;<span class="ident" id="7723483">err</span>&nbsp;<span class="op" id="7723487">!=</span>&nbsp;<span class="ident" id="7723490">nil</span>&nbsp;<span class="op" id="7723494">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723498">t</span><span class="op" id="7723499">.</span><span class="ident" id="7723500">Fatal</span><span class="op" id="7723505">(</span><span class="string" id="7723506">&#34;decode&nbsp;error:&#34;</span><span class="op" id="7723521">,</span>&nbsp;<span class="ident" id="7723523">err</span><span class="op" id="7723526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723532">if</span>&nbsp;<span class="ident" id="7723535">x</span><span class="op" id="7723536">.</span><span class="ident" id="7723537">X</span>&nbsp;<span class="op" id="7723539">!=</span>&nbsp;<span class="num" id="7723542">18</span>&nbsp;<span class="op" id="7723545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723549">t</span><span class="op" id="7723550">.</span><span class="ident" id="7723551">Errorf</span><span class="op" id="7723557">(</span><span class="string" id="7723558">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7723585">,</span>&nbsp;<span class="ident" id="7723587">x</span><span class="op" id="7723588">.</span><span class="ident" id="7723589">X</span><span class="op" id="7723590">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723593">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723596">if</span>&nbsp;<span class="ident" id="7723599">x</span><span class="op" id="7723600">.</span><span class="ident" id="7723601">G</span>&nbsp;<span class="op" id="7723603">!=</span>&nbsp;<span class="ident" id="7723606">nil</span>&nbsp;<span class="op" id="7723610">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723614">t</span><span class="op" id="7723615">.</span><span class="ident" id="7723616">Errorf</span><span class="op" id="7723622">(</span><span class="string" id="7723623">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7723651">,</span>&nbsp;<span class="ident" id="7723653">x</span><span class="op" id="7723654">.</span><span class="ident" id="7723655">G</span><span class="op" id="7723656">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7723659">}</span><br>
<span class="lineno"></span><span class="op" id="7723661">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="7723664">type</span>&nbsp;<span class="ident" id="7723669">gobDecoderBug0</span>&nbsp;<span class="keyword" id="7723684">struct</span>&nbsp;<span class="op" id="7723691">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723694">foo</span><span class="op" id="7723697">,</span>&nbsp;<span class="ident" id="7723699">bar</span>&nbsp;<span class="builtintype" id="7723703">string</span><br>
<span class="lineno"></span><span class="op" id="7723710">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="7723713">func</span>&nbsp;<span class="op" id="7723718">(</span><span class="ident" id="7723719">br</span>&nbsp;<span class="op" id="7723722">*</span><span class="ident" id="7723723">gobDecoderBug0</span><span class="op" id="7723737">)</span>&nbsp;<span class="ident" id="7723739">String</span><span class="op" id="7723745">(</span><span class="op" id="7723746">)</span>&nbsp;<span class="builtintype" id="7723748">string</span>&nbsp;<span class="op" id="7723755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723758">return</span>&nbsp;<span class="ident" id="7723765">br</span><span class="op" id="7723767">.</span><span class="ident" id="7723768">foo</span>&nbsp;<span class="op" id="7723772">+</span>&nbsp;<span class="string" id="7723774">&#34;-&#34;</span>&nbsp;<span class="op" id="7723778">+</span>&nbsp;<span class="ident" id="7723780">br</span><span class="op" id="7723782">.</span><span class="ident" id="7723783">bar</span><br>
<span class="lineno"></span><span class="op" id="7723787">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723790">func</span>&nbsp;<span class="op" id="7723795">(</span><span class="ident" id="7723796">br</span>&nbsp;<span class="op" id="7723799">*</span><span class="ident" id="7723800">gobDecoderBug0</span><span class="op" id="7723814">)</span>&nbsp;<span class="ident" id="7723816">GobEncode</span><span class="op" id="7723825">(</span><span class="op" id="7723826">)</span>&nbsp;<span class="op" id="7723828">(</span><span class="op" id="7723829">[</span><span class="op" id="7723830">]</span><span class="builtintype" id="7723831">byte</span><span class="op" id="7723835">,</span>&nbsp;<span class="builtintype" id="7723837">error</span><span class="op" id="7723842">)</span>&nbsp;<span class="op" id="7723844">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723847">return</span>&nbsp;<span class="op" id="7723854">[</span><span class="op" id="7723855">]</span><span class="builtintype" id="7723856">byte</span><span class="op" id="7723860">(</span><span class="ident" id="7723861">br</span><span class="op" id="7723863">.</span><span class="ident" id="7723864">String</span><span class="op" id="7723870">(</span><span class="op" id="7723871">)</span><span class="op" id="7723872">)</span><span class="op" id="7723873">,</span>&nbsp;<span class="ident" id="7723875">nil</span><br>
<span class="lineno"></span><span class="op" id="7723879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7723882">func</span>&nbsp;<span class="op" id="7723887">(</span><span class="ident" id="7723888">br</span>&nbsp;<span class="op" id="7723891">*</span><span class="ident" id="7723892">gobDecoderBug0</span><span class="op" id="7723906">)</span>&nbsp;<span class="ident" id="7723908">GobDecode</span><span class="op" id="7723917">(</span><span class="ident" id="7723918">b</span>&nbsp;<span class="op" id="7723920">[</span><span class="op" id="7723921">]</span><span class="builtintype" id="7723922">byte</span><span class="op" id="7723926">)</span>&nbsp;<span class="builtintype" id="7723928">error</span>&nbsp;<span class="op" id="7723934">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723937">br</span><span class="op" id="7723939">.</span><span class="ident" id="7723940">foo</span>&nbsp;<span class="op" id="7723944">=</span>&nbsp;<span class="string" id="7723946">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7723953">br</span><span class="op" id="7723955">.</span><span class="ident" id="7723956">bar</span>&nbsp;<span class="op" id="7723960">=</span>&nbsp;<span class="string" id="7723962">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7723969">return</span>&nbsp;<span class="ident" id="7723976">nil</span><br>
<span class="lineno"></span><span class="op" id="7723980">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7723983">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="7724049">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="7724071">func</span>&nbsp;<span class="ident" id="7724076">TestGobEncoderExtraIndirect</span><span class="op" id="7724103">(</span><span class="ident" id="7724104">t</span>&nbsp;<span class="op" id="7724106">*</span><span class="ident" id="7724107">testing</span><span class="op" id="7724114">.</span><span class="ident" id="7724115">T</span><span class="op" id="7724116">)</span>&nbsp;<span class="op" id="7724118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724121">gdb</span>&nbsp;<span class="op" id="7724125">:=</span>&nbsp;<span class="op" id="7724128">&amp;</span><span class="ident" id="7724129">gobDecoderBug0</span><span class="op" id="7724143">{</span><span class="string" id="7724144">&#34;foo&#34;</span><span class="op" id="7724149">,</span>&nbsp;<span class="string" id="7724151">&#34;bar&#34;</span><span class="op" id="7724156">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724159">buf</span>&nbsp;<span class="op" id="7724163">:=</span>&nbsp;<span class="builtinfunc" id="7724166">new</span><span class="op" id="7724169">(</span><span class="ident" id="7724170">bytes</span><span class="op" id="7724175">.</span><span class="ident" id="7724176">Buffer</span><span class="op" id="7724182">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724185">e</span>&nbsp;<span class="op" id="7724187">:=</span>&nbsp;<span class="ident" id="7724190">NewEncoder</span><span class="op" id="7724200">(</span><span class="ident" id="7724201">buf</span><span class="op" id="7724204">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724207">if</span>&nbsp;<span class="ident" id="7724210">err</span>&nbsp;<span class="op" id="7724214">:=</span>&nbsp;<span class="ident" id="7724217">e</span><span class="op" id="7724218">.</span><span class="ident" id="7724219">Encode</span><span class="op" id="7724225">(</span><span class="ident" id="7724226">gdb</span><span class="op" id="7724229">)</span><span class="op" id="7724230">;</span>&nbsp;<span class="ident" id="7724232">err</span>&nbsp;<span class="op" id="7724236">!=</span>&nbsp;<span class="ident" id="7724239">nil</span>&nbsp;<span class="op" id="7724243">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724247">t</span><span class="op" id="7724248">.</span><span class="ident" id="7724249">Fatalf</span><span class="op" id="7724255">(</span><span class="string" id="7724256">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="7724268">,</span>&nbsp;<span class="ident" id="7724270">err</span><span class="op" id="7724273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724279">d</span>&nbsp;<span class="op" id="7724281">:=</span>&nbsp;<span class="ident" id="7724284">NewDecoder</span><span class="op" id="7724294">(</span><span class="ident" id="7724295">buf</span><span class="op" id="7724298">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724301">var</span>&nbsp;<span class="ident" id="7724305">got</span>&nbsp;<span class="op" id="7724309">*</span><span class="ident" id="7724310">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724326">if</span>&nbsp;<span class="ident" id="7724329">err</span>&nbsp;<span class="op" id="7724333">:=</span>&nbsp;<span class="ident" id="7724336">d</span><span class="op" id="7724337">.</span><span class="ident" id="7724338">Decode</span><span class="op" id="7724344">(</span><span class="op" id="7724345">&amp;</span><span class="ident" id="7724346">got</span><span class="op" id="7724349">)</span><span class="op" id="7724350">;</span>&nbsp;<span class="ident" id="7724352">err</span>&nbsp;<span class="op" id="7724356">!=</span>&nbsp;<span class="ident" id="7724359">nil</span>&nbsp;<span class="op" id="7724363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724367">t</span><span class="op" id="7724368">.</span><span class="ident" id="7724369">Fatalf</span><span class="op" id="7724375">(</span><span class="string" id="7724376">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7724388">,</span>&nbsp;<span class="ident" id="7724390">err</span><span class="op" id="7724393">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724396">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724399">if</span>&nbsp;<span class="ident" id="7724402">got</span><span class="op" id="7724405">.</span><span class="ident" id="7724406">foo</span>&nbsp;<span class="op" id="7724410">!=</span>&nbsp;<span class="ident" id="7724413">gdb</span><span class="op" id="7724416">.</span><span class="ident" id="7724417">foo</span>&nbsp;<span class="op" id="7724421">||</span>&nbsp;<span class="ident" id="7724424">got</span><span class="op" id="7724427">.</span><span class="ident" id="7724428">bar</span>&nbsp;<span class="op" id="7724432">!=</span>&nbsp;<span class="ident" id="7724435">gdb</span><span class="op" id="7724438">.</span><span class="ident" id="7724439">bar</span>&nbsp;<span class="op" id="7724443">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724447">t</span><span class="op" id="7724448">.</span><span class="ident" id="7724449">Errorf</span><span class="op" id="7724455">(</span><span class="string" id="7724456">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7724475">,</span>&nbsp;<span class="ident" id="7724477">got</span><span class="op" id="7724480">,</span>&nbsp;<span class="ident" id="7724482">gdb</span><span class="op" id="7724485">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7724488">}</span><br>
<span class="lineno"></span><span class="op" id="7724490">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7724493">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="7724557">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="7724626">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="7724688">type</span>&nbsp;<span class="ident" id="7724693">isZeroBug</span>&nbsp;<span class="keyword" id="7724703">struct</span>&nbsp;<span class="op" id="7724710">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724713">T</span>&nbsp;<span class="ident" id="7724715">time</span><span class="op" id="7724719">.</span><span class="ident" id="7724720">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724726">S</span>&nbsp;<span class="builtintype" id="7724728">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724736">I</span>&nbsp;<span class="builtintype" id="7724738">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724743">A</span>&nbsp;<span class="ident" id="7724745">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724761">F</span>&nbsp;<span class="ident" id="7724763">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="7724782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7724785">type</span>&nbsp;<span class="ident" id="7724790">isZeroBugArray</span>&nbsp;<span class="op" id="7724805">[</span><span class="num" id="7724806">2</span><span class="op" id="7724807">]</span><span class="builtintype" id="7724808">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="7724815">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="7724875">func</span>&nbsp;<span class="op" id="7724880">(</span><span class="ident" id="7724881">a</span>&nbsp;<span class="ident" id="7724883">isZeroBugArray</span><span class="op" id="7724897">)</span>&nbsp;<span class="ident" id="7724899">GobEncode</span><span class="op" id="7724908">(</span><span class="op" id="7724909">)</span>&nbsp;<span class="op" id="7724911">(</span><span class="ident" id="7724912">b</span>&nbsp;<span class="op" id="7724914">[</span><span class="op" id="7724915">]</span><span class="builtintype" id="7724916">byte</span><span class="op" id="7724920">,</span>&nbsp;<span class="ident" id="7724922">e</span>&nbsp;<span class="builtintype" id="7724924">error</span><span class="op" id="7724929">)</span>&nbsp;<span class="op" id="7724931">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7724934">b</span>&nbsp;<span class="op" id="7724936">=</span>&nbsp;<span class="builtinfunc" id="7724938">append</span><span class="op" id="7724944">(</span><span class="ident" id="7724945">b</span><span class="op" id="7724946">,</span>&nbsp;<span class="ident" id="7724948">a</span><span class="op" id="7724949">[</span><span class="op" id="7724950">:</span><span class="op" id="7724951">]</span><span class="op" id="7724952">...</span><span class="op" id="7724955">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7724958">return</span>&nbsp;<span class="ident" id="7724965">b</span><span class="op" id="7724966">,</span>&nbsp;<span class="ident" id="7724968">nil</span><br>
<span class="lineno">725</span><span class="op" id="7724972">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7724975">func</span>&nbsp;<span class="op" id="7724980">(</span><span class="ident" id="7724981">a</span>&nbsp;<span class="op" id="7724983">*</span><span class="ident" id="7724984">isZeroBugArray</span><span class="op" id="7724998">)</span>&nbsp;<span class="ident" id="7725000">GobDecode</span><span class="op" id="7725009">(</span><span class="ident" id="7725010">data</span>&nbsp;<span class="op" id="7725015">[</span><span class="op" id="7725016">]</span><span class="builtintype" id="7725017">byte</span><span class="op" id="7725021">)</span>&nbsp;<span class="builtintype" id="7725023">error</span>&nbsp;<span class="op" id="7725029">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725032">if</span>&nbsp;<span class="builtinfunc" id="7725035">len</span><span class="op" id="7725038">(</span><span class="ident" id="7725039">data</span><span class="op" id="7725043">)</span>&nbsp;<span class="op" id="7725045">!=</span>&nbsp;<span class="builtinfunc" id="7725048">len</span><span class="op" id="7725051">(</span><span class="ident" id="7725052">a</span><span class="op" id="7725053">)</span>&nbsp;<span class="op" id="7725055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725059">return</span>&nbsp;<span class="ident" id="7725066">io</span><span class="op" id="7725068">.</span><span class="ident" id="7725069">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725074">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725077">a</span><span class="op" id="7725078">[</span><span class="num" id="7725079">0</span><span class="op" id="7725080">]</span>&nbsp;<span class="op" id="7725082">=</span>&nbsp;<span class="ident" id="7725084">data</span><span class="op" id="7725088">[</span><span class="num" id="7725089">0</span><span class="op" id="7725090">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725093">a</span><span class="op" id="7725094">[</span><span class="num" id="7725095">1</span><span class="op" id="7725096">]</span>&nbsp;<span class="op" id="7725098">=</span>&nbsp;<span class="ident" id="7725100">data</span><span class="op" id="7725104">[</span><span class="num" id="7725105">1</span><span class="op" id="7725106">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725109">return</span>&nbsp;<span class="ident" id="7725116">nil</span><br>
<span class="lineno"></span><span class="op" id="7725120">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="7725123">type</span>&nbsp;<span class="ident" id="7725128">isZeroBugInterface</span>&nbsp;<span class="keyword" id="7725147">struct</span>&nbsp;<span class="op" id="7725154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725157">I</span>&nbsp;<span class="keyword" id="7725159">interface</span><span class="op" id="7725168">{</span><span class="op" id="7725169">}</span><br>
<span class="lineno"></span><span class="op" id="7725171">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="7725174">func</span>&nbsp;<span class="op" id="7725179">(</span><span class="ident" id="7725180">i</span>&nbsp;<span class="ident" id="7725182">isZeroBugInterface</span><span class="op" id="7725200">)</span>&nbsp;<span class="ident" id="7725202">GobEncode</span><span class="op" id="7725211">(</span><span class="op" id="7725212">)</span>&nbsp;<span class="op" id="7725214">(</span><span class="ident" id="7725215">b</span>&nbsp;<span class="op" id="7725217">[</span><span class="op" id="7725218">]</span><span class="builtintype" id="7725219">byte</span><span class="op" id="7725223">,</span>&nbsp;<span class="ident" id="7725225">e</span>&nbsp;<span class="builtintype" id="7725227">error</span><span class="op" id="7725232">)</span>&nbsp;<span class="op" id="7725234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725237">return</span>&nbsp;<span class="op" id="7725244">[</span><span class="op" id="7725245">]</span><span class="builtintype" id="7725246">byte</span><span class="op" id="7725250">{</span><span class="op" id="7725251">}</span><span class="op" id="7725252">,</span>&nbsp;<span class="ident" id="7725254">nil</span><br>
<span class="lineno"></span><span class="op" id="7725258">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725261">func</span>&nbsp;<span class="op" id="7725266">(</span><span class="ident" id="7725267">i</span>&nbsp;<span class="op" id="7725269">*</span><span class="ident" id="7725270">isZeroBugInterface</span><span class="op" id="7725288">)</span>&nbsp;<span class="ident" id="7725290">GobDecode</span><span class="op" id="7725299">(</span><span class="ident" id="7725300">data</span>&nbsp;<span class="op" id="7725305">[</span><span class="op" id="7725306">]</span><span class="builtintype" id="7725307">byte</span><span class="op" id="7725311">)</span>&nbsp;<span class="builtintype" id="7725313">error</span>&nbsp;<span class="op" id="7725319">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725322">return</span>&nbsp;<span class="ident" id="7725329">nil</span><br>
<span class="lineno"></span><span class="op" id="7725333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725336">func</span>&nbsp;<span class="ident" id="7725341">TestGobEncodeIsZero</span><span class="op" id="7725360">(</span><span class="ident" id="7725361">t</span>&nbsp;<span class="op" id="7725363">*</span><span class="ident" id="7725364">testing</span><span class="op" id="7725371">.</span><span class="ident" id="7725372">T</span><span class="op" id="7725373">)</span>&nbsp;<span class="op" id="7725375">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725378">x</span>&nbsp;<span class="op" id="7725380">:=</span>&nbsp;<span class="ident" id="7725383">isZeroBug</span><span class="op" id="7725392">{</span><span class="ident" id="7725393">time</span><span class="op" id="7725397">.</span><span class="ident" id="7725398">Now</span><span class="op" id="7725401">(</span><span class="op" id="7725402">)</span><span class="op" id="7725403">,</span>&nbsp;<span class="string" id="7725405">&#34;hello&#34;</span><span class="op" id="7725412">,</span>&nbsp;<span class="op" id="7725414">-</span><span class="num" id="7725415">55</span><span class="op" id="7725417">,</span>&nbsp;<span class="ident" id="7725419">isZeroBugArray</span><span class="op" id="7725433">{</span><span class="num" id="7725434">1</span><span class="op" id="7725435">,</span>&nbsp;<span class="num" id="7725437">2</span><span class="op" id="7725438">}</span><span class="op" id="7725439">,</span>&nbsp;<span class="ident" id="7725441">isZeroBugInterface</span><span class="op" id="7725459">{</span><span class="op" id="7725460">}</span><span class="op" id="7725461">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725464">b</span>&nbsp;<span class="op" id="7725466">:=</span>&nbsp;<span class="builtinfunc" id="7725469">new</span><span class="op" id="7725472">(</span><span class="ident" id="7725473">bytes</span><span class="op" id="7725478">.</span><span class="ident" id="7725479">Buffer</span><span class="op" id="7725485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725488">enc</span>&nbsp;<span class="op" id="7725492">:=</span>&nbsp;<span class="ident" id="7725495">NewEncoder</span><span class="op" id="7725505">(</span><span class="ident" id="7725506">b</span><span class="op" id="7725507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725510">err</span>&nbsp;<span class="op" id="7725514">:=</span>&nbsp;<span class="ident" id="7725517">enc</span><span class="op" id="7725520">.</span><span class="ident" id="7725521">Encode</span><span class="op" id="7725527">(</span><span class="ident" id="7725528">x</span><span class="op" id="7725529">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725532">if</span>&nbsp;<span class="ident" id="7725535">err</span>&nbsp;<span class="op" id="7725539">!=</span>&nbsp;<span class="ident" id="7725542">nil</span>&nbsp;<span class="op" id="7725546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725550">t</span><span class="op" id="7725551">.</span><span class="ident" id="7725552">Fatal</span><span class="op" id="7725557">(</span><span class="string" id="7725558">&#34;encode:&#34;</span><span class="op" id="7725567">,</span>&nbsp;<span class="ident" id="7725569">err</span><span class="op" id="7725572">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725575">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725578">var</span>&nbsp;<span class="ident" id="7725582">y</span>&nbsp;<span class="ident" id="7725584">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725595">dec</span>&nbsp;<span class="op" id="7725599">:=</span>&nbsp;<span class="ident" id="7725602">NewDecoder</span><span class="op" id="7725612">(</span><span class="ident" id="7725613">b</span><span class="op" id="7725614">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725617">err</span>&nbsp;<span class="op" id="7725621">=</span>&nbsp;<span class="ident" id="7725623">dec</span><span class="op" id="7725626">.</span><span class="ident" id="7725627">Decode</span><span class="op" id="7725633">(</span><span class="op" id="7725634">&amp;</span><span class="ident" id="7725635">y</span><span class="op" id="7725636">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725639">if</span>&nbsp;<span class="ident" id="7725642">err</span>&nbsp;<span class="op" id="7725646">!=</span>&nbsp;<span class="ident" id="7725649">nil</span>&nbsp;<span class="op" id="7725653">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725657">t</span><span class="op" id="7725658">.</span><span class="ident" id="7725659">Fatal</span><span class="op" id="7725664">(</span><span class="string" id="7725665">&#34;decode:&#34;</span><span class="op" id="7725674">,</span>&nbsp;<span class="ident" id="7725676">err</span><span class="op" id="7725679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725685">if</span>&nbsp;<span class="ident" id="7725688">x</span>&nbsp;<span class="op" id="7725690">!=</span>&nbsp;<span class="ident" id="7725693">y</span>&nbsp;<span class="op" id="7725695">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725699">t</span><span class="op" id="7725700">.</span><span class="ident" id="7725701">Fatalf</span><span class="op" id="7725707">(</span><span class="string" id="7725708">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="7725718">,</span>&nbsp;<span class="ident" id="7725720">x</span><span class="op" id="7725721">,</span>&nbsp;<span class="ident" id="7725723">y</span><span class="op" id="7725724">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725727">}</span><br>
<span class="lineno">765</span><span class="op" id="7725729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7725732">func</span>&nbsp;<span class="ident" id="7725737">TestGobEncodePtrError</span><span class="op" id="7725758">(</span><span class="ident" id="7725759">t</span>&nbsp;<span class="op" id="7725761">*</span><span class="ident" id="7725762">testing</span><span class="op" id="7725769">.</span><span class="ident" id="7725770">T</span><span class="op" id="7725771">)</span>&nbsp;<span class="op" id="7725773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725776">var</span>&nbsp;<span class="ident" id="7725780">err</span>&nbsp;<span class="builtintype" id="7725784">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725791">b</span>&nbsp;<span class="op" id="7725793">:=</span>&nbsp;<span class="builtinfunc" id="7725796">new</span><span class="op" id="7725799">(</span><span class="ident" id="7725800">bytes</span><span class="op" id="7725805">.</span><span class="ident" id="7725806">Buffer</span><span class="op" id="7725812">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725815">enc</span>&nbsp;<span class="op" id="7725819">:=</span>&nbsp;<span class="ident" id="7725822">NewEncoder</span><span class="op" id="7725832">(</span><span class="ident" id="7725833">b</span><span class="op" id="7725834">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725837">err</span>&nbsp;<span class="op" id="7725841">=</span>&nbsp;<span class="ident" id="7725843">enc</span><span class="op" id="7725846">.</span><span class="ident" id="7725847">Encode</span><span class="op" id="7725853">(</span><span class="op" id="7725854">&amp;</span><span class="ident" id="7725855">err</span><span class="op" id="7725858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725861">if</span>&nbsp;<span class="ident" id="7725864">err</span>&nbsp;<span class="op" id="7725868">!=</span>&nbsp;<span class="ident" id="7725871">nil</span>&nbsp;<span class="op" id="7725875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725879">t</span><span class="op" id="7725880">.</span><span class="ident" id="7725881">Fatal</span><span class="op" id="7725886">(</span><span class="string" id="7725887">&#34;encode:&#34;</span><span class="op" id="7725896">,</span>&nbsp;<span class="ident" id="7725898">err</span><span class="op" id="7725901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7725904">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725907">dec</span>&nbsp;<span class="op" id="7725911">:=</span>&nbsp;<span class="ident" id="7725914">NewDecoder</span><span class="op" id="7725924">(</span><span class="ident" id="7725925">b</span><span class="op" id="7725926">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725929">err2</span>&nbsp;<span class="op" id="7725934">:=</span>&nbsp;<span class="ident" id="7725937">fmt</span><span class="op" id="7725940">.</span><span class="ident" id="7725941">Errorf</span><span class="op" id="7725947">(</span><span class="string" id="7725948">&#34;foo&#34;</span><span class="op" id="7725953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725956">err</span>&nbsp;<span class="op" id="7725960">=</span>&nbsp;<span class="ident" id="7725962">dec</span><span class="op" id="7725965">.</span><span class="ident" id="7725966">Decode</span><span class="op" id="7725972">(</span><span class="op" id="7725973">&amp;</span><span class="ident" id="7725974">err2</span><span class="op" id="7725978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7725981">if</span>&nbsp;<span class="ident" id="7725984">err</span>&nbsp;<span class="op" id="7725988">!=</span>&nbsp;<span class="ident" id="7725991">nil</span>&nbsp;<span class="op" id="7725995">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7725999">t</span><span class="op" id="7726000">.</span><span class="ident" id="7726001">Fatal</span><span class="op" id="7726006">(</span><span class="string" id="7726007">&#34;decode:&#34;</span><span class="op" id="7726016">,</span>&nbsp;<span class="ident" id="7726018">err</span><span class="op" id="7726021">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726024">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726027">if</span>&nbsp;<span class="ident" id="7726030">err2</span>&nbsp;<span class="op" id="7726035">!=</span>&nbsp;<span class="ident" id="7726038">nil</span>&nbsp;<span class="op" id="7726042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726046">t</span><span class="op" id="7726047">.</span><span class="ident" id="7726048">Fatalf</span><span class="op" id="7726054">(</span><span class="string" id="7726055">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7726077">,</span>&nbsp;<span class="ident" id="7726079">err2</span><span class="op" id="7726083">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726086">}</span><br>
<span class="lineno"></span><span class="op" id="7726088">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="7726091">func</span>&nbsp;<span class="ident" id="7726096">TestNetIP</span><span class="op" id="7726105">(</span><span class="ident" id="7726106">t</span>&nbsp;<span class="op" id="7726108">*</span><span class="ident" id="7726109">testing</span><span class="op" id="7726116">.</span><span class="ident" id="7726117">T</span><span class="op" id="7726118">)</span>&nbsp;<span class="op" id="7726120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7726123">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726166">enc</span>&nbsp;<span class="op" id="7726170">:=</span>&nbsp;<span class="op" id="7726173">[</span><span class="op" id="7726174">]</span><span class="builtintype" id="7726175">byte</span><span class="op" id="7726179">{</span><span class="num" id="7726180">0x07</span><span class="op" id="7726184">,</span>&nbsp;<span class="num" id="7726186">0x0a</span><span class="op" id="7726190">,</span>&nbsp;<span class="num" id="7726192">0x00</span><span class="op" id="7726196">,</span>&nbsp;<span class="num" id="7726198">0x04</span><span class="op" id="7726202">,</span>&nbsp;<span class="num" id="7726204">0x01</span><span class="op" id="7726208">,</span>&nbsp;<span class="num" id="7726210">0x02</span><span class="op" id="7726214">,</span>&nbsp;<span class="num" id="7726216">0x03</span><span class="op" id="7726220">,</span>&nbsp;<span class="num" id="7726222">0x04</span><span class="op" id="7726226">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726230">var</span>&nbsp;<span class="ident" id="7726234">ip</span>&nbsp;<span class="ident" id="7726237">net</span><span class="op" id="7726240">.</span><span class="ident" id="7726241">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726245">err</span>&nbsp;<span class="op" id="7726249">:=</span>&nbsp;<span class="ident" id="7726252">NewDecoder</span><span class="op" id="7726262">(</span><span class="ident" id="7726263">bytes</span><span class="op" id="7726268">.</span><span class="ident" id="7726269">NewReader</span><span class="op" id="7726278">(</span><span class="ident" id="7726279">enc</span><span class="op" id="7726282">)</span><span class="op" id="7726283">)</span><span class="op" id="7726284">.</span><span class="ident" id="7726285">Decode</span><span class="op" id="7726291">(</span><span class="op" id="7726292">&amp;</span><span class="ident" id="7726293">ip</span><span class="op" id="7726295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726298">if</span>&nbsp;<span class="ident" id="7726301">err</span>&nbsp;<span class="op" id="7726305">!=</span>&nbsp;<span class="ident" id="7726308">nil</span>&nbsp;<span class="op" id="7726312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726316">t</span><span class="op" id="7726317">.</span><span class="ident" id="7726318">Fatalf</span><span class="op" id="7726324">(</span><span class="string" id="7726325">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="7726337">,</span>&nbsp;<span class="ident" id="7726339">err</span><span class="op" id="7726342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726345">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7726348">if</span>&nbsp;<span class="ident" id="7726351">ip</span><span class="op" id="7726353">.</span><span class="ident" id="7726354">String</span><span class="op" id="7726360">(</span><span class="op" id="7726361">)</span>&nbsp;<span class="op" id="7726363">!=</span>&nbsp;<span class="string" id="7726366">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="7726376">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7726380">t</span><span class="op" id="7726381">.</span><span class="ident" id="7726382">Errorf</span><span class="op" id="7726388">(</span><span class="string" id="7726389">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="7726418">,</span>&nbsp;<span class="ident" id="7726420">ip</span><span class="op" id="7726422">.</span><span class="ident" id="7726423">String</span><span class="op" id="7726429">(</span><span class="op" id="7726430">)</span><span class="op" id="7726431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7726434">}</span><br>
<span class="lineno"></span><span class="op" id="7726436">}</span>
</div>
</body>
</html>
