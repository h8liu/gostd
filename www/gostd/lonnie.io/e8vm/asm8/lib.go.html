<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5103838">package</span>&nbsp;<span class="ident" id="5103846">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5103852">import</span>&nbsp;<span class="op" id="5103859">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5103862">&#34;lonnie.io/e8vm/link8&#34;</span><br>
<span class="lineno">5</span><span class="op" id="5103885">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5103888">//&nbsp;PkgObj&nbsp;is&nbsp;a&nbsp;package&nbsp;object.</span><br>
<span class="lineno"></span><span class="keyword" id="5103919">type</span>&nbsp;<span class="ident" id="5103924">lib</span>&nbsp;<span class="keyword" id="5103928">struct</span>&nbsp;<span class="op" id="5103935">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5103938">*</span><span class="ident" id="5103939">link8</span><span class="op" id="5103944">.</span><span class="ident" id="5103945">Package</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5103955">requires</span>&nbsp;<span class="keyword" id="5103964">map</span><span class="op" id="5103967">[</span><span class="builtintype" id="5103968">uint32</span><span class="op" id="5103974">]</span><span class="op" id="5103975">*</span><span class="ident" id="5103976">lib</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5103981">symbols</span>&nbsp;&nbsp;<span class="keyword" id="5103990">map</span><span class="op" id="5103993">[</span><span class="builtintype" id="5103994">string</span><span class="op" id="5104000">]</span><span class="op" id="5104001">*</span><span class="ident" id="5104002">symbol</span><br>
<span class="lineno"></span><span class="op" id="5104009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5104012">//&nbsp;NewPkgObj&nbsp;creates&nbsp;a&nbsp;new&nbsp;package&nbsp;compile&nbsp;object</span><br>
<span class="lineno"></span><span class="keyword" id="5104062">func</span>&nbsp;<span class="ident" id="5104067">newLib</span><span class="op" id="5104073">(</span><span class="ident" id="5104074">p</span>&nbsp;<span class="builtintype" id="5104076">string</span><span class="op" id="5104082">)</span>&nbsp;<span class="op" id="5104084">*</span><span class="ident" id="5104085">lib</span>&nbsp;<span class="op" id="5104089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104092">ret</span>&nbsp;<span class="op" id="5104096">:=</span>&nbsp;<span class="builtinfunc" id="5104099">new</span><span class="op" id="5104102">(</span><span class="ident" id="5104103">lib</span><span class="op" id="5104106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104109">ret</span><span class="op" id="5104112">.</span><span class="ident" id="5104113">Package</span>&nbsp;<span class="op" id="5104121">=</span>&nbsp;<span class="ident" id="5104123">link8</span><span class="op" id="5104128">.</span><span class="ident" id="5104129">NewPackage</span><span class="op" id="5104139">(</span><span class="ident" id="5104140">p</span><span class="op" id="5104141">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104145">ret</span><span class="op" id="5104148">.</span><span class="ident" id="5104149">requires</span>&nbsp;<span class="op" id="5104158">=</span>&nbsp;<span class="builtinfunc" id="5104160">make</span><span class="op" id="5104164">(</span><span class="keyword" id="5104165">map</span><span class="op" id="5104168">[</span><span class="builtintype" id="5104169">uint32</span><span class="op" id="5104175">]</span><span class="op" id="5104176">*</span><span class="ident" id="5104177">lib</span><span class="op" id="5104180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104183">ret</span><span class="op" id="5104186">.</span><span class="ident" id="5104187">symbols</span>&nbsp;<span class="op" id="5104195">=</span>&nbsp;<span class="builtinfunc" id="5104197">make</span><span class="op" id="5104201">(</span><span class="keyword" id="5104202">map</span><span class="op" id="5104205">[</span><span class="builtintype" id="5104206">string</span><span class="op" id="5104212">]</span><span class="op" id="5104213">*</span><span class="ident" id="5104214">symbol</span><span class="op" id="5104220">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104224">id</span>&nbsp;<span class="op" id="5104227">:=</span>&nbsp;<span class="ident" id="5104230">ret</span><span class="op" id="5104233">.</span><span class="ident" id="5104234">Require</span><span class="op" id="5104241">(</span><span class="ident" id="5104242">ret</span><span class="op" id="5104245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104248">if</span>&nbsp;<span class="ident" id="5104251">id</span>&nbsp;<span class="op" id="5104254">!=</span>&nbsp;<span class="num" id="5104257">0</span>&nbsp;<span class="op" id="5104259">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5104263">panic</span><span class="op" id="5104268">(</span><span class="string" id="5104269">&#34;bug&#34;</span><span class="op" id="5104274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5104277">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104281">return</span>&nbsp;<span class="ident" id="5104288">ret</span><br>
<span class="lineno"></span><span class="op" id="5104292">}</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span><span class="comment" id="5104295">//&nbsp;Require&nbsp;imports&nbsp;a&nbsp;package&nbsp;in&nbsp;and&nbsp;grants&nbsp;the&nbsp;package</span><br>
<span class="lineno"></span><span class="comment" id="5104350">//&nbsp;a&nbsp;import&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="5104369">func</span>&nbsp;<span class="op" id="5104374">(</span><span class="ident" id="5104375">p</span>&nbsp;<span class="op" id="5104377">*</span><span class="ident" id="5104378">lib</span><span class="op" id="5104381">)</span>&nbsp;<span class="ident" id="5104383">Require</span><span class="op" id="5104390">(</span><span class="ident" id="5104391">req</span>&nbsp;<span class="op" id="5104395">*</span><span class="ident" id="5104396">lib</span><span class="op" id="5104399">)</span>&nbsp;<span class="builtintype" id="5104401">uint32</span>&nbsp;<span class="op" id="5104408">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104411">ret</span>&nbsp;<span class="op" id="5104415">:=</span>&nbsp;<span class="ident" id="5104418">p</span><span class="op" id="5104419">.</span><span class="ident" id="5104420">Package</span><span class="op" id="5104427">.</span><span class="ident" id="5104428">Require</span><span class="op" id="5104435">(</span><span class="ident" id="5104436">req</span><span class="op" id="5104439">.</span><span class="ident" id="5104440">Package</span><span class="op" id="5104447">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104450">_</span><span class="op" id="5104451">,</span>&nbsp;<span class="ident" id="5104453">found</span>&nbsp;<span class="op" id="5104459">:=</span>&nbsp;<span class="ident" id="5104462">p</span><span class="op" id="5104463">.</span><span class="ident" id="5104464">requires</span><span class="op" id="5104472">[</span><span class="ident" id="5104473">ret</span><span class="op" id="5104476">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104479">if</span>&nbsp;<span class="op" id="5104482">!</span><span class="ident" id="5104483">found</span>&nbsp;<span class="op" id="5104489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104493">p</span><span class="op" id="5104494">.</span><span class="ident" id="5104495">requires</span><span class="op" id="5104503">[</span><span class="ident" id="5104504">ret</span><span class="op" id="5104507">]</span>&nbsp;<span class="op" id="5104509">=</span>&nbsp;<span class="ident" id="5104511">req</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5104516">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104520">return</span>&nbsp;<span class="ident" id="5104527">ret</span><br>
<span class="lineno"></span><span class="op" id="5104531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5104534">//&nbsp;PkgIndex&nbsp;returns&nbsp;the&nbsp;package&nbsp;import&nbsp;index,&nbsp;consistent&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="5104596">//&nbsp;the&nbsp;underlying&nbsp;link8.Package.</span><br>
<span class="lineno">45</span><span class="keyword" id="5104629">func</span>&nbsp;<span class="op" id="5104634">(</span><span class="ident" id="5104635">p</span>&nbsp;<span class="op" id="5104637">*</span><span class="ident" id="5104638">lib</span><span class="op" id="5104641">)</span>&nbsp;<span class="ident" id="5104643">LibIndex</span><span class="op" id="5104651">(</span><span class="ident" id="5104652">path</span>&nbsp;<span class="builtintype" id="5104657">string</span><span class="op" id="5104663">)</span>&nbsp;<span class="op" id="5104665">(</span><span class="op" id="5104666">*</span><span class="ident" id="5104667">lib</span><span class="op" id="5104670">,</span>&nbsp;<span class="builtintype" id="5104672">uint32</span><span class="op" id="5104678">)</span>&nbsp;<span class="op" id="5104680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104683">pkg</span><span class="op" id="5104686">,</span>&nbsp;<span class="ident" id="5104688">index</span>&nbsp;<span class="op" id="5104694">:=</span>&nbsp;<span class="ident" id="5104697">p</span><span class="op" id="5104698">.</span><span class="ident" id="5104699">Package</span><span class="op" id="5104706">.</span><span class="ident" id="5104707">PkgIndex</span><span class="op" id="5104715">(</span><span class="ident" id="5104716">path</span><span class="op" id="5104720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104723">if</span>&nbsp;<span class="ident" id="5104726">pkg</span>&nbsp;<span class="op" id="5104730">==</span>&nbsp;<span class="ident" id="5104733">nil</span>&nbsp;<span class="op" id="5104737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104741">return</span>&nbsp;<span class="ident" id="5104748">nil</span><span class="op" id="5104751">,</span>&nbsp;<span class="num" id="5104753">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5104756">}</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5104760">ret</span><span class="op" id="5104763">,</span>&nbsp;<span class="ident" id="5104765">found</span>&nbsp;<span class="op" id="5104771">:=</span>&nbsp;<span class="ident" id="5104774">p</span><span class="op" id="5104775">.</span><span class="ident" id="5104776">requires</span><span class="op" id="5104784">[</span><span class="ident" id="5104785">index</span><span class="op" id="5104790">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104793">if</span>&nbsp;<span class="op" id="5104796">!</span><span class="ident" id="5104797">found</span>&nbsp;<span class="op" id="5104803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5104807">panic</span><span class="op" id="5104812">(</span><span class="string" id="5104813">&#34;bug&#34;</span><span class="op" id="5104818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5104821">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5104825">return</span>&nbsp;<span class="ident" id="5104832">ret</span><span class="op" id="5104835">,</span>&nbsp;<span class="ident" id="5104837">index</span><br>
<span class="lineno"></span><span class="op" id="5104843">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5104846">//&nbsp;Declare&nbsp;declares&nbsp;a&nbsp;symbol&nbsp;inside&nbsp;the&nbsp;package.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function</span><br>
<span class="lineno">60</span><span class="comment" id="5104924">//&nbsp;or&nbsp;variable,&nbsp;it&nbsp;is&nbsp;also&nbsp;declared&nbsp;as&nbsp;an&nbsp;object&nbsp;file&nbsp;symbol&nbsp;in&nbsp;the&nbsp;underlying</span><br>
<span class="lineno"></span><span class="comment" id="5105003">//&nbsp;link8.Package,&nbsp;and&nbsp;it&nbsp;returns&nbsp;the&nbsp;index.&nbsp;&nbsp;If&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;constant,&nbsp;it</span><br>
<span class="lineno"></span><span class="comment" id="5105080">//&nbsp;returns&nbsp;0&nbsp;after&nbsp;the&nbsp;declaration.&nbsp;Other&nbsp;types&nbsp;will&nbsp;panic.&nbsp;Redeclaration&nbsp;will</span><br>
<span class="lineno"></span><span class="comment" id="5105159">//&nbsp;panic.</span><br>
<span class="lineno"></span><span class="keyword" id="5105169">func</span>&nbsp;<span class="op" id="5105174">(</span><span class="ident" id="5105175">p</span>&nbsp;<span class="op" id="5105177">*</span><span class="ident" id="5105178">lib</span><span class="op" id="5105181">)</span>&nbsp;<span class="ident" id="5105183">Declare</span><span class="op" id="5105190">(</span><span class="ident" id="5105191">s</span>&nbsp;<span class="op" id="5105193">*</span><span class="ident" id="5105194">symbol</span><span class="op" id="5105200">)</span>&nbsp;<span class="builtintype" id="5105202">uint32</span>&nbsp;<span class="op" id="5105209">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105212">_</span><span class="op" id="5105213">,</span>&nbsp;<span class="ident" id="5105215">found</span>&nbsp;<span class="op" id="5105221">:=</span>&nbsp;<span class="ident" id="5105224">p</span><span class="op" id="5105225">.</span><span class="ident" id="5105226">symbols</span><span class="op" id="5105233">[</span><span class="ident" id="5105234">s</span><span class="op" id="5105235">.</span><span class="ident" id="5105236">Name</span><span class="op" id="5105240">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105243">if</span>&nbsp;<span class="ident" id="5105246">found</span>&nbsp;<span class="op" id="5105252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5105256">panic</span><span class="op" id="5105261">(</span><span class="string" id="5105262">&#34;redeclare&#34;</span><span class="op" id="5105273">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5105276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105279">p</span><span class="op" id="5105280">.</span><span class="ident" id="5105281">symbols</span><span class="op" id="5105288">[</span><span class="ident" id="5105289">s</span><span class="op" id="5105290">.</span><span class="ident" id="5105291">Name</span><span class="op" id="5105295">]</span>&nbsp;<span class="op" id="5105297">=</span>&nbsp;<span class="ident" id="5105299">s</span><br>
<span class="lineno">70</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105303">switch</span>&nbsp;<span class="ident" id="5105310">s</span><span class="op" id="5105311">.</span><span class="ident" id="5105312">Type</span>&nbsp;<span class="op" id="5105317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105320">case</span>&nbsp;<span class="ident" id="5105325">SymConst</span><span class="op" id="5105333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105337">return</span>&nbsp;<span class="num" id="5105344">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105347">case</span>&nbsp;<span class="ident" id="5105352">SymFunc</span><span class="op" id="5105359">:</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105363">return</span>&nbsp;<span class="ident" id="5105370">p</span><span class="op" id="5105371">.</span><span class="ident" id="5105372">Package</span><span class="op" id="5105379">.</span><span class="ident" id="5105380">Declare</span><span class="op" id="5105387">(</span><span class="op" id="5105388">&amp;</span><span class="ident" id="5105389">link8</span><span class="op" id="5105394">.</span><span class="ident" id="5105395">Symbol</span><span class="op" id="5105401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105406">Name</span><span class="op" id="5105410">:</span>&nbsp;<span class="ident" id="5105412">s</span><span class="op" id="5105413">.</span><span class="ident" id="5105414">Name</span><span class="op" id="5105418">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105423">Type</span><span class="op" id="5105427">:</span>&nbsp;<span class="ident" id="5105429">link8</span><span class="op" id="5105434">.</span><span class="ident" id="5105435">SymFunc</span><span class="op" id="5105442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5105446">}</span><span class="op" id="5105447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105450">case</span>&nbsp;<span class="ident" id="5105455">SymVar</span><span class="op" id="5105461">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105465">return</span>&nbsp;<span class="ident" id="5105472">p</span><span class="op" id="5105473">.</span><span class="ident" id="5105474">Package</span><span class="op" id="5105481">.</span><span class="ident" id="5105482">Declare</span><span class="op" id="5105489">(</span><span class="op" id="5105490">&amp;</span><span class="ident" id="5105491">link8</span><span class="op" id="5105496">.</span><span class="ident" id="5105497">Symbol</span><span class="op" id="5105503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105508">Name</span><span class="op" id="5105512">:</span>&nbsp;<span class="ident" id="5105514">s</span><span class="op" id="5105515">.</span><span class="ident" id="5105516">Name</span><span class="op" id="5105520">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105525">Type</span><span class="op" id="5105529">:</span>&nbsp;<span class="ident" id="5105531">link8</span><span class="op" id="5105536">.</span><span class="ident" id="5105537">SymVar</span><span class="op" id="5105543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5105547">}</span><span class="op" id="5105548">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105551">default</span><span class="op" id="5105558">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5105562">panic</span><span class="op" id="5105567">(</span><span class="string" id="5105568">&#34;declare&nbsp;with&nbsp;invalid&nbsp;sym&nbsp;type&#34;</span><span class="op" id="5105599">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5105602">}</span><br>
<span class="lineno"></span><span class="op" id="5105604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5105607">//&nbsp;Query&nbsp;returns&nbsp;the&nbsp;symbol&nbsp;declared&nbsp;by&nbsp;name&nbsp;and&nbsp;its&nbsp;symbol&nbsp;index</span><br>
<span class="lineno">90</span><span class="comment" id="5105673">//&nbsp;if&nbsp;the&nbsp;symbol&nbsp;is&nbsp;a&nbsp;function&nbsp;or&nbsp;variable.&nbsp;It&nbsp;returns&nbsp;nil,&nbsp;0&nbsp;when</span><br>
<span class="lineno"></span><span class="comment" id="5105740">//&nbsp;the&nbsp;symbol&nbsp;of&nbsp;name&nbsp;is&nbsp;not&nbsp;found.</span><br>
<span class="lineno"></span><span class="keyword" id="5105776">func</span>&nbsp;<span class="op" id="5105781">(</span><span class="ident" id="5105782">p</span>&nbsp;<span class="op" id="5105784">*</span><span class="ident" id="5105785">lib</span><span class="op" id="5105788">)</span>&nbsp;<span class="ident" id="5105790">Query</span><span class="op" id="5105795">(</span><span class="ident" id="5105796">name</span>&nbsp;<span class="builtintype" id="5105801">string</span><span class="op" id="5105807">)</span>&nbsp;<span class="op" id="5105809">(</span><span class="op" id="5105810">*</span><span class="ident" id="5105811">symbol</span><span class="op" id="5105817">,</span>&nbsp;<span class="builtintype" id="5105819">uint32</span><span class="op" id="5105825">)</span>&nbsp;<span class="op" id="5105827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105830">ret</span><span class="op" id="5105833">,</span>&nbsp;<span class="ident" id="5105835">found</span>&nbsp;<span class="op" id="5105841">:=</span>&nbsp;<span class="ident" id="5105844">p</span><span class="op" id="5105845">.</span><span class="ident" id="5105846">symbols</span><span class="op" id="5105853">[</span><span class="ident" id="5105854">name</span><span class="op" id="5105858">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105861">if</span>&nbsp;<span class="op" id="5105864">!</span><span class="ident" id="5105865">found</span>&nbsp;<span class="op" id="5105871">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105875">return</span>&nbsp;<span class="ident" id="5105882">nil</span><span class="op" id="5105885">,</span>&nbsp;<span class="num" id="5105887">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5105890">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105894">switch</span>&nbsp;<span class="ident" id="5105901">ret</span><span class="op" id="5105904">.</span><span class="ident" id="5105905">Type</span>&nbsp;<span class="op" id="5105910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105913">case</span>&nbsp;<span class="ident" id="5105918">SymConst</span><span class="op" id="5105926">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105930">return</span>&nbsp;<span class="ident" id="5105937">ret</span><span class="op" id="5105940">,</span>&nbsp;<span class="num" id="5105942">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5105945">case</span>&nbsp;<span class="ident" id="5105950">SymFunc</span><span class="op" id="5105957">,</span>&nbsp;<span class="ident" id="5105959">SymVar</span><span class="op" id="5105965">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5105969">s</span><span class="op" id="5105970">,</span>&nbsp;<span class="ident" id="5105972">index</span>&nbsp;<span class="op" id="5105978">:=</span>&nbsp;<span class="ident" id="5105981">p</span><span class="op" id="5105982">.</span><span class="ident" id="5105983">Package</span><span class="op" id="5105990">.</span><span class="ident" id="5105991">Query</span><span class="op" id="5105996">(</span><span class="ident" id="5105997">name</span><span class="op" id="5106001">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106005">if</span>&nbsp;<span class="ident" id="5106008">s</span>&nbsp;<span class="op" id="5106010">==</span>&nbsp;<span class="ident" id="5106013">nil</span>&nbsp;<span class="op" id="5106017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5106022">panic</span><span class="op" id="5106027">(</span><span class="string" id="5106028">&#34;symbol&nbsp;missing&#34;</span><span class="op" id="5106044">)</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5106048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106052">return</span>&nbsp;<span class="ident" id="5106059">ret</span><span class="op" id="5106062">,</span>&nbsp;<span class="ident" id="5106064">index</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5106071">default</span><span class="op" id="5106078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="5106082">panic</span><span class="op" id="5106087">(</span><span class="string" id="5106088">&#34;bug&#34;</span><span class="op" id="5106093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5106096">}</span><br>
<span class="lineno">110</span><span class="op" id="5106098">}</span>
</div>
</body>
</html>
