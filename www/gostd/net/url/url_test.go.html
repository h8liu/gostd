<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/url</h2>
<ul>
<li><a href="/gostd/net/url/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/url/url.go.html">url.go</a></li>
<li><a href="/gostd/net/url/url_test.go.html" class="current">url_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7134500">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7134555">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7134609">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7134660">package</span>&nbsp;<span class="ident" id="7134668">url</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7134673">import</span>&nbsp;<span class="op" id="7134680">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7134683">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7134690">&#34;reflect&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7134701">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7134712">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7134722">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7134725">type</span>&nbsp;<span class="ident" id="7134730">URLTest</span>&nbsp;<span class="keyword" id="7134738">struct</span>&nbsp;<span class="op" id="7134745">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7134748">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7134758">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7134766">out</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="7134776">*</span><span class="ident" id="7134777">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7134782">roundtrip</span>&nbsp;<span class="builtintype" id="7134792">string</span>&nbsp;<span class="comment" id="7134799">//&nbsp;expected&nbsp;result&nbsp;of&nbsp;reserializing&nbsp;the&nbsp;URL;&nbsp;empty&nbsp;means&nbsp;same&nbsp;as&nbsp;&#34;in&#34;.</span><br>
<span class="lineno"></span><span class="op" id="7134870">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="7134873">var</span>&nbsp;<span class="ident" id="7134877">urltests</span>&nbsp;<span class="op" id="7134886">=</span>&nbsp;<span class="op" id="7134888">[</span><span class="op" id="7134889">]</span><span class="ident" id="7134890">URLTest</span><span class="op" id="7134897">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7134900">//&nbsp;no&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7134912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7134916">&#34;http://www.google.com&#34;</span><span class="op" id="7134939">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7134943">&amp;</span><span class="ident" id="7134944">URL</span><span class="op" id="7134947">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7134952">Scheme</span><span class="op" id="7134958">:</span>&nbsp;<span class="string" id="7134960">&#34;http&#34;</span><span class="op" id="7134966">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7134971">Host</span><span class="op" id="7134975">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7134979">&#34;www.google.com&#34;</span><span class="op" id="7134995">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7134999">}</span><span class="op" id="7135000">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135004">&#34;&#34;</span><span class="op" id="7135006">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135009">}</span><span class="op" id="7135010">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135013">//&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135026">&#34;http://www.google.com/&#34;</span><span class="op" id="7135050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135054">&amp;</span><span class="ident" id="7135055">URL</span><span class="op" id="7135058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135063">Scheme</span><span class="op" id="7135069">:</span>&nbsp;<span class="string" id="7135071">&#34;http&#34;</span><span class="op" id="7135077">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135082">Host</span><span class="op" id="7135086">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135090">&#34;www.google.com&#34;</span><span class="op" id="7135106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135111">Path</span><span class="op" id="7135115">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135119">&#34;/&#34;</span><span class="op" id="7135122">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135126">}</span><span class="op" id="7135127">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135131">&#34;&#34;</span><span class="op" id="7135133">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135136">}</span><span class="op" id="7135137">,</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135140">//&nbsp;path&nbsp;with&nbsp;hex&nbsp;escaping</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135171">&#34;http://www.google.com/file%20one%26two&#34;</span><span class="op" id="7135211">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135215">&amp;</span><span class="ident" id="7135216">URL</span><span class="op" id="7135219">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135224">Scheme</span><span class="op" id="7135230">:</span>&nbsp;<span class="string" id="7135232">&#34;http&#34;</span><span class="op" id="7135238">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135243">Host</span><span class="op" id="7135247">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135251">&#34;www.google.com&#34;</span><span class="op" id="7135267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135272">Path</span><span class="op" id="7135276">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135280">&#34;/file&nbsp;one&amp;two&#34;</span><span class="op" id="7135295">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135299">}</span><span class="op" id="7135300">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135304">&#34;http://www.google.com/file%20one&amp;two&#34;</span><span class="op" id="7135342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135345">}</span><span class="op" id="7135346">,</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135349">//&nbsp;user</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135362">&#34;ftp://webmaster@www.google.com/&#34;</span><span class="op" id="7135395">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135399">&amp;</span><span class="ident" id="7135400">URL</span><span class="op" id="7135403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135408">Scheme</span><span class="op" id="7135414">:</span>&nbsp;<span class="string" id="7135416">&#34;ftp&#34;</span><span class="op" id="7135421">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135426">User</span><span class="op" id="7135430">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7135434">User</span><span class="op" id="7135438">(</span><span class="string" id="7135439">&#34;webmaster&#34;</span><span class="op" id="7135450">)</span><span class="op" id="7135451">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135456">Host</span><span class="op" id="7135460">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135464">&#34;www.google.com&#34;</span><span class="op" id="7135480">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135485">Path</span><span class="op" id="7135489">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135493">&#34;/&#34;</span><span class="op" id="7135496">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135500">}</span><span class="op" id="7135501">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135505">&#34;&#34;</span><span class="op" id="7135507">,</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135510">}</span><span class="op" id="7135511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135514">//&nbsp;escape&nbsp;sequence&nbsp;in&nbsp;username</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135550">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7135584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135588">&amp;</span><span class="ident" id="7135589">URL</span><span class="op" id="7135592">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135597">Scheme</span><span class="op" id="7135603">:</span>&nbsp;<span class="string" id="7135605">&#34;ftp&#34;</span><span class="op" id="7135610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135615">User</span><span class="op" id="7135619">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7135623">User</span><span class="op" id="7135627">(</span><span class="string" id="7135628">&#34;john&nbsp;doe&#34;</span><span class="op" id="7135638">)</span><span class="op" id="7135639">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135644">Host</span><span class="op" id="7135648">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135652">&#34;www.google.com&#34;</span><span class="op" id="7135668">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135673">Path</span><span class="op" id="7135677">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135681">&#34;/&#34;</span><span class="op" id="7135684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135688">}</span><span class="op" id="7135689">,</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135693">&#34;ftp://john%20doe@www.google.com/&#34;</span><span class="op" id="7135727">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135730">}</span><span class="op" id="7135731">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135734">//&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135744">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135748">&#34;http://www.google.com/?q=go+language&#34;</span><span class="op" id="7135786">,</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135790">&amp;</span><span class="ident" id="7135791">URL</span><span class="op" id="7135794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135799">Scheme</span><span class="op" id="7135805">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7135809">&#34;http&#34;</span><span class="op" id="7135815">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135820">Host</span><span class="op" id="7135824">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7135830">&#34;www.google.com&#34;</span><span class="op" id="7135846">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135851">Path</span><span class="op" id="7135855">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7135861">&#34;/&#34;</span><span class="op" id="7135864">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7135869">RawQuery</span><span class="op" id="7135877">:</span>&nbsp;<span class="string" id="7135879">&#34;q=go+language&#34;</span><span class="op" id="7135894">,</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135898">}</span><span class="op" id="7135899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135903">&#34;&#34;</span><span class="op" id="7135905">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135908">}</span><span class="op" id="7135909">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7135912">//&nbsp;query&nbsp;with&nbsp;hex&nbsp;escaping:&nbsp;NOT&nbsp;parsed</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7135952">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7135956">&#34;http://www.google.com/?q=go%20language&#34;</span><span class="op" id="7135996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136000">&amp;</span><span class="ident" id="7136001">URL</span><span class="op" id="7136004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136009">Scheme</span><span class="op" id="7136015">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136019">&#34;http&#34;</span><span class="op" id="7136025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136030">Host</span><span class="op" id="7136034">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7136040">&#34;www.google.com&#34;</span><span class="op" id="7136056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136061">Path</span><span class="op" id="7136065">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7136071">&#34;/&#34;</span><span class="op" id="7136074">,</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136079">RawQuery</span><span class="op" id="7136087">:</span>&nbsp;<span class="string" id="7136089">&#34;q=go%20language&#34;</span><span class="op" id="7136106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136110">}</span><span class="op" id="7136111">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136115">&#34;&#34;</span><span class="op" id="7136117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136120">}</span><span class="op" id="7136121">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7136124">//&nbsp;%20&nbsp;outside&nbsp;query</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136150">&#34;http://www.google.com/a%20b?q=c+d&#34;</span><span class="op" id="7136185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136189">&amp;</span><span class="ident" id="7136190">URL</span><span class="op" id="7136193">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136198">Scheme</span><span class="op" id="7136204">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136208">&#34;http&#34;</span><span class="op" id="7136214">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136219">Host</span><span class="op" id="7136223">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7136229">&#34;www.google.com&#34;</span><span class="op" id="7136245">,</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136250">Path</span><span class="op" id="7136254">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7136260">&#34;/a&nbsp;b&#34;</span><span class="op" id="7136266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136271">RawQuery</span><span class="op" id="7136279">:</span>&nbsp;<span class="string" id="7136281">&#34;q=c+d&#34;</span><span class="op" id="7136288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136292">}</span><span class="op" id="7136293">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136297">&#34;&#34;</span><span class="op" id="7136299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136302">}</span><span class="op" id="7136303">,</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7136306">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136352">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7136388">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136392">&amp;</span><span class="ident" id="7136393">URL</span><span class="op" id="7136396">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136401">Scheme</span><span class="op" id="7136407">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136411">&#34;http&#34;</span><span class="op" id="7136417">,</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136422">Opaque</span><span class="op" id="7136428">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136432">&#34;www.google.com/&#34;</span><span class="op" id="7136449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136454">RawQuery</span><span class="op" id="7136462">:</span>&nbsp;<span class="string" id="7136464">&#34;q=go+language&#34;</span><span class="op" id="7136479">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136483">}</span><span class="op" id="7136484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136488">&#34;http:www.google.com/?q=go+language&#34;</span><span class="op" id="7136524">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136527">}</span><span class="op" id="7136528">,</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7136531">//&nbsp;path&nbsp;without&nbsp;leading&nbsp;/,&nbsp;so&nbsp;no&nbsp;parsing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136577">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7136619">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136623">&amp;</span><span class="ident" id="7136624">URL</span><span class="op" id="7136627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136632">Scheme</span><span class="op" id="7136638">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136642">&#34;http&#34;</span><span class="op" id="7136648">,</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136653">Opaque</span><span class="op" id="7136659">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136663">&#34;%2f%2fwww.google.com/&#34;</span><span class="op" id="7136686">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136691">RawQuery</span><span class="op" id="7136699">:</span>&nbsp;<span class="string" id="7136701">&#34;q=go+language&#34;</span><span class="op" id="7136716">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136720">}</span><span class="op" id="7136721">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136725">&#34;http:%2f%2fwww.google.com/?q=go+language&#34;</span><span class="op" id="7136767">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136770">}</span><span class="op" id="7136771">,</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7136774">//&nbsp;non-authority&nbsp;with&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136802">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136806">&#34;mailto:/webmaster@golang.org&#34;</span><span class="op" id="7136836">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136840">&amp;</span><span class="ident" id="7136841">URL</span><span class="op" id="7136844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136849">Scheme</span><span class="op" id="7136855">:</span>&nbsp;<span class="string" id="7136857">&#34;mailto&#34;</span><span class="op" id="7136865">,</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7136870">Path</span><span class="op" id="7136874">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7136878">&#34;/webmaster@golang.org&#34;</span><span class="op" id="7136901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136905">}</span><span class="op" id="7136906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136910">&#34;mailto:///webmaster@golang.org&#34;</span><span class="op" id="7136942">,</span>&nbsp;<span class="comment" id="7136944">//&nbsp;unfortunate&nbsp;compromise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136971">}</span><span class="op" id="7136972">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7136975">//&nbsp;non-authority</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7136993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7136997">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7137026">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137030">&amp;</span><span class="ident" id="7137031">URL</span><span class="op" id="7137034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137039">Scheme</span><span class="op" id="7137045">:</span>&nbsp;<span class="string" id="7137047">&#34;mailto&#34;</span><span class="op" id="7137055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137060">Opaque</span><span class="op" id="7137066">:</span>&nbsp;<span class="string" id="7137068">&#34;webmaster@golang.org&#34;</span><span class="op" id="7137090">,</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137094">}</span><span class="op" id="7137095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137099">&#34;&#34;</span><span class="op" id="7137101">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137104">}</span><span class="op" id="7137105">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137108">//&nbsp;unescaped&nbsp;://&nbsp;in&nbsp;query&nbsp;should&nbsp;not&nbsp;create&nbsp;a&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137162">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137166">&#34;/foo?query=http://bad&#34;</span><span class="op" id="7137189">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137193">&amp;</span><span class="ident" id="7137194">URL</span><span class="op" id="7137197">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137202">Path</span><span class="op" id="7137206">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7137212">&#34;/foo&#34;</span><span class="op" id="7137218">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137223">RawQuery</span><span class="op" id="7137231">:</span>&nbsp;<span class="string" id="7137233">&#34;query=http://bad&#34;</span><span class="op" id="7137251">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137255">}</span><span class="op" id="7137256">,</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137260">&#34;&#34;</span><span class="op" id="7137262">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137265">}</span><span class="op" id="7137266">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137269">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme&nbsp;should&nbsp;create&nbsp;an&nbsp;authority</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137326">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137330">&#34;//foo&#34;</span><span class="op" id="7137337">,</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137341">&amp;</span><span class="ident" id="7137342">URL</span><span class="op" id="7137345">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137350">Host</span><span class="op" id="7137354">:</span>&nbsp;<span class="string" id="7137356">&#34;foo&#34;</span><span class="op" id="7137361">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137365">}</span><span class="op" id="7137366">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137370">&#34;&#34;</span><span class="op" id="7137372">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137375">}</span><span class="op" id="7137376">,</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137379">//&nbsp;leading&nbsp;//&nbsp;without&nbsp;scheme,&nbsp;with&nbsp;userinfo,&nbsp;path,&nbsp;and&nbsp;query</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137441">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137445">&#34;//user@foo/path?a=b&#34;</span><span class="op" id="7137466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137470">&amp;</span><span class="ident" id="7137471">URL</span><span class="op" id="7137474">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137479">User</span><span class="op" id="7137483">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7137489">User</span><span class="op" id="7137493">(</span><span class="string" id="7137494">&#34;user&#34;</span><span class="op" id="7137500">)</span><span class="op" id="7137501">,</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137506">Host</span><span class="op" id="7137510">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7137516">&#34;foo&#34;</span><span class="op" id="7137521">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137526">Path</span><span class="op" id="7137530">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7137536">&#34;/path&#34;</span><span class="op" id="7137543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137548">RawQuery</span><span class="op" id="7137556">:</span>&nbsp;<span class="string" id="7137558">&#34;a=b&#34;</span><span class="op" id="7137563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137567">}</span><span class="op" id="7137568">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137572">&#34;&#34;</span><span class="op" id="7137574">,</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137577">}</span><span class="op" id="7137578">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137581">//&nbsp;Three&nbsp;leading&nbsp;slashes&nbsp;isn&#39;t&nbsp;an&nbsp;authority,&nbsp;but&nbsp;doesn&#39;t&nbsp;return&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137656">//&nbsp;(We&nbsp;can&#39;t&nbsp;return&nbsp;an&nbsp;error,&nbsp;as&nbsp;this&nbsp;code&nbsp;is&nbsp;also&nbsp;used&nbsp;via</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137717">//&nbsp;ServeHTTP&nbsp;-&gt;&nbsp;ReadRequest&nbsp;-&gt;&nbsp;Parse,&nbsp;which&nbsp;is&nbsp;arguably&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137776">//&nbsp;different&nbsp;URL&nbsp;parsing&nbsp;context,&nbsp;but&nbsp;currently&nbsp;shares&nbsp;the</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7137836">//&nbsp;same&nbsp;codepath)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137859">&#34;///threeslashes&#34;</span><span class="op" id="7137876">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137880">&amp;</span><span class="ident" id="7137881">URL</span><span class="op" id="7137884">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137889">Path</span><span class="op" id="7137893">:</span>&nbsp;<span class="string" id="7137895">&#34;///threeslashes&#34;</span><span class="op" id="7137912">,</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137916">}</span><span class="op" id="7137917">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137921">&#34;&#34;</span><span class="op" id="7137923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137926">}</span><span class="op" id="7137927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7137934">&#34;http://user:password@google.com&#34;</span><span class="op" id="7137967">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7137971">&amp;</span><span class="ident" id="7137972">URL</span><span class="op" id="7137975">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137980">Scheme</span><span class="op" id="7137986">:</span>&nbsp;<span class="string" id="7137988">&#34;http&#34;</span><span class="op" id="7137994">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7137999">User</span><span class="op" id="7138003">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7138007">UserPassword</span><span class="op" id="7138019">(</span><span class="string" id="7138020">&#34;user&#34;</span><span class="op" id="7138026">,</span>&nbsp;<span class="string" id="7138028">&#34;password&#34;</span><span class="op" id="7138038">)</span><span class="op" id="7138039">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138044">Host</span><span class="op" id="7138048">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7138052">&#34;google.com&#34;</span><span class="op" id="7138064">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138068">}</span><span class="op" id="7138069">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138073">&#34;http://user:password@google.com&#34;</span><span class="op" id="7138106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138109">}</span><span class="op" id="7138110">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7138113">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;username&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138169">&#34;http://j@ne:password@google.com&#34;</span><span class="op" id="7138202">,</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138206">&amp;</span><span class="ident" id="7138207">URL</span><span class="op" id="7138210">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138215">Scheme</span><span class="op" id="7138221">:</span>&nbsp;<span class="string" id="7138223">&#34;http&#34;</span><span class="op" id="7138229">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138234">User</span><span class="op" id="7138238">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7138242">UserPassword</span><span class="op" id="7138254">(</span><span class="string" id="7138255">&#34;j@ne&#34;</span><span class="op" id="7138261">,</span>&nbsp;<span class="string" id="7138263">&#34;password&#34;</span><span class="op" id="7138273">)</span><span class="op" id="7138274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138279">Host</span><span class="op" id="7138283">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7138287">&#34;google.com&#34;</span><span class="op" id="7138299">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138303">}</span><span class="op" id="7138304">,</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138308">&#34;http://j%40ne:password@google.com&#34;</span><span class="op" id="7138343">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138346">}</span><span class="op" id="7138347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7138350">//&nbsp;unescaped&nbsp;@&nbsp;in&nbsp;password&nbsp;should&nbsp;not&nbsp;confuse&nbsp;host</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138406">&#34;http://jane:p@ssword@google.com&#34;</span><span class="op" id="7138439">,</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138443">&amp;</span><span class="ident" id="7138444">URL</span><span class="op" id="7138447">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138452">Scheme</span><span class="op" id="7138458">:</span>&nbsp;<span class="string" id="7138460">&#34;http&#34;</span><span class="op" id="7138466">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138471">User</span><span class="op" id="7138475">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7138479">UserPassword</span><span class="op" id="7138491">(</span><span class="string" id="7138492">&#34;jane&#34;</span><span class="op" id="7138498">,</span>&nbsp;<span class="string" id="7138500">&#34;p@ssword&#34;</span><span class="op" id="7138510">)</span><span class="op" id="7138511">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138516">Host</span><span class="op" id="7138520">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7138524">&#34;google.com&#34;</span><span class="op" id="7138536">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138540">}</span><span class="op" id="7138541">,</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138545">&#34;http://jane:p%40ssword@google.com&#34;</span><span class="op" id="7138580">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138583">}</span><span class="op" id="7138584">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138587">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138591">&#34;http://j@ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7138635">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138639">&amp;</span><span class="ident" id="7138640">URL</span><span class="op" id="7138643">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138648">Scheme</span><span class="op" id="7138654">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7138658">&#34;http&#34;</span><span class="op" id="7138664">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138669">User</span><span class="op" id="7138673">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7138679">UserPassword</span><span class="op" id="7138691">(</span><span class="string" id="7138692">&#34;j@ne&#34;</span><span class="op" id="7138698">,</span>&nbsp;<span class="string" id="7138700">&#34;password&#34;</span><span class="op" id="7138710">)</span><span class="op" id="7138711">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138716">Host</span><span class="op" id="7138720">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7138726">&#34;google.com&#34;</span><span class="op" id="7138738">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138743">Path</span><span class="op" id="7138747">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7138753">&#34;/p@th&#34;</span><span class="op" id="7138760">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138765">RawQuery</span><span class="op" id="7138773">:</span>&nbsp;<span class="string" id="7138775">&#34;q=@go&#34;</span><span class="op" id="7138782">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138786">}</span><span class="op" id="7138787">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138791">&#34;http://j%40ne:password@google.com/p@th?q=@go&#34;</span><span class="op" id="7138837">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138840">}</span><span class="op" id="7138841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7138848">&#34;http://www.google.com/?q=go+language#foo&#34;</span><span class="op" id="7138890">,</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7138894">&amp;</span><span class="ident" id="7138895">URL</span><span class="op" id="7138898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138903">Scheme</span><span class="op" id="7138909">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7138913">&#34;http&#34;</span><span class="op" id="7138919">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138924">Host</span><span class="op" id="7138928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7138934">&#34;www.google.com&#34;</span><span class="op" id="7138950">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138955">Path</span><span class="op" id="7138959">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7138965">&#34;/&#34;</span><span class="op" id="7138968">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7138973">RawQuery</span><span class="op" id="7138981">:</span>&nbsp;<span class="string" id="7138983">&#34;q=go+language&#34;</span><span class="op" id="7138998">,</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139003">Fragment</span><span class="op" id="7139011">:</span>&nbsp;<span class="string" id="7139013">&#34;foo&#34;</span><span class="op" id="7139018">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139022">}</span><span class="op" id="7139023">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139027">&#34;&#34;</span><span class="op" id="7139029">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139032">}</span><span class="op" id="7139033">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139036">{</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139040">&#34;http://www.google.com/?q=go+language#foo%26bar&#34;</span><span class="op" id="7139088">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139092">&amp;</span><span class="ident" id="7139093">URL</span><span class="op" id="7139096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139101">Scheme</span><span class="op" id="7139107">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7139111">&#34;http&#34;</span><span class="op" id="7139117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139122">Host</span><span class="op" id="7139126">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7139132">&#34;www.google.com&#34;</span><span class="op" id="7139148">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139153">Path</span><span class="op" id="7139157">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7139163">&#34;/&#34;</span><span class="op" id="7139166">,</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139171">RawQuery</span><span class="op" id="7139179">:</span>&nbsp;<span class="string" id="7139181">&#34;q=go+language&#34;</span><span class="op" id="7139196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139201">Fragment</span><span class="op" id="7139209">:</span>&nbsp;<span class="string" id="7139211">&#34;foo&amp;bar&#34;</span><span class="op" id="7139220">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139224">}</span><span class="op" id="7139225">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139229">&#34;http://www.google.com/?q=go+language#foo&amp;bar&#34;</span><span class="op" id="7139275">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139278">}</span><span class="op" id="7139279">,</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139282">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139286">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7139312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139316">&amp;</span><span class="ident" id="7139317">URL</span><span class="op" id="7139320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139325">Scheme</span><span class="op" id="7139331">:</span>&nbsp;<span class="string" id="7139333">&#34;file&#34;</span><span class="op" id="7139339">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139344">Host</span><span class="op" id="7139348">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7139352">&#34;&#34;</span><span class="op" id="7139354">,</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139359">Path</span><span class="op" id="7139363">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7139367">&#34;/home/adg/rabbits&#34;</span><span class="op" id="7139386">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139390">}</span><span class="op" id="7139391">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139395">&#34;file:///home/adg/rabbits&#34;</span><span class="op" id="7139421">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139424">}</span><span class="op" id="7139425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7139428">//&nbsp;&#34;Windows&#34;&nbsp;paths&nbsp;are&nbsp;no&nbsp;exception&nbsp;to&nbsp;the&nbsp;rule.</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7139478">//&nbsp;See&nbsp;golang.org/issue/6027,&nbsp;especially&nbsp;comment&nbsp;#9.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139536">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7139563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139567">&amp;</span><span class="ident" id="7139568">URL</span><span class="op" id="7139571">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139576">Scheme</span><span class="op" id="7139582">:</span>&nbsp;<span class="string" id="7139584">&#34;file&#34;</span><span class="op" id="7139590">,</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139595">Host</span><span class="op" id="7139599">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7139603">&#34;&#34;</span><span class="op" id="7139605">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139610">Path</span><span class="op" id="7139614">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7139618">&#34;/C:/FooBar/Baz.txt&#34;</span><span class="op" id="7139638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139642">}</span><span class="op" id="7139643">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139647">&#34;file:///C:/FooBar/Baz.txt&#34;</span><span class="op" id="7139674">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139677">}</span><span class="op" id="7139678">,</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7139681">//&nbsp;case-insensitive&nbsp;scheme</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139713">&#34;MaIlTo:webmaster@golang.org&#34;</span><span class="op" id="7139742">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139746">&amp;</span><span class="ident" id="7139747">URL</span><span class="op" id="7139750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139755">Scheme</span><span class="op" id="7139761">:</span>&nbsp;<span class="string" id="7139763">&#34;mailto&#34;</span><span class="op" id="7139771">,</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139776">Opaque</span><span class="op" id="7139782">:</span>&nbsp;<span class="string" id="7139784">&#34;webmaster@golang.org&#34;</span><span class="op" id="7139806">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139810">}</span><span class="op" id="7139811">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139815">&#34;mailto:webmaster@golang.org&#34;</span><span class="op" id="7139844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139847">}</span><span class="op" id="7139848">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7139851">//&nbsp;Relative&nbsp;path</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139873">&#34;a/b/c&#34;</span><span class="op" id="7139880">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139884">&amp;</span><span class="ident" id="7139885">URL</span><span class="op" id="7139888">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7139893">Path</span><span class="op" id="7139897">:</span>&nbsp;<span class="string" id="7139899">&#34;a/b/c&#34;</span><span class="op" id="7139906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139910">}</span><span class="op" id="7139911">,</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139915">&#34;a/b/c&#34;</span><span class="op" id="7139922">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139925">}</span><span class="op" id="7139926">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7139929">//&nbsp;escaped&nbsp;&#39;?&#39;&nbsp;in&nbsp;username&nbsp;and&nbsp;password</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7139970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7139974">&#34;http://%3Fam:pa%3Fsword@google.com&#34;</span><span class="op" id="7140010">,</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140014">&amp;</span><span class="ident" id="7140015">URL</span><span class="op" id="7140018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140023">Scheme</span><span class="op" id="7140029">:</span>&nbsp;<span class="string" id="7140031">&#34;http&#34;</span><span class="op" id="7140037">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140042">User</span><span class="op" id="7140046">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7140050">UserPassword</span><span class="op" id="7140062">(</span><span class="string" id="7140063">&#34;?am&#34;</span><span class="op" id="7140068">,</span>&nbsp;<span class="string" id="7140070">&#34;pa?sword&#34;</span><span class="op" id="7140080">)</span><span class="op" id="7140081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140086">Host</span><span class="op" id="7140090">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7140094">&#34;google.com&#34;</span><span class="op" id="7140106">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140110">}</span><span class="op" id="7140111">,</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7140115">&#34;&#34;</span><span class="op" id="7140117">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140120">}</span><span class="op" id="7140121">,</span><br>
<span class="lineno"></span><span class="op" id="7140123">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7140126">//&nbsp;more&nbsp;useful&nbsp;string&nbsp;for&nbsp;debugging&nbsp;than&nbsp;fmt&#39;s&nbsp;struct&nbsp;printer</span><br>
<span class="lineno">295</span><span class="keyword" id="7140188">func</span>&nbsp;<span class="ident" id="7140193">ufmt</span><span class="op" id="7140197">(</span><span class="ident" id="7140198">u</span>&nbsp;<span class="op" id="7140200">*</span><span class="ident" id="7140201">URL</span><span class="op" id="7140204">)</span>&nbsp;<span class="builtintype" id="7140206">string</span>&nbsp;<span class="op" id="7140213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140216">var</span>&nbsp;<span class="ident" id="7140220">user</span><span class="op" id="7140224">,</span>&nbsp;<span class="ident" id="7140226">pass</span>&nbsp;<span class="keyword" id="7140231">interface</span><span class="op" id="7140240">{</span><span class="op" id="7140241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140244">if</span>&nbsp;<span class="ident" id="7140247">u</span><span class="op" id="7140248">.</span><span class="ident" id="7140249">User</span>&nbsp;<span class="op" id="7140254">!=</span>&nbsp;<span class="ident" id="7140257">nil</span>&nbsp;<span class="op" id="7140261">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140265">user</span>&nbsp;<span class="op" id="7140270">=</span>&nbsp;<span class="ident" id="7140272">u</span><span class="op" id="7140273">.</span><span class="ident" id="7140274">User</span><span class="op" id="7140278">.</span><span class="ident" id="7140279">Username</span><span class="op" id="7140287">(</span><span class="op" id="7140288">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140292">if</span>&nbsp;<span class="ident" id="7140295">p</span><span class="op" id="7140296">,</span>&nbsp;<span class="ident" id="7140298">ok</span>&nbsp;<span class="op" id="7140301">:=</span>&nbsp;<span class="ident" id="7140304">u</span><span class="op" id="7140305">.</span><span class="ident" id="7140306">User</span><span class="op" id="7140310">.</span><span class="ident" id="7140311">Password</span><span class="op" id="7140319">(</span><span class="op" id="7140320">)</span><span class="op" id="7140321">;</span>&nbsp;<span class="ident" id="7140323">ok</span>&nbsp;<span class="op" id="7140326">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140331">pass</span>&nbsp;<span class="op" id="7140336">=</span>&nbsp;<span class="ident" id="7140338">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140345">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140348">return</span>&nbsp;<span class="ident" id="7140355">fmt</span><span class="op" id="7140358">.</span><span class="ident" id="7140359">Sprintf</span><span class="op" id="7140366">(</span><span class="string" id="7140367">&#34;opaque=%q,&nbsp;scheme=%q,&nbsp;user=%#v,&nbsp;pass=%#v,&nbsp;host=%q,&nbsp;path=%q,&nbsp;rawq=%q,&nbsp;frag=%q&#34;</span><span class="op" id="7140445">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140449">u</span><span class="op" id="7140450">.</span><span class="ident" id="7140451">Opaque</span><span class="op" id="7140457">,</span>&nbsp;<span class="ident" id="7140459">u</span><span class="op" id="7140460">.</span><span class="ident" id="7140461">Scheme</span><span class="op" id="7140467">,</span>&nbsp;<span class="ident" id="7140469">user</span><span class="op" id="7140473">,</span>&nbsp;<span class="ident" id="7140475">pass</span><span class="op" id="7140479">,</span>&nbsp;<span class="ident" id="7140481">u</span><span class="op" id="7140482">.</span><span class="ident" id="7140483">Host</span><span class="op" id="7140487">,</span>&nbsp;<span class="ident" id="7140489">u</span><span class="op" id="7140490">.</span><span class="ident" id="7140491">Path</span><span class="op" id="7140495">,</span>&nbsp;<span class="ident" id="7140497">u</span><span class="op" id="7140498">.</span><span class="ident" id="7140499">RawQuery</span><span class="op" id="7140507">,</span>&nbsp;<span class="ident" id="7140509">u</span><span class="op" id="7140510">.</span><span class="ident" id="7140511">Fragment</span><span class="op" id="7140519">)</span><br>
<span class="lineno">305</span><span class="op" id="7140521">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7140524">func</span>&nbsp;<span class="ident" id="7140529">DoTest</span><span class="op" id="7140535">(</span><span class="ident" id="7140536">t</span>&nbsp;<span class="op" id="7140538">*</span><span class="ident" id="7140539">testing</span><span class="op" id="7140546">.</span><span class="ident" id="7140547">T</span><span class="op" id="7140548">,</span>&nbsp;<span class="ident" id="7140550">parse</span>&nbsp;<span class="keyword" id="7140556">func</span><span class="op" id="7140560">(</span><span class="builtintype" id="7140561">string</span><span class="op" id="7140567">)</span>&nbsp;<span class="op" id="7140569">(</span><span class="op" id="7140570">*</span><span class="ident" id="7140571">URL</span><span class="op" id="7140574">,</span>&nbsp;<span class="builtintype" id="7140576">error</span><span class="op" id="7140581">)</span><span class="op" id="7140582">,</span>&nbsp;<span class="ident" id="7140584">name</span>&nbsp;<span class="builtintype" id="7140589">string</span><span class="op" id="7140595">,</span>&nbsp;<span class="ident" id="7140597">tests</span>&nbsp;<span class="op" id="7140603">[</span><span class="op" id="7140604">]</span><span class="ident" id="7140605">URLTest</span><span class="op" id="7140612">)</span>&nbsp;<span class="op" id="7140614">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140617">for</span>&nbsp;<span class="ident" id="7140621">_</span><span class="op" id="7140622">,</span>&nbsp;<span class="ident" id="7140624">tt</span>&nbsp;<span class="op" id="7140627">:=</span>&nbsp;<span class="keyword" id="7140630">range</span>&nbsp;<span class="ident" id="7140636">tests</span>&nbsp;<span class="op" id="7140642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140646">u</span><span class="op" id="7140647">,</span>&nbsp;<span class="ident" id="7140649">err</span>&nbsp;<span class="op" id="7140653">:=</span>&nbsp;<span class="ident" id="7140656">parse</span><span class="op" id="7140661">(</span><span class="ident" id="7140662">tt</span><span class="op" id="7140664">.</span><span class="ident" id="7140665">in</span><span class="op" id="7140667">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140671">if</span>&nbsp;<span class="ident" id="7140674">err</span>&nbsp;<span class="op" id="7140678">!=</span>&nbsp;<span class="ident" id="7140681">nil</span>&nbsp;<span class="op" id="7140685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140690">t</span><span class="op" id="7140691">.</span><span class="ident" id="7140692">Errorf</span><span class="op" id="7140698">(</span><span class="string" id="7140699">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7140725">,</span>&nbsp;<span class="ident" id="7140727">name</span><span class="op" id="7140731">,</span>&nbsp;<span class="ident" id="7140733">tt</span><span class="op" id="7140735">.</span><span class="ident" id="7140736">in</span><span class="op" id="7140738">,</span>&nbsp;<span class="ident" id="7140740">err</span><span class="op" id="7140743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140748">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140763">if</span>&nbsp;<span class="op" id="7140766">!</span><span class="ident" id="7140767">reflect</span><span class="op" id="7140774">.</span><span class="ident" id="7140775">DeepEqual</span><span class="op" id="7140784">(</span><span class="ident" id="7140785">u</span><span class="op" id="7140786">,</span>&nbsp;<span class="ident" id="7140788">tt</span><span class="op" id="7140790">.</span><span class="ident" id="7140791">out</span><span class="op" id="7140794">)</span>&nbsp;<span class="op" id="7140796">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140801">t</span><span class="op" id="7140802">.</span><span class="ident" id="7140803">Errorf</span><span class="op" id="7140809">(</span><span class="string" id="7140810">&#34;%s(%q):\n\thave&nbsp;%v\n\twant&nbsp;%v\n&#34;</span><span class="op" id="7140843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140849">name</span><span class="op" id="7140853">,</span>&nbsp;<span class="ident" id="7140855">tt</span><span class="op" id="7140857">.</span><span class="ident" id="7140858">in</span><span class="op" id="7140860">,</span>&nbsp;<span class="ident" id="7140862">ufmt</span><span class="op" id="7140866">(</span><span class="ident" id="7140867">u</span><span class="op" id="7140868">)</span><span class="op" id="7140869">,</span>&nbsp;<span class="ident" id="7140871">ufmt</span><span class="op" id="7140875">(</span><span class="ident" id="7140876">tt</span><span class="op" id="7140878">.</span><span class="ident" id="7140879">out</span><span class="op" id="7140882">)</span><span class="op" id="7140883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7140890">}</span><br>
<span class="lineno"></span><span class="op" id="7140892">}</span><br>
<span class="lineno">320</span><br>
<span class="lineno"></span><span class="keyword" id="7140895">func</span>&nbsp;<span class="ident" id="7140900">BenchmarkString</span><span class="op" id="7140915">(</span><span class="ident" id="7140916">b</span>&nbsp;<span class="op" id="7140918">*</span><span class="ident" id="7140919">testing</span><span class="op" id="7140926">.</span><span class="ident" id="7140927">B</span><span class="op" id="7140928">)</span>&nbsp;<span class="op" id="7140930">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140933">b</span><span class="op" id="7140934">.</span><span class="ident" id="7140935">StopTimer</span><span class="op" id="7140944">(</span><span class="op" id="7140945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140948">b</span><span class="op" id="7140949">.</span><span class="ident" id="7140950">ReportAllocs</span><span class="op" id="7140962">(</span><span class="op" id="7140963">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7140966">for</span>&nbsp;<span class="ident" id="7140970">_</span><span class="op" id="7140971">,</span>&nbsp;<span class="ident" id="7140973">tt</span>&nbsp;<span class="op" id="7140976">:=</span>&nbsp;<span class="keyword" id="7140979">range</span>&nbsp;<span class="ident" id="7140985">urltests</span>&nbsp;<span class="op" id="7140994">{</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7140998">u</span><span class="op" id="7140999">,</span>&nbsp;<span class="ident" id="7141001">err</span>&nbsp;<span class="op" id="7141005">:=</span>&nbsp;<span class="ident" id="7141008">Parse</span><span class="op" id="7141013">(</span><span class="ident" id="7141014">tt</span><span class="op" id="7141016">.</span><span class="ident" id="7141017">in</span><span class="op" id="7141019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141023">if</span>&nbsp;<span class="ident" id="7141026">err</span>&nbsp;<span class="op" id="7141030">!=</span>&nbsp;<span class="ident" id="7141033">nil</span>&nbsp;<span class="op" id="7141037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141042">b</span><span class="op" id="7141043">.</span><span class="ident" id="7141044">Errorf</span><span class="op" id="7141050">(</span><span class="string" id="7141051">&#34;Parse(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7141080">,</span>&nbsp;<span class="ident" id="7141082">tt</span><span class="op" id="7141084">.</span><span class="ident" id="7141085">in</span><span class="op" id="7141087">,</span>&nbsp;<span class="ident" id="7141089">err</span><span class="op" id="7141092">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141097">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141108">}</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141112">if</span>&nbsp;<span class="ident" id="7141115">tt</span><span class="op" id="7141117">.</span><span class="ident" id="7141118">roundtrip</span>&nbsp;<span class="op" id="7141128">==</span>&nbsp;<span class="string" id="7141131">&#34;&#34;</span>&nbsp;<span class="op" id="7141134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141139">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141150">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141154">b</span><span class="op" id="7141155">.</span><span class="ident" id="7141156">StartTimer</span><span class="op" id="7141166">(</span><span class="op" id="7141167">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141171">var</span>&nbsp;<span class="ident" id="7141175">g</span>&nbsp;<span class="builtintype" id="7141177">string</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141186">for</span>&nbsp;<span class="ident" id="7141190">i</span>&nbsp;<span class="op" id="7141192">:=</span>&nbsp;<span class="num" id="7141195">0</span><span class="op" id="7141196">;</span>&nbsp;<span class="ident" id="7141198">i</span>&nbsp;<span class="op" id="7141200">&lt;</span>&nbsp;<span class="ident" id="7141202">b</span><span class="op" id="7141203">.</span><span class="ident" id="7141204">N</span><span class="op" id="7141205">;</span>&nbsp;<span class="ident" id="7141207">i</span><span class="op" id="7141208">++</span>&nbsp;<span class="op" id="7141211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141216">g</span>&nbsp;<span class="op" id="7141218">=</span>&nbsp;<span class="ident" id="7141220">u</span><span class="op" id="7141221">.</span><span class="ident" id="7141222">String</span><span class="op" id="7141228">(</span><span class="op" id="7141229">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141233">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141237">b</span><span class="op" id="7141238">.</span><span class="ident" id="7141239">StopTimer</span><span class="op" id="7141248">(</span><span class="op" id="7141249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141253">if</span>&nbsp;<span class="ident" id="7141256">w</span>&nbsp;<span class="op" id="7141258">:=</span>&nbsp;<span class="ident" id="7141261">tt</span><span class="op" id="7141263">.</span><span class="ident" id="7141264">roundtrip</span><span class="op" id="7141273">;</span>&nbsp;<span class="ident" id="7141275">g</span>&nbsp;<span class="op" id="7141277">!=</span>&nbsp;<span class="ident" id="7141280">w</span>&nbsp;<span class="op" id="7141282">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141287">b</span><span class="op" id="7141288">.</span><span class="ident" id="7141289">Errorf</span><span class="op" id="7141295">(</span><span class="string" id="7141296">&#34;Parse(%q).String()&nbsp;==&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7141331">,</span>&nbsp;<span class="ident" id="7141333">tt</span><span class="op" id="7141335">.</span><span class="ident" id="7141336">in</span><span class="op" id="7141338">,</span>&nbsp;<span class="ident" id="7141340">g</span><span class="op" id="7141341">,</span>&nbsp;<span class="ident" id="7141343">w</span><span class="op" id="7141344">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141348">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141351">}</span><br>
<span class="lineno"></span><span class="op" id="7141353">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span><span class="keyword" id="7141356">func</span>&nbsp;<span class="ident" id="7141361">TestParse</span><span class="op" id="7141370">(</span><span class="ident" id="7141371">t</span>&nbsp;<span class="op" id="7141373">*</span><span class="ident" id="7141374">testing</span><span class="op" id="7141381">.</span><span class="ident" id="7141382">T</span><span class="op" id="7141383">)</span>&nbsp;<span class="op" id="7141385">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141388">DoTest</span><span class="op" id="7141394">(</span><span class="ident" id="7141395">t</span><span class="op" id="7141396">,</span>&nbsp;<span class="ident" id="7141398">Parse</span><span class="op" id="7141403">,</span>&nbsp;<span class="string" id="7141405">&#34;Parse&#34;</span><span class="op" id="7141412">,</span>&nbsp;<span class="ident" id="7141414">urltests</span><span class="op" id="7141422">)</span><br>
<span class="lineno"></span><span class="op" id="7141424">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7141427">const</span>&nbsp;<span class="ident" id="7141433">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7141461">=</span>&nbsp;<span class="string" id="7141463">&#34;//not.a.user@not.a.host/just/a/path&#34;</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span><span class="keyword" id="7141502">var</span>&nbsp;<span class="ident" id="7141506">parseRequestURLTests</span>&nbsp;<span class="op" id="7141527">=</span>&nbsp;<span class="op" id="7141529">[</span><span class="op" id="7141530">]</span><span class="keyword" id="7141531">struct</span>&nbsp;<span class="op" id="7141538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141541">url</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7141555">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141563">expectedValid</span>&nbsp;<span class="builtintype" id="7141577">bool</span><br>
<span class="lineno"></span><span class="op" id="7141582">}</span><span class="op" id="7141583">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141586">{</span><span class="string" id="7141587">&#34;http://foo.com&#34;</span><span class="op" id="7141603">,</span>&nbsp;<span class="builtintype" id="7141605">true</span><span class="op" id="7141609">}</span><span class="op" id="7141610">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141613">{</span><span class="string" id="7141614">&#34;http://foo.com/&#34;</span><span class="op" id="7141631">,</span>&nbsp;<span class="builtintype" id="7141633">true</span><span class="op" id="7141637">}</span><span class="op" id="7141638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141641">{</span><span class="string" id="7141642">&#34;http://foo.com/path&#34;</span><span class="op" id="7141663">,</span>&nbsp;<span class="builtintype" id="7141665">true</span><span class="op" id="7141669">}</span><span class="op" id="7141670">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141673">{</span><span class="string" id="7141674">&#34;/&#34;</span><span class="op" id="7141677">,</span>&nbsp;<span class="builtintype" id="7141679">true</span><span class="op" id="7141683">}</span><span class="op" id="7141684">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141687">{</span><span class="ident" id="7141688">pathThatLooksSchemeRelative</span><span class="op" id="7141715">,</span>&nbsp;<span class="builtintype" id="7141717">true</span><span class="op" id="7141721">}</span><span class="op" id="7141722">,</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141725">{</span><span class="string" id="7141726">&#34;//not.a.user@%66%6f%6f.com/just/a/path/also&#34;</span><span class="op" id="7141771">,</span>&nbsp;<span class="builtintype" id="7141773">true</span><span class="op" id="7141777">}</span><span class="op" id="7141778">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141781">{</span><span class="string" id="7141782">&#34;foo.html&#34;</span><span class="op" id="7141792">,</span>&nbsp;<span class="builtintype" id="7141794">false</span><span class="op" id="7141799">}</span><span class="op" id="7141800">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141803">{</span><span class="string" id="7141804">&#34;../dir/&#34;</span><span class="op" id="7141813">,</span>&nbsp;<span class="builtintype" id="7141815">false</span><span class="op" id="7141820">}</span><span class="op" id="7141821">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7141824">{</span><span class="string" id="7141825">&#34;*&#34;</span><span class="op" id="7141828">,</span>&nbsp;<span class="builtintype" id="7141830">true</span><span class="op" id="7141834">}</span><span class="op" id="7141835">,</span><br>
<span class="lineno"></span><span class="op" id="7141837">}</span><br>
<span class="lineno">365</span><br>
<span class="lineno"></span><span class="keyword" id="7141840">func</span>&nbsp;<span class="ident" id="7141845">TestParseRequestURI</span><span class="op" id="7141864">(</span><span class="ident" id="7141865">t</span>&nbsp;<span class="op" id="7141867">*</span><span class="ident" id="7141868">testing</span><span class="op" id="7141875">.</span><span class="ident" id="7141876">T</span><span class="op" id="7141877">)</span>&nbsp;<span class="op" id="7141879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141882">for</span>&nbsp;<span class="ident" id="7141886">_</span><span class="op" id="7141887">,</span>&nbsp;<span class="ident" id="7141889">test</span>&nbsp;<span class="op" id="7141894">:=</span>&nbsp;<span class="keyword" id="7141897">range</span>&nbsp;<span class="ident" id="7141903">parseRequestURLTests</span>&nbsp;<span class="op" id="7141924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141928">_</span><span class="op" id="7141929">,</span>&nbsp;<span class="ident" id="7141931">err</span>&nbsp;<span class="op" id="7141935">:=</span>&nbsp;<span class="ident" id="7141938">ParseRequestURI</span><span class="op" id="7141953">(</span><span class="ident" id="7141954">test</span><span class="op" id="7141958">.</span><span class="ident" id="7141959">url</span><span class="op" id="7141962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7141966">valid</span>&nbsp;<span class="op" id="7141972">:=</span>&nbsp;<span class="ident" id="7141975">err</span>&nbsp;<span class="op" id="7141979">==</span>&nbsp;<span class="ident" id="7141982">nil</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7141988">if</span>&nbsp;<span class="ident" id="7141991">valid</span>&nbsp;<span class="op" id="7141997">!=</span>&nbsp;<span class="ident" id="7142000">test</span><span class="op" id="7142004">.</span><span class="ident" id="7142005">expectedValid</span>&nbsp;<span class="op" id="7142019">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142024">t</span><span class="op" id="7142025">.</span><span class="ident" id="7142026">Errorf</span><span class="op" id="7142032">(</span><span class="string" id="7142033">&#34;Expected&nbsp;valid=%v&nbsp;for&nbsp;%q;&nbsp;got&nbsp;%v&#34;</span><span class="op" id="7142067">,</span>&nbsp;<span class="ident" id="7142069">test</span><span class="op" id="7142073">.</span><span class="ident" id="7142074">expectedValid</span><span class="op" id="7142087">,</span>&nbsp;<span class="ident" id="7142089">test</span><span class="op" id="7142093">.</span><span class="ident" id="7142094">url</span><span class="op" id="7142097">,</span>&nbsp;<span class="ident" id="7142099">valid</span><span class="op" id="7142104">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142108">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142115">url</span><span class="op" id="7142118">,</span>&nbsp;<span class="ident" id="7142120">err</span>&nbsp;<span class="op" id="7142124">:=</span>&nbsp;<span class="ident" id="7142127">ParseRequestURI</span><span class="op" id="7142142">(</span><span class="ident" id="7142143">pathThatLooksSchemeRelative</span><span class="op" id="7142170">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142173">if</span>&nbsp;<span class="ident" id="7142176">err</span>&nbsp;<span class="op" id="7142180">!=</span>&nbsp;<span class="ident" id="7142183">nil</span>&nbsp;<span class="op" id="7142187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142191">t</span><span class="op" id="7142192">.</span><span class="ident" id="7142193">Fatalf</span><span class="op" id="7142199">(</span><span class="string" id="7142200">&#34;Unexpected&nbsp;error&nbsp;%v&#34;</span><span class="op" id="7142221">,</span>&nbsp;<span class="ident" id="7142223">err</span><span class="op" id="7142226">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142229">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142232">if</span>&nbsp;<span class="ident" id="7142235">url</span><span class="op" id="7142238">.</span><span class="ident" id="7142239">Path</span>&nbsp;<span class="op" id="7142244">!=</span>&nbsp;<span class="ident" id="7142247">pathThatLooksSchemeRelative</span>&nbsp;<span class="op" id="7142275">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142279">t</span><span class="op" id="7142280">.</span><span class="ident" id="7142281">Errorf</span><span class="op" id="7142287">(</span><span class="string" id="7142288">&#34;Expected&nbsp;path&nbsp;%q;&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7142314">,</span>&nbsp;<span class="ident" id="7142316">pathThatLooksSchemeRelative</span><span class="op" id="7142343">,</span>&nbsp;<span class="ident" id="7142345">url</span><span class="op" id="7142348">.</span><span class="ident" id="7142349">Path</span><span class="op" id="7142353">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142356">}</span><br>
<span class="lineno"></span><span class="op" id="7142358">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7142361">func</span>&nbsp;<span class="ident" id="7142366">DoTestString</span><span class="op" id="7142378">(</span><span class="ident" id="7142379">t</span>&nbsp;<span class="op" id="7142381">*</span><span class="ident" id="7142382">testing</span><span class="op" id="7142389">.</span><span class="ident" id="7142390">T</span><span class="op" id="7142391">,</span>&nbsp;<span class="ident" id="7142393">parse</span>&nbsp;<span class="keyword" id="7142399">func</span><span class="op" id="7142403">(</span><span class="builtintype" id="7142404">string</span><span class="op" id="7142410">)</span>&nbsp;<span class="op" id="7142412">(</span><span class="op" id="7142413">*</span><span class="ident" id="7142414">URL</span><span class="op" id="7142417">,</span>&nbsp;<span class="builtintype" id="7142419">error</span><span class="op" id="7142424">)</span><span class="op" id="7142425">,</span>&nbsp;<span class="ident" id="7142427">name</span>&nbsp;<span class="builtintype" id="7142432">string</span><span class="op" id="7142438">,</span>&nbsp;<span class="ident" id="7142440">tests</span>&nbsp;<span class="op" id="7142446">[</span><span class="op" id="7142447">]</span><span class="ident" id="7142448">URLTest</span><span class="op" id="7142455">)</span>&nbsp;<span class="op" id="7142457">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142460">for</span>&nbsp;<span class="ident" id="7142464">_</span><span class="op" id="7142465">,</span>&nbsp;<span class="ident" id="7142467">tt</span>&nbsp;<span class="op" id="7142470">:=</span>&nbsp;<span class="keyword" id="7142473">range</span>&nbsp;<span class="ident" id="7142479">tests</span>&nbsp;<span class="op" id="7142485">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142489">u</span><span class="op" id="7142490">,</span>&nbsp;<span class="ident" id="7142492">err</span>&nbsp;<span class="op" id="7142496">:=</span>&nbsp;<span class="ident" id="7142499">parse</span><span class="op" id="7142504">(</span><span class="ident" id="7142505">tt</span><span class="op" id="7142507">.</span><span class="ident" id="7142508">in</span><span class="op" id="7142510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142514">if</span>&nbsp;<span class="ident" id="7142517">err</span>&nbsp;<span class="op" id="7142521">!=</span>&nbsp;<span class="ident" id="7142524">nil</span>&nbsp;<span class="op" id="7142528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142533">t</span><span class="op" id="7142534">.</span><span class="ident" id="7142535">Errorf</span><span class="op" id="7142541">(</span><span class="string" id="7142542">&#34;%s(%q)&nbsp;returned&nbsp;error&nbsp;%s&#34;</span><span class="op" id="7142568">,</span>&nbsp;<span class="ident" id="7142570">name</span><span class="op" id="7142574">,</span>&nbsp;<span class="ident" id="7142576">tt</span><span class="op" id="7142578">.</span><span class="ident" id="7142579">in</span><span class="op" id="7142581">,</span>&nbsp;<span class="ident" id="7142583">err</span><span class="op" id="7142586">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142591">continue</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142606">expected</span>&nbsp;<span class="op" id="7142615">:=</span>&nbsp;<span class="ident" id="7142618">tt</span><span class="op" id="7142620">.</span><span class="ident" id="7142621">in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142626">if</span>&nbsp;<span class="builtinfunc" id="7142629">len</span><span class="op" id="7142632">(</span><span class="ident" id="7142633">tt</span><span class="op" id="7142635">.</span><span class="ident" id="7142636">roundtrip</span><span class="op" id="7142645">)</span>&nbsp;<span class="op" id="7142647">&gt;</span>&nbsp;<span class="num" id="7142649">0</span>&nbsp;<span class="op" id="7142651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142656">expected</span>&nbsp;<span class="op" id="7142665">=</span>&nbsp;<span class="ident" id="7142667">tt</span><span class="op" id="7142669">.</span><span class="ident" id="7142670">roundtrip</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142682">}</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142686">s</span>&nbsp;<span class="op" id="7142688">:=</span>&nbsp;<span class="ident" id="7142691">u</span><span class="op" id="7142692">.</span><span class="ident" id="7142693">String</span><span class="op" id="7142699">(</span><span class="op" id="7142700">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7142704">if</span>&nbsp;<span class="ident" id="7142707">s</span>&nbsp;<span class="op" id="7142709">!=</span>&nbsp;<span class="ident" id="7142712">expected</span>&nbsp;<span class="op" id="7142721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142726">t</span><span class="op" id="7142727">.</span><span class="ident" id="7142728">Errorf</span><span class="op" id="7142734">(</span><span class="string" id="7142735">&#34;%s(%q).String()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7142772">,</span>&nbsp;<span class="ident" id="7142774">name</span><span class="op" id="7142778">,</span>&nbsp;<span class="ident" id="7142780">tt</span><span class="op" id="7142782">.</span><span class="ident" id="7142783">in</span><span class="op" id="7142785">,</span>&nbsp;<span class="ident" id="7142787">s</span><span class="op" id="7142788">,</span>&nbsp;<span class="ident" id="7142790">expected</span><span class="op" id="7142798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7142805">}</span><br>
<span class="lineno">400</span><span class="op" id="7142807">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7142810">func</span>&nbsp;<span class="ident" id="7142815">TestURLString</span><span class="op" id="7142828">(</span><span class="ident" id="7142829">t</span>&nbsp;<span class="op" id="7142831">*</span><span class="ident" id="7142832">testing</span><span class="op" id="7142839">.</span><span class="ident" id="7142840">T</span><span class="op" id="7142841">)</span>&nbsp;<span class="op" id="7142843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142846">DoTestString</span><span class="op" id="7142858">(</span><span class="ident" id="7142859">t</span><span class="op" id="7142860">,</span>&nbsp;<span class="ident" id="7142862">Parse</span><span class="op" id="7142867">,</span>&nbsp;<span class="string" id="7142869">&#34;Parse&#34;</span><span class="op" id="7142876">,</span>&nbsp;<span class="ident" id="7142878">urltests</span><span class="op" id="7142886">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7142890">//&nbsp;no&nbsp;leading&nbsp;slash&nbsp;on&nbsp;path&nbsp;should&nbsp;prepend</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7142934">//&nbsp;slash&nbsp;on&nbsp;String()&nbsp;call</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7142961">noslash</span>&nbsp;<span class="op" id="7142969">:=</span>&nbsp;<span class="ident" id="7142972">URLTest</span><span class="op" id="7142979">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7142983">&#34;http://www.google.com/search&#34;</span><span class="op" id="7143013">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143017">&amp;</span><span class="ident" id="7143018">URL</span><span class="op" id="7143021">{</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143026">Scheme</span><span class="op" id="7143032">:</span>&nbsp;<span class="string" id="7143034">&#34;http&#34;</span><span class="op" id="7143040">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143045">Host</span><span class="op" id="7143049">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7143053">&#34;www.google.com&#34;</span><span class="op" id="7143069">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143074">Path</span><span class="op" id="7143078">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7143082">&#34;search&#34;</span><span class="op" id="7143090">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143094">}</span><span class="op" id="7143095">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143099">&#34;&#34;</span><span class="op" id="7143101">,</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143104">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143107">s</span>&nbsp;<span class="op" id="7143109">:=</span>&nbsp;<span class="ident" id="7143112">noslash</span><span class="op" id="7143119">.</span><span class="ident" id="7143120">out</span><span class="op" id="7143123">.</span><span class="ident" id="7143124">String</span><span class="op" id="7143130">(</span><span class="op" id="7143131">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7143134">if</span>&nbsp;<span class="ident" id="7143137">s</span>&nbsp;<span class="op" id="7143139">!=</span>&nbsp;<span class="ident" id="7143142">noslash</span><span class="op" id="7143149">.</span><span class="ident" id="7143150">in</span>&nbsp;<span class="op" id="7143153">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143157">t</span><span class="op" id="7143158">.</span><span class="ident" id="7143159">Errorf</span><span class="op" id="7143165">(</span><span class="string" id="7143166">&#34;Expected&nbsp;%s;&nbsp;go&nbsp;%s&#34;</span><span class="op" id="7143186">,</span>&nbsp;<span class="ident" id="7143188">noslash</span><span class="op" id="7143195">.</span><span class="ident" id="7143196">in</span><span class="op" id="7143198">,</span>&nbsp;<span class="ident" id="7143200">s</span><span class="op" id="7143201">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143204">}</span><br>
<span class="lineno">420</span><span class="op" id="7143206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7143209">type</span>&nbsp;<span class="ident" id="7143214">EscapeTest</span>&nbsp;<span class="keyword" id="7143225">struct</span>&nbsp;<span class="op" id="7143232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143235">in</span>&nbsp;&nbsp;<span class="builtintype" id="7143239">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143247">out</span>&nbsp;<span class="builtintype" id="7143251">string</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143259">err</span>&nbsp;<span class="builtintype" id="7143263">error</span><br>
<span class="lineno"></span><span class="op" id="7143269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7143272">var</span>&nbsp;<span class="ident" id="7143276">unescapeTests</span>&nbsp;<span class="op" id="7143290">=</span>&nbsp;<span class="op" id="7143292">[</span><span class="op" id="7143293">]</span><span class="ident" id="7143294">EscapeTest</span><span class="op" id="7143304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143307">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143311">&#34;&#34;</span><span class="op" id="7143313">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143317">&#34;&#34;</span><span class="op" id="7143319">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143323">nil</span><span class="op" id="7143326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143329">}</span><span class="op" id="7143330">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143333">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143337">&#34;abc&#34;</span><span class="op" id="7143342">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143346">&#34;abc&#34;</span><span class="op" id="7143351">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143355">nil</span><span class="op" id="7143358">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143361">}</span><span class="op" id="7143362">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143365">{</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143369">&#34;1%41&#34;</span><span class="op" id="7143375">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143379">&#34;1A&#34;</span><span class="op" id="7143383">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143387">nil</span><span class="op" id="7143390">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143393">}</span><span class="op" id="7143394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143397">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143401">&#34;1%41%42%43&#34;</span><span class="op" id="7143413">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143417">&#34;1ABC&#34;</span><span class="op" id="7143423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143427">nil</span><span class="op" id="7143430">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143433">}</span><span class="op" id="7143434">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143437">{</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143441">&#34;%4a&#34;</span><span class="op" id="7143446">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143450">&#34;J&#34;</span><span class="op" id="7143453">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143457">nil</span><span class="op" id="7143460">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143463">}</span><span class="op" id="7143464">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143467">{</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143471">&#34;%6F&#34;</span><span class="op" id="7143476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143480">&#34;o&#34;</span><span class="op" id="7143483">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143487">nil</span><span class="op" id="7143490">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143493">}</span><span class="op" id="7143494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143497">{</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143501">&#34;%&#34;</span><span class="op" id="7143504">,</span>&nbsp;<span class="comment" id="7143506">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143541">&#34;&#34;</span><span class="op" id="7143543">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143547">EscapeError</span><span class="op" id="7143558">(</span><span class="string" id="7143559">&#34;%&#34;</span><span class="op" id="7143562">)</span><span class="op" id="7143563">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143566">}</span><span class="op" id="7143567">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143570">{</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143574">&#34;%a&#34;</span><span class="op" id="7143578">,</span>&nbsp;<span class="comment" id="7143580">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143615">&#34;&#34;</span><span class="op" id="7143617">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143621">EscapeError</span><span class="op" id="7143632">(</span><span class="string" id="7143633">&#34;%a&#34;</span><span class="op" id="7143637">)</span><span class="op" id="7143638">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143641">}</span><span class="op" id="7143642">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143645">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143649">&#34;%1&#34;</span><span class="op" id="7143653">,</span>&nbsp;<span class="comment" id="7143655">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143690">&#34;&#34;</span><span class="op" id="7143692">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143696">EscapeError</span><span class="op" id="7143707">(</span><span class="string" id="7143708">&#34;%1&#34;</span><span class="op" id="7143712">)</span><span class="op" id="7143713">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143716">}</span><span class="op" id="7143717">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143720">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143724">&#34;123%45%6&#34;</span><span class="op" id="7143734">,</span>&nbsp;<span class="comment" id="7143736">//&nbsp;not&nbsp;enough&nbsp;characters&nbsp;after&nbsp;%</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143771">&#34;&#34;</span><span class="op" id="7143773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143777">EscapeError</span><span class="op" id="7143788">(</span><span class="string" id="7143789">&#34;%6&#34;</span><span class="op" id="7143793">)</span><span class="op" id="7143794">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143797">}</span><span class="op" id="7143798">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143801">{</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143805">&#34;%zzzzz&#34;</span><span class="op" id="7143813">,</span>&nbsp;<span class="comment" id="7143815">//&nbsp;invalid&nbsp;hex&nbsp;digits</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7143839">&#34;&#34;</span><span class="op" id="7143841">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143845">EscapeError</span><span class="op" id="7143856">(</span><span class="string" id="7143857">&#34;%zz&#34;</span><span class="op" id="7143862">)</span><span class="op" id="7143863">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7143866">}</span><span class="op" id="7143867">,</span><br>
<span class="lineno"></span><span class="op" id="7143869">}</span><br>
<span class="lineno">485</span><br>
<span class="lineno"></span><span class="keyword" id="7143872">func</span>&nbsp;<span class="ident" id="7143877">TestUnescape</span><span class="op" id="7143889">(</span><span class="ident" id="7143890">t</span>&nbsp;<span class="op" id="7143892">*</span><span class="ident" id="7143893">testing</span><span class="op" id="7143900">.</span><span class="ident" id="7143901">T</span><span class="op" id="7143902">)</span>&nbsp;<span class="op" id="7143904">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7143907">for</span>&nbsp;<span class="ident" id="7143911">_</span><span class="op" id="7143912">,</span>&nbsp;<span class="ident" id="7143914">tt</span>&nbsp;<span class="op" id="7143917">:=</span>&nbsp;<span class="keyword" id="7143920">range</span>&nbsp;<span class="ident" id="7143926">unescapeTests</span>&nbsp;<span class="op" id="7143940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7143944">actual</span><span class="op" id="7143950">,</span>&nbsp;<span class="ident" id="7143952">err</span>&nbsp;<span class="op" id="7143956">:=</span>&nbsp;<span class="ident" id="7143959">QueryUnescape</span><span class="op" id="7143972">(</span><span class="ident" id="7143973">tt</span><span class="op" id="7143975">.</span><span class="ident" id="7143976">in</span><span class="op" id="7143978">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7143982">if</span>&nbsp;<span class="ident" id="7143985">actual</span>&nbsp;<span class="op" id="7143992">!=</span>&nbsp;<span class="ident" id="7143995">tt</span><span class="op" id="7143997">.</span><span class="ident" id="7143998">out</span>&nbsp;<span class="op" id="7144002">||</span>&nbsp;<span class="op" id="7144005">(</span><span class="ident" id="7144006">err</span>&nbsp;<span class="op" id="7144010">!=</span>&nbsp;<span class="ident" id="7144013">nil</span><span class="op" id="7144016">)</span>&nbsp;<span class="op" id="7144018">!=</span>&nbsp;<span class="op" id="7144021">(</span><span class="ident" id="7144022">tt</span><span class="op" id="7144024">.</span><span class="ident" id="7144025">err</span>&nbsp;<span class="op" id="7144029">!=</span>&nbsp;<span class="ident" id="7144032">nil</span><span class="op" id="7144035">)</span>&nbsp;<span class="op" id="7144037">{</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144042">t</span><span class="op" id="7144043">.</span><span class="ident" id="7144044">Errorf</span><span class="op" id="7144050">(</span><span class="string" id="7144051">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7144092">,</span>&nbsp;<span class="ident" id="7144094">tt</span><span class="op" id="7144096">.</span><span class="ident" id="7144097">in</span><span class="op" id="7144099">,</span>&nbsp;<span class="ident" id="7144101">actual</span><span class="op" id="7144107">,</span>&nbsp;<span class="ident" id="7144109">err</span><span class="op" id="7144112">,</span>&nbsp;<span class="ident" id="7144114">tt</span><span class="op" id="7144116">.</span><span class="ident" id="7144117">out</span><span class="op" id="7144120">,</span>&nbsp;<span class="ident" id="7144122">tt</span><span class="op" id="7144124">.</span><span class="ident" id="7144125">err</span><span class="op" id="7144128">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144132">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144135">}</span><br>
<span class="lineno"></span><span class="op" id="7144137">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">495</span><span class="keyword" id="7144140">var</span>&nbsp;<span class="ident" id="7144144">escapeTests</span>&nbsp;<span class="op" id="7144156">=</span>&nbsp;<span class="op" id="7144158">[</span><span class="op" id="7144159">]</span><span class="ident" id="7144160">EscapeTest</span><span class="op" id="7144170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144177">&#34;&#34;</span><span class="op" id="7144179">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144183">&#34;&#34;</span><span class="op" id="7144185">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144189">nil</span><span class="op" id="7144192">,</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144195">}</span><span class="op" id="7144196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144199">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144203">&#34;abc&#34;</span><span class="op" id="7144208">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144212">&#34;abc&#34;</span><span class="op" id="7144217">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144221">nil</span><span class="op" id="7144224">,</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144227">}</span><span class="op" id="7144228">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144235">&#34;one&nbsp;two&#34;</span><span class="op" id="7144244">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144248">&#34;one+two&#34;</span><span class="op" id="7144257">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144261">nil</span><span class="op" id="7144264">,</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144267">}</span><span class="op" id="7144268">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144275">&#34;10%&#34;</span><span class="op" id="7144280">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144284">&#34;10%25&#34;</span><span class="op" id="7144291">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144295">nil</span><span class="op" id="7144298">,</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144301">}</span><span class="op" id="7144302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144305">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144309">&#34;&nbsp;?&amp;=#+%!&lt;&gt;#\&#34;{}|\\^[]`\t:/@$&#39;()*,;&#34;</span><span class="op" id="7144348">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7144352">&#34;+%3F%26%3D%23%2B%25%21%3C%3E%23%22%7B%7D%7C%5C%5E%5B%5D%60%E2%98%BA%09%3A%2F%40%24%27%28%29%2A%2C%3B&#34;</span><span class="op" id="7144454">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144458">nil</span><span class="op" id="7144461">,</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144464">}</span><span class="op" id="7144465">,</span><br>
<span class="lineno"></span><span class="op" id="7144467">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7144470">func</span>&nbsp;<span class="ident" id="7144475">TestEscape</span><span class="op" id="7144485">(</span><span class="ident" id="7144486">t</span>&nbsp;<span class="op" id="7144488">*</span><span class="ident" id="7144489">testing</span><span class="op" id="7144496">.</span><span class="ident" id="7144497">T</span><span class="op" id="7144498">)</span>&nbsp;<span class="op" id="7144500">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7144503">for</span>&nbsp;<span class="ident" id="7144507">_</span><span class="op" id="7144508">,</span>&nbsp;<span class="ident" id="7144510">tt</span>&nbsp;<span class="op" id="7144513">:=</span>&nbsp;<span class="keyword" id="7144516">range</span>&nbsp;<span class="ident" id="7144522">escapeTests</span>&nbsp;<span class="op" id="7144534">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144538">actual</span>&nbsp;<span class="op" id="7144545">:=</span>&nbsp;<span class="ident" id="7144548">QueryEscape</span><span class="op" id="7144559">(</span><span class="ident" id="7144560">tt</span><span class="op" id="7144562">.</span><span class="ident" id="7144563">in</span><span class="op" id="7144565">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7144569">if</span>&nbsp;<span class="ident" id="7144572">tt</span><span class="op" id="7144574">.</span><span class="ident" id="7144575">out</span>&nbsp;<span class="op" id="7144579">!=</span>&nbsp;<span class="ident" id="7144582">actual</span>&nbsp;<span class="op" id="7144589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144594">t</span><span class="op" id="7144595">.</span><span class="ident" id="7144596">Errorf</span><span class="op" id="7144602">(</span><span class="string" id="7144603">&#34;QueryEscape(%q)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7144634">,</span>&nbsp;<span class="ident" id="7144636">tt</span><span class="op" id="7144638">.</span><span class="ident" id="7144639">in</span><span class="op" id="7144641">,</span>&nbsp;<span class="ident" id="7144643">actual</span><span class="op" id="7144649">,</span>&nbsp;<span class="ident" id="7144651">tt</span><span class="op" id="7144653">.</span><span class="ident" id="7144654">out</span><span class="op" id="7144657">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7144666">//&nbsp;for&nbsp;bonus&nbsp;points,&nbsp;verify&nbsp;that&nbsp;escape:unescape&nbsp;is&nbsp;an&nbsp;identity.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144733">roundtrip</span><span class="op" id="7144742">,</span>&nbsp;<span class="ident" id="7144744">err</span>&nbsp;<span class="op" id="7144748">:=</span>&nbsp;<span class="ident" id="7144751">QueryUnescape</span><span class="op" id="7144764">(</span><span class="ident" id="7144765">actual</span><span class="op" id="7144771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7144775">if</span>&nbsp;<span class="ident" id="7144778">roundtrip</span>&nbsp;<span class="op" id="7144788">!=</span>&nbsp;<span class="ident" id="7144791">tt</span><span class="op" id="7144793">.</span><span class="ident" id="7144794">in</span>&nbsp;<span class="op" id="7144797">||</span>&nbsp;<span class="ident" id="7144800">err</span>&nbsp;<span class="op" id="7144804">!=</span>&nbsp;<span class="ident" id="7144807">nil</span>&nbsp;<span class="op" id="7144811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7144816">t</span><span class="op" id="7144817">.</span><span class="ident" id="7144818">Errorf</span><span class="op" id="7144824">(</span><span class="string" id="7144825">&#34;QueryUnescape(%q)&nbsp;=&nbsp;%q,&nbsp;%s;&nbsp;want&nbsp;%q,&nbsp;%s&#34;</span><span class="op" id="7144866">,</span>&nbsp;<span class="ident" id="7144868">actual</span><span class="op" id="7144874">,</span>&nbsp;<span class="ident" id="7144876">roundtrip</span><span class="op" id="7144885">,</span>&nbsp;<span class="ident" id="7144887">err</span><span class="op" id="7144890">,</span>&nbsp;<span class="ident" id="7144892">tt</span><span class="op" id="7144894">.</span><span class="ident" id="7144895">in</span><span class="op" id="7144897">,</span>&nbsp;<span class="string" id="7144899">&#34;[no&nbsp;error]&#34;</span><span class="op" id="7144911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144915">}</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7144918">}</span><br>
<span class="lineno"></span><span class="op" id="7144920">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7144923">//var&nbsp;userinfoTests&nbsp;=&nbsp;[]UserinfoTest{</span><br>
<span class="lineno"></span><span class="comment" id="7144961">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;user&#34;,&nbsp;&#34;password&#34;,&nbsp;&#34;user:password&#34;},</span><br>
<span class="lineno">540</span><span class="comment" id="7145003">//&nbsp;&nbsp;&nbsp;&nbsp{&#34;foo:bar&#34;,&nbsp;&#34;~!@#$%^&amp;*()_+{}|[]\\-=`:;&#39;\&#34;&lt;&gt;?,./&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="7145056">//&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&#34;foo%3Abar:~!%40%23$%25%5E&amp;*()_+%7B%7D%7C%5B%5D%5C-=%60%3A;&#39;%22%3C%3E?,.%2F&#34;},</span><br>
<span class="lineno"></span><span class="comment" id="7145139">//}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7145144">type</span>&nbsp;<span class="ident" id="7145149">EncodeQueryTest</span>&nbsp;<span class="keyword" id="7145165">struct</span>&nbsp;<span class="op" id="7145172">{</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7145175">m</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="7145184">Values</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7145192">expected</span>&nbsp;<span class="builtintype" id="7145201">string</span><br>
<span class="lineno"></span><span class="op" id="7145208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7145211">var</span>&nbsp;<span class="ident" id="7145215">encodeQueryTests</span>&nbsp;<span class="op" id="7145232">=</span>&nbsp;<span class="op" id="7145234">[</span><span class="op" id="7145235">]</span><span class="ident" id="7145236">EncodeQueryTest</span><span class="op" id="7145251">{</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145254">{</span><span class="ident" id="7145255">nil</span><span class="op" id="7145258">,</span>&nbsp;<span class="string" id="7145260">&#34;&#34;</span><span class="op" id="7145262">}</span><span class="op" id="7145263">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145266">{</span><span class="ident" id="7145267">Values</span><span class="op" id="7145273">{</span><span class="string" id="7145274">&#34;q&#34;</span><span class="op" id="7145277">:</span>&nbsp;<span class="op" id="7145279">{</span><span class="string" id="7145280">&#34;puppies&#34;</span><span class="op" id="7145289">}</span><span class="op" id="7145290">,</span>&nbsp;<span class="string" id="7145292">&#34;oe&#34;</span><span class="op" id="7145296">:</span>&nbsp;<span class="op" id="7145298">{</span><span class="string" id="7145299">&#34;utf8&#34;</span><span class="op" id="7145305">}</span><span class="op" id="7145306">}</span><span class="op" id="7145307">,</span>&nbsp;<span class="string" id="7145309">&#34;oe=utf8&amp;q=puppies&#34;</span><span class="op" id="7145328">}</span><span class="op" id="7145329">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145332">{</span><span class="ident" id="7145333">Values</span><span class="op" id="7145339">{</span><span class="string" id="7145340">&#34;q&#34;</span><span class="op" id="7145343">:</span>&nbsp;<span class="op" id="7145345">{</span><span class="string" id="7145346">&#34;dogs&#34;</span><span class="op" id="7145352">,</span>&nbsp;<span class="string" id="7145354">&#34;&amp;&#34;</span><span class="op" id="7145357">,</span>&nbsp;<span class="string" id="7145359">&#34;7&#34;</span><span class="op" id="7145362">}</span><span class="op" id="7145363">}</span><span class="op" id="7145364">,</span>&nbsp;<span class="string" id="7145366">&#34;q=dogs&amp;q=%26&amp;q=7&#34;</span><span class="op" id="7145384">}</span><span class="op" id="7145385">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145388">{</span><span class="ident" id="7145389">Values</span><span class="op" id="7145395">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7145399">&#34;a&#34;</span><span class="op" id="7145402">:</span>&nbsp;<span class="op" id="7145404">{</span><span class="string" id="7145405">&#34;a1&#34;</span><span class="op" id="7145409">,</span>&nbsp;<span class="string" id="7145411">&#34;a2&#34;</span><span class="op" id="7145415">,</span>&nbsp;<span class="string" id="7145417">&#34;a3&#34;</span><span class="op" id="7145421">}</span><span class="op" id="7145422">,</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7145426">&#34;b&#34;</span><span class="op" id="7145429">:</span>&nbsp;<span class="op" id="7145431">{</span><span class="string" id="7145432">&#34;b1&#34;</span><span class="op" id="7145436">,</span>&nbsp;<span class="string" id="7145438">&#34;b2&#34;</span><span class="op" id="7145442">,</span>&nbsp;<span class="string" id="7145444">&#34;b3&#34;</span><span class="op" id="7145448">}</span><span class="op" id="7145449">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7145453">&#34;c&#34;</span><span class="op" id="7145456">:</span>&nbsp;<span class="op" id="7145458">{</span><span class="string" id="7145459">&#34;c1&#34;</span><span class="op" id="7145463">,</span>&nbsp;<span class="string" id="7145465">&#34;c2&#34;</span><span class="op" id="7145469">,</span>&nbsp;<span class="string" id="7145471">&#34;c3&#34;</span><span class="op" id="7145475">}</span><span class="op" id="7145476">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145479">}</span><span class="op" id="7145480">,</span>&nbsp;<span class="string" id="7145482">&#34;a=a1&amp;a=a2&amp;a=a3&amp;b=b1&amp;b=b2&amp;b=b3&amp;c=c1&amp;c=c2&amp;c=c3&#34;</span><span class="op" id="7145528">}</span><span class="op" id="7145529">,</span><br>
<span class="lineno"></span><span class="op" id="7145531">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">560</span><span class="keyword" id="7145534">func</span>&nbsp;<span class="ident" id="7145539">TestEncodeQuery</span><span class="op" id="7145554">(</span><span class="ident" id="7145555">t</span>&nbsp;<span class="op" id="7145557">*</span><span class="ident" id="7145558">testing</span><span class="op" id="7145565">.</span><span class="ident" id="7145566">T</span><span class="op" id="7145567">)</span>&nbsp;<span class="op" id="7145569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7145572">for</span>&nbsp;<span class="ident" id="7145576">_</span><span class="op" id="7145577">,</span>&nbsp;<span class="ident" id="7145579">tt</span>&nbsp;<span class="op" id="7145582">:=</span>&nbsp;<span class="keyword" id="7145585">range</span>&nbsp;<span class="ident" id="7145591">encodeQueryTests</span>&nbsp;<span class="op" id="7145608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7145612">if</span>&nbsp;<span class="ident" id="7145615">q</span>&nbsp;<span class="op" id="7145617">:=</span>&nbsp;<span class="ident" id="7145620">tt</span><span class="op" id="7145622">.</span><span class="ident" id="7145623">m</span><span class="op" id="7145624">.</span><span class="ident" id="7145625">Encode</span><span class="op" id="7145631">(</span><span class="op" id="7145632">)</span><span class="op" id="7145633">;</span>&nbsp;<span class="ident" id="7145635">q</span>&nbsp;<span class="op" id="7145637">!=</span>&nbsp;<span class="ident" id="7145640">tt</span><span class="op" id="7145642">.</span><span class="ident" id="7145643">expected</span>&nbsp;<span class="op" id="7145652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7145657">t</span><span class="op" id="7145658">.</span><span class="ident" id="7145659">Errorf</span><span class="op" id="7145665">(</span><span class="string" id="7145666">`EncodeQuery(%+v)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q`</span><span class="op" id="7145698">,</span>&nbsp;<span class="ident" id="7145700">tt</span><span class="op" id="7145702">.</span><span class="ident" id="7145703">m</span><span class="op" id="7145704">,</span>&nbsp;<span class="ident" id="7145706">q</span><span class="op" id="7145707">,</span>&nbsp;<span class="ident" id="7145709">tt</span><span class="op" id="7145711">.</span><span class="ident" id="7145712">expected</span><span class="op" id="7145720">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145724">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145727">}</span><br>
<span class="lineno"></span><span class="op" id="7145729">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7145732">var</span>&nbsp;<span class="ident" id="7145736">resolvePathTests</span>&nbsp;<span class="op" id="7145753">=</span>&nbsp;<span class="op" id="7145755">[</span><span class="op" id="7145756">]</span><span class="keyword" id="7145757">struct</span>&nbsp;<span class="op" id="7145764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7145767">base</span><span class="op" id="7145771">,</span>&nbsp;<span class="ident" id="7145773">ref</span><span class="op" id="7145776">,</span>&nbsp;<span class="ident" id="7145778">expected</span>&nbsp;<span class="builtintype" id="7145787">string</span><br>
<span class="lineno">570</span><span class="op" id="7145794">}</span><span class="op" id="7145795">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145798">{</span><span class="string" id="7145799">&#34;a/b&#34;</span><span class="op" id="7145804">,</span>&nbsp;<span class="string" id="7145806">&#34;.&#34;</span><span class="op" id="7145809">,</span>&nbsp;<span class="string" id="7145811">&#34;/a/&#34;</span><span class="op" id="7145816">}</span><span class="op" id="7145817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145820">{</span><span class="string" id="7145821">&#34;a/b&#34;</span><span class="op" id="7145826">,</span>&nbsp;<span class="string" id="7145828">&#34;c&#34;</span><span class="op" id="7145831">,</span>&nbsp;<span class="string" id="7145833">&#34;/a/c&#34;</span><span class="op" id="7145839">}</span><span class="op" id="7145840">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145843">{</span><span class="string" id="7145844">&#34;a/b&#34;</span><span class="op" id="7145849">,</span>&nbsp;<span class="string" id="7145851">&#34;..&#34;</span><span class="op" id="7145855">,</span>&nbsp;<span class="string" id="7145857">&#34;/&#34;</span><span class="op" id="7145860">}</span><span class="op" id="7145861">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145864">{</span><span class="string" id="7145865">&#34;a/&#34;</span><span class="op" id="7145869">,</span>&nbsp;<span class="string" id="7145871">&#34;..&#34;</span><span class="op" id="7145875">,</span>&nbsp;<span class="string" id="7145877">&#34;/&#34;</span><span class="op" id="7145880">}</span><span class="op" id="7145881">,</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145884">{</span><span class="string" id="7145885">&#34;a/&#34;</span><span class="op" id="7145889">,</span>&nbsp;<span class="string" id="7145891">&#34;../..&#34;</span><span class="op" id="7145898">,</span>&nbsp;<span class="string" id="7145900">&#34;/&#34;</span><span class="op" id="7145903">}</span><span class="op" id="7145904">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145907">{</span><span class="string" id="7145908">&#34;a/b/c&#34;</span><span class="op" id="7145915">,</span>&nbsp;<span class="string" id="7145917">&#34;..&#34;</span><span class="op" id="7145921">,</span>&nbsp;<span class="string" id="7145923">&#34;/a/&#34;</span><span class="op" id="7145928">}</span><span class="op" id="7145929">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145932">{</span><span class="string" id="7145933">&#34;a/b/c&#34;</span><span class="op" id="7145940">,</span>&nbsp;<span class="string" id="7145942">&#34;../d&#34;</span><span class="op" id="7145948">,</span>&nbsp;<span class="string" id="7145950">&#34;/a/d&#34;</span><span class="op" id="7145956">}</span><span class="op" id="7145957">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145960">{</span><span class="string" id="7145961">&#34;a/b/c&#34;</span><span class="op" id="7145968">,</span>&nbsp;<span class="string" id="7145970">&#34;.././d&#34;</span><span class="op" id="7145978">,</span>&nbsp;<span class="string" id="7145980">&#34;/a/d&#34;</span><span class="op" id="7145986">}</span><span class="op" id="7145987">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7145990">{</span><span class="string" id="7145991">&#34;a/b&#34;</span><span class="op" id="7145996">,</span>&nbsp;<span class="string" id="7145998">&#34;./..&#34;</span><span class="op" id="7146004">,</span>&nbsp;<span class="string" id="7146006">&#34;/&#34;</span><span class="op" id="7146009">}</span><span class="op" id="7146010">,</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146013">{</span><span class="string" id="7146014">&#34;a/./b&#34;</span><span class="op" id="7146021">,</span>&nbsp;<span class="string" id="7146023">&#34;.&#34;</span><span class="op" id="7146026">,</span>&nbsp;<span class="string" id="7146028">&#34;/a/&#34;</span><span class="op" id="7146033">}</span><span class="op" id="7146034">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146037">{</span><span class="string" id="7146038">&#34;a/../&#34;</span><span class="op" id="7146045">,</span>&nbsp;<span class="string" id="7146047">&#34;.&#34;</span><span class="op" id="7146050">,</span>&nbsp;<span class="string" id="7146052">&#34;/&#34;</span><span class="op" id="7146055">}</span><span class="op" id="7146056">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146059">{</span><span class="string" id="7146060">&#34;a/.././b&#34;</span><span class="op" id="7146070">,</span>&nbsp;<span class="string" id="7146072">&#34;c&#34;</span><span class="op" id="7146075">,</span>&nbsp;<span class="string" id="7146077">&#34;/c&#34;</span><span class="op" id="7146081">}</span><span class="op" id="7146082">,</span><br>
<span class="lineno"></span><span class="op" id="7146084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">585</span><span class="keyword" id="7146087">func</span>&nbsp;<span class="ident" id="7146092">TestResolvePath</span><span class="op" id="7146107">(</span><span class="ident" id="7146108">t</span>&nbsp;<span class="op" id="7146110">*</span><span class="ident" id="7146111">testing</span><span class="op" id="7146118">.</span><span class="ident" id="7146119">T</span><span class="op" id="7146120">)</span>&nbsp;<span class="op" id="7146122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7146125">for</span>&nbsp;<span class="ident" id="7146129">_</span><span class="op" id="7146130">,</span>&nbsp;<span class="ident" id="7146132">test</span>&nbsp;<span class="op" id="7146137">:=</span>&nbsp;<span class="keyword" id="7146140">range</span>&nbsp;<span class="ident" id="7146146">resolvePathTests</span>&nbsp;<span class="op" id="7146163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7146167">got</span>&nbsp;<span class="op" id="7146171">:=</span>&nbsp;<span class="ident" id="7146174">resolvePath</span><span class="op" id="7146185">(</span><span class="ident" id="7146186">test</span><span class="op" id="7146190">.</span><span class="ident" id="7146191">base</span><span class="op" id="7146195">,</span>&nbsp;<span class="ident" id="7146197">test</span><span class="op" id="7146201">.</span><span class="ident" id="7146202">ref</span><span class="op" id="7146205">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7146209">if</span>&nbsp;<span class="ident" id="7146212">got</span>&nbsp;<span class="op" id="7146216">!=</span>&nbsp;<span class="ident" id="7146219">test</span><span class="op" id="7146223">.</span><span class="ident" id="7146224">expected</span>&nbsp;<span class="op" id="7146233">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7146238">t</span><span class="op" id="7146239">.</span><span class="ident" id="7146240">Errorf</span><span class="op" id="7146246">(</span><span class="string" id="7146247">&#34;For&nbsp;%q&nbsp;+&nbsp;%q&nbsp;got&nbsp;%q;&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="7146280">,</span>&nbsp;<span class="ident" id="7146282">test</span><span class="op" id="7146286">.</span><span class="ident" id="7146287">base</span><span class="op" id="7146291">,</span>&nbsp;<span class="ident" id="7146293">test</span><span class="op" id="7146297">.</span><span class="ident" id="7146298">ref</span><span class="op" id="7146301">,</span>&nbsp;<span class="ident" id="7146303">got</span><span class="op" id="7146306">,</span>&nbsp;<span class="ident" id="7146308">test</span><span class="op" id="7146312">.</span><span class="ident" id="7146313">expected</span><span class="op" id="7146321">)</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146325">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146328">}</span><br>
<span class="lineno"></span><span class="op" id="7146330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7146333">var</span>&nbsp;<span class="ident" id="7146337">resolveReferenceTests</span>&nbsp;<span class="op" id="7146359">=</span>&nbsp;<span class="op" id="7146361">[</span><span class="op" id="7146362">]</span><span class="keyword" id="7146363">struct</span>&nbsp;<span class="op" id="7146370">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7146373">base</span><span class="op" id="7146377">,</span>&nbsp;<span class="ident" id="7146379">rel</span><span class="op" id="7146382">,</span>&nbsp;<span class="ident" id="7146384">expected</span>&nbsp;<span class="builtintype" id="7146393">string</span><br>
<span class="lineno"></span><span class="op" id="7146400">}</span><span class="op" id="7146401">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7146404">//&nbsp;Absolute&nbsp;URL&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146432">{</span><span class="string" id="7146433">&#34;http://foo.com?a=b&#34;</span><span class="op" id="7146453">,</span>&nbsp;<span class="string" id="7146455">&#34;https://bar.com/&#34;</span><span class="op" id="7146473">,</span>&nbsp;<span class="string" id="7146475">&#34;https://bar.com/&#34;</span><span class="op" id="7146493">}</span><span class="op" id="7146494">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146497">{</span><span class="string" id="7146498">&#34;http://foo.com/&#34;</span><span class="op" id="7146515">,</span>&nbsp;<span class="string" id="7146517">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7146539">,</span>&nbsp;<span class="string" id="7146541">&#34;https://bar.com/?a=b&#34;</span><span class="op" id="7146563">}</span><span class="op" id="7146564">,</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146567">{</span><span class="string" id="7146568">&#34;http://foo.com/bar&#34;</span><span class="op" id="7146588">,</span>&nbsp;<span class="string" id="7146590">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7146614">,</span>&nbsp;<span class="string" id="7146616">&#34;mailto:foo@example.com&#34;</span><span class="op" id="7146640">}</span><span class="op" id="7146641">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7146645">//&nbsp;Path-absolute&nbsp;references</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146674">{</span><span class="string" id="7146675">&#34;http://foo.com/bar&#34;</span><span class="op" id="7146695">,</span>&nbsp;<span class="string" id="7146697">&#34;/baz&#34;</span><span class="op" id="7146703">,</span>&nbsp;<span class="string" id="7146705">&#34;http://foo.com/baz&#34;</span><span class="op" id="7146725">}</span><span class="op" id="7146726">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146729">{</span><span class="string" id="7146730">&#34;http://foo.com/bar?a=b#f&#34;</span><span class="op" id="7146756">,</span>&nbsp;<span class="string" id="7146758">&#34;/baz&#34;</span><span class="op" id="7146764">,</span>&nbsp;<span class="string" id="7146766">&#34;http://foo.com/baz&#34;</span><span class="op" id="7146786">}</span><span class="op" id="7146787">,</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146790">{</span><span class="string" id="7146791">&#34;http://foo.com/bar?a=b&#34;</span><span class="op" id="7146815">,</span>&nbsp;<span class="string" id="7146817">&#34;/baz?c=d&#34;</span><span class="op" id="7146827">,</span>&nbsp;<span class="string" id="7146829">&#34;http://foo.com/baz?c=d&#34;</span><span class="op" id="7146853">}</span><span class="op" id="7146854">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7146858">//&nbsp;Scheme-relative</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7146878">{</span><span class="string" id="7146879">&#34;https://foo.com/bar?a=b&#34;</span><span class="op" id="7146904">,</span>&nbsp;<span class="string" id="7146906">&#34;//bar.com/quux&#34;</span><span class="op" id="7146922">,</span>&nbsp;<span class="string" id="7146924">&#34;https://bar.com/quux&#34;</span><span class="op" id="7146946">}</span><span class="op" id="7146947">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7146951">//&nbsp;Path-relative&nbsp;references:</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7146982">//&nbsp;...&nbsp;current&nbsp;directory</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147008">{</span><span class="string" id="7147009">&#34;http://foo.com&#34;</span><span class="op" id="7147025">,</span>&nbsp;<span class="string" id="7147027">&#34;.&#34;</span><span class="op" id="7147030">,</span>&nbsp;<span class="string" id="7147032">&#34;http://foo.com/&#34;</span><span class="op" id="7147049">}</span><span class="op" id="7147050">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147053">{</span><span class="string" id="7147054">&#34;http://foo.com/bar&#34;</span><span class="op" id="7147074">,</span>&nbsp;<span class="string" id="7147076">&#34;.&#34;</span><span class="op" id="7147079">,</span>&nbsp;<span class="string" id="7147081">&#34;http://foo.com/&#34;</span><span class="op" id="7147098">}</span><span class="op" id="7147099">,</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147102">{</span><span class="string" id="7147103">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7147124">,</span>&nbsp;<span class="string" id="7147126">&#34;.&#34;</span><span class="op" id="7147129">,</span>&nbsp;<span class="string" id="7147131">&#34;http://foo.com/bar/&#34;</span><span class="op" id="7147152">}</span><span class="op" id="7147153">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7147157">//&nbsp;...&nbsp;going&nbsp;down</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147176">{</span><span class="string" id="7147177">&#34;http://foo.com&#34;</span><span class="op" id="7147193">,</span>&nbsp;<span class="string" id="7147195">&#34;bar&#34;</span><span class="op" id="7147200">,</span>&nbsp;<span class="string" id="7147202">&#34;http://foo.com/bar&#34;</span><span class="op" id="7147222">}</span><span class="op" id="7147223">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147226">{</span><span class="string" id="7147227">&#34;http://foo.com/&#34;</span><span class="op" id="7147244">,</span>&nbsp;<span class="string" id="7147246">&#34;bar&#34;</span><span class="op" id="7147251">,</span>&nbsp;<span class="string" id="7147253">&#34;http://foo.com/bar&#34;</span><span class="op" id="7147273">}</span><span class="op" id="7147274">,</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147277">{</span><span class="string" id="7147278">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147302">,</span>&nbsp;<span class="string" id="7147304">&#34;quux&#34;</span><span class="op" id="7147310">,</span>&nbsp;<span class="string" id="7147312">&#34;http://foo.com/bar/quux&#34;</span><span class="op" id="7147337">}</span><span class="op" id="7147338">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7147342">//&nbsp;...&nbsp;going&nbsp;up</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147359">{</span><span class="string" id="7147360">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147384">,</span>&nbsp;<span class="string" id="7147386">&#34;../quux&#34;</span><span class="op" id="7147395">,</span>&nbsp;<span class="string" id="7147397">&#34;http://foo.com/quux&#34;</span><span class="op" id="7147418">}</span><span class="op" id="7147419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147422">{</span><span class="string" id="7147423">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147447">,</span>&nbsp;<span class="string" id="7147449">&#34;../../../../../quux&#34;</span><span class="op" id="7147470">,</span>&nbsp;<span class="string" id="7147472">&#34;http://foo.com/quux&#34;</span><span class="op" id="7147493">}</span><span class="op" id="7147494">,</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147497">{</span><span class="string" id="7147498">&#34;http://foo.com/bar&#34;</span><span class="op" id="7147518">,</span>&nbsp;<span class="string" id="7147520">&#34;..&#34;</span><span class="op" id="7147524">,</span>&nbsp;<span class="string" id="7147526">&#34;http://foo.com/&#34;</span><span class="op" id="7147543">}</span><span class="op" id="7147544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147547">{</span><span class="string" id="7147548">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147572">,</span>&nbsp;<span class="string" id="7147574">&#34;./..&#34;</span><span class="op" id="7147580">,</span>&nbsp;<span class="string" id="7147582">&#34;http://foo.com/&#34;</span><span class="op" id="7147599">}</span><span class="op" id="7147600">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7147603">//&nbsp;&#34;..&#34;&nbsp;in&nbsp;the&nbsp;middle&nbsp;(issue&nbsp;3560)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147639">{</span><span class="string" id="7147640">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147664">,</span>&nbsp;<span class="string" id="7147666">&#34;quux/dotdot/../tail&#34;</span><span class="op" id="7147687">,</span>&nbsp;<span class="string" id="7147689">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7147719">}</span><span class="op" id="7147720">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147723">{</span><span class="string" id="7147724">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147748">,</span>&nbsp;<span class="string" id="7147750">&#34;quux/./dotdot/../tail&#34;</span><span class="op" id="7147773">,</span>&nbsp;<span class="string" id="7147775">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7147805">}</span><span class="op" id="7147806">,</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147809">{</span><span class="string" id="7147810">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147834">,</span>&nbsp;<span class="string" id="7147836">&#34;quux/./dotdot/.././tail&#34;</span><span class="op" id="7147861">,</span>&nbsp;<span class="string" id="7147863">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7147893">}</span><span class="op" id="7147894">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147897">{</span><span class="string" id="7147898">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7147922">,</span>&nbsp;<span class="string" id="7147924">&#34;quux/./dotdot/./../tail&#34;</span><span class="op" id="7147949">,</span>&nbsp;<span class="string" id="7147951">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7147981">}</span><span class="op" id="7147982">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7147985">{</span><span class="string" id="7147986">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7148010">,</span>&nbsp;<span class="string" id="7148012">&#34;quux/./dotdot/dotdot/././../../tail&#34;</span><span class="op" id="7148049">,</span>&nbsp;<span class="string" id="7148051">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7148081">}</span><span class="op" id="7148082">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148085">{</span><span class="string" id="7148086">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7148110">,</span>&nbsp;<span class="string" id="7148112">&#34;quux/./dotdot/dotdot/./.././../tail&#34;</span><span class="op" id="7148149">,</span>&nbsp;<span class="string" id="7148151">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7148181">}</span><span class="op" id="7148182">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148185">{</span><span class="string" id="7148186">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7148210">,</span>&nbsp;<span class="string" id="7148212">&#34;quux/./dotdot/dotdot/dotdot/./../../.././././tail&#34;</span><span class="op" id="7148263">,</span>&nbsp;<span class="string" id="7148265">&#34;http://foo.com/bar/quux/tail&#34;</span><span class="op" id="7148295">}</span><span class="op" id="7148296">,</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148299">{</span><span class="string" id="7148300">&#34;http://foo.com/bar/baz&#34;</span><span class="op" id="7148324">,</span>&nbsp;<span class="string" id="7148326">&#34;quux/./dotdot/../dotdot/../dot/./tail/..&#34;</span><span class="op" id="7148368">,</span>&nbsp;<span class="string" id="7148370">&#34;http://foo.com/bar/quux/dot/&#34;</span><span class="op" id="7148400">}</span><span class="op" id="7148401">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148405">//&nbsp;Remove&nbsp;any&nbsp;dot-segments&nbsp;prior&nbsp;to&nbsp;forming&nbsp;the&nbsp;target&nbsp;URI.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148466">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.2.4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148519">{</span><span class="string" id="7148520">&#34;http://foo.com/dot/./dotdot/../foo/bar&#34;</span><span class="op" id="7148560">,</span>&nbsp;<span class="string" id="7148562">&#34;../baz&#34;</span><span class="op" id="7148570">,</span>&nbsp;<span class="string" id="7148572">&#34;http://foo.com/dot/baz&#34;</span><span class="op" id="7148596">}</span><span class="op" id="7148597">,</span><br>
<span class="lineno">640</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148601">//&nbsp;Triple&nbsp;dot&nbsp;isn&#39;t&nbsp;special</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148630">{</span><span class="string" id="7148631">&#34;http://foo.com/bar&#34;</span><span class="op" id="7148651">,</span>&nbsp;<span class="string" id="7148653">&#34;...&#34;</span><span class="op" id="7148658">,</span>&nbsp;<span class="string" id="7148660">&#34;http://foo.com/...&#34;</span><span class="op" id="7148680">}</span><span class="op" id="7148681">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148685">//&nbsp;Fragment</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148698">{</span><span class="string" id="7148699">&#34;http://foo.com/bar&#34;</span><span class="op" id="7148719">,</span>&nbsp;<span class="string" id="7148721">&#34;.#frag&#34;</span><span class="op" id="7148729">,</span>&nbsp;<span class="string" id="7148731">&#34;http://foo.com/#frag&#34;</span><span class="op" id="7148753">}</span><span class="op" id="7148754">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148758">//&nbsp;RFC&nbsp;3986:&nbsp;Normal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7148788">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148841">{</span><span class="string" id="7148842">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7148862">,</span>&nbsp;<span class="string" id="7148864">&#34;g:h&#34;</span><span class="op" id="7148869">,</span>&nbsp;<span class="string" id="7148871">&#34;g:h&#34;</span><span class="op" id="7148876">}</span><span class="op" id="7148877">,</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148880">{</span><span class="string" id="7148881">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7148901">,</span>&nbsp;<span class="string" id="7148903">&#34;g&#34;</span><span class="op" id="7148906">,</span>&nbsp;<span class="string" id="7148908">&#34;http://a/b/c/g&#34;</span><span class="op" id="7148924">}</span><span class="op" id="7148925">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148928">{</span><span class="string" id="7148929">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7148949">,</span>&nbsp;<span class="string" id="7148951">&#34;./g&#34;</span><span class="op" id="7148956">,</span>&nbsp;<span class="string" id="7148958">&#34;http://a/b/c/g&#34;</span><span class="op" id="7148974">}</span><span class="op" id="7148975">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7148978">{</span><span class="string" id="7148979">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7148999">,</span>&nbsp;<span class="string" id="7149001">&#34;g/&#34;</span><span class="op" id="7149005">,</span>&nbsp;<span class="string" id="7149007">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7149024">}</span><span class="op" id="7149025">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149028">{</span><span class="string" id="7149029">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149049">,</span>&nbsp;<span class="string" id="7149051">&#34;/g&#34;</span><span class="op" id="7149055">,</span>&nbsp;<span class="string" id="7149057">&#34;http://a/g&#34;</span><span class="op" id="7149069">}</span><span class="op" id="7149070">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149073">{</span><span class="string" id="7149074">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149094">,</span>&nbsp;<span class="string" id="7149096">&#34;//g&#34;</span><span class="op" id="7149101">,</span>&nbsp;<span class="string" id="7149103">&#34;http://g&#34;</span><span class="op" id="7149113">}</span><span class="op" id="7149114">,</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149117">{</span><span class="string" id="7149118">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149138">,</span>&nbsp;<span class="string" id="7149140">&#34;?y&#34;</span><span class="op" id="7149144">,</span>&nbsp;<span class="string" id="7149146">&#34;http://a/b/c/d;p?y&#34;</span><span class="op" id="7149166">}</span><span class="op" id="7149167">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149170">{</span><span class="string" id="7149171">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149191">,</span>&nbsp;<span class="string" id="7149193">&#34;g?y&#34;</span><span class="op" id="7149198">,</span>&nbsp;<span class="string" id="7149200">&#34;http://a/b/c/g?y&#34;</span><span class="op" id="7149218">}</span><span class="op" id="7149219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149222">{</span><span class="string" id="7149223">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149243">,</span>&nbsp;<span class="string" id="7149245">&#34;#s&#34;</span><span class="op" id="7149249">,</span>&nbsp;<span class="string" id="7149251">&#34;http://a/b/c/d;p?q#s&#34;</span><span class="op" id="7149273">}</span><span class="op" id="7149274">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149277">{</span><span class="string" id="7149278">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149298">,</span>&nbsp;<span class="string" id="7149300">&#34;g#s&#34;</span><span class="op" id="7149305">,</span>&nbsp;<span class="string" id="7149307">&#34;http://a/b/c/g#s&#34;</span><span class="op" id="7149325">}</span><span class="op" id="7149326">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149329">{</span><span class="string" id="7149330">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149350">,</span>&nbsp;<span class="string" id="7149352">&#34;g?y#s&#34;</span><span class="op" id="7149359">,</span>&nbsp;<span class="string" id="7149361">&#34;http://a/b/c/g?y#s&#34;</span><span class="op" id="7149381">}</span><span class="op" id="7149382">,</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149385">{</span><span class="string" id="7149386">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149406">,</span>&nbsp;<span class="string" id="7149408">&#34;;x&#34;</span><span class="op" id="7149412">,</span>&nbsp;<span class="string" id="7149414">&#34;http://a/b/c/;x&#34;</span><span class="op" id="7149431">}</span><span class="op" id="7149432">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149435">{</span><span class="string" id="7149436">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149456">,</span>&nbsp;<span class="string" id="7149458">&#34;g;x&#34;</span><span class="op" id="7149463">,</span>&nbsp;<span class="string" id="7149465">&#34;http://a/b/c/g;x&#34;</span><span class="op" id="7149483">}</span><span class="op" id="7149484">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149487">{</span><span class="string" id="7149488">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149508">,</span>&nbsp;<span class="string" id="7149510">&#34;g;x?y#s&#34;</span><span class="op" id="7149519">,</span>&nbsp;<span class="string" id="7149521">&#34;http://a/b/c/g;x?y#s&#34;</span><span class="op" id="7149543">}</span><span class="op" id="7149544">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149547">{</span><span class="string" id="7149548">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149568">,</span>&nbsp;<span class="string" id="7149570">&#34;&#34;</span><span class="op" id="7149572">,</span>&nbsp;<span class="string" id="7149574">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149594">}</span><span class="op" id="7149595">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149598">{</span><span class="string" id="7149599">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149619">,</span>&nbsp;<span class="string" id="7149621">&#34;.&#34;</span><span class="op" id="7149624">,</span>&nbsp;<span class="string" id="7149626">&#34;http://a/b/c/&#34;</span><span class="op" id="7149641">}</span><span class="op" id="7149642">,</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149645">{</span><span class="string" id="7149646">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149666">,</span>&nbsp;<span class="string" id="7149668">&#34;./&#34;</span><span class="op" id="7149672">,</span>&nbsp;<span class="string" id="7149674">&#34;http://a/b/c/&#34;</span><span class="op" id="7149689">}</span><span class="op" id="7149690">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149693">{</span><span class="string" id="7149694">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149714">,</span>&nbsp;<span class="string" id="7149716">&#34;..&#34;</span><span class="op" id="7149720">,</span>&nbsp;<span class="string" id="7149722">&#34;http://a/b/&#34;</span><span class="op" id="7149735">}</span><span class="op" id="7149736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149739">{</span><span class="string" id="7149740">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149760">,</span>&nbsp;<span class="string" id="7149762">&#34;../&#34;</span><span class="op" id="7149767">,</span>&nbsp;<span class="string" id="7149769">&#34;http://a/b/&#34;</span><span class="op" id="7149782">}</span><span class="op" id="7149783">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149786">{</span><span class="string" id="7149787">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149807">,</span>&nbsp;<span class="string" id="7149809">&#34;../g&#34;</span><span class="op" id="7149815">,</span>&nbsp;<span class="string" id="7149817">&#34;http://a/b/g&#34;</span><span class="op" id="7149831">}</span><span class="op" id="7149832">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149835">{</span><span class="string" id="7149836">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149856">,</span>&nbsp;<span class="string" id="7149858">&#34;../..&#34;</span><span class="op" id="7149865">,</span>&nbsp;<span class="string" id="7149867">&#34;http://a/&#34;</span><span class="op" id="7149878">}</span><span class="op" id="7149879">,</span><br>
<span class="lineno">670</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149882">{</span><span class="string" id="7149883">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149903">,</span>&nbsp;<span class="string" id="7149905">&#34;../../&#34;</span><span class="op" id="7149913">,</span>&nbsp;<span class="string" id="7149915">&#34;http://a/&#34;</span><span class="op" id="7149926">}</span><span class="op" id="7149927">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7149930">{</span><span class="string" id="7149931">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7149951">,</span>&nbsp;<span class="string" id="7149953">&#34;../../g&#34;</span><span class="op" id="7149962">,</span>&nbsp;<span class="string" id="7149964">&#34;http://a/g&#34;</span><span class="op" id="7149976">}</span><span class="op" id="7149977">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7149981">//&nbsp;RFC&nbsp;3986:&nbsp;Abnormal&nbsp;Examples</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7150013">//&nbsp;http://tools.ietf.org/html/rfc3986#section-5.4.2</span><br>
<span class="lineno">675</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150066">{</span><span class="string" id="7150067">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150087">,</span>&nbsp;<span class="string" id="7150089">&#34;../../../g&#34;</span><span class="op" id="7150101">,</span>&nbsp;<span class="string" id="7150103">&#34;http://a/g&#34;</span><span class="op" id="7150115">}</span><span class="op" id="7150116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150119">{</span><span class="string" id="7150120">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150140">,</span>&nbsp;<span class="string" id="7150142">&#34;../../../../g&#34;</span><span class="op" id="7150157">,</span>&nbsp;<span class="string" id="7150159">&#34;http://a/g&#34;</span><span class="op" id="7150171">}</span><span class="op" id="7150172">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150175">{</span><span class="string" id="7150176">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150196">,</span>&nbsp;<span class="string" id="7150198">&#34;/./g&#34;</span><span class="op" id="7150204">,</span>&nbsp;<span class="string" id="7150206">&#34;http://a/g&#34;</span><span class="op" id="7150218">}</span><span class="op" id="7150219">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150222">{</span><span class="string" id="7150223">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150243">,</span>&nbsp;<span class="string" id="7150245">&#34;/../g&#34;</span><span class="op" id="7150252">,</span>&nbsp;<span class="string" id="7150254">&#34;http://a/g&#34;</span><span class="op" id="7150266">}</span><span class="op" id="7150267">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150270">{</span><span class="string" id="7150271">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150291">,</span>&nbsp;<span class="string" id="7150293">&#34;g.&#34;</span><span class="op" id="7150297">,</span>&nbsp;<span class="string" id="7150299">&#34;http://a/b/c/g.&#34;</span><span class="op" id="7150316">}</span><span class="op" id="7150317">,</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150320">{</span><span class="string" id="7150321">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150341">,</span>&nbsp;<span class="string" id="7150343">&#34;.g&#34;</span><span class="op" id="7150347">,</span>&nbsp;<span class="string" id="7150349">&#34;http://a/b/c/.g&#34;</span><span class="op" id="7150366">}</span><span class="op" id="7150367">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150370">{</span><span class="string" id="7150371">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150391">,</span>&nbsp;<span class="string" id="7150393">&#34;g..&#34;</span><span class="op" id="7150398">,</span>&nbsp;<span class="string" id="7150400">&#34;http://a/b/c/g..&#34;</span><span class="op" id="7150418">}</span><span class="op" id="7150419">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150422">{</span><span class="string" id="7150423">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150443">,</span>&nbsp;<span class="string" id="7150445">&#34;..g&#34;</span><span class="op" id="7150450">,</span>&nbsp;<span class="string" id="7150452">&#34;http://a/b/c/..g&#34;</span><span class="op" id="7150470">}</span><span class="op" id="7150471">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150474">{</span><span class="string" id="7150475">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150495">,</span>&nbsp;<span class="string" id="7150497">&#34;./../g&#34;</span><span class="op" id="7150505">,</span>&nbsp;<span class="string" id="7150507">&#34;http://a/b/g&#34;</span><span class="op" id="7150521">}</span><span class="op" id="7150522">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150525">{</span><span class="string" id="7150526">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150546">,</span>&nbsp;<span class="string" id="7150548">&#34;./g/.&#34;</span><span class="op" id="7150555">,</span>&nbsp;<span class="string" id="7150557">&#34;http://a/b/c/g/&#34;</span><span class="op" id="7150574">}</span><span class="op" id="7150575">,</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150578">{</span><span class="string" id="7150579">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150599">,</span>&nbsp;<span class="string" id="7150601">&#34;g/./h&#34;</span><span class="op" id="7150608">,</span>&nbsp;<span class="string" id="7150610">&#34;http://a/b/c/g/h&#34;</span><span class="op" id="7150628">}</span><span class="op" id="7150629">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150632">{</span><span class="string" id="7150633">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150653">,</span>&nbsp;<span class="string" id="7150655">&#34;g/../h&#34;</span><span class="op" id="7150663">,</span>&nbsp;<span class="string" id="7150665">&#34;http://a/b/c/h&#34;</span><span class="op" id="7150681">}</span><span class="op" id="7150682">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150685">{</span><span class="string" id="7150686">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150706">,</span>&nbsp;<span class="string" id="7150708">&#34;g;x=1/./y&#34;</span><span class="op" id="7150719">,</span>&nbsp;<span class="string" id="7150721">&#34;http://a/b/c/g;x=1/y&#34;</span><span class="op" id="7150743">}</span><span class="op" id="7150744">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150747">{</span><span class="string" id="7150748">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150768">,</span>&nbsp;<span class="string" id="7150770">&#34;g;x=1/../y&#34;</span><span class="op" id="7150782">,</span>&nbsp;<span class="string" id="7150784">&#34;http://a/b/c/y&#34;</span><span class="op" id="7150800">}</span><span class="op" id="7150801">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150804">{</span><span class="string" id="7150805">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150825">,</span>&nbsp;<span class="string" id="7150827">&#34;g?y/./x&#34;</span><span class="op" id="7150836">,</span>&nbsp;<span class="string" id="7150838">&#34;http://a/b/c/g?y/./x&#34;</span><span class="op" id="7150860">}</span><span class="op" id="7150861">,</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150864">{</span><span class="string" id="7150865">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150885">,</span>&nbsp;<span class="string" id="7150887">&#34;g?y/../x&#34;</span><span class="op" id="7150897">,</span>&nbsp;<span class="string" id="7150899">&#34;http://a/b/c/g?y/../x&#34;</span><span class="op" id="7150922">}</span><span class="op" id="7150923">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150926">{</span><span class="string" id="7150927">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7150947">,</span>&nbsp;<span class="string" id="7150949">&#34;g#s/./x&#34;</span><span class="op" id="7150958">,</span>&nbsp;<span class="string" id="7150960">&#34;http://a/b/c/g#s/./x&#34;</span><span class="op" id="7150982">}</span><span class="op" id="7150983">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7150986">{</span><span class="string" id="7150987">&#34;http://a/b/c/d;p?q&#34;</span><span class="op" id="7151007">,</span>&nbsp;<span class="string" id="7151009">&#34;g#s/../x&#34;</span><span class="op" id="7151019">,</span>&nbsp;<span class="string" id="7151021">&#34;http://a/b/c/g#s/../x&#34;</span><span class="op" id="7151044">}</span><span class="op" id="7151045">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7151049">//&nbsp;Extras.</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151061">{</span><span class="string" id="7151062">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7151083">,</span>&nbsp;<span class="string" id="7151085">&#34;//g?q&#34;</span><span class="op" id="7151092">,</span>&nbsp;<span class="string" id="7151094">&#34;https://g?q&#34;</span><span class="op" id="7151107">}</span><span class="op" id="7151108">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151111">{</span><span class="string" id="7151112">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7151133">,</span>&nbsp;<span class="string" id="7151135">&#34;//g#s&#34;</span><span class="op" id="7151142">,</span>&nbsp;<span class="string" id="7151144">&#34;https://g#s&#34;</span><span class="op" id="7151157">}</span><span class="op" id="7151158">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151161">{</span><span class="string" id="7151162">&#34;https://a/b/c/d;p?q&#34;</span><span class="op" id="7151183">,</span>&nbsp;<span class="string" id="7151185">&#34;//g/d/e/f?y#s&#34;</span><span class="op" id="7151200">,</span>&nbsp;<span class="string" id="7151202">&#34;https://g/d/e/f?y#s&#34;</span><span class="op" id="7151223">}</span><span class="op" id="7151224">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151227">{</span><span class="string" id="7151228">&#34;https://a/b/c/d;p#s&#34;</span><span class="op" id="7151249">,</span>&nbsp;<span class="string" id="7151251">&#34;?y&#34;</span><span class="op" id="7151255">,</span>&nbsp;<span class="string" id="7151257">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7151278">}</span><span class="op" id="7151279">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151282">{</span><span class="string" id="7151283">&#34;https://a/b/c/d;p?q#s&#34;</span><span class="op" id="7151306">,</span>&nbsp;<span class="string" id="7151308">&#34;?y&#34;</span><span class="op" id="7151312">,</span>&nbsp;<span class="string" id="7151314">&#34;https://a/b/c/d;p?y&#34;</span><span class="op" id="7151335">}</span><span class="op" id="7151336">,</span><br>
<span class="lineno">700</span><span class="op" id="7151338">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7151341">func</span>&nbsp;<span class="ident" id="7151346">TestResolveReference</span><span class="op" id="7151366">(</span><span class="ident" id="7151367">t</span>&nbsp;<span class="op" id="7151369">*</span><span class="ident" id="7151370">testing</span><span class="op" id="7151377">.</span><span class="ident" id="7151378">T</span><span class="op" id="7151379">)</span>&nbsp;<span class="op" id="7151381">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151384">mustParse</span>&nbsp;<span class="op" id="7151394">:=</span>&nbsp;<span class="keyword" id="7151397">func</span><span class="op" id="7151401">(</span><span class="ident" id="7151402">url</span>&nbsp;<span class="builtintype" id="7151406">string</span><span class="op" id="7151412">)</span>&nbsp;<span class="op" id="7151414">*</span><span class="ident" id="7151415">URL</span>&nbsp;<span class="op" id="7151419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151423">u</span><span class="op" id="7151424">,</span>&nbsp;<span class="ident" id="7151426">err</span>&nbsp;<span class="op" id="7151430">:=</span>&nbsp;<span class="ident" id="7151433">Parse</span><span class="op" id="7151438">(</span><span class="ident" id="7151439">url</span><span class="op" id="7151442">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7151446">if</span>&nbsp;<span class="ident" id="7151449">err</span>&nbsp;<span class="op" id="7151453">!=</span>&nbsp;<span class="ident" id="7151456">nil</span>&nbsp;<span class="op" id="7151460">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151465">t</span><span class="op" id="7151466">.</span><span class="ident" id="7151467">Fatalf</span><span class="op" id="7151473">(</span><span class="string" id="7151474">&#34;Expected&nbsp;URL&nbsp;to&nbsp;parse:&nbsp;%q,&nbsp;got&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7151516">,</span>&nbsp;<span class="ident" id="7151518">url</span><span class="op" id="7151521">,</span>&nbsp;<span class="ident" id="7151523">err</span><span class="op" id="7151526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7151534">return</span>&nbsp;<span class="ident" id="7151541">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151544">}</span><br>
<span class="lineno">710</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151547">opaque</span>&nbsp;<span class="op" id="7151554">:=</span>&nbsp;<span class="op" id="7151557">&amp;</span><span class="ident" id="7151558">URL</span><span class="op" id="7151561">{</span><span class="ident" id="7151562">Scheme</span><span class="op" id="7151568">:</span>&nbsp;<span class="string" id="7151570">&#34;scheme&#34;</span><span class="op" id="7151578">,</span>&nbsp;<span class="ident" id="7151580">Opaque</span><span class="op" id="7151586">:</span>&nbsp;<span class="string" id="7151588">&#34;opaque&#34;</span><span class="op" id="7151596">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7151599">for</span>&nbsp;<span class="ident" id="7151603">_</span><span class="op" id="7151604">,</span>&nbsp;<span class="ident" id="7151606">test</span>&nbsp;<span class="op" id="7151611">:=</span>&nbsp;<span class="keyword" id="7151614">range</span>&nbsp;<span class="ident" id="7151620">resolveReferenceTests</span>&nbsp;<span class="op" id="7151642">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151646">base</span>&nbsp;<span class="op" id="7151651">:=</span>&nbsp;<span class="ident" id="7151654">mustParse</span><span class="op" id="7151663">(</span><span class="ident" id="7151664">test</span><span class="op" id="7151668">.</span><span class="ident" id="7151669">base</span><span class="op" id="7151673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151677">rel</span>&nbsp;<span class="op" id="7151681">:=</span>&nbsp;<span class="ident" id="7151684">mustParse</span><span class="op" id="7151693">(</span><span class="ident" id="7151694">test</span><span class="op" id="7151698">.</span><span class="ident" id="7151699">rel</span><span class="op" id="7151702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151706">url</span>&nbsp;<span class="op" id="7151710">:=</span>&nbsp;<span class="ident" id="7151713">base</span><span class="op" id="7151717">.</span><span class="ident" id="7151718">ResolveReference</span><span class="op" id="7151734">(</span><span class="ident" id="7151735">rel</span><span class="op" id="7151738">)</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7151742">if</span>&nbsp;<span class="ident" id="7151745">url</span><span class="op" id="7151748">.</span><span class="ident" id="7151749">String</span><span class="op" id="7151755">(</span><span class="op" id="7151756">)</span>&nbsp;<span class="op" id="7151758">!=</span>&nbsp;<span class="ident" id="7151761">test</span><span class="op" id="7151765">.</span><span class="ident" id="7151766">expected</span>&nbsp;<span class="op" id="7151775">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151780">t</span><span class="op" id="7151781">.</span><span class="ident" id="7151782">Errorf</span><span class="op" id="7151788">(</span><span class="string" id="7151789">&#34;URL(%q).ResolveReference(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7151833">,</span>&nbsp;<span class="ident" id="7151835">test</span><span class="op" id="7151839">.</span><span class="ident" id="7151840">base</span><span class="op" id="7151844">,</span>&nbsp;<span class="ident" id="7151846">test</span><span class="op" id="7151850">.</span><span class="ident" id="7151851">rel</span><span class="op" id="7151854">,</span>&nbsp;<span class="ident" id="7151856">test</span><span class="op" id="7151860">.</span><span class="ident" id="7151861">expected</span><span class="op" id="7151869">,</span>&nbsp;<span class="ident" id="7151871">url</span><span class="op" id="7151874">.</span><span class="ident" id="7151875">String</span><span class="op" id="7151881">(</span><span class="op" id="7151882">)</span><span class="op" id="7151883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7151887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7151891">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7151936">if</span>&nbsp;<span class="ident" id="7151939">base</span>&nbsp;<span class="op" id="7151944">==</span>&nbsp;<span class="ident" id="7151947">url</span>&nbsp;<span class="op" id="7151951">{</span><br>
<span class="lineno">720</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7151956">t</span><span class="op" id="7151957">.</span><span class="ident" id="7151958">Errorf</span><span class="op" id="7151964">(</span><span class="string" id="7151965">&#34;Expected&nbsp;URL.ResolveReference&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7152024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152028">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7152032">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152071">url</span><span class="op" id="7152074">,</span>&nbsp;<span class="ident" id="7152076">err</span>&nbsp;<span class="op" id="7152080">:=</span>&nbsp;<span class="ident" id="7152083">base</span><span class="op" id="7152087">.</span><span class="ident" id="7152088">Parse</span><span class="op" id="7152093">(</span><span class="ident" id="7152094">test</span><span class="op" id="7152098">.</span><span class="ident" id="7152099">rel</span><span class="op" id="7152102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7152106">if</span>&nbsp;<span class="ident" id="7152109">err</span>&nbsp;<span class="op" id="7152113">!=</span>&nbsp;<span class="ident" id="7152116">nil</span>&nbsp;<span class="op" id="7152120">{</span><br>
<span class="lineno">725</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152125">t</span><span class="op" id="7152126">.</span><span class="ident" id="7152127">Errorf</span><span class="op" id="7152133">(</span><span class="string" id="7152134">&#34;URL(%q).Parse(%q)&nbsp;failed:&nbsp;%v&#34;</span><span class="op" id="7152164">,</span>&nbsp;<span class="ident" id="7152166">test</span><span class="op" id="7152170">.</span><span class="ident" id="7152171">base</span><span class="op" id="7152175">,</span>&nbsp;<span class="ident" id="7152177">test</span><span class="op" id="7152181">.</span><span class="ident" id="7152182">rel</span><span class="op" id="7152185">,</span>&nbsp;<span class="ident" id="7152187">err</span><span class="op" id="7152190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152194">}</span>&nbsp;<span class="keyword" id="7152196">else</span>&nbsp;<span class="keyword" id="7152201">if</span>&nbsp;<span class="ident" id="7152204">url</span><span class="op" id="7152207">.</span><span class="ident" id="7152208">String</span><span class="op" id="7152214">(</span><span class="op" id="7152215">)</span>&nbsp;<span class="op" id="7152217">!=</span>&nbsp;<span class="ident" id="7152220">test</span><span class="op" id="7152224">.</span><span class="ident" id="7152225">expected</span>&nbsp;<span class="op" id="7152234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152239">t</span><span class="op" id="7152240">.</span><span class="ident" id="7152241">Errorf</span><span class="op" id="7152247">(</span><span class="string" id="7152248">&#34;URL(%q).Parse(%q)&nbsp;==&nbsp;%q,&nbsp;got&nbsp;%q&#34;</span><span class="op" id="7152281">,</span>&nbsp;<span class="ident" id="7152283">test</span><span class="op" id="7152287">.</span><span class="ident" id="7152288">base</span><span class="op" id="7152292">,</span>&nbsp;<span class="ident" id="7152294">test</span><span class="op" id="7152298">.</span><span class="ident" id="7152299">rel</span><span class="op" id="7152302">,</span>&nbsp;<span class="ident" id="7152304">test</span><span class="op" id="7152308">.</span><span class="ident" id="7152309">expected</span><span class="op" id="7152317">,</span>&nbsp;<span class="ident" id="7152319">url</span><span class="op" id="7152322">.</span><span class="ident" id="7152323">String</span><span class="op" id="7152329">(</span><span class="op" id="7152330">)</span><span class="op" id="7152331">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152335">}</span>&nbsp;<span class="keyword" id="7152337">else</span>&nbsp;<span class="keyword" id="7152342">if</span>&nbsp;<span class="ident" id="7152345">base</span>&nbsp;<span class="op" id="7152350">==</span>&nbsp;<span class="ident" id="7152353">url</span>&nbsp;<span class="op" id="7152357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7152362">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned&nbsp;for&nbsp;the&nbsp;wrapper&nbsp;too.</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152428">t</span><span class="op" id="7152429">.</span><span class="ident" id="7152430">Errorf</span><span class="op" id="7152436">(</span><span class="string" id="7152437">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7152485">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7152493">//&nbsp;Ensure&nbsp;Opaque&nbsp;resets&nbsp;the&nbsp;URL.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152528">url</span>&nbsp;<span class="op" id="7152532">=</span>&nbsp;<span class="ident" id="7152534">base</span><span class="op" id="7152538">.</span><span class="ident" id="7152539">ResolveReference</span><span class="op" id="7152555">(</span><span class="ident" id="7152556">opaque</span><span class="op" id="7152562">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7152566">if</span>&nbsp;<span class="op" id="7152569">*</span><span class="ident" id="7152570">url</span>&nbsp;<span class="op" id="7152574">!=</span>&nbsp;<span class="op" id="7152577">*</span><span class="ident" id="7152578">opaque</span>&nbsp;<span class="op" id="7152585">{</span><br>
<span class="lineno">735</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152590">t</span><span class="op" id="7152591">.</span><span class="ident" id="7152592">Errorf</span><span class="op" id="7152598">(</span><span class="string" id="7152599">&#34;ResolveReference&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7152665">,</span>&nbsp;<span class="ident" id="7152667">url</span><span class="op" id="7152670">,</span>&nbsp;<span class="ident" id="7152672">opaque</span><span class="op" id="7152678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7152686">//&nbsp;Test&nbsp;the&nbsp;convenience&nbsp;wrapper&nbsp;with&nbsp;an&nbsp;opaque&nbsp;URL&nbsp;too.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152744">url</span><span class="op" id="7152747">,</span>&nbsp;<span class="ident" id="7152749">err</span>&nbsp;<span class="op" id="7152753">=</span>&nbsp;<span class="ident" id="7152755">base</span><span class="op" id="7152759">.</span><span class="ident" id="7152760">Parse</span><span class="op" id="7152765">(</span><span class="string" id="7152766">&#34;scheme:opaque&#34;</span><span class="op" id="7152781">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7152785">if</span>&nbsp;<span class="ident" id="7152788">err</span>&nbsp;<span class="op" id="7152792">!=</span>&nbsp;<span class="ident" id="7152795">nil</span>&nbsp;<span class="op" id="7152799">{</span><br>
<span class="lineno">740</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152804">t</span><span class="op" id="7152805">.</span><span class="ident" id="7152806">Errorf</span><span class="op" id="7152812">(</span><span class="string" id="7152813">`URL(%q).Parse(&#34;scheme:opaque&#34;)&nbsp;failed:&nbsp;%v`</span><span class="op" id="7152856">,</span>&nbsp;<span class="ident" id="7152858">test</span><span class="op" id="7152862">.</span><span class="ident" id="7152863">base</span><span class="op" id="7152867">,</span>&nbsp;<span class="ident" id="7152869">err</span><span class="op" id="7152872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152876">}</span>&nbsp;<span class="keyword" id="7152878">else</span>&nbsp;<span class="keyword" id="7152883">if</span>&nbsp;<span class="op" id="7152886">*</span><span class="ident" id="7152887">url</span>&nbsp;<span class="op" id="7152891">!=</span>&nbsp;<span class="op" id="7152894">*</span><span class="ident" id="7152895">opaque</span>&nbsp;<span class="op" id="7152902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7152907">t</span><span class="op" id="7152908">.</span><span class="ident" id="7152909">Errorf</span><span class="op" id="7152915">(</span><span class="string" id="7152916">&#34;Parse&nbsp;failed&nbsp;to&nbsp;resolve&nbsp;opaque&nbsp;URL:&nbsp;want&nbsp;%#v,&nbsp;got&nbsp;%#v&#34;</span><span class="op" id="7152971">,</span>&nbsp;<span class="ident" id="7152973">url</span><span class="op" id="7152976">,</span>&nbsp;<span class="ident" id="7152978">opaque</span><span class="op" id="7152984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7152988">}</span>&nbsp;<span class="keyword" id="7152990">else</span>&nbsp;<span class="keyword" id="7152995">if</span>&nbsp;<span class="ident" id="7152998">base</span>&nbsp;<span class="op" id="7153003">==</span>&nbsp;<span class="ident" id="7153006">url</span>&nbsp;<span class="op" id="7153010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7153015">//&nbsp;Ensure&nbsp;that&nbsp;new&nbsp;instances&nbsp;are&nbsp;returned,&nbsp;again.</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153068">t</span><span class="op" id="7153069">.</span><span class="ident" id="7153070">Errorf</span><span class="op" id="7153076">(</span><span class="string" id="7153077">&#34;Expected&nbsp;URL.Parse&nbsp;to&nbsp;return&nbsp;new&nbsp;URL&nbsp;instance.&#34;</span><span class="op" id="7153125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153132">}</span><br>
<span class="lineno"></span><span class="op" id="7153134">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">750</span><span class="keyword" id="7153137">func</span>&nbsp;<span class="ident" id="7153142">TestQueryValues</span><span class="op" id="7153157">(</span><span class="ident" id="7153158">t</span>&nbsp;<span class="op" id="7153160">*</span><span class="ident" id="7153161">testing</span><span class="op" id="7153168">.</span><span class="ident" id="7153169">T</span><span class="op" id="7153170">)</span>&nbsp;<span class="op" id="7153172">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153175">u</span><span class="op" id="7153176">,</span>&nbsp;<span class="ident" id="7153178">_</span>&nbsp;<span class="op" id="7153180">:=</span>&nbsp;<span class="ident" id="7153183">Parse</span><span class="op" id="7153188">(</span><span class="string" id="7153189">&#34;http://x.com?foo=bar&amp;bar=1&amp;bar=2&#34;</span><span class="op" id="7153223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153226">v</span>&nbsp;<span class="op" id="7153228">:=</span>&nbsp;<span class="ident" id="7153231">u</span><span class="op" id="7153232">.</span><span class="ident" id="7153233">Query</span><span class="op" id="7153238">(</span><span class="op" id="7153239">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153242">if</span>&nbsp;<span class="builtinfunc" id="7153245">len</span><span class="op" id="7153248">(</span><span class="ident" id="7153249">v</span><span class="op" id="7153250">)</span>&nbsp;<span class="op" id="7153252">!=</span>&nbsp;<span class="num" id="7153255">2</span>&nbsp;<span class="op" id="7153257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153261">t</span><span class="op" id="7153262">.</span><span class="ident" id="7153263">Errorf</span><span class="op" id="7153269">(</span><span class="string" id="7153270">&#34;got&nbsp;%d&nbsp;keys&nbsp;in&nbsp;Query&nbsp;values,&nbsp;want&nbsp;2&#34;</span><span class="op" id="7153307">,</span>&nbsp;<span class="builtinfunc" id="7153309">len</span><span class="op" id="7153312">(</span><span class="ident" id="7153313">v</span><span class="op" id="7153314">)</span><span class="op" id="7153315">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153318">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153321">if</span>&nbsp;<span class="ident" id="7153324">g</span><span class="op" id="7153325">,</span>&nbsp;<span class="ident" id="7153327">e</span>&nbsp;<span class="op" id="7153329">:=</span>&nbsp;<span class="ident" id="7153332">v</span><span class="op" id="7153333">.</span><span class="ident" id="7153334">Get</span><span class="op" id="7153337">(</span><span class="string" id="7153338">&#34;foo&#34;</span><span class="op" id="7153343">)</span><span class="op" id="7153344">,</span>&nbsp;<span class="string" id="7153346">&#34;bar&#34;</span><span class="op" id="7153351">;</span>&nbsp;<span class="ident" id="7153353">g</span>&nbsp;<span class="op" id="7153355">!=</span>&nbsp;<span class="ident" id="7153358">e</span>&nbsp;<span class="op" id="7153360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153364">t</span><span class="op" id="7153365">.</span><span class="ident" id="7153366">Errorf</span><span class="op" id="7153372">(</span><span class="string" id="7153373">&#34;Get(foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7153397">,</span>&nbsp;<span class="ident" id="7153399">g</span><span class="op" id="7153400">,</span>&nbsp;<span class="ident" id="7153402">e</span><span class="op" id="7153403">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153406">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7153409">//&nbsp;Case&nbsp;sensitive:</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153429">if</span>&nbsp;<span class="ident" id="7153432">g</span><span class="op" id="7153433">,</span>&nbsp;<span class="ident" id="7153435">e</span>&nbsp;<span class="op" id="7153437">:=</span>&nbsp;<span class="ident" id="7153440">v</span><span class="op" id="7153441">.</span><span class="ident" id="7153442">Get</span><span class="op" id="7153445">(</span><span class="string" id="7153446">&#34;Foo&#34;</span><span class="op" id="7153451">)</span><span class="op" id="7153452">,</span>&nbsp;<span class="string" id="7153454">&#34;&#34;</span><span class="op" id="7153456">;</span>&nbsp;<span class="ident" id="7153458">g</span>&nbsp;<span class="op" id="7153460">!=</span>&nbsp;<span class="ident" id="7153463">e</span>&nbsp;<span class="op" id="7153465">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153469">t</span><span class="op" id="7153470">.</span><span class="ident" id="7153471">Errorf</span><span class="op" id="7153477">(</span><span class="string" id="7153478">&#34;Get(Foo)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7153502">,</span>&nbsp;<span class="ident" id="7153504">g</span><span class="op" id="7153505">,</span>&nbsp;<span class="ident" id="7153507">e</span><span class="op" id="7153508">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153511">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153514">if</span>&nbsp;<span class="ident" id="7153517">g</span><span class="op" id="7153518">,</span>&nbsp;<span class="ident" id="7153520">e</span>&nbsp;<span class="op" id="7153522">:=</span>&nbsp;<span class="ident" id="7153525">v</span><span class="op" id="7153526">.</span><span class="ident" id="7153527">Get</span><span class="op" id="7153530">(</span><span class="string" id="7153531">&#34;bar&#34;</span><span class="op" id="7153536">)</span><span class="op" id="7153537">,</span>&nbsp;<span class="string" id="7153539">&#34;1&#34;</span><span class="op" id="7153542">;</span>&nbsp;<span class="ident" id="7153544">g</span>&nbsp;<span class="op" id="7153546">!=</span>&nbsp;<span class="ident" id="7153549">e</span>&nbsp;<span class="op" id="7153551">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153555">t</span><span class="op" id="7153556">.</span><span class="ident" id="7153557">Errorf</span><span class="op" id="7153563">(</span><span class="string" id="7153564">&#34;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7153588">,</span>&nbsp;<span class="ident" id="7153590">g</span><span class="op" id="7153591">,</span>&nbsp;<span class="ident" id="7153593">e</span><span class="op" id="7153594">)</span><br>
<span class="lineno">765</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153600">if</span>&nbsp;<span class="ident" id="7153603">g</span><span class="op" id="7153604">,</span>&nbsp;<span class="ident" id="7153606">e</span>&nbsp;<span class="op" id="7153608">:=</span>&nbsp;<span class="ident" id="7153611">v</span><span class="op" id="7153612">.</span><span class="ident" id="7153613">Get</span><span class="op" id="7153616">(</span><span class="string" id="7153617">&#34;baz&#34;</span><span class="op" id="7153622">)</span><span class="op" id="7153623">,</span>&nbsp;<span class="string" id="7153625">&#34;&#34;</span><span class="op" id="7153627">;</span>&nbsp;<span class="ident" id="7153629">g</span>&nbsp;<span class="op" id="7153631">!=</span>&nbsp;<span class="ident" id="7153634">e</span>&nbsp;<span class="op" id="7153636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153640">t</span><span class="op" id="7153641">.</span><span class="ident" id="7153642">Errorf</span><span class="op" id="7153648">(</span><span class="string" id="7153649">&#34;Get(baz)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7153673">,</span>&nbsp;<span class="ident" id="7153675">g</span><span class="op" id="7153676">,</span>&nbsp;<span class="ident" id="7153678">e</span><span class="op" id="7153679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153685">v</span><span class="op" id="7153686">.</span><span class="ident" id="7153687">Del</span><span class="op" id="7153690">(</span><span class="string" id="7153691">&#34;bar&#34;</span><span class="op" id="7153696">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7153699">if</span>&nbsp;<span class="ident" id="7153702">g</span><span class="op" id="7153703">,</span>&nbsp;<span class="ident" id="7153705">e</span>&nbsp;<span class="op" id="7153707">:=</span>&nbsp;<span class="ident" id="7153710">v</span><span class="op" id="7153711">.</span><span class="ident" id="7153712">Get</span><span class="op" id="7153715">(</span><span class="string" id="7153716">&#34;bar&#34;</span><span class="op" id="7153721">)</span><span class="op" id="7153722">,</span>&nbsp;<span class="string" id="7153724">&#34;&#34;</span><span class="op" id="7153726">;</span>&nbsp;<span class="ident" id="7153728">g</span>&nbsp;<span class="op" id="7153730">!=</span>&nbsp;<span class="ident" id="7153733">e</span>&nbsp;<span class="op" id="7153735">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153739">t</span><span class="op" id="7153740">.</span><span class="ident" id="7153741">Errorf</span><span class="op" id="7153747">(</span><span class="string" id="7153748">&#34;second&nbsp;Get(bar)&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7153779">,</span>&nbsp;<span class="ident" id="7153781">g</span><span class="op" id="7153782">,</span>&nbsp;<span class="ident" id="7153784">e</span><span class="op" id="7153785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153788">}</span><br>
<span class="lineno"></span><span class="op" id="7153790">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">775</span><span class="keyword" id="7153793">type</span>&nbsp;<span class="ident" id="7153798">parseTest</span>&nbsp;<span class="keyword" id="7153808">struct</span>&nbsp;<span class="op" id="7153815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153818">query</span>&nbsp;<span class="builtintype" id="7153824">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153832">out</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7153838">Values</span><br>
<span class="lineno"></span><span class="op" id="7153845">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">780</span><span class="keyword" id="7153848">var</span>&nbsp;<span class="ident" id="7153852">parseTests</span>&nbsp;<span class="op" id="7153863">=</span>&nbsp;<span class="op" id="7153865">[</span><span class="op" id="7153866">]</span><span class="ident" id="7153867">parseTest</span><span class="op" id="7153876">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153883">query</span><span class="op" id="7153888">:</span>&nbsp;<span class="string" id="7153890">&#34;a=1&amp;b=2&#34;</span><span class="op" id="7153899">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153903">out</span><span class="op" id="7153906">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7153910">Values</span><span class="op" id="7153916">{</span><span class="string" id="7153917">&#34;a&#34;</span><span class="op" id="7153920">:</span>&nbsp;<span class="op" id="7153922">[</span><span class="op" id="7153923">]</span><span class="builtintype" id="7153924">string</span><span class="op" id="7153930">{</span><span class="string" id="7153931">&#34;1&#34;</span><span class="op" id="7153934">}</span><span class="op" id="7153935">,</span>&nbsp;<span class="string" id="7153937">&#34;b&#34;</span><span class="op" id="7153940">:</span>&nbsp;<span class="op" id="7153942">[</span><span class="op" id="7153943">]</span><span class="builtintype" id="7153944">string</span><span class="op" id="7153950">{</span><span class="string" id="7153951">&#34;2&#34;</span><span class="op" id="7153954">}</span><span class="op" id="7153955">}</span><span class="op" id="7153956">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153959">}</span><span class="op" id="7153960">,</span><br>
<span class="lineno">785</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7153963">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153967">query</span><span class="op" id="7153972">:</span>&nbsp;<span class="string" id="7153974">&#34;a=1&amp;a=2&amp;a=banana&#34;</span><span class="op" id="7153992">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7153996">out</span><span class="op" id="7153999">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7154003">Values</span><span class="op" id="7154009">{</span><span class="string" id="7154010">&#34;a&#34;</span><span class="op" id="7154013">:</span>&nbsp;<span class="op" id="7154015">[</span><span class="op" id="7154016">]</span><span class="builtintype" id="7154017">string</span><span class="op" id="7154023">{</span><span class="string" id="7154024">&#34;1&#34;</span><span class="op" id="7154027">,</span>&nbsp;<span class="string" id="7154029">&#34;2&#34;</span><span class="op" id="7154032">,</span>&nbsp;<span class="string" id="7154034">&#34;banana&#34;</span><span class="op" id="7154042">}</span><span class="op" id="7154043">}</span><span class="op" id="7154044">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154047">}</span><span class="op" id="7154048">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154051">{</span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154055">query</span><span class="op" id="7154060">:</span>&nbsp;<span class="string" id="7154062">&#34;ascii=%3Ckey%3A+0x90%3E&#34;</span><span class="op" id="7154087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154091">out</span><span class="op" id="7154094">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7154098">Values</span><span class="op" id="7154104">{</span><span class="string" id="7154105">&#34;ascii&#34;</span><span class="op" id="7154112">:</span>&nbsp;<span class="op" id="7154114">[</span><span class="op" id="7154115">]</span><span class="builtintype" id="7154116">string</span><span class="op" id="7154122">{</span><span class="string" id="7154123">&#34;&lt;key:&nbsp;0x90&gt;&#34;</span><span class="op" id="7154136">}</span><span class="op" id="7154137">}</span><span class="op" id="7154138">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154141">}</span><span class="op" id="7154142">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154149">query</span><span class="op" id="7154154">:</span>&nbsp;<span class="string" id="7154156">&#34;a=1;b=2&#34;</span><span class="op" id="7154165">,</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154169">out</span><span class="op" id="7154172">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7154176">Values</span><span class="op" id="7154182">{</span><span class="string" id="7154183">&#34;a&#34;</span><span class="op" id="7154186">:</span>&nbsp;<span class="op" id="7154188">[</span><span class="op" id="7154189">]</span><span class="builtintype" id="7154190">string</span><span class="op" id="7154196">{</span><span class="string" id="7154197">&#34;1&#34;</span><span class="op" id="7154200">}</span><span class="op" id="7154201">,</span>&nbsp;<span class="string" id="7154203">&#34;b&#34;</span><span class="op" id="7154206">:</span>&nbsp;<span class="op" id="7154208">[</span><span class="op" id="7154209">]</span><span class="builtintype" id="7154210">string</span><span class="op" id="7154216">{</span><span class="string" id="7154217">&#34;2&#34;</span><span class="op" id="7154220">}</span><span class="op" id="7154221">}</span><span class="op" id="7154222">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154225">}</span><span class="op" id="7154226">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154233">query</span><span class="op" id="7154238">:</span>&nbsp;<span class="string" id="7154240">&#34;a=1&amp;a=2;a=banana&#34;</span><span class="op" id="7154258">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154262">out</span><span class="op" id="7154265">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7154269">Values</span><span class="op" id="7154275">{</span><span class="string" id="7154276">&#34;a&#34;</span><span class="op" id="7154279">:</span>&nbsp;<span class="op" id="7154281">[</span><span class="op" id="7154282">]</span><span class="builtintype" id="7154283">string</span><span class="op" id="7154289">{</span><span class="string" id="7154290">&#34;1&#34;</span><span class="op" id="7154293">,</span>&nbsp;<span class="string" id="7154295">&#34;2&#34;</span><span class="op" id="7154298">,</span>&nbsp;<span class="string" id="7154300">&#34;banana&#34;</span><span class="op" id="7154308">}</span><span class="op" id="7154309">}</span><span class="op" id="7154310">,</span><br>
<span class="lineno">800</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154313">}</span><span class="op" id="7154314">,</span><br>
<span class="lineno"></span><span class="op" id="7154316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7154319">func</span>&nbsp;<span class="ident" id="7154324">TestParseQuery</span><span class="op" id="7154338">(</span><span class="ident" id="7154339">t</span>&nbsp;<span class="op" id="7154341">*</span><span class="ident" id="7154342">testing</span><span class="op" id="7154349">.</span><span class="ident" id="7154350">T</span><span class="op" id="7154351">)</span>&nbsp;<span class="op" id="7154353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154356">for</span>&nbsp;<span class="ident" id="7154360">i</span><span class="op" id="7154361">,</span>&nbsp;<span class="ident" id="7154363">test</span>&nbsp;<span class="op" id="7154368">:=</span>&nbsp;<span class="keyword" id="7154371">range</span>&nbsp;<span class="ident" id="7154377">parseTests</span>&nbsp;<span class="op" id="7154388">{</span><br>
<span class="lineno">805</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154392">form</span><span class="op" id="7154396">,</span>&nbsp;<span class="ident" id="7154398">err</span>&nbsp;<span class="op" id="7154402">:=</span>&nbsp;<span class="ident" id="7154405">ParseQuery</span><span class="op" id="7154415">(</span><span class="ident" id="7154416">test</span><span class="op" id="7154420">.</span><span class="ident" id="7154421">query</span><span class="op" id="7154426">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154430">if</span>&nbsp;<span class="ident" id="7154433">err</span>&nbsp;<span class="op" id="7154437">!=</span>&nbsp;<span class="ident" id="7154440">nil</span>&nbsp;<span class="op" id="7154444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154449">t</span><span class="op" id="7154450">.</span><span class="ident" id="7154451">Errorf</span><span class="op" id="7154457">(</span><span class="string" id="7154458">&#34;test&nbsp;%d:&nbsp;Unexpected&nbsp;error:&nbsp;%v&#34;</span><span class="op" id="7154489">,</span>&nbsp;<span class="ident" id="7154491">i</span><span class="op" id="7154492">,</span>&nbsp;<span class="ident" id="7154494">err</span><span class="op" id="7154497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154502">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154513">}</span><br>
<span class="lineno">810</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154517">if</span>&nbsp;<span class="builtinfunc" id="7154520">len</span><span class="op" id="7154523">(</span><span class="ident" id="7154524">form</span><span class="op" id="7154528">)</span>&nbsp;<span class="op" id="7154530">!=</span>&nbsp;<span class="builtinfunc" id="7154533">len</span><span class="op" id="7154536">(</span><span class="ident" id="7154537">test</span><span class="op" id="7154541">.</span><span class="ident" id="7154542">out</span><span class="op" id="7154545">)</span>&nbsp;<span class="op" id="7154547">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154552">t</span><span class="op" id="7154553">.</span><span class="ident" id="7154554">Errorf</span><span class="op" id="7154560">(</span><span class="string" id="7154561">&#34;test&nbsp;%d:&nbsp;len(form)&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7154595">,</span>&nbsp;<span class="ident" id="7154597">i</span><span class="op" id="7154598">,</span>&nbsp;<span class="builtinfunc" id="7154600">len</span><span class="op" id="7154603">(</span><span class="ident" id="7154604">form</span><span class="op" id="7154608">)</span><span class="op" id="7154609">,</span>&nbsp;<span class="builtinfunc" id="7154611">len</span><span class="op" id="7154614">(</span><span class="ident" id="7154615">test</span><span class="op" id="7154619">.</span><span class="ident" id="7154620">out</span><span class="op" id="7154623">)</span><span class="op" id="7154624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154632">for</span>&nbsp;<span class="ident" id="7154636">k</span><span class="op" id="7154637">,</span>&nbsp;<span class="ident" id="7154639">evs</span>&nbsp;<span class="op" id="7154643">:=</span>&nbsp;<span class="keyword" id="7154646">range</span>&nbsp;<span class="ident" id="7154652">test</span><span class="op" id="7154656">.</span><span class="ident" id="7154657">out</span>&nbsp;<span class="op" id="7154661">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154666">vs</span><span class="op" id="7154668">,</span>&nbsp;<span class="ident" id="7154670">ok</span>&nbsp;<span class="op" id="7154673">:=</span>&nbsp;<span class="ident" id="7154676">form</span><span class="op" id="7154680">[</span><span class="ident" id="7154681">k</span><span class="op" id="7154682">]</span><br>
<span class="lineno">815</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154687">if</span>&nbsp;<span class="op" id="7154690">!</span><span class="ident" id="7154691">ok</span>&nbsp;<span class="op" id="7154694">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154700">t</span><span class="op" id="7154701">.</span><span class="ident" id="7154702">Errorf</span><span class="op" id="7154708">(</span><span class="string" id="7154709">&#34;test&nbsp;%d:&nbsp;Missing&nbsp;key&nbsp;%q&#34;</span><span class="op" id="7154734">,</span>&nbsp;<span class="ident" id="7154736">i</span><span class="op" id="7154737">,</span>&nbsp;<span class="ident" id="7154739">k</span><span class="op" id="7154740">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154746">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154758">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154763">if</span>&nbsp;<span class="builtinfunc" id="7154766">len</span><span class="op" id="7154769">(</span><span class="ident" id="7154770">vs</span><span class="op" id="7154772">)</span>&nbsp;<span class="op" id="7154774">!=</span>&nbsp;<span class="builtinfunc" id="7154777">len</span><span class="op" id="7154780">(</span><span class="ident" id="7154781">evs</span><span class="op" id="7154784">)</span>&nbsp;<span class="op" id="7154786">{</span><br>
<span class="lineno">820</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154792">t</span><span class="op" id="7154793">.</span><span class="ident" id="7154794">Errorf</span><span class="op" id="7154800">(</span><span class="string" id="7154801">&#34;test&nbsp;%d:&nbsp;len(form[%q])&nbsp;=&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7154839">,</span>&nbsp;<span class="ident" id="7154841">i</span><span class="op" id="7154842">,</span>&nbsp;<span class="ident" id="7154844">k</span><span class="op" id="7154845">,</span>&nbsp;<span class="builtinfunc" id="7154847">len</span><span class="op" id="7154850">(</span><span class="ident" id="7154851">vs</span><span class="op" id="7154853">)</span><span class="op" id="7154854">,</span>&nbsp;<span class="builtinfunc" id="7154856">len</span><span class="op" id="7154859">(</span><span class="ident" id="7154860">evs</span><span class="op" id="7154863">)</span><span class="op" id="7154864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154870">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7154882">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154887">for</span>&nbsp;<span class="ident" id="7154891">j</span><span class="op" id="7154892">,</span>&nbsp;<span class="ident" id="7154894">ev</span>&nbsp;<span class="op" id="7154897">:=</span>&nbsp;<span class="keyword" id="7154900">range</span>&nbsp;<span class="ident" id="7154906">evs</span>&nbsp;<span class="op" id="7154910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7154916">if</span>&nbsp;<span class="ident" id="7154919">v</span>&nbsp;<span class="op" id="7154921">:=</span>&nbsp;<span class="ident" id="7154924">vs</span><span class="op" id="7154926">[</span><span class="ident" id="7154927">j</span><span class="op" id="7154928">]</span><span class="op" id="7154929">;</span>&nbsp;<span class="ident" id="7154931">v</span>&nbsp;<span class="op" id="7154933">!=</span>&nbsp;<span class="ident" id="7154936">ev</span>&nbsp;<span class="op" id="7154939">{</span><br>
<span class="lineno">825</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7154946">t</span><span class="op" id="7154947">.</span><span class="ident" id="7154948">Errorf</span><span class="op" id="7154954">(</span><span class="string" id="7154955">&#34;test&nbsp;%d:&nbsp;form[%q][%d]&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7154992">,</span>&nbsp;<span class="ident" id="7154994">i</span><span class="op" id="7154995">,</span>&nbsp;<span class="ident" id="7154997">k</span><span class="op" id="7154998">,</span>&nbsp;<span class="ident" id="7155000">j</span><span class="op" id="7155001">,</span>&nbsp;<span class="ident" id="7155003">v</span><span class="op" id="7155004">,</span>&nbsp;<span class="ident" id="7155006">ev</span><span class="op" id="7155008">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155014">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155019">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155023">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155026">}</span><br>
<span class="lineno">830</span><span class="op" id="7155028">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7155031">type</span>&nbsp;<span class="ident" id="7155036">RequestURITest</span>&nbsp;<span class="keyword" id="7155051">struct</span>&nbsp;<span class="op" id="7155058">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155061">url</span>&nbsp;<span class="op" id="7155065">*</span><span class="ident" id="7155066">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155071">out</span>&nbsp;<span class="builtintype" id="7155075">string</span><br>
<span class="lineno">835</span><span class="op" id="7155082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7155085">var</span>&nbsp;<span class="ident" id="7155089">requritests</span>&nbsp;<span class="op" id="7155101">=</span>&nbsp;<span class="op" id="7155103">[</span><span class="op" id="7155104">]</span><span class="ident" id="7155105">RequestURITest</span><span class="op" id="7155119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155126">&amp;</span><span class="ident" id="7155127">URL</span><span class="op" id="7155130">{</span><br>
<span class="lineno">840</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155135">Scheme</span><span class="op" id="7155141">:</span>&nbsp;<span class="string" id="7155143">&#34;http&#34;</span><span class="op" id="7155149">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155154">Host</span><span class="op" id="7155158">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155162">&#34;example.com&#34;</span><span class="op" id="7155175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155180">Path</span><span class="op" id="7155184">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155188">&#34;&#34;</span><span class="op" id="7155190">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155194">}</span><span class="op" id="7155195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155199">&#34;/&#34;</span><span class="op" id="7155202">,</span><br>
<span class="lineno">845</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155205">}</span><span class="op" id="7155206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155213">&amp;</span><span class="ident" id="7155214">URL</span><span class="op" id="7155217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155222">Scheme</span><span class="op" id="7155228">:</span>&nbsp;<span class="string" id="7155230">&#34;http&#34;</span><span class="op" id="7155236">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155241">Host</span><span class="op" id="7155245">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155249">&#34;example.com&#34;</span><span class="op" id="7155262">,</span><br>
<span class="lineno">850</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155267">Path</span><span class="op" id="7155271">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155275">&#34;/a&nbsp;b&#34;</span><span class="op" id="7155281">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155285">}</span><span class="op" id="7155286">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155290">&#34;/a%20b&#34;</span><span class="op" id="7155298">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155301">}</span><span class="op" id="7155302">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7155305">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;1</span><br>
<span class="lineno">855</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155341">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155345">&amp;</span><span class="ident" id="7155346">URL</span><span class="op" id="7155349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155354">Scheme</span><span class="op" id="7155360">:</span>&nbsp;<span class="string" id="7155362">&#34;http&#34;</span><span class="op" id="7155368">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155373">Host</span><span class="op" id="7155377">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155381">&#34;example.com&#34;</span><span class="op" id="7155394">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155399">Opaque</span><span class="op" id="7155405">:</span>&nbsp;<span class="string" id="7155407">&#34;/%2F/%2F/&#34;</span><span class="op" id="7155418">,</span><br>
<span class="lineno">860</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155422">}</span><span class="op" id="7155423">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155427">&#34;/%2F/%2F/&#34;</span><span class="op" id="7155438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155441">}</span><span class="op" id="7155442">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7155445">//&nbsp;golang.org/issue/4860&nbsp;variant&nbsp;2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155481">{</span><br>
<span class="lineno">865</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155485">&amp;</span><span class="ident" id="7155486">URL</span><span class="op" id="7155489">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155494">Scheme</span><span class="op" id="7155500">:</span>&nbsp;<span class="string" id="7155502">&#34;http&#34;</span><span class="op" id="7155508">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155513">Host</span><span class="op" id="7155517">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155521">&#34;example.com&#34;</span><span class="op" id="7155534">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155539">Opaque</span><span class="op" id="7155545">:</span>&nbsp;<span class="string" id="7155547">&#34;//other.example.com/%2F/%2F/&#34;</span><span class="op" id="7155577">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155581">}</span><span class="op" id="7155582">,</span><br>
<span class="lineno">870</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155586">&#34;http://other.example.com/%2F/%2F/&#34;</span><span class="op" id="7155621">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155624">}</span><span class="op" id="7155625">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155632">&amp;</span><span class="ident" id="7155633">URL</span><span class="op" id="7155636">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155641">Scheme</span><span class="op" id="7155647">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155651">&#34;http&#34;</span><span class="op" id="7155657">,</span><br>
<span class="lineno">875</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155662">Host</span><span class="op" id="7155666">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7155672">&#34;example.com&#34;</span><span class="op" id="7155685">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155690">Path</span><span class="op" id="7155694">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="7155700">&#34;/a&nbsp;b&#34;</span><span class="op" id="7155706">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155711">RawQuery</span><span class="op" id="7155719">:</span>&nbsp;<span class="string" id="7155721">&#34;q=go+language&#34;</span><span class="op" id="7155736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155740">}</span><span class="op" id="7155741">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155745">&#34;/a%20b?q=go+language&#34;</span><span class="op" id="7155767">,</span><br>
<span class="lineno">880</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155770">}</span><span class="op" id="7155771">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155778">&amp;</span><span class="ident" id="7155779">URL</span><span class="op" id="7155782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155787">Scheme</span><span class="op" id="7155793">:</span>&nbsp;<span class="string" id="7155795">&#34;myschema&#34;</span><span class="op" id="7155805">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155810">Opaque</span><span class="op" id="7155816">:</span>&nbsp;<span class="string" id="7155818">&#34;opaque&#34;</span><span class="op" id="7155826">,</span><br>
<span class="lineno">885</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155830">}</span><span class="op" id="7155831">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155835">&#34;opaque&#34;</span><span class="op" id="7155843">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155846">}</span><span class="op" id="7155847">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155854">&amp;</span><span class="ident" id="7155855">URL</span><span class="op" id="7155858">{</span><br>
<span class="lineno">890</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155863">Scheme</span><span class="op" id="7155869">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155873">&#34;myschema&#34;</span><span class="op" id="7155883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155888">Opaque</span><span class="op" id="7155894">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="7155898">&#34;opaque&#34;</span><span class="op" id="7155906">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7155911">RawQuery</span><span class="op" id="7155919">:</span>&nbsp;<span class="string" id="7155921">&#34;q=go+language&#34;</span><span class="op" id="7155936">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155940">}</span><span class="op" id="7155941">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7155945">&#34;opaque?q=go+language&#34;</span><span class="op" id="7155967">,</span><br>
<span class="lineno">895</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7155970">}</span><span class="op" id="7155971">,</span><br>
<span class="lineno"></span><span class="op" id="7155973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7155976">func</span>&nbsp;<span class="ident" id="7155981">TestRequestURI</span><span class="op" id="7155995">(</span><span class="ident" id="7155996">t</span>&nbsp;<span class="op" id="7155998">*</span><span class="ident" id="7155999">testing</span><span class="op" id="7156006">.</span><span class="ident" id="7156007">T</span><span class="op" id="7156008">)</span>&nbsp;<span class="op" id="7156010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156013">for</span>&nbsp;<span class="ident" id="7156017">_</span><span class="op" id="7156018">,</span>&nbsp;<span class="ident" id="7156020">tt</span>&nbsp;<span class="op" id="7156023">:=</span>&nbsp;<span class="keyword" id="7156026">range</span>&nbsp;<span class="ident" id="7156032">requritests</span>&nbsp;<span class="op" id="7156044">{</span><br>
<span class="lineno">900</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156048">s</span>&nbsp;<span class="op" id="7156050">:=</span>&nbsp;<span class="ident" id="7156053">tt</span><span class="op" id="7156055">.</span><span class="ident" id="7156056">url</span><span class="op" id="7156059">.</span><span class="ident" id="7156060">RequestURI</span><span class="op" id="7156070">(</span><span class="op" id="7156071">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156075">if</span>&nbsp;<span class="ident" id="7156078">s</span>&nbsp;<span class="op" id="7156080">!=</span>&nbsp;<span class="ident" id="7156083">tt</span><span class="op" id="7156085">.</span><span class="ident" id="7156086">out</span>&nbsp;<span class="op" id="7156090">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156095">t</span><span class="op" id="7156096">.</span><span class="ident" id="7156097">Errorf</span><span class="op" id="7156103">(</span><span class="string" id="7156104">&#34;%#v.RequestURI()&nbsp;==&nbsp;%q&nbsp;(expected&nbsp;%q)&#34;</span><span class="op" id="7156142">,</span>&nbsp;<span class="ident" id="7156144">tt</span><span class="op" id="7156146">.</span><span class="ident" id="7156147">url</span><span class="op" id="7156150">,</span>&nbsp;<span class="ident" id="7156152">s</span><span class="op" id="7156153">,</span>&nbsp;<span class="ident" id="7156155">tt</span><span class="op" id="7156157">.</span><span class="ident" id="7156158">out</span><span class="op" id="7156161">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156165">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156168">}</span><br>
<span class="lineno">905</span><span class="op" id="7156170">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156173">func</span>&nbsp;<span class="ident" id="7156178">TestParseFailure</span><span class="op" id="7156194">(</span><span class="ident" id="7156195">t</span>&nbsp;<span class="op" id="7156197">*</span><span class="ident" id="7156198">testing</span><span class="op" id="7156205">.</span><span class="ident" id="7156206">T</span><span class="op" id="7156207">)</span>&nbsp;<span class="op" id="7156209">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7156212">//&nbsp;Test&nbsp;that&nbsp;the&nbsp;first&nbsp;parse&nbsp;error&nbsp;is&nbsp;returned.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156261">const</span>&nbsp;<span class="ident" id="7156267">url</span>&nbsp;<span class="op" id="7156271">=</span>&nbsp;<span class="string" id="7156273">&#34;%gh&amp;%ij&#34;</span><br>
<span class="lineno">910</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156284">_</span><span class="op" id="7156285">,</span>&nbsp;<span class="ident" id="7156287">err</span>&nbsp;<span class="op" id="7156291">:=</span>&nbsp;<span class="ident" id="7156294">ParseQuery</span><span class="op" id="7156304">(</span><span class="ident" id="7156305">url</span><span class="op" id="7156308">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156311">errStr</span>&nbsp;<span class="op" id="7156318">:=</span>&nbsp;<span class="ident" id="7156321">fmt</span><span class="op" id="7156324">.</span><span class="ident" id="7156325">Sprint</span><span class="op" id="7156331">(</span><span class="ident" id="7156332">err</span><span class="op" id="7156335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7156338">if</span>&nbsp;<span class="op" id="7156341">!</span><span class="ident" id="7156342">strings</span><span class="op" id="7156349">.</span><span class="ident" id="7156350">Contains</span><span class="op" id="7156358">(</span><span class="ident" id="7156359">errStr</span><span class="op" id="7156365">,</span>&nbsp;<span class="string" id="7156367">&#34;%gh&#34;</span><span class="op" id="7156372">)</span>&nbsp;<span class="op" id="7156374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156378">t</span><span class="op" id="7156379">.</span><span class="ident" id="7156380">Errorf</span><span class="op" id="7156386">(</span><span class="string" id="7156387">`ParseQuery(%q)&nbsp;returned&nbsp;error&nbsp;%q,&nbsp;want&nbsp;something&nbsp;containing&nbsp;%q&#34;`</span><span class="op" id="7156452">,</span>&nbsp;<span class="ident" id="7156454">url</span><span class="op" id="7156457">,</span>&nbsp;<span class="ident" id="7156459">errStr</span><span class="op" id="7156465">,</span>&nbsp;<span class="string" id="7156467">&#34;%gh&#34;</span><span class="op" id="7156472">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156475">}</span><br>
<span class="lineno">915</span><span class="op" id="7156477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156480">type</span>&nbsp;<span class="ident" id="7156485">shouldEscapeTest</span>&nbsp;<span class="keyword" id="7156502">struct</span>&nbsp;<span class="op" id="7156509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156512">in</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7156519">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156525">mode</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="7156532">encoding</span><br>
<span class="lineno">920</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7156542">escape</span>&nbsp;<span class="builtintype" id="7156549">bool</span><br>
<span class="lineno"></span><span class="op" id="7156554">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7156557">var</span>&nbsp;<span class="ident" id="7156561">shouldEscapeTests</span>&nbsp;<span class="op" id="7156579">=</span>&nbsp;<span class="op" id="7156581">[</span><span class="op" id="7156582">]</span><span class="ident" id="7156583">shouldEscapeTest</span><span class="op" id="7156599">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7156602">//&nbsp;Unreserved&nbsp;characters&nbsp;(2.3)</span><br>
<span class="lineno">925</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156636">{</span><span class="string" id="7156637">&#39;a&#39;</span><span class="op" id="7156640">,</span>&nbsp;<span class="ident" id="7156642">encodePath</span><span class="op" id="7156652">,</span>&nbsp;<span class="builtintype" id="7156654">false</span><span class="op" id="7156659">}</span><span class="op" id="7156660">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156663">{</span><span class="string" id="7156664">&#39;a&#39;</span><span class="op" id="7156667">,</span>&nbsp;<span class="ident" id="7156669">encodeUserPassword</span><span class="op" id="7156687">,</span>&nbsp;<span class="builtintype" id="7156689">false</span><span class="op" id="7156694">}</span><span class="op" id="7156695">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156698">{</span><span class="string" id="7156699">&#39;a&#39;</span><span class="op" id="7156702">,</span>&nbsp;<span class="ident" id="7156704">encodeQueryComponent</span><span class="op" id="7156724">,</span>&nbsp;<span class="builtintype" id="7156726">false</span><span class="op" id="7156731">}</span><span class="op" id="7156732">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156735">{</span><span class="string" id="7156736">&#39;a&#39;</span><span class="op" id="7156739">,</span>&nbsp;<span class="ident" id="7156741">encodeFragment</span><span class="op" id="7156755">,</span>&nbsp;<span class="builtintype" id="7156757">false</span><span class="op" id="7156762">}</span><span class="op" id="7156763">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156766">{</span><span class="string" id="7156767">&#39;z&#39;</span><span class="op" id="7156770">,</span>&nbsp;<span class="ident" id="7156772">encodePath</span><span class="op" id="7156782">,</span>&nbsp;<span class="builtintype" id="7156784">false</span><span class="op" id="7156789">}</span><span class="op" id="7156790">,</span><br>
<span class="lineno">930</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156793">{</span><span class="string" id="7156794">&#39;A&#39;</span><span class="op" id="7156797">,</span>&nbsp;<span class="ident" id="7156799">encodePath</span><span class="op" id="7156809">,</span>&nbsp;<span class="builtintype" id="7156811">false</span><span class="op" id="7156816">}</span><span class="op" id="7156817">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156820">{</span><span class="string" id="7156821">&#39;Z&#39;</span><span class="op" id="7156824">,</span>&nbsp;<span class="ident" id="7156826">encodePath</span><span class="op" id="7156836">,</span>&nbsp;<span class="builtintype" id="7156838">false</span><span class="op" id="7156843">}</span><span class="op" id="7156844">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156847">{</span><span class="string" id="7156848">&#39;0&#39;</span><span class="op" id="7156851">,</span>&nbsp;<span class="ident" id="7156853">encodePath</span><span class="op" id="7156863">,</span>&nbsp;<span class="builtintype" id="7156865">false</span><span class="op" id="7156870">}</span><span class="op" id="7156871">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156874">{</span><span class="string" id="7156875">&#39;9&#39;</span><span class="op" id="7156878">,</span>&nbsp;<span class="ident" id="7156880">encodePath</span><span class="op" id="7156890">,</span>&nbsp;<span class="builtintype" id="7156892">false</span><span class="op" id="7156897">}</span><span class="op" id="7156898">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156901">{</span><span class="string" id="7156902">&#39;-&#39;</span><span class="op" id="7156905">,</span>&nbsp;<span class="ident" id="7156907">encodePath</span><span class="op" id="7156917">,</span>&nbsp;<span class="builtintype" id="7156919">false</span><span class="op" id="7156924">}</span><span class="op" id="7156925">,</span><br>
<span class="lineno">935</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156928">{</span><span class="string" id="7156929">&#39;-&#39;</span><span class="op" id="7156932">,</span>&nbsp;<span class="ident" id="7156934">encodeUserPassword</span><span class="op" id="7156952">,</span>&nbsp;<span class="builtintype" id="7156954">false</span><span class="op" id="7156959">}</span><span class="op" id="7156960">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7156963">{</span><span class="string" id="7156964">&#39;-&#39;</span><span class="op" id="7156967">,</span>&nbsp;<span class="ident" id="7156969">encodeQueryComponent</span><span class="op" id="7156989">,</span>&nbsp;<span class="builtintype" id="7156991">false</span><span class="op" id="7156996">}</span><span class="op" id="7156997">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157000">{</span><span class="string" id="7157001">&#39;-&#39;</span><span class="op" id="7157004">,</span>&nbsp;<span class="ident" id="7157006">encodeFragment</span><span class="op" id="7157020">,</span>&nbsp;<span class="builtintype" id="7157022">false</span><span class="op" id="7157027">}</span><span class="op" id="7157028">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157031">{</span><span class="string" id="7157032">&#39;.&#39;</span><span class="op" id="7157035">,</span>&nbsp;<span class="ident" id="7157037">encodePath</span><span class="op" id="7157047">,</span>&nbsp;<span class="builtintype" id="7157049">false</span><span class="op" id="7157054">}</span><span class="op" id="7157055">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157058">{</span><span class="string" id="7157059">&#39;_&#39;</span><span class="op" id="7157062">,</span>&nbsp;<span class="ident" id="7157064">encodePath</span><span class="op" id="7157074">,</span>&nbsp;<span class="builtintype" id="7157076">false</span><span class="op" id="7157081">}</span><span class="op" id="7157082">,</span><br>
<span class="lineno">940</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157085">{</span><span class="string" id="7157086">&#39;~&#39;</span><span class="op" id="7157089">,</span>&nbsp;<span class="ident" id="7157091">encodePath</span><span class="op" id="7157101">,</span>&nbsp;<span class="builtintype" id="7157103">false</span><span class="op" id="7157108">}</span><span class="op" id="7157109">,</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7157113">//&nbsp;User&nbsp;information&nbsp;(3.2.1)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157144">{</span><span class="string" id="7157145">&#39;:&#39;</span><span class="op" id="7157148">,</span>&nbsp;<span class="ident" id="7157150">encodeUserPassword</span><span class="op" id="7157168">,</span>&nbsp;<span class="builtintype" id="7157170">true</span><span class="op" id="7157174">}</span><span class="op" id="7157175">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157178">{</span><span class="string" id="7157179">&#39;/&#39;</span><span class="op" id="7157182">,</span>&nbsp;<span class="ident" id="7157184">encodeUserPassword</span><span class="op" id="7157202">,</span>&nbsp;<span class="builtintype" id="7157204">true</span><span class="op" id="7157208">}</span><span class="op" id="7157209">,</span><br>
<span class="lineno">945</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157212">{</span><span class="string" id="7157213">&#39;?&#39;</span><span class="op" id="7157216">,</span>&nbsp;<span class="ident" id="7157218">encodeUserPassword</span><span class="op" id="7157236">,</span>&nbsp;<span class="builtintype" id="7157238">true</span><span class="op" id="7157242">}</span><span class="op" id="7157243">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157246">{</span><span class="string" id="7157247">&#39;@&#39;</span><span class="op" id="7157250">,</span>&nbsp;<span class="ident" id="7157252">encodeUserPassword</span><span class="op" id="7157270">,</span>&nbsp;<span class="builtintype" id="7157272">true</span><span class="op" id="7157276">}</span><span class="op" id="7157277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157280">{</span><span class="string" id="7157281">&#39;$&#39;</span><span class="op" id="7157284">,</span>&nbsp;<span class="ident" id="7157286">encodeUserPassword</span><span class="op" id="7157304">,</span>&nbsp;<span class="builtintype" id="7157306">false</span><span class="op" id="7157311">}</span><span class="op" id="7157312">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157315">{</span><span class="string" id="7157316">&#39;&amp;&#39;</span><span class="op" id="7157319">,</span>&nbsp;<span class="ident" id="7157321">encodeUserPassword</span><span class="op" id="7157339">,</span>&nbsp;<span class="builtintype" id="7157341">false</span><span class="op" id="7157346">}</span><span class="op" id="7157347">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157350">{</span><span class="string" id="7157351">&#39;+&#39;</span><span class="op" id="7157354">,</span>&nbsp;<span class="ident" id="7157356">encodeUserPassword</span><span class="op" id="7157374">,</span>&nbsp;<span class="builtintype" id="7157376">false</span><span class="op" id="7157381">}</span><span class="op" id="7157382">,</span><br>
<span class="lineno">950</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157385">{</span><span class="string" id="7157386">&#39;,&#39;</span><span class="op" id="7157389">,</span>&nbsp;<span class="ident" id="7157391">encodeUserPassword</span><span class="op" id="7157409">,</span>&nbsp;<span class="builtintype" id="7157411">false</span><span class="op" id="7157416">}</span><span class="op" id="7157417">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157420">{</span><span class="string" id="7157421">&#39;;&#39;</span><span class="op" id="7157424">,</span>&nbsp;<span class="ident" id="7157426">encodeUserPassword</span><span class="op" id="7157444">,</span>&nbsp;<span class="builtintype" id="7157446">false</span><span class="op" id="7157451">}</span><span class="op" id="7157452">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157455">{</span><span class="string" id="7157456">&#39;=&#39;</span><span class="op" id="7157459">,</span>&nbsp;<span class="ident" id="7157461">encodeUserPassword</span><span class="op" id="7157479">,</span>&nbsp;<span class="builtintype" id="7157481">false</span><span class="op" id="7157486">}</span><span class="op" id="7157487">,</span><br>
<span class="lineno"></span><span class="op" id="7157489">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">955</span><span class="keyword" id="7157492">func</span>&nbsp;<span class="ident" id="7157497">TestShouldEscape</span><span class="op" id="7157513">(</span><span class="ident" id="7157514">t</span>&nbsp;<span class="op" id="7157516">*</span><span class="ident" id="7157517">testing</span><span class="op" id="7157524">.</span><span class="ident" id="7157525">T</span><span class="op" id="7157526">)</span>&nbsp;<span class="op" id="7157528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7157531">for</span>&nbsp;<span class="ident" id="7157535">_</span><span class="op" id="7157536">,</span>&nbsp;<span class="ident" id="7157538">tt</span>&nbsp;<span class="op" id="7157541">:=</span>&nbsp;<span class="keyword" id="7157544">range</span>&nbsp;<span class="ident" id="7157550">shouldEscapeTests</span>&nbsp;<span class="op" id="7157568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7157572">if</span>&nbsp;<span class="ident" id="7157575">shouldEscape</span><span class="op" id="7157587">(</span><span class="ident" id="7157588">tt</span><span class="op" id="7157590">.</span><span class="ident" id="7157591">in</span><span class="op" id="7157593">,</span>&nbsp;<span class="ident" id="7157595">tt</span><span class="op" id="7157597">.</span><span class="ident" id="7157598">mode</span><span class="op" id="7157602">)</span>&nbsp;<span class="op" id="7157604">!=</span>&nbsp;<span class="ident" id="7157607">tt</span><span class="op" id="7157609">.</span><span class="ident" id="7157610">escape</span>&nbsp;<span class="op" id="7157617">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7157622">t</span><span class="op" id="7157623">.</span><span class="ident" id="7157624">Errorf</span><span class="op" id="7157630">(</span><span class="string" id="7157631">&#34;shouldEscape(%q,&nbsp;%v)&nbsp;returned&nbsp;%v;&nbsp;expected&nbsp;%v&#34;</span><span class="op" id="7157678">,</span>&nbsp;<span class="ident" id="7157680">tt</span><span class="op" id="7157682">.</span><span class="ident" id="7157683">in</span><span class="op" id="7157685">,</span>&nbsp;<span class="ident" id="7157687">tt</span><span class="op" id="7157689">.</span><span class="ident" id="7157690">mode</span><span class="op" id="7157694">,</span>&nbsp;<span class="op" id="7157696">!</span><span class="ident" id="7157697">tt</span><span class="op" id="7157699">.</span><span class="ident" id="7157700">escape</span><span class="op" id="7157706">,</span>&nbsp;<span class="ident" id="7157708">tt</span><span class="op" id="7157710">.</span><span class="ident" id="7157711">escape</span><span class="op" id="7157717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157721">}</span><br>
<span class="lineno">960</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7157724">}</span><br>
<span class="lineno"></span><span class="op" id="7157726">}</span>
</div>
</body>
</html>
