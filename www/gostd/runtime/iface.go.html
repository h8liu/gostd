<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>runtime</h2>
<ul>
<li><a href="/gostd/runtime/alg.go.html">alg.go</a></li>
<li><a href="/gostd/runtime/append_test.go.html">append_test.go</a></li>
<li><a href="/gostd/runtime/arch_amd64.go.html">arch_amd64.go</a></li>
<li><a href="/gostd/runtime/atomic.go.html">atomic.go</a></li>
<li><a href="/gostd/runtime/cgocall.go.html">cgocall.go</a></li>
<li><a href="/gostd/runtime/cgocallback.go.html">cgocallback.go</a></li>
<li><a href="/gostd/runtime/chan.go.html">chan.go</a></li>
<li><a href="/gostd/runtime/chan_test.go.html">chan_test.go</a></li>
<li><a href="/gostd/runtime/closure_test.go.html">closure_test.go</a></li>
<li><a href="/gostd/runtime/compiler.go.html">compiler.go</a></li>
<li><a href="/gostd/runtime/complex.go.html">complex.go</a></li>
<li><a href="/gostd/runtime/complex_test.go.html">complex_test.go</a></li>
<li><a href="/gostd/runtime/cpuprof.go.html">cpuprof.go</a></li>
<li><a href="/gostd/runtime/crash_test.go.html">crash_test.go</a></li>
<li><a href="/gostd/runtime/debug.go.html">debug.go</a></li>
<li><a href="/gostd/runtime/env_posix.go.html">env_posix.go</a></li>
<li><a href="/gostd/runtime/error.go.html">error.go</a></li>
<li><a href="/gostd/runtime/export_futex_test.go.html">export_futex_test.go</a></li>
<li><a href="/gostd/runtime/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/runtime/extern.go.html">extern.go</a></li>
<li><a href="/gostd/runtime/futex_test.go.html">futex_test.go</a></li>
<li><a href="/gostd/runtime/gc_test.go.html">gc_test.go</a></li>
<li><a href="/gostd/runtime/gcinfo_test.go.html">gcinfo_test.go</a></li>
<li><a href="/gostd/runtime/hash_test.go.html">hash_test.go</a></li>
<li><a href="/gostd/runtime/hashmap.go.html">hashmap.go</a></li>
<li><a href="/gostd/runtime/hashmap_fast.go.html">hashmap_fast.go</a></li>
<li><a href="/gostd/runtime/iface.go.html" class="current">iface.go</a></li>
<li><a href="/gostd/runtime/iface_test.go.html">iface_test.go</a></li>
<li><a href="/gostd/runtime/lfstack_test.go.html">lfstack_test.go</a></li>
<li><a href="/gostd/runtime/lock_futex.go.html">lock_futex.go</a></li>
<li><a href="/gostd/runtime/malloc.go.html">malloc.go</a></li>
<li><a href="/gostd/runtime/malloc_test.go.html">malloc_test.go</a></li>
<li><a href="/gostd/runtime/map_test.go.html">map_test.go</a></li>
<li><a href="/gostd/runtime/mapspeed_test.go.html">mapspeed_test.go</a></li>
<li><a href="/gostd/runtime/mem.go.html">mem.go</a></li>
<li><a href="/gostd/runtime/memmove_linux_amd64_test.go.html">memmove_linux_amd64_test.go</a></li>
<li><a href="/gostd/runtime/memmove_test.go.html">memmove_test.go</a></li>
<li><a href="/gostd/runtime/mfinal_test.go.html">mfinal_test.go</a></li>
<li><a href="/gostd/runtime/mgc0.go.html">mgc0.go</a></li>
<li><a href="/gostd/runtime/mprof.go.html">mprof.go</a></li>
<li><a href="/gostd/runtime/netpoll.go.html">netpoll.go</a></li>
<li><a href="/gostd/runtime/netpoll_epoll.go.html">netpoll_epoll.go</a></li>
<li><a href="/gostd/runtime/norace_test.go.html">norace_test.go</a></li>
<li><a href="/gostd/runtime/os_linux.go.html">os_linux.go</a></li>
<li><a href="/gostd/runtime/panic.go.html">panic.go</a></li>
<li><a href="/gostd/runtime/parfor_test.go.html">parfor_test.go</a></li>
<li><a href="/gostd/runtime/print1.go.html">print1.go</a></li>
<li><a href="/gostd/runtime/proc.go.html">proc.go</a></li>
<li><a href="/gostd/runtime/proc_test.go.html">proc_test.go</a></li>
<li><a href="/gostd/runtime/race0.go.html">race0.go</a></li>
<li><a href="/gostd/runtime/rdebug.go.html">rdebug.go</a></li>
<li><a href="/gostd/runtime/rune.go.html">rune.go</a></li>
<li><a href="/gostd/runtime/runtime.go.html">runtime.go</a></li>
<li><a href="/gostd/runtime/runtime_linux_test.go.html">runtime_linux_test.go</a></li>
<li><a href="/gostd/runtime/runtime_test.go.html">runtime_test.go</a></li>
<li><a href="/gostd/runtime/runtime_unix_test.go.html">runtime_unix_test.go</a></li>
<li><a href="/gostd/runtime/select.go.html">select.go</a></li>
<li><a href="/gostd/runtime/sema.go.html">sema.go</a></li>
<li><a href="/gostd/runtime/signal_unix.go.html">signal_unix.go</a></li>
<li><a href="/gostd/runtime/sigpanic_unix.go.html">sigpanic_unix.go</a></li>
<li><a href="/gostd/runtime/sigqueue.go.html">sigqueue.go</a></li>
<li><a href="/gostd/runtime/slice.go.html">slice.go</a></li>
<li><a href="/gostd/runtime/softfloat64.go.html">softfloat64.go</a></li>
<li><a href="/gostd/runtime/softfloat64_test.go.html">softfloat64_test.go</a></li>
<li><a href="/gostd/runtime/sqrt.go.html">sqrt.go</a></li>
<li><a href="/gostd/runtime/stack.go.html">stack.go</a></li>
<li><a href="/gostd/runtime/stack_test.go.html">stack_test.go</a></li>
<li><a href="/gostd/runtime/string.go.html">string.go</a></li>
<li><a href="/gostd/runtime/string_test.go.html">string_test.go</a></li>
<li><a href="/gostd/runtime/stubs.go.html">stubs.go</a></li>
<li><a href="/gostd/runtime/symtab.go.html">symtab.go</a></li>
<li><a href="/gostd/runtime/symtab_test.go.html">symtab_test.go</a></li>
<li><a href="/gostd/runtime/time.go.html">time.go</a></li>
<li><a href="/gostd/runtime/traceback.go.html">traceback.go</a></li>
<li><a href="/gostd/runtime/typekind.go.html">typekind.go</a></li>
<li><a href="/gostd/runtime/zgoarch_amd64.go.html">zgoarch_amd64.go</a></li>
<li><a href="/gostd/runtime/zgoos_linux.go.html">zgoos_linux.go</a></li>
<li><a href="/gostd/runtime/zruntime_defs_linux_amd64.go.html">zruntime_defs_linux_amd64.go</a></li>
<li><a href="/gostd/runtime/zversion.go.html">zversion.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="1520463">//&nbsp;Copyright&nbsp;2014&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="1520518">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="1520572">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="1520623">package</span>&nbsp;<span class="ident" id="1520631">runtime</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1520640">import</span>&nbsp;<span class="op" id="1520647">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="1520650">&#34;unsafe&#34;</span><br>
<span class="lineno"></span><span class="op" id="1520659">)</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="1520662">const</span>&nbsp;<span class="op" id="1520668">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1520671">hashSize</span>&nbsp;<span class="op" id="1520680">=</span>&nbsp;<span class="num" id="1520682">1009</span><br>
<span class="lineno"></span><span class="op" id="1520687">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="1520690">var</span>&nbsp;<span class="op" id="1520694">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1520697">ifaceLock</span>&nbsp;<span class="ident" id="1520707">mutex</span>&nbsp;<span class="comment" id="1520713">//&nbsp;lock&nbsp;for&nbsp;accessing&nbsp;hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1520741">hash</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1520751">[</span><span class="ident" id="1520752">hashSize</span><span class="op" id="1520760">]</span><span class="op" id="1520761">*</span><span class="ident" id="1520762">itab</span><br>
<span class="lineno"></span><span class="op" id="1520767">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="1520770">//&nbsp;fInterface&nbsp;is&nbsp;our&nbsp;standard&nbsp;non-empty&nbsp;interface.&nbsp;&nbsp;We&nbsp;use&nbsp;it&nbsp;instead</span><br>
<span class="lineno"></span><span class="comment" id="1520840">//&nbsp;of&nbsp;interface{f()}&nbsp;in&nbsp;function&nbsp;prototypes&nbsp;because&nbsp;gofmt&nbsp;insists&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="1520909">//&nbsp;putting&nbsp;lots&nbsp;of&nbsp;newlines&nbsp;in&nbsp;the&nbsp;otherwise&nbsp;concise&nbsp;interface{f()}.</span><br>
<span class="lineno"></span><span class="keyword" id="1520978">type</span>&nbsp;<span class="ident" id="1520983">fInterface</span>&nbsp;<span class="keyword" id="1520994">interface</span>&nbsp;<span class="op" id="1521004">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521007">f</span><span class="op" id="1521008">(</span><span class="op" id="1521009">)</span><br>
<span class="lineno">25</span><span class="op" id="1521011">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1521014">func</span>&nbsp;<span class="ident" id="1521019">getitab</span><span class="op" id="1521026">(</span><span class="ident" id="1521027">inter</span>&nbsp;<span class="op" id="1521033">*</span><span class="ident" id="1521034">interfacetype</span><span class="op" id="1521047">,</span>&nbsp;<span class="ident" id="1521049">typ</span>&nbsp;<span class="op" id="1521053">*</span><span class="ident" id="1521054">_type</span><span class="op" id="1521059">,</span>&nbsp;<span class="ident" id="1521061">canfail</span>&nbsp;<span class="builtintype" id="1521069">bool</span><span class="op" id="1521073">)</span>&nbsp;<span class="op" id="1521075">*</span><span class="ident" id="1521076">itab</span>&nbsp;<span class="op" id="1521081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521084">if</span>&nbsp;<span class="builtinfunc" id="1521087">len</span><span class="op" id="1521090">(</span><span class="ident" id="1521091">inter</span><span class="op" id="1521096">.</span><span class="ident" id="1521097">mhdr</span><span class="op" id="1521101">)</span>&nbsp;<span class="op" id="1521103">==</span>&nbsp;<span class="num" id="1521106">0</span>&nbsp;<span class="op" id="1521108">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521112">gothrow</span><span class="op" id="1521119">(</span><span class="string" id="1521120">&#34;internal&nbsp;error&nbsp;-&nbsp;misuse&nbsp;of&nbsp;itab&#34;</span><span class="op" id="1521153">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1521156">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521160">//&nbsp;easy&nbsp;case</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521174">x</span>&nbsp;<span class="op" id="1521176">:=</span>&nbsp;<span class="ident" id="1521179">typ</span><span class="op" id="1521182">.</span><span class="ident" id="1521183">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521186">if</span>&nbsp;<span class="ident" id="1521189">x</span>&nbsp;<span class="op" id="1521191">==</span>&nbsp;<span class="ident" id="1521194">nil</span>&nbsp;<span class="op" id="1521198">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521202">if</span>&nbsp;<span class="ident" id="1521205">canfail</span>&nbsp;<span class="op" id="1521213">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521218">return</span>&nbsp;<span class="ident" id="1521225">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1521231">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521235">i</span>&nbsp;<span class="op" id="1521237">:=</span>&nbsp;<span class="op" id="1521240">(</span><span class="op" id="1521241">*</span><span class="ident" id="1521242">imethod</span><span class="op" id="1521249">)</span><span class="op" id="1521250">(</span><span class="ident" id="1521251">add</span><span class="op" id="1521254">(</span><span class="ident" id="1521255">unsafe</span><span class="op" id="1521261">.</span><span class="ident" id="1521262">Pointer</span><span class="op" id="1521269">(</span><span class="ident" id="1521270">inter</span><span class="op" id="1521275">)</span><span class="op" id="1521276">,</span>&nbsp;<span class="ident" id="1521278">unsafe</span><span class="op" id="1521284">.</span><span class="ident" id="1521285">Sizeof</span><span class="op" id="1521291">(</span><span class="ident" id="1521292">interfacetype</span><span class="op" id="1521305">{</span><span class="op" id="1521306">}</span><span class="op" id="1521307">)</span><span class="op" id="1521308">)</span><span class="op" id="1521309">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1521313">panic</span><span class="op" id="1521318">(</span><span class="op" id="1521319">&amp;</span><span class="ident" id="1521320">TypeAssertionError</span><span class="op" id="1521338">{</span><span class="string" id="1521339">&#34;&#34;</span><span class="op" id="1521341">,</span>&nbsp;<span class="op" id="1521343">*</span><span class="ident" id="1521344">typ</span><span class="op" id="1521347">.</span><span class="ident" id="1521348">_string</span><span class="op" id="1521355">,</span>&nbsp;<span class="op" id="1521357">*</span><span class="ident" id="1521358">inter</span><span class="op" id="1521363">.</span><span class="ident" id="1521364">typ</span><span class="op" id="1521367">.</span><span class="ident" id="1521368">_string</span><span class="op" id="1521375">,</span>&nbsp;<span class="op" id="1521377">*</span><span class="ident" id="1521378">i</span><span class="op" id="1521379">.</span><span class="ident" id="1521380">name</span><span class="op" id="1521384">}</span><span class="op" id="1521385">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1521388">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521392">//&nbsp;compiler&nbsp;has&nbsp;provided&nbsp;some&nbsp;good&nbsp;hash&nbsp;codes&nbsp;for&nbsp;us.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521447">h</span>&nbsp;<span class="op" id="1521449">:=</span>&nbsp;<span class="ident" id="1521452">inter</span><span class="op" id="1521457">.</span><span class="ident" id="1521458">typ</span><span class="op" id="1521461">.</span><span class="ident" id="1521462">hash</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521468">h</span>&nbsp;<span class="op" id="1521470">+=</span>&nbsp;<span class="num" id="1521473">17</span>&nbsp;<span class="op" id="1521476">*</span>&nbsp;<span class="ident" id="1521478">typ</span><span class="op" id="1521481">.</span><span class="ident" id="1521482">hash</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521488">//&nbsp;TODO(rsc):&nbsp;h&nbsp;+=&nbsp;23&nbsp;*&nbsp;x.mhash&nbsp;?</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521523">h</span>&nbsp;<span class="op" id="1521525">%=</span>&nbsp;<span class="ident" id="1521528">hashSize</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521539">//&nbsp;look&nbsp;twice&nbsp;-&nbsp;once&nbsp;without&nbsp;lock,&nbsp;once&nbsp;with.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521586">//&nbsp;common&nbsp;case&nbsp;will&nbsp;be&nbsp;no&nbsp;lock&nbsp;contention.</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521630">var</span>&nbsp;<span class="ident" id="1521634">m</span>&nbsp;<span class="op" id="1521636">*</span><span class="ident" id="1521637">itab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521643">var</span>&nbsp;<span class="ident" id="1521647">locked</span>&nbsp;<span class="builtintype" id="1521654">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521659">for</span>&nbsp;<span class="ident" id="1521663">locked</span>&nbsp;<span class="op" id="1521670">=</span>&nbsp;<span class="num" id="1521672">0</span><span class="op" id="1521673">;</span>&nbsp;<span class="ident" id="1521675">locked</span>&nbsp;<span class="op" id="1521682">&lt;</span>&nbsp;<span class="num" id="1521684">2</span><span class="op" id="1521685">;</span>&nbsp;<span class="ident" id="1521687">locked</span><span class="op" id="1521693">++</span>&nbsp;<span class="op" id="1521696">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521700">if</span>&nbsp;<span class="ident" id="1521703">locked</span>&nbsp;<span class="op" id="1521710">!=</span>&nbsp;<span class="num" id="1521713">0</span>&nbsp;<span class="op" id="1521715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521720">lock</span><span class="op" id="1521724">(</span><span class="op" id="1521725">&amp;</span><span class="ident" id="1521726">ifaceLock</span><span class="op" id="1521735">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1521739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521743">for</span>&nbsp;<span class="ident" id="1521747">m</span>&nbsp;<span class="op" id="1521749">=</span>&nbsp;<span class="op" id="1521751">(</span><span class="op" id="1521752">*</span><span class="ident" id="1521753">itab</span><span class="op" id="1521757">)</span><span class="op" id="1521758">(</span><span class="ident" id="1521759">atomicloadp</span><span class="op" id="1521770">(</span><span class="ident" id="1521771">unsafe</span><span class="op" id="1521777">.</span><span class="ident" id="1521778">Pointer</span><span class="op" id="1521785">(</span><span class="op" id="1521786">&amp;</span><span class="ident" id="1521787">hash</span><span class="op" id="1521791">[</span><span class="ident" id="1521792">h</span><span class="op" id="1521793">]</span><span class="op" id="1521794">)</span><span class="op" id="1521795">)</span><span class="op" id="1521796">)</span><span class="op" id="1521797">;</span>&nbsp;<span class="ident" id="1521799">m</span>&nbsp;<span class="op" id="1521801">!=</span>&nbsp;<span class="ident" id="1521804">nil</span><span class="op" id="1521807">;</span>&nbsp;<span class="ident" id="1521809">m</span>&nbsp;<span class="op" id="1521811">=</span>&nbsp;<span class="ident" id="1521813">m</span><span class="op" id="1521814">.</span><span class="ident" id="1521815">link</span>&nbsp;<span class="op" id="1521820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521825">if</span>&nbsp;<span class="ident" id="1521828">m</span><span class="op" id="1521829">.</span><span class="ident" id="1521830">inter</span>&nbsp;<span class="op" id="1521836">==</span>&nbsp;<span class="ident" id="1521839">inter</span>&nbsp;<span class="op" id="1521845">&amp;&amp;</span>&nbsp;<span class="ident" id="1521848">m</span><span class="op" id="1521849">.</span><span class="ident" id="1521850">_type</span>&nbsp;<span class="op" id="1521856">==</span>&nbsp;<span class="ident" id="1521859">typ</span>&nbsp;<span class="op" id="1521863">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521869">if</span>&nbsp;<span class="ident" id="1521872">m</span><span class="op" id="1521873">.</span><span class="ident" id="1521874">bad</span>&nbsp;<span class="op" id="1521878">!=</span>&nbsp;<span class="num" id="1521881">0</span>&nbsp;<span class="op" id="1521883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1521890">m</span>&nbsp;<span class="op" id="1521892">=</span>&nbsp;<span class="ident" id="1521894">nil</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1521903">if</span>&nbsp;<span class="op" id="1521906">!</span><span class="ident" id="1521907">canfail</span>&nbsp;<span class="op" id="1521915">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521923">//&nbsp;this&nbsp;can&nbsp;only&nbsp;happen&nbsp;if&nbsp;the&nbsp;conversion</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1521971">//&nbsp;was&nbsp;already&nbsp;done&nbsp;once&nbsp;using&nbsp;the&nbsp;,&nbsp;ok&nbsp;form</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522022">//&nbsp;and&nbsp;we&nbsp;have&nbsp;a&nbsp;cached&nbsp;negative&nbsp;result.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522069">//&nbsp;the&nbsp;cached&nbsp;result&nbsp;doesn&#39;t&nbsp;record&nbsp;which</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522117">//&nbsp;interface&nbsp;function&nbsp;was&nbsp;missing,&nbsp;so&nbsp;jump</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522166">//&nbsp;down&nbsp;to&nbsp;the&nbsp;interface&nbsp;check,&nbsp;which&nbsp;will</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522215">//&nbsp;do&nbsp;more&nbsp;work&nbsp;but&nbsp;give&nbsp;a&nbsp;better&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1522262">goto</span>&nbsp;<span class="ident" id="1522267">search</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522279">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522285">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1522291">if</span>&nbsp;<span class="ident" id="1522294">locked</span>&nbsp;<span class="op" id="1522301">!=</span>&nbsp;<span class="num" id="1522304">0</span>&nbsp;<span class="op" id="1522306">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522313">unlock</span><span class="op" id="1522319">(</span><span class="op" id="1522320">&amp;</span><span class="ident" id="1522321">ifaceLock</span><span class="op" id="1522330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522336">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1522342">return</span>&nbsp;<span class="ident" id="1522349">m</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522358">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1522361">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522365">m</span>&nbsp;<span class="op" id="1522367">=</span>&nbsp;<span class="op" id="1522369">(</span><span class="op" id="1522370">*</span><span class="ident" id="1522371">itab</span><span class="op" id="1522375">)</span><span class="op" id="1522376">(</span><span class="ident" id="1522377">persistentalloc</span><span class="op" id="1522392">(</span><span class="ident" id="1522393">unsafe</span><span class="op" id="1522399">.</span><span class="ident" id="1522400">Sizeof</span><span class="op" id="1522406">(</span><span class="ident" id="1522407">itab</span><span class="op" id="1522411">{</span><span class="op" id="1522412">}</span><span class="op" id="1522413">)</span><span class="op" id="1522414">+</span><span class="builtintype" id="1522415">uintptr</span><span class="op" id="1522422">(</span><span class="builtinfunc" id="1522423">len</span><span class="op" id="1522426">(</span><span class="ident" id="1522427">inter</span><span class="op" id="1522432">.</span><span class="ident" id="1522433">mhdr</span><span class="op" id="1522437">)</span><span class="op" id="1522438">)</span><span class="op" id="1522439">*</span><span class="ident" id="1522440">ptrSize</span><span class="op" id="1522447">,</span>&nbsp;<span class="num" id="1522449">0</span><span class="op" id="1522450">,</span>&nbsp;<span class="op" id="1522452">&amp;</span><span class="ident" id="1522453">memstats</span><span class="op" id="1522461">.</span><span class="ident" id="1522462">other_sys</span><span class="op" id="1522471">)</span><span class="op" id="1522472">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522475">m</span><span class="op" id="1522476">.</span><span class="ident" id="1522477">inter</span>&nbsp;<span class="op" id="1522483">=</span>&nbsp;<span class="ident" id="1522485">inter</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522492">m</span><span class="op" id="1522493">.</span><span class="ident" id="1522494">_type</span>&nbsp;<span class="op" id="1522500">=</span>&nbsp;<span class="ident" id="1522502">typ</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="ident" id="1522507">search</span><span class="op" id="1522513">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522516">//&nbsp;both&nbsp;inter&nbsp;and&nbsp;typ&nbsp;have&nbsp;method&nbsp;sorted&nbsp;by&nbsp;name,</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522567">//&nbsp;and&nbsp;interface&nbsp;names&nbsp;are&nbsp;unique,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522603">//&nbsp;so&nbsp;can&nbsp;iterate&nbsp;over&nbsp;both&nbsp;in&nbsp;lock&nbsp;step;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1522646">//&nbsp;the&nbsp;loop&nbsp;is&nbsp;O(ni+nt)&nbsp;not&nbsp;O(ni*nt).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522685">ni</span>&nbsp;<span class="op" id="1522688">:=</span>&nbsp;<span class="builtinfunc" id="1522691">len</span><span class="op" id="1522694">(</span><span class="ident" id="1522695">inter</span><span class="op" id="1522700">.</span><span class="ident" id="1522701">mhdr</span><span class="op" id="1522705">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522708">nt</span>&nbsp;<span class="op" id="1522711">:=</span>&nbsp;<span class="builtinfunc" id="1522714">len</span><span class="op" id="1522717">(</span><span class="ident" id="1522718">x</span><span class="op" id="1522719">.</span><span class="ident" id="1522720">mhdr</span><span class="op" id="1522724">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522727">j</span>&nbsp;<span class="op" id="1522729">:=</span>&nbsp;<span class="num" id="1522732">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1522735">for</span>&nbsp;<span class="ident" id="1522739">k</span>&nbsp;<span class="op" id="1522741">:=</span>&nbsp;<span class="num" id="1522744">0</span><span class="op" id="1522745">;</span>&nbsp;<span class="ident" id="1522747">k</span>&nbsp;<span class="op" id="1522749">&lt;</span>&nbsp;<span class="ident" id="1522751">ni</span><span class="op" id="1522753">;</span>&nbsp;<span class="ident" id="1522755">k</span><span class="op" id="1522756">++</span>&nbsp;<span class="op" id="1522759">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522763">i</span>&nbsp;<span class="op" id="1522765">:=</span>&nbsp;<span class="op" id="1522768">(</span><span class="op" id="1522769">*</span><span class="ident" id="1522770">imethod</span><span class="op" id="1522777">)</span><span class="op" id="1522778">(</span><span class="ident" id="1522779">add</span><span class="op" id="1522782">(</span><span class="ident" id="1522783">unsafe</span><span class="op" id="1522789">.</span><span class="ident" id="1522790">Pointer</span><span class="op" id="1522797">(</span><span class="ident" id="1522798">inter</span><span class="op" id="1522803">)</span><span class="op" id="1522804">,</span>&nbsp;<span class="ident" id="1522806">unsafe</span><span class="op" id="1522812">.</span><span class="ident" id="1522813">Sizeof</span><span class="op" id="1522819">(</span><span class="ident" id="1522820">interfacetype</span><span class="op" id="1522833">{</span><span class="op" id="1522834">}</span><span class="op" id="1522835">)</span><span class="op" id="1522836">+</span><span class="builtintype" id="1522837">uintptr</span><span class="op" id="1522844">(</span><span class="ident" id="1522845">k</span><span class="op" id="1522846">)</span><span class="op" id="1522847">*</span><span class="ident" id="1522848">unsafe</span><span class="op" id="1522854">.</span><span class="ident" id="1522855">Sizeof</span><span class="op" id="1522861">(</span><span class="ident" id="1522862">imethod</span><span class="op" id="1522869">{</span><span class="op" id="1522870">}</span><span class="op" id="1522871">)</span><span class="op" id="1522872">)</span><span class="op" id="1522873">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522877">iname</span>&nbsp;<span class="op" id="1522883">:=</span>&nbsp;<span class="ident" id="1522886">i</span><span class="op" id="1522887">.</span><span class="ident" id="1522888">name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522895">ipkgpath</span>&nbsp;<span class="op" id="1522904">:=</span>&nbsp;<span class="ident" id="1522907">i</span><span class="op" id="1522908">.</span><span class="ident" id="1522909">pkgpath</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522919">itype</span>&nbsp;<span class="op" id="1522925">:=</span>&nbsp;<span class="ident" id="1522928">i</span><span class="op" id="1522929">.</span><span class="ident" id="1522930">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1522938">for</span>&nbsp;<span class="op" id="1522942">;</span>&nbsp;<span class="ident" id="1522944">j</span>&nbsp;<span class="op" id="1522946">&lt;</span>&nbsp;<span class="ident" id="1522948">nt</span><span class="op" id="1522950">;</span>&nbsp;<span class="ident" id="1522952">j</span><span class="op" id="1522953">++</span>&nbsp;<span class="op" id="1522956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1522961">t</span>&nbsp;<span class="op" id="1522963">:=</span>&nbsp;<span class="op" id="1522966">(</span><span class="op" id="1522967">*</span><span class="ident" id="1522968">method</span><span class="op" id="1522974">)</span><span class="op" id="1522975">(</span><span class="ident" id="1522976">add</span><span class="op" id="1522979">(</span><span class="ident" id="1522980">unsafe</span><span class="op" id="1522986">.</span><span class="ident" id="1522987">Pointer</span><span class="op" id="1522994">(</span><span class="ident" id="1522995">x</span><span class="op" id="1522996">)</span><span class="op" id="1522997">,</span>&nbsp;<span class="ident" id="1522999">unsafe</span><span class="op" id="1523005">.</span><span class="ident" id="1523006">Sizeof</span><span class="op" id="1523012">(</span><span class="ident" id="1523013">uncommontype</span><span class="op" id="1523025">{</span><span class="op" id="1523026">}</span><span class="op" id="1523027">)</span><span class="op" id="1523028">+</span><span class="builtintype" id="1523029">uintptr</span><span class="op" id="1523036">(</span><span class="ident" id="1523037">j</span><span class="op" id="1523038">)</span><span class="op" id="1523039">*</span><span class="ident" id="1523040">unsafe</span><span class="op" id="1523046">.</span><span class="ident" id="1523047">Sizeof</span><span class="op" id="1523053">(</span><span class="ident" id="1523054">method</span><span class="op" id="1523060">{</span><span class="op" id="1523061">}</span><span class="op" id="1523062">)</span><span class="op" id="1523063">)</span><span class="op" id="1523064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523069">if</span>&nbsp;<span class="ident" id="1523072">t</span><span class="op" id="1523073">.</span><span class="ident" id="1523074">mtyp</span>&nbsp;<span class="op" id="1523079">==</span>&nbsp;<span class="ident" id="1523082">itype</span>&nbsp;<span class="op" id="1523088">&amp;&amp;</span>&nbsp;<span class="ident" id="1523091">t</span><span class="op" id="1523092">.</span><span class="ident" id="1523093">name</span>&nbsp;<span class="op" id="1523098">==</span>&nbsp;<span class="ident" id="1523101">iname</span>&nbsp;<span class="op" id="1523107">&amp;&amp;</span>&nbsp;<span class="ident" id="1523110">t</span><span class="op" id="1523111">.</span><span class="ident" id="1523112">pkgpath</span>&nbsp;<span class="op" id="1523120">==</span>&nbsp;<span class="ident" id="1523123">ipkgpath</span>&nbsp;<span class="op" id="1523132">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523138">if</span>&nbsp;<span class="ident" id="1523141">m</span>&nbsp;<span class="op" id="1523143">!=</span>&nbsp;<span class="ident" id="1523146">nil</span>&nbsp;<span class="op" id="1523150">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523157">*</span><span class="op" id="1523158">(</span><span class="op" id="1523159">*</span><span class="ident" id="1523160">unsafe</span><span class="op" id="1523166">.</span><span class="ident" id="1523167">Pointer</span><span class="op" id="1523174">)</span><span class="op" id="1523175">(</span><span class="ident" id="1523176">add</span><span class="op" id="1523179">(</span><span class="ident" id="1523180">unsafe</span><span class="op" id="1523186">.</span><span class="ident" id="1523187">Pointer</span><span class="op" id="1523194">(</span><span class="ident" id="1523195">m</span><span class="op" id="1523196">)</span><span class="op" id="1523197">,</span>&nbsp;<span class="ident" id="1523199">unsafe</span><span class="op" id="1523205">.</span><span class="ident" id="1523206">Sizeof</span><span class="op" id="1523212">(</span><span class="ident" id="1523213">itab</span><span class="op" id="1523217">{</span><span class="op" id="1523218">}</span><span class="op" id="1523219">)</span><span class="op" id="1523220">+</span><span class="builtintype" id="1523221">uintptr</span><span class="op" id="1523228">(</span><span class="ident" id="1523229">k</span><span class="op" id="1523230">)</span><span class="op" id="1523231">*</span><span class="ident" id="1523232">ptrSize</span><span class="op" id="1523239">)</span><span class="op" id="1523240">)</span>&nbsp;<span class="op" id="1523242">=</span>&nbsp;<span class="ident" id="1523244">t</span><span class="op" id="1523245">.</span><span class="ident" id="1523246">ifn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523254">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523260">goto</span>&nbsp;<span class="ident" id="1523265">nextimethod</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523280">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523284">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1523288">//&nbsp;didn&#39;t&nbsp;find&nbsp;method</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523312">if</span>&nbsp;<span class="op" id="1523315">!</span><span class="ident" id="1523316">canfail</span>&nbsp;<span class="op" id="1523324">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523329">if</span>&nbsp;<span class="ident" id="1523332">locked</span>&nbsp;<span class="op" id="1523339">!=</span>&nbsp;<span class="num" id="1523342">0</span>&nbsp;<span class="op" id="1523344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523350">unlock</span><span class="op" id="1523356">(</span><span class="op" id="1523357">&amp;</span><span class="ident" id="1523358">ifaceLock</span><span class="op" id="1523367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523372">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1523377">panic</span><span class="op" id="1523382">(</span><span class="op" id="1523383">&amp;</span><span class="ident" id="1523384">TypeAssertionError</span><span class="op" id="1523402">{</span><span class="string" id="1523403">&#34;&#34;</span><span class="op" id="1523405">,</span>&nbsp;<span class="op" id="1523407">*</span><span class="ident" id="1523408">typ</span><span class="op" id="1523411">.</span><span class="ident" id="1523412">_string</span><span class="op" id="1523419">,</span>&nbsp;<span class="op" id="1523421">*</span><span class="ident" id="1523422">inter</span><span class="op" id="1523427">.</span><span class="ident" id="1523428">typ</span><span class="op" id="1523431">.</span><span class="ident" id="1523432">_string</span><span class="op" id="1523439">,</span>&nbsp;<span class="op" id="1523441">*</span><span class="ident" id="1523442">iname</span><span class="op" id="1523447">}</span><span class="op" id="1523448">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523452">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523456">m</span><span class="op" id="1523457">.</span><span class="ident" id="1523458">bad</span>&nbsp;<span class="op" id="1523462">=</span>&nbsp;<span class="num" id="1523464">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523468">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523475">nextimethod</span><span class="op" id="1523486">:</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523492">if</span>&nbsp;<span class="ident" id="1523495">locked</span>&nbsp;<span class="op" id="1523502">==</span>&nbsp;<span class="num" id="1523505">0</span>&nbsp;<span class="op" id="1523507">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523511">gothrow</span><span class="op" id="1523518">(</span><span class="string" id="1523519">&#34;invalid&nbsp;itab&nbsp;locking&#34;</span><span class="op" id="1523541">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523544">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523547">m</span><span class="op" id="1523548">.</span><span class="ident" id="1523549">link</span>&nbsp;<span class="op" id="1523554">=</span>&nbsp;<span class="ident" id="1523556">hash</span><span class="op" id="1523560">[</span><span class="ident" id="1523561">h</span><span class="op" id="1523562">]</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523565">atomicstorep</span><span class="op" id="1523577">(</span><span class="ident" id="1523578">unsafe</span><span class="op" id="1523584">.</span><span class="ident" id="1523585">Pointer</span><span class="op" id="1523592">(</span><span class="op" id="1523593">&amp;</span><span class="ident" id="1523594">hash</span><span class="op" id="1523598">[</span><span class="ident" id="1523599">h</span><span class="op" id="1523600">]</span><span class="op" id="1523601">)</span><span class="op" id="1523602">,</span>&nbsp;<span class="ident" id="1523604">unsafe</span><span class="op" id="1523610">.</span><span class="ident" id="1523611">Pointer</span><span class="op" id="1523618">(</span><span class="ident" id="1523619">m</span><span class="op" id="1523620">)</span><span class="op" id="1523621">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523624">unlock</span><span class="op" id="1523630">(</span><span class="op" id="1523631">&amp;</span><span class="ident" id="1523632">ifaceLock</span><span class="op" id="1523641">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523644">if</span>&nbsp;<span class="ident" id="1523647">m</span><span class="op" id="1523648">.</span><span class="ident" id="1523649">bad</span>&nbsp;<span class="op" id="1523653">!=</span>&nbsp;<span class="num" id="1523656">0</span>&nbsp;<span class="op" id="1523658">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523662">return</span>&nbsp;<span class="ident" id="1523669">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1523674">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523677">return</span>&nbsp;<span class="ident" id="1523684">m</span><br>
<span class="lineno"></span><span class="op" id="1523686">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1523689">func</span>&nbsp;<span class="ident" id="1523694">typ2Itab</span><span class="op" id="1523702">(</span><span class="ident" id="1523703">t</span>&nbsp;<span class="op" id="1523705">*</span><span class="ident" id="1523706">_type</span><span class="op" id="1523711">,</span>&nbsp;<span class="ident" id="1523713">inter</span>&nbsp;<span class="op" id="1523719">*</span><span class="ident" id="1523720">interfacetype</span><span class="op" id="1523733">,</span>&nbsp;<span class="ident" id="1523735">cache</span>&nbsp;<span class="op" id="1523741">*</span><span class="op" id="1523742">*</span><span class="ident" id="1523743">itab</span><span class="op" id="1523747">)</span>&nbsp;<span class="op" id="1523749">*</span><span class="ident" id="1523750">itab</span>&nbsp;<span class="op" id="1523755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523758">tab</span>&nbsp;<span class="op" id="1523762">:=</span>&nbsp;<span class="ident" id="1523765">getitab</span><span class="op" id="1523772">(</span><span class="ident" id="1523773">inter</span><span class="op" id="1523778">,</span>&nbsp;<span class="ident" id="1523780">t</span><span class="op" id="1523781">,</span>&nbsp;<span class="builtintype" id="1523783">false</span><span class="op" id="1523788">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523791">atomicstorep</span><span class="op" id="1523803">(</span><span class="ident" id="1523804">unsafe</span><span class="op" id="1523810">.</span><span class="ident" id="1523811">Pointer</span><span class="op" id="1523818">(</span><span class="ident" id="1523819">cache</span><span class="op" id="1523824">)</span><span class="op" id="1523825">,</span>&nbsp;<span class="ident" id="1523827">unsafe</span><span class="op" id="1523833">.</span><span class="ident" id="1523834">Pointer</span><span class="op" id="1523841">(</span><span class="ident" id="1523842">tab</span><span class="op" id="1523845">)</span><span class="op" id="1523846">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523849">return</span>&nbsp;<span class="ident" id="1523856">tab</span><br>
<span class="lineno"></span><span class="op" id="1523860">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1523863">func</span>&nbsp;<span class="ident" id="1523868">convT2E</span><span class="op" id="1523875">(</span><span class="ident" id="1523876">t</span>&nbsp;<span class="op" id="1523878">*</span><span class="ident" id="1523879">_type</span><span class="op" id="1523884">,</span>&nbsp;<span class="ident" id="1523886">elem</span>&nbsp;<span class="ident" id="1523891">unsafe</span><span class="op" id="1523897">.</span><span class="ident" id="1523898">Pointer</span><span class="op" id="1523905">)</span>&nbsp;<span class="op" id="1523907">(</span><span class="ident" id="1523908">e</span>&nbsp;<span class="keyword" id="1523910">interface</span><span class="op" id="1523919">{</span><span class="op" id="1523920">}</span><span class="op" id="1523921">)</span>&nbsp;<span class="op" id="1523923">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523926">size</span>&nbsp;<span class="op" id="1523931">:=</span>&nbsp;<span class="builtintype" id="1523934">uintptr</span><span class="op" id="1523941">(</span><span class="ident" id="1523942">t</span><span class="op" id="1523943">.</span><span class="ident" id="1523944">size</span><span class="op" id="1523948">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1523951">ep</span>&nbsp;<span class="op" id="1523954">:=</span>&nbsp;<span class="op" id="1523957">(</span><span class="op" id="1523958">*</span><span class="ident" id="1523959">eface</span><span class="op" id="1523964">)</span><span class="op" id="1523965">(</span><span class="ident" id="1523966">unsafe</span><span class="op" id="1523972">.</span><span class="ident" id="1523973">Pointer</span><span class="op" id="1523980">(</span><span class="op" id="1523981">&amp;</span><span class="ident" id="1523982">e</span><span class="op" id="1523983">)</span><span class="op" id="1523984">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1523987">if</span>&nbsp;<span class="ident" id="1523990">isDirectIface</span><span class="op" id="1524003">(</span><span class="ident" id="1524004">t</span><span class="op" id="1524005">)</span>&nbsp;<span class="op" id="1524007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524011">ep</span><span class="op" id="1524013">.</span><span class="ident" id="1524014">_type</span>&nbsp;<span class="op" id="1524020">=</span>&nbsp;<span class="ident" id="1524022">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524026">memmove</span><span class="op" id="1524033">(</span><span class="ident" id="1524034">unsafe</span><span class="op" id="1524040">.</span><span class="ident" id="1524041">Pointer</span><span class="op" id="1524048">(</span><span class="op" id="1524049">&amp;</span><span class="ident" id="1524050">ep</span><span class="op" id="1524052">.</span><span class="ident" id="1524053">data</span><span class="op" id="1524057">)</span><span class="op" id="1524058">,</span>&nbsp;<span class="ident" id="1524060">elem</span><span class="op" id="1524064">,</span>&nbsp;<span class="ident" id="1524066">size</span><span class="op" id="1524070">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1524073">}</span>&nbsp;<span class="keyword" id="1524075">else</span>&nbsp;<span class="op" id="1524080">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524084">x</span>&nbsp;<span class="op" id="1524086">:=</span>&nbsp;<span class="ident" id="1524089">newobject</span><span class="op" id="1524098">(</span><span class="ident" id="1524099">t</span><span class="op" id="1524100">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1524104">//&nbsp;TODO:&nbsp;We&nbsp;allocate&nbsp;a&nbsp;zeroed&nbsp;object&nbsp;only&nbsp;to&nbsp;overwrite&nbsp;it&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1524169">//&nbsp;actual&nbsp;data.&nbsp;&nbsp;Figure&nbsp;out&nbsp;how&nbsp;to&nbsp;avoid&nbsp;zeroing.&nbsp;&nbsp;Also&nbsp;below&nbsp;in&nbsp;convT2I.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524245">memmove</span><span class="op" id="1524252">(</span><span class="ident" id="1524253">x</span><span class="op" id="1524254">,</span>&nbsp;<span class="ident" id="1524256">elem</span><span class="op" id="1524260">,</span>&nbsp;<span class="ident" id="1524262">size</span><span class="op" id="1524266">)</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524270">ep</span><span class="op" id="1524272">.</span><span class="ident" id="1524273">_type</span>&nbsp;<span class="op" id="1524279">=</span>&nbsp;<span class="ident" id="1524281">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524285">ep</span><span class="op" id="1524287">.</span><span class="ident" id="1524288">data</span>&nbsp;<span class="op" id="1524293">=</span>&nbsp;<span class="ident" id="1524295">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1524298">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1524301">return</span><br>
<span class="lineno"></span><span class="op" id="1524308">}</span><br>
<span class="lineno">150</span><br>
<span class="lineno"></span><span class="keyword" id="1524311">func</span>&nbsp;<span class="ident" id="1524316">convT2I</span><span class="op" id="1524323">(</span><span class="ident" id="1524324">t</span>&nbsp;<span class="op" id="1524326">*</span><span class="ident" id="1524327">_type</span><span class="op" id="1524332">,</span>&nbsp;<span class="ident" id="1524334">inter</span>&nbsp;<span class="op" id="1524340">*</span><span class="ident" id="1524341">interfacetype</span><span class="op" id="1524354">,</span>&nbsp;<span class="ident" id="1524356">cache</span>&nbsp;<span class="op" id="1524362">*</span><span class="op" id="1524363">*</span><span class="ident" id="1524364">itab</span><span class="op" id="1524368">,</span>&nbsp;<span class="ident" id="1524370">elem</span>&nbsp;<span class="ident" id="1524375">unsafe</span><span class="op" id="1524381">.</span><span class="ident" id="1524382">Pointer</span><span class="op" id="1524389">)</span>&nbsp;<span class="op" id="1524391">(</span><span class="ident" id="1524392">i</span>&nbsp;<span class="ident" id="1524394">fInterface</span><span class="op" id="1524404">)</span>&nbsp;<span class="op" id="1524406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524409">tab</span>&nbsp;<span class="op" id="1524413">:=</span>&nbsp;<span class="op" id="1524416">(</span><span class="op" id="1524417">*</span><span class="ident" id="1524418">itab</span><span class="op" id="1524422">)</span><span class="op" id="1524423">(</span><span class="ident" id="1524424">atomicloadp</span><span class="op" id="1524435">(</span><span class="ident" id="1524436">unsafe</span><span class="op" id="1524442">.</span><span class="ident" id="1524443">Pointer</span><span class="op" id="1524450">(</span><span class="ident" id="1524451">cache</span><span class="op" id="1524456">)</span><span class="op" id="1524457">)</span><span class="op" id="1524458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1524461">if</span>&nbsp;<span class="ident" id="1524464">tab</span>&nbsp;<span class="op" id="1524468">==</span>&nbsp;<span class="ident" id="1524471">nil</span>&nbsp;<span class="op" id="1524475">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524479">tab</span>&nbsp;<span class="op" id="1524483">=</span>&nbsp;<span class="ident" id="1524485">getitab</span><span class="op" id="1524492">(</span><span class="ident" id="1524493">inter</span><span class="op" id="1524498">,</span>&nbsp;<span class="ident" id="1524500">t</span><span class="op" id="1524501">,</span>&nbsp;<span class="builtintype" id="1524503">false</span><span class="op" id="1524508">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524512">atomicstorep</span><span class="op" id="1524524">(</span><span class="ident" id="1524525">unsafe</span><span class="op" id="1524531">.</span><span class="ident" id="1524532">Pointer</span><span class="op" id="1524539">(</span><span class="ident" id="1524540">cache</span><span class="op" id="1524545">)</span><span class="op" id="1524546">,</span>&nbsp;<span class="ident" id="1524548">unsafe</span><span class="op" id="1524554">.</span><span class="ident" id="1524555">Pointer</span><span class="op" id="1524562">(</span><span class="ident" id="1524563">tab</span><span class="op" id="1524566">)</span><span class="op" id="1524567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1524570">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524573">size</span>&nbsp;<span class="op" id="1524578">:=</span>&nbsp;<span class="builtintype" id="1524581">uintptr</span><span class="op" id="1524588">(</span><span class="ident" id="1524589">t</span><span class="op" id="1524590">.</span><span class="ident" id="1524591">size</span><span class="op" id="1524595">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524598">pi</span>&nbsp;<span class="op" id="1524601">:=</span>&nbsp;<span class="op" id="1524604">(</span><span class="op" id="1524605">*</span><span class="ident" id="1524606">iface</span><span class="op" id="1524611">)</span><span class="op" id="1524612">(</span><span class="ident" id="1524613">unsafe</span><span class="op" id="1524619">.</span><span class="ident" id="1524620">Pointer</span><span class="op" id="1524627">(</span><span class="op" id="1524628">&amp;</span><span class="ident" id="1524629">i</span><span class="op" id="1524630">)</span><span class="op" id="1524631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1524634">if</span>&nbsp;<span class="ident" id="1524637">isDirectIface</span><span class="op" id="1524650">(</span><span class="ident" id="1524651">t</span><span class="op" id="1524652">)</span>&nbsp;<span class="op" id="1524654">{</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524658">pi</span><span class="op" id="1524660">.</span><span class="ident" id="1524661">tab</span>&nbsp;<span class="op" id="1524665">=</span>&nbsp;<span class="ident" id="1524667">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524673">memmove</span><span class="op" id="1524680">(</span><span class="ident" id="1524681">unsafe</span><span class="op" id="1524687">.</span><span class="ident" id="1524688">Pointer</span><span class="op" id="1524695">(</span><span class="op" id="1524696">&amp;</span><span class="ident" id="1524697">pi</span><span class="op" id="1524699">.</span><span class="ident" id="1524700">data</span><span class="op" id="1524704">)</span><span class="op" id="1524705">,</span>&nbsp;<span class="ident" id="1524707">elem</span><span class="op" id="1524711">,</span>&nbsp;<span class="ident" id="1524713">size</span><span class="op" id="1524717">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1524720">}</span>&nbsp;<span class="keyword" id="1524722">else</span>&nbsp;<span class="op" id="1524727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524731">x</span>&nbsp;<span class="op" id="1524733">:=</span>&nbsp;<span class="ident" id="1524736">newobject</span><span class="op" id="1524745">(</span><span class="ident" id="1524746">t</span><span class="op" id="1524747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524751">memmove</span><span class="op" id="1524758">(</span><span class="ident" id="1524759">x</span><span class="op" id="1524760">,</span>&nbsp;<span class="ident" id="1524762">elem</span><span class="op" id="1524766">,</span>&nbsp;<span class="ident" id="1524768">size</span><span class="op" id="1524772">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524776">pi</span><span class="op" id="1524778">.</span><span class="ident" id="1524779">tab</span>&nbsp;<span class="op" id="1524783">=</span>&nbsp;<span class="ident" id="1524785">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1524791">pi</span><span class="op" id="1524793">.</span><span class="ident" id="1524794">data</span>&nbsp;<span class="op" id="1524799">=</span>&nbsp;<span class="ident" id="1524801">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1524804">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1524807">return</span><br>
<span class="lineno"></span><span class="op" id="1524814">}</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span><span class="comment" id="1524817">//&nbsp;TODO:&nbsp;give&nbsp;these&nbsp;routines&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;result&nbsp;area&nbsp;instead&nbsp;of&nbsp;writing</span><br>
<span class="lineno"></span><span class="comment" id="1524894">//&nbsp;extra&nbsp;data&nbsp;in&nbsp;the&nbsp;outargs&nbsp;section.&nbsp;&nbsp;Then&nbsp;we&nbsp;can&nbsp;get&nbsp;rid&nbsp;of&nbsp;go:nosplit.</span><br>
<span class="lineno"></span><span class="comment" id="1524968">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1524981">func</span>&nbsp;<span class="ident" id="1524986">assertI2T</span><span class="op" id="1524995">(</span><span class="ident" id="1524996">t</span>&nbsp;<span class="op" id="1524998">*</span><span class="ident" id="1524999">_type</span><span class="op" id="1525004">,</span>&nbsp;<span class="ident" id="1525006">i</span>&nbsp;<span class="ident" id="1525008">fInterface</span><span class="op" id="1525018">)</span>&nbsp;<span class="op" id="1525020">(</span><span class="ident" id="1525021">r</span>&nbsp;<span class="keyword" id="1525023">struct</span><span class="op" id="1525029">{</span><span class="op" id="1525030">}</span><span class="op" id="1525031">)</span>&nbsp;<span class="op" id="1525033">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525036">ip</span>&nbsp;<span class="op" id="1525039">:=</span>&nbsp;<span class="op" id="1525042">(</span><span class="op" id="1525043">*</span><span class="ident" id="1525044">iface</span><span class="op" id="1525049">)</span><span class="op" id="1525050">(</span><span class="ident" id="1525051">unsafe</span><span class="op" id="1525057">.</span><span class="ident" id="1525058">Pointer</span><span class="op" id="1525065">(</span><span class="op" id="1525066">&amp;</span><span class="ident" id="1525067">i</span><span class="op" id="1525068">)</span><span class="op" id="1525069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525072">tab</span>&nbsp;<span class="op" id="1525076">:=</span>&nbsp;<span class="ident" id="1525079">ip</span><span class="op" id="1525081">.</span><span class="ident" id="1525082">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525087">if</span>&nbsp;<span class="ident" id="1525090">tab</span>&nbsp;<span class="op" id="1525094">==</span>&nbsp;<span class="ident" id="1525097">nil</span>&nbsp;<span class="op" id="1525101">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1525105">panic</span><span class="op" id="1525110">(</span><span class="op" id="1525111">&amp;</span><span class="ident" id="1525112">TypeAssertionError</span><span class="op" id="1525130">{</span><span class="string" id="1525131">&#34;&#34;</span><span class="op" id="1525133">,</span>&nbsp;<span class="string" id="1525135">&#34;&#34;</span><span class="op" id="1525137">,</span>&nbsp;<span class="op" id="1525139">*</span><span class="ident" id="1525140">t</span><span class="op" id="1525141">.</span><span class="ident" id="1525142">_string</span><span class="op" id="1525149">,</span>&nbsp;<span class="string" id="1525151">&#34;&#34;</span><span class="op" id="1525153">}</span><span class="op" id="1525154">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525157">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525160">if</span>&nbsp;<span class="ident" id="1525163">tab</span><span class="op" id="1525166">.</span><span class="ident" id="1525167">_type</span>&nbsp;<span class="op" id="1525173">!=</span>&nbsp;<span class="ident" id="1525176">t</span>&nbsp;<span class="op" id="1525178">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1525182">panic</span><span class="op" id="1525187">(</span><span class="op" id="1525188">&amp;</span><span class="ident" id="1525189">TypeAssertionError</span><span class="op" id="1525207">{</span><span class="op" id="1525208">*</span><span class="ident" id="1525209">tab</span><span class="op" id="1525212">.</span><span class="ident" id="1525213">inter</span><span class="op" id="1525218">.</span><span class="ident" id="1525219">typ</span><span class="op" id="1525222">.</span><span class="ident" id="1525223">_string</span><span class="op" id="1525230">,</span>&nbsp;<span class="op" id="1525232">*</span><span class="ident" id="1525233">tab</span><span class="op" id="1525236">.</span><span class="ident" id="1525237">_type</span><span class="op" id="1525242">.</span><span class="ident" id="1525243">_string</span><span class="op" id="1525250">,</span>&nbsp;<span class="op" id="1525252">*</span><span class="ident" id="1525253">t</span><span class="op" id="1525254">.</span><span class="ident" id="1525255">_string</span><span class="op" id="1525262">,</span>&nbsp;<span class="string" id="1525264">&#34;&#34;</span><span class="op" id="1525266">}</span><span class="op" id="1525267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525270">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525273">size</span>&nbsp;<span class="op" id="1525278">:=</span>&nbsp;<span class="builtintype" id="1525281">uintptr</span><span class="op" id="1525288">(</span><span class="ident" id="1525289">t</span><span class="op" id="1525290">.</span><span class="ident" id="1525291">size</span><span class="op" id="1525295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525298">if</span>&nbsp;<span class="ident" id="1525301">isDirectIface</span><span class="op" id="1525314">(</span><span class="ident" id="1525315">t</span><span class="op" id="1525316">)</span>&nbsp;<span class="op" id="1525318">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525322">memmove</span><span class="op" id="1525329">(</span><span class="ident" id="1525330">unsafe</span><span class="op" id="1525336">.</span><span class="ident" id="1525337">Pointer</span><span class="op" id="1525344">(</span><span class="op" id="1525345">&amp;</span><span class="ident" id="1525346">r</span><span class="op" id="1525347">)</span><span class="op" id="1525348">,</span>&nbsp;<span class="ident" id="1525350">unsafe</span><span class="op" id="1525356">.</span><span class="ident" id="1525357">Pointer</span><span class="op" id="1525364">(</span><span class="op" id="1525365">&amp;</span><span class="ident" id="1525366">ip</span><span class="op" id="1525368">.</span><span class="ident" id="1525369">data</span><span class="op" id="1525373">)</span><span class="op" id="1525374">,</span>&nbsp;<span class="ident" id="1525376">size</span><span class="op" id="1525380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525383">}</span>&nbsp;<span class="keyword" id="1525385">else</span>&nbsp;<span class="op" id="1525390">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525394">memmove</span><span class="op" id="1525401">(</span><span class="ident" id="1525402">unsafe</span><span class="op" id="1525408">.</span><span class="ident" id="1525409">Pointer</span><span class="op" id="1525416">(</span><span class="op" id="1525417">&amp;</span><span class="ident" id="1525418">r</span><span class="op" id="1525419">)</span><span class="op" id="1525420">,</span>&nbsp;<span class="ident" id="1525422">ip</span><span class="op" id="1525424">.</span><span class="ident" id="1525425">data</span><span class="op" id="1525429">,</span>&nbsp;<span class="ident" id="1525431">size</span><span class="op" id="1525435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525438">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525441">return</span><br>
<span class="lineno">190</span><span class="op" id="1525448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1525451">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1525464">func</span>&nbsp;<span class="ident" id="1525469">assertI2T2</span><span class="op" id="1525479">(</span><span class="ident" id="1525480">t</span>&nbsp;<span class="op" id="1525482">*</span><span class="ident" id="1525483">_type</span><span class="op" id="1525488">,</span>&nbsp;<span class="ident" id="1525490">i</span>&nbsp;<span class="ident" id="1525492">fInterface</span><span class="op" id="1525502">)</span>&nbsp;<span class="op" id="1525504">(</span><span class="ident" id="1525505">r</span>&nbsp;<span class="builtintype" id="1525507">byte</span><span class="op" id="1525511">)</span>&nbsp;<span class="op" id="1525513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525516">ip</span>&nbsp;<span class="op" id="1525519">:=</span>&nbsp;<span class="op" id="1525522">(</span><span class="op" id="1525523">*</span><span class="ident" id="1525524">iface</span><span class="op" id="1525529">)</span><span class="op" id="1525530">(</span><span class="ident" id="1525531">unsafe</span><span class="op" id="1525537">.</span><span class="ident" id="1525538">Pointer</span><span class="op" id="1525545">(</span><span class="op" id="1525546">&amp;</span><span class="ident" id="1525547">i</span><span class="op" id="1525548">)</span><span class="op" id="1525549">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525552">size</span>&nbsp;<span class="op" id="1525557">:=</span>&nbsp;<span class="builtintype" id="1525560">uintptr</span><span class="op" id="1525567">(</span><span class="ident" id="1525568">t</span><span class="op" id="1525569">.</span><span class="ident" id="1525570">size</span><span class="op" id="1525574">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525577">ok</span>&nbsp;<span class="op" id="1525580">:=</span>&nbsp;<span class="op" id="1525583">(</span><span class="op" id="1525584">*</span><span class="builtintype" id="1525585">bool</span><span class="op" id="1525589">)</span><span class="op" id="1525590">(</span><span class="ident" id="1525591">add</span><span class="op" id="1525594">(</span><span class="ident" id="1525595">unsafe</span><span class="op" id="1525601">.</span><span class="ident" id="1525602">Pointer</span><span class="op" id="1525609">(</span><span class="op" id="1525610">&amp;</span><span class="ident" id="1525611">r</span><span class="op" id="1525612">)</span><span class="op" id="1525613">,</span>&nbsp;<span class="ident" id="1525615">size</span><span class="op" id="1525619">)</span><span class="op" id="1525620">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525623">tab</span>&nbsp;<span class="op" id="1525627">:=</span>&nbsp;<span class="ident" id="1525630">ip</span><span class="op" id="1525632">.</span><span class="ident" id="1525633">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525638">if</span>&nbsp;<span class="ident" id="1525641">tab</span>&nbsp;<span class="op" id="1525645">==</span>&nbsp;<span class="ident" id="1525648">nil</span>&nbsp;<span class="op" id="1525652">||</span>&nbsp;<span class="ident" id="1525655">tab</span><span class="op" id="1525658">.</span><span class="ident" id="1525659">_type</span>&nbsp;<span class="op" id="1525665">!=</span>&nbsp;<span class="ident" id="1525668">t</span>&nbsp;<span class="op" id="1525670">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525674">*</span><span class="ident" id="1525675">ok</span>&nbsp;<span class="op" id="1525678">=</span>&nbsp;<span class="builtintype" id="1525680">false</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525688">memclr</span><span class="op" id="1525694">(</span><span class="ident" id="1525695">unsafe</span><span class="op" id="1525701">.</span><span class="ident" id="1525702">Pointer</span><span class="op" id="1525709">(</span><span class="op" id="1525710">&amp;</span><span class="ident" id="1525711">r</span><span class="op" id="1525712">)</span><span class="op" id="1525713">,</span>&nbsp;<span class="ident" id="1525715">size</span><span class="op" id="1525719">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525723">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525731">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525734">*</span><span class="ident" id="1525735">ok</span>&nbsp;<span class="op" id="1525738">=</span>&nbsp;<span class="builtintype" id="1525740">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525746">if</span>&nbsp;<span class="ident" id="1525749">isDirectIface</span><span class="op" id="1525762">(</span><span class="ident" id="1525763">t</span><span class="op" id="1525764">)</span>&nbsp;<span class="op" id="1525766">{</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525770">memmove</span><span class="op" id="1525777">(</span><span class="ident" id="1525778">unsafe</span><span class="op" id="1525784">.</span><span class="ident" id="1525785">Pointer</span><span class="op" id="1525792">(</span><span class="op" id="1525793">&amp;</span><span class="ident" id="1525794">r</span><span class="op" id="1525795">)</span><span class="op" id="1525796">,</span>&nbsp;<span class="ident" id="1525798">unsafe</span><span class="op" id="1525804">.</span><span class="ident" id="1525805">Pointer</span><span class="op" id="1525812">(</span><span class="op" id="1525813">&amp;</span><span class="ident" id="1525814">ip</span><span class="op" id="1525816">.</span><span class="ident" id="1525817">data</span><span class="op" id="1525821">)</span><span class="op" id="1525822">,</span>&nbsp;<span class="ident" id="1525824">size</span><span class="op" id="1525828">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525831">}</span>&nbsp;<span class="keyword" id="1525833">else</span>&nbsp;<span class="op" id="1525838">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525842">memmove</span><span class="op" id="1525849">(</span><span class="ident" id="1525850">unsafe</span><span class="op" id="1525856">.</span><span class="ident" id="1525857">Pointer</span><span class="op" id="1525864">(</span><span class="op" id="1525865">&amp;</span><span class="ident" id="1525866">r</span><span class="op" id="1525867">)</span><span class="op" id="1525868">,</span>&nbsp;<span class="ident" id="1525870">ip</span><span class="op" id="1525872">.</span><span class="ident" id="1525873">data</span><span class="op" id="1525877">,</span>&nbsp;<span class="ident" id="1525879">size</span><span class="op" id="1525883">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1525886">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525889">return</span><br>
<span class="lineno">210</span><span class="op" id="1525896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1525899">func</span>&nbsp;<span class="ident" id="1525904">assertI2TOK</span><span class="op" id="1525915">(</span><span class="ident" id="1525916">t</span>&nbsp;<span class="op" id="1525918">*</span><span class="ident" id="1525919">_type</span><span class="op" id="1525924">,</span>&nbsp;<span class="ident" id="1525926">i</span>&nbsp;<span class="ident" id="1525928">fInterface</span><span class="op" id="1525938">)</span>&nbsp;<span class="builtintype" id="1525940">bool</span>&nbsp;<span class="op" id="1525945">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525948">ip</span>&nbsp;<span class="op" id="1525951">:=</span>&nbsp;<span class="op" id="1525954">(</span><span class="op" id="1525955">*</span><span class="ident" id="1525956">iface</span><span class="op" id="1525961">)</span><span class="op" id="1525962">(</span><span class="ident" id="1525963">unsafe</span><span class="op" id="1525969">.</span><span class="ident" id="1525970">Pointer</span><span class="op" id="1525977">(</span><span class="op" id="1525978">&amp;</span><span class="ident" id="1525979">i</span><span class="op" id="1525980">)</span><span class="op" id="1525981">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1525984">tab</span>&nbsp;<span class="op" id="1525988">:=</span>&nbsp;<span class="ident" id="1525991">ip</span><span class="op" id="1525993">.</span><span class="ident" id="1525994">tab</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1525999">return</span>&nbsp;<span class="ident" id="1526006">tab</span>&nbsp;<span class="op" id="1526010">!=</span>&nbsp;<span class="ident" id="1526013">nil</span>&nbsp;<span class="op" id="1526017">&amp;&amp;</span>&nbsp;<span class="ident" id="1526020">tab</span><span class="op" id="1526023">.</span><span class="ident" id="1526024">_type</span>&nbsp;<span class="op" id="1526030">==</span>&nbsp;<span class="ident" id="1526033">t</span><br>
<span class="lineno"></span><span class="op" id="1526035">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="1526038">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1526051">func</span>&nbsp;<span class="ident" id="1526056">assertE2T</span><span class="op" id="1526065">(</span><span class="ident" id="1526066">t</span>&nbsp;<span class="op" id="1526068">*</span><span class="ident" id="1526069">_type</span><span class="op" id="1526074">,</span>&nbsp;<span class="ident" id="1526076">e</span>&nbsp;<span class="keyword" id="1526078">interface</span><span class="op" id="1526087">{</span><span class="op" id="1526088">}</span><span class="op" id="1526089">)</span>&nbsp;<span class="op" id="1526091">(</span><span class="ident" id="1526092">r</span>&nbsp;<span class="keyword" id="1526094">struct</span><span class="op" id="1526100">{</span><span class="op" id="1526101">}</span><span class="op" id="1526102">)</span>&nbsp;<span class="op" id="1526104">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526107">ep</span>&nbsp;<span class="op" id="1526110">:=</span>&nbsp;<span class="op" id="1526113">(</span><span class="op" id="1526114">*</span><span class="ident" id="1526115">eface</span><span class="op" id="1526120">)</span><span class="op" id="1526121">(</span><span class="ident" id="1526122">unsafe</span><span class="op" id="1526128">.</span><span class="ident" id="1526129">Pointer</span><span class="op" id="1526136">(</span><span class="op" id="1526137">&amp;</span><span class="ident" id="1526138">e</span><span class="op" id="1526139">)</span><span class="op" id="1526140">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526143">if</span>&nbsp;<span class="ident" id="1526146">ep</span><span class="op" id="1526148">.</span><span class="ident" id="1526149">_type</span>&nbsp;<span class="op" id="1526155">==</span>&nbsp;<span class="ident" id="1526158">nil</span>&nbsp;<span class="op" id="1526162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1526166">panic</span><span class="op" id="1526171">(</span><span class="op" id="1526172">&amp;</span><span class="ident" id="1526173">TypeAssertionError</span><span class="op" id="1526191">{</span><span class="string" id="1526192">&#34;&#34;</span><span class="op" id="1526194">,</span>&nbsp;<span class="string" id="1526196">&#34;&#34;</span><span class="op" id="1526198">,</span>&nbsp;<span class="op" id="1526200">*</span><span class="ident" id="1526201">t</span><span class="op" id="1526202">.</span><span class="ident" id="1526203">_string</span><span class="op" id="1526210">,</span>&nbsp;<span class="string" id="1526212">&#34;&#34;</span><span class="op" id="1526214">}</span><span class="op" id="1526215">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526218">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526221">if</span>&nbsp;<span class="ident" id="1526224">ep</span><span class="op" id="1526226">.</span><span class="ident" id="1526227">_type</span>&nbsp;<span class="op" id="1526233">!=</span>&nbsp;<span class="ident" id="1526236">t</span>&nbsp;<span class="op" id="1526238">{</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1526242">panic</span><span class="op" id="1526247">(</span><span class="op" id="1526248">&amp;</span><span class="ident" id="1526249">TypeAssertionError</span><span class="op" id="1526267">{</span><span class="string" id="1526268">&#34;&#34;</span><span class="op" id="1526270">,</span>&nbsp;<span class="op" id="1526272">*</span><span class="ident" id="1526273">ep</span><span class="op" id="1526275">.</span><span class="ident" id="1526276">_type</span><span class="op" id="1526281">.</span><span class="ident" id="1526282">_string</span><span class="op" id="1526289">,</span>&nbsp;<span class="op" id="1526291">*</span><span class="ident" id="1526292">t</span><span class="op" id="1526293">.</span><span class="ident" id="1526294">_string</span><span class="op" id="1526301">,</span>&nbsp;<span class="string" id="1526303">&#34;&#34;</span><span class="op" id="1526305">}</span><span class="op" id="1526306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526312">size</span>&nbsp;<span class="op" id="1526317">:=</span>&nbsp;<span class="builtintype" id="1526320">uintptr</span><span class="op" id="1526327">(</span><span class="ident" id="1526328">t</span><span class="op" id="1526329">.</span><span class="ident" id="1526330">size</span><span class="op" id="1526334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526337">if</span>&nbsp;<span class="ident" id="1526340">isDirectIface</span><span class="op" id="1526353">(</span><span class="ident" id="1526354">t</span><span class="op" id="1526355">)</span>&nbsp;<span class="op" id="1526357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526361">memmove</span><span class="op" id="1526368">(</span><span class="ident" id="1526369">unsafe</span><span class="op" id="1526375">.</span><span class="ident" id="1526376">Pointer</span><span class="op" id="1526383">(</span><span class="op" id="1526384">&amp;</span><span class="ident" id="1526385">r</span><span class="op" id="1526386">)</span><span class="op" id="1526387">,</span>&nbsp;<span class="ident" id="1526389">unsafe</span><span class="op" id="1526395">.</span><span class="ident" id="1526396">Pointer</span><span class="op" id="1526403">(</span><span class="op" id="1526404">&amp;</span><span class="ident" id="1526405">ep</span><span class="op" id="1526407">.</span><span class="ident" id="1526408">data</span><span class="op" id="1526412">)</span><span class="op" id="1526413">,</span>&nbsp;<span class="ident" id="1526415">size</span><span class="op" id="1526419">)</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526422">}</span>&nbsp;<span class="keyword" id="1526424">else</span>&nbsp;<span class="op" id="1526429">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526433">memmove</span><span class="op" id="1526440">(</span><span class="ident" id="1526441">unsafe</span><span class="op" id="1526447">.</span><span class="ident" id="1526448">Pointer</span><span class="op" id="1526455">(</span><span class="op" id="1526456">&amp;</span><span class="ident" id="1526457">r</span><span class="op" id="1526458">)</span><span class="op" id="1526459">,</span>&nbsp;<span class="ident" id="1526461">ep</span><span class="op" id="1526463">.</span><span class="ident" id="1526464">data</span><span class="op" id="1526468">,</span>&nbsp;<span class="ident" id="1526470">size</span><span class="op" id="1526474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526477">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526480">return</span><br>
<span class="lineno"></span><span class="op" id="1526487">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span><span class="comment" id="1526490">//go:nosplit</span><br>
<span class="lineno"></span><span class="keyword" id="1526503">func</span>&nbsp;<span class="ident" id="1526508">assertE2T2</span><span class="op" id="1526518">(</span><span class="ident" id="1526519">t</span>&nbsp;<span class="op" id="1526521">*</span><span class="ident" id="1526522">_type</span><span class="op" id="1526527">,</span>&nbsp;<span class="ident" id="1526529">e</span>&nbsp;<span class="keyword" id="1526531">interface</span><span class="op" id="1526540">{</span><span class="op" id="1526541">}</span><span class="op" id="1526542">)</span>&nbsp;<span class="op" id="1526544">(</span><span class="ident" id="1526545">r</span>&nbsp;<span class="builtintype" id="1526547">byte</span><span class="op" id="1526551">)</span>&nbsp;<span class="op" id="1526553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526556">ep</span>&nbsp;<span class="op" id="1526559">:=</span>&nbsp;<span class="op" id="1526562">(</span><span class="op" id="1526563">*</span><span class="ident" id="1526564">eface</span><span class="op" id="1526569">)</span><span class="op" id="1526570">(</span><span class="ident" id="1526571">unsafe</span><span class="op" id="1526577">.</span><span class="ident" id="1526578">Pointer</span><span class="op" id="1526585">(</span><span class="op" id="1526586">&amp;</span><span class="ident" id="1526587">e</span><span class="op" id="1526588">)</span><span class="op" id="1526589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526592">size</span>&nbsp;<span class="op" id="1526597">:=</span>&nbsp;<span class="builtintype" id="1526600">uintptr</span><span class="op" id="1526607">(</span><span class="ident" id="1526608">t</span><span class="op" id="1526609">.</span><span class="ident" id="1526610">size</span><span class="op" id="1526614">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526617">ok</span>&nbsp;<span class="op" id="1526620">:=</span>&nbsp;<span class="op" id="1526623">(</span><span class="op" id="1526624">*</span><span class="builtintype" id="1526625">bool</span><span class="op" id="1526629">)</span><span class="op" id="1526630">(</span><span class="ident" id="1526631">add</span><span class="op" id="1526634">(</span><span class="ident" id="1526635">unsafe</span><span class="op" id="1526641">.</span><span class="ident" id="1526642">Pointer</span><span class="op" id="1526649">(</span><span class="op" id="1526650">&amp;</span><span class="ident" id="1526651">r</span><span class="op" id="1526652">)</span><span class="op" id="1526653">,</span>&nbsp;<span class="ident" id="1526655">size</span><span class="op" id="1526659">)</span><span class="op" id="1526660">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526663">if</span>&nbsp;<span class="ident" id="1526666">ep</span><span class="op" id="1526668">.</span><span class="ident" id="1526669">_type</span>&nbsp;<span class="op" id="1526675">!=</span>&nbsp;<span class="ident" id="1526678">t</span>&nbsp;<span class="op" id="1526680">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526684">*</span><span class="ident" id="1526685">ok</span>&nbsp;<span class="op" id="1526688">=</span>&nbsp;<span class="builtintype" id="1526690">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526698">memclr</span><span class="op" id="1526704">(</span><span class="ident" id="1526705">unsafe</span><span class="op" id="1526711">.</span><span class="ident" id="1526712">Pointer</span><span class="op" id="1526719">(</span><span class="op" id="1526720">&amp;</span><span class="ident" id="1526721">r</span><span class="op" id="1526722">)</span><span class="op" id="1526723">,</span>&nbsp;<span class="ident" id="1526725">size</span><span class="op" id="1526729">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526733">return</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526741">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526744">*</span><span class="ident" id="1526745">ok</span>&nbsp;<span class="op" id="1526748">=</span>&nbsp;<span class="builtintype" id="1526750">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526756">if</span>&nbsp;<span class="ident" id="1526759">isDirectIface</span><span class="op" id="1526772">(</span><span class="ident" id="1526773">t</span><span class="op" id="1526774">)</span>&nbsp;<span class="op" id="1526776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526780">memmove</span><span class="op" id="1526787">(</span><span class="ident" id="1526788">unsafe</span><span class="op" id="1526794">.</span><span class="ident" id="1526795">Pointer</span><span class="op" id="1526802">(</span><span class="op" id="1526803">&amp;</span><span class="ident" id="1526804">r</span><span class="op" id="1526805">)</span><span class="op" id="1526806">,</span>&nbsp;<span class="ident" id="1526808">unsafe</span><span class="op" id="1526814">.</span><span class="ident" id="1526815">Pointer</span><span class="op" id="1526822">(</span><span class="op" id="1526823">&amp;</span><span class="ident" id="1526824">ep</span><span class="op" id="1526826">.</span><span class="ident" id="1526827">data</span><span class="op" id="1526831">)</span><span class="op" id="1526832">,</span>&nbsp;<span class="ident" id="1526834">size</span><span class="op" id="1526838">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526841">}</span>&nbsp;<span class="keyword" id="1526843">else</span>&nbsp;<span class="op" id="1526848">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526852">memmove</span><span class="op" id="1526859">(</span><span class="ident" id="1526860">unsafe</span><span class="op" id="1526866">.</span><span class="ident" id="1526867">Pointer</span><span class="op" id="1526874">(</span><span class="op" id="1526875">&amp;</span><span class="ident" id="1526876">r</span><span class="op" id="1526877">)</span><span class="op" id="1526878">,</span>&nbsp;<span class="ident" id="1526880">ep</span><span class="op" id="1526882">.</span><span class="ident" id="1526883">data</span><span class="op" id="1526887">,</span>&nbsp;<span class="ident" id="1526889">size</span><span class="op" id="1526893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1526896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526899">return</span><br>
<span class="lineno"></span><span class="op" id="1526906">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">255</span><span class="keyword" id="1526909">func</span>&nbsp;<span class="ident" id="1526914">assertE2TOK</span><span class="op" id="1526925">(</span><span class="ident" id="1526926">t</span>&nbsp;<span class="op" id="1526928">*</span><span class="ident" id="1526929">_type</span><span class="op" id="1526934">,</span>&nbsp;<span class="ident" id="1526936">e</span>&nbsp;<span class="keyword" id="1526938">interface</span><span class="op" id="1526947">{</span><span class="op" id="1526948">}</span><span class="op" id="1526949">)</span>&nbsp;<span class="builtintype" id="1526951">bool</span>&nbsp;<span class="op" id="1526956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1526959">ep</span>&nbsp;<span class="op" id="1526962">:=</span>&nbsp;<span class="op" id="1526965">(</span><span class="op" id="1526966">*</span><span class="ident" id="1526967">eface</span><span class="op" id="1526972">)</span><span class="op" id="1526973">(</span><span class="ident" id="1526974">unsafe</span><span class="op" id="1526980">.</span><span class="ident" id="1526981">Pointer</span><span class="op" id="1526988">(</span><span class="op" id="1526989">&amp;</span><span class="ident" id="1526990">e</span><span class="op" id="1526991">)</span><span class="op" id="1526992">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1526995">return</span>&nbsp;<span class="ident" id="1527002">t</span>&nbsp;<span class="op" id="1527004">==</span>&nbsp;<span class="ident" id="1527007">ep</span><span class="op" id="1527009">.</span><span class="ident" id="1527010">_type</span><br>
<span class="lineno"></span><span class="op" id="1527016">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="1527019">func</span>&nbsp;<span class="ident" id="1527024">convI2E</span><span class="op" id="1527031">(</span><span class="ident" id="1527032">i</span>&nbsp;<span class="ident" id="1527034">fInterface</span><span class="op" id="1527044">)</span>&nbsp;<span class="op" id="1527046">(</span><span class="ident" id="1527047">r</span>&nbsp;<span class="keyword" id="1527049">interface</span><span class="op" id="1527058">{</span><span class="op" id="1527059">}</span><span class="op" id="1527060">)</span>&nbsp;<span class="op" id="1527062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527065">ip</span>&nbsp;<span class="op" id="1527068">:=</span>&nbsp;<span class="op" id="1527071">(</span><span class="op" id="1527072">*</span><span class="ident" id="1527073">iface</span><span class="op" id="1527078">)</span><span class="op" id="1527079">(</span><span class="ident" id="1527080">unsafe</span><span class="op" id="1527086">.</span><span class="ident" id="1527087">Pointer</span><span class="op" id="1527094">(</span><span class="op" id="1527095">&amp;</span><span class="ident" id="1527096">i</span><span class="op" id="1527097">)</span><span class="op" id="1527098">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527101">tab</span>&nbsp;<span class="op" id="1527105">:=</span>&nbsp;<span class="ident" id="1527108">ip</span><span class="op" id="1527110">.</span><span class="ident" id="1527111">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527116">if</span>&nbsp;<span class="ident" id="1527119">tab</span>&nbsp;<span class="op" id="1527123">==</span>&nbsp;<span class="ident" id="1527126">nil</span>&nbsp;<span class="op" id="1527130">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527134">return</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1527142">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527145">rp</span>&nbsp;<span class="op" id="1527148">:=</span>&nbsp;<span class="op" id="1527151">(</span><span class="op" id="1527152">*</span><span class="ident" id="1527153">eface</span><span class="op" id="1527158">)</span><span class="op" id="1527159">(</span><span class="ident" id="1527160">unsafe</span><span class="op" id="1527166">.</span><span class="ident" id="1527167">Pointer</span><span class="op" id="1527174">(</span><span class="op" id="1527175">&amp;</span><span class="ident" id="1527176">r</span><span class="op" id="1527177">)</span><span class="op" id="1527178">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527181">rp</span><span class="op" id="1527183">.</span><span class="ident" id="1527184">_type</span>&nbsp;<span class="op" id="1527190">=</span>&nbsp;<span class="ident" id="1527192">tab</span><span class="op" id="1527195">.</span><span class="ident" id="1527196">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527203">rp</span><span class="op" id="1527205">.</span><span class="ident" id="1527206">data</span>&nbsp;<span class="op" id="1527211">=</span>&nbsp;<span class="ident" id="1527213">ip</span><span class="op" id="1527215">.</span><span class="ident" id="1527216">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527222">return</span><br>
<span class="lineno">270</span><span class="op" id="1527229">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1527232">func</span>&nbsp;<span class="ident" id="1527237">assertI2E</span><span class="op" id="1527246">(</span><span class="ident" id="1527247">inter</span>&nbsp;<span class="op" id="1527253">*</span><span class="ident" id="1527254">interfacetype</span><span class="op" id="1527267">,</span>&nbsp;<span class="ident" id="1527269">i</span>&nbsp;<span class="ident" id="1527271">fInterface</span><span class="op" id="1527281">)</span>&nbsp;<span class="op" id="1527283">(</span><span class="ident" id="1527284">r</span>&nbsp;<span class="keyword" id="1527286">interface</span><span class="op" id="1527295">{</span><span class="op" id="1527296">}</span><span class="op" id="1527297">)</span>&nbsp;<span class="op" id="1527299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527302">ip</span>&nbsp;<span class="op" id="1527305">:=</span>&nbsp;<span class="op" id="1527308">(</span><span class="op" id="1527309">*</span><span class="ident" id="1527310">iface</span><span class="op" id="1527315">)</span><span class="op" id="1527316">(</span><span class="ident" id="1527317">unsafe</span><span class="op" id="1527323">.</span><span class="ident" id="1527324">Pointer</span><span class="op" id="1527331">(</span><span class="op" id="1527332">&amp;</span><span class="ident" id="1527333">i</span><span class="op" id="1527334">)</span><span class="op" id="1527335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527338">tab</span>&nbsp;<span class="op" id="1527342">:=</span>&nbsp;<span class="ident" id="1527345">ip</span><span class="op" id="1527347">.</span><span class="ident" id="1527348">tab</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527353">if</span>&nbsp;<span class="ident" id="1527356">tab</span>&nbsp;<span class="op" id="1527360">==</span>&nbsp;<span class="ident" id="1527363">nil</span>&nbsp;<span class="op" id="1527367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1527371">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1527430">panic</span><span class="op" id="1527435">(</span><span class="op" id="1527436">&amp;</span><span class="ident" id="1527437">TypeAssertionError</span><span class="op" id="1527455">{</span><span class="string" id="1527456">&#34;&#34;</span><span class="op" id="1527458">,</span>&nbsp;<span class="string" id="1527460">&#34;&#34;</span><span class="op" id="1527462">,</span>&nbsp;<span class="op" id="1527464">*</span><span class="ident" id="1527465">inter</span><span class="op" id="1527470">.</span><span class="ident" id="1527471">typ</span><span class="op" id="1527474">.</span><span class="ident" id="1527475">_string</span><span class="op" id="1527482">,</span>&nbsp;<span class="string" id="1527484">&#34;&#34;</span><span class="op" id="1527486">}</span><span class="op" id="1527487">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1527490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527493">rp</span>&nbsp;<span class="op" id="1527496">:=</span>&nbsp;<span class="op" id="1527499">(</span><span class="op" id="1527500">*</span><span class="ident" id="1527501">eface</span><span class="op" id="1527506">)</span><span class="op" id="1527507">(</span><span class="ident" id="1527508">unsafe</span><span class="op" id="1527514">.</span><span class="ident" id="1527515">Pointer</span><span class="op" id="1527522">(</span><span class="op" id="1527523">&amp;</span><span class="ident" id="1527524">r</span><span class="op" id="1527525">)</span><span class="op" id="1527526">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527529">rp</span><span class="op" id="1527531">.</span><span class="ident" id="1527532">_type</span>&nbsp;<span class="op" id="1527538">=</span>&nbsp;<span class="ident" id="1527540">tab</span><span class="op" id="1527543">.</span><span class="ident" id="1527544">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527551">rp</span><span class="op" id="1527553">.</span><span class="ident" id="1527554">data</span>&nbsp;<span class="op" id="1527559">=</span>&nbsp;<span class="ident" id="1527561">ip</span><span class="op" id="1527563">.</span><span class="ident" id="1527564">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527570">return</span><br>
<span class="lineno"></span><span class="op" id="1527577">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">285</span><span class="keyword" id="1527580">func</span>&nbsp;<span class="ident" id="1527585">assertI2E2</span><span class="op" id="1527595">(</span><span class="ident" id="1527596">inter</span>&nbsp;<span class="op" id="1527602">*</span><span class="ident" id="1527603">interfacetype</span><span class="op" id="1527616">,</span>&nbsp;<span class="ident" id="1527618">i</span>&nbsp;<span class="ident" id="1527620">fInterface</span><span class="op" id="1527630">)</span>&nbsp;<span class="op" id="1527632">(</span><span class="ident" id="1527633">r</span>&nbsp;<span class="keyword" id="1527635">interface</span><span class="op" id="1527644">{</span><span class="op" id="1527645">}</span><span class="op" id="1527646">,</span>&nbsp;<span class="ident" id="1527648">ok</span>&nbsp;<span class="builtintype" id="1527651">bool</span><span class="op" id="1527655">)</span>&nbsp;<span class="op" id="1527657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527660">ip</span>&nbsp;<span class="op" id="1527663">:=</span>&nbsp;<span class="op" id="1527666">(</span><span class="op" id="1527667">*</span><span class="ident" id="1527668">iface</span><span class="op" id="1527673">)</span><span class="op" id="1527674">(</span><span class="ident" id="1527675">unsafe</span><span class="op" id="1527681">.</span><span class="ident" id="1527682">Pointer</span><span class="op" id="1527689">(</span><span class="op" id="1527690">&amp;</span><span class="ident" id="1527691">i</span><span class="op" id="1527692">)</span><span class="op" id="1527693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527696">tab</span>&nbsp;<span class="op" id="1527700">:=</span>&nbsp;<span class="ident" id="1527703">ip</span><span class="op" id="1527705">.</span><span class="ident" id="1527706">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527711">if</span>&nbsp;<span class="ident" id="1527714">tab</span>&nbsp;<span class="op" id="1527718">==</span>&nbsp;<span class="ident" id="1527721">nil</span>&nbsp;<span class="op" id="1527725">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527729">return</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1527737">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527740">rp</span>&nbsp;<span class="op" id="1527743">:=</span>&nbsp;<span class="op" id="1527746">(</span><span class="op" id="1527747">*</span><span class="ident" id="1527748">eface</span><span class="op" id="1527753">)</span><span class="op" id="1527754">(</span><span class="ident" id="1527755">unsafe</span><span class="op" id="1527761">.</span><span class="ident" id="1527762">Pointer</span><span class="op" id="1527769">(</span><span class="op" id="1527770">&amp;</span><span class="ident" id="1527771">r</span><span class="op" id="1527772">)</span><span class="op" id="1527773">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527776">rp</span><span class="op" id="1527778">.</span><span class="ident" id="1527779">_type</span>&nbsp;<span class="op" id="1527785">=</span>&nbsp;<span class="ident" id="1527787">tab</span><span class="op" id="1527790">.</span><span class="ident" id="1527791">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527798">rp</span><span class="op" id="1527800">.</span><span class="ident" id="1527801">data</span>&nbsp;<span class="op" id="1527806">=</span>&nbsp;<span class="ident" id="1527808">ip</span><span class="op" id="1527810">.</span><span class="ident" id="1527811">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527817">ok</span>&nbsp;<span class="op" id="1527820">=</span>&nbsp;<span class="builtintype" id="1527822">true</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527828">return</span><br>
<span class="lineno"></span><span class="op" id="1527835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1527838">func</span>&nbsp;<span class="ident" id="1527843">convI2I</span><span class="op" id="1527850">(</span><span class="ident" id="1527851">inter</span>&nbsp;<span class="op" id="1527857">*</span><span class="ident" id="1527858">interfacetype</span><span class="op" id="1527871">,</span>&nbsp;<span class="ident" id="1527873">i</span>&nbsp;<span class="ident" id="1527875">fInterface</span><span class="op" id="1527885">)</span>&nbsp;<span class="op" id="1527887">(</span><span class="ident" id="1527888">r</span>&nbsp;<span class="ident" id="1527890">fInterface</span><span class="op" id="1527900">)</span>&nbsp;<span class="op" id="1527902">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527905">ip</span>&nbsp;<span class="op" id="1527908">:=</span>&nbsp;<span class="op" id="1527911">(</span><span class="op" id="1527912">*</span><span class="ident" id="1527913">iface</span><span class="op" id="1527918">)</span><span class="op" id="1527919">(</span><span class="ident" id="1527920">unsafe</span><span class="op" id="1527926">.</span><span class="ident" id="1527927">Pointer</span><span class="op" id="1527934">(</span><span class="op" id="1527935">&amp;</span><span class="ident" id="1527936">i</span><span class="op" id="1527937">)</span><span class="op" id="1527938">)</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527941">tab</span>&nbsp;<span class="op" id="1527945">:=</span>&nbsp;<span class="ident" id="1527948">ip</span><span class="op" id="1527950">.</span><span class="ident" id="1527951">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527956">if</span>&nbsp;<span class="ident" id="1527959">tab</span>&nbsp;<span class="op" id="1527963">==</span>&nbsp;<span class="ident" id="1527966">nil</span>&nbsp;<span class="op" id="1527970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1527974">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1527982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1527985">rp</span>&nbsp;<span class="op" id="1527988">:=</span>&nbsp;<span class="op" id="1527991">(</span><span class="op" id="1527992">*</span><span class="ident" id="1527993">iface</span><span class="op" id="1527998">)</span><span class="op" id="1527999">(</span><span class="ident" id="1528000">unsafe</span><span class="op" id="1528006">.</span><span class="ident" id="1528007">Pointer</span><span class="op" id="1528014">(</span><span class="op" id="1528015">&amp;</span><span class="ident" id="1528016">r</span><span class="op" id="1528017">)</span><span class="op" id="1528018">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528021">if</span>&nbsp;<span class="ident" id="1528024">tab</span><span class="op" id="1528027">.</span><span class="ident" id="1528028">inter</span>&nbsp;<span class="op" id="1528034">==</span>&nbsp;<span class="ident" id="1528037">inter</span>&nbsp;<span class="op" id="1528043">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528047">rp</span><span class="op" id="1528049">.</span><span class="ident" id="1528050">tab</span>&nbsp;<span class="op" id="1528054">=</span>&nbsp;<span class="ident" id="1528056">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528062">rp</span><span class="op" id="1528064">.</span><span class="ident" id="1528065">data</span>&nbsp;<span class="op" id="1528070">=</span>&nbsp;<span class="ident" id="1528072">ip</span><span class="op" id="1528074">.</span><span class="ident" id="1528075">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528082">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528090">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528093">rp</span><span class="op" id="1528095">.</span><span class="ident" id="1528096">tab</span>&nbsp;<span class="op" id="1528100">=</span>&nbsp;<span class="ident" id="1528102">getitab</span><span class="op" id="1528109">(</span><span class="ident" id="1528110">inter</span><span class="op" id="1528115">,</span>&nbsp;<span class="ident" id="1528117">tab</span><span class="op" id="1528120">.</span><span class="ident" id="1528121">_type</span><span class="op" id="1528126">,</span>&nbsp;<span class="builtintype" id="1528128">false</span><span class="op" id="1528133">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528136">rp</span><span class="op" id="1528138">.</span><span class="ident" id="1528139">data</span>&nbsp;<span class="op" id="1528144">=</span>&nbsp;<span class="ident" id="1528146">ip</span><span class="op" id="1528148">.</span><span class="ident" id="1528149">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528155">return</span><br>
<span class="lineno"></span><span class="op" id="1528162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">315</span><span class="keyword" id="1528165">func</span>&nbsp;<span class="ident" id="1528170">assertI2I</span><span class="op" id="1528179">(</span><span class="ident" id="1528180">inter</span>&nbsp;<span class="op" id="1528186">*</span><span class="ident" id="1528187">interfacetype</span><span class="op" id="1528200">,</span>&nbsp;<span class="ident" id="1528202">i</span>&nbsp;<span class="ident" id="1528204">fInterface</span><span class="op" id="1528214">)</span>&nbsp;<span class="op" id="1528216">(</span><span class="ident" id="1528217">r</span>&nbsp;<span class="ident" id="1528219">fInterface</span><span class="op" id="1528229">)</span>&nbsp;<span class="op" id="1528231">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528234">ip</span>&nbsp;<span class="op" id="1528237">:=</span>&nbsp;<span class="op" id="1528240">(</span><span class="op" id="1528241">*</span><span class="ident" id="1528242">iface</span><span class="op" id="1528247">)</span><span class="op" id="1528248">(</span><span class="ident" id="1528249">unsafe</span><span class="op" id="1528255">.</span><span class="ident" id="1528256">Pointer</span><span class="op" id="1528263">(</span><span class="op" id="1528264">&amp;</span><span class="ident" id="1528265">i</span><span class="op" id="1528266">)</span><span class="op" id="1528267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528270">tab</span>&nbsp;<span class="op" id="1528274">:=</span>&nbsp;<span class="ident" id="1528277">ip</span><span class="op" id="1528279">.</span><span class="ident" id="1528280">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528285">if</span>&nbsp;<span class="ident" id="1528288">tab</span>&nbsp;<span class="op" id="1528292">==</span>&nbsp;<span class="ident" id="1528295">nil</span>&nbsp;<span class="op" id="1528299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1528303">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1528362">panic</span><span class="op" id="1528367">(</span><span class="op" id="1528368">&amp;</span><span class="ident" id="1528369">TypeAssertionError</span><span class="op" id="1528387">{</span><span class="string" id="1528388">&#34;&#34;</span><span class="op" id="1528390">,</span>&nbsp;<span class="string" id="1528392">&#34;&#34;</span><span class="op" id="1528394">,</span>&nbsp;<span class="op" id="1528396">*</span><span class="ident" id="1528397">inter</span><span class="op" id="1528402">.</span><span class="ident" id="1528403">typ</span><span class="op" id="1528406">.</span><span class="ident" id="1528407">_string</span><span class="op" id="1528414">,</span>&nbsp;<span class="string" id="1528416">&#34;&#34;</span><span class="op" id="1528418">}</span><span class="op" id="1528419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528425">rp</span>&nbsp;<span class="op" id="1528428">:=</span>&nbsp;<span class="op" id="1528431">(</span><span class="op" id="1528432">*</span><span class="ident" id="1528433">iface</span><span class="op" id="1528438">)</span><span class="op" id="1528439">(</span><span class="ident" id="1528440">unsafe</span><span class="op" id="1528446">.</span><span class="ident" id="1528447">Pointer</span><span class="op" id="1528454">(</span><span class="op" id="1528455">&amp;</span><span class="ident" id="1528456">r</span><span class="op" id="1528457">)</span><span class="op" id="1528458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528461">if</span>&nbsp;<span class="ident" id="1528464">tab</span><span class="op" id="1528467">.</span><span class="ident" id="1528468">inter</span>&nbsp;<span class="op" id="1528474">==</span>&nbsp;<span class="ident" id="1528477">inter</span>&nbsp;<span class="op" id="1528483">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528487">rp</span><span class="op" id="1528489">.</span><span class="ident" id="1528490">tab</span>&nbsp;<span class="op" id="1528494">=</span>&nbsp;<span class="ident" id="1528496">tab</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528502">rp</span><span class="op" id="1528504">.</span><span class="ident" id="1528505">data</span>&nbsp;<span class="op" id="1528510">=</span>&nbsp;<span class="ident" id="1528512">ip</span><span class="op" id="1528514">.</span><span class="ident" id="1528515">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528522">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528530">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528533">rp</span><span class="op" id="1528535">.</span><span class="ident" id="1528536">tab</span>&nbsp;<span class="op" id="1528540">=</span>&nbsp;<span class="ident" id="1528542">getitab</span><span class="op" id="1528549">(</span><span class="ident" id="1528550">inter</span><span class="op" id="1528555">,</span>&nbsp;<span class="ident" id="1528557">tab</span><span class="op" id="1528560">.</span><span class="ident" id="1528561">_type</span><span class="op" id="1528566">,</span>&nbsp;<span class="builtintype" id="1528568">false</span><span class="op" id="1528573">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528576">rp</span><span class="op" id="1528578">.</span><span class="ident" id="1528579">data</span>&nbsp;<span class="op" id="1528584">=</span>&nbsp;<span class="ident" id="1528586">ip</span><span class="op" id="1528588">.</span><span class="ident" id="1528589">data</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528595">return</span><br>
<span class="lineno"></span><span class="op" id="1528602">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1528605">func</span>&nbsp;<span class="ident" id="1528610">assertI2I2</span><span class="op" id="1528620">(</span><span class="ident" id="1528621">inter</span>&nbsp;<span class="op" id="1528627">*</span><span class="ident" id="1528628">interfacetype</span><span class="op" id="1528641">,</span>&nbsp;<span class="ident" id="1528643">i</span>&nbsp;<span class="ident" id="1528645">fInterface</span><span class="op" id="1528655">)</span>&nbsp;<span class="op" id="1528657">(</span><span class="ident" id="1528658">r</span>&nbsp;<span class="ident" id="1528660">fInterface</span><span class="op" id="1528670">,</span>&nbsp;<span class="ident" id="1528672">ok</span>&nbsp;<span class="builtintype" id="1528675">bool</span><span class="op" id="1528679">)</span>&nbsp;<span class="op" id="1528681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528684">ip</span>&nbsp;<span class="op" id="1528687">:=</span>&nbsp;<span class="op" id="1528690">(</span><span class="op" id="1528691">*</span><span class="ident" id="1528692">iface</span><span class="op" id="1528697">)</span><span class="op" id="1528698">(</span><span class="ident" id="1528699">unsafe</span><span class="op" id="1528705">.</span><span class="ident" id="1528706">Pointer</span><span class="op" id="1528713">(</span><span class="op" id="1528714">&amp;</span><span class="ident" id="1528715">i</span><span class="op" id="1528716">)</span><span class="op" id="1528717">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528720">tab</span>&nbsp;<span class="op" id="1528724">:=</span>&nbsp;<span class="ident" id="1528727">ip</span><span class="op" id="1528729">.</span><span class="ident" id="1528730">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528735">if</span>&nbsp;<span class="ident" id="1528738">tab</span>&nbsp;<span class="op" id="1528742">==</span>&nbsp;<span class="ident" id="1528745">nil</span>&nbsp;<span class="op" id="1528749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528753">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528764">rp</span>&nbsp;<span class="op" id="1528767">:=</span>&nbsp;<span class="op" id="1528770">(</span><span class="op" id="1528771">*</span><span class="ident" id="1528772">iface</span><span class="op" id="1528777">)</span><span class="op" id="1528778">(</span><span class="ident" id="1528779">unsafe</span><span class="op" id="1528785">.</span><span class="ident" id="1528786">Pointer</span><span class="op" id="1528793">(</span><span class="op" id="1528794">&amp;</span><span class="ident" id="1528795">r</span><span class="op" id="1528796">)</span><span class="op" id="1528797">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528800">if</span>&nbsp;<span class="ident" id="1528803">tab</span><span class="op" id="1528806">.</span><span class="ident" id="1528807">inter</span>&nbsp;<span class="op" id="1528813">==</span>&nbsp;<span class="ident" id="1528816">inter</span>&nbsp;<span class="op" id="1528822">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528826">rp</span><span class="op" id="1528828">.</span><span class="ident" id="1528829">tab</span>&nbsp;<span class="op" id="1528833">=</span>&nbsp;<span class="ident" id="1528835">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528841">rp</span><span class="op" id="1528843">.</span><span class="ident" id="1528844">data</span>&nbsp;<span class="op" id="1528849">=</span>&nbsp;<span class="ident" id="1528851">ip</span><span class="op" id="1528853">.</span><span class="ident" id="1528854">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528861">ok</span>&nbsp;<span class="op" id="1528864">=</span>&nbsp;<span class="builtintype" id="1528866">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528873">return</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528881">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528884">tab</span>&nbsp;<span class="op" id="1528888">=</span>&nbsp;<span class="ident" id="1528890">getitab</span><span class="op" id="1528897">(</span><span class="ident" id="1528898">inter</span><span class="op" id="1528903">,</span>&nbsp;<span class="ident" id="1528905">tab</span><span class="op" id="1528908">.</span><span class="ident" id="1528909">_type</span><span class="op" id="1528914">,</span>&nbsp;<span class="builtintype" id="1528916">true</span><span class="op" id="1528920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528923">if</span>&nbsp;<span class="ident" id="1528926">tab</span>&nbsp;<span class="op" id="1528930">==</span>&nbsp;<span class="ident" id="1528933">nil</span>&nbsp;<span class="op" id="1528937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528941">rp</span><span class="op" id="1528943">.</span><span class="ident" id="1528944">data</span>&nbsp;<span class="op" id="1528949">=</span>&nbsp;<span class="ident" id="1528951">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528957">rp</span><span class="op" id="1528959">.</span><span class="ident" id="1528960">tab</span>&nbsp;<span class="op" id="1528964">=</span>&nbsp;<span class="ident" id="1528966">nil</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528972">ok</span>&nbsp;<span class="op" id="1528975">=</span>&nbsp;<span class="builtintype" id="1528977">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1528985">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1528993">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1528996">rp</span><span class="op" id="1528998">.</span><span class="ident" id="1528999">tab</span>&nbsp;<span class="op" id="1529003">=</span>&nbsp;<span class="ident" id="1529005">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529010">rp</span><span class="op" id="1529012">.</span><span class="ident" id="1529013">data</span>&nbsp;<span class="op" id="1529018">=</span>&nbsp;<span class="ident" id="1529020">ip</span><span class="op" id="1529022">.</span><span class="ident" id="1529023">data</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529029">ok</span>&nbsp;<span class="op" id="1529032">=</span>&nbsp;<span class="builtintype" id="1529034">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529040">return</span><br>
<span class="lineno"></span><span class="op" id="1529047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529050">func</span>&nbsp;<span class="ident" id="1529055">assertE2I</span><span class="op" id="1529064">(</span><span class="ident" id="1529065">inter</span>&nbsp;<span class="op" id="1529071">*</span><span class="ident" id="1529072">interfacetype</span><span class="op" id="1529085">,</span>&nbsp;<span class="ident" id="1529087">e</span>&nbsp;<span class="keyword" id="1529089">interface</span><span class="op" id="1529098">{</span><span class="op" id="1529099">}</span><span class="op" id="1529100">)</span>&nbsp;<span class="op" id="1529102">(</span><span class="ident" id="1529103">r</span>&nbsp;<span class="ident" id="1529105">fInterface</span><span class="op" id="1529115">)</span>&nbsp;<span class="op" id="1529117">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529120">ep</span>&nbsp;<span class="op" id="1529123">:=</span>&nbsp;<span class="op" id="1529126">(</span><span class="op" id="1529127">*</span><span class="ident" id="1529128">eface</span><span class="op" id="1529133">)</span><span class="op" id="1529134">(</span><span class="ident" id="1529135">unsafe</span><span class="op" id="1529141">.</span><span class="ident" id="1529142">Pointer</span><span class="op" id="1529149">(</span><span class="op" id="1529150">&amp;</span><span class="ident" id="1529151">e</span><span class="op" id="1529152">)</span><span class="op" id="1529153">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529156">t</span>&nbsp;<span class="op" id="1529158">:=</span>&nbsp;<span class="ident" id="1529161">ep</span><span class="op" id="1529163">.</span><span class="ident" id="1529164">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529171">if</span>&nbsp;<span class="ident" id="1529174">t</span>&nbsp;<span class="op" id="1529176">==</span>&nbsp;<span class="ident" id="1529179">nil</span>&nbsp;<span class="op" id="1529183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529187">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1529246">panic</span><span class="op" id="1529251">(</span><span class="op" id="1529252">&amp;</span><span class="ident" id="1529253">TypeAssertionError</span><span class="op" id="1529271">{</span><span class="string" id="1529272">&#34;&#34;</span><span class="op" id="1529274">,</span>&nbsp;<span class="string" id="1529276">&#34;&#34;</span><span class="op" id="1529278">,</span>&nbsp;<span class="op" id="1529280">*</span><span class="ident" id="1529281">inter</span><span class="op" id="1529286">.</span><span class="ident" id="1529287">typ</span><span class="op" id="1529290">.</span><span class="ident" id="1529291">_string</span><span class="op" id="1529298">,</span>&nbsp;<span class="string" id="1529300">&#34;&#34;</span><span class="op" id="1529302">}</span><span class="op" id="1529303">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529306">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529309">rp</span>&nbsp;<span class="op" id="1529312">:=</span>&nbsp;<span class="op" id="1529315">(</span><span class="op" id="1529316">*</span><span class="ident" id="1529317">iface</span><span class="op" id="1529322">)</span><span class="op" id="1529323">(</span><span class="ident" id="1529324">unsafe</span><span class="op" id="1529330">.</span><span class="ident" id="1529331">Pointer</span><span class="op" id="1529338">(</span><span class="op" id="1529339">&amp;</span><span class="ident" id="1529340">r</span><span class="op" id="1529341">)</span><span class="op" id="1529342">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529345">rp</span><span class="op" id="1529347">.</span><span class="ident" id="1529348">tab</span>&nbsp;<span class="op" id="1529352">=</span>&nbsp;<span class="ident" id="1529354">getitab</span><span class="op" id="1529361">(</span><span class="ident" id="1529362">inter</span><span class="op" id="1529367">,</span>&nbsp;<span class="ident" id="1529369">t</span><span class="op" id="1529370">,</span>&nbsp;<span class="builtintype" id="1529372">false</span><span class="op" id="1529377">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529380">rp</span><span class="op" id="1529382">.</span><span class="ident" id="1529383">data</span>&nbsp;<span class="op" id="1529388">=</span>&nbsp;<span class="ident" id="1529390">ep</span><span class="op" id="1529392">.</span><span class="ident" id="1529393">data</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529399">return</span><br>
<span class="lineno">370</span><span class="op" id="1529406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529409">func</span>&nbsp;<span class="ident" id="1529414">assertE2I2</span><span class="op" id="1529424">(</span><span class="ident" id="1529425">inter</span>&nbsp;<span class="op" id="1529431">*</span><span class="ident" id="1529432">interfacetype</span><span class="op" id="1529445">,</span>&nbsp;<span class="ident" id="1529447">e</span>&nbsp;<span class="keyword" id="1529449">interface</span><span class="op" id="1529458">{</span><span class="op" id="1529459">}</span><span class="op" id="1529460">)</span>&nbsp;<span class="op" id="1529462">(</span><span class="ident" id="1529463">r</span>&nbsp;<span class="ident" id="1529465">fInterface</span><span class="op" id="1529475">,</span>&nbsp;<span class="ident" id="1529477">ok</span>&nbsp;<span class="builtintype" id="1529480">bool</span><span class="op" id="1529484">)</span>&nbsp;<span class="op" id="1529486">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529489">ep</span>&nbsp;<span class="op" id="1529492">:=</span>&nbsp;<span class="op" id="1529495">(</span><span class="op" id="1529496">*</span><span class="ident" id="1529497">eface</span><span class="op" id="1529502">)</span><span class="op" id="1529503">(</span><span class="ident" id="1529504">unsafe</span><span class="op" id="1529510">.</span><span class="ident" id="1529511">Pointer</span><span class="op" id="1529518">(</span><span class="op" id="1529519">&amp;</span><span class="ident" id="1529520">e</span><span class="op" id="1529521">)</span><span class="op" id="1529522">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529525">t</span>&nbsp;<span class="op" id="1529527">:=</span>&nbsp;<span class="ident" id="1529530">ep</span><span class="op" id="1529532">.</span><span class="ident" id="1529533">_type</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529540">if</span>&nbsp;<span class="ident" id="1529543">t</span>&nbsp;<span class="op" id="1529545">==</span>&nbsp;<span class="ident" id="1529548">nil</span>&nbsp;<span class="op" id="1529552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529556">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529564">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529567">tab</span>&nbsp;<span class="op" id="1529571">:=</span>&nbsp;<span class="ident" id="1529574">getitab</span><span class="op" id="1529581">(</span><span class="ident" id="1529582">inter</span><span class="op" id="1529587">,</span>&nbsp;<span class="ident" id="1529589">t</span><span class="op" id="1529590">,</span>&nbsp;<span class="builtintype" id="1529592">true</span><span class="op" id="1529596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529599">if</span>&nbsp;<span class="ident" id="1529602">tab</span>&nbsp;<span class="op" id="1529606">==</span>&nbsp;<span class="ident" id="1529609">nil</span>&nbsp;<span class="op" id="1529613">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529617">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529625">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529628">rp</span>&nbsp;<span class="op" id="1529631">:=</span>&nbsp;<span class="op" id="1529634">(</span><span class="op" id="1529635">*</span><span class="ident" id="1529636">iface</span><span class="op" id="1529641">)</span><span class="op" id="1529642">(</span><span class="ident" id="1529643">unsafe</span><span class="op" id="1529649">.</span><span class="ident" id="1529650">Pointer</span><span class="op" id="1529657">(</span><span class="op" id="1529658">&amp;</span><span class="ident" id="1529659">r</span><span class="op" id="1529660">)</span><span class="op" id="1529661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529664">rp</span><span class="op" id="1529666">.</span><span class="ident" id="1529667">tab</span>&nbsp;<span class="op" id="1529671">=</span>&nbsp;<span class="ident" id="1529673">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529678">rp</span><span class="op" id="1529680">.</span><span class="ident" id="1529681">data</span>&nbsp;<span class="op" id="1529686">=</span>&nbsp;<span class="ident" id="1529688">ep</span><span class="op" id="1529690">.</span><span class="ident" id="1529691">data</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529697">ok</span>&nbsp;<span class="op" id="1529700">=</span>&nbsp;<span class="builtintype" id="1529702">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529708">return</span><br>
<span class="lineno"></span><span class="op" id="1529715">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529718">func</span>&nbsp;<span class="ident" id="1529723">reflect_ifaceE2I</span><span class="op" id="1529739">(</span><span class="ident" id="1529740">inter</span>&nbsp;<span class="op" id="1529746">*</span><span class="ident" id="1529747">interfacetype</span><span class="op" id="1529760">,</span>&nbsp;<span class="ident" id="1529762">e</span>&nbsp;<span class="keyword" id="1529764">interface</span><span class="op" id="1529773">{</span><span class="op" id="1529774">}</span><span class="op" id="1529775">,</span>&nbsp;<span class="ident" id="1529777">dst</span>&nbsp;<span class="op" id="1529781">*</span><span class="ident" id="1529782">fInterface</span><span class="op" id="1529792">)</span>&nbsp;<span class="op" id="1529794">{</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1529797">*</span><span class="ident" id="1529798">dst</span>&nbsp;<span class="op" id="1529802">=</span>&nbsp;<span class="ident" id="1529804">assertE2I</span><span class="op" id="1529813">(</span><span class="ident" id="1529814">inter</span><span class="op" id="1529819">,</span>&nbsp;<span class="ident" id="1529821">e</span><span class="op" id="1529822">)</span><br>
<span class="lineno"></span><span class="op" id="1529824">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1529827">func</span>&nbsp;<span class="ident" id="1529832">assertE2E</span><span class="op" id="1529841">(</span><span class="ident" id="1529842">inter</span>&nbsp;<span class="op" id="1529848">*</span><span class="ident" id="1529849">interfacetype</span><span class="op" id="1529862">,</span>&nbsp;<span class="ident" id="1529864">e</span>&nbsp;<span class="keyword" id="1529866">interface</span><span class="op" id="1529875">{</span><span class="op" id="1529876">}</span><span class="op" id="1529877">)</span>&nbsp;<span class="keyword" id="1529879">interface</span><span class="op" id="1529888">{</span><span class="op" id="1529889">}</span>&nbsp;<span class="op" id="1529891">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1529894">ep</span>&nbsp;<span class="op" id="1529897">:=</span>&nbsp;<span class="op" id="1529900">(</span><span class="op" id="1529901">*</span><span class="ident" id="1529902">eface</span><span class="op" id="1529907">)</span><span class="op" id="1529908">(</span><span class="ident" id="1529909">unsafe</span><span class="op" id="1529915">.</span><span class="ident" id="1529916">Pointer</span><span class="op" id="1529923">(</span><span class="op" id="1529924">&amp;</span><span class="ident" id="1529925">e</span><span class="op" id="1529926">)</span><span class="op" id="1529927">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1529930">if</span>&nbsp;<span class="ident" id="1529933">ep</span><span class="op" id="1529935">.</span><span class="ident" id="1529936">_type</span>&nbsp;<span class="op" id="1529942">==</span>&nbsp;<span class="ident" id="1529945">nil</span>&nbsp;<span class="op" id="1529949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="1529953">//&nbsp;explicit&nbsp;conversions&nbsp;require&nbsp;non-nil&nbsp;interface&nbsp;value.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="1530012">panic</span><span class="op" id="1530017">(</span><span class="op" id="1530018">&amp;</span><span class="ident" id="1530019">TypeAssertionError</span><span class="op" id="1530037">{</span><span class="string" id="1530038">&#34;&#34;</span><span class="op" id="1530040">,</span>&nbsp;<span class="string" id="1530042">&#34;&#34;</span><span class="op" id="1530044">,</span>&nbsp;<span class="op" id="1530046">*</span><span class="ident" id="1530047">inter</span><span class="op" id="1530052">.</span><span class="ident" id="1530053">typ</span><span class="op" id="1530056">.</span><span class="ident" id="1530057">_string</span><span class="op" id="1530064">,</span>&nbsp;<span class="string" id="1530066">&#34;&#34;</span><span class="op" id="1530068">}</span><span class="op" id="1530069">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530072">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530075">return</span>&nbsp;<span class="ident" id="1530082">e</span><br>
<span class="lineno">400</span><span class="op" id="1530084">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530087">func</span>&nbsp;<span class="ident" id="1530092">assertE2E2</span><span class="op" id="1530102">(</span><span class="ident" id="1530103">inter</span>&nbsp;<span class="op" id="1530109">*</span><span class="ident" id="1530110">interfacetype</span><span class="op" id="1530123">,</span>&nbsp;<span class="ident" id="1530125">e</span>&nbsp;<span class="keyword" id="1530127">interface</span><span class="op" id="1530136">{</span><span class="op" id="1530137">}</span><span class="op" id="1530138">)</span>&nbsp;<span class="op" id="1530140">(</span><span class="keyword" id="1530141">interface</span><span class="op" id="1530150">{</span><span class="op" id="1530151">}</span><span class="op" id="1530152">,</span>&nbsp;<span class="builtintype" id="1530154">bool</span><span class="op" id="1530158">)</span>&nbsp;<span class="op" id="1530160">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530163">ep</span>&nbsp;<span class="op" id="1530166">:=</span>&nbsp;<span class="op" id="1530169">(</span><span class="op" id="1530170">*</span><span class="ident" id="1530171">eface</span><span class="op" id="1530176">)</span><span class="op" id="1530177">(</span><span class="ident" id="1530178">unsafe</span><span class="op" id="1530184">.</span><span class="ident" id="1530185">Pointer</span><span class="op" id="1530192">(</span><span class="op" id="1530193">&amp;</span><span class="ident" id="1530194">e</span><span class="op" id="1530195">)</span><span class="op" id="1530196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530199">if</span>&nbsp;<span class="ident" id="1530202">ep</span><span class="op" id="1530204">.</span><span class="ident" id="1530205">_type</span>&nbsp;<span class="op" id="1530211">==</span>&nbsp;<span class="ident" id="1530214">nil</span>&nbsp;<span class="op" id="1530218">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530222">return</span>&nbsp;<span class="ident" id="1530229">nil</span><span class="op" id="1530232">,</span>&nbsp;<span class="builtintype" id="1530234">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530241">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530244">return</span>&nbsp;<span class="ident" id="1530251">e</span><span class="op" id="1530252">,</span>&nbsp;<span class="builtintype" id="1530254">true</span><br>
<span class="lineno"></span><span class="op" id="1530259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span><span class="keyword" id="1530262">func</span>&nbsp;<span class="ident" id="1530267">ifacethash</span><span class="op" id="1530277">(</span><span class="ident" id="1530278">i</span>&nbsp;<span class="ident" id="1530280">fInterface</span><span class="op" id="1530290">)</span>&nbsp;<span class="builtintype" id="1530292">uint32</span>&nbsp;<span class="op" id="1530299">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530302">ip</span>&nbsp;<span class="op" id="1530305">:=</span>&nbsp;<span class="op" id="1530308">(</span><span class="op" id="1530309">*</span><span class="ident" id="1530310">iface</span><span class="op" id="1530315">)</span><span class="op" id="1530316">(</span><span class="ident" id="1530317">unsafe</span><span class="op" id="1530323">.</span><span class="ident" id="1530324">Pointer</span><span class="op" id="1530331">(</span><span class="op" id="1530332">&amp;</span><span class="ident" id="1530333">i</span><span class="op" id="1530334">)</span><span class="op" id="1530335">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530338">tab</span>&nbsp;<span class="op" id="1530342">:=</span>&nbsp;<span class="ident" id="1530345">ip</span><span class="op" id="1530347">.</span><span class="ident" id="1530348">tab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530353">if</span>&nbsp;<span class="ident" id="1530356">tab</span>&nbsp;<span class="op" id="1530360">==</span>&nbsp;<span class="ident" id="1530363">nil</span>&nbsp;<span class="op" id="1530367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530371">return</span>&nbsp;<span class="num" id="1530378">0</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530384">return</span>&nbsp;<span class="ident" id="1530391">tab</span><span class="op" id="1530394">.</span><span class="ident" id="1530395">_type</span><span class="op" id="1530400">.</span><span class="ident" id="1530401">hash</span><br>
<span class="lineno"></span><span class="op" id="1530406">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530409">func</span>&nbsp;<span class="ident" id="1530414">efacethash</span><span class="op" id="1530424">(</span><span class="ident" id="1530425">e</span>&nbsp;<span class="keyword" id="1530427">interface</span><span class="op" id="1530436">{</span><span class="op" id="1530437">}</span><span class="op" id="1530438">)</span>&nbsp;<span class="builtintype" id="1530440">uint32</span>&nbsp;<span class="op" id="1530447">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530450">ep</span>&nbsp;<span class="op" id="1530453">:=</span>&nbsp;<span class="op" id="1530456">(</span><span class="op" id="1530457">*</span><span class="ident" id="1530458">eface</span><span class="op" id="1530463">)</span><span class="op" id="1530464">(</span><span class="ident" id="1530465">unsafe</span><span class="op" id="1530471">.</span><span class="ident" id="1530472">Pointer</span><span class="op" id="1530479">(</span><span class="op" id="1530480">&amp;</span><span class="ident" id="1530481">e</span><span class="op" id="1530482">)</span><span class="op" id="1530483">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530486">t</span>&nbsp;<span class="op" id="1530488">:=</span>&nbsp;<span class="ident" id="1530491">ep</span><span class="op" id="1530493">.</span><span class="ident" id="1530494">_type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530501">if</span>&nbsp;<span class="ident" id="1530504">t</span>&nbsp;<span class="op" id="1530506">==</span>&nbsp;<span class="ident" id="1530509">nil</span>&nbsp;<span class="op" id="1530513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530517">return</span>&nbsp;<span class="num" id="1530524">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530527">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530530">return</span>&nbsp;<span class="ident" id="1530537">t</span><span class="op" id="1530538">.</span><span class="ident" id="1530539">hash</span><br>
<span class="lineno"></span><span class="op" id="1530544">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="1530547">func</span>&nbsp;<span class="ident" id="1530552">iterate_itabs</span><span class="op" id="1530565">(</span><span class="ident" id="1530566">fn</span>&nbsp;<span class="keyword" id="1530569">func</span><span class="op" id="1530573">(</span><span class="op" id="1530574">*</span><span class="ident" id="1530575">itab</span><span class="op" id="1530579">)</span><span class="op" id="1530580">)</span>&nbsp;<span class="op" id="1530582">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530585">for</span>&nbsp;<span class="ident" id="1530589">_</span><span class="op" id="1530590">,</span>&nbsp;<span class="ident" id="1530592">h</span>&nbsp;<span class="op" id="1530594">:=</span>&nbsp;<span class="keyword" id="1530597">range</span>&nbsp;<span class="op" id="1530603">&amp;</span><span class="ident" id="1530604">hash</span>&nbsp;<span class="op" id="1530609">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530613">for</span>&nbsp;<span class="op" id="1530617">;</span>&nbsp;<span class="ident" id="1530619">h</span>&nbsp;<span class="op" id="1530621">!=</span>&nbsp;<span class="ident" id="1530624">nil</span><span class="op" id="1530627">;</span>&nbsp;<span class="ident" id="1530629">h</span>&nbsp;<span class="op" id="1530631">=</span>&nbsp;<span class="ident" id="1530633">h</span><span class="op" id="1530634">.</span><span class="ident" id="1530635">link</span>&nbsp;<span class="op" id="1530640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="1530645">fn</span><span class="op" id="1530647">(</span><span class="ident" id="1530648">h</span><span class="op" id="1530649">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530653">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530656">}</span><br>
<span class="lineno"></span><span class="op" id="1530658">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="keyword" id="1530661">func</span>&nbsp;<span class="ident" id="1530666">ifaceE2I2</span><span class="op" id="1530675">(</span><span class="ident" id="1530676">inter</span>&nbsp;<span class="op" id="1530682">*</span><span class="ident" id="1530683">interfacetype</span><span class="op" id="1530696">,</span>&nbsp;<span class="ident" id="1530698">e</span>&nbsp;<span class="keyword" id="1530700">interface</span><span class="op" id="1530709">{</span><span class="op" id="1530710">}</span><span class="op" id="1530711">,</span>&nbsp;<span class="ident" id="1530713">r</span>&nbsp;<span class="op" id="1530715">*</span><span class="ident" id="1530716">fInterface</span><span class="op" id="1530726">)</span>&nbsp;<span class="op" id="1530728">(</span><span class="ident" id="1530729">ok</span>&nbsp;<span class="builtintype" id="1530732">bool</span><span class="op" id="1530736">)</span>&nbsp;<span class="op" id="1530738">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="1530741">*</span><span class="ident" id="1530742">r</span><span class="op" id="1530743">,</span>&nbsp;<span class="ident" id="1530745">ok</span>&nbsp;<span class="op" id="1530748">=</span>&nbsp;<span class="ident" id="1530750">assertE2I2</span><span class="op" id="1530760">(</span><span class="ident" id="1530761">inter</span><span class="op" id="1530766">,</span>&nbsp;<span class="ident" id="1530768">e</span><span class="op" id="1530769">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="1530772">return</span><br>
<span class="lineno"></span><span class="op" id="1530779">}</span>
</div>
</body>
</html>
