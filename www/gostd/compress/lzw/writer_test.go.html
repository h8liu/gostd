<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>compress/lzw</h2>
<ul>
<li><a href="/gostd/compress/lzw/reader.go.html">reader.go</a></li>
<li><a href="/gostd/compress/lzw/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/compress/lzw/writer.go.html">writer.go</a></li>
<li><a href="/gostd/compress/lzw/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7581147">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7581202">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7581256">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7581307">package</span>&nbsp;<span class="ident" id="7581315">lzw</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7581320">import</span>&nbsp;<span class="op" id="7581327">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581330">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581336">&#34;io/ioutil&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581349">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581355">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581366">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7581376">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="7581379">var</span>&nbsp;<span class="ident" id="7581383">filenames</span>&nbsp;<span class="op" id="7581393">=</span>&nbsp;<span class="op" id="7581395">[</span><span class="op" id="7581396">]</span><span class="builtintype" id="7581397">string</span><span class="op" id="7581403">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581406">&#34;../testdata/e.txt&#34;</span><span class="op" id="7581425">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7581428">&#34;../testdata/pi.txt&#34;</span><span class="op" id="7581448">,</span><br>
<span class="lineno"></span><span class="op" id="7581450">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7581453">//&nbsp;testFile&nbsp;tests&nbsp;that&nbsp;compressing&nbsp;and&nbsp;then&nbsp;decompressing&nbsp;the&nbsp;given&nbsp;file&nbsp;with</span><br>
<span class="lineno"></span><span class="comment" id="7581531">//&nbsp;the&nbsp;given&nbsp;options&nbsp;yields&nbsp;equivalent&nbsp;bytes&nbsp;to&nbsp;the&nbsp;original&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="7581598">func</span>&nbsp;<span class="ident" id="7581603">testFile</span><span class="op" id="7581611">(</span><span class="ident" id="7581612">t</span>&nbsp;<span class="op" id="7581614">*</span><span class="ident" id="7581615">testing</span><span class="op" id="7581622">.</span><span class="ident" id="7581623">T</span><span class="op" id="7581624">,</span>&nbsp;<span class="ident" id="7581626">fn</span>&nbsp;<span class="builtintype" id="7581629">string</span><span class="op" id="7581635">,</span>&nbsp;<span class="ident" id="7581637">order</span>&nbsp;<span class="ident" id="7581643">Order</span><span class="op" id="7581648">,</span>&nbsp;<span class="ident" id="7581650">litWidth</span>&nbsp;<span class="builtintype" id="7581659">int</span><span class="op" id="7581662">)</span>&nbsp;<span class="op" id="7581664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7581667">//&nbsp;Read&nbsp;the&nbsp;file,&nbsp;as&nbsp;golden&nbsp;output.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7581704">golden</span><span class="op" id="7581710">,</span>&nbsp;<span class="ident" id="7581712">err</span>&nbsp;<span class="op" id="7581716">:=</span>&nbsp;<span class="ident" id="7581719">os</span><span class="op" id="7581721">.</span><span class="ident" id="7581722">Open</span><span class="op" id="7581726">(</span><span class="ident" id="7581727">fn</span><span class="op" id="7581729">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7581732">if</span>&nbsp;<span class="ident" id="7581735">err</span>&nbsp;<span class="op" id="7581739">!=</span>&nbsp;<span class="ident" id="7581742">nil</span>&nbsp;<span class="op" id="7581746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7581750">t</span><span class="op" id="7581751">.</span><span class="ident" id="7581752">Errorf</span><span class="op" id="7581758">(</span><span class="string" id="7581759">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7581790">,</span>&nbsp;<span class="ident" id="7581792">fn</span><span class="op" id="7581794">,</span>&nbsp;<span class="ident" id="7581796">order</span><span class="op" id="7581801">,</span>&nbsp;<span class="ident" id="7581803">litWidth</span><span class="op" id="7581811">,</span>&nbsp;<span class="ident" id="7581813">err</span><span class="op" id="7581816">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7581820">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7581828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7581831">defer</span>&nbsp;<span class="ident" id="7581837">golden</span><span class="op" id="7581843">.</span><span class="ident" id="7581844">Close</span><span class="op" id="7581849">(</span><span class="op" id="7581850">)</span><br>
<span class="lineno">30</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7581854">//&nbsp;Read&nbsp;the&nbsp;file&nbsp;again,&nbsp;and&nbsp;push&nbsp;it&nbsp;through&nbsp;a&nbsp;pipe&nbsp;that&nbsp;compresses&nbsp;at&nbsp;the&nbsp;write&nbsp;end,&nbsp;and&nbsp;decompresses&nbsp;at&nbsp;the&nbsp;read&nbsp;end.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7581974">raw</span><span class="op" id="7581977">,</span>&nbsp;<span class="ident" id="7581979">err</span>&nbsp;<span class="op" id="7581983">:=</span>&nbsp;<span class="ident" id="7581986">os</span><span class="op" id="7581988">.</span><span class="ident" id="7581989">Open</span><span class="op" id="7581993">(</span><span class="ident" id="7581994">fn</span><span class="op" id="7581996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7581999">if</span>&nbsp;<span class="ident" id="7582002">err</span>&nbsp;<span class="op" id="7582006">!=</span>&nbsp;<span class="ident" id="7582009">nil</span>&nbsp;<span class="op" id="7582013">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582017">t</span><span class="op" id="7582018">.</span><span class="ident" id="7582019">Errorf</span><span class="op" id="7582025">(</span><span class="string" id="7582026">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7582057">,</span>&nbsp;<span class="ident" id="7582059">fn</span><span class="op" id="7582061">,</span>&nbsp;<span class="ident" id="7582063">order</span><span class="op" id="7582068">,</span>&nbsp;<span class="ident" id="7582070">litWidth</span><span class="op" id="7582078">,</span>&nbsp;<span class="ident" id="7582080">err</span><span class="op" id="7582083">)</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582087">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582099">piper</span><span class="op" id="7582104">,</span>&nbsp;<span class="ident" id="7582106">pipew</span>&nbsp;<span class="op" id="7582112">:=</span>&nbsp;<span class="ident" id="7582115">io</span><span class="op" id="7582117">.</span><span class="ident" id="7582118">Pipe</span><span class="op" id="7582122">(</span><span class="op" id="7582123">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582126">defer</span>&nbsp;<span class="ident" id="7582132">piper</span><span class="op" id="7582137">.</span><span class="ident" id="7582138">Close</span><span class="op" id="7582143">(</span><span class="op" id="7582144">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582147">go</span>&nbsp;<span class="keyword" id="7582150">func</span><span class="op" id="7582154">(</span><span class="op" id="7582155">)</span>&nbsp;<span class="op" id="7582157">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582161">defer</span>&nbsp;<span class="ident" id="7582167">raw</span><span class="op" id="7582170">.</span><span class="ident" id="7582171">Close</span><span class="op" id="7582176">(</span><span class="op" id="7582177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582181">defer</span>&nbsp;<span class="ident" id="7582187">pipew</span><span class="op" id="7582192">.</span><span class="ident" id="7582193">Close</span><span class="op" id="7582198">(</span><span class="op" id="7582199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582203">lzww</span>&nbsp;<span class="op" id="7582208">:=</span>&nbsp;<span class="ident" id="7582211">NewWriter</span><span class="op" id="7582220">(</span><span class="ident" id="7582221">pipew</span><span class="op" id="7582226">,</span>&nbsp;<span class="ident" id="7582228">order</span><span class="op" id="7582233">,</span>&nbsp;<span class="ident" id="7582235">litWidth</span><span class="op" id="7582243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582247">defer</span>&nbsp;<span class="ident" id="7582253">lzww</span><span class="op" id="7582257">.</span><span class="ident" id="7582258">Close</span><span class="op" id="7582263">(</span><span class="op" id="7582264">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582268">var</span>&nbsp;<span class="ident" id="7582272">b</span>&nbsp;<span class="op" id="7582274">[</span><span class="num" id="7582275">4096</span><span class="op" id="7582279">]</span><span class="builtintype" id="7582280">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582287">for</span>&nbsp;<span class="op" id="7582291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582296">n</span><span class="op" id="7582297">,</span>&nbsp;<span class="ident" id="7582299">err0</span>&nbsp;<span class="op" id="7582304">:=</span>&nbsp;<span class="ident" id="7582307">raw</span><span class="op" id="7582310">.</span><span class="ident" id="7582311">Read</span><span class="op" id="7582315">(</span><span class="ident" id="7582316">b</span><span class="op" id="7582317">[</span><span class="op" id="7582318">:</span><span class="op" id="7582319">]</span><span class="op" id="7582320">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582325">if</span>&nbsp;<span class="ident" id="7582328">err0</span>&nbsp;<span class="op" id="7582333">!=</span>&nbsp;<span class="ident" id="7582336">nil</span>&nbsp;<span class="op" id="7582340">&amp;&amp;</span>&nbsp;<span class="ident" id="7582343">err0</span>&nbsp;<span class="op" id="7582348">!=</span>&nbsp;<span class="ident" id="7582351">io</span><span class="op" id="7582353">.</span><span class="ident" id="7582354">EOF</span>&nbsp;<span class="op" id="7582358">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582364">t</span><span class="op" id="7582365">.</span><span class="ident" id="7582366">Errorf</span><span class="op" id="7582372">(</span><span class="string" id="7582373">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7582404">,</span>&nbsp;<span class="ident" id="7582406">fn</span><span class="op" id="7582408">,</span>&nbsp;<span class="ident" id="7582410">order</span><span class="op" id="7582415">,</span>&nbsp;<span class="ident" id="7582417">litWidth</span><span class="op" id="7582425">,</span>&nbsp;<span class="ident" id="7582427">err0</span><span class="op" id="7582431">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582437">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582452">_</span><span class="op" id="7582453">,</span>&nbsp;<span class="ident" id="7582455">err1</span>&nbsp;<span class="op" id="7582460">:=</span>&nbsp;<span class="ident" id="7582463">lzww</span><span class="op" id="7582467">.</span><span class="ident" id="7582468">Write</span><span class="op" id="7582473">(</span><span class="ident" id="7582474">b</span><span class="op" id="7582475">[</span><span class="op" id="7582476">:</span><span class="ident" id="7582477">n</span><span class="op" id="7582478">]</span><span class="op" id="7582479">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582484">if</span>&nbsp;<span class="ident" id="7582487">err1</span>&nbsp;<span class="op" id="7582492">!=</span>&nbsp;<span class="ident" id="7582495">nil</span>&nbsp;<span class="op" id="7582499">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582505">t</span><span class="op" id="7582506">.</span><span class="ident" id="7582507">Errorf</span><span class="op" id="7582513">(</span><span class="string" id="7582514">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7582545">,</span>&nbsp;<span class="ident" id="7582547">fn</span><span class="op" id="7582549">,</span>&nbsp;<span class="ident" id="7582551">order</span><span class="op" id="7582556">,</span>&nbsp;<span class="ident" id="7582558">litWidth</span><span class="op" id="7582566">,</span>&nbsp;<span class="ident" id="7582568">err1</span><span class="op" id="7582572">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582578">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582588">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582593">if</span>&nbsp;<span class="ident" id="7582596">err0</span>&nbsp;<span class="op" id="7582601">==</span>&nbsp;<span class="ident" id="7582604">io</span><span class="op" id="7582606">.</span><span class="ident" id="7582607">EOF</span>&nbsp;<span class="op" id="7582611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582617">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582626">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582630">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582633">}</span><span class="op" id="7582634">(</span><span class="op" id="7582635">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582638">lzwr</span>&nbsp;<span class="op" id="7582643">:=</span>&nbsp;<span class="ident" id="7582646">NewReader</span><span class="op" id="7582655">(</span><span class="ident" id="7582656">piper</span><span class="op" id="7582661">,</span>&nbsp;<span class="ident" id="7582663">order</span><span class="op" id="7582668">,</span>&nbsp;<span class="ident" id="7582670">litWidth</span><span class="op" id="7582678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582681">defer</span>&nbsp;<span class="ident" id="7582687">lzwr</span><span class="op" id="7582691">.</span><span class="ident" id="7582692">Close</span><span class="op" id="7582697">(</span><span class="op" id="7582698">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7582702">//&nbsp;Compare&nbsp;the&nbsp;two.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582723">b0</span><span class="op" id="7582725">,</span>&nbsp;<span class="ident" id="7582727">err0</span>&nbsp;<span class="op" id="7582732">:=</span>&nbsp;<span class="ident" id="7582735">ioutil</span><span class="op" id="7582741">.</span><span class="ident" id="7582742">ReadAll</span><span class="op" id="7582749">(</span><span class="ident" id="7582750">golden</span><span class="op" id="7582756">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582759">b1</span><span class="op" id="7582761">,</span>&nbsp;<span class="ident" id="7582763">err1</span>&nbsp;<span class="op" id="7582768">:=</span>&nbsp;<span class="ident" id="7582771">ioutil</span><span class="op" id="7582777">.</span><span class="ident" id="7582778">ReadAll</span><span class="op" id="7582785">(</span><span class="ident" id="7582786">lzwr</span><span class="op" id="7582790">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582793">if</span>&nbsp;<span class="ident" id="7582796">err0</span>&nbsp;<span class="op" id="7582801">!=</span>&nbsp;<span class="ident" id="7582804">nil</span>&nbsp;<span class="op" id="7582808">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582812">t</span><span class="op" id="7582813">.</span><span class="ident" id="7582814">Errorf</span><span class="op" id="7582820">(</span><span class="string" id="7582821">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7582852">,</span>&nbsp;<span class="ident" id="7582854">fn</span><span class="op" id="7582856">,</span>&nbsp;<span class="ident" id="7582858">order</span><span class="op" id="7582863">,</span>&nbsp;<span class="ident" id="7582865">litWidth</span><span class="op" id="7582873">,</span>&nbsp;<span class="ident" id="7582875">err0</span><span class="op" id="7582879">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582883">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582891">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582894">if</span>&nbsp;<span class="ident" id="7582897">err1</span>&nbsp;<span class="op" id="7582902">!=</span>&nbsp;<span class="ident" id="7582905">nil</span>&nbsp;<span class="op" id="7582909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7582913">t</span><span class="op" id="7582914">.</span><span class="ident" id="7582915">Errorf</span><span class="op" id="7582921">(</span><span class="string" id="7582922">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;%v&#34;</span><span class="op" id="7582953">,</span>&nbsp;<span class="ident" id="7582955">fn</span><span class="op" id="7582957">,</span>&nbsp;<span class="ident" id="7582959">order</span><span class="op" id="7582964">,</span>&nbsp;<span class="ident" id="7582966">litWidth</span><span class="op" id="7582974">,</span>&nbsp;<span class="ident" id="7582976">err1</span><span class="op" id="7582980">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582984">return</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7582992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7582995">if</span>&nbsp;<span class="builtinfunc" id="7582998">len</span><span class="op" id="7583001">(</span><span class="ident" id="7583002">b1</span><span class="op" id="7583004">)</span>&nbsp;<span class="op" id="7583006">!=</span>&nbsp;<span class="builtinfunc" id="7583009">len</span><span class="op" id="7583012">(</span><span class="ident" id="7583013">b0</span><span class="op" id="7583015">)</span>&nbsp;<span class="op" id="7583017">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583021">t</span><span class="op" id="7583022">.</span><span class="ident" id="7583023">Errorf</span><span class="op" id="7583029">(</span><span class="string" id="7583030">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;length&nbsp;mismatch&nbsp;%d&nbsp;!=&nbsp;%d&#34;</span><span class="op" id="7583083">,</span>&nbsp;<span class="ident" id="7583085">fn</span><span class="op" id="7583087">,</span>&nbsp;<span class="ident" id="7583089">order</span><span class="op" id="7583094">,</span>&nbsp;<span class="ident" id="7583096">litWidth</span><span class="op" id="7583104">,</span>&nbsp;<span class="builtinfunc" id="7583106">len</span><span class="op" id="7583109">(</span><span class="ident" id="7583110">b1</span><span class="op" id="7583112">)</span><span class="op" id="7583113">,</span>&nbsp;<span class="builtinfunc" id="7583115">len</span><span class="op" id="7583118">(</span><span class="ident" id="7583119">b0</span><span class="op" id="7583121">)</span><span class="op" id="7583122">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583126">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583134">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583137">for</span>&nbsp;<span class="ident" id="7583141">i</span>&nbsp;<span class="op" id="7583143">:=</span>&nbsp;<span class="num" id="7583146">0</span><span class="op" id="7583147">;</span>&nbsp;<span class="ident" id="7583149">i</span>&nbsp;<span class="op" id="7583151">&lt;</span>&nbsp;<span class="builtinfunc" id="7583153">len</span><span class="op" id="7583156">(</span><span class="ident" id="7583157">b0</span><span class="op" id="7583159">)</span><span class="op" id="7583160">;</span>&nbsp;<span class="ident" id="7583162">i</span><span class="op" id="7583163">++</span>&nbsp;<span class="op" id="7583166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583170">if</span>&nbsp;<span class="ident" id="7583173">b1</span><span class="op" id="7583175">[</span><span class="ident" id="7583176">i</span><span class="op" id="7583177">]</span>&nbsp;<span class="op" id="7583179">!=</span>&nbsp;<span class="ident" id="7583182">b0</span><span class="op" id="7583184">[</span><span class="ident" id="7583185">i</span><span class="op" id="7583186">]</span>&nbsp;<span class="op" id="7583188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583193">t</span><span class="op" id="7583194">.</span><span class="ident" id="7583195">Errorf</span><span class="op" id="7583201">(</span><span class="string" id="7583202">&#34;%s&nbsp;(order=%d&nbsp;litWidth=%d):&nbsp;mismatch&nbsp;at&nbsp;%d,&nbsp;0x%02x&nbsp;!=&nbsp;0x%02x\n&#34;</span><span class="op" id="7583265">,</span>&nbsp;<span class="ident" id="7583267">fn</span><span class="op" id="7583269">,</span>&nbsp;<span class="ident" id="7583271">order</span><span class="op" id="7583276">,</span>&nbsp;<span class="ident" id="7583278">litWidth</span><span class="op" id="7583286">,</span>&nbsp;<span class="ident" id="7583288">i</span><span class="op" id="7583289">,</span>&nbsp;<span class="ident" id="7583291">b1</span><span class="op" id="7583293">[</span><span class="ident" id="7583294">i</span><span class="op" id="7583295">]</span><span class="op" id="7583296">,</span>&nbsp;<span class="ident" id="7583298">b0</span><span class="op" id="7583300">[</span><span class="ident" id="7583301">i</span><span class="op" id="7583302">]</span><span class="op" id="7583303">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583308">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583317">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583320">}</span><br>
<span class="lineno"></span><span class="op" id="7583322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7583325">func</span>&nbsp;<span class="ident" id="7583330">TestWriter</span><span class="op" id="7583340">(</span><span class="ident" id="7583341">t</span>&nbsp;<span class="op" id="7583343">*</span><span class="ident" id="7583344">testing</span><span class="op" id="7583351">.</span><span class="ident" id="7583352">T</span><span class="op" id="7583353">)</span>&nbsp;<span class="op" id="7583355">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583358">for</span>&nbsp;<span class="ident" id="7583362">_</span><span class="op" id="7583363">,</span>&nbsp;<span class="ident" id="7583365">filename</span>&nbsp;<span class="op" id="7583374">:=</span>&nbsp;<span class="keyword" id="7583377">range</span>&nbsp;<span class="ident" id="7583383">filenames</span>&nbsp;<span class="op" id="7583393">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583397">for</span>&nbsp;<span class="ident" id="7583401">_</span><span class="op" id="7583402">,</span>&nbsp;<span class="ident" id="7583404">order</span>&nbsp;<span class="op" id="7583410">:=</span>&nbsp;<span class="keyword" id="7583413">range</span>&nbsp;<span class="op" id="7583419">[</span><span class="op" id="7583420">...</span><span class="op" id="7583423">]</span><span class="ident" id="7583424">Order</span><span class="op" id="7583429">{</span><span class="ident" id="7583430">LSB</span><span class="op" id="7583433">,</span>&nbsp;<span class="ident" id="7583435">MSB</span><span class="op" id="7583438">}</span>&nbsp;<span class="op" id="7583440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7583445">//&nbsp;The&nbsp;test&nbsp;data&nbsp;&#34;2.71828&nbsp;etcetera&#34;&nbsp;is&nbsp;ASCII&nbsp;text&nbsp;requiring&nbsp;at&nbsp;least&nbsp;6&nbsp;bits.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583525">for</span>&nbsp;<span class="ident" id="7583529">_</span><span class="op" id="7583530">,</span>&nbsp;<span class="ident" id="7583532">litWidth</span>&nbsp;<span class="op" id="7583541">:=</span>&nbsp;<span class="keyword" id="7583544">range</span>&nbsp;<span class="op" id="7583550">[</span><span class="op" id="7583551">...</span><span class="op" id="7583554">]</span><span class="builtintype" id="7583555">int</span><span class="op" id="7583558">{</span><span class="num" id="7583559">6</span><span class="op" id="7583560">,</span>&nbsp;<span class="num" id="7583562">7</span><span class="op" id="7583563">,</span>&nbsp;<span class="num" id="7583565">8</span><span class="op" id="7583566">}</span>&nbsp;<span class="op" id="7583568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583574">testFile</span><span class="op" id="7583582">(</span><span class="ident" id="7583583">t</span><span class="op" id="7583584">,</span>&nbsp;<span class="ident" id="7583586">filename</span><span class="op" id="7583594">,</span>&nbsp;<span class="ident" id="7583596">order</span><span class="op" id="7583601">,</span>&nbsp;<span class="ident" id="7583603">litWidth</span><span class="op" id="7583611">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583616">}</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583620">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583623">}</span><br>
<span class="lineno"></span><span class="op" id="7583625">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7583628">func</span>&nbsp;<span class="ident" id="7583633">TestWriterReturnValues</span><span class="op" id="7583655">(</span><span class="ident" id="7583656">t</span>&nbsp;<span class="op" id="7583658">*</span><span class="ident" id="7583659">testing</span><span class="op" id="7583666">.</span><span class="ident" id="7583667">T</span><span class="op" id="7583668">)</span>&nbsp;<span class="op" id="7583670">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583673">w</span>&nbsp;<span class="op" id="7583675">:=</span>&nbsp;<span class="ident" id="7583678">NewWriter</span><span class="op" id="7583687">(</span><span class="ident" id="7583688">ioutil</span><span class="op" id="7583694">.</span><span class="ident" id="7583695">Discard</span><span class="op" id="7583702">,</span>&nbsp;<span class="ident" id="7583704">LSB</span><span class="op" id="7583707">,</span>&nbsp;<span class="num" id="7583709">8</span><span class="op" id="7583710">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583713">n</span><span class="op" id="7583714">,</span>&nbsp;<span class="ident" id="7583716">err</span>&nbsp;<span class="op" id="7583720">:=</span>&nbsp;<span class="ident" id="7583723">w</span><span class="op" id="7583724">.</span><span class="ident" id="7583725">Write</span><span class="op" id="7583730">(</span><span class="op" id="7583731">[</span><span class="op" id="7583732">]</span><span class="builtintype" id="7583733">byte</span><span class="op" id="7583737">(</span><span class="string" id="7583738">&#34;asdf&#34;</span><span class="op" id="7583744">)</span><span class="op" id="7583745">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583748">if</span>&nbsp;<span class="ident" id="7583751">n</span>&nbsp;<span class="op" id="7583753">!=</span>&nbsp;<span class="num" id="7583756">4</span>&nbsp;<span class="op" id="7583758">||</span>&nbsp;<span class="ident" id="7583761">err</span>&nbsp;<span class="op" id="7583765">!=</span>&nbsp;<span class="ident" id="7583768">nil</span>&nbsp;<span class="op" id="7583772">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583776">t</span><span class="op" id="7583777">.</span><span class="ident" id="7583778">Errorf</span><span class="op" id="7583784">(</span><span class="string" id="7583785">&#34;got&nbsp;%d,&nbsp;%v,&nbsp;want&nbsp;4,&nbsp;nil&#34;</span><span class="op" id="7583810">,</span>&nbsp;<span class="ident" id="7583812">n</span><span class="op" id="7583813">,</span>&nbsp;<span class="ident" id="7583815">err</span><span class="op" id="7583818">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583821">}</span><br>
<span class="lineno">105</span><span class="op" id="7583823">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7583826">func</span>&nbsp;<span class="ident" id="7583831">benchmarkEncoder</span><span class="op" id="7583847">(</span><span class="ident" id="7583848">b</span>&nbsp;<span class="op" id="7583850">*</span><span class="ident" id="7583851">testing</span><span class="op" id="7583858">.</span><span class="ident" id="7583859">B</span><span class="op" id="7583860">,</span>&nbsp;<span class="ident" id="7583862">n</span>&nbsp;<span class="builtintype" id="7583864">int</span><span class="op" id="7583867">)</span>&nbsp;<span class="op" id="7583869">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583872">b</span><span class="op" id="7583873">.</span><span class="ident" id="7583874">StopTimer</span><span class="op" id="7583883">(</span><span class="op" id="7583884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583887">b</span><span class="op" id="7583888">.</span><span class="ident" id="7583889">SetBytes</span><span class="op" id="7583897">(</span><span class="ident" id="7583898">int64</span><span class="op" id="7583903">(</span><span class="ident" id="7583904">n</span><span class="op" id="7583905">)</span><span class="op" id="7583906">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583909">buf0</span><span class="op" id="7583913">,</span>&nbsp;<span class="ident" id="7583915">err</span>&nbsp;<span class="op" id="7583919">:=</span>&nbsp;<span class="ident" id="7583922">ioutil</span><span class="op" id="7583928">.</span><span class="ident" id="7583929">ReadFile</span><span class="op" id="7583937">(</span><span class="string" id="7583938">&#34;../testdata/e.txt&#34;</span><span class="op" id="7583957">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583960">if</span>&nbsp;<span class="ident" id="7583963">err</span>&nbsp;<span class="op" id="7583967">!=</span>&nbsp;<span class="ident" id="7583970">nil</span>&nbsp;<span class="op" id="7583974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7583978">b</span><span class="op" id="7583979">.</span><span class="ident" id="7583980">Fatal</span><span class="op" id="7583985">(</span><span class="ident" id="7583986">err</span><span class="op" id="7583989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7583992">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7583995">if</span>&nbsp;<span class="builtinfunc" id="7583998">len</span><span class="op" id="7584001">(</span><span class="ident" id="7584002">buf0</span><span class="op" id="7584006">)</span>&nbsp;<span class="op" id="7584008">==</span>&nbsp;<span class="num" id="7584011">0</span>&nbsp;<span class="op" id="7584013">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584017">b</span><span class="op" id="7584018">.</span><span class="ident" id="7584019">Fatalf</span><span class="op" id="7584025">(</span><span class="string" id="7584026">&#34;test&nbsp;file&nbsp;has&nbsp;no&nbsp;data&#34;</span><span class="op" id="7584049">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7584052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584055">buf1</span>&nbsp;<span class="op" id="7584060">:=</span>&nbsp;<span class="builtinfunc" id="7584063">make</span><span class="op" id="7584067">(</span><span class="op" id="7584068">[</span><span class="op" id="7584069">]</span><span class="builtintype" id="7584070">byte</span><span class="op" id="7584074">,</span>&nbsp;<span class="ident" id="7584076">n</span><span class="op" id="7584077">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7584080">for</span>&nbsp;<span class="ident" id="7584084">i</span>&nbsp;<span class="op" id="7584086">:=</span>&nbsp;<span class="num" id="7584089">0</span><span class="op" id="7584090">;</span>&nbsp;<span class="ident" id="7584092">i</span>&nbsp;<span class="op" id="7584094">&lt;</span>&nbsp;<span class="ident" id="7584096">n</span><span class="op" id="7584097">;</span>&nbsp;<span class="ident" id="7584099">i</span>&nbsp;<span class="op" id="7584101">+=</span>&nbsp;<span class="builtinfunc" id="7584104">len</span><span class="op" id="7584107">(</span><span class="ident" id="7584108">buf0</span><span class="op" id="7584112">)</span>&nbsp;<span class="op" id="7584114">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7584118">if</span>&nbsp;<span class="builtinfunc" id="7584121">len</span><span class="op" id="7584124">(</span><span class="ident" id="7584125">buf0</span><span class="op" id="7584129">)</span>&nbsp;<span class="op" id="7584131">&gt;</span>&nbsp;<span class="ident" id="7584133">n</span><span class="op" id="7584134">-</span><span class="ident" id="7584135">i</span>&nbsp;<span class="op" id="7584137">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584142">buf0</span>&nbsp;<span class="op" id="7584147">=</span>&nbsp;<span class="ident" id="7584149">buf0</span><span class="op" id="7584153">[</span><span class="op" id="7584154">:</span><span class="ident" id="7584155">n</span><span class="op" id="7584156">-</span><span class="ident" id="7584157">i</span><span class="op" id="7584158">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7584162">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7584166">copy</span><span class="op" id="7584170">(</span><span class="ident" id="7584171">buf1</span><span class="op" id="7584175">[</span><span class="ident" id="7584176">i</span><span class="op" id="7584177">:</span><span class="op" id="7584178">]</span><span class="op" id="7584179">,</span>&nbsp;<span class="ident" id="7584181">buf0</span><span class="op" id="7584185">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7584188">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584191">buf0</span>&nbsp;<span class="op" id="7584196">=</span>&nbsp;<span class="ident" id="7584198">nil</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584203">runtime</span><span class="op" id="7584210">.</span><span class="ident" id="7584211">GC</span><span class="op" id="7584213">(</span><span class="op" id="7584214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584217">b</span><span class="op" id="7584218">.</span><span class="ident" id="7584219">StartTimer</span><span class="op" id="7584229">(</span><span class="op" id="7584230">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7584233">for</span>&nbsp;<span class="ident" id="7584237">i</span>&nbsp;<span class="op" id="7584239">:=</span>&nbsp;<span class="num" id="7584242">0</span><span class="op" id="7584243">;</span>&nbsp;<span class="ident" id="7584245">i</span>&nbsp;<span class="op" id="7584247">&lt;</span>&nbsp;<span class="ident" id="7584249">b</span><span class="op" id="7584250">.</span><span class="ident" id="7584251">N</span><span class="op" id="7584252">;</span>&nbsp;<span class="ident" id="7584254">i</span><span class="op" id="7584255">++</span>&nbsp;<span class="op" id="7584258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584262">w</span>&nbsp;<span class="op" id="7584264">:=</span>&nbsp;<span class="ident" id="7584267">NewWriter</span><span class="op" id="7584276">(</span><span class="ident" id="7584277">ioutil</span><span class="op" id="7584283">.</span><span class="ident" id="7584284">Discard</span><span class="op" id="7584291">,</span>&nbsp;<span class="ident" id="7584293">LSB</span><span class="op" id="7584296">,</span>&nbsp;<span class="num" id="7584298">8</span><span class="op" id="7584299">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584303">w</span><span class="op" id="7584304">.</span><span class="ident" id="7584305">Write</span><span class="op" id="7584310">(</span><span class="ident" id="7584311">buf1</span><span class="op" id="7584315">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584319">w</span><span class="op" id="7584320">.</span><span class="ident" id="7584321">Close</span><span class="op" id="7584326">(</span><span class="op" id="7584327">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7584330">}</span><br>
<span class="lineno"></span><span class="op" id="7584332">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7584335">func</span>&nbsp;<span class="ident" id="7584340">BenchmarkEncoder1e4</span><span class="op" id="7584359">(</span><span class="ident" id="7584360">b</span>&nbsp;<span class="op" id="7584362">*</span><span class="ident" id="7584363">testing</span><span class="op" id="7584370">.</span><span class="ident" id="7584371">B</span><span class="op" id="7584372">)</span>&nbsp;<span class="op" id="7584374">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584377">benchmarkEncoder</span><span class="op" id="7584393">(</span><span class="ident" id="7584394">b</span><span class="op" id="7584395">,</span>&nbsp;<span class="num" id="7584397">1e4</span><span class="op" id="7584400">)</span><br>
<span class="lineno"></span><span class="op" id="7584402">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7584405">func</span>&nbsp;<span class="ident" id="7584410">BenchmarkEncoder1e5</span><span class="op" id="7584429">(</span><span class="ident" id="7584430">b</span>&nbsp;<span class="op" id="7584432">*</span><span class="ident" id="7584433">testing</span><span class="op" id="7584440">.</span><span class="ident" id="7584441">B</span><span class="op" id="7584442">)</span>&nbsp;<span class="op" id="7584444">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584447">benchmarkEncoder</span><span class="op" id="7584463">(</span><span class="ident" id="7584464">b</span><span class="op" id="7584465">,</span>&nbsp;<span class="num" id="7584467">1e5</span><span class="op" id="7584470">)</span><br>
<span class="lineno">140</span><span class="op" id="7584472">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7584475">func</span>&nbsp;<span class="ident" id="7584480">BenchmarkEncoder1e6</span><span class="op" id="7584499">(</span><span class="ident" id="7584500">b</span>&nbsp;<span class="op" id="7584502">*</span><span class="ident" id="7584503">testing</span><span class="op" id="7584510">.</span><span class="ident" id="7584511">B</span><span class="op" id="7584512">)</span>&nbsp;<span class="op" id="7584514">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7584517">benchmarkEncoder</span><span class="op" id="7584533">(</span><span class="ident" id="7584534">b</span><span class="op" id="7584535">,</span>&nbsp;<span class="num" id="7584537">1e6</span><span class="op" id="7584540">)</span><br>
<span class="lineno"></span><span class="op" id="7584542">}</span>
</div>
</body>
</html>
