<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>image/png</h2>
<ul>
<li><a href="/gostd/image/png/paeth.go.html">paeth.go</a></li>
<li><a href="/gostd/image/png/paeth_test.go.html">paeth_test.go</a></li>
<li><a href="/gostd/image/png/reader.go.html">reader.go</a></li>
<li><a href="/gostd/image/png/reader_test.go.html">reader_test.go</a></li>
<li><a href="/gostd/image/png/writer.go.html">writer.go</a></li>
<li><a href="/gostd/image/png/writer_test.go.html">writer_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7360728">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7360783">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7360837">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7360888">package</span>&nbsp;<span class="ident" id="7360896">png</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360901">import</span>&nbsp;<span class="op" id="7360908">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360911">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360920">&#34;math/rand&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7360933">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7360943">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7360946">func</span>&nbsp;<span class="ident" id="7360951">slowAbs</span><span class="op" id="7360958">(</span><span class="ident" id="7360959">x</span>&nbsp;<span class="builtintype" id="7360961">int</span><span class="op" id="7360964">)</span>&nbsp;<span class="builtintype" id="7360966">int</span>&nbsp;<span class="op" id="7360970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360973">if</span>&nbsp;<span class="ident" id="7360976">x</span>&nbsp;<span class="op" id="7360978">&lt;</span>&nbsp;<span class="num" id="7360980">0</span>&nbsp;<span class="op" id="7360982">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7360986">return</span>&nbsp;<span class="op" id="7360993">-</span><span class="ident" id="7360994">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7360997">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361000">return</span>&nbsp;<span class="ident" id="7361007">x</span><br>
<span class="lineno"></span><span class="op" id="7361009">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="7361012">//&nbsp;slowPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;the&nbsp;Paeth&nbsp;function.</span><br>
<span class="lineno"></span><span class="comment" id="7361084">//&nbsp;It&nbsp;is&nbsp;a&nbsp;straight&nbsp;port&nbsp;of&nbsp;the&nbsp;sample&nbsp;code&nbsp;in&nbsp;the&nbsp;PNG&nbsp;spec,&nbsp;section&nbsp;9.4.</span><br>
<span class="lineno"></span><span class="keyword" id="7361158">func</span>&nbsp;<span class="ident" id="7361163">slowPaeth</span><span class="op" id="7361172">(</span><span class="ident" id="7361173">a</span><span class="op" id="7361174">,</span>&nbsp;<span class="ident" id="7361176">b</span><span class="op" id="7361177">,</span>&nbsp;<span class="ident" id="7361179">c</span>&nbsp;<span class="builtintype" id="7361181">uint8</span><span class="op" id="7361186">)</span>&nbsp;<span class="builtintype" id="7361188">uint8</span>&nbsp;<span class="op" id="7361194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361197">p</span>&nbsp;<span class="op" id="7361199">:=</span>&nbsp;<span class="builtintype" id="7361202">int</span><span class="op" id="7361205">(</span><span class="ident" id="7361206">a</span><span class="op" id="7361207">)</span>&nbsp;<span class="op" id="7361209">+</span>&nbsp;<span class="builtintype" id="7361211">int</span><span class="op" id="7361214">(</span><span class="ident" id="7361215">b</span><span class="op" id="7361216">)</span>&nbsp;<span class="op" id="7361218">-</span>&nbsp;<span class="builtintype" id="7361220">int</span><span class="op" id="7361223">(</span><span class="ident" id="7361224">c</span><span class="op" id="7361225">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361228">pa</span>&nbsp;<span class="op" id="7361231">:=</span>&nbsp;<span class="ident" id="7361234">slowAbs</span><span class="op" id="7361241">(</span><span class="ident" id="7361242">p</span>&nbsp;<span class="op" id="7361244">-</span>&nbsp;<span class="builtintype" id="7361246">int</span><span class="op" id="7361249">(</span><span class="ident" id="7361250">a</span><span class="op" id="7361251">)</span><span class="op" id="7361252">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361255">pb</span>&nbsp;<span class="op" id="7361258">:=</span>&nbsp;<span class="ident" id="7361261">slowAbs</span><span class="op" id="7361268">(</span><span class="ident" id="7361269">p</span>&nbsp;<span class="op" id="7361271">-</span>&nbsp;<span class="builtintype" id="7361273">int</span><span class="op" id="7361276">(</span><span class="ident" id="7361277">b</span><span class="op" id="7361278">)</span><span class="op" id="7361279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361282">pc</span>&nbsp;<span class="op" id="7361285">:=</span>&nbsp;<span class="ident" id="7361288">slowAbs</span><span class="op" id="7361295">(</span><span class="ident" id="7361296">p</span>&nbsp;<span class="op" id="7361298">-</span>&nbsp;<span class="builtintype" id="7361300">int</span><span class="op" id="7361303">(</span><span class="ident" id="7361304">c</span><span class="op" id="7361305">)</span><span class="op" id="7361306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361309">if</span>&nbsp;<span class="ident" id="7361312">pa</span>&nbsp;<span class="op" id="7361315">&lt;=</span>&nbsp;<span class="ident" id="7361318">pb</span>&nbsp;<span class="op" id="7361321">&amp;&amp;</span>&nbsp;<span class="ident" id="7361324">pa</span>&nbsp;<span class="op" id="7361327">&lt;=</span>&nbsp;<span class="ident" id="7361330">pc</span>&nbsp;<span class="op" id="7361333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361337">return</span>&nbsp;<span class="ident" id="7361344">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361347">}</span>&nbsp;<span class="keyword" id="7361349">else</span>&nbsp;<span class="keyword" id="7361354">if</span>&nbsp;<span class="ident" id="7361357">pb</span>&nbsp;<span class="op" id="7361360">&lt;=</span>&nbsp;<span class="ident" id="7361363">pc</span>&nbsp;<span class="op" id="7361366">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361370">return</span>&nbsp;<span class="ident" id="7361377">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361380">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361383">return</span>&nbsp;<span class="ident" id="7361390">c</span><br>
<span class="lineno"></span><span class="op" id="7361392">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="comment" id="7361395">//&nbsp;slowFilterPaeth&nbsp;is&nbsp;a&nbsp;slow&nbsp;but&nbsp;simple&nbsp;implementation&nbsp;of&nbsp;func&nbsp;filterPaeth.</span><br>
<span class="lineno"></span><span class="keyword" id="7361471">func</span>&nbsp;<span class="ident" id="7361476">slowFilterPaeth</span><span class="op" id="7361491">(</span><span class="ident" id="7361492">cdat</span><span class="op" id="7361496">,</span>&nbsp;<span class="ident" id="7361498">pdat</span>&nbsp;<span class="op" id="7361503">[</span><span class="op" id="7361504">]</span><span class="builtintype" id="7361505">byte</span><span class="op" id="7361509">,</span>&nbsp;<span class="ident" id="7361511">bytesPerPixel</span>&nbsp;<span class="builtintype" id="7361525">int</span><span class="op" id="7361528">)</span>&nbsp;<span class="op" id="7361530">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361533">for</span>&nbsp;<span class="ident" id="7361537">i</span>&nbsp;<span class="op" id="7361539">:=</span>&nbsp;<span class="num" id="7361542">0</span><span class="op" id="7361543">;</span>&nbsp;<span class="ident" id="7361545">i</span>&nbsp;<span class="op" id="7361547">&lt;</span>&nbsp;<span class="ident" id="7361549">bytesPerPixel</span><span class="op" id="7361562">;</span>&nbsp;<span class="ident" id="7361564">i</span><span class="op" id="7361565">++</span>&nbsp;<span class="op" id="7361568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361572">cdat</span><span class="op" id="7361576">[</span><span class="ident" id="7361577">i</span><span class="op" id="7361578">]</span>&nbsp;<span class="op" id="7361580">+=</span>&nbsp;<span class="ident" id="7361583">paeth</span><span class="op" id="7361588">(</span><span class="num" id="7361589">0</span><span class="op" id="7361590">,</span>&nbsp;<span class="ident" id="7361592">pdat</span><span class="op" id="7361596">[</span><span class="ident" id="7361597">i</span><span class="op" id="7361598">]</span><span class="op" id="7361599">,</span>&nbsp;<span class="num" id="7361601">0</span><span class="op" id="7361602">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361605">}</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361608">for</span>&nbsp;<span class="ident" id="7361612">i</span>&nbsp;<span class="op" id="7361614">:=</span>&nbsp;<span class="ident" id="7361617">bytesPerPixel</span><span class="op" id="7361630">;</span>&nbsp;<span class="ident" id="7361632">i</span>&nbsp;<span class="op" id="7361634">&lt;</span>&nbsp;<span class="builtinfunc" id="7361636">len</span><span class="op" id="7361639">(</span><span class="ident" id="7361640">cdat</span><span class="op" id="7361644">)</span><span class="op" id="7361645">;</span>&nbsp;<span class="ident" id="7361647">i</span><span class="op" id="7361648">++</span>&nbsp;<span class="op" id="7361651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361655">cdat</span><span class="op" id="7361659">[</span><span class="ident" id="7361660">i</span><span class="op" id="7361661">]</span>&nbsp;<span class="op" id="7361663">+=</span>&nbsp;<span class="ident" id="7361666">paeth</span><span class="op" id="7361671">(</span><span class="ident" id="7361672">cdat</span><span class="op" id="7361676">[</span><span class="ident" id="7361677">i</span><span class="op" id="7361678">-</span><span class="ident" id="7361679">bytesPerPixel</span><span class="op" id="7361692">]</span><span class="op" id="7361693">,</span>&nbsp;<span class="ident" id="7361695">pdat</span><span class="op" id="7361699">[</span><span class="ident" id="7361700">i</span><span class="op" id="7361701">]</span><span class="op" id="7361702">,</span>&nbsp;<span class="ident" id="7361704">pdat</span><span class="op" id="7361708">[</span><span class="ident" id="7361709">i</span><span class="op" id="7361710">-</span><span class="ident" id="7361711">bytesPerPixel</span><span class="op" id="7361724">]</span><span class="op" id="7361725">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7361728">}</span><br>
<span class="lineno"></span><span class="op" id="7361730">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">45</span><span class="keyword" id="7361733">func</span>&nbsp;<span class="ident" id="7361738">TestPaeth</span><span class="op" id="7361747">(</span><span class="ident" id="7361748">t</span>&nbsp;<span class="op" id="7361750">*</span><span class="ident" id="7361751">testing</span><span class="op" id="7361758">.</span><span class="ident" id="7361759">T</span><span class="op" id="7361760">)</span>&nbsp;<span class="op" id="7361762">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361765">for</span>&nbsp;<span class="ident" id="7361769">a</span>&nbsp;<span class="op" id="7361771">:=</span>&nbsp;<span class="num" id="7361774">0</span><span class="op" id="7361775">;</span>&nbsp;<span class="ident" id="7361777">a</span>&nbsp;<span class="op" id="7361779">&lt;</span>&nbsp;<span class="num" id="7361781">256</span><span class="op" id="7361784">;</span>&nbsp;<span class="ident" id="7361786">a</span>&nbsp;<span class="op" id="7361788">+=</span>&nbsp;<span class="num" id="7361791">15</span>&nbsp;<span class="op" id="7361794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361798">for</span>&nbsp;<span class="ident" id="7361802">b</span>&nbsp;<span class="op" id="7361804">:=</span>&nbsp;<span class="num" id="7361807">0</span><span class="op" id="7361808">;</span>&nbsp;<span class="ident" id="7361810">b</span>&nbsp;<span class="op" id="7361812">&lt;</span>&nbsp;<span class="num" id="7361814">256</span><span class="op" id="7361817">;</span>&nbsp;<span class="ident" id="7361819">b</span>&nbsp;<span class="op" id="7361821">+=</span>&nbsp;<span class="num" id="7361824">15</span>&nbsp;<span class="op" id="7361827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361832">for</span>&nbsp;<span class="ident" id="7361836">c</span>&nbsp;<span class="op" id="7361838">:=</span>&nbsp;<span class="num" id="7361841">0</span><span class="op" id="7361842">;</span>&nbsp;<span class="ident" id="7361844">c</span>&nbsp;<span class="op" id="7361846">&lt;</span>&nbsp;<span class="num" id="7361848">256</span><span class="op" id="7361851">;</span>&nbsp;<span class="ident" id="7361853">c</span>&nbsp;<span class="op" id="7361855">+=</span>&nbsp;<span class="num" id="7361858">15</span>&nbsp;<span class="op" id="7361861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361867">got</span>&nbsp;<span class="op" id="7361871">:=</span>&nbsp;<span class="ident" id="7361874">paeth</span><span class="op" id="7361879">(</span><span class="builtintype" id="7361880">uint8</span><span class="op" id="7361885">(</span><span class="ident" id="7361886">a</span><span class="op" id="7361887">)</span><span class="op" id="7361888">,</span>&nbsp;<span class="builtintype" id="7361890">uint8</span><span class="op" id="7361895">(</span><span class="ident" id="7361896">b</span><span class="op" id="7361897">)</span><span class="op" id="7361898">,</span>&nbsp;<span class="builtintype" id="7361900">uint8</span><span class="op" id="7361905">(</span><span class="ident" id="7361906">c</span><span class="op" id="7361907">)</span><span class="op" id="7361908">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361914">want</span>&nbsp;<span class="op" id="7361919">:=</span>&nbsp;<span class="ident" id="7361922">slowPaeth</span><span class="op" id="7361931">(</span><span class="builtintype" id="7361932">uint8</span><span class="op" id="7361937">(</span><span class="ident" id="7361938">a</span><span class="op" id="7361939">)</span><span class="op" id="7361940">,</span>&nbsp;<span class="builtintype" id="7361942">uint8</span><span class="op" id="7361947">(</span><span class="ident" id="7361948">b</span><span class="op" id="7361949">)</span><span class="op" id="7361950">,</span>&nbsp;<span class="builtintype" id="7361952">uint8</span><span class="op" id="7361957">(</span><span class="ident" id="7361958">c</span><span class="op" id="7361959">)</span><span class="op" id="7361960">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7361966">if</span>&nbsp;<span class="ident" id="7361969">got</span>&nbsp;<span class="op" id="7361973">!=</span>&nbsp;<span class="ident" id="7361976">want</span>&nbsp;<span class="op" id="7361981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7361988">t</span><span class="op" id="7361989">.</span><span class="ident" id="7361990">Errorf</span><span class="op" id="7361996">(</span><span class="string" id="7361997">&#34;a,&nbsp;b,&nbsp;c&nbsp;=&nbsp;%d,&nbsp;%d,&nbsp;%d:&nbsp;got&nbsp;%d,&nbsp;want&nbsp;%d&#34;</span><span class="op" id="7362036">,</span>&nbsp;<span class="ident" id="7362038">a</span><span class="op" id="7362039">,</span>&nbsp;<span class="ident" id="7362041">b</span><span class="op" id="7362042">,</span>&nbsp;<span class="ident" id="7362044">c</span><span class="op" id="7362045">,</span>&nbsp;<span class="ident" id="7362047">got</span><span class="op" id="7362050">,</span>&nbsp;<span class="ident" id="7362052">want</span><span class="op" id="7362056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362062">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362067">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362071">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362074">}</span><br>
<span class="lineno"></span><span class="op" id="7362076">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7362079">func</span>&nbsp;<span class="ident" id="7362084">BenchmarkPaeth</span><span class="op" id="7362098">(</span><span class="ident" id="7362099">b</span>&nbsp;<span class="op" id="7362101">*</span><span class="ident" id="7362102">testing</span><span class="op" id="7362109">.</span><span class="ident" id="7362110">B</span><span class="op" id="7362111">)</span>&nbsp;<span class="op" id="7362113">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362116">for</span>&nbsp;<span class="ident" id="7362120">i</span>&nbsp;<span class="op" id="7362122">:=</span>&nbsp;<span class="num" id="7362125">0</span><span class="op" id="7362126">;</span>&nbsp;<span class="ident" id="7362128">i</span>&nbsp;<span class="op" id="7362130">&lt;</span>&nbsp;<span class="ident" id="7362132">b</span><span class="op" id="7362133">.</span><span class="ident" id="7362134">N</span><span class="op" id="7362135">;</span>&nbsp;<span class="ident" id="7362137">i</span><span class="op" id="7362138">++</span>&nbsp;<span class="op" id="7362141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362145">paeth</span><span class="op" id="7362150">(</span><span class="builtintype" id="7362151">uint8</span><span class="op" id="7362156">(</span><span class="ident" id="7362157">i</span><span class="op" id="7362158">&gt;&gt;</span><span class="num" id="7362160">16</span><span class="op" id="7362162">)</span><span class="op" id="7362163">,</span>&nbsp;<span class="builtintype" id="7362165">uint8</span><span class="op" id="7362170">(</span><span class="ident" id="7362171">i</span><span class="op" id="7362172">&gt;&gt;</span><span class="num" id="7362174">8</span><span class="op" id="7362175">)</span><span class="op" id="7362176">,</span>&nbsp;<span class="builtintype" id="7362178">uint8</span><span class="op" id="7362183">(</span><span class="ident" id="7362184">i</span><span class="op" id="7362185">)</span><span class="op" id="7362186">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362189">}</span><br>
<span class="lineno"></span><span class="op" id="7362191">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span><span class="keyword" id="7362194">func</span>&nbsp;<span class="ident" id="7362199">TestPaethDecode</span><span class="op" id="7362214">(</span><span class="ident" id="7362215">t</span>&nbsp;<span class="op" id="7362217">*</span><span class="ident" id="7362218">testing</span><span class="op" id="7362225">.</span><span class="ident" id="7362226">T</span><span class="op" id="7362227">)</span>&nbsp;<span class="op" id="7362229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362232">pdat0</span>&nbsp;<span class="op" id="7362238">:=</span>&nbsp;<span class="builtinfunc" id="7362241">make</span><span class="op" id="7362245">(</span><span class="op" id="7362246">[</span><span class="op" id="7362247">]</span><span class="builtintype" id="7362248">byte</span><span class="op" id="7362252">,</span>&nbsp;<span class="num" id="7362254">32</span><span class="op" id="7362256">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362259">pdat1</span>&nbsp;<span class="op" id="7362265">:=</span>&nbsp;<span class="builtinfunc" id="7362268">make</span><span class="op" id="7362272">(</span><span class="op" id="7362273">[</span><span class="op" id="7362274">]</span><span class="builtintype" id="7362275">byte</span><span class="op" id="7362279">,</span>&nbsp;<span class="num" id="7362281">32</span><span class="op" id="7362283">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362286">pdat2</span>&nbsp;<span class="op" id="7362292">:=</span>&nbsp;<span class="builtinfunc" id="7362295">make</span><span class="op" id="7362299">(</span><span class="op" id="7362300">[</span><span class="op" id="7362301">]</span><span class="builtintype" id="7362302">byte</span><span class="op" id="7362306">,</span>&nbsp;<span class="num" id="7362308">32</span><span class="op" id="7362310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362313">cdat0</span>&nbsp;<span class="op" id="7362319">:=</span>&nbsp;<span class="builtinfunc" id="7362322">make</span><span class="op" id="7362326">(</span><span class="op" id="7362327">[</span><span class="op" id="7362328">]</span><span class="builtintype" id="7362329">byte</span><span class="op" id="7362333">,</span>&nbsp;<span class="num" id="7362335">32</span><span class="op" id="7362337">)</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362340">cdat1</span>&nbsp;<span class="op" id="7362346">:=</span>&nbsp;<span class="builtinfunc" id="7362349">make</span><span class="op" id="7362353">(</span><span class="op" id="7362354">[</span><span class="op" id="7362355">]</span><span class="builtintype" id="7362356">byte</span><span class="op" id="7362360">,</span>&nbsp;<span class="num" id="7362362">32</span><span class="op" id="7362364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362367">cdat2</span>&nbsp;<span class="op" id="7362373">:=</span>&nbsp;<span class="builtinfunc" id="7362376">make</span><span class="op" id="7362380">(</span><span class="op" id="7362381">[</span><span class="op" id="7362382">]</span><span class="builtintype" id="7362383">byte</span><span class="op" id="7362387">,</span>&nbsp;<span class="num" id="7362389">32</span><span class="op" id="7362391">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362394">r</span>&nbsp;<span class="op" id="7362396">:=</span>&nbsp;<span class="ident" id="7362399">rand</span><span class="op" id="7362403">.</span><span class="ident" id="7362404">New</span><span class="op" id="7362407">(</span><span class="ident" id="7362408">rand</span><span class="op" id="7362412">.</span><span class="ident" id="7362413">NewSource</span><span class="op" id="7362422">(</span><span class="num" id="7362423">1</span><span class="op" id="7362424">)</span><span class="op" id="7362425">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362428">for</span>&nbsp;<span class="ident" id="7362432">bytesPerPixel</span>&nbsp;<span class="op" id="7362446">:=</span>&nbsp;<span class="num" id="7362449">1</span><span class="op" id="7362450">;</span>&nbsp;<span class="ident" id="7362452">bytesPerPixel</span>&nbsp;<span class="op" id="7362466">&lt;=</span>&nbsp;<span class="num" id="7362469">8</span><span class="op" id="7362470">;</span>&nbsp;<span class="ident" id="7362472">bytesPerPixel</span><span class="op" id="7362485">++</span>&nbsp;<span class="op" id="7362488">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362492">for</span>&nbsp;<span class="ident" id="7362496">i</span>&nbsp;<span class="op" id="7362498">:=</span>&nbsp;<span class="num" id="7362501">0</span><span class="op" id="7362502">;</span>&nbsp;<span class="ident" id="7362504">i</span>&nbsp;<span class="op" id="7362506">&lt;</span>&nbsp;<span class="num" id="7362508">100</span><span class="op" id="7362511">;</span>&nbsp;<span class="ident" id="7362513">i</span><span class="op" id="7362514">++</span>&nbsp;<span class="op" id="7362517">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362522">for</span>&nbsp;<span class="ident" id="7362526">j</span>&nbsp;<span class="op" id="7362528">:=</span>&nbsp;<span class="keyword" id="7362531">range</span>&nbsp;<span class="ident" id="7362537">pdat0</span>&nbsp;<span class="op" id="7362543">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362549">pdat0</span><span class="op" id="7362554">[</span><span class="ident" id="7362555">j</span><span class="op" id="7362556">]</span>&nbsp;<span class="op" id="7362558">=</span>&nbsp;<span class="builtintype" id="7362560">uint8</span><span class="op" id="7362565">(</span><span class="ident" id="7362566">r</span><span class="op" id="7362567">.</span><span class="ident" id="7362568">Uint32</span><span class="op" id="7362574">(</span><span class="op" id="7362575">)</span><span class="op" id="7362576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362582">cdat0</span><span class="op" id="7362587">[</span><span class="ident" id="7362588">j</span><span class="op" id="7362589">]</span>&nbsp;<span class="op" id="7362591">=</span>&nbsp;<span class="builtintype" id="7362593">uint8</span><span class="op" id="7362598">(</span><span class="ident" id="7362599">r</span><span class="op" id="7362600">.</span><span class="ident" id="7362601">Uint32</span><span class="op" id="7362607">(</span><span class="op" id="7362608">)</span><span class="op" id="7362609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7362619">copy</span><span class="op" id="7362623">(</span><span class="ident" id="7362624">pdat1</span><span class="op" id="7362629">,</span>&nbsp;<span class="ident" id="7362631">pdat0</span><span class="op" id="7362636">)</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7362641">copy</span><span class="op" id="7362645">(</span><span class="ident" id="7362646">pdat2</span><span class="op" id="7362651">,</span>&nbsp;<span class="ident" id="7362653">pdat0</span><span class="op" id="7362658">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7362663">copy</span><span class="op" id="7362667">(</span><span class="ident" id="7362668">cdat1</span><span class="op" id="7362673">,</span>&nbsp;<span class="ident" id="7362675">cdat0</span><span class="op" id="7362680">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="7362685">copy</span><span class="op" id="7362689">(</span><span class="ident" id="7362690">cdat2</span><span class="op" id="7362695">,</span>&nbsp;<span class="ident" id="7362697">cdat0</span><span class="op" id="7362702">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362707">filterPaeth</span><span class="op" id="7362718">(</span><span class="ident" id="7362719">cdat1</span><span class="op" id="7362724">,</span>&nbsp;<span class="ident" id="7362726">pdat1</span><span class="op" id="7362731">,</span>&nbsp;<span class="ident" id="7362733">bytesPerPixel</span><span class="op" id="7362746">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362751">slowFilterPaeth</span><span class="op" id="7362766">(</span><span class="ident" id="7362767">cdat2</span><span class="op" id="7362772">,</span>&nbsp;<span class="ident" id="7362774">pdat2</span><span class="op" id="7362779">,</span>&nbsp;<span class="ident" id="7362781">bytesPerPixel</span><span class="op" id="7362794">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362799">if</span>&nbsp;<span class="op" id="7362802">!</span><span class="ident" id="7362803">bytes</span><span class="op" id="7362808">.</span><span class="ident" id="7362809">Equal</span><span class="op" id="7362814">(</span><span class="ident" id="7362815">cdat1</span><span class="op" id="7362820">,</span>&nbsp;<span class="ident" id="7362822">cdat2</span><span class="op" id="7362827">)</span>&nbsp;<span class="op" id="7362829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7362835">t</span><span class="op" id="7362836">.</span><span class="ident" id="7362837">Errorf</span><span class="op" id="7362843">(</span><span class="string" id="7362844">&#34;bytesPerPixel:&nbsp;%d\npdat0:&nbsp;%&nbsp;x\ncdat0:&nbsp;%&nbsp;x\ngot:&nbsp;&nbsp;&nbsp;%&nbsp;x\nwant:&nbsp;&nbsp;%&nbsp;x&#34;</span><span class="op" id="7362911">,</span>&nbsp;<span class="ident" id="7362913">bytesPerPixel</span><span class="op" id="7362926">,</span>&nbsp;<span class="ident" id="7362928">pdat0</span><span class="op" id="7362933">,</span>&nbsp;<span class="ident" id="7362935">cdat0</span><span class="op" id="7362940">,</span>&nbsp;<span class="ident" id="7362942">cdat1</span><span class="op" id="7362947">,</span>&nbsp;<span class="ident" id="7362949">cdat2</span><span class="op" id="7362954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7362960">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362973">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7362976">}</span><br>
<span class="lineno"></span><span class="op" id="7362978">}</span>
</div>
</body>
</html>
