<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="2544325">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2544380">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2544434">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2544485">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2544523">package</span>&nbsp;<span class="ident" id="2544531">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2544540">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2544601">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2544660">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2544718">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2544779">type</span>&nbsp;<span class="ident" id="2544784">visit</span>&nbsp;<span class="keyword" id="2544790">struct</span>&nbsp;<span class="op" id="2544797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2544800">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2544804">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2544813">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2544817">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2544826">typ</span>&nbsp;<span class="ident" id="2544830">Type</span><br>
<span class="lineno"></span><span class="op" id="2544835">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2544838">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2544912">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2544989">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2545009">func</span>&nbsp;<span class="ident" id="2545014">deepValueEqual</span><span class="op" id="2545028">(</span><span class="ident" id="2545029">v1</span><span class="op" id="2545031">,</span>&nbsp;<span class="ident" id="2545033">v2</span>&nbsp;<span class="ident" id="2545036">Value</span><span class="op" id="2545041">,</span>&nbsp;<span class="ident" id="2545043">visited</span>&nbsp;<span class="keyword" id="2545051">map</span><span class="op" id="2545054">[</span><span class="ident" id="2545055">visit</span><span class="op" id="2545060">]</span><span class="builtintype" id="2545061">bool</span><span class="op" id="2545065">,</span>&nbsp;<span class="ident" id="2545067">depth</span>&nbsp;<span class="builtintype" id="2545073">int</span><span class="op" id="2545076">)</span>&nbsp;<span class="builtintype" id="2545078">bool</span>&nbsp;<span class="op" id="2545083">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545086">if</span>&nbsp;<span class="op" id="2545089">!</span><span class="ident" id="2545090">v1</span><span class="op" id="2545092">.</span><span class="ident" id="2545093">IsValid</span><span class="op" id="2545100">(</span><span class="op" id="2545101">)</span>&nbsp;<span class="op" id="2545103">||</span>&nbsp;<span class="op" id="2545106">!</span><span class="ident" id="2545107">v2</span><span class="op" id="2545109">.</span><span class="ident" id="2545110">IsValid</span><span class="op" id="2545117">(</span><span class="op" id="2545118">)</span>&nbsp;<span class="op" id="2545120">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545124">return</span>&nbsp;<span class="ident" id="2545131">v1</span><span class="op" id="2545133">.</span><span class="ident" id="2545134">IsValid</span><span class="op" id="2545141">(</span><span class="op" id="2545142">)</span>&nbsp;<span class="op" id="2545144">==</span>&nbsp;<span class="ident" id="2545147">v2</span><span class="op" id="2545149">.</span><span class="ident" id="2545150">IsValid</span><span class="op" id="2545157">(</span><span class="op" id="2545158">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545161">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545164">if</span>&nbsp;<span class="ident" id="2545167">v1</span><span class="op" id="2545169">.</span><span class="ident" id="2545170">Type</span><span class="op" id="2545174">(</span><span class="op" id="2545175">)</span>&nbsp;<span class="op" id="2545177">!=</span>&nbsp;<span class="ident" id="2545180">v2</span><span class="op" id="2545182">.</span><span class="ident" id="2545183">Type</span><span class="op" id="2545187">(</span><span class="op" id="2545188">)</span>&nbsp;<span class="op" id="2545190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545194">return</span>&nbsp;<span class="ident" id="2545201">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2545212">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545275">hard</span>&nbsp;<span class="op" id="2545280">:=</span>&nbsp;<span class="keyword" id="2545283">func</span><span class="op" id="2545287">(</span><span class="ident" id="2545288">k</span>&nbsp;<span class="ident" id="2545290">Kind</span><span class="op" id="2545294">)</span>&nbsp;<span class="builtintype" id="2545296">bool</span>&nbsp;<span class="op" id="2545301">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545305">switch</span>&nbsp;<span class="ident" id="2545312">k</span>&nbsp;<span class="op" id="2545314">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545318">case</span>&nbsp;<span class="ident" id="2545323">Array</span><span class="op" id="2545328">,</span>&nbsp;<span class="ident" id="2545330">Map</span><span class="op" id="2545333">,</span>&nbsp;<span class="ident" id="2545335">Slice</span><span class="op" id="2545340">,</span>&nbsp;<span class="ident" id="2545342">Struct</span><span class="op" id="2545348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545353">return</span>&nbsp;<span class="ident" id="2545360">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545371">return</span>&nbsp;<span class="ident" id="2545378">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545385">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545389">if</span>&nbsp;<span class="ident" id="2545392">v1</span><span class="op" id="2545394">.</span><span class="ident" id="2545395">CanAddr</span><span class="op" id="2545402">(</span><span class="op" id="2545403">)</span>&nbsp;<span class="op" id="2545405">&amp;&amp;</span>&nbsp;<span class="ident" id="2545408">v2</span><span class="op" id="2545410">.</span><span class="ident" id="2545411">CanAddr</span><span class="op" id="2545418">(</span><span class="op" id="2545419">)</span>&nbsp;<span class="op" id="2545421">&amp;&amp;</span>&nbsp;<span class="ident" id="2545424">hard</span><span class="op" id="2545428">(</span><span class="ident" id="2545429">v1</span><span class="op" id="2545431">.</span><span class="ident" id="2545432">Kind</span><span class="op" id="2545436">(</span><span class="op" id="2545437">)</span><span class="op" id="2545438">)</span>&nbsp;<span class="op" id="2545440">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545444">addr1</span>&nbsp;<span class="op" id="2545450">:=</span>&nbsp;<span class="ident" id="2545453">v1</span><span class="op" id="2545455">.</span><span class="ident" id="2545456">UnsafeAddr</span><span class="op" id="2545466">(</span><span class="op" id="2545467">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545471">addr2</span>&nbsp;<span class="op" id="2545477">:=</span>&nbsp;<span class="ident" id="2545480">v2</span><span class="op" id="2545482">.</span><span class="ident" id="2545483">UnsafeAddr</span><span class="op" id="2545493">(</span><span class="op" id="2545494">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545498">if</span>&nbsp;<span class="ident" id="2545501">addr1</span>&nbsp;<span class="op" id="2545507">&gt;</span>&nbsp;<span class="ident" id="2545509">addr2</span>&nbsp;<span class="op" id="2545515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2545520">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545585">addr1</span><span class="op" id="2545590">,</span>&nbsp;<span class="ident" id="2545592">addr2</span>&nbsp;<span class="op" id="2545598">=</span>&nbsp;<span class="ident" id="2545600">addr2</span><span class="op" id="2545605">,</span>&nbsp;<span class="ident" id="2545607">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2545620">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545671">if</span>&nbsp;<span class="ident" id="2545674">addr1</span>&nbsp;<span class="op" id="2545680">==</span>&nbsp;<span class="ident" id="2545683">addr2</span>&nbsp;<span class="op" id="2545689">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545694">return</span>&nbsp;<span class="ident" id="2545701">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2545713">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545738">typ</span>&nbsp;<span class="op" id="2545742">:=</span>&nbsp;<span class="ident" id="2545745">v1</span><span class="op" id="2545747">.</span><span class="ident" id="2545748">Type</span><span class="op" id="2545752">(</span><span class="op" id="2545753">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545757">v</span>&nbsp;<span class="op" id="2545759">:=</span>&nbsp;<span class="ident" id="2545762">visit</span><span class="op" id="2545767">{</span><span class="ident" id="2545768">addr1</span><span class="op" id="2545773">,</span>&nbsp;<span class="ident" id="2545775">addr2</span><span class="op" id="2545780">,</span>&nbsp;<span class="ident" id="2545782">typ</span><span class="op" id="2545785">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545789">if</span>&nbsp;<span class="ident" id="2545792">visited</span><span class="op" id="2545799">[</span><span class="ident" id="2545800">v</span><span class="op" id="2545801">]</span>&nbsp;<span class="op" id="2545803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545808">return</span>&nbsp;<span class="ident" id="2545815">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545822">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2545827">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2545852">visited</span><span class="op" id="2545859">[</span><span class="ident" id="2545860">v</span><span class="op" id="2545861">]</span>&nbsp;<span class="op" id="2545863">=</span>&nbsp;<span class="ident" id="2545865">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2545871">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545875">switch</span>&nbsp;<span class="ident" id="2545882">v1</span><span class="op" id="2545884">.</span><span class="ident" id="2545885">Kind</span><span class="op" id="2545889">(</span><span class="op" id="2545890">)</span>&nbsp;<span class="op" id="2545892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545895">case</span>&nbsp;<span class="ident" id="2545900">Array</span><span class="op" id="2545905">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545909">for</span>&nbsp;<span class="ident" id="2545913">i</span>&nbsp;<span class="op" id="2545915">:=</span>&nbsp;<span class="num" id="2545918">0</span><span class="op" id="2545919">;</span>&nbsp;<span class="ident" id="2545921">i</span>&nbsp;<span class="op" id="2545923">&lt;</span>&nbsp;<span class="ident" id="2545925">v1</span><span class="op" id="2545927">.</span><span class="ident" id="2545928">Len</span><span class="op" id="2545931">(</span><span class="op" id="2545932">)</span><span class="op" id="2545933">;</span>&nbsp;<span class="ident" id="2545935">i</span><span class="op" id="2545936">++</span>&nbsp;<span class="op" id="2545939">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2545944">if</span>&nbsp;<span class="op" id="2545947">!</span><span class="ident" id="2545948">deepValueEqual</span><span class="op" id="2545962">(</span><span class="ident" id="2545963">v1</span><span class="op" id="2545965">.</span><span class="ident" id="2545966">Index</span><span class="op" id="2545971">(</span><span class="ident" id="2545972">i</span><span class="op" id="2545973">)</span><span class="op" id="2545974">,</span>&nbsp;<span class="ident" id="2545976">v2</span><span class="op" id="2545978">.</span><span class="ident" id="2545979">Index</span><span class="op" id="2545984">(</span><span class="ident" id="2545985">i</span><span class="op" id="2545986">)</span><span class="op" id="2545987">,</span>&nbsp;<span class="ident" id="2545989">visited</span><span class="op" id="2545996">,</span>&nbsp;<span class="ident" id="2545998">depth</span><span class="op" id="2546003">+</span><span class="num" id="2546004">1</span><span class="op" id="2546005">)</span>&nbsp;<span class="op" id="2546007">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546013">return</span>&nbsp;<span class="ident" id="2546020">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546029">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546033">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546037">return</span>&nbsp;<span class="ident" id="2546044">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546050">case</span>&nbsp;<span class="ident" id="2546055">Slice</span><span class="op" id="2546060">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546064">if</span>&nbsp;<span class="ident" id="2546067">v1</span><span class="op" id="2546069">.</span><span class="ident" id="2546070">IsNil</span><span class="op" id="2546075">(</span><span class="op" id="2546076">)</span>&nbsp;<span class="op" id="2546078">!=</span>&nbsp;<span class="ident" id="2546081">v2</span><span class="op" id="2546083">.</span><span class="ident" id="2546084">IsNil</span><span class="op" id="2546089">(</span><span class="op" id="2546090">)</span>&nbsp;<span class="op" id="2546092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546097">return</span>&nbsp;<span class="ident" id="2546104">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546112">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546116">if</span>&nbsp;<span class="ident" id="2546119">v1</span><span class="op" id="2546121">.</span><span class="ident" id="2546122">Len</span><span class="op" id="2546125">(</span><span class="op" id="2546126">)</span>&nbsp;<span class="op" id="2546128">!=</span>&nbsp;<span class="ident" id="2546131">v2</span><span class="op" id="2546133">.</span><span class="ident" id="2546134">Len</span><span class="op" id="2546137">(</span><span class="op" id="2546138">)</span>&nbsp;<span class="op" id="2546140">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546145">return</span>&nbsp;<span class="ident" id="2546152">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546160">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546164">if</span>&nbsp;<span class="ident" id="2546167">v1</span><span class="op" id="2546169">.</span><span class="ident" id="2546170">Pointer</span><span class="op" id="2546177">(</span><span class="op" id="2546178">)</span>&nbsp;<span class="op" id="2546180">==</span>&nbsp;<span class="ident" id="2546183">v2</span><span class="op" id="2546185">.</span><span class="ident" id="2546186">Pointer</span><span class="op" id="2546193">(</span><span class="op" id="2546194">)</span>&nbsp;<span class="op" id="2546196">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546201">return</span>&nbsp;<span class="ident" id="2546208">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546215">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546219">for</span>&nbsp;<span class="ident" id="2546223">i</span>&nbsp;<span class="op" id="2546225">:=</span>&nbsp;<span class="num" id="2546228">0</span><span class="op" id="2546229">;</span>&nbsp;<span class="ident" id="2546231">i</span>&nbsp;<span class="op" id="2546233">&lt;</span>&nbsp;<span class="ident" id="2546235">v1</span><span class="op" id="2546237">.</span><span class="ident" id="2546238">Len</span><span class="op" id="2546241">(</span><span class="op" id="2546242">)</span><span class="op" id="2546243">;</span>&nbsp;<span class="ident" id="2546245">i</span><span class="op" id="2546246">++</span>&nbsp;<span class="op" id="2546249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546254">if</span>&nbsp;<span class="op" id="2546257">!</span><span class="ident" id="2546258">deepValueEqual</span><span class="op" id="2546272">(</span><span class="ident" id="2546273">v1</span><span class="op" id="2546275">.</span><span class="ident" id="2546276">Index</span><span class="op" id="2546281">(</span><span class="ident" id="2546282">i</span><span class="op" id="2546283">)</span><span class="op" id="2546284">,</span>&nbsp;<span class="ident" id="2546286">v2</span><span class="op" id="2546288">.</span><span class="ident" id="2546289">Index</span><span class="op" id="2546294">(</span><span class="ident" id="2546295">i</span><span class="op" id="2546296">)</span><span class="op" id="2546297">,</span>&nbsp;<span class="ident" id="2546299">visited</span><span class="op" id="2546306">,</span>&nbsp;<span class="ident" id="2546308">depth</span><span class="op" id="2546313">+</span><span class="num" id="2546314">1</span><span class="op" id="2546315">)</span>&nbsp;<span class="op" id="2546317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546323">return</span>&nbsp;<span class="ident" id="2546330">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546339">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546343">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546347">return</span>&nbsp;<span class="ident" id="2546354">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546360">case</span>&nbsp;<span class="ident" id="2546365">Interface</span><span class="op" id="2546374">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546378">if</span>&nbsp;<span class="ident" id="2546381">v1</span><span class="op" id="2546383">.</span><span class="ident" id="2546384">IsNil</span><span class="op" id="2546389">(</span><span class="op" id="2546390">)</span>&nbsp;<span class="op" id="2546392">||</span>&nbsp;<span class="ident" id="2546395">v2</span><span class="op" id="2546397">.</span><span class="ident" id="2546398">IsNil</span><span class="op" id="2546403">(</span><span class="op" id="2546404">)</span>&nbsp;<span class="op" id="2546406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546411">return</span>&nbsp;<span class="ident" id="2546418">v1</span><span class="op" id="2546420">.</span><span class="ident" id="2546421">IsNil</span><span class="op" id="2546426">(</span><span class="op" id="2546427">)</span>&nbsp;<span class="op" id="2546429">==</span>&nbsp;<span class="ident" id="2546432">v2</span><span class="op" id="2546434">.</span><span class="ident" id="2546435">IsNil</span><span class="op" id="2546440">(</span><span class="op" id="2546441">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546445">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546449">return</span>&nbsp;<span class="ident" id="2546456">deepValueEqual</span><span class="op" id="2546470">(</span><span class="ident" id="2546471">v1</span><span class="op" id="2546473">.</span><span class="ident" id="2546474">Elem</span><span class="op" id="2546478">(</span><span class="op" id="2546479">)</span><span class="op" id="2546480">,</span>&nbsp;<span class="ident" id="2546482">v2</span><span class="op" id="2546484">.</span><span class="ident" id="2546485">Elem</span><span class="op" id="2546489">(</span><span class="op" id="2546490">)</span><span class="op" id="2546491">,</span>&nbsp;<span class="ident" id="2546493">visited</span><span class="op" id="2546500">,</span>&nbsp;<span class="ident" id="2546502">depth</span><span class="op" id="2546507">+</span><span class="num" id="2546508">1</span><span class="op" id="2546509">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546512">case</span>&nbsp;<span class="ident" id="2546517">Ptr</span><span class="op" id="2546520">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546524">return</span>&nbsp;<span class="ident" id="2546531">deepValueEqual</span><span class="op" id="2546545">(</span><span class="ident" id="2546546">v1</span><span class="op" id="2546548">.</span><span class="ident" id="2546549">Elem</span><span class="op" id="2546553">(</span><span class="op" id="2546554">)</span><span class="op" id="2546555">,</span>&nbsp;<span class="ident" id="2546557">v2</span><span class="op" id="2546559">.</span><span class="ident" id="2546560">Elem</span><span class="op" id="2546564">(</span><span class="op" id="2546565">)</span><span class="op" id="2546566">,</span>&nbsp;<span class="ident" id="2546568">visited</span><span class="op" id="2546575">,</span>&nbsp;<span class="ident" id="2546577">depth</span><span class="op" id="2546582">+</span><span class="num" id="2546583">1</span><span class="op" id="2546584">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546587">case</span>&nbsp;<span class="ident" id="2546592">Struct</span><span class="op" id="2546598">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546602">for</span>&nbsp;<span class="ident" id="2546606">i</span><span class="op" id="2546607">,</span>&nbsp;<span class="ident" id="2546609">n</span>&nbsp;<span class="op" id="2546611">:=</span>&nbsp;<span class="num" id="2546614">0</span><span class="op" id="2546615">,</span>&nbsp;<span class="ident" id="2546617">v1</span><span class="op" id="2546619">.</span><span class="ident" id="2546620">NumField</span><span class="op" id="2546628">(</span><span class="op" id="2546629">)</span><span class="op" id="2546630">;</span>&nbsp;<span class="ident" id="2546632">i</span>&nbsp;<span class="op" id="2546634">&lt;</span>&nbsp;<span class="ident" id="2546636">n</span><span class="op" id="2546637">;</span>&nbsp;<span class="ident" id="2546639">i</span><span class="op" id="2546640">++</span>&nbsp;<span class="op" id="2546643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546648">if</span>&nbsp;<span class="op" id="2546651">!</span><span class="ident" id="2546652">deepValueEqual</span><span class="op" id="2546666">(</span><span class="ident" id="2546667">v1</span><span class="op" id="2546669">.</span><span class="ident" id="2546670">Field</span><span class="op" id="2546675">(</span><span class="ident" id="2546676">i</span><span class="op" id="2546677">)</span><span class="op" id="2546678">,</span>&nbsp;<span class="ident" id="2546680">v2</span><span class="op" id="2546682">.</span><span class="ident" id="2546683">Field</span><span class="op" id="2546688">(</span><span class="ident" id="2546689">i</span><span class="op" id="2546690">)</span><span class="op" id="2546691">,</span>&nbsp;<span class="ident" id="2546693">visited</span><span class="op" id="2546700">,</span>&nbsp;<span class="ident" id="2546702">depth</span><span class="op" id="2546707">+</span><span class="num" id="2546708">1</span><span class="op" id="2546709">)</span>&nbsp;<span class="op" id="2546711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546717">return</span>&nbsp;<span class="ident" id="2546724">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546733">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546737">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546741">return</span>&nbsp;<span class="ident" id="2546748">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546754">case</span>&nbsp;<span class="ident" id="2546759">Map</span><span class="op" id="2546762">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546766">if</span>&nbsp;<span class="ident" id="2546769">v1</span><span class="op" id="2546771">.</span><span class="ident" id="2546772">IsNil</span><span class="op" id="2546777">(</span><span class="op" id="2546778">)</span>&nbsp;<span class="op" id="2546780">!=</span>&nbsp;<span class="ident" id="2546783">v2</span><span class="op" id="2546785">.</span><span class="ident" id="2546786">IsNil</span><span class="op" id="2546791">(</span><span class="op" id="2546792">)</span>&nbsp;<span class="op" id="2546794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546799">return</span>&nbsp;<span class="ident" id="2546806">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546814">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546818">if</span>&nbsp;<span class="ident" id="2546821">v1</span><span class="op" id="2546823">.</span><span class="ident" id="2546824">Len</span><span class="op" id="2546827">(</span><span class="op" id="2546828">)</span>&nbsp;<span class="op" id="2546830">!=</span>&nbsp;<span class="ident" id="2546833">v2</span><span class="op" id="2546835">.</span><span class="ident" id="2546836">Len</span><span class="op" id="2546839">(</span><span class="op" id="2546840">)</span>&nbsp;<span class="op" id="2546842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546847">return</span>&nbsp;<span class="ident" id="2546854">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546866">if</span>&nbsp;<span class="ident" id="2546869">v1</span><span class="op" id="2546871">.</span><span class="ident" id="2546872">Pointer</span><span class="op" id="2546879">(</span><span class="op" id="2546880">)</span>&nbsp;<span class="op" id="2546882">==</span>&nbsp;<span class="ident" id="2546885">v2</span><span class="op" id="2546887">.</span><span class="ident" id="2546888">Pointer</span><span class="op" id="2546895">(</span><span class="op" id="2546896">)</span>&nbsp;<span class="op" id="2546898">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546903">return</span>&nbsp;<span class="ident" id="2546910">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2546917">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546921">for</span>&nbsp;<span class="ident" id="2546925">_</span><span class="op" id="2546926">,</span>&nbsp;<span class="ident" id="2546928">k</span>&nbsp;<span class="op" id="2546930">:=</span>&nbsp;<span class="keyword" id="2546933">range</span>&nbsp;<span class="ident" id="2546939">v1</span><span class="op" id="2546941">.</span><span class="ident" id="2546942">MapKeys</span><span class="op" id="2546949">(</span><span class="op" id="2546950">)</span>&nbsp;<span class="op" id="2546952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2546957">if</span>&nbsp;<span class="op" id="2546960">!</span><span class="ident" id="2546961">deepValueEqual</span><span class="op" id="2546975">(</span><span class="ident" id="2546976">v1</span><span class="op" id="2546978">.</span><span class="ident" id="2546979">MapIndex</span><span class="op" id="2546987">(</span><span class="ident" id="2546988">k</span><span class="op" id="2546989">)</span><span class="op" id="2546990">,</span>&nbsp;<span class="ident" id="2546992">v2</span><span class="op" id="2546994">.</span><span class="ident" id="2546995">MapIndex</span><span class="op" id="2547003">(</span><span class="ident" id="2547004">k</span><span class="op" id="2547005">)</span><span class="op" id="2547006">,</span>&nbsp;<span class="ident" id="2547008">visited</span><span class="op" id="2547015">,</span>&nbsp;<span class="ident" id="2547017">depth</span><span class="op" id="2547022">+</span><span class="num" id="2547023">1</span><span class="op" id="2547024">)</span>&nbsp;<span class="op" id="2547026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547032">return</span>&nbsp;<span class="ident" id="2547039">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547048">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547052">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547056">return</span>&nbsp;<span class="ident" id="2547063">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547069">case</span>&nbsp;<span class="ident" id="2547074">Func</span><span class="op" id="2547078">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547082">if</span>&nbsp;<span class="ident" id="2547085">v1</span><span class="op" id="2547087">.</span><span class="ident" id="2547088">IsNil</span><span class="op" id="2547093">(</span><span class="op" id="2547094">)</span>&nbsp;<span class="op" id="2547096">&amp;&amp;</span>&nbsp;<span class="ident" id="2547099">v2</span><span class="op" id="2547101">.</span><span class="ident" id="2547102">IsNil</span><span class="op" id="2547107">(</span><span class="op" id="2547108">)</span>&nbsp;<span class="op" id="2547110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547115">return</span>&nbsp;<span class="ident" id="2547122">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547129">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2547133">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547165">return</span>&nbsp;<span class="ident" id="2547172">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547179">default</span><span class="op" id="2547186">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2547190">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547220">return</span>&nbsp;<span class="ident" id="2547227">valueInterface</span><span class="op" id="2547241">(</span><span class="ident" id="2547242">v1</span><span class="op" id="2547244">,</span>&nbsp;<span class="ident" id="2547246">false</span><span class="op" id="2547251">)</span>&nbsp;<span class="op" id="2547253">==</span>&nbsp;<span class="ident" id="2547256">valueInterface</span><span class="op" id="2547270">(</span><span class="ident" id="2547271">v2</span><span class="op" id="2547273">,</span>&nbsp;<span class="ident" id="2547275">false</span><span class="op" id="2547280">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547283">}</span><br>
<span class="lineno"></span><span class="op" id="2547285">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2547288">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2547359">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2547433">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2547502">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2547580">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2547610">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2547657">func</span>&nbsp;<span class="ident" id="2547662">DeepEqual</span><span class="op" id="2547671">(</span><span class="ident" id="2547672">a1</span><span class="op" id="2547674">,</span>&nbsp;<span class="ident" id="2547676">a2</span>&nbsp;<span class="keyword" id="2547679">interface</span><span class="op" id="2547688">{</span><span class="op" id="2547689">}</span><span class="op" id="2547690">)</span>&nbsp;<span class="builtintype" id="2547692">bool</span>&nbsp;<span class="op" id="2547697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547700">if</span>&nbsp;<span class="ident" id="2547703">a1</span>&nbsp;<span class="op" id="2547706">==</span>&nbsp;<span class="ident" id="2547709">nil</span>&nbsp;<span class="op" id="2547713">||</span>&nbsp;<span class="ident" id="2547716">a2</span>&nbsp;<span class="op" id="2547719">==</span>&nbsp;<span class="ident" id="2547722">nil</span>&nbsp;<span class="op" id="2547726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547730">return</span>&nbsp;<span class="ident" id="2547737">a1</span>&nbsp;<span class="op" id="2547740">==</span>&nbsp;<span class="ident" id="2547743">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547747">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547750">v1</span>&nbsp;<span class="op" id="2547753">:=</span>&nbsp;<span class="ident" id="2547756">ValueOf</span><span class="op" id="2547763">(</span><span class="ident" id="2547764">a1</span><span class="op" id="2547766">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2547769">v2</span>&nbsp;<span class="op" id="2547772">:=</span>&nbsp;<span class="ident" id="2547775">ValueOf</span><span class="op" id="2547782">(</span><span class="ident" id="2547783">a2</span><span class="op" id="2547785">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547788">if</span>&nbsp;<span class="ident" id="2547791">v1</span><span class="op" id="2547793">.</span><span class="ident" id="2547794">Type</span><span class="op" id="2547798">(</span><span class="op" id="2547799">)</span>&nbsp;<span class="op" id="2547801">!=</span>&nbsp;<span class="ident" id="2547804">v2</span><span class="op" id="2547806">.</span><span class="ident" id="2547807">Type</span><span class="op" id="2547811">(</span><span class="op" id="2547812">)</span>&nbsp;<span class="op" id="2547814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547818">return</span>&nbsp;<span class="ident" id="2547825">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2547832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2547835">return</span>&nbsp;<span class="ident" id="2547842">deepValueEqual</span><span class="op" id="2547856">(</span><span class="ident" id="2547857">v1</span><span class="op" id="2547859">,</span>&nbsp;<span class="ident" id="2547861">v2</span><span class="op" id="2547863">,</span>&nbsp;<span class="builtinfunc" id="2547865">make</span><span class="op" id="2547869">(</span><span class="keyword" id="2547870">map</span><span class="op" id="2547873">[</span><span class="ident" id="2547874">visit</span><span class="op" id="2547879">]</span><span class="builtintype" id="2547880">bool</span><span class="op" id="2547884">)</span><span class="op" id="2547885">,</span>&nbsp;<span class="num" id="2547887">0</span><span class="op" id="2547888">)</span><br>
<span class="lineno">145</span><span class="op" id="2547890">}</span>
</div>
</body>
</html>
