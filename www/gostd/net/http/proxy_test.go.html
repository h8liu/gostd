<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="7791698">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="7791753">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="7791807">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="7791858">package</span>&nbsp;<span class="ident" id="7791866">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7791872">import</span>&nbsp;<span class="op" id="7791879">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791882">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791893">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="7791899">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="7791909">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="7791912">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="7791928">//&nbsp;&nbsp;&nbsp;&nbsptest&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="7791947">var</span>&nbsp;<span class="ident" id="7791951">UseProxyTests</span>&nbsp;<span class="op" id="7791965">=</span>&nbsp;<span class="op" id="7791967">[</span><span class="op" id="7791968">]</span><span class="keyword" id="7791969">struct</span>&nbsp;<span class="op" id="7791976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791979">host</span>&nbsp;&nbsp;<span class="builtintype" id="7791985">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7791993">match</span>&nbsp;<span class="builtintype" id="7791999">bool</span><br>
<span class="lineno"></span><span class="op" id="7792004">}</span><span class="op" id="7792005">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="7792008">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792035">{</span><span class="string" id="7792036">&#34;localhost:80&#34;</span><span class="op" id="7792050">,</span>&nbsp;<span class="builtintype" id="7792052">false</span><span class="op" id="7792057">}</span><span class="op" id="7792058">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792061">{</span><span class="string" id="7792062">&#34;127.0.0.1&#34;</span><span class="op" id="7792073">,</span>&nbsp;<span class="builtintype" id="7792075">false</span><span class="op" id="7792080">}</span><span class="op" id="7792081">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792084">{</span><span class="string" id="7792085">&#34;127.0.0.2&#34;</span><span class="op" id="7792096">,</span>&nbsp;<span class="builtintype" id="7792098">false</span><span class="op" id="7792103">}</span><span class="op" id="7792104">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792107">{</span><span class="string" id="7792108">&#34;[::1]&#34;</span><span class="op" id="7792115">,</span>&nbsp;<span class="builtintype" id="7792117">false</span><span class="op" id="7792122">}</span><span class="op" id="7792123">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792126">{</span><span class="string" id="7792127">&#34;[::2]&#34;</span><span class="op" id="7792134">,</span>&nbsp;<span class="builtintype" id="7792136">true</span><span class="op" id="7792140">}</span><span class="op" id="7792141">,</span>&nbsp;<span class="comment" id="7792143">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792171">{</span><span class="string" id="7792172">&#34;barbaz.net&#34;</span><span class="op" id="7792184">,</span>&nbsp;<span class="builtintype" id="7792186">false</span><span class="op" id="7792191">}</span><span class="op" id="7792192">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7792198">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792223">{</span><span class="string" id="7792224">&#34;foobar.com&#34;</span><span class="op" id="7792236">,</span>&nbsp;<span class="builtintype" id="7792238">false</span><span class="op" id="7792243">}</span><span class="op" id="7792244">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7792250">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792276">{</span><span class="string" id="7792277">&#34;foofoobar.com&#34;</span><span class="op" id="7792292">,</span>&nbsp;<span class="builtintype" id="7792294">true</span><span class="op" id="7792298">}</span><span class="op" id="7792299">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7792303">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792341">{</span><span class="string" id="7792342">&#34;baz.com&#34;</span><span class="op" id="7792351">,</span>&nbsp;<span class="builtintype" id="7792353">true</span><span class="op" id="7792357">}</span><span class="op" id="7792358">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="7792368">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792406">{</span><span class="string" id="7792407">&#34;localhost.net&#34;</span><span class="op" id="7792422">,</span>&nbsp;<span class="builtintype" id="7792424">true</span><span class="op" id="7792428">}</span><span class="op" id="7792429">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7792433">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792468">{</span><span class="string" id="7792469">&#34;local.localhost&#34;</span><span class="op" id="7792486">,</span>&nbsp;<span class="builtintype" id="7792488">true</span><span class="op" id="7792492">}</span><span class="op" id="7792493">,</span>&nbsp;<span class="comment" id="7792495">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792530">{</span><span class="string" id="7792531">&#34;barbarbaz.net&#34;</span><span class="op" id="7792546">,</span>&nbsp;<span class="builtintype" id="7792548">true</span><span class="op" id="7792552">}</span><span class="op" id="7792553">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="7792557">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792599">{</span><span class="string" id="7792600">&#34;www.foobar.com&#34;</span><span class="op" id="7792616">,</span>&nbsp;<span class="builtintype" id="7792618">false</span><span class="op" id="7792623">}</span><span class="op" id="7792624">,</span>&nbsp;<span class="comment" id="7792626">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="7792674">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792677">func</span>&nbsp;<span class="ident" id="7792682">TestUseProxy</span><span class="op" id="7792694">(</span><span class="ident" id="7792695">t</span>&nbsp;<span class="op" id="7792697">*</span><span class="ident" id="7792698">testing</span><span class="op" id="7792705">.</span><span class="ident" id="7792706">T</span><span class="op" id="7792707">)</span>&nbsp;<span class="op" id="7792709">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792712">ResetProxyEnv</span><span class="op" id="7792725">(</span><span class="op" id="7792726">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792729">os</span><span class="op" id="7792731">.</span><span class="ident" id="7792732">Setenv</span><span class="op" id="7792738">(</span><span class="string" id="7792739">&#34;NO_PROXY&#34;</span><span class="op" id="7792749">,</span>&nbsp;<span class="string" id="7792751">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="7792776">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792779">for</span>&nbsp;<span class="ident" id="7792783">_</span><span class="op" id="7792784">,</span>&nbsp;<span class="ident" id="7792786">test</span>&nbsp;<span class="op" id="7792791">:=</span>&nbsp;<span class="keyword" id="7792794">range</span>&nbsp;<span class="ident" id="7792800">UseProxyTests</span>&nbsp;<span class="op" id="7792814">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7792818">if</span>&nbsp;<span class="ident" id="7792821">useProxy</span><span class="op" id="7792829">(</span><span class="ident" id="7792830">test</span><span class="op" id="7792834">.</span><span class="ident" id="7792835">host</span><span class="op" id="7792839">+</span><span class="string" id="7792840">&#34;:80&#34;</span><span class="op" id="7792845">)</span>&nbsp;<span class="op" id="7792847">!=</span>&nbsp;<span class="ident" id="7792850">test</span><span class="op" id="7792854">.</span><span class="ident" id="7792855">match</span>&nbsp;<span class="op" id="7792861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792866">t</span><span class="op" id="7792867">.</span><span class="ident" id="7792868">Errorf</span><span class="op" id="7792874">(</span><span class="string" id="7792875">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="7792903">,</span>&nbsp;<span class="ident" id="7792905">test</span><span class="op" id="7792909">.</span><span class="ident" id="7792910">host</span><span class="op" id="7792914">,</span>&nbsp;<span class="op" id="7792916">!</span><span class="ident" id="7792917">test</span><span class="op" id="7792921">.</span><span class="ident" id="7792922">match</span><span class="op" id="7792927">,</span>&nbsp;<span class="ident" id="7792929">test</span><span class="op" id="7792933">.</span><span class="ident" id="7792934">match</span><span class="op" id="7792939">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792943">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7792946">}</span><br>
<span class="lineno">45</span><span class="op" id="7792948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7792951">var</span>&nbsp;<span class="ident" id="7792955">cacheKeysTests</span>&nbsp;<span class="op" id="7792970">=</span>&nbsp;<span class="op" id="7792972">[</span><span class="op" id="7792973">]</span><span class="keyword" id="7792974">struct</span>&nbsp;<span class="op" id="7792981">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792984">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="7792991">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7792999">scheme</span>&nbsp;<span class="builtintype" id="7793006">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793014">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7793021">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793029">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="7793036">string</span><br>
<span class="lineno"></span><span class="op" id="7793043">}</span><span class="op" id="7793044">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793047">{</span><span class="string" id="7793048">&#34;&#34;</span><span class="op" id="7793050">,</span>&nbsp;<span class="string" id="7793052">&#34;http&#34;</span><span class="op" id="7793058">,</span>&nbsp;<span class="string" id="7793060">&#34;foo.com&#34;</span><span class="op" id="7793069">,</span>&nbsp;<span class="string" id="7793071">&#34;|http|foo.com&#34;</span><span class="op" id="7793086">}</span><span class="op" id="7793087">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793090">{</span><span class="string" id="7793091">&#34;&#34;</span><span class="op" id="7793093">,</span>&nbsp;<span class="string" id="7793095">&#34;https&#34;</span><span class="op" id="7793102">,</span>&nbsp;<span class="string" id="7793104">&#34;foo.com&#34;</span><span class="op" id="7793113">,</span>&nbsp;<span class="string" id="7793115">&#34;|https|foo.com&#34;</span><span class="op" id="7793131">}</span><span class="op" id="7793132">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793135">{</span><span class="string" id="7793136">&#34;http://foo.com&#34;</span><span class="op" id="7793152">,</span>&nbsp;<span class="string" id="7793154">&#34;http&#34;</span><span class="op" id="7793160">,</span>&nbsp;<span class="string" id="7793162">&#34;foo.com&#34;</span><span class="op" id="7793171">,</span>&nbsp;<span class="string" id="7793173">&#34;http://foo.com|http|&#34;</span><span class="op" id="7793195">}</span><span class="op" id="7793196">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793199">{</span><span class="string" id="7793200">&#34;http://foo.com&#34;</span><span class="op" id="7793216">,</span>&nbsp;<span class="string" id="7793218">&#34;https&#34;</span><span class="op" id="7793225">,</span>&nbsp;<span class="string" id="7793227">&#34;foo.com&#34;</span><span class="op" id="7793236">,</span>&nbsp;<span class="string" id="7793238">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="7793268">}</span><span class="op" id="7793269">,</span><br>
<span class="lineno"></span><span class="op" id="7793271">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="7793274">func</span>&nbsp;<span class="ident" id="7793279">TestCacheKeys</span><span class="op" id="7793292">(</span><span class="ident" id="7793293">t</span>&nbsp;<span class="op" id="7793295">*</span><span class="ident" id="7793296">testing</span><span class="op" id="7793303">.</span><span class="ident" id="7793304">T</span><span class="op" id="7793305">)</span>&nbsp;<span class="op" id="7793307">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793310">for</span>&nbsp;<span class="ident" id="7793314">_</span><span class="op" id="7793315">,</span>&nbsp;<span class="ident" id="7793317">tt</span>&nbsp;<span class="op" id="7793320">:=</span>&nbsp;<span class="keyword" id="7793323">range</span>&nbsp;<span class="ident" id="7793329">cacheKeysTests</span>&nbsp;<span class="op" id="7793344">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793348">var</span>&nbsp;<span class="ident" id="7793352">proxy</span>&nbsp;<span class="op" id="7793358">*</span><span class="ident" id="7793359">url</span><span class="op" id="7793362">.</span><span class="ident" id="7793363">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793369">if</span>&nbsp;<span class="ident" id="7793372">tt</span><span class="op" id="7793374">.</span><span class="ident" id="7793375">proxy</span>&nbsp;<span class="op" id="7793381">!=</span>&nbsp;<span class="string" id="7793384">&#34;&#34;</span>&nbsp;<span class="op" id="7793387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793392">u</span><span class="op" id="7793393">,</span>&nbsp;<span class="ident" id="7793395">err</span>&nbsp;<span class="op" id="7793399">:=</span>&nbsp;<span class="ident" id="7793402">url</span><span class="op" id="7793405">.</span><span class="ident" id="7793406">Parse</span><span class="op" id="7793411">(</span><span class="ident" id="7793412">tt</span><span class="op" id="7793414">.</span><span class="ident" id="7793415">proxy</span><span class="op" id="7793420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793425">if</span>&nbsp;<span class="ident" id="7793428">err</span>&nbsp;<span class="op" id="7793432">!=</span>&nbsp;<span class="ident" id="7793435">nil</span>&nbsp;<span class="op" id="7793439">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793445">t</span><span class="op" id="7793446">.</span><span class="ident" id="7793447">Fatal</span><span class="op" id="7793452">(</span><span class="ident" id="7793453">err</span><span class="op" id="7793456">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793461">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793466">proxy</span>&nbsp;<span class="op" id="7793472">=</span>&nbsp;<span class="ident" id="7793474">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793478">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793482">cm</span>&nbsp;<span class="op" id="7793485">:=</span>&nbsp;<span class="ident" id="7793488">connectMethod</span><span class="op" id="7793501">{</span><span class="ident" id="7793502">proxy</span><span class="op" id="7793507">,</span>&nbsp;<span class="ident" id="7793509">tt</span><span class="op" id="7793511">.</span><span class="ident" id="7793512">scheme</span><span class="op" id="7793518">,</span>&nbsp;<span class="ident" id="7793520">tt</span><span class="op" id="7793522">.</span><span class="ident" id="7793523">addr</span><span class="op" id="7793527">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793531">if</span>&nbsp;<span class="ident" id="7793534">got</span>&nbsp;<span class="op" id="7793538">:=</span>&nbsp;<span class="ident" id="7793541">cm</span><span class="op" id="7793543">.</span><span class="ident" id="7793544">key</span><span class="op" id="7793547">(</span><span class="op" id="7793548">)</span><span class="op" id="7793549">.</span><span class="ident" id="7793550">String</span><span class="op" id="7793556">(</span><span class="op" id="7793557">)</span><span class="op" id="7793558">;</span>&nbsp;<span class="ident" id="7793560">got</span>&nbsp;<span class="op" id="7793564">!=</span>&nbsp;<span class="ident" id="7793567">tt</span><span class="op" id="7793569">.</span><span class="ident" id="7793570">key</span>&nbsp;<span class="op" id="7793574">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793579">t</span><span class="op" id="7793580">.</span><span class="ident" id="7793581">Fatalf</span><span class="op" id="7793587">(</span><span class="string" id="7793588">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="7793626">,</span>&nbsp;<span class="ident" id="7793628">tt</span><span class="op" id="7793630">.</span><span class="ident" id="7793631">proxy</span><span class="op" id="7793636">,</span>&nbsp;<span class="ident" id="7793638">tt</span><span class="op" id="7793640">.</span><span class="ident" id="7793641">scheme</span><span class="op" id="7793647">,</span>&nbsp;<span class="ident" id="7793649">tt</span><span class="op" id="7793651">.</span><span class="ident" id="7793652">addr</span><span class="op" id="7793656">,</span>&nbsp;<span class="ident" id="7793658">got</span><span class="op" id="7793661">,</span>&nbsp;<span class="ident" id="7793663">tt</span><span class="op" id="7793665">.</span><span class="ident" id="7793666">key</span><span class="op" id="7793669">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793673">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793676">}</span><br>
<span class="lineno"></span><span class="op" id="7793678">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="7793681">func</span>&nbsp;<span class="ident" id="7793686">ResetProxyEnv</span><span class="op" id="7793699">(</span><span class="op" id="7793700">)</span>&nbsp;<span class="op" id="7793702">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="7793705">for</span>&nbsp;<span class="ident" id="7793709">_</span><span class="op" id="7793710">,</span>&nbsp;<span class="ident" id="7793712">v</span>&nbsp;<span class="op" id="7793714">:=</span>&nbsp;<span class="keyword" id="7793717">range</span>&nbsp;<span class="op" id="7793723">[</span><span class="op" id="7793724">]</span><span class="builtintype" id="7793725">string</span><span class="op" id="7793731">{</span><span class="string" id="7793732">&#34;HTTP_PROXY&#34;</span><span class="op" id="7793744">,</span>&nbsp;<span class="string" id="7793746">&#34;http_proxy&#34;</span><span class="op" id="7793758">,</span>&nbsp;<span class="string" id="7793760">&#34;NO_PROXY&#34;</span><span class="op" id="7793770">,</span>&nbsp;<span class="string" id="7793772">&#34;no_proxy&#34;</span><span class="op" id="7793782">}</span>&nbsp;<span class="op" id="7793784">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793788">os</span><span class="op" id="7793790">.</span><span class="ident" id="7793791">Setenv</span><span class="op" id="7793797">(</span><span class="ident" id="7793798">v</span><span class="op" id="7793799">,</span>&nbsp;<span class="string" id="7793801">&#34;&#34;</span><span class="op" id="7793803">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="7793806">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="7793809">ResetCachedEnvironment</span><span class="op" id="7793831">(</span><span class="op" id="7793832">)</span><br>
<span class="lineno"></span><span class="op" id="7793834">}</span>
</div>
</body>
</html>
