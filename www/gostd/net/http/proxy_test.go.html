<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net/http</h2>
<ul>
<li><a href="/gostd/net/http/client.go.html">client.go</a></li>
<li><a href="/gostd/net/http/client_test.go.html">client_test.go</a></li>
<li><a href="/gostd/net/http/cookie.go.html">cookie.go</a></li>
<li><a href="/gostd/net/http/cookie_test.go.html">cookie_test.go</a></li>
<li><a href="/gostd/net/http/doc.go.html">doc.go</a></li>
<li><a href="/gostd/net/http/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/http/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/net/http/filetransport.go.html">filetransport.go</a></li>
<li><a href="/gostd/net/http/filetransport_test.go.html">filetransport_test.go</a></li>
<li><a href="/gostd/net/http/fs.go.html">fs.go</a></li>
<li><a href="/gostd/net/http/fs_test.go.html">fs_test.go</a></li>
<li><a href="/gostd/net/http/header.go.html">header.go</a></li>
<li><a href="/gostd/net/http/header_test.go.html">header_test.go</a></li>
<li><a href="/gostd/net/http/jar.go.html">jar.go</a></li>
<li><a href="/gostd/net/http/lex.go.html">lex.go</a></li>
<li><a href="/gostd/net/http/lex_test.go.html">lex_test.go</a></li>
<li><a href="/gostd/net/http/main_test.go.html">main_test.go</a></li>
<li><a href="/gostd/net/http/npn_test.go.html">npn_test.go</a></li>
<li><a href="/gostd/net/http/proxy_test.go.html">proxy_test.go</a></li>
<li><a href="/gostd/net/http/range_test.go.html">range_test.go</a></li>
<li><a href="/gostd/net/http/readrequest_test.go.html">readrequest_test.go</a></li>
<li><a href="/gostd/net/http/request.go.html">request.go</a></li>
<li><a href="/gostd/net/http/request_test.go.html">request_test.go</a></li>
<li><a href="/gostd/net/http/requestwrite_test.go.html">requestwrite_test.go</a></li>
<li><a href="/gostd/net/http/response.go.html">response.go</a></li>
<li><a href="/gostd/net/http/response_test.go.html">response_test.go</a></li>
<li><a href="/gostd/net/http/responsewrite_test.go.html">responsewrite_test.go</a></li>
<li><a href="/gostd/net/http/serve_test.go.html">serve_test.go</a></li>
<li><a href="/gostd/net/http/server.go.html">server.go</a></li>
<li><a href="/gostd/net/http/sniff.go.html">sniff.go</a></li>
<li><a href="/gostd/net/http/sniff_test.go.html">sniff_test.go</a></li>
<li><a href="/gostd/net/http/status.go.html">status.go</a></li>
<li><a href="/gostd/net/http/transfer.go.html">transfer.go</a></li>
<li><a href="/gostd/net/http/transfer_test.go.html">transfer_test.go</a></li>
<li><a href="/gostd/net/http/transport.go.html">transport.go</a></li>
<li><a href="/gostd/net/http/transport_test.go.html">transport_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8346871">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8346926">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8346980">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8347031">package</span>&nbsp;<span class="ident" id="8347039">http</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8347045">import</span>&nbsp;<span class="op" id="8347052">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8347055">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8347066">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8347072">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="8347082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8347085">//&nbsp;TODO(mattn):</span><br>
<span class="lineno"></span><span class="comment" id="8347101">//&nbsp;&nbsp;&nbsp;&nbsptest&nbsp;ProxyAuth</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="keyword" id="8347120">var</span>&nbsp;<span class="ident" id="8347124">UseProxyTests</span>&nbsp;<span class="op" id="8347138">=</span>&nbsp;<span class="op" id="8347140">[</span><span class="op" id="8347141">]</span><span class="keyword" id="8347142">struct</span>&nbsp;<span class="op" id="8347149">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347152">host</span>&nbsp;&nbsp;<span class="builtintype" id="8347158">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347166">match</span>&nbsp;<span class="builtintype" id="8347172">bool</span><br>
<span class="lineno"></span><span class="op" id="8347177">}</span><span class="op" id="8347178">{</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8347181">//&nbsp;Never&nbsp;proxy&nbsp;localhost:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347208">{</span><span class="string" id="8347209">&#34;localhost:80&#34;</span><span class="op" id="8347223">,</span>&nbsp;<span class="builtintype" id="8347225">false</span><span class="op" id="8347230">}</span><span class="op" id="8347231">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347234">{</span><span class="string" id="8347235">&#34;127.0.0.1&#34;</span><span class="op" id="8347246">,</span>&nbsp;<span class="builtintype" id="8347248">false</span><span class="op" id="8347253">}</span><span class="op" id="8347254">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347257">{</span><span class="string" id="8347258">&#34;127.0.0.2&#34;</span><span class="op" id="8347269">,</span>&nbsp;<span class="builtintype" id="8347271">false</span><span class="op" id="8347276">}</span><span class="op" id="8347277">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347280">{</span><span class="string" id="8347281">&#34;[::1]&#34;</span><span class="op" id="8347288">,</span>&nbsp;<span class="builtintype" id="8347290">false</span><span class="op" id="8347295">}</span><span class="op" id="8347296">,</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347299">{</span><span class="string" id="8347300">&#34;[::2]&#34;</span><span class="op" id="8347307">,</span>&nbsp;<span class="builtintype" id="8347309">true</span><span class="op" id="8347313">}</span><span class="op" id="8347314">,</span>&nbsp;<span class="comment" id="8347316">//&nbsp;not&nbsp;a&nbsp;loopback&nbsp;address</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347344">{</span><span class="string" id="8347345">&#34;barbaz.net&#34;</span><span class="op" id="8347357">,</span>&nbsp;<span class="builtintype" id="8347359">false</span><span class="op" id="8347364">}</span><span class="op" id="8347365">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8347371">//&nbsp;match&nbsp;as&nbsp;.barbaz.net</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347396">{</span><span class="string" id="8347397">&#34;foobar.com&#34;</span><span class="op" id="8347409">,</span>&nbsp;<span class="builtintype" id="8347411">false</span><span class="op" id="8347416">}</span><span class="op" id="8347417">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8347423">//&nbsp;have&nbsp;a&nbsp;port&nbsp;but&nbsp;match</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347449">{</span><span class="string" id="8347450">&#34;foofoobar.com&#34;</span><span class="op" id="8347465">,</span>&nbsp;<span class="builtintype" id="8347467">true</span><span class="op" id="8347471">}</span><span class="op" id="8347472">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8347476">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;foobar.com</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347514">{</span><span class="string" id="8347515">&#34;baz.com&#34;</span><span class="op" id="8347524">,</span>&nbsp;<span class="builtintype" id="8347526">true</span><span class="op" id="8347530">}</span><span class="op" id="8347531">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8347541">//&nbsp;not&nbsp;match&nbsp;as&nbsp;a&nbsp;part&nbsp;of&nbsp;barbaz.com</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347579">{</span><span class="string" id="8347580">&#34;localhost.net&#34;</span><span class="op" id="8347595">,</span>&nbsp;<span class="builtintype" id="8347597">true</span><span class="op" id="8347601">}</span><span class="op" id="8347602">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8347606">//&nbsp;not&nbsp;match&nbsp;as&nbsp;suffix&nbsp;of&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347641">{</span><span class="string" id="8347642">&#34;local.localhost&#34;</span><span class="op" id="8347659">,</span>&nbsp;<span class="builtintype" id="8347661">true</span><span class="op" id="8347665">}</span><span class="op" id="8347666">,</span>&nbsp;<span class="comment" id="8347668">//&nbsp;not&nbsp;match&nbsp;as&nbsp;prefix&nbsp;as&nbsp;address</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347703">{</span><span class="string" id="8347704">&#34;barbarbaz.net&#34;</span><span class="op" id="8347719">,</span>&nbsp;<span class="builtintype" id="8347721">true</span><span class="op" id="8347725">}</span><span class="op" id="8347726">,</span>&nbsp;&nbsp;&nbsp;<span class="comment" id="8347730">//&nbsp;not&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;have&nbsp;a&nbsp;&#39;.&#39;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8347772">{</span><span class="string" id="8347773">&#34;www.foobar.com&#34;</span><span class="op" id="8347789">,</span>&nbsp;<span class="builtintype" id="8347791">false</span><span class="op" id="8347796">}</span><span class="op" id="8347797">,</span>&nbsp;<span class="comment" id="8347799">//&nbsp;match&nbsp;because&nbsp;NO_PROXY&nbsp;includes&nbsp;&#34;foobar.com&#34;</span><br>
<span class="lineno">35</span><span class="op" id="8347847">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8347850">func</span>&nbsp;<span class="ident" id="8347855">TestUseProxy</span><span class="op" id="8347867">(</span><span class="ident" id="8347868">t</span>&nbsp;<span class="op" id="8347870">*</span><span class="ident" id="8347871">testing</span><span class="op" id="8347878">.</span><span class="ident" id="8347879">T</span><span class="op" id="8347880">)</span>&nbsp;<span class="op" id="8347882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347885">ResetProxyEnv</span><span class="op" id="8347898">(</span><span class="op" id="8347899">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8347902">os</span><span class="op" id="8347904">.</span><span class="ident" id="8347905">Setenv</span><span class="op" id="8347911">(</span><span class="string" id="8347912">&#34;NO_PROXY&#34;</span><span class="op" id="8347922">,</span>&nbsp;<span class="string" id="8347924">&#34;foobar.com,&nbsp;.barbaz.net&#34;</span><span class="op" id="8347949">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347952">for</span>&nbsp;<span class="ident" id="8347956">_</span><span class="op" id="8347957">,</span>&nbsp;<span class="ident" id="8347959">test</span>&nbsp;<span class="op" id="8347964">:=</span>&nbsp;<span class="keyword" id="8347967">range</span>&nbsp;<span class="ident" id="8347973">UseProxyTests</span>&nbsp;<span class="op" id="8347987">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8347991">if</span>&nbsp;<span class="ident" id="8347994">useProxy</span><span class="op" id="8348002">(</span><span class="ident" id="8348003">test</span><span class="op" id="8348007">.</span><span class="ident" id="8348008">host</span><span class="op" id="8348012">+</span><span class="string" id="8348013">&#34;:80&#34;</span><span class="op" id="8348018">)</span>&nbsp;<span class="op" id="8348020">!=</span>&nbsp;<span class="ident" id="8348023">test</span><span class="op" id="8348027">.</span><span class="ident" id="8348028">match</span>&nbsp;<span class="op" id="8348034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348039">t</span><span class="op" id="8348040">.</span><span class="ident" id="8348041">Errorf</span><span class="op" id="8348047">(</span><span class="string" id="8348048">&#34;useProxy(%v)&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8348076">,</span>&nbsp;<span class="ident" id="8348078">test</span><span class="op" id="8348082">.</span><span class="ident" id="8348083">host</span><span class="op" id="8348087">,</span>&nbsp;<span class="op" id="8348089">!</span><span class="ident" id="8348090">test</span><span class="op" id="8348094">.</span><span class="ident" id="8348095">match</span><span class="op" id="8348100">,</span>&nbsp;<span class="ident" id="8348102">test</span><span class="op" id="8348106">.</span><span class="ident" id="8348107">match</span><span class="op" id="8348112">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348119">}</span><br>
<span class="lineno">45</span><span class="op" id="8348121">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8348124">var</span>&nbsp;<span class="ident" id="8348128">cacheKeysTests</span>&nbsp;<span class="op" id="8348143">=</span>&nbsp;<span class="op" id="8348145">[</span><span class="op" id="8348146">]</span><span class="keyword" id="8348147">struct</span>&nbsp;<span class="op" id="8348154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348157">proxy</span>&nbsp;&nbsp;<span class="builtintype" id="8348164">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348172">scheme</span>&nbsp;<span class="builtintype" id="8348179">string</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348187">addr</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8348194">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348202">key</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="8348209">string</span><br>
<span class="lineno"></span><span class="op" id="8348216">}</span><span class="op" id="8348217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348220">{</span><span class="string" id="8348221">&#34;&#34;</span><span class="op" id="8348223">,</span>&nbsp;<span class="string" id="8348225">&#34;http&#34;</span><span class="op" id="8348231">,</span>&nbsp;<span class="string" id="8348233">&#34;foo.com&#34;</span><span class="op" id="8348242">,</span>&nbsp;<span class="string" id="8348244">&#34;|http|foo.com&#34;</span><span class="op" id="8348259">}</span><span class="op" id="8348260">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348263">{</span><span class="string" id="8348264">&#34;&#34;</span><span class="op" id="8348266">,</span>&nbsp;<span class="string" id="8348268">&#34;https&#34;</span><span class="op" id="8348275">,</span>&nbsp;<span class="string" id="8348277">&#34;foo.com&#34;</span><span class="op" id="8348286">,</span>&nbsp;<span class="string" id="8348288">&#34;|https|foo.com&#34;</span><span class="op" id="8348304">}</span><span class="op" id="8348305">,</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348308">{</span><span class="string" id="8348309">&#34;http://foo.com&#34;</span><span class="op" id="8348325">,</span>&nbsp;<span class="string" id="8348327">&#34;http&#34;</span><span class="op" id="8348333">,</span>&nbsp;<span class="string" id="8348335">&#34;foo.com&#34;</span><span class="op" id="8348344">,</span>&nbsp;<span class="string" id="8348346">&#34;http://foo.com|http|&#34;</span><span class="op" id="8348368">}</span><span class="op" id="8348369">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348372">{</span><span class="string" id="8348373">&#34;http://foo.com&#34;</span><span class="op" id="8348389">,</span>&nbsp;<span class="string" id="8348391">&#34;https&#34;</span><span class="op" id="8348398">,</span>&nbsp;<span class="string" id="8348400">&#34;foo.com&#34;</span><span class="op" id="8348409">,</span>&nbsp;<span class="string" id="8348411">&#34;http://foo.com|https|foo.com&#34;</span><span class="op" id="8348441">}</span><span class="op" id="8348442">,</span><br>
<span class="lineno"></span><span class="op" id="8348444">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8348447">func</span>&nbsp;<span class="ident" id="8348452">TestCacheKeys</span><span class="op" id="8348465">(</span><span class="ident" id="8348466">t</span>&nbsp;<span class="op" id="8348468">*</span><span class="ident" id="8348469">testing</span><span class="op" id="8348476">.</span><span class="ident" id="8348477">T</span><span class="op" id="8348478">)</span>&nbsp;<span class="op" id="8348480">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348483">for</span>&nbsp;<span class="ident" id="8348487">_</span><span class="op" id="8348488">,</span>&nbsp;<span class="ident" id="8348490">tt</span>&nbsp;<span class="op" id="8348493">:=</span>&nbsp;<span class="keyword" id="8348496">range</span>&nbsp;<span class="ident" id="8348502">cacheKeysTests</span>&nbsp;<span class="op" id="8348517">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348521">var</span>&nbsp;<span class="ident" id="8348525">proxy</span>&nbsp;<span class="op" id="8348531">*</span><span class="ident" id="8348532">url</span><span class="op" id="8348535">.</span><span class="ident" id="8348536">URL</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348542">if</span>&nbsp;<span class="ident" id="8348545">tt</span><span class="op" id="8348547">.</span><span class="ident" id="8348548">proxy</span>&nbsp;<span class="op" id="8348554">!=</span>&nbsp;<span class="string" id="8348557">&#34;&#34;</span>&nbsp;<span class="op" id="8348560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348565">u</span><span class="op" id="8348566">,</span>&nbsp;<span class="ident" id="8348568">err</span>&nbsp;<span class="op" id="8348572">:=</span>&nbsp;<span class="ident" id="8348575">url</span><span class="op" id="8348578">.</span><span class="ident" id="8348579">Parse</span><span class="op" id="8348584">(</span><span class="ident" id="8348585">tt</span><span class="op" id="8348587">.</span><span class="ident" id="8348588">proxy</span><span class="op" id="8348593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348598">if</span>&nbsp;<span class="ident" id="8348601">err</span>&nbsp;<span class="op" id="8348605">!=</span>&nbsp;<span class="ident" id="8348608">nil</span>&nbsp;<span class="op" id="8348612">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348618">t</span><span class="op" id="8348619">.</span><span class="ident" id="8348620">Fatal</span><span class="op" id="8348625">(</span><span class="ident" id="8348626">err</span><span class="op" id="8348629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348639">proxy</span>&nbsp;<span class="op" id="8348645">=</span>&nbsp;<span class="ident" id="8348647">u</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348651">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348655">cm</span>&nbsp;<span class="op" id="8348658">:=</span>&nbsp;<span class="ident" id="8348661">connectMethod</span><span class="op" id="8348674">{</span><span class="ident" id="8348675">proxy</span><span class="op" id="8348680">,</span>&nbsp;<span class="ident" id="8348682">tt</span><span class="op" id="8348684">.</span><span class="ident" id="8348685">scheme</span><span class="op" id="8348691">,</span>&nbsp;<span class="ident" id="8348693">tt</span><span class="op" id="8348695">.</span><span class="ident" id="8348696">addr</span><span class="op" id="8348700">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348704">if</span>&nbsp;<span class="ident" id="8348707">got</span>&nbsp;<span class="op" id="8348711">:=</span>&nbsp;<span class="ident" id="8348714">cm</span><span class="op" id="8348716">.</span><span class="ident" id="8348717">key</span><span class="op" id="8348720">(</span><span class="op" id="8348721">)</span><span class="op" id="8348722">.</span><span class="ident" id="8348723">String</span><span class="op" id="8348729">(</span><span class="op" id="8348730">)</span><span class="op" id="8348731">;</span>&nbsp;<span class="ident" id="8348733">got</span>&nbsp;<span class="op" id="8348737">!=</span>&nbsp;<span class="ident" id="8348740">tt</span><span class="op" id="8348742">.</span><span class="ident" id="8348743">key</span>&nbsp;<span class="op" id="8348747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348752">t</span><span class="op" id="8348753">.</span><span class="ident" id="8348754">Fatalf</span><span class="op" id="8348760">(</span><span class="string" id="8348761">&#34;{%q,&nbsp;%q,&nbsp;%q}&nbsp;cache&nbsp;key&nbsp;=&nbsp;%q;&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8348799">,</span>&nbsp;<span class="ident" id="8348801">tt</span><span class="op" id="8348803">.</span><span class="ident" id="8348804">proxy</span><span class="op" id="8348809">,</span>&nbsp;<span class="ident" id="8348811">tt</span><span class="op" id="8348813">.</span><span class="ident" id="8348814">scheme</span><span class="op" id="8348820">,</span>&nbsp;<span class="ident" id="8348822">tt</span><span class="op" id="8348824">.</span><span class="ident" id="8348825">addr</span><span class="op" id="8348829">,</span>&nbsp;<span class="ident" id="8348831">got</span><span class="op" id="8348834">,</span>&nbsp;<span class="ident" id="8348836">tt</span><span class="op" id="8348838">.</span><span class="ident" id="8348839">key</span><span class="op" id="8348842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348846">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348849">}</span><br>
<span class="lineno"></span><span class="op" id="8348851">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span><span class="keyword" id="8348854">func</span>&nbsp;<span class="ident" id="8348859">ResetProxyEnv</span><span class="op" id="8348872">(</span><span class="op" id="8348873">)</span>&nbsp;<span class="op" id="8348875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8348878">for</span>&nbsp;<span class="ident" id="8348882">_</span><span class="op" id="8348883">,</span>&nbsp;<span class="ident" id="8348885">v</span>&nbsp;<span class="op" id="8348887">:=</span>&nbsp;<span class="keyword" id="8348890">range</span>&nbsp;<span class="op" id="8348896">[</span><span class="op" id="8348897">]</span><span class="builtintype" id="8348898">string</span><span class="op" id="8348904">{</span><span class="string" id="8348905">&#34;HTTP_PROXY&#34;</span><span class="op" id="8348917">,</span>&nbsp;<span class="string" id="8348919">&#34;http_proxy&#34;</span><span class="op" id="8348931">,</span>&nbsp;<span class="string" id="8348933">&#34;NO_PROXY&#34;</span><span class="op" id="8348943">,</span>&nbsp;<span class="string" id="8348945">&#34;no_proxy&#34;</span><span class="op" id="8348955">}</span>&nbsp;<span class="op" id="8348957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348961">os</span><span class="op" id="8348963">.</span><span class="ident" id="8348964">Setenv</span><span class="op" id="8348970">(</span><span class="ident" id="8348971">v</span><span class="op" id="8348972">,</span>&nbsp;<span class="string" id="8348974">&#34;&#34;</span><span class="op" id="8348976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8348979">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8348982">ResetCachedEnvironment</span><span class="op" id="8349004">(</span><span class="op" id="8349005">)</span><br>
<span class="lineno"></span><span class="op" id="8349007">}</span>
</div>
</body>
</html>
