<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>net</h2>
<ul>
<li><a href="/gostd/net/cgo_stub.go.html">cgo_stub.go</a></li>
<li><a href="/gostd/net/conn_test.go.html">conn_test.go</a></li>
<li><a href="/gostd/net/dial.go.html">dial.go</a></li>
<li><a href="/gostd/net/dial_test.go.html">dial_test.go</a></li>
<li><a href="/gostd/net/dialgoogle_test.go.html">dialgoogle_test.go</a></li>
<li><a href="/gostd/net/dnsclient.go.html" class="current">dnsclient.go</a></li>
<li><a href="/gostd/net/dnsclient_test.go.html">dnsclient_test.go</a></li>
<li><a href="/gostd/net/dnsclient_unix.go.html">dnsclient_unix.go</a></li>
<li><a href="/gostd/net/dnsclient_unix_test.go.html">dnsclient_unix_test.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix.go.html">dnsconfig_unix.go</a></li>
<li><a href="/gostd/net/dnsconfig_unix_test.go.html">dnsconfig_unix_test.go</a></li>
<li><a href="/gostd/net/dnsmsg.go.html">dnsmsg.go</a></li>
<li><a href="/gostd/net/dnsmsg_test.go.html">dnsmsg_test.go</a></li>
<li><a href="/gostd/net/dnsname_test.go.html">dnsname_test.go</a></li>
<li><a href="/gostd/net/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/net/fd_mutex.go.html">fd_mutex.go</a></li>
<li><a href="/gostd/net/fd_mutex_test.go.html">fd_mutex_test.go</a></li>
<li><a href="/gostd/net/fd_poll_runtime.go.html">fd_poll_runtime.go</a></li>
<li><a href="/gostd/net/fd_unix.go.html">fd_unix.go</a></li>
<li><a href="/gostd/net/fd_unix_test.go.html">fd_unix_test.go</a></li>
<li><a href="/gostd/net/file_test.go.html">file_test.go</a></li>
<li><a href="/gostd/net/file_unix.go.html">file_unix.go</a></li>
<li><a href="/gostd/net/hosts.go.html">hosts.go</a></li>
<li><a href="/gostd/net/hosts_test.go.html">hosts_test.go</a></li>
<li><a href="/gostd/net/interface.go.html">interface.go</a></li>
<li><a href="/gostd/net/interface_linux.go.html">interface_linux.go</a></li>
<li><a href="/gostd/net/interface_linux_test.go.html">interface_linux_test.go</a></li>
<li><a href="/gostd/net/interface_test.go.html">interface_test.go</a></li>
<li><a href="/gostd/net/interface_unix_test.go.html">interface_unix_test.go</a></li>
<li><a href="/gostd/net/ip.go.html">ip.go</a></li>
<li><a href="/gostd/net/ip_test.go.html">ip_test.go</a></li>
<li><a href="/gostd/net/ipraw_test.go.html">ipraw_test.go</a></li>
<li><a href="/gostd/net/iprawsock.go.html">iprawsock.go</a></li>
<li><a href="/gostd/net/iprawsock_posix.go.html">iprawsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock.go.html">ipsock.go</a></li>
<li><a href="/gostd/net/ipsock_posix.go.html">ipsock_posix.go</a></li>
<li><a href="/gostd/net/ipsock_test.go.html">ipsock_test.go</a></li>
<li><a href="/gostd/net/lookup.go.html">lookup.go</a></li>
<li><a href="/gostd/net/lookup_test.go.html">lookup_test.go</a></li>
<li><a href="/gostd/net/lookup_unix.go.html">lookup_unix.go</a></li>
<li><a href="/gostd/net/mac.go.html">mac.go</a></li>
<li><a href="/gostd/net/mac_test.go.html">mac_test.go</a></li>
<li><a href="/gostd/net/mockicmp_test.go.html">mockicmp_test.go</a></li>
<li><a href="/gostd/net/mockserver_test.go.html">mockserver_test.go</a></li>
<li><a href="/gostd/net/multicast_test.go.html">multicast_test.go</a></li>
<li><a href="/gostd/net/net.go.html">net.go</a></li>
<li><a href="/gostd/net/net_test.go.html">net_test.go</a></li>
<li><a href="/gostd/net/netgo_unix_test.go.html">netgo_unix_test.go</a></li>
<li><a href="/gostd/net/packetconn_test.go.html">packetconn_test.go</a></li>
<li><a href="/gostd/net/parse.go.html">parse.go</a></li>
<li><a href="/gostd/net/parse_test.go.html">parse_test.go</a></li>
<li><a href="/gostd/net/pipe.go.html">pipe.go</a></li>
<li><a href="/gostd/net/pipe_test.go.html">pipe_test.go</a></li>
<li><a href="/gostd/net/port.go.html">port.go</a></li>
<li><a href="/gostd/net/port_test.go.html">port_test.go</a></li>
<li><a href="/gostd/net/port_unix.go.html">port_unix.go</a></li>
<li><a href="/gostd/net/protoconn_test.go.html">protoconn_test.go</a></li>
<li><a href="/gostd/net/sendfile_linux.go.html">sendfile_linux.go</a></li>
<li><a href="/gostd/net/server_test.go.html">server_test.go</a></li>
<li><a href="/gostd/net/singleflight.go.html">singleflight.go</a></li>
<li><a href="/gostd/net/sock_cloexec.go.html">sock_cloexec.go</a></li>
<li><a href="/gostd/net/sock_linux.go.html">sock_linux.go</a></li>
<li><a href="/gostd/net/sock_posix.go.html">sock_posix.go</a></li>
<li><a href="/gostd/net/sockopt_linux.go.html">sockopt_linux.go</a></li>
<li><a href="/gostd/net/sockopt_posix.go.html">sockopt_posix.go</a></li>
<li><a href="/gostd/net/sockoptip_linux.go.html">sockoptip_linux.go</a></li>
<li><a href="/gostd/net/sockoptip_posix.go.html">sockoptip_posix.go</a></li>
<li><a href="/gostd/net/tcp_test.go.html">tcp_test.go</a></li>
<li><a href="/gostd/net/tcpsock.go.html">tcpsock.go</a></li>
<li><a href="/gostd/net/tcpsock_posix.go.html">tcpsock_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_posix.go.html">tcpsockopt_posix.go</a></li>
<li><a href="/gostd/net/tcpsockopt_unix.go.html">tcpsockopt_unix.go</a></li>
<li><a href="/gostd/net/timeout_test.go.html">timeout_test.go</a></li>
<li><a href="/gostd/net/udp_test.go.html">udp_test.go</a></li>
<li><a href="/gostd/net/udpsock.go.html">udpsock.go</a></li>
<li><a href="/gostd/net/udpsock_posix.go.html">udpsock_posix.go</a></li>
<li><a href="/gostd/net/unicast_posix_test.go.html">unicast_posix_test.go</a></li>
<li><a href="/gostd/net/unix_test.go.html">unix_test.go</a></li>
<li><a href="/gostd/net/unixsock.go.html">unixsock.go</a></li>
<li><a href="/gostd/net/unixsock_posix.go.html">unixsock_posix.go</a></li>
<li><a href="/gostd/net/z_last_test.go.html">z_last_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3843510">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3843565">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3843619">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3843670">package</span>&nbsp;<span class="ident" id="3843678">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3843683">import</span>&nbsp;<span class="op" id="3843690">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3843693">&#34;math/rand&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3843706">&#34;sort&#34;</span><br>
<span class="lineno">10</span><span class="op" id="3843713">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3843716">//&nbsp;DNSError&nbsp;represents&nbsp;a&nbsp;DNS&nbsp;lookup&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3843759">type</span>&nbsp;<span class="ident" id="3843764">DNSError</span>&nbsp;<span class="keyword" id="3843773">struct</span>&nbsp;<span class="op" id="3843780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843783">Err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3843793">string</span>&nbsp;<span class="comment" id="3843800">//&nbsp;description&nbsp;of&nbsp;the&nbsp;error</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843829">Name</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3843839">string</span>&nbsp;<span class="comment" id="3843846">//&nbsp;name&nbsp;looked&nbsp;for</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843866">Server</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3843876">string</span>&nbsp;<span class="comment" id="3843883">//&nbsp;server&nbsp;used</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843899">IsTimeout</span>&nbsp;<span class="builtintype" id="3843909">bool</span><br>
<span class="lineno"></span><span class="op" id="3843914">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="keyword" id="3843917">func</span>&nbsp;<span class="op" id="3843922">(</span><span class="ident" id="3843923">e</span>&nbsp;<span class="op" id="3843925">*</span><span class="ident" id="3843926">DNSError</span><span class="op" id="3843934">)</span>&nbsp;<span class="ident" id="3843936">Error</span><span class="op" id="3843941">(</span><span class="op" id="3843942">)</span>&nbsp;<span class="builtintype" id="3843944">string</span>&nbsp;<span class="op" id="3843951">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3843954">if</span>&nbsp;<span class="ident" id="3843957">e</span>&nbsp;<span class="op" id="3843959">==</span>&nbsp;<span class="builtintype" id="3843962">nil</span>&nbsp;<span class="op" id="3843966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3843970">return</span>&nbsp;<span class="string" id="3843977">&#34;&lt;nil&gt;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3843986">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3843989">s</span>&nbsp;<span class="op" id="3843991">:=</span>&nbsp;<span class="string" id="3843994">&#34;lookup&nbsp;&#34;</span>&nbsp;<span class="op" id="3844004">+</span>&nbsp;<span class="ident" id="3844006">e</span><span class="op" id="3844007">.</span><span class="ident" id="3844008">Name</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844014">if</span>&nbsp;<span class="ident" id="3844017">e</span><span class="op" id="3844018">.</span><span class="ident" id="3844019">Server</span>&nbsp;<span class="op" id="3844026">!=</span>&nbsp;<span class="string" id="3844029">&#34;&#34;</span>&nbsp;<span class="op" id="3844032">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844036">s</span>&nbsp;<span class="op" id="3844038">+=</span>&nbsp;<span class="string" id="3844041">&#34;&nbsp;on&nbsp;&#34;</span>&nbsp;<span class="op" id="3844048">+</span>&nbsp;<span class="ident" id="3844050">e</span><span class="op" id="3844051">.</span><span class="ident" id="3844052">Server</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3844060">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844063">s</span>&nbsp;<span class="op" id="3844065">+=</span>&nbsp;<span class="string" id="3844068">&#34;:&nbsp;&#34;</span>&nbsp;<span class="op" id="3844073">+</span>&nbsp;<span class="ident" id="3844075">e</span><span class="op" id="3844076">.</span><span class="ident" id="3844077">Err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844082">return</span>&nbsp;<span class="ident" id="3844089">s</span><br>
<span class="lineno">30</span><span class="op" id="3844091">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3844094">func</span>&nbsp;<span class="op" id="3844099">(</span><span class="ident" id="3844100">e</span>&nbsp;<span class="op" id="3844102">*</span><span class="ident" id="3844103">DNSError</span><span class="op" id="3844111">)</span>&nbsp;<span class="ident" id="3844113">Timeout</span><span class="op" id="3844120">(</span><span class="op" id="3844121">)</span>&nbsp;<span class="builtintype" id="3844123">bool</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3844130">{</span>&nbsp;<span class="keyword" id="3844132">return</span>&nbsp;<span class="ident" id="3844139">e</span><span class="op" id="3844140">.</span><span class="ident" id="3844141">IsTimeout</span>&nbsp;<span class="op" id="3844151">}</span><br>
<span class="lineno"></span><span class="keyword" id="3844153">func</span>&nbsp;<span class="op" id="3844158">(</span><span class="ident" id="3844159">e</span>&nbsp;<span class="op" id="3844161">*</span><span class="ident" id="3844162">DNSError</span><span class="op" id="3844170">)</span>&nbsp;<span class="ident" id="3844172">Temporary</span><span class="op" id="3844181">(</span><span class="op" id="3844182">)</span>&nbsp;<span class="builtintype" id="3844184">bool</span>&nbsp;<span class="op" id="3844189">{</span>&nbsp;<span class="keyword" id="3844191">return</span>&nbsp;<span class="ident" id="3844198">e</span><span class="op" id="3844199">.</span><span class="ident" id="3844200">IsTimeout</span>&nbsp;<span class="op" id="3844210">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span><span class="keyword" id="3844213">const</span>&nbsp;<span class="ident" id="3844219">noSuchHost</span>&nbsp;<span class="op" id="3844230">=</span>&nbsp;<span class="string" id="3844232">&#34;no&nbsp;such&nbsp;host&#34;</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3844248">//&nbsp;reverseaddr&nbsp;returns&nbsp;the&nbsp;in-addr.arpa.&nbsp;or&nbsp;ip6.arpa.&nbsp;hostname&nbsp;of&nbsp;the&nbsp;IP</span><br>
<span class="lineno"></span><span class="comment" id="3844321">//&nbsp;address&nbsp;addr&nbsp;suitable&nbsp;for&nbsp;rDNS&nbsp;(PTR)&nbsp;record&nbsp;lookup&nbsp;or&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;fails</span><br>
<span class="lineno"></span><span class="comment" id="3844399">//&nbsp;to&nbsp;parse&nbsp;the&nbsp;IP&nbsp;address.</span><br>
<span class="lineno">40</span><span class="keyword" id="3844427">func</span>&nbsp;<span class="ident" id="3844432">reverseaddr</span><span class="op" id="3844443">(</span><span class="ident" id="3844444">addr</span>&nbsp;<span class="builtintype" id="3844449">string</span><span class="op" id="3844455">)</span>&nbsp;<span class="op" id="3844457">(</span><span class="ident" id="3844458">arpa</span>&nbsp;<span class="builtintype" id="3844463">string</span><span class="op" id="3844469">,</span>&nbsp;<span class="ident" id="3844471">err</span>&nbsp;<span class="builtintype" id="3844475">error</span><span class="op" id="3844480">)</span>&nbsp;<span class="op" id="3844482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844485">ip</span>&nbsp;<span class="op" id="3844488">:=</span>&nbsp;<span class="ident" id="3844491">ParseIP</span><span class="op" id="3844498">(</span><span class="ident" id="3844499">addr</span><span class="op" id="3844503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844506">if</span>&nbsp;<span class="ident" id="3844509">ip</span>&nbsp;<span class="op" id="3844512">==</span>&nbsp;<span class="builtintype" id="3844515">nil</span>&nbsp;<span class="op" id="3844519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844523">return</span>&nbsp;<span class="string" id="3844530">&#34;&#34;</span><span class="op" id="3844532">,</span>&nbsp;<span class="op" id="3844534">&amp;</span><span class="ident" id="3844535">DNSError</span><span class="op" id="3844543">{</span><span class="ident" id="3844544">Err</span><span class="op" id="3844547">:</span>&nbsp;<span class="string" id="3844549">&#34;unrecognized&nbsp;address&#34;</span><span class="op" id="3844571">,</span>&nbsp;<span class="ident" id="3844573">Name</span><span class="op" id="3844577">:</span>&nbsp;<span class="ident" id="3844579">addr</span><span class="op" id="3844583">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3844586">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844589">if</span>&nbsp;<span class="ident" id="3844592">ip</span><span class="op" id="3844594">.</span><span class="ident" id="3844595">To4</span><span class="op" id="3844598">(</span><span class="op" id="3844599">)</span>&nbsp;<span class="op" id="3844601">!=</span>&nbsp;<span class="builtintype" id="3844604">nil</span>&nbsp;<span class="op" id="3844608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844612">return</span>&nbsp;<span class="ident" id="3844619">itoa</span><span class="op" id="3844623">(</span><span class="builtintype" id="3844624">int</span><span class="op" id="3844627">(</span><span class="ident" id="3844628">ip</span><span class="op" id="3844630">[</span><span class="num" id="3844631">15</span><span class="op" id="3844633">]</span><span class="op" id="3844634">)</span><span class="op" id="3844635">)</span>&nbsp;<span class="op" id="3844637">+</span>&nbsp;<span class="string" id="3844639">&#34;.&#34;</span>&nbsp;<span class="op" id="3844643">+</span>&nbsp;<span class="ident" id="3844645">itoa</span><span class="op" id="3844649">(</span><span class="builtintype" id="3844650">int</span><span class="op" id="3844653">(</span><span class="ident" id="3844654">ip</span><span class="op" id="3844656">[</span><span class="num" id="3844657">14</span><span class="op" id="3844659">]</span><span class="op" id="3844660">)</span><span class="op" id="3844661">)</span>&nbsp;<span class="op" id="3844663">+</span>&nbsp;<span class="string" id="3844665">&#34;.&#34;</span>&nbsp;<span class="op" id="3844669">+</span>&nbsp;<span class="ident" id="3844671">itoa</span><span class="op" id="3844675">(</span><span class="builtintype" id="3844676">int</span><span class="op" id="3844679">(</span><span class="ident" id="3844680">ip</span><span class="op" id="3844682">[</span><span class="num" id="3844683">13</span><span class="op" id="3844685">]</span><span class="op" id="3844686">)</span><span class="op" id="3844687">)</span>&nbsp;<span class="op" id="3844689">+</span>&nbsp;<span class="string" id="3844691">&#34;.&#34;</span>&nbsp;<span class="op" id="3844695">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844700">itoa</span><span class="op" id="3844704">(</span><span class="builtintype" id="3844705">int</span><span class="op" id="3844708">(</span><span class="ident" id="3844709">ip</span><span class="op" id="3844711">[</span><span class="num" id="3844712">12</span><span class="op" id="3844714">]</span><span class="op" id="3844715">)</span><span class="op" id="3844716">)</span>&nbsp;<span class="op" id="3844718">+</span>&nbsp;<span class="string" id="3844720">&#34;.in-addr.arpa.&#34;</span><span class="op" id="3844736">,</span>&nbsp;<span class="builtintype" id="3844738">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3844743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3844746">//&nbsp;Must&nbsp;be&nbsp;IPv6</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844763">buf</span>&nbsp;<span class="op" id="3844767">:=</span>&nbsp;<span class="builtinfunc" id="3844770">make</span><span class="op" id="3844774">(</span><span class="op" id="3844775">[</span><span class="op" id="3844776">]</span><span class="builtintype" id="3844777">byte</span><span class="op" id="3844781">,</span>&nbsp;<span class="num" id="3844783">0</span><span class="op" id="3844784">,</span>&nbsp;<span class="builtinfunc" id="3844786">len</span><span class="op" id="3844789">(</span><span class="ident" id="3844790">ip</span><span class="op" id="3844792">)</span><span class="op" id="3844793">*</span><span class="num" id="3844794">4</span><span class="op" id="3844795">+</span><span class="builtinfunc" id="3844796">len</span><span class="op" id="3844799">(</span><span class="string" id="3844800">&#34;ip6.arpa.&#34;</span><span class="op" id="3844811">)</span><span class="op" id="3844812">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3844815">//&nbsp;Add&nbsp;it,&nbsp;in&nbsp;reverse,&nbsp;to&nbsp;the&nbsp;buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3844853">for</span>&nbsp;<span class="ident" id="3844857">i</span>&nbsp;<span class="op" id="3844859">:=</span>&nbsp;<span class="builtinfunc" id="3844862">len</span><span class="op" id="3844865">(</span><span class="ident" id="3844866">ip</span><span class="op" id="3844868">)</span>&nbsp;<span class="op" id="3844870">-</span>&nbsp;<span class="num" id="3844872">1</span><span class="op" id="3844873">;</span>&nbsp;<span class="ident" id="3844875">i</span>&nbsp;<span class="op" id="3844877">&gt;=</span>&nbsp;<span class="num" id="3844880">0</span><span class="op" id="3844881">;</span>&nbsp;<span class="ident" id="3844883">i</span><span class="op" id="3844884">--</span>&nbsp;<span class="op" id="3844887">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844891">v</span>&nbsp;<span class="op" id="3844893">:=</span>&nbsp;<span class="ident" id="3844896">ip</span><span class="op" id="3844898">[</span><span class="ident" id="3844899">i</span><span class="op" id="3844900">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844904">buf</span>&nbsp;<span class="op" id="3844908">=</span>&nbsp;<span class="builtinfunc" id="3844910">append</span><span class="op" id="3844916">(</span><span class="ident" id="3844917">buf</span><span class="op" id="3844920">,</span>&nbsp;<span class="ident" id="3844922">hexDigit</span><span class="op" id="3844930">[</span><span class="ident" id="3844931">v</span><span class="op" id="3844932">&amp;</span><span class="num" id="3844933">0xF</span><span class="op" id="3844936">]</span><span class="op" id="3844937">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844941">buf</span>&nbsp;<span class="op" id="3844945">=</span>&nbsp;<span class="builtinfunc" id="3844947">append</span><span class="op" id="3844953">(</span><span class="ident" id="3844954">buf</span><span class="op" id="3844957">,</span>&nbsp;<span class="string" id="3844959">&#39;.&#39;</span><span class="op" id="3844962">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3844966">buf</span>&nbsp;<span class="op" id="3844970">=</span>&nbsp;<span class="builtinfunc" id="3844972">append</span><span class="op" id="3844978">(</span><span class="ident" id="3844979">buf</span><span class="op" id="3844982">,</span>&nbsp;<span class="ident" id="3844984">hexDigit</span><span class="op" id="3844992">[</span><span class="ident" id="3844993">v</span><span class="op" id="3844994">&gt;&gt;</span><span class="num" id="3844996">4</span><span class="op" id="3844997">]</span><span class="op" id="3844998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3845002">buf</span>&nbsp;<span class="op" id="3845006">=</span>&nbsp;<span class="builtinfunc" id="3845008">append</span><span class="op" id="3845014">(</span><span class="ident" id="3845015">buf</span><span class="op" id="3845018">,</span>&nbsp;<span class="string" id="3845020">&#39;.&#39;</span><span class="op" id="3845023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3845026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845029">//&nbsp;Append&nbsp;&#34;ip6.arpa.&#34;&nbsp;and&nbsp;return&nbsp;(buf&nbsp;already&nbsp;has&nbsp;the&nbsp;final&nbsp;.)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3845093">buf</span>&nbsp;<span class="op" id="3845097">=</span>&nbsp;<span class="builtinfunc" id="3845099">append</span><span class="op" id="3845105">(</span><span class="ident" id="3845106">buf</span><span class="op" id="3845109">,</span>&nbsp;<span class="string" id="3845111">&#34;ip6.arpa.&#34;</span><span class="op" id="3845122">...</span><span class="op" id="3845125">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3845128">return</span>&nbsp;<span class="builtintype" id="3845135">string</span><span class="op" id="3845141">(</span><span class="ident" id="3845142">buf</span><span class="op" id="3845145">)</span><span class="op" id="3845146">,</span>&nbsp;<span class="builtintype" id="3845148">nil</span><br>
<span class="lineno"></span><span class="op" id="3845152">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3845155">//&nbsp;Find&nbsp;answer&nbsp;for&nbsp;name&nbsp;in&nbsp;dns&nbsp;message.</span><br>
<span class="lineno">65</span><span class="comment" id="3845195">//&nbsp;On&nbsp;return,&nbsp;if&nbsp;err&nbsp;==&nbsp;nil,&nbsp;addrs&nbsp;!=&nbsp;nil.</span><br>
<span class="lineno"></span><span class="keyword" id="3845238">func</span>&nbsp;<span class="ident" id="3845243">answer</span><span class="op" id="3845249">(</span><span class="ident" id="3845250">name</span><span class="op" id="3845254">,</span>&nbsp;<span class="ident" id="3845256">server</span>&nbsp;<span class="builtintype" id="3845263">string</span><span class="op" id="3845269">,</span>&nbsp;<span class="ident" id="3845271">dns</span>&nbsp;<span class="op" id="3845275">*</span><span class="ident" id="3845276">dnsMsg</span><span class="op" id="3845282">,</span>&nbsp;<span class="ident" id="3845284">qtype</span>&nbsp;<span class="builtintype" id="3845290">uint16</span><span class="op" id="3845296">)</span>&nbsp;<span class="op" id="3845298">(</span><span class="ident" id="3845299">cname</span>&nbsp;<span class="builtintype" id="3845305">string</span><span class="op" id="3845311">,</span>&nbsp;<span class="ident" id="3845313">addrs</span>&nbsp;<span class="op" id="3845319">[</span><span class="op" id="3845320">]</span><span class="ident" id="3845321">dnsRR</span><span class="op" id="3845326">,</span>&nbsp;<span class="ident" id="3845328">err</span>&nbsp;<span class="builtintype" id="3845332">error</span><span class="op" id="3845337">)</span>&nbsp;<span class="op" id="3845339">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3845342">addrs</span>&nbsp;<span class="op" id="3845348">=</span>&nbsp;<span class="builtinfunc" id="3845350">make</span><span class="op" id="3845354">(</span><span class="op" id="3845355">[</span><span class="op" id="3845356">]</span><span class="ident" id="3845357">dnsRR</span><span class="op" id="3845362">,</span>&nbsp;<span class="num" id="3845364">0</span><span class="op" id="3845365">,</span>&nbsp;<span class="builtinfunc" id="3845367">len</span><span class="op" id="3845370">(</span><span class="ident" id="3845371">dns</span><span class="op" id="3845374">.</span><span class="ident" id="3845375">answer</span><span class="op" id="3845381">)</span><span class="op" id="3845382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3845386">if</span>&nbsp;<span class="ident" id="3845389">dns</span><span class="op" id="3845392">.</span><span class="ident" id="3845393">rcode</span>&nbsp;<span class="op" id="3845399">==</span>&nbsp;<span class="ident" id="3845402">dnsRcodeNameError</span>&nbsp;<span class="op" id="3845420">&amp;&amp;</span>&nbsp;<span class="ident" id="3845423">dns</span><span class="op" id="3845426">.</span><span class="ident" id="3845427">recursion_available</span>&nbsp;<span class="op" id="3845447">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3845451">return</span>&nbsp;<span class="string" id="3845458">&#34;&#34;</span><span class="op" id="3845460">,</span>&nbsp;<span class="builtintype" id="3845462">nil</span><span class="op" id="3845465">,</span>&nbsp;<span class="op" id="3845467">&amp;</span><span class="ident" id="3845468">DNSError</span><span class="op" id="3845476">{</span><span class="ident" id="3845477">Err</span><span class="op" id="3845480">:</span>&nbsp;<span class="ident" id="3845482">noSuchHost</span><span class="op" id="3845492">,</span>&nbsp;<span class="ident" id="3845494">Name</span><span class="op" id="3845498">:</span>&nbsp;<span class="ident" id="3845500">name</span><span class="op" id="3845504">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3845507">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3845510">if</span>&nbsp;<span class="ident" id="3845513">dns</span><span class="op" id="3845516">.</span><span class="ident" id="3845517">rcode</span>&nbsp;<span class="op" id="3845523">!=</span>&nbsp;<span class="ident" id="3845526">dnsRcodeSuccess</span>&nbsp;<span class="op" id="3845542">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845546">//&nbsp;None&nbsp;of&nbsp;the&nbsp;error&nbsp;codes&nbsp;make&nbsp;sense</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845586">//&nbsp;for&nbsp;the&nbsp;query&nbsp;we&nbsp;sent.&nbsp;&nbsp;If&nbsp;we&nbsp;didn&#39;t&nbsp;get</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845632">//&nbsp;a&nbsp;name&nbsp;error&nbsp;and&nbsp;we&nbsp;didn&#39;t&nbsp;get&nbsp;success,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845677">//&nbsp;the&nbsp;server&nbsp;is&nbsp;behaving&nbsp;incorrectly.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3845718">return</span>&nbsp;<span class="string" id="3845725">&#34;&#34;</span><span class="op" id="3845727">,</span>&nbsp;<span class="builtintype" id="3845729">nil</span><span class="op" id="3845732">,</span>&nbsp;<span class="op" id="3845734">&amp;</span><span class="ident" id="3845735">DNSError</span><span class="op" id="3845743">{</span><span class="ident" id="3845744">Err</span><span class="op" id="3845747">:</span>&nbsp;<span class="string" id="3845749">&#34;server&nbsp;misbehaving&#34;</span><span class="op" id="3845769">,</span>&nbsp;<span class="ident" id="3845771">Name</span><span class="op" id="3845775">:</span>&nbsp;<span class="ident" id="3845777">name</span><span class="op" id="3845781">,</span>&nbsp;<span class="ident" id="3845783">Server</span><span class="op" id="3845789">:</span>&nbsp;<span class="ident" id="3845791">server</span><span class="op" id="3845797">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3845800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845804">//&nbsp;Look&nbsp;for&nbsp;the&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845827">//&nbsp;Presotto&nbsp;says&nbsp;it&#39;s&nbsp;okay&nbsp;to&nbsp;assume&nbsp;that&nbsp;servers&nbsp;listed&nbsp;in</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845888">//&nbsp;/etc/resolv.conf&nbsp;are&nbsp;recursive&nbsp;resolvers.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845934">//&nbsp;We&nbsp;asked&nbsp;for&nbsp;recursion,&nbsp;so&nbsp;it&nbsp;should&nbsp;have&nbsp;included</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3845989">//&nbsp;all&nbsp;the&nbsp;answers&nbsp;we&nbsp;need&nbsp;in&nbsp;this&nbsp;one&nbsp;packet.</span><br>
<span class="lineno">85</span><span class="ident" id="3846036">Cname</span><span class="op" id="3846041">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846044">for</span>&nbsp;<span class="ident" id="3846048">cnameloop</span>&nbsp;<span class="op" id="3846058">:=</span>&nbsp;<span class="num" id="3846061">0</span><span class="op" id="3846062">;</span>&nbsp;<span class="ident" id="3846064">cnameloop</span>&nbsp;<span class="op" id="3846074">&lt;</span>&nbsp;<span class="num" id="3846076">10</span><span class="op" id="3846078">;</span>&nbsp;<span class="ident" id="3846080">cnameloop</span><span class="op" id="3846089">++</span>&nbsp;<span class="op" id="3846092">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3846096">addrs</span>&nbsp;<span class="op" id="3846102">=</span>&nbsp;<span class="ident" id="3846104">addrs</span><span class="op" id="3846109">[</span><span class="num" id="3846110">0</span><span class="op" id="3846111">:</span><span class="num" id="3846112">0</span><span class="op" id="3846113">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846117">for</span>&nbsp;<span class="ident" id="3846121">_</span><span class="op" id="3846122">,</span>&nbsp;<span class="ident" id="3846124">rr</span>&nbsp;<span class="op" id="3846127">:=</span>&nbsp;<span class="keyword" id="3846130">range</span>&nbsp;<span class="ident" id="3846136">dns</span><span class="op" id="3846139">.</span><span class="ident" id="3846140">answer</span>&nbsp;<span class="op" id="3846147">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846152">if</span>&nbsp;<span class="ident" id="3846155">_</span><span class="op" id="3846156">,</span>&nbsp;<span class="ident" id="3846158">justHeader</span>&nbsp;<span class="op" id="3846169">:=</span>&nbsp;<span class="ident" id="3846172">rr</span><span class="op" id="3846174">.</span><span class="op" id="3846175">(</span><span class="op" id="3846176">*</span><span class="ident" id="3846177">dnsRR_Header</span><span class="op" id="3846189">)</span><span class="op" id="3846190">;</span>&nbsp;<span class="ident" id="3846192">justHeader</span>&nbsp;<span class="op" id="3846203">{</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846209">//&nbsp;Corrupt&nbsp;record:&nbsp;we&nbsp;only&nbsp;have&nbsp;a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846247">//&nbsp;header.&nbsp;That&nbsp;header&nbsp;might&nbsp;say&nbsp;it&#39;s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846289">//&nbsp;of&nbsp;type&nbsp;qtype,&nbsp;but&nbsp;we&nbsp;don&#39;t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846324">//&nbsp;actually&nbsp;have&nbsp;it.&nbsp;Skip.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846355">continue</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846367">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3846372">h</span>&nbsp;<span class="op" id="3846374">:=</span>&nbsp;<span class="ident" id="3846377">rr</span><span class="op" id="3846379">.</span><span class="ident" id="3846380">Header</span><span class="op" id="3846386">(</span><span class="op" id="3846387">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846392">if</span>&nbsp;<span class="ident" id="3846395">h</span><span class="op" id="3846396">.</span><span class="ident" id="3846397">Class</span>&nbsp;<span class="op" id="3846403">==</span>&nbsp;<span class="ident" id="3846406">dnsClassINET</span>&nbsp;<span class="op" id="3846419">&amp;&amp;</span>&nbsp;<span class="ident" id="3846422">h</span><span class="op" id="3846423">.</span><span class="ident" id="3846424">Name</span>&nbsp;<span class="op" id="3846429">==</span>&nbsp;<span class="ident" id="3846432">name</span>&nbsp;<span class="op" id="3846437">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846443">switch</span>&nbsp;<span class="ident" id="3846450">h</span><span class="op" id="3846451">.</span><span class="ident" id="3846452">Rrtype</span>&nbsp;<span class="op" id="3846459">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846465">case</span>&nbsp;<span class="ident" id="3846470">qtype</span><span class="op" id="3846475">:</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3846482">addrs</span>&nbsp;<span class="op" id="3846488">=</span>&nbsp;<span class="builtinfunc" id="3846490">append</span><span class="op" id="3846496">(</span><span class="ident" id="3846497">addrs</span><span class="op" id="3846502">,</span>&nbsp;<span class="ident" id="3846504">rr</span><span class="op" id="3846506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846512">case</span>&nbsp;<span class="ident" id="3846517">dnsTypeCNAME</span><span class="op" id="3846529">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846536">//&nbsp;redirect&nbsp;to&nbsp;cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3846562">name</span>&nbsp;<span class="op" id="3846567">=</span>&nbsp;<span class="ident" id="3846569">rr</span><span class="op" id="3846571">.</span><span class="op" id="3846572">(</span><span class="op" id="3846573">*</span><span class="ident" id="3846574">dnsRR_CNAME</span><span class="op" id="3846585">)</span><span class="op" id="3846586">.</span><span class="ident" id="3846587">Cname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846598">continue</span>&nbsp;<span class="ident" id="3846607">Cname</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846617">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846630">if</span>&nbsp;<span class="builtinfunc" id="3846633">len</span><span class="op" id="3846636">(</span><span class="ident" id="3846637">addrs</span><span class="op" id="3846642">)</span>&nbsp;<span class="op" id="3846644">==</span>&nbsp;<span class="num" id="3846647">0</span>&nbsp;<span class="op" id="3846649">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846654">return</span>&nbsp;<span class="string" id="3846661">&#34;&#34;</span><span class="op" id="3846663">,</span>&nbsp;<span class="builtintype" id="3846665">nil</span><span class="op" id="3846668">,</span>&nbsp;<span class="op" id="3846670">&amp;</span><span class="ident" id="3846671">DNSError</span><span class="op" id="3846679">{</span><span class="ident" id="3846680">Err</span><span class="op" id="3846683">:</span>&nbsp;<span class="ident" id="3846685">noSuchHost</span><span class="op" id="3846695">,</span>&nbsp;<span class="ident" id="3846697">Name</span><span class="op" id="3846701">:</span>&nbsp;<span class="ident" id="3846703">name</span><span class="op" id="3846707">,</span>&nbsp;<span class="ident" id="3846709">Server</span><span class="op" id="3846715">:</span>&nbsp;<span class="ident" id="3846717">server</span><span class="op" id="3846723">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846727">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846731">return</span>&nbsp;<span class="ident" id="3846738">name</span><span class="op" id="3846742">,</span>&nbsp;<span class="ident" id="3846744">addrs</span><span class="op" id="3846749">,</span>&nbsp;<span class="builtintype" id="3846751">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846756">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846760">return</span>&nbsp;<span class="string" id="3846767">&#34;&#34;</span><span class="op" id="3846769">,</span>&nbsp;<span class="builtintype" id="3846771">nil</span><span class="op" id="3846774">,</span>&nbsp;<span class="op" id="3846776">&amp;</span><span class="ident" id="3846777">DNSError</span><span class="op" id="3846785">{</span><span class="ident" id="3846786">Err</span><span class="op" id="3846789">:</span>&nbsp;<span class="string" id="3846791">&#34;too&nbsp;many&nbsp;redirects&#34;</span><span class="op" id="3846811">,</span>&nbsp;<span class="ident" id="3846813">Name</span><span class="op" id="3846817">:</span>&nbsp;<span class="ident" id="3846819">name</span><span class="op" id="3846823">,</span>&nbsp;<span class="ident" id="3846825">Server</span><span class="op" id="3846831">:</span>&nbsp;<span class="ident" id="3846833">server</span><span class="op" id="3846839">}</span><br>
<span class="lineno">115</span><span class="op" id="3846841">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3846844">func</span>&nbsp;<span class="ident" id="3846849">isDomainName</span><span class="op" id="3846861">(</span><span class="ident" id="3846862">s</span>&nbsp;<span class="builtintype" id="3846864">string</span><span class="op" id="3846870">)</span>&nbsp;<span class="builtintype" id="3846872">bool</span>&nbsp;<span class="op" id="3846877">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3846880">//&nbsp;See&nbsp;RFC&nbsp;1035,&nbsp;RFC&nbsp;3696.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846908">if</span>&nbsp;<span class="builtinfunc" id="3846911">len</span><span class="op" id="3846914">(</span><span class="ident" id="3846915">s</span><span class="op" id="3846916">)</span>&nbsp;<span class="op" id="3846918">==</span>&nbsp;<span class="num" id="3846921">0</span>&nbsp;<span class="op" id="3846923">{</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846927">return</span>&nbsp;<span class="builtintype" id="3846934">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846941">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846944">if</span>&nbsp;<span class="builtinfunc" id="3846947">len</span><span class="op" id="3846950">(</span><span class="ident" id="3846951">s</span><span class="op" id="3846952">)</span>&nbsp;<span class="op" id="3846954">&gt;</span>&nbsp;<span class="num" id="3846956">255</span>&nbsp;<span class="op" id="3846960">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3846964">return</span>&nbsp;<span class="builtintype" id="3846971">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3846978">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3846982">last</span>&nbsp;<span class="op" id="3846987">:=</span>&nbsp;<span class="builtintype" id="3846990">byte</span><span class="op" id="3846994">(</span><span class="string" id="3846995">&#39;.&#39;</span><span class="op" id="3846998">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847001">ok</span>&nbsp;<span class="op" id="3847004">:=</span>&nbsp;<span class="builtintype" id="3847007">false</span>&nbsp;<span class="comment" id="3847013">//&nbsp;Ok&nbsp;once&nbsp;we&#39;ve&nbsp;seen&nbsp;a&nbsp;letter.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847046">partlen</span>&nbsp;<span class="op" id="3847054">:=</span>&nbsp;<span class="num" id="3847057">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847060">for</span>&nbsp;<span class="ident" id="3847064">i</span>&nbsp;<span class="op" id="3847066">:=</span>&nbsp;<span class="num" id="3847069">0</span><span class="op" id="3847070">;</span>&nbsp;<span class="ident" id="3847072">i</span>&nbsp;<span class="op" id="3847074">&lt;</span>&nbsp;<span class="builtinfunc" id="3847076">len</span><span class="op" id="3847079">(</span><span class="ident" id="3847080">s</span><span class="op" id="3847081">)</span><span class="op" id="3847082">;</span>&nbsp;<span class="ident" id="3847084">i</span><span class="op" id="3847085">++</span>&nbsp;<span class="op" id="3847088">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847092">c</span>&nbsp;<span class="op" id="3847094">:=</span>&nbsp;<span class="ident" id="3847097">s</span><span class="op" id="3847098">[</span><span class="ident" id="3847099">i</span><span class="op" id="3847100">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847104">switch</span>&nbsp;<span class="op" id="3847111">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847115">default</span><span class="op" id="3847122">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847127">return</span>&nbsp;<span class="builtintype" id="3847134">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847142">case</span>&nbsp;<span class="string" id="3847147">&#39;a&#39;</span>&nbsp;<span class="op" id="3847151">&lt;=</span>&nbsp;<span class="ident" id="3847154">c</span>&nbsp;<span class="op" id="3847156">&amp;&amp;</span>&nbsp;<span class="ident" id="3847159">c</span>&nbsp;<span class="op" id="3847161">&lt;=</span>&nbsp;<span class="string" id="3847164">&#39;z&#39;</span>&nbsp;<span class="op" id="3847168">||</span>&nbsp;<span class="string" id="3847171">&#39;A&#39;</span>&nbsp;<span class="op" id="3847175">&lt;=</span>&nbsp;<span class="ident" id="3847178">c</span>&nbsp;<span class="op" id="3847180">&amp;&amp;</span>&nbsp;<span class="ident" id="3847183">c</span>&nbsp;<span class="op" id="3847185">&lt;=</span>&nbsp;<span class="string" id="3847188">&#39;Z&#39;</span>&nbsp;<span class="op" id="3847192">||</span>&nbsp;<span class="ident" id="3847195">c</span>&nbsp;<span class="op" id="3847197">==</span>&nbsp;<span class="string" id="3847200">&#39;_&#39;</span><span class="op" id="3847203">:</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847208">ok</span>&nbsp;<span class="op" id="3847211">=</span>&nbsp;<span class="builtintype" id="3847213">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847221">partlen</span><span class="op" id="3847228">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847233">case</span>&nbsp;<span class="string" id="3847238">&#39;0&#39;</span>&nbsp;<span class="op" id="3847242">&lt;=</span>&nbsp;<span class="ident" id="3847245">c</span>&nbsp;<span class="op" id="3847247">&amp;&amp;</span>&nbsp;<span class="ident" id="3847250">c</span>&nbsp;<span class="op" id="3847252">&lt;=</span>&nbsp;<span class="string" id="3847255">&#39;9&#39;</span><span class="op" id="3847258">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847263">//&nbsp;fine</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847274">partlen</span><span class="op" id="3847281">++</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847286">case</span>&nbsp;<span class="ident" id="3847291">c</span>&nbsp;<span class="op" id="3847293">==</span>&nbsp;<span class="string" id="3847296">&#39;-&#39;</span><span class="op" id="3847299">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847304">//&nbsp;Byte&nbsp;before&nbsp;dash&nbsp;cannot&nbsp;be&nbsp;dot.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847342">if</span>&nbsp;<span class="ident" id="3847345">last</span>&nbsp;<span class="op" id="3847350">==</span>&nbsp;<span class="string" id="3847353">&#39;.&#39;</span>&nbsp;<span class="op" id="3847357">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847363">return</span>&nbsp;<span class="builtintype" id="3847370">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847379">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847384">partlen</span><span class="op" id="3847391">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847396">case</span>&nbsp;<span class="ident" id="3847401">c</span>&nbsp;<span class="op" id="3847403">==</span>&nbsp;<span class="string" id="3847406">&#39;.&#39;</span><span class="op" id="3847409">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3847414">//&nbsp;Byte&nbsp;before&nbsp;dot&nbsp;cannot&nbsp;be&nbsp;dot,&nbsp;dash.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847457">if</span>&nbsp;<span class="ident" id="3847460">last</span>&nbsp;<span class="op" id="3847465">==</span>&nbsp;<span class="string" id="3847468">&#39;.&#39;</span>&nbsp;<span class="op" id="3847472">||</span>&nbsp;<span class="ident" id="3847475">last</span>&nbsp;<span class="op" id="3847480">==</span>&nbsp;<span class="string" id="3847483">&#39;-&#39;</span>&nbsp;<span class="op" id="3847487">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847493">return</span>&nbsp;<span class="builtintype" id="3847500">false</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847509">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847514">if</span>&nbsp;<span class="ident" id="3847517">partlen</span>&nbsp;<span class="op" id="3847525">&gt;</span>&nbsp;<span class="num" id="3847527">63</span>&nbsp;<span class="op" id="3847530">||</span>&nbsp;<span class="ident" id="3847533">partlen</span>&nbsp;<span class="op" id="3847541">==</span>&nbsp;<span class="num" id="3847544">0</span>&nbsp;<span class="op" id="3847546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847552">return</span>&nbsp;<span class="builtintype" id="3847559">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847568">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847573">partlen</span>&nbsp;<span class="op" id="3847581">=</span>&nbsp;<span class="num" id="3847583">0</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847591">last</span>&nbsp;<span class="op" id="3847596">=</span>&nbsp;<span class="ident" id="3847598">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847601">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847604">if</span>&nbsp;<span class="ident" id="3847607">last</span>&nbsp;<span class="op" id="3847612">==</span>&nbsp;<span class="string" id="3847615">&#39;-&#39;</span>&nbsp;<span class="op" id="3847619">||</span>&nbsp;<span class="ident" id="3847622">partlen</span>&nbsp;<span class="op" id="3847630">&gt;</span>&nbsp;<span class="num" id="3847632">63</span>&nbsp;<span class="op" id="3847635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847639">return</span>&nbsp;<span class="builtintype" id="3847646">false</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3847653">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3847657">return</span>&nbsp;<span class="ident" id="3847664">ok</span><br>
<span class="lineno"></span><span class="op" id="3847667">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="comment" id="3847670">//&nbsp;An&nbsp;SRV&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;SRV&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3847716">type</span>&nbsp;<span class="ident" id="3847721">SRV</span>&nbsp;<span class="keyword" id="3847725">struct</span>&nbsp;<span class="op" id="3847732">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847735">Target</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3847744">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847752">Port</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3847761">uint16</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847769">Priority</span>&nbsp;<span class="builtintype" id="3847778">uint16</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3847786">Weight</span>&nbsp;&nbsp;&nbsp;<span class="builtintype" id="3847795">uint16</span><br>
<span class="lineno"></span><span class="op" id="3847802">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3847805">//&nbsp;byPriorityWeight&nbsp;sorts&nbsp;SRV&nbsp;records&nbsp;by&nbsp;ascending&nbsp;priority&nbsp;and&nbsp;weight.</span><br>
<span class="lineno"></span><span class="keyword" id="3847877">type</span>&nbsp;<span class="ident" id="3847882">byPriorityWeight</span>&nbsp;<span class="op" id="3847899">[</span><span class="op" id="3847900">]</span><span class="op" id="3847901">*</span><span class="ident" id="3847902">SRV</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3847907">func</span>&nbsp;<span class="op" id="3847912">(</span><span class="ident" id="3847913">s</span>&nbsp;<span class="ident" id="3847915">byPriorityWeight</span><span class="op" id="3847931">)</span>&nbsp;<span class="ident" id="3847933">Len</span><span class="op" id="3847936">(</span><span class="op" id="3847937">)</span>&nbsp;<span class="builtintype" id="3847939">int</span>&nbsp;<span class="op" id="3847943">{</span>&nbsp;<span class="keyword" id="3847945">return</span>&nbsp;<span class="builtinfunc" id="3847952">len</span><span class="op" id="3847955">(</span><span class="ident" id="3847956">s</span><span class="op" id="3847957">)</span>&nbsp;<span class="op" id="3847959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3847962">func</span>&nbsp;<span class="op" id="3847967">(</span><span class="ident" id="3847968">s</span>&nbsp;<span class="ident" id="3847970">byPriorityWeight</span><span class="op" id="3847986">)</span>&nbsp;<span class="ident" id="3847988">Swap</span><span class="op" id="3847992">(</span><span class="ident" id="3847993">i</span><span class="op" id="3847994">,</span>&nbsp;<span class="ident" id="3847996">j</span>&nbsp;<span class="builtintype" id="3847998">int</span><span class="op" id="3848001">)</span>&nbsp;<span class="op" id="3848003">{</span>&nbsp;<span class="ident" id="3848005">s</span><span class="op" id="3848006">[</span><span class="ident" id="3848007">i</span><span class="op" id="3848008">]</span><span class="op" id="3848009">,</span>&nbsp;<span class="ident" id="3848011">s</span><span class="op" id="3848012">[</span><span class="ident" id="3848013">j</span><span class="op" id="3848014">]</span>&nbsp;<span class="op" id="3848016">=</span>&nbsp;<span class="ident" id="3848018">s</span><span class="op" id="3848019">[</span><span class="ident" id="3848020">j</span><span class="op" id="3848021">]</span><span class="op" id="3848022">,</span>&nbsp;<span class="ident" id="3848024">s</span><span class="op" id="3848025">[</span><span class="ident" id="3848026">i</span><span class="op" id="3848027">]</span>&nbsp;<span class="op" id="3848029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">180</span><span class="keyword" id="3848032">func</span>&nbsp;<span class="op" id="3848037">(</span><span class="ident" id="3848038">s</span>&nbsp;<span class="ident" id="3848040">byPriorityWeight</span><span class="op" id="3848056">)</span>&nbsp;<span class="ident" id="3848058">Less</span><span class="op" id="3848062">(</span><span class="ident" id="3848063">i</span><span class="op" id="3848064">,</span>&nbsp;<span class="ident" id="3848066">j</span>&nbsp;<span class="builtintype" id="3848068">int</span><span class="op" id="3848071">)</span>&nbsp;<span class="builtintype" id="3848073">bool</span>&nbsp;<span class="op" id="3848078">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848081">return</span>&nbsp;<span class="ident" id="3848088">s</span><span class="op" id="3848089">[</span><span class="ident" id="3848090">i</span><span class="op" id="3848091">]</span><span class="op" id="3848092">.</span><span class="ident" id="3848093">Priority</span>&nbsp;<span class="op" id="3848102">&lt;</span>&nbsp;<span class="ident" id="3848104">s</span><span class="op" id="3848105">[</span><span class="ident" id="3848106">j</span><span class="op" id="3848107">]</span><span class="op" id="3848108">.</span><span class="ident" id="3848109">Priority</span>&nbsp;<span class="op" id="3848118">||</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848123">(</span><span class="ident" id="3848124">s</span><span class="op" id="3848125">[</span><span class="ident" id="3848126">i</span><span class="op" id="3848127">]</span><span class="op" id="3848128">.</span><span class="ident" id="3848129">Priority</span>&nbsp;<span class="op" id="3848138">==</span>&nbsp;<span class="ident" id="3848141">s</span><span class="op" id="3848142">[</span><span class="ident" id="3848143">j</span><span class="op" id="3848144">]</span><span class="op" id="3848145">.</span><span class="ident" id="3848146">Priority</span>&nbsp;<span class="op" id="3848155">&amp;&amp;</span>&nbsp;<span class="ident" id="3848158">s</span><span class="op" id="3848159">[</span><span class="ident" id="3848160">i</span><span class="op" id="3848161">]</span><span class="op" id="3848162">.</span><span class="ident" id="3848163">Weight</span>&nbsp;<span class="op" id="3848170">&lt;</span>&nbsp;<span class="ident" id="3848172">s</span><span class="op" id="3848173">[</span><span class="ident" id="3848174">j</span><span class="op" id="3848175">]</span><span class="op" id="3848176">.</span><span class="ident" id="3848177">Weight</span><span class="op" id="3848183">)</span><br>
<span class="lineno"></span><span class="op" id="3848185">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">185</span><span class="comment" id="3848188">//&nbsp;shuffleByWeight&nbsp;shuffles&nbsp;SRV&nbsp;records&nbsp;by&nbsp;weight&nbsp;using&nbsp;the&nbsp;algorithm</span><br>
<span class="lineno"></span><span class="comment" id="3848258">//&nbsp;described&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno"></span><span class="keyword" id="3848284">func</span>&nbsp;<span class="op" id="3848289">(</span><span class="ident" id="3848290">addrs</span>&nbsp;<span class="ident" id="3848296">byPriorityWeight</span><span class="op" id="3848312">)</span>&nbsp;<span class="ident" id="3848314">shuffleByWeight</span><span class="op" id="3848329">(</span><span class="op" id="3848330">)</span>&nbsp;<span class="op" id="3848332">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848335">sum</span>&nbsp;<span class="op" id="3848339">:=</span>&nbsp;<span class="num" id="3848342">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848345">for</span>&nbsp;<span class="ident" id="3848349">_</span><span class="op" id="3848350">,</span>&nbsp;<span class="ident" id="3848352">addr</span>&nbsp;<span class="op" id="3848357">:=</span>&nbsp;<span class="keyword" id="3848360">range</span>&nbsp;<span class="ident" id="3848366">addrs</span>&nbsp;<span class="op" id="3848372">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848376">sum</span>&nbsp;<span class="op" id="3848380">+=</span>&nbsp;<span class="builtintype" id="3848383">int</span><span class="op" id="3848386">(</span><span class="ident" id="3848387">addr</span><span class="op" id="3848391">.</span><span class="ident" id="3848392">Weight</span><span class="op" id="3848398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848401">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848404">for</span>&nbsp;<span class="ident" id="3848408">sum</span>&nbsp;<span class="op" id="3848412">&gt;</span>&nbsp;<span class="num" id="3848414">0</span>&nbsp;<span class="op" id="3848416">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3848419">len</span><span class="op" id="3848422">(</span><span class="ident" id="3848423">addrs</span><span class="op" id="3848428">)</span>&nbsp;<span class="op" id="3848430">&gt;</span>&nbsp;<span class="num" id="3848432">1</span>&nbsp;<span class="op" id="3848434">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848438">s</span>&nbsp;<span class="op" id="3848440">:=</span>&nbsp;<span class="num" id="3848443">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848447">n</span>&nbsp;<span class="op" id="3848449">:=</span>&nbsp;<span class="ident" id="3848452">rand</span><span class="op" id="3848456">.</span><span class="ident" id="3848457">Intn</span><span class="op" id="3848461">(</span><span class="ident" id="3848462">sum</span><span class="op" id="3848465">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848469">for</span>&nbsp;<span class="ident" id="3848473">i</span>&nbsp;<span class="op" id="3848475">:=</span>&nbsp;<span class="keyword" id="3848478">range</span>&nbsp;<span class="ident" id="3848484">addrs</span>&nbsp;<span class="op" id="3848490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848495">s</span>&nbsp;<span class="op" id="3848497">+=</span>&nbsp;<span class="builtintype" id="3848500">int</span><span class="op" id="3848503">(</span><span class="ident" id="3848504">addrs</span><span class="op" id="3848509">[</span><span class="ident" id="3848510">i</span><span class="op" id="3848511">]</span><span class="op" id="3848512">.</span><span class="ident" id="3848513">Weight</span><span class="op" id="3848519">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848524">if</span>&nbsp;<span class="ident" id="3848527">s</span>&nbsp;<span class="op" id="3848529">&gt;</span>&nbsp;<span class="ident" id="3848531">n</span>&nbsp;<span class="op" id="3848533">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848539">if</span>&nbsp;<span class="ident" id="3848542">i</span>&nbsp;<span class="op" id="3848544">&gt;</span>&nbsp;<span class="num" id="3848546">0</span>&nbsp;<span class="op" id="3848548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848555">addrs</span><span class="op" id="3848560">[</span><span class="num" id="3848561">0</span><span class="op" id="3848562">]</span><span class="op" id="3848563">,</span>&nbsp;<span class="ident" id="3848565">addrs</span><span class="op" id="3848570">[</span><span class="ident" id="3848571">i</span><span class="op" id="3848572">]</span>&nbsp;<span class="op" id="3848574">=</span>&nbsp;<span class="ident" id="3848576">addrs</span><span class="op" id="3848581">[</span><span class="ident" id="3848582">i</span><span class="op" id="3848583">]</span><span class="op" id="3848584">,</span>&nbsp;<span class="ident" id="3848586">addrs</span><span class="op" id="3848591">[</span><span class="num" id="3848592">0</span><span class="op" id="3848593">]</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848599">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848605">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848614">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848622">sum</span>&nbsp;<span class="op" id="3848626">-=</span>&nbsp;<span class="builtintype" id="3848629">int</span><span class="op" id="3848632">(</span><span class="ident" id="3848633">addrs</span><span class="op" id="3848638">[</span><span class="num" id="3848639">0</span><span class="op" id="3848640">]</span><span class="op" id="3848641">.</span><span class="ident" id="3848642">Weight</span><span class="op" id="3848648">)</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848652">addrs</span>&nbsp;<span class="op" id="3848658">=</span>&nbsp;<span class="ident" id="3848660">addrs</span><span class="op" id="3848665">[</span><span class="num" id="3848666">1</span><span class="op" id="3848667">:</span><span class="op" id="3848668">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848671">}</span><br>
<span class="lineno"></span><span class="op" id="3848673">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3848676">//&nbsp;sort&nbsp;reorders&nbsp;SRV&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;2782.</span><br>
<span class="lineno">210</span><span class="keyword" id="3848731">func</span>&nbsp;<span class="op" id="3848736">(</span><span class="ident" id="3848737">addrs</span>&nbsp;<span class="ident" id="3848743">byPriorityWeight</span><span class="op" id="3848759">)</span>&nbsp;<span class="ident" id="3848761">sort</span><span class="op" id="3848765">(</span><span class="op" id="3848766">)</span>&nbsp;<span class="op" id="3848768">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848771">sort</span><span class="op" id="3848775">.</span><span class="ident" id="3848776">Sort</span><span class="op" id="3848780">(</span><span class="ident" id="3848781">addrs</span><span class="op" id="3848786">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848789">i</span>&nbsp;<span class="op" id="3848791">:=</span>&nbsp;<span class="num" id="3848794">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848797">for</span>&nbsp;<span class="ident" id="3848801">j</span>&nbsp;<span class="op" id="3848803">:=</span>&nbsp;<span class="num" id="3848806">1</span><span class="op" id="3848807">;</span>&nbsp;<span class="ident" id="3848809">j</span>&nbsp;<span class="op" id="3848811">&lt;</span>&nbsp;<span class="builtinfunc" id="3848813">len</span><span class="op" id="3848816">(</span><span class="ident" id="3848817">addrs</span><span class="op" id="3848822">)</span><span class="op" id="3848823">;</span>&nbsp;<span class="ident" id="3848825">j</span><span class="op" id="3848826">++</span>&nbsp;<span class="op" id="3848829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3848833">if</span>&nbsp;<span class="ident" id="3848836">addrs</span><span class="op" id="3848841">[</span><span class="ident" id="3848842">i</span><span class="op" id="3848843">]</span><span class="op" id="3848844">.</span><span class="ident" id="3848845">Priority</span>&nbsp;<span class="op" id="3848854">!=</span>&nbsp;<span class="ident" id="3848857">addrs</span><span class="op" id="3848862">[</span><span class="ident" id="3848863">j</span><span class="op" id="3848864">]</span><span class="op" id="3848865">.</span><span class="ident" id="3848866">Priority</span>&nbsp;<span class="op" id="3848875">{</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848880">addrs</span><span class="op" id="3848885">[</span><span class="ident" id="3848886">i</span><span class="op" id="3848887">:</span><span class="ident" id="3848888">j</span><span class="op" id="3848889">]</span><span class="op" id="3848890">.</span><span class="ident" id="3848891">shuffleByWeight</span><span class="op" id="3848906">(</span><span class="op" id="3848907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848912">i</span>&nbsp;<span class="op" id="3848914">=</span>&nbsp;<span class="ident" id="3848916">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848920">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3848923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3848926">addrs</span><span class="op" id="3848931">[</span><span class="ident" id="3848932">i</span><span class="op" id="3848933">:</span><span class="op" id="3848934">]</span><span class="op" id="3848935">.</span><span class="ident" id="3848936">shuffleByWeight</span><span class="op" id="3848951">(</span><span class="op" id="3848952">)</span><br>
<span class="lineno">220</span><span class="op" id="3848954">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3848957">//&nbsp;An&nbsp;MX&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;MX&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3849001">type</span>&nbsp;<span class="ident" id="3849006">MX</span>&nbsp;<span class="keyword" id="3849009">struct</span>&nbsp;<span class="op" id="3849016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849019">Host</span>&nbsp;<span class="builtintype" id="3849024">string</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849032">Pref</span>&nbsp;<span class="builtintype" id="3849037">uint16</span><br>
<span class="lineno"></span><span class="op" id="3849044">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3849047">//&nbsp;byPref&nbsp;implements&nbsp;sort.Interface&nbsp;to&nbsp;sort&nbsp;MX&nbsp;records&nbsp;by&nbsp;preference</span><br>
<span class="lineno"></span><span class="keyword" id="3849116">type</span>&nbsp;<span class="ident" id="3849121">byPref</span>&nbsp;<span class="op" id="3849128">[</span><span class="op" id="3849129">]</span><span class="op" id="3849130">*</span><span class="ident" id="3849131">MX</span><br>
<span class="lineno">230</span><br>
<span class="lineno"></span><span class="keyword" id="3849135">func</span>&nbsp;<span class="op" id="3849140">(</span><span class="ident" id="3849141">s</span>&nbsp;<span class="ident" id="3849143">byPref</span><span class="op" id="3849149">)</span>&nbsp;<span class="ident" id="3849151">Len</span><span class="op" id="3849154">(</span><span class="op" id="3849155">)</span>&nbsp;<span class="builtintype" id="3849157">int</span>&nbsp;<span class="op" id="3849161">{</span>&nbsp;<span class="keyword" id="3849163">return</span>&nbsp;<span class="builtinfunc" id="3849170">len</span><span class="op" id="3849173">(</span><span class="ident" id="3849174">s</span><span class="op" id="3849175">)</span>&nbsp;<span class="op" id="3849177">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3849180">func</span>&nbsp;<span class="op" id="3849185">(</span><span class="ident" id="3849186">s</span>&nbsp;<span class="ident" id="3849188">byPref</span><span class="op" id="3849194">)</span>&nbsp;<span class="ident" id="3849196">Less</span><span class="op" id="3849200">(</span><span class="ident" id="3849201">i</span><span class="op" id="3849202">,</span>&nbsp;<span class="ident" id="3849204">j</span>&nbsp;<span class="builtintype" id="3849206">int</span><span class="op" id="3849209">)</span>&nbsp;<span class="builtintype" id="3849211">bool</span>&nbsp;<span class="op" id="3849216">{</span>&nbsp;<span class="keyword" id="3849218">return</span>&nbsp;<span class="ident" id="3849225">s</span><span class="op" id="3849226">[</span><span class="ident" id="3849227">i</span><span class="op" id="3849228">]</span><span class="op" id="3849229">.</span><span class="ident" id="3849230">Pref</span>&nbsp;<span class="op" id="3849235">&lt;</span>&nbsp;<span class="ident" id="3849237">s</span><span class="op" id="3849238">[</span><span class="ident" id="3849239">j</span><span class="op" id="3849240">]</span><span class="op" id="3849241">.</span><span class="ident" id="3849242">Pref</span>&nbsp;<span class="op" id="3849247">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="3849250">func</span>&nbsp;<span class="op" id="3849255">(</span><span class="ident" id="3849256">s</span>&nbsp;<span class="ident" id="3849258">byPref</span><span class="op" id="3849264">)</span>&nbsp;<span class="ident" id="3849266">Swap</span><span class="op" id="3849270">(</span><span class="ident" id="3849271">i</span><span class="op" id="3849272">,</span>&nbsp;<span class="ident" id="3849274">j</span>&nbsp;<span class="builtintype" id="3849276">int</span><span class="op" id="3849279">)</span>&nbsp;<span class="op" id="3849281">{</span>&nbsp;<span class="ident" id="3849283">s</span><span class="op" id="3849284">[</span><span class="ident" id="3849285">i</span><span class="op" id="3849286">]</span><span class="op" id="3849287">,</span>&nbsp;<span class="ident" id="3849289">s</span><span class="op" id="3849290">[</span><span class="ident" id="3849291">j</span><span class="op" id="3849292">]</span>&nbsp;<span class="op" id="3849294">=</span>&nbsp;<span class="ident" id="3849296">s</span><span class="op" id="3849297">[</span><span class="ident" id="3849298">j</span><span class="op" id="3849299">]</span><span class="op" id="3849300">,</span>&nbsp;<span class="ident" id="3849302">s</span><span class="op" id="3849303">[</span><span class="ident" id="3849304">i</span><span class="op" id="3849305">]</span>&nbsp;<span class="op" id="3849307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3849310">//&nbsp;sort&nbsp;reorders&nbsp;MX&nbsp;records&nbsp;as&nbsp;specified&nbsp;in&nbsp;RFC&nbsp;5321.</span><br>
<span class="lineno"></span><span class="keyword" id="3849364">func</span>&nbsp;<span class="op" id="3849369">(</span><span class="ident" id="3849370">s</span>&nbsp;<span class="ident" id="3849372">byPref</span><span class="op" id="3849378">)</span>&nbsp;<span class="ident" id="3849380">sort</span><span class="op" id="3849384">(</span><span class="op" id="3849385">)</span>&nbsp;<span class="op" id="3849387">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3849390">for</span>&nbsp;<span class="ident" id="3849394">i</span>&nbsp;<span class="op" id="3849396">:=</span>&nbsp;<span class="keyword" id="3849399">range</span>&nbsp;<span class="ident" id="3849405">s</span>&nbsp;<span class="op" id="3849407">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849411">j</span>&nbsp;<span class="op" id="3849413">:=</span>&nbsp;<span class="ident" id="3849416">rand</span><span class="op" id="3849420">.</span><span class="ident" id="3849421">Intn</span><span class="op" id="3849425">(</span><span class="ident" id="3849426">i</span>&nbsp;<span class="op" id="3849428">+</span>&nbsp;<span class="num" id="3849430">1</span><span class="op" id="3849431">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849435">s</span><span class="op" id="3849436">[</span><span class="ident" id="3849437">i</span><span class="op" id="3849438">]</span><span class="op" id="3849439">,</span>&nbsp;<span class="ident" id="3849441">s</span><span class="op" id="3849442">[</span><span class="ident" id="3849443">j</span><span class="op" id="3849444">]</span>&nbsp;<span class="op" id="3849446">=</span>&nbsp;<span class="ident" id="3849448">s</span><span class="op" id="3849449">[</span><span class="ident" id="3849450">j</span><span class="op" id="3849451">]</span><span class="op" id="3849452">,</span>&nbsp;<span class="ident" id="3849454">s</span><span class="op" id="3849455">[</span><span class="ident" id="3849456">i</span><span class="op" id="3849457">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3849460">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849463">sort</span><span class="op" id="3849467">.</span><span class="ident" id="3849468">Sort</span><span class="op" id="3849472">(</span><span class="ident" id="3849473">s</span><span class="op" id="3849474">)</span><br>
<span class="lineno"></span><span class="op" id="3849476">}</span><br>
<span class="lineno">245</span><br>
<span class="lineno"></span><span class="comment" id="3849479">//&nbsp;An&nbsp;NS&nbsp;represents&nbsp;a&nbsp;single&nbsp;DNS&nbsp;NS&nbsp;record.</span><br>
<span class="lineno"></span><span class="keyword" id="3849523">type</span>&nbsp;<span class="ident" id="3849528">NS</span>&nbsp;<span class="keyword" id="3849531">struct</span>&nbsp;<span class="op" id="3849538">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3849541">Host</span>&nbsp;<span class="builtintype" id="3849546">string</span><br>
<span class="lineno"></span><span class="op" id="3849553">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
