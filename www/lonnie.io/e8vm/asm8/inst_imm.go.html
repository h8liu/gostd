<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="keyword" id="5331871">package</span>&nbsp;<span class="ident" id="5331879">asm8</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5331885">import</span>&nbsp;<span class="op" id="5331892">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5331895">&#34;strconv&#34;</span><br>
<span class="lineno">5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5331907">&#34;lonnie.io/e8vm/lex8&#34;</span><br>
<span class="lineno"></span><span class="op" id="5331929">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5331932">var</span>&nbsp;<span class="op" id="5331936">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5331939">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5331966">opImsMap</span>&nbsp;<span class="op" id="5331975">=</span>&nbsp;<span class="keyword" id="5331977">map</span><span class="op" id="5331980">[</span><span class="builtintype" id="5331981">string</span><span class="op" id="5331987">]</span><span class="builtintype" id="5331988">uint32</span><span class="op" id="5331994">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5331998">&#34;addi&#34;</span><span class="op" id="5332004">:</span>&nbsp;<span class="num" id="5332006">1</span><span class="op" id="5332007">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332011">&#34;slti&#34;</span><span class="op" id="5332017">:</span>&nbsp;<span class="num" id="5332019">2</span><span class="op" id="5332020">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332023">}</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332027">opMemMap</span>&nbsp;<span class="op" id="5332036">=</span>&nbsp;<span class="keyword" id="5332038">map</span><span class="op" id="5332041">[</span><span class="builtintype" id="5332042">string</span><span class="op" id="5332048">]</span><span class="builtintype" id="5332049">uint32</span><span class="op" id="5332055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332059">&#34;lw&#34;</span><span class="op" id="5332063">:</span>&nbsp;&nbsp;<span class="num" id="5332066">6</span><span class="op" id="5332067">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332071">&#34;lb&#34;</span><span class="op" id="5332075">:</span>&nbsp;&nbsp;<span class="num" id="5332078">7</span><span class="op" id="5332079">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332083">&#34;lbu&#34;</span><span class="op" id="5332088">:</span>&nbsp;<span class="num" id="5332090">8</span><span class="op" id="5332091">,</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332095">&#34;sw&#34;</span><span class="op" id="5332099">:</span>&nbsp;&nbsp;<span class="num" id="5332102">9</span><span class="op" id="5332103">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332107">&#34;sb&#34;</span><span class="op" id="5332111">:</span>&nbsp;&nbsp;<span class="num" id="5332114">10</span><span class="op" id="5332116">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332119">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332123">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332152">opImuMap</span>&nbsp;<span class="op" id="5332161">=</span>&nbsp;<span class="keyword" id="5332163">map</span><span class="op" id="5332166">[</span><span class="builtintype" id="5332167">string</span><span class="op" id="5332173">]</span><span class="builtintype" id="5332174">uint32</span><span class="op" id="5332180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332184">&#34;andi&#34;</span><span class="op" id="5332190">:</span>&nbsp;<span class="num" id="5332192">3</span><span class="op" id="5332193">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332197">&#34;ori&#34;</span><span class="op" id="5332202">:</span>&nbsp;&nbsp;<span class="num" id="5332205">4</span><span class="op" id="5332206">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332209">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5332213">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332248">opImmMap</span>&nbsp;<span class="op" id="5332257">=</span>&nbsp;<span class="keyword" id="5332259">map</span><span class="op" id="5332262">[</span><span class="builtintype" id="5332263">string</span><span class="op" id="5332269">]</span><span class="builtintype" id="5332270">uint32</span><span class="op" id="5332276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5332280">&#34;lui&#34;</span><span class="op" id="5332285">:</span>&nbsp;<span class="num" id="5332287">5</span><span class="op" id="5332288">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332291">}</span><br>
<span class="lineno"></span><span class="op" id="5332293">)</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="comment" id="5332296">//&nbsp;parseImu&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5332344">func</span>&nbsp;<span class="ident" id="5332349">parseImu</span><span class="op" id="5332357">(</span><span class="ident" id="5332358">p</span>&nbsp;<span class="op" id="5332360">*</span><span class="ident" id="5332361"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5332367">,</span>&nbsp;<span class="ident" id="5332369">op</span>&nbsp;<span class="op" id="5332372">*</span><span class="ident" id="5332373"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5332377">.</span><span class="ident" id="5332378">Token</span><span class="op" id="5332383">)</span>&nbsp;<span class="builtintype" id="5332385">uint32</span>&nbsp;<span class="op" id="5332392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332395">ret</span><span class="op" id="5332398">,</span>&nbsp;<span class="ident" id="5332400">e</span>&nbsp;<span class="op" id="5332402">:=</span>&nbsp;<span class="ident" id="5332405"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331895">strconv</a></span><span class="op" id="5332412">.</span><span class="ident" id="5332413">ParseUint</span><span class="op" id="5332422">(</span><span class="ident" id="5332423"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332369">op</a></span><span class="op" id="5332425">.</span><span class="ident" id="5332426">Lit</span><span class="op" id="5332429">,</span>&nbsp;<span class="num" id="5332431">0</span><span class="op" id="5332432">,</span>&nbsp;<span class="num" id="5332434">32</span><span class="op" id="5332436">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332439">if</span>&nbsp;<span class="ident" id="5332442"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332400">e</a></span>&nbsp;<span class="op" id="5332444">!=</span>&nbsp;<span class="ident" id="5332447">nil</span>&nbsp;<span class="op" id="5332451">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332455"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332358">p</a></span><span class="op" id="5332456">.</span><span class="ident" id="5332457">err</span><span class="op" id="5332460">(</span><span class="ident" id="5332461"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332369">op</a></span><span class="op" id="5332463">.</span><span class="ident" id="5332464">Pos</span><span class="op" id="5332467">,</span>&nbsp;<span class="string" id="5332469">&#34;invalid&nbsp;unsigned&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5332504">,</span>&nbsp;<span class="ident" id="5332506"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332369">op</a></span><span class="op" id="5332508">.</span><span class="ident" id="5332509">Lit</span><span class="op" id="5332512">,</span>&nbsp;<span class="ident" id="5332514"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332400">e</a></span><span class="op" id="5332515">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332519">return</span>&nbsp;<span class="num" id="5332526">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332529">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332533">if</span>&nbsp;<span class="op" id="5332536">(</span><span class="ident" id="5332537"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332395">ret</a></span>&nbsp;<span class="op" id="5332541">&amp;</span>&nbsp;<span class="num" id="5332543">0xffff</span><span class="op" id="5332549">)</span>&nbsp;<span class="op" id="5332551">!=</span>&nbsp;<span class="ident" id="5332554"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332395">ret</a></span>&nbsp;<span class="op" id="5332558">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332562"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332358">p</a></span><span class="op" id="5332563">.</span><span class="ident" id="5332564">err</span><span class="op" id="5332567">(</span><span class="ident" id="5332568"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332369">op</a></span><span class="op" id="5332570">.</span><span class="ident" id="5332571">Pos</span><span class="op" id="5332574">,</span>&nbsp;<span class="string" id="5332576">&#34;immediate&nbsp;too&nbsp;large:&nbsp;%s&#34;</span><span class="op" id="5332601">,</span>&nbsp;<span class="ident" id="5332603"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332369">op</a></span><span class="op" id="5332605">.</span><span class="ident" id="5332606">Lit</span><span class="op" id="5332609">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332613">return</span>&nbsp;<span class="num" id="5332620">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332623">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332627">return</span>&nbsp;<span class="builtintype" id="5332634">uint32</span><span class="op" id="5332640">(</span><span class="ident" id="5332641"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332395">ret</a></span><span class="op" id="5332644">)</span><br>
<span class="lineno">50</span><span class="op" id="5332646">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5332649">//&nbsp;parseIms&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5332697">func</span>&nbsp;<span class="ident" id="5332702">parseIms</span><span class="op" id="5332710">(</span><span class="ident" id="5332711">p</span>&nbsp;<span class="op" id="5332713">*</span><span class="ident" id="5332714"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5332720">,</span>&nbsp;<span class="ident" id="5332722">op</span>&nbsp;<span class="op" id="5332725">*</span><span class="ident" id="5332726"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5332730">.</span><span class="ident" id="5332731">Token</span><span class="op" id="5332736">)</span>&nbsp;<span class="builtintype" id="5332738">uint32</span>&nbsp;<span class="op" id="5332745">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332748">ret</span><span class="op" id="5332751">,</span>&nbsp;<span class="ident" id="5332753">e</span>&nbsp;<span class="op" id="5332755">:=</span>&nbsp;<span class="ident" id="5332758"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331895">strconv</a></span><span class="op" id="5332765">.</span><span class="ident" id="5332766">ParseInt</span><span class="op" id="5332774">(</span><span class="ident" id="5332775"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332722">op</a></span><span class="op" id="5332777">.</span><span class="ident" id="5332778">Lit</span><span class="op" id="5332781">,</span>&nbsp;<span class="num" id="5332783">0</span><span class="op" id="5332784">,</span>&nbsp;<span class="num" id="5332786">32</span><span class="op" id="5332788">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332791">if</span>&nbsp;<span class="ident" id="5332794"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332753">e</a></span>&nbsp;<span class="op" id="5332796">!=</span>&nbsp;<span class="ident" id="5332799">nil</span>&nbsp;<span class="op" id="5332803">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332807"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332711">p</a></span><span class="op" id="5332808">.</span><span class="ident" id="5332809">err</span><span class="op" id="5332812">(</span><span class="ident" id="5332813"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332722">op</a></span><span class="op" id="5332815">.</span><span class="ident" id="5332816">Pos</span><span class="op" id="5332819">,</span>&nbsp;<span class="string" id="5332821">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5332854">,</span>&nbsp;<span class="ident" id="5332856"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332722">op</a></span><span class="op" id="5332858">.</span><span class="ident" id="5332859">Lit</span><span class="op" id="5332862">,</span>&nbsp;<span class="ident" id="5332864"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332753">e</a></span><span class="op" id="5332865">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332869">return</span>&nbsp;<span class="num" id="5332876">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332879">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332883">if</span>&nbsp;<span class="ident" id="5332886"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332748">ret</a></span>&nbsp;<span class="op" id="5332890">&gt;</span>&nbsp;<span class="num" id="5332892">0x7fff</span>&nbsp;<span class="op" id="5332899">||</span>&nbsp;<span class="ident" id="5332902"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332748">ret</a></span>&nbsp;<span class="op" id="5332906">&lt;</span>&nbsp;<span class="op" id="5332908">-</span><span class="num" id="5332909">0x8000</span>&nbsp;<span class="op" id="5332916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5332920"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332711">p</a></span><span class="op" id="5332921">.</span><span class="ident" id="5332922">err</span><span class="op" id="5332925">(</span><span class="ident" id="5332926"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332722">op</a></span><span class="op" id="5332928">.</span><span class="ident" id="5332929">Pos</span><span class="op" id="5332932">,</span>&nbsp;<span class="string" id="5332934">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5332969">,</span>&nbsp;<span class="ident" id="5332971"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332722">op</a></span><span class="op" id="5332973">.</span><span class="ident" id="5332974">Lit</span><span class="op" id="5332977">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332981">return</span>&nbsp;<span class="num" id="5332988">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5332991">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5332995">return</span>&nbsp;<span class="builtintype" id="5333002">uint32</span><span class="op" id="5333008">(</span><span class="ident" id="5333009"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332748">ret</a></span><span class="op" id="5333012">)</span>&nbsp;<span class="op" id="5333014">&amp;</span>&nbsp;<span class="num" id="5333016">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5333023">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5333026">//&nbsp;parseImm&nbsp;parses&nbsp;an&nbsp;unsigned&nbsp;16-bit&nbsp;immediate</span><br>
<span class="lineno"></span><span class="keyword" id="5333074">func</span>&nbsp;<span class="ident" id="5333079">parseImm</span><span class="op" id="5333087">(</span><span class="ident" id="5333088">p</span>&nbsp;<span class="op" id="5333090">*</span><span class="ident" id="5333091"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5333097">,</span>&nbsp;<span class="ident" id="5333099">op</span>&nbsp;<span class="op" id="5333102">*</span><span class="ident" id="5333103"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5333107">.</span><span class="ident" id="5333108">Token</span><span class="op" id="5333113">)</span>&nbsp;<span class="builtintype" id="5333115">uint32</span>&nbsp;<span class="op" id="5333122">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333125">ret</span><span class="op" id="5333128">,</span>&nbsp;<span class="ident" id="5333130">e</span>&nbsp;<span class="op" id="5333132">:=</span>&nbsp;<span class="ident" id="5333135"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331895">strconv</a></span><span class="op" id="5333142">.</span><span class="ident" id="5333143">ParseInt</span><span class="op" id="5333151">(</span><span class="ident" id="5333152"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333099">op</a></span><span class="op" id="5333154">.</span><span class="ident" id="5333155">Lit</span><span class="op" id="5333158">,</span>&nbsp;<span class="num" id="5333160">0</span><span class="op" id="5333161">,</span>&nbsp;<span class="num" id="5333163">32</span><span class="op" id="5333165">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333168">if</span>&nbsp;<span class="ident" id="5333171"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333130">e</a></span>&nbsp;<span class="op" id="5333173">!=</span>&nbsp;<span class="ident" id="5333176">nil</span>&nbsp;<span class="op" id="5333180">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333184"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333088">p</a></span><span class="op" id="5333185">.</span><span class="ident" id="5333186">err</span><span class="op" id="5333189">(</span><span class="ident" id="5333190"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333099">op</a></span><span class="op" id="5333192">.</span><span class="ident" id="5333193">Pos</span><span class="op" id="5333196">,</span>&nbsp;<span class="string" id="5333198">&#34;invalid&nbsp;signed&nbsp;immediate&nbsp;%q:&nbsp;%s&#34;</span><span class="op" id="5333231">,</span>&nbsp;<span class="ident" id="5333233"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333099">op</a></span><span class="op" id="5333235">.</span><span class="ident" id="5333236">Lit</span><span class="op" id="5333239">,</span>&nbsp;<span class="ident" id="5333241"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333130">e</a></span><span class="op" id="5333242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333246">return</span>&nbsp;<span class="num" id="5333253">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333256">}</span><br>
<span class="lineno">75</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333260">if</span>&nbsp;<span class="ident" id="5333263"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333125">ret</a></span>&nbsp;<span class="op" id="5333267">&gt;</span>&nbsp;<span class="num" id="5333269">0xffff</span>&nbsp;<span class="op" id="5333276">||</span>&nbsp;<span class="ident" id="5333279"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333125">ret</a></span>&nbsp;<span class="op" id="5333283">&lt;</span>&nbsp;<span class="op" id="5333285">-</span><span class="num" id="5333286">0x8000</span>&nbsp;<span class="op" id="5333293">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333297"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333088">p</a></span><span class="op" id="5333298">.</span><span class="ident" id="5333299">err</span><span class="op" id="5333302">(</span><span class="ident" id="5333303"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333099">op</a></span><span class="op" id="5333305">.</span><span class="ident" id="5333306">Pos</span><span class="op" id="5333309">,</span>&nbsp;<span class="string" id="5333311">&#34;immediate&nbsp;out&nbsp;of&nbsp;16-bit&nbsp;range:&nbsp;%s&#34;</span><span class="op" id="5333346">,</span>&nbsp;<span class="ident" id="5333348"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333099">op</a></span><span class="op" id="5333350">.</span><span class="ident" id="5333351">Lit</span><span class="op" id="5333354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333358">return</span>&nbsp;<span class="num" id="5333365">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333368">}</span><br>
<span class="lineno">80</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333372">return</span>&nbsp;<span class="builtintype" id="5333379">uint32</span><span class="op" id="5333385">(</span><span class="ident" id="5333386"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333125">ret</a></span><span class="op" id="5333389">)</span>&nbsp;<span class="op" id="5333391">&amp;</span>&nbsp;<span class="num" id="5333393">0xffff</span><br>
<span class="lineno"></span><span class="op" id="5333400">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5333403">func</span>&nbsp;<span class="ident" id="5333408">makeInstImm</span><span class="op" id="5333419">(</span><span class="ident" id="5333420">op</span><span class="op" id="5333422">,</span>&nbsp;<span class="ident" id="5333424">d</span><span class="op" id="5333425">,</span>&nbsp;<span class="ident" id="5333427">s</span><span class="op" id="5333428">,</span>&nbsp;<span class="ident" id="5333430">im</span>&nbsp;<span class="builtintype" id="5333433">uint32</span><span class="op" id="5333439">)</span>&nbsp;<span class="op" id="5333441">*</span><span class="ident" id="5333442"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span>&nbsp;<span class="op" id="5333447">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333450">ret</span>&nbsp;<span class="op" id="5333454">:=</span>&nbsp;<span class="builtintype" id="5333457">uint32</span><span class="op" id="5333463">(</span><span class="num" id="5333464">0</span><span class="op" id="5333465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333468"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333450">ret</a></span>&nbsp;<span class="op" id="5333472">|=</span>&nbsp;<span class="op" id="5333475">(</span><span class="ident" id="5333476"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333420">op</a></span>&nbsp;<span class="op" id="5333479">&amp;</span>&nbsp;<span class="num" id="5333481">0xff</span><span class="op" id="5333485">)</span>&nbsp;<span class="op" id="5333487">&lt;&lt;</span>&nbsp;<span class="num" id="5333490">24</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333494"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333450">ret</a></span>&nbsp;<span class="op" id="5333498">|=</span>&nbsp;<span class="op" id="5333501">(</span><span class="ident" id="5333502"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333424">d</a></span>&nbsp;<span class="op" id="5333504">&amp;</span>&nbsp;<span class="num" id="5333506">0x7</span><span class="op" id="5333509">)</span>&nbsp;<span class="op" id="5333511">&lt;&lt;</span>&nbsp;<span class="num" id="5333514">21</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333518"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333450">ret</a></span>&nbsp;<span class="op" id="5333522">|=</span>&nbsp;<span class="op" id="5333525">(</span><span class="ident" id="5333526"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333427">s</a></span>&nbsp;<span class="op" id="5333528">&amp;</span>&nbsp;<span class="num" id="5333530">0x7</span><span class="op" id="5333533">)</span>&nbsp;<span class="op" id="5333535">&lt;&lt;</span>&nbsp;<span class="num" id="5333538">18</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333542"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333450">ret</a></span>&nbsp;<span class="op" id="5333546">|=</span>&nbsp;<span class="op" id="5333549">(</span><span class="ident" id="5333550"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333430">im</a></span>&nbsp;<span class="op" id="5333553">&amp;</span>&nbsp;<span class="num" id="5333555">0xffff</span><span class="op" id="5333561">)</span><br>
<span class="lineno">90</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333565">return</span>&nbsp;<span class="op" id="5333572">&amp;</span><span class="ident" id="5333573"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5333577">{</span><span class="ident" id="5333578">inst</span><span class="op" id="5333582">:</span>&nbsp;<span class="ident" id="5333584"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333450">ret</a></span><span class="op" id="5333587">}</span><br>
<span class="lineno"></span><span class="op" id="5333589">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5333592">func</span>&nbsp;<span class="ident" id="5333597">parseInstImm</span><span class="op" id="5333609">(</span><span class="ident" id="5333610">p</span>&nbsp;<span class="op" id="5333612">*</span><span class="ident" id="5333613"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5333619">,</span>&nbsp;<span class="ident" id="5333621">ops</span>&nbsp;<span class="op" id="5333625">[</span><span class="op" id="5333626">]</span><span class="op" id="5333627">*</span><span class="ident" id="5333628"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5333632">.</span><span class="ident" id="5333633">Token</span><span class="op" id="5333638">)</span>&nbsp;<span class="op" id="5333640">(</span><span class="op" id="5333641">*</span><span class="ident" id="5333642"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330311">inst</a></span><span class="op" id="5333646">,</span>&nbsp;<span class="builtintype" id="5333648">bool</span><span class="op" id="5333652">)</span>&nbsp;<span class="op" id="5333654">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333657">op0</span>&nbsp;<span class="op" id="5333661">:=</span>&nbsp;<span class="ident" id="5333664"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333621">ops</a></span><span class="op" id="5333667">[</span><span class="num" id="5333668">0</span><span class="op" id="5333669">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333672">opName</span>&nbsp;<span class="op" id="5333679">:=</span>&nbsp;<span class="ident" id="5333682"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333657">op0</a></span><span class="op" id="5333685">.</span><span class="ident" id="5333686">Lit</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333691">args</span>&nbsp;<span class="op" id="5333696">:=</span>&nbsp;<span class="ident" id="5333699"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333621">ops</a></span><span class="op" id="5333702">[</span><span class="num" id="5333703">1</span><span class="op" id="5333704">:</span><span class="op" id="5333705">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333709">var</span>&nbsp;<span class="op" id="5333713">(</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333717">op</span><span class="op" id="5333719">,</span>&nbsp;<span class="ident" id="5333721">d</span><span class="op" id="5333722">,</span>&nbsp;<span class="ident" id="5333724">s</span><span class="op" id="5333725">,</span>&nbsp;<span class="ident" id="5333727">im</span>&nbsp;<span class="builtintype" id="5333730">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333739">pack</span><span class="op" id="5333743">,</span>&nbsp;<span class="ident" id="5333745">sym</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5333752">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333761">fill</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="5333774">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333780">symTok</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="5333793">*</span><span class="ident" id="5333794"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5333798">.</span><span class="ident" id="5333799">Token</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333806">)</span><br>
<span class="lineno">105</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333810">argCount</span>&nbsp;<span class="op" id="5333819">:=</span>&nbsp;<span class="keyword" id="5333822">func</span><span class="op" id="5333826">(</span><span class="ident" id="5333827">n</span>&nbsp;<span class="builtintype" id="5333829">int</span><span class="op" id="5333832">)</span>&nbsp;<span class="builtintype" id="5333834">bool</span>&nbsp;<span class="op" id="5333839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333843">if</span>&nbsp;<span class="op" id="5333846">!</span><span class="ident" id="5333847"><a href="/lonnie.io/e8vm/asm8/parse_arg.go.html#5345685">argCount</a></span><span class="op" id="5333855">(</span><span class="ident" id="5333856"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5333857">,</span>&nbsp;<span class="ident" id="5333859"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333621">ops</a></span><span class="op" id="5333862">,</span>&nbsp;<span class="ident" id="5333864"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333827">n</a></span><span class="op" id="5333865">)</span>&nbsp;<span class="op" id="5333867">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333872">return</span>&nbsp;<span class="ident" id="5333879">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333887">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333891">if</span>&nbsp;<span class="ident" id="5333894"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333827">n</a></span>&nbsp;<span class="op" id="5333896">&gt;=</span>&nbsp;<span class="num" id="5333899">1</span>&nbsp;<span class="op" id="5333901">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333906"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333721">d</a></span>&nbsp;<span class="op" id="5333908">=</span>&nbsp;<span class="ident" id="5333910"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5333918">(</span><span class="ident" id="5333919"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5333920">,</span>&nbsp;<span class="ident" id="5333922"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5333926">[</span><span class="num" id="5333927">0</span><span class="op" id="5333928">]</span><span class="op" id="5333929">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5333937">return</span>&nbsp;<span class="ident" id="5333944">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5333950">}</span><br>
<span class="lineno">115</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5333954">parseSym</span>&nbsp;<span class="op" id="5333963">:=</span>&nbsp;<span class="keyword" id="5333966">func</span><span class="op" id="5333970">(</span><span class="ident" id="5333971">t</span>&nbsp;<span class="op" id="5333973">*</span><span class="ident" id="5333974"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5333978">.</span><span class="ident" id="5333979">Token</span><span class="op" id="5333984">,</span>&nbsp;<span class="ident" id="5333986">f</span>&nbsp;<span class="keyword" id="5333988">func</span><span class="op" id="5333992">(</span><span class="op" id="5333993">*</span><span class="ident" id="5333994"><a href="/lonnie.io/e8vm/asm8/parser.go.html#5352831">parser</a></span><span class="op" id="5334000">,</span>&nbsp;<span class="op" id="5334002">*</span><span class="ident" id="5334003"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331907">lex8</a></span><span class="op" id="5334007">.</span><span class="ident" id="5334008">Token</span><span class="op" id="5334013">)</span>&nbsp;<span class="builtintype" id="5334015">uint32</span><span class="op" id="5334021">)</span>&nbsp;<span class="op" id="5334023">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334027">if</span>&nbsp;<span class="ident" id="5334030"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#5349617">isSymbol</a></span><span class="op" id="5334038">(</span><span class="ident" id="5334039"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333971">t</a></span><span class="op" id="5334040">.</span><span class="ident" id="5334041">Lit</span><span class="op" id="5334044">)</span>&nbsp;<span class="op" id="5334046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334051"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333739">pack</a></span><span class="op" id="5334055">,</span>&nbsp;<span class="ident" id="5334057"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333745">sym</a></span>&nbsp;<span class="op" id="5334061">=</span>&nbsp;<span class="ident" id="5334063"><a href="/lonnie.io/e8vm/asm8/parse_sym.go.html#5350356">parseSym</a></span><span class="op" id="5334071">(</span><span class="ident" id="5334072"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334073">,</span>&nbsp;<span class="ident" id="5334075"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333971">t</a></span><span class="op" id="5334076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334081"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333761">fill</a></span>&nbsp;<span class="op" id="5334086">=</span>&nbsp;<span class="ident" id="5334088"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330455">fillLow</a></span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334099"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333780">symTok</a></span>&nbsp;<span class="op" id="5334106">=</span>&nbsp;<span class="ident" id="5334108"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333971">t</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334112">}</span>&nbsp;<span class="keyword" id="5334114">else</span>&nbsp;<span class="op" id="5334119">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334124"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333727">im</a></span>&nbsp;<span class="op" id="5334127">=</span>&nbsp;<span class="ident" id="5334129"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333986">f</a></span><span class="op" id="5334130">(</span><span class="ident" id="5334131"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334132">,</span>&nbsp;<span class="ident" id="5334134"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333971">t</a></span><span class="op" id="5334135">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334142">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334146">var</span>&nbsp;<span class="ident" id="5334150">found</span>&nbsp;<span class="builtintype" id="5334156">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334162">if</span>&nbsp;<span class="ident" id="5334165"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333717">op</a></span><span class="op" id="5334167">,</span>&nbsp;<span class="ident" id="5334169"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334175">=</span>&nbsp;<span class="ident" id="5334177"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5331966">opImsMap</a></span><span class="op" id="5334185">[</span><span class="ident" id="5334186"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333672">opName</a></span><span class="op" id="5334192">]</span><span class="op" id="5334193">;</span>&nbsp;<span class="ident" id="5334195"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334205">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(signed)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334233">if</span>&nbsp;<span class="ident" id="5334236"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333810">argCount</a></span><span class="op" id="5334244">(</span><span class="num" id="5334245">3</span><span class="op" id="5334246">)</span>&nbsp;<span class="op" id="5334248">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334253"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333724">s</a></span>&nbsp;<span class="op" id="5334255">=</span>&nbsp;<span class="ident" id="5334257"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5334265">(</span><span class="ident" id="5334266"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334267">,</span>&nbsp;<span class="ident" id="5334269"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334273">[</span><span class="num" id="5334274">1</span><span class="op" id="5334275">]</span><span class="op" id="5334276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334281"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333954">parseSym</a></span><span class="op" id="5334289">(</span><span class="ident" id="5334290"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334294">[</span><span class="num" id="5334295">2</span><span class="op" id="5334296">]</span><span class="op" id="5334297">,</span>&nbsp;<span class="ident" id="5334299"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332702">parseIms</a></span><span class="op" id="5334307">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334311">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334314">}</span>&nbsp;<span class="keyword" id="5334316">else</span>&nbsp;<span class="keyword" id="5334321">if</span>&nbsp;<span class="ident" id="5334324"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333717">op</a></span><span class="op" id="5334326">,</span>&nbsp;<span class="ident" id="5334328"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334334">=</span>&nbsp;<span class="ident" id="5334336"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332027">opMemMap</a></span><span class="op" id="5334344">[</span><span class="ident" id="5334345"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333672">opName</a></span><span class="op" id="5334351">]</span><span class="op" id="5334352">;</span>&nbsp;<span class="ident" id="5334354"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334360">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334364">if</span>&nbsp;<span class="builtinfunc" id="5334367">len</span><span class="op" id="5334370">(</span><span class="ident" id="5334371"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334375">)</span>&nbsp;<span class="op" id="5334377">==</span>&nbsp;<span class="num" id="5334380">2</span>&nbsp;<span class="op" id="5334382">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334387">//&nbsp;mem&nbsp;op&nbsp;can&nbsp;omit&nbsp;the&nbsp;offset&nbsp;if&nbsp;it&nbsp;is&nbsp;0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334431"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333721">d</a></span>&nbsp;<span class="op" id="5334433">=</span>&nbsp;<span class="ident" id="5334435"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5334443">(</span><span class="ident" id="5334444"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334445">,</span>&nbsp;<span class="ident" id="5334447"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334451">[</span><span class="num" id="5334452">0</span><span class="op" id="5334453">]</span><span class="op" id="5334454">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334459"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333724">s</a></span>&nbsp;<span class="op" id="5334461">=</span>&nbsp;<span class="ident" id="5334463"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5334471">(</span><span class="ident" id="5334472"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334473">,</span>&nbsp;<span class="ident" id="5334475"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334479">[</span><span class="num" id="5334480">1</span><span class="op" id="5334481">]</span><span class="op" id="5334482">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334486">}</span>&nbsp;<span class="keyword" id="5334488">else</span>&nbsp;<span class="keyword" id="5334493">if</span>&nbsp;<span class="ident" id="5334496"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333810">argCount</a></span><span class="op" id="5334504">(</span><span class="num" id="5334505">3</span><span class="op" id="5334506">)</span>&nbsp;<span class="op" id="5334508">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334513"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333724">s</a></span>&nbsp;<span class="op" id="5334515">=</span>&nbsp;<span class="ident" id="5334517"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5334525">(</span><span class="ident" id="5334526"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334527">,</span>&nbsp;<span class="ident" id="5334529"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334533">[</span><span class="num" id="5334534">1</span><span class="op" id="5334535">]</span><span class="op" id="5334536">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334541"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333954">parseSym</a></span><span class="op" id="5334549">(</span><span class="ident" id="5334550"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334554">[</span><span class="num" id="5334555">2</span><span class="op" id="5334556">]</span><span class="op" id="5334557">,</span>&nbsp;<span class="ident" id="5334559"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332702">parseIms</a></span><span class="op" id="5334567">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334571">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334574">}</span>&nbsp;<span class="keyword" id="5334576">else</span>&nbsp;<span class="keyword" id="5334581">if</span>&nbsp;<span class="ident" id="5334584"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333717">op</a></span><span class="op" id="5334586">,</span>&nbsp;<span class="ident" id="5334588"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334594">=</span>&nbsp;<span class="ident" id="5334596"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332152">opImuMap</a></span><span class="op" id="5334604">[</span><span class="ident" id="5334605"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333672">opName</a></span><span class="op" id="5334611">]</span><span class="op" id="5334612">;</span>&nbsp;<span class="ident" id="5334614"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334624">//&nbsp;op&nbsp;reg&nbsp;reg&nbsp;imm(unsigned)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334654">if</span>&nbsp;<span class="ident" id="5334657"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333810">argCount</a></span><span class="op" id="5334665">(</span><span class="num" id="5334666">3</span><span class="op" id="5334667">)</span>&nbsp;<span class="op" id="5334669">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334674"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333724">s</a></span>&nbsp;<span class="op" id="5334676">=</span>&nbsp;<span class="ident" id="5334678"><a href="/lonnie.io/e8vm/asm8/parse_reg.go.html#5349323">parseReg</a></span><span class="op" id="5334686">(</span><span class="ident" id="5334687"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333610">p</a></span><span class="op" id="5334688">,</span>&nbsp;<span class="ident" id="5334690"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334694">[</span><span class="num" id="5334695">1</span><span class="op" id="5334696">]</span><span class="op" id="5334697">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334702"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333954">parseSym</a></span><span class="op" id="5334710">(</span><span class="ident" id="5334711"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334715">[</span><span class="num" id="5334716">2</span><span class="op" id="5334717">]</span><span class="op" id="5334718">,</span>&nbsp;<span class="ident" id="5334720"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332349">parseImu</a></span><span class="op" id="5334728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334732">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334735">}</span>&nbsp;<span class="keyword" id="5334737">else</span>&nbsp;<span class="keyword" id="5334742">if</span>&nbsp;<span class="ident" id="5334745"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333717">op</a></span><span class="op" id="5334747">,</span>&nbsp;<span class="ident" id="5334749"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334755">=</span>&nbsp;<span class="ident" id="5334757"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5332248">opImmMap</a></span><span class="op" id="5334765">[</span><span class="ident" id="5334766"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333672">opName</a></span><span class="op" id="5334772">]</span><span class="op" id="5334773">;</span>&nbsp;<span class="ident" id="5334775"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334150">found</a></span>&nbsp;<span class="op" id="5334781">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5334785">//&nbsp;op&nbsp;reg&nbsp;imm(signed&nbsp;or&nbsp;unsigned)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334821">if</span>&nbsp;<span class="ident" id="5334824"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333810">argCount</a></span><span class="op" id="5334832">(</span><span class="num" id="5334833">2</span><span class="op" id="5334834">)</span>&nbsp;<span class="op" id="5334836">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334841"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333954">parseSym</a></span><span class="op" id="5334849">(</span><span class="ident" id="5334850"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333691">args</a></span><span class="op" id="5334854">[</span><span class="num" id="5334855">1</span><span class="op" id="5334856">]</span><span class="op" id="5334857">,</span>&nbsp;<span class="ident" id="5334859"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333079">parseImm</a></span><span class="op" id="5334867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334875">if</span>&nbsp;<span class="ident" id="5334878"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333672">opName</a></span>&nbsp;<span class="op" id="5334885">==</span>&nbsp;<span class="string" id="5334888">&#34;lui&#34;</span>&nbsp;<span class="op" id="5334894">&amp;&amp;</span>&nbsp;<span class="ident" id="5334897"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333761">fill</a></span>&nbsp;<span class="op" id="5334902">==</span>&nbsp;<span class="ident" id="5334905"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330455">fillLow</a></span>&nbsp;<span class="op" id="5334913">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334918"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333761">fill</a></span>&nbsp;<span class="op" id="5334923">=</span>&nbsp;<span class="ident" id="5334925"><a href="/lonnie.io/e8vm/asm8/inst.go.html#5330495">fillHigh</a></span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334936">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334939">}</span>&nbsp;<span class="keyword" id="5334941">else</span>&nbsp;<span class="op" id="5334946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5334950">return</span>&nbsp;<span class="ident" id="5334957">nil</span><span class="op" id="5334960">,</span>&nbsp;<span class="ident" id="5334962">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5334969">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5334973">ret</span>&nbsp;<span class="op" id="5334977">:=</span>&nbsp;<span class="ident" id="5334980"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333408">makeInstImm</a></span><span class="op" id="5334991">(</span><span class="ident" id="5334992"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333717">op</a></span><span class="op" id="5334994">,</span>&nbsp;<span class="ident" id="5334996"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333721">d</a></span><span class="op" id="5334997">,</span>&nbsp;<span class="ident" id="5334999"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333724">s</a></span><span class="op" id="5335000">,</span>&nbsp;<span class="ident" id="5335002"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333727">im</a></span><span class="op" id="5335004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335007"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334973">ret</a></span><span class="op" id="5335010">.</span><span class="ident" id="5335011">pack</span>&nbsp;<span class="op" id="5335016">=</span>&nbsp;<span class="ident" id="5335018"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333739">pack</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335024"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334973">ret</a></span><span class="op" id="5335027">.</span><span class="ident" id="5335028">symbol</span>&nbsp;<span class="op" id="5335035">=</span>&nbsp;<span class="ident" id="5335037"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333745">sym</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335042"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334973">ret</a></span><span class="op" id="5335045">.</span><span class="ident" id="5335046">fill</span>&nbsp;<span class="op" id="5335051">=</span>&nbsp;<span class="ident" id="5335053"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333761">fill</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5335059"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334973">ret</a></span><span class="op" id="5335062">.</span><span class="ident" id="5335063">symTok</span>&nbsp;<span class="op" id="5335070">=</span>&nbsp;<span class="ident" id="5335072"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5333780">symTok</a></span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5335081">return</span>&nbsp;<span class="ident" id="5335088"><a href="/lonnie.io/e8vm/asm8/inst_imm.go.html#5334973">ret</a></span><span class="op" id="5335091">,</span>&nbsp;<span class="ident" id="5335093">true</span><br>
<span class="lineno"></span><span class="op" id="5335098">}</span>
</div>
</body>
</html>
