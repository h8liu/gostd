<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>sort</h2>
<ul>
<li><a href="/gostd/sort/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/sort/example_keys_test.go.html">example_keys_test.go</a></li>
<li><a href="/gostd/sort/example_multi_test.go.html">example_multi_test.go</a></li>
<li><a href="/gostd/sort/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/sort/example_wrapper_test.go.html">example_wrapper_test.go</a></li>
<li><a href="/gostd/sort/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/sort/search.go.html">search.go</a></li>
<li><a href="/gostd/sort/search_test.go.html">search_test.go</a></li>
<li><a href="/gostd/sort/sort.go.html">sort.go</a></li>
<li><a href="/gostd/sort/sort_test.go.html">sort_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2310323">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2310378">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2310432">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2310483">//&nbsp;Package&nbsp;sort&nbsp;provides&nbsp;primitives&nbsp;for&nbsp;sorting&nbsp;slices&nbsp;and&nbsp;user-defined</span><br>
<span class="lineno"></span><span class="comment" id="2310555">//&nbsp;collections.</span><br>
<span class="lineno"></span><span class="keyword" id="2310571">package</span>&nbsp;<span class="ident" id="2310579">sort</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2310585">//&nbsp;A&nbsp;type,&nbsp;typically&nbsp;a&nbsp;collection,&nbsp;that&nbsp;satisfies&nbsp;sort.Interface&nbsp;can&nbsp;be</span><br>
<span class="lineno">10</span><span class="comment" id="2310657">//&nbsp;sorted&nbsp;by&nbsp;the&nbsp;routines&nbsp;in&nbsp;this&nbsp;package.&nbsp;&nbsp;The&nbsp;methods&nbsp;require&nbsp;that&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2310730">//&nbsp;elements&nbsp;of&nbsp;the&nbsp;collection&nbsp;be&nbsp;enumerated&nbsp;by&nbsp;an&nbsp;integer&nbsp;index.</span><br>
<span class="lineno"></span><span class="keyword" id="2310795">type</span>&nbsp;<span class="ident" id="2310800">Interface</span>&nbsp;<span class="keyword" id="2310810">interface</span>&nbsp;<span class="op" id="2310820">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2310823">//&nbsp;Len&nbsp;is&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;in&nbsp;the&nbsp;collection.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310876">Len</span><span class="op" id="2310879">(</span><span class="op" id="2310880">)</span>&nbsp;<span class="builtintype" id="2310882">int</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2310887">//&nbsp;Less&nbsp;reports&nbsp;whether&nbsp;the&nbsp;element&nbsp;with</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2310929">//&nbsp;index&nbsp;i&nbsp;should&nbsp;sort&nbsp;before&nbsp;the&nbsp;element&nbsp;with&nbsp;index&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2310986">Less</span><span class="op" id="2310990">(</span><span class="ident" id="2310991">i</span><span class="op" id="2310992">,</span>&nbsp;<span class="ident" id="2310994">j</span>&nbsp;<span class="builtintype" id="2310996">int</span><span class="op" id="2310999">)</span>&nbsp;<span class="builtintype" id="2311001">bool</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2311007">//&nbsp;Swap&nbsp;swaps&nbsp;the&nbsp;elements&nbsp;with&nbsp;indexes&nbsp;i&nbsp;and&nbsp;j.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311057">Swap</span><span class="op" id="2311061">(</span><span class="ident" id="2311062">i</span><span class="op" id="2311063">,</span>&nbsp;<span class="ident" id="2311065">j</span>&nbsp;<span class="builtintype" id="2311067">int</span><span class="op" id="2311070">)</span><br>
<span class="lineno">20</span><span class="op" id="2311072">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2311075">func</span>&nbsp;<span class="ident" id="2311080">min</span><span class="op" id="2311083">(</span><span class="ident" id="2311084">a</span><span class="op" id="2311085">,</span>&nbsp;<span class="ident" id="2311087">b</span>&nbsp;<span class="builtintype" id="2311089">int</span><span class="op" id="2311092">)</span>&nbsp;<span class="builtintype" id="2311094">int</span>&nbsp;<span class="op" id="2311098">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311101">if</span>&nbsp;<span class="ident" id="2311104">a</span>&nbsp;<span class="op" id="2311106">&lt;</span>&nbsp;<span class="ident" id="2311108">b</span>&nbsp;<span class="op" id="2311110">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311114">return</span>&nbsp;<span class="ident" id="2311121">a</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311124">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311127">return</span>&nbsp;<span class="ident" id="2311134">b</span><br>
<span class="lineno"></span><span class="op" id="2311136">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2311139">//&nbsp;Insertion&nbsp;sort</span><br>
<span class="lineno">30</span><span class="keyword" id="2311157">func</span>&nbsp;<span class="ident" id="2311162">insertionSort</span><span class="op" id="2311175">(</span><span class="ident" id="2311176">data</span>&nbsp;<span class="ident" id="2311181">Interface</span><span class="op" id="2311190">,</span>&nbsp;<span class="ident" id="2311192">a</span><span class="op" id="2311193">,</span>&nbsp;<span class="ident" id="2311195">b</span>&nbsp;<span class="builtintype" id="2311197">int</span><span class="op" id="2311200">)</span>&nbsp;<span class="op" id="2311202">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311205">for</span>&nbsp;<span class="ident" id="2311209">i</span>&nbsp;<span class="op" id="2311211">:=</span>&nbsp;<span class="ident" id="2311214">a</span>&nbsp;<span class="op" id="2311216">+</span>&nbsp;<span class="num" id="2311218">1</span><span class="op" id="2311219">;</span>&nbsp;<span class="ident" id="2311221">i</span>&nbsp;<span class="op" id="2311223">&lt;</span>&nbsp;<span class="ident" id="2311225">b</span><span class="op" id="2311226">;</span>&nbsp;<span class="ident" id="2311228">i</span><span class="op" id="2311229">++</span>&nbsp;<span class="op" id="2311232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311236">for</span>&nbsp;<span class="ident" id="2311240">j</span>&nbsp;<span class="op" id="2311242">:=</span>&nbsp;<span class="ident" id="2311245">i</span><span class="op" id="2311246">;</span>&nbsp;<span class="ident" id="2311248">j</span>&nbsp;<span class="op" id="2311250">&gt;</span>&nbsp;<span class="ident" id="2311252">a</span>&nbsp;<span class="op" id="2311254">&amp;&amp;</span>&nbsp;<span class="ident" id="2311257">data</span><span class="op" id="2311261">.</span><span class="ident" id="2311262">Less</span><span class="op" id="2311266">(</span><span class="ident" id="2311267">j</span><span class="op" id="2311268">,</span>&nbsp;<span class="ident" id="2311270">j</span><span class="op" id="2311271">-</span><span class="num" id="2311272">1</span><span class="op" id="2311273">)</span><span class="op" id="2311274">;</span>&nbsp;<span class="ident" id="2311276">j</span><span class="op" id="2311277">--</span>&nbsp;<span class="op" id="2311280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311285">data</span><span class="op" id="2311289">.</span><span class="ident" id="2311290">Swap</span><span class="op" id="2311294">(</span><span class="ident" id="2311295">j</span><span class="op" id="2311296">,</span>&nbsp;<span class="ident" id="2311298">j</span><span class="op" id="2311299">-</span><span class="num" id="2311300">1</span><span class="op" id="2311301">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311305">}</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311308">}</span><br>
<span class="lineno"></span><span class="op" id="2311310">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2311313">//&nbsp;siftDown&nbsp;implements&nbsp;the&nbsp;heap&nbsp;property&nbsp;on&nbsp;data[lo,&nbsp;hi).</span><br>
<span class="lineno"></span><span class="comment" id="2311371">//&nbsp;first&nbsp;is&nbsp;an&nbsp;offset&nbsp;into&nbsp;the&nbsp;array&nbsp;where&nbsp;the&nbsp;root&nbsp;of&nbsp;the&nbsp;heap&nbsp;lies.</span><br>
<span class="lineno">40</span><span class="keyword" id="2311441">func</span>&nbsp;<span class="ident" id="2311446">siftDown</span><span class="op" id="2311454">(</span><span class="ident" id="2311455">data</span>&nbsp;<span class="ident" id="2311460">Interface</span><span class="op" id="2311469">,</span>&nbsp;<span class="ident" id="2311471">lo</span><span class="op" id="2311473">,</span>&nbsp;<span class="ident" id="2311475">hi</span><span class="op" id="2311477">,</span>&nbsp;<span class="ident" id="2311479">first</span>&nbsp;<span class="builtintype" id="2311485">int</span><span class="op" id="2311488">)</span>&nbsp;<span class="op" id="2311490">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311493">root</span>&nbsp;<span class="op" id="2311498">:=</span>&nbsp;<span class="ident" id="2311501">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311505">for</span>&nbsp;<span class="op" id="2311509">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311513">child</span>&nbsp;<span class="op" id="2311519">:=</span>&nbsp;<span class="num" id="2311522">2</span><span class="op" id="2311523">*</span><span class="ident" id="2311524">root</span>&nbsp;<span class="op" id="2311529">+</span>&nbsp;<span class="num" id="2311531">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311535">if</span>&nbsp;<span class="ident" id="2311538">child</span>&nbsp;<span class="op" id="2311544">&gt;=</span>&nbsp;<span class="ident" id="2311547">hi</span>&nbsp;<span class="op" id="2311550">{</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311555">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311563">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311567">if</span>&nbsp;<span class="ident" id="2311570">child</span><span class="op" id="2311575">+</span><span class="num" id="2311576">1</span>&nbsp;<span class="op" id="2311578">&lt;</span>&nbsp;<span class="ident" id="2311580">hi</span>&nbsp;<span class="op" id="2311583">&amp;&amp;</span>&nbsp;<span class="ident" id="2311586">data</span><span class="op" id="2311590">.</span><span class="ident" id="2311591">Less</span><span class="op" id="2311595">(</span><span class="ident" id="2311596">first</span><span class="op" id="2311601">+</span><span class="ident" id="2311602">child</span><span class="op" id="2311607">,</span>&nbsp;<span class="ident" id="2311609">first</span><span class="op" id="2311614">+</span><span class="ident" id="2311615">child</span><span class="op" id="2311620">+</span><span class="num" id="2311621">1</span><span class="op" id="2311622">)</span>&nbsp;<span class="op" id="2311624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311629">child</span><span class="op" id="2311634">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311639">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311643">if</span>&nbsp;<span class="op" id="2311646">!</span><span class="ident" id="2311647">data</span><span class="op" id="2311651">.</span><span class="ident" id="2311652">Less</span><span class="op" id="2311656">(</span><span class="ident" id="2311657">first</span><span class="op" id="2311662">+</span><span class="ident" id="2311663">root</span><span class="op" id="2311667">,</span>&nbsp;<span class="ident" id="2311669">first</span><span class="op" id="2311674">+</span><span class="ident" id="2311675">child</span><span class="op" id="2311680">)</span>&nbsp;<span class="op" id="2311682">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311687">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311696">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311700">data</span><span class="op" id="2311704">.</span><span class="ident" id="2311705">Swap</span><span class="op" id="2311709">(</span><span class="ident" id="2311710">first</span><span class="op" id="2311715">+</span><span class="ident" id="2311716">root</span><span class="op" id="2311720">,</span>&nbsp;<span class="ident" id="2311722">first</span><span class="op" id="2311727">+</span><span class="ident" id="2311728">child</span><span class="op" id="2311733">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311737">root</span>&nbsp;<span class="op" id="2311742">=</span>&nbsp;<span class="ident" id="2311744">child</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311751">}</span><br>
<span class="lineno"></span><span class="op" id="2311753">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2311756">func</span>&nbsp;<span class="ident" id="2311761">heapSort</span><span class="op" id="2311769">(</span><span class="ident" id="2311770">data</span>&nbsp;<span class="ident" id="2311775">Interface</span><span class="op" id="2311784">,</span>&nbsp;<span class="ident" id="2311786">a</span><span class="op" id="2311787">,</span>&nbsp;<span class="ident" id="2311789">b</span>&nbsp;<span class="builtintype" id="2311791">int</span><span class="op" id="2311794">)</span>&nbsp;<span class="op" id="2311796">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311799">first</span>&nbsp;<span class="op" id="2311805">:=</span>&nbsp;<span class="ident" id="2311808">a</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311811">lo</span>&nbsp;<span class="op" id="2311814">:=</span>&nbsp;<span class="num" id="2311817">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311820">hi</span>&nbsp;<span class="op" id="2311823">:=</span>&nbsp;<span class="ident" id="2311826">b</span>&nbsp;<span class="op" id="2311828">-</span>&nbsp;<span class="ident" id="2311830">a</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2311834">//&nbsp;Build&nbsp;heap&nbsp;with&nbsp;greatest&nbsp;element&nbsp;at&nbsp;top.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2311879">for</span>&nbsp;<span class="ident" id="2311883">i</span>&nbsp;<span class="op" id="2311885">:=</span>&nbsp;<span class="op" id="2311888">(</span><span class="ident" id="2311889">hi</span>&nbsp;<span class="op" id="2311892">-</span>&nbsp;<span class="num" id="2311894">1</span><span class="op" id="2311895">)</span>&nbsp;<span class="op" id="2311897">/</span>&nbsp;<span class="num" id="2311899">2</span><span class="op" id="2311900">;</span>&nbsp;<span class="ident" id="2311902">i</span>&nbsp;<span class="op" id="2311904">&gt;=</span>&nbsp;<span class="num" id="2311907">0</span><span class="op" id="2311908">;</span>&nbsp;<span class="ident" id="2311910">i</span><span class="op" id="2311911">--</span>&nbsp;<span class="op" id="2311914">{</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2311918">siftDown</span><span class="op" id="2311926">(</span><span class="ident" id="2311927">data</span><span class="op" id="2311931">,</span>&nbsp;<span class="ident" id="2311933">i</span><span class="op" id="2311934">,</span>&nbsp;<span class="ident" id="2311936">hi</span><span class="op" id="2311938">,</span>&nbsp;<span class="ident" id="2311940">first</span><span class="op" id="2311945">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2311948">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2311952">//&nbsp;Pop&nbsp;elements,&nbsp;largest&nbsp;first,&nbsp;into&nbsp;end&nbsp;of&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312003">for</span>&nbsp;<span class="ident" id="2312007">i</span>&nbsp;<span class="op" id="2312009">:=</span>&nbsp;<span class="ident" id="2312012">hi</span>&nbsp;<span class="op" id="2312015">-</span>&nbsp;<span class="num" id="2312017">1</span><span class="op" id="2312018">;</span>&nbsp;<span class="ident" id="2312020">i</span>&nbsp;<span class="op" id="2312022">&gt;=</span>&nbsp;<span class="num" id="2312025">0</span><span class="op" id="2312026">;</span>&nbsp;<span class="ident" id="2312028">i</span><span class="op" id="2312029">--</span>&nbsp;<span class="op" id="2312032">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312036">data</span><span class="op" id="2312040">.</span><span class="ident" id="2312041">Swap</span><span class="op" id="2312045">(</span><span class="ident" id="2312046">first</span><span class="op" id="2312051">,</span>&nbsp;<span class="ident" id="2312053">first</span><span class="op" id="2312058">+</span><span class="ident" id="2312059">i</span><span class="op" id="2312060">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312064">siftDown</span><span class="op" id="2312072">(</span><span class="ident" id="2312073">data</span><span class="op" id="2312077">,</span>&nbsp;<span class="ident" id="2312079">lo</span><span class="op" id="2312081">,</span>&nbsp;<span class="ident" id="2312083">i</span><span class="op" id="2312084">,</span>&nbsp;<span class="ident" id="2312086">first</span><span class="op" id="2312091">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312094">}</span><br>
<span class="lineno"></span><span class="op" id="2312096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="comment" id="2312099">//&nbsp;Quicksort,&nbsp;following&nbsp;Bentley&nbsp;and&nbsp;McIlroy,</span><br>
<span class="lineno"></span><span class="comment" id="2312144">//&nbsp;``Engineering&nbsp;a&nbsp;Sort&nbsp;Function,&#39;&#39;&nbsp;SP&amp;E&nbsp;November&nbsp;1993.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2312201">//&nbsp;medianOfThree&nbsp;moves&nbsp;the&nbsp;median&nbsp;of&nbsp;the&nbsp;three&nbsp;values&nbsp;data[a],&nbsp;data[b],&nbsp;data[c]&nbsp;into&nbsp;data[a].</span><br>
<span class="lineno"></span><span class="keyword" id="2312295">func</span>&nbsp;<span class="ident" id="2312300">medianOfThree</span><span class="op" id="2312313">(</span><span class="ident" id="2312314">data</span>&nbsp;<span class="ident" id="2312319">Interface</span><span class="op" id="2312328">,</span>&nbsp;<span class="ident" id="2312330">a</span><span class="op" id="2312331">,</span>&nbsp;<span class="ident" id="2312333">b</span><span class="op" id="2312334">,</span>&nbsp;<span class="ident" id="2312336">c</span>&nbsp;<span class="builtintype" id="2312338">int</span><span class="op" id="2312341">)</span>&nbsp;<span class="op" id="2312343">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312346">m0</span>&nbsp;<span class="op" id="2312349">:=</span>&nbsp;<span class="ident" id="2312352">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312355">m1</span>&nbsp;<span class="op" id="2312358">:=</span>&nbsp;<span class="ident" id="2312361">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312364">m2</span>&nbsp;<span class="op" id="2312367">:=</span>&nbsp;<span class="ident" id="2312370">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2312373">//&nbsp;bubble&nbsp;sort&nbsp;on&nbsp;3&nbsp;elements</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312403">if</span>&nbsp;<span class="ident" id="2312406">data</span><span class="op" id="2312410">.</span><span class="ident" id="2312411">Less</span><span class="op" id="2312415">(</span><span class="ident" id="2312416">m1</span><span class="op" id="2312418">,</span>&nbsp;<span class="ident" id="2312420">m0</span><span class="op" id="2312422">)</span>&nbsp;<span class="op" id="2312424">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312428">data</span><span class="op" id="2312432">.</span><span class="ident" id="2312433">Swap</span><span class="op" id="2312437">(</span><span class="ident" id="2312438">m1</span><span class="op" id="2312440">,</span>&nbsp;<span class="ident" id="2312442">m0</span><span class="op" id="2312444">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312450">if</span>&nbsp;<span class="ident" id="2312453">data</span><span class="op" id="2312457">.</span><span class="ident" id="2312458">Less</span><span class="op" id="2312462">(</span><span class="ident" id="2312463">m2</span><span class="op" id="2312465">,</span>&nbsp;<span class="ident" id="2312467">m1</span><span class="op" id="2312469">)</span>&nbsp;<span class="op" id="2312471">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312475">data</span><span class="op" id="2312479">.</span><span class="ident" id="2312480">Swap</span><span class="op" id="2312484">(</span><span class="ident" id="2312485">m2</span><span class="op" id="2312487">,</span>&nbsp;<span class="ident" id="2312489">m1</span><span class="op" id="2312491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312494">}</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312497">if</span>&nbsp;<span class="ident" id="2312500">data</span><span class="op" id="2312504">.</span><span class="ident" id="2312505">Less</span><span class="op" id="2312509">(</span><span class="ident" id="2312510">m1</span><span class="op" id="2312512">,</span>&nbsp;<span class="ident" id="2312514">m0</span><span class="op" id="2312516">)</span>&nbsp;<span class="op" id="2312518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312522">data</span><span class="op" id="2312526">.</span><span class="ident" id="2312527">Swap</span><span class="op" id="2312531">(</span><span class="ident" id="2312532">m1</span><span class="op" id="2312534">,</span>&nbsp;<span class="ident" id="2312536">m0</span><span class="op" id="2312538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2312544">//&nbsp;now&nbsp;data[m0]&nbsp;&lt;=&nbsp;data[m1]&nbsp;&lt;=&nbsp;data[m2]</span><br>
<span class="lineno"></span><span class="op" id="2312584">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="2312587">func</span>&nbsp;<span class="ident" id="2312592">swapRange</span><span class="op" id="2312601">(</span><span class="ident" id="2312602">data</span>&nbsp;<span class="ident" id="2312607">Interface</span><span class="op" id="2312616">,</span>&nbsp;<span class="ident" id="2312618">a</span><span class="op" id="2312619">,</span>&nbsp;<span class="ident" id="2312621">b</span><span class="op" id="2312622">,</span>&nbsp;<span class="ident" id="2312624">n</span>&nbsp;<span class="builtintype" id="2312626">int</span><span class="op" id="2312629">)</span>&nbsp;<span class="op" id="2312631">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312634">for</span>&nbsp;<span class="ident" id="2312638">i</span>&nbsp;<span class="op" id="2312640">:=</span>&nbsp;<span class="num" id="2312643">0</span><span class="op" id="2312644">;</span>&nbsp;<span class="ident" id="2312646">i</span>&nbsp;<span class="op" id="2312648">&lt;</span>&nbsp;<span class="ident" id="2312650">n</span><span class="op" id="2312651">;</span>&nbsp;<span class="ident" id="2312653">i</span><span class="op" id="2312654">++</span>&nbsp;<span class="op" id="2312657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312661">data</span><span class="op" id="2312665">.</span><span class="ident" id="2312666">Swap</span><span class="op" id="2312670">(</span><span class="ident" id="2312671">a</span><span class="op" id="2312672">+</span><span class="ident" id="2312673">i</span><span class="op" id="2312674">,</span>&nbsp;<span class="ident" id="2312676">b</span><span class="op" id="2312677">+</span><span class="ident" id="2312678">i</span><span class="op" id="2312679">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2312682">}</span><br>
<span class="lineno">100</span><span class="op" id="2312684">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2312687">func</span>&nbsp;<span class="ident" id="2312692">doPivot</span><span class="op" id="2312699">(</span><span class="ident" id="2312700">data</span>&nbsp;<span class="ident" id="2312705">Interface</span><span class="op" id="2312714">,</span>&nbsp;<span class="ident" id="2312716">lo</span><span class="op" id="2312718">,</span>&nbsp;<span class="ident" id="2312720">hi</span>&nbsp;<span class="builtintype" id="2312723">int</span><span class="op" id="2312726">)</span>&nbsp;<span class="op" id="2312728">(</span><span class="ident" id="2312729">midlo</span><span class="op" id="2312734">,</span>&nbsp;<span class="ident" id="2312736">midhi</span>&nbsp;<span class="builtintype" id="2312742">int</span><span class="op" id="2312745">)</span>&nbsp;<span class="op" id="2312747">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312750">m</span>&nbsp;<span class="op" id="2312752">:=</span>&nbsp;<span class="ident" id="2312755">lo</span>&nbsp;<span class="op" id="2312758">+</span>&nbsp;<span class="op" id="2312760">(</span><span class="ident" id="2312761">hi</span><span class="op" id="2312763">-</span><span class="ident" id="2312764">lo</span><span class="op" id="2312766">)</span><span class="op" id="2312767">/</span><span class="num" id="2312768">2</span>&nbsp;<span class="comment" id="2312770">//&nbsp;Written&nbsp;like&nbsp;this&nbsp;to&nbsp;avoid&nbsp;integer&nbsp;overflow.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2312819">if</span>&nbsp;<span class="ident" id="2312822">hi</span><span class="op" id="2312824">-</span><span class="ident" id="2312825">lo</span>&nbsp;<span class="op" id="2312828">&gt;</span>&nbsp;<span class="num" id="2312830">40</span>&nbsp;<span class="op" id="2312833">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2312837">//&nbsp;Tukey&#39;s&nbsp;``Ninther,&#39;&#39;&nbsp;median&nbsp;of&nbsp;three&nbsp;medians&nbsp;of&nbsp;three.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312897">s</span>&nbsp;<span class="op" id="2312899">:=</span>&nbsp;<span class="op" id="2312902">(</span><span class="ident" id="2312903">hi</span>&nbsp;<span class="op" id="2312906">-</span>&nbsp;<span class="ident" id="2312908">lo</span><span class="op" id="2312910">)</span>&nbsp;<span class="op" id="2312912">/</span>&nbsp;<span class="num" id="2312914">8</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312918">medianOfThree</span><span class="op" id="2312931">(</span><span class="ident" id="2312932">data</span><span class="op" id="2312936">,</span>&nbsp;<span class="ident" id="2312938">lo</span><span class="op" id="2312940">,</span>&nbsp;<span class="ident" id="2312942">lo</span><span class="op" id="2312944">+</span><span class="ident" id="2312945">s</span><span class="op" id="2312946">,</span>&nbsp;<span class="ident" id="2312948">lo</span><span class="op" id="2312950">+</span><span class="num" id="2312951">2</span><span class="op" id="2312952">*</span><span class="ident" id="2312953">s</span><span class="op" id="2312954">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312958">medianOfThree</span><span class="op" id="2312971">(</span><span class="ident" id="2312972">data</span><span class="op" id="2312976">,</span>&nbsp;<span class="ident" id="2312978">m</span><span class="op" id="2312979">,</span>&nbsp;<span class="ident" id="2312981">m</span><span class="op" id="2312982">-</span><span class="ident" id="2312983">s</span><span class="op" id="2312984">,</span>&nbsp;<span class="ident" id="2312986">m</span><span class="op" id="2312987">+</span><span class="ident" id="2312988">s</span><span class="op" id="2312989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2312993">medianOfThree</span><span class="op" id="2313006">(</span><span class="ident" id="2313007">data</span><span class="op" id="2313011">,</span>&nbsp;<span class="ident" id="2313013">hi</span><span class="op" id="2313015">-</span><span class="num" id="2313016">1</span><span class="op" id="2313017">,</span>&nbsp;<span class="ident" id="2313019">hi</span><span class="op" id="2313021">-</span><span class="num" id="2313022">1</span><span class="op" id="2313023">-</span><span class="ident" id="2313024">s</span><span class="op" id="2313025">,</span>&nbsp;<span class="ident" id="2313027">hi</span><span class="op" id="2313029">-</span><span class="num" id="2313030">1</span><span class="op" id="2313031">-</span><span class="num" id="2313032">2</span><span class="op" id="2313033">*</span><span class="ident" id="2313034">s</span><span class="op" id="2313035">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313038">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313041">medianOfThree</span><span class="op" id="2313054">(</span><span class="ident" id="2313055">data</span><span class="op" id="2313059">,</span>&nbsp;<span class="ident" id="2313061">lo</span><span class="op" id="2313063">,</span>&nbsp;<span class="ident" id="2313065">m</span><span class="op" id="2313066">,</span>&nbsp;<span class="ident" id="2313068">hi</span><span class="op" id="2313070">-</span><span class="num" id="2313071">1</span><span class="op" id="2313072">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313076">//&nbsp;Invariants&nbsp;are:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313096">//&nbsp;&nbsp;&nbsp;&nbspdata[lo]&nbsp;=&nbsp;pivot&nbsp;(set&nbsp;up&nbsp;by&nbsp;ChoosePivot)</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313141">//&nbsp;&nbsp;&nbsp;&nbspdata[lo&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;a]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313171">//&nbsp;&nbsp;&nbsp;&nbspdata[a&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313200">//&nbsp;&nbsp;&nbsp;&nbspdata[b&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;c]&nbsp;is&nbsp;unexamined</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313235">//&nbsp;&nbsp;&nbsp;&nbspdata[c&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;d]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313264">//&nbsp;&nbsp;&nbsp;&nbspdata[d&nbsp;&lt;=&nbsp;i&nbsp;&lt;&nbsp;hi]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313294">//</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313298">//&nbsp;Once&nbsp;b&nbsp;meets&nbsp;c,&nbsp;can&nbsp;swap&nbsp;the&nbsp;&#34;=&nbsp;pivot&#34;&nbsp;sections</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313350">//&nbsp;into&nbsp;the&nbsp;middle&nbsp;of&nbsp;the&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313384">pivot</span>&nbsp;<span class="op" id="2313390">:=</span>&nbsp;<span class="ident" id="2313393">lo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313397">a</span><span class="op" id="2313398">,</span>&nbsp;<span class="ident" id="2313400">b</span><span class="op" id="2313401">,</span>&nbsp;<span class="ident" id="2313403">c</span><span class="op" id="2313404">,</span>&nbsp;<span class="ident" id="2313406">d</span>&nbsp;<span class="op" id="2313408">:=</span>&nbsp;<span class="ident" id="2313411">lo</span><span class="op" id="2313413">+</span><span class="num" id="2313414">1</span><span class="op" id="2313415">,</span>&nbsp;<span class="ident" id="2313417">lo</span><span class="op" id="2313419">+</span><span class="num" id="2313420">1</span><span class="op" id="2313421">,</span>&nbsp;<span class="ident" id="2313423">hi</span><span class="op" id="2313425">,</span>&nbsp;<span class="ident" id="2313427">hi</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313431">for</span>&nbsp;<span class="op" id="2313435">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313439">for</span>&nbsp;<span class="ident" id="2313443">b</span>&nbsp;<span class="op" id="2313445">&lt;</span>&nbsp;<span class="ident" id="2313447">c</span>&nbsp;<span class="op" id="2313449">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313454">if</span>&nbsp;<span class="ident" id="2313457">data</span><span class="op" id="2313461">.</span><span class="ident" id="2313462">Less</span><span class="op" id="2313466">(</span><span class="ident" id="2313467">b</span><span class="op" id="2313468">,</span>&nbsp;<span class="ident" id="2313470">pivot</span><span class="op" id="2313475">)</span>&nbsp;<span class="op" id="2313477">{</span>&nbsp;<span class="comment" id="2313479">//&nbsp;data[b]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313502">b</span><span class="op" id="2313503">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313509">}</span>&nbsp;<span class="keyword" id="2313511">else</span>&nbsp;<span class="keyword" id="2313516">if</span>&nbsp;<span class="op" id="2313519">!</span><span class="ident" id="2313520">data</span><span class="op" id="2313524">.</span><span class="ident" id="2313525">Less</span><span class="op" id="2313529">(</span><span class="ident" id="2313530">pivot</span><span class="op" id="2313535">,</span>&nbsp;<span class="ident" id="2313537">b</span><span class="op" id="2313538">)</span>&nbsp;<span class="op" id="2313540">{</span>&nbsp;<span class="comment" id="2313542">//&nbsp;data[b]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313565">data</span><span class="op" id="2313569">.</span><span class="ident" id="2313570">Swap</span><span class="op" id="2313574">(</span><span class="ident" id="2313575">a</span><span class="op" id="2313576">,</span>&nbsp;<span class="ident" id="2313578">b</span><span class="op" id="2313579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313585">a</span><span class="op" id="2313586">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313593">b</span><span class="op" id="2313594">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313600">}</span>&nbsp;<span class="keyword" id="2313602">else</span>&nbsp;<span class="op" id="2313607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313613">break</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313626">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313630">for</span>&nbsp;<span class="ident" id="2313634">b</span>&nbsp;<span class="op" id="2313636">&lt;</span>&nbsp;<span class="ident" id="2313638">c</span>&nbsp;<span class="op" id="2313640">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313645">if</span>&nbsp;<span class="ident" id="2313648">data</span><span class="op" id="2313652">.</span><span class="ident" id="2313653">Less</span><span class="op" id="2313657">(</span><span class="ident" id="2313658">pivot</span><span class="op" id="2313663">,</span>&nbsp;<span class="ident" id="2313665">c</span><span class="op" id="2313666">-</span><span class="num" id="2313667">1</span><span class="op" id="2313668">)</span>&nbsp;<span class="op" id="2313670">{</span>&nbsp;<span class="comment" id="2313672">//&nbsp;data[c-1]&nbsp;&gt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313697">c</span><span class="op" id="2313698">--</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313704">}</span>&nbsp;<span class="keyword" id="2313706">else</span>&nbsp;<span class="keyword" id="2313711">if</span>&nbsp;<span class="op" id="2313714">!</span><span class="ident" id="2313715">data</span><span class="op" id="2313719">.</span><span class="ident" id="2313720">Less</span><span class="op" id="2313724">(</span><span class="ident" id="2313725">c</span><span class="op" id="2313726">-</span><span class="num" id="2313727">1</span><span class="op" id="2313728">,</span>&nbsp;<span class="ident" id="2313730">pivot</span><span class="op" id="2313735">)</span>&nbsp;<span class="op" id="2313737">{</span>&nbsp;<span class="comment" id="2313739">//&nbsp;data[c-1]&nbsp;=&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313764">data</span><span class="op" id="2313768">.</span><span class="ident" id="2313769">Swap</span><span class="op" id="2313773">(</span><span class="ident" id="2313774">c</span><span class="op" id="2313775">-</span><span class="num" id="2313776">1</span><span class="op" id="2313777">,</span>&nbsp;<span class="ident" id="2313779">d</span><span class="op" id="2313780">-</span><span class="num" id="2313781">1</span><span class="op" id="2313782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313788">c</span><span class="op" id="2313789">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313796">d</span><span class="op" id="2313797">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313803">}</span>&nbsp;<span class="keyword" id="2313805">else</span>&nbsp;<span class="op" id="2313810">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313816">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313825">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313829">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313833">if</span>&nbsp;<span class="ident" id="2313836">b</span>&nbsp;<span class="op" id="2313838">&gt;=</span>&nbsp;<span class="ident" id="2313841">c</span>&nbsp;<span class="op" id="2313843">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2313848">break</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313856">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2313860">//&nbsp;data[b]&nbsp;&gt;&nbsp;pivot;&nbsp;data[c-1]&nbsp;&lt;&nbsp;pivot</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313900">data</span><span class="op" id="2313904">.</span><span class="ident" id="2313905">Swap</span><span class="op" id="2313909">(</span><span class="ident" id="2313910">b</span><span class="op" id="2313911">,</span>&nbsp;<span class="ident" id="2313913">c</span><span class="op" id="2313914">-</span><span class="num" id="2313915">1</span><span class="op" id="2313916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313920">b</span><span class="op" id="2313921">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313926">c</span><span class="op" id="2313927">--</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2313931">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313935">n</span>&nbsp;<span class="op" id="2313937">:=</span>&nbsp;<span class="ident" id="2313940">min</span><span class="op" id="2313943">(</span><span class="ident" id="2313944">b</span><span class="op" id="2313945">-</span><span class="ident" id="2313946">a</span><span class="op" id="2313947">,</span>&nbsp;<span class="ident" id="2313949">a</span><span class="op" id="2313950">-</span><span class="ident" id="2313951">lo</span><span class="op" id="2313953">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313956">swapRange</span><span class="op" id="2313965">(</span><span class="ident" id="2313966">data</span><span class="op" id="2313970">,</span>&nbsp;<span class="ident" id="2313972">lo</span><span class="op" id="2313974">,</span>&nbsp;<span class="ident" id="2313976">b</span><span class="op" id="2313977">-</span><span class="ident" id="2313978">n</span><span class="op" id="2313979">,</span>&nbsp;<span class="ident" id="2313981">n</span><span class="op" id="2313982">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2313986">n</span>&nbsp;<span class="op" id="2313988">=</span>&nbsp;<span class="ident" id="2313990">min</span><span class="op" id="2313993">(</span><span class="ident" id="2313994">hi</span><span class="op" id="2313996">-</span><span class="ident" id="2313997">d</span><span class="op" id="2313998">,</span>&nbsp;<span class="ident" id="2314000">d</span><span class="op" id="2314001">-</span><span class="ident" id="2314002">c</span><span class="op" id="2314003">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314006">swapRange</span><span class="op" id="2314015">(</span><span class="ident" id="2314016">data</span><span class="op" id="2314020">,</span>&nbsp;<span class="ident" id="2314022">c</span><span class="op" id="2314023">,</span>&nbsp;<span class="ident" id="2314025">hi</span><span class="op" id="2314027">-</span><span class="ident" id="2314028">n</span><span class="op" id="2314029">,</span>&nbsp;<span class="ident" id="2314031">n</span><span class="op" id="2314032">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314036">return</span>&nbsp;<span class="ident" id="2314043">lo</span>&nbsp;<span class="op" id="2314046">+</span>&nbsp;<span class="ident" id="2314048">b</span>&nbsp;<span class="op" id="2314050">-</span>&nbsp;<span class="ident" id="2314052">a</span><span class="op" id="2314053">,</span>&nbsp;<span class="ident" id="2314055">hi</span>&nbsp;<span class="op" id="2314058">-</span>&nbsp;<span class="op" id="2314060">(</span><span class="ident" id="2314061">d</span>&nbsp;<span class="op" id="2314063">-</span>&nbsp;<span class="ident" id="2314065">c</span><span class="op" id="2314066">)</span><br>
<span class="lineno"></span><span class="op" id="2314068">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="2314071">func</span>&nbsp;<span class="ident" id="2314076">quickSort</span><span class="op" id="2314085">(</span><span class="ident" id="2314086">data</span>&nbsp;<span class="ident" id="2314091">Interface</span><span class="op" id="2314100">,</span>&nbsp;<span class="ident" id="2314102">a</span><span class="op" id="2314103">,</span>&nbsp;<span class="ident" id="2314105">b</span><span class="op" id="2314106">,</span>&nbsp;<span class="ident" id="2314108">maxDepth</span>&nbsp;<span class="builtintype" id="2314117">int</span><span class="op" id="2314120">)</span>&nbsp;<span class="op" id="2314122">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314125">for</span>&nbsp;<span class="ident" id="2314129">b</span><span class="op" id="2314130">-</span><span class="ident" id="2314131">a</span>&nbsp;<span class="op" id="2314133">&gt;</span>&nbsp;<span class="num" id="2314135">7</span>&nbsp;<span class="op" id="2314137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314141">if</span>&nbsp;<span class="ident" id="2314144">maxDepth</span>&nbsp;<span class="op" id="2314153">==</span>&nbsp;<span class="num" id="2314156">0</span>&nbsp;<span class="op" id="2314158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314163">heapSort</span><span class="op" id="2314171">(</span><span class="ident" id="2314172">data</span><span class="op" id="2314176">,</span>&nbsp;<span class="ident" id="2314178">a</span><span class="op" id="2314179">,</span>&nbsp;<span class="ident" id="2314181">b</span><span class="op" id="2314182">)</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314187">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314200">maxDepth</span><span class="op" id="2314208">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314213">mlo</span><span class="op" id="2314216">,</span>&nbsp;<span class="ident" id="2314218">mhi</span>&nbsp;<span class="op" id="2314222">:=</span>&nbsp;<span class="ident" id="2314225">doPivot</span><span class="op" id="2314232">(</span><span class="ident" id="2314233">data</span><span class="op" id="2314237">,</span>&nbsp;<span class="ident" id="2314239">a</span><span class="op" id="2314240">,</span>&nbsp;<span class="ident" id="2314242">b</span><span class="op" id="2314243">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2314247">//&nbsp;Avoiding&nbsp;recursion&nbsp;on&nbsp;the&nbsp;larger&nbsp;subproblem&nbsp;guarantees</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2314307">//&nbsp;a&nbsp;stack&nbsp;depth&nbsp;of&nbsp;at&nbsp;most&nbsp;lg(b-a).</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314346">if</span>&nbsp;<span class="ident" id="2314349">mlo</span><span class="op" id="2314352">-</span><span class="ident" id="2314353">a</span>&nbsp;<span class="op" id="2314355">&lt;</span>&nbsp;<span class="ident" id="2314357">b</span><span class="op" id="2314358">-</span><span class="ident" id="2314359">mhi</span>&nbsp;<span class="op" id="2314363">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314368">quickSort</span><span class="op" id="2314377">(</span><span class="ident" id="2314378">data</span><span class="op" id="2314382">,</span>&nbsp;<span class="ident" id="2314384">a</span><span class="op" id="2314385">,</span>&nbsp;<span class="ident" id="2314387">mlo</span><span class="op" id="2314390">,</span>&nbsp;<span class="ident" id="2314392">maxDepth</span><span class="op" id="2314400">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314405">a</span>&nbsp;<span class="op" id="2314407">=</span>&nbsp;<span class="ident" id="2314409">mhi</span>&nbsp;<span class="comment" id="2314413">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;mhi,&nbsp;b)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314448">}</span>&nbsp;<span class="keyword" id="2314450">else</span>&nbsp;<span class="op" id="2314455">{</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314460">quickSort</span><span class="op" id="2314469">(</span><span class="ident" id="2314470">data</span><span class="op" id="2314474">,</span>&nbsp;<span class="ident" id="2314476">mhi</span><span class="op" id="2314479">,</span>&nbsp;<span class="ident" id="2314481">b</span><span class="op" id="2314482">,</span>&nbsp;<span class="ident" id="2314484">maxDepth</span><span class="op" id="2314492">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314497">b</span>&nbsp;<span class="op" id="2314499">=</span>&nbsp;<span class="ident" id="2314501">mlo</span>&nbsp;<span class="comment" id="2314505">//&nbsp;i.e.,&nbsp;quickSort(data,&nbsp;a,&nbsp;mlo)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314540">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314543">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314546">if</span>&nbsp;<span class="ident" id="2314549">b</span><span class="op" id="2314550">-</span><span class="ident" id="2314551">a</span>&nbsp;<span class="op" id="2314553">&gt;</span>&nbsp;<span class="num" id="2314555">1</span>&nbsp;<span class="op" id="2314557">{</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314561">insertionSort</span><span class="op" id="2314574">(</span><span class="ident" id="2314575">data</span><span class="op" id="2314579">,</span>&nbsp;<span class="ident" id="2314581">a</span><span class="op" id="2314582">,</span>&nbsp;<span class="ident" id="2314584">b</span><span class="op" id="2314585">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314588">}</span><br>
<span class="lineno"></span><span class="op" id="2314590">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2314593">//&nbsp;Sort&nbsp;sorts&nbsp;data.</span><br>
<span class="lineno">190</span><span class="comment" id="2314613">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;and&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2314687">//&nbsp;data.Less&nbsp;and&nbsp;data.Swap.&nbsp;The&nbsp;sort&nbsp;is&nbsp;not&nbsp;guaranteed&nbsp;to&nbsp;be&nbsp;stable.</span><br>
<span class="lineno"></span><span class="keyword" id="2314756">func</span>&nbsp;<span class="ident" id="2314761">Sort</span><span class="op" id="2314765">(</span><span class="ident" id="2314766">data</span>&nbsp;<span class="ident" id="2314771">Interface</span><span class="op" id="2314780">)</span>&nbsp;<span class="op" id="2314782">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2314785">//&nbsp;Switch&nbsp;to&nbsp;heapsort&nbsp;if&nbsp;depth&nbsp;of&nbsp;2*ceil(lg(n+1))&nbsp;is&nbsp;reached.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314848">n</span>&nbsp;<span class="op" id="2314850">:=</span>&nbsp;<span class="ident" id="2314853">data</span><span class="op" id="2314857">.</span><span class="ident" id="2314858">Len</span><span class="op" id="2314861">(</span><span class="op" id="2314862">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314865">maxDepth</span>&nbsp;<span class="op" id="2314874">:=</span>&nbsp;<span class="num" id="2314877">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2314880">for</span>&nbsp;<span class="ident" id="2314884">i</span>&nbsp;<span class="op" id="2314886">:=</span>&nbsp;<span class="ident" id="2314889">n</span><span class="op" id="2314890">;</span>&nbsp;<span class="ident" id="2314892">i</span>&nbsp;<span class="op" id="2314894">&gt;</span>&nbsp;<span class="num" id="2314896">0</span><span class="op" id="2314897">;</span>&nbsp;<span class="ident" id="2314899">i</span>&nbsp;<span class="op" id="2314901">&gt;&gt;=</span>&nbsp;<span class="num" id="2314905">1</span>&nbsp;<span class="op" id="2314907">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314911">maxDepth</span><span class="op" id="2314919">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2314923">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314926">maxDepth</span>&nbsp;<span class="op" id="2314935">*=</span>&nbsp;<span class="num" id="2314938">2</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2314941">quickSort</span><span class="op" id="2314950">(</span><span class="ident" id="2314951">data</span><span class="op" id="2314955">,</span>&nbsp;<span class="num" id="2314957">0</span><span class="op" id="2314958">,</span>&nbsp;<span class="ident" id="2314960">n</span><span class="op" id="2314961">,</span>&nbsp;<span class="ident" id="2314963">maxDepth</span><span class="op" id="2314971">)</span><br>
<span class="lineno"></span><span class="op" id="2314973">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2314976">type</span>&nbsp;<span class="ident" id="2314981">reverse</span>&nbsp;<span class="keyword" id="2314989">struct</span>&nbsp;<span class="op" id="2314996">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2314999">//&nbsp;This&nbsp;embedded&nbsp;Interface&nbsp;permits&nbsp;Reverse&nbsp;to&nbsp;use&nbsp;the&nbsp;methods&nbsp;of</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="2315065">//&nbsp;another&nbsp;Interface&nbsp;implementation.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2315103">Interface</span><br>
<span class="lineno"></span><span class="op" id="2315113">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315116">//&nbsp;Less&nbsp;returns&nbsp;the&nbsp;opposite&nbsp;of&nbsp;the&nbsp;embedded&nbsp;implementation&#39;s&nbsp;Less&nbsp;method.</span><br>
<span class="lineno">210</span><span class="keyword" id="2315191">func</span>&nbsp;<span class="op" id="2315196">(</span><span class="ident" id="2315197">r</span>&nbsp;<span class="ident" id="2315199">reverse</span><span class="op" id="2315206">)</span>&nbsp;<span class="ident" id="2315208">Less</span><span class="op" id="2315212">(</span><span class="ident" id="2315213">i</span><span class="op" id="2315214">,</span>&nbsp;<span class="ident" id="2315216">j</span>&nbsp;<span class="builtintype" id="2315218">int</span><span class="op" id="2315221">)</span>&nbsp;<span class="builtintype" id="2315223">bool</span>&nbsp;<span class="op" id="2315228">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315231">return</span>&nbsp;<span class="ident" id="2315238">r</span><span class="op" id="2315239">.</span><span class="ident" id="2315240">Interface</span><span class="op" id="2315249">.</span><span class="ident" id="2315250">Less</span><span class="op" id="2315254">(</span><span class="ident" id="2315255">j</span><span class="op" id="2315256">,</span>&nbsp;<span class="ident" id="2315258">i</span><span class="op" id="2315259">)</span><br>
<span class="lineno"></span><span class="op" id="2315261">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315264">//&nbsp;Reverse&nbsp;returns&nbsp;the&nbsp;reverse&nbsp;order&nbsp;for&nbsp;data.</span><br>
<span class="lineno">215</span><span class="keyword" id="2315311">func</span>&nbsp;<span class="ident" id="2315316">Reverse</span><span class="op" id="2315323">(</span><span class="ident" id="2315324">data</span>&nbsp;<span class="ident" id="2315329">Interface</span><span class="op" id="2315338">)</span>&nbsp;<span class="ident" id="2315340">Interface</span>&nbsp;<span class="op" id="2315350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315353">return</span>&nbsp;<span class="op" id="2315360">&amp;</span><span class="ident" id="2315361">reverse</span><span class="op" id="2315368">{</span><span class="ident" id="2315369">data</span><span class="op" id="2315373">}</span><br>
<span class="lineno"></span><span class="op" id="2315375">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315378">//&nbsp;IsSorted&nbsp;reports&nbsp;whether&nbsp;data&nbsp;is&nbsp;sorted.</span><br>
<span class="lineno">220</span><span class="keyword" id="2315422">func</span>&nbsp;<span class="ident" id="2315427">IsSorted</span><span class="op" id="2315435">(</span><span class="ident" id="2315436">data</span>&nbsp;<span class="ident" id="2315441">Interface</span><span class="op" id="2315450">)</span>&nbsp;<span class="builtintype" id="2315452">bool</span>&nbsp;<span class="op" id="2315457">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2315460">n</span>&nbsp;<span class="op" id="2315462">:=</span>&nbsp;<span class="ident" id="2315465">data</span><span class="op" id="2315469">.</span><span class="ident" id="2315470">Len</span><span class="op" id="2315473">(</span><span class="op" id="2315474">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315477">for</span>&nbsp;<span class="ident" id="2315481">i</span>&nbsp;<span class="op" id="2315483">:=</span>&nbsp;<span class="ident" id="2315486">n</span>&nbsp;<span class="op" id="2315488">-</span>&nbsp;<span class="num" id="2315490">1</span><span class="op" id="2315491">;</span>&nbsp;<span class="ident" id="2315493">i</span>&nbsp;<span class="op" id="2315495">&gt;</span>&nbsp;<span class="num" id="2315497">0</span><span class="op" id="2315498">;</span>&nbsp;<span class="ident" id="2315500">i</span><span class="op" id="2315501">--</span>&nbsp;<span class="op" id="2315504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315508">if</span>&nbsp;<span class="ident" id="2315511">data</span><span class="op" id="2315515">.</span><span class="ident" id="2315516">Less</span><span class="op" id="2315520">(</span><span class="ident" id="2315521">i</span><span class="op" id="2315522">,</span>&nbsp;<span class="ident" id="2315524">i</span><span class="op" id="2315525">-</span><span class="num" id="2315526">1</span><span class="op" id="2315527">)</span>&nbsp;<span class="op" id="2315529">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315534">return</span>&nbsp;<span class="builtintype" id="2315541">false</span><br>
<span class="lineno">225</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2315549">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2315552">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2315555">return</span>&nbsp;<span class="builtintype" id="2315562">true</span><br>
<span class="lineno"></span><span class="op" id="2315567">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="comment" id="2315570">//&nbsp;Convenience&nbsp;types&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315609">//&nbsp;IntSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]int,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2315694">type</span>&nbsp;<span class="ident" id="2315699">IntSlice</span>&nbsp;<span class="op" id="2315708">[</span><span class="op" id="2315709">]</span><span class="builtintype" id="2315710">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="2315715">func</span>&nbsp;<span class="op" id="2315720">(</span><span class="ident" id="2315721">p</span>&nbsp;<span class="ident" id="2315723">IntSlice</span><span class="op" id="2315731">)</span>&nbsp;<span class="ident" id="2315733">Len</span><span class="op" id="2315736">(</span><span class="op" id="2315737">)</span>&nbsp;<span class="builtintype" id="2315739">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315753">{</span>&nbsp;<span class="keyword" id="2315755">return</span>&nbsp;<span class="builtinfunc" id="2315762">len</span><span class="op" id="2315765">(</span><span class="ident" id="2315766">p</span><span class="op" id="2315767">)</span>&nbsp;<span class="op" id="2315769">}</span><br>
<span class="lineno"></span><span class="keyword" id="2315771">func</span>&nbsp;<span class="op" id="2315776">(</span><span class="ident" id="2315777">p</span>&nbsp;<span class="ident" id="2315779">IntSlice</span><span class="op" id="2315787">)</span>&nbsp;<span class="ident" id="2315789">Less</span><span class="op" id="2315793">(</span><span class="ident" id="2315794">i</span><span class="op" id="2315795">,</span>&nbsp;<span class="ident" id="2315797">j</span>&nbsp;<span class="builtintype" id="2315799">int</span><span class="op" id="2315802">)</span>&nbsp;<span class="builtintype" id="2315804">bool</span>&nbsp;<span class="op" id="2315809">{</span>&nbsp;<span class="keyword" id="2315811">return</span>&nbsp;<span class="ident" id="2315818">p</span><span class="op" id="2315819">[</span><span class="ident" id="2315820">i</span><span class="op" id="2315821">]</span>&nbsp;<span class="op" id="2315823">&lt;</span>&nbsp;<span class="ident" id="2315825">p</span><span class="op" id="2315826">[</span><span class="ident" id="2315827">j</span><span class="op" id="2315828">]</span>&nbsp;<span class="op" id="2315830">}</span><br>
<span class="lineno"></span><span class="keyword" id="2315832">func</span>&nbsp;<span class="op" id="2315837">(</span><span class="ident" id="2315838">p</span>&nbsp;<span class="ident" id="2315840">IntSlice</span><span class="op" id="2315848">)</span>&nbsp;<span class="ident" id="2315850">Swap</span><span class="op" id="2315854">(</span><span class="ident" id="2315855">i</span><span class="op" id="2315856">,</span>&nbsp;<span class="ident" id="2315858">j</span>&nbsp;<span class="builtintype" id="2315860">int</span><span class="op" id="2315863">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2315870">{</span>&nbsp;<span class="ident" id="2315872">p</span><span class="op" id="2315873">[</span><span class="ident" id="2315874">i</span><span class="op" id="2315875">]</span><span class="op" id="2315876">,</span>&nbsp;<span class="ident" id="2315878">p</span><span class="op" id="2315879">[</span><span class="ident" id="2315880">j</span><span class="op" id="2315881">]</span>&nbsp;<span class="op" id="2315883">=</span>&nbsp;<span class="ident" id="2315885">p</span><span class="op" id="2315886">[</span><span class="ident" id="2315887">j</span><span class="op" id="2315888">]</span><span class="op" id="2315889">,</span>&nbsp;<span class="ident" id="2315891">p</span><span class="op" id="2315892">[</span><span class="ident" id="2315893">i</span><span class="op" id="2315894">]</span>&nbsp;<span class="op" id="2315896">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315899">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">240</span><span class="keyword" id="2315932">func</span>&nbsp;<span class="op" id="2315937">(</span><span class="ident" id="2315938">p</span>&nbsp;<span class="ident" id="2315940">IntSlice</span><span class="op" id="2315948">)</span>&nbsp;<span class="ident" id="2315950">Sort</span><span class="op" id="2315954">(</span><span class="op" id="2315955">)</span>&nbsp;<span class="op" id="2315957">{</span>&nbsp;<span class="ident" id="2315959">Sort</span><span class="op" id="2315963">(</span><span class="ident" id="2315964">p</span><span class="op" id="2315965">)</span>&nbsp;<span class="op" id="2315967">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2315970">//&nbsp;Float64Slice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]float64,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2316063">type</span>&nbsp;<span class="ident" id="2316068">Float64Slice</span>&nbsp;<span class="op" id="2316081">[</span><span class="op" id="2316082">]</span><span class="builtintype" id="2316083">float64</span><br>
<span class="lineno"></span><br>
<span class="lineno">245</span><span class="keyword" id="2316092">func</span>&nbsp;<span class="op" id="2316097">(</span><span class="ident" id="2316098">p</span>&nbsp;<span class="ident" id="2316100">Float64Slice</span><span class="op" id="2316112">)</span>&nbsp;<span class="ident" id="2316114">Len</span><span class="op" id="2316117">(</span><span class="op" id="2316118">)</span>&nbsp;<span class="builtintype" id="2316120">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316134">{</span>&nbsp;<span class="keyword" id="2316136">return</span>&nbsp;<span class="builtinfunc" id="2316143">len</span><span class="op" id="2316146">(</span><span class="ident" id="2316147">p</span><span class="op" id="2316148">)</span>&nbsp;<span class="op" id="2316150">}</span><br>
<span class="lineno"></span><span class="keyword" id="2316152">func</span>&nbsp;<span class="op" id="2316157">(</span><span class="ident" id="2316158">p</span>&nbsp;<span class="ident" id="2316160">Float64Slice</span><span class="op" id="2316172">)</span>&nbsp;<span class="ident" id="2316174">Less</span><span class="op" id="2316178">(</span><span class="ident" id="2316179">i</span><span class="op" id="2316180">,</span>&nbsp;<span class="ident" id="2316182">j</span>&nbsp;<span class="builtintype" id="2316184">int</span><span class="op" id="2316187">)</span>&nbsp;<span class="builtintype" id="2316189">bool</span>&nbsp;<span class="op" id="2316194">{</span>&nbsp;<span class="keyword" id="2316196">return</span>&nbsp;<span class="ident" id="2316203">p</span><span class="op" id="2316204">[</span><span class="ident" id="2316205">i</span><span class="op" id="2316206">]</span>&nbsp;<span class="op" id="2316208">&lt;</span>&nbsp;<span class="ident" id="2316210">p</span><span class="op" id="2316211">[</span><span class="ident" id="2316212">j</span><span class="op" id="2316213">]</span>&nbsp;<span class="op" id="2316215">||</span>&nbsp;<span class="ident" id="2316218">isNaN</span><span class="op" id="2316223">(</span><span class="ident" id="2316224">p</span><span class="op" id="2316225">[</span><span class="ident" id="2316226">i</span><span class="op" id="2316227">]</span><span class="op" id="2316228">)</span>&nbsp;<span class="op" id="2316230">&amp;&amp;</span>&nbsp;<span class="op" id="2316233">!</span><span class="ident" id="2316234">isNaN</span><span class="op" id="2316239">(</span><span class="ident" id="2316240">p</span><span class="op" id="2316241">[</span><span class="ident" id="2316242">j</span><span class="op" id="2316243">]</span><span class="op" id="2316244">)</span>&nbsp;<span class="op" id="2316246">}</span><br>
<span class="lineno"></span><span class="keyword" id="2316248">func</span>&nbsp;<span class="op" id="2316253">(</span><span class="ident" id="2316254">p</span>&nbsp;<span class="ident" id="2316256">Float64Slice</span><span class="op" id="2316268">)</span>&nbsp;<span class="ident" id="2316270">Swap</span><span class="op" id="2316274">(</span><span class="ident" id="2316275">i</span><span class="op" id="2316276">,</span>&nbsp;<span class="ident" id="2316278">j</span>&nbsp;<span class="builtintype" id="2316280">int</span><span class="op" id="2316283">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316290">{</span>&nbsp;<span class="ident" id="2316292">p</span><span class="op" id="2316293">[</span><span class="ident" id="2316294">i</span><span class="op" id="2316295">]</span><span class="op" id="2316296">,</span>&nbsp;<span class="ident" id="2316298">p</span><span class="op" id="2316299">[</span><span class="ident" id="2316300">j</span><span class="op" id="2316301">]</span>&nbsp;<span class="op" id="2316303">=</span>&nbsp;<span class="ident" id="2316305">p</span><span class="op" id="2316306">[</span><span class="ident" id="2316307">j</span><span class="op" id="2316308">]</span><span class="op" id="2316309">,</span>&nbsp;<span class="ident" id="2316311">p</span><span class="op" id="2316312">[</span><span class="ident" id="2316313">i</span><span class="op" id="2316314">]</span>&nbsp;<span class="op" id="2316316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316319">//&nbsp;isNaN&nbsp;is&nbsp;a&nbsp;copy&nbsp;of&nbsp;math.IsNaN&nbsp;to&nbsp;avoid&nbsp;a&nbsp;dependency&nbsp;on&nbsp;the&nbsp;math&nbsp;package.</span><br>
<span class="lineno">250</span><span class="keyword" id="2316395">func</span>&nbsp;<span class="ident" id="2316400">isNaN</span><span class="op" id="2316405">(</span><span class="ident" id="2316406">f</span>&nbsp;<span class="builtintype" id="2316408">float64</span><span class="op" id="2316415">)</span>&nbsp;<span class="builtintype" id="2316417">bool</span>&nbsp;<span class="op" id="2316422">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2316425">return</span>&nbsp;<span class="ident" id="2316432">f</span>&nbsp;<span class="op" id="2316434">!=</span>&nbsp;<span class="ident" id="2316437">f</span><br>
<span class="lineno"></span><span class="op" id="2316439">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316442">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">255</span><span class="keyword" id="2316475">func</span>&nbsp;<span class="op" id="2316480">(</span><span class="ident" id="2316481">p</span>&nbsp;<span class="ident" id="2316483">Float64Slice</span><span class="op" id="2316495">)</span>&nbsp;<span class="ident" id="2316497">Sort</span><span class="op" id="2316501">(</span><span class="op" id="2316502">)</span>&nbsp;<span class="op" id="2316504">{</span>&nbsp;<span class="ident" id="2316506">Sort</span><span class="op" id="2316510">(</span><span class="ident" id="2316511">p</span><span class="op" id="2316512">)</span>&nbsp;<span class="op" id="2316514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316517">//&nbsp;StringSlice&nbsp;attaches&nbsp;the&nbsp;methods&nbsp;of&nbsp;Interface&nbsp;to&nbsp;[]string,&nbsp;sorting&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2316608">type</span>&nbsp;<span class="ident" id="2316613">StringSlice</span>&nbsp;<span class="op" id="2316625">[</span><span class="op" id="2316626">]</span><span class="builtintype" id="2316627">string</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="keyword" id="2316635">func</span>&nbsp;<span class="op" id="2316640">(</span><span class="ident" id="2316641">p</span>&nbsp;<span class="ident" id="2316643">StringSlice</span><span class="op" id="2316654">)</span>&nbsp;<span class="ident" id="2316656">Len</span><span class="op" id="2316659">(</span><span class="op" id="2316660">)</span>&nbsp;<span class="builtintype" id="2316662">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316676">{</span>&nbsp;<span class="keyword" id="2316678">return</span>&nbsp;<span class="builtinfunc" id="2316685">len</span><span class="op" id="2316688">(</span><span class="ident" id="2316689">p</span><span class="op" id="2316690">)</span>&nbsp;<span class="op" id="2316692">}</span><br>
<span class="lineno"></span><span class="keyword" id="2316694">func</span>&nbsp;<span class="op" id="2316699">(</span><span class="ident" id="2316700">p</span>&nbsp;<span class="ident" id="2316702">StringSlice</span><span class="op" id="2316713">)</span>&nbsp;<span class="ident" id="2316715">Less</span><span class="op" id="2316719">(</span><span class="ident" id="2316720">i</span><span class="op" id="2316721">,</span>&nbsp;<span class="ident" id="2316723">j</span>&nbsp;<span class="builtintype" id="2316725">int</span><span class="op" id="2316728">)</span>&nbsp;<span class="builtintype" id="2316730">bool</span>&nbsp;<span class="op" id="2316735">{</span>&nbsp;<span class="keyword" id="2316737">return</span>&nbsp;<span class="ident" id="2316744">p</span><span class="op" id="2316745">[</span><span class="ident" id="2316746">i</span><span class="op" id="2316747">]</span>&nbsp;<span class="op" id="2316749">&lt;</span>&nbsp;<span class="ident" id="2316751">p</span><span class="op" id="2316752">[</span><span class="ident" id="2316753">j</span><span class="op" id="2316754">]</span>&nbsp;<span class="op" id="2316756">}</span><br>
<span class="lineno"></span><span class="keyword" id="2316758">func</span>&nbsp;<span class="op" id="2316763">(</span><span class="ident" id="2316764">p</span>&nbsp;<span class="ident" id="2316766">StringSlice</span><span class="op" id="2316777">)</span>&nbsp;<span class="ident" id="2316779">Swap</span><span class="op" id="2316783">(</span><span class="ident" id="2316784">i</span><span class="op" id="2316785">,</span>&nbsp;<span class="ident" id="2316787">j</span>&nbsp;<span class="builtintype" id="2316789">int</span><span class="op" id="2316792">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2316799">{</span>&nbsp;<span class="ident" id="2316801">p</span><span class="op" id="2316802">[</span><span class="ident" id="2316803">i</span><span class="op" id="2316804">]</span><span class="op" id="2316805">,</span>&nbsp;<span class="ident" id="2316807">p</span><span class="op" id="2316808">[</span><span class="ident" id="2316809">j</span><span class="op" id="2316810">]</span>&nbsp;<span class="op" id="2316812">=</span>&nbsp;<span class="ident" id="2316814">p</span><span class="op" id="2316815">[</span><span class="ident" id="2316816">j</span><span class="op" id="2316817">]</span><span class="op" id="2316818">,</span>&nbsp;<span class="ident" id="2316820">p</span><span class="op" id="2316821">[</span><span class="ident" id="2316822">i</span><span class="op" id="2316823">]</span>&nbsp;<span class="op" id="2316825">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316828">//&nbsp;Sort&nbsp;is&nbsp;a&nbsp;convenience&nbsp;method.</span><br>
<span class="lineno">265</span><span class="keyword" id="2316861">func</span>&nbsp;<span class="op" id="2316866">(</span><span class="ident" id="2316867">p</span>&nbsp;<span class="ident" id="2316869">StringSlice</span><span class="op" id="2316880">)</span>&nbsp;<span class="ident" id="2316882">Sort</span><span class="op" id="2316886">(</span><span class="op" id="2316887">)</span>&nbsp;<span class="op" id="2316889">{</span>&nbsp;<span class="ident" id="2316891">Sort</span><span class="op" id="2316895">(</span><span class="ident" id="2316896">p</span><span class="op" id="2316897">)</span>&nbsp;<span class="op" id="2316899">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316902">//&nbsp;Convenience&nbsp;wrappers&nbsp;for&nbsp;common&nbsp;cases</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2316944">//&nbsp;Ints&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">270</span><span class="keyword" id="2316995">func</span>&nbsp;<span class="ident" id="2317000">Ints</span><span class="op" id="2317004">(</span><span class="ident" id="2317005">a</span>&nbsp;<span class="op" id="2317007">[</span><span class="op" id="2317008">]</span><span class="builtintype" id="2317009">int</span><span class="op" id="2317012">)</span>&nbsp;<span class="op" id="2317014">{</span>&nbsp;<span class="ident" id="2317016">Sort</span><span class="op" id="2317020">(</span><span class="ident" id="2317021">IntSlice</span><span class="op" id="2317029">(</span><span class="ident" id="2317030">a</span><span class="op" id="2317031">)</span><span class="op" id="2317032">)</span>&nbsp;<span class="op" id="2317034">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2317037">//&nbsp;Float64s&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2317096">func</span>&nbsp;<span class="ident" id="2317101">Float64s</span><span class="op" id="2317109">(</span><span class="ident" id="2317110">a</span>&nbsp;<span class="op" id="2317112">[</span><span class="op" id="2317113">]</span><span class="builtintype" id="2317114">float64</span><span class="op" id="2317121">)</span>&nbsp;<span class="op" id="2317123">{</span>&nbsp;<span class="ident" id="2317125">Sort</span><span class="op" id="2317129">(</span><span class="ident" id="2317130">Float64Slice</span><span class="op" id="2317142">(</span><span class="ident" id="2317143">a</span><span class="op" id="2317144">)</span><span class="op" id="2317145">)</span>&nbsp;<span class="op" id="2317147">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">275</span><span class="comment" id="2317150">//&nbsp;Strings&nbsp;sorts&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2317207">func</span>&nbsp;<span class="ident" id="2317212">Strings</span><span class="op" id="2317219">(</span><span class="ident" id="2317220">a</span>&nbsp;<span class="op" id="2317222">[</span><span class="op" id="2317223">]</span><span class="builtintype" id="2317224">string</span><span class="op" id="2317230">)</span>&nbsp;<span class="op" id="2317232">{</span>&nbsp;<span class="ident" id="2317234">Sort</span><span class="op" id="2317238">(</span><span class="ident" id="2317239">StringSlice</span><span class="op" id="2317250">(</span><span class="ident" id="2317251">a</span><span class="op" id="2317252">)</span><span class="op" id="2317253">)</span>&nbsp;<span class="op" id="2317255">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2317258">//&nbsp;IntsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;ints&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2317336">func</span>&nbsp;<span class="ident" id="2317341">IntsAreSorted</span><span class="op" id="2317354">(</span><span class="ident" id="2317355">a</span>&nbsp;<span class="op" id="2317357">[</span><span class="op" id="2317358">]</span><span class="builtintype" id="2317359">int</span><span class="op" id="2317362">)</span>&nbsp;<span class="builtintype" id="2317364">bool</span>&nbsp;<span class="op" id="2317369">{</span>&nbsp;<span class="keyword" id="2317371">return</span>&nbsp;<span class="ident" id="2317378">IsSorted</span><span class="op" id="2317386">(</span><span class="ident" id="2317387">IntSlice</span><span class="op" id="2317395">(</span><span class="ident" id="2317396">a</span><span class="op" id="2317397">)</span><span class="op" id="2317398">)</span>&nbsp;<span class="op" id="2317400">}</span><br>
<span class="lineno">280</span><br>
<span class="lineno"></span><span class="comment" id="2317403">//&nbsp;Float64sAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;float64s&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno"></span><span class="keyword" id="2317489">func</span>&nbsp;<span class="ident" id="2317494">Float64sAreSorted</span><span class="op" id="2317511">(</span><span class="ident" id="2317512">a</span>&nbsp;<span class="op" id="2317514">[</span><span class="op" id="2317515">]</span><span class="builtintype" id="2317516">float64</span><span class="op" id="2317523">)</span>&nbsp;<span class="builtintype" id="2317525">bool</span>&nbsp;<span class="op" id="2317530">{</span>&nbsp;<span class="keyword" id="2317532">return</span>&nbsp;<span class="ident" id="2317539">IsSorted</span><span class="op" id="2317547">(</span><span class="ident" id="2317548">Float64Slice</span><span class="op" id="2317560">(</span><span class="ident" id="2317561">a</span><span class="op" id="2317562">)</span><span class="op" id="2317563">)</span>&nbsp;<span class="op" id="2317565">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2317568">//&nbsp;StringsAreSorted&nbsp;tests&nbsp;whether&nbsp;a&nbsp;slice&nbsp;of&nbsp;strings&nbsp;is&nbsp;sorted&nbsp;in&nbsp;increasing&nbsp;order.</span><br>
<span class="lineno">285</span><span class="keyword" id="2317652">func</span>&nbsp;<span class="ident" id="2317657">StringsAreSorted</span><span class="op" id="2317673">(</span><span class="ident" id="2317674">a</span>&nbsp;<span class="op" id="2317676">[</span><span class="op" id="2317677">]</span><span class="builtintype" id="2317678">string</span><span class="op" id="2317684">)</span>&nbsp;<span class="builtintype" id="2317686">bool</span>&nbsp;<span class="op" id="2317691">{</span>&nbsp;<span class="keyword" id="2317693">return</span>&nbsp;<span class="ident" id="2317700">IsSorted</span><span class="op" id="2317708">(</span><span class="ident" id="2317709">StringSlice</span><span class="op" id="2317720">(</span><span class="ident" id="2317721">a</span><span class="op" id="2317722">)</span><span class="op" id="2317723">)</span>&nbsp;<span class="op" id="2317725">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2317728">//&nbsp;Notes&nbsp;on&nbsp;stable&nbsp;sorting:</span><br>
<span class="lineno"></span><span class="comment" id="2317756">//&nbsp;The&nbsp;used&nbsp;algorithms&nbsp;are&nbsp;simple&nbsp;and&nbsp;provable&nbsp;correct&nbsp;on&nbsp;all&nbsp;input&nbsp;and&nbsp;use</span><br>
<span class="lineno"></span><span class="comment" id="2317832">//&nbsp;only&nbsp;logarithmic&nbsp;additional&nbsp;stack&nbsp;space.&nbsp;&nbsp;They&nbsp;perform&nbsp;well&nbsp;if&nbsp;compared</span><br>
<span class="lineno">290</span><span class="comment" id="2317907">//&nbsp;experimentally&nbsp;to&nbsp;other&nbsp;stable&nbsp;in-place&nbsp;sorting&nbsp;algorithms.</span><br>
<span class="lineno"></span><span class="comment" id="2317970">//</span><br>
<span class="lineno"></span><span class="comment" id="2317973">//&nbsp;Remarks&nbsp;on&nbsp;other&nbsp;algorithms&nbsp;evaluated:</span><br>
<span class="lineno"></span><span class="comment" id="2318015">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;4.6.3&nbsp;stable_sort&nbsp;with&nbsp;merge_without_buffer&nbsp;from&nbsp;libstdc++:</span><br>
<span class="lineno"></span><span class="comment" id="2318087">//&nbsp;&nbsp;&nbsp;&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno">295</span><span class="comment" id="2318105">//&nbsp;&nbsp;-&nbsp;GCC&#39;s&nbsp;__rotate&nbsp;for&nbsp;block&nbsp;rotations:&nbsp;Not&nbsp;faster.</span><br>
<span class="lineno"></span><span class="comment" id="2318159">//&nbsp;&nbsp;-&nbsp;&#34;Practical&nbsp;in-place&nbsp;mergesort&#34;&nbsp;from&nbsp;&nbsp;Jyrki&nbsp;Katajainen,&nbsp;Tomi&nbsp;A.&nbsp;Pasanen</span><br>
<span class="lineno"></span><span class="comment" id="2318236">//&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;Jukka&nbsp;Teuhola;&nbsp;Nordic&nbsp;Journal&nbsp;of&nbsp;Computing&nbsp;3,1&nbsp;(1996),&nbsp;27-40:</span><br>
<span class="lineno"></span><span class="comment" id="2318308">//&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;given&nbsp;algorithms&nbsp;are&nbsp;in-place,&nbsp;number&nbsp;of&nbsp;Swap&nbsp;and&nbsp;Assignments</span><br>
<span class="lineno"></span><span class="comment" id="2318380">//&nbsp;&nbsp;&nbsp;&nbsp;grow&nbsp;as&nbsp;n&nbsp;log&nbsp;n&nbsp;but&nbsp;the&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;stable.</span><br>
<span class="lineno">300</span><span class="comment" id="2318435">//&nbsp;&nbsp;-&nbsp;&#34;Fast&nbsp;Stable&nbsp;In-Plcae&nbsp;Sorting&nbsp;with&nbsp;O(n)&nbsp;Data&nbsp;Moves&#34;&nbsp;J.I.&nbsp;Munro&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="2318508">//&nbsp;&nbsp;&nbsp;&nbsp;V.&nbsp;Raman&nbsp;in&nbsp;Algorithmica&nbsp;(1996)&nbsp;16,&nbsp;115-160:</span><br>
<span class="lineno"></span><span class="comment" id="2318559">//&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;algorithm&nbsp;either&nbsp;needs&nbsp;additional&nbsp;2n&nbsp;bits&nbsp;or&nbsp;works&nbsp;only&nbsp;if&nbsp;there</span><br>
<span class="lineno"></span><span class="comment" id="2318635">//&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;enough&nbsp;different&nbsp;elements&nbsp;available&nbsp;to&nbsp;encode&nbsp;some&nbsp;permutations</span><br>
<span class="lineno"></span><span class="comment" id="2318709">//&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;have&nbsp;to&nbsp;be&nbsp;undone&nbsp;later&nbsp;(so&nbsp;not&nbsp;stable&nbsp;an&nbsp;any&nbsp;input).</span><br>
<span class="lineno">305</span><span class="comment" id="2318775">//&nbsp;&nbsp;-&nbsp;All&nbsp;the&nbsp;optimal&nbsp;in-place&nbsp;sorting/merging&nbsp;algorithms&nbsp;I&nbsp;found&nbsp;are&nbsp;either</span><br>
<span class="lineno"></span><span class="comment" id="2318852">//&nbsp;&nbsp;&nbsp;&nbsp;unstable&nbsp;or&nbsp;rely&nbsp;on&nbsp;enough&nbsp;different&nbsp;elements&nbsp;in&nbsp;each&nbsp;step&nbsp;to&nbsp;encode&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="2318931">//&nbsp;&nbsp;&nbsp;&nbsp;performed&nbsp;block&nbsp;rearrangements.&nbsp;See&nbsp;also&nbsp;&#34;In-Place&nbsp;Merging&nbsp;Algorithms&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="2319009">//&nbsp;&nbsp;&nbsp;&nbsp;Denham&nbsp;Coates-Evely,&nbsp;Department&nbsp;of&nbsp;Computer&nbsp;Science,&nbsp;Kings&nbsp;College,</span><br>
<span class="lineno"></span><span class="comment" id="2319083">//&nbsp;&nbsp;&nbsp;&nbsp;January&nbsp;2004&nbsp;and&nbsp;the&nbsp;reverences&nbsp;in&nbsp;there.</span><br>
<span class="lineno">310</span><span class="comment" id="2319131">//&nbsp;&nbsp;-&nbsp;Often&nbsp;&#34;optimal&#34;&nbsp;algorithms&nbsp;are&nbsp;optimal&nbsp;in&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments</span><br>
<span class="lineno"></span><span class="comment" id="2319205">//&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;Interface&nbsp;has&nbsp;only&nbsp;Swap&nbsp;as&nbsp;operation.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2319254">//&nbsp;Stable&nbsp;sorts&nbsp;data&nbsp;while&nbsp;keeping&nbsp;the&nbsp;original&nbsp;order&nbsp;of&nbsp;equal&nbsp;elements.</span><br>
<span class="lineno"></span><span class="comment" id="2319327">//</span><br>
<span class="lineno">315</span><span class="comment" id="2319330">//&nbsp;It&nbsp;makes&nbsp;one&nbsp;call&nbsp;to&nbsp;data.Len&nbsp;to&nbsp;determine&nbsp;n,&nbsp;O(n*log(n))&nbsp;calls&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="2319400">//&nbsp;data.Less&nbsp;and&nbsp;O(n*log(n)*log(n))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno"></span><span class="keyword" id="2319456">func</span>&nbsp;<span class="ident" id="2319461">Stable</span><span class="op" id="2319467">(</span><span class="ident" id="2319468">data</span>&nbsp;<span class="ident" id="2319473">Interface</span><span class="op" id="2319482">)</span>&nbsp;<span class="op" id="2319484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319487">n</span>&nbsp;<span class="op" id="2319489">:=</span>&nbsp;<span class="ident" id="2319492">data</span><span class="op" id="2319496">.</span><span class="ident" id="2319497">Len</span><span class="op" id="2319500">(</span><span class="op" id="2319501">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319504">blockSize</span>&nbsp;<span class="op" id="2319514">:=</span>&nbsp;<span class="num" id="2319517">20</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319521">a</span><span class="op" id="2319522">,</span>&nbsp;<span class="ident" id="2319524">b</span>&nbsp;<span class="op" id="2319526">:=</span>&nbsp;<span class="num" id="2319529">0</span><span class="op" id="2319530">,</span>&nbsp;<span class="ident" id="2319532">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319543">for</span>&nbsp;<span class="ident" id="2319547">b</span>&nbsp;<span class="op" id="2319549">&lt;=</span>&nbsp;<span class="ident" id="2319552">n</span>&nbsp;<span class="op" id="2319554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319558">insertionSort</span><span class="op" id="2319571">(</span><span class="ident" id="2319572">data</span><span class="op" id="2319576">,</span>&nbsp;<span class="ident" id="2319578">a</span><span class="op" id="2319579">,</span>&nbsp;<span class="ident" id="2319581">b</span><span class="op" id="2319582">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319586">a</span>&nbsp;<span class="op" id="2319588">=</span>&nbsp;<span class="ident" id="2319590">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319594">b</span>&nbsp;<span class="op" id="2319596">+=</span>&nbsp;<span class="ident" id="2319599">blockSize</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319610">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319613">insertionSort</span><span class="op" id="2319626">(</span><span class="ident" id="2319627">data</span><span class="op" id="2319631">,</span>&nbsp;<span class="ident" id="2319633">a</span><span class="op" id="2319634">,</span>&nbsp;<span class="ident" id="2319636">n</span><span class="op" id="2319637">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319641">for</span>&nbsp;<span class="ident" id="2319645">blockSize</span>&nbsp;<span class="op" id="2319655">&lt;</span>&nbsp;<span class="ident" id="2319657">n</span>&nbsp;<span class="op" id="2319659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319663">a</span><span class="op" id="2319664">,</span>&nbsp;<span class="ident" id="2319666">b</span>&nbsp;<span class="op" id="2319668">=</span>&nbsp;<span class="num" id="2319670">0</span><span class="op" id="2319671">,</span>&nbsp;<span class="num" id="2319673">2</span><span class="op" id="2319674">*</span><span class="ident" id="2319675">blockSize</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2319687">for</span>&nbsp;<span class="ident" id="2319691">b</span>&nbsp;<span class="op" id="2319693">&lt;=</span>&nbsp;<span class="ident" id="2319696">n</span>&nbsp;<span class="op" id="2319698">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319703">symMerge</span><span class="op" id="2319711">(</span><span class="ident" id="2319712">data</span><span class="op" id="2319716">,</span>&nbsp;<span class="ident" id="2319718">a</span><span class="op" id="2319719">,</span>&nbsp;<span class="ident" id="2319721">a</span><span class="op" id="2319722">+</span><span class="ident" id="2319723">blockSize</span><span class="op" id="2319732">,</span>&nbsp;<span class="ident" id="2319734">b</span><span class="op" id="2319735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319740">a</span>&nbsp;<span class="op" id="2319742">=</span>&nbsp;<span class="ident" id="2319744">b</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319749">b</span>&nbsp;<span class="op" id="2319751">+=</span>&nbsp;<span class="num" id="2319754">2</span>&nbsp;<span class="op" id="2319756">*</span>&nbsp;<span class="ident" id="2319758">blockSize</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319770">}</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319774">symMerge</span><span class="op" id="2319782">(</span><span class="ident" id="2319783">data</span><span class="op" id="2319787">,</span>&nbsp;<span class="ident" id="2319789">a</span><span class="op" id="2319790">,</span>&nbsp;<span class="ident" id="2319792">a</span><span class="op" id="2319793">+</span><span class="ident" id="2319794">blockSize</span><span class="op" id="2319803">,</span>&nbsp;<span class="ident" id="2319805">n</span><span class="op" id="2319806">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2319810">blockSize</span>&nbsp;<span class="op" id="2319820">*=</span>&nbsp;<span class="num" id="2319823">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2319826">}</span><br>
<span class="lineno"></span><span class="op" id="2319828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">340</span><span class="comment" id="2319831">//&nbsp;SymMerge&nbsp;merges&nbsp;the&nbsp;two&nbsp;sorted&nbsp;subsequences&nbsp;data[a:m]&nbsp;and&nbsp;data[m:b]&nbsp;using</span><br>
<span class="lineno"></span><span class="comment" id="2319908">//&nbsp;the&nbsp;SymMerge&nbsp;algorithm&nbsp;from&nbsp;Pok-Son&nbsp;Kim&nbsp;and&nbsp;Arne&nbsp;Kutzner,&nbsp;&#34;Stable&nbsp;Minimum</span><br>
<span class="lineno"></span><span class="comment" id="2319985">//&nbsp;Storage&nbsp;Merging&nbsp;by&nbsp;Symmetric&nbsp;Comparisons&#34;,&nbsp;in&nbsp;Susanne&nbsp;Albers&nbsp;and&nbsp;Tomasz</span><br>
<span class="lineno"></span><span class="comment" id="2320060">//&nbsp;Radzik,&nbsp;editors,&nbsp;Algorithms&nbsp;-&nbsp;ESA&nbsp;2004,&nbsp;volume&nbsp;3221&nbsp;of&nbsp;Lecture&nbsp;Notes&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="2320135">//&nbsp;Computer&nbsp;Science,&nbsp;pages&nbsp;714-723.&nbsp;Springer,&nbsp;2004.</span><br>
<span class="lineno">345</span><span class="comment" id="2320187">//</span><br>
<span class="lineno"></span><span class="comment" id="2320190">//&nbsp;Let&nbsp;M&nbsp;=&nbsp;m-a&nbsp;and&nbsp;N&nbsp;=&nbsp;b-n.&nbsp;Wolog&nbsp;M&nbsp;&lt;&nbsp;N.</span><br>
<span class="lineno"></span><span class="comment" id="2320231">//&nbsp;The&nbsp;recursion&nbsp;depth&nbsp;is&nbsp;bound&nbsp;by&nbsp;ceil(log(N+M)).</span><br>
<span class="lineno"></span><span class="comment" id="2320282">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O(M*log(N/M&nbsp;+&nbsp;1))&nbsp;calls&nbsp;to&nbsp;data.Less.</span><br>
<span class="lineno"></span><span class="comment" id="2320343">//&nbsp;The&nbsp;algorithm&nbsp;needs&nbsp;O((M+N)*log(M))&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">350</span><span class="comment" id="2320402">//</span><br>
<span class="lineno"></span><span class="comment" id="2320405">//&nbsp;The&nbsp;paper&nbsp;gives&nbsp;O((M+N)*log(M))&nbsp;as&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;assuming&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="2320480">//&nbsp;rotation&nbsp;algorithm&nbsp;which&nbsp;uses&nbsp;O(M+N+gcd(M+N))&nbsp;assignments.&nbsp;The&nbsp;argumentation</span><br>
<span class="lineno"></span><span class="comment" id="2320560">//&nbsp;in&nbsp;the&nbsp;paper&nbsp;carries&nbsp;through&nbsp;for&nbsp;Swap&nbsp;operations,&nbsp;especially&nbsp;as&nbsp;the&nbsp;block</span><br>
<span class="lineno"></span><span class="comment" id="2320637">//&nbsp;swapping&nbsp;rotate&nbsp;uses&nbsp;only&nbsp;O(M+N)&nbsp;Swaps.</span><br>
<span class="lineno">355</span><span class="keyword" id="2320680">func</span>&nbsp;<span class="ident" id="2320685">symMerge</span><span class="op" id="2320693">(</span><span class="ident" id="2320694">data</span>&nbsp;<span class="ident" id="2320699">Interface</span><span class="op" id="2320708">,</span>&nbsp;<span class="ident" id="2320710">a</span><span class="op" id="2320711">,</span>&nbsp;<span class="ident" id="2320713">m</span><span class="op" id="2320714">,</span>&nbsp;<span class="ident" id="2320716">b</span>&nbsp;<span class="builtintype" id="2320718">int</span><span class="op" id="2320721">)</span>&nbsp;<span class="op" id="2320723">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320726">if</span>&nbsp;<span class="ident" id="2320729">a</span>&nbsp;<span class="op" id="2320731">&gt;=</span>&nbsp;<span class="ident" id="2320734">m</span>&nbsp;<span class="op" id="2320736">||</span>&nbsp;<span class="ident" id="2320739">m</span>&nbsp;<span class="op" id="2320741">&gt;=</span>&nbsp;<span class="ident" id="2320744">b</span>&nbsp;<span class="op" id="2320746">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320750">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320758">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320762">mid</span>&nbsp;<span class="op" id="2320766">:=</span>&nbsp;<span class="ident" id="2320769">a</span>&nbsp;<span class="op" id="2320771">+</span>&nbsp;<span class="op" id="2320773">(</span><span class="ident" id="2320774">b</span><span class="op" id="2320775">-</span><span class="ident" id="2320776">a</span><span class="op" id="2320777">)</span><span class="op" id="2320778">/</span><span class="num" id="2320779">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320782">n</span>&nbsp;<span class="op" id="2320784">:=</span>&nbsp;<span class="ident" id="2320787">mid</span>&nbsp;<span class="op" id="2320791">+</span>&nbsp;<span class="ident" id="2320793">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320796">start</span>&nbsp;<span class="op" id="2320802">:=</span>&nbsp;<span class="num" id="2320805">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320808">if</span>&nbsp;<span class="ident" id="2320811">m</span>&nbsp;<span class="op" id="2320813">&gt;</span>&nbsp;<span class="ident" id="2320815">mid</span>&nbsp;<span class="op" id="2320819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320823">start</span>&nbsp;<span class="op" id="2320829">=</span>&nbsp;<span class="ident" id="2320831">n</span>&nbsp;<span class="op" id="2320833">-</span>&nbsp;<span class="ident" id="2320835">b</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320839">r</span><span class="op" id="2320840">,</span>&nbsp;<span class="ident" id="2320842">p</span>&nbsp;<span class="op" id="2320844">:=</span>&nbsp;<span class="ident" id="2320847">mid</span><span class="op" id="2320850">,</span>&nbsp;<span class="ident" id="2320852">n</span><span class="op" id="2320853">-</span><span class="num" id="2320854">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320858">for</span>&nbsp;<span class="ident" id="2320862">start</span>&nbsp;<span class="op" id="2320868">&lt;</span>&nbsp;<span class="ident" id="2320870">r</span>&nbsp;<span class="op" id="2320872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320877">c</span>&nbsp;<span class="op" id="2320879">:=</span>&nbsp;<span class="ident" id="2320882">start</span>&nbsp;<span class="op" id="2320888">+</span>&nbsp;<span class="op" id="2320890">(</span><span class="ident" id="2320891">r</span><span class="op" id="2320892">-</span><span class="ident" id="2320893">start</span><span class="op" id="2320898">)</span><span class="op" id="2320899">/</span><span class="num" id="2320900">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2320905">if</span>&nbsp;<span class="op" id="2320908">!</span><span class="ident" id="2320909">data</span><span class="op" id="2320913">.</span><span class="ident" id="2320914">Less</span><span class="op" id="2320918">(</span><span class="ident" id="2320919">p</span><span class="op" id="2320920">-</span><span class="ident" id="2320921">c</span><span class="op" id="2320922">,</span>&nbsp;<span class="ident" id="2320924">c</span><span class="op" id="2320925">)</span>&nbsp;<span class="op" id="2320927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320933">start</span>&nbsp;<span class="op" id="2320939">=</span>&nbsp;<span class="ident" id="2320941">c</span>&nbsp;<span class="op" id="2320943">+</span>&nbsp;<span class="num" id="2320945">1</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320950">}</span>&nbsp;<span class="keyword" id="2320952">else</span>&nbsp;<span class="op" id="2320957">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320963">r</span>&nbsp;<span class="op" id="2320965">=</span>&nbsp;<span class="ident" id="2320967">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320976">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2320979">}</span>&nbsp;<span class="keyword" id="2320981">else</span>&nbsp;<span class="op" id="2320986">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2320990">start</span>&nbsp;<span class="op" id="2320996">=</span>&nbsp;<span class="ident" id="2320998">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321002">r</span><span class="op" id="2321003">,</span>&nbsp;<span class="ident" id="2321005">p</span>&nbsp;<span class="op" id="2321007">:=</span>&nbsp;<span class="ident" id="2321010">m</span><span class="op" id="2321011">,</span>&nbsp;<span class="ident" id="2321013">n</span><span class="op" id="2321014">-</span><span class="num" id="2321015">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321019">for</span>&nbsp;<span class="ident" id="2321023">start</span>&nbsp;<span class="op" id="2321029">&lt;</span>&nbsp;<span class="ident" id="2321031">r</span>&nbsp;<span class="op" id="2321033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321038">c</span>&nbsp;<span class="op" id="2321040">:=</span>&nbsp;<span class="ident" id="2321043">start</span>&nbsp;<span class="op" id="2321049">+</span>&nbsp;<span class="op" id="2321051">(</span><span class="ident" id="2321052">r</span><span class="op" id="2321053">-</span><span class="ident" id="2321054">start</span><span class="op" id="2321059">)</span><span class="op" id="2321060">/</span><span class="num" id="2321061">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321066">if</span>&nbsp;<span class="op" id="2321069">!</span><span class="ident" id="2321070">data</span><span class="op" id="2321074">.</span><span class="ident" id="2321075">Less</span><span class="op" id="2321079">(</span><span class="ident" id="2321080">p</span><span class="op" id="2321081">-</span><span class="ident" id="2321082">c</span><span class="op" id="2321083">,</span>&nbsp;<span class="ident" id="2321085">c</span><span class="op" id="2321086">)</span>&nbsp;<span class="op" id="2321088">{</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321094">start</span>&nbsp;<span class="op" id="2321100">=</span>&nbsp;<span class="ident" id="2321102">c</span>&nbsp;<span class="op" id="2321104">+</span>&nbsp;<span class="num" id="2321106">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321111">}</span>&nbsp;<span class="keyword" id="2321113">else</span>&nbsp;<span class="op" id="2321118">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321124">r</span>&nbsp;<span class="op" id="2321126">=</span>&nbsp;<span class="ident" id="2321128">c</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321133">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321137">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321140">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321143">end</span>&nbsp;<span class="op" id="2321147">:=</span>&nbsp;<span class="ident" id="2321150">n</span>&nbsp;<span class="op" id="2321152">-</span>&nbsp;<span class="ident" id="2321154">start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321161">rotate</span><span class="op" id="2321167">(</span><span class="ident" id="2321168">data</span><span class="op" id="2321172">,</span>&nbsp;<span class="ident" id="2321174">start</span><span class="op" id="2321179">,</span>&nbsp;<span class="ident" id="2321181">m</span><span class="op" id="2321182">,</span>&nbsp;<span class="ident" id="2321184">end</span><span class="op" id="2321187">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321190">symMerge</span><span class="op" id="2321198">(</span><span class="ident" id="2321199">data</span><span class="op" id="2321203">,</span>&nbsp;<span class="ident" id="2321205">a</span><span class="op" id="2321206">,</span>&nbsp;<span class="ident" id="2321208">start</span><span class="op" id="2321213">,</span>&nbsp;<span class="ident" id="2321215">mid</span><span class="op" id="2321218">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321221">symMerge</span><span class="op" id="2321229">(</span><span class="ident" id="2321230">data</span><span class="op" id="2321234">,</span>&nbsp;<span class="ident" id="2321236">mid</span><span class="op" id="2321239">,</span>&nbsp;<span class="ident" id="2321241">end</span><span class="op" id="2321244">,</span>&nbsp;<span class="ident" id="2321246">b</span><span class="op" id="2321247">)</span><br>
<span class="lineno">390</span><span class="op" id="2321249">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2321252">//&nbsp;Rotate&nbsp;two&nbsp;consecutives&nbsp;blocks&nbsp;u&nbsp;=&nbsp;data[a:m]&nbsp;and&nbsp;v&nbsp;=&nbsp;data[m:b]&nbsp;in&nbsp;data:</span><br>
<span class="lineno"></span><span class="comment" id="2321327">//&nbsp;Data&nbsp;of&nbsp;the&nbsp;form&nbsp;&#39;x&nbsp;u&nbsp;v&nbsp;y&#39;&nbsp;is&nbsp;changed&nbsp;to&nbsp;&#39;x&nbsp;v&nbsp;u&nbsp;y&#39;.</span><br>
<span class="lineno"></span><span class="comment" id="2321382">//&nbsp;Rotate&nbsp;performs&nbsp;at&nbsp;most&nbsp;b-a&nbsp;many&nbsp;calls&nbsp;to&nbsp;data.Swap.</span><br>
<span class="lineno">395</span><span class="keyword" id="2321438">func</span>&nbsp;<span class="ident" id="2321443">rotate</span><span class="op" id="2321449">(</span><span class="ident" id="2321450">data</span>&nbsp;<span class="ident" id="2321455">Interface</span><span class="op" id="2321464">,</span>&nbsp;<span class="ident" id="2321466">a</span><span class="op" id="2321467">,</span>&nbsp;<span class="ident" id="2321469">m</span><span class="op" id="2321470">,</span>&nbsp;<span class="ident" id="2321472">b</span>&nbsp;<span class="builtintype" id="2321474">int</span><span class="op" id="2321477">)</span>&nbsp;<span class="op" id="2321479">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321482">i</span>&nbsp;<span class="op" id="2321484">:=</span>&nbsp;<span class="ident" id="2321487">m</span>&nbsp;<span class="op" id="2321489">-</span>&nbsp;<span class="ident" id="2321491">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321494">if</span>&nbsp;<span class="ident" id="2321497">i</span>&nbsp;<span class="op" id="2321499">==</span>&nbsp;<span class="num" id="2321502">0</span>&nbsp;<span class="op" id="2321504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321508">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321516">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321519">j</span>&nbsp;<span class="op" id="2321521">:=</span>&nbsp;<span class="ident" id="2321524">b</span>&nbsp;<span class="op" id="2321526">-</span>&nbsp;<span class="ident" id="2321528">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321531">if</span>&nbsp;<span class="ident" id="2321534">j</span>&nbsp;<span class="op" id="2321536">==</span>&nbsp;<span class="num" id="2321539">0</span>&nbsp;<span class="op" id="2321541">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321545">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321553">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321557">if</span>&nbsp;<span class="ident" id="2321560">i</span>&nbsp;<span class="op" id="2321562">==</span>&nbsp;<span class="ident" id="2321565">j</span>&nbsp;<span class="op" id="2321567">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321571">swapRange</span><span class="op" id="2321580">(</span><span class="ident" id="2321581">data</span><span class="op" id="2321585">,</span>&nbsp;<span class="ident" id="2321587">a</span><span class="op" id="2321588">,</span>&nbsp;<span class="ident" id="2321590">m</span><span class="op" id="2321591">,</span>&nbsp;<span class="ident" id="2321593">i</span><span class="op" id="2321594">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321598">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321606">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321610">p</span>&nbsp;<span class="op" id="2321612">:=</span>&nbsp;<span class="ident" id="2321615">a</span>&nbsp;<span class="op" id="2321617">+</span>&nbsp;<span class="ident" id="2321619">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321622">for</span>&nbsp;<span class="ident" id="2321626">i</span>&nbsp;<span class="op" id="2321628">!=</span>&nbsp;<span class="ident" id="2321631">j</span>&nbsp;<span class="op" id="2321633">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="2321637">if</span>&nbsp;<span class="ident" id="2321640">i</span>&nbsp;<span class="op" id="2321642">&gt;</span>&nbsp;<span class="ident" id="2321644">j</span>&nbsp;<span class="op" id="2321646">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321651">swapRange</span><span class="op" id="2321660">(</span><span class="ident" id="2321661">data</span><span class="op" id="2321665">,</span>&nbsp;<span class="ident" id="2321667">p</span><span class="op" id="2321668">-</span><span class="ident" id="2321669">i</span><span class="op" id="2321670">,</span>&nbsp;<span class="ident" id="2321672">p</span><span class="op" id="2321673">,</span>&nbsp;<span class="ident" id="2321675">j</span><span class="op" id="2321676">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321681">i</span>&nbsp;<span class="op" id="2321683">-=</span>&nbsp;<span class="ident" id="2321686">j</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321690">}</span>&nbsp;<span class="keyword" id="2321692">else</span>&nbsp;<span class="op" id="2321697">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321702">swapRange</span><span class="op" id="2321711">(</span><span class="ident" id="2321712">data</span><span class="op" id="2321716">,</span>&nbsp;<span class="ident" id="2321718">p</span><span class="op" id="2321719">-</span><span class="ident" id="2321720">i</span><span class="op" id="2321721">,</span>&nbsp;<span class="ident" id="2321723">p</span><span class="op" id="2321724">+</span><span class="ident" id="2321725">j</span><span class="op" id="2321726">-</span><span class="ident" id="2321727">i</span><span class="op" id="2321728">,</span>&nbsp;<span class="ident" id="2321730">i</span><span class="op" id="2321731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321736">j</span>&nbsp;<span class="op" id="2321738">-=</span>&nbsp;<span class="ident" id="2321741">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321745">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="2321748">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="2321751">swapRange</span><span class="op" id="2321760">(</span><span class="ident" id="2321761">data</span><span class="op" id="2321765">,</span>&nbsp;<span class="ident" id="2321767">p</span><span class="op" id="2321768">-</span><span class="ident" id="2321769">i</span><span class="op" id="2321770">,</span>&nbsp;<span class="ident" id="2321772">p</span><span class="op" id="2321773">,</span>&nbsp;<span class="ident" id="2321775">i</span><span class="op" id="2321776">)</span><br>
<span class="lineno"></span><span class="op" id="2321778">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2321781">/*<br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;Stable&nbsp;Sorting<br>
<span class="lineno">425</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>Complexity&nbsp;of&nbsp;block&nbsp;swapping&nbsp;rotation<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Each&nbsp;Swap&nbsp;puts&nbsp;one&nbsp;new&nbsp;element&nbsp;into&nbsp;its&nbsp;correct,&nbsp;final&nbsp;position.<br>
<span class="lineno">430</span>Elements&nbsp;which&nbsp;reach&nbsp;their&nbsp;final&nbsp;position&nbsp;are&nbsp;no&nbsp;longer&nbsp;moved.<br>
<span class="lineno"></span>Thus&nbsp;block&nbsp;swapping&nbsp;rotation&nbsp;needs&nbsp;|u|+|v|&nbsp;calls&nbsp;to&nbsp;Swaps.<br>
<span class="lineno"></span>This&nbsp;is&nbsp;best&nbsp;possible&nbsp;as&nbsp;each&nbsp;element&nbsp;might&nbsp;need&nbsp;a&nbsp;move.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Pay&nbsp;attention&nbsp;when&nbsp;comparing&nbsp;to&nbsp;other&nbsp;optimal&nbsp;algorithms&nbsp;which<br>
<span class="lineno">435</span>typically&nbsp;count&nbsp;the&nbsp;number&nbsp;of&nbsp;assignments&nbsp;instead&nbsp;of&nbsp;swaps:<br>
<span class="lineno"></span>E.g.&nbsp;the&nbsp;optimal&nbsp;algorithm&nbsp;of&nbsp;Dudzinski&nbsp;and&nbsp;Dydek&nbsp;for&nbsp;in-place<br>
<span class="lineno"></span>rotations&nbsp;uses&nbsp;O(u&nbsp;+&nbsp;v&nbsp;+&nbsp;gcd(u,v))&nbsp;assignments&nbsp;which&nbsp;is<br>
<span class="lineno"></span>better&nbsp;than&nbsp;our&nbsp;O(3&nbsp;*&nbsp;(u+v))&nbsp;as&nbsp;gcd(u,v)&nbsp;&lt;=&nbsp;u.<br>
<span class="lineno"></span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span>Stable&nbsp;sorting&nbsp;by&nbsp;SymMerge&nbsp;and&nbsp;BlockSwap&nbsp;rotations<br>
<span class="lineno"></span><br>
<span class="lineno"></span>SymMerg&nbsp;complexity&nbsp;for&nbsp;same&nbsp;size&nbsp;input&nbsp;M&nbsp;=&nbsp;N:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less:&nbsp;&nbsp;O(M*log(N/M+1))&nbsp;=&nbsp;O(N*log(2))&nbsp;=&nbsp;O(N)<br>
<span class="lineno">445</span>Calls&nbsp;to&nbsp;Swap:&nbsp;&nbsp;O((M+N)*log(M))&nbsp;=&nbsp;O(2*N*log(N))&nbsp;=&nbsp;O(N*log(N))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>(The&nbsp;following&nbsp;argument&nbsp;does&nbsp;not&nbsp;fuzz&nbsp;over&nbsp;a&nbsp;missing&nbsp;-1&nbsp;or<br>
<span class="lineno"></span>other&nbsp;stuff&nbsp;which&nbsp;does&nbsp;not&nbsp;impact&nbsp;the&nbsp;final&nbsp;result).<br>
<span class="lineno"></span><br>
<span class="lineno">450</span>Let&nbsp;n&nbsp;=&nbsp;data.Len().&nbsp;Assume&nbsp;n&nbsp;=&nbsp;2^k.<br>
<span class="lineno"></span><br>
<span class="lineno"></span>Plain&nbsp;merge&nbsp;sort&nbsp;performs&nbsp;log(n)&nbsp;=&nbsp;k&nbsp;iterations.<br>
<span class="lineno"></span>On&nbsp;iteration&nbsp;i&nbsp;the&nbsp;algorithm&nbsp;merges&nbsp;2^(k-i)&nbsp;blocks,&nbsp;each&nbsp;of&nbsp;size&nbsp;2^i.<br>
<span class="lineno"></span><br>
<span class="lineno">455</span>Thus&nbsp;iteration&nbsp;i&nbsp;of&nbsp;merge&nbsp;sort&nbsp;performs:<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Less&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i)&nbsp;=&nbsp;O(2^k)&nbsp;=&nbsp;O(2^log(n))&nbsp;=&nbsp;O(n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;&nbsp;O(2^(k-i)&nbsp;*&nbsp;2^i&nbsp;*&nbsp;log(2^i))&nbsp;=&nbsp;O(2^k&nbsp;*&nbsp;i)&nbsp;=&nbsp;O(n*i)<br>
<span class="lineno"></span><br>
<span class="lineno"></span>In&nbsp;total&nbsp;k&nbsp;=&nbsp;log(n)&nbsp;iterations&nbsp;are&nbsp;performed;&nbsp;so&nbsp;in&nbsp;total:<br>
<span class="lineno">460</span>Calls&nbsp;to&nbsp;Less&nbsp;O(log(n)&nbsp;*&nbsp;n)<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;+&nbsp;2*n&nbsp;+&nbsp;3*n&nbsp;+&nbsp;...&nbsp;+&nbsp;(k-1)*n&nbsp;+&nbsp;k*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O((k/2)&nbsp;*&nbsp;k&nbsp;*&nbsp;n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;k^2)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span><br>
<span class="lineno">465</span>Above&nbsp;results&nbsp;should&nbsp;generalize&nbsp;to&nbsp;arbitrary&nbsp;n&nbsp;=&nbsp;2^k&nbsp;+&nbsp;p<br>
<span class="lineno"></span>and&nbsp;should&nbsp;not&nbsp;be&nbsp;influenced&nbsp;by&nbsp;the&nbsp;initial&nbsp;insertion&nbsp;sort&nbsp;phase:<br>
<span class="lineno"></span>Insertion&nbsp;sort&nbsp;is&nbsp;O(n^2)&nbsp;on&nbsp;Swap&nbsp;and&nbsp;Less,&nbsp;thus&nbsp;O(bs^2)&nbsp;per&nbsp;block&nbsp;of<br>
<span class="lineno"></span>size&nbsp;bs&nbsp;at&nbsp;n/bs&nbsp;blocks:&nbsp;&nbsp;O(bs*n)&nbsp;Swaps&nbsp;and&nbsp;Less&nbsp;during&nbsp;insertion&nbsp;sort.<br>
<span class="lineno"></span>Merge&nbsp;sort&nbsp;iterations&nbsp;start&nbsp;at&nbsp;i&nbsp;=&nbsp;log(bs).&nbsp;With&nbsp;t&nbsp;=&nbsp;log(bs)&nbsp;constant:<br>
<span class="lineno">470</span>Calls&nbsp;to&nbsp;Less&nbsp;O((log(n)-t)&nbsp;*&nbsp;n&nbsp;+&nbsp;bs*n)&nbsp;=&nbsp;O(log(n)*n&nbsp;+&nbsp;(bs-t)*n)<br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log(n))<br>
<span class="lineno"></span>Calls&nbsp;to&nbsp;Swap&nbsp;O(n&nbsp;*&nbsp;log^2(n)&nbsp;-&nbsp;(t^2+t)/2*n)&nbsp;=&nbsp;O(n&nbsp;*&nbsp;log^2(n))<br>
<span class="lineno"></span><br>
<span class="lineno"></span>*/</span>
</div>
</body>
</html>
