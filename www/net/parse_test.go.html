<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="6884189">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6884244">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6884298">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6884349">package</span>&nbsp;<span class="ident" id="6884357">net</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6884362">import</span>&nbsp;<span class="op" id="6884369">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6884372">&#34;bufio&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6884381">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6884387">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6884398">&#34;testing&#34;</span><br>
<span class="lineno"></span><span class="op" id="6884408">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6884411">func</span>&nbsp;<span class="ident" id="6884416">TestReadLine</span><span class="op" id="6884428">(</span><span class="ident" id="6884429">t</span>&nbsp;<span class="op" id="6884431">*</span><span class="ident" id="6884432"><a href="/net/parse_test.go.html#6884398">testing</a></span><span class="op" id="6884439">.</span><span class="ident" id="6884440">T</span><span class="op" id="6884441">)</span>&nbsp;<span class="op" id="6884443">{</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6884446">//&nbsp;/etc/services&nbsp;file&nbsp;does&nbsp;not&nbsp;exist&nbsp;on&nbsp;android,&nbsp;plan9,&nbsp;windows.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884512">switch</span>&nbsp;<span class="ident" id="6884519"><a href="/net/parse_test.go.html#6884387">runtime</a></span><span class="op" id="6884526">.</span><span class="ident" id="6884527">GOOS</span>&nbsp;<span class="op" id="6884532">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884535">case</span>&nbsp;<span class="string" id="6884540">&#34;android&#34;</span><span class="op" id="6884549">,</span>&nbsp;<span class="string" id="6884551">&#34;plan9&#34;</span><span class="op" id="6884558">,</span>&nbsp;<span class="string" id="6884560">&#34;windows&#34;</span><span class="op" id="6884569">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884573"><a href="/net/parse_test.go.html#6884429">t</a></span><span class="op" id="6884574">.</span><span class="ident" id="6884575">Skipf</span><span class="op" id="6884580">(</span><span class="string" id="6884581">&#34;skipping&nbsp;test&nbsp;on&nbsp;%q&#34;</span><span class="op" id="6884602">,</span>&nbsp;<span class="ident" id="6884604"><a href="/net/parse_test.go.html#6884387">runtime</a></span><span class="op" id="6884611">.</span><span class="ident" id="6884612">GOOS</span><span class="op" id="6884616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884619">}</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884622">filename</span>&nbsp;<span class="op" id="6884631">:=</span>&nbsp;<span class="string" id="6884634">&#34;/etc/services&#34;</span>&nbsp;<span class="comment" id="6884650">//&nbsp;a&nbsp;nice&nbsp;big&nbsp;file</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884671">fd</span><span class="op" id="6884673">,</span>&nbsp;<span class="ident" id="6884675">err</span>&nbsp;<span class="op" id="6884679">:=</span>&nbsp;<span class="ident" id="6884682"><a href="/net/parse_test.go.html#6884381">os</a></span><span class="op" id="6884684">.</span><span class="ident" id="6884685">Open</span><span class="op" id="6884689">(</span><span class="ident" id="6884690"><a href="/net/parse_test.go.html#6884622">filename</a></span><span class="op" id="6884698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884701">if</span>&nbsp;<span class="ident" id="6884704"><a href="/net/parse_test.go.html#6884675">err</a></span>&nbsp;<span class="op" id="6884708">!=</span>&nbsp;<span class="ident" id="6884711">nil</span>&nbsp;<span class="op" id="6884715">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884719"><a href="/net/parse_test.go.html#6884429">t</a></span><span class="op" id="6884720">.</span><span class="ident" id="6884721">Fatalf</span><span class="op" id="6884727">(</span><span class="string" id="6884728">&#34;open&nbsp;%s:&nbsp;%v&#34;</span><span class="op" id="6884741">,</span>&nbsp;<span class="ident" id="6884743"><a href="/net/parse_test.go.html#6884622">filename</a></span><span class="op" id="6884751">,</span>&nbsp;<span class="ident" id="6884753"><a href="/net/parse_test.go.html#6884675">err</a></span><span class="op" id="6884756">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884759">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884762">defer</span>&nbsp;<span class="ident" id="6884768"><a href="/net/parse_test.go.html#6884671">fd</a></span><span class="op" id="6884770">.</span><span class="ident" id="6884771">Close</span><span class="op" id="6884776">(</span><span class="op" id="6884777">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884780">br</span>&nbsp;<span class="op" id="6884783">:=</span>&nbsp;<span class="ident" id="6884786"><a href="/net/parse_test.go.html#6884372">bufio</a></span><span class="op" id="6884791">.</span><span class="ident" id="6884792">NewReader</span><span class="op" id="6884801">(</span><span class="ident" id="6884802"><a href="/net/parse_test.go.html#6884671">fd</a></span><span class="op" id="6884804">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884808">file</span><span class="op" id="6884812">,</span>&nbsp;<span class="ident" id="6884814"><a href="/net/parse_test.go.html#6884675">err</a></span>&nbsp;<span class="op" id="6884818">:=</span>&nbsp;<span class="ident" id="6884821"><a href="/net/parse.go.html#2663938">open</a></span><span class="op" id="6884825">(</span><span class="ident" id="6884826"><a href="/net/parse_test.go.html#6884622">filename</a></span><span class="op" id="6884834">)</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884837">if</span>&nbsp;<span class="ident" id="6884840"><a href="/net/parse_test.go.html#6884808">file</a></span>&nbsp;<span class="op" id="6884845">==</span>&nbsp;<span class="ident" id="6884848">nil</span>&nbsp;<span class="op" id="6884852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884856"><a href="/net/parse_test.go.html#6884429">t</a></span><span class="op" id="6884857">.</span><span class="ident" id="6884858">Fatalf</span><span class="op" id="6884864">(</span><span class="string" id="6884865">&#34;net.open(%s)&nbsp;=&nbsp;nil&#34;</span><span class="op" id="6884885">,</span>&nbsp;<span class="ident" id="6884887"><a href="/net/parse_test.go.html#6884622">filename</a></span><span class="op" id="6884895">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6884898">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884901">defer</span>&nbsp;<span class="ident" id="6884907"><a href="/net/parse_test.go.html#6884808">file</a></span><span class="op" id="6884911">.</span><span class="builtinfunc" id="6884912">close</span><span class="op" id="6884917">(</span><span class="op" id="6884918">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884922">lineno</span>&nbsp;<span class="op" id="6884929">:=</span>&nbsp;<span class="num" id="6884932">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884935">byteno</span>&nbsp;<span class="op" id="6884942">:=</span>&nbsp;<span class="num" id="6884945">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884948">for</span>&nbsp;<span class="op" id="6884952">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6884956">bline</span><span class="op" id="6884961">,</span>&nbsp;<span class="ident" id="6884963">berr</span>&nbsp;<span class="op" id="6884968">:=</span>&nbsp;<span class="ident" id="6884971"><a href="/net/parse_test.go.html#6884780">br</a></span><span class="op" id="6884973">.</span><span class="ident" id="6884974">ReadString</span><span class="op" id="6884984">(</span><span class="string" id="6884985">&#39;\n&#39;</span><span class="op" id="6884989">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6884993">if</span>&nbsp;<span class="ident" id="6884996">n</span>&nbsp;<span class="op" id="6884998">:=</span>&nbsp;<span class="builtinfunc" id="6885001">len</span><span class="op" id="6885004">(</span><span class="ident" id="6885005"><a href="/net/parse_test.go.html#6884956">bline</a></span><span class="op" id="6885010">)</span><span class="op" id="6885011">;</span>&nbsp;<span class="ident" id="6885013"><a href="/net/parse_test.go.html#6884996">n</a></span>&nbsp;<span class="op" id="6885015">&gt;</span>&nbsp;<span class="num" id="6885017">0</span>&nbsp;<span class="op" id="6885019">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885024"><a href="/net/parse_test.go.html#6884956">bline</a></span>&nbsp;<span class="op" id="6885030">=</span>&nbsp;<span class="ident" id="6885032"><a href="/net/parse_test.go.html#6884956">bline</a></span><span class="op" id="6885037">[</span><span class="num" id="6885038">0</span>&nbsp;<span class="op" id="6885040">:</span>&nbsp;<span class="ident" id="6885042"><a href="/net/parse_test.go.html#6884996">n</a></span><span class="op" id="6885043">-</span><span class="num" id="6885044">1</span><span class="op" id="6885045">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6885049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885053">line</span><span class="op" id="6885057">,</span>&nbsp;<span class="ident" id="6885059">ok</span>&nbsp;<span class="op" id="6885062">:=</span>&nbsp;<span class="ident" id="6885065"><a href="/net/parse_test.go.html#6884808">file</a></span><span class="op" id="6885069">.</span><span class="ident" id="6885070">readLine</span><span class="op" id="6885078">(</span><span class="op" id="6885079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6885083">if</span>&nbsp;<span class="op" id="6885086">(</span><span class="ident" id="6885087"><a href="/net/parse_test.go.html#6884963">berr</a></span>&nbsp;<span class="op" id="6885092">!=</span>&nbsp;<span class="ident" id="6885095">nil</span><span class="op" id="6885098">)</span>&nbsp;<span class="op" id="6885100">!=</span>&nbsp;<span class="op" id="6885103">!</span><span class="ident" id="6885104"><a href="/net/parse_test.go.html#6885059">ok</a></span>&nbsp;<span class="op" id="6885107">||</span>&nbsp;<span class="ident" id="6885110"><a href="/net/parse_test.go.html#6884956">bline</a></span>&nbsp;<span class="op" id="6885116">!=</span>&nbsp;<span class="ident" id="6885119"><a href="/net/parse_test.go.html#6885053">line</a></span>&nbsp;<span class="op" id="6885124">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885129"><a href="/net/parse_test.go.html#6884429">t</a></span><span class="op" id="6885130">.</span><span class="ident" id="6885131">Fatalf</span><span class="op" id="6885137">(</span><span class="string" id="6885138">&#34;%s:%d&nbsp;(#%d)\nbufio&nbsp;=&gt;&nbsp;%q,&nbsp;%v\nnet&nbsp;=&gt;&nbsp;%q,&nbsp;%v&#34;</span><span class="op" id="6885183">,</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885189"><a href="/net/parse_test.go.html#6884622">filename</a></span><span class="op" id="6885197">,</span>&nbsp;<span class="ident" id="6885199"><a href="/net/parse_test.go.html#6884922">lineno</a></span><span class="op" id="6885205">,</span>&nbsp;<span class="ident" id="6885207"><a href="/net/parse_test.go.html#6884935">byteno</a></span><span class="op" id="6885213">,</span>&nbsp;<span class="ident" id="6885215"><a href="/net/parse_test.go.html#6884956">bline</a></span><span class="op" id="6885220">,</span>&nbsp;<span class="ident" id="6885222"><a href="/net/parse_test.go.html#6884963">berr</a></span><span class="op" id="6885226">,</span>&nbsp;<span class="ident" id="6885228"><a href="/net/parse_test.go.html#6885053">line</a></span><span class="op" id="6885232">,</span>&nbsp;<span class="ident" id="6885234"><a href="/net/parse_test.go.html#6885059">ok</a></span><span class="op" id="6885236">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6885240">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6885244">if</span>&nbsp;<span class="op" id="6885247">!</span><span class="ident" id="6885248"><a href="/net/parse_test.go.html#6885059">ok</a></span>&nbsp;<span class="op" id="6885251">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6885256">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6885264">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885268"><a href="/net/parse_test.go.html#6884922">lineno</a></span><span class="op" id="6885274">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6885279"><a href="/net/parse_test.go.html#6884935">byteno</a></span>&nbsp;<span class="op" id="6885286">+=</span>&nbsp;<span class="builtinfunc" id="6885289">len</span><span class="op" id="6885292">(</span><span class="ident" id="6885293"><a href="/net/parse_test.go.html#6885053">line</a></span><span class="op" id="6885297">)</span>&nbsp;<span class="op" id="6885299">+</span>&nbsp;<span class="num" id="6885301">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6885304">}</span><br>
<span class="lineno"></span><span class="op" id="6885306">}</span>
</div>
</body>
</html>
