<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/gob</h2>
<ul>
<li><a href="/gostd/encoding/gob/codec_test.go.html">codec_test.go</a></li>
<li><a href="/gostd/encoding/gob/dec_helpers.go.html">dec_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/decode.go.html">decode.go</a></li>
<li><a href="/gostd/encoding/gob/decoder.go.html">decoder.go</a></li>
<li><a href="/gostd/encoding/gob/doc.go.html">doc.go</a></li>
<li><a href="/gostd/encoding/gob/enc_helpers.go.html">enc_helpers.go</a></li>
<li><a href="/gostd/encoding/gob/encode.go.html">encode.go</a></li>
<li><a href="/gostd/encoding/gob/encoder.go.html">encoder.go</a></li>
<li><a href="/gostd/encoding/gob/encoder_test.go.html">encoder_test.go</a></li>
<li><a href="/gostd/encoding/gob/error.go.html">error.go</a></li>
<li><a href="/gostd/encoding/gob/example_encdec_test.go.html">example_encdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_interface_test.go.html">example_interface_test.go</a></li>
<li><a href="/gostd/encoding/gob/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/gob/gobencdec_test.go.html">gobencdec_test.go</a></li>
<li><a href="/gostd/encoding/gob/timing_test.go.html">timing_test.go</a></li>
<li><a href="/gostd/encoding/gob/type.go.html">type.go</a></li>
<li><a href="/gostd/encoding/gob/type_test.go.html">type_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="8078475">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8078530">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8078584">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="8078635">//&nbsp;This&nbsp;file&nbsp;contains&nbsp;tests&nbsp;of&nbsp;the&nbsp;GobEncoder/GobDecoder&nbsp;support.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8078702">package</span>&nbsp;<span class="ident" id="8078710">gob</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8078715">import</span>&nbsp;<span class="op" id="8078722">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078725">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078734">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078744">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078751">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078757">&#34;net&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078764">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078775">&#34;testing&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8078786">&#34;time&#34;</span><br>
<span class="lineno"></span><span class="op" id="8078793">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">20</span><span class="comment" id="8078796">//&nbsp;Types&nbsp;that&nbsp;implement&nbsp;the&nbsp;GobEncoder/Decoder&nbsp;interfaces.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8078856">type</span>&nbsp;<span class="ident" id="8078861">ByteStruct</span>&nbsp;<span class="keyword" id="8078872">struct</span>&nbsp;<span class="op" id="8078879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078882">a</span>&nbsp;<span class="builtintype" id="8078884">byte</span>&nbsp;<span class="comment" id="8078889">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8078914">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="8078917">type</span>&nbsp;<span class="ident" id="8078922">StringStruct</span>&nbsp;<span class="keyword" id="8078935">struct</span>&nbsp;<span class="op" id="8078942">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8078945">s</span>&nbsp;<span class="builtintype" id="8078947">string</span>&nbsp;<span class="comment" id="8078954">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8078979">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span><span class="keyword" id="8078982">type</span>&nbsp;<span class="ident" id="8078987">ArrayStruct</span>&nbsp;<span class="keyword" id="8078999">struct</span>&nbsp;<span class="op" id="8079006">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079009">a</span>&nbsp;<span class="op" id="8079011">[</span><span class="num" id="8079012">8192</span><span class="op" id="8079016">]</span><span class="builtintype" id="8079017">byte</span>&nbsp;<span class="comment" id="8079022">//&nbsp;not&nbsp;an&nbsp;exported&nbsp;field</span><br>
<span class="lineno"></span><span class="op" id="8079047">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079050">type</span>&nbsp;<span class="ident" id="8079055">Gobber</span>&nbsp;<span class="builtintype" id="8079062">int</span><br>
<span class="lineno">35</span><br>
<span class="lineno"></span><span class="keyword" id="8079067">type</span>&nbsp;<span class="ident" id="8079072">ValueGobber</span>&nbsp;<span class="builtintype" id="8079084">string</span>&nbsp;<span class="comment" id="8079091">//&nbsp;encodes&nbsp;with&nbsp;a&nbsp;value,&nbsp;decodes&nbsp;with&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079141">type</span>&nbsp;<span class="ident" id="8079146">BinaryGobber</span>&nbsp;<span class="builtintype" id="8079159">int</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span><span class="keyword" id="8079164">type</span>&nbsp;<span class="ident" id="8079169">BinaryValueGobber</span>&nbsp;<span class="builtintype" id="8079187">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079195">type</span>&nbsp;<span class="ident" id="8079200">TextGobber</span>&nbsp;<span class="builtintype" id="8079211">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079216">type</span>&nbsp;<span class="ident" id="8079221">TextValueGobber</span>&nbsp;<span class="builtintype" id="8079237">string</span><br>
<span class="lineno">45</span><br>
<span class="lineno"></span><span class="comment" id="8079245">//&nbsp;The&nbsp;relevant&nbsp;methods</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079270">func</span>&nbsp;<span class="op" id="8079275">(</span><span class="ident" id="8079276">g</span>&nbsp;<span class="op" id="8079278">*</span><span class="ident" id="8079279">ByteStruct</span><span class="op" id="8079289">)</span>&nbsp;<span class="ident" id="8079291">GobEncode</span><span class="op" id="8079300">(</span><span class="op" id="8079301">)</span>&nbsp;<span class="op" id="8079303">(</span><span class="op" id="8079304">[</span><span class="op" id="8079305">]</span><span class="builtintype" id="8079306">byte</span><span class="op" id="8079310">,</span>&nbsp;<span class="builtintype" id="8079312">error</span><span class="op" id="8079317">)</span>&nbsp;<span class="op" id="8079319">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079322">b</span>&nbsp;<span class="op" id="8079324">:=</span>&nbsp;<span class="builtinfunc" id="8079327">make</span><span class="op" id="8079331">(</span><span class="op" id="8079332">[</span><span class="op" id="8079333">]</span><span class="builtintype" id="8079334">byte</span><span class="op" id="8079338">,</span>&nbsp;<span class="num" id="8079340">3</span><span class="op" id="8079341">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079344">b</span><span class="op" id="8079345">[</span><span class="num" id="8079346">0</span><span class="op" id="8079347">]</span>&nbsp;<span class="op" id="8079349">=</span>&nbsp;<span class="ident" id="8079351">g</span><span class="op" id="8079352">.</span><span class="ident" id="8079353">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079356">b</span><span class="op" id="8079357">[</span><span class="num" id="8079358">1</span><span class="op" id="8079359">]</span>&nbsp;<span class="op" id="8079361">=</span>&nbsp;<span class="ident" id="8079363">g</span><span class="op" id="8079364">.</span><span class="ident" id="8079365">a</span>&nbsp;<span class="op" id="8079367">+</span>&nbsp;<span class="num" id="8079369">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079372">b</span><span class="op" id="8079373">[</span><span class="num" id="8079374">2</span><span class="op" id="8079375">]</span>&nbsp;<span class="op" id="8079377">=</span>&nbsp;<span class="ident" id="8079379">g</span><span class="op" id="8079380">.</span><span class="ident" id="8079381">a</span>&nbsp;<span class="op" id="8079383">+</span>&nbsp;<span class="num" id="8079385">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079388">return</span>&nbsp;<span class="ident" id="8079395">b</span><span class="op" id="8079396">,</span>&nbsp;<span class="ident" id="8079398">nil</span><br>
<span class="lineno"></span><span class="op" id="8079402">}</span><br>
<span class="lineno">55</span><br>
<span class="lineno"></span><span class="keyword" id="8079405">func</span>&nbsp;<span class="op" id="8079410">(</span><span class="ident" id="8079411">g</span>&nbsp;<span class="op" id="8079413">*</span><span class="ident" id="8079414">ByteStruct</span><span class="op" id="8079424">)</span>&nbsp;<span class="ident" id="8079426">GobDecode</span><span class="op" id="8079435">(</span><span class="ident" id="8079436">data</span>&nbsp;<span class="op" id="8079441">[</span><span class="op" id="8079442">]</span><span class="builtintype" id="8079443">byte</span><span class="op" id="8079447">)</span>&nbsp;<span class="builtintype" id="8079449">error</span>&nbsp;<span class="op" id="8079455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079458">if</span>&nbsp;<span class="ident" id="8079461">g</span>&nbsp;<span class="op" id="8079463">==</span>&nbsp;<span class="ident" id="8079466">nil</span>&nbsp;<span class="op" id="8079470">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079474">return</span>&nbsp;<span class="ident" id="8079481">errors</span><span class="op" id="8079487">.</span><span class="ident" id="8079488">New</span><span class="op" id="8079491">(</span><span class="string" id="8079492">&#34;NIL&nbsp;RECEIVER&#34;</span><span class="op" id="8079506">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079509">}</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8079512">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079550">if</span>&nbsp;<span class="builtinfunc" id="8079553">len</span><span class="op" id="8079556">(</span><span class="ident" id="8079557">data</span><span class="op" id="8079561">)</span>&nbsp;<span class="op" id="8079563">==</span>&nbsp;<span class="num" id="8079566">0</span>&nbsp;<span class="op" id="8079568">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079572">return</span>&nbsp;<span class="ident" id="8079579">io</span><span class="op" id="8079581">.</span><span class="ident" id="8079582">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079590">g</span><span class="op" id="8079591">.</span><span class="ident" id="8079592">a</span>&nbsp;<span class="op" id="8079594">=</span>&nbsp;<span class="ident" id="8079596">data</span><span class="op" id="8079600">[</span><span class="num" id="8079601">0</span><span class="op" id="8079602">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079605">for</span>&nbsp;<span class="ident" id="8079609">i</span><span class="op" id="8079610">,</span>&nbsp;<span class="ident" id="8079612">c</span>&nbsp;<span class="op" id="8079614">:=</span>&nbsp;<span class="keyword" id="8079617">range</span>&nbsp;<span class="ident" id="8079623">data</span>&nbsp;<span class="op" id="8079628">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079632">if</span>&nbsp;<span class="ident" id="8079635">c</span>&nbsp;<span class="op" id="8079637">!=</span>&nbsp;<span class="ident" id="8079640">g</span><span class="op" id="8079641">.</span><span class="ident" id="8079642">a</span><span class="op" id="8079643">+</span><span class="builtintype" id="8079644">byte</span><span class="op" id="8079648">(</span><span class="ident" id="8079649">i</span><span class="op" id="8079650">)</span>&nbsp;<span class="op" id="8079652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079657">return</span>&nbsp;<span class="ident" id="8079664">errors</span><span class="op" id="8079670">.</span><span class="ident" id="8079671">New</span><span class="op" id="8079674">(</span><span class="string" id="8079675">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8079698">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079705">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079708">return</span>&nbsp;<span class="ident" id="8079715">nil</span><br>
<span class="lineno"></span><span class="op" id="8079719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079722">func</span>&nbsp;<span class="op" id="8079727">(</span><span class="ident" id="8079728">g</span>&nbsp;<span class="op" id="8079730">*</span><span class="ident" id="8079731">StringStruct</span><span class="op" id="8079743">)</span>&nbsp;<span class="ident" id="8079745">GobEncode</span><span class="op" id="8079754">(</span><span class="op" id="8079755">)</span>&nbsp;<span class="op" id="8079757">(</span><span class="op" id="8079758">[</span><span class="op" id="8079759">]</span><span class="builtintype" id="8079760">byte</span><span class="op" id="8079764">,</span>&nbsp;<span class="builtintype" id="8079766">error</span><span class="op" id="8079771">)</span>&nbsp;<span class="op" id="8079773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079776">return</span>&nbsp;<span class="op" id="8079783">[</span><span class="op" id="8079784">]</span><span class="builtintype" id="8079785">byte</span><span class="op" id="8079789">(</span><span class="ident" id="8079790">g</span><span class="op" id="8079791">.</span><span class="ident" id="8079792">s</span><span class="op" id="8079793">)</span><span class="op" id="8079794">,</span>&nbsp;<span class="ident" id="8079796">nil</span><br>
<span class="lineno">75</span><span class="op" id="8079800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8079803">func</span>&nbsp;<span class="op" id="8079808">(</span><span class="ident" id="8079809">g</span>&nbsp;<span class="op" id="8079811">*</span><span class="ident" id="8079812">StringStruct</span><span class="op" id="8079824">)</span>&nbsp;<span class="ident" id="8079826">GobDecode</span><span class="op" id="8079835">(</span><span class="ident" id="8079836">data</span>&nbsp;<span class="op" id="8079841">[</span><span class="op" id="8079842">]</span><span class="builtintype" id="8079843">byte</span><span class="op" id="8079847">)</span>&nbsp;<span class="builtintype" id="8079849">error</span>&nbsp;<span class="op" id="8079855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8079858">//&nbsp;Expect&nbsp;N&nbsp;sequential-valued&nbsp;bytes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079896">if</span>&nbsp;<span class="builtinfunc" id="8079899">len</span><span class="op" id="8079902">(</span><span class="ident" id="8079903">data</span><span class="op" id="8079907">)</span>&nbsp;<span class="op" id="8079909">==</span>&nbsp;<span class="num" id="8079912">0</span>&nbsp;<span class="op" id="8079914">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079918">return</span>&nbsp;<span class="ident" id="8079925">io</span><span class="op" id="8079927">.</span><span class="ident" id="8079928">EOF</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8079933">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8079936">a</span>&nbsp;<span class="op" id="8079938">:=</span>&nbsp;<span class="ident" id="8079941">data</span><span class="op" id="8079945">[</span><span class="num" id="8079946">0</span><span class="op" id="8079947">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079950">for</span>&nbsp;<span class="ident" id="8079954">i</span><span class="op" id="8079955">,</span>&nbsp;<span class="ident" id="8079957">c</span>&nbsp;<span class="op" id="8079959">:=</span>&nbsp;<span class="keyword" id="8079962">range</span>&nbsp;<span class="ident" id="8079968">data</span>&nbsp;<span class="op" id="8079973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8079977">if</span>&nbsp;<span class="ident" id="8079980">c</span>&nbsp;<span class="op" id="8079982">!=</span>&nbsp;<span class="ident" id="8079985">a</span><span class="op" id="8079986">+</span><span class="builtintype" id="8079987">byte</span><span class="op" id="8079991">(</span><span class="ident" id="8079992">i</span><span class="op" id="8079993">)</span>&nbsp;<span class="op" id="8079995">{</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080000">return</span>&nbsp;<span class="ident" id="8080007">errors</span><span class="op" id="8080013">.</span><span class="ident" id="8080014">New</span><span class="op" id="8080017">(</span><span class="string" id="8080018">&#34;invalid&nbsp;data&nbsp;sequence&#34;</span><span class="op" id="8080041">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8080045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8080048">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8080051">g</span><span class="op" id="8080052">.</span><span class="ident" id="8080053">s</span>&nbsp;<span class="op" id="8080055">=</span>&nbsp;<span class="builtintype" id="8080057">string</span><span class="op" id="8080063">(</span><span class="ident" id="8080064">data</span><span class="op" id="8080068">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080071">return</span>&nbsp;<span class="ident" id="8080078">nil</span><br>
<span class="lineno">90</span><span class="op" id="8080082">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080085">func</span>&nbsp;<span class="op" id="8080090">(</span><span class="ident" id="8080091">a</span>&nbsp;<span class="op" id="8080093">*</span><span class="ident" id="8080094">ArrayStruct</span><span class="op" id="8080105">)</span>&nbsp;<span class="ident" id="8080107">GobEncode</span><span class="op" id="8080116">(</span><span class="op" id="8080117">)</span>&nbsp;<span class="op" id="8080119">(</span><span class="op" id="8080120">[</span><span class="op" id="8080121">]</span><span class="builtintype" id="8080122">byte</span><span class="op" id="8080126">,</span>&nbsp;<span class="builtintype" id="8080128">error</span><span class="op" id="8080133">)</span>&nbsp;<span class="op" id="8080135">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080138">return</span>&nbsp;<span class="ident" id="8080145">a</span><span class="op" id="8080146">.</span><span class="ident" id="8080147">a</span><span class="op" id="8080148">[</span><span class="op" id="8080149">:</span><span class="op" id="8080150">]</span><span class="op" id="8080151">,</span>&nbsp;<span class="ident" id="8080153">nil</span><br>
<span class="lineno"></span><span class="op" id="8080157">}</span><br>
<span class="lineno">95</span><br>
<span class="lineno"></span><span class="keyword" id="8080160">func</span>&nbsp;<span class="op" id="8080165">(</span><span class="ident" id="8080166">a</span>&nbsp;<span class="op" id="8080168">*</span><span class="ident" id="8080169">ArrayStruct</span><span class="op" id="8080180">)</span>&nbsp;<span class="ident" id="8080182">GobDecode</span><span class="op" id="8080191">(</span><span class="ident" id="8080192">data</span>&nbsp;<span class="op" id="8080197">[</span><span class="op" id="8080198">]</span><span class="builtintype" id="8080199">byte</span><span class="op" id="8080203">)</span>&nbsp;<span class="builtintype" id="8080205">error</span>&nbsp;<span class="op" id="8080211">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080214">if</span>&nbsp;<span class="builtinfunc" id="8080217">len</span><span class="op" id="8080220">(</span><span class="ident" id="8080221">data</span><span class="op" id="8080225">)</span>&nbsp;<span class="op" id="8080227">!=</span>&nbsp;<span class="builtinfunc" id="8080230">len</span><span class="op" id="8080233">(</span><span class="ident" id="8080234">a</span><span class="op" id="8080235">.</span><span class="ident" id="8080236">a</span><span class="op" id="8080237">)</span>&nbsp;<span class="op" id="8080239">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080243">return</span>&nbsp;<span class="ident" id="8080250">errors</span><span class="op" id="8080256">.</span><span class="ident" id="8080257">New</span><span class="op" id="8080260">(</span><span class="string" id="8080261">&#34;wrong&nbsp;length&nbsp;in&nbsp;array&nbsp;decode&#34;</span><span class="op" id="8080291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8080294">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="8080297">copy</span><span class="op" id="8080301">(</span><span class="ident" id="8080302">a</span><span class="op" id="8080303">.</span><span class="ident" id="8080304">a</span><span class="op" id="8080305">[</span><span class="op" id="8080306">:</span><span class="op" id="8080307">]</span><span class="op" id="8080308">,</span>&nbsp;<span class="ident" id="8080310">data</span><span class="op" id="8080314">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080317">return</span>&nbsp;<span class="ident" id="8080324">nil</span><br>
<span class="lineno"></span><span class="op" id="8080328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080331">func</span>&nbsp;<span class="op" id="8080336">(</span><span class="ident" id="8080337">g</span>&nbsp;<span class="op" id="8080339">*</span><span class="ident" id="8080340">Gobber</span><span class="op" id="8080346">)</span>&nbsp;<span class="ident" id="8080348">GobEncode</span><span class="op" id="8080357">(</span><span class="op" id="8080358">)</span>&nbsp;<span class="op" id="8080360">(</span><span class="op" id="8080361">[</span><span class="op" id="8080362">]</span><span class="builtintype" id="8080363">byte</span><span class="op" id="8080367">,</span>&nbsp;<span class="builtintype" id="8080369">error</span><span class="op" id="8080374">)</span>&nbsp;<span class="op" id="8080376">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080379">return</span>&nbsp;<span class="op" id="8080386">[</span><span class="op" id="8080387">]</span><span class="builtintype" id="8080388">byte</span><span class="op" id="8080392">(</span><span class="ident" id="8080393">fmt</span><span class="op" id="8080396">.</span><span class="ident" id="8080397">Sprintf</span><span class="op" id="8080404">(</span><span class="string" id="8080405">&#34;VALUE=%d&#34;</span><span class="op" id="8080415">,</span>&nbsp;<span class="op" id="8080417">*</span><span class="ident" id="8080418">g</span><span class="op" id="8080419">)</span><span class="op" id="8080420">)</span><span class="op" id="8080421">,</span>&nbsp;<span class="ident" id="8080423">nil</span><br>
<span class="lineno"></span><span class="op" id="8080427">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080430">func</span>&nbsp;<span class="op" id="8080435">(</span><span class="ident" id="8080436">g</span>&nbsp;<span class="op" id="8080438">*</span><span class="ident" id="8080439">Gobber</span><span class="op" id="8080445">)</span>&nbsp;<span class="ident" id="8080447">GobDecode</span><span class="op" id="8080456">(</span><span class="ident" id="8080457">data</span>&nbsp;<span class="op" id="8080462">[</span><span class="op" id="8080463">]</span><span class="builtintype" id="8080464">byte</span><span class="op" id="8080468">)</span>&nbsp;<span class="builtintype" id="8080470">error</span>&nbsp;<span class="op" id="8080476">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8080479">_</span><span class="op" id="8080480">,</span>&nbsp;<span class="ident" id="8080482">err</span>&nbsp;<span class="op" id="8080486">:=</span>&nbsp;<span class="ident" id="8080489">fmt</span><span class="op" id="8080492">.</span><span class="ident" id="8080493">Sscanf</span><span class="op" id="8080499">(</span><span class="builtintype" id="8080500">string</span><span class="op" id="8080506">(</span><span class="ident" id="8080507">data</span><span class="op" id="8080511">)</span><span class="op" id="8080512">,</span>&nbsp;<span class="string" id="8080514">&#34;VALUE=%d&#34;</span><span class="op" id="8080524">,</span>&nbsp;<span class="op" id="8080526">(</span><span class="op" id="8080527">*</span><span class="builtintype" id="8080528">int</span><span class="op" id="8080531">)</span><span class="op" id="8080532">(</span><span class="ident" id="8080533">g</span><span class="op" id="8080534">)</span><span class="op" id="8080535">)</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080538">return</span>&nbsp;<span class="ident" id="8080545">err</span><br>
<span class="lineno"></span><span class="op" id="8080549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080552">func</span>&nbsp;<span class="op" id="8080557">(</span><span class="ident" id="8080558">g</span>&nbsp;<span class="op" id="8080560">*</span><span class="ident" id="8080561">BinaryGobber</span><span class="op" id="8080573">)</span>&nbsp;<span class="ident" id="8080575">MarshalBinary</span><span class="op" id="8080588">(</span><span class="op" id="8080589">)</span>&nbsp;<span class="op" id="8080591">(</span><span class="op" id="8080592">[</span><span class="op" id="8080593">]</span><span class="builtintype" id="8080594">byte</span><span class="op" id="8080598">,</span>&nbsp;<span class="builtintype" id="8080600">error</span><span class="op" id="8080605">)</span>&nbsp;<span class="op" id="8080607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080610">return</span>&nbsp;<span class="op" id="8080617">[</span><span class="op" id="8080618">]</span><span class="builtintype" id="8080619">byte</span><span class="op" id="8080623">(</span><span class="ident" id="8080624">fmt</span><span class="op" id="8080627">.</span><span class="ident" id="8080628">Sprintf</span><span class="op" id="8080635">(</span><span class="string" id="8080636">&#34;VALUE=%d&#34;</span><span class="op" id="8080646">,</span>&nbsp;<span class="op" id="8080648">*</span><span class="ident" id="8080649">g</span><span class="op" id="8080650">)</span><span class="op" id="8080651">)</span><span class="op" id="8080652">,</span>&nbsp;<span class="ident" id="8080654">nil</span><br>
<span class="lineno">115</span><span class="op" id="8080658">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080661">func</span>&nbsp;<span class="op" id="8080666">(</span><span class="ident" id="8080667">g</span>&nbsp;<span class="op" id="8080669">*</span><span class="ident" id="8080670">BinaryGobber</span><span class="op" id="8080682">)</span>&nbsp;<span class="ident" id="8080684">UnmarshalBinary</span><span class="op" id="8080699">(</span><span class="ident" id="8080700">data</span>&nbsp;<span class="op" id="8080705">[</span><span class="op" id="8080706">]</span><span class="builtintype" id="8080707">byte</span><span class="op" id="8080711">)</span>&nbsp;<span class="builtintype" id="8080713">error</span>&nbsp;<span class="op" id="8080719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8080722">_</span><span class="op" id="8080723">,</span>&nbsp;<span class="ident" id="8080725">err</span>&nbsp;<span class="op" id="8080729">:=</span>&nbsp;<span class="ident" id="8080732">fmt</span><span class="op" id="8080735">.</span><span class="ident" id="8080736">Sscanf</span><span class="op" id="8080742">(</span><span class="builtintype" id="8080743">string</span><span class="op" id="8080749">(</span><span class="ident" id="8080750">data</span><span class="op" id="8080754">)</span><span class="op" id="8080755">,</span>&nbsp;<span class="string" id="8080757">&#34;VALUE=%d&#34;</span><span class="op" id="8080767">,</span>&nbsp;<span class="op" id="8080769">(</span><span class="op" id="8080770">*</span><span class="builtintype" id="8080771">int</span><span class="op" id="8080774">)</span><span class="op" id="8080775">(</span><span class="ident" id="8080776">g</span><span class="op" id="8080777">)</span><span class="op" id="8080778">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080781">return</span>&nbsp;<span class="ident" id="8080788">err</span><br>
<span class="lineno">120</span><span class="op" id="8080792">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8080795">func</span>&nbsp;<span class="op" id="8080800">(</span><span class="ident" id="8080801">g</span>&nbsp;<span class="op" id="8080803">*</span><span class="ident" id="8080804">TextGobber</span><span class="op" id="8080814">)</span>&nbsp;<span class="ident" id="8080816">MarshalText</span><span class="op" id="8080827">(</span><span class="op" id="8080828">)</span>&nbsp;<span class="op" id="8080830">(</span><span class="op" id="8080831">[</span><span class="op" id="8080832">]</span><span class="builtintype" id="8080833">byte</span><span class="op" id="8080837">,</span>&nbsp;<span class="builtintype" id="8080839">error</span><span class="op" id="8080844">)</span>&nbsp;<span class="op" id="8080846">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8080849">return</span>&nbsp;<span class="op" id="8080856">[</span><span class="op" id="8080857">]</span><span class="builtintype" id="8080858">byte</span><span class="op" id="8080862">(</span><span class="ident" id="8080863">fmt</span><span class="op" id="8080866">.</span><span class="ident" id="8080867">Sprintf</span><span class="op" id="8080874">(</span><span class="string" id="8080875">&#34;VALUE=%d&#34;</span><span class="op" id="8080885">,</span>&nbsp;<span class="op" id="8080887">*</span><span class="ident" id="8080888">g</span><span class="op" id="8080889">)</span><span class="op" id="8080890">)</span><span class="op" id="8080891">,</span>&nbsp;<span class="ident" id="8080893">nil</span><br>
<span class="lineno"></span><span class="op" id="8080897">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="keyword" id="8080900">func</span>&nbsp;<span class="op" id="8080905">(</span><span class="ident" id="8080906">g</span>&nbsp;<span class="op" id="8080908">*</span><span class="ident" id="8080909">TextGobber</span><span class="op" id="8080919">)</span>&nbsp;<span class="ident" id="8080921">UnmarshalText</span><span class="op" id="8080934">(</span><span class="ident" id="8080935">data</span>&nbsp;<span class="op" id="8080940">[</span><span class="op" id="8080941">]</span><span class="builtintype" id="8080942">byte</span><span class="op" id="8080946">)</span>&nbsp;<span class="builtintype" id="8080948">error</span>&nbsp;<span class="op" id="8080954">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8080957">_</span><span class="op" id="8080958">,</span>&nbsp;<span class="ident" id="8080960">err</span>&nbsp;<span class="op" id="8080964">:=</span>&nbsp;<span class="ident" id="8080967">fmt</span><span class="op" id="8080970">.</span><span class="ident" id="8080971">Sscanf</span><span class="op" id="8080977">(</span><span class="builtintype" id="8080978">string</span><span class="op" id="8080984">(</span><span class="ident" id="8080985">data</span><span class="op" id="8080989">)</span><span class="op" id="8080990">,</span>&nbsp;<span class="string" id="8080992">&#34;VALUE=%d&#34;</span><span class="op" id="8081002">,</span>&nbsp;<span class="op" id="8081004">(</span><span class="op" id="8081005">*</span><span class="builtintype" id="8081006">int</span><span class="op" id="8081009">)</span><span class="op" id="8081010">(</span><span class="ident" id="8081011">g</span><span class="op" id="8081012">)</span><span class="op" id="8081013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081016">return</span>&nbsp;<span class="ident" id="8081023">err</span><br>
<span class="lineno"></span><span class="op" id="8081027">}</span><br>
<span class="lineno">130</span><br>
<span class="lineno"></span><span class="keyword" id="8081030">func</span>&nbsp;<span class="op" id="8081035">(</span><span class="ident" id="8081036">v</span>&nbsp;<span class="ident" id="8081038">ValueGobber</span><span class="op" id="8081049">)</span>&nbsp;<span class="ident" id="8081051">GobEncode</span><span class="op" id="8081060">(</span><span class="op" id="8081061">)</span>&nbsp;<span class="op" id="8081063">(</span><span class="op" id="8081064">[</span><span class="op" id="8081065">]</span><span class="builtintype" id="8081066">byte</span><span class="op" id="8081070">,</span>&nbsp;<span class="builtintype" id="8081072">error</span><span class="op" id="8081077">)</span>&nbsp;<span class="op" id="8081079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081082">return</span>&nbsp;<span class="op" id="8081089">[</span><span class="op" id="8081090">]</span><span class="builtintype" id="8081091">byte</span><span class="op" id="8081095">(</span><span class="ident" id="8081096">fmt</span><span class="op" id="8081099">.</span><span class="ident" id="8081100">Sprintf</span><span class="op" id="8081107">(</span><span class="string" id="8081108">&#34;VALUE=%s&#34;</span><span class="op" id="8081118">,</span>&nbsp;<span class="ident" id="8081120">v</span><span class="op" id="8081121">)</span><span class="op" id="8081122">)</span><span class="op" id="8081123">,</span>&nbsp;<span class="ident" id="8081125">nil</span><br>
<span class="lineno"></span><span class="op" id="8081129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span><span class="keyword" id="8081132">func</span>&nbsp;<span class="op" id="8081137">(</span><span class="ident" id="8081138">v</span>&nbsp;<span class="op" id="8081140">*</span><span class="ident" id="8081141">ValueGobber</span><span class="op" id="8081152">)</span>&nbsp;<span class="ident" id="8081154">GobDecode</span><span class="op" id="8081163">(</span><span class="ident" id="8081164">data</span>&nbsp;<span class="op" id="8081169">[</span><span class="op" id="8081170">]</span><span class="builtintype" id="8081171">byte</span><span class="op" id="8081175">)</span>&nbsp;<span class="builtintype" id="8081177">error</span>&nbsp;<span class="op" id="8081183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081186">_</span><span class="op" id="8081187">,</span>&nbsp;<span class="ident" id="8081189">err</span>&nbsp;<span class="op" id="8081193">:=</span>&nbsp;<span class="ident" id="8081196">fmt</span><span class="op" id="8081199">.</span><span class="ident" id="8081200">Sscanf</span><span class="op" id="8081206">(</span><span class="builtintype" id="8081207">string</span><span class="op" id="8081213">(</span><span class="ident" id="8081214">data</span><span class="op" id="8081218">)</span><span class="op" id="8081219">,</span>&nbsp;<span class="string" id="8081221">&#34;VALUE=%s&#34;</span><span class="op" id="8081231">,</span>&nbsp;<span class="op" id="8081233">(</span><span class="op" id="8081234">*</span><span class="builtintype" id="8081235">string</span><span class="op" id="8081241">)</span><span class="op" id="8081242">(</span><span class="ident" id="8081243">v</span><span class="op" id="8081244">)</span><span class="op" id="8081245">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081248">return</span>&nbsp;<span class="ident" id="8081255">err</span><br>
<span class="lineno"></span><span class="op" id="8081259">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">140</span><span class="keyword" id="8081262">func</span>&nbsp;<span class="op" id="8081267">(</span><span class="ident" id="8081268">v</span>&nbsp;<span class="ident" id="8081270">BinaryValueGobber</span><span class="op" id="8081287">)</span>&nbsp;<span class="ident" id="8081289">MarshalBinary</span><span class="op" id="8081302">(</span><span class="op" id="8081303">)</span>&nbsp;<span class="op" id="8081305">(</span><span class="op" id="8081306">[</span><span class="op" id="8081307">]</span><span class="builtintype" id="8081308">byte</span><span class="op" id="8081312">,</span>&nbsp;<span class="builtintype" id="8081314">error</span><span class="op" id="8081319">)</span>&nbsp;<span class="op" id="8081321">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081324">return</span>&nbsp;<span class="op" id="8081331">[</span><span class="op" id="8081332">]</span><span class="builtintype" id="8081333">byte</span><span class="op" id="8081337">(</span><span class="ident" id="8081338">fmt</span><span class="op" id="8081341">.</span><span class="ident" id="8081342">Sprintf</span><span class="op" id="8081349">(</span><span class="string" id="8081350">&#34;VALUE=%s&#34;</span><span class="op" id="8081360">,</span>&nbsp;<span class="ident" id="8081362">v</span><span class="op" id="8081363">)</span><span class="op" id="8081364">)</span><span class="op" id="8081365">,</span>&nbsp;<span class="ident" id="8081367">nil</span><br>
<span class="lineno"></span><span class="op" id="8081371">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8081374">func</span>&nbsp;<span class="op" id="8081379">(</span><span class="ident" id="8081380">v</span>&nbsp;<span class="op" id="8081382">*</span><span class="ident" id="8081383">BinaryValueGobber</span><span class="op" id="8081400">)</span>&nbsp;<span class="ident" id="8081402">UnmarshalBinary</span><span class="op" id="8081417">(</span><span class="ident" id="8081418">data</span>&nbsp;<span class="op" id="8081423">[</span><span class="op" id="8081424">]</span><span class="builtintype" id="8081425">byte</span><span class="op" id="8081429">)</span>&nbsp;<span class="builtintype" id="8081431">error</span>&nbsp;<span class="op" id="8081437">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081440">_</span><span class="op" id="8081441">,</span>&nbsp;<span class="ident" id="8081443">err</span>&nbsp;<span class="op" id="8081447">:=</span>&nbsp;<span class="ident" id="8081450">fmt</span><span class="op" id="8081453">.</span><span class="ident" id="8081454">Sscanf</span><span class="op" id="8081460">(</span><span class="builtintype" id="8081461">string</span><span class="op" id="8081467">(</span><span class="ident" id="8081468">data</span><span class="op" id="8081472">)</span><span class="op" id="8081473">,</span>&nbsp;<span class="string" id="8081475">&#34;VALUE=%s&#34;</span><span class="op" id="8081485">,</span>&nbsp;<span class="op" id="8081487">(</span><span class="op" id="8081488">*</span><span class="builtintype" id="8081489">string</span><span class="op" id="8081495">)</span><span class="op" id="8081496">(</span><span class="ident" id="8081497">v</span><span class="op" id="8081498">)</span><span class="op" id="8081499">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081502">return</span>&nbsp;<span class="ident" id="8081509">err</span><br>
<span class="lineno"></span><span class="op" id="8081513">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8081516">func</span>&nbsp;<span class="op" id="8081521">(</span><span class="ident" id="8081522">v</span>&nbsp;<span class="ident" id="8081524">TextValueGobber</span><span class="op" id="8081539">)</span>&nbsp;<span class="ident" id="8081541">MarshalText</span><span class="op" id="8081552">(</span><span class="op" id="8081553">)</span>&nbsp;<span class="op" id="8081555">(</span><span class="op" id="8081556">[</span><span class="op" id="8081557">]</span><span class="builtintype" id="8081558">byte</span><span class="op" id="8081562">,</span>&nbsp;<span class="builtintype" id="8081564">error</span><span class="op" id="8081569">)</span>&nbsp;<span class="op" id="8081571">{</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081574">return</span>&nbsp;<span class="op" id="8081581">[</span><span class="op" id="8081582">]</span><span class="builtintype" id="8081583">byte</span><span class="op" id="8081587">(</span><span class="ident" id="8081588">fmt</span><span class="op" id="8081591">.</span><span class="ident" id="8081592">Sprintf</span><span class="op" id="8081599">(</span><span class="string" id="8081600">&#34;VALUE=%s&#34;</span><span class="op" id="8081610">,</span>&nbsp;<span class="ident" id="8081612">v</span><span class="op" id="8081613">)</span><span class="op" id="8081614">)</span><span class="op" id="8081615">,</span>&nbsp;<span class="ident" id="8081617">nil</span><br>
<span class="lineno"></span><span class="op" id="8081621">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8081624">func</span>&nbsp;<span class="op" id="8081629">(</span><span class="ident" id="8081630">v</span>&nbsp;<span class="op" id="8081632">*</span><span class="ident" id="8081633">TextValueGobber</span><span class="op" id="8081648">)</span>&nbsp;<span class="ident" id="8081650">UnmarshalText</span><span class="op" id="8081663">(</span><span class="ident" id="8081664">data</span>&nbsp;<span class="op" id="8081669">[</span><span class="op" id="8081670">]</span><span class="builtintype" id="8081671">byte</span><span class="op" id="8081675">)</span>&nbsp;<span class="builtintype" id="8081677">error</span>&nbsp;<span class="op" id="8081683">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081686">_</span><span class="op" id="8081687">,</span>&nbsp;<span class="ident" id="8081689">err</span>&nbsp;<span class="op" id="8081693">:=</span>&nbsp;<span class="ident" id="8081696">fmt</span><span class="op" id="8081699">.</span><span class="ident" id="8081700">Sscanf</span><span class="op" id="8081706">(</span><span class="builtintype" id="8081707">string</span><span class="op" id="8081713">(</span><span class="ident" id="8081714">data</span><span class="op" id="8081718">)</span><span class="op" id="8081719">,</span>&nbsp;<span class="string" id="8081721">&#34;VALUE=%s&#34;</span><span class="op" id="8081731">,</span>&nbsp;<span class="op" id="8081733">(</span><span class="op" id="8081734">*</span><span class="builtintype" id="8081735">string</span><span class="op" id="8081741">)</span><span class="op" id="8081742">(</span><span class="ident" id="8081743">v</span><span class="op" id="8081744">)</span><span class="op" id="8081745">)</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8081748">return</span>&nbsp;<span class="ident" id="8081755">err</span><br>
<span class="lineno"></span><span class="op" id="8081759">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8081762">//&nbsp;Structs&nbsp;that&nbsp;include&nbsp;GobEncodable&nbsp;fields.</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="keyword" id="8081808">type</span>&nbsp;<span class="ident" id="8081813">GobTest0</span>&nbsp;<span class="keyword" id="8081822">struct</span>&nbsp;<span class="op" id="8081829">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081832">X</span>&nbsp;<span class="builtintype" id="8081834">int</span>&nbsp;<span class="comment" id="8081838">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081895">G</span>&nbsp;<span class="op" id="8081897">*</span><span class="ident" id="8081898">ByteStruct</span><br>
<span class="lineno"></span><span class="op" id="8081909">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">165</span><span class="keyword" id="8081912">type</span>&nbsp;<span class="ident" id="8081917">GobTest1</span>&nbsp;<span class="keyword" id="8081926">struct</span>&nbsp;<span class="op" id="8081933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081936">X</span>&nbsp;<span class="builtintype" id="8081938">int</span>&nbsp;<span class="comment" id="8081942">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8081999">G</span>&nbsp;<span class="op" id="8082001">*</span><span class="ident" id="8082002">StringStruct</span><br>
<span class="lineno"></span><span class="op" id="8082015">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8082018">type</span>&nbsp;<span class="ident" id="8082023">GobTest2</span>&nbsp;<span class="keyword" id="8082032">struct</span>&nbsp;<span class="op" id="8082039">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082042">X</span>&nbsp;<span class="builtintype" id="8082044">int</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8082051">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082108">G</span>&nbsp;<span class="builtintype" id="8082110">string</span>&nbsp;<span class="comment" id="8082117">//&nbsp;not&nbsp;a&nbsp;GobEncoder&nbsp;-&nbsp;should&nbsp;give&nbsp;us&nbsp;errors</span><br>
<span class="lineno"></span><span class="op" id="8082161">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8082164">type</span>&nbsp;<span class="ident" id="8082169">GobTest3</span>&nbsp;<span class="keyword" id="8082178">struct</span>&nbsp;<span class="op" id="8082185">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082188">X</span>&nbsp;<span class="builtintype" id="8082190">int</span>&nbsp;<span class="comment" id="8082194">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082251">G</span>&nbsp;<span class="op" id="8082253">*</span><span class="ident" id="8082254">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082262">B</span>&nbsp;<span class="op" id="8082264">*</span><span class="ident" id="8082265">BinaryGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082279">T</span>&nbsp;<span class="op" id="8082281">*</span><span class="ident" id="8082282">TextGobber</span><br>
<span class="lineno">180</span><span class="op" id="8082293">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8082296">type</span>&nbsp;<span class="ident" id="8082301">GobTest4</span>&nbsp;<span class="keyword" id="8082310">struct</span>&nbsp;<span class="op" id="8082317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082320">X</span>&nbsp;&nbsp;<span class="builtintype" id="8082323">int</span>&nbsp;<span class="comment" id="8082327">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082384">V</span>&nbsp;&nbsp;<span class="ident" id="8082387">ValueGobber</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082400">BV</span>&nbsp;<span class="ident" id="8082403">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082422">TV</span>&nbsp;<span class="ident" id="8082425">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8082441">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8082444">type</span>&nbsp;<span class="ident" id="8082449">GobTest5</span>&nbsp;<span class="keyword" id="8082458">struct</span>&nbsp;<span class="op" id="8082465">{</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082468">X</span>&nbsp;&nbsp;<span class="builtintype" id="8082471">int</span>&nbsp;<span class="comment" id="8082475">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082532">V</span>&nbsp;&nbsp;<span class="op" id="8082535">*</span><span class="ident" id="8082536">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082549">BV</span>&nbsp;<span class="op" id="8082552">*</span><span class="ident" id="8082553">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082572">TV</span>&nbsp;<span class="op" id="8082575">*</span><span class="ident" id="8082576">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8082592">}</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span><span class="keyword" id="8082595">type</span>&nbsp;<span class="ident" id="8082600">GobTest6</span>&nbsp;<span class="keyword" id="8082609">struct</span>&nbsp;<span class="op" id="8082616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082619">X</span>&nbsp;&nbsp;<span class="builtintype" id="8082622">int</span>&nbsp;<span class="comment" id="8082626">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082683">V</span>&nbsp;&nbsp;<span class="ident" id="8082686">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082699">W</span>&nbsp;&nbsp;<span class="op" id="8082702">*</span><span class="ident" id="8082703">ValueGobber</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082716">BV</span>&nbsp;<span class="ident" id="8082719">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082738">BW</span>&nbsp;<span class="op" id="8082741">*</span><span class="ident" id="8082742">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082761">TV</span>&nbsp;<span class="ident" id="8082764">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082781">TW</span>&nbsp;<span class="op" id="8082784">*</span><span class="ident" id="8082785">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8082801">}</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span><span class="keyword" id="8082804">type</span>&nbsp;<span class="ident" id="8082809">GobTest7</span>&nbsp;<span class="keyword" id="8082818">struct</span>&nbsp;<span class="op" id="8082825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082828">X</span>&nbsp;&nbsp;<span class="builtintype" id="8082831">int</span>&nbsp;<span class="comment" id="8082835">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082892">V</span>&nbsp;&nbsp;<span class="op" id="8082895">*</span><span class="ident" id="8082896">ValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082909">W</span>&nbsp;&nbsp;<span class="ident" id="8082912">ValueGobber</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082925">BV</span>&nbsp;<span class="op" id="8082928">*</span><span class="ident" id="8082929">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082948">BW</span>&nbsp;<span class="ident" id="8082951">BinaryValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082970">TV</span>&nbsp;<span class="op" id="8082973">*</span><span class="ident" id="8082974">TextValueGobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8082991">TW</span>&nbsp;<span class="ident" id="8082994">TextValueGobber</span><br>
<span class="lineno"></span><span class="op" id="8083010">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8083013">type</span>&nbsp;<span class="ident" id="8083018">GobTestIgnoreEncoder</span>&nbsp;<span class="keyword" id="8083039">struct</span>&nbsp;<span class="op" id="8083046">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083049">X</span>&nbsp;<span class="builtintype" id="8083051">int</span>&nbsp;<span class="comment" id="8083055">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span><span class="op" id="8083111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">220</span><span class="keyword" id="8083114">type</span>&nbsp;<span class="ident" id="8083119">GobTestValueEncDec</span>&nbsp;<span class="keyword" id="8083138">struct</span>&nbsp;<span class="op" id="8083145">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083148">X</span>&nbsp;<span class="builtintype" id="8083150">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8083163">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083220">G</span>&nbsp;<span class="ident" id="8083222">StringStruct</span>&nbsp;<span class="comment" id="8083235">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8083253">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">225</span><span class="keyword" id="8083256">type</span>&nbsp;<span class="ident" id="8083261">GobTestIndirectEncDec</span>&nbsp;<span class="keyword" id="8083283">struct</span>&nbsp;<span class="op" id="8083290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083293">X</span>&nbsp;<span class="builtintype" id="8083295">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8083311">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083368">G</span>&nbsp;<span class="op" id="8083370">*</span><span class="op" id="8083371">*</span><span class="op" id="8083372">*</span><span class="ident" id="8083373">StringStruct</span>&nbsp;<span class="comment" id="8083386">//&nbsp;indirections&nbsp;to&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8083419">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">230</span><span class="keyword" id="8083422">type</span>&nbsp;<span class="ident" id="8083427">GobTestArrayEncDec</span>&nbsp;<span class="keyword" id="8083446">struct</span>&nbsp;<span class="op" id="8083453">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083456">X</span>&nbsp;<span class="builtintype" id="8083458">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8083470">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083527">A</span>&nbsp;<span class="ident" id="8083529">ArrayStruct</span>&nbsp;<span class="comment" id="8083541">//&nbsp;not&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="op" id="8083559">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">235</span><span class="keyword" id="8083562">type</span>&nbsp;<span class="ident" id="8083567">GobTestIndirectArrayEncDec</span>&nbsp;<span class="keyword" id="8083594">struct</span>&nbsp;<span class="op" id="8083601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083604">X</span>&nbsp;<span class="builtintype" id="8083606">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="8083621">//&nbsp;guarantee&nbsp;we&nbsp;have&nbsp;&nbsp;something&nbsp;in&nbsp;common&nbsp;with&nbsp;GobTest*</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083678">A</span>&nbsp;<span class="op" id="8083680">*</span><span class="op" id="8083681">*</span><span class="op" id="8083682">*</span><span class="ident" id="8083683">ArrayStruct</span>&nbsp;<span class="comment" id="8083695">//&nbsp;indirections&nbsp;to&nbsp;a&nbsp;large&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="op" id="8083732">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">240</span><span class="keyword" id="8083735">func</span>&nbsp;<span class="ident" id="8083740">TestGobEncoderField</span><span class="op" id="8083759">(</span><span class="ident" id="8083760">t</span>&nbsp;<span class="op" id="8083762">*</span><span class="ident" id="8083763">testing</span><span class="op" id="8083770">.</span><span class="ident" id="8083771">T</span><span class="op" id="8083772">)</span>&nbsp;<span class="op" id="8083774">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083777">b</span>&nbsp;<span class="op" id="8083779">:=</span>&nbsp;<span class="builtinfunc" id="8083782">new</span><span class="op" id="8083785">(</span><span class="ident" id="8083786">bytes</span><span class="op" id="8083791">.</span><span class="ident" id="8083792">Buffer</span><span class="op" id="8083798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8083801">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083839">enc</span>&nbsp;<span class="op" id="8083843">:=</span>&nbsp;<span class="ident" id="8083846">NewEncoder</span><span class="op" id="8083856">(</span><span class="ident" id="8083857">b</span><span class="op" id="8083858">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083861">err</span>&nbsp;<span class="op" id="8083865">:=</span>&nbsp;<span class="ident" id="8083868">enc</span><span class="op" id="8083871">.</span><span class="ident" id="8083872">Encode</span><span class="op" id="8083878">(</span><span class="ident" id="8083879">GobTest0</span><span class="op" id="8083887">{</span><span class="num" id="8083888">17</span><span class="op" id="8083890">,</span>&nbsp;<span class="op" id="8083892">&amp;</span><span class="ident" id="8083893">ByteStruct</span><span class="op" id="8083903">{</span><span class="string" id="8083904">&#39;A&#39;</span><span class="op" id="8083907">}</span><span class="op" id="8083908">}</span><span class="op" id="8083909">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8083912">if</span>&nbsp;<span class="ident" id="8083915">err</span>&nbsp;<span class="op" id="8083919">!=</span>&nbsp;<span class="ident" id="8083922">nil</span>&nbsp;<span class="op" id="8083926">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083930">t</span><span class="op" id="8083931">.</span><span class="ident" id="8083932">Fatal</span><span class="op" id="8083937">(</span><span class="string" id="8083938">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8083953">,</span>&nbsp;<span class="ident" id="8083955">err</span><span class="op" id="8083958">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8083961">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083964">dec</span>&nbsp;<span class="op" id="8083968">:=</span>&nbsp;<span class="ident" id="8083971">NewDecoder</span><span class="op" id="8083981">(</span><span class="ident" id="8083982">b</span><span class="op" id="8083983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8083986">x</span>&nbsp;<span class="op" id="8083988">:=</span>&nbsp;<span class="builtinfunc" id="8083991">new</span><span class="op" id="8083994">(</span><span class="ident" id="8083995">GobTest0</span><span class="op" id="8084003">)</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084006">err</span>&nbsp;<span class="op" id="8084010">=</span>&nbsp;<span class="ident" id="8084012">dec</span><span class="op" id="8084015">.</span><span class="ident" id="8084016">Decode</span><span class="op" id="8084022">(</span><span class="ident" id="8084023">x</span><span class="op" id="8084024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084027">if</span>&nbsp;<span class="ident" id="8084030">err</span>&nbsp;<span class="op" id="8084034">!=</span>&nbsp;<span class="ident" id="8084037">nil</span>&nbsp;<span class="op" id="8084041">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084045">t</span><span class="op" id="8084046">.</span><span class="ident" id="8084047">Fatal</span><span class="op" id="8084052">(</span><span class="string" id="8084053">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8084068">,</span>&nbsp;<span class="ident" id="8084070">err</span><span class="op" id="8084073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084079">if</span>&nbsp;<span class="ident" id="8084082">x</span><span class="op" id="8084083">.</span><span class="ident" id="8084084">G</span><span class="op" id="8084085">.</span><span class="ident" id="8084086">a</span>&nbsp;<span class="op" id="8084088">!=</span>&nbsp;<span class="string" id="8084091">&#39;A&#39;</span>&nbsp;<span class="op" id="8084095">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084099">t</span><span class="op" id="8084100">.</span><span class="ident" id="8084101">Errorf</span><span class="op" id="8084107">(</span><span class="string" id="8084108">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8084129">,</span>&nbsp;<span class="ident" id="8084131">x</span><span class="op" id="8084132">.</span><span class="ident" id="8084133">G</span><span class="op" id="8084134">.</span><span class="ident" id="8084135">a</span><span class="op" id="8084136">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084139">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8084142">//&nbsp;Now&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;not&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084182">b</span><span class="op" id="8084183">.</span><span class="ident" id="8084184">Reset</span><span class="op" id="8084189">(</span><span class="op" id="8084190">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084193">gobber</span>&nbsp;<span class="op" id="8084200">:=</span>&nbsp;<span class="ident" id="8084203">Gobber</span><span class="op" id="8084209">(</span><span class="num" id="8084210">23</span><span class="op" id="8084212">)</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084215">bgobber</span>&nbsp;<span class="op" id="8084223">:=</span>&nbsp;<span class="ident" id="8084226">BinaryGobber</span><span class="op" id="8084238">(</span><span class="num" id="8084239">24</span><span class="op" id="8084241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084244">tgobber</span>&nbsp;<span class="op" id="8084252">:=</span>&nbsp;<span class="ident" id="8084255">TextGobber</span><span class="op" id="8084265">(</span><span class="num" id="8084266">25</span><span class="op" id="8084268">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084271">err</span>&nbsp;<span class="op" id="8084275">=</span>&nbsp;<span class="ident" id="8084277">enc</span><span class="op" id="8084280">.</span><span class="ident" id="8084281">Encode</span><span class="op" id="8084287">(</span><span class="ident" id="8084288">GobTest3</span><span class="op" id="8084296">{</span><span class="num" id="8084297">17</span><span class="op" id="8084299">,</span>&nbsp;<span class="op" id="8084301">&amp;</span><span class="ident" id="8084302">gobber</span><span class="op" id="8084308">,</span>&nbsp;<span class="op" id="8084310">&amp;</span><span class="ident" id="8084311">bgobber</span><span class="op" id="8084318">,</span>&nbsp;<span class="op" id="8084320">&amp;</span><span class="ident" id="8084321">tgobber</span><span class="op" id="8084328">}</span><span class="op" id="8084329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084332">if</span>&nbsp;<span class="ident" id="8084335">err</span>&nbsp;<span class="op" id="8084339">!=</span>&nbsp;<span class="ident" id="8084342">nil</span>&nbsp;<span class="op" id="8084346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084350">t</span><span class="op" id="8084351">.</span><span class="ident" id="8084352">Fatal</span><span class="op" id="8084357">(</span><span class="string" id="8084358">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8084373">,</span>&nbsp;<span class="ident" id="8084375">err</span><span class="op" id="8084378">)</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084381">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084384">y</span>&nbsp;<span class="op" id="8084386">:=</span>&nbsp;<span class="builtinfunc" id="8084389">new</span><span class="op" id="8084392">(</span><span class="ident" id="8084393">GobTest3</span><span class="op" id="8084401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084404">err</span>&nbsp;<span class="op" id="8084408">=</span>&nbsp;<span class="ident" id="8084410">dec</span><span class="op" id="8084413">.</span><span class="ident" id="8084414">Decode</span><span class="op" id="8084420">(</span><span class="ident" id="8084421">y</span><span class="op" id="8084422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084425">if</span>&nbsp;<span class="ident" id="8084428">err</span>&nbsp;<span class="op" id="8084432">!=</span>&nbsp;<span class="ident" id="8084435">nil</span>&nbsp;<span class="op" id="8084439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084443">t</span><span class="op" id="8084444">.</span><span class="ident" id="8084445">Fatal</span><span class="op" id="8084450">(</span><span class="string" id="8084451">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8084466">,</span>&nbsp;<span class="ident" id="8084468">err</span><span class="op" id="8084471">)</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084474">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084477">if</span>&nbsp;<span class="op" id="8084480">*</span><span class="ident" id="8084481">y</span><span class="op" id="8084482">.</span><span class="ident" id="8084483">G</span>&nbsp;<span class="op" id="8084485">!=</span>&nbsp;<span class="num" id="8084488">23</span>&nbsp;<span class="op" id="8084491">||</span>&nbsp;<span class="op" id="8084494">*</span><span class="ident" id="8084495">y</span><span class="op" id="8084496">.</span><span class="ident" id="8084497">B</span>&nbsp;<span class="op" id="8084499">!=</span>&nbsp;<span class="num" id="8084502">24</span>&nbsp;<span class="op" id="8084505">||</span>&nbsp;<span class="op" id="8084508">*</span><span class="ident" id="8084509">y</span><span class="op" id="8084510">.</span><span class="ident" id="8084511">T</span>&nbsp;<span class="op" id="8084513">!=</span>&nbsp;<span class="num" id="8084516">25</span>&nbsp;<span class="op" id="8084519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084523">t</span><span class="op" id="8084524">.</span><span class="ident" id="8084525">Errorf</span><span class="op" id="8084531">(</span><span class="string" id="8084532">&#34;expected&nbsp;&#39;23&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8084553">,</span>&nbsp;<span class="op" id="8084555">*</span><span class="ident" id="8084556">y</span><span class="op" id="8084557">.</span><span class="ident" id="8084558">G</span><span class="op" id="8084559">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084562">}</span><br>
<span class="lineno"></span><span class="op" id="8084564">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="8084567">//&nbsp;Even&nbsp;though&nbsp;the&nbsp;field&nbsp;is&nbsp;a&nbsp;value,&nbsp;we&nbsp;can&nbsp;still&nbsp;take&nbsp;its&nbsp;address</span><br>
<span class="lineno"></span><span class="comment" id="8084634">//&nbsp;and&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;call&nbsp;the&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8084677">func</span>&nbsp;<span class="ident" id="8084682">TestGobEncoderValueField</span><span class="op" id="8084706">(</span><span class="ident" id="8084707">t</span>&nbsp;<span class="op" id="8084709">*</span><span class="ident" id="8084710">testing</span><span class="op" id="8084717">.</span><span class="ident" id="8084718">T</span><span class="op" id="8084719">)</span>&nbsp;<span class="op" id="8084721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084724">b</span>&nbsp;<span class="op" id="8084726">:=</span>&nbsp;<span class="builtinfunc" id="8084729">new</span><span class="op" id="8084732">(</span><span class="ident" id="8084733">bytes</span><span class="op" id="8084738">.</span><span class="ident" id="8084739">Buffer</span><span class="op" id="8084745">)</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8084748">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084786">enc</span>&nbsp;<span class="op" id="8084790">:=</span>&nbsp;<span class="ident" id="8084793">NewEncoder</span><span class="op" id="8084803">(</span><span class="ident" id="8084804">b</span><span class="op" id="8084805">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084808">err</span>&nbsp;<span class="op" id="8084812">:=</span>&nbsp;<span class="ident" id="8084815">enc</span><span class="op" id="8084818">.</span><span class="ident" id="8084819">Encode</span><span class="op" id="8084825">(</span><span class="op" id="8084826">&amp;</span><span class="ident" id="8084827">GobTestValueEncDec</span><span class="op" id="8084845">{</span><span class="num" id="8084846">17</span><span class="op" id="8084848">,</span>&nbsp;<span class="ident" id="8084850">StringStruct</span><span class="op" id="8084862">{</span><span class="string" id="8084863">&#34;HIJKL&#34;</span><span class="op" id="8084870">}</span><span class="op" id="8084871">}</span><span class="op" id="8084872">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8084875">if</span>&nbsp;<span class="ident" id="8084878">err</span>&nbsp;<span class="op" id="8084882">!=</span>&nbsp;<span class="ident" id="8084885">nil</span>&nbsp;<span class="op" id="8084889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084893">t</span><span class="op" id="8084894">.</span><span class="ident" id="8084895">Fatal</span><span class="op" id="8084900">(</span><span class="string" id="8084901">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8084916">,</span>&nbsp;<span class="ident" id="8084918">err</span><span class="op" id="8084921">)</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8084924">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084927">dec</span>&nbsp;<span class="op" id="8084931">:=</span>&nbsp;<span class="ident" id="8084934">NewDecoder</span><span class="op" id="8084944">(</span><span class="ident" id="8084945">b</span><span class="op" id="8084946">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084949">x</span>&nbsp;<span class="op" id="8084951">:=</span>&nbsp;<span class="builtinfunc" id="8084954">new</span><span class="op" id="8084957">(</span><span class="ident" id="8084958">GobTestValueEncDec</span><span class="op" id="8084976">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8084979">err</span>&nbsp;<span class="op" id="8084983">=</span>&nbsp;<span class="ident" id="8084985">dec</span><span class="op" id="8084988">.</span><span class="ident" id="8084989">Decode</span><span class="op" id="8084995">(</span><span class="ident" id="8084996">x</span><span class="op" id="8084997">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085000">if</span>&nbsp;<span class="ident" id="8085003">err</span>&nbsp;<span class="op" id="8085007">!=</span>&nbsp;<span class="ident" id="8085010">nil</span>&nbsp;<span class="op" id="8085014">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085018">t</span><span class="op" id="8085019">.</span><span class="ident" id="8085020">Fatal</span><span class="op" id="8085025">(</span><span class="string" id="8085026">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8085041">,</span>&nbsp;<span class="ident" id="8085043">err</span><span class="op" id="8085046">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085052">if</span>&nbsp;<span class="ident" id="8085055">x</span><span class="op" id="8085056">.</span><span class="ident" id="8085057">G</span><span class="op" id="8085058">.</span><span class="ident" id="8085059">s</span>&nbsp;<span class="op" id="8085061">!=</span>&nbsp;<span class="string" id="8085064">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8085072">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085076">t</span><span class="op" id="8085077">.</span><span class="ident" id="8085078">Errorf</span><span class="op" id="8085084">(</span><span class="string" id="8085085">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8085110">,</span>&nbsp;<span class="ident" id="8085112">x</span><span class="op" id="8085113">.</span><span class="ident" id="8085114">G</span><span class="op" id="8085115">.</span><span class="ident" id="8085116">s</span><span class="op" id="8085117">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085120">}</span><br>
<span class="lineno">295</span><span class="op" id="8085122">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8085125">//&nbsp;GobEncode/Decode&nbsp;should&nbsp;work&nbsp;even&nbsp;if&nbsp;the&nbsp;value&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="8085178">//&nbsp;more&nbsp;indirect&nbsp;than&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="keyword" id="8085214">func</span>&nbsp;<span class="ident" id="8085219">TestGobEncoderIndirectField</span><span class="op" id="8085246">(</span><span class="ident" id="8085247">t</span>&nbsp;<span class="op" id="8085249">*</span><span class="ident" id="8085250">testing</span><span class="op" id="8085257">.</span><span class="ident" id="8085258">T</span><span class="op" id="8085259">)</span>&nbsp;<span class="op" id="8085261">{</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085264">b</span>&nbsp;<span class="op" id="8085266">:=</span>&nbsp;<span class="builtinfunc" id="8085269">new</span><span class="op" id="8085272">(</span><span class="ident" id="8085273">bytes</span><span class="op" id="8085278">.</span><span class="ident" id="8085279">Buffer</span><span class="op" id="8085285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8085288">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085326">enc</span>&nbsp;<span class="op" id="8085330">:=</span>&nbsp;<span class="ident" id="8085333">NewEncoder</span><span class="op" id="8085343">(</span><span class="ident" id="8085344">b</span><span class="op" id="8085345">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085348">s</span>&nbsp;<span class="op" id="8085350">:=</span>&nbsp;<span class="op" id="8085353">&amp;</span><span class="ident" id="8085354">StringStruct</span><span class="op" id="8085366">{</span><span class="string" id="8085367">&#34;HIJKL&#34;</span><span class="op" id="8085374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085377">sp</span>&nbsp;<span class="op" id="8085380">:=</span>&nbsp;<span class="op" id="8085383">&amp;</span><span class="ident" id="8085384">s</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085387">err</span>&nbsp;<span class="op" id="8085391">:=</span>&nbsp;<span class="ident" id="8085394">enc</span><span class="op" id="8085397">.</span><span class="ident" id="8085398">Encode</span><span class="op" id="8085404">(</span><span class="ident" id="8085405">GobTestIndirectEncDec</span><span class="op" id="8085426">{</span><span class="num" id="8085427">17</span><span class="op" id="8085429">,</span>&nbsp;<span class="op" id="8085431">&amp;</span><span class="ident" id="8085432">sp</span><span class="op" id="8085434">}</span><span class="op" id="8085435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085438">if</span>&nbsp;<span class="ident" id="8085441">err</span>&nbsp;<span class="op" id="8085445">!=</span>&nbsp;<span class="ident" id="8085448">nil</span>&nbsp;<span class="op" id="8085452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085456">t</span><span class="op" id="8085457">.</span><span class="ident" id="8085458">Fatal</span><span class="op" id="8085463">(</span><span class="string" id="8085464">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8085479">,</span>&nbsp;<span class="ident" id="8085481">err</span><span class="op" id="8085484">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085487">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085490">dec</span>&nbsp;<span class="op" id="8085494">:=</span>&nbsp;<span class="ident" id="8085497">NewDecoder</span><span class="op" id="8085507">(</span><span class="ident" id="8085508">b</span><span class="op" id="8085509">)</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085512">x</span>&nbsp;<span class="op" id="8085514">:=</span>&nbsp;<span class="builtinfunc" id="8085517">new</span><span class="op" id="8085520">(</span><span class="ident" id="8085521">GobTestIndirectEncDec</span><span class="op" id="8085542">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085545">err</span>&nbsp;<span class="op" id="8085549">=</span>&nbsp;<span class="ident" id="8085551">dec</span><span class="op" id="8085554">.</span><span class="ident" id="8085555">Decode</span><span class="op" id="8085561">(</span><span class="ident" id="8085562">x</span><span class="op" id="8085563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085566">if</span>&nbsp;<span class="ident" id="8085569">err</span>&nbsp;<span class="op" id="8085573">!=</span>&nbsp;<span class="ident" id="8085576">nil</span>&nbsp;<span class="op" id="8085580">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085584">t</span><span class="op" id="8085585">.</span><span class="ident" id="8085586">Fatal</span><span class="op" id="8085591">(</span><span class="string" id="8085592">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8085607">,</span>&nbsp;<span class="ident" id="8085609">err</span><span class="op" id="8085612">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085615">}</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085618">if</span>&nbsp;<span class="op" id="8085621">(</span><span class="op" id="8085622">*</span><span class="op" id="8085623">*</span><span class="op" id="8085624">*</span><span class="ident" id="8085625">x</span><span class="op" id="8085626">.</span><span class="ident" id="8085627">G</span><span class="op" id="8085628">)</span><span class="op" id="8085629">.</span><span class="ident" id="8085630">s</span>&nbsp;<span class="op" id="8085632">!=</span>&nbsp;<span class="string" id="8085635">&#34;HIJKL&#34;</span>&nbsp;<span class="op" id="8085643">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085647">t</span><span class="op" id="8085648">.</span><span class="ident" id="8085649">Errorf</span><span class="op" id="8085655">(</span><span class="string" id="8085656">&#34;expected&nbsp;`HIJKL`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8085681">,</span>&nbsp;<span class="op" id="8085683">(</span><span class="op" id="8085684">*</span><span class="op" id="8085685">*</span><span class="op" id="8085686">*</span><span class="ident" id="8085687">x</span><span class="op" id="8085688">.</span><span class="ident" id="8085689">G</span><span class="op" id="8085690">)</span><span class="op" id="8085691">.</span><span class="ident" id="8085692">s</span><span class="op" id="8085693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085696">}</span><br>
<span class="lineno"></span><span class="op" id="8085698">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span><span class="comment" id="8085701">//&nbsp;Test&nbsp;with&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8085742">func</span>&nbsp;<span class="ident" id="8085747">TestGobEncoderArrayField</span><span class="op" id="8085771">(</span><span class="ident" id="8085772">t</span>&nbsp;<span class="op" id="8085774">*</span><span class="ident" id="8085775">testing</span><span class="op" id="8085782">.</span><span class="ident" id="8085783">T</span><span class="op" id="8085784">)</span>&nbsp;<span class="op" id="8085786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085789">b</span>&nbsp;<span class="op" id="8085791">:=</span>&nbsp;<span class="builtinfunc" id="8085794">new</span><span class="op" id="8085797">(</span><span class="ident" id="8085798">bytes</span><span class="op" id="8085803">.</span><span class="ident" id="8085804">Buffer</span><span class="op" id="8085810">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085813">enc</span>&nbsp;<span class="op" id="8085817">:=</span>&nbsp;<span class="ident" id="8085820">NewEncoder</span><span class="op" id="8085830">(</span><span class="ident" id="8085831">b</span><span class="op" id="8085832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085835">var</span>&nbsp;<span class="ident" id="8085839">a</span>&nbsp;<span class="ident" id="8085841">GobTestArrayEncDec</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085861">a</span><span class="op" id="8085862">.</span><span class="ident" id="8085863">X</span>&nbsp;<span class="op" id="8085865">=</span>&nbsp;<span class="num" id="8085867">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085871">for</span>&nbsp;<span class="ident" id="8085875">i</span>&nbsp;<span class="op" id="8085877">:=</span>&nbsp;<span class="keyword" id="8085880">range</span>&nbsp;<span class="ident" id="8085886">a</span><span class="op" id="8085887">.</span><span class="ident" id="8085888">A</span><span class="op" id="8085889">.</span><span class="ident" id="8085890">a</span>&nbsp;<span class="op" id="8085892">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085896">a</span><span class="op" id="8085897">.</span><span class="ident" id="8085898">A</span><span class="op" id="8085899">.</span><span class="ident" id="8085900">a</span><span class="op" id="8085901">[</span><span class="ident" id="8085902">i</span><span class="op" id="8085903">]</span>&nbsp;<span class="op" id="8085905">=</span>&nbsp;<span class="builtintype" id="8085907">byte</span><span class="op" id="8085911">(</span><span class="ident" id="8085912">i</span><span class="op" id="8085913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085919">err</span>&nbsp;<span class="op" id="8085923">:=</span>&nbsp;<span class="ident" id="8085926">enc</span><span class="op" id="8085929">.</span><span class="ident" id="8085930">Encode</span><span class="op" id="8085936">(</span><span class="op" id="8085937">&amp;</span><span class="ident" id="8085938">a</span><span class="op" id="8085939">)</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8085942">if</span>&nbsp;<span class="ident" id="8085945">err</span>&nbsp;<span class="op" id="8085949">!=</span>&nbsp;<span class="ident" id="8085952">nil</span>&nbsp;<span class="op" id="8085956">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085960">t</span><span class="op" id="8085961">.</span><span class="ident" id="8085962">Fatal</span><span class="op" id="8085967">(</span><span class="string" id="8085968">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8085983">,</span>&nbsp;<span class="ident" id="8085985">err</span><span class="op" id="8085988">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8085991">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8085994">dec</span>&nbsp;<span class="op" id="8085998">:=</span>&nbsp;<span class="ident" id="8086001">NewDecoder</span><span class="op" id="8086011">(</span><span class="ident" id="8086012">b</span><span class="op" id="8086013">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086016">x</span>&nbsp;<span class="op" id="8086018">:=</span>&nbsp;<span class="builtinfunc" id="8086021">new</span><span class="op" id="8086024">(</span><span class="ident" id="8086025">GobTestArrayEncDec</span><span class="op" id="8086043">)</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086046">err</span>&nbsp;<span class="op" id="8086050">=</span>&nbsp;<span class="ident" id="8086052">dec</span><span class="op" id="8086055">.</span><span class="ident" id="8086056">Decode</span><span class="op" id="8086062">(</span><span class="ident" id="8086063">x</span><span class="op" id="8086064">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086067">if</span>&nbsp;<span class="ident" id="8086070">err</span>&nbsp;<span class="op" id="8086074">!=</span>&nbsp;<span class="ident" id="8086077">nil</span>&nbsp;<span class="op" id="8086081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086085">t</span><span class="op" id="8086086">.</span><span class="ident" id="8086087">Fatal</span><span class="op" id="8086092">(</span><span class="string" id="8086093">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8086108">,</span>&nbsp;<span class="ident" id="8086110">err</span><span class="op" id="8086113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086116">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086119">for</span>&nbsp;<span class="ident" id="8086123">i</span><span class="op" id="8086124">,</span>&nbsp;<span class="ident" id="8086126">v</span>&nbsp;<span class="op" id="8086128">:=</span>&nbsp;<span class="keyword" id="8086131">range</span>&nbsp;<span class="ident" id="8086137">x</span><span class="op" id="8086138">.</span><span class="ident" id="8086139">A</span><span class="op" id="8086140">.</span><span class="ident" id="8086141">a</span>&nbsp;<span class="op" id="8086143">{</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086147">if</span>&nbsp;<span class="ident" id="8086150">v</span>&nbsp;<span class="op" id="8086152">!=</span>&nbsp;<span class="builtintype" id="8086155">byte</span><span class="op" id="8086159">(</span><span class="ident" id="8086160">i</span><span class="op" id="8086161">)</span>&nbsp;<span class="op" id="8086163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086168">t</span><span class="op" id="8086169">.</span><span class="ident" id="8086170">Errorf</span><span class="op" id="8086176">(</span><span class="string" id="8086177">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8086197">,</span>&nbsp;<span class="builtintype" id="8086199">byte</span><span class="op" id="8086203">(</span><span class="ident" id="8086204">i</span><span class="op" id="8086205">)</span><span class="op" id="8086206">,</span>&nbsp;<span class="ident" id="8086208">v</span><span class="op" id="8086209">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086214">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086222">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086225">}</span><br>
<span class="lineno">345</span><span class="op" id="8086227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8086230">//&nbsp;Test&nbsp;an&nbsp;indirection&nbsp;to&nbsp;a&nbsp;large&nbsp;field&nbsp;with&nbsp;methods.</span><br>
<span class="lineno"></span><span class="keyword" id="8086284">func</span>&nbsp;<span class="ident" id="8086289">TestGobEncoderIndirectArrayField</span><span class="op" id="8086321">(</span><span class="ident" id="8086322">t</span>&nbsp;<span class="op" id="8086324">*</span><span class="ident" id="8086325">testing</span><span class="op" id="8086332">.</span><span class="ident" id="8086333">T</span><span class="op" id="8086334">)</span>&nbsp;<span class="op" id="8086336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086339">b</span>&nbsp;<span class="op" id="8086341">:=</span>&nbsp;<span class="builtinfunc" id="8086344">new</span><span class="op" id="8086347">(</span><span class="ident" id="8086348">bytes</span><span class="op" id="8086353">.</span><span class="ident" id="8086354">Buffer</span><span class="op" id="8086360">)</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086363">enc</span>&nbsp;<span class="op" id="8086367">:=</span>&nbsp;<span class="ident" id="8086370">NewEncoder</span><span class="op" id="8086380">(</span><span class="ident" id="8086381">b</span><span class="op" id="8086382">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086385">var</span>&nbsp;<span class="ident" id="8086389">a</span>&nbsp;<span class="ident" id="8086391">GobTestIndirectArrayEncDec</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086419">a</span><span class="op" id="8086420">.</span><span class="ident" id="8086421">X</span>&nbsp;<span class="op" id="8086423">=</span>&nbsp;<span class="num" id="8086425">17</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086429">var</span>&nbsp;<span class="ident" id="8086433">array</span>&nbsp;<span class="ident" id="8086439">ArrayStruct</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086452">ap</span>&nbsp;<span class="op" id="8086455">:=</span>&nbsp;<span class="op" id="8086458">&amp;</span><span class="ident" id="8086459">array</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086466">app</span>&nbsp;<span class="op" id="8086470">:=</span>&nbsp;<span class="op" id="8086473">&amp;</span><span class="ident" id="8086474">ap</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086478">a</span><span class="op" id="8086479">.</span><span class="ident" id="8086480">A</span>&nbsp;<span class="op" id="8086482">=</span>&nbsp;<span class="op" id="8086484">&amp;</span><span class="ident" id="8086485">app</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086490">for</span>&nbsp;<span class="ident" id="8086494">i</span>&nbsp;<span class="op" id="8086496">:=</span>&nbsp;<span class="keyword" id="8086499">range</span>&nbsp;<span class="ident" id="8086505">array</span><span class="op" id="8086510">.</span><span class="ident" id="8086511">a</span>&nbsp;<span class="op" id="8086513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086517">array</span><span class="op" id="8086522">.</span><span class="ident" id="8086523">a</span><span class="op" id="8086524">[</span><span class="ident" id="8086525">i</span><span class="op" id="8086526">]</span>&nbsp;<span class="op" id="8086528">=</span>&nbsp;<span class="builtintype" id="8086530">byte</span><span class="op" id="8086534">(</span><span class="ident" id="8086535">i</span><span class="op" id="8086536">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086539">}</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086542">err</span>&nbsp;<span class="op" id="8086546">:=</span>&nbsp;<span class="ident" id="8086549">enc</span><span class="op" id="8086552">.</span><span class="ident" id="8086553">Encode</span><span class="op" id="8086559">(</span><span class="ident" id="8086560">a</span><span class="op" id="8086561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086564">if</span>&nbsp;<span class="ident" id="8086567">err</span>&nbsp;<span class="op" id="8086571">!=</span>&nbsp;<span class="ident" id="8086574">nil</span>&nbsp;<span class="op" id="8086578">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086582">t</span><span class="op" id="8086583">.</span><span class="ident" id="8086584">Fatal</span><span class="op" id="8086589">(</span><span class="string" id="8086590">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8086605">,</span>&nbsp;<span class="ident" id="8086607">err</span><span class="op" id="8086610">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086613">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086616">dec</span>&nbsp;<span class="op" id="8086620">:=</span>&nbsp;<span class="ident" id="8086623">NewDecoder</span><span class="op" id="8086633">(</span><span class="ident" id="8086634">b</span><span class="op" id="8086635">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086638">x</span>&nbsp;<span class="op" id="8086640">:=</span>&nbsp;<span class="builtinfunc" id="8086643">new</span><span class="op" id="8086646">(</span><span class="ident" id="8086647">GobTestIndirectArrayEncDec</span><span class="op" id="8086673">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086676">err</span>&nbsp;<span class="op" id="8086680">=</span>&nbsp;<span class="ident" id="8086682">dec</span><span class="op" id="8086685">.</span><span class="ident" id="8086686">Decode</span><span class="op" id="8086692">(</span><span class="ident" id="8086693">x</span><span class="op" id="8086694">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086697">if</span>&nbsp;<span class="ident" id="8086700">err</span>&nbsp;<span class="op" id="8086704">!=</span>&nbsp;<span class="ident" id="8086707">nil</span>&nbsp;<span class="op" id="8086711">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086715">t</span><span class="op" id="8086716">.</span><span class="ident" id="8086717">Fatal</span><span class="op" id="8086722">(</span><span class="string" id="8086723">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8086738">,</span>&nbsp;<span class="ident" id="8086740">err</span><span class="op" id="8086743">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086746">}</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086749">for</span>&nbsp;<span class="ident" id="8086753">i</span><span class="op" id="8086754">,</span>&nbsp;<span class="ident" id="8086756">v</span>&nbsp;<span class="op" id="8086758">:=</span>&nbsp;<span class="keyword" id="8086761">range</span>&nbsp;<span class="op" id="8086767">(</span><span class="op" id="8086768">*</span><span class="op" id="8086769">*</span><span class="op" id="8086770">*</span><span class="ident" id="8086771">x</span><span class="op" id="8086772">.</span><span class="ident" id="8086773">A</span><span class="op" id="8086774">)</span><span class="op" id="8086775">.</span><span class="ident" id="8086776">a</span>&nbsp;<span class="op" id="8086778">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086782">if</span>&nbsp;<span class="ident" id="8086785">v</span>&nbsp;<span class="op" id="8086787">!=</span>&nbsp;<span class="builtintype" id="8086790">byte</span><span class="op" id="8086794">(</span><span class="ident" id="8086795">i</span><span class="op" id="8086796">)</span>&nbsp;<span class="op" id="8086798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8086803">t</span><span class="op" id="8086804">.</span><span class="ident" id="8086805">Errorf</span><span class="op" id="8086811">(</span><span class="string" id="8086812">&#34;expected&nbsp;%x&nbsp;got&nbsp;%x&#34;</span><span class="op" id="8086832">,</span>&nbsp;<span class="builtintype" id="8086834">byte</span><span class="op" id="8086838">(</span><span class="ident" id="8086839">i</span><span class="op" id="8086840">)</span><span class="op" id="8086841">,</span>&nbsp;<span class="ident" id="8086843">v</span><span class="op" id="8086844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8086849">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086857">}</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8086860">}</span><br>
<span class="lineno"></span><span class="op" id="8086862">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8086865">//&nbsp;As&nbsp;long&nbsp;as&nbsp;the&nbsp;fields&nbsp;have&nbsp;the&nbsp;same&nbsp;name&nbsp;and&nbsp;implement&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="8086927">//&nbsp;interface,&nbsp;we&nbsp;can&nbsp;cross-connect&nbsp;them.&nbsp;&nbsp;Not&nbsp;sure&nbsp;it&#39;s&nbsp;useful</span><br>
<span class="lineno">380</span><span class="comment" id="8086990">//&nbsp;and&nbsp;may&nbsp;even&nbsp;be&nbsp;bad&nbsp;but&nbsp;it&nbsp;works&nbsp;and&nbsp;it&#39;s&nbsp;hard&nbsp;to&nbsp;prevent</span><br>
<span class="lineno"></span><span class="comment" id="8087051">//&nbsp;without&nbsp;exposing&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;object,&nbsp;which&nbsp;would</span><br>
<span class="lineno"></span><span class="comment" id="8087111">//&nbsp;defeat&nbsp;the&nbsp;purpose.</span><br>
<span class="lineno"></span><span class="keyword" id="8087134">func</span>&nbsp;<span class="ident" id="8087139">TestGobEncoderFieldsOfDifferentType</span><span class="op" id="8087174">(</span><span class="ident" id="8087175">t</span>&nbsp;<span class="op" id="8087177">*</span><span class="ident" id="8087178">testing</span><span class="op" id="8087185">.</span><span class="ident" id="8087186">T</span><span class="op" id="8087187">)</span>&nbsp;<span class="op" id="8087189">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8087192">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087236">b</span>&nbsp;<span class="op" id="8087238">:=</span>&nbsp;<span class="builtinfunc" id="8087241">new</span><span class="op" id="8087244">(</span><span class="ident" id="8087245">bytes</span><span class="op" id="8087250">.</span><span class="ident" id="8087251">Buffer</span><span class="op" id="8087257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087260">enc</span>&nbsp;<span class="op" id="8087264">:=</span>&nbsp;<span class="ident" id="8087267">NewEncoder</span><span class="op" id="8087277">(</span><span class="ident" id="8087278">b</span><span class="op" id="8087279">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087282">err</span>&nbsp;<span class="op" id="8087286">:=</span>&nbsp;<span class="ident" id="8087289">enc</span><span class="op" id="8087292">.</span><span class="ident" id="8087293">Encode</span><span class="op" id="8087299">(</span><span class="ident" id="8087300">GobTest1</span><span class="op" id="8087308">{</span><span class="num" id="8087309">17</span><span class="op" id="8087311">,</span>&nbsp;<span class="op" id="8087313">&amp;</span><span class="ident" id="8087314">StringStruct</span><span class="op" id="8087326">{</span><span class="string" id="8087327">&#34;ABC&#34;</span><span class="op" id="8087332">}</span><span class="op" id="8087333">}</span><span class="op" id="8087334">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087337">if</span>&nbsp;<span class="ident" id="8087340">err</span>&nbsp;<span class="op" id="8087344">!=</span>&nbsp;<span class="ident" id="8087347">nil</span>&nbsp;<span class="op" id="8087351">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087355">t</span><span class="op" id="8087356">.</span><span class="ident" id="8087357">Fatal</span><span class="op" id="8087362">(</span><span class="string" id="8087363">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8087378">,</span>&nbsp;<span class="ident" id="8087380">err</span><span class="op" id="8087383">)</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087386">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087389">dec</span>&nbsp;<span class="op" id="8087393">:=</span>&nbsp;<span class="ident" id="8087396">NewDecoder</span><span class="op" id="8087406">(</span><span class="ident" id="8087407">b</span><span class="op" id="8087408">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087411">x</span>&nbsp;<span class="op" id="8087413">:=</span>&nbsp;<span class="builtinfunc" id="8087416">new</span><span class="op" id="8087419">(</span><span class="ident" id="8087420">GobTest0</span><span class="op" id="8087428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087431">err</span>&nbsp;<span class="op" id="8087435">=</span>&nbsp;<span class="ident" id="8087437">dec</span><span class="op" id="8087440">.</span><span class="ident" id="8087441">Decode</span><span class="op" id="8087447">(</span><span class="ident" id="8087448">x</span><span class="op" id="8087449">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087452">if</span>&nbsp;<span class="ident" id="8087455">err</span>&nbsp;<span class="op" id="8087459">!=</span>&nbsp;<span class="ident" id="8087462">nil</span>&nbsp;<span class="op" id="8087466">{</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087470">t</span><span class="op" id="8087471">.</span><span class="ident" id="8087472">Fatal</span><span class="op" id="8087477">(</span><span class="string" id="8087478">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8087493">,</span>&nbsp;<span class="ident" id="8087495">err</span><span class="op" id="8087498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087501">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087504">if</span>&nbsp;<span class="ident" id="8087507">x</span><span class="op" id="8087508">.</span><span class="ident" id="8087509">G</span><span class="op" id="8087510">.</span><span class="ident" id="8087511">a</span>&nbsp;<span class="op" id="8087513">!=</span>&nbsp;<span class="string" id="8087516">&#39;A&#39;</span>&nbsp;<span class="op" id="8087520">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087524">t</span><span class="op" id="8087525">.</span><span class="ident" id="8087526">Errorf</span><span class="op" id="8087532">(</span><span class="string" id="8087533">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8087554">,</span>&nbsp;<span class="ident" id="8087556">x</span><span class="op" id="8087557">.</span><span class="ident" id="8087558">G</span><span class="op" id="8087559">.</span><span class="ident" id="8087560">a</span><span class="op" id="8087561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087564">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8087567">//&nbsp;now&nbsp;the&nbsp;other&nbsp;direction,&nbsp;byte&nbsp;in&nbsp;field&nbsp;to&nbsp;string&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087629">b</span><span class="op" id="8087630">.</span><span class="ident" id="8087631">Reset</span><span class="op" id="8087636">(</span><span class="op" id="8087637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087640">err</span>&nbsp;<span class="op" id="8087644">=</span>&nbsp;<span class="ident" id="8087646">enc</span><span class="op" id="8087649">.</span><span class="ident" id="8087650">Encode</span><span class="op" id="8087656">(</span><span class="ident" id="8087657">GobTest0</span><span class="op" id="8087665">{</span><span class="num" id="8087666">17</span><span class="op" id="8087668">,</span>&nbsp;<span class="op" id="8087670">&amp;</span><span class="ident" id="8087671">ByteStruct</span><span class="op" id="8087681">{</span><span class="string" id="8087682">&#39;X&#39;</span><span class="op" id="8087685">}</span><span class="op" id="8087686">}</span><span class="op" id="8087687">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087690">if</span>&nbsp;<span class="ident" id="8087693">err</span>&nbsp;<span class="op" id="8087697">!=</span>&nbsp;<span class="ident" id="8087700">nil</span>&nbsp;<span class="op" id="8087704">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087708">t</span><span class="op" id="8087709">.</span><span class="ident" id="8087710">Fatal</span><span class="op" id="8087715">(</span><span class="string" id="8087716">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8087731">,</span>&nbsp;<span class="ident" id="8087733">err</span><span class="op" id="8087736">)</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087742">y</span>&nbsp;<span class="op" id="8087744">:=</span>&nbsp;<span class="builtinfunc" id="8087747">new</span><span class="op" id="8087750">(</span><span class="ident" id="8087751">GobTest1</span><span class="op" id="8087759">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087762">err</span>&nbsp;<span class="op" id="8087766">=</span>&nbsp;<span class="ident" id="8087768">dec</span><span class="op" id="8087771">.</span><span class="ident" id="8087772">Decode</span><span class="op" id="8087778">(</span><span class="ident" id="8087779">y</span><span class="op" id="8087780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087783">if</span>&nbsp;<span class="ident" id="8087786">err</span>&nbsp;<span class="op" id="8087790">!=</span>&nbsp;<span class="ident" id="8087793">nil</span>&nbsp;<span class="op" id="8087797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087801">t</span><span class="op" id="8087802">.</span><span class="ident" id="8087803">Fatal</span><span class="op" id="8087808">(</span><span class="string" id="8087809">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8087824">,</span>&nbsp;<span class="ident" id="8087826">err</span><span class="op" id="8087829">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087832">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8087835">if</span>&nbsp;<span class="ident" id="8087838">y</span><span class="op" id="8087839">.</span><span class="ident" id="8087840">G</span><span class="op" id="8087841">.</span><span class="ident" id="8087842">s</span>&nbsp;<span class="op" id="8087844">!=</span>&nbsp;<span class="string" id="8087847">&#34;XYZ&#34;</span>&nbsp;<span class="op" id="8087853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8087857">t</span><span class="op" id="8087858">.</span><span class="ident" id="8087859">Fatalf</span><span class="op" id="8087865">(</span><span class="string" id="8087866">&#34;expected&nbsp;`XYZ`&nbsp;got&nbsp;%q&#34;</span><span class="op" id="8087889">,</span>&nbsp;<span class="ident" id="8087891">y</span><span class="op" id="8087892">.</span><span class="ident" id="8087893">G</span><span class="op" id="8087894">.</span><span class="ident" id="8087895">s</span><span class="op" id="8087896">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8087899">}</span><br>
<span class="lineno"></span><span class="op" id="8087901">}</span><br>
<span class="lineno">415</span><br>
<span class="lineno"></span><span class="comment" id="8087904">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;encode&nbsp;a&nbsp;value&nbsp;and&nbsp;decode&nbsp;into&nbsp;a&nbsp;pointer.</span><br>
<span class="lineno"></span><span class="keyword" id="8087966">func</span>&nbsp;<span class="ident" id="8087971">TestGobEncoderValueEncoder</span><span class="op" id="8087997">(</span><span class="ident" id="8087998">t</span>&nbsp;<span class="op" id="8088000">*</span><span class="ident" id="8088001">testing</span><span class="op" id="8088008">.</span><span class="ident" id="8088009">T</span><span class="op" id="8088010">)</span>&nbsp;<span class="op" id="8088012">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8088015">//&nbsp;first,&nbsp;string&nbsp;in&nbsp;field&nbsp;to&nbsp;byte&nbsp;in&nbsp;field</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088059">b</span>&nbsp;<span class="op" id="8088061">:=</span>&nbsp;<span class="builtinfunc" id="8088064">new</span><span class="op" id="8088067">(</span><span class="ident" id="8088068">bytes</span><span class="op" id="8088073">.</span><span class="ident" id="8088074">Buffer</span><span class="op" id="8088080">)</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088083">enc</span>&nbsp;<span class="op" id="8088087">:=</span>&nbsp;<span class="ident" id="8088090">NewEncoder</span><span class="op" id="8088100">(</span><span class="ident" id="8088101">b</span><span class="op" id="8088102">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088105">err</span>&nbsp;<span class="op" id="8088109">:=</span>&nbsp;<span class="ident" id="8088112">enc</span><span class="op" id="8088115">.</span><span class="ident" id="8088116">Encode</span><span class="op" id="8088122">(</span><span class="ident" id="8088123">GobTest4</span><span class="op" id="8088131">{</span><span class="num" id="8088132">17</span><span class="op" id="8088134">,</span>&nbsp;<span class="ident" id="8088136">ValueGobber</span><span class="op" id="8088147">(</span><span class="string" id="8088148">&#34;hello&#34;</span><span class="op" id="8088155">)</span><span class="op" id="8088156">,</span>&nbsp;<span class="ident" id="8088158">BinaryValueGobber</span><span class="op" id="8088175">(</span><span class="string" id="8088176">&#34;Καλημέρα&#34;</span><span class="op" id="8088194">)</span><span class="op" id="8088195">,</span>&nbsp;<span class="ident" id="8088197">TextValueGobber</span><span class="op" id="8088212">(</span><span class="string" id="8088213">&#34;こんにちは&#34;</span><span class="op" id="8088230">)</span><span class="op" id="8088231">}</span><span class="op" id="8088232">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8088235">if</span>&nbsp;<span class="ident" id="8088238">err</span>&nbsp;<span class="op" id="8088242">!=</span>&nbsp;<span class="ident" id="8088245">nil</span>&nbsp;<span class="op" id="8088249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088253">t</span><span class="op" id="8088254">.</span><span class="ident" id="8088255">Fatal</span><span class="op" id="8088260">(</span><span class="string" id="8088261">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8088276">,</span>&nbsp;<span class="ident" id="8088278">err</span><span class="op" id="8088281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8088284">}</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088287">dec</span>&nbsp;<span class="op" id="8088291">:=</span>&nbsp;<span class="ident" id="8088294">NewDecoder</span><span class="op" id="8088304">(</span><span class="ident" id="8088305">b</span><span class="op" id="8088306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088309">x</span>&nbsp;<span class="op" id="8088311">:=</span>&nbsp;<span class="builtinfunc" id="8088314">new</span><span class="op" id="8088317">(</span><span class="ident" id="8088318">GobTest5</span><span class="op" id="8088326">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088329">err</span>&nbsp;<span class="op" id="8088333">=</span>&nbsp;<span class="ident" id="8088335">dec</span><span class="op" id="8088338">.</span><span class="ident" id="8088339">Decode</span><span class="op" id="8088345">(</span><span class="ident" id="8088346">x</span><span class="op" id="8088347">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8088350">if</span>&nbsp;<span class="ident" id="8088353">err</span>&nbsp;<span class="op" id="8088357">!=</span>&nbsp;<span class="ident" id="8088360">nil</span>&nbsp;<span class="op" id="8088364">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088368">t</span><span class="op" id="8088369">.</span><span class="ident" id="8088370">Fatal</span><span class="op" id="8088375">(</span><span class="string" id="8088376">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8088391">,</span>&nbsp;<span class="ident" id="8088393">err</span><span class="op" id="8088396">)</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8088399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8088402">if</span>&nbsp;<span class="op" id="8088405">*</span><span class="ident" id="8088406">x</span><span class="op" id="8088407">.</span><span class="ident" id="8088408">V</span>&nbsp;<span class="op" id="8088410">!=</span>&nbsp;<span class="string" id="8088413">&#34;hello&#34;</span>&nbsp;<span class="op" id="8088421">||</span>&nbsp;<span class="op" id="8088424">*</span><span class="ident" id="8088425">x</span><span class="op" id="8088426">.</span><span class="ident" id="8088427">BV</span>&nbsp;<span class="op" id="8088430">!=</span>&nbsp;<span class="string" id="8088433">&#34;Καλημέρα&#34;</span>&nbsp;<span class="op" id="8088452">||</span>&nbsp;<span class="op" id="8088455">*</span><span class="ident" id="8088456">x</span><span class="op" id="8088457">.</span><span class="ident" id="8088458">TV</span>&nbsp;<span class="op" id="8088461">!=</span>&nbsp;<span class="string" id="8088464">&#34;こんにちは&#34;</span>&nbsp;<span class="op" id="8088482">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088486">t</span><span class="op" id="8088487">.</span><span class="ident" id="8088488">Errorf</span><span class="op" id="8088494">(</span><span class="string" id="8088495">&#34;expected&nbsp;`hello`&nbsp;got&nbsp;%s&#34;</span><span class="op" id="8088520">,</span>&nbsp;<span class="op" id="8088522">*</span><span class="ident" id="8088523">x</span><span class="op" id="8088524">.</span><span class="ident" id="8088525">V</span><span class="op" id="8088526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8088529">}</span><br>
<span class="lineno"></span><span class="op" id="8088531">}</span><br>
<span class="lineno">435</span><br>
<span class="lineno"></span><span class="comment" id="8088534">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;value&nbsp;then&nbsp;a&nbsp;pointer&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8088602">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.&nbsp;&nbsp;Bug&nbsp;4647.</span><br>
<span class="lineno"></span><span class="keyword" id="8088643">func</span>&nbsp;<span class="ident" id="8088648">TestGobEncoderValueThenPointer</span><span class="op" id="8088678">(</span><span class="ident" id="8088679">t</span>&nbsp;<span class="op" id="8088681">*</span><span class="ident" id="8088682">testing</span><span class="op" id="8088689">.</span><span class="ident" id="8088690">T</span><span class="op" id="8088691">)</span>&nbsp;<span class="op" id="8088693">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088696">v</span>&nbsp;<span class="op" id="8088698">:=</span>&nbsp;<span class="ident" id="8088701">ValueGobber</span><span class="op" id="8088712">(</span><span class="string" id="8088713">&#34;forty-two&#34;</span><span class="op" id="8088724">)</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088727">w</span>&nbsp;<span class="op" id="8088729">:=</span>&nbsp;<span class="ident" id="8088732">ValueGobber</span><span class="op" id="8088743">(</span><span class="string" id="8088744">&#34;six-by-nine&#34;</span><span class="op" id="8088757">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088760">bv</span>&nbsp;<span class="op" id="8088763">:=</span>&nbsp;<span class="ident" id="8088766">BinaryValueGobber</span><span class="op" id="8088783">(</span><span class="string" id="8088784">&#34;1nanocentury&#34;</span><span class="op" id="8088798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088801">bw</span>&nbsp;<span class="op" id="8088804">:=</span>&nbsp;<span class="ident" id="8088807">BinaryValueGobber</span><span class="op" id="8088824">(</span><span class="string" id="8088825">&#34;πseconds&#34;</span><span class="op" id="8088836">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088839">tv</span>&nbsp;<span class="op" id="8088842">:=</span>&nbsp;<span class="ident" id="8088845">TextValueGobber</span><span class="op" id="8088860">(</span><span class="string" id="8088861">&#34;gravitationalacceleration&#34;</span><span class="op" id="8088888">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8088891">tw</span>&nbsp;<span class="op" id="8088894">:=</span>&nbsp;<span class="ident" id="8088897">TextValueGobber</span><span class="op" id="8088912">(</span><span class="string" id="8088913">&#34;π²ft/s²&#34;</span><span class="op" id="8088925">)</span><br>
<span class="lineno">445</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8088929">//&nbsp;this&nbsp;was&nbsp;a&nbsp;bug:&nbsp;encoding&nbsp;a&nbsp;GobEncoder&nbsp;by&nbsp;value&nbsp;before&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8089000">//&nbsp;pointer&nbsp;would&nbsp;cause&nbsp;duplicate&nbsp;type&nbsp;definitions&nbsp;to&nbsp;be&nbsp;sent.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089064">b</span>&nbsp;<span class="op" id="8089066">:=</span>&nbsp;<span class="builtinfunc" id="8089069">new</span><span class="op" id="8089072">(</span><span class="ident" id="8089073">bytes</span><span class="op" id="8089078">.</span><span class="ident" id="8089079">Buffer</span><span class="op" id="8089085">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089088">enc</span>&nbsp;<span class="op" id="8089092">:=</span>&nbsp;<span class="ident" id="8089095">NewEncoder</span><span class="op" id="8089105">(</span><span class="ident" id="8089106">b</span><span class="op" id="8089107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089110">if</span>&nbsp;<span class="ident" id="8089113">err</span>&nbsp;<span class="op" id="8089117">:=</span>&nbsp;<span class="ident" id="8089120">enc</span><span class="op" id="8089123">.</span><span class="ident" id="8089124">Encode</span><span class="op" id="8089130">(</span><span class="ident" id="8089131">GobTest6</span><span class="op" id="8089139">{</span><span class="num" id="8089140">42</span><span class="op" id="8089142">,</span>&nbsp;<span class="ident" id="8089144">v</span><span class="op" id="8089145">,</span>&nbsp;<span class="op" id="8089147">&amp;</span><span class="ident" id="8089148">w</span><span class="op" id="8089149">,</span>&nbsp;<span class="ident" id="8089151">bv</span><span class="op" id="8089153">,</span>&nbsp;<span class="op" id="8089155">&amp;</span><span class="ident" id="8089156">bw</span><span class="op" id="8089158">,</span>&nbsp;<span class="ident" id="8089160">tv</span><span class="op" id="8089162">,</span>&nbsp;<span class="op" id="8089164">&amp;</span><span class="ident" id="8089165">tw</span><span class="op" id="8089167">}</span><span class="op" id="8089168">)</span><span class="op" id="8089169">;</span>&nbsp;<span class="ident" id="8089171">err</span>&nbsp;<span class="op" id="8089175">!=</span>&nbsp;<span class="ident" id="8089178">nil</span>&nbsp;<span class="op" id="8089182">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089186">t</span><span class="op" id="8089187">.</span><span class="ident" id="8089188">Fatal</span><span class="op" id="8089193">(</span><span class="string" id="8089194">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8089209">,</span>&nbsp;<span class="ident" id="8089211">err</span><span class="op" id="8089214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089220">dec</span>&nbsp;<span class="op" id="8089224">:=</span>&nbsp;<span class="ident" id="8089227">NewDecoder</span><span class="op" id="8089237">(</span><span class="ident" id="8089238">b</span><span class="op" id="8089239">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089242">x</span>&nbsp;<span class="op" id="8089244">:=</span>&nbsp;<span class="builtinfunc" id="8089247">new</span><span class="op" id="8089250">(</span><span class="ident" id="8089251">GobTest6</span><span class="op" id="8089259">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089262">if</span>&nbsp;<span class="ident" id="8089265">err</span>&nbsp;<span class="op" id="8089269">:=</span>&nbsp;<span class="ident" id="8089272">dec</span><span class="op" id="8089275">.</span><span class="ident" id="8089276">Decode</span><span class="op" id="8089282">(</span><span class="ident" id="8089283">x</span><span class="op" id="8089284">)</span><span class="op" id="8089285">;</span>&nbsp;<span class="ident" id="8089287">err</span>&nbsp;<span class="op" id="8089291">!=</span>&nbsp;<span class="ident" id="8089294">nil</span>&nbsp;<span class="op" id="8089298">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089302">t</span><span class="op" id="8089303">.</span><span class="ident" id="8089304">Fatal</span><span class="op" id="8089309">(</span><span class="string" id="8089310">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8089325">,</span>&nbsp;<span class="ident" id="8089327">err</span><span class="op" id="8089330">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089333">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089337">if</span>&nbsp;<span class="ident" id="8089340">got</span><span class="op" id="8089343">,</span>&nbsp;<span class="ident" id="8089345">want</span>&nbsp;<span class="op" id="8089350">:=</span>&nbsp;<span class="ident" id="8089353">x</span><span class="op" id="8089354">.</span><span class="ident" id="8089355">V</span><span class="op" id="8089356">,</span>&nbsp;<span class="ident" id="8089358">v</span><span class="op" id="8089359">;</span>&nbsp;<span class="ident" id="8089361">got</span>&nbsp;<span class="op" id="8089365">!=</span>&nbsp;<span class="ident" id="8089368">want</span>&nbsp;<span class="op" id="8089373">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089377">t</span><span class="op" id="8089378">.</span><span class="ident" id="8089379">Errorf</span><span class="op" id="8089385">(</span><span class="string" id="8089386">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089403">,</span>&nbsp;<span class="ident" id="8089405">got</span><span class="op" id="8089408">,</span>&nbsp;<span class="ident" id="8089410">want</span><span class="op" id="8089414">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089417">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089420">if</span>&nbsp;<span class="ident" id="8089423">got</span><span class="op" id="8089426">,</span>&nbsp;<span class="ident" id="8089428">want</span>&nbsp;<span class="op" id="8089433">:=</span>&nbsp;<span class="ident" id="8089436">x</span><span class="op" id="8089437">.</span><span class="ident" id="8089438">W</span><span class="op" id="8089439">,</span>&nbsp;<span class="ident" id="8089441">w</span><span class="op" id="8089442">;</span>&nbsp;<span class="ident" id="8089444">got</span>&nbsp;<span class="op" id="8089448">==</span>&nbsp;<span class="ident" id="8089451">nil</span>&nbsp;<span class="op" id="8089455">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089459">t</span><span class="op" id="8089460">.</span><span class="ident" id="8089461">Errorf</span><span class="op" id="8089467">(</span><span class="string" id="8089468">&#34;w&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089486">,</span>&nbsp;<span class="ident" id="8089488">want</span><span class="op" id="8089492">)</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089495">}</span>&nbsp;<span class="keyword" id="8089497">else</span>&nbsp;<span class="keyword" id="8089502">if</span>&nbsp;<span class="op" id="8089505">*</span><span class="ident" id="8089506">got</span>&nbsp;<span class="op" id="8089510">!=</span>&nbsp;<span class="ident" id="8089513">want</span>&nbsp;<span class="op" id="8089518">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089522">t</span><span class="op" id="8089523">.</span><span class="ident" id="8089524">Errorf</span><span class="op" id="8089530">(</span><span class="string" id="8089531">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089548">,</span>&nbsp;<span class="op" id="8089550">*</span><span class="ident" id="8089551">got</span><span class="op" id="8089554">,</span>&nbsp;<span class="ident" id="8089556">want</span><span class="op" id="8089560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089563">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089567">if</span>&nbsp;<span class="ident" id="8089570">got</span><span class="op" id="8089573">,</span>&nbsp;<span class="ident" id="8089575">want</span>&nbsp;<span class="op" id="8089580">:=</span>&nbsp;<span class="ident" id="8089583">x</span><span class="op" id="8089584">.</span><span class="ident" id="8089585">BV</span><span class="op" id="8089587">,</span>&nbsp;<span class="ident" id="8089589">bv</span><span class="op" id="8089591">;</span>&nbsp;<span class="ident" id="8089593">got</span>&nbsp;<span class="op" id="8089597">!=</span>&nbsp;<span class="ident" id="8089600">want</span>&nbsp;<span class="op" id="8089605">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089609">t</span><span class="op" id="8089610">.</span><span class="ident" id="8089611">Errorf</span><span class="op" id="8089617">(</span><span class="string" id="8089618">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089636">,</span>&nbsp;<span class="ident" id="8089638">got</span><span class="op" id="8089641">,</span>&nbsp;<span class="ident" id="8089643">want</span><span class="op" id="8089647">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089650">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089653">if</span>&nbsp;<span class="ident" id="8089656">got</span><span class="op" id="8089659">,</span>&nbsp;<span class="ident" id="8089661">want</span>&nbsp;<span class="op" id="8089666">:=</span>&nbsp;<span class="ident" id="8089669">x</span><span class="op" id="8089670">.</span><span class="ident" id="8089671">BW</span><span class="op" id="8089673">,</span>&nbsp;<span class="ident" id="8089675">bw</span><span class="op" id="8089677">;</span>&nbsp;<span class="ident" id="8089679">got</span>&nbsp;<span class="op" id="8089683">==</span>&nbsp;<span class="ident" id="8089686">nil</span>&nbsp;<span class="op" id="8089690">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089694">t</span><span class="op" id="8089695">.</span><span class="ident" id="8089696">Errorf</span><span class="op" id="8089702">(</span><span class="string" id="8089703">&#34;bw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089722">,</span>&nbsp;<span class="ident" id="8089724">want</span><span class="op" id="8089728">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089731">}</span>&nbsp;<span class="keyword" id="8089733">else</span>&nbsp;<span class="keyword" id="8089738">if</span>&nbsp;<span class="op" id="8089741">*</span><span class="ident" id="8089742">got</span>&nbsp;<span class="op" id="8089746">!=</span>&nbsp;<span class="ident" id="8089749">want</span>&nbsp;<span class="op" id="8089754">{</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089758">t</span><span class="op" id="8089759">.</span><span class="ident" id="8089760">Errorf</span><span class="op" id="8089766">(</span><span class="string" id="8089767">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089785">,</span>&nbsp;<span class="op" id="8089787">*</span><span class="ident" id="8089788">got</span><span class="op" id="8089791">,</span>&nbsp;<span class="ident" id="8089793">want</span><span class="op" id="8089797">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089800">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089804">if</span>&nbsp;<span class="ident" id="8089807">got</span><span class="op" id="8089810">,</span>&nbsp;<span class="ident" id="8089812">want</span>&nbsp;<span class="op" id="8089817">:=</span>&nbsp;<span class="ident" id="8089820">x</span><span class="op" id="8089821">.</span><span class="ident" id="8089822">TV</span><span class="op" id="8089824">,</span>&nbsp;<span class="ident" id="8089826">tv</span><span class="op" id="8089828">;</span>&nbsp;<span class="ident" id="8089830">got</span>&nbsp;<span class="op" id="8089834">!=</span>&nbsp;<span class="ident" id="8089837">want</span>&nbsp;<span class="op" id="8089842">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089846">t</span><span class="op" id="8089847">.</span><span class="ident" id="8089848">Errorf</span><span class="op" id="8089854">(</span><span class="string" id="8089855">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089873">,</span>&nbsp;<span class="ident" id="8089875">got</span><span class="op" id="8089878">,</span>&nbsp;<span class="ident" id="8089880">want</span><span class="op" id="8089884">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089887">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8089890">if</span>&nbsp;<span class="ident" id="8089893">got</span><span class="op" id="8089896">,</span>&nbsp;<span class="ident" id="8089898">want</span>&nbsp;<span class="op" id="8089903">:=</span>&nbsp;<span class="ident" id="8089906">x</span><span class="op" id="8089907">.</span><span class="ident" id="8089908">TW</span><span class="op" id="8089910">,</span>&nbsp;<span class="ident" id="8089912">tw</span><span class="op" id="8089914">;</span>&nbsp;<span class="ident" id="8089916">got</span>&nbsp;<span class="op" id="8089920">==</span>&nbsp;<span class="ident" id="8089923">nil</span>&nbsp;<span class="op" id="8089927">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089931">t</span><span class="op" id="8089932">.</span><span class="ident" id="8089933">Errorf</span><span class="op" id="8089939">(</span><span class="string" id="8089940">&#34;tw&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8089959">,</span>&nbsp;<span class="ident" id="8089961">want</span><span class="op" id="8089965">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8089968">}</span>&nbsp;<span class="keyword" id="8089970">else</span>&nbsp;<span class="keyword" id="8089975">if</span>&nbsp;<span class="op" id="8089978">*</span><span class="ident" id="8089979">got</span>&nbsp;<span class="op" id="8089983">!=</span>&nbsp;<span class="ident" id="8089986">want</span>&nbsp;<span class="op" id="8089991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8089995">t</span><span class="op" id="8089996">.</span><span class="ident" id="8089997">Errorf</span><span class="op" id="8090003">(</span><span class="string" id="8090004">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8090022">,</span>&nbsp;<span class="op" id="8090024">*</span><span class="ident" id="8090025">got</span><span class="op" id="8090028">,</span>&nbsp;<span class="ident" id="8090030">want</span><span class="op" id="8090034">)</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090037">}</span><br>
<span class="lineno"></span><span class="op" id="8090039">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8090042">//&nbsp;Test&nbsp;that&nbsp;we&nbsp;can&nbsp;use&nbsp;a&nbsp;pointer&nbsp;then&nbsp;a&nbsp;value&nbsp;type&nbsp;of&nbsp;a&nbsp;GobEncoder</span><br>
<span class="lineno"></span><span class="comment" id="8090110">//&nbsp;in&nbsp;the&nbsp;same&nbsp;encoded&nbsp;value.</span><br>
<span class="lineno">490</span><span class="keyword" id="8090140">func</span>&nbsp;<span class="ident" id="8090145">TestGobEncoderPointerThenValue</span><span class="op" id="8090175">(</span><span class="ident" id="8090176">t</span>&nbsp;<span class="op" id="8090178">*</span><span class="ident" id="8090179">testing</span><span class="op" id="8090186">.</span><span class="ident" id="8090187">T</span><span class="op" id="8090188">)</span>&nbsp;<span class="op" id="8090190">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090193">v</span>&nbsp;<span class="op" id="8090195">:=</span>&nbsp;<span class="ident" id="8090198">ValueGobber</span><span class="op" id="8090209">(</span><span class="string" id="8090210">&#34;forty-two&#34;</span><span class="op" id="8090221">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090224">w</span>&nbsp;<span class="op" id="8090226">:=</span>&nbsp;<span class="ident" id="8090229">ValueGobber</span><span class="op" id="8090240">(</span><span class="string" id="8090241">&#34;six-by-nine&#34;</span><span class="op" id="8090254">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090257">bv</span>&nbsp;<span class="op" id="8090260">:=</span>&nbsp;<span class="ident" id="8090263">BinaryValueGobber</span><span class="op" id="8090280">(</span><span class="string" id="8090281">&#34;1nanocentury&#34;</span><span class="op" id="8090295">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090298">bw</span>&nbsp;<span class="op" id="8090301">:=</span>&nbsp;<span class="ident" id="8090304">BinaryValueGobber</span><span class="op" id="8090321">(</span><span class="string" id="8090322">&#34;πseconds&#34;</span><span class="op" id="8090333">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090336">tv</span>&nbsp;<span class="op" id="8090339">:=</span>&nbsp;<span class="ident" id="8090342">TextValueGobber</span><span class="op" id="8090357">(</span><span class="string" id="8090358">&#34;gravitationalacceleration&#34;</span><span class="op" id="8090385">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090388">tw</span>&nbsp;<span class="op" id="8090391">:=</span>&nbsp;<span class="ident" id="8090394">TextValueGobber</span><span class="op" id="8090409">(</span><span class="string" id="8090410">&#34;π²ft/s²&#34;</span><span class="op" id="8090422">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090426">b</span>&nbsp;<span class="op" id="8090428">:=</span>&nbsp;<span class="builtinfunc" id="8090431">new</span><span class="op" id="8090434">(</span><span class="ident" id="8090435">bytes</span><span class="op" id="8090440">.</span><span class="ident" id="8090441">Buffer</span><span class="op" id="8090447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090450">enc</span>&nbsp;<span class="op" id="8090454">:=</span>&nbsp;<span class="ident" id="8090457">NewEncoder</span><span class="op" id="8090467">(</span><span class="ident" id="8090468">b</span><span class="op" id="8090469">)</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8090472">if</span>&nbsp;<span class="ident" id="8090475">err</span>&nbsp;<span class="op" id="8090479">:=</span>&nbsp;<span class="ident" id="8090482">enc</span><span class="op" id="8090485">.</span><span class="ident" id="8090486">Encode</span><span class="op" id="8090492">(</span><span class="ident" id="8090493">GobTest7</span><span class="op" id="8090501">{</span><span class="num" id="8090502">42</span><span class="op" id="8090504">,</span>&nbsp;<span class="op" id="8090506">&amp;</span><span class="ident" id="8090507">v</span><span class="op" id="8090508">,</span>&nbsp;<span class="ident" id="8090510">w</span><span class="op" id="8090511">,</span>&nbsp;<span class="op" id="8090513">&amp;</span><span class="ident" id="8090514">bv</span><span class="op" id="8090516">,</span>&nbsp;<span class="ident" id="8090518">bw</span><span class="op" id="8090520">,</span>&nbsp;<span class="op" id="8090522">&amp;</span><span class="ident" id="8090523">tv</span><span class="op" id="8090525">,</span>&nbsp;<span class="ident" id="8090527">tw</span><span class="op" id="8090529">}</span><span class="op" id="8090530">)</span><span class="op" id="8090531">;</span>&nbsp;<span class="ident" id="8090533">err</span>&nbsp;<span class="op" id="8090537">!=</span>&nbsp;<span class="ident" id="8090540">nil</span>&nbsp;<span class="op" id="8090544">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090548">t</span><span class="op" id="8090549">.</span><span class="ident" id="8090550">Fatal</span><span class="op" id="8090555">(</span><span class="string" id="8090556">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8090571">,</span>&nbsp;<span class="ident" id="8090573">err</span><span class="op" id="8090576">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090579">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090582">dec</span>&nbsp;<span class="op" id="8090586">:=</span>&nbsp;<span class="ident" id="8090589">NewDecoder</span><span class="op" id="8090599">(</span><span class="ident" id="8090600">b</span><span class="op" id="8090601">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090604">x</span>&nbsp;<span class="op" id="8090606">:=</span>&nbsp;<span class="builtinfunc" id="8090609">new</span><span class="op" id="8090612">(</span><span class="ident" id="8090613">GobTest7</span><span class="op" id="8090621">)</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8090624">if</span>&nbsp;<span class="ident" id="8090627">err</span>&nbsp;<span class="op" id="8090631">:=</span>&nbsp;<span class="ident" id="8090634">dec</span><span class="op" id="8090637">.</span><span class="ident" id="8090638">Decode</span><span class="op" id="8090644">(</span><span class="ident" id="8090645">x</span><span class="op" id="8090646">)</span><span class="op" id="8090647">;</span>&nbsp;<span class="ident" id="8090649">err</span>&nbsp;<span class="op" id="8090653">!=</span>&nbsp;<span class="ident" id="8090656">nil</span>&nbsp;<span class="op" id="8090660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090664">t</span><span class="op" id="8090665">.</span><span class="ident" id="8090666">Fatal</span><span class="op" id="8090671">(</span><span class="string" id="8090672">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8090687">,</span>&nbsp;<span class="ident" id="8090689">err</span><span class="op" id="8090692">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090695">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8090699">if</span>&nbsp;<span class="ident" id="8090702">got</span><span class="op" id="8090705">,</span>&nbsp;<span class="ident" id="8090707">want</span>&nbsp;<span class="op" id="8090712">:=</span>&nbsp;<span class="ident" id="8090715">x</span><span class="op" id="8090716">.</span><span class="ident" id="8090717">V</span><span class="op" id="8090718">,</span>&nbsp;<span class="ident" id="8090720">v</span><span class="op" id="8090721">;</span>&nbsp;<span class="ident" id="8090723">got</span>&nbsp;<span class="op" id="8090727">==</span>&nbsp;<span class="ident" id="8090730">nil</span>&nbsp;<span class="op" id="8090734">{</span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090738">t</span><span class="op" id="8090739">.</span><span class="ident" id="8090740">Errorf</span><span class="op" id="8090746">(</span><span class="string" id="8090747">&#34;v&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8090765">,</span>&nbsp;<span class="ident" id="8090767">want</span><span class="op" id="8090771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090774">}</span>&nbsp;<span class="keyword" id="8090776">else</span>&nbsp;<span class="keyword" id="8090781">if</span>&nbsp;<span class="op" id="8090784">*</span><span class="ident" id="8090785">got</span>&nbsp;<span class="op" id="8090789">!=</span>&nbsp;<span class="ident" id="8090792">want</span>&nbsp;<span class="op" id="8090797">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090801">t</span><span class="op" id="8090802">.</span><span class="ident" id="8090803">Errorf</span><span class="op" id="8090809">(</span><span class="string" id="8090810">&#34;v&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8090827">,</span>&nbsp;<span class="op" id="8090829">*</span><span class="ident" id="8090830">got</span><span class="op" id="8090833">,</span>&nbsp;<span class="ident" id="8090835">want</span><span class="op" id="8090839">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090842">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8090845">if</span>&nbsp;<span class="ident" id="8090848">got</span><span class="op" id="8090851">,</span>&nbsp;<span class="ident" id="8090853">want</span>&nbsp;<span class="op" id="8090858">:=</span>&nbsp;<span class="ident" id="8090861">x</span><span class="op" id="8090862">.</span><span class="ident" id="8090863">W</span><span class="op" id="8090864">,</span>&nbsp;<span class="ident" id="8090866">w</span><span class="op" id="8090867">;</span>&nbsp;<span class="ident" id="8090869">got</span>&nbsp;<span class="op" id="8090873">!=</span>&nbsp;<span class="ident" id="8090876">want</span>&nbsp;<span class="op" id="8090881">{</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090885">t</span><span class="op" id="8090886">.</span><span class="ident" id="8090887">Errorf</span><span class="op" id="8090893">(</span><span class="string" id="8090894">&#34;w&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8090911">,</span>&nbsp;<span class="ident" id="8090913">got</span><span class="op" id="8090916">,</span>&nbsp;<span class="ident" id="8090918">want</span><span class="op" id="8090922">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8090925">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8090929">if</span>&nbsp;<span class="ident" id="8090932">got</span><span class="op" id="8090935">,</span>&nbsp;<span class="ident" id="8090937">want</span>&nbsp;<span class="op" id="8090942">:=</span>&nbsp;<span class="ident" id="8090945">x</span><span class="op" id="8090946">.</span><span class="ident" id="8090947">BV</span><span class="op" id="8090949">,</span>&nbsp;<span class="ident" id="8090951">bv</span><span class="op" id="8090953">;</span>&nbsp;<span class="ident" id="8090955">got</span>&nbsp;<span class="op" id="8090959">==</span>&nbsp;<span class="ident" id="8090962">nil</span>&nbsp;<span class="op" id="8090966">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8090970">t</span><span class="op" id="8090971">.</span><span class="ident" id="8090972">Errorf</span><span class="op" id="8090978">(</span><span class="string" id="8090979">&#34;bv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8090998">,</span>&nbsp;<span class="ident" id="8091000">want</span><span class="op" id="8091004">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091007">}</span>&nbsp;<span class="keyword" id="8091009">else</span>&nbsp;<span class="keyword" id="8091014">if</span>&nbsp;<span class="op" id="8091017">*</span><span class="ident" id="8091018">got</span>&nbsp;<span class="op" id="8091022">!=</span>&nbsp;<span class="ident" id="8091025">want</span>&nbsp;<span class="op" id="8091030">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091034">t</span><span class="op" id="8091035">.</span><span class="ident" id="8091036">Errorf</span><span class="op" id="8091042">(</span><span class="string" id="8091043">&#34;bv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8091061">,</span>&nbsp;<span class="op" id="8091063">*</span><span class="ident" id="8091064">got</span><span class="op" id="8091067">,</span>&nbsp;<span class="ident" id="8091069">want</span><span class="op" id="8091073">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091076">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091079">if</span>&nbsp;<span class="ident" id="8091082">got</span><span class="op" id="8091085">,</span>&nbsp;<span class="ident" id="8091087">want</span>&nbsp;<span class="op" id="8091092">:=</span>&nbsp;<span class="ident" id="8091095">x</span><span class="op" id="8091096">.</span><span class="ident" id="8091097">BW</span><span class="op" id="8091099">,</span>&nbsp;<span class="ident" id="8091101">bw</span><span class="op" id="8091103">;</span>&nbsp;<span class="ident" id="8091105">got</span>&nbsp;<span class="op" id="8091109">!=</span>&nbsp;<span class="ident" id="8091112">want</span>&nbsp;<span class="op" id="8091117">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091121">t</span><span class="op" id="8091122">.</span><span class="ident" id="8091123">Errorf</span><span class="op" id="8091129">(</span><span class="string" id="8091130">&#34;bw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8091148">,</span>&nbsp;<span class="ident" id="8091150">got</span><span class="op" id="8091153">,</span>&nbsp;<span class="ident" id="8091155">want</span><span class="op" id="8091159">)</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091162">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091166">if</span>&nbsp;<span class="ident" id="8091169">got</span><span class="op" id="8091172">,</span>&nbsp;<span class="ident" id="8091174">want</span>&nbsp;<span class="op" id="8091179">:=</span>&nbsp;<span class="ident" id="8091182">x</span><span class="op" id="8091183">.</span><span class="ident" id="8091184">TV</span><span class="op" id="8091186">,</span>&nbsp;<span class="ident" id="8091188">tv</span><span class="op" id="8091190">;</span>&nbsp;<span class="ident" id="8091192">got</span>&nbsp;<span class="op" id="8091196">==</span>&nbsp;<span class="ident" id="8091199">nil</span>&nbsp;<span class="op" id="8091203">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091207">t</span><span class="op" id="8091208">.</span><span class="ident" id="8091209">Errorf</span><span class="op" id="8091215">(</span><span class="string" id="8091216">&#34;tv&nbsp;=&nbsp;nil,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8091235">,</span>&nbsp;<span class="ident" id="8091237">want</span><span class="op" id="8091241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091244">}</span>&nbsp;<span class="keyword" id="8091246">else</span>&nbsp;<span class="keyword" id="8091251">if</span>&nbsp;<span class="op" id="8091254">*</span><span class="ident" id="8091255">got</span>&nbsp;<span class="op" id="8091259">!=</span>&nbsp;<span class="ident" id="8091262">want</span>&nbsp;<span class="op" id="8091267">{</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091271">t</span><span class="op" id="8091272">.</span><span class="ident" id="8091273">Errorf</span><span class="op" id="8091279">(</span><span class="string" id="8091280">&#34;tv&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8091298">,</span>&nbsp;<span class="op" id="8091300">*</span><span class="ident" id="8091301">got</span><span class="op" id="8091304">,</span>&nbsp;<span class="ident" id="8091306">want</span><span class="op" id="8091310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091313">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091316">if</span>&nbsp;<span class="ident" id="8091319">got</span><span class="op" id="8091322">,</span>&nbsp;<span class="ident" id="8091324">want</span>&nbsp;<span class="op" id="8091329">:=</span>&nbsp;<span class="ident" id="8091332">x</span><span class="op" id="8091333">.</span><span class="ident" id="8091334">TW</span><span class="op" id="8091336">,</span>&nbsp;<span class="ident" id="8091338">tw</span><span class="op" id="8091340">;</span>&nbsp;<span class="ident" id="8091342">got</span>&nbsp;<span class="op" id="8091346">!=</span>&nbsp;<span class="ident" id="8091349">want</span>&nbsp;<span class="op" id="8091354">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091358">t</span><span class="op" id="8091359">.</span><span class="ident" id="8091360">Errorf</span><span class="op" id="8091366">(</span><span class="string" id="8091367">&#34;tw&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8091385">,</span>&nbsp;<span class="ident" id="8091387">got</span><span class="op" id="8091390">,</span>&nbsp;<span class="ident" id="8091392">want</span><span class="op" id="8091396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091399">}</span><br>
<span class="lineno">535</span><span class="op" id="8091401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8091404">func</span>&nbsp;<span class="ident" id="8091409">TestGobEncoderFieldTypeError</span><span class="op" id="8091437">(</span><span class="ident" id="8091438">t</span>&nbsp;<span class="op" id="8091440">*</span><span class="ident" id="8091441">testing</span><span class="op" id="8091448">.</span><span class="ident" id="8091449">T</span><span class="op" id="8091450">)</span>&nbsp;<span class="op" id="8091452">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8091455">//&nbsp;GobEncoder&nbsp;to&nbsp;non-decoder:&nbsp;error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091492">b</span>&nbsp;<span class="op" id="8091494">:=</span>&nbsp;<span class="builtinfunc" id="8091497">new</span><span class="op" id="8091500">(</span><span class="ident" id="8091501">bytes</span><span class="op" id="8091506">.</span><span class="ident" id="8091507">Buffer</span><span class="op" id="8091513">)</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091516">enc</span>&nbsp;<span class="op" id="8091520">:=</span>&nbsp;<span class="ident" id="8091523">NewEncoder</span><span class="op" id="8091533">(</span><span class="ident" id="8091534">b</span><span class="op" id="8091535">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091538">err</span>&nbsp;<span class="op" id="8091542">:=</span>&nbsp;<span class="ident" id="8091545">enc</span><span class="op" id="8091548">.</span><span class="ident" id="8091549">Encode</span><span class="op" id="8091555">(</span><span class="ident" id="8091556">GobTest1</span><span class="op" id="8091564">{</span><span class="num" id="8091565">17</span><span class="op" id="8091567">,</span>&nbsp;<span class="op" id="8091569">&amp;</span><span class="ident" id="8091570">StringStruct</span><span class="op" id="8091582">{</span><span class="string" id="8091583">&#34;ABC&#34;</span><span class="op" id="8091588">}</span><span class="op" id="8091589">}</span><span class="op" id="8091590">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091593">if</span>&nbsp;<span class="ident" id="8091596">err</span>&nbsp;<span class="op" id="8091600">!=</span>&nbsp;<span class="ident" id="8091603">nil</span>&nbsp;<span class="op" id="8091607">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091611">t</span><span class="op" id="8091612">.</span><span class="ident" id="8091613">Fatal</span><span class="op" id="8091618">(</span><span class="string" id="8091619">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8091634">,</span>&nbsp;<span class="ident" id="8091636">err</span><span class="op" id="8091639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091642">}</span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091645">dec</span>&nbsp;<span class="op" id="8091649">:=</span>&nbsp;<span class="ident" id="8091652">NewDecoder</span><span class="op" id="8091662">(</span><span class="ident" id="8091663">b</span><span class="op" id="8091664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091667">x</span>&nbsp;<span class="op" id="8091669">:=</span>&nbsp;<span class="op" id="8091672">&amp;</span><span class="ident" id="8091673">GobTest2</span><span class="op" id="8091681">{</span><span class="op" id="8091682">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091685">err</span>&nbsp;<span class="op" id="8091689">=</span>&nbsp;<span class="ident" id="8091691">dec</span><span class="op" id="8091694">.</span><span class="ident" id="8091695">Decode</span><span class="op" id="8091701">(</span><span class="ident" id="8091702">x</span><span class="op" id="8091703">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091706">if</span>&nbsp;<span class="ident" id="8091709">err</span>&nbsp;<span class="op" id="8091713">==</span>&nbsp;<span class="ident" id="8091716">nil</span>&nbsp;<span class="op" id="8091720">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091724">t</span><span class="op" id="8091725">.</span><span class="ident" id="8091726">Fatal</span><span class="op" id="8091731">(</span><span class="string" id="8091732">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(encoder&nbsp;to&nbsp;non-decoder)&#34;</span><span class="op" id="8091802">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091808">if</span>&nbsp;<span class="ident" id="8091811">strings</span><span class="op" id="8091818">.</span><span class="ident" id="8091819">Index</span><span class="op" id="8091824">(</span><span class="ident" id="8091825">err</span><span class="op" id="8091828">.</span><span class="ident" id="8091829">Error</span><span class="op" id="8091834">(</span><span class="op" id="8091835">)</span><span class="op" id="8091836">,</span>&nbsp;<span class="string" id="8091838">&#34;type&#34;</span><span class="op" id="8091844">)</span>&nbsp;<span class="op" id="8091846">&lt;</span>&nbsp;<span class="num" id="8091848">0</span>&nbsp;<span class="op" id="8091850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091854">t</span><span class="op" id="8091855">.</span><span class="ident" id="8091856">Fatal</span><span class="op" id="8091861">(</span><span class="string" id="8091862">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8091888">,</span>&nbsp;<span class="ident" id="8091890">err</span><span class="op" id="8091893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8091896">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8091899">//&nbsp;Non-encoder&nbsp;to&nbsp;GobDecoder:&nbsp;error</span><br>
<span class="lineno">555</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091936">b</span><span class="op" id="8091937">.</span><span class="ident" id="8091938">Reset</span><span class="op" id="8091943">(</span><span class="op" id="8091944">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8091947">err</span>&nbsp;<span class="op" id="8091951">=</span>&nbsp;<span class="ident" id="8091953">enc</span><span class="op" id="8091956">.</span><span class="ident" id="8091957">Encode</span><span class="op" id="8091963">(</span><span class="ident" id="8091964">GobTest2</span><span class="op" id="8091972">{</span><span class="num" id="8091973">17</span><span class="op" id="8091975">,</span>&nbsp;<span class="string" id="8091977">&#34;ABC&#34;</span><span class="op" id="8091982">}</span><span class="op" id="8091983">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8091986">if</span>&nbsp;<span class="ident" id="8091989">err</span>&nbsp;<span class="op" id="8091993">!=</span>&nbsp;<span class="ident" id="8091996">nil</span>&nbsp;<span class="op" id="8092000">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092004">t</span><span class="op" id="8092005">.</span><span class="ident" id="8092006">Fatal</span><span class="op" id="8092011">(</span><span class="string" id="8092012">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8092027">,</span>&nbsp;<span class="ident" id="8092029">err</span><span class="op" id="8092032">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092035">}</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092038">y</span>&nbsp;<span class="op" id="8092040">:=</span>&nbsp;<span class="op" id="8092043">&amp;</span><span class="ident" id="8092044">GobTest1</span><span class="op" id="8092052">{</span><span class="op" id="8092053">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092056">err</span>&nbsp;<span class="op" id="8092060">=</span>&nbsp;<span class="ident" id="8092062">dec</span><span class="op" id="8092065">.</span><span class="ident" id="8092066">Decode</span><span class="op" id="8092072">(</span><span class="ident" id="8092073">y</span><span class="op" id="8092074">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092077">if</span>&nbsp;<span class="ident" id="8092080">err</span>&nbsp;<span class="op" id="8092084">==</span>&nbsp;<span class="ident" id="8092087">nil</span>&nbsp;<span class="op" id="8092091">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092095">t</span><span class="op" id="8092096">.</span><span class="ident" id="8092097">Fatal</span><span class="op" id="8092102">(</span><span class="string" id="8092103">&#34;expected&nbsp;decode&nbsp;error&nbsp;for&nbsp;mismatched&nbsp;fields&nbsp;(non-encoder&nbsp;to&nbsp;decoder)&#34;</span><span class="op" id="8092173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092176">}</span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092179">if</span>&nbsp;<span class="ident" id="8092182">strings</span><span class="op" id="8092189">.</span><span class="ident" id="8092190">Index</span><span class="op" id="8092195">(</span><span class="ident" id="8092196">err</span><span class="op" id="8092199">.</span><span class="ident" id="8092200">Error</span><span class="op" id="8092205">(</span><span class="op" id="8092206">)</span><span class="op" id="8092207">,</span>&nbsp;<span class="string" id="8092209">&#34;type&#34;</span><span class="op" id="8092215">)</span>&nbsp;<span class="op" id="8092217">&lt;</span>&nbsp;<span class="num" id="8092219">0</span>&nbsp;<span class="op" id="8092221">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092225">t</span><span class="op" id="8092226">.</span><span class="ident" id="8092227">Fatal</span><span class="op" id="8092232">(</span><span class="string" id="8092233">&#34;expected&nbsp;type&nbsp;error;&nbsp;got&#34;</span><span class="op" id="8092259">,</span>&nbsp;<span class="ident" id="8092261">err</span><span class="op" id="8092264">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092267">}</span><br>
<span class="lineno"></span><span class="op" id="8092269">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="8092272">//&nbsp;Even&nbsp;though&nbsp;ByteStruct&nbsp;is&nbsp;a&nbsp;struct,&nbsp;it&#39;s&nbsp;treated&nbsp;as&nbsp;a&nbsp;singleton&nbsp;at&nbsp;the&nbsp;top&nbsp;level.</span><br>
<span class="lineno"></span><span class="keyword" id="8092357">func</span>&nbsp;<span class="ident" id="8092362">TestGobEncoderStructSingleton</span><span class="op" id="8092391">(</span><span class="ident" id="8092392">t</span>&nbsp;<span class="op" id="8092394">*</span><span class="ident" id="8092395">testing</span><span class="op" id="8092402">.</span><span class="ident" id="8092403">T</span><span class="op" id="8092404">)</span>&nbsp;<span class="op" id="8092406">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092409">b</span>&nbsp;<span class="op" id="8092411">:=</span>&nbsp;<span class="builtinfunc" id="8092414">new</span><span class="op" id="8092417">(</span><span class="ident" id="8092418">bytes</span><span class="op" id="8092423">.</span><span class="ident" id="8092424">Buffer</span><span class="op" id="8092430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092433">enc</span>&nbsp;<span class="op" id="8092437">:=</span>&nbsp;<span class="ident" id="8092440">NewEncoder</span><span class="op" id="8092450">(</span><span class="ident" id="8092451">b</span><span class="op" id="8092452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092455">err</span>&nbsp;<span class="op" id="8092459">:=</span>&nbsp;<span class="ident" id="8092462">enc</span><span class="op" id="8092465">.</span><span class="ident" id="8092466">Encode</span><span class="op" id="8092472">(</span><span class="op" id="8092473">&amp;</span><span class="ident" id="8092474">ByteStruct</span><span class="op" id="8092484">{</span><span class="string" id="8092485">&#39;A&#39;</span><span class="op" id="8092488">}</span><span class="op" id="8092489">)</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092492">if</span>&nbsp;<span class="ident" id="8092495">err</span>&nbsp;<span class="op" id="8092499">!=</span>&nbsp;<span class="ident" id="8092502">nil</span>&nbsp;<span class="op" id="8092506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092510">t</span><span class="op" id="8092511">.</span><span class="ident" id="8092512">Fatal</span><span class="op" id="8092517">(</span><span class="string" id="8092518">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8092533">,</span>&nbsp;<span class="ident" id="8092535">err</span><span class="op" id="8092538">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092541">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092544">dec</span>&nbsp;<span class="op" id="8092548">:=</span>&nbsp;<span class="ident" id="8092551">NewDecoder</span><span class="op" id="8092561">(</span><span class="ident" id="8092562">b</span><span class="op" id="8092563">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092566">x</span>&nbsp;<span class="op" id="8092568">:=</span>&nbsp;<span class="builtinfunc" id="8092571">new</span><span class="op" id="8092574">(</span><span class="ident" id="8092575">ByteStruct</span><span class="op" id="8092585">)</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092588">err</span>&nbsp;<span class="op" id="8092592">=</span>&nbsp;<span class="ident" id="8092594">dec</span><span class="op" id="8092597">.</span><span class="ident" id="8092598">Decode</span><span class="op" id="8092604">(</span><span class="ident" id="8092605">x</span><span class="op" id="8092606">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092609">if</span>&nbsp;<span class="ident" id="8092612">err</span>&nbsp;<span class="op" id="8092616">!=</span>&nbsp;<span class="ident" id="8092619">nil</span>&nbsp;<span class="op" id="8092623">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092627">t</span><span class="op" id="8092628">.</span><span class="ident" id="8092629">Fatal</span><span class="op" id="8092634">(</span><span class="string" id="8092635">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8092650">,</span>&nbsp;<span class="ident" id="8092652">err</span><span class="op" id="8092655">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092658">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092661">if</span>&nbsp;<span class="ident" id="8092664">x</span><span class="op" id="8092665">.</span><span class="ident" id="8092666">a</span>&nbsp;<span class="op" id="8092668">!=</span>&nbsp;<span class="string" id="8092671">&#39;A&#39;</span>&nbsp;<span class="op" id="8092675">{</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092679">t</span><span class="op" id="8092680">.</span><span class="ident" id="8092681">Errorf</span><span class="op" id="8092687">(</span><span class="string" id="8092688">&#34;expected&nbsp;&#39;A&#39;&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8092709">,</span>&nbsp;<span class="ident" id="8092711">x</span><span class="op" id="8092712">.</span><span class="ident" id="8092713">a</span><span class="op" id="8092714">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092717">}</span><br>
<span class="lineno"></span><span class="op" id="8092719">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8092722">func</span>&nbsp;<span class="ident" id="8092727">TestGobEncoderNonStructSingleton</span><span class="op" id="8092759">(</span><span class="ident" id="8092760">t</span>&nbsp;<span class="op" id="8092762">*</span><span class="ident" id="8092763">testing</span><span class="op" id="8092770">.</span><span class="ident" id="8092771">T</span><span class="op" id="8092772">)</span>&nbsp;<span class="op" id="8092774">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092777">b</span>&nbsp;<span class="op" id="8092779">:=</span>&nbsp;<span class="builtinfunc" id="8092782">new</span><span class="op" id="8092785">(</span><span class="ident" id="8092786">bytes</span><span class="op" id="8092791">.</span><span class="ident" id="8092792">Buffer</span><span class="op" id="8092798">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092801">enc</span>&nbsp;<span class="op" id="8092805">:=</span>&nbsp;<span class="ident" id="8092808">NewEncoder</span><span class="op" id="8092818">(</span><span class="ident" id="8092819">b</span><span class="op" id="8092820">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092823">var</span>&nbsp;<span class="ident" id="8092827">g</span>&nbsp;<span class="ident" id="8092829">Gobber</span>&nbsp;<span class="op" id="8092836">=</span>&nbsp;<span class="num" id="8092838">1234</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092844">err</span>&nbsp;<span class="op" id="8092848">:=</span>&nbsp;<span class="ident" id="8092851">enc</span><span class="op" id="8092854">.</span><span class="ident" id="8092855">Encode</span><span class="op" id="8092861">(</span><span class="op" id="8092862">&amp;</span><span class="ident" id="8092863">g</span><span class="op" id="8092864">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092867">if</span>&nbsp;<span class="ident" id="8092870">err</span>&nbsp;<span class="op" id="8092874">!=</span>&nbsp;<span class="ident" id="8092877">nil</span>&nbsp;<span class="op" id="8092881">{</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092885">t</span><span class="op" id="8092886">.</span><span class="ident" id="8092887">Fatal</span><span class="op" id="8092892">(</span><span class="string" id="8092893">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8092908">,</span>&nbsp;<span class="ident" id="8092910">err</span><span class="op" id="8092913">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8092916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092919">dec</span>&nbsp;<span class="op" id="8092923">:=</span>&nbsp;<span class="ident" id="8092926">NewDecoder</span><span class="op" id="8092936">(</span><span class="ident" id="8092937">b</span><span class="op" id="8092938">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092941">var</span>&nbsp;<span class="ident" id="8092945">x</span>&nbsp;<span class="ident" id="8092947">Gobber</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092955">err</span>&nbsp;<span class="op" id="8092959">=</span>&nbsp;<span class="ident" id="8092961">dec</span><span class="op" id="8092964">.</span><span class="ident" id="8092965">Decode</span><span class="op" id="8092971">(</span><span class="op" id="8092972">&amp;</span><span class="ident" id="8092973">x</span><span class="op" id="8092974">)</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8092977">if</span>&nbsp;<span class="ident" id="8092980">err</span>&nbsp;<span class="op" id="8092984">!=</span>&nbsp;<span class="ident" id="8092987">nil</span>&nbsp;<span class="op" id="8092991">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8092995">t</span><span class="op" id="8092996">.</span><span class="ident" id="8092997">Fatal</span><span class="op" id="8093002">(</span><span class="string" id="8093003">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8093018">,</span>&nbsp;<span class="ident" id="8093020">err</span><span class="op" id="8093023">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093026">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093029">if</span>&nbsp;<span class="ident" id="8093032">x</span>&nbsp;<span class="op" id="8093034">!=</span>&nbsp;<span class="num" id="8093037">1234</span>&nbsp;<span class="op" id="8093042">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093046">t</span><span class="op" id="8093047">.</span><span class="ident" id="8093048">Errorf</span><span class="op" id="8093054">(</span><span class="string" id="8093055">&#34;expected&nbsp;1234&nbsp;got&nbsp;%d&#34;</span><span class="op" id="8093077">,</span>&nbsp;<span class="ident" id="8093079">x</span><span class="op" id="8093080">)</span><br>
<span class="lineno">605</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093083">}</span><br>
<span class="lineno"></span><span class="op" id="8093085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8093088">func</span>&nbsp;<span class="ident" id="8093093">TestGobEncoderIgnoreStructField</span><span class="op" id="8093124">(</span><span class="ident" id="8093125">t</span>&nbsp;<span class="op" id="8093127">*</span><span class="ident" id="8093128">testing</span><span class="op" id="8093135">.</span><span class="ident" id="8093136">T</span><span class="op" id="8093137">)</span>&nbsp;<span class="op" id="8093139">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093142">b</span>&nbsp;<span class="op" id="8093144">:=</span>&nbsp;<span class="builtinfunc" id="8093147">new</span><span class="op" id="8093150">(</span><span class="ident" id="8093151">bytes</span><span class="op" id="8093156">.</span><span class="ident" id="8093157">Buffer</span><span class="op" id="8093163">)</span><br>
<span class="lineno">610</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093166">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093204">enc</span>&nbsp;<span class="op" id="8093208">:=</span>&nbsp;<span class="ident" id="8093211">NewEncoder</span><span class="op" id="8093221">(</span><span class="ident" id="8093222">b</span><span class="op" id="8093223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093226">err</span>&nbsp;<span class="op" id="8093230">:=</span>&nbsp;<span class="ident" id="8093233">enc</span><span class="op" id="8093236">.</span><span class="ident" id="8093237">Encode</span><span class="op" id="8093243">(</span><span class="ident" id="8093244">GobTest0</span><span class="op" id="8093252">{</span><span class="num" id="8093253">17</span><span class="op" id="8093255">,</span>&nbsp;<span class="op" id="8093257">&amp;</span><span class="ident" id="8093258">ByteStruct</span><span class="op" id="8093268">{</span><span class="string" id="8093269">&#39;A&#39;</span><span class="op" id="8093272">}</span><span class="op" id="8093273">}</span><span class="op" id="8093274">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093277">if</span>&nbsp;<span class="ident" id="8093280">err</span>&nbsp;<span class="op" id="8093284">!=</span>&nbsp;<span class="ident" id="8093287">nil</span>&nbsp;<span class="op" id="8093291">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093295">t</span><span class="op" id="8093296">.</span><span class="ident" id="8093297">Fatal</span><span class="op" id="8093302">(</span><span class="string" id="8093303">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8093318">,</span>&nbsp;<span class="ident" id="8093320">err</span><span class="op" id="8093323">)</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093326">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093329">dec</span>&nbsp;<span class="op" id="8093333">:=</span>&nbsp;<span class="ident" id="8093336">NewDecoder</span><span class="op" id="8093346">(</span><span class="ident" id="8093347">b</span><span class="op" id="8093348">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093351">x</span>&nbsp;<span class="op" id="8093353">:=</span>&nbsp;<span class="builtinfunc" id="8093356">new</span><span class="op" id="8093359">(</span><span class="ident" id="8093360">GobTestIgnoreEncoder</span><span class="op" id="8093380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093383">err</span>&nbsp;<span class="op" id="8093387">=</span>&nbsp;<span class="ident" id="8093389">dec</span><span class="op" id="8093392">.</span><span class="ident" id="8093393">Decode</span><span class="op" id="8093399">(</span><span class="ident" id="8093400">x</span><span class="op" id="8093401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093404">if</span>&nbsp;<span class="ident" id="8093407">err</span>&nbsp;<span class="op" id="8093411">!=</span>&nbsp;<span class="ident" id="8093414">nil</span>&nbsp;<span class="op" id="8093418">{</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093422">t</span><span class="op" id="8093423">.</span><span class="ident" id="8093424">Fatal</span><span class="op" id="8093429">(</span><span class="string" id="8093430">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8093445">,</span>&nbsp;<span class="ident" id="8093447">err</span><span class="op" id="8093450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093456">if</span>&nbsp;<span class="ident" id="8093459">x</span><span class="op" id="8093460">.</span><span class="ident" id="8093461">X</span>&nbsp;<span class="op" id="8093463">!=</span>&nbsp;<span class="num" id="8093466">17</span>&nbsp;<span class="op" id="8093469">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093473">t</span><span class="op" id="8093474">.</span><span class="ident" id="8093475">Errorf</span><span class="op" id="8093481">(</span><span class="string" id="8093482">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8093502">,</span>&nbsp;<span class="ident" id="8093504">x</span><span class="op" id="8093505">.</span><span class="ident" id="8093506">X</span><span class="op" id="8093507">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093510">}</span><br>
<span class="lineno">625</span><span class="op" id="8093512">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8093515">func</span>&nbsp;<span class="ident" id="8093520">TestGobEncoderIgnoreNonStructField</span><span class="op" id="8093554">(</span><span class="ident" id="8093555">t</span>&nbsp;<span class="op" id="8093557">*</span><span class="ident" id="8093558">testing</span><span class="op" id="8093565">.</span><span class="ident" id="8093566">T</span><span class="op" id="8093567">)</span>&nbsp;<span class="op" id="8093569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093572">b</span>&nbsp;<span class="op" id="8093574">:=</span>&nbsp;<span class="builtinfunc" id="8093577">new</span><span class="op" id="8093580">(</span><span class="ident" id="8093581">bytes</span><span class="op" id="8093586">.</span><span class="ident" id="8093587">Buffer</span><span class="op" id="8093593">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8093596">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093634">enc</span>&nbsp;<span class="op" id="8093638">:=</span>&nbsp;<span class="ident" id="8093641">NewEncoder</span><span class="op" id="8093651">(</span><span class="ident" id="8093652">b</span><span class="op" id="8093653">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093656">gobber</span>&nbsp;<span class="op" id="8093663">:=</span>&nbsp;<span class="ident" id="8093666">Gobber</span><span class="op" id="8093672">(</span><span class="num" id="8093673">23</span><span class="op" id="8093675">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093678">bgobber</span>&nbsp;<span class="op" id="8093686">:=</span>&nbsp;<span class="ident" id="8093689">BinaryGobber</span><span class="op" id="8093701">(</span><span class="num" id="8093702">24</span><span class="op" id="8093704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093707">tgobber</span>&nbsp;<span class="op" id="8093715">:=</span>&nbsp;<span class="ident" id="8093718">TextGobber</span><span class="op" id="8093728">(</span><span class="num" id="8093729">25</span><span class="op" id="8093731">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093734">err</span>&nbsp;<span class="op" id="8093738">:=</span>&nbsp;<span class="ident" id="8093741">enc</span><span class="op" id="8093744">.</span><span class="ident" id="8093745">Encode</span><span class="op" id="8093751">(</span><span class="ident" id="8093752">GobTest3</span><span class="op" id="8093760">{</span><span class="num" id="8093761">17</span><span class="op" id="8093763">,</span>&nbsp;<span class="op" id="8093765">&amp;</span><span class="ident" id="8093766">gobber</span><span class="op" id="8093772">,</span>&nbsp;<span class="op" id="8093774">&amp;</span><span class="ident" id="8093775">bgobber</span><span class="op" id="8093782">,</span>&nbsp;<span class="op" id="8093784">&amp;</span><span class="ident" id="8093785">tgobber</span><span class="op" id="8093792">}</span><span class="op" id="8093793">)</span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093796">if</span>&nbsp;<span class="ident" id="8093799">err</span>&nbsp;<span class="op" id="8093803">!=</span>&nbsp;<span class="ident" id="8093806">nil</span>&nbsp;<span class="op" id="8093810">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093814">t</span><span class="op" id="8093815">.</span><span class="ident" id="8093816">Fatal</span><span class="op" id="8093821">(</span><span class="string" id="8093822">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8093837">,</span>&nbsp;<span class="ident" id="8093839">err</span><span class="op" id="8093842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093845">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093848">dec</span>&nbsp;<span class="op" id="8093852">:=</span>&nbsp;<span class="ident" id="8093855">NewDecoder</span><span class="op" id="8093865">(</span><span class="ident" id="8093866">b</span><span class="op" id="8093867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093870">x</span>&nbsp;<span class="op" id="8093872">:=</span>&nbsp;<span class="builtinfunc" id="8093875">new</span><span class="op" id="8093878">(</span><span class="ident" id="8093879">GobTestIgnoreEncoder</span><span class="op" id="8093899">)</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093902">err</span>&nbsp;<span class="op" id="8093906">=</span>&nbsp;<span class="ident" id="8093908">dec</span><span class="op" id="8093911">.</span><span class="ident" id="8093912">Decode</span><span class="op" id="8093918">(</span><span class="ident" id="8093919">x</span><span class="op" id="8093920">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093923">if</span>&nbsp;<span class="ident" id="8093926">err</span>&nbsp;<span class="op" id="8093930">!=</span>&nbsp;<span class="ident" id="8093933">nil</span>&nbsp;<span class="op" id="8093937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093941">t</span><span class="op" id="8093942">.</span><span class="ident" id="8093943">Fatal</span><span class="op" id="8093948">(</span><span class="string" id="8093949">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8093964">,</span>&nbsp;<span class="ident" id="8093966">err</span><span class="op" id="8093969">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8093972">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8093975">if</span>&nbsp;<span class="ident" id="8093978">x</span><span class="op" id="8093979">.</span><span class="ident" id="8093980">X</span>&nbsp;<span class="op" id="8093982">!=</span>&nbsp;<span class="num" id="8093985">17</span>&nbsp;<span class="op" id="8093988">{</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8093992">t</span><span class="op" id="8093993">.</span><span class="ident" id="8093994">Errorf</span><span class="op" id="8094000">(</span><span class="string" id="8094001">&#34;expected&nbsp;17&nbsp;got&nbsp;%c&#34;</span><span class="op" id="8094021">,</span>&nbsp;<span class="ident" id="8094023">x</span><span class="op" id="8094024">.</span><span class="ident" id="8094025">X</span><span class="op" id="8094026">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094029">}</span><br>
<span class="lineno"></span><span class="op" id="8094031">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094034">func</span>&nbsp;<span class="ident" id="8094039">TestGobEncoderIgnoreNilEncoder</span><span class="op" id="8094069">(</span><span class="ident" id="8094070">t</span>&nbsp;<span class="op" id="8094072">*</span><span class="ident" id="8094073">testing</span><span class="op" id="8094080">.</span><span class="ident" id="8094081">T</span><span class="op" id="8094082">)</span>&nbsp;<span class="op" id="8094084">{</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094087">b</span>&nbsp;<span class="op" id="8094089">:=</span>&nbsp;<span class="builtinfunc" id="8094092">new</span><span class="op" id="8094095">(</span><span class="ident" id="8094096">bytes</span><span class="op" id="8094101">.</span><span class="ident" id="8094102">Buffer</span><span class="op" id="8094108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8094111">//&nbsp;First&nbsp;a&nbsp;field&nbsp;that&#39;s&nbsp;a&nbsp;structure.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094149">enc</span>&nbsp;<span class="op" id="8094153">:=</span>&nbsp;<span class="ident" id="8094156">NewEncoder</span><span class="op" id="8094166">(</span><span class="ident" id="8094167">b</span><span class="op" id="8094168">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094171">err</span>&nbsp;<span class="op" id="8094175">:=</span>&nbsp;<span class="ident" id="8094178">enc</span><span class="op" id="8094181">.</span><span class="ident" id="8094182">Encode</span><span class="op" id="8094188">(</span><span class="ident" id="8094189">GobTest0</span><span class="op" id="8094197">{</span><span class="ident" id="8094198">X</span><span class="op" id="8094199">:</span>&nbsp;<span class="num" id="8094201">18</span><span class="op" id="8094203">}</span><span class="op" id="8094204">)</span>&nbsp;<span class="comment" id="8094206">//&nbsp;G&nbsp;is&nbsp;nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094219">if</span>&nbsp;<span class="ident" id="8094222">err</span>&nbsp;<span class="op" id="8094226">!=</span>&nbsp;<span class="ident" id="8094229">nil</span>&nbsp;<span class="op" id="8094233">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094237">t</span><span class="op" id="8094238">.</span><span class="ident" id="8094239">Fatal</span><span class="op" id="8094244">(</span><span class="string" id="8094245">&#34;encode&nbsp;error:&#34;</span><span class="op" id="8094260">,</span>&nbsp;<span class="ident" id="8094262">err</span><span class="op" id="8094265">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094268">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094271">dec</span>&nbsp;<span class="op" id="8094275">:=</span>&nbsp;<span class="ident" id="8094278">NewDecoder</span><span class="op" id="8094288">(</span><span class="ident" id="8094289">b</span><span class="op" id="8094290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094293">x</span>&nbsp;<span class="op" id="8094295">:=</span>&nbsp;<span class="builtinfunc" id="8094298">new</span><span class="op" id="8094301">(</span><span class="ident" id="8094302">GobTest0</span><span class="op" id="8094310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094313">err</span>&nbsp;<span class="op" id="8094317">=</span>&nbsp;<span class="ident" id="8094319">dec</span><span class="op" id="8094322">.</span><span class="ident" id="8094323">Decode</span><span class="op" id="8094329">(</span><span class="ident" id="8094330">x</span><span class="op" id="8094331">)</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094334">if</span>&nbsp;<span class="ident" id="8094337">err</span>&nbsp;<span class="op" id="8094341">!=</span>&nbsp;<span class="ident" id="8094344">nil</span>&nbsp;<span class="op" id="8094348">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094352">t</span><span class="op" id="8094353">.</span><span class="ident" id="8094354">Fatal</span><span class="op" id="8094359">(</span><span class="string" id="8094360">&#34;decode&nbsp;error:&#34;</span><span class="op" id="8094375">,</span>&nbsp;<span class="ident" id="8094377">err</span><span class="op" id="8094380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094386">if</span>&nbsp;<span class="ident" id="8094389">x</span><span class="op" id="8094390">.</span><span class="ident" id="8094391">X</span>&nbsp;<span class="op" id="8094393">!=</span>&nbsp;<span class="num" id="8094396">18</span>&nbsp;<span class="op" id="8094399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094403">t</span><span class="op" id="8094404">.</span><span class="ident" id="8094405">Errorf</span><span class="op" id="8094411">(</span><span class="string" id="8094412">&#34;expected&nbsp;x.X&nbsp;=&nbsp;18,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8094439">,</span>&nbsp;<span class="ident" id="8094441">x</span><span class="op" id="8094442">.</span><span class="ident" id="8094443">X</span><span class="op" id="8094444">)</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094447">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094450">if</span>&nbsp;<span class="ident" id="8094453">x</span><span class="op" id="8094454">.</span><span class="ident" id="8094455">G</span>&nbsp;<span class="op" id="8094457">!=</span>&nbsp;<span class="ident" id="8094460">nil</span>&nbsp;<span class="op" id="8094464">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094468">t</span><span class="op" id="8094469">.</span><span class="ident" id="8094470">Errorf</span><span class="op" id="8094476">(</span><span class="string" id="8094477">&#34;expected&nbsp;x.G&nbsp;=&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8094505">,</span>&nbsp;<span class="ident" id="8094507">x</span><span class="op" id="8094508">.</span><span class="ident" id="8094509">G</span><span class="op" id="8094510">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8094513">}</span><br>
<span class="lineno"></span><span class="op" id="8094515">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="keyword" id="8094518">type</span>&nbsp;<span class="ident" id="8094523">gobDecoderBug0</span>&nbsp;<span class="keyword" id="8094538">struct</span>&nbsp;<span class="op" id="8094545">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094548">foo</span><span class="op" id="8094551">,</span>&nbsp;<span class="ident" id="8094553">bar</span>&nbsp;<span class="builtintype" id="8094557">string</span><br>
<span class="lineno"></span><span class="op" id="8094564">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">675</span><span class="keyword" id="8094567">func</span>&nbsp;<span class="op" id="8094572">(</span><span class="ident" id="8094573">br</span>&nbsp;<span class="op" id="8094576">*</span><span class="ident" id="8094577">gobDecoderBug0</span><span class="op" id="8094591">)</span>&nbsp;<span class="ident" id="8094593">String</span><span class="op" id="8094599">(</span><span class="op" id="8094600">)</span>&nbsp;<span class="builtintype" id="8094602">string</span>&nbsp;<span class="op" id="8094609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094612">return</span>&nbsp;<span class="ident" id="8094619">br</span><span class="op" id="8094621">.</span><span class="ident" id="8094622">foo</span>&nbsp;<span class="op" id="8094626">+</span>&nbsp;<span class="string" id="8094628">&#34;-&#34;</span>&nbsp;<span class="op" id="8094632">+</span>&nbsp;<span class="ident" id="8094634">br</span><span class="op" id="8094636">.</span><span class="ident" id="8094637">bar</span><br>
<span class="lineno"></span><span class="op" id="8094641">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094644">func</span>&nbsp;<span class="op" id="8094649">(</span><span class="ident" id="8094650">br</span>&nbsp;<span class="op" id="8094653">*</span><span class="ident" id="8094654">gobDecoderBug0</span><span class="op" id="8094668">)</span>&nbsp;<span class="ident" id="8094670">GobEncode</span><span class="op" id="8094679">(</span><span class="op" id="8094680">)</span>&nbsp;<span class="op" id="8094682">(</span><span class="op" id="8094683">[</span><span class="op" id="8094684">]</span><span class="builtintype" id="8094685">byte</span><span class="op" id="8094689">,</span>&nbsp;<span class="builtintype" id="8094691">error</span><span class="op" id="8094696">)</span>&nbsp;<span class="op" id="8094698">{</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094701">return</span>&nbsp;<span class="op" id="8094708">[</span><span class="op" id="8094709">]</span><span class="builtintype" id="8094710">byte</span><span class="op" id="8094714">(</span><span class="ident" id="8094715">br</span><span class="op" id="8094717">.</span><span class="ident" id="8094718">String</span><span class="op" id="8094724">(</span><span class="op" id="8094725">)</span><span class="op" id="8094726">)</span><span class="op" id="8094727">,</span>&nbsp;<span class="ident" id="8094729">nil</span><br>
<span class="lineno"></span><span class="op" id="8094733">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8094736">func</span>&nbsp;<span class="op" id="8094741">(</span><span class="ident" id="8094742">br</span>&nbsp;<span class="op" id="8094745">*</span><span class="ident" id="8094746">gobDecoderBug0</span><span class="op" id="8094760">)</span>&nbsp;<span class="ident" id="8094762">GobDecode</span><span class="op" id="8094771">(</span><span class="ident" id="8094772">b</span>&nbsp;<span class="op" id="8094774">[</span><span class="op" id="8094775">]</span><span class="builtintype" id="8094776">byte</span><span class="op" id="8094780">)</span>&nbsp;<span class="builtintype" id="8094782">error</span>&nbsp;<span class="op" id="8094788">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094791">br</span><span class="op" id="8094793">.</span><span class="ident" id="8094794">foo</span>&nbsp;<span class="op" id="8094798">=</span>&nbsp;<span class="string" id="8094800">&#34;foo&#34;</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094807">br</span><span class="op" id="8094809">.</span><span class="ident" id="8094810">bar</span>&nbsp;<span class="op" id="8094814">=</span>&nbsp;<span class="string" id="8094816">&#34;bar&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8094823">return</span>&nbsp;<span class="ident" id="8094830">nil</span><br>
<span class="lineno"></span><span class="op" id="8094834">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8094837">//&nbsp;This&nbsp;was&nbsp;a&nbsp;bug:&nbsp;the&nbsp;receiver&nbsp;has&nbsp;a&nbsp;different&nbsp;indirection&nbsp;level</span><br>
<span class="lineno">690</span><span class="comment" id="8094903">//&nbsp;than&nbsp;the&nbsp;variable.</span><br>
<span class="lineno"></span><span class="keyword" id="8094925">func</span>&nbsp;<span class="ident" id="8094930">TestGobEncoderExtraIndirect</span><span class="op" id="8094957">(</span><span class="ident" id="8094958">t</span>&nbsp;<span class="op" id="8094960">*</span><span class="ident" id="8094961">testing</span><span class="op" id="8094968">.</span><span class="ident" id="8094969">T</span><span class="op" id="8094970">)</span>&nbsp;<span class="op" id="8094972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8094975">gdb</span>&nbsp;<span class="op" id="8094979">:=</span>&nbsp;<span class="op" id="8094982">&amp;</span><span class="ident" id="8094983">gobDecoderBug0</span><span class="op" id="8094997">{</span><span class="string" id="8094998">&#34;foo&#34;</span><span class="op" id="8095003">,</span>&nbsp;<span class="string" id="8095005">&#34;bar&#34;</span><span class="op" id="8095010">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095013">buf</span>&nbsp;<span class="op" id="8095017">:=</span>&nbsp;<span class="builtinfunc" id="8095020">new</span><span class="op" id="8095023">(</span><span class="ident" id="8095024">bytes</span><span class="op" id="8095029">.</span><span class="ident" id="8095030">Buffer</span><span class="op" id="8095036">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095039">e</span>&nbsp;<span class="op" id="8095041">:=</span>&nbsp;<span class="ident" id="8095044">NewEncoder</span><span class="op" id="8095054">(</span><span class="ident" id="8095055">buf</span><span class="op" id="8095058">)</span><br>
<span class="lineno">695</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095061">if</span>&nbsp;<span class="ident" id="8095064">err</span>&nbsp;<span class="op" id="8095068">:=</span>&nbsp;<span class="ident" id="8095071">e</span><span class="op" id="8095072">.</span><span class="ident" id="8095073">Encode</span><span class="op" id="8095079">(</span><span class="ident" id="8095080">gdb</span><span class="op" id="8095083">)</span><span class="op" id="8095084">;</span>&nbsp;<span class="ident" id="8095086">err</span>&nbsp;<span class="op" id="8095090">!=</span>&nbsp;<span class="ident" id="8095093">nil</span>&nbsp;<span class="op" id="8095097">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095101">t</span><span class="op" id="8095102">.</span><span class="ident" id="8095103">Fatalf</span><span class="op" id="8095109">(</span><span class="string" id="8095110">&#34;encode:&nbsp;%v&#34;</span><span class="op" id="8095122">,</span>&nbsp;<span class="ident" id="8095124">err</span><span class="op" id="8095127">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095130">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095133">d</span>&nbsp;<span class="op" id="8095135">:=</span>&nbsp;<span class="ident" id="8095138">NewDecoder</span><span class="op" id="8095148">(</span><span class="ident" id="8095149">buf</span><span class="op" id="8095152">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095155">var</span>&nbsp;<span class="ident" id="8095159">got</span>&nbsp;<span class="op" id="8095163">*</span><span class="ident" id="8095164">gobDecoderBug0</span><br>
<span class="lineno">700</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095180">if</span>&nbsp;<span class="ident" id="8095183">err</span>&nbsp;<span class="op" id="8095187">:=</span>&nbsp;<span class="ident" id="8095190">d</span><span class="op" id="8095191">.</span><span class="ident" id="8095192">Decode</span><span class="op" id="8095198">(</span><span class="op" id="8095199">&amp;</span><span class="ident" id="8095200">got</span><span class="op" id="8095203">)</span><span class="op" id="8095204">;</span>&nbsp;<span class="ident" id="8095206">err</span>&nbsp;<span class="op" id="8095210">!=</span>&nbsp;<span class="ident" id="8095213">nil</span>&nbsp;<span class="op" id="8095217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095221">t</span><span class="op" id="8095222">.</span><span class="ident" id="8095223">Fatalf</span><span class="op" id="8095229">(</span><span class="string" id="8095230">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8095242">,</span>&nbsp;<span class="ident" id="8095244">err</span><span class="op" id="8095247">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095250">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095253">if</span>&nbsp;<span class="ident" id="8095256">got</span><span class="op" id="8095259">.</span><span class="ident" id="8095260">foo</span>&nbsp;<span class="op" id="8095264">!=</span>&nbsp;<span class="ident" id="8095267">gdb</span><span class="op" id="8095270">.</span><span class="ident" id="8095271">foo</span>&nbsp;<span class="op" id="8095275">||</span>&nbsp;<span class="ident" id="8095278">got</span><span class="op" id="8095281">.</span><span class="ident" id="8095282">bar</span>&nbsp;<span class="op" id="8095286">!=</span>&nbsp;<span class="ident" id="8095289">gdb</span><span class="op" id="8095292">.</span><span class="ident" id="8095293">bar</span>&nbsp;<span class="op" id="8095297">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095301">t</span><span class="op" id="8095302">.</span><span class="ident" id="8095303">Errorf</span><span class="op" id="8095309">(</span><span class="string" id="8095310">&#34;got&nbsp;=&nbsp;%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8095329">,</span>&nbsp;<span class="ident" id="8095331">got</span><span class="op" id="8095334">,</span>&nbsp;<span class="ident" id="8095336">gdb</span><span class="op" id="8095339">)</span><br>
<span class="lineno">705</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095342">}</span><br>
<span class="lineno"></span><span class="op" id="8095344">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="8095347">//&nbsp;Another&nbsp;bug:&nbsp;this&nbsp;caused&nbsp;a&nbsp;crash&nbsp;with&nbsp;the&nbsp;new&nbsp;Go1&nbsp;Time&nbsp;type.</span><br>
<span class="lineno"></span><span class="comment" id="8095411">//&nbsp;We&nbsp;throw&nbsp;in&nbsp;a&nbsp;gob-encoding&nbsp;array,&nbsp;to&nbsp;test&nbsp;another&nbsp;case&nbsp;of&nbsp;isZero,</span><br>
<span class="lineno">710</span><span class="comment" id="8095480">//&nbsp;and&nbsp;a&nbsp;struct&nbsp;containing&nbsp;an&nbsp;nil&nbsp;interface,&nbsp;to&nbsp;test&nbsp;a&nbsp;third.</span><br>
<span class="lineno"></span><span class="keyword" id="8095542">type</span>&nbsp;<span class="ident" id="8095547">isZeroBug</span>&nbsp;<span class="keyword" id="8095557">struct</span>&nbsp;<span class="op" id="8095564">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095567">T</span>&nbsp;<span class="ident" id="8095569">time</span><span class="op" id="8095573">.</span><span class="ident" id="8095574">Time</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095580">S</span>&nbsp;<span class="builtintype" id="8095582">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095590">I</span>&nbsp;<span class="builtintype" id="8095592">int</span><br>
<span class="lineno">715</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095597">A</span>&nbsp;<span class="ident" id="8095599">isZeroBugArray</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095615">F</span>&nbsp;<span class="ident" id="8095617">isZeroBugInterface</span><br>
<span class="lineno"></span><span class="op" id="8095636">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095639">type</span>&nbsp;<span class="ident" id="8095644">isZeroBugArray</span>&nbsp;<span class="op" id="8095659">[</span><span class="num" id="8095660">2</span><span class="op" id="8095661">]</span><span class="builtintype" id="8095662">uint8</span><br>
<span class="lineno">720</span><br>
<span class="lineno"></span><span class="comment" id="8095669">//&nbsp;Receiver&nbsp;is&nbsp;value,&nbsp;not&nbsp;pointer,&nbsp;to&nbsp;test&nbsp;isZero&nbsp;of&nbsp;array.</span><br>
<span class="lineno"></span><span class="keyword" id="8095729">func</span>&nbsp;<span class="op" id="8095734">(</span><span class="ident" id="8095735">a</span>&nbsp;<span class="ident" id="8095737">isZeroBugArray</span><span class="op" id="8095751">)</span>&nbsp;<span class="ident" id="8095753">GobEncode</span><span class="op" id="8095762">(</span><span class="op" id="8095763">)</span>&nbsp;<span class="op" id="8095765">(</span><span class="ident" id="8095766">b</span>&nbsp;<span class="op" id="8095768">[</span><span class="op" id="8095769">]</span><span class="builtintype" id="8095770">byte</span><span class="op" id="8095774">,</span>&nbsp;<span class="ident" id="8095776">e</span>&nbsp;<span class="builtintype" id="8095778">error</span><span class="op" id="8095783">)</span>&nbsp;<span class="op" id="8095785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095788">b</span>&nbsp;<span class="op" id="8095790">=</span>&nbsp;<span class="builtinfunc" id="8095792">append</span><span class="op" id="8095798">(</span><span class="ident" id="8095799">b</span><span class="op" id="8095800">,</span>&nbsp;<span class="ident" id="8095802">a</span><span class="op" id="8095803">[</span><span class="op" id="8095804">:</span><span class="op" id="8095805">]</span><span class="op" id="8095806">...</span><span class="op" id="8095809">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095812">return</span>&nbsp;<span class="ident" id="8095819">b</span><span class="op" id="8095820">,</span>&nbsp;<span class="ident" id="8095822">nil</span><br>
<span class="lineno">725</span><span class="op" id="8095826">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8095829">func</span>&nbsp;<span class="op" id="8095834">(</span><span class="ident" id="8095835">a</span>&nbsp;<span class="op" id="8095837">*</span><span class="ident" id="8095838">isZeroBugArray</span><span class="op" id="8095852">)</span>&nbsp;<span class="ident" id="8095854">GobDecode</span><span class="op" id="8095863">(</span><span class="ident" id="8095864">data</span>&nbsp;<span class="op" id="8095869">[</span><span class="op" id="8095870">]</span><span class="builtintype" id="8095871">byte</span><span class="op" id="8095875">)</span>&nbsp;<span class="builtintype" id="8095877">error</span>&nbsp;<span class="op" id="8095883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095886">if</span>&nbsp;<span class="builtinfunc" id="8095889">len</span><span class="op" id="8095892">(</span><span class="ident" id="8095893">data</span><span class="op" id="8095897">)</span>&nbsp;<span class="op" id="8095899">!=</span>&nbsp;<span class="builtinfunc" id="8095902">len</span><span class="op" id="8095905">(</span><span class="ident" id="8095906">a</span><span class="op" id="8095907">)</span>&nbsp;<span class="op" id="8095909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095913">return</span>&nbsp;<span class="ident" id="8095920">io</span><span class="op" id="8095922">.</span><span class="ident" id="8095923">EOF</span><br>
<span class="lineno">730</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8095928">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095931">a</span><span class="op" id="8095932">[</span><span class="num" id="8095933">0</span><span class="op" id="8095934">]</span>&nbsp;<span class="op" id="8095936">=</span>&nbsp;<span class="ident" id="8095938">data</span><span class="op" id="8095942">[</span><span class="num" id="8095943">0</span><span class="op" id="8095944">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8095947">a</span><span class="op" id="8095948">[</span><span class="num" id="8095949">1</span><span class="op" id="8095950">]</span>&nbsp;<span class="op" id="8095952">=</span>&nbsp;<span class="ident" id="8095954">data</span><span class="op" id="8095958">[</span><span class="num" id="8095959">1</span><span class="op" id="8095960">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8095963">return</span>&nbsp;<span class="ident" id="8095970">nil</span><br>
<span class="lineno"></span><span class="op" id="8095974">}</span><br>
<span class="lineno">735</span><br>
<span class="lineno"></span><span class="keyword" id="8095977">type</span>&nbsp;<span class="ident" id="8095982">isZeroBugInterface</span>&nbsp;<span class="keyword" id="8096001">struct</span>&nbsp;<span class="op" id="8096008">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096011">I</span>&nbsp;<span class="keyword" id="8096013">interface</span><span class="op" id="8096022">{</span><span class="op" id="8096023">}</span><br>
<span class="lineno"></span><span class="op" id="8096025">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">740</span><span class="keyword" id="8096028">func</span>&nbsp;<span class="op" id="8096033">(</span><span class="ident" id="8096034">i</span>&nbsp;<span class="ident" id="8096036">isZeroBugInterface</span><span class="op" id="8096054">)</span>&nbsp;<span class="ident" id="8096056">GobEncode</span><span class="op" id="8096065">(</span><span class="op" id="8096066">)</span>&nbsp;<span class="op" id="8096068">(</span><span class="ident" id="8096069">b</span>&nbsp;<span class="op" id="8096071">[</span><span class="op" id="8096072">]</span><span class="builtintype" id="8096073">byte</span><span class="op" id="8096077">,</span>&nbsp;<span class="ident" id="8096079">e</span>&nbsp;<span class="builtintype" id="8096081">error</span><span class="op" id="8096086">)</span>&nbsp;<span class="op" id="8096088">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096091">return</span>&nbsp;<span class="op" id="8096098">[</span><span class="op" id="8096099">]</span><span class="builtintype" id="8096100">byte</span><span class="op" id="8096104">{</span><span class="op" id="8096105">}</span><span class="op" id="8096106">,</span>&nbsp;<span class="ident" id="8096108">nil</span><br>
<span class="lineno"></span><span class="op" id="8096112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096115">func</span>&nbsp;<span class="op" id="8096120">(</span><span class="ident" id="8096121">i</span>&nbsp;<span class="op" id="8096123">*</span><span class="ident" id="8096124">isZeroBugInterface</span><span class="op" id="8096142">)</span>&nbsp;<span class="ident" id="8096144">GobDecode</span><span class="op" id="8096153">(</span><span class="ident" id="8096154">data</span>&nbsp;<span class="op" id="8096159">[</span><span class="op" id="8096160">]</span><span class="builtintype" id="8096161">byte</span><span class="op" id="8096165">)</span>&nbsp;<span class="builtintype" id="8096167">error</span>&nbsp;<span class="op" id="8096173">{</span><br>
<span class="lineno">745</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096176">return</span>&nbsp;<span class="ident" id="8096183">nil</span><br>
<span class="lineno"></span><span class="op" id="8096187">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096190">func</span>&nbsp;<span class="ident" id="8096195">TestGobEncodeIsZero</span><span class="op" id="8096214">(</span><span class="ident" id="8096215">t</span>&nbsp;<span class="op" id="8096217">*</span><span class="ident" id="8096218">testing</span><span class="op" id="8096225">.</span><span class="ident" id="8096226">T</span><span class="op" id="8096227">)</span>&nbsp;<span class="op" id="8096229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096232">x</span>&nbsp;<span class="op" id="8096234">:=</span>&nbsp;<span class="ident" id="8096237">isZeroBug</span><span class="op" id="8096246">{</span><span class="ident" id="8096247">time</span><span class="op" id="8096251">.</span><span class="ident" id="8096252">Now</span><span class="op" id="8096255">(</span><span class="op" id="8096256">)</span><span class="op" id="8096257">,</span>&nbsp;<span class="string" id="8096259">&#34;hello&#34;</span><span class="op" id="8096266">,</span>&nbsp;<span class="op" id="8096268">-</span><span class="num" id="8096269">55</span><span class="op" id="8096271">,</span>&nbsp;<span class="ident" id="8096273">isZeroBugArray</span><span class="op" id="8096287">{</span><span class="num" id="8096288">1</span><span class="op" id="8096289">,</span>&nbsp;<span class="num" id="8096291">2</span><span class="op" id="8096292">}</span><span class="op" id="8096293">,</span>&nbsp;<span class="ident" id="8096295">isZeroBugInterface</span><span class="op" id="8096313">{</span><span class="op" id="8096314">}</span><span class="op" id="8096315">}</span><br>
<span class="lineno">750</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096318">b</span>&nbsp;<span class="op" id="8096320">:=</span>&nbsp;<span class="builtinfunc" id="8096323">new</span><span class="op" id="8096326">(</span><span class="ident" id="8096327">bytes</span><span class="op" id="8096332">.</span><span class="ident" id="8096333">Buffer</span><span class="op" id="8096339">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096342">enc</span>&nbsp;<span class="op" id="8096346">:=</span>&nbsp;<span class="ident" id="8096349">NewEncoder</span><span class="op" id="8096359">(</span><span class="ident" id="8096360">b</span><span class="op" id="8096361">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096364">err</span>&nbsp;<span class="op" id="8096368">:=</span>&nbsp;<span class="ident" id="8096371">enc</span><span class="op" id="8096374">.</span><span class="ident" id="8096375">Encode</span><span class="op" id="8096381">(</span><span class="ident" id="8096382">x</span><span class="op" id="8096383">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096386">if</span>&nbsp;<span class="ident" id="8096389">err</span>&nbsp;<span class="op" id="8096393">!=</span>&nbsp;<span class="ident" id="8096396">nil</span>&nbsp;<span class="op" id="8096400">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096404">t</span><span class="op" id="8096405">.</span><span class="ident" id="8096406">Fatal</span><span class="op" id="8096411">(</span><span class="string" id="8096412">&#34;encode:&#34;</span><span class="op" id="8096421">,</span>&nbsp;<span class="ident" id="8096423">err</span><span class="op" id="8096426">)</span><br>
<span class="lineno">755</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096429">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096432">var</span>&nbsp;<span class="ident" id="8096436">y</span>&nbsp;<span class="ident" id="8096438">isZeroBug</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096449">dec</span>&nbsp;<span class="op" id="8096453">:=</span>&nbsp;<span class="ident" id="8096456">NewDecoder</span><span class="op" id="8096466">(</span><span class="ident" id="8096467">b</span><span class="op" id="8096468">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096471">err</span>&nbsp;<span class="op" id="8096475">=</span>&nbsp;<span class="ident" id="8096477">dec</span><span class="op" id="8096480">.</span><span class="ident" id="8096481">Decode</span><span class="op" id="8096487">(</span><span class="op" id="8096488">&amp;</span><span class="ident" id="8096489">y</span><span class="op" id="8096490">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096493">if</span>&nbsp;<span class="ident" id="8096496">err</span>&nbsp;<span class="op" id="8096500">!=</span>&nbsp;<span class="ident" id="8096503">nil</span>&nbsp;<span class="op" id="8096507">{</span><br>
<span class="lineno">760</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096511">t</span><span class="op" id="8096512">.</span><span class="ident" id="8096513">Fatal</span><span class="op" id="8096518">(</span><span class="string" id="8096519">&#34;decode:&#34;</span><span class="op" id="8096528">,</span>&nbsp;<span class="ident" id="8096530">err</span><span class="op" id="8096533">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096536">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096539">if</span>&nbsp;<span class="ident" id="8096542">x</span>&nbsp;<span class="op" id="8096544">!=</span>&nbsp;<span class="ident" id="8096547">y</span>&nbsp;<span class="op" id="8096549">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096553">t</span><span class="op" id="8096554">.</span><span class="ident" id="8096555">Fatalf</span><span class="op" id="8096561">(</span><span class="string" id="8096562">&#34;%v&nbsp;!=&nbsp;%v&#34;</span><span class="op" id="8096572">,</span>&nbsp;<span class="ident" id="8096574">x</span><span class="op" id="8096575">,</span>&nbsp;<span class="ident" id="8096577">y</span><span class="op" id="8096578">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096581">}</span><br>
<span class="lineno">765</span><span class="op" id="8096583">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8096586">func</span>&nbsp;<span class="ident" id="8096591">TestGobEncodePtrError</span><span class="op" id="8096612">(</span><span class="ident" id="8096613">t</span>&nbsp;<span class="op" id="8096615">*</span><span class="ident" id="8096616">testing</span><span class="op" id="8096623">.</span><span class="ident" id="8096624">T</span><span class="op" id="8096625">)</span>&nbsp;<span class="op" id="8096627">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096630">var</span>&nbsp;<span class="ident" id="8096634">err</span>&nbsp;<span class="builtintype" id="8096638">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096645">b</span>&nbsp;<span class="op" id="8096647">:=</span>&nbsp;<span class="builtinfunc" id="8096650">new</span><span class="op" id="8096653">(</span><span class="ident" id="8096654">bytes</span><span class="op" id="8096659">.</span><span class="ident" id="8096660">Buffer</span><span class="op" id="8096666">)</span><br>
<span class="lineno">770</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096669">enc</span>&nbsp;<span class="op" id="8096673">:=</span>&nbsp;<span class="ident" id="8096676">NewEncoder</span><span class="op" id="8096686">(</span><span class="ident" id="8096687">b</span><span class="op" id="8096688">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096691">err</span>&nbsp;<span class="op" id="8096695">=</span>&nbsp;<span class="ident" id="8096697">enc</span><span class="op" id="8096700">.</span><span class="ident" id="8096701">Encode</span><span class="op" id="8096707">(</span><span class="op" id="8096708">&amp;</span><span class="ident" id="8096709">err</span><span class="op" id="8096712">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096715">if</span>&nbsp;<span class="ident" id="8096718">err</span>&nbsp;<span class="op" id="8096722">!=</span>&nbsp;<span class="ident" id="8096725">nil</span>&nbsp;<span class="op" id="8096729">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096733">t</span><span class="op" id="8096734">.</span><span class="ident" id="8096735">Fatal</span><span class="op" id="8096740">(</span><span class="string" id="8096741">&#34;encode:&#34;</span><span class="op" id="8096750">,</span>&nbsp;<span class="ident" id="8096752">err</span><span class="op" id="8096755">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096758">}</span><br>
<span class="lineno">775</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096761">dec</span>&nbsp;<span class="op" id="8096765">:=</span>&nbsp;<span class="ident" id="8096768">NewDecoder</span><span class="op" id="8096778">(</span><span class="ident" id="8096779">b</span><span class="op" id="8096780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096783">err2</span>&nbsp;<span class="op" id="8096788">:=</span>&nbsp;<span class="ident" id="8096791">fmt</span><span class="op" id="8096794">.</span><span class="ident" id="8096795">Errorf</span><span class="op" id="8096801">(</span><span class="string" id="8096802">&#34;foo&#34;</span><span class="op" id="8096807">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096810">err</span>&nbsp;<span class="op" id="8096814">=</span>&nbsp;<span class="ident" id="8096816">dec</span><span class="op" id="8096819">.</span><span class="ident" id="8096820">Decode</span><span class="op" id="8096826">(</span><span class="op" id="8096827">&amp;</span><span class="ident" id="8096828">err2</span><span class="op" id="8096832">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096835">if</span>&nbsp;<span class="ident" id="8096838">err</span>&nbsp;<span class="op" id="8096842">!=</span>&nbsp;<span class="ident" id="8096845">nil</span>&nbsp;<span class="op" id="8096849">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096853">t</span><span class="op" id="8096854">.</span><span class="ident" id="8096855">Fatal</span><span class="op" id="8096860">(</span><span class="string" id="8096861">&#34;decode:&#34;</span><span class="op" id="8096870">,</span>&nbsp;<span class="ident" id="8096872">err</span><span class="op" id="8096875">)</span><br>
<span class="lineno">780</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096878">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8096881">if</span>&nbsp;<span class="ident" id="8096884">err2</span>&nbsp;<span class="op" id="8096889">!=</span>&nbsp;<span class="ident" id="8096892">nil</span>&nbsp;<span class="op" id="8096896">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8096900">t</span><span class="op" id="8096901">.</span><span class="ident" id="8096902">Fatalf</span><span class="op" id="8096908">(</span><span class="string" id="8096909">&#34;expected&nbsp;nil,&nbsp;got&nbsp;%v&#34;</span><span class="op" id="8096931">,</span>&nbsp;<span class="ident" id="8096933">err2</span><span class="op" id="8096937">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8096940">}</span><br>
<span class="lineno"></span><span class="op" id="8096942">}</span><br>
<span class="lineno">785</span><br>
<span class="lineno"></span><span class="keyword" id="8096945">func</span>&nbsp;<span class="ident" id="8096950">TestNetIP</span><span class="op" id="8096959">(</span><span class="ident" id="8096960">t</span>&nbsp;<span class="op" id="8096962">*</span><span class="ident" id="8096963">testing</span><span class="op" id="8096970">.</span><span class="ident" id="8096971">T</span><span class="op" id="8096972">)</span>&nbsp;<span class="op" id="8096974">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="8096977">//&nbsp;Encoding&nbsp;of&nbsp;net.IP{1,2,3,4}&nbsp;in&nbsp;Go&nbsp;1.1.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097020">enc</span>&nbsp;<span class="op" id="8097024">:=</span>&nbsp;<span class="op" id="8097027">[</span><span class="op" id="8097028">]</span><span class="builtintype" id="8097029">byte</span><span class="op" id="8097033">{</span><span class="num" id="8097034">0x07</span><span class="op" id="8097038">,</span>&nbsp;<span class="num" id="8097040">0x0a</span><span class="op" id="8097044">,</span>&nbsp;<span class="num" id="8097046">0x00</span><span class="op" id="8097050">,</span>&nbsp;<span class="num" id="8097052">0x04</span><span class="op" id="8097056">,</span>&nbsp;<span class="num" id="8097058">0x01</span><span class="op" id="8097062">,</span>&nbsp;<span class="num" id="8097064">0x02</span><span class="op" id="8097068">,</span>&nbsp;<span class="num" id="8097070">0x03</span><span class="op" id="8097074">,</span>&nbsp;<span class="num" id="8097076">0x04</span><span class="op" id="8097080">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">790</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097084">var</span>&nbsp;<span class="ident" id="8097088">ip</span>&nbsp;<span class="ident" id="8097091">net</span><span class="op" id="8097094">.</span><span class="ident" id="8097095">IP</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097099">err</span>&nbsp;<span class="op" id="8097103">:=</span>&nbsp;<span class="ident" id="8097106">NewDecoder</span><span class="op" id="8097116">(</span><span class="ident" id="8097117">bytes</span><span class="op" id="8097122">.</span><span class="ident" id="8097123">NewReader</span><span class="op" id="8097132">(</span><span class="ident" id="8097133">enc</span><span class="op" id="8097136">)</span><span class="op" id="8097137">)</span><span class="op" id="8097138">.</span><span class="ident" id="8097139">Decode</span><span class="op" id="8097145">(</span><span class="op" id="8097146">&amp;</span><span class="ident" id="8097147">ip</span><span class="op" id="8097149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097152">if</span>&nbsp;<span class="ident" id="8097155">err</span>&nbsp;<span class="op" id="8097159">!=</span>&nbsp;<span class="ident" id="8097162">nil</span>&nbsp;<span class="op" id="8097166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097170">t</span><span class="op" id="8097171">.</span><span class="ident" id="8097172">Fatalf</span><span class="op" id="8097178">(</span><span class="string" id="8097179">&#34;decode:&nbsp;%v&#34;</span><span class="op" id="8097191">,</span>&nbsp;<span class="ident" id="8097193">err</span><span class="op" id="8097196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097199">}</span><br>
<span class="lineno">795</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8097202">if</span>&nbsp;<span class="ident" id="8097205">ip</span><span class="op" id="8097207">.</span><span class="ident" id="8097208">String</span><span class="op" id="8097214">(</span><span class="op" id="8097215">)</span>&nbsp;<span class="op" id="8097217">!=</span>&nbsp;<span class="string" id="8097220">&#34;1.2.3.4&#34;</span>&nbsp;<span class="op" id="8097230">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8097234">t</span><span class="op" id="8097235">.</span><span class="ident" id="8097236">Errorf</span><span class="op" id="8097242">(</span><span class="string" id="8097243">&#34;decoded&nbsp;to&nbsp;%v,&nbsp;want&nbsp;1.2.3.4&#34;</span><span class="op" id="8097272">,</span>&nbsp;<span class="ident" id="8097274">ip</span><span class="op" id="8097276">.</span><span class="ident" id="8097277">String</span><span class="op" id="8097283">(</span><span class="op" id="8097284">)</span><span class="op" id="8097285">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8097288">}</span><br>
<span class="lineno"></span><span class="op" id="8097290">}</span>
</div>
</body>
</html>
