<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="8024880">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="8024936">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="8024990">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="8025041">package</span>&nbsp;<span class="ident" id="8025049">build</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8025056">import</span>&nbsp;<span class="op" id="8025063">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025066">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025072">&#34;os&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025078">&#34;path/filepath&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025095">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025106">&#34;runtime&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025117">&#34;strings&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8025128">&#34;testing&#34;</span><br>
<span class="lineno">15</span><span class="op" id="8025138">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8025141">func</span>&nbsp;<span class="ident" id="8025146">TestMatch</span><span class="op" id="8025155">(</span><span class="ident" id="8025156">t</span>&nbsp;<span class="op" id="8025158">*</span><span class="ident" id="8025159"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8025166">.</span><span class="ident" id="8025167">T</span><span class="op" id="8025168">)</span>&nbsp;<span class="op" id="8025170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025173">ctxt</span>&nbsp;<span class="op" id="8025178">:=</span>&nbsp;<span class="ident" id="8025181"><a href="/go/build/build.go.html#5810409">Default</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025190">what</span>&nbsp;<span class="op" id="8025195">:=</span>&nbsp;<span class="string" id="8025198">&#34;default&#34;</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025209">match</span>&nbsp;<span class="op" id="8025215">:=</span>&nbsp;<span class="keyword" id="8025218">func</span><span class="op" id="8025222">(</span><span class="ident" id="8025223">tag</span>&nbsp;<span class="builtintype" id="8025227">string</span><span class="op" id="8025233">,</span>&nbsp;<span class="ident" id="8025235">want</span>&nbsp;<span class="keyword" id="8025240">map</span><span class="op" id="8025243">[</span><span class="builtintype" id="8025244">string</span><span class="op" id="8025250">]</span><span class="builtintype" id="8025251">bool</span><span class="op" id="8025255">)</span>&nbsp;<span class="op" id="8025257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025261">m</span>&nbsp;<span class="op" id="8025263">:=</span>&nbsp;<span class="builtinfunc" id="8025266">make</span><span class="op" id="8025270">(</span><span class="keyword" id="8025271">map</span><span class="op" id="8025274">[</span><span class="builtintype" id="8025275">string</span><span class="op" id="8025281">]</span><span class="builtintype" id="8025282">bool</span><span class="op" id="8025286">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025290">if</span>&nbsp;<span class="op" id="8025293">!</span><span class="ident" id="8025294"><a href="/go/build/build_test.go.html#8025173">ctxt</a></span><span class="op" id="8025298">.</span><span class="ident" id="8025299">match</span><span class="op" id="8025304">(</span><span class="ident" id="8025305"><a href="/go/build/build_test.go.html#8025223">tag</a></span><span class="op" id="8025308">,</span>&nbsp;<span class="ident" id="8025310"><a href="/go/build/build_test.go.html#8025261">m</a></span><span class="op" id="8025311">)</span>&nbsp;<span class="op" id="8025313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025318"><a href="/go/build/build_test.go.html#8025156">t</a></span><span class="op" id="8025319">.</span><span class="ident" id="8025320">Errorf</span><span class="op" id="8025326">(</span><span class="string" id="8025327">&#34;%s&nbsp;context&nbsp;should&nbsp;match&nbsp;%s,&nbsp;does&nbsp;not&#34;</span><span class="op" id="8025365">,</span>&nbsp;<span class="ident" id="8025367"><a href="/go/build/build_test.go.html#8025190">what</a></span><span class="op" id="8025371">,</span>&nbsp;<span class="ident" id="8025373"><a href="/go/build/build_test.go.html#8025223">tag</a></span><span class="op" id="8025376">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025380">}</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025384">if</span>&nbsp;<span class="op" id="8025387">!</span><span class="ident" id="8025388"><a href="/go/build/build_test.go.html#8025095">reflect</a></span><span class="op" id="8025395">.</span><span class="ident" id="8025396">DeepEqual</span><span class="op" id="8025405">(</span><span class="ident" id="8025406"><a href="/go/build/build_test.go.html#8025261">m</a></span><span class="op" id="8025407">,</span>&nbsp;<span class="ident" id="8025409"><a href="/go/build/build_test.go.html#8025235">want</a></span><span class="op" id="8025413">)</span>&nbsp;<span class="op" id="8025415">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025420"><a href="/go/build/build_test.go.html#8025156">t</a></span><span class="op" id="8025421">.</span><span class="ident" id="8025422">Errorf</span><span class="op" id="8025428">(</span><span class="string" id="8025429">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8025452">,</span>&nbsp;<span class="ident" id="8025454"><a href="/go/build/build_test.go.html#8025223">tag</a></span><span class="op" id="8025457">,</span>&nbsp;<span class="ident" id="8025459"><a href="/go/build/build_test.go.html#8025261">m</a></span><span class="op" id="8025460">,</span>&nbsp;<span class="ident" id="8025462"><a href="/go/build/build_test.go.html#8025235">want</a></span><span class="op" id="8025466">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025470">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025473">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025476">nomatch</span>&nbsp;<span class="op" id="8025484">:=</span>&nbsp;<span class="keyword" id="8025487">func</span><span class="op" id="8025491">(</span><span class="ident" id="8025492">tag</span>&nbsp;<span class="builtintype" id="8025496">string</span><span class="op" id="8025502">,</span>&nbsp;<span class="ident" id="8025504">want</span>&nbsp;<span class="keyword" id="8025509">map</span><span class="op" id="8025512">[</span><span class="builtintype" id="8025513">string</span><span class="op" id="8025519">]</span><span class="builtintype" id="8025520">bool</span><span class="op" id="8025524">)</span>&nbsp;<span class="op" id="8025526">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025530">m</span>&nbsp;<span class="op" id="8025532">:=</span>&nbsp;<span class="builtinfunc" id="8025535">make</span><span class="op" id="8025539">(</span><span class="keyword" id="8025540">map</span><span class="op" id="8025543">[</span><span class="builtintype" id="8025544">string</span><span class="op" id="8025550">]</span><span class="builtintype" id="8025551">bool</span><span class="op" id="8025555">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025559">if</span>&nbsp;<span class="ident" id="8025562"><a href="/go/build/build_test.go.html#8025173">ctxt</a></span><span class="op" id="8025566">.</span><span class="ident" id="8025567">match</span><span class="op" id="8025572">(</span><span class="ident" id="8025573"><a href="/go/build/build_test.go.html#8025492">tag</a></span><span class="op" id="8025576">,</span>&nbsp;<span class="ident" id="8025578"><a href="/go/build/build_test.go.html#8025530">m</a></span><span class="op" id="8025579">)</span>&nbsp;<span class="op" id="8025581">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025586"><a href="/go/build/build_test.go.html#8025156">t</a></span><span class="op" id="8025587">.</span><span class="ident" id="8025588">Errorf</span><span class="op" id="8025594">(</span><span class="string" id="8025595">&#34;%s&nbsp;context&nbsp;should&nbsp;NOT&nbsp;match&nbsp;%s,&nbsp;does&#34;</span><span class="op" id="8025633">,</span>&nbsp;<span class="ident" id="8025635"><a href="/go/build/build_test.go.html#8025190">what</a></span><span class="op" id="8025639">,</span>&nbsp;<span class="ident" id="8025641"><a href="/go/build/build_test.go.html#8025492">tag</a></span><span class="op" id="8025644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025648">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8025652">if</span>&nbsp;<span class="op" id="8025655">!</span><span class="ident" id="8025656"><a href="/go/build/build_test.go.html#8025095">reflect</a></span><span class="op" id="8025663">.</span><span class="ident" id="8025664">DeepEqual</span><span class="op" id="8025673">(</span><span class="ident" id="8025674"><a href="/go/build/build_test.go.html#8025530">m</a></span><span class="op" id="8025675">,</span>&nbsp;<span class="ident" id="8025677"><a href="/go/build/build_test.go.html#8025504">want</a></span><span class="op" id="8025681">)</span>&nbsp;<span class="op" id="8025683">{</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025688"><a href="/go/build/build_test.go.html#8025156">t</a></span><span class="op" id="8025689">.</span><span class="ident" id="8025690">Errorf</span><span class="op" id="8025696">(</span><span class="string" id="8025697">&#34;%s&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8025720">,</span>&nbsp;<span class="ident" id="8025722"><a href="/go/build/build_test.go.html#8025492">tag</a></span><span class="op" id="8025725">,</span>&nbsp;<span class="ident" id="8025727"><a href="/go/build/build_test.go.html#8025530">m</a></span><span class="op" id="8025728">,</span>&nbsp;<span class="ident" id="8025730"><a href="/go/build/build_test.go.html#8025504">want</a></span><span class="op" id="8025734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025738">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8025741">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025745"><a href="/go/build/build_test.go.html#8025209">match</a></span><span class="op" id="8025750">(</span><span class="ident" id="8025751"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025758">.</span><span class="ident" id="8025759">GOOS</span><span class="op" id="8025763">+</span><span class="string" id="8025764">&#34;,&#34;</span><span class="op" id="8025767">+</span><span class="ident" id="8025768"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025775">.</span><span class="ident" id="8025776">GOARCH</span><span class="op" id="8025782">,</span>&nbsp;<span class="keyword" id="8025784">map</span><span class="op" id="8025787">[</span><span class="builtintype" id="8025788">string</span><span class="op" id="8025794">]</span><span class="builtintype" id="8025795">bool</span><span class="op" id="8025799">{</span><span class="ident" id="8025800"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025807">.</span><span class="ident" id="8025808">GOOS</span><span class="op" id="8025812">:</span>&nbsp;<span class="ident" id="8025814">true</span><span class="op" id="8025818">,</span>&nbsp;<span class="ident" id="8025820"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025827">.</span><span class="ident" id="8025828">GOARCH</span><span class="op" id="8025834">:</span>&nbsp;<span class="ident" id="8025836">true</span><span class="op" id="8025840">}</span><span class="op" id="8025841">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025844"><a href="/go/build/build_test.go.html#8025209">match</a></span><span class="op" id="8025849">(</span><span class="ident" id="8025850"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025857">.</span><span class="ident" id="8025858">GOOS</span><span class="op" id="8025862">+</span><span class="string" id="8025863">&#34;,&#34;</span><span class="op" id="8025866">+</span><span class="ident" id="8025867"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025874">.</span><span class="ident" id="8025875">GOARCH</span><span class="op" id="8025881">+</span><span class="string" id="8025882">&#34;,!foo&#34;</span><span class="op" id="8025889">,</span>&nbsp;<span class="keyword" id="8025891">map</span><span class="op" id="8025894">[</span><span class="builtintype" id="8025895">string</span><span class="op" id="8025901">]</span><span class="builtintype" id="8025902">bool</span><span class="op" id="8025906">{</span><span class="ident" id="8025907"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025914">.</span><span class="ident" id="8025915">GOOS</span><span class="op" id="8025919">:</span>&nbsp;<span class="ident" id="8025921">true</span><span class="op" id="8025925">,</span>&nbsp;<span class="ident" id="8025927"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025934">.</span><span class="ident" id="8025935">GOARCH</span><span class="op" id="8025941">:</span>&nbsp;<span class="ident" id="8025943">true</span><span class="op" id="8025947">,</span>&nbsp;<span class="string" id="8025949">&#34;foo&#34;</span><span class="op" id="8025954">:</span>&nbsp;<span class="ident" id="8025956">true</span><span class="op" id="8025960">}</span><span class="op" id="8025961">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8025964"><a href="/go/build/build_test.go.html#8025476">nomatch</a></span><span class="op" id="8025971">(</span><span class="ident" id="8025972"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025979">.</span><span class="ident" id="8025980">GOOS</span><span class="op" id="8025984">+</span><span class="string" id="8025985">&#34;,&#34;</span><span class="op" id="8025988">+</span><span class="ident" id="8025989"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8025996">.</span><span class="ident" id="8025997">GOARCH</span><span class="op" id="8026003">+</span><span class="string" id="8026004">&#34;,foo&#34;</span><span class="op" id="8026010">,</span>&nbsp;<span class="keyword" id="8026012">map</span><span class="op" id="8026015">[</span><span class="builtintype" id="8026016">string</span><span class="op" id="8026022">]</span><span class="builtintype" id="8026023">bool</span><span class="op" id="8026027">{</span><span class="ident" id="8026028"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026035">.</span><span class="ident" id="8026036">GOOS</span><span class="op" id="8026040">:</span>&nbsp;<span class="ident" id="8026042">true</span><span class="op" id="8026046">,</span>&nbsp;<span class="ident" id="8026048"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026055">.</span><span class="ident" id="8026056">GOARCH</span><span class="op" id="8026062">:</span>&nbsp;<span class="ident" id="8026064">true</span><span class="op" id="8026068">,</span>&nbsp;<span class="string" id="8026070">&#34;foo&#34;</span><span class="op" id="8026075">:</span>&nbsp;<span class="ident" id="8026077">true</span><span class="op" id="8026081">}</span><span class="op" id="8026082">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026086"><a href="/go/build/build_test.go.html#8025190">what</a></span>&nbsp;<span class="op" id="8026091">=</span>&nbsp;<span class="string" id="8026093">&#34;modified&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026105"><a href="/go/build/build_test.go.html#8025173">ctxt</a></span><span class="op" id="8026109">.</span><span class="ident" id="8026110">BuildTags</span>&nbsp;<span class="op" id="8026120">=</span>&nbsp;<span class="op" id="8026122">[</span><span class="op" id="8026123">]</span><span class="builtintype" id="8026124">string</span><span class="op" id="8026130">{</span><span class="string" id="8026131">&#34;foo&#34;</span><span class="op" id="8026136">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026139"><a href="/go/build/build_test.go.html#8025209">match</a></span><span class="op" id="8026144">(</span><span class="ident" id="8026145"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026152">.</span><span class="ident" id="8026153">GOOS</span><span class="op" id="8026157">+</span><span class="string" id="8026158">&#34;,&#34;</span><span class="op" id="8026161">+</span><span class="ident" id="8026162"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026169">.</span><span class="ident" id="8026170">GOARCH</span><span class="op" id="8026176">,</span>&nbsp;<span class="keyword" id="8026178">map</span><span class="op" id="8026181">[</span><span class="builtintype" id="8026182">string</span><span class="op" id="8026188">]</span><span class="builtintype" id="8026189">bool</span><span class="op" id="8026193">{</span><span class="ident" id="8026194"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026201">.</span><span class="ident" id="8026202">GOOS</span><span class="op" id="8026206">:</span>&nbsp;<span class="ident" id="8026208">true</span><span class="op" id="8026212">,</span>&nbsp;<span class="ident" id="8026214"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026221">.</span><span class="ident" id="8026222">GOARCH</span><span class="op" id="8026228">:</span>&nbsp;<span class="ident" id="8026230">true</span><span class="op" id="8026234">}</span><span class="op" id="8026235">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026238"><a href="/go/build/build_test.go.html#8025209">match</a></span><span class="op" id="8026243">(</span><span class="ident" id="8026244"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026251">.</span><span class="ident" id="8026252">GOOS</span><span class="op" id="8026256">+</span><span class="string" id="8026257">&#34;,&#34;</span><span class="op" id="8026260">+</span><span class="ident" id="8026261"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026268">.</span><span class="ident" id="8026269">GOARCH</span><span class="op" id="8026275">+</span><span class="string" id="8026276">&#34;,foo&#34;</span><span class="op" id="8026282">,</span>&nbsp;<span class="keyword" id="8026284">map</span><span class="op" id="8026287">[</span><span class="builtintype" id="8026288">string</span><span class="op" id="8026294">]</span><span class="builtintype" id="8026295">bool</span><span class="op" id="8026299">{</span><span class="ident" id="8026300"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026307">.</span><span class="ident" id="8026308">GOOS</span><span class="op" id="8026312">:</span>&nbsp;<span class="ident" id="8026314">true</span><span class="op" id="8026318">,</span>&nbsp;<span class="ident" id="8026320"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026327">.</span><span class="ident" id="8026328">GOARCH</span><span class="op" id="8026334">:</span>&nbsp;<span class="ident" id="8026336">true</span><span class="op" id="8026340">,</span>&nbsp;<span class="string" id="8026342">&#34;foo&#34;</span><span class="op" id="8026347">:</span>&nbsp;<span class="ident" id="8026349">true</span><span class="op" id="8026353">}</span><span class="op" id="8026354">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026357"><a href="/go/build/build_test.go.html#8025476">nomatch</a></span><span class="op" id="8026364">(</span><span class="ident" id="8026365"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026372">.</span><span class="ident" id="8026373">GOOS</span><span class="op" id="8026377">+</span><span class="string" id="8026378">&#34;,&#34;</span><span class="op" id="8026381">+</span><span class="ident" id="8026382"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026389">.</span><span class="ident" id="8026390">GOARCH</span><span class="op" id="8026396">+</span><span class="string" id="8026397">&#34;,!foo&#34;</span><span class="op" id="8026404">,</span>&nbsp;<span class="keyword" id="8026406">map</span><span class="op" id="8026409">[</span><span class="builtintype" id="8026410">string</span><span class="op" id="8026416">]</span><span class="builtintype" id="8026417">bool</span><span class="op" id="8026421">{</span><span class="ident" id="8026422"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026429">.</span><span class="ident" id="8026430">GOOS</span><span class="op" id="8026434">:</span>&nbsp;<span class="ident" id="8026436">true</span><span class="op" id="8026440">,</span>&nbsp;<span class="ident" id="8026442"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026449">.</span><span class="ident" id="8026450">GOARCH</span><span class="op" id="8026456">:</span>&nbsp;<span class="ident" id="8026458">true</span><span class="op" id="8026462">,</span>&nbsp;<span class="string" id="8026464">&#34;foo&#34;</span><span class="op" id="8026469">:</span>&nbsp;<span class="ident" id="8026471">true</span><span class="op" id="8026475">}</span><span class="op" id="8026476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026479"><a href="/go/build/build_test.go.html#8025209">match</a></span><span class="op" id="8026484">(</span><span class="ident" id="8026485"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026492">.</span><span class="ident" id="8026493">GOOS</span><span class="op" id="8026497">+</span><span class="string" id="8026498">&#34;,&#34;</span><span class="op" id="8026501">+</span><span class="ident" id="8026502"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026509">.</span><span class="ident" id="8026510">GOARCH</span><span class="op" id="8026516">+</span><span class="string" id="8026517">&#34;,!bar&#34;</span><span class="op" id="8026524">,</span>&nbsp;<span class="keyword" id="8026526">map</span><span class="op" id="8026529">[</span><span class="builtintype" id="8026530">string</span><span class="op" id="8026536">]</span><span class="builtintype" id="8026537">bool</span><span class="op" id="8026541">{</span><span class="ident" id="8026542"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026549">.</span><span class="ident" id="8026550">GOOS</span><span class="op" id="8026554">:</span>&nbsp;<span class="ident" id="8026556">true</span><span class="op" id="8026560">,</span>&nbsp;<span class="ident" id="8026562"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026569">.</span><span class="ident" id="8026570">GOARCH</span><span class="op" id="8026576">:</span>&nbsp;<span class="ident" id="8026578">true</span><span class="op" id="8026582">,</span>&nbsp;<span class="string" id="8026584">&#34;bar&#34;</span><span class="op" id="8026589">:</span>&nbsp;<span class="ident" id="8026591">true</span><span class="op" id="8026595">}</span><span class="op" id="8026596">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026599"><a href="/go/build/build_test.go.html#8025476">nomatch</a></span><span class="op" id="8026606">(</span><span class="ident" id="8026607"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026614">.</span><span class="ident" id="8026615">GOOS</span><span class="op" id="8026619">+</span><span class="string" id="8026620">&#34;,&#34;</span><span class="op" id="8026623">+</span><span class="ident" id="8026624"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026631">.</span><span class="ident" id="8026632">GOARCH</span><span class="op" id="8026638">+</span><span class="string" id="8026639">&#34;,bar&#34;</span><span class="op" id="8026645">,</span>&nbsp;<span class="keyword" id="8026647">map</span><span class="op" id="8026650">[</span><span class="builtintype" id="8026651">string</span><span class="op" id="8026657">]</span><span class="builtintype" id="8026658">bool</span><span class="op" id="8026662">{</span><span class="ident" id="8026663"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026670">.</span><span class="ident" id="8026671">GOOS</span><span class="op" id="8026675">:</span>&nbsp;<span class="ident" id="8026677">true</span><span class="op" id="8026681">,</span>&nbsp;<span class="ident" id="8026683"><a href="/go/build/build_test.go.html#8025106">runtime</a></span><span class="op" id="8026690">.</span><span class="ident" id="8026691">GOARCH</span><span class="op" id="8026697">:</span>&nbsp;<span class="ident" id="8026699">true</span><span class="op" id="8026703">,</span>&nbsp;<span class="string" id="8026705">&#34;bar&#34;</span><span class="op" id="8026710">:</span>&nbsp;<span class="ident" id="8026712">true</span><span class="op" id="8026716">}</span><span class="op" id="8026717">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026720"><a href="/go/build/build_test.go.html#8025476">nomatch</a></span><span class="op" id="8026727">(</span><span class="string" id="8026728">&#34;!&#34;</span><span class="op" id="8026731">,</span>&nbsp;<span class="keyword" id="8026733">map</span><span class="op" id="8026736">[</span><span class="builtintype" id="8026737">string</span><span class="op" id="8026743">]</span><span class="builtintype" id="8026744">bool</span><span class="op" id="8026748">{</span><span class="op" id="8026749">}</span><span class="op" id="8026750">)</span><br>
<span class="lineno"></span><span class="op" id="8026752">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8026755">func</span>&nbsp;<span class="ident" id="8026760">TestDotSlashImport</span><span class="op" id="8026778">(</span><span class="ident" id="8026779">t</span>&nbsp;<span class="op" id="8026781">*</span><span class="ident" id="8026782"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8026789">.</span><span class="ident" id="8026790">T</span><span class="op" id="8026791">)</span>&nbsp;<span class="op" id="8026793">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026796">p</span><span class="op" id="8026797">,</span>&nbsp;<span class="ident" id="8026799">err</span>&nbsp;<span class="op" id="8026803">:=</span>&nbsp;<span class="ident" id="8026806"><a href="/go/build/build.go.html#5831314">ImportDir</a></span><span class="op" id="8026815">(</span><span class="string" id="8026816">&#34;testdata/other&#34;</span><span class="op" id="8026832">,</span>&nbsp;<span class="num" id="8026834">0</span><span class="op" id="8026835">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026838">if</span>&nbsp;<span class="ident" id="8026841"><a href="/go/build/build_test.go.html#8026799">err</a></span>&nbsp;<span class="op" id="8026845">!=</span>&nbsp;<span class="ident" id="8026848">nil</span>&nbsp;<span class="op" id="8026852">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026856"><a href="/go/build/build_test.go.html#8026779">t</a></span><span class="op" id="8026857">.</span><span class="ident" id="8026858">Fatal</span><span class="op" id="8026863">(</span><span class="ident" id="8026864"><a href="/go/build/build_test.go.html#8026799">err</a></span><span class="op" id="8026867">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026870">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8026873">if</span>&nbsp;<span class="builtinfunc" id="8026876">len</span><span class="op" id="8026879">(</span><span class="ident" id="8026880"><a href="/go/build/build_test.go.html#8026796">p</a></span><span class="op" id="8026881">.</span><span class="ident" id="8026882">Imports</span><span class="op" id="8026889">)</span>&nbsp;<span class="op" id="8026891">!=</span>&nbsp;<span class="num" id="8026894">1</span>&nbsp;<span class="op" id="8026896">||</span>&nbsp;<span class="ident" id="8026899"><a href="/go/build/build_test.go.html#8026796">p</a></span><span class="op" id="8026900">.</span><span class="ident" id="8026901">Imports</span><span class="op" id="8026908">[</span><span class="num" id="8026909">0</span><span class="op" id="8026910">]</span>&nbsp;<span class="op" id="8026912">!=</span>&nbsp;<span class="string" id="8026915">&#34;./file&#34;</span>&nbsp;<span class="op" id="8026924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026928"><a href="/go/build/build_test.go.html#8026779">t</a></span><span class="op" id="8026929">.</span><span class="ident" id="8026930">Fatalf</span><span class="op" id="8026936">(</span><span class="string" id="8026937">&#34;testdata/other:&nbsp;Imports=%v,&nbsp;want&nbsp;[./file]&#34;</span><span class="op" id="8026980">,</span>&nbsp;<span class="ident" id="8026982"><a href="/go/build/build_test.go.html#8026796">p</a></span><span class="op" id="8026983">.</span><span class="ident" id="8026984">Imports</span><span class="op" id="8026991">)</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8026994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8026998">p1</span><span class="op" id="8027000">,</span>&nbsp;<span class="ident" id="8027002"><a href="/go/build/build_test.go.html#8026799">err</a></span>&nbsp;<span class="op" id="8027006">:=</span>&nbsp;<span class="ident" id="8027009"><a href="/go/build/build.go.html#5831149">Import</a></span><span class="op" id="8027015">(</span><span class="string" id="8027016">&#34;./file&#34;</span><span class="op" id="8027024">,</span>&nbsp;<span class="string" id="8027026">&#34;testdata/other&#34;</span><span class="op" id="8027042">,</span>&nbsp;<span class="num" id="8027044">0</span><span class="op" id="8027045">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027048">if</span>&nbsp;<span class="ident" id="8027051"><a href="/go/build/build_test.go.html#8026799">err</a></span>&nbsp;<span class="op" id="8027055">!=</span>&nbsp;<span class="ident" id="8027058">nil</span>&nbsp;<span class="op" id="8027062">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027066"><a href="/go/build/build_test.go.html#8026779">t</a></span><span class="op" id="8027067">.</span><span class="ident" id="8027068">Fatal</span><span class="op" id="8027073">(</span><span class="ident" id="8027074"><a href="/go/build/build_test.go.html#8026799">err</a></span><span class="op" id="8027077">)</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027080">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027083">if</span>&nbsp;<span class="ident" id="8027086"><a href="/go/build/build_test.go.html#8026998">p1</a></span><span class="op" id="8027088">.</span><span class="ident" id="8027089">Name</span>&nbsp;<span class="op" id="8027094">!=</span>&nbsp;<span class="string" id="8027097">&#34;file&#34;</span>&nbsp;<span class="op" id="8027104">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027108"><a href="/go/build/build_test.go.html#8026779">t</a></span><span class="op" id="8027109">.</span><span class="ident" id="8027110">Fatalf</span><span class="op" id="8027116">(</span><span class="string" id="8027117">&#34;./file:&nbsp;Name=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8027143">,</span>&nbsp;<span class="ident" id="8027145"><a href="/go/build/build_test.go.html#8026998">p1</a></span><span class="op" id="8027147">.</span><span class="ident" id="8027148">Name</span><span class="op" id="8027152">,</span>&nbsp;<span class="string" id="8027154">&#34;file&#34;</span><span class="op" id="8027160">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027163">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027166">dir</span>&nbsp;<span class="op" id="8027170">:=</span>&nbsp;<span class="ident" id="8027173"><a href="/go/build/build_test.go.html#8025078">filepath</a></span><span class="op" id="8027181">.</span><span class="ident" id="8027182">Clean</span><span class="op" id="8027187">(</span><span class="string" id="8027188">&#34;testdata/other/file&#34;</span><span class="op" id="8027209">)</span>&nbsp;<span class="comment" id="8027211">//&nbsp;Clean&nbsp;to&nbsp;use&nbsp;\&nbsp;on&nbsp;Windows</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027241">if</span>&nbsp;<span class="ident" id="8027244"><a href="/go/build/build_test.go.html#8026998">p1</a></span><span class="op" id="8027246">.</span><span class="ident" id="8027247">Dir</span>&nbsp;<span class="op" id="8027251">!=</span>&nbsp;<span class="ident" id="8027254"><a href="/go/build/build_test.go.html#8027166">dir</a></span>&nbsp;<span class="op" id="8027258">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027262"><a href="/go/build/build_test.go.html#8026779">t</a></span><span class="op" id="8027263">.</span><span class="ident" id="8027264">Fatalf</span><span class="op" id="8027270">(</span><span class="string" id="8027271">&#34;./file:&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8027296">,</span>&nbsp;<span class="ident" id="8027298"><a href="/go/build/build_test.go.html#8026998">p1</a></span><span class="op" id="8027300">.</span><span class="ident" id="8027301">Name</span><span class="op" id="8027305">,</span>&nbsp;<span class="ident" id="8027307"><a href="/go/build/build_test.go.html#8027166">dir</a></span><span class="op" id="8027310">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027313">}</span><br>
<span class="lineno"></span><span class="op" id="8027315">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">75</span><span class="keyword" id="8027318">func</span>&nbsp;<span class="ident" id="8027323">TestEmptyImport</span><span class="op" id="8027338">(</span><span class="ident" id="8027339">t</span>&nbsp;<span class="op" id="8027341">*</span><span class="ident" id="8027342"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8027349">.</span><span class="ident" id="8027350">T</span><span class="op" id="8027351">)</span>&nbsp;<span class="op" id="8027353">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027356">p</span><span class="op" id="8027357">,</span>&nbsp;<span class="ident" id="8027359">err</span>&nbsp;<span class="op" id="8027363">:=</span>&nbsp;<span class="ident" id="8027366"><a href="/go/build/build.go.html#5831149">Import</a></span><span class="op" id="8027372">(</span><span class="string" id="8027373">&#34;&#34;</span><span class="op" id="8027375">,</span>&nbsp;<span class="ident" id="8027377"><a href="/go/build/build.go.html#5810409">Default</a></span><span class="op" id="8027384">.</span><span class="ident" id="8027385">GOROOT</span><span class="op" id="8027391">,</span>&nbsp;<span class="ident" id="8027393"><a href="/go/build/build.go.html#5812490">FindOnly</a></span><span class="op" id="8027401">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027404">if</span>&nbsp;<span class="ident" id="8027407"><a href="/go/build/build_test.go.html#8027359">err</a></span>&nbsp;<span class="op" id="8027411">==</span>&nbsp;<span class="ident" id="8027414">nil</span>&nbsp;<span class="op" id="8027418">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027422"><a href="/go/build/build_test.go.html#8027339">t</a></span><span class="op" id="8027423">.</span><span class="ident" id="8027424">Fatal</span><span class="op" id="8027429">(</span><span class="string" id="8027430">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;error.`</span><span class="op" id="8027462">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027465">}</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027468">if</span>&nbsp;<span class="ident" id="8027471"><a href="/go/build/build_test.go.html#8027356">p</a></span>&nbsp;<span class="op" id="8027473">==</span>&nbsp;<span class="ident" id="8027476">nil</span>&nbsp;<span class="op" id="8027480">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027484"><a href="/go/build/build_test.go.html#8027339">t</a></span><span class="op" id="8027485">.</span><span class="ident" id="8027486">Fatal</span><span class="op" id="8027491">(</span><span class="string" id="8027492">`Import(&#34;&#34;)&nbsp;returned&nbsp;nil&nbsp;package.`</span><span class="op" id="8027526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027529">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027532">if</span>&nbsp;<span class="ident" id="8027535"><a href="/go/build/build_test.go.html#8027356">p</a></span><span class="op" id="8027536">.</span><span class="ident" id="8027537">ImportPath</span>&nbsp;<span class="op" id="8027548">!=</span>&nbsp;<span class="string" id="8027551">&#34;&#34;</span>&nbsp;<span class="op" id="8027554">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027558"><a href="/go/build/build_test.go.html#8027339">t</a></span><span class="op" id="8027559">.</span><span class="ident" id="8027560">Fatalf</span><span class="op" id="8027566">(</span><span class="string" id="8027567">&#34;ImportPath=%q,&nbsp;want&nbsp;%q.&#34;</span><span class="op" id="8027592">,</span>&nbsp;<span class="ident" id="8027594"><a href="/go/build/build_test.go.html#8027356">p</a></span><span class="op" id="8027595">.</span><span class="ident" id="8027596">ImportPath</span><span class="op" id="8027606">,</span>&nbsp;<span class="string" id="8027608">&#34;&#34;</span><span class="op" id="8027610">)</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027613">}</span><br>
<span class="lineno"></span><span class="op" id="8027615">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8027618">func</span>&nbsp;<span class="ident" id="8027623">TestEmptyFolderImport</span><span class="op" id="8027644">(</span><span class="ident" id="8027645">t</span>&nbsp;<span class="op" id="8027647">*</span><span class="ident" id="8027648"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8027655">.</span><span class="ident" id="8027656">T</span><span class="op" id="8027657">)</span>&nbsp;<span class="op" id="8027659">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027662">_</span><span class="op" id="8027663">,</span>&nbsp;<span class="ident" id="8027665">err</span>&nbsp;<span class="op" id="8027669">:=</span>&nbsp;<span class="ident" id="8027672"><a href="/go/build/build.go.html#5831149">Import</a></span><span class="op" id="8027678">(</span><span class="string" id="8027679">&#34;.&#34;</span><span class="op" id="8027682">,</span>&nbsp;<span class="string" id="8027684">&#34;testdata/empty&#34;</span><span class="op" id="8027700">,</span>&nbsp;<span class="num" id="8027702">0</span><span class="op" id="8027703">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027706">if</span>&nbsp;<span class="ident" id="8027709">_</span><span class="op" id="8027710">,</span>&nbsp;<span class="ident" id="8027712">ok</span>&nbsp;<span class="op" id="8027715">:=</span>&nbsp;<span class="ident" id="8027718"><a href="/go/build/build_test.go.html#8027665">err</a></span><span class="op" id="8027721">.</span><span class="op" id="8027722">(</span><span class="op" id="8027723">*</span><span class="ident" id="8027724"><a href="/go/build/build.go.html#5816047">NoGoError</a></span><span class="op" id="8027733">)</span><span class="op" id="8027734">;</span>&nbsp;<span class="op" id="8027736">!</span><span class="ident" id="8027737"><a href="/go/build/build_test.go.html#8027712">ok</a></span>&nbsp;<span class="op" id="8027740">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027744"><a href="/go/build/build_test.go.html#8027645">t</a></span><span class="op" id="8027745">.</span><span class="ident" id="8027746">Fatal</span><span class="op" id="8027751">(</span><span class="string" id="8027752">`Import(&#34;testdata/empty&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;NoGoError.`</span><span class="op" id="8027804">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8027807">}</span><br>
<span class="lineno"></span><span class="op" id="8027809">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">95</span><span class="keyword" id="8027812">func</span>&nbsp;<span class="ident" id="8027817">TestMultiplePackageImport</span><span class="op" id="8027842">(</span><span class="ident" id="8027843">t</span>&nbsp;<span class="op" id="8027845">*</span><span class="ident" id="8027846"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8027853">.</span><span class="ident" id="8027854">T</span><span class="op" id="8027855">)</span>&nbsp;<span class="op" id="8027857">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027860">_</span><span class="op" id="8027861">,</span>&nbsp;<span class="ident" id="8027863">err</span>&nbsp;<span class="op" id="8027867">:=</span>&nbsp;<span class="ident" id="8027870"><a href="/go/build/build.go.html#5831149">Import</a></span><span class="op" id="8027876">(</span><span class="string" id="8027877">&#34;.&#34;</span><span class="op" id="8027880">,</span>&nbsp;<span class="string" id="8027882">&#34;testdata/multi&#34;</span><span class="op" id="8027898">,</span>&nbsp;<span class="num" id="8027900">0</span><span class="op" id="8027901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8027904">if</span>&nbsp;<span class="ident" id="8027907">_</span><span class="op" id="8027908">,</span>&nbsp;<span class="ident" id="8027910">ok</span>&nbsp;<span class="op" id="8027913">:=</span>&nbsp;<span class="ident" id="8027916"><a href="/go/build/build_test.go.html#8027863">err</a></span><span class="op" id="8027919">.</span><span class="op" id="8027920">(</span><span class="op" id="8027921">*</span><span class="ident" id="8027922"><a href="/go/build/build.go.html#5816295">MultiplePackageError</a></span><span class="op" id="8027942">)</span><span class="op" id="8027943">;</span>&nbsp;<span class="op" id="8027945">!</span><span class="ident" id="8027946"><a href="/go/build/build_test.go.html#8027910">ok</a></span>&nbsp;<span class="op" id="8027949">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8027953"><a href="/go/build/build_test.go.html#8027843">t</a></span><span class="op" id="8027954">.</span><span class="ident" id="8027955">Fatal</span><span class="op" id="8027960">(</span><span class="string" id="8027961">`Import(&#34;testdata/multi&#34;)&nbsp;did&nbsp;not&nbsp;return&nbsp;MultiplePackageError.`</span><span class="op" id="8028024">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028027">}</span><br>
<span class="lineno">100</span><span class="op" id="8028029">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8028032">func</span>&nbsp;<span class="ident" id="8028037">TestLocalDirectory</span><span class="op" id="8028055">(</span><span class="ident" id="8028056">t</span>&nbsp;<span class="op" id="8028058">*</span><span class="ident" id="8028059"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8028066">.</span><span class="ident" id="8028067">T</span><span class="op" id="8028068">)</span>&nbsp;<span class="op" id="8028070">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028073">cwd</span><span class="op" id="8028076">,</span>&nbsp;<span class="ident" id="8028078">err</span>&nbsp;<span class="op" id="8028082">:=</span>&nbsp;<span class="ident" id="8028085"><a href="/go/build/build_test.go.html#8025072">os</a></span><span class="op" id="8028087">.</span><span class="ident" id="8028088">Getwd</span><span class="op" id="8028093">(</span><span class="op" id="8028094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028097">if</span>&nbsp;<span class="ident" id="8028100"><a href="/go/build/build_test.go.html#8028078">err</a></span>&nbsp;<span class="op" id="8028104">!=</span>&nbsp;<span class="ident" id="8028107">nil</span>&nbsp;<span class="op" id="8028111">{</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028115"><a href="/go/build/build_test.go.html#8028056">t</a></span><span class="op" id="8028116">.</span><span class="ident" id="8028117">Fatal</span><span class="op" id="8028122">(</span><span class="ident" id="8028123"><a href="/go/build/build_test.go.html#8028078">err</a></span><span class="op" id="8028126">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028129">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028133">p</span><span class="op" id="8028134">,</span>&nbsp;<span class="ident" id="8028136"><a href="/go/build/build_test.go.html#8028078">err</a></span>&nbsp;<span class="op" id="8028140">:=</span>&nbsp;<span class="ident" id="8028143"><a href="/go/build/build.go.html#5831314">ImportDir</a></span><span class="op" id="8028152">(</span><span class="ident" id="8028153"><a href="/go/build/build_test.go.html#8028073">cwd</a></span><span class="op" id="8028156">,</span>&nbsp;<span class="num" id="8028158">0</span><span class="op" id="8028159">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028162">if</span>&nbsp;<span class="ident" id="8028165"><a href="/go/build/build_test.go.html#8028078">err</a></span>&nbsp;<span class="op" id="8028169">!=</span>&nbsp;<span class="ident" id="8028172">nil</span>&nbsp;<span class="op" id="8028176">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028180"><a href="/go/build/build_test.go.html#8028056">t</a></span><span class="op" id="8028181">.</span><span class="ident" id="8028182">Fatal</span><span class="op" id="8028187">(</span><span class="ident" id="8028188"><a href="/go/build/build_test.go.html#8028078">err</a></span><span class="op" id="8028191">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028194">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028197">if</span>&nbsp;<span class="ident" id="8028200"><a href="/go/build/build_test.go.html#8028133">p</a></span><span class="op" id="8028201">.</span><span class="ident" id="8028202">ImportPath</span>&nbsp;<span class="op" id="8028213">!=</span>&nbsp;<span class="string" id="8028216">&#34;go/build&#34;</span>&nbsp;<span class="op" id="8028227">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028231"><a href="/go/build/build_test.go.html#8028056">t</a></span><span class="op" id="8028232">.</span><span class="ident" id="8028233">Fatalf</span><span class="op" id="8028239">(</span><span class="string" id="8028240">&#34;ImportPath=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8028264">,</span>&nbsp;<span class="ident" id="8028266"><a href="/go/build/build_test.go.html#8028133">p</a></span><span class="op" id="8028267">.</span><span class="ident" id="8028268">ImportPath</span><span class="op" id="8028278">,</span>&nbsp;<span class="string" id="8028280">&#34;go/build&#34;</span><span class="op" id="8028290">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028293">}</span><br>
<span class="lineno">115</span><span class="op" id="8028295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8028298">func</span>&nbsp;<span class="ident" id="8028303">TestShouldBuild</span><span class="op" id="8028318">(</span><span class="ident" id="8028319">t</span>&nbsp;<span class="op" id="8028321">*</span><span class="ident" id="8028322"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8028329">.</span><span class="ident" id="8028330">T</span><span class="op" id="8028331">)</span>&nbsp;<span class="op" id="8028333">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028336">const</span>&nbsp;<span class="ident" id="8028342">file1</span>&nbsp;<span class="op" id="8028348">=</span>&nbsp;<span class="string" id="8028350">&#34;//&nbsp;+build&nbsp;tag1\n\n&#34;</span>&nbsp;<span class="op" id="8028371">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028375">&#34;package&nbsp;main\n&#34;</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028393">want1</span>&nbsp;<span class="op" id="8028399">:=</span>&nbsp;<span class="keyword" id="8028402">map</span><span class="op" id="8028405">[</span><span class="builtintype" id="8028406">string</span><span class="op" id="8028412">]</span><span class="builtintype" id="8028413">bool</span><span class="op" id="8028417">{</span><span class="string" id="8028418">&#34;tag1&#34;</span><span class="op" id="8028424">:</span>&nbsp;<span class="ident" id="8028426">true</span><span class="op" id="8028430">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028434">const</span>&nbsp;<span class="ident" id="8028440">file2</span>&nbsp;<span class="op" id="8028446">=</span>&nbsp;<span class="string" id="8028448">&#34;//&nbsp;+build&nbsp;cgo\n\n&#34;</span>&nbsp;<span class="op" id="8028468">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028472">&#34;//&nbsp;This&nbsp;package&nbsp;implements&nbsp;parsing&nbsp;of&nbsp;tags&nbsp;like\n&#34;</span>&nbsp;<span class="op" id="8028524">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028528">&#34;//&nbsp;+build&nbsp;tag1\n&#34;</span>&nbsp;<span class="op" id="8028547">+</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028551">&#34;package&nbsp;build&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028568">want2</span>&nbsp;<span class="op" id="8028574">:=</span>&nbsp;<span class="keyword" id="8028577">map</span><span class="op" id="8028580">[</span><span class="builtintype" id="8028581">string</span><span class="op" id="8028587">]</span><span class="builtintype" id="8028588">bool</span><span class="op" id="8028592">{</span><span class="string" id="8028593">&#34;cgo&#34;</span><span class="op" id="8028598">:</span>&nbsp;<span class="ident" id="8028600">true</span><span class="op" id="8028604">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028608">const</span>&nbsp;<span class="ident" id="8028614">file3</span>&nbsp;<span class="op" id="8028620">=</span>&nbsp;<span class="string" id="8028622">&#34;//&nbsp;Copyright&nbsp;The&nbsp;Go&nbsp;Authors.\n\n&#34;</span>&nbsp;<span class="op" id="8028657">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028661">&#34;package&nbsp;build\n\n&#34;</span>&nbsp;<span class="op" id="8028681">+</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028685">&#34;//&nbsp;shouldBuild&nbsp;checks&nbsp;tags&nbsp;given&nbsp;by&nbsp;lines&nbsp;of&nbsp;the&nbsp;form\n&#34;</span>&nbsp;<span class="op" id="8028743">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028747">&#34;//&nbsp;+build&nbsp;tag\n&#34;</span>&nbsp;<span class="op" id="8028765">+</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="8028769">&#34;func&nbsp;shouldBuild(content&nbsp;[]byte)\n&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028807">want3</span>&nbsp;<span class="op" id="8028813">:=</span>&nbsp;<span class="keyword" id="8028816">map</span><span class="op" id="8028819">[</span><span class="builtintype" id="8028820">string</span><span class="op" id="8028826">]</span><span class="builtintype" id="8028827">bool</span><span class="op" id="8028831">{</span><span class="op" id="8028832">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028836">ctx</span>&nbsp;<span class="op" id="8028840">:=</span>&nbsp;<span class="op" id="8028843">&amp;</span><span class="ident" id="8028844"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="8028851">{</span><span class="ident" id="8028852">BuildTags</span><span class="op" id="8028861">:</span>&nbsp;<span class="op" id="8028863">[</span><span class="op" id="8028864">]</span><span class="builtintype" id="8028865">string</span><span class="op" id="8028871">{</span><span class="string" id="8028872">&#34;tag1&#34;</span><span class="op" id="8028878">}</span><span class="op" id="8028879">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028882">m</span>&nbsp;<span class="op" id="8028884">:=</span>&nbsp;<span class="keyword" id="8028887">map</span><span class="op" id="8028890">[</span><span class="builtintype" id="8028891">string</span><span class="op" id="8028897">]</span><span class="builtintype" id="8028898">bool</span><span class="op" id="8028902">{</span><span class="op" id="8028903">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8028906">if</span>&nbsp;<span class="op" id="8028909">!</span><span class="ident" id="8028910"><a href="/go/build/build_test.go.html#8028836">ctx</a></span><span class="op" id="8028913">.</span><span class="ident" id="8028914">shouldBuild</span><span class="op" id="8028925">(</span><span class="op" id="8028926">[</span><span class="op" id="8028927">]</span><span class="builtintype" id="8028928">byte</span><span class="op" id="8028932">(</span><span class="ident" id="8028933"><a href="/go/build/build_test.go.html#8028342">file1</a></span><span class="op" id="8028938">)</span><span class="op" id="8028939">,</span>&nbsp;<span class="ident" id="8028941"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8028942">)</span>&nbsp;<span class="op" id="8028944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8028948"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8028949">.</span><span class="ident" id="8028950">Errorf</span><span class="op" id="8028956">(</span><span class="string" id="8028957">&#34;shouldBuild(file1)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="8028996">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8028999">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029002">if</span>&nbsp;<span class="op" id="8029005">!</span><span class="ident" id="8029006"><a href="/go/build/build_test.go.html#8025095">reflect</a></span><span class="op" id="8029013">.</span><span class="ident" id="8029014">DeepEqual</span><span class="op" id="8029023">(</span><span class="ident" id="8029024"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029025">,</span>&nbsp;<span class="ident" id="8029027"><a href="/go/build/build_test.go.html#8028393">want1</a></span><span class="op" id="8029032">)</span>&nbsp;<span class="op" id="8029034">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029038"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8029039">.</span><span class="ident" id="8029040">Errorf</span><span class="op" id="8029046">(</span><span class="string" id="8029047">&#34;shoudBuild(file1)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8029085">,</span>&nbsp;<span class="ident" id="8029087"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029088">,</span>&nbsp;<span class="ident" id="8029090"><a href="/go/build/build_test.go.html#8028393">want1</a></span><span class="op" id="8029095">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029098">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029102"><a href="/go/build/build_test.go.html#8028882">m</a></span>&nbsp;<span class="op" id="8029104">=</span>&nbsp;<span class="keyword" id="8029106">map</span><span class="op" id="8029109">[</span><span class="builtintype" id="8029110">string</span><span class="op" id="8029116">]</span><span class="builtintype" id="8029117">bool</span><span class="op" id="8029121">{</span><span class="op" id="8029122">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029125">if</span>&nbsp;<span class="ident" id="8029128"><a href="/go/build/build_test.go.html#8028836">ctx</a></span><span class="op" id="8029131">.</span><span class="ident" id="8029132">shouldBuild</span><span class="op" id="8029143">(</span><span class="op" id="8029144">[</span><span class="op" id="8029145">]</span><span class="builtintype" id="8029146">byte</span><span class="op" id="8029150">(</span><span class="ident" id="8029151"><a href="/go/build/build_test.go.html#8028440">file2</a></span><span class="op" id="8029156">)</span><span class="op" id="8029157">,</span>&nbsp;<span class="ident" id="8029159"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029160">)</span>&nbsp;<span class="op" id="8029162">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029166"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8029167">.</span><span class="ident" id="8029168">Errorf</span><span class="op" id="8029174">(</span><span class="string" id="8029175">&#34;shouldBuild(file2)&nbsp;=&nbsp;true,&nbsp;want&nbsp;fakse&#34;</span><span class="op" id="8029214">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029220">if</span>&nbsp;<span class="op" id="8029223">!</span><span class="ident" id="8029224"><a href="/go/build/build_test.go.html#8025095">reflect</a></span><span class="op" id="8029231">.</span><span class="ident" id="8029232">DeepEqual</span><span class="op" id="8029241">(</span><span class="ident" id="8029242"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029243">,</span>&nbsp;<span class="ident" id="8029245"><a href="/go/build/build_test.go.html#8028568">want2</a></span><span class="op" id="8029250">)</span>&nbsp;<span class="op" id="8029252">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029256"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8029257">.</span><span class="ident" id="8029258">Errorf</span><span class="op" id="8029264">(</span><span class="string" id="8029265">&#34;shoudBuild(file2)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8029303">,</span>&nbsp;<span class="ident" id="8029305"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029306">,</span>&nbsp;<span class="ident" id="8029308"><a href="/go/build/build_test.go.html#8028568">want2</a></span><span class="op" id="8029313">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029316">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029320"><a href="/go/build/build_test.go.html#8028882">m</a></span>&nbsp;<span class="op" id="8029322">=</span>&nbsp;<span class="keyword" id="8029324">map</span><span class="op" id="8029327">[</span><span class="builtintype" id="8029328">string</span><span class="op" id="8029334">]</span><span class="builtintype" id="8029335">bool</span><span class="op" id="8029339">{</span><span class="op" id="8029340">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029343"><a href="/go/build/build_test.go.html#8028836">ctx</a></span>&nbsp;<span class="op" id="8029347">=</span>&nbsp;<span class="op" id="8029349">&amp;</span><span class="ident" id="8029350"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="8029357">{</span><span class="ident" id="8029358">BuildTags</span><span class="op" id="8029367">:</span>&nbsp;<span class="ident" id="8029369">nil</span><span class="op" id="8029372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029375">if</span>&nbsp;<span class="op" id="8029378">!</span><span class="ident" id="8029379"><a href="/go/build/build_test.go.html#8028836">ctx</a></span><span class="op" id="8029382">.</span><span class="ident" id="8029383">shouldBuild</span><span class="op" id="8029394">(</span><span class="op" id="8029395">[</span><span class="op" id="8029396">]</span><span class="builtintype" id="8029397">byte</span><span class="op" id="8029401">(</span><span class="ident" id="8029402"><a href="/go/build/build_test.go.html#8028614">file3</a></span><span class="op" id="8029407">)</span><span class="op" id="8029408">,</span>&nbsp;<span class="ident" id="8029410"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029411">)</span>&nbsp;<span class="op" id="8029413">{</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029417"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8029418">.</span><span class="ident" id="8029419">Errorf</span><span class="op" id="8029425">(</span><span class="string" id="8029426">&#34;shouldBuild(file3)&nbsp;=&nbsp;false,&nbsp;want&nbsp;true&#34;</span><span class="op" id="8029465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029468">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029471">if</span>&nbsp;<span class="op" id="8029474">!</span><span class="ident" id="8029475"><a href="/go/build/build_test.go.html#8025095">reflect</a></span><span class="op" id="8029482">.</span><span class="ident" id="8029483">DeepEqual</span><span class="op" id="8029492">(</span><span class="ident" id="8029493"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029494">,</span>&nbsp;<span class="ident" id="8029496"><a href="/go/build/build_test.go.html#8028807">want3</a></span><span class="op" id="8029501">)</span>&nbsp;<span class="op" id="8029503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029507"><a href="/go/build/build_test.go.html#8028319">t</a></span><span class="op" id="8029508">.</span><span class="ident" id="8029509">Errorf</span><span class="op" id="8029515">(</span><span class="string" id="8029516">&#34;shoudBuild(file3)&nbsp;tags&nbsp;=&nbsp;%v,&nbsp;want&nbsp;%v&#34;</span><span class="op" id="8029554">,</span>&nbsp;<span class="ident" id="8029556"><a href="/go/build/build_test.go.html#8028882">m</a></span><span class="op" id="8029557">,</span>&nbsp;<span class="ident" id="8029559"><a href="/go/build/build_test.go.html#8028807">want3</a></span><span class="op" id="8029564">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029567">}</span><br>
<span class="lineno">160</span><span class="op" id="8029569">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8029572">type</span>&nbsp;<span class="ident" id="8029577">readNopCloser</span>&nbsp;<span class="keyword" id="8029591">struct</span>&nbsp;<span class="op" id="8029598">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029601"><a href="/go/build/build_test.go.html#8025066">io</a></span><span class="op" id="8029603">.</span><span class="ident" id="8029604">Reader</span><br>
<span class="lineno"></span><span class="op" id="8029611">}</span><br>
<span class="lineno">165</span><br>
<span class="lineno"></span><span class="keyword" id="8029614">func</span>&nbsp;<span class="op" id="8029619">(</span><span class="ident" id="8029620">r</span>&nbsp;<span class="ident" id="8029622"><a href="/go/build/build_test.go.html#8029577">readNopCloser</a></span><span class="op" id="8029635">)</span>&nbsp;<span class="ident" id="8029637">Close</span><span class="op" id="8029642">(</span><span class="op" id="8029643">)</span>&nbsp;<span class="builtintype" id="8029645">error</span>&nbsp;<span class="op" id="8029651">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8029654">return</span>&nbsp;<span class="ident" id="8029661">nil</span><br>
<span class="lineno"></span><span class="op" id="8029665">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">170</span><span class="keyword" id="8029668">var</span>&nbsp;<span class="op" id="8029672">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029675">ctxtP9</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="8029687">=</span>&nbsp;<span class="ident" id="8029689"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="8029696">{</span><span class="ident" id="8029697">GOARCH</span><span class="op" id="8029703">:</span>&nbsp;<span class="string" id="8029705">&#34;arm&#34;</span><span class="op" id="8029710">,</span>&nbsp;<span class="ident" id="8029712">GOOS</span><span class="op" id="8029716">:</span>&nbsp;<span class="string" id="8029718">&#34;plan9&#34;</span><span class="op" id="8029725">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029728">ctxtAndroid</span>&nbsp;<span class="op" id="8029740">=</span>&nbsp;<span class="ident" id="8029742"><a href="/go/build/build.go.html#5802877">Context</a></span><span class="op" id="8029749">{</span><span class="ident" id="8029750">GOARCH</span><span class="op" id="8029756">:</span>&nbsp;<span class="string" id="8029758">&#34;arm&#34;</span><span class="op" id="8029763">,</span>&nbsp;<span class="ident" id="8029765">GOOS</span><span class="op" id="8029769">:</span>&nbsp;<span class="string" id="8029771">&#34;android&#34;</span><span class="op" id="8029780">}</span><br>
<span class="lineno"></span><span class="op" id="8029782">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span><span class="keyword" id="8029785">var</span>&nbsp;<span class="ident" id="8029789">matchFileTests</span>&nbsp;<span class="op" id="8029804">=</span>&nbsp;<span class="op" id="8029806">[</span><span class="op" id="8029807">]</span><span class="keyword" id="8029808">struct</span>&nbsp;<span class="op" id="8029815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029818">ctxt</span>&nbsp;&nbsp;<span class="ident" id="8029824"><a href="/go/build/build.go.html#5802877">Context</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029833">name</span>&nbsp;&nbsp;<span class="builtintype" id="8029839">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029847">data</span>&nbsp;&nbsp;<span class="builtintype" id="8029853">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8029861">match</span>&nbsp;<span class="builtintype" id="8029867">bool</span><br>
<span class="lineno">180</span><span class="op" id="8029872">}</span><span class="op" id="8029873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029876">{</span><span class="ident" id="8029877"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8029883">,</span>&nbsp;<span class="string" id="8029885">&#34;foo_arm.go&#34;</span><span class="op" id="8029897">,</span>&nbsp;<span class="string" id="8029899">&#34;&#34;</span><span class="op" id="8029901">,</span>&nbsp;<span class="ident" id="8029903">true</span><span class="op" id="8029907">}</span><span class="op" id="8029908">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029911">{</span><span class="ident" id="8029912"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8029918">,</span>&nbsp;<span class="string" id="8029920">&#34;foo1_arm.go&#34;</span><span class="op" id="8029933">,</span>&nbsp;<span class="string" id="8029935">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="8029970">,</span>&nbsp;<span class="ident" id="8029972">false</span><span class="op" id="8029977">}</span><span class="op" id="8029978">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8029981">{</span><span class="ident" id="8029982"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8029988">,</span>&nbsp;<span class="string" id="8029990">&#34;foo_darwin.go&#34;</span><span class="op" id="8030005">,</span>&nbsp;<span class="string" id="8030007">&#34;&#34;</span><span class="op" id="8030009">,</span>&nbsp;<span class="ident" id="8030011">false</span><span class="op" id="8030016">}</span><span class="op" id="8030017">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030020">{</span><span class="ident" id="8030021"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8030027">,</span>&nbsp;<span class="string" id="8030029">&#34;foo.go&#34;</span><span class="op" id="8030037">,</span>&nbsp;<span class="string" id="8030039">&#34;&#34;</span><span class="op" id="8030041">,</span>&nbsp;<span class="ident" id="8030043">true</span><span class="op" id="8030047">}</span><span class="op" id="8030048">,</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030051">{</span><span class="ident" id="8030052"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8030058">,</span>&nbsp;<span class="string" id="8030060">&#34;foo1.go&#34;</span><span class="op" id="8030069">,</span>&nbsp;<span class="string" id="8030071">&#34;//&nbsp;+build&nbsp;linux\n\npackage&nbsp;main\n&#34;</span><span class="op" id="8030106">,</span>&nbsp;<span class="ident" id="8030108">false</span><span class="op" id="8030113">}</span><span class="op" id="8030114">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030117">{</span><span class="ident" id="8030118"><a href="/go/build/build_test.go.html#8029675">ctxtP9</a></span><span class="op" id="8030124">,</span>&nbsp;<span class="string" id="8030126">&#34;foo.badsuffix&#34;</span><span class="op" id="8030141">,</span>&nbsp;<span class="string" id="8030143">&#34;&#34;</span><span class="op" id="8030145">,</span>&nbsp;<span class="ident" id="8030147">false</span><span class="op" id="8030152">}</span><span class="op" id="8030153">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030156">{</span><span class="ident" id="8030157"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030168">,</span>&nbsp;<span class="string" id="8030170">&#34;foo_linux.go&#34;</span><span class="op" id="8030184">,</span>&nbsp;<span class="string" id="8030186">&#34;&#34;</span><span class="op" id="8030188">,</span>&nbsp;<span class="ident" id="8030190">true</span><span class="op" id="8030194">}</span><span class="op" id="8030195">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030198">{</span><span class="ident" id="8030199"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030210">,</span>&nbsp;<span class="string" id="8030212">&#34;foo_android.go&#34;</span><span class="op" id="8030228">,</span>&nbsp;<span class="string" id="8030230">&#34;&#34;</span><span class="op" id="8030232">,</span>&nbsp;<span class="ident" id="8030234">true</span><span class="op" id="8030238">}</span><span class="op" id="8030239">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030242">{</span><span class="ident" id="8030243"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030254">,</span>&nbsp;<span class="string" id="8030256">&#34;foo_plan9.go&#34;</span><span class="op" id="8030270">,</span>&nbsp;<span class="string" id="8030272">&#34;&#34;</span><span class="op" id="8030274">,</span>&nbsp;<span class="ident" id="8030276">false</span><span class="op" id="8030281">}</span><span class="op" id="8030282">,</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030285">{</span><span class="ident" id="8030286"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030297">,</span>&nbsp;<span class="string" id="8030299">&#34;android.go&#34;</span><span class="op" id="8030311">,</span>&nbsp;<span class="string" id="8030313">&#34;&#34;</span><span class="op" id="8030315">,</span>&nbsp;<span class="ident" id="8030317">true</span><span class="op" id="8030321">}</span><span class="op" id="8030322">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030325">{</span><span class="ident" id="8030326"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030337">,</span>&nbsp;<span class="string" id="8030339">&#34;plan9.go&#34;</span><span class="op" id="8030349">,</span>&nbsp;<span class="string" id="8030351">&#34;&#34;</span><span class="op" id="8030353">,</span>&nbsp;<span class="ident" id="8030355">true</span><span class="op" id="8030359">}</span><span class="op" id="8030360">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030363">{</span><span class="ident" id="8030364"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030375">,</span>&nbsp;<span class="string" id="8030377">&#34;plan9_test.go&#34;</span><span class="op" id="8030392">,</span>&nbsp;<span class="string" id="8030394">&#34;&#34;</span><span class="op" id="8030396">,</span>&nbsp;<span class="ident" id="8030398">true</span><span class="op" id="8030402">}</span><span class="op" id="8030403">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030406">{</span><span class="ident" id="8030407"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030418">,</span>&nbsp;<span class="string" id="8030420">&#34;arm.s&#34;</span><span class="op" id="8030427">,</span>&nbsp;<span class="string" id="8030429">&#34;&#34;</span><span class="op" id="8030431">,</span>&nbsp;<span class="ident" id="8030433">true</span><span class="op" id="8030437">}</span><span class="op" id="8030438">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030441">{</span><span class="ident" id="8030442"><a href="/go/build/build_test.go.html#8029728">ctxtAndroid</a></span><span class="op" id="8030453">,</span>&nbsp;<span class="string" id="8030455">&#34;amd64.s&#34;</span><span class="op" id="8030464">,</span>&nbsp;<span class="string" id="8030466">&#34;&#34;</span><span class="op" id="8030468">,</span>&nbsp;<span class="ident" id="8030470">true</span><span class="op" id="8030474">}</span><span class="op" id="8030475">,</span><br>
<span class="lineno">195</span><span class="op" id="8030477">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="8030480">func</span>&nbsp;<span class="ident" id="8030485">TestMatchFile</span><span class="op" id="8030498">(</span><span class="ident" id="8030499">t</span>&nbsp;<span class="op" id="8030501">*</span><span class="ident" id="8030502"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8030509">.</span><span class="ident" id="8030510">T</span><span class="op" id="8030511">)</span>&nbsp;<span class="op" id="8030513">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030516">for</span>&nbsp;<span class="ident" id="8030520">_</span><span class="op" id="8030521">,</span>&nbsp;<span class="ident" id="8030523">tt</span>&nbsp;<span class="op" id="8030526">:=</span>&nbsp;<span class="keyword" id="8030529">range</span>&nbsp;<span class="ident" id="8030535"><a href="/go/build/build_test.go.html#8029789">matchFileTests</a></span>&nbsp;<span class="op" id="8030550">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030554">ctxt</span>&nbsp;<span class="op" id="8030559">:=</span>&nbsp;<span class="ident" id="8030562"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030564">.</span><span class="ident" id="8030565">ctxt</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030572"><a href="/go/build/build_test.go.html#8030554">ctxt</a></span><span class="op" id="8030576">.</span><span class="ident" id="8030577">OpenFile</span>&nbsp;<span class="op" id="8030586">=</span>&nbsp;<span class="keyword" id="8030588">func</span><span class="op" id="8030592">(</span><span class="ident" id="8030593">path</span>&nbsp;<span class="builtintype" id="8030598">string</span><span class="op" id="8030604">)</span>&nbsp;<span class="op" id="8030606">(</span><span class="ident" id="8030607">r</span>&nbsp;<span class="ident" id="8030609"><a href="/go/build/build_test.go.html#8025066">io</a></span><span class="op" id="8030611">.</span><span class="ident" id="8030612">ReadCloser</span><span class="op" id="8030622">,</span>&nbsp;<span class="ident" id="8030624">err</span>&nbsp;<span class="builtintype" id="8030628">error</span><span class="op" id="8030633">)</span>&nbsp;<span class="op" id="8030635">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030640">if</span>&nbsp;<span class="ident" id="8030643"><a href="/go/build/build_test.go.html#8030593">path</a></span>&nbsp;<span class="op" id="8030648">!=</span>&nbsp;<span class="string" id="8030651">&#34;x+&#34;</span><span class="op" id="8030655">+</span><span class="ident" id="8030656"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030658">.</span><span class="ident" id="8030659">name</span>&nbsp;<span class="op" id="8030664">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030670"><a href="/go/build/build_test.go.html#8030499">t</a></span><span class="op" id="8030671">.</span><span class="ident" id="8030672">Fatalf</span><span class="op" id="8030678">(</span><span class="string" id="8030679">&#34;OpenFile&nbsp;asked&nbsp;for&nbsp;%q,&nbsp;expected&nbsp;%q&#34;</span><span class="op" id="8030715">,</span>&nbsp;<span class="ident" id="8030717"><a href="/go/build/build_test.go.html#8030593">path</a></span><span class="op" id="8030721">,</span>&nbsp;<span class="string" id="8030723">&#34;x+&#34;</span><span class="op" id="8030727">+</span><span class="ident" id="8030728"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030730">.</span><span class="ident" id="8030731">name</span><span class="op" id="8030735">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030745">return</span>&nbsp;<span class="op" id="8030752">&amp;</span><span class="ident" id="8030753"><a href="/go/build/build_test.go.html#8029577">readNopCloser</a></span><span class="op" id="8030766">{</span><span class="ident" id="8030767"><a href="/go/build/build_test.go.html#8025117">strings</a></span><span class="op" id="8030774">.</span><span class="ident" id="8030775">NewReader</span><span class="op" id="8030784">(</span><span class="ident" id="8030785"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030787">.</span><span class="ident" id="8030788">data</span><span class="op" id="8030792">)</span><span class="op" id="8030793">}</span><span class="op" id="8030794">,</span>&nbsp;<span class="ident" id="8030796">nil</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030802">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030806"><a href="/go/build/build_test.go.html#8030554">ctxt</a></span><span class="op" id="8030810">.</span><span class="ident" id="8030811">JoinPath</span>&nbsp;<span class="op" id="8030820">=</span>&nbsp;<span class="keyword" id="8030822">func</span><span class="op" id="8030826">(</span><span class="ident" id="8030827">elem</span>&nbsp;<span class="op" id="8030832">...</span><span class="builtintype" id="8030835">string</span><span class="op" id="8030841">)</span>&nbsp;<span class="builtintype" id="8030843">string</span>&nbsp;<span class="op" id="8030850">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030855">return</span>&nbsp;<span class="ident" id="8030862"><a href="/go/build/build_test.go.html#8025117">strings</a></span><span class="op" id="8030869">.</span><span class="ident" id="8030870">Join</span><span class="op" id="8030874">(</span><span class="ident" id="8030875"><a href="/go/build/build_test.go.html#8030827">elem</a></span><span class="op" id="8030879">,</span>&nbsp;<span class="string" id="8030881">&#34;+&#34;</span><span class="op" id="8030884">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8030888">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030892">match</span><span class="op" id="8030897">,</span>&nbsp;<span class="ident" id="8030899">err</span>&nbsp;<span class="op" id="8030903">:=</span>&nbsp;<span class="ident" id="8030906"><a href="/go/build/build_test.go.html#8030554">ctxt</a></span><span class="op" id="8030910">.</span><span class="ident" id="8030911">MatchFile</span><span class="op" id="8030920">(</span><span class="string" id="8030921">&#34;x&#34;</span><span class="op" id="8030924">,</span>&nbsp;<span class="ident" id="8030926"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030928">.</span><span class="ident" id="8030929">name</span><span class="op" id="8030933">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8030937">if</span>&nbsp;<span class="ident" id="8030940"><a href="/go/build/build_test.go.html#8030892">match</a></span>&nbsp;<span class="op" id="8030946">!=</span>&nbsp;<span class="ident" id="8030949"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8030951">.</span><span class="ident" id="8030952">match</span>&nbsp;<span class="op" id="8030958">||</span>&nbsp;<span class="ident" id="8030961"><a href="/go/build/build_test.go.html#8030899">err</a></span>&nbsp;<span class="op" id="8030965">!=</span>&nbsp;<span class="ident" id="8030968">nil</span>&nbsp;<span class="op" id="8030972">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8030977"><a href="/go/build/build_test.go.html#8030499">t</a></span><span class="op" id="8030978">.</span><span class="ident" id="8030979">Fatalf</span><span class="op" id="8030985">(</span><span class="string" id="8030986">&#34;MatchFile(%q)&nbsp;=&nbsp;%v,&nbsp;%v,&nbsp;want&nbsp;%v,&nbsp;nil&#34;</span><span class="op" id="8031024">,</span>&nbsp;<span class="ident" id="8031026"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8031028">.</span><span class="ident" id="8031029">name</span><span class="op" id="8031033">,</span>&nbsp;<span class="ident" id="8031035"><a href="/go/build/build_test.go.html#8030892">match</a></span><span class="op" id="8031040">,</span>&nbsp;<span class="ident" id="8031042"><a href="/go/build/build_test.go.html#8030899">err</a></span><span class="op" id="8031045">,</span>&nbsp;<span class="ident" id="8031047"><a href="/go/build/build_test.go.html#8030523">tt</a></span><span class="op" id="8031049">.</span><span class="ident" id="8031050">match</span><span class="op" id="8031055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031059">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031062">}</span><br>
<span class="lineno"></span><span class="op" id="8031064">}</span><br>
<span class="lineno">215</span><br>
<span class="lineno"></span><span class="keyword" id="8031067">func</span>&nbsp;<span class="ident" id="8031072">TestImportCmd</span><span class="op" id="8031085">(</span><span class="ident" id="8031086">t</span>&nbsp;<span class="op" id="8031088">*</span><span class="ident" id="8031089"><a href="/go/build/build_test.go.html#8025128">testing</a></span><span class="op" id="8031096">.</span><span class="ident" id="8031097">T</span><span class="op" id="8031098">)</span>&nbsp;<span class="op" id="8031100">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031103">p</span><span class="op" id="8031104">,</span>&nbsp;<span class="ident" id="8031106">err</span>&nbsp;<span class="op" id="8031110">:=</span>&nbsp;<span class="ident" id="8031113"><a href="/go/build/build.go.html#5831149">Import</a></span><span class="op" id="8031119">(</span><span class="string" id="8031120">&#34;cmd/internal/objfile&#34;</span><span class="op" id="8031142">,</span>&nbsp;<span class="string" id="8031144">&#34;&#34;</span><span class="op" id="8031146">,</span>&nbsp;<span class="num" id="8031148">0</span><span class="op" id="8031149">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031152">if</span>&nbsp;<span class="ident" id="8031155"><a href="/go/build/build_test.go.html#8031106">err</a></span>&nbsp;<span class="op" id="8031159">!=</span>&nbsp;<span class="ident" id="8031162">nil</span>&nbsp;<span class="op" id="8031166">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031170"><a href="/go/build/build_test.go.html#8031086">t</a></span><span class="op" id="8031171">.</span><span class="ident" id="8031172">Fatal</span><span class="op" id="8031177">(</span><span class="ident" id="8031178"><a href="/go/build/build_test.go.html#8031106">err</a></span><span class="op" id="8031181">)</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031184">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="8031187">if</span>&nbsp;<span class="op" id="8031190">!</span><span class="ident" id="8031191"><a href="/go/build/build_test.go.html#8025117">strings</a></span><span class="op" id="8031198">.</span><span class="ident" id="8031199">HasSuffix</span><span class="op" id="8031208">(</span><span class="ident" id="8031209"><a href="/go/build/build_test.go.html#8025078">filepath</a></span><span class="op" id="8031217">.</span><span class="ident" id="8031218">ToSlash</span><span class="op" id="8031225">(</span><span class="ident" id="8031226"><a href="/go/build/build_test.go.html#8031103">p</a></span><span class="op" id="8031227">.</span><span class="ident" id="8031228">Dir</span><span class="op" id="8031231">)</span><span class="op" id="8031232">,</span>&nbsp;<span class="string" id="8031234">&#34;src/cmd/internal/objfile&#34;</span><span class="op" id="8031260">)</span>&nbsp;<span class="op" id="8031262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="8031266"><a href="/go/build/build_test.go.html#8031086">t</a></span><span class="op" id="8031267">.</span><span class="ident" id="8031268">Fatalf</span><span class="op" id="8031274">(</span><span class="string" id="8031275">&#34;Import&nbsp;cmd/internal/objfile&nbsp;returned&nbsp;Dir=%q,&nbsp;want&nbsp;%q&#34;</span><span class="op" id="8031329">,</span>&nbsp;<span class="ident" id="8031331"><a href="/go/build/build_test.go.html#8025078">filepath</a></span><span class="op" id="8031339">.</span><span class="ident" id="8031340">ToSlash</span><span class="op" id="8031347">(</span><span class="ident" id="8031348"><a href="/go/build/build_test.go.html#8031103">p</a></span><span class="op" id="8031349">.</span><span class="ident" id="8031350">Dir</span><span class="op" id="8031353">)</span><span class="op" id="8031354">,</span>&nbsp;<span class="string" id="8031356">&#34;.../src/cmd/internal/objfile&#34;</span><span class="op" id="8031386">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="8031389">}</span><br>
<span class="lineno"></span><span class="op" id="8031391">}</span>
</div>
</body>
</html>
