<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>debug/gosym</h2>
<ul>
<li><a href="/gostd/debug/gosym/pclntab.go.html" class="current">pclntab.go</a></li>
<li><a href="/gostd/debug/gosym/pclntab_test.go.html">pclntab_test.go</a></li>
<li><a href="/gostd/debug/gosym/symtab.go.html">symtab.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="4716395">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="4716451">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="4716505">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="4716556">/*<br>
<span class="lineno"></span>&nbsp;*&nbsp;Line&nbsp;tables<br>
<span class="lineno"></span>&nbsp;*/</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4716579">package</span>&nbsp;<span class="ident" id="4716587">gosym</span><br>
<span class="lineno">10</span><br>
<span class="lineno"></span><span class="keyword" id="4716594">import</span>&nbsp;<span class="op" id="4716601">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4716604">&#34;encoding/binary&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="4716623">&#34;sync&#34;</span><br>
<span class="lineno"></span><span class="op" id="4716630">)</span><br>
<span class="lineno">15</span><br>
<span class="lineno"></span><span class="comment" id="4716633">//&nbsp;A&nbsp;LineTable&nbsp;is&nbsp;a&nbsp;data&nbsp;structure&nbsp;mapping&nbsp;program&nbsp;counters&nbsp;to&nbsp;line&nbsp;numbers.</span><br>
<span class="lineno"></span><span class="comment" id="4716710">//</span><br>
<span class="lineno"></span><span class="comment" id="4716713">//&nbsp;In&nbsp;Go&nbsp;1.1&nbsp;and&nbsp;earlier,&nbsp;each&nbsp;function&nbsp;(represented&nbsp;by&nbsp;a&nbsp;Func)&nbsp;had&nbsp;its&nbsp;own&nbsp;LineTable,</span><br>
<span class="lineno"></span><span class="comment" id="4716800">//&nbsp;and&nbsp;the&nbsp;line&nbsp;number&nbsp;corresponded&nbsp;to&nbsp;a&nbsp;numbering&nbsp;of&nbsp;all&nbsp;source&nbsp;lines&nbsp;in&nbsp;the</span><br>
<span class="lineno">20</span><span class="comment" id="4716878">//&nbsp;program,&nbsp;across&nbsp;all&nbsp;files.&nbsp;That&nbsp;absolute&nbsp;line&nbsp;number&nbsp;would&nbsp;then&nbsp;have&nbsp;to&nbsp;be</span><br>
<span class="lineno"></span><span class="comment" id="4716956">//&nbsp;converted&nbsp;separately&nbsp;to&nbsp;a&nbsp;file&nbsp;name&nbsp;and&nbsp;line&nbsp;number&nbsp;within&nbsp;the&nbsp;file.</span><br>
<span class="lineno"></span><span class="comment" id="4717028">//</span><br>
<span class="lineno"></span><span class="comment" id="4717031">//&nbsp;In&nbsp;Go&nbsp;1.2,&nbsp;the&nbsp;format&nbsp;of&nbsp;the&nbsp;data&nbsp;changed&nbsp;so&nbsp;that&nbsp;there&nbsp;is&nbsp;a&nbsp;single&nbsp;LineTable</span><br>
<span class="lineno"></span><span class="comment" id="4717112">//&nbsp;for&nbsp;the&nbsp;entire&nbsp;program,&nbsp;shared&nbsp;by&nbsp;all&nbsp;Funcs,&nbsp;and&nbsp;there&nbsp;are&nbsp;no&nbsp;absolute&nbsp;line</span><br>
<span class="lineno">25</span><span class="comment" id="4717191">//&nbsp;numbers,&nbsp;just&nbsp;line&nbsp;numbers&nbsp;within&nbsp;specific&nbsp;files.</span><br>
<span class="lineno"></span><span class="comment" id="4717244">//</span><br>
<span class="lineno"></span><span class="comment" id="4717247">//&nbsp;For&nbsp;the&nbsp;most&nbsp;part,&nbsp;LineTable&#39;s&nbsp;methods&nbsp;should&nbsp;be&nbsp;treated&nbsp;as&nbsp;an&nbsp;internal</span><br>
<span class="lineno"></span><span class="comment" id="4717322">//&nbsp;detail&nbsp;of&nbsp;the&nbsp;package;&nbsp;callers&nbsp;should&nbsp;use&nbsp;the&nbsp;methods&nbsp;on&nbsp;Table&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="4717397">type</span>&nbsp;<span class="ident" id="4717402">LineTable</span>&nbsp;<span class="keyword" id="4717412">struct</span>&nbsp;<span class="op" id="4717419">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717422">Data</span>&nbsp;<span class="op" id="4717427">[</span><span class="op" id="4717428">]</span><span class="builtintype" id="4717429">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717435">PC</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4717440">uint64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717448">Line</span>&nbsp;<span class="builtintype" id="4717453">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4717459">//&nbsp;Go&nbsp;1.2&nbsp;state</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717476">mu</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717485">sync</span><span class="op" id="4717489">.</span><span class="ident" id="4717490">Mutex</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717497">go12</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="4717506">int</span>&nbsp;<span class="comment" id="4717510">//&nbsp;is&nbsp;this&nbsp;in&nbsp;Go&nbsp;1.2&nbsp;format?&nbsp;-1&nbsp;no,&nbsp;0&nbsp;unknown,&nbsp;1&nbsp;yes</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717564">binary</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4717573">binary</span><span class="op" id="4717579">.</span><span class="ident" id="4717580">ByteOrder</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717591">quantum</span>&nbsp;&nbsp;<span class="builtintype" id="4717600">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717608">ptrsize</span>&nbsp;&nbsp;<span class="builtintype" id="4717617">uint32</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717625">functab</span>&nbsp;&nbsp;<span class="op" id="4717634">[</span><span class="op" id="4717635">]</span><span class="builtintype" id="4717636">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717642">nfunctab</span>&nbsp;<span class="builtintype" id="4717651">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717659">filetab</span>&nbsp;&nbsp;<span class="op" id="4717668">[</span><span class="op" id="4717669">]</span><span class="builtintype" id="4717670">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717676">nfiletab</span>&nbsp;<span class="builtintype" id="4717685">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4717693">fileMap</span>&nbsp;&nbsp;<span class="keyword" id="4717702">map</span><span class="op" id="4717705">[</span><span class="builtintype" id="4717706">string</span><span class="op" id="4717712">]</span><span class="builtintype" id="4717713">uint32</span><br>
<span class="lineno">45</span><span class="op" id="4717720">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4717723">//&nbsp;NOTE(rsc):&nbsp;This&nbsp;is&nbsp;wrong&nbsp;for&nbsp;GOARCH=arm,&nbsp;which&nbsp;uses&nbsp;a&nbsp;quantum&nbsp;of&nbsp;4,</span><br>
<span class="lineno"></span><span class="comment" id="4717794">//&nbsp;but&nbsp;we&nbsp;have&nbsp;no&nbsp;idea&nbsp;whether&nbsp;we&#39;re&nbsp;using&nbsp;arm&nbsp;or&nbsp;not.&nbsp;This&nbsp;only</span><br>
<span class="lineno"></span><span class="comment" id="4717859">//&nbsp;matters&nbsp;in&nbsp;the&nbsp;old&nbsp;(pre-Go&nbsp;1.2)&nbsp;symbol&nbsp;table&nbsp;format,&nbsp;so&nbsp;it&#39;s&nbsp;not&nbsp;worth</span><br>
<span class="lineno">50</span><span class="comment" id="4717933">//&nbsp;fixing.</span><br>
<span class="lineno"></span><span class="keyword" id="4717944">const</span>&nbsp;<span class="ident" id="4717950">oldQuantum</span>&nbsp;<span class="op" id="4717961">=</span>&nbsp;<span class="num" id="4717963">1</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4717966">func</span>&nbsp;<span class="op" id="4717971">(</span><span class="ident" id="4717972">t</span>&nbsp;<span class="op" id="4717974">*</span><span class="ident" id="4717975">LineTable</span><span class="op" id="4717984">)</span>&nbsp;<span class="ident" id="4717986">parse</span><span class="op" id="4717991">(</span><span class="ident" id="4717992">targetPC</span>&nbsp;<span class="ident" id="4718001">uint64</span><span class="op" id="4718007">,</span>&nbsp;<span class="ident" id="4718009">targetLine</span>&nbsp;<span class="builtintype" id="4718020">int</span><span class="op" id="4718023">)</span>&nbsp;<span class="op" id="4718025">(</span><span class="ident" id="4718026">b</span>&nbsp;<span class="op" id="4718028">[</span><span class="op" id="4718029">]</span><span class="builtintype" id="4718030">byte</span><span class="op" id="4718034">,</span>&nbsp;<span class="ident" id="4718036">pc</span>&nbsp;<span class="ident" id="4718039">uint64</span><span class="op" id="4718045">,</span>&nbsp;<span class="ident" id="4718047">line</span>&nbsp;<span class="builtintype" id="4718052">int</span><span class="op" id="4718055">)</span>&nbsp;<span class="op" id="4718057">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718060">//&nbsp;The&nbsp;PC/line&nbsp;table&nbsp;can&nbsp;be&nbsp;thought&nbsp;of&nbsp;as&nbsp;a&nbsp;sequence&nbsp;of</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718117">//&nbsp;&nbsp;&lt;pc&nbsp;update&gt;*&nbsp;&lt;line&nbsp;update&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718149">//&nbsp;batches.&nbsp;&nbsp;Each&nbsp;update&nbsp;batch&nbsp;results&nbsp;in&nbsp;a&nbsp;(pc,&nbsp;line)&nbsp;pair,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718211">//&nbsp;where&nbsp;line&nbsp;applies&nbsp;to&nbsp;every&nbsp;PC&nbsp;from&nbsp;pc&nbsp;up&nbsp;to&nbsp;but&nbsp;not</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718268">//&nbsp;including&nbsp;the&nbsp;pc&nbsp;of&nbsp;the&nbsp;next&nbsp;pair.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718307">//</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718311">//&nbsp;Here&nbsp;we&nbsp;process&nbsp;each&nbsp;update&nbsp;individually,&nbsp;which&nbsp;simplifies</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4718374">//&nbsp;the&nbsp;code,&nbsp;but&nbsp;makes&nbsp;the&nbsp;corner&nbsp;cases&nbsp;more&nbsp;confusing.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718431">b</span><span class="op" id="4718432">,</span>&nbsp;<span class="ident" id="4718434">pc</span><span class="op" id="4718436">,</span>&nbsp;<span class="ident" id="4718438">line</span>&nbsp;<span class="op" id="4718443">=</span>&nbsp;<span class="ident" id="4718445">t</span><span class="op" id="4718446">.</span><span class="ident" id="4718447">Data</span><span class="op" id="4718451">,</span>&nbsp;<span class="ident" id="4718453">t</span><span class="op" id="4718454">.</span><span class="ident" id="4718455">PC</span><span class="op" id="4718457">,</span>&nbsp;<span class="ident" id="4718459">t</span><span class="op" id="4718460">.</span><span class="ident" id="4718461">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718467">for</span>&nbsp;<span class="ident" id="4718471">pc</span>&nbsp;<span class="op" id="4718474">&lt;=</span>&nbsp;<span class="ident" id="4718477">targetPC</span>&nbsp;<span class="op" id="4718486">&amp;&amp;</span>&nbsp;<span class="ident" id="4718489">line</span>&nbsp;<span class="op" id="4718494">!=</span>&nbsp;<span class="ident" id="4718497">targetLine</span>&nbsp;<span class="op" id="4718508">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="4718511">len</span><span class="op" id="4718514">(</span><span class="ident" id="4718515">b</span><span class="op" id="4718516">)</span>&nbsp;<span class="op" id="4718518">&gt;</span>&nbsp;<span class="num" id="4718520">0</span>&nbsp;<span class="op" id="4718522">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718526">code</span>&nbsp;<span class="op" id="4718531">:=</span>&nbsp;<span class="ident" id="4718534">b</span><span class="op" id="4718535">[</span><span class="num" id="4718536">0</span><span class="op" id="4718537">]</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718541">b</span>&nbsp;<span class="op" id="4718543">=</span>&nbsp;<span class="ident" id="4718545">b</span><span class="op" id="4718546">[</span><span class="num" id="4718547">1</span><span class="op" id="4718548">:</span><span class="op" id="4718549">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718553">switch</span>&nbsp;<span class="op" id="4718560">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718564">case</span>&nbsp;<span class="ident" id="4718569">code</span>&nbsp;<span class="op" id="4718574">==</span>&nbsp;<span class="num" id="4718577">0</span><span class="op" id="4718578">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718583">if</span>&nbsp;<span class="builtinfunc" id="4718586">len</span><span class="op" id="4718589">(</span><span class="ident" id="4718590">b</span><span class="op" id="4718591">)</span>&nbsp;<span class="op" id="4718593">&lt;</span>&nbsp;<span class="num" id="4718595">4</span>&nbsp;<span class="op" id="4718597">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718603">b</span>&nbsp;<span class="op" id="4718605">=</span>&nbsp;<span class="ident" id="4718607">b</span><span class="op" id="4718608">[</span><span class="num" id="4718609">0</span><span class="op" id="4718610">:</span><span class="num" id="4718611">0</span><span class="op" id="4718612">]</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718618">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4718627">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718632">val</span>&nbsp;<span class="op" id="4718636">:=</span>&nbsp;<span class="ident" id="4718639">binary</span><span class="op" id="4718645">.</span><span class="ident" id="4718646">BigEndian</span><span class="op" id="4718655">.</span><span class="ident" id="4718656">Uint32</span><span class="op" id="4718662">(</span><span class="ident" id="4718663">b</span><span class="op" id="4718664">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718669">b</span>&nbsp;<span class="op" id="4718671">=</span>&nbsp;<span class="ident" id="4718673">b</span><span class="op" id="4718674">[</span><span class="num" id="4718675">4</span><span class="op" id="4718676">:</span><span class="op" id="4718677">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718682">line</span>&nbsp;<span class="op" id="4718687">+=</span>&nbsp;<span class="builtintype" id="4718690">int</span><span class="op" id="4718693">(</span><span class="ident" id="4718694">val</span><span class="op" id="4718697">)</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718701">case</span>&nbsp;<span class="ident" id="4718706">code</span>&nbsp;<span class="op" id="4718711">&lt;=</span>&nbsp;<span class="num" id="4718714">64</span><span class="op" id="4718716">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718721">line</span>&nbsp;<span class="op" id="4718726">+=</span>&nbsp;<span class="builtintype" id="4718729">int</span><span class="op" id="4718732">(</span><span class="ident" id="4718733">code</span><span class="op" id="4718737">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718741">case</span>&nbsp;<span class="ident" id="4718746">code</span>&nbsp;<span class="op" id="4718751">&lt;=</span>&nbsp;<span class="num" id="4718754">128</span><span class="op" id="4718757">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718762">line</span>&nbsp;<span class="op" id="4718767">-=</span>&nbsp;<span class="builtintype" id="4718770">int</span><span class="op" id="4718773">(</span><span class="ident" id="4718774">code</span>&nbsp;<span class="op" id="4718779">-</span>&nbsp;<span class="num" id="4718781">64</span><span class="op" id="4718783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718787">default</span><span class="op" id="4718794">:</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718799">pc</span>&nbsp;<span class="op" id="4718802">+=</span>&nbsp;<span class="ident" id="4718805">oldQuantum</span>&nbsp;<span class="op" id="4718816">*</span>&nbsp;<span class="ident" id="4718818">uint64</span><span class="op" id="4718824">(</span><span class="ident" id="4718825">code</span><span class="op" id="4718829">-</span><span class="num" id="4718830">128</span><span class="op" id="4718833">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718838">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4718849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718853">pc</span>&nbsp;<span class="op" id="4718856">+=</span>&nbsp;<span class="ident" id="4718859">oldQuantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4718871">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718874">return</span>&nbsp;<span class="ident" id="4718881">b</span><span class="op" id="4718882">,</span>&nbsp;<span class="ident" id="4718884">pc</span><span class="op" id="4718886">,</span>&nbsp;<span class="ident" id="4718888">line</span><br>
<span class="lineno"></span><span class="op" id="4718893">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4718896">func</span>&nbsp;<span class="op" id="4718901">(</span><span class="ident" id="4718902">t</span>&nbsp;<span class="op" id="4718904">*</span><span class="ident" id="4718905">LineTable</span><span class="op" id="4718914">)</span>&nbsp;<span class="ident" id="4718916">slice</span><span class="op" id="4718921">(</span><span class="ident" id="4718922">pc</span>&nbsp;<span class="ident" id="4718925">uint64</span><span class="op" id="4718931">)</span>&nbsp;<span class="op" id="4718933">*</span><span class="ident" id="4718934">LineTable</span>&nbsp;<span class="op" id="4718944">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4718947">data</span><span class="op" id="4718951">,</span>&nbsp;<span class="ident" id="4718953">pc</span><span class="op" id="4718955">,</span>&nbsp;<span class="ident" id="4718957">line</span>&nbsp;<span class="op" id="4718962">:=</span>&nbsp;<span class="ident" id="4718965">t</span><span class="op" id="4718966">.</span><span class="ident" id="4718967">parse</span><span class="op" id="4718972">(</span><span class="ident" id="4718973">pc</span><span class="op" id="4718975">,</span>&nbsp;<span class="op" id="4718977">-</span><span class="num" id="4718978">1</span><span class="op" id="4718979">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4718982">return</span>&nbsp;<span class="op" id="4718989">&amp;</span><span class="ident" id="4718990">LineTable</span><span class="op" id="4718999">{</span><span class="ident" id="4719000">Data</span><span class="op" id="4719004">:</span>&nbsp;<span class="ident" id="4719006">data</span><span class="op" id="4719010">,</span>&nbsp;<span class="ident" id="4719012">PC</span><span class="op" id="4719014">:</span>&nbsp;<span class="ident" id="4719016">pc</span><span class="op" id="4719018">,</span>&nbsp;<span class="ident" id="4719020">Line</span><span class="op" id="4719024">:</span>&nbsp;<span class="ident" id="4719026">line</span><span class="op" id="4719030">}</span><br>
<span class="lineno"></span><span class="op" id="4719032">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4719035">//&nbsp;PCToLine&nbsp;returns&nbsp;the&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="comment" id="4719102">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;PCToLine&nbsp;method&nbsp;instead.</span><br>
<span class="lineno">95</span><span class="keyword" id="4719157">func</span>&nbsp;<span class="op" id="4719162">(</span><span class="ident" id="4719163">t</span>&nbsp;<span class="op" id="4719165">*</span><span class="ident" id="4719166">LineTable</span><span class="op" id="4719175">)</span>&nbsp;<span class="ident" id="4719177">PCToLine</span><span class="op" id="4719185">(</span><span class="ident" id="4719186">pc</span>&nbsp;<span class="ident" id="4719189">uint64</span><span class="op" id="4719195">)</span>&nbsp;<span class="builtintype" id="4719197">int</span>&nbsp;<span class="op" id="4719201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719204">if</span>&nbsp;<span class="ident" id="4719207">t</span><span class="op" id="4719208">.</span><span class="ident" id="4719209">isGo12</span><span class="op" id="4719215">(</span><span class="op" id="4719216">)</span>&nbsp;<span class="op" id="4719218">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719222">return</span>&nbsp;<span class="ident" id="4719229">t</span><span class="op" id="4719230">.</span><span class="ident" id="4719231">go12PCToLine</span><span class="op" id="4719243">(</span><span class="ident" id="4719244">pc</span><span class="op" id="4719246">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4719249">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4719252">_</span><span class="op" id="4719253">,</span>&nbsp;<span class="ident" id="4719255">_</span><span class="op" id="4719256">,</span>&nbsp;<span class="ident" id="4719258">line</span>&nbsp;<span class="op" id="4719263">:=</span>&nbsp;<span class="ident" id="4719266">t</span><span class="op" id="4719267">.</span><span class="ident" id="4719268">parse</span><span class="op" id="4719273">(</span><span class="ident" id="4719274">pc</span><span class="op" id="4719276">,</span>&nbsp;<span class="op" id="4719278">-</span><span class="num" id="4719279">1</span><span class="op" id="4719280">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719283">return</span>&nbsp;<span class="ident" id="4719290">line</span><br>
<span class="lineno"></span><span class="op" id="4719295">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4719298">//&nbsp;LineToPC&nbsp;returns&nbsp;the&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;given&nbsp;line&nbsp;number,</span><br>
<span class="lineno"></span><span class="comment" id="4719365">//&nbsp;considering&nbsp;only&nbsp;program&nbsp;counters&nbsp;before&nbsp;maxpc.</span><br>
<span class="lineno">105</span><span class="comment" id="4719416">//&nbsp;Callers&nbsp;should&nbsp;use&nbsp;Table&#39;s&nbsp;LineToPC&nbsp;method&nbsp;instead.</span><br>
<span class="lineno"></span><span class="keyword" id="4719471">func</span>&nbsp;<span class="op" id="4719476">(</span><span class="ident" id="4719477">t</span>&nbsp;<span class="op" id="4719479">*</span><span class="ident" id="4719480">LineTable</span><span class="op" id="4719489">)</span>&nbsp;<span class="ident" id="4719491">LineToPC</span><span class="op" id="4719499">(</span><span class="ident" id="4719500">line</span>&nbsp;<span class="builtintype" id="4719505">int</span><span class="op" id="4719508">,</span>&nbsp;<span class="ident" id="4719510">maxpc</span>&nbsp;<span class="ident" id="4719516">uint64</span><span class="op" id="4719522">)</span>&nbsp;<span class="ident" id="4719524">uint64</span>&nbsp;<span class="op" id="4719531">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719534">if</span>&nbsp;<span class="ident" id="4719537">t</span><span class="op" id="4719538">.</span><span class="ident" id="4719539">isGo12</span><span class="op" id="4719545">(</span><span class="op" id="4719546">)</span>&nbsp;<span class="op" id="4719548">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719552">return</span>&nbsp;<span class="num" id="4719559">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4719562">}</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4719565">_</span><span class="op" id="4719566">,</span>&nbsp;<span class="ident" id="4719568">pc</span><span class="op" id="4719570">,</span>&nbsp;<span class="ident" id="4719572">line1</span>&nbsp;<span class="op" id="4719578">:=</span>&nbsp;<span class="ident" id="4719581">t</span><span class="op" id="4719582">.</span><span class="ident" id="4719583">parse</span><span class="op" id="4719588">(</span><span class="ident" id="4719589">maxpc</span><span class="op" id="4719594">,</span>&nbsp;<span class="ident" id="4719596">line</span><span class="op" id="4719600">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719603">if</span>&nbsp;<span class="ident" id="4719606">line1</span>&nbsp;<span class="op" id="4719612">!=</span>&nbsp;<span class="ident" id="4719615">line</span>&nbsp;<span class="op" id="4719620">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719624">return</span>&nbsp;<span class="num" id="4719631">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4719634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4719637">//&nbsp;Subtract&nbsp;quantum&nbsp;from&nbsp;PC&nbsp;to&nbsp;account&nbsp;for&nbsp;post-line&nbsp;increment</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719701">return</span>&nbsp;<span class="ident" id="4719708">pc</span>&nbsp;<span class="op" id="4719711">-</span>&nbsp;<span class="ident" id="4719713">oldQuantum</span><br>
<span class="lineno"></span><span class="op" id="4719724">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4719727">//&nbsp;NewLineTable&nbsp;returns&nbsp;a&nbsp;new&nbsp;PC/line&nbsp;table</span><br>
<span class="lineno"></span><span class="comment" id="4719771">//&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;encoded&nbsp;data.</span><br>
<span class="lineno">120</span><span class="comment" id="4719809">//&nbsp;Text&nbsp;must&nbsp;be&nbsp;the&nbsp;start&nbsp;address&nbsp;of&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4719850">//&nbsp;corresponding&nbsp;text&nbsp;segment.</span><br>
<span class="lineno"></span><span class="keyword" id="4719881">func</span>&nbsp;<span class="ident" id="4719886">NewLineTable</span><span class="op" id="4719898">(</span><span class="ident" id="4719899">data</span>&nbsp;<span class="op" id="4719904">[</span><span class="op" id="4719905">]</span><span class="builtintype" id="4719906">byte</span><span class="op" id="4719910">,</span>&nbsp;<span class="ident" id="4719912">text</span>&nbsp;<span class="ident" id="4719917">uint64</span><span class="op" id="4719923">)</span>&nbsp;<span class="op" id="4719925">*</span><span class="ident" id="4719926">LineTable</span>&nbsp;<span class="op" id="4719936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4719939">return</span>&nbsp;<span class="op" id="4719946">&amp;</span><span class="ident" id="4719947">LineTable</span><span class="op" id="4719956">{</span><span class="ident" id="4719957">Data</span><span class="op" id="4719961">:</span>&nbsp;<span class="ident" id="4719963">data</span><span class="op" id="4719967">,</span>&nbsp;<span class="ident" id="4719969">PC</span><span class="op" id="4719971">:</span>&nbsp;<span class="ident" id="4719973">text</span><span class="op" id="4719977">,</span>&nbsp;<span class="ident" id="4719979">Line</span><span class="op" id="4719983">:</span>&nbsp;<span class="num" id="4719985">0</span><span class="op" id="4719986">}</span><br>
<span class="lineno"></span><span class="op" id="4719988">}</span><br>
<span class="lineno">125</span><br>
<span class="lineno"></span><span class="comment" id="4719991">//&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table&nbsp;format.</span><br>
<span class="lineno"></span><span class="comment" id="4720022">//&nbsp;See&nbsp;golang.org/s/go12symtab.</span><br>
<span class="lineno"></span><span class="comment" id="4720054">//</span><br>
<span class="lineno"></span><span class="comment" id="4720057">//&nbsp;A&nbsp;general&nbsp;note&nbsp;about&nbsp;the&nbsp;methods&nbsp;here:&nbsp;rather&nbsp;than&nbsp;try&nbsp;to&nbsp;avoid</span><br>
<span class="lineno">130</span><span class="comment" id="4720124">//&nbsp;index&nbsp;out&nbsp;of&nbsp;bounds&nbsp;errors,&nbsp;we&nbsp;trust&nbsp;Go&nbsp;to&nbsp;detect&nbsp;them,&nbsp;and&nbsp;then</span><br>
<span class="lineno"></span><span class="comment" id="4720192">//&nbsp;we&nbsp;recover&nbsp;from&nbsp;the&nbsp;panics&nbsp;and&nbsp;treat&nbsp;them&nbsp;as&nbsp;indicative&nbsp;of&nbsp;a&nbsp;malformed</span><br>
<span class="lineno"></span><span class="comment" id="4720266">//&nbsp;or&nbsp;incomplete&nbsp;table.</span><br>
<span class="lineno"></span><span class="comment" id="4720290">//</span><br>
<span class="lineno"></span><span class="comment" id="4720293">//&nbsp;The&nbsp;methods&nbsp;called&nbsp;by&nbsp;symtab.go,&nbsp;which&nbsp;begin&nbsp;with&nbsp;&#34;go12&#34;&nbsp;prefixes,</span><br>
<span class="lineno">135</span><span class="comment" id="4720363">//&nbsp;are&nbsp;expected&nbsp;to&nbsp;have&nbsp;that&nbsp;recovery&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4720409">//&nbsp;isGo12&nbsp;reports&nbsp;whether&nbsp;this&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;(or&nbsp;later)&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="4720477">func</span>&nbsp;<span class="op" id="4720482">(</span><span class="ident" id="4720483">t</span>&nbsp;<span class="op" id="4720485">*</span><span class="ident" id="4720486">LineTable</span><span class="op" id="4720495">)</span>&nbsp;<span class="ident" id="4720497">isGo12</span><span class="op" id="4720503">(</span><span class="op" id="4720504">)</span>&nbsp;<span class="builtintype" id="4720506">bool</span>&nbsp;<span class="op" id="4720511">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4720514">t</span><span class="op" id="4720515">.</span><span class="ident" id="4720516">go12Init</span><span class="op" id="4720524">(</span><span class="op" id="4720525">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720528">return</span>&nbsp;<span class="ident" id="4720535">t</span><span class="op" id="4720536">.</span><span class="ident" id="4720537">go12</span>&nbsp;<span class="op" id="4720542">==</span>&nbsp;<span class="num" id="4720545">1</span><br>
<span class="lineno"></span><span class="op" id="4720547">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="4720550">const</span>&nbsp;<span class="ident" id="4720556">go12magic</span>&nbsp;<span class="op" id="4720566">=</span>&nbsp;<span class="num" id="4720568">0xfffffffb</span><br>
<span class="lineno"></span><br>
<span class="lineno">145</span><span class="comment" id="4720580">//&nbsp;uintptr&nbsp;returns&nbsp;the&nbsp;pointer-sized&nbsp;value&nbsp;encoded&nbsp;at&nbsp;b.</span><br>
<span class="lineno"></span><span class="comment" id="4720637">//&nbsp;The&nbsp;pointer&nbsp;size&nbsp;is&nbsp;dictated&nbsp;by&nbsp;the&nbsp;table&nbsp;being&nbsp;read.</span><br>
<span class="lineno"></span><span class="keyword" id="4720694">func</span>&nbsp;<span class="op" id="4720699">(</span><span class="ident" id="4720700">t</span>&nbsp;<span class="op" id="4720702">*</span><span class="ident" id="4720703">LineTable</span><span class="op" id="4720712">)</span>&nbsp;<span class="builtintype" id="4720714">uintptr</span><span class="op" id="4720721">(</span><span class="ident" id="4720722">b</span>&nbsp;<span class="op" id="4720724">[</span><span class="op" id="4720725">]</span><span class="builtintype" id="4720726">byte</span><span class="op" id="4720730">)</span>&nbsp;<span class="ident" id="4720732">uint64</span>&nbsp;<span class="op" id="4720739">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720742">if</span>&nbsp;<span class="ident" id="4720745">t</span><span class="op" id="4720746">.</span><span class="ident" id="4720747">ptrsize</span>&nbsp;<span class="op" id="4720755">==</span>&nbsp;<span class="num" id="4720758">4</span>&nbsp;<span class="op" id="4720760">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720764">return</span>&nbsp;<span class="ident" id="4720771">uint64</span><span class="op" id="4720777">(</span><span class="ident" id="4720778">t</span><span class="op" id="4720779">.</span><span class="ident" id="4720780">binary</span><span class="op" id="4720786">.</span><span class="ident" id="4720787">Uint32</span><span class="op" id="4720793">(</span><span class="ident" id="4720794">b</span><span class="op" id="4720795">)</span><span class="op" id="4720796">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4720799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720802">return</span>&nbsp;<span class="ident" id="4720809">t</span><span class="op" id="4720810">.</span><span class="ident" id="4720811">binary</span><span class="op" id="4720817">.</span><span class="ident" id="4720818">Uint64</span><span class="op" id="4720824">(</span><span class="ident" id="4720825">b</span><span class="op" id="4720826">)</span><br>
<span class="lineno"></span><span class="op" id="4720828">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4720831">//&nbsp;go12init&nbsp;initializes&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;metadata&nbsp;if&nbsp;t&nbsp;is&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno">155</span><span class="keyword" id="4720906">func</span>&nbsp;<span class="op" id="4720911">(</span><span class="ident" id="4720912">t</span>&nbsp;<span class="op" id="4720914">*</span><span class="ident" id="4720915">LineTable</span><span class="op" id="4720924">)</span>&nbsp;<span class="ident" id="4720926">go12Init</span><span class="op" id="4720934">(</span><span class="op" id="4720935">)</span>&nbsp;<span class="op" id="4720937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4720940">t</span><span class="op" id="4720941">.</span><span class="ident" id="4720942">mu</span><span class="op" id="4720944">.</span><span class="ident" id="4720945">Lock</span><span class="op" id="4720949">(</span><span class="op" id="4720950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720953">defer</span>&nbsp;<span class="ident" id="4720959">t</span><span class="op" id="4720960">.</span><span class="ident" id="4720961">mu</span><span class="op" id="4720963">.</span><span class="ident" id="4720964">Unlock</span><span class="op" id="4720970">(</span><span class="op" id="4720971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720974">if</span>&nbsp;<span class="ident" id="4720977">t</span><span class="op" id="4720978">.</span><span class="ident" id="4720979">go12</span>&nbsp;<span class="op" id="4720984">!=</span>&nbsp;<span class="num" id="4720987">0</span>&nbsp;<span class="op" id="4720989">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4720993">return</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721001">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721005">defer</span>&nbsp;<span class="keyword" id="4721011">func</span><span class="op" id="4721015">(</span><span class="op" id="4721016">)</span>&nbsp;<span class="op" id="4721018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4721022">//&nbsp;If&nbsp;we&nbsp;panic&nbsp;parsing,&nbsp;assume&nbsp;it&#39;s&nbsp;not&nbsp;a&nbsp;Go&nbsp;1.2&nbsp;symbol&nbsp;table.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4721087">recover</span><span class="op" id="4721094">(</span><span class="op" id="4721095">)</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721098">}</span><span class="op" id="4721099">(</span><span class="op" id="4721100">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4721104">//&nbsp;Check&nbsp;header:&nbsp;4-byte&nbsp;magic,&nbsp;two&nbsp;zeros,&nbsp;pc&nbsp;quantum,&nbsp;pointer&nbsp;size.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721173">t</span><span class="op" id="4721174">.</span><span class="ident" id="4721175">go12</span>&nbsp;<span class="op" id="4721180">=</span>&nbsp;<span class="op" id="4721182">-</span><span class="num" id="4721183">1</span>&nbsp;<span class="comment" id="4721185">//&nbsp;not&nbsp;Go&nbsp;1.2&nbsp;until&nbsp;proven&nbsp;otherwise</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721223">if</span>&nbsp;<span class="builtinfunc" id="4721226">len</span><span class="op" id="4721229">(</span><span class="ident" id="4721230">t</span><span class="op" id="4721231">.</span><span class="ident" id="4721232">Data</span><span class="op" id="4721236">)</span>&nbsp;<span class="op" id="4721238">&lt;</span>&nbsp;<span class="num" id="4721240">16</span>&nbsp;<span class="op" id="4721243">||</span>&nbsp;<span class="ident" id="4721246">t</span><span class="op" id="4721247">.</span><span class="ident" id="4721248">Data</span><span class="op" id="4721252">[</span><span class="num" id="4721253">4</span><span class="op" id="4721254">]</span>&nbsp;<span class="op" id="4721256">!=</span>&nbsp;<span class="num" id="4721259">0</span>&nbsp;<span class="op" id="4721261">||</span>&nbsp;<span class="ident" id="4721264">t</span><span class="op" id="4721265">.</span><span class="ident" id="4721266">Data</span><span class="op" id="4721270">[</span><span class="num" id="4721271">5</span><span class="op" id="4721272">]</span>&nbsp;<span class="op" id="4721274">!=</span>&nbsp;<span class="num" id="4721277">0</span>&nbsp;<span class="op" id="4721279">||</span><br>
<span class="lineno">170</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721284">(</span><span class="ident" id="4721285">t</span><span class="op" id="4721286">.</span><span class="ident" id="4721287">Data</span><span class="op" id="4721291">[</span><span class="num" id="4721292">6</span><span class="op" id="4721293">]</span>&nbsp;<span class="op" id="4721295">!=</span>&nbsp;<span class="num" id="4721298">1</span>&nbsp;<span class="op" id="4721300">&amp;&amp;</span>&nbsp;<span class="ident" id="4721303">t</span><span class="op" id="4721304">.</span><span class="ident" id="4721305">Data</span><span class="op" id="4721309">[</span><span class="num" id="4721310">6</span><span class="op" id="4721311">]</span>&nbsp;<span class="op" id="4721313">!=</span>&nbsp;<span class="num" id="4721316">4</span><span class="op" id="4721317">)</span>&nbsp;<span class="op" id="4721319">||</span>&nbsp;<span class="comment" id="4721322">//&nbsp;pc&nbsp;quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721338">(</span><span class="ident" id="4721339">t</span><span class="op" id="4721340">.</span><span class="ident" id="4721341">Data</span><span class="op" id="4721345">[</span><span class="num" id="4721346">7</span><span class="op" id="4721347">]</span>&nbsp;<span class="op" id="4721349">!=</span>&nbsp;<span class="num" id="4721352">4</span>&nbsp;<span class="op" id="4721354">&amp;&amp;</span>&nbsp;<span class="ident" id="4721357">t</span><span class="op" id="4721358">.</span><span class="ident" id="4721359">Data</span><span class="op" id="4721363">[</span><span class="num" id="4721364">7</span><span class="op" id="4721365">]</span>&nbsp;<span class="op" id="4721367">!=</span>&nbsp;<span class="num" id="4721370">8</span><span class="op" id="4721371">)</span>&nbsp;<span class="op" id="4721373">{</span>&nbsp;<span class="comment" id="4721375">//&nbsp;pointer&nbsp;size</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721393">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721401">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721405">switch</span>&nbsp;<span class="builtintype" id="4721412">uint32</span><span class="op" id="4721418">(</span><span class="ident" id="4721419">go12magic</span><span class="op" id="4721428">)</span>&nbsp;<span class="op" id="4721430">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721433">case</span>&nbsp;<span class="ident" id="4721438">binary</span><span class="op" id="4721444">.</span><span class="ident" id="4721445">LittleEndian</span><span class="op" id="4721457">.</span><span class="ident" id="4721458">Uint32</span><span class="op" id="4721464">(</span><span class="ident" id="4721465">t</span><span class="op" id="4721466">.</span><span class="ident" id="4721467">Data</span><span class="op" id="4721471">)</span><span class="op" id="4721472">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721476">t</span><span class="op" id="4721477">.</span><span class="ident" id="4721478">binary</span>&nbsp;<span class="op" id="4721485">=</span>&nbsp;<span class="ident" id="4721487">binary</span><span class="op" id="4721493">.</span><span class="ident" id="4721494">LittleEndian</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721508">case</span>&nbsp;<span class="ident" id="4721513">binary</span><span class="op" id="4721519">.</span><span class="ident" id="4721520">BigEndian</span><span class="op" id="4721529">.</span><span class="ident" id="4721530">Uint32</span><span class="op" id="4721536">(</span><span class="ident" id="4721537">t</span><span class="op" id="4721538">.</span><span class="ident" id="4721539">Data</span><span class="op" id="4721543">)</span><span class="op" id="4721544">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721548">t</span><span class="op" id="4721549">.</span><span class="ident" id="4721550">binary</span>&nbsp;<span class="op" id="4721557">=</span>&nbsp;<span class="ident" id="4721559">binary</span><span class="op" id="4721565">.</span><span class="ident" id="4721566">BigEndian</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721577">default</span><span class="op" id="4721584">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4721588">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4721596">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721600">t</span><span class="op" id="4721601">.</span><span class="ident" id="4721602">quantum</span>&nbsp;<span class="op" id="4721610">=</span>&nbsp;<span class="builtintype" id="4721612">uint32</span><span class="op" id="4721618">(</span><span class="ident" id="4721619">t</span><span class="op" id="4721620">.</span><span class="ident" id="4721621">Data</span><span class="op" id="4721625">[</span><span class="num" id="4721626">6</span><span class="op" id="4721627">]</span><span class="op" id="4721628">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721631">t</span><span class="op" id="4721632">.</span><span class="ident" id="4721633">ptrsize</span>&nbsp;<span class="op" id="4721641">=</span>&nbsp;<span class="builtintype" id="4721643">uint32</span><span class="op" id="4721649">(</span><span class="ident" id="4721650">t</span><span class="op" id="4721651">.</span><span class="ident" id="4721652">Data</span><span class="op" id="4721656">[</span><span class="num" id="4721657">7</span><span class="op" id="4721658">]</span><span class="op" id="4721659">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721663">t</span><span class="op" id="4721664">.</span><span class="ident" id="4721665">nfunctab</span>&nbsp;<span class="op" id="4721674">=</span>&nbsp;<span class="builtintype" id="4721676">uint32</span><span class="op" id="4721682">(</span><span class="ident" id="4721683">t</span><span class="op" id="4721684">.</span><span class="builtintype" id="4721685">uintptr</span><span class="op" id="4721692">(</span><span class="ident" id="4721693">t</span><span class="op" id="4721694">.</span><span class="ident" id="4721695">Data</span><span class="op" id="4721699">[</span><span class="num" id="4721700">8</span><span class="op" id="4721701">:</span><span class="op" id="4721702">]</span><span class="op" id="4721703">)</span><span class="op" id="4721704">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721707">t</span><span class="op" id="4721708">.</span><span class="ident" id="4721709">functab</span>&nbsp;<span class="op" id="4721717">=</span>&nbsp;<span class="ident" id="4721719">t</span><span class="op" id="4721720">.</span><span class="ident" id="4721721">Data</span><span class="op" id="4721725">[</span><span class="num" id="4721726">8</span><span class="op" id="4721727">+</span><span class="ident" id="4721728">t</span><span class="op" id="4721729">.</span><span class="ident" id="4721730">ptrsize</span><span class="op" id="4721737">:</span><span class="op" id="4721738">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721741">functabsize</span>&nbsp;<span class="op" id="4721753">:=</span>&nbsp;<span class="ident" id="4721756">t</span><span class="op" id="4721757">.</span><span class="ident" id="4721758">nfunctab</span><span class="op" id="4721766">*</span><span class="num" id="4721767">2</span><span class="op" id="4721768">*</span><span class="ident" id="4721769">t</span><span class="op" id="4721770">.</span><span class="ident" id="4721771">ptrsize</span>&nbsp;<span class="op" id="4721779">+</span>&nbsp;<span class="ident" id="4721781">t</span><span class="op" id="4721782">.</span><span class="ident" id="4721783">ptrsize</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721792">fileoff</span>&nbsp;<span class="op" id="4721800">:=</span>&nbsp;<span class="ident" id="4721803">t</span><span class="op" id="4721804">.</span><span class="ident" id="4721805">binary</span><span class="op" id="4721811">.</span><span class="ident" id="4721812">Uint32</span><span class="op" id="4721818">(</span><span class="ident" id="4721819">t</span><span class="op" id="4721820">.</span><span class="ident" id="4721821">functab</span><span class="op" id="4721828">[</span><span class="ident" id="4721829">functabsize</span><span class="op" id="4721840">:</span><span class="op" id="4721841">]</span><span class="op" id="4721842">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721845">t</span><span class="op" id="4721846">.</span><span class="ident" id="4721847">functab</span>&nbsp;<span class="op" id="4721855">=</span>&nbsp;<span class="ident" id="4721857">t</span><span class="op" id="4721858">.</span><span class="ident" id="4721859">functab</span><span class="op" id="4721866">[</span><span class="op" id="4721867">:</span><span class="ident" id="4721868">functabsize</span><span class="op" id="4721879">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721882">t</span><span class="op" id="4721883">.</span><span class="ident" id="4721884">filetab</span>&nbsp;<span class="op" id="4721892">=</span>&nbsp;<span class="ident" id="4721894">t</span><span class="op" id="4721895">.</span><span class="ident" id="4721896">Data</span><span class="op" id="4721900">[</span><span class="ident" id="4721901">fileoff</span><span class="op" id="4721908">:</span><span class="op" id="4721909">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721912">t</span><span class="op" id="4721913">.</span><span class="ident" id="4721914">nfiletab</span>&nbsp;<span class="op" id="4721923">=</span>&nbsp;<span class="ident" id="4721925">t</span><span class="op" id="4721926">.</span><span class="ident" id="4721927">binary</span><span class="op" id="4721933">.</span><span class="ident" id="4721934">Uint32</span><span class="op" id="4721940">(</span><span class="ident" id="4721941">t</span><span class="op" id="4721942">.</span><span class="ident" id="4721943">filetab</span><span class="op" id="4721950">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721953">t</span><span class="op" id="4721954">.</span><span class="ident" id="4721955">filetab</span>&nbsp;<span class="op" id="4721963">=</span>&nbsp;<span class="ident" id="4721965">t</span><span class="op" id="4721966">.</span><span class="ident" id="4721967">filetab</span><span class="op" id="4721974">[</span><span class="op" id="4721975">:</span><span class="ident" id="4721976">t</span><span class="op" id="4721977">.</span><span class="ident" id="4721978">nfiletab</span><span class="op" id="4721986">*</span><span class="num" id="4721987">4</span><span class="op" id="4721988">]</span><br>
<span class="lineno">195</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4721992">t</span><span class="op" id="4721993">.</span><span class="ident" id="4721994">go12</span>&nbsp;<span class="op" id="4721999">=</span>&nbsp;<span class="num" id="4722001">1</span>&nbsp;<span class="comment" id="4722003">//&nbsp;so&nbsp;far&nbsp;so&nbsp;good</span><br>
<span class="lineno"></span><span class="op" id="4722021">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4722024">//&nbsp;go12Funcs&nbsp;returns&nbsp;a&nbsp;slice&nbsp;of&nbsp;Funcs&nbsp;derived&nbsp;from&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">200</span><span class="keyword" id="4722098">func</span>&nbsp;<span class="op" id="4722103">(</span><span class="ident" id="4722104">t</span>&nbsp;<span class="op" id="4722106">*</span><span class="ident" id="4722107">LineTable</span><span class="op" id="4722116">)</span>&nbsp;<span class="ident" id="4722118">go12Funcs</span><span class="op" id="4722127">(</span><span class="op" id="4722128">)</span>&nbsp;<span class="op" id="4722130">[</span><span class="op" id="4722131">]</span><span class="ident" id="4722132">Func</span>&nbsp;<span class="op" id="4722137">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4722140">//&nbsp;Assume&nbsp;it&nbsp;is&nbsp;malformed&nbsp;and&nbsp;return&nbsp;nil&nbsp;on&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4722192">defer</span>&nbsp;<span class="keyword" id="4722198">func</span><span class="op" id="4722202">(</span><span class="op" id="4722203">)</span>&nbsp;<span class="op" id="4722205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4722209">recover</span><span class="op" id="4722216">(</span><span class="op" id="4722217">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4722220">}</span><span class="op" id="4722221">(</span><span class="op" id="4722222">)</span><br>
<span class="lineno">205</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722226">n</span>&nbsp;<span class="op" id="4722228">:=</span>&nbsp;<span class="builtinfunc" id="4722231">len</span><span class="op" id="4722234">(</span><span class="ident" id="4722235">t</span><span class="op" id="4722236">.</span><span class="ident" id="4722237">functab</span><span class="op" id="4722244">)</span>&nbsp;<span class="op" id="4722246">/</span>&nbsp;<span class="builtintype" id="4722248">int</span><span class="op" id="4722251">(</span><span class="ident" id="4722252">t</span><span class="op" id="4722253">.</span><span class="ident" id="4722254">ptrsize</span><span class="op" id="4722261">)</span>&nbsp;<span class="op" id="4722263">/</span>&nbsp;<span class="num" id="4722265">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722268">funcs</span>&nbsp;<span class="op" id="4722274">:=</span>&nbsp;<span class="builtinfunc" id="4722277">make</span><span class="op" id="4722281">(</span><span class="op" id="4722282">[</span><span class="op" id="4722283">]</span><span class="ident" id="4722284">Func</span><span class="op" id="4722288">,</span>&nbsp;<span class="ident" id="4722290">n</span><span class="op" id="4722291">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4722294">for</span>&nbsp;<span class="ident" id="4722298">i</span>&nbsp;<span class="op" id="4722300">:=</span>&nbsp;<span class="keyword" id="4722303">range</span>&nbsp;<span class="ident" id="4722309">funcs</span>&nbsp;<span class="op" id="4722315">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722319">f</span>&nbsp;<span class="op" id="4722321">:=</span>&nbsp;<span class="op" id="4722324">&amp;</span><span class="ident" id="4722325">funcs</span><span class="op" id="4722330">[</span><span class="ident" id="4722331">i</span><span class="op" id="4722332">]</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722336">f</span><span class="op" id="4722337">.</span><span class="ident" id="4722338">Entry</span>&nbsp;<span class="op" id="4722344">=</span>&nbsp;<span class="ident" id="4722346">uint64</span><span class="op" id="4722352">(</span><span class="ident" id="4722353">t</span><span class="op" id="4722354">.</span><span class="builtintype" id="4722355">uintptr</span><span class="op" id="4722362">(</span><span class="ident" id="4722363">t</span><span class="op" id="4722364">.</span><span class="ident" id="4722365">functab</span><span class="op" id="4722372">[</span><span class="num" id="4722373">2</span><span class="op" id="4722374">*</span><span class="ident" id="4722375">i</span><span class="op" id="4722376">*</span><span class="builtintype" id="4722377">int</span><span class="op" id="4722380">(</span><span class="ident" id="4722381">t</span><span class="op" id="4722382">.</span><span class="ident" id="4722383">ptrsize</span><span class="op" id="4722390">)</span><span class="op" id="4722391">:</span><span class="op" id="4722392">]</span><span class="op" id="4722393">)</span><span class="op" id="4722394">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722398">f</span><span class="op" id="4722399">.</span><span class="ident" id="4722400">End</span>&nbsp;<span class="op" id="4722404">=</span>&nbsp;<span class="ident" id="4722406">uint64</span><span class="op" id="4722412">(</span><span class="ident" id="4722413">t</span><span class="op" id="4722414">.</span><span class="builtintype" id="4722415">uintptr</span><span class="op" id="4722422">(</span><span class="ident" id="4722423">t</span><span class="op" id="4722424">.</span><span class="ident" id="4722425">functab</span><span class="op" id="4722432">[</span><span class="op" id="4722433">(</span><span class="num" id="4722434">2</span><span class="op" id="4722435">*</span><span class="ident" id="4722436">i</span><span class="op" id="4722437">+</span><span class="num" id="4722438">2</span><span class="op" id="4722439">)</span><span class="op" id="4722440">*</span><span class="builtintype" id="4722441">int</span><span class="op" id="4722444">(</span><span class="ident" id="4722445">t</span><span class="op" id="4722446">.</span><span class="ident" id="4722447">ptrsize</span><span class="op" id="4722454">)</span><span class="op" id="4722455">:</span><span class="op" id="4722456">]</span><span class="op" id="4722457">)</span><span class="op" id="4722458">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722462">info</span>&nbsp;<span class="op" id="4722467">:=</span>&nbsp;<span class="ident" id="4722470">t</span><span class="op" id="4722471">.</span><span class="ident" id="4722472">Data</span><span class="op" id="4722476">[</span><span class="ident" id="4722477">t</span><span class="op" id="4722478">.</span><span class="builtintype" id="4722479">uintptr</span><span class="op" id="4722486">(</span><span class="ident" id="4722487">t</span><span class="op" id="4722488">.</span><span class="ident" id="4722489">functab</span><span class="op" id="4722496">[</span><span class="op" id="4722497">(</span><span class="num" id="4722498">2</span><span class="op" id="4722499">*</span><span class="ident" id="4722500">i</span><span class="op" id="4722501">+</span><span class="num" id="4722502">1</span><span class="op" id="4722503">)</span><span class="op" id="4722504">*</span><span class="builtintype" id="4722505">int</span><span class="op" id="4722508">(</span><span class="ident" id="4722509">t</span><span class="op" id="4722510">.</span><span class="ident" id="4722511">ptrsize</span><span class="op" id="4722518">)</span><span class="op" id="4722519">:</span><span class="op" id="4722520">]</span><span class="op" id="4722521">)</span><span class="op" id="4722522">:</span><span class="op" id="4722523">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722527">f</span><span class="op" id="4722528">.</span><span class="ident" id="4722529">LineTable</span>&nbsp;<span class="op" id="4722539">=</span>&nbsp;<span class="ident" id="4722541">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722545">f</span><span class="op" id="4722546">.</span><span class="ident" id="4722547">FrameSize</span>&nbsp;<span class="op" id="4722557">=</span>&nbsp;<span class="builtintype" id="4722559">int</span><span class="op" id="4722562">(</span><span class="ident" id="4722563">t</span><span class="op" id="4722564">.</span><span class="ident" id="4722565">binary</span><span class="op" id="4722571">.</span><span class="ident" id="4722572">Uint32</span><span class="op" id="4722578">(</span><span class="ident" id="4722579">info</span><span class="op" id="4722583">[</span><span class="ident" id="4722584">t</span><span class="op" id="4722585">.</span><span class="ident" id="4722586">ptrsize</span><span class="op" id="4722593">+</span><span class="num" id="4722594">2</span><span class="op" id="4722595">*</span><span class="num" id="4722596">4</span><span class="op" id="4722597">:</span><span class="op" id="4722598">]</span><span class="op" id="4722599">)</span><span class="op" id="4722600">)</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722604">f</span><span class="op" id="4722605">.</span><span class="ident" id="4722606">Sym</span>&nbsp;<span class="op" id="4722610">=</span>&nbsp;<span class="op" id="4722612">&amp;</span><span class="ident" id="4722613">Sym</span><span class="op" id="4722616">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722621">Value</span><span class="op" id="4722626">:</span>&nbsp;&nbsp;<span class="ident" id="4722629">f</span><span class="op" id="4722630">.</span><span class="ident" id="4722631">Entry</span><span class="op" id="4722636">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722641">Type</span><span class="op" id="4722645">:</span>&nbsp;&nbsp;&nbsp;<span class="string" id="4722649">&#39;T&#39;</span><span class="op" id="4722652">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722657">Name</span><span class="op" id="4722661">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4722665">t</span><span class="op" id="4722666">.</span><span class="builtintype" id="4722667">string</span><span class="op" id="4722673">(</span><span class="ident" id="4722674">t</span><span class="op" id="4722675">.</span><span class="ident" id="4722676">binary</span><span class="op" id="4722682">.</span><span class="ident" id="4722683">Uint32</span><span class="op" id="4722689">(</span><span class="ident" id="4722690">info</span><span class="op" id="4722694">[</span><span class="ident" id="4722695">t</span><span class="op" id="4722696">.</span><span class="ident" id="4722697">ptrsize</span><span class="op" id="4722704">:</span><span class="op" id="4722705">]</span><span class="op" id="4722706">)</span><span class="op" id="4722707">)</span><span class="op" id="4722708">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722713">GoType</span><span class="op" id="4722719">:</span>&nbsp;<span class="num" id="4722721">0</span><span class="op" id="4722722">,</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4722727">Func</span><span class="op" id="4722731">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="4722735">f</span><span class="op" id="4722736">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4722740">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4722743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4722746">return</span>&nbsp;<span class="ident" id="4722753">funcs</span><br>
<span class="lineno"></span><span class="op" id="4722759">}</span><br>
<span class="lineno">225</span><br>
<span class="lineno"></span><span class="comment" id="4722762">//&nbsp;findFunc&nbsp;returns&nbsp;the&nbsp;func&nbsp;corresponding&nbsp;to&nbsp;the&nbsp;given&nbsp;program&nbsp;counter.</span><br>
<span class="lineno"></span><span class="keyword" id="4722835">func</span>&nbsp;<span class="op" id="4722840">(</span><span class="ident" id="4722841">t</span>&nbsp;<span class="op" id="4722843">*</span><span class="ident" id="4722844">LineTable</span><span class="op" id="4722853">)</span>&nbsp;<span class="ident" id="4722855">findFunc</span><span class="op" id="4722863">(</span><span class="ident" id="4722864">pc</span>&nbsp;<span class="ident" id="4722867">uint64</span><span class="op" id="4722873">)</span>&nbsp;<span class="op" id="4722875">[</span><span class="op" id="4722876">]</span><span class="builtintype" id="4722877">byte</span>&nbsp;<span class="op" id="4722882">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4722885">if</span>&nbsp;<span class="ident" id="4722888">pc</span>&nbsp;<span class="op" id="4722891">&lt;</span>&nbsp;<span class="ident" id="4722893">t</span><span class="op" id="4722894">.</span><span class="builtintype" id="4722895">uintptr</span><span class="op" id="4722902">(</span><span class="ident" id="4722903">t</span><span class="op" id="4722904">.</span><span class="ident" id="4722905">functab</span><span class="op" id="4722912">)</span>&nbsp;<span class="op" id="4722914">||</span>&nbsp;<span class="ident" id="4722917">pc</span>&nbsp;<span class="op" id="4722920">&gt;=</span>&nbsp;<span class="ident" id="4722923">t</span><span class="op" id="4722924">.</span><span class="builtintype" id="4722925">uintptr</span><span class="op" id="4722932">(</span><span class="ident" id="4722933">t</span><span class="op" id="4722934">.</span><span class="ident" id="4722935">functab</span><span class="op" id="4722942">[</span><span class="builtinfunc" id="4722943">len</span><span class="op" id="4722946">(</span><span class="ident" id="4722947">t</span><span class="op" id="4722948">.</span><span class="ident" id="4722949">functab</span><span class="op" id="4722956">)</span><span class="op" id="4722957">-</span><span class="builtintype" id="4722958">int</span><span class="op" id="4722961">(</span><span class="ident" id="4722962">t</span><span class="op" id="4722963">.</span><span class="ident" id="4722964">ptrsize</span><span class="op" id="4722971">)</span><span class="op" id="4722972">:</span><span class="op" id="4722973">]</span><span class="op" id="4722974">)</span>&nbsp;<span class="op" id="4722976">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4722980">return</span>&nbsp;<span class="ident" id="4722987">nil</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4722992">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4722996">//&nbsp;The&nbsp;function&nbsp;table&nbsp;is&nbsp;a&nbsp;list&nbsp;of&nbsp;2*nfunctab+1&nbsp;uintptrs,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4723055">//&nbsp;alternating&nbsp;program&nbsp;counters&nbsp;and&nbsp;offsets&nbsp;to&nbsp;func&nbsp;structures.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723120">f</span>&nbsp;<span class="op" id="4723122">:=</span>&nbsp;<span class="ident" id="4723125">t</span><span class="op" id="4723126">.</span><span class="ident" id="4723127">functab</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723136">nf</span>&nbsp;<span class="op" id="4723139">:=</span>&nbsp;<span class="ident" id="4723142">t</span><span class="op" id="4723143">.</span><span class="ident" id="4723144">nfunctab</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723154">for</span>&nbsp;<span class="ident" id="4723158">nf</span>&nbsp;<span class="op" id="4723161">&gt;</span>&nbsp;<span class="num" id="4723163">0</span>&nbsp;<span class="op" id="4723165">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723169">m</span>&nbsp;<span class="op" id="4723171">:=</span>&nbsp;<span class="ident" id="4723174">nf</span>&nbsp;<span class="op" id="4723177">/</span>&nbsp;<span class="num" id="4723179">2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723183">fm</span>&nbsp;<span class="op" id="4723186">:=</span>&nbsp;<span class="ident" id="4723189">f</span><span class="op" id="4723190">[</span><span class="num" id="4723191">2</span><span class="op" id="4723192">*</span><span class="ident" id="4723193">t</span><span class="op" id="4723194">.</span><span class="ident" id="4723195">ptrsize</span><span class="op" id="4723202">*</span><span class="ident" id="4723203">m</span><span class="op" id="4723204">:</span><span class="op" id="4723205">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723209">if</span>&nbsp;<span class="ident" id="4723212">t</span><span class="op" id="4723213">.</span><span class="builtintype" id="4723214">uintptr</span><span class="op" id="4723221">(</span><span class="ident" id="4723222">fm</span><span class="op" id="4723224">)</span>&nbsp;<span class="op" id="4723226">&lt;=</span>&nbsp;<span class="ident" id="4723229">pc</span>&nbsp;<span class="op" id="4723232">&amp;&amp;</span>&nbsp;<span class="ident" id="4723235">pc</span>&nbsp;<span class="op" id="4723238">&lt;</span>&nbsp;<span class="ident" id="4723240">t</span><span class="op" id="4723241">.</span><span class="builtintype" id="4723242">uintptr</span><span class="op" id="4723249">(</span><span class="ident" id="4723250">fm</span><span class="op" id="4723252">[</span><span class="num" id="4723253">2</span><span class="op" id="4723254">*</span><span class="ident" id="4723255">t</span><span class="op" id="4723256">.</span><span class="ident" id="4723257">ptrsize</span><span class="op" id="4723264">:</span><span class="op" id="4723265">]</span><span class="op" id="4723266">)</span>&nbsp;<span class="op" id="4723268">{</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723273">return</span>&nbsp;<span class="ident" id="4723280">t</span><span class="op" id="4723281">.</span><span class="ident" id="4723282">Data</span><span class="op" id="4723286">[</span><span class="ident" id="4723287">t</span><span class="op" id="4723288">.</span><span class="builtintype" id="4723289">uintptr</span><span class="op" id="4723296">(</span><span class="ident" id="4723297">fm</span><span class="op" id="4723299">[</span><span class="ident" id="4723300">t</span><span class="op" id="4723301">.</span><span class="ident" id="4723302">ptrsize</span><span class="op" id="4723309">:</span><span class="op" id="4723310">]</span><span class="op" id="4723311">)</span><span class="op" id="4723312">:</span><span class="op" id="4723313">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723317">}</span>&nbsp;<span class="keyword" id="4723319">else</span>&nbsp;<span class="keyword" id="4723324">if</span>&nbsp;<span class="ident" id="4723327">pc</span>&nbsp;<span class="op" id="4723330">&lt;</span>&nbsp;<span class="ident" id="4723332">t</span><span class="op" id="4723333">.</span><span class="builtintype" id="4723334">uintptr</span><span class="op" id="4723341">(</span><span class="ident" id="4723342">fm</span><span class="op" id="4723344">)</span>&nbsp;<span class="op" id="4723346">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723351">nf</span>&nbsp;<span class="op" id="4723354">=</span>&nbsp;<span class="ident" id="4723356">m</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723360">}</span>&nbsp;<span class="keyword" id="4723362">else</span>&nbsp;<span class="op" id="4723367">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723372">f</span>&nbsp;<span class="op" id="4723374">=</span>&nbsp;<span class="ident" id="4723376">f</span><span class="op" id="4723377">[</span><span class="op" id="4723378">(</span><span class="ident" id="4723379">m</span><span class="op" id="4723380">+</span><span class="num" id="4723381">1</span><span class="op" id="4723382">)</span><span class="op" id="4723383">*</span><span class="num" id="4723384">2</span><span class="op" id="4723385">*</span><span class="ident" id="4723386">t</span><span class="op" id="4723387">.</span><span class="ident" id="4723388">ptrsize</span><span class="op" id="4723395">:</span><span class="op" id="4723396">]</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723401">nf</span>&nbsp;<span class="op" id="4723404">-=</span>&nbsp;<span class="ident" id="4723407">m</span>&nbsp;<span class="op" id="4723409">+</span>&nbsp;<span class="num" id="4723411">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723415">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723418">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723421">return</span>&nbsp;<span class="ident" id="4723428">nil</span><br>
<span class="lineno"></span><span class="op" id="4723432">}</span><br>
<span class="lineno">250</span><br>
<span class="lineno"></span><span class="comment" id="4723435">//&nbsp;readvarint&nbsp;reads,&nbsp;removes,&nbsp;and&nbsp;returns&nbsp;a&nbsp;varint&nbsp;from&nbsp;*pp.</span><br>
<span class="lineno"></span><span class="keyword" id="4723496">func</span>&nbsp;<span class="op" id="4723501">(</span><span class="ident" id="4723502">t</span>&nbsp;<span class="op" id="4723504">*</span><span class="ident" id="4723505">LineTable</span><span class="op" id="4723514">)</span>&nbsp;<span class="ident" id="4723516">readvarint</span><span class="op" id="4723526">(</span><span class="ident" id="4723527">pp</span>&nbsp;<span class="op" id="4723530">*</span><span class="op" id="4723531">[</span><span class="op" id="4723532">]</span><span class="builtintype" id="4723533">byte</span><span class="op" id="4723537">)</span>&nbsp;<span class="builtintype" id="4723539">uint32</span>&nbsp;<span class="op" id="4723546">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723549">var</span>&nbsp;<span class="ident" id="4723553">v</span><span class="op" id="4723554">,</span>&nbsp;<span class="ident" id="4723556">shift</span>&nbsp;<span class="builtintype" id="4723562">uint32</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723570">p</span>&nbsp;<span class="op" id="4723572">:=</span>&nbsp;<span class="op" id="4723575">*</span><span class="ident" id="4723576">pp</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723580">for</span>&nbsp;<span class="ident" id="4723584">shift</span>&nbsp;<span class="op" id="4723590">=</span>&nbsp;<span class="num" id="4723592">0</span><span class="op" id="4723593">;</span>&nbsp;<span class="op" id="4723595">;</span>&nbsp;<span class="ident" id="4723597">shift</span>&nbsp;<span class="op" id="4723603">+=</span>&nbsp;<span class="num" id="4723606">7</span>&nbsp;<span class="op" id="4723608">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723612">b</span>&nbsp;<span class="op" id="4723614">:=</span>&nbsp;<span class="ident" id="4723617">p</span><span class="op" id="4723618">[</span><span class="num" id="4723619">0</span><span class="op" id="4723620">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723624">p</span>&nbsp;<span class="op" id="4723626">=</span>&nbsp;<span class="ident" id="4723628">p</span><span class="op" id="4723629">[</span><span class="num" id="4723630">1</span><span class="op" id="4723631">:</span><span class="op" id="4723632">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4723636">v</span>&nbsp;<span class="op" id="4723638">|=</span>&nbsp;<span class="op" id="4723641">(</span><span class="builtintype" id="4723642">uint32</span><span class="op" id="4723648">(</span><span class="ident" id="4723649">b</span><span class="op" id="4723650">)</span>&nbsp;<span class="op" id="4723652">&amp;</span>&nbsp;<span class="num" id="4723654">0x7F</span><span class="op" id="4723658">)</span>&nbsp;<span class="op" id="4723660">&lt;&lt;</span>&nbsp;<span class="ident" id="4723663">shift</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723671">if</span>&nbsp;<span class="ident" id="4723674">b</span><span class="op" id="4723675">&amp;</span><span class="num" id="4723676">0x80</span>&nbsp;<span class="op" id="4723681">==</span>&nbsp;<span class="num" id="4723684">0</span>&nbsp;<span class="op" id="4723686">{</span><br>
<span class="lineno">260</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723691">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723699">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723705">*</span><span class="ident" id="4723706">pp</span>&nbsp;<span class="op" id="4723709">=</span>&nbsp;<span class="ident" id="4723711">p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723714">return</span>&nbsp;<span class="ident" id="4723721">v</span><br>
<span class="lineno">265</span><span class="op" id="4723723">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4723726">//&nbsp;string&nbsp;returns&nbsp;a&nbsp;Go&nbsp;string&nbsp;found&nbsp;at&nbsp;off.</span><br>
<span class="lineno"></span><span class="keyword" id="4723770">func</span>&nbsp;<span class="op" id="4723775">(</span><span class="ident" id="4723776">t</span>&nbsp;<span class="op" id="4723778">*</span><span class="ident" id="4723779">LineTable</span><span class="op" id="4723788">)</span>&nbsp;<span class="builtintype" id="4723790">string</span><span class="op" id="4723796">(</span><span class="ident" id="4723797">off</span>&nbsp;<span class="builtintype" id="4723801">uint32</span><span class="op" id="4723807">)</span>&nbsp;<span class="builtintype" id="4723809">string</span>&nbsp;<span class="op" id="4723816">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723819">for</span>&nbsp;<span class="ident" id="4723823">i</span>&nbsp;<span class="op" id="4723825">:=</span>&nbsp;<span class="ident" id="4723828">off</span><span class="op" id="4723831">;</span>&nbsp;<span class="op" id="4723833">;</span>&nbsp;<span class="ident" id="4723835">i</span><span class="op" id="4723836">++</span>&nbsp;<span class="op" id="4723839">{</span><br>
<span class="lineno">270</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723843">if</span>&nbsp;<span class="ident" id="4723846">t</span><span class="op" id="4723847">.</span><span class="ident" id="4723848">Data</span><span class="op" id="4723852">[</span><span class="ident" id="4723853">i</span><span class="op" id="4723854">]</span>&nbsp;<span class="op" id="4723856">==</span>&nbsp;<span class="num" id="4723859">0</span>&nbsp;<span class="op" id="4723861">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4723866">return</span>&nbsp;<span class="builtintype" id="4723873">string</span><span class="op" id="4723879">(</span><span class="ident" id="4723880">t</span><span class="op" id="4723881">.</span><span class="ident" id="4723882">Data</span><span class="op" id="4723886">[</span><span class="ident" id="4723887">off</span><span class="op" id="4723890">:</span><span class="ident" id="4723891">i</span><span class="op" id="4723892">]</span><span class="op" id="4723893">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723897">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4723900">}</span><br>
<span class="lineno"></span><span class="op" id="4723902">}</span><br>
<span class="lineno">275</span><br>
<span class="lineno"></span><span class="comment" id="4723905">//&nbsp;step&nbsp;advances&nbsp;to&nbsp;the&nbsp;next&nbsp;pc,&nbsp;value&nbsp;pair&nbsp;in&nbsp;the&nbsp;encoded&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="4723971">func</span>&nbsp;<span class="op" id="4723976">(</span><span class="ident" id="4723977">t</span>&nbsp;<span class="op" id="4723979">*</span><span class="ident" id="4723980">LineTable</span><span class="op" id="4723989">)</span>&nbsp;<span class="ident" id="4723991">step</span><span class="op" id="4723995">(</span><span class="ident" id="4723996">p</span>&nbsp;<span class="op" id="4723998">*</span><span class="op" id="4723999">[</span><span class="op" id="4724000">]</span><span class="builtintype" id="4724001">byte</span><span class="op" id="4724005">,</span>&nbsp;<span class="ident" id="4724007">pc</span>&nbsp;<span class="op" id="4724010">*</span><span class="ident" id="4724011">uint64</span><span class="op" id="4724017">,</span>&nbsp;<span class="ident" id="4724019">val</span>&nbsp;<span class="op" id="4724023">*</span><span class="builtintype" id="4724024">int32</span><span class="op" id="4724029">,</span>&nbsp;<span class="ident" id="4724031">first</span>&nbsp;<span class="builtintype" id="4724037">bool</span><span class="op" id="4724041">)</span>&nbsp;<span class="builtintype" id="4724043">bool</span>&nbsp;<span class="op" id="4724048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724051">uvdelta</span>&nbsp;<span class="op" id="4724059">:=</span>&nbsp;<span class="ident" id="4724062">t</span><span class="op" id="4724063">.</span><span class="ident" id="4724064">readvarint</span><span class="op" id="4724074">(</span><span class="ident" id="4724075">p</span><span class="op" id="4724076">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724079">if</span>&nbsp;<span class="ident" id="4724082">uvdelta</span>&nbsp;<span class="op" id="4724090">==</span>&nbsp;<span class="num" id="4724093">0</span>&nbsp;<span class="op" id="4724095">&amp;&amp;</span>&nbsp;<span class="op" id="4724098">!</span><span class="ident" id="4724099">first</span>&nbsp;<span class="op" id="4724105">{</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724109">return</span>&nbsp;<span class="builtintype" id="4724116">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724123">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724126">if</span>&nbsp;<span class="ident" id="4724129">uvdelta</span><span class="op" id="4724136">&amp;</span><span class="num" id="4724137">1</span>&nbsp;<span class="op" id="4724139">!=</span>&nbsp;<span class="num" id="4724142">0</span>&nbsp;<span class="op" id="4724144">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724148">uvdelta</span>&nbsp;<span class="op" id="4724156">=</span>&nbsp;<span class="op" id="4724158">^</span><span class="op" id="4724159">(</span><span class="ident" id="4724160">uvdelta</span>&nbsp;<span class="op" id="4724168">&gt;&gt;</span>&nbsp;<span class="num" id="4724171">1</span><span class="op" id="4724172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724175">}</span>&nbsp;<span class="keyword" id="4724177">else</span>&nbsp;<span class="op" id="4724182">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724186">uvdelta</span>&nbsp;<span class="op" id="4724194">&gt;&gt;=</span>&nbsp;<span class="num" id="4724198">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724201">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724204">vdelta</span>&nbsp;<span class="op" id="4724211">:=</span>&nbsp;<span class="builtintype" id="4724214">int32</span><span class="op" id="4724219">(</span><span class="ident" id="4724220">uvdelta</span><span class="op" id="4724227">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724230">pcdelta</span>&nbsp;<span class="op" id="4724238">:=</span>&nbsp;<span class="ident" id="4724241">t</span><span class="op" id="4724242">.</span><span class="ident" id="4724243">readvarint</span><span class="op" id="4724253">(</span><span class="ident" id="4724254">p</span><span class="op" id="4724255">)</span>&nbsp;<span class="op" id="4724257">*</span>&nbsp;<span class="ident" id="4724259">t</span><span class="op" id="4724260">.</span><span class="ident" id="4724261">quantum</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724270">*</span><span class="ident" id="4724271">pc</span>&nbsp;<span class="op" id="4724274">+=</span>&nbsp;<span class="ident" id="4724277">uint64</span><span class="op" id="4724283">(</span><span class="ident" id="4724284">pcdelta</span><span class="op" id="4724291">)</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724294">*</span><span class="ident" id="4724295">val</span>&nbsp;<span class="op" id="4724299">+=</span>&nbsp;<span class="ident" id="4724302">vdelta</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724310">return</span>&nbsp;<span class="builtintype" id="4724317">true</span><br>
<span class="lineno"></span><span class="op" id="4724322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4724325">//&nbsp;pcvalue&nbsp;reports&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the&nbsp;target&nbsp;pc.</span><br>
<span class="lineno">295</span><span class="comment" id="4724385">//&nbsp;off&nbsp;is&nbsp;the&nbsp;offset&nbsp;to&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;pc-value&nbsp;table,</span><br>
<span class="lineno"></span><span class="comment" id="4724446">//&nbsp;and&nbsp;entry&nbsp;is&nbsp;the&nbsp;start&nbsp;PC&nbsp;for&nbsp;the&nbsp;corresponding&nbsp;function.</span><br>
<span class="lineno"></span><span class="keyword" id="4724507">func</span>&nbsp;<span class="op" id="4724512">(</span><span class="ident" id="4724513">t</span>&nbsp;<span class="op" id="4724515">*</span><span class="ident" id="4724516">LineTable</span><span class="op" id="4724525">)</span>&nbsp;<span class="ident" id="4724527">pcvalue</span><span class="op" id="4724534">(</span><span class="ident" id="4724535">off</span>&nbsp;<span class="builtintype" id="4724539">uint32</span><span class="op" id="4724545">,</span>&nbsp;<span class="ident" id="4724547">entry</span><span class="op" id="4724552">,</span>&nbsp;<span class="ident" id="4724554">targetpc</span>&nbsp;<span class="ident" id="4724563">uint64</span><span class="op" id="4724569">)</span>&nbsp;<span class="builtintype" id="4724571">int32</span>&nbsp;<span class="op" id="4724577">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724580">if</span>&nbsp;<span class="ident" id="4724583">off</span>&nbsp;<span class="op" id="4724587">==</span>&nbsp;<span class="num" id="4724590">0</span>&nbsp;<span class="op" id="4724592">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724596">return</span>&nbsp;<span class="op" id="4724603">-</span><span class="num" id="4724604">1</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724607">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724610">p</span>&nbsp;<span class="op" id="4724612">:=</span>&nbsp;<span class="ident" id="4724615">t</span><span class="op" id="4724616">.</span><span class="ident" id="4724617">Data</span><span class="op" id="4724621">[</span><span class="ident" id="4724622">off</span><span class="op" id="4724625">:</span><span class="op" id="4724626">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724630">val</span>&nbsp;<span class="op" id="4724634">:=</span>&nbsp;<span class="builtintype" id="4724637">int32</span><span class="op" id="4724642">(</span><span class="op" id="4724643">-</span><span class="num" id="4724644">1</span><span class="op" id="4724645">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4724648">pc</span>&nbsp;<span class="op" id="4724651">:=</span>&nbsp;<span class="ident" id="4724654">entry</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724661">for</span>&nbsp;<span class="ident" id="4724665">t</span><span class="op" id="4724666">.</span><span class="ident" id="4724667">step</span><span class="op" id="4724671">(</span><span class="op" id="4724672">&amp;</span><span class="ident" id="4724673">p</span><span class="op" id="4724674">,</span>&nbsp;<span class="op" id="4724676">&amp;</span><span class="ident" id="4724677">pc</span><span class="op" id="4724679">,</span>&nbsp;<span class="op" id="4724681">&amp;</span><span class="ident" id="4724682">val</span><span class="op" id="4724685">,</span>&nbsp;<span class="ident" id="4724687">pc</span>&nbsp;<span class="op" id="4724690">==</span>&nbsp;<span class="ident" id="4724693">entry</span><span class="op" id="4724698">)</span>&nbsp;<span class="op" id="4724700">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724704">if</span>&nbsp;<span class="ident" id="4724707">targetpc</span>&nbsp;<span class="op" id="4724716">&lt;</span>&nbsp;<span class="ident" id="4724718">pc</span>&nbsp;<span class="op" id="4724721">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724726">return</span>&nbsp;<span class="ident" id="4724733">val</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4724742">}</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4724745">return</span>&nbsp;<span class="op" id="4724752">-</span><span class="num" id="4724753">1</span><br>
<span class="lineno"></span><span class="op" id="4724755">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4724758">//&nbsp;findFileLine&nbsp;scans&nbsp;one&nbsp;function&nbsp;in&nbsp;the&nbsp;binary&nbsp;looking&nbsp;for&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="4724821">//&nbsp;program&nbsp;counter&nbsp;in&nbsp;the&nbsp;given&nbsp;file&nbsp;on&nbsp;the&nbsp;given&nbsp;line.</span><br>
<span class="lineno">315</span><span class="comment" id="4724877">//&nbsp;It&nbsp;does&nbsp;so&nbsp;by&nbsp;running&nbsp;the&nbsp;pc-value&nbsp;tables&nbsp;mapping&nbsp;program&nbsp;counter</span><br>
<span class="lineno"></span><span class="comment" id="4724946">//&nbsp;to&nbsp;file&nbsp;number.&nbsp;Since&nbsp;most&nbsp;functions&nbsp;come&nbsp;from&nbsp;a&nbsp;single&nbsp;file,&nbsp;these</span><br>
<span class="lineno"></span><span class="comment" id="4725017">//&nbsp;are&nbsp;usually&nbsp;short&nbsp;and&nbsp;quick&nbsp;to&nbsp;scan.&nbsp;If&nbsp;a&nbsp;file&nbsp;match&nbsp;is&nbsp;found,&nbsp;then&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="4725092">//&nbsp;code&nbsp;goes&nbsp;to&nbsp;the&nbsp;expense&nbsp;of&nbsp;looking&nbsp;for&nbsp;a&nbsp;simultaneous&nbsp;line&nbsp;number&nbsp;match.</span><br>
<span class="lineno"></span><span class="keyword" id="4725169">func</span>&nbsp;<span class="op" id="4725174">(</span><span class="ident" id="4725175">t</span>&nbsp;<span class="op" id="4725177">*</span><span class="ident" id="4725178">LineTable</span><span class="op" id="4725187">)</span>&nbsp;<span class="ident" id="4725189">findFileLine</span><span class="op" id="4725201">(</span><span class="ident" id="4725202">entry</span>&nbsp;<span class="ident" id="4725208">uint64</span><span class="op" id="4725214">,</span>&nbsp;<span class="ident" id="4725216">filetab</span><span class="op" id="4725223">,</span>&nbsp;<span class="ident" id="4725225">linetab</span>&nbsp;<span class="builtintype" id="4725233">uint32</span><span class="op" id="4725239">,</span>&nbsp;<span class="ident" id="4725241">filenum</span><span class="op" id="4725248">,</span>&nbsp;<span class="ident" id="4725250">line</span>&nbsp;<span class="builtintype" id="4725255">int32</span><span class="op" id="4725260">)</span>&nbsp;<span class="ident" id="4725262">uint64</span>&nbsp;<span class="op" id="4725269">{</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725272">if</span>&nbsp;<span class="ident" id="4725275">filetab</span>&nbsp;<span class="op" id="4725283">==</span>&nbsp;<span class="num" id="4725286">0</span>&nbsp;<span class="op" id="4725288">||</span>&nbsp;<span class="ident" id="4725291">linetab</span>&nbsp;<span class="op" id="4725299">==</span>&nbsp;<span class="num" id="4725302">0</span>&nbsp;<span class="op" id="4725304">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725308">return</span>&nbsp;<span class="num" id="4725315">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4725318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725322">fp</span>&nbsp;<span class="op" id="4725325">:=</span>&nbsp;<span class="ident" id="4725328">t</span><span class="op" id="4725329">.</span><span class="ident" id="4725330">Data</span><span class="op" id="4725334">[</span><span class="ident" id="4725335">filetab</span><span class="op" id="4725342">:</span><span class="op" id="4725343">]</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725346">fl</span>&nbsp;<span class="op" id="4725349">:=</span>&nbsp;<span class="ident" id="4725352">t</span><span class="op" id="4725353">.</span><span class="ident" id="4725354">Data</span><span class="op" id="4725358">[</span><span class="ident" id="4725359">linetab</span><span class="op" id="4725366">:</span><span class="op" id="4725367">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725370">fileVal</span>&nbsp;<span class="op" id="4725378">:=</span>&nbsp;<span class="builtintype" id="4725381">int32</span><span class="op" id="4725386">(</span><span class="op" id="4725387">-</span><span class="num" id="4725388">1</span><span class="op" id="4725389">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725392">filePC</span>&nbsp;<span class="op" id="4725399">:=</span>&nbsp;<span class="ident" id="4725402">entry</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725409">lineVal</span>&nbsp;<span class="op" id="4725417">:=</span>&nbsp;<span class="builtintype" id="4725420">int32</span><span class="op" id="4725425">(</span><span class="op" id="4725426">-</span><span class="num" id="4725427">1</span><span class="op" id="4725428">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725431">linePC</span>&nbsp;<span class="op" id="4725438">:=</span>&nbsp;<span class="ident" id="4725441">entry</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725448">fileStartPC</span>&nbsp;<span class="op" id="4725460">:=</span>&nbsp;<span class="ident" id="4725463">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725471">for</span>&nbsp;<span class="ident" id="4725475">t</span><span class="op" id="4725476">.</span><span class="ident" id="4725477">step</span><span class="op" id="4725481">(</span><span class="op" id="4725482">&amp;</span><span class="ident" id="4725483">fp</span><span class="op" id="4725485">,</span>&nbsp;<span class="op" id="4725487">&amp;</span><span class="ident" id="4725488">filePC</span><span class="op" id="4725494">,</span>&nbsp;<span class="op" id="4725496">&amp;</span><span class="ident" id="4725497">fileVal</span><span class="op" id="4725504">,</span>&nbsp;<span class="ident" id="4725506">filePC</span>&nbsp;<span class="op" id="4725513">==</span>&nbsp;<span class="ident" id="4725516">entry</span><span class="op" id="4725521">)</span>&nbsp;<span class="op" id="4725523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725527">if</span>&nbsp;<span class="ident" id="4725530">fileVal</span>&nbsp;<span class="op" id="4725538">==</span>&nbsp;<span class="ident" id="4725541">filenum</span>&nbsp;<span class="op" id="4725549">&amp;&amp;</span>&nbsp;<span class="ident" id="4725552">fileStartPC</span>&nbsp;<span class="op" id="4725564">&lt;</span>&nbsp;<span class="ident" id="4725566">filePC</span>&nbsp;<span class="op" id="4725573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4725578">//&nbsp;fileVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;starting&nbsp;at&nbsp;fileStartPC&nbsp;up&nbsp;to</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4725635">//&nbsp;but&nbsp;not&nbsp;including&nbsp;filePC,&nbsp;and&nbsp;it&#39;s&nbsp;the&nbsp;file&nbsp;we&nbsp;want.</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4725694">//&nbsp;Run&nbsp;the&nbsp;PC&nbsp;table&nbsp;looking&nbsp;for&nbsp;a&nbsp;matching&nbsp;line&nbsp;number</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4725752">//&nbsp;or&nbsp;until&nbsp;we&nbsp;reach&nbsp;filePC.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4725784">lineStartPC</span>&nbsp;<span class="op" id="4725796">:=</span>&nbsp;<span class="ident" id="4725799">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725809">for</span>&nbsp;<span class="ident" id="4725813">linePC</span>&nbsp;<span class="op" id="4725820">&lt;</span>&nbsp;<span class="ident" id="4725822">filePC</span>&nbsp;<span class="op" id="4725829">&amp;&amp;</span>&nbsp;<span class="ident" id="4725832">t</span><span class="op" id="4725833">.</span><span class="ident" id="4725834">step</span><span class="op" id="4725838">(</span><span class="op" id="4725839">&amp;</span><span class="ident" id="4725840">fl</span><span class="op" id="4725842">,</span>&nbsp;<span class="op" id="4725844">&amp;</span><span class="ident" id="4725845">linePC</span><span class="op" id="4725851">,</span>&nbsp;<span class="op" id="4725853">&amp;</span><span class="ident" id="4725854">lineVal</span><span class="op" id="4725861">,</span>&nbsp;<span class="ident" id="4725863">linePC</span>&nbsp;<span class="op" id="4725870">==</span>&nbsp;<span class="ident" id="4725873">entry</span><span class="op" id="4725878">)</span>&nbsp;<span class="op" id="4725880">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4725886">//&nbsp;lineVal&nbsp;is&nbsp;in&nbsp;effect&nbsp;until&nbsp;linePC,&nbsp;and&nbsp;lineStartPC&nbsp;&lt;&nbsp;filePC.</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725954">if</span>&nbsp;<span class="ident" id="4725957">lineVal</span>&nbsp;<span class="op" id="4725965">==</span>&nbsp;<span class="ident" id="4725968">line</span>&nbsp;<span class="op" id="4725973">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4725980">if</span>&nbsp;<span class="ident" id="4725983">fileStartPC</span>&nbsp;<span class="op" id="4725995">&lt;=</span>&nbsp;<span class="ident" id="4725998">lineStartPC</span>&nbsp;<span class="op" id="4726010">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726018">return</span>&nbsp;<span class="ident" id="4726025">lineStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726042">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726049">if</span>&nbsp;<span class="ident" id="4726052">fileStartPC</span>&nbsp;<span class="op" id="4726064">&lt;</span>&nbsp;<span class="ident" id="4726066">linePC</span>&nbsp;<span class="op" id="4726073">{</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726081">return</span>&nbsp;<span class="ident" id="4726088">fileStartPC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726105">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726111">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726117">lineStartPC</span>&nbsp;<span class="op" id="4726129">=</span>&nbsp;<span class="ident" id="4726131">linePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726141">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726145">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726149">fileStartPC</span>&nbsp;<span class="op" id="4726161">=</span>&nbsp;<span class="ident" id="4726163">filePC</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726171">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726174">return</span>&nbsp;<span class="num" id="4726181">0</span><br>
<span class="lineno"></span><span class="op" id="4726183">}</span><br>
<span class="lineno">355</span><br>
<span class="lineno"></span><span class="comment" id="4726186">//&nbsp;go12PCToLine&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;line&nbsp;number&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="4726265">func</span>&nbsp;<span class="op" id="4726270">(</span><span class="ident" id="4726271">t</span>&nbsp;<span class="op" id="4726273">*</span><span class="ident" id="4726274">LineTable</span><span class="op" id="4726283">)</span>&nbsp;<span class="ident" id="4726285">go12PCToLine</span><span class="op" id="4726297">(</span><span class="ident" id="4726298">pc</span>&nbsp;<span class="ident" id="4726301">uint64</span><span class="op" id="4726307">)</span>&nbsp;<span class="op" id="4726309">(</span><span class="ident" id="4726310">line</span>&nbsp;<span class="builtintype" id="4726315">int</span><span class="op" id="4726318">)</span>&nbsp;<span class="op" id="4726320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726323">defer</span>&nbsp;<span class="keyword" id="4726329">func</span><span class="op" id="4726333">(</span><span class="op" id="4726334">)</span>&nbsp;<span class="op" id="4726336">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726340">if</span>&nbsp;<span class="builtinfunc" id="4726343">recover</span><span class="op" id="4726350">(</span><span class="op" id="4726351">)</span>&nbsp;<span class="op" id="4726353">!=</span>&nbsp;<span class="ident" id="4726356">nil</span>&nbsp;<span class="op" id="4726360">{</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726365">line</span>&nbsp;<span class="op" id="4726370">=</span>&nbsp;<span class="op" id="4726372">-</span><span class="num" id="4726373">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726377">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726380">}</span><span class="op" id="4726381">(</span><span class="op" id="4726382">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726386">f</span>&nbsp;<span class="op" id="4726388">:=</span>&nbsp;<span class="ident" id="4726391">t</span><span class="op" id="4726392">.</span><span class="ident" id="4726393">findFunc</span><span class="op" id="4726401">(</span><span class="ident" id="4726402">pc</span><span class="op" id="4726404">)</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726407">if</span>&nbsp;<span class="ident" id="4726410">f</span>&nbsp;<span class="op" id="4726412">==</span>&nbsp;<span class="ident" id="4726415">nil</span>&nbsp;<span class="op" id="4726419">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726423">return</span>&nbsp;<span class="op" id="4726430">-</span><span class="num" id="4726431">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726434">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726437">entry</span>&nbsp;<span class="op" id="4726443">:=</span>&nbsp;<span class="ident" id="4726446">t</span><span class="op" id="4726447">.</span><span class="builtintype" id="4726448">uintptr</span><span class="op" id="4726455">(</span><span class="ident" id="4726456">f</span><span class="op" id="4726457">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726460">linetab</span>&nbsp;<span class="op" id="4726468">:=</span>&nbsp;<span class="ident" id="4726471">t</span><span class="op" id="4726472">.</span><span class="ident" id="4726473">binary</span><span class="op" id="4726479">.</span><span class="ident" id="4726480">Uint32</span><span class="op" id="4726486">(</span><span class="ident" id="4726487">f</span><span class="op" id="4726488">[</span><span class="ident" id="4726489">t</span><span class="op" id="4726490">.</span><span class="ident" id="4726491">ptrsize</span><span class="op" id="4726498">+</span><span class="num" id="4726499">5</span><span class="op" id="4726500">*</span><span class="num" id="4726501">4</span><span class="op" id="4726502">:</span><span class="op" id="4726503">]</span><span class="op" id="4726504">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726507">return</span>&nbsp;<span class="builtintype" id="4726514">int</span><span class="op" id="4726517">(</span><span class="ident" id="4726518">t</span><span class="op" id="4726519">.</span><span class="ident" id="4726520">pcvalue</span><span class="op" id="4726527">(</span><span class="ident" id="4726528">linetab</span><span class="op" id="4726535">,</span>&nbsp;<span class="ident" id="4726537">entry</span><span class="op" id="4726542">,</span>&nbsp;<span class="ident" id="4726544">pc</span><span class="op" id="4726546">)</span><span class="op" id="4726547">)</span><br>
<span class="lineno"></span><span class="op" id="4726549">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4726552">//&nbsp;go12PCToFile&nbsp;maps&nbsp;program&nbsp;counter&nbsp;to&nbsp;file&nbsp;name&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno"></span><span class="keyword" id="4726629">func</span>&nbsp;<span class="op" id="4726634">(</span><span class="ident" id="4726635">t</span>&nbsp;<span class="op" id="4726637">*</span><span class="ident" id="4726638">LineTable</span><span class="op" id="4726647">)</span>&nbsp;<span class="ident" id="4726649">go12PCToFile</span><span class="op" id="4726661">(</span><span class="ident" id="4726662">pc</span>&nbsp;<span class="ident" id="4726665">uint64</span><span class="op" id="4726671">)</span>&nbsp;<span class="op" id="4726673">(</span><span class="ident" id="4726674">file</span>&nbsp;<span class="builtintype" id="4726679">string</span><span class="op" id="4726685">)</span>&nbsp;<span class="op" id="4726687">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726690">defer</span>&nbsp;<span class="keyword" id="4726696">func</span><span class="op" id="4726700">(</span><span class="op" id="4726701">)</span>&nbsp;<span class="op" id="4726703">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726707">if</span>&nbsp;<span class="builtinfunc" id="4726710">recover</span><span class="op" id="4726717">(</span><span class="op" id="4726718">)</span>&nbsp;<span class="op" id="4726720">!=</span>&nbsp;<span class="ident" id="4726723">nil</span>&nbsp;<span class="op" id="4726727">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726732">file</span>&nbsp;<span class="op" id="4726737">=</span>&nbsp;<span class="string" id="4726739">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726744">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726747">}</span><span class="op" id="4726748">(</span><span class="op" id="4726749">)</span><br>
<span class="lineno">380</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726753">f</span>&nbsp;<span class="op" id="4726755">:=</span>&nbsp;<span class="ident" id="4726758">t</span><span class="op" id="4726759">.</span><span class="ident" id="4726760">findFunc</span><span class="op" id="4726768">(</span><span class="ident" id="4726769">pc</span><span class="op" id="4726771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726774">if</span>&nbsp;<span class="ident" id="4726777">f</span>&nbsp;<span class="op" id="4726779">==</span>&nbsp;<span class="ident" id="4726782">nil</span>&nbsp;<span class="op" id="4726786">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726790">return</span>&nbsp;<span class="string" id="4726797">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726801">}</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726804">entry</span>&nbsp;<span class="op" id="4726810">:=</span>&nbsp;<span class="ident" id="4726813">t</span><span class="op" id="4726814">.</span><span class="builtintype" id="4726815">uintptr</span><span class="op" id="4726822">(</span><span class="ident" id="4726823">f</span><span class="op" id="4726824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726827">filetab</span>&nbsp;<span class="op" id="4726835">:=</span>&nbsp;<span class="ident" id="4726838">t</span><span class="op" id="4726839">.</span><span class="ident" id="4726840">binary</span><span class="op" id="4726846">.</span><span class="ident" id="4726847">Uint32</span><span class="op" id="4726853">(</span><span class="ident" id="4726854">f</span><span class="op" id="4726855">[</span><span class="ident" id="4726856">t</span><span class="op" id="4726857">.</span><span class="ident" id="4726858">ptrsize</span><span class="op" id="4726865">+</span><span class="num" id="4726866">4</span><span class="op" id="4726867">*</span><span class="num" id="4726868">4</span><span class="op" id="4726869">:</span><span class="op" id="4726870">]</span><span class="op" id="4726871">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4726874">fno</span>&nbsp;<span class="op" id="4726878">:=</span>&nbsp;<span class="ident" id="4726881">t</span><span class="op" id="4726882">.</span><span class="ident" id="4726883">pcvalue</span><span class="op" id="4726890">(</span><span class="ident" id="4726891">filetab</span><span class="op" id="4726898">,</span>&nbsp;<span class="ident" id="4726900">entry</span><span class="op" id="4726905">,</span>&nbsp;<span class="ident" id="4726907">pc</span><span class="op" id="4726909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726912">if</span>&nbsp;<span class="ident" id="4726915">fno</span>&nbsp;<span class="op" id="4726919">&lt;=</span>&nbsp;<span class="num" id="4726922">0</span>&nbsp;<span class="op" id="4726924">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726928">return</span>&nbsp;<span class="string" id="4726935">&#34;&#34;</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4726939">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4726942">return</span>&nbsp;<span class="ident" id="4726949">t</span><span class="op" id="4726950">.</span><span class="builtintype" id="4726951">string</span><span class="op" id="4726957">(</span><span class="ident" id="4726958">t</span><span class="op" id="4726959">.</span><span class="ident" id="4726960">binary</span><span class="op" id="4726966">.</span><span class="ident" id="4726967">Uint32</span><span class="op" id="4726973">(</span><span class="ident" id="4726974">t</span><span class="op" id="4726975">.</span><span class="ident" id="4726976">filetab</span><span class="op" id="4726983">[</span><span class="num" id="4726984">4</span><span class="op" id="4726985">*</span><span class="ident" id="4726986">fno</span><span class="op" id="4726989">:</span><span class="op" id="4726990">]</span><span class="op" id="4726991">)</span><span class="op" id="4726992">)</span><br>
<span class="lineno"></span><span class="op" id="4726994">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4726997">//&nbsp;go12LineToPC&nbsp;maps&nbsp;a&nbsp;(file,&nbsp;line)&nbsp;pair&nbsp;to&nbsp;a&nbsp;program&nbsp;counter&nbsp;for&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;pcln&nbsp;table.</span><br>
<span class="lineno">395</span><span class="keyword" id="4727086">func</span>&nbsp;<span class="op" id="4727091">(</span><span class="ident" id="4727092">t</span>&nbsp;<span class="op" id="4727094">*</span><span class="ident" id="4727095">LineTable</span><span class="op" id="4727104">)</span>&nbsp;<span class="ident" id="4727106">go12LineToPC</span><span class="op" id="4727118">(</span><span class="ident" id="4727119">file</span>&nbsp;<span class="builtintype" id="4727124">string</span><span class="op" id="4727130">,</span>&nbsp;<span class="ident" id="4727132">line</span>&nbsp;<span class="builtintype" id="4727137">int</span><span class="op" id="4727140">)</span>&nbsp;<span class="op" id="4727142">(</span><span class="ident" id="4727143">pc</span>&nbsp;<span class="ident" id="4727146">uint64</span><span class="op" id="4727152">)</span>&nbsp;<span class="op" id="4727154">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727157">defer</span>&nbsp;<span class="keyword" id="4727163">func</span><span class="op" id="4727167">(</span><span class="op" id="4727168">)</span>&nbsp;<span class="op" id="4727170">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727174">if</span>&nbsp;<span class="builtinfunc" id="4727177">recover</span><span class="op" id="4727184">(</span><span class="op" id="4727185">)</span>&nbsp;<span class="op" id="4727187">!=</span>&nbsp;<span class="ident" id="4727190">nil</span>&nbsp;<span class="op" id="4727194">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727199">pc</span>&nbsp;<span class="op" id="4727202">=</span>&nbsp;<span class="num" id="4727204">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727208">}</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727211">}</span><span class="op" id="4727212">(</span><span class="op" id="4727213">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727217">t</span><span class="op" id="4727218">.</span><span class="ident" id="4727219">initFileMap</span><span class="op" id="4727230">(</span><span class="op" id="4727231">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727234">filenum</span>&nbsp;<span class="op" id="4727242">:=</span>&nbsp;<span class="ident" id="4727245">t</span><span class="op" id="4727246">.</span><span class="ident" id="4727247">fileMap</span><span class="op" id="4727254">[</span><span class="ident" id="4727255">file</span><span class="op" id="4727259">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727262">if</span>&nbsp;<span class="ident" id="4727265">filenum</span>&nbsp;<span class="op" id="4727273">==</span>&nbsp;<span class="num" id="4727276">0</span>&nbsp;<span class="op" id="4727278">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727282">return</span>&nbsp;<span class="num" id="4727289">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727292">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4727296">//&nbsp;Scan&nbsp;all&nbsp;functions.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4727320">//&nbsp;If&nbsp;this&nbsp;turns&nbsp;out&nbsp;to&nbsp;be&nbsp;a&nbsp;bottleneck,&nbsp;we&nbsp;could&nbsp;build&nbsp;a&nbsp;map[int32][]int32</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="4727397">//&nbsp;mapping&nbsp;file&nbsp;number&nbsp;to&nbsp;a&nbsp;list&nbsp;of&nbsp;functions&nbsp;with&nbsp;code&nbsp;from&nbsp;that&nbsp;file.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727470">for</span>&nbsp;<span class="ident" id="4727474">i</span>&nbsp;<span class="op" id="4727476">:=</span>&nbsp;<span class="builtintype" id="4727479">uint32</span><span class="op" id="4727485">(</span><span class="num" id="4727486">0</span><span class="op" id="4727487">)</span><span class="op" id="4727488">;</span>&nbsp;<span class="ident" id="4727490">i</span>&nbsp;<span class="op" id="4727492">&lt;</span>&nbsp;<span class="ident" id="4727494">t</span><span class="op" id="4727495">.</span><span class="ident" id="4727496">nfunctab</span><span class="op" id="4727504">;</span>&nbsp;<span class="ident" id="4727506">i</span><span class="op" id="4727507">++</span>&nbsp;<span class="op" id="4727510">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727514">f</span>&nbsp;<span class="op" id="4727516">:=</span>&nbsp;<span class="ident" id="4727519">t</span><span class="op" id="4727520">.</span><span class="ident" id="4727521">Data</span><span class="op" id="4727525">[</span><span class="ident" id="4727526">t</span><span class="op" id="4727527">.</span><span class="builtintype" id="4727528">uintptr</span><span class="op" id="4727535">(</span><span class="ident" id="4727536">t</span><span class="op" id="4727537">.</span><span class="ident" id="4727538">functab</span><span class="op" id="4727545">[</span><span class="num" id="4727546">2</span><span class="op" id="4727547">*</span><span class="ident" id="4727548">t</span><span class="op" id="4727549">.</span><span class="ident" id="4727550">ptrsize</span><span class="op" id="4727557">*</span><span class="ident" id="4727558">i</span><span class="op" id="4727559">+</span><span class="ident" id="4727560">t</span><span class="op" id="4727561">.</span><span class="ident" id="4727562">ptrsize</span><span class="op" id="4727569">:</span><span class="op" id="4727570">]</span><span class="op" id="4727571">)</span><span class="op" id="4727572">:</span><span class="op" id="4727573">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727577">entry</span>&nbsp;<span class="op" id="4727583">:=</span>&nbsp;<span class="ident" id="4727586">t</span><span class="op" id="4727587">.</span><span class="builtintype" id="4727588">uintptr</span><span class="op" id="4727595">(</span><span class="ident" id="4727596">f</span><span class="op" id="4727597">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727601">filetab</span>&nbsp;<span class="op" id="4727609">:=</span>&nbsp;<span class="ident" id="4727612">t</span><span class="op" id="4727613">.</span><span class="ident" id="4727614">binary</span><span class="op" id="4727620">.</span><span class="ident" id="4727621">Uint32</span><span class="op" id="4727627">(</span><span class="ident" id="4727628">f</span><span class="op" id="4727629">[</span><span class="ident" id="4727630">t</span><span class="op" id="4727631">.</span><span class="ident" id="4727632">ptrsize</span><span class="op" id="4727639">+</span><span class="num" id="4727640">4</span><span class="op" id="4727641">*</span><span class="num" id="4727642">4</span><span class="op" id="4727643">:</span><span class="op" id="4727644">]</span><span class="op" id="4727645">)</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727649">linetab</span>&nbsp;<span class="op" id="4727657">:=</span>&nbsp;<span class="ident" id="4727660">t</span><span class="op" id="4727661">.</span><span class="ident" id="4727662">binary</span><span class="op" id="4727668">.</span><span class="ident" id="4727669">Uint32</span><span class="op" id="4727675">(</span><span class="ident" id="4727676">f</span><span class="op" id="4727677">[</span><span class="ident" id="4727678">t</span><span class="op" id="4727679">.</span><span class="ident" id="4727680">ptrsize</span><span class="op" id="4727687">+</span><span class="num" id="4727688">5</span><span class="op" id="4727689">*</span><span class="num" id="4727690">4</span><span class="op" id="4727691">:</span><span class="op" id="4727692">]</span><span class="op" id="4727693">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727697">pc</span>&nbsp;<span class="op" id="4727700">:=</span>&nbsp;<span class="ident" id="4727703">t</span><span class="op" id="4727704">.</span><span class="ident" id="4727705">findFileLine</span><span class="op" id="4727717">(</span><span class="ident" id="4727718">entry</span><span class="op" id="4727723">,</span>&nbsp;<span class="ident" id="4727725">filetab</span><span class="op" id="4727732">,</span>&nbsp;<span class="ident" id="4727734">linetab</span><span class="op" id="4727741">,</span>&nbsp;<span class="builtintype" id="4727743">int32</span><span class="op" id="4727748">(</span><span class="ident" id="4727749">filenum</span><span class="op" id="4727756">)</span><span class="op" id="4727757">,</span>&nbsp;<span class="builtintype" id="4727759">int32</span><span class="op" id="4727764">(</span><span class="ident" id="4727765">line</span><span class="op" id="4727769">)</span><span class="op" id="4727770">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727774">if</span>&nbsp;<span class="ident" id="4727777">pc</span>&nbsp;<span class="op" id="4727780">!=</span>&nbsp;<span class="num" id="4727783">0</span>&nbsp;<span class="op" id="4727785">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727790">return</span>&nbsp;<span class="ident" id="4727797">pc</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727802">}</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727805">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727808">return</span>&nbsp;<span class="num" id="4727815">0</span><br>
<span class="lineno"></span><span class="op" id="4727817">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="4727820">//&nbsp;initFileMap&nbsp;initializes&nbsp;the&nbsp;map&nbsp;from&nbsp;file&nbsp;name&nbsp;to&nbsp;file&nbsp;number.</span><br>
<span class="lineno">425</span><span class="keyword" id="4727886">func</span>&nbsp;<span class="op" id="4727891">(</span><span class="ident" id="4727892">t</span>&nbsp;<span class="op" id="4727894">*</span><span class="ident" id="4727895">LineTable</span><span class="op" id="4727904">)</span>&nbsp;<span class="ident" id="4727906">initFileMap</span><span class="op" id="4727917">(</span><span class="op" id="4727918">)</span>&nbsp;<span class="op" id="4727920">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727923">t</span><span class="op" id="4727924">.</span><span class="ident" id="4727925">mu</span><span class="op" id="4727927">.</span><span class="ident" id="4727928">Lock</span><span class="op" id="4727932">(</span><span class="op" id="4727933">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727936">defer</span>&nbsp;<span class="ident" id="4727942">t</span><span class="op" id="4727943">.</span><span class="ident" id="4727944">mu</span><span class="op" id="4727946">.</span><span class="ident" id="4727947">Unlock</span><span class="op" id="4727953">(</span><span class="op" id="4727954">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727958">if</span>&nbsp;<span class="ident" id="4727961">t</span><span class="op" id="4727962">.</span><span class="ident" id="4727963">fileMap</span>&nbsp;<span class="op" id="4727971">!=</span>&nbsp;<span class="ident" id="4727974">nil</span>&nbsp;<span class="op" id="4727978">{</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4727982">return</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4727990">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4727993">m</span>&nbsp;<span class="op" id="4727995">:=</span>&nbsp;<span class="builtinfunc" id="4727998">make</span><span class="op" id="4728002">(</span><span class="keyword" id="4728003">map</span><span class="op" id="4728006">[</span><span class="builtintype" id="4728007">string</span><span class="op" id="4728013">]</span><span class="builtintype" id="4728014">uint32</span><span class="op" id="4728020">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4728024">for</span>&nbsp;<span class="ident" id="4728028">i</span>&nbsp;<span class="op" id="4728030">:=</span>&nbsp;<span class="builtintype" id="4728033">uint32</span><span class="op" id="4728039">(</span><span class="num" id="4728040">1</span><span class="op" id="4728041">)</span><span class="op" id="4728042">;</span>&nbsp;<span class="ident" id="4728044">i</span>&nbsp;<span class="op" id="4728046">&lt;</span>&nbsp;<span class="ident" id="4728048">t</span><span class="op" id="4728049">.</span><span class="ident" id="4728050">nfiletab</span><span class="op" id="4728058">;</span>&nbsp;<span class="ident" id="4728060">i</span><span class="op" id="4728061">++</span>&nbsp;<span class="op" id="4728064">{</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4728068">s</span>&nbsp;<span class="op" id="4728070">:=</span>&nbsp;<span class="ident" id="4728073">t</span><span class="op" id="4728074">.</span><span class="builtintype" id="4728075">string</span><span class="op" id="4728081">(</span><span class="ident" id="4728082">t</span><span class="op" id="4728083">.</span><span class="ident" id="4728084">binary</span><span class="op" id="4728090">.</span><span class="ident" id="4728091">Uint32</span><span class="op" id="4728097">(</span><span class="ident" id="4728098">t</span><span class="op" id="4728099">.</span><span class="ident" id="4728100">filetab</span><span class="op" id="4728107">[</span><span class="num" id="4728108">4</span><span class="op" id="4728109">*</span><span class="ident" id="4728110">i</span><span class="op" id="4728111">:</span><span class="op" id="4728112">]</span><span class="op" id="4728113">)</span><span class="op" id="4728114">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4728118">m</span><span class="op" id="4728119">[</span><span class="ident" id="4728120">s</span><span class="op" id="4728121">]</span>&nbsp;<span class="op" id="4728123">=</span>&nbsp;<span class="ident" id="4728125">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4728128">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4728131">t</span><span class="op" id="4728132">.</span><span class="ident" id="4728133">fileMap</span>&nbsp;<span class="op" id="4728141">=</span>&nbsp;<span class="ident" id="4728143">m</span><br>
<span class="lineno"></span><span class="op" id="4728145">}</span><br>
<span class="lineno">440</span><br>
<span class="lineno"></span><span class="comment" id="4728148">//&nbsp;go12MapFiles&nbsp;adds&nbsp;to&nbsp;m&nbsp;a&nbsp;key&nbsp;for&nbsp;every&nbsp;file&nbsp;in&nbsp;the&nbsp;Go&nbsp;1.2&nbsp;LineTable.</span><br>
<span class="lineno"></span><span class="comment" id="4728220">//&nbsp;Every&nbsp;key&nbsp;maps&nbsp;to&nbsp;obj.&nbsp;That&#39;s&nbsp;not&nbsp;a&nbsp;very&nbsp;interesting&nbsp;map,&nbsp;but&nbsp;it&nbsp;provides</span><br>
<span class="lineno"></span><span class="comment" id="4728297">//&nbsp;a&nbsp;way&nbsp;for&nbsp;callers&nbsp;to&nbsp;obtain&nbsp;the&nbsp;list&nbsp;of&nbsp;files&nbsp;in&nbsp;the&nbsp;program.</span><br>
<span class="lineno"></span><span class="keyword" id="4728362">func</span>&nbsp;<span class="op" id="4728367">(</span><span class="ident" id="4728368">t</span>&nbsp;<span class="op" id="4728370">*</span><span class="ident" id="4728371">LineTable</span><span class="op" id="4728380">)</span>&nbsp;<span class="ident" id="4728382">go12MapFiles</span><span class="op" id="4728394">(</span><span class="ident" id="4728395">m</span>&nbsp;<span class="keyword" id="4728397">map</span><span class="op" id="4728400">[</span><span class="builtintype" id="4728401">string</span><span class="op" id="4728407">]</span><span class="op" id="4728408">*</span><span class="ident" id="4728409">Obj</span><span class="op" id="4728412">,</span>&nbsp;<span class="ident" id="4728414">obj</span>&nbsp;<span class="op" id="4728418">*</span><span class="ident" id="4728419">Obj</span><span class="op" id="4728422">)</span>&nbsp;<span class="op" id="4728424">{</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4728427">defer</span>&nbsp;<span class="keyword" id="4728433">func</span><span class="op" id="4728437">(</span><span class="op" id="4728438">)</span>&nbsp;<span class="op" id="4728440">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="4728444">recover</span><span class="op" id="4728451">(</span><span class="op" id="4728452">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4728455">}</span><span class="op" id="4728456">(</span><span class="op" id="4728457">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4728461">t</span><span class="op" id="4728462">.</span><span class="ident" id="4728463">initFileMap</span><span class="op" id="4728474">(</span><span class="op" id="4728475">)</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="4728478">for</span>&nbsp;<span class="ident" id="4728482">file</span>&nbsp;<span class="op" id="4728487">:=</span>&nbsp;<span class="keyword" id="4728490">range</span>&nbsp;<span class="ident" id="4728496">t</span><span class="op" id="4728497">.</span><span class="ident" id="4728498">fileMap</span>&nbsp;<span class="op" id="4728506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="4728510">m</span><span class="op" id="4728511">[</span><span class="ident" id="4728512">file</span><span class="op" id="4728516">]</span>&nbsp;<span class="op" id="4728518">=</span>&nbsp;<span class="ident" id="4728520">obj</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="4728525">}</span><br>
<span class="lineno"></span><span class="op" id="4728527">}</span>
</div>
</body>
</html>
