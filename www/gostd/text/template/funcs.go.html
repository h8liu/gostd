<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>text/template</h2>
<ul>
<li><a href="/gostd/text/template/doc.go.html">doc.go</a></li>
<li><a href="/gostd/text/template/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/text/template/examplefiles_test.go.html">examplefiles_test.go</a></li>
<li><a href="/gostd/text/template/examplefunc_test.go.html">examplefunc_test.go</a></li>
<li><a href="/gostd/text/template/exec.go.html">exec.go</a></li>
<li><a href="/gostd/text/template/exec_test.go.html">exec_test.go</a></li>
<li><a href="/gostd/text/template/funcs.go.html" class="current">funcs.go</a></li>
<li><a href="/gostd/text/template/helper.go.html">helper.go</a></li>
<li><a href="/gostd/text/template/multi_test.go.html">multi_test.go</a></li>
<li><a href="/gostd/text/template/template.go.html">template.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3575070">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3575125">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3575179">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3575230">package</span>&nbsp;<span class="ident" id="3575238">template</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3575248">import</span>&nbsp;<span class="op" id="3575255">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575258">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575267">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575277">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575284">&#34;io&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575290">&#34;net/url&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575301">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575312">&#34;strings&#34;</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575323">&#34;unicode&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575334">&#34;unicode/utf8&#34;</span><br>
<span class="lineno"></span><span class="op" id="3575349">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3575352">//&nbsp;FuncMap&nbsp;is&nbsp;the&nbsp;type&nbsp;of&nbsp;the&nbsp;map&nbsp;defining&nbsp;the&nbsp;mapping&nbsp;from&nbsp;names&nbsp;to&nbsp;functions.</span><br>
<span class="lineno">20</span><span class="comment" id="3575432">//&nbsp;Each&nbsp;function&nbsp;must&nbsp;have&nbsp;either&nbsp;a&nbsp;single&nbsp;return&nbsp;value,&nbsp;or&nbsp;two&nbsp;return&nbsp;values&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3575513">//&nbsp;which&nbsp;the&nbsp;second&nbsp;has&nbsp;type&nbsp;error.&nbsp;In&nbsp;that&nbsp;case,&nbsp;if&nbsp;the&nbsp;second&nbsp;(error)</span><br>
<span class="lineno"></span><span class="comment" id="3575585">//&nbsp;return&nbsp;value&nbsp;evaluates&nbsp;to&nbsp;non-nil&nbsp;during&nbsp;execution,&nbsp;execution&nbsp;terminates&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="3575665">//&nbsp;Execute&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3575696">type</span>&nbsp;<span class="ident" id="3575701">FuncMap</span>&nbsp;<span class="keyword" id="3575709">map</span><span class="op" id="3575712">[</span><span class="builtintype" id="3575713">string</span><span class="op" id="3575719">]</span><span class="keyword" id="3575720">interface</span><span class="op" id="3575729">{</span><span class="op" id="3575730">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span><span class="keyword" id="3575733">var</span>&nbsp;<span class="ident" id="3575737">builtins</span>&nbsp;<span class="op" id="3575746">=</span>&nbsp;<span class="ident" id="3575748">FuncMap</span><span class="op" id="3575755">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575758">&#34;and&#34;</span><span class="op" id="3575763">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575770">and</span><span class="op" id="3575773">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575776">&#34;call&#34;</span><span class="op" id="3575782">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575788">call</span><span class="op" id="3575792">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575795">&#34;html&#34;</span><span class="op" id="3575801">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575807">HTMLEscaper</span><span class="op" id="3575818">,</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575821">&#34;index&#34;</span><span class="op" id="3575828">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575833">index</span><span class="op" id="3575838">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575841">&#34;js&#34;</span><span class="op" id="3575845">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575853">JSEscaper</span><span class="op" id="3575862">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575865">&#34;len&#34;</span><span class="op" id="3575870">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575877">length</span><span class="op" id="3575883">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575886">&#34;not&#34;</span><span class="op" id="3575891">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575898">not</span><span class="op" id="3575901">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575904">&#34;or&#34;</span><span class="op" id="3575908">:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575916">or</span><span class="op" id="3575918">,</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575921">&#34;print&#34;</span><span class="op" id="3575928">:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3575933">fmt</span><span class="op" id="3575936">.</span><span class="ident" id="3575937">Sprint</span><span class="op" id="3575943">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575946">&#34;printf&#34;</span><span class="op" id="3575954">:</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3575958">fmt</span><span class="op" id="3575961">.</span><span class="ident" id="3575962">Sprintf</span><span class="op" id="3575969">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575972">&#34;println&#34;</span><span class="op" id="3575981">:</span>&nbsp;&nbsp;<span class="ident" id="3575984">fmt</span><span class="op" id="3575987">.</span><span class="ident" id="3575988">Sprintln</span><span class="op" id="3575996">,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3575999">&#34;urlquery&#34;</span><span class="op" id="3576009">:</span>&nbsp;<span class="ident" id="3576011">URLQueryEscaper</span><span class="op" id="3576026">,</span><br>
<span class="lineno"></span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3576030">//&nbsp;Comparisons</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576046">&#34;eq&#34;</span><span class="op" id="3576050">:</span>&nbsp;<span class="ident" id="3576052">eq</span><span class="op" id="3576054">,</span>&nbsp;<span class="comment" id="3576056">//&nbsp;==</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576063">&#34;ge&#34;</span><span class="op" id="3576067">:</span>&nbsp;<span class="ident" id="3576069">ge</span><span class="op" id="3576071">,</span>&nbsp;<span class="comment" id="3576073">//&nbsp;&gt;=</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576080">&#34;gt&#34;</span><span class="op" id="3576084">:</span>&nbsp;<span class="ident" id="3576086">gt</span><span class="op" id="3576088">,</span>&nbsp;<span class="comment" id="3576090">//&nbsp;&gt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576096">&#34;le&#34;</span><span class="op" id="3576100">:</span>&nbsp;<span class="ident" id="3576102">le</span><span class="op" id="3576104">,</span>&nbsp;<span class="comment" id="3576106">//&nbsp;&lt;=</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576113">&#34;lt&#34;</span><span class="op" id="3576117">:</span>&nbsp;<span class="ident" id="3576119">lt</span><span class="op" id="3576121">,</span>&nbsp;<span class="comment" id="3576123">//&nbsp;&lt;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3576129">&#34;ne&#34;</span><span class="op" id="3576133">:</span>&nbsp;<span class="ident" id="3576135">ne</span><span class="op" id="3576137">,</span>&nbsp;<span class="comment" id="3576139">//&nbsp;!=</span><br>
<span class="lineno"></span><span class="op" id="3576145">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3576148">var</span>&nbsp;<span class="ident" id="3576152">builtinFuncs</span>&nbsp;<span class="op" id="3576165">=</span>&nbsp;<span class="ident" id="3576167">createValueFuncs</span><span class="op" id="3576183">(</span><span class="ident" id="3576184">builtins</span><span class="op" id="3576192">)</span><br>
<span class="lineno">50</span><br>
<span class="lineno"></span><span class="comment" id="3576195">//&nbsp;createValueFuncs&nbsp;turns&nbsp;a&nbsp;FuncMap&nbsp;into&nbsp;a&nbsp;map[string]reflect.Value</span><br>
<span class="lineno"></span><span class="keyword" id="3576263">func</span>&nbsp;<span class="ident" id="3576268">createValueFuncs</span><span class="op" id="3576284">(</span><span class="ident" id="3576285">funcMap</span>&nbsp;<span class="ident" id="3576293">FuncMap</span><span class="op" id="3576300">)</span>&nbsp;<span class="keyword" id="3576302">map</span><span class="op" id="3576305">[</span><span class="builtintype" id="3576306">string</span><span class="op" id="3576312">]</span><span class="ident" id="3576313">reflect</span><span class="op" id="3576320">.</span><span class="ident" id="3576321">Value</span>&nbsp;<span class="op" id="3576327">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3576330">m</span>&nbsp;<span class="op" id="3576332">:=</span>&nbsp;<span class="builtinfunc" id="3576335">make</span><span class="op" id="3576339">(</span><span class="keyword" id="3576340">map</span><span class="op" id="3576343">[</span><span class="builtintype" id="3576344">string</span><span class="op" id="3576350">]</span><span class="ident" id="3576351">reflect</span><span class="op" id="3576358">.</span><span class="ident" id="3576359">Value</span><span class="op" id="3576364">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3576367">addValueFuncs</span><span class="op" id="3576380">(</span><span class="ident" id="3576381">m</span><span class="op" id="3576382">,</span>&nbsp;<span class="ident" id="3576384">funcMap</span><span class="op" id="3576391">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576394">return</span>&nbsp;<span class="ident" id="3576401">m</span><br>
<span class="lineno"></span><span class="op" id="3576403">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576406">//&nbsp;addValueFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs,&nbsp;converting&nbsp;them&nbsp;to&nbsp;reflect.Values.</span><br>
<span class="lineno"></span><span class="keyword" id="3576497">func</span>&nbsp;<span class="ident" id="3576502">addValueFuncs</span><span class="op" id="3576515">(</span><span class="ident" id="3576516">out</span>&nbsp;<span class="keyword" id="3576520">map</span><span class="op" id="3576523">[</span><span class="builtintype" id="3576524">string</span><span class="op" id="3576530">]</span><span class="ident" id="3576531">reflect</span><span class="op" id="3576538">.</span><span class="ident" id="3576539">Value</span><span class="op" id="3576544">,</span>&nbsp;<span class="ident" id="3576546">in</span>&nbsp;<span class="ident" id="3576549">FuncMap</span><span class="op" id="3576556">)</span>&nbsp;<span class="op" id="3576558">{</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576561">for</span>&nbsp;<span class="ident" id="3576565">name</span><span class="op" id="3576569">,</span>&nbsp;<span class="ident" id="3576571">fn</span>&nbsp;<span class="op" id="3576574">:=</span>&nbsp;<span class="keyword" id="3576577">range</span>&nbsp;<span class="ident" id="3576583">in</span>&nbsp;<span class="op" id="3576586">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3576590">v</span>&nbsp;<span class="op" id="3576592">:=</span>&nbsp;<span class="ident" id="3576595">reflect</span><span class="op" id="3576602">.</span><span class="ident" id="3576603">ValueOf</span><span class="op" id="3576610">(</span><span class="ident" id="3576611">fn</span><span class="op" id="3576613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576617">if</span>&nbsp;<span class="ident" id="3576620">v</span><span class="op" id="3576621">.</span><span class="ident" id="3576622">Kind</span><span class="op" id="3576626">(</span><span class="op" id="3576627">)</span>&nbsp;<span class="op" id="3576629">!=</span>&nbsp;<span class="ident" id="3576632">reflect</span><span class="op" id="3576639">.</span><span class="ident" id="3576640">Func</span>&nbsp;<span class="op" id="3576645">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3576650">panic</span><span class="op" id="3576655">(</span><span class="string" id="3576656">&#34;value&nbsp;for&nbsp;&#34;</span>&nbsp;<span class="op" id="3576669">+</span>&nbsp;<span class="ident" id="3576671">name</span>&nbsp;<span class="op" id="3576676">+</span>&nbsp;<span class="string" id="3576678">&#34;&nbsp;not&nbsp;a&nbsp;function&#34;</span><span class="op" id="3576695">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3576699">}</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3576703">if</span>&nbsp;<span class="op" id="3576706">!</span><span class="ident" id="3576707">goodFunc</span><span class="op" id="3576715">(</span><span class="ident" id="3576716">v</span><span class="op" id="3576717">.</span><span class="ident" id="3576718">Type</span><span class="op" id="3576722">(</span><span class="op" id="3576723">)</span><span class="op" id="3576724">)</span>&nbsp;<span class="op" id="3576726">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3576731">panic</span><span class="op" id="3576736">(</span><span class="ident" id="3576737">fmt</span><span class="op" id="3576740">.</span><span class="ident" id="3576741">Errorf</span><span class="op" id="3576747">(</span><span class="string" id="3576748">&#34;can&#39;t&nbsp;install&nbsp;method/function&nbsp;%q&nbsp;with&nbsp;%d&nbsp;results&#34;</span><span class="op" id="3576798">,</span>&nbsp;<span class="ident" id="3576800">name</span><span class="op" id="3576804">,</span>&nbsp;<span class="ident" id="3576806">v</span><span class="op" id="3576807">.</span><span class="ident" id="3576808">Type</span><span class="op" id="3576812">(</span><span class="op" id="3576813">)</span><span class="op" id="3576814">.</span><span class="ident" id="3576815">NumOut</span><span class="op" id="3576821">(</span><span class="op" id="3576822">)</span><span class="op" id="3576823">)</span><span class="op" id="3576824">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3576828">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3576832">out</span><span class="op" id="3576835">[</span><span class="ident" id="3576836">name</span><span class="op" id="3576840">]</span>&nbsp;<span class="op" id="3576842">=</span>&nbsp;<span class="ident" id="3576844">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3576847">}</span><br>
<span class="lineno">70</span><span class="op" id="3576849">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3576852">//&nbsp;addFuncs&nbsp;adds&nbsp;to&nbsp;values&nbsp;the&nbsp;functions&nbsp;in&nbsp;funcs.&nbsp;It&nbsp;does&nbsp;no&nbsp;checking&nbsp;of&nbsp;the&nbsp;input&nbsp;-</span><br>
<span class="lineno"></span><span class="comment" id="3576938">//&nbsp;call&nbsp;addValueFuncs&nbsp;first.</span><br>
<span class="lineno"></span><span class="keyword" id="3576967">func</span>&nbsp;<span class="ident" id="3576972">addFuncs</span><span class="op" id="3576980">(</span><span class="ident" id="3576981">out</span><span class="op" id="3576984">,</span>&nbsp;<span class="ident" id="3576986">in</span>&nbsp;<span class="ident" id="3576989">FuncMap</span><span class="op" id="3576996">)</span>&nbsp;<span class="op" id="3576998">{</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577001">for</span>&nbsp;<span class="ident" id="3577005">name</span><span class="op" id="3577009">,</span>&nbsp;<span class="ident" id="3577011">fn</span>&nbsp;<span class="op" id="3577014">:=</span>&nbsp;<span class="keyword" id="3577017">range</span>&nbsp;<span class="ident" id="3577023">in</span>&nbsp;<span class="op" id="3577026">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3577030">out</span><span class="op" id="3577033">[</span><span class="ident" id="3577034">name</span><span class="op" id="3577038">]</span>&nbsp;<span class="op" id="3577040">=</span>&nbsp;<span class="ident" id="3577042">fn</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577046">}</span><br>
<span class="lineno"></span><span class="op" id="3577048">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">80</span><span class="comment" id="3577051">//&nbsp;goodFunc&nbsp;checks&nbsp;that&nbsp;the&nbsp;function&nbsp;or&nbsp;method&nbsp;has&nbsp;the&nbsp;right&nbsp;result&nbsp;signature.</span><br>
<span class="lineno"></span><span class="keyword" id="3577130">func</span>&nbsp;<span class="ident" id="3577135">goodFunc</span><span class="op" id="3577143">(</span><span class="ident" id="3577144">typ</span>&nbsp;<span class="ident" id="3577148">reflect</span><span class="op" id="3577155">.</span><span class="ident" id="3577156">Type</span><span class="op" id="3577160">)</span>&nbsp;<span class="builtintype" id="3577162">bool</span>&nbsp;<span class="op" id="3577167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3577170">//&nbsp;We&nbsp;allow&nbsp;functions&nbsp;with&nbsp;1&nbsp;result&nbsp;or&nbsp;2&nbsp;results&nbsp;where&nbsp;the&nbsp;second&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577250">switch</span>&nbsp;<span class="op" id="3577257">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577260">case</span>&nbsp;<span class="ident" id="3577265">typ</span><span class="op" id="3577268">.</span><span class="ident" id="3577269">NumOut</span><span class="op" id="3577275">(</span><span class="op" id="3577276">)</span>&nbsp;<span class="op" id="3577278">==</span>&nbsp;<span class="num" id="3577281">1</span><span class="op" id="3577282">:</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577286">return</span>&nbsp;<span class="builtintype" id="3577293">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577299">case</span>&nbsp;<span class="ident" id="3577304">typ</span><span class="op" id="3577307">.</span><span class="ident" id="3577308">NumOut</span><span class="op" id="3577314">(</span><span class="op" id="3577315">)</span>&nbsp;<span class="op" id="3577317">==</span>&nbsp;<span class="num" id="3577320">2</span>&nbsp;<span class="op" id="3577322">&amp;&amp;</span>&nbsp;<span class="ident" id="3577325">typ</span><span class="op" id="3577328">.</span><span class="ident" id="3577329">Out</span><span class="op" id="3577332">(</span><span class="num" id="3577333">1</span><span class="op" id="3577334">)</span>&nbsp;<span class="op" id="3577336">==</span>&nbsp;<span class="ident" id="3577339">errorType</span><span class="op" id="3577348">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577352">return</span>&nbsp;<span class="builtintype" id="3577359">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577365">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577368">return</span>&nbsp;<span class="builtintype" id="3577375">false</span><br>
<span class="lineno">90</span><span class="op" id="3577381">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3577384">//&nbsp;findFunction&nbsp;looks&nbsp;for&nbsp;a&nbsp;function&nbsp;in&nbsp;the&nbsp;template,&nbsp;and&nbsp;global&nbsp;map.</span><br>
<span class="lineno"></span><span class="keyword" id="3577454">func</span>&nbsp;<span class="ident" id="3577459">findFunction</span><span class="op" id="3577471">(</span><span class="ident" id="3577472">name</span>&nbsp;<span class="builtintype" id="3577477">string</span><span class="op" id="3577483">,</span>&nbsp;<span class="ident" id="3577485">tmpl</span>&nbsp;<span class="op" id="3577490">*</span><span class="ident" id="3577491">Template</span><span class="op" id="3577499">)</span>&nbsp;<span class="op" id="3577501">(</span><span class="ident" id="3577502">reflect</span><span class="op" id="3577509">.</span><span class="ident" id="3577510">Value</span><span class="op" id="3577515">,</span>&nbsp;<span class="builtintype" id="3577517">bool</span><span class="op" id="3577521">)</span>&nbsp;<span class="op" id="3577523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577526">if</span>&nbsp;<span class="ident" id="3577529">tmpl</span>&nbsp;<span class="op" id="3577534">!=</span>&nbsp;<span class="builtintype" id="3577537">nil</span>&nbsp;<span class="op" id="3577541">&amp;&amp;</span>&nbsp;<span class="ident" id="3577544">tmpl</span><span class="op" id="3577548">.</span><span class="ident" id="3577549">common</span>&nbsp;<span class="op" id="3577556">!=</span>&nbsp;<span class="builtintype" id="3577559">nil</span>&nbsp;<span class="op" id="3577563">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577567">if</span>&nbsp;<span class="ident" id="3577570">fn</span>&nbsp;<span class="op" id="3577573">:=</span>&nbsp;<span class="ident" id="3577576">tmpl</span><span class="op" id="3577580">.</span><span class="ident" id="3577581">execFuncs</span><span class="op" id="3577590">[</span><span class="ident" id="3577591">name</span><span class="op" id="3577595">]</span><span class="op" id="3577596">;</span>&nbsp;<span class="ident" id="3577598">fn</span><span class="op" id="3577600">.</span><span class="ident" id="3577601">IsValid</span><span class="op" id="3577608">(</span><span class="op" id="3577609">)</span>&nbsp;<span class="op" id="3577611">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577616">return</span>&nbsp;<span class="ident" id="3577623">fn</span><span class="op" id="3577625">,</span>&nbsp;<span class="builtintype" id="3577627">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577634">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577637">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577640">if</span>&nbsp;<span class="ident" id="3577643">fn</span>&nbsp;<span class="op" id="3577646">:=</span>&nbsp;<span class="ident" id="3577649">builtinFuncs</span><span class="op" id="3577661">[</span><span class="ident" id="3577662">name</span><span class="op" id="3577666">]</span><span class="op" id="3577667">;</span>&nbsp;<span class="ident" id="3577669">fn</span><span class="op" id="3577671">.</span><span class="ident" id="3577672">IsValid</span><span class="op" id="3577679">(</span><span class="op" id="3577680">)</span>&nbsp;<span class="op" id="3577682">{</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577686">return</span>&nbsp;<span class="ident" id="3577693">fn</span><span class="op" id="3577695">,</span>&nbsp;<span class="builtintype" id="3577697">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3577703">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3577706">return</span>&nbsp;<span class="ident" id="3577713">reflect</span><span class="op" id="3577720">.</span><span class="ident" id="3577721">Value</span><span class="op" id="3577726">{</span><span class="op" id="3577727">}</span><span class="op" id="3577728">,</span>&nbsp;<span class="builtintype" id="3577730">false</span><br>
<span class="lineno"></span><span class="op" id="3577736">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">105</span><span class="comment" id="3577739">//&nbsp;Indexing.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3577753">//&nbsp;index&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;indexing&nbsp;its&nbsp;first&nbsp;argument&nbsp;by&nbsp;the&nbsp;following</span><br>
<span class="lineno"></span><span class="comment" id="3577829">//&nbsp;arguments.&nbsp;&nbsp;Thus&nbsp;&#34;index&nbsp;x&nbsp;1&nbsp;2&nbsp;3&#34;&nbsp;is,&nbsp;in&nbsp;Go&nbsp;syntax,&nbsp;x[1][2][3].&nbsp;Each</span><br>
<span class="lineno"></span><span class="comment" id="3577900">//&nbsp;indexed&nbsp;item&nbsp;must&nbsp;be&nbsp;a&nbsp;map,&nbsp;slice,&nbsp;or&nbsp;array.</span><br>
<span class="lineno">110</span><span class="keyword" id="3577948">func</span>&nbsp;<span class="ident" id="3577953">index</span><span class="op" id="3577958">(</span><span class="ident" id="3577959">item</span>&nbsp;<span class="keyword" id="3577964">interface</span><span class="op" id="3577973">{</span><span class="op" id="3577974">}</span><span class="op" id="3577975">,</span>&nbsp;<span class="ident" id="3577977">indices</span>&nbsp;<span class="op" id="3577985">...</span><span class="keyword" id="3577988">interface</span><span class="op" id="3577997">{</span><span class="op" id="3577998">}</span><span class="op" id="3577999">)</span>&nbsp;<span class="op" id="3578001">(</span><span class="keyword" id="3578002">interface</span><span class="op" id="3578011">{</span><span class="op" id="3578012">}</span><span class="op" id="3578013">,</span>&nbsp;<span class="builtintype" id="3578015">error</span><span class="op" id="3578020">)</span>&nbsp;<span class="op" id="3578022">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578025">v</span>&nbsp;<span class="op" id="3578027">:=</span>&nbsp;<span class="ident" id="3578030">reflect</span><span class="op" id="3578037">.</span><span class="ident" id="3578038">ValueOf</span><span class="op" id="3578045">(</span><span class="ident" id="3578046">item</span><span class="op" id="3578050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578053">for</span>&nbsp;<span class="ident" id="3578057">_</span><span class="op" id="3578058">,</span>&nbsp;<span class="ident" id="3578060">i</span>&nbsp;<span class="op" id="3578062">:=</span>&nbsp;<span class="keyword" id="3578065">range</span>&nbsp;<span class="ident" id="3578071">indices</span>&nbsp;<span class="op" id="3578079">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578083">index</span>&nbsp;<span class="op" id="3578089">:=</span>&nbsp;<span class="ident" id="3578092">reflect</span><span class="op" id="3578099">.</span><span class="ident" id="3578100">ValueOf</span><span class="op" id="3578107">(</span><span class="ident" id="3578108">i</span><span class="op" id="3578109">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578113">var</span>&nbsp;<span class="ident" id="3578117">isNil</span>&nbsp;<span class="builtintype" id="3578123">bool</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578130">if</span>&nbsp;<span class="ident" id="3578133">v</span><span class="op" id="3578134">,</span>&nbsp;<span class="ident" id="3578136">isNil</span>&nbsp;<span class="op" id="3578142">=</span>&nbsp;<span class="ident" id="3578144">indirect</span><span class="op" id="3578152">(</span><span class="ident" id="3578153">v</span><span class="op" id="3578154">)</span><span class="op" id="3578155">;</span>&nbsp;<span class="ident" id="3578157">isNil</span>&nbsp;<span class="op" id="3578163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578168">return</span>&nbsp;<span class="builtintype" id="3578175">nil</span><span class="op" id="3578178">,</span>&nbsp;<span class="ident" id="3578180">fmt</span><span class="op" id="3578183">.</span><span class="ident" id="3578184">Errorf</span><span class="op" id="3578190">(</span><span class="string" id="3578191">&#34;index&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="3578213">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578217">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578221">switch</span>&nbsp;<span class="ident" id="3578228">v</span><span class="op" id="3578229">.</span><span class="ident" id="3578230">Kind</span><span class="op" id="3578234">(</span><span class="op" id="3578235">)</span>&nbsp;<span class="op" id="3578237">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578241">case</span>&nbsp;<span class="ident" id="3578246">reflect</span><span class="op" id="3578253">.</span><span class="ident" id="3578254">Array</span><span class="op" id="3578259">,</span>&nbsp;<span class="ident" id="3578261">reflect</span><span class="op" id="3578268">.</span><span class="ident" id="3578269">Slice</span><span class="op" id="3578274">,</span>&nbsp;<span class="ident" id="3578276">reflect</span><span class="op" id="3578283">.</span><span class="ident" id="3578284">String</span><span class="op" id="3578290">:</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578295">var</span>&nbsp;<span class="ident" id="3578299">x</span>&nbsp;<span class="ident" id="3578301">int64</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578310">switch</span>&nbsp;<span class="ident" id="3578317">index</span><span class="op" id="3578322">.</span><span class="ident" id="3578323">Kind</span><span class="op" id="3578327">(</span><span class="op" id="3578328">)</span>&nbsp;<span class="op" id="3578330">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578335">case</span>&nbsp;<span class="ident" id="3578340">reflect</span><span class="op" id="3578347">.</span><span class="ident" id="3578348">Int</span><span class="op" id="3578351">,</span>&nbsp;<span class="ident" id="3578353">reflect</span><span class="op" id="3578360">.</span><span class="ident" id="3578361">Int8</span><span class="op" id="3578365">,</span>&nbsp;<span class="ident" id="3578367">reflect</span><span class="op" id="3578374">.</span><span class="ident" id="3578375">Int16</span><span class="op" id="3578380">,</span>&nbsp;<span class="ident" id="3578382">reflect</span><span class="op" id="3578389">.</span><span class="ident" id="3578390">Int32</span><span class="op" id="3578395">,</span>&nbsp;<span class="ident" id="3578397">reflect</span><span class="op" id="3578404">.</span><span class="ident" id="3578405">Int64</span><span class="op" id="3578410">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578416">x</span>&nbsp;<span class="op" id="3578418">=</span>&nbsp;<span class="ident" id="3578420">index</span><span class="op" id="3578425">.</span><span class="ident" id="3578426">Int</span><span class="op" id="3578429">(</span><span class="op" id="3578430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578435">case</span>&nbsp;<span class="ident" id="3578440">reflect</span><span class="op" id="3578447">.</span><span class="ident" id="3578448">Uint</span><span class="op" id="3578452">,</span>&nbsp;<span class="ident" id="3578454">reflect</span><span class="op" id="3578461">.</span><span class="ident" id="3578462">Uint8</span><span class="op" id="3578467">,</span>&nbsp;<span class="ident" id="3578469">reflect</span><span class="op" id="3578476">.</span><span class="ident" id="3578477">Uint16</span><span class="op" id="3578483">,</span>&nbsp;<span class="ident" id="3578485">reflect</span><span class="op" id="3578492">.</span><span class="ident" id="3578493">Uint32</span><span class="op" id="3578499">,</span>&nbsp;<span class="ident" id="3578501">reflect</span><span class="op" id="3578508">.</span><span class="ident" id="3578509">Uint64</span><span class="op" id="3578515">,</span>&nbsp;<span class="ident" id="3578517">reflect</span><span class="op" id="3578524">.</span><span class="ident" id="3578525">Uintptr</span><span class="op" id="3578532">:</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578538">x</span>&nbsp;<span class="op" id="3578540">=</span>&nbsp;<span class="ident" id="3578542">int64</span><span class="op" id="3578547">(</span><span class="ident" id="3578548">index</span><span class="op" id="3578553">.</span><span class="ident" id="3578554">Uint</span><span class="op" id="3578558">(</span><span class="op" id="3578559">)</span><span class="op" id="3578560">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578565">default</span><span class="op" id="3578572">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578578">return</span>&nbsp;<span class="builtintype" id="3578585">nil</span><span class="op" id="3578588">,</span>&nbsp;<span class="ident" id="3578590">fmt</span><span class="op" id="3578593">.</span><span class="ident" id="3578594">Errorf</span><span class="op" id="3578600">(</span><span class="string" id="3578601">&#34;cannot&nbsp;index&nbsp;slice/array&nbsp;with&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3578640">,</span>&nbsp;<span class="ident" id="3578642">index</span><span class="op" id="3578647">.</span><span class="ident" id="3578648">Type</span><span class="op" id="3578652">(</span><span class="op" id="3578653">)</span><span class="op" id="3578654">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578659">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578664">if</span>&nbsp;<span class="ident" id="3578667">x</span>&nbsp;<span class="op" id="3578669">&lt;</span>&nbsp;<span class="num" id="3578671">0</span>&nbsp;<span class="op" id="3578673">||</span>&nbsp;<span class="ident" id="3578676">x</span>&nbsp;<span class="op" id="3578678">&gt;=</span>&nbsp;<span class="ident" id="3578681">int64</span><span class="op" id="3578686">(</span><span class="ident" id="3578687">v</span><span class="op" id="3578688">.</span><span class="ident" id="3578689">Len</span><span class="op" id="3578692">(</span><span class="op" id="3578693">)</span><span class="op" id="3578694">)</span>&nbsp;<span class="op" id="3578696">{</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578702">return</span>&nbsp;<span class="builtintype" id="3578709">nil</span><span class="op" id="3578712">,</span>&nbsp;<span class="ident" id="3578714">fmt</span><span class="op" id="3578717">.</span><span class="ident" id="3578718">Errorf</span><span class="op" id="3578724">(</span><span class="string" id="3578725">&#34;index&nbsp;out&nbsp;of&nbsp;range:&nbsp;%d&#34;</span><span class="op" id="3578749">,</span>&nbsp;<span class="ident" id="3578751">x</span><span class="op" id="3578752">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578757">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578762">v</span>&nbsp;<span class="op" id="3578764">=</span>&nbsp;<span class="ident" id="3578766">v</span><span class="op" id="3578767">.</span><span class="ident" id="3578768">Index</span><span class="op" id="3578773">(</span><span class="builtintype" id="3578774">int</span><span class="op" id="3578777">(</span><span class="ident" id="3578778">x</span><span class="op" id="3578779">)</span><span class="op" id="3578780">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578784">case</span>&nbsp;<span class="ident" id="3578789">reflect</span><span class="op" id="3578796">.</span><span class="ident" id="3578797">Map</span><span class="op" id="3578800">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578805">if</span>&nbsp;<span class="op" id="3578808">!</span><span class="ident" id="3578809">index</span><span class="op" id="3578814">.</span><span class="ident" id="3578815">IsValid</span><span class="op" id="3578822">(</span><span class="op" id="3578823">)</span>&nbsp;<span class="op" id="3578825">{</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3578831">index</span>&nbsp;<span class="op" id="3578837">=</span>&nbsp;<span class="ident" id="3578839">reflect</span><span class="op" id="3578846">.</span><span class="ident" id="3578847">Zero</span><span class="op" id="3578851">(</span><span class="ident" id="3578852">v</span><span class="op" id="3578853">.</span><span class="ident" id="3578854">Type</span><span class="op" id="3578858">(</span><span class="op" id="3578859">)</span><span class="op" id="3578860">.</span><span class="ident" id="3578861">Key</span><span class="op" id="3578864">(</span><span class="op" id="3578865">)</span><span class="op" id="3578866">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3578871">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578876">if</span>&nbsp;<span class="op" id="3578879">!</span><span class="ident" id="3578880">index</span><span class="op" id="3578885">.</span><span class="ident" id="3578886">Type</span><span class="op" id="3578890">(</span><span class="op" id="3578891">)</span><span class="op" id="3578892">.</span><span class="ident" id="3578893">AssignableTo</span><span class="op" id="3578905">(</span><span class="ident" id="3578906">v</span><span class="op" id="3578907">.</span><span class="ident" id="3578908">Type</span><span class="op" id="3578912">(</span><span class="op" id="3578913">)</span><span class="op" id="3578914">.</span><span class="ident" id="3578915">Key</span><span class="op" id="3578918">(</span><span class="op" id="3578919">)</span><span class="op" id="3578920">)</span>&nbsp;<span class="op" id="3578922">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3578928">return</span>&nbsp;<span class="builtintype" id="3578935">nil</span><span class="op" id="3578938">,</span>&nbsp;<span class="ident" id="3578940">fmt</span><span class="op" id="3578943">.</span><span class="ident" id="3578944">Errorf</span><span class="op" id="3578950">(</span><span class="string" id="3578951">&#34;%s&nbsp;is&nbsp;not&nbsp;index&nbsp;type&nbsp;for&nbsp;%s&#34;</span><span class="op" id="3578980">,</span>&nbsp;<span class="ident" id="3578982">index</span><span class="op" id="3578987">.</span><span class="ident" id="3578988">Type</span><span class="op" id="3578992">(</span><span class="op" id="3578993">)</span><span class="op" id="3578994">,</span>&nbsp;<span class="ident" id="3578996">v</span><span class="op" id="3578997">.</span><span class="ident" id="3578998">Type</span><span class="op" id="3579002">(</span><span class="op" id="3579003">)</span><span class="op" id="3579004">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579009">}</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579014">if</span>&nbsp;<span class="ident" id="3579017">x</span>&nbsp;<span class="op" id="3579019">:=</span>&nbsp;<span class="ident" id="3579022">v</span><span class="op" id="3579023">.</span><span class="ident" id="3579024">MapIndex</span><span class="op" id="3579032">(</span><span class="ident" id="3579033">index</span><span class="op" id="3579038">)</span><span class="op" id="3579039">;</span>&nbsp;<span class="ident" id="3579041">x</span><span class="op" id="3579042">.</span><span class="ident" id="3579043">IsValid</span><span class="op" id="3579050">(</span><span class="op" id="3579051">)</span>&nbsp;<span class="op" id="3579053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579059">v</span>&nbsp;<span class="op" id="3579061">=</span>&nbsp;<span class="ident" id="3579063">x</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579068">}</span>&nbsp;<span class="keyword" id="3579070">else</span>&nbsp;<span class="op" id="3579075">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579081">v</span>&nbsp;<span class="op" id="3579083">=</span>&nbsp;<span class="ident" id="3579085">reflect</span><span class="op" id="3579092">.</span><span class="ident" id="3579093">Zero</span><span class="op" id="3579097">(</span><span class="ident" id="3579098">v</span><span class="op" id="3579099">.</span><span class="ident" id="3579100">Type</span><span class="op" id="3579104">(</span><span class="op" id="3579105">)</span><span class="op" id="3579106">.</span><span class="ident" id="3579107">Elem</span><span class="op" id="3579111">(</span><span class="op" id="3579112">)</span><span class="op" id="3579113">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579118">}</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579122">default</span><span class="op" id="3579129">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579134">return</span>&nbsp;<span class="builtintype" id="3579141">nil</span><span class="op" id="3579144">,</span>&nbsp;<span class="ident" id="3579146">fmt</span><span class="op" id="3579149">.</span><span class="ident" id="3579150">Errorf</span><span class="op" id="3579156">(</span><span class="string" id="3579157">&#34;can&#39;t&nbsp;index&nbsp;item&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3579186">,</span>&nbsp;<span class="ident" id="3579188">v</span><span class="op" id="3579189">.</span><span class="ident" id="3579190">Type</span><span class="op" id="3579194">(</span><span class="op" id="3579195">)</span><span class="op" id="3579196">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579200">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579203">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579206">return</span>&nbsp;<span class="ident" id="3579213">v</span><span class="op" id="3579214">.</span><span class="ident" id="3579215">Interface</span><span class="op" id="3579224">(</span><span class="op" id="3579225">)</span><span class="op" id="3579226">,</span>&nbsp;<span class="builtintype" id="3579228">nil</span><br>
<span class="lineno">150</span><span class="op" id="3579232">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579235">//&nbsp;Length</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579246">//&nbsp;length&nbsp;returns&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;item,&nbsp;with&nbsp;an&nbsp;error&nbsp;if&nbsp;it&nbsp;has&nbsp;no&nbsp;defined&nbsp;length.</span><br>
<span class="lineno">155</span><span class="keyword" id="3579331">func</span>&nbsp;<span class="ident" id="3579336">length</span><span class="op" id="3579342">(</span><span class="ident" id="3579343">item</span>&nbsp;<span class="keyword" id="3579348">interface</span><span class="op" id="3579357">{</span><span class="op" id="3579358">}</span><span class="op" id="3579359">)</span>&nbsp;<span class="op" id="3579361">(</span><span class="builtintype" id="3579362">int</span><span class="op" id="3579365">,</span>&nbsp;<span class="builtintype" id="3579367">error</span><span class="op" id="3579372">)</span>&nbsp;<span class="op" id="3579374">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579377">v</span><span class="op" id="3579378">,</span>&nbsp;<span class="ident" id="3579380">isNil</span>&nbsp;<span class="op" id="3579386">:=</span>&nbsp;<span class="ident" id="3579389">indirect</span><span class="op" id="3579397">(</span><span class="ident" id="3579398">reflect</span><span class="op" id="3579405">.</span><span class="ident" id="3579406">ValueOf</span><span class="op" id="3579413">(</span><span class="ident" id="3579414">item</span><span class="op" id="3579418">)</span><span class="op" id="3579419">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579422">if</span>&nbsp;<span class="ident" id="3579425">isNil</span>&nbsp;<span class="op" id="3579431">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579435">return</span>&nbsp;<span class="num" id="3579442">0</span><span class="op" id="3579443">,</span>&nbsp;<span class="ident" id="3579445">fmt</span><span class="op" id="3579448">.</span><span class="ident" id="3579449">Errorf</span><span class="op" id="3579455">(</span><span class="string" id="3579456">&#34;len&nbsp;of&nbsp;nil&nbsp;pointer&#34;</span><span class="op" id="3579476">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579479">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579482">switch</span>&nbsp;<span class="ident" id="3579489">v</span><span class="op" id="3579490">.</span><span class="ident" id="3579491">Kind</span><span class="op" id="3579495">(</span><span class="op" id="3579496">)</span>&nbsp;<span class="op" id="3579498">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579501">case</span>&nbsp;<span class="ident" id="3579506">reflect</span><span class="op" id="3579513">.</span><span class="ident" id="3579514">Array</span><span class="op" id="3579519">,</span>&nbsp;<span class="ident" id="3579521">reflect</span><span class="op" id="3579528">.</span><span class="ident" id="3579529">Chan</span><span class="op" id="3579533">,</span>&nbsp;<span class="ident" id="3579535">reflect</span><span class="op" id="3579542">.</span><span class="ident" id="3579543">Map</span><span class="op" id="3579546">,</span>&nbsp;<span class="ident" id="3579548">reflect</span><span class="op" id="3579555">.</span><span class="ident" id="3579556">Slice</span><span class="op" id="3579561">,</span>&nbsp;<span class="ident" id="3579563">reflect</span><span class="op" id="3579570">.</span><span class="ident" id="3579571">String</span><span class="op" id="3579577">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579581">return</span>&nbsp;<span class="ident" id="3579588">v</span><span class="op" id="3579589">.</span><span class="ident" id="3579590">Len</span><span class="op" id="3579593">(</span><span class="op" id="3579594">)</span><span class="op" id="3579595">,</span>&nbsp;<span class="builtintype" id="3579597">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3579602">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579605">return</span>&nbsp;<span class="num" id="3579612">0</span><span class="op" id="3579613">,</span>&nbsp;<span class="ident" id="3579615">fmt</span><span class="op" id="3579618">.</span><span class="ident" id="3579619">Errorf</span><span class="op" id="3579625">(</span><span class="string" id="3579626">&#34;len&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3579642">,</span>&nbsp;<span class="ident" id="3579644">v</span><span class="op" id="3579645">.</span><span class="ident" id="3579646">Type</span><span class="op" id="3579650">(</span><span class="op" id="3579651">)</span><span class="op" id="3579652">)</span><br>
<span class="lineno">165</span><span class="op" id="3579654">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579657">//&nbsp;Function&nbsp;invocation</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3579681">//&nbsp;call&nbsp;returns&nbsp;the&nbsp;result&nbsp;of&nbsp;evaluating&nbsp;the&nbsp;first&nbsp;argument&nbsp;as&nbsp;a&nbsp;function.</span><br>
<span class="lineno">170</span><span class="comment" id="3579756">//&nbsp;The&nbsp;function&nbsp;must&nbsp;return&nbsp;1&nbsp;result,&nbsp;or&nbsp;2&nbsp;results,&nbsp;the&nbsp;second&nbsp;of&nbsp;which&nbsp;is&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="keyword" id="3579841">func</span>&nbsp;<span class="ident" id="3579846">call</span><span class="op" id="3579850">(</span><span class="ident" id="3579851">fn</span>&nbsp;<span class="keyword" id="3579854">interface</span><span class="op" id="3579863">{</span><span class="op" id="3579864">}</span><span class="op" id="3579865">,</span>&nbsp;<span class="ident" id="3579867">args</span>&nbsp;<span class="op" id="3579872">...</span><span class="keyword" id="3579875">interface</span><span class="op" id="3579884">{</span><span class="op" id="3579885">}</span><span class="op" id="3579886">)</span>&nbsp;<span class="op" id="3579888">(</span><span class="keyword" id="3579889">interface</span><span class="op" id="3579898">{</span><span class="op" id="3579899">}</span><span class="op" id="3579900">,</span>&nbsp;<span class="builtintype" id="3579902">error</span><span class="op" id="3579907">)</span>&nbsp;<span class="op" id="3579909">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579912">v</span>&nbsp;<span class="op" id="3579914">:=</span>&nbsp;<span class="ident" id="3579917">reflect</span><span class="op" id="3579924">.</span><span class="ident" id="3579925">ValueOf</span><span class="op" id="3579932">(</span><span class="ident" id="3579933">fn</span><span class="op" id="3579935">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3579938">typ</span>&nbsp;<span class="op" id="3579942">:=</span>&nbsp;<span class="ident" id="3579945">v</span><span class="op" id="3579946">.</span><span class="ident" id="3579947">Type</span><span class="op" id="3579951">(</span><span class="op" id="3579952">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579955">if</span>&nbsp;<span class="ident" id="3579958">typ</span><span class="op" id="3579961">.</span><span class="ident" id="3579962">Kind</span><span class="op" id="3579966">(</span><span class="op" id="3579967">)</span>&nbsp;<span class="op" id="3579969">!=</span>&nbsp;<span class="ident" id="3579972">reflect</span><span class="op" id="3579979">.</span><span class="ident" id="3579980">Func</span>&nbsp;<span class="op" id="3579985">{</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3579989">return</span>&nbsp;<span class="builtintype" id="3579996">nil</span><span class="op" id="3579999">,</span>&nbsp;<span class="ident" id="3580001">fmt</span><span class="op" id="3580004">.</span><span class="ident" id="3580005">Errorf</span><span class="op" id="3580011">(</span><span class="string" id="3580012">&#34;non-function&nbsp;of&nbsp;type&nbsp;%s&#34;</span><span class="op" id="3580037">,</span>&nbsp;<span class="ident" id="3580039">typ</span><span class="op" id="3580042">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580045">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580048">if</span>&nbsp;<span class="op" id="3580051">!</span><span class="ident" id="3580052">goodFunc</span><span class="op" id="3580060">(</span><span class="ident" id="3580061">typ</span><span class="op" id="3580064">)</span>&nbsp;<span class="op" id="3580066">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580070">return</span>&nbsp;<span class="builtintype" id="3580077">nil</span><span class="op" id="3580080">,</span>&nbsp;<span class="ident" id="3580082">fmt</span><span class="op" id="3580085">.</span><span class="ident" id="3580086">Errorf</span><span class="op" id="3580092">(</span><span class="string" id="3580093">&#34;function&nbsp;called&nbsp;with&nbsp;%d&nbsp;args;&nbsp;should&nbsp;be&nbsp;1&nbsp;or&nbsp;2&#34;</span><span class="op" id="3580141">,</span>&nbsp;<span class="ident" id="3580143">typ</span><span class="op" id="3580146">.</span><span class="ident" id="3580147">NumOut</span><span class="op" id="3580153">(</span><span class="op" id="3580154">)</span><span class="op" id="3580155">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580158">}</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580161">numIn</span>&nbsp;<span class="op" id="3580167">:=</span>&nbsp;<span class="ident" id="3580170">typ</span><span class="op" id="3580173">.</span><span class="ident" id="3580174">NumIn</span><span class="op" id="3580179">(</span><span class="op" id="3580180">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580183">var</span>&nbsp;<span class="ident" id="3580187">dddType</span>&nbsp;<span class="ident" id="3580195">reflect</span><span class="op" id="3580202">.</span><span class="ident" id="3580203">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580209">if</span>&nbsp;<span class="ident" id="3580212">typ</span><span class="op" id="3580215">.</span><span class="ident" id="3580216">IsVariadic</span><span class="op" id="3580226">(</span><span class="op" id="3580227">)</span>&nbsp;<span class="op" id="3580229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580233">if</span>&nbsp;<span class="builtinfunc" id="3580236">len</span><span class="op" id="3580239">(</span><span class="ident" id="3580240">args</span><span class="op" id="3580244">)</span>&nbsp;<span class="op" id="3580246">&lt;</span>&nbsp;<span class="ident" id="3580248">numIn</span><span class="op" id="3580253">-</span><span class="num" id="3580254">1</span>&nbsp;<span class="op" id="3580256">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580261">return</span>&nbsp;<span class="builtintype" id="3580268">nil</span><span class="op" id="3580271">,</span>&nbsp;<span class="ident" id="3580273">fmt</span><span class="op" id="3580276">.</span><span class="ident" id="3580277">Errorf</span><span class="op" id="3580283">(</span><span class="string" id="3580284">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;at&nbsp;least&nbsp;%d&#34;</span><span class="op" id="3580331">,</span>&nbsp;<span class="builtinfunc" id="3580333">len</span><span class="op" id="3580336">(</span><span class="ident" id="3580337">args</span><span class="op" id="3580341">)</span><span class="op" id="3580342">,</span>&nbsp;<span class="ident" id="3580344">numIn</span><span class="op" id="3580349">-</span><span class="num" id="3580350">1</span><span class="op" id="3580351">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580355">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580359">dddType</span>&nbsp;<span class="op" id="3580367">=</span>&nbsp;<span class="ident" id="3580369">typ</span><span class="op" id="3580372">.</span><span class="ident" id="3580373">In</span><span class="op" id="3580375">(</span><span class="ident" id="3580376">numIn</span>&nbsp;<span class="op" id="3580382">-</span>&nbsp;<span class="num" id="3580384">1</span><span class="op" id="3580385">)</span><span class="op" id="3580386">.</span><span class="ident" id="3580387">Elem</span><span class="op" id="3580391">(</span><span class="op" id="3580392">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580395">}</span>&nbsp;<span class="keyword" id="3580397">else</span>&nbsp;<span class="op" id="3580402">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580406">if</span>&nbsp;<span class="builtinfunc" id="3580409">len</span><span class="op" id="3580412">(</span><span class="ident" id="3580413">args</span><span class="op" id="3580417">)</span>&nbsp;<span class="op" id="3580419">!=</span>&nbsp;<span class="ident" id="3580422">numIn</span>&nbsp;<span class="op" id="3580428">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580433">return</span>&nbsp;<span class="builtintype" id="3580440">nil</span><span class="op" id="3580443">,</span>&nbsp;<span class="ident" id="3580445">fmt</span><span class="op" id="3580448">.</span><span class="ident" id="3580449">Errorf</span><span class="op" id="3580455">(</span><span class="string" id="3580456">&#34;wrong&nbsp;number&nbsp;of&nbsp;args:&nbsp;got&nbsp;%d&nbsp;want&nbsp;%d&#34;</span><span class="op" id="3580494">,</span>&nbsp;<span class="builtinfunc" id="3580496">len</span><span class="op" id="3580499">(</span><span class="ident" id="3580500">args</span><span class="op" id="3580504">)</span><span class="op" id="3580505">,</span>&nbsp;<span class="ident" id="3580507">numIn</span><span class="op" id="3580512">)</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580516">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580519">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580522">argv</span>&nbsp;<span class="op" id="3580527">:=</span>&nbsp;<span class="builtinfunc" id="3580530">make</span><span class="op" id="3580534">(</span><span class="op" id="3580535">[</span><span class="op" id="3580536">]</span><span class="ident" id="3580537">reflect</span><span class="op" id="3580544">.</span><span class="ident" id="3580545">Value</span><span class="op" id="3580550">,</span>&nbsp;<span class="builtinfunc" id="3580552">len</span><span class="op" id="3580555">(</span><span class="ident" id="3580556">args</span><span class="op" id="3580560">)</span><span class="op" id="3580561">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580564">for</span>&nbsp;<span class="ident" id="3580568">i</span><span class="op" id="3580569">,</span>&nbsp;<span class="ident" id="3580571">arg</span>&nbsp;<span class="op" id="3580575">:=</span>&nbsp;<span class="keyword" id="3580578">range</span>&nbsp;<span class="ident" id="3580584">args</span>&nbsp;<span class="op" id="3580589">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580593">value</span>&nbsp;<span class="op" id="3580599">:=</span>&nbsp;<span class="ident" id="3580602">reflect</span><span class="op" id="3580609">.</span><span class="ident" id="3580610">ValueOf</span><span class="op" id="3580617">(</span><span class="ident" id="3580618">arg</span><span class="op" id="3580621">)</span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3580625">//&nbsp;Compute&nbsp;the&nbsp;expected&nbsp;type.&nbsp;Clumsy&nbsp;because&nbsp;of&nbsp;variadics.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580686">var</span>&nbsp;<span class="ident" id="3580690">argType</span>&nbsp;<span class="ident" id="3580698">reflect</span><span class="op" id="3580705">.</span><span class="ident" id="3580706">Type</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580713">if</span>&nbsp;<span class="op" id="3580716">!</span><span class="ident" id="3580717">typ</span><span class="op" id="3580720">.</span><span class="ident" id="3580721">IsVariadic</span><span class="op" id="3580731">(</span><span class="op" id="3580732">)</span>&nbsp;<span class="op" id="3580734">||</span>&nbsp;<span class="ident" id="3580737">i</span>&nbsp;<span class="op" id="3580739">&lt;</span>&nbsp;<span class="ident" id="3580741">numIn</span><span class="op" id="3580746">-</span><span class="num" id="3580747">1</span>&nbsp;<span class="op" id="3580749">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580754">argType</span>&nbsp;<span class="op" id="3580762">=</span>&nbsp;<span class="ident" id="3580764">typ</span><span class="op" id="3580767">.</span><span class="ident" id="3580768">In</span><span class="op" id="3580770">(</span><span class="ident" id="3580771">i</span><span class="op" id="3580772">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580776">}</span>&nbsp;<span class="keyword" id="3580778">else</span>&nbsp;<span class="op" id="3580783">{</span><br>
<span class="lineno">200</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580788">argType</span>&nbsp;<span class="op" id="3580796">=</span>&nbsp;<span class="ident" id="3580798">dddType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580812">if</span>&nbsp;<span class="op" id="3580815">!</span><span class="ident" id="3580816">value</span><span class="op" id="3580821">.</span><span class="ident" id="3580822">IsValid</span><span class="op" id="3580829">(</span><span class="op" id="3580830">)</span>&nbsp;<span class="op" id="3580832">&amp;&amp;</span>&nbsp;<span class="ident" id="3580835">canBeNil</span><span class="op" id="3580843">(</span><span class="ident" id="3580844">argType</span><span class="op" id="3580851">)</span>&nbsp;<span class="op" id="3580853">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3580858">value</span>&nbsp;<span class="op" id="3580864">=</span>&nbsp;<span class="ident" id="3580866">reflect</span><span class="op" id="3580873">.</span><span class="ident" id="3580874">Zero</span><span class="op" id="3580878">(</span><span class="ident" id="3580879">argType</span><span class="op" id="3580886">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3580890">}</span><br>
<span class="lineno">205</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580894">if</span>&nbsp;<span class="op" id="3580897">!</span><span class="ident" id="3580898">value</span><span class="op" id="3580903">.</span><span class="ident" id="3580904">Type</span><span class="op" id="3580908">(</span><span class="op" id="3580909">)</span><span class="op" id="3580910">.</span><span class="ident" id="3580911">AssignableTo</span><span class="op" id="3580923">(</span><span class="ident" id="3580924">argType</span><span class="op" id="3580931">)</span>&nbsp;<span class="op" id="3580933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3580938">return</span>&nbsp;<span class="builtintype" id="3580945">nil</span><span class="op" id="3580948">,</span>&nbsp;<span class="ident" id="3580950">fmt</span><span class="op" id="3580953">.</span><span class="ident" id="3580954">Errorf</span><span class="op" id="3580960">(</span><span class="string" id="3580961">&#34;arg&nbsp;%d&nbsp;has&nbsp;type&nbsp;%s;&nbsp;should&nbsp;be&nbsp;%s&#34;</span><span class="op" id="3580995">,</span>&nbsp;<span class="ident" id="3580997">i</span><span class="op" id="3580998">,</span>&nbsp;<span class="ident" id="3581000">value</span><span class="op" id="3581005">.</span><span class="ident" id="3581006">Type</span><span class="op" id="3581010">(</span><span class="op" id="3581011">)</span><span class="op" id="3581012">,</span>&nbsp;<span class="ident" id="3581014">argType</span><span class="op" id="3581021">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581025">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581029">argv</span><span class="op" id="3581033">[</span><span class="ident" id="3581034">i</span><span class="op" id="3581035">]</span>&nbsp;<span class="op" id="3581037">=</span>&nbsp;<span class="ident" id="3581039">value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581046">}</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581049">result</span>&nbsp;<span class="op" id="3581056">:=</span>&nbsp;<span class="ident" id="3581059">v</span><span class="op" id="3581060">.</span><span class="ident" id="3581061">Call</span><span class="op" id="3581065">(</span><span class="ident" id="3581066">argv</span><span class="op" id="3581070">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581073">if</span>&nbsp;<span class="builtinfunc" id="3581076">len</span><span class="op" id="3581079">(</span><span class="ident" id="3581080">result</span><span class="op" id="3581086">)</span>&nbsp;<span class="op" id="3581088">==</span>&nbsp;<span class="num" id="3581091">2</span>&nbsp;<span class="op" id="3581093">&amp;&amp;</span>&nbsp;<span class="op" id="3581096">!</span><span class="ident" id="3581097">result</span><span class="op" id="3581103">[</span><span class="num" id="3581104">1</span><span class="op" id="3581105">]</span><span class="op" id="3581106">.</span><span class="ident" id="3581107">IsNil</span><span class="op" id="3581112">(</span><span class="op" id="3581113">)</span>&nbsp;<span class="op" id="3581115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581119">return</span>&nbsp;<span class="ident" id="3581126">result</span><span class="op" id="3581132">[</span><span class="num" id="3581133">0</span><span class="op" id="3581134">]</span><span class="op" id="3581135">.</span><span class="ident" id="3581136">Interface</span><span class="op" id="3581145">(</span><span class="op" id="3581146">)</span><span class="op" id="3581147">,</span>&nbsp;<span class="ident" id="3581149">result</span><span class="op" id="3581155">[</span><span class="num" id="3581156">1</span><span class="op" id="3581157">]</span><span class="op" id="3581158">.</span><span class="ident" id="3581159">Interface</span><span class="op" id="3581168">(</span><span class="op" id="3581169">)</span><span class="op" id="3581170">.</span><span class="op" id="3581171">(</span><span class="builtintype" id="3581172">error</span><span class="op" id="3581177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581180">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581183">return</span>&nbsp;<span class="ident" id="3581190">result</span><span class="op" id="3581196">[</span><span class="num" id="3581197">0</span><span class="op" id="3581198">]</span><span class="op" id="3581199">.</span><span class="ident" id="3581200">Interface</span><span class="op" id="3581209">(</span><span class="op" id="3581210">)</span><span class="op" id="3581211">,</span>&nbsp;<span class="builtintype" id="3581213">nil</span><br>
<span class="lineno">215</span><span class="op" id="3581217">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581220">//&nbsp;Boolean&nbsp;logic.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3581239">func</span>&nbsp;<span class="ident" id="3581244">truth</span><span class="op" id="3581249">(</span><span class="ident" id="3581250">a</span>&nbsp;<span class="keyword" id="3581252">interface</span><span class="op" id="3581261">{</span><span class="op" id="3581262">}</span><span class="op" id="3581263">)</span>&nbsp;<span class="builtintype" id="3581265">bool</span>&nbsp;<span class="op" id="3581270">{</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581273">t</span><span class="op" id="3581274">,</span>&nbsp;<span class="ident" id="3581276">_</span>&nbsp;<span class="op" id="3581278">:=</span>&nbsp;<span class="ident" id="3581281">isTrue</span><span class="op" id="3581287">(</span><span class="ident" id="3581288">reflect</span><span class="op" id="3581295">.</span><span class="ident" id="3581296">ValueOf</span><span class="op" id="3581303">(</span><span class="ident" id="3581304">a</span><span class="op" id="3581305">)</span><span class="op" id="3581306">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581309">return</span>&nbsp;<span class="ident" id="3581316">t</span><br>
<span class="lineno"></span><span class="op" id="3581318">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581321">//&nbsp;and&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;AND&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">225</span><span class="comment" id="3581381">//&nbsp;the&nbsp;first&nbsp;false&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="3581446">func</span>&nbsp;<span class="ident" id="3581451">and</span><span class="op" id="3581454">(</span><span class="ident" id="3581455">arg0</span>&nbsp;<span class="keyword" id="3581460">interface</span><span class="op" id="3581469">{</span><span class="op" id="3581470">}</span><span class="op" id="3581471">,</span>&nbsp;<span class="ident" id="3581473">args</span>&nbsp;<span class="op" id="3581478">...</span><span class="keyword" id="3581481">interface</span><span class="op" id="3581490">{</span><span class="op" id="3581491">}</span><span class="op" id="3581492">)</span>&nbsp;<span class="keyword" id="3581494">interface</span><span class="op" id="3581503">{</span><span class="op" id="3581504">}</span>&nbsp;<span class="op" id="3581506">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581509">if</span>&nbsp;<span class="op" id="3581512">!</span><span class="ident" id="3581513">truth</span><span class="op" id="3581518">(</span><span class="ident" id="3581519">arg0</span><span class="op" id="3581523">)</span>&nbsp;<span class="op" id="3581525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581529">return</span>&nbsp;<span class="ident" id="3581536">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581542">}</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581545">for</span>&nbsp;<span class="ident" id="3581549">i</span>&nbsp;<span class="op" id="3581551">:=</span>&nbsp;<span class="keyword" id="3581554">range</span>&nbsp;<span class="ident" id="3581560">args</span>&nbsp;<span class="op" id="3581565">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581569">arg0</span>&nbsp;<span class="op" id="3581574">=</span>&nbsp;<span class="ident" id="3581576">args</span><span class="op" id="3581580">[</span><span class="ident" id="3581581">i</span><span class="op" id="3581582">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581586">if</span>&nbsp;<span class="op" id="3581589">!</span><span class="ident" id="3581590">truth</span><span class="op" id="3581595">(</span><span class="ident" id="3581596">arg0</span><span class="op" id="3581600">)</span>&nbsp;<span class="op" id="3581602">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581607">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581615">}</span><br>
<span class="lineno">235</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581618">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581621">return</span>&nbsp;<span class="ident" id="3581628">arg0</span><br>
<span class="lineno"></span><span class="op" id="3581633">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581636">//&nbsp;or&nbsp;computes&nbsp;the&nbsp;Boolean&nbsp;OR&nbsp;of&nbsp;its&nbsp;arguments,&nbsp;returning</span><br>
<span class="lineno">240</span><span class="comment" id="3581694">//&nbsp;the&nbsp;first&nbsp;true&nbsp;argument&nbsp;it&nbsp;encounters,&nbsp;or&nbsp;the&nbsp;last&nbsp;argument.</span><br>
<span class="lineno"></span><span class="keyword" id="3581758">func</span>&nbsp;<span class="ident" id="3581763">or</span><span class="op" id="3581765">(</span><span class="ident" id="3581766">arg0</span>&nbsp;<span class="keyword" id="3581771">interface</span><span class="op" id="3581780">{</span><span class="op" id="3581781">}</span><span class="op" id="3581782">,</span>&nbsp;<span class="ident" id="3581784">args</span>&nbsp;<span class="op" id="3581789">...</span><span class="keyword" id="3581792">interface</span><span class="op" id="3581801">{</span><span class="op" id="3581802">}</span><span class="op" id="3581803">)</span>&nbsp;<span class="keyword" id="3581805">interface</span><span class="op" id="3581814">{</span><span class="op" id="3581815">}</span>&nbsp;<span class="op" id="3581817">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581820">if</span>&nbsp;<span class="ident" id="3581823">truth</span><span class="op" id="3581828">(</span><span class="ident" id="3581829">arg0</span><span class="op" id="3581833">)</span>&nbsp;<span class="op" id="3581835">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581839">return</span>&nbsp;<span class="ident" id="3581846">arg0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581852">}</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581855">for</span>&nbsp;<span class="ident" id="3581859">i</span>&nbsp;<span class="op" id="3581861">:=</span>&nbsp;<span class="keyword" id="3581864">range</span>&nbsp;<span class="ident" id="3581870">args</span>&nbsp;<span class="op" id="3581875">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3581879">arg0</span>&nbsp;<span class="op" id="3581884">=</span>&nbsp;<span class="ident" id="3581886">args</span><span class="op" id="3581890">[</span><span class="ident" id="3581891">i</span><span class="op" id="3581892">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581896">if</span>&nbsp;<span class="ident" id="3581899">truth</span><span class="op" id="3581904">(</span><span class="ident" id="3581905">arg0</span><span class="op" id="3581909">)</span>&nbsp;<span class="op" id="3581911">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581916">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581924">}</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3581927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3581930">return</span>&nbsp;<span class="ident" id="3581937">arg0</span><br>
<span class="lineno"></span><span class="op" id="3581942">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3581945">//&nbsp;not&nbsp;returns&nbsp;the&nbsp;Boolean&nbsp;negation&nbsp;of&nbsp;its&nbsp;argument.</span><br>
<span class="lineno">255</span><span class="keyword" id="3581998">func</span>&nbsp;<span class="ident" id="3582003">not</span><span class="op" id="3582006">(</span><span class="ident" id="3582007">arg</span>&nbsp;<span class="keyword" id="3582011">interface</span><span class="op" id="3582020">{</span><span class="op" id="3582021">}</span><span class="op" id="3582022">)</span>&nbsp;<span class="op" id="3582024">(</span><span class="ident" id="3582025">truth</span>&nbsp;<span class="builtintype" id="3582031">bool</span><span class="op" id="3582035">)</span>&nbsp;<span class="op" id="3582037">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582040">truth</span><span class="op" id="3582045">,</span>&nbsp;<span class="ident" id="3582047">_</span>&nbsp;<span class="op" id="3582049">=</span>&nbsp;<span class="ident" id="3582051">isTrue</span><span class="op" id="3582057">(</span><span class="ident" id="3582058">reflect</span><span class="op" id="3582065">.</span><span class="ident" id="3582066">ValueOf</span><span class="op" id="3582073">(</span><span class="ident" id="3582074">arg</span><span class="op" id="3582077">)</span><span class="op" id="3582078">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582081">return</span>&nbsp;<span class="op" id="3582088">!</span><span class="ident" id="3582089">truth</span><br>
<span class="lineno"></span><span class="op" id="3582095">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">260</span><span class="comment" id="3582098">//&nbsp;Comparison.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3582114">//&nbsp;TODO:&nbsp;Perhaps&nbsp;allow&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&nbsp;integers.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3582187">var</span>&nbsp;<span class="op" id="3582191">(</span><br>
<span class="lineno">265</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582194">errBadComparisonType</span>&nbsp;<span class="op" id="3582215">=</span>&nbsp;<span class="ident" id="3582217">errors</span><span class="op" id="3582223">.</span><span class="ident" id="3582224">New</span><span class="op" id="3582227">(</span><span class="string" id="3582228">&#34;invalid&nbsp;type&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3582257">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582260">errBadComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3582281">=</span>&nbsp;<span class="ident" id="3582283">errors</span><span class="op" id="3582289">.</span><span class="ident" id="3582290">New</span><span class="op" id="3582293">(</span><span class="string" id="3582294">&#34;incompatible&nbsp;types&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3582329">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582332">errNoComparison</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3582353">=</span>&nbsp;<span class="ident" id="3582355">errors</span><span class="op" id="3582361">.</span><span class="ident" id="3582362">New</span><span class="op" id="3582365">(</span><span class="string" id="3582366">&#34;missing&nbsp;argument&nbsp;for&nbsp;comparison&#34;</span><span class="op" id="3582399">)</span><br>
<span class="lineno"></span><span class="op" id="3582401">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">270</span><span class="keyword" id="3582404">type</span>&nbsp;<span class="ident" id="3582409">kind</span>&nbsp;<span class="builtintype" id="3582414">int</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3582419">const</span>&nbsp;<span class="op" id="3582425">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582428">invalidKind</span>&nbsp;<span class="ident" id="3582440">kind</span>&nbsp;<span class="op" id="3582445">=</span>&nbsp;<span class="ident" id="3582447">iota</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582453">boolKind</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582463">complexKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582476">intKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582485">floatKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582496">integerKind</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582509">stringKind</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3582521">uintKind</span><br>
<span class="lineno"></span><span class="op" id="3582530">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3582533">func</span>&nbsp;<span class="ident" id="3582538">basicKind</span><span class="op" id="3582547">(</span><span class="ident" id="3582548">v</span>&nbsp;<span class="ident" id="3582550">reflect</span><span class="op" id="3582557">.</span><span class="ident" id="3582558">Value</span><span class="op" id="3582563">)</span>&nbsp;<span class="op" id="3582565">(</span><span class="ident" id="3582566">kind</span><span class="op" id="3582570">,</span>&nbsp;<span class="builtintype" id="3582572">error</span><span class="op" id="3582577">)</span>&nbsp;<span class="op" id="3582579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582582">switch</span>&nbsp;<span class="ident" id="3582589">v</span><span class="op" id="3582590">.</span><span class="ident" id="3582591">Kind</span><span class="op" id="3582595">(</span><span class="op" id="3582596">)</span>&nbsp;<span class="op" id="3582598">{</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582601">case</span>&nbsp;<span class="ident" id="3582606">reflect</span><span class="op" id="3582613">.</span><span class="ident" id="3582614">Bool</span><span class="op" id="3582618">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582622">return</span>&nbsp;<span class="ident" id="3582629">boolKind</span><span class="op" id="3582637">,</span>&nbsp;<span class="builtintype" id="3582639">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582644">case</span>&nbsp;<span class="ident" id="3582649">reflect</span><span class="op" id="3582656">.</span><span class="ident" id="3582657">Int</span><span class="op" id="3582660">,</span>&nbsp;<span class="ident" id="3582662">reflect</span><span class="op" id="3582669">.</span><span class="ident" id="3582670">Int8</span><span class="op" id="3582674">,</span>&nbsp;<span class="ident" id="3582676">reflect</span><span class="op" id="3582683">.</span><span class="ident" id="3582684">Int16</span><span class="op" id="3582689">,</span>&nbsp;<span class="ident" id="3582691">reflect</span><span class="op" id="3582698">.</span><span class="ident" id="3582699">Int32</span><span class="op" id="3582704">,</span>&nbsp;<span class="ident" id="3582706">reflect</span><span class="op" id="3582713">.</span><span class="ident" id="3582714">Int64</span><span class="op" id="3582719">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582723">return</span>&nbsp;<span class="ident" id="3582730">intKind</span><span class="op" id="3582737">,</span>&nbsp;<span class="builtintype" id="3582739">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582744">case</span>&nbsp;<span class="ident" id="3582749">reflect</span><span class="op" id="3582756">.</span><span class="ident" id="3582757">Uint</span><span class="op" id="3582761">,</span>&nbsp;<span class="ident" id="3582763">reflect</span><span class="op" id="3582770">.</span><span class="ident" id="3582771">Uint8</span><span class="op" id="3582776">,</span>&nbsp;<span class="ident" id="3582778">reflect</span><span class="op" id="3582785">.</span><span class="ident" id="3582786">Uint16</span><span class="op" id="3582792">,</span>&nbsp;<span class="ident" id="3582794">reflect</span><span class="op" id="3582801">.</span><span class="ident" id="3582802">Uint32</span><span class="op" id="3582808">,</span>&nbsp;<span class="ident" id="3582810">reflect</span><span class="op" id="3582817">.</span><span class="ident" id="3582818">Uint64</span><span class="op" id="3582824">,</span>&nbsp;<span class="ident" id="3582826">reflect</span><span class="op" id="3582833">.</span><span class="ident" id="3582834">Uintptr</span><span class="op" id="3582841">:</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582845">return</span>&nbsp;<span class="ident" id="3582852">uintKind</span><span class="op" id="3582860">,</span>&nbsp;<span class="builtintype" id="3582862">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582867">case</span>&nbsp;<span class="ident" id="3582872">reflect</span><span class="op" id="3582879">.</span><span class="ident" id="3582880">Float32</span><span class="op" id="3582887">,</span>&nbsp;<span class="ident" id="3582889">reflect</span><span class="op" id="3582896">.</span><span class="ident" id="3582897">Float64</span><span class="op" id="3582904">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582908">return</span>&nbsp;<span class="ident" id="3582915">floatKind</span><span class="op" id="3582924">,</span>&nbsp;<span class="builtintype" id="3582926">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582931">case</span>&nbsp;<span class="ident" id="3582936">reflect</span><span class="op" id="3582943">.</span><span class="ident" id="3582944">Complex64</span><span class="op" id="3582953">,</span>&nbsp;<span class="ident" id="3582955">reflect</span><span class="op" id="3582962">.</span><span class="ident" id="3582963">Complex128</span><span class="op" id="3582973">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3582977">return</span>&nbsp;<span class="ident" id="3582984">complexKind</span><span class="op" id="3582995">,</span>&nbsp;<span class="builtintype" id="3582997">nil</span><br>
<span class="lineno">295</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583002">case</span>&nbsp;<span class="ident" id="3583007">reflect</span><span class="op" id="3583014">.</span><span class="ident" id="3583015">String</span><span class="op" id="3583021">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583025">return</span>&nbsp;<span class="ident" id="3583032">stringKind</span><span class="op" id="3583042">,</span>&nbsp;<span class="builtintype" id="3583044">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583049">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583052">return</span>&nbsp;<span class="ident" id="3583059">invalidKind</span><span class="op" id="3583070">,</span>&nbsp;<span class="ident" id="3583072">errBadComparisonType</span><br>
<span class="lineno"></span><span class="op" id="3583093">}</span><br>
<span class="lineno">300</span><br>
<span class="lineno"></span><span class="comment" id="3583096">//&nbsp;eq&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;==&nbsp;b&nbsp;||&nbsp;a&nbsp;==&nbsp;c&nbsp;||&nbsp;...</span><br>
<span class="lineno"></span><span class="keyword" id="3583151">func</span>&nbsp;<span class="ident" id="3583156">eq</span><span class="op" id="3583158">(</span><span class="ident" id="3583159">arg1</span>&nbsp;<span class="keyword" id="3583164">interface</span><span class="op" id="3583173">{</span><span class="op" id="3583174">}</span><span class="op" id="3583175">,</span>&nbsp;<span class="ident" id="3583177">arg2</span>&nbsp;<span class="op" id="3583182">...</span><span class="keyword" id="3583185">interface</span><span class="op" id="3583194">{</span><span class="op" id="3583195">}</span><span class="op" id="3583196">)</span>&nbsp;<span class="op" id="3583198">(</span><span class="builtintype" id="3583199">bool</span><span class="op" id="3583203">,</span>&nbsp;<span class="builtintype" id="3583205">error</span><span class="op" id="3583210">)</span>&nbsp;<span class="op" id="3583212">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583215">v1</span>&nbsp;<span class="op" id="3583218">:=</span>&nbsp;<span class="ident" id="3583221">reflect</span><span class="op" id="3583228">.</span><span class="ident" id="3583229">ValueOf</span><span class="op" id="3583236">(</span><span class="ident" id="3583237">arg1</span><span class="op" id="3583241">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583244">k1</span><span class="op" id="3583246">,</span>&nbsp;<span class="ident" id="3583248">err</span>&nbsp;<span class="op" id="3583252">:=</span>&nbsp;<span class="ident" id="3583255">basicKind</span><span class="op" id="3583264">(</span><span class="ident" id="3583265">v1</span><span class="op" id="3583267">)</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583270">if</span>&nbsp;<span class="ident" id="3583273">err</span>&nbsp;<span class="op" id="3583277">!=</span>&nbsp;<span class="builtintype" id="3583280">nil</span>&nbsp;<span class="op" id="3583284">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583288">return</span>&nbsp;<span class="builtintype" id="3583295">false</span><span class="op" id="3583300">,</span>&nbsp;<span class="ident" id="3583302">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583307">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583310">if</span>&nbsp;<span class="builtinfunc" id="3583313">len</span><span class="op" id="3583316">(</span><span class="ident" id="3583317">arg2</span><span class="op" id="3583321">)</span>&nbsp;<span class="op" id="3583323">==</span>&nbsp;<span class="num" id="3583326">0</span>&nbsp;<span class="op" id="3583328">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583332">return</span>&nbsp;<span class="builtintype" id="3583339">false</span><span class="op" id="3583344">,</span>&nbsp;<span class="ident" id="3583346">errNoComparison</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583363">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583366">for</span>&nbsp;<span class="ident" id="3583370">_</span><span class="op" id="3583371">,</span>&nbsp;<span class="ident" id="3583373">arg</span>&nbsp;<span class="op" id="3583377">:=</span>&nbsp;<span class="keyword" id="3583380">range</span>&nbsp;<span class="ident" id="3583386">arg2</span>&nbsp;<span class="op" id="3583391">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583395">v2</span>&nbsp;<span class="op" id="3583398">:=</span>&nbsp;<span class="ident" id="3583401">reflect</span><span class="op" id="3583408">.</span><span class="ident" id="3583409">ValueOf</span><span class="op" id="3583416">(</span><span class="ident" id="3583417">arg</span><span class="op" id="3583420">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583424">k2</span><span class="op" id="3583426">,</span>&nbsp;<span class="ident" id="3583428">err</span>&nbsp;<span class="op" id="3583432">:=</span>&nbsp;<span class="ident" id="3583435">basicKind</span><span class="op" id="3583444">(</span><span class="ident" id="3583445">v2</span><span class="op" id="3583447">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583451">if</span>&nbsp;<span class="ident" id="3583454">err</span>&nbsp;<span class="op" id="3583458">!=</span>&nbsp;<span class="builtintype" id="3583461">nil</span>&nbsp;<span class="op" id="3583465">{</span><br>
<span class="lineno">315</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583470">return</span>&nbsp;<span class="builtintype" id="3583477">false</span><span class="op" id="3583482">,</span>&nbsp;<span class="ident" id="3583484">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583490">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583494">truth</span>&nbsp;<span class="op" id="3583500">:=</span>&nbsp;<span class="builtintype" id="3583503">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583511">if</span>&nbsp;<span class="ident" id="3583514">k1</span>&nbsp;<span class="op" id="3583517">!=</span>&nbsp;<span class="ident" id="3583520">k2</span>&nbsp;<span class="op" id="3583523">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3583528">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583602">switch</span>&nbsp;<span class="op" id="3583609">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583614">case</span>&nbsp;<span class="ident" id="3583619">k1</span>&nbsp;<span class="op" id="3583622">==</span>&nbsp;<span class="ident" id="3583625">intKind</span>&nbsp;<span class="op" id="3583633">&amp;&amp;</span>&nbsp;<span class="ident" id="3583636">k2</span>&nbsp;<span class="op" id="3583639">==</span>&nbsp;<span class="ident" id="3583642">uintKind</span><span class="op" id="3583650">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583656">truth</span>&nbsp;<span class="op" id="3583662">=</span>&nbsp;<span class="ident" id="3583664">v1</span><span class="op" id="3583666">.</span><span class="ident" id="3583667">Int</span><span class="op" id="3583670">(</span><span class="op" id="3583671">)</span>&nbsp;<span class="op" id="3583673">&gt;=</span>&nbsp;<span class="num" id="3583676">0</span>&nbsp;<span class="op" id="3583678">&amp;&amp;</span>&nbsp;<span class="ident" id="3583681">uint64</span><span class="op" id="3583687">(</span><span class="ident" id="3583688">v1</span><span class="op" id="3583690">.</span><span class="ident" id="3583691">Int</span><span class="op" id="3583694">(</span><span class="op" id="3583695">)</span><span class="op" id="3583696">)</span>&nbsp;<span class="op" id="3583698">==</span>&nbsp;<span class="ident" id="3583701">v2</span><span class="op" id="3583703">.</span><span class="ident" id="3583704">Uint</span><span class="op" id="3583708">(</span><span class="op" id="3583709">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583714">case</span>&nbsp;<span class="ident" id="3583719">k1</span>&nbsp;<span class="op" id="3583722">==</span>&nbsp;<span class="ident" id="3583725">uintKind</span>&nbsp;<span class="op" id="3583734">&amp;&amp;</span>&nbsp;<span class="ident" id="3583737">k2</span>&nbsp;<span class="op" id="3583740">==</span>&nbsp;<span class="ident" id="3583743">intKind</span><span class="op" id="3583750">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583756">truth</span>&nbsp;<span class="op" id="3583762">=</span>&nbsp;<span class="ident" id="3583764">v2</span><span class="op" id="3583766">.</span><span class="ident" id="3583767">Int</span><span class="op" id="3583770">(</span><span class="op" id="3583771">)</span>&nbsp;<span class="op" id="3583773">&gt;=</span>&nbsp;<span class="num" id="3583776">0</span>&nbsp;<span class="op" id="3583778">&amp;&amp;</span>&nbsp;<span class="ident" id="3583781">v1</span><span class="op" id="3583783">.</span><span class="ident" id="3583784">Uint</span><span class="op" id="3583788">(</span><span class="op" id="3583789">)</span>&nbsp;<span class="op" id="3583791">==</span>&nbsp;<span class="ident" id="3583794">uint64</span><span class="op" id="3583800">(</span><span class="ident" id="3583801">v2</span><span class="op" id="3583803">.</span><span class="ident" id="3583804">Int</span><span class="op" id="3583807">(</span><span class="op" id="3583808">)</span><span class="op" id="3583809">)</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583814">default</span><span class="op" id="3583821">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583827">return</span>&nbsp;<span class="builtintype" id="3583834">false</span><span class="op" id="3583839">,</span>&nbsp;<span class="ident" id="3583841">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583861">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3583865">}</span>&nbsp;<span class="keyword" id="3583867">else</span>&nbsp;<span class="op" id="3583872">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583877">switch</span>&nbsp;<span class="ident" id="3583884">k1</span>&nbsp;<span class="op" id="3583887">{</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583892">case</span>&nbsp;<span class="ident" id="3583897">boolKind</span><span class="op" id="3583905">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583911">truth</span>&nbsp;<span class="op" id="3583917">=</span>&nbsp;<span class="ident" id="3583919">v1</span><span class="op" id="3583921">.</span><span class="ident" id="3583922">Bool</span><span class="op" id="3583926">(</span><span class="op" id="3583927">)</span>&nbsp;<span class="op" id="3583929">==</span>&nbsp;<span class="ident" id="3583932">v2</span><span class="op" id="3583934">.</span><span class="ident" id="3583935">Bool</span><span class="op" id="3583939">(</span><span class="op" id="3583940">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3583945">case</span>&nbsp;<span class="ident" id="3583950">complexKind</span><span class="op" id="3583961">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3583967">truth</span>&nbsp;<span class="op" id="3583973">=</span>&nbsp;<span class="ident" id="3583975">v1</span><span class="op" id="3583977">.</span><span class="ident" id="3583978">Complex</span><span class="op" id="3583985">(</span><span class="op" id="3583986">)</span>&nbsp;<span class="op" id="3583988">==</span>&nbsp;<span class="ident" id="3583991">v2</span><span class="op" id="3583993">.</span><span class="ident" id="3583994">Complex</span><span class="op" id="3584001">(</span><span class="op" id="3584002">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584007">case</span>&nbsp;<span class="ident" id="3584012">floatKind</span><span class="op" id="3584021">:</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584027">truth</span>&nbsp;<span class="op" id="3584033">=</span>&nbsp;<span class="ident" id="3584035">v1</span><span class="op" id="3584037">.</span><span class="ident" id="3584038">Float</span><span class="op" id="3584043">(</span><span class="op" id="3584044">)</span>&nbsp;<span class="op" id="3584046">==</span>&nbsp;<span class="ident" id="3584049">v2</span><span class="op" id="3584051">.</span><span class="ident" id="3584052">Float</span><span class="op" id="3584057">(</span><span class="op" id="3584058">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584063">case</span>&nbsp;<span class="ident" id="3584068">intKind</span><span class="op" id="3584075">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584081">truth</span>&nbsp;<span class="op" id="3584087">=</span>&nbsp;<span class="ident" id="3584089">v1</span><span class="op" id="3584091">.</span><span class="ident" id="3584092">Int</span><span class="op" id="3584095">(</span><span class="op" id="3584096">)</span>&nbsp;<span class="op" id="3584098">==</span>&nbsp;<span class="ident" id="3584101">v2</span><span class="op" id="3584103">.</span><span class="ident" id="3584104">Int</span><span class="op" id="3584107">(</span><span class="op" id="3584108">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584113">case</span>&nbsp;<span class="ident" id="3584118">stringKind</span><span class="op" id="3584128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584134">truth</span>&nbsp;<span class="op" id="3584140">=</span>&nbsp;<span class="ident" id="3584142">v1</span><span class="op" id="3584144">.</span><span class="ident" id="3584145">String</span><span class="op" id="3584151">(</span><span class="op" id="3584152">)</span>&nbsp;<span class="op" id="3584154">==</span>&nbsp;<span class="ident" id="3584157">v2</span><span class="op" id="3584159">.</span><span class="ident" id="3584160">String</span><span class="op" id="3584166">(</span><span class="op" id="3584167">)</span><br>
<span class="lineno">340</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584172">case</span>&nbsp;<span class="ident" id="3584177">uintKind</span><span class="op" id="3584185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584191">truth</span>&nbsp;<span class="op" id="3584197">=</span>&nbsp;<span class="ident" id="3584199">v1</span><span class="op" id="3584201">.</span><span class="ident" id="3584202">Uint</span><span class="op" id="3584206">(</span><span class="op" id="3584207">)</span>&nbsp;<span class="op" id="3584209">==</span>&nbsp;<span class="ident" id="3584212">v2</span><span class="op" id="3584214">.</span><span class="ident" id="3584215">Uint</span><span class="op" id="3584219">(</span><span class="op" id="3584220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584225">default</span><span class="op" id="3584232">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3584238">panic</span><span class="op" id="3584243">(</span><span class="string" id="3584244">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="3584258">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584263">}</span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584267">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584271">if</span>&nbsp;<span class="ident" id="3584274">truth</span>&nbsp;<span class="op" id="3584280">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584285">return</span>&nbsp;<span class="builtintype" id="3584292">true</span><span class="op" id="3584296">,</span>&nbsp;<span class="builtintype" id="3584298">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584304">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584307">}</span><br>
<span class="lineno">350</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584310">return</span>&nbsp;<span class="builtintype" id="3584317">false</span><span class="op" id="3584322">,</span>&nbsp;<span class="builtintype" id="3584324">nil</span><br>
<span class="lineno"></span><span class="op" id="3584328">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3584331">//&nbsp;ne&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;!=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3584370">func</span>&nbsp;<span class="ident" id="3584375">ne</span><span class="op" id="3584377">(</span><span class="ident" id="3584378">arg1</span><span class="op" id="3584382">,</span>&nbsp;<span class="ident" id="3584384">arg2</span>&nbsp;<span class="keyword" id="3584389">interface</span><span class="op" id="3584398">{</span><span class="op" id="3584399">}</span><span class="op" id="3584400">)</span>&nbsp;<span class="op" id="3584402">(</span><span class="builtintype" id="3584403">bool</span><span class="op" id="3584407">,</span>&nbsp;<span class="builtintype" id="3584409">error</span><span class="op" id="3584414">)</span>&nbsp;<span class="op" id="3584416">{</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3584419">//&nbsp;!=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;==.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584448">equal</span><span class="op" id="3584453">,</span>&nbsp;<span class="ident" id="3584455">err</span>&nbsp;<span class="op" id="3584459">:=</span>&nbsp;<span class="ident" id="3584462">eq</span><span class="op" id="3584464">(</span><span class="ident" id="3584465">arg1</span><span class="op" id="3584469">,</span>&nbsp;<span class="ident" id="3584471">arg2</span><span class="op" id="3584475">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584478">return</span>&nbsp;<span class="op" id="3584485">!</span><span class="ident" id="3584486">equal</span><span class="op" id="3584491">,</span>&nbsp;<span class="ident" id="3584493">err</span><br>
<span class="lineno"></span><span class="op" id="3584497">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">360</span><span class="comment" id="3584500">//&nbsp;lt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&lt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3584538">func</span>&nbsp;<span class="ident" id="3584543">lt</span><span class="op" id="3584545">(</span><span class="ident" id="3584546">arg1</span><span class="op" id="3584550">,</span>&nbsp;<span class="ident" id="3584552">arg2</span>&nbsp;<span class="keyword" id="3584557">interface</span><span class="op" id="3584566">{</span><span class="op" id="3584567">}</span><span class="op" id="3584568">)</span>&nbsp;<span class="op" id="3584570">(</span><span class="builtintype" id="3584571">bool</span><span class="op" id="3584575">,</span>&nbsp;<span class="builtintype" id="3584577">error</span><span class="op" id="3584582">)</span>&nbsp;<span class="op" id="3584584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584587">v1</span>&nbsp;<span class="op" id="3584590">:=</span>&nbsp;<span class="ident" id="3584593">reflect</span><span class="op" id="3584600">.</span><span class="ident" id="3584601">ValueOf</span><span class="op" id="3584608">(</span><span class="ident" id="3584609">arg1</span><span class="op" id="3584613">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584616">k1</span><span class="op" id="3584618">,</span>&nbsp;<span class="ident" id="3584620">err</span>&nbsp;<span class="op" id="3584624">:=</span>&nbsp;<span class="ident" id="3584627">basicKind</span><span class="op" id="3584636">(</span><span class="ident" id="3584637">v1</span><span class="op" id="3584639">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584642">if</span>&nbsp;<span class="ident" id="3584645">err</span>&nbsp;<span class="op" id="3584649">!=</span>&nbsp;<span class="builtintype" id="3584652">nil</span>&nbsp;<span class="op" id="3584656">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584660">return</span>&nbsp;<span class="builtintype" id="3584667">false</span><span class="op" id="3584672">,</span>&nbsp;<span class="ident" id="3584674">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584679">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584682">v2</span>&nbsp;<span class="op" id="3584685">:=</span>&nbsp;<span class="ident" id="3584688">reflect</span><span class="op" id="3584695">.</span><span class="ident" id="3584696">ValueOf</span><span class="op" id="3584703">(</span><span class="ident" id="3584704">arg2</span><span class="op" id="3584708">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584711">k2</span><span class="op" id="3584713">,</span>&nbsp;<span class="ident" id="3584715">err</span>&nbsp;<span class="op" id="3584719">:=</span>&nbsp;<span class="ident" id="3584722">basicKind</span><span class="op" id="3584731">(</span><span class="ident" id="3584732">v2</span><span class="op" id="3584734">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584737">if</span>&nbsp;<span class="ident" id="3584740">err</span>&nbsp;<span class="op" id="3584744">!=</span>&nbsp;<span class="builtintype" id="3584747">nil</span>&nbsp;<span class="op" id="3584751">{</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584755">return</span>&nbsp;<span class="builtintype" id="3584762">false</span><span class="op" id="3584767">,</span>&nbsp;<span class="ident" id="3584769">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3584774">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584777">truth</span>&nbsp;<span class="op" id="3584783">:=</span>&nbsp;<span class="builtintype" id="3584786">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584793">if</span>&nbsp;<span class="ident" id="3584796">k1</span>&nbsp;<span class="op" id="3584799">!=</span>&nbsp;<span class="ident" id="3584802">k2</span>&nbsp;<span class="op" id="3584805">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3584809">//&nbsp;Special&nbsp;case:&nbsp;Can&nbsp;compare&nbsp;integer&nbsp;values&nbsp;regardless&nbsp;of&nbsp;type&#39;s&nbsp;sign.</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584882">switch</span>&nbsp;<span class="op" id="3584889">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584893">case</span>&nbsp;<span class="ident" id="3584898">k1</span>&nbsp;<span class="op" id="3584901">==</span>&nbsp;<span class="ident" id="3584904">intKind</span>&nbsp;<span class="op" id="3584912">&amp;&amp;</span>&nbsp;<span class="ident" id="3584915">k2</span>&nbsp;<span class="op" id="3584918">==</span>&nbsp;<span class="ident" id="3584921">uintKind</span><span class="op" id="3584929">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3584934">truth</span>&nbsp;<span class="op" id="3584940">=</span>&nbsp;<span class="ident" id="3584942">v1</span><span class="op" id="3584944">.</span><span class="ident" id="3584945">Int</span><span class="op" id="3584948">(</span><span class="op" id="3584949">)</span>&nbsp;<span class="op" id="3584951">&lt;</span>&nbsp;<span class="num" id="3584953">0</span>&nbsp;<span class="op" id="3584955">||</span>&nbsp;<span class="ident" id="3584958">uint64</span><span class="op" id="3584964">(</span><span class="ident" id="3584965">v1</span><span class="op" id="3584967">.</span><span class="ident" id="3584968">Int</span><span class="op" id="3584971">(</span><span class="op" id="3584972">)</span><span class="op" id="3584973">)</span>&nbsp;<span class="op" id="3584975">&lt;</span>&nbsp;<span class="ident" id="3584977">v2</span><span class="op" id="3584979">.</span><span class="ident" id="3584980">Uint</span><span class="op" id="3584984">(</span><span class="op" id="3584985">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3584989">case</span>&nbsp;<span class="ident" id="3584994">k1</span>&nbsp;<span class="op" id="3584997">==</span>&nbsp;<span class="ident" id="3585000">uintKind</span>&nbsp;<span class="op" id="3585009">&amp;&amp;</span>&nbsp;<span class="ident" id="3585012">k2</span>&nbsp;<span class="op" id="3585015">==</span>&nbsp;<span class="ident" id="3585018">intKind</span><span class="op" id="3585025">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585030">truth</span>&nbsp;<span class="op" id="3585036">=</span>&nbsp;<span class="ident" id="3585038">v2</span><span class="op" id="3585040">.</span><span class="ident" id="3585041">Int</span><span class="op" id="3585044">(</span><span class="op" id="3585045">)</span>&nbsp;<span class="op" id="3585047">&gt;=</span>&nbsp;<span class="num" id="3585050">0</span>&nbsp;<span class="op" id="3585052">&amp;&amp;</span>&nbsp;<span class="ident" id="3585055">v1</span><span class="op" id="3585057">.</span><span class="ident" id="3585058">Uint</span><span class="op" id="3585062">(</span><span class="op" id="3585063">)</span>&nbsp;<span class="op" id="3585065">&lt;</span>&nbsp;<span class="ident" id="3585067">uint64</span><span class="op" id="3585073">(</span><span class="ident" id="3585074">v2</span><span class="op" id="3585076">.</span><span class="ident" id="3585077">Int</span><span class="op" id="3585080">(</span><span class="op" id="3585081">)</span><span class="op" id="3585082">)</span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585086">default</span><span class="op" id="3585093">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585098">return</span>&nbsp;<span class="builtintype" id="3585105">false</span><span class="op" id="3585110">,</span>&nbsp;<span class="ident" id="3585112">errBadComparison</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585131">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585134">}</span>&nbsp;<span class="keyword" id="3585136">else</span>&nbsp;<span class="op" id="3585141">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585145">switch</span>&nbsp;<span class="ident" id="3585152">k1</span>&nbsp;<span class="op" id="3585155">{</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585159">case</span>&nbsp;<span class="ident" id="3585164">boolKind</span><span class="op" id="3585172">,</span>&nbsp;<span class="ident" id="3585174">complexKind</span><span class="op" id="3585185">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585190">return</span>&nbsp;<span class="builtintype" id="3585197">false</span><span class="op" id="3585202">,</span>&nbsp;<span class="ident" id="3585204">errBadComparisonType</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585227">case</span>&nbsp;<span class="ident" id="3585232">floatKind</span><span class="op" id="3585241">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585246">truth</span>&nbsp;<span class="op" id="3585252">=</span>&nbsp;<span class="ident" id="3585254">v1</span><span class="op" id="3585256">.</span><span class="ident" id="3585257">Float</span><span class="op" id="3585262">(</span><span class="op" id="3585263">)</span>&nbsp;<span class="op" id="3585265">&lt;</span>&nbsp;<span class="ident" id="3585267">v2</span><span class="op" id="3585269">.</span><span class="ident" id="3585270">Float</span><span class="op" id="3585275">(</span><span class="op" id="3585276">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585280">case</span>&nbsp;<span class="ident" id="3585285">intKind</span><span class="op" id="3585292">:</span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585297">truth</span>&nbsp;<span class="op" id="3585303">=</span>&nbsp;<span class="ident" id="3585305">v1</span><span class="op" id="3585307">.</span><span class="ident" id="3585308">Int</span><span class="op" id="3585311">(</span><span class="op" id="3585312">)</span>&nbsp;<span class="op" id="3585314">&lt;</span>&nbsp;<span class="ident" id="3585316">v2</span><span class="op" id="3585318">.</span><span class="ident" id="3585319">Int</span><span class="op" id="3585322">(</span><span class="op" id="3585323">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585327">case</span>&nbsp;<span class="ident" id="3585332">stringKind</span><span class="op" id="3585342">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585347">truth</span>&nbsp;<span class="op" id="3585353">=</span>&nbsp;<span class="ident" id="3585355">v1</span><span class="op" id="3585357">.</span><span class="ident" id="3585358">String</span><span class="op" id="3585364">(</span><span class="op" id="3585365">)</span>&nbsp;<span class="op" id="3585367">&lt;</span>&nbsp;<span class="ident" id="3585369">v2</span><span class="op" id="3585371">.</span><span class="ident" id="3585372">String</span><span class="op" id="3585378">(</span><span class="op" id="3585379">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585383">case</span>&nbsp;<span class="ident" id="3585388">uintKind</span><span class="op" id="3585396">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585401">truth</span>&nbsp;<span class="op" id="3585407">=</span>&nbsp;<span class="ident" id="3585409">v1</span><span class="op" id="3585411">.</span><span class="ident" id="3585412">Uint</span><span class="op" id="3585416">(</span><span class="op" id="3585417">)</span>&nbsp;<span class="op" id="3585419">&lt;</span>&nbsp;<span class="ident" id="3585421">v2</span><span class="op" id="3585423">.</span><span class="ident" id="3585424">Uint</span><span class="op" id="3585428">(</span><span class="op" id="3585429">)</span><br>
<span class="lineno">395</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585433">default</span><span class="op" id="3585440">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtinfunc" id="3585445">panic</span><span class="op" id="3585450">(</span><span class="string" id="3585451">&#34;invalid&nbsp;kind&#34;</span><span class="op" id="3585465">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585469">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585472">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585475">return</span>&nbsp;<span class="ident" id="3585482">truth</span><span class="op" id="3585487">,</span>&nbsp;<span class="builtintype" id="3585489">nil</span><br>
<span class="lineno">400</span><span class="op" id="3585493">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3585496">//&nbsp;le&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;&lt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3585533">func</span>&nbsp;<span class="ident" id="3585538">le</span><span class="op" id="3585540">(</span><span class="ident" id="3585541">arg1</span><span class="op" id="3585545">,</span>&nbsp;<span class="ident" id="3585547">arg2</span>&nbsp;<span class="keyword" id="3585552">interface</span><span class="op" id="3585561">{</span><span class="op" id="3585562">}</span><span class="op" id="3585563">)</span>&nbsp;<span class="op" id="3585565">(</span><span class="builtintype" id="3585566">bool</span><span class="op" id="3585570">,</span>&nbsp;<span class="builtintype" id="3585572">error</span><span class="op" id="3585577">)</span>&nbsp;<span class="op" id="3585579">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3585582">//&nbsp;&lt;=&nbsp;is&nbsp;&lt;&nbsp;or&nbsp;==.</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585601">lessThan</span><span class="op" id="3585609">,</span>&nbsp;<span class="ident" id="3585611">err</span>&nbsp;<span class="op" id="3585615">:=</span>&nbsp;<span class="ident" id="3585618">lt</span><span class="op" id="3585620">(</span><span class="ident" id="3585621">arg1</span><span class="op" id="3585625">,</span>&nbsp;<span class="ident" id="3585627">arg2</span><span class="op" id="3585631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585634">if</span>&nbsp;<span class="ident" id="3585637">lessThan</span>&nbsp;<span class="op" id="3585646">||</span>&nbsp;<span class="ident" id="3585649">err</span>&nbsp;<span class="op" id="3585653">!=</span>&nbsp;<span class="builtintype" id="3585656">nil</span>&nbsp;<span class="op" id="3585660">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585664">return</span>&nbsp;<span class="ident" id="3585671">lessThan</span><span class="op" id="3585679">,</span>&nbsp;<span class="ident" id="3585681">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585686">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585689">return</span>&nbsp;<span class="ident" id="3585696">eq</span><span class="op" id="3585698">(</span><span class="ident" id="3585699">arg1</span><span class="op" id="3585703">,</span>&nbsp;<span class="ident" id="3585705">arg2</span><span class="op" id="3585709">)</span><br>
<span class="lineno">410</span><span class="op" id="3585711">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3585714">//&nbsp;gt&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3585752">func</span>&nbsp;<span class="ident" id="3585757">gt</span><span class="op" id="3585759">(</span><span class="ident" id="3585760">arg1</span><span class="op" id="3585764">,</span>&nbsp;<span class="ident" id="3585766">arg2</span>&nbsp;<span class="keyword" id="3585771">interface</span><span class="op" id="3585780">{</span><span class="op" id="3585781">}</span><span class="op" id="3585782">)</span>&nbsp;<span class="op" id="3585784">(</span><span class="builtintype" id="3585785">bool</span><span class="op" id="3585789">,</span>&nbsp;<span class="builtintype" id="3585791">error</span><span class="op" id="3585796">)</span>&nbsp;<span class="op" id="3585798">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3585801">//&nbsp;&gt;&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;=.</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3585829">lessOrEqual</span><span class="op" id="3585840">,</span>&nbsp;<span class="ident" id="3585842">err</span>&nbsp;<span class="op" id="3585846">:=</span>&nbsp;<span class="ident" id="3585849">le</span><span class="op" id="3585851">(</span><span class="ident" id="3585852">arg1</span><span class="op" id="3585856">,</span>&nbsp;<span class="ident" id="3585858">arg2</span><span class="op" id="3585862">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585865">if</span>&nbsp;<span class="ident" id="3585868">err</span>&nbsp;<span class="op" id="3585872">!=</span>&nbsp;<span class="builtintype" id="3585875">nil</span>&nbsp;<span class="op" id="3585879">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585883">return</span>&nbsp;<span class="builtintype" id="3585890">false</span><span class="op" id="3585895">,</span>&nbsp;<span class="ident" id="3585897">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3585902">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3585905">return</span>&nbsp;<span class="op" id="3585912">!</span><span class="ident" id="3585913">lessOrEqual</span><span class="op" id="3585924">,</span>&nbsp;<span class="builtintype" id="3585926">nil</span><br>
<span class="lineno">420</span><span class="op" id="3585930">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3585933">//&nbsp;ge&nbsp;evaluates&nbsp;the&nbsp;comparison&nbsp;a&nbsp;&gt;=&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3585972">func</span>&nbsp;<span class="ident" id="3585977">ge</span><span class="op" id="3585979">(</span><span class="ident" id="3585980">arg1</span><span class="op" id="3585984">,</span>&nbsp;<span class="ident" id="3585986">arg2</span>&nbsp;<span class="keyword" id="3585991">interface</span><span class="op" id="3586000">{</span><span class="op" id="3586001">}</span><span class="op" id="3586002">)</span>&nbsp;<span class="op" id="3586004">(</span><span class="builtintype" id="3586005">bool</span><span class="op" id="3586009">,</span>&nbsp;<span class="builtintype" id="3586011">error</span><span class="op" id="3586016">)</span>&nbsp;<span class="op" id="3586018">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3586021">//&nbsp;&gt;=&nbsp;is&nbsp;the&nbsp;inverse&nbsp;of&nbsp;&lt;.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586049">lessThan</span><span class="op" id="3586057">,</span>&nbsp;<span class="ident" id="3586059">err</span>&nbsp;<span class="op" id="3586063">:=</span>&nbsp;<span class="ident" id="3586066">lt</span><span class="op" id="3586068">(</span><span class="ident" id="3586069">arg1</span><span class="op" id="3586073">,</span>&nbsp;<span class="ident" id="3586075">arg2</span><span class="op" id="3586079">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586082">if</span>&nbsp;<span class="ident" id="3586085">err</span>&nbsp;<span class="op" id="3586089">!=</span>&nbsp;<span class="builtintype" id="3586092">nil</span>&nbsp;<span class="op" id="3586096">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586100">return</span>&nbsp;<span class="builtintype" id="3586107">false</span><span class="op" id="3586112">,</span>&nbsp;<span class="ident" id="3586114">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586119">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586122">return</span>&nbsp;<span class="op" id="3586129">!</span><span class="ident" id="3586130">lessThan</span><span class="op" id="3586138">,</span>&nbsp;<span class="builtintype" id="3586140">nil</span><br>
<span class="lineno">430</span><span class="op" id="3586144">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586147">//&nbsp;HTML&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3586166">var</span>&nbsp;<span class="op" id="3586170">(</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586173">htmlQuot</span>&nbsp;<span class="op" id="3586182">=</span>&nbsp;<span class="op" id="3586184">[</span><span class="op" id="3586185">]</span><span class="builtintype" id="3586186">byte</span><span class="op" id="3586190">(</span><span class="string" id="3586191">&#34;&amp;#34;&#34;</span><span class="op" id="3586198">)</span>&nbsp;<span class="comment" id="3586200">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;quot;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586226">htmlApos</span>&nbsp;<span class="op" id="3586235">=</span>&nbsp;<span class="op" id="3586237">[</span><span class="op" id="3586238">]</span><span class="builtintype" id="3586239">byte</span><span class="op" id="3586243">(</span><span class="string" id="3586244">&#34;&amp;#39;&#34;</span><span class="op" id="3586251">)</span>&nbsp;<span class="comment" id="3586253">//&nbsp;shorter&nbsp;than&nbsp;&#34;&amp;apos;&#34;&nbsp;and&nbsp;apos&nbsp;was&nbsp;not&nbsp;in&nbsp;HTML&nbsp;until&nbsp;HTML5</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586316">htmlAmp</span>&nbsp;&nbsp;<span class="op" id="3586325">=</span>&nbsp;<span class="op" id="3586327">[</span><span class="op" id="3586328">]</span><span class="builtintype" id="3586329">byte</span><span class="op" id="3586333">(</span><span class="string" id="3586334">&#34;&amp;amp;&#34;</span><span class="op" id="3586341">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586344">htmlLt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3586353">=</span>&nbsp;<span class="op" id="3586355">[</span><span class="op" id="3586356">]</span><span class="builtintype" id="3586357">byte</span><span class="op" id="3586361">(</span><span class="string" id="3586362">&#34;&amp;lt;&#34;</span><span class="op" id="3586368">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586371">htmlGt</span>&nbsp;&nbsp;&nbsp;<span class="op" id="3586380">=</span>&nbsp;<span class="op" id="3586382">[</span><span class="op" id="3586383">]</span><span class="builtintype" id="3586384">byte</span><span class="op" id="3586388">(</span><span class="string" id="3586389">&#34;&amp;gt;&#34;</span><span class="op" id="3586395">)</span><br>
<span class="lineno">440</span><span class="op" id="3586397">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586400">//&nbsp;HTMLEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3586480">func</span>&nbsp;<span class="ident" id="3586485">HTMLEscape</span><span class="op" id="3586495">(</span><span class="ident" id="3586496">w</span>&nbsp;<span class="ident" id="3586498">io</span><span class="op" id="3586500">.</span><span class="ident" id="3586501">Writer</span><span class="op" id="3586507">,</span>&nbsp;<span class="ident" id="3586509">b</span>&nbsp;<span class="op" id="3586511">[</span><span class="op" id="3586512">]</span><span class="builtintype" id="3586513">byte</span><span class="op" id="3586517">)</span>&nbsp;<span class="op" id="3586519">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586522">last</span>&nbsp;<span class="op" id="3586527">:=</span>&nbsp;<span class="num" id="3586530">0</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586533">for</span>&nbsp;<span class="ident" id="3586537">i</span><span class="op" id="3586538">,</span>&nbsp;<span class="ident" id="3586540">c</span>&nbsp;<span class="op" id="3586542">:=</span>&nbsp;<span class="keyword" id="3586545">range</span>&nbsp;<span class="ident" id="3586551">b</span>&nbsp;<span class="op" id="3586553">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586557">var</span>&nbsp;<span class="ident" id="3586561">html</span>&nbsp;<span class="op" id="3586566">[</span><span class="op" id="3586567">]</span><span class="builtintype" id="3586568">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586575">switch</span>&nbsp;<span class="ident" id="3586582">c</span>&nbsp;<span class="op" id="3586584">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586588">case</span>&nbsp;<span class="string" id="3586593">&#39;&#34;&#39;</span><span class="op" id="3586596">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586601">html</span>&nbsp;<span class="op" id="3586606">=</span>&nbsp;<span class="ident" id="3586608">htmlQuot</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586619">case</span>&nbsp;<span class="string" id="3586624">&#39;\&#39;&#39;</span><span class="op" id="3586628">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586633">html</span>&nbsp;<span class="op" id="3586638">=</span>&nbsp;<span class="ident" id="3586640">htmlApos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586651">case</span>&nbsp;<span class="string" id="3586656">&#39;&amp;&#39;</span><span class="op" id="3586659">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586664">html</span>&nbsp;<span class="op" id="3586669">=</span>&nbsp;<span class="ident" id="3586671">htmlAmp</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586681">case</span>&nbsp;<span class="string" id="3586686">&#39;&lt;&#39;</span><span class="op" id="3586689">:</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586694">html</span>&nbsp;<span class="op" id="3586699">=</span>&nbsp;<span class="ident" id="3586701">htmlLt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586710">case</span>&nbsp;<span class="string" id="3586715">&#39;&gt;&#39;</span><span class="op" id="3586718">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586723">html</span>&nbsp;<span class="op" id="3586728">=</span>&nbsp;<span class="ident" id="3586730">htmlGt</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586739">default</span><span class="op" id="3586746">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586751">continue</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586762">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586766">w</span><span class="op" id="3586767">.</span><span class="ident" id="3586768">Write</span><span class="op" id="3586773">(</span><span class="ident" id="3586774">b</span><span class="op" id="3586775">[</span><span class="ident" id="3586776">last</span><span class="op" id="3586780">:</span><span class="ident" id="3586781">i</span><span class="op" id="3586782">]</span><span class="op" id="3586783">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586787">w</span><span class="op" id="3586788">.</span><span class="ident" id="3586789">Write</span><span class="op" id="3586794">(</span><span class="ident" id="3586795">html</span><span class="op" id="3586799">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586803">last</span>&nbsp;<span class="op" id="3586808">=</span>&nbsp;<span class="ident" id="3586810">i</span>&nbsp;<span class="op" id="3586812">+</span>&nbsp;<span class="num" id="3586814">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3586817">}</span><br>
<span class="lineno">465</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3586820">w</span><span class="op" id="3586821">.</span><span class="ident" id="3586822">Write</span><span class="op" id="3586827">(</span><span class="ident" id="3586828">b</span><span class="op" id="3586829">[</span><span class="ident" id="3586830">last</span><span class="op" id="3586834">:</span><span class="op" id="3586835">]</span><span class="op" id="3586836">)</span><br>
<span class="lineno"></span><span class="op" id="3586838">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3586841">//&nbsp;HTMLEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3586923">func</span>&nbsp;<span class="ident" id="3586928">HTMLEscapeString</span><span class="op" id="3586944">(</span><span class="ident" id="3586945">s</span>&nbsp;<span class="builtintype" id="3586947">string</span><span class="op" id="3586953">)</span>&nbsp;<span class="builtintype" id="3586955">string</span>&nbsp;<span class="op" id="3586962">{</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3586965">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3586997">if</span>&nbsp;<span class="ident" id="3587000">strings</span><span class="op" id="3587007">.</span><span class="ident" id="3587008">IndexAny</span><span class="op" id="3587016">(</span><span class="ident" id="3587017">s</span><span class="op" id="3587018">,</span>&nbsp;<span class="string" id="3587020">`&#39;&#34;&amp;&lt;&gt;`</span><span class="op" id="3587027">)</span>&nbsp;<span class="op" id="3587029">&lt;</span>&nbsp;<span class="num" id="3587031">0</span>&nbsp;<span class="op" id="3587033">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587037">return</span>&nbsp;<span class="ident" id="3587044">s</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587047">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587050">var</span>&nbsp;<span class="ident" id="3587054">b</span>&nbsp;<span class="ident" id="3587056">bytes</span><span class="op" id="3587061">.</span><span class="ident" id="3587062">Buffer</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587070">HTMLEscape</span><span class="op" id="3587080">(</span><span class="op" id="3587081">&amp;</span><span class="ident" id="3587082">b</span><span class="op" id="3587083">,</span>&nbsp;<span class="op" id="3587085">[</span><span class="op" id="3587086">]</span><span class="builtintype" id="3587087">byte</span><span class="op" id="3587091">(</span><span class="ident" id="3587092">s</span><span class="op" id="3587093">)</span><span class="op" id="3587094">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587097">return</span>&nbsp;<span class="ident" id="3587104">b</span><span class="op" id="3587105">.</span><span class="ident" id="3587106">String</span><span class="op" id="3587112">(</span><span class="op" id="3587113">)</span><br>
<span class="lineno"></span><span class="op" id="3587115">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3587118">//&nbsp;HTMLEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;HTML&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">480</span><span class="comment" id="3587184">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="3587220">func</span>&nbsp;<span class="ident" id="3587225">HTMLEscaper</span><span class="op" id="3587236">(</span><span class="ident" id="3587237">args</span>&nbsp;<span class="op" id="3587242">...</span><span class="keyword" id="3587245">interface</span><span class="op" id="3587254">{</span><span class="op" id="3587255">}</span><span class="op" id="3587256">)</span>&nbsp;<span class="builtintype" id="3587258">string</span>&nbsp;<span class="op" id="3587265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587268">return</span>&nbsp;<span class="ident" id="3587275">HTMLEscapeString</span><span class="op" id="3587291">(</span><span class="ident" id="3587292">evalArgs</span><span class="op" id="3587300">(</span><span class="ident" id="3587301">args</span><span class="op" id="3587305">)</span><span class="op" id="3587306">)</span><br>
<span class="lineno"></span><span class="op" id="3587308">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">485</span><span class="comment" id="3587311">//&nbsp;JavaScript&nbsp;escaping.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3587336">var</span>&nbsp;<span class="op" id="3587340">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587343">jsLowUni</span>&nbsp;<span class="op" id="3587352">=</span>&nbsp;<span class="op" id="3587354">[</span><span class="op" id="3587355">]</span><span class="builtintype" id="3587356">byte</span><span class="op" id="3587360">(</span><span class="string" id="3587361">`\u00`</span><span class="op" id="3587367">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587370">hex</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587379">=</span>&nbsp;<span class="op" id="3587381">[</span><span class="op" id="3587382">]</span><span class="builtintype" id="3587383">byte</span><span class="op" id="3587387">(</span><span class="string" id="3587388">&#34;0123456789ABCDEF&#34;</span><span class="op" id="3587406">)</span><br>
<span class="lineno">490</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587410">jsBackslash</span>&nbsp;<span class="op" id="3587422">=</span>&nbsp;<span class="op" id="3587424">[</span><span class="op" id="3587425">]</span><span class="builtintype" id="3587426">byte</span><span class="op" id="3587430">(</span><span class="string" id="3587431">`\\`</span><span class="op" id="3587435">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587438">jsApos</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587450">=</span>&nbsp;<span class="op" id="3587452">[</span><span class="op" id="3587453">]</span><span class="builtintype" id="3587454">byte</span><span class="op" id="3587458">(</span><span class="string" id="3587459">`\&#39;`</span><span class="op" id="3587463">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587466">jsQuot</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587478">=</span>&nbsp;<span class="op" id="3587480">[</span><span class="op" id="3587481">]</span><span class="builtintype" id="3587482">byte</span><span class="op" id="3587486">(</span><span class="string" id="3587487">`\&#34;`</span><span class="op" id="3587491">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587494">jsLt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587506">=</span>&nbsp;<span class="op" id="3587508">[</span><span class="op" id="3587509">]</span><span class="builtintype" id="3587510">byte</span><span class="op" id="3587514">(</span><span class="string" id="3587515">`\x3C`</span><span class="op" id="3587521">)</span><br>
<span class="lineno">495</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587524">jsGt</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587536">=</span>&nbsp;<span class="op" id="3587538">[</span><span class="op" id="3587539">]</span><span class="builtintype" id="3587540">byte</span><span class="op" id="3587544">(</span><span class="string" id="3587545">`\x3E`</span><span class="op" id="3587551">)</span><br>
<span class="lineno"></span><span class="op" id="3587553">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3587556">//&nbsp;JSEscape&nbsp;writes&nbsp;to&nbsp;w&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;b.</span><br>
<span class="lineno"></span><span class="keyword" id="3587640">func</span>&nbsp;<span class="ident" id="3587645">JSEscape</span><span class="op" id="3587653">(</span><span class="ident" id="3587654">w</span>&nbsp;<span class="ident" id="3587656">io</span><span class="op" id="3587658">.</span><span class="ident" id="3587659">Writer</span><span class="op" id="3587665">,</span>&nbsp;<span class="ident" id="3587667">b</span>&nbsp;<span class="op" id="3587669">[</span><span class="op" id="3587670">]</span><span class="builtintype" id="3587671">byte</span><span class="op" id="3587675">)</span>&nbsp;<span class="op" id="3587677">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587680">last</span>&nbsp;<span class="op" id="3587685">:=</span>&nbsp;<span class="num" id="3587688">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587691">for</span>&nbsp;<span class="ident" id="3587695">i</span>&nbsp;<span class="op" id="3587697">:=</span>&nbsp;<span class="num" id="3587700">0</span><span class="op" id="3587701">;</span>&nbsp;<span class="ident" id="3587703">i</span>&nbsp;<span class="op" id="3587705">&lt;</span>&nbsp;<span class="builtinfunc" id="3587707">len</span><span class="op" id="3587710">(</span><span class="ident" id="3587711">b</span><span class="op" id="3587712">)</span><span class="op" id="3587713">;</span>&nbsp;<span class="ident" id="3587715">i</span><span class="op" id="3587716">++</span>&nbsp;<span class="op" id="3587719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587723">c</span>&nbsp;<span class="op" id="3587725">:=</span>&nbsp;<span class="ident" id="3587728">b</span><span class="op" id="3587729">[</span><span class="ident" id="3587730">i</span><span class="op" id="3587731">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587736">if</span>&nbsp;<span class="op" id="3587739">!</span><span class="ident" id="3587740">jsIsSpecial</span><span class="op" id="3587751">(</span><span class="builtintype" id="3587752">rune</span><span class="op" id="3587756">(</span><span class="ident" id="3587757">c</span><span class="op" id="3587758">)</span><span class="op" id="3587759">)</span>&nbsp;<span class="op" id="3587761">{</span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3587766">//&nbsp;fast&nbsp;path:&nbsp;nothing&nbsp;to&nbsp;do</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587797">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3587808">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587812">w</span><span class="op" id="3587813">.</span><span class="ident" id="3587814">Write</span><span class="op" id="3587819">(</span><span class="ident" id="3587820">b</span><span class="op" id="3587821">[</span><span class="ident" id="3587822">last</span><span class="op" id="3587826">:</span><span class="ident" id="3587827">i</span><span class="op" id="3587828">]</span><span class="op" id="3587829">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587834">if</span>&nbsp;<span class="ident" id="3587837">c</span>&nbsp;<span class="op" id="3587839">&lt;</span>&nbsp;<span class="ident" id="3587841">utf8</span><span class="op" id="3587845">.</span><span class="ident" id="3587846">RuneSelf</span>&nbsp;<span class="op" id="3587855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3587860">//&nbsp;Quotes,&nbsp;slashes&nbsp;and&nbsp;angle&nbsp;brackets&nbsp;get&nbsp;quoted.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3587913">//&nbsp;Control&nbsp;characters&nbsp;get&nbsp;written&nbsp;as&nbsp;\u00XX.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587961">switch</span>&nbsp;<span class="ident" id="3587968">c</span>&nbsp;<span class="op" id="3587970">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3587975">case</span>&nbsp;<span class="string" id="3587980">&#39;\\&#39;</span><span class="op" id="3587984">:</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3587990">w</span><span class="op" id="3587991">.</span><span class="ident" id="3587992">Write</span><span class="op" id="3587997">(</span><span class="ident" id="3587998">jsBackslash</span><span class="op" id="3588009">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588014">case</span>&nbsp;<span class="string" id="3588019">&#39;\&#39;&#39;</span><span class="op" id="3588023">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588029">w</span><span class="op" id="3588030">.</span><span class="ident" id="3588031">Write</span><span class="op" id="3588036">(</span><span class="ident" id="3588037">jsApos</span><span class="op" id="3588043">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588048">case</span>&nbsp;<span class="string" id="3588053">&#39;&#34;&#39;</span><span class="op" id="3588056">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588062">w</span><span class="op" id="3588063">.</span><span class="ident" id="3588064">Write</span><span class="op" id="3588069">(</span><span class="ident" id="3588070">jsQuot</span><span class="op" id="3588076">)</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588081">case</span>&nbsp;<span class="string" id="3588086">&#39;&lt;&#39;</span><span class="op" id="3588089">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588095">w</span><span class="op" id="3588096">.</span><span class="ident" id="3588097">Write</span><span class="op" id="3588102">(</span><span class="ident" id="3588103">jsLt</span><span class="op" id="3588107">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588112">case</span>&nbsp;<span class="string" id="3588117">&#39;&gt;&#39;</span><span class="op" id="3588120">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588126">w</span><span class="op" id="3588127">.</span><span class="ident" id="3588128">Write</span><span class="op" id="3588133">(</span><span class="ident" id="3588134">jsGt</span><span class="op" id="3588138">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588143">default</span><span class="op" id="3588150">:</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588156">w</span><span class="op" id="3588157">.</span><span class="ident" id="3588158">Write</span><span class="op" id="3588163">(</span><span class="ident" id="3588164">jsLowUni</span><span class="op" id="3588172">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588178">t</span><span class="op" id="3588179">,</span>&nbsp;<span class="ident" id="3588181">b</span>&nbsp;<span class="op" id="3588183">:=</span>&nbsp;<span class="ident" id="3588186">c</span><span class="op" id="3588187">&gt;&gt;</span><span class="num" id="3588189">4</span><span class="op" id="3588190">,</span>&nbsp;<span class="ident" id="3588192">c</span><span class="op" id="3588193">&amp;</span><span class="num" id="3588194">0x0f</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588203">w</span><span class="op" id="3588204">.</span><span class="ident" id="3588205">Write</span><span class="op" id="3588210">(</span><span class="ident" id="3588211">hex</span><span class="op" id="3588214">[</span><span class="ident" id="3588215">t</span>&nbsp;<span class="op" id="3588217">:</span>&nbsp;<span class="ident" id="3588219">t</span><span class="op" id="3588220">+</span><span class="num" id="3588221">1</span><span class="op" id="3588222">]</span><span class="op" id="3588223">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588229">w</span><span class="op" id="3588230">.</span><span class="ident" id="3588231">Write</span><span class="op" id="3588236">(</span><span class="ident" id="3588237">hex</span><span class="op" id="3588240">[</span><span class="ident" id="3588241">b</span>&nbsp;<span class="op" id="3588243">:</span>&nbsp;<span class="ident" id="3588245">b</span><span class="op" id="3588246">+</span><span class="num" id="3588247">1</span><span class="op" id="3588248">]</span><span class="op" id="3588249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588254">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588258">}</span>&nbsp;<span class="keyword" id="3588260">else</span>&nbsp;<span class="op" id="3588265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3588270">//&nbsp;Unicode&nbsp;rune.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588290">r</span><span class="op" id="3588291">,</span>&nbsp;<span class="ident" id="3588293">size</span>&nbsp;<span class="op" id="3588298">:=</span>&nbsp;<span class="ident" id="3588301">utf8</span><span class="op" id="3588305">.</span><span class="ident" id="3588306">DecodeRune</span><span class="op" id="3588316">(</span><span class="ident" id="3588317">b</span><span class="op" id="3588318">[</span><span class="ident" id="3588319">i</span><span class="op" id="3588320">:</span><span class="op" id="3588321">]</span><span class="op" id="3588322">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588327">if</span>&nbsp;<span class="ident" id="3588330">unicode</span><span class="op" id="3588337">.</span><span class="ident" id="3588338">IsPrint</span><span class="op" id="3588345">(</span><span class="ident" id="3588346">r</span><span class="op" id="3588347">)</span>&nbsp;<span class="op" id="3588349">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588355">w</span><span class="op" id="3588356">.</span><span class="ident" id="3588357">Write</span><span class="op" id="3588362">(</span><span class="ident" id="3588363">b</span><span class="op" id="3588364">[</span><span class="ident" id="3588365">i</span>&nbsp;<span class="op" id="3588367">:</span>&nbsp;<span class="ident" id="3588369">i</span><span class="op" id="3588370">+</span><span class="ident" id="3588371">size</span><span class="op" id="3588375">]</span><span class="op" id="3588376">)</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588381">}</span>&nbsp;<span class="keyword" id="3588383">else</span>&nbsp;<span class="op" id="3588388">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588394">fmt</span><span class="op" id="3588397">.</span><span class="ident" id="3588398">Fprintf</span><span class="op" id="3588405">(</span><span class="ident" id="3588406">w</span><span class="op" id="3588407">,</span>&nbsp;<span class="string" id="3588409">&#34;\\u%04X&#34;</span><span class="op" id="3588418">,</span>&nbsp;<span class="ident" id="3588420">r</span><span class="op" id="3588421">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588426">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588431">i</span>&nbsp;<span class="op" id="3588433">+=</span>&nbsp;<span class="ident" id="3588436">size</span>&nbsp;<span class="op" id="3588441">-</span>&nbsp;<span class="num" id="3588443">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588447">}</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588451">last</span>&nbsp;<span class="op" id="3588456">=</span>&nbsp;<span class="ident" id="3588458">i</span>&nbsp;<span class="op" id="3588460">+</span>&nbsp;<span class="num" id="3588462">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588468">w</span><span class="op" id="3588469">.</span><span class="ident" id="3588470">Write</span><span class="op" id="3588475">(</span><span class="ident" id="3588476">b</span><span class="op" id="3588477">[</span><span class="ident" id="3588478">last</span><span class="op" id="3588482">:</span><span class="op" id="3588483">]</span><span class="op" id="3588484">)</span><br>
<span class="lineno"></span><span class="op" id="3588486">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span><span class="comment" id="3588489">//&nbsp;JSEscapeString&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;plain&nbsp;text&nbsp;data&nbsp;s.</span><br>
<span class="lineno"></span><span class="keyword" id="3588575">func</span>&nbsp;<span class="ident" id="3588580">JSEscapeString</span><span class="op" id="3588594">(</span><span class="ident" id="3588595">s</span>&nbsp;<span class="builtintype" id="3588597">string</span><span class="op" id="3588603">)</span>&nbsp;<span class="builtintype" id="3588605">string</span>&nbsp;<span class="op" id="3588612">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3588615">//&nbsp;Avoid&nbsp;allocation&nbsp;if&nbsp;we&nbsp;can.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588647">if</span>&nbsp;<span class="ident" id="3588650">strings</span><span class="op" id="3588657">.</span><span class="ident" id="3588658">IndexFunc</span><span class="op" id="3588667">(</span><span class="ident" id="3588668">s</span><span class="op" id="3588669">,</span>&nbsp;<span class="ident" id="3588671">jsIsSpecial</span><span class="op" id="3588682">)</span>&nbsp;<span class="op" id="3588684">&lt;</span>&nbsp;<span class="num" id="3588686">0</span>&nbsp;<span class="op" id="3588688">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588692">return</span>&nbsp;<span class="ident" id="3588699">s</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588702">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588705">var</span>&nbsp;<span class="ident" id="3588709">b</span>&nbsp;<span class="ident" id="3588711">bytes</span><span class="op" id="3588716">.</span><span class="ident" id="3588717">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3588725">JSEscape</span><span class="op" id="3588733">(</span><span class="op" id="3588734">&amp;</span><span class="ident" id="3588735">b</span><span class="op" id="3588736">,</span>&nbsp;<span class="op" id="3588738">[</span><span class="op" id="3588739">]</span><span class="builtintype" id="3588740">byte</span><span class="op" id="3588744">(</span><span class="ident" id="3588745">s</span><span class="op" id="3588746">)</span><span class="op" id="3588747">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588750">return</span>&nbsp;<span class="ident" id="3588757">b</span><span class="op" id="3588758">.</span><span class="ident" id="3588759">String</span><span class="op" id="3588765">(</span><span class="op" id="3588766">)</span><br>
<span class="lineno"></span><span class="op" id="3588768">}</span><br>
<span class="lineno">555</span><br>
<span class="lineno"></span><span class="keyword" id="3588771">func</span>&nbsp;<span class="ident" id="3588776">jsIsSpecial</span><span class="op" id="3588787">(</span><span class="ident" id="3588788">r</span>&nbsp;<span class="builtintype" id="3588790">rune</span><span class="op" id="3588794">)</span>&nbsp;<span class="builtintype" id="3588796">bool</span>&nbsp;<span class="op" id="3588801">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588804">switch</span>&nbsp;<span class="ident" id="3588811">r</span>&nbsp;<span class="op" id="3588813">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588816">case</span>&nbsp;<span class="string" id="3588821">&#39;\\&#39;</span><span class="op" id="3588825">,</span>&nbsp;<span class="string" id="3588827">&#39;\&#39;&#39;</span><span class="op" id="3588831">,</span>&nbsp;<span class="string" id="3588833">&#39;&#34;&#39;</span><span class="op" id="3588836">,</span>&nbsp;<span class="string" id="3588838">&#39;&lt;&#39;</span><span class="op" id="3588841">,</span>&nbsp;<span class="string" id="3588843">&#39;&gt;&#39;</span><span class="op" id="3588846">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588850">return</span>&nbsp;<span class="builtintype" id="3588857">true</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3588863">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3588866">return</span>&nbsp;<span class="ident" id="3588873">r</span>&nbsp;<span class="op" id="3588875">&lt;</span>&nbsp;<span class="string" id="3588877">&#39;&nbsp;&#39;</span>&nbsp;<span class="op" id="3588881">||</span>&nbsp;<span class="ident" id="3588884">utf8</span><span class="op" id="3588888">.</span><span class="ident" id="3588889">RuneSelf</span>&nbsp;<span class="op" id="3588898">&lt;=</span>&nbsp;<span class="ident" id="3588901">r</span><br>
<span class="lineno"></span><span class="op" id="3588903">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3588906">//&nbsp;JSEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;JavaScript&nbsp;equivalent&nbsp;of&nbsp;the&nbsp;textual</span><br>
<span class="lineno">565</span><span class="comment" id="3588976">//&nbsp;representation&nbsp;of&nbsp;its&nbsp;arguments.</span><br>
<span class="lineno"></span><span class="keyword" id="3589012">func</span>&nbsp;<span class="ident" id="3589017">JSEscaper</span><span class="op" id="3589026">(</span><span class="ident" id="3589027">args</span>&nbsp;<span class="op" id="3589032">...</span><span class="keyword" id="3589035">interface</span><span class="op" id="3589044">{</span><span class="op" id="3589045">}</span><span class="op" id="3589046">)</span>&nbsp;<span class="builtintype" id="3589048">string</span>&nbsp;<span class="op" id="3589055">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589058">return</span>&nbsp;<span class="ident" id="3589065">JSEscapeString</span><span class="op" id="3589079">(</span><span class="ident" id="3589080">evalArgs</span><span class="op" id="3589088">(</span><span class="ident" id="3589089">args</span><span class="op" id="3589093">)</span><span class="op" id="3589094">)</span><br>
<span class="lineno"></span><span class="op" id="3589096">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">570</span><span class="comment" id="3589099">//&nbsp;URLQueryEscaper&nbsp;returns&nbsp;the&nbsp;escaped&nbsp;value&nbsp;of&nbsp;the&nbsp;textual&nbsp;representation&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="3589177">//&nbsp;its&nbsp;arguments&nbsp;in&nbsp;a&nbsp;form&nbsp;suitable&nbsp;for&nbsp;embedding&nbsp;in&nbsp;a&nbsp;URL&nbsp;query.</span><br>
<span class="lineno"></span><span class="keyword" id="3589243">func</span>&nbsp;<span class="ident" id="3589248">URLQueryEscaper</span><span class="op" id="3589263">(</span><span class="ident" id="3589264">args</span>&nbsp;<span class="op" id="3589269">...</span><span class="keyword" id="3589272">interface</span><span class="op" id="3589281">{</span><span class="op" id="3589282">}</span><span class="op" id="3589283">)</span>&nbsp;<span class="builtintype" id="3589285">string</span>&nbsp;<span class="op" id="3589292">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589295">return</span>&nbsp;<span class="ident" id="3589302">url</span><span class="op" id="3589305">.</span><span class="ident" id="3589306">QueryEscape</span><span class="op" id="3589317">(</span><span class="ident" id="3589318">evalArgs</span><span class="op" id="3589326">(</span><span class="ident" id="3589327">args</span><span class="op" id="3589331">)</span><span class="op" id="3589332">)</span><br>
<span class="lineno"></span><span class="op" id="3589334">}</span><br>
<span class="lineno">575</span><br>
<span class="lineno"></span><span class="comment" id="3589337">//&nbsp;evalArgs&nbsp;formats&nbsp;the&nbsp;list&nbsp;of&nbsp;arguments&nbsp;into&nbsp;a&nbsp;string.&nbsp;It&nbsp;is&nbsp;therefore&nbsp;equivalent&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="3589424">//&nbsp;&nbsp;&nbsp;&nbsp;fmt.Sprint(args...)</span><br>
<span class="lineno"></span><span class="comment" id="3589447">//&nbsp;except&nbsp;that&nbsp;each&nbsp;argument&nbsp;is&nbsp;indirected&nbsp;(if&nbsp;a&nbsp;pointer),&nbsp;as&nbsp;required,</span><br>
<span class="lineno"></span><span class="comment" id="3589519">//&nbsp;using&nbsp;the&nbsp;same&nbsp;rules&nbsp;as&nbsp;the&nbsp;default&nbsp;string&nbsp;evaluation&nbsp;during&nbsp;template</span><br>
<span class="lineno">580</span><span class="comment" id="3589592">//&nbsp;execution.</span><br>
<span class="lineno"></span><span class="keyword" id="3589606">func</span>&nbsp;<span class="ident" id="3589611">evalArgs</span><span class="op" id="3589619">(</span><span class="ident" id="3589620">args</span>&nbsp;<span class="op" id="3589625">[</span><span class="op" id="3589626">]</span><span class="keyword" id="3589627">interface</span><span class="op" id="3589636">{</span><span class="op" id="3589637">}</span><span class="op" id="3589638">)</span>&nbsp;<span class="builtintype" id="3589640">string</span>&nbsp;<span class="op" id="3589647">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589650">ok</span>&nbsp;<span class="op" id="3589653">:=</span>&nbsp;<span class="builtintype" id="3589656">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589663">var</span>&nbsp;<span class="ident" id="3589667">s</span>&nbsp;<span class="builtintype" id="3589669">string</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3589677">//&nbsp;Fast&nbsp;path&nbsp;for&nbsp;simple&nbsp;common&nbsp;case.</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589715">if</span>&nbsp;<span class="builtinfunc" id="3589718">len</span><span class="op" id="3589721">(</span><span class="ident" id="3589722">args</span><span class="op" id="3589726">)</span>&nbsp;<span class="op" id="3589728">==</span>&nbsp;<span class="num" id="3589731">1</span>&nbsp;<span class="op" id="3589733">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589737">s</span><span class="op" id="3589738">,</span>&nbsp;<span class="ident" id="3589740">ok</span>&nbsp;<span class="op" id="3589743">=</span>&nbsp;<span class="ident" id="3589745">args</span><span class="op" id="3589749">[</span><span class="num" id="3589750">0</span><span class="op" id="3589751">]</span><span class="op" id="3589752">.</span><span class="op" id="3589753">(</span><span class="builtintype" id="3589754">string</span><span class="op" id="3589760">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589763">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589766">if</span>&nbsp;<span class="op" id="3589769">!</span><span class="ident" id="3589770">ok</span>&nbsp;<span class="op" id="3589773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589777">for</span>&nbsp;<span class="ident" id="3589781">i</span><span class="op" id="3589782">,</span>&nbsp;<span class="ident" id="3589784">arg</span>&nbsp;<span class="op" id="3589788">:=</span>&nbsp;<span class="keyword" id="3589791">range</span>&nbsp;<span class="ident" id="3589797">args</span>&nbsp;<span class="op" id="3589802">{</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589807">a</span><span class="op" id="3589808">,</span>&nbsp;<span class="ident" id="3589810">ok</span>&nbsp;<span class="op" id="3589813">:=</span>&nbsp;<span class="ident" id="3589816">printableValue</span><span class="op" id="3589830">(</span><span class="ident" id="3589831">reflect</span><span class="op" id="3589838">.</span><span class="ident" id="3589839">ValueOf</span><span class="op" id="3589846">(</span><span class="ident" id="3589847">arg</span><span class="op" id="3589850">)</span><span class="op" id="3589851">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589856">if</span>&nbsp;<span class="ident" id="3589859">ok</span>&nbsp;<span class="op" id="3589862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589868">args</span><span class="op" id="3589872">[</span><span class="ident" id="3589873">i</span><span class="op" id="3589874">]</span>&nbsp;<span class="op" id="3589876">=</span>&nbsp;<span class="ident" id="3589878">a</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589883">}</span>&nbsp;<span class="comment" id="3589885">//&nbsp;else&nbsp;left&nbsp;fmt&nbsp;do&nbsp;its&nbsp;thing</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589917">}</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3589921">s</span>&nbsp;<span class="op" id="3589923">=</span>&nbsp;<span class="ident" id="3589925">fmt</span><span class="op" id="3589928">.</span><span class="ident" id="3589929">Sprint</span><span class="op" id="3589935">(</span><span class="ident" id="3589936">args</span><span class="op" id="3589940">...</span><span class="op" id="3589943">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3589946">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3589949">return</span>&nbsp;<span class="ident" id="3589956">s</span><br>
<span class="lineno"></span><span class="op" id="3589958">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
