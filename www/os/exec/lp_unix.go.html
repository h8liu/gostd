<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="5515360">//&nbsp;Copyright&nbsp;2010&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="5515416">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="5515470">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="5515521">//&nbsp;+build&nbsp;darwin&nbsp;dragonfly&nbsp;freebsd&nbsp;linux&nbsp;nacl&nbsp;netbsd&nbsp;openbsd&nbsp;solaris</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5515591">package</span>&nbsp;<span class="ident" id="5515599">exec</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5515605">import</span>&nbsp;<span class="op" id="5515612">(</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5515615">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5515625">&#34;os&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="5515631">&#34;strings&#34;</span><br>
<span class="lineno"></span><span class="op" id="5515641">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="comment" id="5515644">//&nbsp;ErrNotFound&nbsp;is&nbsp;the&nbsp;error&nbsp;resulting&nbsp;if&nbsp;a&nbsp;path&nbsp;search&nbsp;failed&nbsp;to&nbsp;find&nbsp;an&nbsp;executable&nbsp;file.</span><br>
<span class="lineno"></span><span class="keyword" id="5515734">var</span>&nbsp;<span class="ident" id="5515738">ErrNotFound</span>&nbsp;<span class="op" id="5515750">=</span>&nbsp;<span class="ident" id="5515752"><a href="/os/exec/lp_unix.go.html#5515615">errors</a></span><span class="op" id="5515758">.</span><span class="ident" id="5515759">New</span><span class="op" id="5515762">(</span><span class="string" id="5515763">&#34;executable&nbsp;file&nbsp;not&nbsp;found&nbsp;in&nbsp;$PATH&#34;</span><span class="op" id="5515799">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="5515802">func</span>&nbsp;<span class="ident" id="5515807">findExecutable</span><span class="op" id="5515821">(</span><span class="ident" id="5515822">file</span>&nbsp;<span class="builtintype" id="5515827">string</span><span class="op" id="5515833">)</span>&nbsp;<span class="builtintype" id="5515835">error</span>&nbsp;<span class="op" id="5515841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5515844">d</span><span class="op" id="5515845">,</span>&nbsp;<span class="ident" id="5515847">err</span>&nbsp;<span class="op" id="5515851">:=</span>&nbsp;<span class="ident" id="5515854"><a href="/os/exec/lp_unix.go.html#5515625">os</a></span><span class="op" id="5515856">.</span><span class="ident" id="5515857">Stat</span><span class="op" id="5515861">(</span><span class="ident" id="5515862"><a href="/os/exec/lp_unix.go.html#5515822">file</a></span><span class="op" id="5515866">)</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5515869">if</span>&nbsp;<span class="ident" id="5515872"><a href="/os/exec/lp_unix.go.html#5515847">err</a></span>&nbsp;<span class="op" id="5515876">!=</span>&nbsp;<span class="ident" id="5515879">nil</span>&nbsp;<span class="op" id="5515883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5515887">return</span>&nbsp;<span class="ident" id="5515894"><a href="/os/exec/lp_unix.go.html#5515847">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5515899">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5515902">if</span>&nbsp;<span class="ident" id="5515905">m</span>&nbsp;<span class="op" id="5515907">:=</span>&nbsp;<span class="ident" id="5515910"><a href="/os/exec/lp_unix.go.html#5515844">d</a></span><span class="op" id="5515911">.</span><span class="ident" id="5515912">Mode</span><span class="op" id="5515916">(</span><span class="op" id="5515917">)</span><span class="op" id="5515918">;</span>&nbsp;<span class="op" id="5515920">!</span><span class="ident" id="5515921"><a href="/os/exec/lp_unix.go.html#5515905">m</a></span><span class="op" id="5515922">.</span><span class="ident" id="5515923">IsDir</span><span class="op" id="5515928">(</span><span class="op" id="5515929">)</span>&nbsp;<span class="op" id="5515931">&amp;&amp;</span>&nbsp;<span class="ident" id="5515934"><a href="/os/exec/lp_unix.go.html#5515905">m</a></span><span class="op" id="5515935">&amp;</span><span class="num" id="5515936">0111</span>&nbsp;<span class="op" id="5515941">!=</span>&nbsp;<span class="num" id="5515944">0</span>&nbsp;<span class="op" id="5515946">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5515950">return</span>&nbsp;<span class="ident" id="5515957">nil</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5515962">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5515965">return</span>&nbsp;<span class="ident" id="5515972"><a href="/os/exec/lp_unix.go.html#5515625">os</a></span><span class="op" id="5515974">.</span><span class="ident" id="5515975">ErrPermission</span><br>
<span class="lineno"></span><span class="op" id="5515989">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="5515992">//&nbsp;LookPath&nbsp;searches&nbsp;for&nbsp;an&nbsp;executable&nbsp;binary&nbsp;named&nbsp;file</span><br>
<span class="lineno">30</span><span class="comment" id="5516049">//&nbsp;in&nbsp;the&nbsp;directories&nbsp;named&nbsp;by&nbsp;the&nbsp;PATH&nbsp;environment&nbsp;variable.</span><br>
<span class="lineno"></span><span class="comment" id="5516111">//&nbsp;If&nbsp;file&nbsp;contains&nbsp;a&nbsp;slash,&nbsp;it&nbsp;is&nbsp;tried&nbsp;directly&nbsp;and&nbsp;the&nbsp;PATH&nbsp;is&nbsp;not&nbsp;consulted.</span><br>
<span class="lineno"></span><span class="comment" id="5516192">//&nbsp;The&nbsp;result&nbsp;may&nbsp;be&nbsp;an&nbsp;absolute&nbsp;path&nbsp;or&nbsp;a&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;directory.</span><br>
<span class="lineno"></span><span class="keyword" id="5516275">func</span>&nbsp;<span class="ident" id="5516280">LookPath</span><span class="op" id="5516288">(</span><span class="ident" id="5516289">file</span>&nbsp;<span class="builtintype" id="5516294">string</span><span class="op" id="5516300">)</span>&nbsp;<span class="op" id="5516302">(</span><span class="builtintype" id="5516303">string</span><span class="op" id="5516309">,</span>&nbsp;<span class="builtintype" id="5516311">error</span><span class="op" id="5516316">)</span>&nbsp;<span class="op" id="5516318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516321">//&nbsp;NOTE(rsc):&nbsp;I&nbsp;wish&nbsp;we&nbsp;could&nbsp;use&nbsp;the&nbsp;Plan&nbsp;9&nbsp;behavior&nbsp;here</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516381">//&nbsp;(only&nbsp;bypass&nbsp;the&nbsp;path&nbsp;if&nbsp;file&nbsp;begins&nbsp;with&nbsp;/&nbsp;or&nbsp;./&nbsp;or&nbsp;../)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516443">//&nbsp;but&nbsp;that&nbsp;would&nbsp;not&nbsp;match&nbsp;all&nbsp;the&nbsp;Unix&nbsp;shells.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516494">if</span>&nbsp;<span class="ident" id="5516497"><a href="/os/exec/lp_unix.go.html#5515631">strings</a></span><span class="op" id="5516504">.</span><span class="ident" id="5516505">Contains</span><span class="op" id="5516513">(</span><span class="ident" id="5516514"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516518">,</span>&nbsp;<span class="string" id="5516520">&#34;/&#34;</span><span class="op" id="5516523">)</span>&nbsp;<span class="op" id="5516525">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516529">err</span>&nbsp;<span class="op" id="5516533">:=</span>&nbsp;<span class="ident" id="5516536"><a href="/os/exec/lp_unix.go.html#5515807">findExecutable</a></span><span class="op" id="5516550">(</span><span class="ident" id="5516551"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516555">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516559">if</span>&nbsp;<span class="ident" id="5516562"><a href="/os/exec/lp_unix.go.html#5516529">err</a></span>&nbsp;<span class="op" id="5516566">==</span>&nbsp;<span class="ident" id="5516569">nil</span>&nbsp;<span class="op" id="5516573">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516578">return</span>&nbsp;<span class="ident" id="5516585"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516589">,</span>&nbsp;<span class="ident" id="5516591">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516597">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516601">return</span>&nbsp;<span class="string" id="5516608">&#34;&#34;</span><span class="op" id="5516610">,</span>&nbsp;<span class="op" id="5516612">&amp;</span><span class="ident" id="5516613"><a href="/os/exec/exec.go.html#5502559">Error</a></span><span class="op" id="5516618">{</span><span class="ident" id="5516619"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516623">,</span>&nbsp;<span class="ident" id="5516625"><a href="/os/exec/lp_unix.go.html#5516529">err</a></span><span class="op" id="5516628">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516631">}</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516634">pathenv</span>&nbsp;<span class="op" id="5516642">:=</span>&nbsp;<span class="ident" id="5516645"><a href="/os/exec/lp_unix.go.html#5515625">os</a></span><span class="op" id="5516647">.</span><span class="ident" id="5516648">Getenv</span><span class="op" id="5516654">(</span><span class="string" id="5516655">&#34;PATH&#34;</span><span class="op" id="5516661">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516664">if</span>&nbsp;<span class="ident" id="5516667"><a href="/os/exec/lp_unix.go.html#5516634">pathenv</a></span>&nbsp;<span class="op" id="5516675">==</span>&nbsp;<span class="string" id="5516678">&#34;&#34;</span>&nbsp;<span class="op" id="5516681">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516685">return</span>&nbsp;<span class="string" id="5516692">&#34;&#34;</span><span class="op" id="5516694">,</span>&nbsp;<span class="op" id="5516696">&amp;</span><span class="ident" id="5516697"><a href="/os/exec/exec.go.html#5502559">Error</a></span><span class="op" id="5516702">{</span><span class="ident" id="5516703"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516707">,</span>&nbsp;<span class="ident" id="5516709"><a href="/os/exec/lp_unix.go.html#5515738">ErrNotFound</a></span><span class="op" id="5516720">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516723">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516726">for</span>&nbsp;<span class="ident" id="5516730">_</span><span class="op" id="5516731">,</span>&nbsp;<span class="ident" id="5516733">dir</span>&nbsp;<span class="op" id="5516737">:=</span>&nbsp;<span class="keyword" id="5516740">range</span>&nbsp;<span class="ident" id="5516746"><a href="/os/exec/lp_unix.go.html#5515631">strings</a></span><span class="op" id="5516753">.</span><span class="ident" id="5516754">Split</span><span class="op" id="5516759">(</span><span class="ident" id="5516760"><a href="/os/exec/lp_unix.go.html#5516634">pathenv</a></span><span class="op" id="5516767">,</span>&nbsp;<span class="string" id="5516769">&#34;:&#34;</span><span class="op" id="5516772">)</span>&nbsp;<span class="op" id="5516774">{</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516778">if</span>&nbsp;<span class="ident" id="5516781"><a href="/os/exec/lp_unix.go.html#5516733">dir</a></span>&nbsp;<span class="op" id="5516785">==</span>&nbsp;<span class="string" id="5516788">&#34;&#34;</span>&nbsp;<span class="op" id="5516791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="5516796">//&nbsp;Unix&nbsp;shell&nbsp;semantics:&nbsp;path&nbsp;element&nbsp;&#34;&#34;&nbsp;means&nbsp;&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516850"><a href="/os/exec/lp_unix.go.html#5516733">dir</a></span>&nbsp;<span class="op" id="5516854">=</span>&nbsp;<span class="string" id="5516856">&#34;.&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516862">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="5516866">path</span>&nbsp;<span class="op" id="5516871">:=</span>&nbsp;<span class="ident" id="5516874"><a href="/os/exec/lp_unix.go.html#5516733">dir</a></span>&nbsp;<span class="op" id="5516878">+</span>&nbsp;<span class="string" id="5516880">&#34;/&#34;</span>&nbsp;<span class="op" id="5516884">+</span>&nbsp;<span class="ident" id="5516886"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516893">if</span>&nbsp;<span class="ident" id="5516896">err</span>&nbsp;<span class="op" id="5516900">:=</span>&nbsp;<span class="ident" id="5516903"><a href="/os/exec/lp_unix.go.html#5515807">findExecutable</a></span><span class="op" id="5516917">(</span><span class="ident" id="5516918"><a href="/os/exec/lp_unix.go.html#5516866">path</a></span><span class="op" id="5516922">)</span><span class="op" id="5516923">;</span>&nbsp;<span class="ident" id="5516925"><a href="/os/exec/lp_unix.go.html#5516896">err</a></span>&nbsp;<span class="op" id="5516929">==</span>&nbsp;<span class="ident" id="5516932">nil</span>&nbsp;<span class="op" id="5516936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516941">return</span>&nbsp;<span class="ident" id="5516948"><a href="/os/exec/lp_unix.go.html#5516866">path</a></span><span class="op" id="5516952">,</span>&nbsp;<span class="ident" id="5516954">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516960">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="5516963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="5516966">return</span>&nbsp;<span class="string" id="5516973">&#34;&#34;</span><span class="op" id="5516975">,</span>&nbsp;<span class="op" id="5516977">&amp;</span><span class="ident" id="5516978"><a href="/os/exec/exec.go.html#5502559">Error</a></span><span class="op" id="5516983">{</span><span class="ident" id="5516984"><a href="/os/exec/lp_unix.go.html#5516289">file</a></span><span class="op" id="5516988">,</span>&nbsp;<span class="ident" id="5516990"><a href="/os/exec/lp_unix.go.html#5515738">ErrNotFound</a></span><span class="op" id="5517001">}</span><br>
<span class="lineno">60</span><span class="op" id="5517003">}</span>
</div>
</body>
</html>
