<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>encoding/xml</h2>
<ul>
<li><a href="/gostd/encoding/xml/atom_test.go.html">atom_test.go</a></li>
<li><a href="/gostd/encoding/xml/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/encoding/xml/marshal.go.html">marshal.go</a></li>
<li><a href="/gostd/encoding/xml/marshal_test.go.html">marshal_test.go</a></li>
<li><a href="/gostd/encoding/xml/read.go.html">read.go</a></li>
<li><a href="/gostd/encoding/xml/read_test.go.html">read_test.go</a></li>
<li><a href="/gostd/encoding/xml/typeinfo.go.html">typeinfo.go</a></li>
<li><a href="/gostd/encoding/xml/xml.go.html">xml.go</a></li>
<li><a href="/gostd/encoding/xml/xml_test.go.html">xml_test.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="6402699">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="6402755">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="6402809">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="6402860">package</span>&nbsp;<span class="ident" id="6402868">xml</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6402873">import</span>&nbsp;<span class="op" id="6402880">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402883">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402892">&#34;encoding&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402904">&#34;errors&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402914">&#34;fmt&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402921">&#34;reflect&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402932">&#34;strconv&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="6402943">&#34;strings&#34;</span><br>
<span class="lineno">15</span><span class="op" id="6402953">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6402956">//&nbsp;BUG(rsc):&nbsp;Mapping&nbsp;between&nbsp;XML&nbsp;elements&nbsp;and&nbsp;data&nbsp;structures&nbsp;is&nbsp;inherently&nbsp;flawed:</span><br>
<span class="lineno"></span><span class="comment" id="6403040">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;is&nbsp;an&nbsp;order-dependent&nbsp;collection&nbsp;of&nbsp;anonymous</span><br>
<span class="lineno"></span><span class="comment" id="6403104">//&nbsp;values,&nbsp;while&nbsp;a&nbsp;data&nbsp;structure&nbsp;is&nbsp;an&nbsp;order-independent&nbsp;collection</span><br>
<span class="lineno">20</span><span class="comment" id="6403173">//&nbsp;of&nbsp;named&nbsp;values.</span><br>
<span class="lineno"></span><span class="comment" id="6403193">//&nbsp;See&nbsp;package&nbsp;json&nbsp;for&nbsp;a&nbsp;textual&nbsp;representation&nbsp;more&nbsp;suitable</span><br>
<span class="lineno"></span><span class="comment" id="6403256">//&nbsp;to&nbsp;data&nbsp;structures.</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6403280">//&nbsp;Unmarshal&nbsp;parses&nbsp;the&nbsp;XML-encoded&nbsp;data&nbsp;and&nbsp;stores&nbsp;the&nbsp;result&nbsp;in</span><br>
<span class="lineno">25</span><span class="comment" id="6403346">//&nbsp;the&nbsp;value&nbsp;pointed&nbsp;to&nbsp;by&nbsp;v,&nbsp;which&nbsp;must&nbsp;be&nbsp;an&nbsp;arbitrary&nbsp;struct,</span><br>
<span class="lineno"></span><span class="comment" id="6403411">//&nbsp;slice,&nbsp;or&nbsp;string.&nbsp;Well-formed&nbsp;data&nbsp;that&nbsp;does&nbsp;not&nbsp;fit&nbsp;into&nbsp;v&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6403477">//&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6403491">//</span><br>
<span class="lineno"></span><span class="comment" id="6403494">//&nbsp;Because&nbsp;Unmarshal&nbsp;uses&nbsp;the&nbsp;reflect&nbsp;package,&nbsp;it&nbsp;can&nbsp;only&nbsp;assign</span><br>
<span class="lineno">30</span><span class="comment" id="6403560">//&nbsp;to&nbsp;exported&nbsp;(upper&nbsp;case)&nbsp;fields.&nbsp;&nbsp;Unmarshal&nbsp;uses&nbsp;a&nbsp;case-sensitive</span><br>
<span class="lineno"></span><span class="comment" id="6403629">//&nbsp;comparison&nbsp;to&nbsp;match&nbsp;XML&nbsp;element&nbsp;names&nbsp;to&nbsp;tag&nbsp;values&nbsp;and&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6403695">//&nbsp;field&nbsp;names.</span><br>
<span class="lineno"></span><span class="comment" id="6403711">//</span><br>
<span class="lineno"></span><span class="comment" id="6403714">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;struct&nbsp;using&nbsp;the&nbsp;following&nbsp;rules.</span><br>
<span class="lineno">35</span><span class="comment" id="6403786">//&nbsp;In&nbsp;the&nbsp;rules,&nbsp;the&nbsp;tag&nbsp;of&nbsp;a&nbsp;field&nbsp;refers&nbsp;to&nbsp;the&nbsp;value&nbsp;associated&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6403862">//&nbsp;key&nbsp;&#39;xml&#39;&nbsp;in&nbsp;the&nbsp;struct&nbsp;field&#39;s&nbsp;tag&nbsp;(see&nbsp;the&nbsp;example&nbsp;above).</span><br>
<span class="lineno"></span><span class="comment" id="6403926">//</span><br>
<span class="lineno"></span><span class="comment" id="6403929">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;of&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string&nbsp;with&nbsp;tag</span><br>
<span class="lineno"></span><span class="comment" id="6403996">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;,innerxml&#34;,&nbsp;Unmarshal&nbsp;accumulates&nbsp;the&nbsp;raw&nbsp;XML&nbsp;nested&nbsp;inside&nbsp;the</span><br>
<span class="lineno">40</span><span class="comment" id="6404069">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;in&nbsp;that&nbsp;field.&nbsp;&nbsp;The&nbsp;rest&nbsp;of&nbsp;the&nbsp;rules&nbsp;still&nbsp;apply.</span><br>
<span class="lineno"></span><span class="comment" id="6404136">//</span><br>
<span class="lineno"></span><span class="comment" id="6404139">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;named&nbsp;XMLName&nbsp;of&nbsp;type&nbsp;xml.Name,</span><br>
<span class="lineno"></span><span class="comment" id="6404204">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;element&nbsp;name&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6404262">//</span><br>
<span class="lineno">45</span><span class="comment" id="6404265">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XMLName&nbsp;field&nbsp;has&nbsp;an&nbsp;associated&nbsp;tag&nbsp;of&nbsp;the&nbsp;form</span><br>
<span class="lineno"></span><span class="comment" id="6404327">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#34;name&#34;&nbsp;or&nbsp;&#34;namespace-URL&nbsp;name&#34;,&nbsp;the&nbsp;XML&nbsp;element&nbsp;must&nbsp;have</span><br>
<span class="lineno"></span><span class="comment" id="6404393">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;given&nbsp;name&nbsp;(and,&nbsp;optionally,&nbsp;name&nbsp;space)&nbsp;or&nbsp;else&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6404464">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns&nbsp;an&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6404490">//</span><br>
<span class="lineno">50</span><span class="comment" id="6404493">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;has&nbsp;an&nbsp;attribute&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6404557">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;struct&nbsp;field&nbsp;name&nbsp;with&nbsp;an&nbsp;associated&nbsp;tag&nbsp;containing&nbsp;&#34;,attr&#34;&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6404628">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;explicit&nbsp;name&nbsp;in&nbsp;a&nbsp;struct&nbsp;field&nbsp;tag&nbsp;of&nbsp;the&nbsp;form&nbsp;&#34;name,attr&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6404701">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unmarshal&nbsp;records&nbsp;the&nbsp;attribute&nbsp;value&nbsp;in&nbsp;that&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6404762">//</span><br>
<span class="lineno">55</span><span class="comment" id="6404765">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;character&nbsp;data,&nbsp;that&nbsp;data&nbsp;is</span><br>
<span class="lineno"></span><span class="comment" id="6404829">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulated&nbsp;in&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,chardata&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6404901">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;struct&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6404958">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such&nbsp;field,&nbsp;the&nbsp;character&nbsp;data&nbsp;is&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6405026">//</span><br>
<span class="lineno">60</span><span class="comment" id="6405029">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;comments,&nbsp;they&nbsp;are&nbsp;accumulated&nbsp;in</span><br>
<span class="lineno"></span><span class="comment" id="6405098">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;first&nbsp;struct&nbsp;field&nbsp;that&nbsp;has&nbsp;tag&nbsp;&#34;,comment&#34;.&nbsp;&nbsp;The&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6405166">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;may&nbsp;have&nbsp;type&nbsp;[]byte&nbsp;or&nbsp;string.&nbsp;&nbsp;If&nbsp;there&nbsp;is&nbsp;no&nbsp;such</span><br>
<span class="lineno"></span><span class="comment" id="6405233">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field,&nbsp;the&nbsp;comments&nbsp;are&nbsp;discarded.</span><br>
<span class="lineno"></span><span class="comment" id="6405276">//</span><br>
<span class="lineno">65</span><span class="comment" id="6405279">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6405347">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;prefix&nbsp;of&nbsp;a&nbsp;tag&nbsp;formatted&nbsp;as&nbsp;&#34;a&#34;&nbsp;or&nbsp;&#34;a&gt;b&gt;c&#34;,&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6405414">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;descend&nbsp;into&nbsp;the&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;elements&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6405488">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given&nbsp;names,&nbsp;and&nbsp;will&nbsp;map&nbsp;the&nbsp;innermost&nbsp;elements&nbsp;to&nbsp;that&nbsp;struct</span><br>
<span class="lineno"></span><span class="comment" id="6405560">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field.&nbsp;A&nbsp;tag&nbsp;starting&nbsp;with&nbsp;&#34;&gt;&#34;&nbsp;is&nbsp;equivalent&nbsp;to&nbsp;one&nbsp;starting</span><br>
<span class="lineno">70</span><span class="comment" id="6405629">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;field&nbsp;name&nbsp;followed&nbsp;by&nbsp;&#34;&gt;&#34;.</span><br>
<span class="lineno"></span><span class="comment" id="6405674">//</span><br>
<span class="lineno"></span><span class="comment" id="6405677">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches</span><br>
<span class="lineno"></span><span class="comment" id="6405745">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;struct&nbsp;field&#39;s&nbsp;XMLName&nbsp;tag&nbsp;and&nbsp;the&nbsp;struct&nbsp;field&nbsp;has&nbsp;no</span><br>
<span class="lineno"></span><span class="comment" id="6405810">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;name&nbsp;tag&nbsp;as&nbsp;per&nbsp;the&nbsp;previous&nbsp;rule,&nbsp;unmarshal&nbsp;maps</span><br>
<span class="lineno">75</span><span class="comment" id="6405877">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6405923">//</span><br>
<span class="lineno"></span><span class="comment" id="6405926">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;whose&nbsp;name&nbsp;matches&nbsp;a</span><br>
<span class="lineno"></span><span class="comment" id="6405996">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;without&nbsp;any&nbsp;mode&nbsp;flags&nbsp;(&#34;,attr&#34;,&nbsp;&#34;,chardata&#34;,&nbsp;etc),&nbsp;Unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6406072">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno">80</span><span class="comment" id="6406123">//</span><br>
<span class="lineno"></span><span class="comment" id="6406126">//&nbsp;&nbsp;&nbsp;*&nbsp;If&nbsp;the&nbsp;XML&nbsp;element&nbsp;contains&nbsp;a&nbsp;sub-element&nbsp;that&nbsp;hasn&#39;t&nbsp;matched&nbsp;any</span><br>
<span class="lineno"></span><span class="comment" id="6406199">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;above&nbsp;rules&nbsp;and&nbsp;the&nbsp;struct&nbsp;has&nbsp;a&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;,any&#34;,</span><br>
<span class="lineno"></span><span class="comment" id="6406270">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unmarshal&nbsp;maps&nbsp;the&nbsp;sub-element&nbsp;to&nbsp;that&nbsp;struct&nbsp;field.</span><br>
<span class="lineno"></span><span class="comment" id="6406331">//</span><br>
<span class="lineno">85</span><span class="comment" id="6406334">//&nbsp;&nbsp;&nbsp;*&nbsp;An&nbsp;anonymous&nbsp;struct&nbsp;field&nbsp;is&nbsp;handled&nbsp;as&nbsp;if&nbsp;the&nbsp;fields&nbsp;of&nbsp;its</span><br>
<span class="lineno"></span><span class="comment" id="6406402">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;were&nbsp;part&nbsp;of&nbsp;the&nbsp;outer&nbsp;struct.</span><br>
<span class="lineno"></span><span class="comment" id="6406447">//</span><br>
<span class="lineno"></span><span class="comment" id="6406450">//&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;struct&nbsp;field&nbsp;with&nbsp;tag&nbsp;&#34;-&#34;&nbsp;is&nbsp;never&nbsp;unmarshalled&nbsp;into.</span><br>
<span class="lineno"></span><span class="comment" id="6406513">//</span><br>
<span class="lineno">90</span><span class="comment" id="6406516">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6406585">//&nbsp;concatenation&nbsp;of&nbsp;that&nbsp;element&#39;s&nbsp;character&nbsp;data&nbsp;in&nbsp;the&nbsp;string&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6406652">//&nbsp;[]byte.&nbsp;The&nbsp;saved&nbsp;[]byte&nbsp;is&nbsp;never&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="6406694">//</span><br>
<span class="lineno"></span><span class="comment" id="6406697">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;string&nbsp;or&nbsp;[]byte&nbsp;by&nbsp;saving</span><br>
<span class="lineno">95</span><span class="comment" id="6406766">//&nbsp;the&nbsp;value&nbsp;in&nbsp;the&nbsp;string&nbsp;or&nbsp;slice.</span><br>
<span class="lineno"></span><span class="comment" id="6406803">//</span><br>
<span class="lineno"></span><span class="comment" id="6406806">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;slice&nbsp;by&nbsp;extending&nbsp;the&nbsp;length&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="6406877">//&nbsp;the&nbsp;slice&nbsp;and&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;the&nbsp;newly&nbsp;created&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6406942">//</span><br>
<span class="lineno">100</span><span class="comment" id="6406945">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;a&nbsp;bool&nbsp;by</span><br>
<span class="lineno"></span><span class="comment" id="6407010">//&nbsp;setting&nbsp;it&nbsp;to&nbsp;the&nbsp;boolean&nbsp;value&nbsp;represented&nbsp;by&nbsp;the&nbsp;string.</span><br>
<span class="lineno"></span><span class="comment" id="6407072">//</span><br>
<span class="lineno"></span><span class="comment" id="6407075">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;or&nbsp;attribute&nbsp;value&nbsp;to&nbsp;an&nbsp;integer&nbsp;or</span><br>
<span class="lineno"></span><span class="comment" id="6407144">//&nbsp;floating-point&nbsp;field&nbsp;by&nbsp;setting&nbsp;the&nbsp;field&nbsp;to&nbsp;the&nbsp;result&nbsp;of</span><br>
<span class="lineno">105</span><span class="comment" id="6407206">//&nbsp;interpreting&nbsp;the&nbsp;string&nbsp;value&nbsp;in&nbsp;decimal.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;check&nbsp;for</span><br>
<span class="lineno"></span><span class="comment" id="6407274">//&nbsp;overflow.</span><br>
<span class="lineno"></span><span class="comment" id="6407287">//</span><br>
<span class="lineno"></span><span class="comment" id="6407290">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;an&nbsp;xml.Name&nbsp;by&nbsp;recording&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6407355">//&nbsp;element&nbsp;name.</span><br>
<span class="lineno">110</span><span class="comment" id="6407372">//</span><br>
<span class="lineno"></span><span class="comment" id="6407375">//&nbsp;Unmarshal&nbsp;maps&nbsp;an&nbsp;XML&nbsp;element&nbsp;to&nbsp;a&nbsp;pointer&nbsp;by&nbsp;setting&nbsp;the&nbsp;pointer</span><br>
<span class="lineno"></span><span class="comment" id="6407444">//&nbsp;to&nbsp;a&nbsp;freshly&nbsp;allocated&nbsp;value&nbsp;and&nbsp;then&nbsp;mapping&nbsp;the&nbsp;element&nbsp;to&nbsp;that&nbsp;value.</span><br>
<span class="lineno"></span><span class="comment" id="6407520">//</span><br>
<span class="lineno"></span><span class="keyword" id="6407523">func</span>&nbsp;<span class="ident" id="6407528">Unmarshal</span><span class="op" id="6407537">(</span><span class="ident" id="6407538">data</span>&nbsp;<span class="op" id="6407543">[</span><span class="op" id="6407544">]</span><span class="builtintype" id="6407545">byte</span><span class="op" id="6407549">,</span>&nbsp;<span class="ident" id="6407551">v</span>&nbsp;<span class="keyword" id="6407553">interface</span><span class="op" id="6407562">{</span><span class="op" id="6407563">}</span><span class="op" id="6407564">)</span>&nbsp;<span class="builtintype" id="6407566">error</span>&nbsp;<span class="op" id="6407572">{</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407575">return</span>&nbsp;<span class="ident" id="6407582">NewDecoder</span><span class="op" id="6407592">(</span><span class="ident" id="6407593">bytes</span><span class="op" id="6407598">.</span><span class="ident" id="6407599">NewReader</span><span class="op" id="6407608">(</span><span class="ident" id="6407609">data</span><span class="op" id="6407613">)</span><span class="op" id="6407614">)</span><span class="op" id="6407615">.</span><span class="ident" id="6407616">Decode</span><span class="op" id="6407622">(</span><span class="ident" id="6407623">v</span><span class="op" id="6407624">)</span><br>
<span class="lineno"></span><span class="op" id="6407626">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6407629">//&nbsp;Decode&nbsp;works&nbsp;like&nbsp;xml.Unmarshal,&nbsp;except&nbsp;it&nbsp;reads&nbsp;the&nbsp;decoder</span><br>
<span class="lineno"></span><span class="comment" id="6407693">//&nbsp;stream&nbsp;to&nbsp;find&nbsp;the&nbsp;start&nbsp;element.</span><br>
<span class="lineno">120</span><span class="keyword" id="6407730">func</span>&nbsp;<span class="op" id="6407735">(</span><span class="ident" id="6407736">d</span>&nbsp;<span class="op" id="6407738">*</span><span class="ident" id="6407739">Decoder</span><span class="op" id="6407746">)</span>&nbsp;<span class="ident" id="6407748">Decode</span><span class="op" id="6407754">(</span><span class="ident" id="6407755">v</span>&nbsp;<span class="keyword" id="6407757">interface</span><span class="op" id="6407766">{</span><span class="op" id="6407767">}</span><span class="op" id="6407768">)</span>&nbsp;<span class="builtintype" id="6407770">error</span>&nbsp;<span class="op" id="6407776">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6407779">return</span>&nbsp;<span class="ident" id="6407786">d</span><span class="op" id="6407787">.</span><span class="ident" id="6407788">DecodeElement</span><span class="op" id="6407801">(</span><span class="ident" id="6407802">v</span><span class="op" id="6407803">,</span>&nbsp;<span class="ident" id="6407805">nil</span><span class="op" id="6407808">)</span><br>
<span class="lineno"></span><span class="op" id="6407810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6407813">//&nbsp;DecodeElement&nbsp;works&nbsp;like&nbsp;xml.Unmarshal&nbsp;except&nbsp;that&nbsp;it&nbsp;takes</span><br>
<span class="lineno">125</span><span class="comment" id="6407876">//&nbsp;a&nbsp;pointer&nbsp;to&nbsp;the&nbsp;start&nbsp;XML&nbsp;element&nbsp;to&nbsp;decode&nbsp;into&nbsp;v.</span><br>
<span class="lineno"></span><span class="comment" id="6407932">//&nbsp;It&nbsp;is&nbsp;useful&nbsp;when&nbsp;a&nbsp;client&nbsp;reads&nbsp;some&nbsp;raw&nbsp;XML&nbsp;tokens&nbsp;itself</span><br>
<span class="lineno"></span><span class="comment" id="6407995">//&nbsp;but&nbsp;also&nbsp;wants&nbsp;to&nbsp;defer&nbsp;to&nbsp;Unmarshal&nbsp;for&nbsp;some&nbsp;elements.</span><br>
<span class="lineno"></span><span class="keyword" id="6408054">func</span>&nbsp;<span class="op" id="6408059">(</span><span class="ident" id="6408060">d</span>&nbsp;<span class="op" id="6408062">*</span><span class="ident" id="6408063">Decoder</span><span class="op" id="6408070">)</span>&nbsp;<span class="ident" id="6408072">DecodeElement</span><span class="op" id="6408085">(</span><span class="ident" id="6408086">v</span>&nbsp;<span class="keyword" id="6408088">interface</span><span class="op" id="6408097">{</span><span class="op" id="6408098">}</span><span class="op" id="6408099">,</span>&nbsp;<span class="ident" id="6408101">start</span>&nbsp;<span class="op" id="6408107">*</span><span class="ident" id="6408108">StartElement</span><span class="op" id="6408120">)</span>&nbsp;<span class="builtintype" id="6408122">error</span>&nbsp;<span class="op" id="6408128">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6408131">val</span>&nbsp;<span class="op" id="6408135">:=</span>&nbsp;<span class="ident" id="6408138">reflect</span><span class="op" id="6408145">.</span><span class="ident" id="6408146">ValueOf</span><span class="op" id="6408153">(</span><span class="ident" id="6408154">v</span><span class="op" id="6408155">)</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408158">if</span>&nbsp;<span class="ident" id="6408161">val</span><span class="op" id="6408164">.</span><span class="ident" id="6408165">Kind</span><span class="op" id="6408169">(</span><span class="op" id="6408170">)</span>&nbsp;<span class="op" id="6408172">!=</span>&nbsp;<span class="ident" id="6408175">reflect</span><span class="op" id="6408182">.</span><span class="ident" id="6408183">Ptr</span>&nbsp;<span class="op" id="6408187">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408191">return</span>&nbsp;<span class="ident" id="6408198">errors</span><span class="op" id="6408204">.</span><span class="ident" id="6408205">New</span><span class="op" id="6408208">(</span><span class="string" id="6408209">&#34;non-pointer&nbsp;passed&nbsp;to&nbsp;Unmarshal&#34;</span><span class="op" id="6408242">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6408245">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6408248">return</span>&nbsp;<span class="ident" id="6408255">d</span><span class="op" id="6408256">.</span><span class="ident" id="6408257">unmarshal</span><span class="op" id="6408266">(</span><span class="ident" id="6408267">val</span><span class="op" id="6408270">.</span><span class="ident" id="6408271">Elem</span><span class="op" id="6408275">(</span><span class="op" id="6408276">)</span><span class="op" id="6408277">,</span>&nbsp;<span class="ident" id="6408279">start</span><span class="op" id="6408284">)</span><br>
<span class="lineno"></span><span class="op" id="6408286">}</span><br>
<span class="lineno">135</span><br>
<span class="lineno"></span><span class="comment" id="6408289">//&nbsp;An&nbsp;UnmarshalError&nbsp;represents&nbsp;an&nbsp;error&nbsp;in&nbsp;the&nbsp;unmarshalling&nbsp;process.</span><br>
<span class="lineno"></span><span class="keyword" id="6408360">type</span>&nbsp;<span class="ident" id="6408365">UnmarshalError</span>&nbsp;<span class="builtintype" id="6408380">string</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="6408388">func</span>&nbsp;<span class="op" id="6408393">(</span><span class="ident" id="6408394">e</span>&nbsp;<span class="ident" id="6408396">UnmarshalError</span><span class="op" id="6408410">)</span>&nbsp;<span class="ident" id="6408412">Error</span><span class="op" id="6408417">(</span><span class="op" id="6408418">)</span>&nbsp;<span class="builtintype" id="6408420">string</span>&nbsp;<span class="op" id="6408427">{</span>&nbsp;<span class="keyword" id="6408429">return</span>&nbsp;<span class="builtintype" id="6408436">string</span><span class="op" id="6408442">(</span><span class="ident" id="6408443">e</span><span class="op" id="6408444">)</span>&nbsp;<span class="op" id="6408446">}</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span><span class="comment" id="6408449">//&nbsp;Unmarshaler&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6408523">//&nbsp;an&nbsp;XML&nbsp;element&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6408568">//</span><br>
<span class="lineno"></span><span class="comment" id="6408571">//&nbsp;UnmarshalXML&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;element</span><br>
<span class="lineno">145</span><span class="comment" id="6408616">//&nbsp;beginning&nbsp;with&nbsp;the&nbsp;given&nbsp;start&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6408659">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno"></span><span class="comment" id="6408724">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6408747">//&nbsp;UnmarshalXML&nbsp;must&nbsp;consume&nbsp;exactly&nbsp;one&nbsp;XML&nbsp;element.</span><br>
<span class="lineno"></span><span class="comment" id="6408801">//&nbsp;One&nbsp;common&nbsp;implementation&nbsp;strategy&nbsp;is&nbsp;to&nbsp;unmarshal&nbsp;into</span><br>
<span class="lineno">150</span><span class="comment" id="6408860">//&nbsp;a&nbsp;separate&nbsp;value&nbsp;with&nbsp;a&nbsp;layout&nbsp;matching&nbsp;the&nbsp;expected&nbsp;XML</span><br>
<span class="lineno"></span><span class="comment" id="6408920">//&nbsp;using&nbsp;d.DecodeElement,&nbsp;&nbsp;and&nbsp;then&nbsp;to&nbsp;copy&nbsp;the&nbsp;data&nbsp;from</span><br>
<span class="lineno"></span><span class="comment" id="6408978">//&nbsp;that&nbsp;value&nbsp;into&nbsp;the&nbsp;receiver.</span><br>
<span class="lineno"></span><span class="comment" id="6409011">//&nbsp;Another&nbsp;common&nbsp;strategy&nbsp;is&nbsp;to&nbsp;use&nbsp;d.Token&nbsp;to&nbsp;process&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6409071">//&nbsp;XML&nbsp;object&nbsp;one&nbsp;token&nbsp;at&nbsp;a&nbsp;time.</span><br>
<span class="lineno">155</span><span class="comment" id="6409106">//&nbsp;UnmarshalXML&nbsp;may&nbsp;not&nbsp;use&nbsp;d.RawToken.</span><br>
<span class="lineno"></span><span class="keyword" id="6409146">type</span>&nbsp;<span class="ident" id="6409151">Unmarshaler</span>&nbsp;<span class="keyword" id="6409163">interface</span>&nbsp;<span class="op" id="6409173">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409176">UnmarshalXML</span><span class="op" id="6409188">(</span><span class="ident" id="6409189">d</span>&nbsp;<span class="op" id="6409191">*</span><span class="ident" id="6409192">Decoder</span><span class="op" id="6409199">,</span>&nbsp;<span class="ident" id="6409201">start</span>&nbsp;<span class="ident" id="6409207">StartElement</span><span class="op" id="6409219">)</span>&nbsp;<span class="builtintype" id="6409221">error</span><br>
<span class="lineno"></span><span class="op" id="6409227">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">160</span><span class="comment" id="6409230">//&nbsp;UnmarshalerAttr&nbsp;is&nbsp;the&nbsp;interface&nbsp;implemented&nbsp;by&nbsp;objects&nbsp;that&nbsp;can&nbsp;unmarshal</span><br>
<span class="lineno"></span><span class="comment" id="6409308">//&nbsp;an&nbsp;XML&nbsp;attribute&nbsp;description&nbsp;of&nbsp;themselves.</span><br>
<span class="lineno"></span><span class="comment" id="6409355">//</span><br>
<span class="lineno"></span><span class="comment" id="6409358">//&nbsp;UnmarshalXMLAttr&nbsp;decodes&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute.</span><br>
<span class="lineno"></span><span class="comment" id="6409410">//&nbsp;If&nbsp;it&nbsp;returns&nbsp;an&nbsp;error,&nbsp;the&nbsp;outer&nbsp;call&nbsp;to&nbsp;Unmarshal&nbsp;stops&nbsp;and</span><br>
<span class="lineno">165</span><span class="comment" id="6409475">//&nbsp;returns&nbsp;that&nbsp;error.</span><br>
<span class="lineno"></span><span class="comment" id="6409498">//&nbsp;UnmarshalXMLAttr&nbsp;is&nbsp;used&nbsp;only&nbsp;for&nbsp;struct&nbsp;fields&nbsp;with&nbsp;the</span><br>
<span class="lineno"></span><span class="comment" id="6409558">//&nbsp;&#34;attr&#34;&nbsp;option&nbsp;in&nbsp;the&nbsp;field&nbsp;tag.</span><br>
<span class="lineno"></span><span class="keyword" id="6409593">type</span>&nbsp;<span class="ident" id="6409598">UnmarshalerAttr</span>&nbsp;<span class="keyword" id="6409614">interface</span>&nbsp;<span class="op" id="6409624">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409627">UnmarshalXMLAttr</span><span class="op" id="6409643">(</span><span class="ident" id="6409644">attr</span>&nbsp;<span class="ident" id="6409649">Attr</span><span class="op" id="6409653">)</span>&nbsp;<span class="builtintype" id="6409655">error</span><br>
<span class="lineno">170</span><span class="op" id="6409661">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6409664">//&nbsp;receiverType&nbsp;returns&nbsp;the&nbsp;receiver&nbsp;type&nbsp;to&nbsp;use&nbsp;in&nbsp;an&nbsp;expression&nbsp;like&nbsp;&#34;%s.MethodName&#34;.</span><br>
<span class="lineno"></span><span class="keyword" id="6409752">func</span>&nbsp;<span class="ident" id="6409757">receiverType</span><span class="op" id="6409769">(</span><span class="ident" id="6409770">val</span>&nbsp;<span class="keyword" id="6409774">interface</span><span class="op" id="6409783">{</span><span class="op" id="6409784">}</span><span class="op" id="6409785">)</span>&nbsp;<span class="builtintype" id="6409787">string</span>&nbsp;<span class="op" id="6409794">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6409797">t</span>&nbsp;<span class="op" id="6409799">:=</span>&nbsp;<span class="ident" id="6409802">reflect</span><span class="op" id="6409809">.</span><span class="ident" id="6409810">TypeOf</span><span class="op" id="6409816">(</span><span class="ident" id="6409817">val</span><span class="op" id="6409820">)</span><br>
<span class="lineno">175</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409823">if</span>&nbsp;<span class="ident" id="6409826">t</span><span class="op" id="6409827">.</span><span class="ident" id="6409828">Name</span><span class="op" id="6409832">(</span><span class="op" id="6409833">)</span>&nbsp;<span class="op" id="6409835">!=</span>&nbsp;<span class="string" id="6409838">&#34;&#34;</span>&nbsp;<span class="op" id="6409841">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409845">return</span>&nbsp;<span class="ident" id="6409852">t</span><span class="op" id="6409853">.</span><span class="ident" id="6409854">String</span><span class="op" id="6409860">(</span><span class="op" id="6409861">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6409864">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6409867">return</span>&nbsp;<span class="string" id="6409874">&#34;(&#34;</span>&nbsp;<span class="op" id="6409878">+</span>&nbsp;<span class="ident" id="6409880">t</span><span class="op" id="6409881">.</span><span class="ident" id="6409882">String</span><span class="op" id="6409888">(</span><span class="op" id="6409889">)</span>&nbsp;<span class="op" id="6409891">+</span>&nbsp;<span class="string" id="6409893">&#34;)&#34;</span><br>
<span class="lineno"></span><span class="op" id="6409897">}</span><br>
<span class="lineno">180</span><br>
<span class="lineno"></span><span class="comment" id="6409900">//&nbsp;unmarshalInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6409964">//&nbsp;start&nbsp;is&nbsp;the&nbsp;opening&nbsp;tag&nbsp;of&nbsp;the&nbsp;element.</span><br>
<span class="lineno"></span><span class="keyword" id="6410008">func</span>&nbsp;<span class="op" id="6410013">(</span><span class="ident" id="6410014">p</span>&nbsp;<span class="op" id="6410016">*</span><span class="ident" id="6410017">Decoder</span><span class="op" id="6410024">)</span>&nbsp;<span class="ident" id="6410026">unmarshalInterface</span><span class="op" id="6410044">(</span><span class="ident" id="6410045">val</span>&nbsp;<span class="ident" id="6410049">Unmarshaler</span><span class="op" id="6410060">,</span>&nbsp;<span class="ident" id="6410062">start</span>&nbsp;<span class="op" id="6410068">*</span><span class="ident" id="6410069">StartElement</span><span class="op" id="6410081">)</span>&nbsp;<span class="builtintype" id="6410083">error</span>&nbsp;<span class="op" id="6410089">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6410092">//&nbsp;Record&nbsp;that&nbsp;decoder&nbsp;must&nbsp;stop&nbsp;at&nbsp;end&nbsp;tag&nbsp;corresponding&nbsp;to&nbsp;start.</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410161">p</span><span class="op" id="6410162">.</span><span class="ident" id="6410163">pushEOF</span><span class="op" id="6410170">(</span><span class="op" id="6410171">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410175">p</span><span class="op" id="6410176">.</span><span class="ident" id="6410177">unmarshalDepth</span><span class="op" id="6410191">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410195">err</span>&nbsp;<span class="op" id="6410199">:=</span>&nbsp;<span class="ident" id="6410202">val</span><span class="op" id="6410205">.</span><span class="ident" id="6410206">UnmarshalXML</span><span class="op" id="6410218">(</span><span class="ident" id="6410219">p</span><span class="op" id="6410220">,</span>&nbsp;<span class="op" id="6410222">*</span><span class="ident" id="6410223">start</span><span class="op" id="6410228">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410231">p</span><span class="op" id="6410232">.</span><span class="ident" id="6410233">unmarshalDepth</span><span class="op" id="6410247">--</span><br>
<span class="lineno">190</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410251">if</span>&nbsp;<span class="ident" id="6410254">err</span>&nbsp;<span class="op" id="6410258">!=</span>&nbsp;<span class="ident" id="6410261">nil</span>&nbsp;<span class="op" id="6410265">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410269">p</span><span class="op" id="6410270">.</span><span class="ident" id="6410271">popEOF</span><span class="op" id="6410277">(</span><span class="op" id="6410278">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410282">return</span>&nbsp;<span class="ident" id="6410289">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410294">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">195</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410298">if</span>&nbsp;<span class="op" id="6410301">!</span><span class="ident" id="6410302">p</span><span class="op" id="6410303">.</span><span class="ident" id="6410304">popEOF</span><span class="op" id="6410310">(</span><span class="op" id="6410311">)</span>&nbsp;<span class="op" id="6410313">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410317">return</span>&nbsp;<span class="ident" id="6410324">fmt</span><span class="op" id="6410327">.</span><span class="ident" id="6410328">Errorf</span><span class="op" id="6410334">(</span><span class="string" id="6410335">&#34;xml:&nbsp;%s.UnmarshalXML&nbsp;did&nbsp;not&nbsp;consume&nbsp;entire&nbsp;&lt;%s&gt;&nbsp;element&#34;</span><span class="op" id="6410393">,</span>&nbsp;<span class="ident" id="6410395">receiverType</span><span class="op" id="6410407">(</span><span class="ident" id="6410408">val</span><span class="op" id="6410411">)</span><span class="op" id="6410412">,</span>&nbsp;<span class="ident" id="6410414">start</span><span class="op" id="6410419">.</span><span class="ident" id="6410420">Name</span><span class="op" id="6410424">.</span><span class="ident" id="6410425">Local</span><span class="op" id="6410430">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410433">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410437">return</span>&nbsp;<span class="ident" id="6410444">nil</span><br>
<span class="lineno">200</span><span class="op" id="6410448">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6410451">//&nbsp;unmarshalTextInterface&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="comment" id="6410519">//&nbsp;The&nbsp;chardata&nbsp;contained&nbsp;in&nbsp;the&nbsp;element&nbsp;(but&nbsp;not&nbsp;its&nbsp;children)</span><br>
<span class="lineno"></span><span class="comment" id="6410583">//&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;text&nbsp;unmarshaler.</span><br>
<span class="lineno">205</span><span class="keyword" id="6410621">func</span>&nbsp;<span class="op" id="6410626">(</span><span class="ident" id="6410627">p</span>&nbsp;<span class="op" id="6410629">*</span><span class="ident" id="6410630">Decoder</span><span class="op" id="6410637">)</span>&nbsp;<span class="ident" id="6410639">unmarshalTextInterface</span><span class="op" id="6410661">(</span><span class="ident" id="6410662">val</span>&nbsp;<span class="ident" id="6410666">encoding</span><span class="op" id="6410674">.</span><span class="ident" id="6410675">TextUnmarshaler</span><span class="op" id="6410690">,</span>&nbsp;<span class="ident" id="6410692">start</span>&nbsp;<span class="op" id="6410698">*</span><span class="ident" id="6410699">StartElement</span><span class="op" id="6410711">)</span>&nbsp;<span class="builtintype" id="6410713">error</span>&nbsp;<span class="op" id="6410719">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410722">var</span>&nbsp;<span class="ident" id="6410726">buf</span>&nbsp;<span class="op" id="6410730">[</span><span class="op" id="6410731">]</span><span class="builtintype" id="6410732">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410738">depth</span>&nbsp;<span class="op" id="6410744">:=</span>&nbsp;<span class="num" id="6410747">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410750">for</span>&nbsp;<span class="ident" id="6410754">depth</span>&nbsp;<span class="op" id="6410760">&gt;</span>&nbsp;<span class="num" id="6410762">0</span>&nbsp;<span class="op" id="6410764">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410768">t</span><span class="op" id="6410769">,</span>&nbsp;<span class="ident" id="6410771">err</span>&nbsp;<span class="op" id="6410775">:=</span>&nbsp;<span class="ident" id="6410778">p</span><span class="op" id="6410779">.</span><span class="ident" id="6410780">Token</span><span class="op" id="6410785">(</span><span class="op" id="6410786">)</span><br>
<span class="lineno">210</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410790">if</span>&nbsp;<span class="ident" id="6410793">err</span>&nbsp;<span class="op" id="6410797">!=</span>&nbsp;<span class="ident" id="6410800">nil</span>&nbsp;<span class="op" id="6410804">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410809">return</span>&nbsp;<span class="ident" id="6410816">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410822">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410826">switch</span>&nbsp;<span class="ident" id="6410833">t</span>&nbsp;<span class="op" id="6410835">:=</span>&nbsp;<span class="ident" id="6410838">t</span><span class="op" id="6410839">.</span><span class="op" id="6410840">(</span><span class="keyword" id="6410841">type</span><span class="op" id="6410845">)</span>&nbsp;<span class="op" id="6410847">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410851">case</span>&nbsp;<span class="ident" id="6410856">CharData</span><span class="op" id="6410864">:</span><br>
<span class="lineno">215</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410869">if</span>&nbsp;<span class="ident" id="6410872">depth</span>&nbsp;<span class="op" id="6410878">==</span>&nbsp;<span class="num" id="6410881">1</span>&nbsp;<span class="op" id="6410883">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410889">buf</span>&nbsp;<span class="op" id="6410893">=</span>&nbsp;<span class="builtinfunc" id="6410895">append</span><span class="op" id="6410901">(</span><span class="ident" id="6410902">buf</span><span class="op" id="6410905">,</span>&nbsp;<span class="ident" id="6410907">t</span><span class="op" id="6410908">...</span><span class="op" id="6410911">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410916">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410920">case</span>&nbsp;<span class="ident" id="6410925">StartElement</span><span class="op" id="6410937">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410942">depth</span><span class="op" id="6410947">++</span><br>
<span class="lineno">220</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410952">case</span>&nbsp;<span class="ident" id="6410957">EndElement</span><span class="op" id="6410967">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6410972">depth</span><span class="op" id="6410977">--</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410982">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6410985">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6410988">return</span>&nbsp;<span class="ident" id="6410995">val</span><span class="op" id="6410998">.</span><span class="ident" id="6410999">UnmarshalText</span><span class="op" id="6411012">(</span><span class="ident" id="6411013">buf</span><span class="op" id="6411016">)</span><br>
<span class="lineno">225</span><span class="op" id="6411018">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6411021">//&nbsp;unmarshalAttr&nbsp;unmarshals&nbsp;a&nbsp;single&nbsp;XML&nbsp;attribute&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6411082">func</span>&nbsp;<span class="op" id="6411087">(</span><span class="ident" id="6411088">p</span>&nbsp;<span class="op" id="6411090">*</span><span class="ident" id="6411091">Decoder</span><span class="op" id="6411098">)</span>&nbsp;<span class="ident" id="6411100">unmarshalAttr</span><span class="op" id="6411113">(</span><span class="ident" id="6411114">val</span>&nbsp;<span class="ident" id="6411118">reflect</span><span class="op" id="6411125">.</span><span class="ident" id="6411126">Value</span><span class="op" id="6411131">,</span>&nbsp;<span class="ident" id="6411133">attr</span>&nbsp;<span class="ident" id="6411138">Attr</span><span class="op" id="6411142">)</span>&nbsp;<span class="builtintype" id="6411144">error</span>&nbsp;<span class="op" id="6411150">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411153">if</span>&nbsp;<span class="ident" id="6411156">val</span><span class="op" id="6411159">.</span><span class="ident" id="6411160">Kind</span><span class="op" id="6411164">(</span><span class="op" id="6411165">)</span>&nbsp;<span class="op" id="6411167">==</span>&nbsp;<span class="ident" id="6411170">reflect</span><span class="op" id="6411177">.</span><span class="ident" id="6411178">Ptr</span>&nbsp;<span class="op" id="6411182">{</span><br>
<span class="lineno">230</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411186">if</span>&nbsp;<span class="ident" id="6411189">val</span><span class="op" id="6411192">.</span><span class="ident" id="6411193">IsNil</span><span class="op" id="6411198">(</span><span class="op" id="6411199">)</span>&nbsp;<span class="op" id="6411201">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411206">val</span><span class="op" id="6411209">.</span><span class="ident" id="6411210">Set</span><span class="op" id="6411213">(</span><span class="ident" id="6411214">reflect</span><span class="op" id="6411221">.</span><span class="ident" id="6411222">New</span><span class="op" id="6411225">(</span><span class="ident" id="6411226">val</span><span class="op" id="6411229">.</span><span class="ident" id="6411230">Type</span><span class="op" id="6411234">(</span><span class="op" id="6411235">)</span><span class="op" id="6411236">.</span><span class="ident" id="6411237">Elem</span><span class="op" id="6411241">(</span><span class="op" id="6411242">)</span><span class="op" id="6411243">)</span><span class="op" id="6411244">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411248">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411252">val</span>&nbsp;<span class="op" id="6411256">=</span>&nbsp;<span class="ident" id="6411258">val</span><span class="op" id="6411261">.</span><span class="ident" id="6411262">Elem</span><span class="op" id="6411266">(</span><span class="op" id="6411267">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411270">}</span><br>
<span class="lineno">235</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411274">if</span>&nbsp;<span class="ident" id="6411277">val</span><span class="op" id="6411280">.</span><span class="ident" id="6411281">CanInterface</span><span class="op" id="6411293">(</span><span class="op" id="6411294">)</span>&nbsp;<span class="op" id="6411296">&amp;&amp;</span>&nbsp;<span class="ident" id="6411299">val</span><span class="op" id="6411302">.</span><span class="ident" id="6411303">Type</span><span class="op" id="6411307">(</span><span class="op" id="6411308">)</span><span class="op" id="6411309">.</span><span class="ident" id="6411310">Implements</span><span class="op" id="6411320">(</span><span class="ident" id="6411321">unmarshalerAttrType</span><span class="op" id="6411340">)</span>&nbsp;<span class="op" id="6411342">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6411346">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6411403">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411467">return</span>&nbsp;<span class="ident" id="6411474">val</span><span class="op" id="6411477">.</span><span class="ident" id="6411478">Interface</span><span class="op" id="6411487">(</span><span class="op" id="6411488">)</span><span class="op" id="6411489">.</span><span class="op" id="6411490">(</span><span class="ident" id="6411491">UnmarshalerAttr</span><span class="op" id="6411506">)</span><span class="op" id="6411507">.</span><span class="ident" id="6411508">UnmarshalXMLAttr</span><span class="op" id="6411524">(</span><span class="ident" id="6411525">attr</span><span class="op" id="6411529">)</span><br>
<span class="lineno">240</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411532">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411535">if</span>&nbsp;<span class="ident" id="6411538">val</span><span class="op" id="6411541">.</span><span class="ident" id="6411542">CanAddr</span><span class="op" id="6411549">(</span><span class="op" id="6411550">)</span>&nbsp;<span class="op" id="6411552">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6411556">pv</span>&nbsp;<span class="op" id="6411559">:=</span>&nbsp;<span class="ident" id="6411562">val</span><span class="op" id="6411565">.</span><span class="ident" id="6411566">Addr</span><span class="op" id="6411570">(</span><span class="op" id="6411571">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411575">if</span>&nbsp;<span class="ident" id="6411578">pv</span><span class="op" id="6411580">.</span><span class="ident" id="6411581">CanInterface</span><span class="op" id="6411593">(</span><span class="op" id="6411594">)</span>&nbsp;<span class="op" id="6411596">&amp;&amp;</span>&nbsp;<span class="ident" id="6411599">pv</span><span class="op" id="6411601">.</span><span class="ident" id="6411602">Type</span><span class="op" id="6411606">(</span><span class="op" id="6411607">)</span><span class="op" id="6411608">.</span><span class="ident" id="6411609">Implements</span><span class="op" id="6411619">(</span><span class="ident" id="6411620">unmarshalerAttrType</span><span class="op" id="6411639">)</span>&nbsp;<span class="op" id="6411641">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411646">return</span>&nbsp;<span class="ident" id="6411653">pv</span><span class="op" id="6411655">.</span><span class="ident" id="6411656">Interface</span><span class="op" id="6411665">(</span><span class="op" id="6411666">)</span><span class="op" id="6411667">.</span><span class="op" id="6411668">(</span><span class="ident" id="6411669">UnmarshalerAttr</span><span class="op" id="6411684">)</span><span class="op" id="6411685">.</span><span class="ident" id="6411686">UnmarshalXMLAttr</span><span class="op" id="6411702">(</span><span class="ident" id="6411703">attr</span><span class="op" id="6411707">)</span><br>
<span class="lineno">245</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411711">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6411714">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6411718">//&nbsp;Not&nbsp;an&nbsp;UnmarshalerAttr;&nbsp;try&nbsp;encoding.TextUnmarshaler.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411776">if</span>&nbsp;<span class="ident" id="6411779">val</span><span class="op" id="6411782">.</span><span class="ident" id="6411783">CanInterface</span><span class="op" id="6411795">(</span><span class="op" id="6411796">)</span>&nbsp;<span class="op" id="6411798">&amp;&amp;</span>&nbsp;<span class="ident" id="6411801">val</span><span class="op" id="6411804">.</span><span class="ident" id="6411805">Type</span><span class="op" id="6411809">(</span><span class="op" id="6411810">)</span><span class="op" id="6411811">.</span><span class="ident" id="6411812">Implements</span><span class="op" id="6411822">(</span><span class="ident" id="6411823">textUnmarshalerType</span><span class="op" id="6411842">)</span>&nbsp;<span class="op" id="6411844">{</span><br>
<span class="lineno">250</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6411848">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6411905">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6411969">return</span>&nbsp;<span class="ident" id="6411976">val</span><span class="op" id="6411979">.</span><span class="ident" id="6411980">Interface</span><span class="op" id="6411989">(</span><span class="op" id="6411990">)</span><span class="op" id="6411991">.</span><span class="op" id="6411992">(</span><span class="ident" id="6411993">encoding</span><span class="op" id="6412001">.</span><span class="ident" id="6412002">TextUnmarshaler</span><span class="op" id="6412017">)</span><span class="op" id="6412018">.</span><span class="ident" id="6412019">UnmarshalText</span><span class="op" id="6412032">(</span><span class="op" id="6412033">[</span><span class="op" id="6412034">]</span><span class="builtintype" id="6412035">byte</span><span class="op" id="6412039">(</span><span class="ident" id="6412040">attr</span><span class="op" id="6412044">.</span><span class="ident" id="6412045">Value</span><span class="op" id="6412050">)</span><span class="op" id="6412051">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412054">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412057">if</span>&nbsp;<span class="ident" id="6412060">val</span><span class="op" id="6412063">.</span><span class="ident" id="6412064">CanAddr</span><span class="op" id="6412071">(</span><span class="op" id="6412072">)</span>&nbsp;<span class="op" id="6412074">{</span><br>
<span class="lineno">255</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412078">pv</span>&nbsp;<span class="op" id="6412081">:=</span>&nbsp;<span class="ident" id="6412084">val</span><span class="op" id="6412087">.</span><span class="ident" id="6412088">Addr</span><span class="op" id="6412092">(</span><span class="op" id="6412093">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412097">if</span>&nbsp;<span class="ident" id="6412100">pv</span><span class="op" id="6412102">.</span><span class="ident" id="6412103">CanInterface</span><span class="op" id="6412115">(</span><span class="op" id="6412116">)</span>&nbsp;<span class="op" id="6412118">&amp;&amp;</span>&nbsp;<span class="ident" id="6412121">pv</span><span class="op" id="6412123">.</span><span class="ident" id="6412124">Type</span><span class="op" id="6412128">(</span><span class="op" id="6412129">)</span><span class="op" id="6412130">.</span><span class="ident" id="6412131">Implements</span><span class="op" id="6412141">(</span><span class="ident" id="6412142">textUnmarshalerType</span><span class="op" id="6412161">)</span>&nbsp;<span class="op" id="6412163">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412168">return</span>&nbsp;<span class="ident" id="6412175">pv</span><span class="op" id="6412177">.</span><span class="ident" id="6412178">Interface</span><span class="op" id="6412187">(</span><span class="op" id="6412188">)</span><span class="op" id="6412189">.</span><span class="op" id="6412190">(</span><span class="ident" id="6412191">encoding</span><span class="op" id="6412199">.</span><span class="ident" id="6412200">TextUnmarshaler</span><span class="op" id="6412215">)</span><span class="op" id="6412216">.</span><span class="ident" id="6412217">UnmarshalText</span><span class="op" id="6412230">(</span><span class="op" id="6412231">[</span><span class="op" id="6412232">]</span><span class="builtintype" id="6412233">byte</span><span class="op" id="6412237">(</span><span class="ident" id="6412238">attr</span><span class="op" id="6412242">.</span><span class="ident" id="6412243">Value</span><span class="op" id="6412248">)</span><span class="op" id="6412249">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412253">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412256">}</span><br>
<span class="lineno">260</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412260">copyValue</span><span class="op" id="6412269">(</span><span class="ident" id="6412270">val</span><span class="op" id="6412273">,</span>&nbsp;<span class="op" id="6412275">[</span><span class="op" id="6412276">]</span><span class="builtintype" id="6412277">byte</span><span class="op" id="6412281">(</span><span class="ident" id="6412282">attr</span><span class="op" id="6412286">.</span><span class="ident" id="6412287">Value</span><span class="op" id="6412292">)</span><span class="op" id="6412293">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412296">return</span>&nbsp;<span class="ident" id="6412303">nil</span><br>
<span class="lineno"></span><span class="op" id="6412307">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">265</span><span class="keyword" id="6412310">var</span>&nbsp;<span class="op" id="6412314">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412317">unmarshalerType</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6412337">=</span>&nbsp;<span class="ident" id="6412339">reflect</span><span class="op" id="6412346">.</span><span class="ident" id="6412347">TypeOf</span><span class="op" id="6412353">(</span><span class="op" id="6412354">(</span><span class="op" id="6412355">*</span><span class="ident" id="6412356">Unmarshaler</span><span class="op" id="6412367">)</span><span class="op" id="6412368">(</span><span class="ident" id="6412369">nil</span><span class="op" id="6412372">)</span><span class="op" id="6412373">)</span><span class="op" id="6412374">.</span><span class="ident" id="6412375">Elem</span><span class="op" id="6412379">(</span><span class="op" id="6412380">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412383">unmarshalerAttrType</span>&nbsp;<span class="op" id="6412403">=</span>&nbsp;<span class="ident" id="6412405">reflect</span><span class="op" id="6412412">.</span><span class="ident" id="6412413">TypeOf</span><span class="op" id="6412419">(</span><span class="op" id="6412420">(</span><span class="op" id="6412421">*</span><span class="ident" id="6412422">UnmarshalerAttr</span><span class="op" id="6412437">)</span><span class="op" id="6412438">(</span><span class="ident" id="6412439">nil</span><span class="op" id="6412442">)</span><span class="op" id="6412443">)</span><span class="op" id="6412444">.</span><span class="ident" id="6412445">Elem</span><span class="op" id="6412449">(</span><span class="op" id="6412450">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412453">textUnmarshalerType</span>&nbsp;<span class="op" id="6412473">=</span>&nbsp;<span class="ident" id="6412475">reflect</span><span class="op" id="6412482">.</span><span class="ident" id="6412483">TypeOf</span><span class="op" id="6412489">(</span><span class="op" id="6412490">(</span><span class="op" id="6412491">*</span><span class="ident" id="6412492">encoding</span><span class="op" id="6412500">.</span><span class="ident" id="6412501">TextUnmarshaler</span><span class="op" id="6412516">)</span><span class="op" id="6412517">(</span><span class="ident" id="6412518">nil</span><span class="op" id="6412521">)</span><span class="op" id="6412522">)</span><span class="op" id="6412523">.</span><span class="ident" id="6412524">Elem</span><span class="op" id="6412528">(</span><span class="op" id="6412529">)</span><br>
<span class="lineno"></span><span class="op" id="6412531">)</span><br>
<span class="lineno">270</span><br>
<span class="lineno"></span><span class="comment" id="6412534">//&nbsp;Unmarshal&nbsp;a&nbsp;single&nbsp;XML&nbsp;element&nbsp;into&nbsp;val.</span><br>
<span class="lineno"></span><span class="keyword" id="6412578">func</span>&nbsp;<span class="op" id="6412583">(</span><span class="ident" id="6412584">p</span>&nbsp;<span class="op" id="6412586">*</span><span class="ident" id="6412587">Decoder</span><span class="op" id="6412594">)</span>&nbsp;<span class="ident" id="6412596">unmarshal</span><span class="op" id="6412605">(</span><span class="ident" id="6412606">val</span>&nbsp;<span class="ident" id="6412610">reflect</span><span class="op" id="6412617">.</span><span class="ident" id="6412618">Value</span><span class="op" id="6412623">,</span>&nbsp;<span class="ident" id="6412625">start</span>&nbsp;<span class="op" id="6412631">*</span><span class="ident" id="6412632">StartElement</span><span class="op" id="6412644">)</span>&nbsp;<span class="builtintype" id="6412646">error</span>&nbsp;<span class="op" id="6412652">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412655">//&nbsp;Find&nbsp;start&nbsp;element&nbsp;if&nbsp;we&nbsp;need&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412693">if</span>&nbsp;<span class="ident" id="6412696">start</span>&nbsp;<span class="op" id="6412702">==</span>&nbsp;<span class="ident" id="6412705">nil</span>&nbsp;<span class="op" id="6412709">{</span><br>
<span class="lineno">275</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412713">for</span>&nbsp;<span class="op" id="6412717">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412722">tok</span><span class="op" id="6412725">,</span>&nbsp;<span class="ident" id="6412727">err</span>&nbsp;<span class="op" id="6412731">:=</span>&nbsp;<span class="ident" id="6412734">p</span><span class="op" id="6412735">.</span><span class="ident" id="6412736">Token</span><span class="op" id="6412741">(</span><span class="op" id="6412742">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412747">if</span>&nbsp;<span class="ident" id="6412750">err</span>&nbsp;<span class="op" id="6412754">!=</span>&nbsp;<span class="ident" id="6412757">nil</span>&nbsp;<span class="op" id="6412761">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412767">return</span>&nbsp;<span class="ident" id="6412774">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412781">}</span><br>
<span class="lineno">280</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412786">if</span>&nbsp;<span class="ident" id="6412789">t</span><span class="op" id="6412790">,</span>&nbsp;<span class="ident" id="6412792">ok</span>&nbsp;<span class="op" id="6412795">:=</span>&nbsp;<span class="ident" id="6412798">tok</span><span class="op" id="6412801">.</span><span class="op" id="6412802">(</span><span class="ident" id="6412803">StartElement</span><span class="op" id="6412815">)</span><span class="op" id="6412816">;</span>&nbsp;<span class="ident" id="6412818">ok</span>&nbsp;<span class="op" id="6412821">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6412827">start</span>&nbsp;<span class="op" id="6412833">=</span>&nbsp;<span class="op" id="6412835">&amp;</span><span class="ident" id="6412836">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412842">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412851">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412855">}</span><br>
<span class="lineno">285</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6412858">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412862">//&nbsp;Load&nbsp;value&nbsp;from&nbsp;interface,&nbsp;but&nbsp;only&nbsp;if&nbsp;the&nbsp;result&nbsp;will&nbsp;be</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6412924">//&nbsp;usefully&nbsp;addressable.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6412950">if</span>&nbsp;<span class="ident" id="6412953">val</span><span class="op" id="6412956">.</span><span class="ident" id="6412957">Kind</span><span class="op" id="6412961">(</span><span class="op" id="6412962">)</span>&nbsp;<span class="op" id="6412964">==</span>&nbsp;<span class="ident" id="6412967">reflect</span><span class="op" id="6412974">.</span><span class="ident" id="6412975">Interface</span>&nbsp;<span class="op" id="6412985">&amp;&amp;</span>&nbsp;<span class="op" id="6412988">!</span><span class="ident" id="6412989">val</span><span class="op" id="6412992">.</span><span class="ident" id="6412993">IsNil</span><span class="op" id="6412998">(</span><span class="op" id="6412999">)</span>&nbsp;<span class="op" id="6413001">{</span><br>
<span class="lineno">290</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413005">e</span>&nbsp;<span class="op" id="6413007">:=</span>&nbsp;<span class="ident" id="6413010">val</span><span class="op" id="6413013">.</span><span class="ident" id="6413014">Elem</span><span class="op" id="6413018">(</span><span class="op" id="6413019">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413023">if</span>&nbsp;<span class="ident" id="6413026">e</span><span class="op" id="6413027">.</span><span class="ident" id="6413028">Kind</span><span class="op" id="6413032">(</span><span class="op" id="6413033">)</span>&nbsp;<span class="op" id="6413035">==</span>&nbsp;<span class="ident" id="6413038">reflect</span><span class="op" id="6413045">.</span><span class="ident" id="6413046">Ptr</span>&nbsp;<span class="op" id="6413050">&amp;&amp;</span>&nbsp;<span class="op" id="6413053">!</span><span class="ident" id="6413054">e</span><span class="op" id="6413055">.</span><span class="ident" id="6413056">IsNil</span><span class="op" id="6413061">(</span><span class="op" id="6413062">)</span>&nbsp;<span class="op" id="6413064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413069">val</span>&nbsp;<span class="op" id="6413073">=</span>&nbsp;<span class="ident" id="6413075">e</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413079">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413082">}</span><br>
<span class="lineno">295</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413086">if</span>&nbsp;<span class="ident" id="6413089">val</span><span class="op" id="6413092">.</span><span class="ident" id="6413093">Kind</span><span class="op" id="6413097">(</span><span class="op" id="6413098">)</span>&nbsp;<span class="op" id="6413100">==</span>&nbsp;<span class="ident" id="6413103">reflect</span><span class="op" id="6413110">.</span><span class="ident" id="6413111">Ptr</span>&nbsp;<span class="op" id="6413115">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413119">if</span>&nbsp;<span class="ident" id="6413122">val</span><span class="op" id="6413125">.</span><span class="ident" id="6413126">IsNil</span><span class="op" id="6413131">(</span><span class="op" id="6413132">)</span>&nbsp;<span class="op" id="6413134">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413139">val</span><span class="op" id="6413142">.</span><span class="ident" id="6413143">Set</span><span class="op" id="6413146">(</span><span class="ident" id="6413147">reflect</span><span class="op" id="6413154">.</span><span class="ident" id="6413155">New</span><span class="op" id="6413158">(</span><span class="ident" id="6413159">val</span><span class="op" id="6413162">.</span><span class="ident" id="6413163">Type</span><span class="op" id="6413167">(</span><span class="op" id="6413168">)</span><span class="op" id="6413169">.</span><span class="ident" id="6413170">Elem</span><span class="op" id="6413174">(</span><span class="op" id="6413175">)</span><span class="op" id="6413176">)</span><span class="op" id="6413177">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413181">}</span><br>
<span class="lineno">300</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413185">val</span>&nbsp;<span class="op" id="6413189">=</span>&nbsp;<span class="ident" id="6413191">val</span><span class="op" id="6413194">.</span><span class="ident" id="6413195">Elem</span><span class="op" id="6413199">(</span><span class="op" id="6413200">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413203">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413207">if</span>&nbsp;<span class="ident" id="6413210">val</span><span class="op" id="6413213">.</span><span class="ident" id="6413214">CanInterface</span><span class="op" id="6413226">(</span><span class="op" id="6413227">)</span>&nbsp;<span class="op" id="6413229">&amp;&amp;</span>&nbsp;<span class="ident" id="6413232">val</span><span class="op" id="6413235">.</span><span class="ident" id="6413236">Type</span><span class="op" id="6413240">(</span><span class="op" id="6413241">)</span><span class="op" id="6413242">.</span><span class="ident" id="6413243">Implements</span><span class="op" id="6413253">(</span><span class="ident" id="6413254">unmarshalerType</span><span class="op" id="6413269">)</span>&nbsp;<span class="op" id="6413271">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6413275">//&nbsp;This&nbsp;is&nbsp;an&nbsp;unmarshaler&nbsp;with&nbsp;a&nbsp;non-pointer&nbsp;receiver,</span><br>
<span class="lineno">305</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6413332">//&nbsp;so&nbsp;it&#39;s&nbsp;likely&nbsp;to&nbsp;be&nbsp;incorrect,&nbsp;but&nbsp;we&nbsp;do&nbsp;what&nbsp;we&#39;re&nbsp;told.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413396">return</span>&nbsp;<span class="ident" id="6413403">p</span><span class="op" id="6413404">.</span><span class="ident" id="6413405">unmarshalInterface</span><span class="op" id="6413423">(</span><span class="ident" id="6413424">val</span><span class="op" id="6413427">.</span><span class="ident" id="6413428">Interface</span><span class="op" id="6413437">(</span><span class="op" id="6413438">)</span><span class="op" id="6413439">.</span><span class="op" id="6413440">(</span><span class="ident" id="6413441">Unmarshaler</span><span class="op" id="6413452">)</span><span class="op" id="6413453">,</span>&nbsp;<span class="ident" id="6413455">start</span><span class="op" id="6413460">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413463">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413467">if</span>&nbsp;<span class="ident" id="6413470">val</span><span class="op" id="6413473">.</span><span class="ident" id="6413474">CanAddr</span><span class="op" id="6413481">(</span><span class="op" id="6413482">)</span>&nbsp;<span class="op" id="6413484">{</span><br>
<span class="lineno">310</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413488">pv</span>&nbsp;<span class="op" id="6413491">:=</span>&nbsp;<span class="ident" id="6413494">val</span><span class="op" id="6413497">.</span><span class="ident" id="6413498">Addr</span><span class="op" id="6413502">(</span><span class="op" id="6413503">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413507">if</span>&nbsp;<span class="ident" id="6413510">pv</span><span class="op" id="6413512">.</span><span class="ident" id="6413513">CanInterface</span><span class="op" id="6413525">(</span><span class="op" id="6413526">)</span>&nbsp;<span class="op" id="6413528">&amp;&amp;</span>&nbsp;<span class="ident" id="6413531">pv</span><span class="op" id="6413533">.</span><span class="ident" id="6413534">Type</span><span class="op" id="6413538">(</span><span class="op" id="6413539">)</span><span class="op" id="6413540">.</span><span class="ident" id="6413541">Implements</span><span class="op" id="6413551">(</span><span class="ident" id="6413552">unmarshalerType</span><span class="op" id="6413567">)</span>&nbsp;<span class="op" id="6413569">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413574">return</span>&nbsp;<span class="ident" id="6413581">p</span><span class="op" id="6413582">.</span><span class="ident" id="6413583">unmarshalInterface</span><span class="op" id="6413601">(</span><span class="ident" id="6413602">pv</span><span class="op" id="6413604">.</span><span class="ident" id="6413605">Interface</span><span class="op" id="6413614">(</span><span class="op" id="6413615">)</span><span class="op" id="6413616">.</span><span class="op" id="6413617">(</span><span class="ident" id="6413618">Unmarshaler</span><span class="op" id="6413629">)</span><span class="op" id="6413630">,</span>&nbsp;<span class="ident" id="6413632">start</span><span class="op" id="6413637">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413641">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413644">}</span><br>
<span class="lineno">315</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413648">if</span>&nbsp;<span class="ident" id="6413651">val</span><span class="op" id="6413654">.</span><span class="ident" id="6413655">CanInterface</span><span class="op" id="6413667">(</span><span class="op" id="6413668">)</span>&nbsp;<span class="op" id="6413670">&amp;&amp;</span>&nbsp;<span class="ident" id="6413673">val</span><span class="op" id="6413676">.</span><span class="ident" id="6413677">Type</span><span class="op" id="6413681">(</span><span class="op" id="6413682">)</span><span class="op" id="6413683">.</span><span class="ident" id="6413684">Implements</span><span class="op" id="6413694">(</span><span class="ident" id="6413695">textUnmarshalerType</span><span class="op" id="6413714">)</span>&nbsp;<span class="op" id="6413716">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413720">return</span>&nbsp;<span class="ident" id="6413727">p</span><span class="op" id="6413728">.</span><span class="ident" id="6413729">unmarshalTextInterface</span><span class="op" id="6413751">(</span><span class="ident" id="6413752">val</span><span class="op" id="6413755">.</span><span class="ident" id="6413756">Interface</span><span class="op" id="6413765">(</span><span class="op" id="6413766">)</span><span class="op" id="6413767">.</span><span class="op" id="6413768">(</span><span class="ident" id="6413769">encoding</span><span class="op" id="6413777">.</span><span class="ident" id="6413778">TextUnmarshaler</span><span class="op" id="6413793">)</span><span class="op" id="6413794">,</span>&nbsp;<span class="ident" id="6413796">start</span><span class="op" id="6413801">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6413804">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">320</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413808">if</span>&nbsp;<span class="ident" id="6413811">val</span><span class="op" id="6413814">.</span><span class="ident" id="6413815">CanAddr</span><span class="op" id="6413822">(</span><span class="op" id="6413823">)</span>&nbsp;<span class="op" id="6413825">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6413829">pv</span>&nbsp;<span class="op" id="6413832">:=</span>&nbsp;<span class="ident" id="6413835">val</span><span class="op" id="6413838">.</span><span class="ident" id="6413839">Addr</span><span class="op" id="6413843">(</span><span class="op" id="6413844">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413848">if</span>&nbsp;<span class="ident" id="6413851">pv</span><span class="op" id="6413853">.</span><span class="ident" id="6413854">CanInterface</span><span class="op" id="6413866">(</span><span class="op" id="6413867">)</span>&nbsp;<span class="op" id="6413869">&amp;&amp;</span>&nbsp;<span class="ident" id="6413872">pv</span><span class="op" id="6413874">.</span><span class="ident" id="6413875">Type</span><span class="op" id="6413879">(</span><span class="op" id="6413880">)</span><span class="op" id="6413881">.</span><span class="ident" id="6413882">Implements</span><span class="op" id="6413892">(</span><span class="ident" id="6413893">textUnmarshalerType</span><span class="op" id="6413912">)</span>&nbsp;<span class="op" id="6413914">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6413919">return</span>&nbsp;<span class="ident" id="6413926">p</span><span class="op" id="6413927">.</span><span class="ident" id="6413928">unmarshalTextInterface</span><span class="op" id="6413950">(</span><span class="ident" id="6413951">pv</span><span class="op" id="6413953">.</span><span class="ident" id="6413954">Interface</span><span class="op" id="6413963">(</span><span class="op" id="6413964">)</span><span class="op" id="6413965">.</span><span class="op" id="6413966">(</span><span class="ident" id="6413967">encoding</span><span class="op" id="6413975">.</span><span class="ident" id="6413976">TextUnmarshaler</span><span class="op" id="6413991">)</span><span class="op" id="6413992">,</span>&nbsp;<span class="ident" id="6413994">start</span><span class="op" id="6413999">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414003">}</span><br>
<span class="lineno">325</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414006">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414010">var</span>&nbsp;<span class="op" id="6414014">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414018">data</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414031">[</span><span class="op" id="6414032">]</span><span class="builtintype" id="6414033">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414040">saveData</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414053">reflect</span><span class="op" id="6414060">.</span><span class="ident" id="6414061">Value</span><br>
<span class="lineno">330</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414069">comment</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414082">[</span><span class="op" id="6414083">]</span><span class="builtintype" id="6414084">byte</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414091">saveComment</span>&nbsp;&nbsp;<span class="ident" id="6414104">reflect</span><span class="op" id="6414111">.</span><span class="ident" id="6414112">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414120">saveXML</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414133">reflect</span><span class="op" id="6414140">.</span><span class="ident" id="6414141">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414149">saveXMLIndex</span>&nbsp;<span class="builtintype" id="6414162">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414168">saveXMLData</span>&nbsp;&nbsp;<span class="op" id="6414181">[</span><span class="op" id="6414182">]</span><span class="builtintype" id="6414183">byte</span><br>
<span class="lineno">335</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414190">saveAny</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414203">reflect</span><span class="op" id="6414210">.</span><span class="ident" id="6414211">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414219">sv</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="6414232">reflect</span><span class="op" id="6414239">.</span><span class="ident" id="6414240">Value</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414248">tinfo</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="6414261">*</span><span class="ident" id="6414262">typeInfo</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414273">err</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="builtintype" id="6414286">error</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414293">)</span><br>
<span class="lineno">340</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414297">switch</span>&nbsp;<span class="ident" id="6414304">v</span>&nbsp;<span class="op" id="6414306">:=</span>&nbsp;<span class="ident" id="6414309">val</span><span class="op" id="6414312">;</span>&nbsp;<span class="ident" id="6414314">v</span><span class="op" id="6414315">.</span><span class="ident" id="6414316">Kind</span><span class="op" id="6414320">(</span><span class="op" id="6414321">)</span>&nbsp;<span class="op" id="6414323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414326">default</span><span class="op" id="6414333">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414337">return</span>&nbsp;<span class="ident" id="6414344">errors</span><span class="op" id="6414350">.</span><span class="ident" id="6414351">New</span><span class="op" id="6414354">(</span><span class="string" id="6414355">&#34;unknown&nbsp;type&nbsp;&#34;</span>&nbsp;<span class="op" id="6414371">+</span>&nbsp;<span class="ident" id="6414373">v</span><span class="op" id="6414374">.</span><span class="ident" id="6414375">Type</span><span class="op" id="6414379">(</span><span class="op" id="6414380">)</span><span class="op" id="6414381">.</span><span class="ident" id="6414382">String</span><span class="op" id="6414388">(</span><span class="op" id="6414389">)</span><span class="op" id="6414390">)</span><br>
<span class="lineno"></span><br>
<span class="lineno">345</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414394">case</span>&nbsp;<span class="ident" id="6414399">reflect</span><span class="op" id="6414406">.</span><span class="ident" id="6414407">Interface</span><span class="op" id="6414416">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414420">//&nbsp;TODO:&nbsp;For&nbsp;now,&nbsp;simply&nbsp;ignore&nbsp;the&nbsp;field.&nbsp;In&nbsp;the&nbsp;near</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414477">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;future&nbsp;we&nbsp;may&nbsp;choose&nbsp;to&nbsp;unmarshal&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414532">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element&nbsp;on&nbsp;it,&nbsp;if&nbsp;not&nbsp;nil.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414570">return</span>&nbsp;<span class="ident" id="6414577">p</span><span class="op" id="6414578">.</span><span class="ident" id="6414579">Skip</span><span class="op" id="6414583">(</span><span class="op" id="6414584">)</span><br>
<span class="lineno">350</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414588">case</span>&nbsp;<span class="ident" id="6414593">reflect</span><span class="op" id="6414600">.</span><span class="ident" id="6414601">Slice</span><span class="op" id="6414606">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414610">typ</span>&nbsp;<span class="op" id="6414614">:=</span>&nbsp;<span class="ident" id="6414617">v</span><span class="op" id="6414618">.</span><span class="ident" id="6414619">Type</span><span class="op" id="6414623">(</span><span class="op" id="6414624">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414628">if</span>&nbsp;<span class="ident" id="6414631">typ</span><span class="op" id="6414634">.</span><span class="ident" id="6414635">Elem</span><span class="op" id="6414639">(</span><span class="op" id="6414640">)</span><span class="op" id="6414641">.</span><span class="ident" id="6414642">Kind</span><span class="op" id="6414646">(</span><span class="op" id="6414647">)</span>&nbsp;<span class="op" id="6414649">==</span>&nbsp;<span class="ident" id="6414652">reflect</span><span class="op" id="6414659">.</span><span class="ident" id="6414660">Uint8</span>&nbsp;<span class="op" id="6414666">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414671">//&nbsp;[]byte</span><br>
<span class="lineno">355</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414684">saveData</span>&nbsp;<span class="op" id="6414693">=</span>&nbsp;<span class="ident" id="6414695">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414700">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414708">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414713">//&nbsp;Slice&nbsp;of&nbsp;element&nbsp;values.</span><br>
<span class="lineno">360</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414743">//&nbsp;Grow&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414760">n</span>&nbsp;<span class="op" id="6414762">:=</span>&nbsp;<span class="ident" id="6414765">v</span><span class="op" id="6414766">.</span><span class="ident" id="6414767">Len</span><span class="op" id="6414770">(</span><span class="op" id="6414771">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414775">if</span>&nbsp;<span class="ident" id="6414778">n</span>&nbsp;<span class="op" id="6414780">&gt;=</span>&nbsp;<span class="ident" id="6414783">v</span><span class="op" id="6414784">.</span><span class="ident" id="6414785">Cap</span><span class="op" id="6414788">(</span><span class="op" id="6414789">)</span>&nbsp;<span class="op" id="6414791">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414796">ncap</span>&nbsp;<span class="op" id="6414801">:=</span>&nbsp;<span class="num" id="6414804">2</span>&nbsp;<span class="op" id="6414806">*</span>&nbsp;<span class="ident" id="6414808">n</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414813">if</span>&nbsp;<span class="ident" id="6414816">ncap</span>&nbsp;<span class="op" id="6414821">&lt;</span>&nbsp;<span class="num" id="6414823">4</span>&nbsp;<span class="op" id="6414825">{</span><br>
<span class="lineno">365</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414831">ncap</span>&nbsp;<span class="op" id="6414836">=</span>&nbsp;<span class="num" id="6414838">4</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414843">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="builtinfunc" id="6414848">new</span>&nbsp;<span class="op" id="6414852">:=</span>&nbsp;<span class="ident" id="6414855">reflect</span><span class="op" id="6414862">.</span><span class="ident" id="6414863">MakeSlice</span><span class="op" id="6414872">(</span><span class="ident" id="6414873">typ</span><span class="op" id="6414876">,</span>&nbsp;<span class="ident" id="6414878">n</span><span class="op" id="6414879">,</span>&nbsp;<span class="ident" id="6414881">ncap</span><span class="op" id="6414885">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414890">reflect</span><span class="op" id="6414897">.</span><span class="ident" id="6414898">Copy</span><span class="op" id="6414902">(</span><span class="builtinfunc" id="6414903">new</span><span class="op" id="6414906">,</span>&nbsp;<span class="ident" id="6414908">v</span><span class="op" id="6414909">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414914">v</span><span class="op" id="6414915">.</span><span class="ident" id="6414916">Set</span><span class="op" id="6414919">(</span><span class="builtinfunc" id="6414920">new</span><span class="op" id="6414923">)</span><br>
<span class="lineno">370</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6414927">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6414931">v</span><span class="op" id="6414932">.</span><span class="ident" id="6414933">SetLen</span><span class="op" id="6414939">(</span><span class="ident" id="6414940">n</span>&nbsp;<span class="op" id="6414942">+</span>&nbsp;<span class="num" id="6414944">1</span><span class="op" id="6414945">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6414950">//&nbsp;Recur&nbsp;to&nbsp;read&nbsp;element&nbsp;into&nbsp;slice.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6414989">if</span>&nbsp;<span class="ident" id="6414992">err</span>&nbsp;<span class="op" id="6414996">:=</span>&nbsp;<span class="ident" id="6414999">p</span><span class="op" id="6415000">.</span><span class="ident" id="6415001">unmarshal</span><span class="op" id="6415010">(</span><span class="ident" id="6415011">v</span><span class="op" id="6415012">.</span><span class="ident" id="6415013">Index</span><span class="op" id="6415018">(</span><span class="ident" id="6415019">n</span><span class="op" id="6415020">)</span><span class="op" id="6415021">,</span>&nbsp;<span class="ident" id="6415023">start</span><span class="op" id="6415028">)</span><span class="op" id="6415029">;</span>&nbsp;<span class="ident" id="6415031">err</span>&nbsp;<span class="op" id="6415035">!=</span>&nbsp;<span class="ident" id="6415038">nil</span>&nbsp;<span class="op" id="6415042">{</span><br>
<span class="lineno">375</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415047">v</span><span class="op" id="6415048">.</span><span class="ident" id="6415049">SetLen</span><span class="op" id="6415055">(</span><span class="ident" id="6415056">n</span><span class="op" id="6415057">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415062">return</span>&nbsp;<span class="ident" id="6415069">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415075">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415079">return</span>&nbsp;<span class="ident" id="6415086">nil</span><br>
<span class="lineno"></span><br>
<span class="lineno">380</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415092">case</span>&nbsp;<span class="ident" id="6415097">reflect</span><span class="op" id="6415104">.</span><span class="ident" id="6415105">Bool</span><span class="op" id="6415109">,</span>&nbsp;<span class="ident" id="6415111">reflect</span><span class="op" id="6415118">.</span><span class="ident" id="6415119">Float32</span><span class="op" id="6415126">,</span>&nbsp;<span class="ident" id="6415128">reflect</span><span class="op" id="6415135">.</span><span class="ident" id="6415136">Float64</span><span class="op" id="6415143">,</span>&nbsp;<span class="ident" id="6415145">reflect</span><span class="op" id="6415152">.</span><span class="ident" id="6415153">Int</span><span class="op" id="6415156">,</span>&nbsp;<span class="ident" id="6415158">reflect</span><span class="op" id="6415165">.</span><span class="ident" id="6415166">Int8</span><span class="op" id="6415170">,</span>&nbsp;<span class="ident" id="6415172">reflect</span><span class="op" id="6415179">.</span><span class="ident" id="6415180">Int16</span><span class="op" id="6415185">,</span>&nbsp;<span class="ident" id="6415187">reflect</span><span class="op" id="6415194">.</span><span class="ident" id="6415195">Int32</span><span class="op" id="6415200">,</span>&nbsp;<span class="ident" id="6415202">reflect</span><span class="op" id="6415209">.</span><span class="ident" id="6415210">Int64</span><span class="op" id="6415215">,</span>&nbsp;<span class="ident" id="6415217">reflect</span><span class="op" id="6415224">.</span><span class="ident" id="6415225">Uint</span><span class="op" id="6415229">,</span>&nbsp;<span class="ident" id="6415231">reflect</span><span class="op" id="6415238">.</span><span class="ident" id="6415239">Uint8</span><span class="op" id="6415244">,</span>&nbsp;<span class="ident" id="6415246">reflect</span><span class="op" id="6415253">.</span><span class="ident" id="6415254">Uint16</span><span class="op" id="6415260">,</span>&nbsp;<span class="ident" id="6415262">reflect</span><span class="op" id="6415269">.</span><span class="ident" id="6415270">Uint32</span><span class="op" id="6415276">,</span>&nbsp;<span class="ident" id="6415278">reflect</span><span class="op" id="6415285">.</span><span class="ident" id="6415286">Uint64</span><span class="op" id="6415292">,</span>&nbsp;<span class="ident" id="6415294">reflect</span><span class="op" id="6415301">.</span><span class="ident" id="6415302">Uintptr</span><span class="op" id="6415309">,</span>&nbsp;<span class="ident" id="6415311">reflect</span><span class="op" id="6415318">.</span><span class="ident" id="6415319">String</span><span class="op" id="6415325">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415329">saveData</span>&nbsp;<span class="op" id="6415338">=</span>&nbsp;<span class="ident" id="6415340">v</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415344">case</span>&nbsp;<span class="ident" id="6415349">reflect</span><span class="op" id="6415356">.</span><span class="ident" id="6415357">Struct</span><span class="op" id="6415363">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415367">typ</span>&nbsp;<span class="op" id="6415371">:=</span>&nbsp;<span class="ident" id="6415374">v</span><span class="op" id="6415375">.</span><span class="ident" id="6415376">Type</span><span class="op" id="6415380">(</span><span class="op" id="6415381">)</span><br>
<span class="lineno">385</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415385">if</span>&nbsp;<span class="ident" id="6415388">typ</span>&nbsp;<span class="op" id="6415392">==</span>&nbsp;<span class="ident" id="6415395">nameType</span>&nbsp;<span class="op" id="6415404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415409">v</span><span class="op" id="6415410">.</span><span class="ident" id="6415411">Set</span><span class="op" id="6415414">(</span><span class="ident" id="6415415">reflect</span><span class="op" id="6415422">.</span><span class="ident" id="6415423">ValueOf</span><span class="op" id="6415430">(</span><span class="ident" id="6415431">start</span><span class="op" id="6415436">.</span><span class="ident" id="6415437">Name</span><span class="op" id="6415441">)</span><span class="op" id="6415442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415447">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">390</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415460">sv</span>&nbsp;<span class="op" id="6415463">=</span>&nbsp;<span class="ident" id="6415465">v</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415469">tinfo</span><span class="op" id="6415474">,</span>&nbsp;<span class="ident" id="6415476">err</span>&nbsp;<span class="op" id="6415480">=</span>&nbsp;<span class="ident" id="6415482">getTypeInfo</span><span class="op" id="6415493">(</span><span class="ident" id="6415494">typ</span><span class="op" id="6415497">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415501">if</span>&nbsp;<span class="ident" id="6415504">err</span>&nbsp;<span class="op" id="6415508">!=</span>&nbsp;<span class="ident" id="6415511">nil</span>&nbsp;<span class="op" id="6415515">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415520">return</span>&nbsp;<span class="ident" id="6415527">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415533">}</span><br>
<span class="lineno">395</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6415538">//&nbsp;Validate&nbsp;and&nbsp;assign&nbsp;element&nbsp;name.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415577">if</span>&nbsp;<span class="ident" id="6415580">tinfo</span><span class="op" id="6415585">.</span><span class="ident" id="6415586">xmlname</span>&nbsp;<span class="op" id="6415594">!=</span>&nbsp;<span class="ident" id="6415597">nil</span>&nbsp;<span class="op" id="6415601">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415606">finfo</span>&nbsp;<span class="op" id="6415612">:=</span>&nbsp;<span class="ident" id="6415615">tinfo</span><span class="op" id="6415620">.</span><span class="ident" id="6415621">xmlname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415632">if</span>&nbsp;<span class="ident" id="6415635">finfo</span><span class="op" id="6415640">.</span><span class="ident" id="6415641">name</span>&nbsp;<span class="op" id="6415646">!=</span>&nbsp;<span class="string" id="6415649">&#34;&#34;</span>&nbsp;<span class="op" id="6415652">&amp;&amp;</span>&nbsp;<span class="ident" id="6415655">finfo</span><span class="op" id="6415660">.</span><span class="ident" id="6415661">name</span>&nbsp;<span class="op" id="6415666">!=</span>&nbsp;<span class="ident" id="6415669">start</span><span class="op" id="6415674">.</span><span class="ident" id="6415675">Name</span><span class="op" id="6415679">.</span><span class="ident" id="6415680">Local</span>&nbsp;<span class="op" id="6415686">{</span><br>
<span class="lineno">400</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415692">return</span>&nbsp;<span class="ident" id="6415699">UnmarshalError</span><span class="op" id="6415713">(</span><span class="string" id="6415714">&#34;expected&nbsp;element&nbsp;type&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6415740">+</span>&nbsp;<span class="ident" id="6415742">finfo</span><span class="op" id="6415747">.</span><span class="ident" id="6415748">name</span>&nbsp;<span class="op" id="6415753">+</span>&nbsp;<span class="string" id="6415755">&#34;&gt;&nbsp;but&nbsp;have&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6415770">+</span>&nbsp;<span class="ident" id="6415772">start</span><span class="op" id="6415777">.</span><span class="ident" id="6415778">Name</span><span class="op" id="6415782">.</span><span class="ident" id="6415783">Local</span>&nbsp;<span class="op" id="6415789">+</span>&nbsp;<span class="string" id="6415791">&#34;&gt;&#34;</span><span class="op" id="6415794">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6415799">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415804">if</span>&nbsp;<span class="ident" id="6415807">finfo</span><span class="op" id="6415812">.</span><span class="ident" id="6415813">xmlns</span>&nbsp;<span class="op" id="6415819">!=</span>&nbsp;<span class="string" id="6415822">&#34;&#34;</span>&nbsp;<span class="op" id="6415825">&amp;&amp;</span>&nbsp;<span class="ident" id="6415828">finfo</span><span class="op" id="6415833">.</span><span class="ident" id="6415834">xmlns</span>&nbsp;<span class="op" id="6415840">!=</span>&nbsp;<span class="ident" id="6415843">start</span><span class="op" id="6415848">.</span><span class="ident" id="6415849">Name</span><span class="op" id="6415853">.</span><span class="ident" id="6415854">Space</span>&nbsp;<span class="op" id="6415860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415866">e</span>&nbsp;<span class="op" id="6415868">:=</span>&nbsp;<span class="string" id="6415871">&#34;expected&nbsp;element&nbsp;&lt;&#34;</span>&nbsp;<span class="op" id="6415892">+</span>&nbsp;<span class="ident" id="6415894">finfo</span><span class="op" id="6415899">.</span><span class="ident" id="6415900">name</span>&nbsp;<span class="op" id="6415905">+</span>&nbsp;<span class="string" id="6415907">&#34;&gt;&nbsp;in&nbsp;name&nbsp;space&nbsp;&#34;</span>&nbsp;<span class="op" id="6415926">+</span>&nbsp;<span class="ident" id="6415928">finfo</span><span class="op" id="6415933">.</span><span class="ident" id="6415934">xmlns</span>&nbsp;<span class="op" id="6415940">+</span>&nbsp;<span class="string" id="6415942">&#34;&nbsp;but&nbsp;have&nbsp;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6415959">if</span>&nbsp;<span class="ident" id="6415962">start</span><span class="op" id="6415967">.</span><span class="ident" id="6415968">Name</span><span class="op" id="6415972">.</span><span class="ident" id="6415973">Space</span>&nbsp;<span class="op" id="6415979">==</span>&nbsp;<span class="string" id="6415982">&#34;&#34;</span>&nbsp;<span class="op" id="6415985">{</span><br>
<span class="lineno">405</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6415992">e</span>&nbsp;<span class="op" id="6415994">+=</span>&nbsp;<span class="string" id="6415997">&#34;no&nbsp;name&nbsp;space&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416017">}</span>&nbsp;<span class="keyword" id="6416019">else</span>&nbsp;<span class="op" id="6416024">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416031">e</span>&nbsp;<span class="op" id="6416033">+=</span>&nbsp;<span class="ident" id="6416036">start</span><span class="op" id="6416041">.</span><span class="ident" id="6416042">Name</span><span class="op" id="6416046">.</span><span class="ident" id="6416047">Space</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416057">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416063">return</span>&nbsp;<span class="ident" id="6416070">UnmarshalError</span><span class="op" id="6416084">(</span><span class="ident" id="6416085">e</span><span class="op" id="6416086">)</span><br>
<span class="lineno">410</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416091">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416096">fv</span>&nbsp;<span class="op" id="6416099">:=</span>&nbsp;<span class="ident" id="6416102">finfo</span><span class="op" id="6416107">.</span><span class="ident" id="6416108">value</span><span class="op" id="6416113">(</span><span class="ident" id="6416114">sv</span><span class="op" id="6416116">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416121">if</span>&nbsp;<span class="ident" id="6416124">_</span><span class="op" id="6416125">,</span>&nbsp;<span class="ident" id="6416127">ok</span>&nbsp;<span class="op" id="6416130">:=</span>&nbsp;<span class="ident" id="6416133">fv</span><span class="op" id="6416135">.</span><span class="ident" id="6416136">Interface</span><span class="op" id="6416145">(</span><span class="op" id="6416146">)</span><span class="op" id="6416147">.</span><span class="op" id="6416148">(</span><span class="ident" id="6416149">Name</span><span class="op" id="6416153">)</span><span class="op" id="6416154">;</span>&nbsp;<span class="ident" id="6416156">ok</span>&nbsp;<span class="op" id="6416159">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416165">fv</span><span class="op" id="6416167">.</span><span class="ident" id="6416168">Set</span><span class="op" id="6416171">(</span><span class="ident" id="6416172">reflect</span><span class="op" id="6416179">.</span><span class="ident" id="6416180">ValueOf</span><span class="op" id="6416187">(</span><span class="ident" id="6416188">start</span><span class="op" id="6416193">.</span><span class="ident" id="6416194">Name</span><span class="op" id="6416198">)</span><span class="op" id="6416199">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416204">}</span><br>
<span class="lineno">415</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416208">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6416213">//&nbsp;Assign&nbsp;attributes.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6416237">//&nbsp;Also,&nbsp;determine&nbsp;whether&nbsp;we&nbsp;need&nbsp;to&nbsp;save&nbsp;character&nbsp;data&nbsp;or&nbsp;comments.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416310">for</span>&nbsp;<span class="ident" id="6416314">i</span>&nbsp;<span class="op" id="6416316">:=</span>&nbsp;<span class="keyword" id="6416319">range</span>&nbsp;<span class="ident" id="6416325">tinfo</span><span class="op" id="6416330">.</span><span class="ident" id="6416331">fields</span>&nbsp;<span class="op" id="6416338">{</span><br>
<span class="lineno">420</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416343">finfo</span>&nbsp;<span class="op" id="6416349">:=</span>&nbsp;<span class="op" id="6416352">&amp;</span><span class="ident" id="6416353">tinfo</span><span class="op" id="6416358">.</span><span class="ident" id="6416359">fields</span><span class="op" id="6416365">[</span><span class="ident" id="6416366">i</span><span class="op" id="6416367">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416372">switch</span>&nbsp;<span class="ident" id="6416379">finfo</span><span class="op" id="6416384">.</span><span class="ident" id="6416385">flags</span>&nbsp;<span class="op" id="6416391">&amp;</span>&nbsp;<span class="ident" id="6416393">fMode</span>&nbsp;<span class="op" id="6416399">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416404">case</span>&nbsp;<span class="ident" id="6416409">fAttr</span><span class="op" id="6416414">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416420">strv</span>&nbsp;<span class="op" id="6416425">:=</span>&nbsp;<span class="ident" id="6416428">finfo</span><span class="op" id="6416433">.</span><span class="ident" id="6416434">value</span><span class="op" id="6416439">(</span><span class="ident" id="6416440">sv</span><span class="op" id="6416442">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6416448">//&nbsp;Look&nbsp;for&nbsp;attribute.</span><br>
<span class="lineno">425</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416475">for</span>&nbsp;<span class="ident" id="6416479">_</span><span class="op" id="6416480">,</span>&nbsp;<span class="ident" id="6416482">a</span>&nbsp;<span class="op" id="6416484">:=</span>&nbsp;<span class="keyword" id="6416487">range</span>&nbsp;<span class="ident" id="6416493">start</span><span class="op" id="6416498">.</span><span class="ident" id="6416499">Attr</span>&nbsp;<span class="op" id="6416504">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416511">if</span>&nbsp;<span class="ident" id="6416514">a</span><span class="op" id="6416515">.</span><span class="ident" id="6416516">Name</span><span class="op" id="6416520">.</span><span class="ident" id="6416521">Local</span>&nbsp;<span class="op" id="6416527">==</span>&nbsp;<span class="ident" id="6416530">finfo</span><span class="op" id="6416535">.</span><span class="ident" id="6416536">name</span>&nbsp;<span class="op" id="6416541">&amp;&amp;</span>&nbsp;<span class="op" id="6416544">(</span><span class="ident" id="6416545">finfo</span><span class="op" id="6416550">.</span><span class="ident" id="6416551">xmlns</span>&nbsp;<span class="op" id="6416557">==</span>&nbsp;<span class="string" id="6416560">&#34;&#34;</span>&nbsp;<span class="op" id="6416563">||</span>&nbsp;<span class="ident" id="6416566">finfo</span><span class="op" id="6416571">.</span><span class="ident" id="6416572">xmlns</span>&nbsp;<span class="op" id="6416578">==</span>&nbsp;<span class="ident" id="6416581">a</span><span class="op" id="6416582">.</span><span class="ident" id="6416583">Name</span><span class="op" id="6416587">.</span><span class="ident" id="6416588">Space</span><span class="op" id="6416593">)</span>&nbsp;<span class="op" id="6416595">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416603">if</span>&nbsp;<span class="ident" id="6416606">err</span>&nbsp;<span class="op" id="6416610">:=</span>&nbsp;<span class="ident" id="6416613">p</span><span class="op" id="6416614">.</span><span class="ident" id="6416615">unmarshalAttr</span><span class="op" id="6416628">(</span><span class="ident" id="6416629">strv</span><span class="op" id="6416633">,</span>&nbsp;<span class="ident" id="6416635">a</span><span class="op" id="6416636">)</span><span class="op" id="6416637">;</span>&nbsp;<span class="ident" id="6416639">err</span>&nbsp;<span class="op" id="6416643">!=</span>&nbsp;<span class="ident" id="6416646">nil</span>&nbsp;<span class="op" id="6416650">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416659">return</span>&nbsp;<span class="ident" id="6416666">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416676">}</span><br>
<span class="lineno">430</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416684">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416695">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416701">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416707">case</span>&nbsp;<span class="ident" id="6416712">fCharData</span><span class="op" id="6416721">:</span><br>
<span class="lineno">435</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416727">if</span>&nbsp;<span class="op" id="6416730">!</span><span class="ident" id="6416731">saveData</span><span class="op" id="6416739">.</span><span class="ident" id="6416740">IsValid</span><span class="op" id="6416747">(</span><span class="op" id="6416748">)</span>&nbsp;<span class="op" id="6416750">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416757">saveData</span>&nbsp;<span class="op" id="6416766">=</span>&nbsp;<span class="ident" id="6416768">finfo</span><span class="op" id="6416773">.</span><span class="ident" id="6416774">value</span><span class="op" id="6416779">(</span><span class="ident" id="6416780">sv</span><span class="op" id="6416782">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416788">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416794">case</span>&nbsp;<span class="ident" id="6416799">fComment</span><span class="op" id="6416807">:</span><br>
<span class="lineno">440</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416813">if</span>&nbsp;<span class="op" id="6416816">!</span><span class="ident" id="6416817">saveComment</span><span class="op" id="6416828">.</span><span class="ident" id="6416829">IsValid</span><span class="op" id="6416836">(</span><span class="op" id="6416837">)</span>&nbsp;<span class="op" id="6416839">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416846">saveComment</span>&nbsp;<span class="op" id="6416858">=</span>&nbsp;<span class="ident" id="6416860">finfo</span><span class="op" id="6416865">.</span><span class="ident" id="6416866">value</span><span class="op" id="6416871">(</span><span class="ident" id="6416872">sv</span><span class="op" id="6416874">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416880">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416886">case</span>&nbsp;<span class="ident" id="6416891">fAny</span><span class="op" id="6416895">,</span>&nbsp;<span class="ident" id="6416897">fAny</span>&nbsp;<span class="op" id="6416902">|</span>&nbsp;<span class="ident" id="6416904">fElement</span><span class="op" id="6416912">:</span><br>
<span class="lineno">445</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416918">if</span>&nbsp;<span class="op" id="6416921">!</span><span class="ident" id="6416922">saveAny</span><span class="op" id="6416929">.</span><span class="ident" id="6416930">IsValid</span><span class="op" id="6416937">(</span><span class="op" id="6416938">)</span>&nbsp;<span class="op" id="6416940">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6416947">saveAny</span>&nbsp;<span class="op" id="6416955">=</span>&nbsp;<span class="ident" id="6416957">finfo</span><span class="op" id="6416962">.</span><span class="ident" id="6416963">value</span><span class="op" id="6416968">(</span><span class="ident" id="6416969">sv</span><span class="op" id="6416971">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6416977">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6416983">case</span>&nbsp;<span class="ident" id="6416988">fInnerXml</span><span class="op" id="6416997">:</span><br>
<span class="lineno">450</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417003">if</span>&nbsp;<span class="op" id="6417006">!</span><span class="ident" id="6417007">saveXML</span><span class="op" id="6417014">.</span><span class="ident" id="6417015">IsValid</span><span class="op" id="6417022">(</span><span class="op" id="6417023">)</span>&nbsp;<span class="op" id="6417025">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417032">saveXML</span>&nbsp;<span class="op" id="6417040">=</span>&nbsp;<span class="ident" id="6417042">finfo</span><span class="op" id="6417047">.</span><span class="ident" id="6417048">value</span><span class="op" id="6417053">(</span><span class="ident" id="6417054">sv</span><span class="op" id="6417056">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417063">if</span>&nbsp;<span class="ident" id="6417066">p</span><span class="op" id="6417067">.</span><span class="ident" id="6417068">saved</span>&nbsp;<span class="op" id="6417074">==</span>&nbsp;<span class="ident" id="6417077">nil</span>&nbsp;<span class="op" id="6417081">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417089">saveXMLIndex</span>&nbsp;<span class="op" id="6417102">=</span>&nbsp;<span class="num" id="6417104">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417112">p</span><span class="op" id="6417113">.</span><span class="ident" id="6417114">saved</span>&nbsp;<span class="op" id="6417120">=</span>&nbsp;<span class="builtinfunc" id="6417122">new</span><span class="op" id="6417125">(</span><span class="ident" id="6417126">bytes</span><span class="op" id="6417131">.</span><span class="ident" id="6417132">Buffer</span><span class="op" id="6417138">)</span><br>
<span class="lineno">455</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417145">}</span>&nbsp;<span class="keyword" id="6417147">else</span>&nbsp;<span class="op" id="6417152">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417160">saveXMLIndex</span>&nbsp;<span class="op" id="6417173">=</span>&nbsp;<span class="ident" id="6417175">p</span><span class="op" id="6417176">.</span><span class="ident" id="6417177">savedOffset</span><span class="op" id="6417188">(</span><span class="op" id="6417189">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417196">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417202">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417207">}</span><br>
<span class="lineno">460</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417211">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417214">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6417218">//&nbsp;Find&nbsp;end&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6417240">//&nbsp;Process&nbsp;sub-elements&nbsp;along&nbsp;the&nbsp;way.</span><br>
<span class="lineno">465</span><span class="ident" id="6417279">Loop</span><span class="op" id="6417283">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417286">for</span>&nbsp;<span class="op" id="6417290">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417294">var</span>&nbsp;<span class="ident" id="6417298">savedOffset</span>&nbsp;<span class="builtintype" id="6417310">int</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417316">if</span>&nbsp;<span class="ident" id="6417319">saveXML</span><span class="op" id="6417326">.</span><span class="ident" id="6417327">IsValid</span><span class="op" id="6417334">(</span><span class="op" id="6417335">)</span>&nbsp;<span class="op" id="6417337">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417342">savedOffset</span>&nbsp;<span class="op" id="6417354">=</span>&nbsp;<span class="ident" id="6417356">p</span><span class="op" id="6417357">.</span><span class="ident" id="6417358">savedOffset</span><span class="op" id="6417369">(</span><span class="op" id="6417370">)</span><br>
<span class="lineno">470</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417374">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417378">tok</span><span class="op" id="6417381">,</span>&nbsp;<span class="ident" id="6417383">err</span>&nbsp;<span class="op" id="6417387">:=</span>&nbsp;<span class="ident" id="6417390">p</span><span class="op" id="6417391">.</span><span class="ident" id="6417392">Token</span><span class="op" id="6417397">(</span><span class="op" id="6417398">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417402">if</span>&nbsp;<span class="ident" id="6417405">err</span>&nbsp;<span class="op" id="6417409">!=</span>&nbsp;<span class="ident" id="6417412">nil</span>&nbsp;<span class="op" id="6417416">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417421">return</span>&nbsp;<span class="ident" id="6417428">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417434">}</span><br>
<span class="lineno">475</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417438">switch</span>&nbsp;<span class="ident" id="6417445">t</span>&nbsp;<span class="op" id="6417447">:=</span>&nbsp;<span class="ident" id="6417450">tok</span><span class="op" id="6417453">.</span><span class="op" id="6417454">(</span><span class="keyword" id="6417455">type</span><span class="op" id="6417459">)</span>&nbsp;<span class="op" id="6417461">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417465">case</span>&nbsp;<span class="ident" id="6417470">StartElement</span><span class="op" id="6417482">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417487">consumed</span>&nbsp;<span class="op" id="6417496">:=</span>&nbsp;<span class="builtintype" id="6417499">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417508">if</span>&nbsp;<span class="ident" id="6417511">sv</span><span class="op" id="6417513">.</span><span class="ident" id="6417514">IsValid</span><span class="op" id="6417521">(</span><span class="op" id="6417522">)</span>&nbsp;<span class="op" id="6417524">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417530">consumed</span><span class="op" id="6417538">,</span>&nbsp;<span class="ident" id="6417540">err</span>&nbsp;<span class="op" id="6417544">=</span>&nbsp;<span class="ident" id="6417546">p</span><span class="op" id="6417547">.</span><span class="ident" id="6417548">unmarshalPath</span><span class="op" id="6417561">(</span><span class="ident" id="6417562">tinfo</span><span class="op" id="6417567">,</span>&nbsp;<span class="ident" id="6417569">sv</span><span class="op" id="6417571">,</span>&nbsp;<span class="ident" id="6417573">nil</span><span class="op" id="6417576">,</span>&nbsp;<span class="op" id="6417578">&amp;</span><span class="ident" id="6417579">t</span><span class="op" id="6417580">)</span><br>
<span class="lineno">480</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417586">if</span>&nbsp;<span class="ident" id="6417589">err</span>&nbsp;<span class="op" id="6417593">!=</span>&nbsp;<span class="ident" id="6417596">nil</span>&nbsp;<span class="op" id="6417600">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417607">return</span>&nbsp;<span class="ident" id="6417614">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417622">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417628">if</span>&nbsp;<span class="op" id="6417631">!</span><span class="ident" id="6417632">consumed</span>&nbsp;<span class="op" id="6417641">&amp;&amp;</span>&nbsp;<span class="ident" id="6417644">saveAny</span><span class="op" id="6417651">.</span><span class="ident" id="6417652">IsValid</span><span class="op" id="6417659">(</span><span class="op" id="6417660">)</span>&nbsp;<span class="op" id="6417662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417669">consumed</span>&nbsp;<span class="op" id="6417678">=</span>&nbsp;<span class="builtintype" id="6417680">true</span><br>
<span class="lineno">485</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417690">if</span>&nbsp;<span class="ident" id="6417693">err</span>&nbsp;<span class="op" id="6417697">:=</span>&nbsp;<span class="ident" id="6417700">p</span><span class="op" id="6417701">.</span><span class="ident" id="6417702">unmarshal</span><span class="op" id="6417711">(</span><span class="ident" id="6417712">saveAny</span><span class="op" id="6417719">,</span>&nbsp;<span class="op" id="6417721">&amp;</span><span class="ident" id="6417722">t</span><span class="op" id="6417723">)</span><span class="op" id="6417724">;</span>&nbsp;<span class="ident" id="6417726">err</span>&nbsp;<span class="op" id="6417730">!=</span>&nbsp;<span class="ident" id="6417733">nil</span>&nbsp;<span class="op" id="6417737">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417745">return</span>&nbsp;<span class="ident" id="6417752">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417761">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417767">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417772">}</span><br>
<span class="lineno">490</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417777">if</span>&nbsp;<span class="op" id="6417780">!</span><span class="ident" id="6417781">consumed</span>&nbsp;<span class="op" id="6417790">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417796">if</span>&nbsp;<span class="ident" id="6417799">err</span>&nbsp;<span class="op" id="6417803">:=</span>&nbsp;<span class="ident" id="6417806">p</span><span class="op" id="6417807">.</span><span class="ident" id="6417808">Skip</span><span class="op" id="6417812">(</span><span class="op" id="6417813">)</span><span class="op" id="6417814">;</span>&nbsp;<span class="ident" id="6417816">err</span>&nbsp;<span class="op" id="6417820">!=</span>&nbsp;<span class="ident" id="6417823">nil</span>&nbsp;<span class="op" id="6417827">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417834">return</span>&nbsp;<span class="ident" id="6417841">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417849">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6417854">}</span><br>
<span class="lineno">495</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417859">case</span>&nbsp;<span class="ident" id="6417864">EndElement</span><span class="op" id="6417874">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417879">if</span>&nbsp;<span class="ident" id="6417882">saveXML</span><span class="op" id="6417889">.</span><span class="ident" id="6417890">IsValid</span><span class="op" id="6417897">(</span><span class="op" id="6417898">)</span>&nbsp;<span class="op" id="6417900">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417906">saveXMLData</span>&nbsp;<span class="op" id="6417918">=</span>&nbsp;<span class="ident" id="6417920">p</span><span class="op" id="6417921">.</span><span class="ident" id="6417922">saved</span><span class="op" id="6417927">.</span><span class="ident" id="6417928">Bytes</span><span class="op" id="6417933">(</span><span class="op" id="6417934">)</span><span class="op" id="6417935">[</span><span class="ident" id="6417936">saveXMLIndex</span><span class="op" id="6417948">:</span><span class="ident" id="6417949">savedOffset</span><span class="op" id="6417960">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6417966">if</span>&nbsp;<span class="ident" id="6417969">saveXMLIndex</span>&nbsp;<span class="op" id="6417982">==</span>&nbsp;<span class="num" id="6417985">0</span>&nbsp;<span class="op" id="6417987">{</span><br>
<span class="lineno">500</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6417994">p</span><span class="op" id="6417995">.</span><span class="ident" id="6417996">saved</span>&nbsp;<span class="op" id="6418002">=</span>&nbsp;<span class="ident" id="6418004">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418012">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418017">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418022">break</span>&nbsp;<span class="ident" id="6418028">Loop</span><br>
<span class="lineno"></span><br>
<span class="lineno">505</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418036">case</span>&nbsp;<span class="ident" id="6418041">CharData</span><span class="op" id="6418049">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418054">if</span>&nbsp;<span class="ident" id="6418057">saveData</span><span class="op" id="6418065">.</span><span class="ident" id="6418066">IsValid</span><span class="op" id="6418073">(</span><span class="op" id="6418074">)</span>&nbsp;<span class="op" id="6418076">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418082">data</span>&nbsp;<span class="op" id="6418087">=</span>&nbsp;<span class="builtinfunc" id="6418089">append</span><span class="op" id="6418095">(</span><span class="ident" id="6418096">data</span><span class="op" id="6418100">,</span>&nbsp;<span class="ident" id="6418102">t</span><span class="op" id="6418103">...</span><span class="op" id="6418106">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418111">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">510</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418116">case</span>&nbsp;<span class="ident" id="6418121">Comment</span><span class="op" id="6418128">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418133">if</span>&nbsp;<span class="ident" id="6418136">saveComment</span><span class="op" id="6418147">.</span><span class="ident" id="6418148">IsValid</span><span class="op" id="6418155">(</span><span class="op" id="6418156">)</span>&nbsp;<span class="op" id="6418158">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418164">comment</span>&nbsp;<span class="op" id="6418172">=</span>&nbsp;<span class="builtinfunc" id="6418174">append</span><span class="op" id="6418180">(</span><span class="ident" id="6418181">comment</span><span class="op" id="6418188">,</span>&nbsp;<span class="ident" id="6418190">t</span><span class="op" id="6418191">...</span><span class="op" id="6418194">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418203">}</span><br>
<span class="lineno">515</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418206">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418210">if</span>&nbsp;<span class="ident" id="6418213">saveData</span><span class="op" id="6418221">.</span><span class="ident" id="6418222">IsValid</span><span class="op" id="6418229">(</span><span class="op" id="6418230">)</span>&nbsp;<span class="op" id="6418232">&amp;&amp;</span>&nbsp;<span class="ident" id="6418235">saveData</span><span class="op" id="6418243">.</span><span class="ident" id="6418244">CanInterface</span><span class="op" id="6418256">(</span><span class="op" id="6418257">)</span>&nbsp;<span class="op" id="6418259">&amp;&amp;</span>&nbsp;<span class="ident" id="6418262">saveData</span><span class="op" id="6418270">.</span><span class="ident" id="6418271">Type</span><span class="op" id="6418275">(</span><span class="op" id="6418276">)</span><span class="op" id="6418277">.</span><span class="ident" id="6418278">Implements</span><span class="op" id="6418288">(</span><span class="ident" id="6418289">textUnmarshalerType</span><span class="op" id="6418308">)</span>&nbsp;<span class="op" id="6418310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418314">if</span>&nbsp;<span class="ident" id="6418317">err</span>&nbsp;<span class="op" id="6418321">:=</span>&nbsp;<span class="ident" id="6418324">saveData</span><span class="op" id="6418332">.</span><span class="ident" id="6418333">Interface</span><span class="op" id="6418342">(</span><span class="op" id="6418343">)</span><span class="op" id="6418344">.</span><span class="op" id="6418345">(</span><span class="ident" id="6418346">encoding</span><span class="op" id="6418354">.</span><span class="ident" id="6418355">TextUnmarshaler</span><span class="op" id="6418370">)</span><span class="op" id="6418371">.</span><span class="ident" id="6418372">UnmarshalText</span><span class="op" id="6418385">(</span><span class="ident" id="6418386">data</span><span class="op" id="6418390">)</span><span class="op" id="6418391">;</span>&nbsp;<span class="ident" id="6418393">err</span>&nbsp;<span class="op" id="6418397">!=</span>&nbsp;<span class="ident" id="6418400">nil</span>&nbsp;<span class="op" id="6418404">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418409">return</span>&nbsp;<span class="ident" id="6418416">err</span><br>
<span class="lineno">520</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418422">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418426">saveData</span>&nbsp;<span class="op" id="6418435">=</span>&nbsp;<span class="ident" id="6418437">reflect</span><span class="op" id="6418444">.</span><span class="ident" id="6418445">Value</span><span class="op" id="6418450">{</span><span class="op" id="6418451">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418454">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418458">if</span>&nbsp;<span class="ident" id="6418461">saveData</span><span class="op" id="6418469">.</span><span class="ident" id="6418470">IsValid</span><span class="op" id="6418477">(</span><span class="op" id="6418478">)</span>&nbsp;<span class="op" id="6418480">&amp;&amp;</span>&nbsp;<span class="ident" id="6418483">saveData</span><span class="op" id="6418491">.</span><span class="ident" id="6418492">CanAddr</span><span class="op" id="6418499">(</span><span class="op" id="6418500">)</span>&nbsp;<span class="op" id="6418502">{</span><br>
<span class="lineno">525</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418506">pv</span>&nbsp;<span class="op" id="6418509">:=</span>&nbsp;<span class="ident" id="6418512">saveData</span><span class="op" id="6418520">.</span><span class="ident" id="6418521">Addr</span><span class="op" id="6418525">(</span><span class="op" id="6418526">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418530">if</span>&nbsp;<span class="ident" id="6418533">pv</span><span class="op" id="6418535">.</span><span class="ident" id="6418536">CanInterface</span><span class="op" id="6418548">(</span><span class="op" id="6418549">)</span>&nbsp;<span class="op" id="6418551">&amp;&amp;</span>&nbsp;<span class="ident" id="6418554">pv</span><span class="op" id="6418556">.</span><span class="ident" id="6418557">Type</span><span class="op" id="6418561">(</span><span class="op" id="6418562">)</span><span class="op" id="6418563">.</span><span class="ident" id="6418564">Implements</span><span class="op" id="6418574">(</span><span class="ident" id="6418575">textUnmarshalerType</span><span class="op" id="6418594">)</span>&nbsp;<span class="op" id="6418596">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418601">if</span>&nbsp;<span class="ident" id="6418604">err</span>&nbsp;<span class="op" id="6418608">:=</span>&nbsp;<span class="ident" id="6418611">pv</span><span class="op" id="6418613">.</span><span class="ident" id="6418614">Interface</span><span class="op" id="6418623">(</span><span class="op" id="6418624">)</span><span class="op" id="6418625">.</span><span class="op" id="6418626">(</span><span class="ident" id="6418627">encoding</span><span class="op" id="6418635">.</span><span class="ident" id="6418636">TextUnmarshaler</span><span class="op" id="6418651">)</span><span class="op" id="6418652">.</span><span class="ident" id="6418653">UnmarshalText</span><span class="op" id="6418666">(</span><span class="ident" id="6418667">data</span><span class="op" id="6418671">)</span><span class="op" id="6418672">;</span>&nbsp;<span class="ident" id="6418674">err</span>&nbsp;<span class="op" id="6418678">!=</span>&nbsp;<span class="ident" id="6418681">nil</span>&nbsp;<span class="op" id="6418685">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418691">return</span>&nbsp;<span class="ident" id="6418698">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418705">}</span><br>
<span class="lineno">530</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418710">saveData</span>&nbsp;<span class="op" id="6418719">=</span>&nbsp;<span class="ident" id="6418721">reflect</span><span class="op" id="6418728">.</span><span class="ident" id="6418729">Value</span><span class="op" id="6418734">{</span><span class="op" id="6418735">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418742">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418746">if</span>&nbsp;<span class="ident" id="6418749">err</span>&nbsp;<span class="op" id="6418753">:=</span>&nbsp;<span class="ident" id="6418756">copyValue</span><span class="op" id="6418765">(</span><span class="ident" id="6418766">saveData</span><span class="op" id="6418774">,</span>&nbsp;<span class="ident" id="6418776">data</span><span class="op" id="6418780">)</span><span class="op" id="6418781">;</span>&nbsp;<span class="ident" id="6418783">err</span>&nbsp;<span class="op" id="6418787">!=</span>&nbsp;<span class="ident" id="6418790">nil</span>&nbsp;<span class="op" id="6418794">{</span><br>
<span class="lineno">535</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418798">return</span>&nbsp;<span class="ident" id="6418805">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418810">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418814">switch</span>&nbsp;<span class="ident" id="6418821">t</span>&nbsp;<span class="op" id="6418823">:=</span>&nbsp;<span class="ident" id="6418826">saveComment</span><span class="op" id="6418837">;</span>&nbsp;<span class="ident" id="6418839">t</span><span class="op" id="6418840">.</span><span class="ident" id="6418841">Kind</span><span class="op" id="6418845">(</span><span class="op" id="6418846">)</span>&nbsp;<span class="op" id="6418848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418851">case</span>&nbsp;<span class="ident" id="6418856">reflect</span><span class="op" id="6418863">.</span><span class="ident" id="6418864">String</span><span class="op" id="6418870">:</span><br>
<span class="lineno">540</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418874">t</span><span class="op" id="6418875">.</span><span class="ident" id="6418876">SetString</span><span class="op" id="6418885">(</span><span class="builtintype" id="6418886">string</span><span class="op" id="6418892">(</span><span class="ident" id="6418893">comment</span><span class="op" id="6418900">)</span><span class="op" id="6418901">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418904">case</span>&nbsp;<span class="ident" id="6418909">reflect</span><span class="op" id="6418916">.</span><span class="ident" id="6418917">Slice</span><span class="op" id="6418922">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6418926">t</span><span class="op" id="6418927">.</span><span class="ident" id="6418928">Set</span><span class="op" id="6418931">(</span><span class="ident" id="6418932">reflect</span><span class="op" id="6418939">.</span><span class="ident" id="6418940">ValueOf</span><span class="op" id="6418947">(</span><span class="ident" id="6418948">comment</span><span class="op" id="6418955">)</span><span class="op" id="6418956">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6418959">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">545</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418963">switch</span>&nbsp;<span class="ident" id="6418970">t</span>&nbsp;<span class="op" id="6418972">:=</span>&nbsp;<span class="ident" id="6418975">saveXML</span><span class="op" id="6418982">;</span>&nbsp;<span class="ident" id="6418984">t</span><span class="op" id="6418985">.</span><span class="ident" id="6418986">Kind</span><span class="op" id="6418990">(</span><span class="op" id="6418991">)</span>&nbsp;<span class="op" id="6418993">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6418996">case</span>&nbsp;<span class="ident" id="6419001">reflect</span><span class="op" id="6419008">.</span><span class="ident" id="6419009">String</span><span class="op" id="6419015">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419019">t</span><span class="op" id="6419020">.</span><span class="ident" id="6419021">SetString</span><span class="op" id="6419030">(</span><span class="builtintype" id="6419031">string</span><span class="op" id="6419037">(</span><span class="ident" id="6419038">saveXMLData</span><span class="op" id="6419049">)</span><span class="op" id="6419050">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419053">case</span>&nbsp;<span class="ident" id="6419058">reflect</span><span class="op" id="6419065">.</span><span class="ident" id="6419066">Slice</span><span class="op" id="6419071">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419075">t</span><span class="op" id="6419076">.</span><span class="ident" id="6419077">Set</span><span class="op" id="6419080">(</span><span class="ident" id="6419081">reflect</span><span class="op" id="6419088">.</span><span class="ident" id="6419089">ValueOf</span><span class="op" id="6419096">(</span><span class="ident" id="6419097">saveXMLData</span><span class="op" id="6419108">)</span><span class="op" id="6419109">)</span><br>
<span class="lineno">550</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419112">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419116">return</span>&nbsp;<span class="ident" id="6419123">nil</span><br>
<span class="lineno"></span><span class="op" id="6419127">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">555</span><span class="keyword" id="6419130">func</span>&nbsp;<span class="ident" id="6419135">copyValue</span><span class="op" id="6419144">(</span><span class="ident" id="6419145">dst</span>&nbsp;<span class="ident" id="6419149">reflect</span><span class="op" id="6419156">.</span><span class="ident" id="6419157">Value</span><span class="op" id="6419162">,</span>&nbsp;<span class="ident" id="6419164">src</span>&nbsp;<span class="op" id="6419168">[</span><span class="op" id="6419169">]</span><span class="builtintype" id="6419170">byte</span><span class="op" id="6419174">)</span>&nbsp;<span class="op" id="6419176">(</span><span class="ident" id="6419177">err</span>&nbsp;<span class="builtintype" id="6419181">error</span><span class="op" id="6419186">)</span>&nbsp;<span class="op" id="6419188">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419191">dst0</span>&nbsp;<span class="op" id="6419196">:=</span>&nbsp;<span class="ident" id="6419199">dst</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419205">if</span>&nbsp;<span class="ident" id="6419208">dst</span><span class="op" id="6419211">.</span><span class="ident" id="6419212">Kind</span><span class="op" id="6419216">(</span><span class="op" id="6419217">)</span>&nbsp;<span class="op" id="6419219">==</span>&nbsp;<span class="ident" id="6419222">reflect</span><span class="op" id="6419229">.</span><span class="ident" id="6419230">Ptr</span>&nbsp;<span class="op" id="6419234">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419238">if</span>&nbsp;<span class="ident" id="6419241">dst</span><span class="op" id="6419244">.</span><span class="ident" id="6419245">IsNil</span><span class="op" id="6419250">(</span><span class="op" id="6419251">)</span>&nbsp;<span class="op" id="6419253">{</span><br>
<span class="lineno">560</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419258">dst</span><span class="op" id="6419261">.</span><span class="ident" id="6419262">Set</span><span class="op" id="6419265">(</span><span class="ident" id="6419266">reflect</span><span class="op" id="6419273">.</span><span class="ident" id="6419274">New</span><span class="op" id="6419277">(</span><span class="ident" id="6419278">dst</span><span class="op" id="6419281">.</span><span class="ident" id="6419282">Type</span><span class="op" id="6419286">(</span><span class="op" id="6419287">)</span><span class="op" id="6419288">.</span><span class="ident" id="6419289">Elem</span><span class="op" id="6419293">(</span><span class="op" id="6419294">)</span><span class="op" id="6419295">)</span><span class="op" id="6419296">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419300">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419304">dst</span>&nbsp;<span class="op" id="6419308">=</span>&nbsp;<span class="ident" id="6419310">dst</span><span class="op" id="6419313">.</span><span class="ident" id="6419314">Elem</span><span class="op" id="6419318">(</span><span class="op" id="6419319">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419322">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">565</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419326">//&nbsp;Save&nbsp;accumulated&nbsp;data.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419353">switch</span>&nbsp;<span class="ident" id="6419360">dst</span><span class="op" id="6419363">.</span><span class="ident" id="6419364">Kind</span><span class="op" id="6419368">(</span><span class="op" id="6419369">)</span>&nbsp;<span class="op" id="6419371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419374">case</span>&nbsp;<span class="ident" id="6419379">reflect</span><span class="op" id="6419386">.</span><span class="ident" id="6419387">Invalid</span><span class="op" id="6419394">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6419398">//&nbsp;Probably&nbsp;a&nbsp;comment.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419422">default</span><span class="op" id="6419429">:</span><br>
<span class="lineno">570</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419433">return</span>&nbsp;<span class="ident" id="6419440">errors</span><span class="op" id="6419446">.</span><span class="ident" id="6419447">New</span><span class="op" id="6419450">(</span><span class="string" id="6419451">&#34;cannot&nbsp;unmarshal&nbsp;into&nbsp;&#34;</span>&nbsp;<span class="op" id="6419476">+</span>&nbsp;<span class="ident" id="6419478">dst0</span><span class="op" id="6419482">.</span><span class="ident" id="6419483">Type</span><span class="op" id="6419487">(</span><span class="op" id="6419488">)</span><span class="op" id="6419489">.</span><span class="ident" id="6419490">String</span><span class="op" id="6419496">(</span><span class="op" id="6419497">)</span><span class="op" id="6419498">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419501">case</span>&nbsp;<span class="ident" id="6419506">reflect</span><span class="op" id="6419513">.</span><span class="ident" id="6419514">Int</span><span class="op" id="6419517">,</span>&nbsp;<span class="ident" id="6419519">reflect</span><span class="op" id="6419526">.</span><span class="ident" id="6419527">Int8</span><span class="op" id="6419531">,</span>&nbsp;<span class="ident" id="6419533">reflect</span><span class="op" id="6419540">.</span><span class="ident" id="6419541">Int16</span><span class="op" id="6419546">,</span>&nbsp;<span class="ident" id="6419548">reflect</span><span class="op" id="6419555">.</span><span class="ident" id="6419556">Int32</span><span class="op" id="6419561">,</span>&nbsp;<span class="ident" id="6419563">reflect</span><span class="op" id="6419570">.</span><span class="ident" id="6419571">Int64</span><span class="op" id="6419576">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419580">itmp</span><span class="op" id="6419584">,</span>&nbsp;<span class="ident" id="6419586">err</span>&nbsp;<span class="op" id="6419590">:=</span>&nbsp;<span class="ident" id="6419593">strconv</span><span class="op" id="6419600">.</span><span class="ident" id="6419601">ParseInt</span><span class="op" id="6419609">(</span><span class="builtintype" id="6419610">string</span><span class="op" id="6419616">(</span><span class="ident" id="6419617">src</span><span class="op" id="6419620">)</span><span class="op" id="6419621">,</span>&nbsp;<span class="num" id="6419623">10</span><span class="op" id="6419625">,</span>&nbsp;<span class="ident" id="6419627">dst</span><span class="op" id="6419630">.</span><span class="ident" id="6419631">Type</span><span class="op" id="6419635">(</span><span class="op" id="6419636">)</span><span class="op" id="6419637">.</span><span class="ident" id="6419638">Bits</span><span class="op" id="6419642">(</span><span class="op" id="6419643">)</span><span class="op" id="6419644">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419648">if</span>&nbsp;<span class="ident" id="6419651">err</span>&nbsp;<span class="op" id="6419655">!=</span>&nbsp;<span class="ident" id="6419658">nil</span>&nbsp;<span class="op" id="6419662">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419667">return</span>&nbsp;<span class="ident" id="6419674">err</span><br>
<span class="lineno">575</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419680">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419684">dst</span><span class="op" id="6419687">.</span><span class="ident" id="6419688">SetInt</span><span class="op" id="6419694">(</span><span class="ident" id="6419695">itmp</span><span class="op" id="6419699">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419702">case</span>&nbsp;<span class="ident" id="6419707">reflect</span><span class="op" id="6419714">.</span><span class="ident" id="6419715">Uint</span><span class="op" id="6419719">,</span>&nbsp;<span class="ident" id="6419721">reflect</span><span class="op" id="6419728">.</span><span class="ident" id="6419729">Uint8</span><span class="op" id="6419734">,</span>&nbsp;<span class="ident" id="6419736">reflect</span><span class="op" id="6419743">.</span><span class="ident" id="6419744">Uint16</span><span class="op" id="6419750">,</span>&nbsp;<span class="ident" id="6419752">reflect</span><span class="op" id="6419759">.</span><span class="ident" id="6419760">Uint32</span><span class="op" id="6419766">,</span>&nbsp;<span class="ident" id="6419768">reflect</span><span class="op" id="6419775">.</span><span class="ident" id="6419776">Uint64</span><span class="op" id="6419782">,</span>&nbsp;<span class="ident" id="6419784">reflect</span><span class="op" id="6419791">.</span><span class="ident" id="6419792">Uintptr</span><span class="op" id="6419799">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419803">utmp</span><span class="op" id="6419807">,</span>&nbsp;<span class="ident" id="6419809">err</span>&nbsp;<span class="op" id="6419813">:=</span>&nbsp;<span class="ident" id="6419816">strconv</span><span class="op" id="6419823">.</span><span class="ident" id="6419824">ParseUint</span><span class="op" id="6419833">(</span><span class="builtintype" id="6419834">string</span><span class="op" id="6419840">(</span><span class="ident" id="6419841">src</span><span class="op" id="6419844">)</span><span class="op" id="6419845">,</span>&nbsp;<span class="num" id="6419847">10</span><span class="op" id="6419849">,</span>&nbsp;<span class="ident" id="6419851">dst</span><span class="op" id="6419854">.</span><span class="ident" id="6419855">Type</span><span class="op" id="6419859">(</span><span class="op" id="6419860">)</span><span class="op" id="6419861">.</span><span class="ident" id="6419862">Bits</span><span class="op" id="6419866">(</span><span class="op" id="6419867">)</span><span class="op" id="6419868">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419872">if</span>&nbsp;<span class="ident" id="6419875">err</span>&nbsp;<span class="op" id="6419879">!=</span>&nbsp;<span class="ident" id="6419882">nil</span>&nbsp;<span class="op" id="6419886">{</span><br>
<span class="lineno">580</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419891">return</span>&nbsp;<span class="ident" id="6419898">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6419904">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419908">dst</span><span class="op" id="6419911">.</span><span class="ident" id="6419912">SetUint</span><span class="op" id="6419919">(</span><span class="ident" id="6419920">utmp</span><span class="op" id="6419924">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6419927">case</span>&nbsp;<span class="ident" id="6419932">reflect</span><span class="op" id="6419939">.</span><span class="ident" id="6419940">Float32</span><span class="op" id="6419947">,</span>&nbsp;<span class="ident" id="6419949">reflect</span><span class="op" id="6419956">.</span><span class="ident" id="6419957">Float64</span><span class="op" id="6419964">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6419968">ftmp</span><span class="op" id="6419972">,</span>&nbsp;<span class="ident" id="6419974">err</span>&nbsp;<span class="op" id="6419978">:=</span>&nbsp;<span class="ident" id="6419981">strconv</span><span class="op" id="6419988">.</span><span class="ident" id="6419989">ParseFloat</span><span class="op" id="6419999">(</span><span class="builtintype" id="6420000">string</span><span class="op" id="6420006">(</span><span class="ident" id="6420007">src</span><span class="op" id="6420010">)</span><span class="op" id="6420011">,</span>&nbsp;<span class="ident" id="6420013">dst</span><span class="op" id="6420016">.</span><span class="ident" id="6420017">Type</span><span class="op" id="6420021">(</span><span class="op" id="6420022">)</span><span class="op" id="6420023">.</span><span class="ident" id="6420024">Bits</span><span class="op" id="6420028">(</span><span class="op" id="6420029">)</span><span class="op" id="6420030">)</span><br>
<span class="lineno">585</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420034">if</span>&nbsp;<span class="ident" id="6420037">err</span>&nbsp;<span class="op" id="6420041">!=</span>&nbsp;<span class="ident" id="6420044">nil</span>&nbsp;<span class="op" id="6420048">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420053">return</span>&nbsp;<span class="ident" id="6420060">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420066">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420070">dst</span><span class="op" id="6420073">.</span><span class="ident" id="6420074">SetFloat</span><span class="op" id="6420082">(</span><span class="ident" id="6420083">ftmp</span><span class="op" id="6420087">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420090">case</span>&nbsp;<span class="ident" id="6420095">reflect</span><span class="op" id="6420102">.</span><span class="ident" id="6420103">Bool</span><span class="op" id="6420107">:</span><br>
<span class="lineno">590</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420111">value</span><span class="op" id="6420116">,</span>&nbsp;<span class="ident" id="6420118">err</span>&nbsp;<span class="op" id="6420122">:=</span>&nbsp;<span class="ident" id="6420125">strconv</span><span class="op" id="6420132">.</span><span class="ident" id="6420133">ParseBool</span><span class="op" id="6420142">(</span><span class="ident" id="6420143">strings</span><span class="op" id="6420150">.</span><span class="ident" id="6420151">TrimSpace</span><span class="op" id="6420160">(</span><span class="builtintype" id="6420161">string</span><span class="op" id="6420167">(</span><span class="ident" id="6420168">src</span><span class="op" id="6420171">)</span><span class="op" id="6420172">)</span><span class="op" id="6420173">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420177">if</span>&nbsp;<span class="ident" id="6420180">err</span>&nbsp;<span class="op" id="6420184">!=</span>&nbsp;<span class="ident" id="6420187">nil</span>&nbsp;<span class="op" id="6420191">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420196">return</span>&nbsp;<span class="ident" id="6420203">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420209">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420213">dst</span><span class="op" id="6420216">.</span><span class="ident" id="6420217">SetBool</span><span class="op" id="6420224">(</span><span class="ident" id="6420225">value</span><span class="op" id="6420230">)</span><br>
<span class="lineno">595</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420233">case</span>&nbsp;<span class="ident" id="6420238">reflect</span><span class="op" id="6420245">.</span><span class="ident" id="6420246">String</span><span class="op" id="6420252">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420256">dst</span><span class="op" id="6420259">.</span><span class="ident" id="6420260">SetString</span><span class="op" id="6420269">(</span><span class="builtintype" id="6420270">string</span><span class="op" id="6420276">(</span><span class="ident" id="6420277">src</span><span class="op" id="6420280">)</span><span class="op" id="6420281">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420284">case</span>&nbsp;<span class="ident" id="6420289">reflect</span><span class="op" id="6420296">.</span><span class="ident" id="6420297">Slice</span><span class="op" id="6420302">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420306">if</span>&nbsp;<span class="builtinfunc" id="6420309">len</span><span class="op" id="6420312">(</span><span class="ident" id="6420313">src</span><span class="op" id="6420316">)</span>&nbsp;<span class="op" id="6420318">==</span>&nbsp;<span class="num" id="6420321">0</span>&nbsp;<span class="op" id="6420323">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6420328">//&nbsp;non-nil&nbsp;to&nbsp;flag&nbsp;presence</span><br>
<span class="lineno">600</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420359">src</span>&nbsp;<span class="op" id="6420363">=</span>&nbsp;<span class="op" id="6420365">[</span><span class="op" id="6420366">]</span><span class="builtintype" id="6420367">byte</span><span class="op" id="6420371">{</span><span class="op" id="6420372">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420376">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420380">dst</span><span class="op" id="6420383">.</span><span class="ident" id="6420384">SetBytes</span><span class="op" id="6420392">(</span><span class="ident" id="6420393">src</span><span class="op" id="6420396">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6420399">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420402">return</span>&nbsp;<span class="ident" id="6420409">nil</span><br>
<span class="lineno">605</span><span class="op" id="6420413">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="6420416">//&nbsp;unmarshalPath&nbsp;walks&nbsp;down&nbsp;an&nbsp;XML&nbsp;structure&nbsp;looking&nbsp;for&nbsp;wanted</span><br>
<span class="lineno"></span><span class="comment" id="6420480">//&nbsp;paths,&nbsp;and&nbsp;calls&nbsp;unmarshal&nbsp;on&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="6420519">//&nbsp;The&nbsp;consumed&nbsp;result&nbsp;tells&nbsp;whether&nbsp;XML&nbsp;elements&nbsp;have&nbsp;been&nbsp;consumed</span><br>
<span class="lineno">610</span><span class="comment" id="6420588">//&nbsp;from&nbsp;the&nbsp;Decoder&nbsp;until&nbsp;start&#39;s&nbsp;matching&nbsp;end&nbsp;element,&nbsp;or&nbsp;if&nbsp;it&#39;s</span><br>
<span class="lineno"></span><span class="comment" id="6420655">//&nbsp;still&nbsp;untouched&nbsp;because&nbsp;start&nbsp;is&nbsp;uninteresting&nbsp;for&nbsp;sv&#39;s&nbsp;fields.</span><br>
<span class="lineno"></span><span class="keyword" id="6420722">func</span>&nbsp;<span class="op" id="6420727">(</span><span class="ident" id="6420728">p</span>&nbsp;<span class="op" id="6420730">*</span><span class="ident" id="6420731">Decoder</span><span class="op" id="6420738">)</span>&nbsp;<span class="ident" id="6420740">unmarshalPath</span><span class="op" id="6420753">(</span><span class="ident" id="6420754">tinfo</span>&nbsp;<span class="op" id="6420760">*</span><span class="ident" id="6420761">typeInfo</span><span class="op" id="6420769">,</span>&nbsp;<span class="ident" id="6420771">sv</span>&nbsp;<span class="ident" id="6420774">reflect</span><span class="op" id="6420781">.</span><span class="ident" id="6420782">Value</span><span class="op" id="6420787">,</span>&nbsp;<span class="ident" id="6420789">parents</span>&nbsp;<span class="op" id="6420797">[</span><span class="op" id="6420798">]</span><span class="builtintype" id="6420799">string</span><span class="op" id="6420805">,</span>&nbsp;<span class="ident" id="6420807">start</span>&nbsp;<span class="op" id="6420813">*</span><span class="ident" id="6420814">StartElement</span><span class="op" id="6420826">)</span>&nbsp;<span class="op" id="6420828">(</span><span class="ident" id="6420829">consumed</span>&nbsp;<span class="builtintype" id="6420838">bool</span><span class="op" id="6420842">,</span>&nbsp;<span class="ident" id="6420844">err</span>&nbsp;<span class="builtintype" id="6420848">error</span><span class="op" id="6420853">)</span>&nbsp;<span class="op" id="6420855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420858">recurse</span>&nbsp;<span class="op" id="6420866">:=</span>&nbsp;<span class="builtintype" id="6420869">false</span><br>
<span class="lineno"></span><span class="ident" id="6420875">Loop</span><span class="op" id="6420879">:</span><br>
<span class="lineno">615</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420882">for</span>&nbsp;<span class="ident" id="6420886">i</span>&nbsp;<span class="op" id="6420888">:=</span>&nbsp;<span class="keyword" id="6420891">range</span>&nbsp;<span class="ident" id="6420897">tinfo</span><span class="op" id="6420902">.</span><span class="ident" id="6420903">fields</span>&nbsp;<span class="op" id="6420910">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6420914">finfo</span>&nbsp;<span class="op" id="6420920">:=</span>&nbsp;<span class="op" id="6420923">&amp;</span><span class="ident" id="6420924">tinfo</span><span class="op" id="6420929">.</span><span class="ident" id="6420930">fields</span><span class="op" id="6420936">[</span><span class="ident" id="6420937">i</span><span class="op" id="6420938">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6420942">if</span>&nbsp;<span class="ident" id="6420945">finfo</span><span class="op" id="6420950">.</span><span class="ident" id="6420951">flags</span><span class="op" id="6420956">&amp;</span><span class="ident" id="6420957">fElement</span>&nbsp;<span class="op" id="6420966">==</span>&nbsp;<span class="num" id="6420969">0</span>&nbsp;<span class="op" id="6420971">||</span>&nbsp;<span class="builtinfunc" id="6420974">len</span><span class="op" id="6420977">(</span><span class="ident" id="6420978">finfo</span><span class="op" id="6420983">.</span><span class="ident" id="6420984">parents</span><span class="op" id="6420991">)</span>&nbsp;<span class="op" id="6420993">&lt;</span>&nbsp;<span class="builtinfunc" id="6420995">len</span><span class="op" id="6420998">(</span><span class="ident" id="6420999">parents</span><span class="op" id="6421006">)</span>&nbsp;<span class="op" id="6421008">||</span>&nbsp;<span class="ident" id="6421011">finfo</span><span class="op" id="6421016">.</span><span class="ident" id="6421017">xmlns</span>&nbsp;<span class="op" id="6421023">!=</span>&nbsp;<span class="string" id="6421026">&#34;&#34;</span>&nbsp;<span class="op" id="6421029">&amp;&amp;</span>&nbsp;<span class="ident" id="6421032">finfo</span><span class="op" id="6421037">.</span><span class="ident" id="6421038">xmlns</span>&nbsp;<span class="op" id="6421044">!=</span>&nbsp;<span class="ident" id="6421047">start</span><span class="op" id="6421052">.</span><span class="ident" id="6421053">Name</span><span class="op" id="6421057">.</span><span class="ident" id="6421058">Space</span>&nbsp;<span class="op" id="6421064">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421069">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421080">}</span><br>
<span class="lineno">620</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421084">for</span>&nbsp;<span class="ident" id="6421088">j</span>&nbsp;<span class="op" id="6421090">:=</span>&nbsp;<span class="keyword" id="6421093">range</span>&nbsp;<span class="ident" id="6421099">parents</span>&nbsp;<span class="op" id="6421107">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421112">if</span>&nbsp;<span class="ident" id="6421115">parents</span><span class="op" id="6421122">[</span><span class="ident" id="6421123">j</span><span class="op" id="6421124">]</span>&nbsp;<span class="op" id="6421126">!=</span>&nbsp;<span class="ident" id="6421129">finfo</span><span class="op" id="6421134">.</span><span class="ident" id="6421135">parents</span><span class="op" id="6421142">[</span><span class="ident" id="6421143">j</span><span class="op" id="6421144">]</span>&nbsp;<span class="op" id="6421146">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421152">continue</span>&nbsp;<span class="ident" id="6421161">Loop</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421169">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421173">}</span><br>
<span class="lineno">625</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421177">if</span>&nbsp;<span class="builtinfunc" id="6421180">len</span><span class="op" id="6421183">(</span><span class="ident" id="6421184">finfo</span><span class="op" id="6421189">.</span><span class="ident" id="6421190">parents</span><span class="op" id="6421197">)</span>&nbsp;<span class="op" id="6421199">==</span>&nbsp;<span class="builtinfunc" id="6421202">len</span><span class="op" id="6421205">(</span><span class="ident" id="6421206">parents</span><span class="op" id="6421213">)</span>&nbsp;<span class="op" id="6421215">&amp;&amp;</span>&nbsp;<span class="ident" id="6421218">finfo</span><span class="op" id="6421223">.</span><span class="ident" id="6421224">name</span>&nbsp;<span class="op" id="6421229">==</span>&nbsp;<span class="ident" id="6421232">start</span><span class="op" id="6421237">.</span><span class="ident" id="6421238">Name</span><span class="op" id="6421242">.</span><span class="ident" id="6421243">Local</span>&nbsp;<span class="op" id="6421249">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421254">//&nbsp;It&#39;s&nbsp;a&nbsp;perfect&nbsp;match,&nbsp;unmarshal&nbsp;the&nbsp;field.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421303">return</span>&nbsp;<span class="builtintype" id="6421310">true</span><span class="op" id="6421314">,</span>&nbsp;<span class="ident" id="6421316">p</span><span class="op" id="6421317">.</span><span class="ident" id="6421318">unmarshal</span><span class="op" id="6421327">(</span><span class="ident" id="6421328">finfo</span><span class="op" id="6421333">.</span><span class="ident" id="6421334">value</span><span class="op" id="6421339">(</span><span class="ident" id="6421340">sv</span><span class="op" id="6421342">)</span><span class="op" id="6421343">,</span>&nbsp;<span class="ident" id="6421345">start</span><span class="op" id="6421350">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421354">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421358">if</span>&nbsp;<span class="builtinfunc" id="6421361">len</span><span class="op" id="6421364">(</span><span class="ident" id="6421365">finfo</span><span class="op" id="6421370">.</span><span class="ident" id="6421371">parents</span><span class="op" id="6421378">)</span>&nbsp;<span class="op" id="6421380">&gt;</span>&nbsp;<span class="builtinfunc" id="6421382">len</span><span class="op" id="6421385">(</span><span class="ident" id="6421386">parents</span><span class="op" id="6421393">)</span>&nbsp;<span class="op" id="6421395">&amp;&amp;</span>&nbsp;<span class="ident" id="6421398">finfo</span><span class="op" id="6421403">.</span><span class="ident" id="6421404">parents</span><span class="op" id="6421411">[</span><span class="builtinfunc" id="6421412">len</span><span class="op" id="6421415">(</span><span class="ident" id="6421416">parents</span><span class="op" id="6421423">)</span><span class="op" id="6421424">]</span>&nbsp;<span class="op" id="6421426">==</span>&nbsp;<span class="ident" id="6421429">start</span><span class="op" id="6421434">.</span><span class="ident" id="6421435">Name</span><span class="op" id="6421439">.</span><span class="ident" id="6421440">Local</span>&nbsp;<span class="op" id="6421446">{</span><br>
<span class="lineno">630</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421451">//&nbsp;It&#39;s&nbsp;a&nbsp;prefix&nbsp;for&nbsp;the&nbsp;field.&nbsp;Break&nbsp;and&nbsp;recurse</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421504">//&nbsp;since&nbsp;it&#39;s&nbsp;not&nbsp;ok&nbsp;for&nbsp;one&nbsp;field&nbsp;path&nbsp;to&nbsp;be&nbsp;itself</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421560">//&nbsp;the&nbsp;prefix&nbsp;for&nbsp;another&nbsp;field&nbsp;path.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6421601">recurse</span>&nbsp;<span class="op" id="6421609">=</span>&nbsp;<span class="builtintype" id="6421611">true</span><br>
<span class="lineno"></span><br>
<span class="lineno">635</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421620">//&nbsp;We&nbsp;can&nbsp;reuse&nbsp;the&nbsp;same&nbsp;slice&nbsp;as&nbsp;long&nbsp;as&nbsp;we</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421668">//&nbsp;don&#39;t&nbsp;try&nbsp;to&nbsp;append&nbsp;to&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6421701">parents</span>&nbsp;<span class="op" id="6421709">=</span>&nbsp;<span class="ident" id="6421711">finfo</span><span class="op" id="6421716">.</span><span class="ident" id="6421717">parents</span><span class="op" id="6421724">[</span><span class="op" id="6421725">:</span><span class="builtinfunc" id="6421726">len</span><span class="op" id="6421729">(</span><span class="ident" id="6421730">parents</span><span class="op" id="6421737">)</span><span class="op" id="6421738">+</span><span class="num" id="6421739">1</span><span class="op" id="6421740">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421745">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421753">}</span><br>
<span class="lineno">640</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421756">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421759">if</span>&nbsp;<span class="op" id="6421762">!</span><span class="ident" id="6421763">recurse</span>&nbsp;<span class="op" id="6421771">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421775">//&nbsp;We&nbsp;have&nbsp;no&nbsp;business&nbsp;with&nbsp;this&nbsp;element.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6421819">return</span>&nbsp;<span class="builtintype" id="6421826">false</span><span class="op" id="6421831">,</span>&nbsp;<span class="ident" id="6421833">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6421838">}</span><br>
<span class="lineno">645</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421841">//&nbsp;The&nbsp;element&nbsp;is&nbsp;not&nbsp;a&nbsp;perfect&nbsp;match&nbsp;for&nbsp;any&nbsp;field,&nbsp;but&nbsp;one</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421903">//&nbsp;or&nbsp;more&nbsp;fields&nbsp;have&nbsp;the&nbsp;path&nbsp;to&nbsp;this&nbsp;element&nbsp;as&nbsp;a&nbsp;parent</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="6421964">//&nbsp;prefix.&nbsp;Recurse&nbsp;and&nbsp;attempt&nbsp;to&nbsp;match&nbsp;these.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422012">for</span>&nbsp;<span class="op" id="6422016">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422020">var</span>&nbsp;<span class="ident" id="6422024">tok</span>&nbsp;<span class="ident" id="6422028">Token</span><br>
<span class="lineno">650</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6422036">tok</span><span class="op" id="6422039">,</span>&nbsp;<span class="ident" id="6422041">err</span>&nbsp;<span class="op" id="6422045">=</span>&nbsp;<span class="ident" id="6422047">p</span><span class="op" id="6422048">.</span><span class="ident" id="6422049">Token</span><span class="op" id="6422054">(</span><span class="op" id="6422055">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422059">if</span>&nbsp;<span class="ident" id="6422062">err</span>&nbsp;<span class="op" id="6422066">!=</span>&nbsp;<span class="ident" id="6422069">nil</span>&nbsp;<span class="op" id="6422073">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422078">return</span>&nbsp;<span class="builtintype" id="6422085">true</span><span class="op" id="6422089">,</span>&nbsp;<span class="ident" id="6422091">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422097">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422101">switch</span>&nbsp;<span class="ident" id="6422108">t</span>&nbsp;<span class="op" id="6422110">:=</span>&nbsp;<span class="ident" id="6422113">tok</span><span class="op" id="6422116">.</span><span class="op" id="6422117">(</span><span class="keyword" id="6422118">type</span><span class="op" id="6422122">)</span>&nbsp;<span class="op" id="6422124">{</span><br>
<span class="lineno">655</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422128">case</span>&nbsp;<span class="ident" id="6422133">StartElement</span><span class="op" id="6422145">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6422150">consumed2</span><span class="op" id="6422159">,</span>&nbsp;<span class="ident" id="6422161">err</span>&nbsp;<span class="op" id="6422165">:=</span>&nbsp;<span class="ident" id="6422168">p</span><span class="op" id="6422169">.</span><span class="ident" id="6422170">unmarshalPath</span><span class="op" id="6422183">(</span><span class="ident" id="6422184">tinfo</span><span class="op" id="6422189">,</span>&nbsp;<span class="ident" id="6422191">sv</span><span class="op" id="6422193">,</span>&nbsp;<span class="ident" id="6422195">parents</span><span class="op" id="6422202">,</span>&nbsp;<span class="op" id="6422204">&amp;</span><span class="ident" id="6422205">t</span><span class="op" id="6422206">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422211">if</span>&nbsp;<span class="ident" id="6422214">err</span>&nbsp;<span class="op" id="6422218">!=</span>&nbsp;<span class="ident" id="6422221">nil</span>&nbsp;<span class="op" id="6422225">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422231">return</span>&nbsp;<span class="builtintype" id="6422238">true</span><span class="op" id="6422242">,</span>&nbsp;<span class="ident" id="6422244">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422251">}</span><br>
<span class="lineno">660</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422256">if</span>&nbsp;<span class="op" id="6422259">!</span><span class="ident" id="6422260">consumed2</span>&nbsp;<span class="op" id="6422270">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422276">if</span>&nbsp;<span class="ident" id="6422279">err</span>&nbsp;<span class="op" id="6422283">:=</span>&nbsp;<span class="ident" id="6422286">p</span><span class="op" id="6422287">.</span><span class="ident" id="6422288">Skip</span><span class="op" id="6422292">(</span><span class="op" id="6422293">)</span><span class="op" id="6422294">;</span>&nbsp;<span class="ident" id="6422296">err</span>&nbsp;<span class="op" id="6422300">!=</span>&nbsp;<span class="ident" id="6422303">nil</span>&nbsp;<span class="op" id="6422307">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422314">return</span>&nbsp;<span class="builtintype" id="6422321">true</span><span class="op" id="6422325">,</span>&nbsp;<span class="ident" id="6422327">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422335">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422340">}</span><br>
<span class="lineno">665</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422344">case</span>&nbsp;<span class="ident" id="6422349">EndElement</span><span class="op" id="6422359">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422364">return</span>&nbsp;<span class="builtintype" id="6422371">true</span><span class="op" id="6422375">,</span>&nbsp;<span class="ident" id="6422377">nil</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422383">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422386">}</span><br>
<span class="lineno"></span><span class="op" id="6422388">}</span><br>
<span class="lineno">670</span><br>
<span class="lineno"></span><span class="comment" id="6422391">//&nbsp;Skip&nbsp;reads&nbsp;tokens&nbsp;until&nbsp;it&nbsp;has&nbsp;consumed&nbsp;the&nbsp;end&nbsp;element</span><br>
<span class="lineno"></span><span class="comment" id="6422450">//&nbsp;matching&nbsp;the&nbsp;most&nbsp;recent&nbsp;start&nbsp;element&nbsp;already&nbsp;consumed.</span><br>
<span class="lineno"></span><span class="comment" id="6422510">//&nbsp;It&nbsp;recurs&nbsp;if&nbsp;it&nbsp;encounters&nbsp;a&nbsp;start&nbsp;element,&nbsp;so&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;to</span><br>
<span class="lineno"></span><span class="comment" id="6422578">//&nbsp;skip&nbsp;nested&nbsp;structures.</span><br>
<span class="lineno">675</span><span class="comment" id="6422605">//&nbsp;It&nbsp;returns&nbsp;nil&nbsp;if&nbsp;it&nbsp;finds&nbsp;an&nbsp;end&nbsp;element&nbsp;matching&nbsp;the&nbsp;start</span><br>
<span class="lineno"></span><span class="comment" id="6422669">//&nbsp;element;&nbsp;otherwise&nbsp;it&nbsp;returns&nbsp;an&nbsp;error&nbsp;describing&nbsp;the&nbsp;problem.</span><br>
<span class="lineno"></span><span class="keyword" id="6422735">func</span>&nbsp;<span class="op" id="6422740">(</span><span class="ident" id="6422741">d</span>&nbsp;<span class="op" id="6422743">*</span><span class="ident" id="6422744">Decoder</span><span class="op" id="6422751">)</span>&nbsp;<span class="ident" id="6422753">Skip</span><span class="op" id="6422757">(</span><span class="op" id="6422758">)</span>&nbsp;<span class="builtintype" id="6422760">error</span>&nbsp;<span class="op" id="6422766">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422769">for</span>&nbsp;<span class="op" id="6422773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="6422777">tok</span><span class="op" id="6422780">,</span>&nbsp;<span class="ident" id="6422782">err</span>&nbsp;<span class="op" id="6422786">:=</span>&nbsp;<span class="ident" id="6422789">d</span><span class="op" id="6422790">.</span><span class="ident" id="6422791">Token</span><span class="op" id="6422796">(</span><span class="op" id="6422797">)</span><br>
<span class="lineno">680</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422801">if</span>&nbsp;<span class="ident" id="6422804">err</span>&nbsp;<span class="op" id="6422808">!=</span>&nbsp;<span class="ident" id="6422811">nil</span>&nbsp;<span class="op" id="6422815">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422820">return</span>&nbsp;<span class="ident" id="6422827">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422833">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422837">switch</span>&nbsp;<span class="ident" id="6422844">tok</span><span class="op" id="6422847">.</span><span class="op" id="6422848">(</span><span class="keyword" id="6422849">type</span><span class="op" id="6422853">)</span>&nbsp;<span class="op" id="6422855">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422859">case</span>&nbsp;<span class="ident" id="6422864">StartElement</span><span class="op" id="6422876">:</span><br>
<span class="lineno">685</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422881">if</span>&nbsp;<span class="ident" id="6422884">err</span>&nbsp;<span class="op" id="6422888">:=</span>&nbsp;<span class="ident" id="6422891">d</span><span class="op" id="6422892">.</span><span class="ident" id="6422893">Skip</span><span class="op" id="6422897">(</span><span class="op" id="6422898">)</span><span class="op" id="6422899">;</span>&nbsp;<span class="ident" id="6422901">err</span>&nbsp;<span class="op" id="6422905">!=</span>&nbsp;<span class="ident" id="6422908">nil</span>&nbsp;<span class="op" id="6422912">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422918">return</span>&nbsp;<span class="ident" id="6422925">err</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422932">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422936">case</span>&nbsp;<span class="ident" id="6422941">EndElement</span><span class="op" id="6422951">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="6422956">return</span>&nbsp;<span class="ident" id="6422963">nil</span><br>
<span class="lineno">690</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422969">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="6422972">}</span><br>
<span class="lineno"></span><span class="op" id="6422974">}</span>
</div>
</body>
</html>
