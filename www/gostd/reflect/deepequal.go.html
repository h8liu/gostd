<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>reflect</h2>
<ul>
<li><a href="/gostd/reflect/all_test.go.html">all_test.go</a></li>
<li><a href="/gostd/reflect/deepequal.go.html" class="current">deepequal.go</a></li>
<li><a href="/gostd/reflect/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/reflect/export_test.go.html">export_test.go</a></li>
<li><a href="/gostd/reflect/makefunc.go.html">makefunc.go</a></li>
<li><a href="/gostd/reflect/set_test.go.html">set_test.go</a></li>
<li><a href="/gostd/reflect/tostring_test.go.html">tostring_test.go</a></li>
<li><a href="/gostd/reflect/type.go.html">type.go</a></li>
<li><a href="/gostd/reflect/value.go.html">value.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="2807447">//&nbsp;Copyright&nbsp;2009&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="2807502">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="2807556">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="comment" id="2807607">//&nbsp;Deep&nbsp;equality&nbsp;test&nbsp;via&nbsp;reflection</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="2807645">package</span>&nbsp;<span class="ident" id="2807653">reflect</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807662">//&nbsp;During&nbsp;deepValueEqual,&nbsp;must&nbsp;keep&nbsp;track&nbsp;of&nbsp;checks&nbsp;that&nbsp;are</span><br>
<span class="lineno">10</span><span class="comment" id="2807723">//&nbsp;in&nbsp;progress.&nbsp;&nbsp;The&nbsp;comparison&nbsp;algorithm&nbsp;assumes&nbsp;that&nbsp;all</span><br>
<span class="lineno"></span><span class="comment" id="2807782">//&nbsp;checks&nbsp;in&nbsp;progress&nbsp;are&nbsp;true&nbsp;when&nbsp;it&nbsp;reencounters&nbsp;them.</span><br>
<span class="lineno"></span><span class="comment" id="2807840">//&nbsp;Visited&nbsp;comparisons&nbsp;are&nbsp;stored&nbsp;in&nbsp;a&nbsp;map&nbsp;indexed&nbsp;by&nbsp;visit.</span><br>
<span class="lineno"></span><span class="keyword" id="2807901">type</span>&nbsp;<span class="ident" id="2807906">visit</span>&nbsp;<span class="keyword" id="2807912">struct</span>&nbsp;<span class="op" id="2807919">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2807922">a1</span>&nbsp;&nbsp;<span class="builtintype" id="2807926">uintptr</span><br>
<span class="lineno">15</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2807935">a2</span>&nbsp;&nbsp;<span class="builtintype" id="2807939">uintptr</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2807948">typ</span>&nbsp;<span class="ident" id="2807952">Type</span><br>
<span class="lineno"></span><span class="op" id="2807957">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2807960">//&nbsp;Tests&nbsp;for&nbsp;deep&nbsp;equality&nbsp;using&nbsp;reflected&nbsp;types.&nbsp;The&nbsp;map&nbsp;argument&nbsp;tracks</span><br>
<span class="lineno">20</span><span class="comment" id="2808034">//&nbsp;comparisons&nbsp;that&nbsp;have&nbsp;already&nbsp;been&nbsp;seen,&nbsp;which&nbsp;allows&nbsp;short&nbsp;circuiting&nbsp;on</span><br>
<span class="lineno"></span><span class="comment" id="2808111">//&nbsp;recursive&nbsp;types.</span><br>
<span class="lineno"></span><span class="keyword" id="2808131">func</span>&nbsp;<span class="ident" id="2808136">deepValueEqual</span><span class="op" id="2808150">(</span><span class="ident" id="2808151">v1</span><span class="op" id="2808153">,</span>&nbsp;<span class="ident" id="2808155">v2</span>&nbsp;<span class="ident" id="2808158">Value</span><span class="op" id="2808163">,</span>&nbsp;<span class="ident" id="2808165">visited</span>&nbsp;<span class="keyword" id="2808173">map</span><span class="op" id="2808176">[</span><span class="ident" id="2808177">visit</span><span class="op" id="2808182">]</span><span class="builtintype" id="2808183">bool</span><span class="op" id="2808187">,</span>&nbsp;<span class="ident" id="2808189">depth</span>&nbsp;<span class="builtintype" id="2808195">int</span><span class="op" id="2808198">)</span>&nbsp;<span class="builtintype" id="2808200">bool</span>&nbsp;<span class="op" id="2808205">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808208">if</span>&nbsp;<span class="op" id="2808211">!</span><span class="ident" id="2808212">v1</span><span class="op" id="2808214">.</span><span class="ident" id="2808215">IsValid</span><span class="op" id="2808222">(</span><span class="op" id="2808223">)</span>&nbsp;<span class="op" id="2808225">||</span>&nbsp;<span class="op" id="2808228">!</span><span class="ident" id="2808229">v2</span><span class="op" id="2808231">.</span><span class="ident" id="2808232">IsValid</span><span class="op" id="2808239">(</span><span class="op" id="2808240">)</span>&nbsp;<span class="op" id="2808242">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808246">return</span>&nbsp;<span class="ident" id="2808253">v1</span><span class="op" id="2808255">.</span><span class="ident" id="2808256">IsValid</span><span class="op" id="2808263">(</span><span class="op" id="2808264">)</span>&nbsp;<span class="op" id="2808266">==</span>&nbsp;<span class="ident" id="2808269">v2</span><span class="op" id="2808271">.</span><span class="ident" id="2808272">IsValid</span><span class="op" id="2808279">(</span><span class="op" id="2808280">)</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808283">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808286">if</span>&nbsp;<span class="ident" id="2808289">v1</span><span class="op" id="2808291">.</span><span class="ident" id="2808292">Type</span><span class="op" id="2808296">(</span><span class="op" id="2808297">)</span>&nbsp;<span class="op" id="2808299">!=</span>&nbsp;<span class="ident" id="2808302">v2</span><span class="op" id="2808304">.</span><span class="ident" id="2808305">Type</span><span class="op" id="2808309">(</span><span class="op" id="2808310">)</span>&nbsp;<span class="op" id="2808312">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808316">return</span>&nbsp;<span class="builtintype" id="2808323">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808330">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2808334">//&nbsp;if&nbsp;depth&nbsp;&gt;&nbsp;10&nbsp;{&nbsp;panic(&#34;deepValueEqual&#34;)&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;for&nbsp;debugging</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808397">hard</span>&nbsp;<span class="op" id="2808402">:=</span>&nbsp;<span class="keyword" id="2808405">func</span><span class="op" id="2808409">(</span><span class="ident" id="2808410">k</span>&nbsp;<span class="ident" id="2808412">Kind</span><span class="op" id="2808416">)</span>&nbsp;<span class="builtintype" id="2808418">bool</span>&nbsp;<span class="op" id="2808423">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808427">switch</span>&nbsp;<span class="ident" id="2808434">k</span>&nbsp;<span class="op" id="2808436">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808440">case</span>&nbsp;<span class="ident" id="2808445">Array</span><span class="op" id="2808450">,</span>&nbsp;<span class="ident" id="2808452">Map</span><span class="op" id="2808455">,</span>&nbsp;<span class="ident" id="2808457">Slice</span><span class="op" id="2808462">,</span>&nbsp;<span class="ident" id="2808464">Struct</span><span class="op" id="2808470">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808475">return</span>&nbsp;<span class="builtintype" id="2808482">true</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808489">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808493">return</span>&nbsp;<span class="builtintype" id="2808500">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808507">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808511">if</span>&nbsp;<span class="ident" id="2808514">v1</span><span class="op" id="2808516">.</span><span class="ident" id="2808517">CanAddr</span><span class="op" id="2808524">(</span><span class="op" id="2808525">)</span>&nbsp;<span class="op" id="2808527">&amp;&amp;</span>&nbsp;<span class="ident" id="2808530">v2</span><span class="op" id="2808532">.</span><span class="ident" id="2808533">CanAddr</span><span class="op" id="2808540">(</span><span class="op" id="2808541">)</span>&nbsp;<span class="op" id="2808543">&amp;&amp;</span>&nbsp;<span class="ident" id="2808546">hard</span><span class="op" id="2808550">(</span><span class="ident" id="2808551">v1</span><span class="op" id="2808553">.</span><span class="ident" id="2808554">Kind</span><span class="op" id="2808558">(</span><span class="op" id="2808559">)</span><span class="op" id="2808560">)</span>&nbsp;<span class="op" id="2808562">{</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808566">addr1</span>&nbsp;<span class="op" id="2808572">:=</span>&nbsp;<span class="ident" id="2808575">v1</span><span class="op" id="2808577">.</span><span class="ident" id="2808578">UnsafeAddr</span><span class="op" id="2808588">(</span><span class="op" id="2808589">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808593">addr2</span>&nbsp;<span class="op" id="2808599">:=</span>&nbsp;<span class="ident" id="2808602">v2</span><span class="op" id="2808604">.</span><span class="ident" id="2808605">UnsafeAddr</span><span class="op" id="2808615">(</span><span class="op" id="2808616">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808620">if</span>&nbsp;<span class="ident" id="2808623">addr1</span>&nbsp;<span class="op" id="2808629">&gt;</span>&nbsp;<span class="ident" id="2808631">addr2</span>&nbsp;<span class="op" id="2808637">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2808642">//&nbsp;Canonicalize&nbsp;order&nbsp;to&nbsp;reduce&nbsp;number&nbsp;of&nbsp;entries&nbsp;in&nbsp;visited.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808707">addr1</span><span class="op" id="2808712">,</span>&nbsp;<span class="ident" id="2808714">addr2</span>&nbsp;<span class="op" id="2808720">=</span>&nbsp;<span class="ident" id="2808722">addr2</span><span class="op" id="2808727">,</span>&nbsp;<span class="ident" id="2808729">addr1</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808737">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2808742">//&nbsp;Short&nbsp;circuit&nbsp;if&nbsp;references&nbsp;are&nbsp;identical&nbsp;...</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808793">if</span>&nbsp;<span class="ident" id="2808796">addr1</span>&nbsp;<span class="op" id="2808802">==</span>&nbsp;<span class="ident" id="2808805">addr2</span>&nbsp;<span class="op" id="2808811">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808816">return</span>&nbsp;<span class="builtintype" id="2808823">true</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808830">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2808835">//&nbsp;...&nbsp;or&nbsp;already&nbsp;seen</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808860">typ</span>&nbsp;<span class="op" id="2808864">:=</span>&nbsp;<span class="ident" id="2808867">v1</span><span class="op" id="2808869">.</span><span class="ident" id="2808870">Type</span><span class="op" id="2808874">(</span><span class="op" id="2808875">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808879">v</span>&nbsp;<span class="op" id="2808881">:=</span>&nbsp;<span class="ident" id="2808884">visit</span><span class="op" id="2808889">{</span><span class="ident" id="2808890">addr1</span><span class="op" id="2808895">,</span>&nbsp;<span class="ident" id="2808897">addr2</span><span class="op" id="2808902">,</span>&nbsp;<span class="ident" id="2808904">typ</span><span class="op" id="2808907">}</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808911">if</span>&nbsp;<span class="ident" id="2808914">visited</span><span class="op" id="2808921">[</span><span class="ident" id="2808922">v</span><span class="op" id="2808923">]</span>&nbsp;<span class="op" id="2808925">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808930">return</span>&nbsp;<span class="builtintype" id="2808937">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808944">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2808949">//&nbsp;Remember&nbsp;for&nbsp;later.</span><br>
<span class="lineno">60</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2808974">visited</span><span class="op" id="2808981">[</span><span class="ident" id="2808982">v</span><span class="op" id="2808983">]</span>&nbsp;<span class="op" id="2808985">=</span>&nbsp;<span class="builtintype" id="2808987">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2808993">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2808997">switch</span>&nbsp;<span class="ident" id="2809004">v1</span><span class="op" id="2809006">.</span><span class="ident" id="2809007">Kind</span><span class="op" id="2809011">(</span><span class="op" id="2809012">)</span>&nbsp;<span class="op" id="2809014">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809017">case</span>&nbsp;<span class="ident" id="2809022">Array</span><span class="op" id="2809027">:</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809031">for</span>&nbsp;<span class="ident" id="2809035">i</span>&nbsp;<span class="op" id="2809037">:=</span>&nbsp;<span class="num" id="2809040">0</span><span class="op" id="2809041">;</span>&nbsp;<span class="ident" id="2809043">i</span>&nbsp;<span class="op" id="2809045">&lt;</span>&nbsp;<span class="ident" id="2809047">v1</span><span class="op" id="2809049">.</span><span class="ident" id="2809050">Len</span><span class="op" id="2809053">(</span><span class="op" id="2809054">)</span><span class="op" id="2809055">;</span>&nbsp;<span class="ident" id="2809057">i</span><span class="op" id="2809058">++</span>&nbsp;<span class="op" id="2809061">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809066">if</span>&nbsp;<span class="op" id="2809069">!</span><span class="ident" id="2809070">deepValueEqual</span><span class="op" id="2809084">(</span><span class="ident" id="2809085">v1</span><span class="op" id="2809087">.</span><span class="ident" id="2809088">Index</span><span class="op" id="2809093">(</span><span class="ident" id="2809094">i</span><span class="op" id="2809095">)</span><span class="op" id="2809096">,</span>&nbsp;<span class="ident" id="2809098">v2</span><span class="op" id="2809100">.</span><span class="ident" id="2809101">Index</span><span class="op" id="2809106">(</span><span class="ident" id="2809107">i</span><span class="op" id="2809108">)</span><span class="op" id="2809109">,</span>&nbsp;<span class="ident" id="2809111">visited</span><span class="op" id="2809118">,</span>&nbsp;<span class="ident" id="2809120">depth</span><span class="op" id="2809125">+</span><span class="num" id="2809126">1</span><span class="op" id="2809127">)</span>&nbsp;<span class="op" id="2809129">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809135">return</span>&nbsp;<span class="builtintype" id="2809142">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809151">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809155">}</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809159">return</span>&nbsp;<span class="builtintype" id="2809166">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809172">case</span>&nbsp;<span class="ident" id="2809177">Slice</span><span class="op" id="2809182">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809186">if</span>&nbsp;<span class="ident" id="2809189">v1</span><span class="op" id="2809191">.</span><span class="ident" id="2809192">IsNil</span><span class="op" id="2809197">(</span><span class="op" id="2809198">)</span>&nbsp;<span class="op" id="2809200">!=</span>&nbsp;<span class="ident" id="2809203">v2</span><span class="op" id="2809205">.</span><span class="ident" id="2809206">IsNil</span><span class="op" id="2809211">(</span><span class="op" id="2809212">)</span>&nbsp;<span class="op" id="2809214">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809219">return</span>&nbsp;<span class="builtintype" id="2809226">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809234">}</span><br>
<span class="lineno">75</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809238">if</span>&nbsp;<span class="ident" id="2809241">v1</span><span class="op" id="2809243">.</span><span class="ident" id="2809244">Len</span><span class="op" id="2809247">(</span><span class="op" id="2809248">)</span>&nbsp;<span class="op" id="2809250">!=</span>&nbsp;<span class="ident" id="2809253">v2</span><span class="op" id="2809255">.</span><span class="ident" id="2809256">Len</span><span class="op" id="2809259">(</span><span class="op" id="2809260">)</span>&nbsp;<span class="op" id="2809262">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809267">return</span>&nbsp;<span class="builtintype" id="2809274">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809282">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809286">if</span>&nbsp;<span class="ident" id="2809289">v1</span><span class="op" id="2809291">.</span><span class="ident" id="2809292">Pointer</span><span class="op" id="2809299">(</span><span class="op" id="2809300">)</span>&nbsp;<span class="op" id="2809302">==</span>&nbsp;<span class="ident" id="2809305">v2</span><span class="op" id="2809307">.</span><span class="ident" id="2809308">Pointer</span><span class="op" id="2809315">(</span><span class="op" id="2809316">)</span>&nbsp;<span class="op" id="2809318">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809323">return</span>&nbsp;<span class="builtintype" id="2809330">true</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809337">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809341">for</span>&nbsp;<span class="ident" id="2809345">i</span>&nbsp;<span class="op" id="2809347">:=</span>&nbsp;<span class="num" id="2809350">0</span><span class="op" id="2809351">;</span>&nbsp;<span class="ident" id="2809353">i</span>&nbsp;<span class="op" id="2809355">&lt;</span>&nbsp;<span class="ident" id="2809357">v1</span><span class="op" id="2809359">.</span><span class="ident" id="2809360">Len</span><span class="op" id="2809363">(</span><span class="op" id="2809364">)</span><span class="op" id="2809365">;</span>&nbsp;<span class="ident" id="2809367">i</span><span class="op" id="2809368">++</span>&nbsp;<span class="op" id="2809371">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809376">if</span>&nbsp;<span class="op" id="2809379">!</span><span class="ident" id="2809380">deepValueEqual</span><span class="op" id="2809394">(</span><span class="ident" id="2809395">v1</span><span class="op" id="2809397">.</span><span class="ident" id="2809398">Index</span><span class="op" id="2809403">(</span><span class="ident" id="2809404">i</span><span class="op" id="2809405">)</span><span class="op" id="2809406">,</span>&nbsp;<span class="ident" id="2809408">v2</span><span class="op" id="2809410">.</span><span class="ident" id="2809411">Index</span><span class="op" id="2809416">(</span><span class="ident" id="2809417">i</span><span class="op" id="2809418">)</span><span class="op" id="2809419">,</span>&nbsp;<span class="ident" id="2809421">visited</span><span class="op" id="2809428">,</span>&nbsp;<span class="ident" id="2809430">depth</span><span class="op" id="2809435">+</span><span class="num" id="2809436">1</span><span class="op" id="2809437">)</span>&nbsp;<span class="op" id="2809439">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809445">return</span>&nbsp;<span class="builtintype" id="2809452">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809461">}</span><br>
<span class="lineno">85</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809465">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809469">return</span>&nbsp;<span class="builtintype" id="2809476">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809482">case</span>&nbsp;<span class="ident" id="2809487">Interface</span><span class="op" id="2809496">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809500">if</span>&nbsp;<span class="ident" id="2809503">v1</span><span class="op" id="2809505">.</span><span class="ident" id="2809506">IsNil</span><span class="op" id="2809511">(</span><span class="op" id="2809512">)</span>&nbsp;<span class="op" id="2809514">||</span>&nbsp;<span class="ident" id="2809517">v2</span><span class="op" id="2809519">.</span><span class="ident" id="2809520">IsNil</span><span class="op" id="2809525">(</span><span class="op" id="2809526">)</span>&nbsp;<span class="op" id="2809528">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809533">return</span>&nbsp;<span class="ident" id="2809540">v1</span><span class="op" id="2809542">.</span><span class="ident" id="2809543">IsNil</span><span class="op" id="2809548">(</span><span class="op" id="2809549">)</span>&nbsp;<span class="op" id="2809551">==</span>&nbsp;<span class="ident" id="2809554">v2</span><span class="op" id="2809556">.</span><span class="ident" id="2809557">IsNil</span><span class="op" id="2809562">(</span><span class="op" id="2809563">)</span><br>
<span class="lineno">90</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809567">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809571">return</span>&nbsp;<span class="ident" id="2809578">deepValueEqual</span><span class="op" id="2809592">(</span><span class="ident" id="2809593">v1</span><span class="op" id="2809595">.</span><span class="ident" id="2809596">Elem</span><span class="op" id="2809600">(</span><span class="op" id="2809601">)</span><span class="op" id="2809602">,</span>&nbsp;<span class="ident" id="2809604">v2</span><span class="op" id="2809606">.</span><span class="ident" id="2809607">Elem</span><span class="op" id="2809611">(</span><span class="op" id="2809612">)</span><span class="op" id="2809613">,</span>&nbsp;<span class="ident" id="2809615">visited</span><span class="op" id="2809622">,</span>&nbsp;<span class="ident" id="2809624">depth</span><span class="op" id="2809629">+</span><span class="num" id="2809630">1</span><span class="op" id="2809631">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809634">case</span>&nbsp;<span class="ident" id="2809639">Ptr</span><span class="op" id="2809642">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809646">return</span>&nbsp;<span class="ident" id="2809653">deepValueEqual</span><span class="op" id="2809667">(</span><span class="ident" id="2809668">v1</span><span class="op" id="2809670">.</span><span class="ident" id="2809671">Elem</span><span class="op" id="2809675">(</span><span class="op" id="2809676">)</span><span class="op" id="2809677">,</span>&nbsp;<span class="ident" id="2809679">v2</span><span class="op" id="2809681">.</span><span class="ident" id="2809682">Elem</span><span class="op" id="2809686">(</span><span class="op" id="2809687">)</span><span class="op" id="2809688">,</span>&nbsp;<span class="ident" id="2809690">visited</span><span class="op" id="2809697">,</span>&nbsp;<span class="ident" id="2809699">depth</span><span class="op" id="2809704">+</span><span class="num" id="2809705">1</span><span class="op" id="2809706">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809709">case</span>&nbsp;<span class="ident" id="2809714">Struct</span><span class="op" id="2809720">:</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809724">for</span>&nbsp;<span class="ident" id="2809728">i</span><span class="op" id="2809729">,</span>&nbsp;<span class="ident" id="2809731">n</span>&nbsp;<span class="op" id="2809733">:=</span>&nbsp;<span class="num" id="2809736">0</span><span class="op" id="2809737">,</span>&nbsp;<span class="ident" id="2809739">v1</span><span class="op" id="2809741">.</span><span class="ident" id="2809742">NumField</span><span class="op" id="2809750">(</span><span class="op" id="2809751">)</span><span class="op" id="2809752">;</span>&nbsp;<span class="ident" id="2809754">i</span>&nbsp;<span class="op" id="2809756">&lt;</span>&nbsp;<span class="ident" id="2809758">n</span><span class="op" id="2809759">;</span>&nbsp;<span class="ident" id="2809761">i</span><span class="op" id="2809762">++</span>&nbsp;<span class="op" id="2809765">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809770">if</span>&nbsp;<span class="op" id="2809773">!</span><span class="ident" id="2809774">deepValueEqual</span><span class="op" id="2809788">(</span><span class="ident" id="2809789">v1</span><span class="op" id="2809791">.</span><span class="ident" id="2809792">Field</span><span class="op" id="2809797">(</span><span class="ident" id="2809798">i</span><span class="op" id="2809799">)</span><span class="op" id="2809800">,</span>&nbsp;<span class="ident" id="2809802">v2</span><span class="op" id="2809804">.</span><span class="ident" id="2809805">Field</span><span class="op" id="2809810">(</span><span class="ident" id="2809811">i</span><span class="op" id="2809812">)</span><span class="op" id="2809813">,</span>&nbsp;<span class="ident" id="2809815">visited</span><span class="op" id="2809822">,</span>&nbsp;<span class="ident" id="2809824">depth</span><span class="op" id="2809829">+</span><span class="num" id="2809830">1</span><span class="op" id="2809831">)</span>&nbsp;<span class="op" id="2809833">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809839">return</span>&nbsp;<span class="builtintype" id="2809846">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809855">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809859">}</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809863">return</span>&nbsp;<span class="builtintype" id="2809870">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809876">case</span>&nbsp;<span class="ident" id="2809881">Map</span><span class="op" id="2809884">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809888">if</span>&nbsp;<span class="ident" id="2809891">v1</span><span class="op" id="2809893">.</span><span class="ident" id="2809894">IsNil</span><span class="op" id="2809899">(</span><span class="op" id="2809900">)</span>&nbsp;<span class="op" id="2809902">!=</span>&nbsp;<span class="ident" id="2809905">v2</span><span class="op" id="2809907">.</span><span class="ident" id="2809908">IsNil</span><span class="op" id="2809913">(</span><span class="op" id="2809914">)</span>&nbsp;<span class="op" id="2809916">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809921">return</span>&nbsp;<span class="builtintype" id="2809928">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809936">}</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809940">if</span>&nbsp;<span class="ident" id="2809943">v1</span><span class="op" id="2809945">.</span><span class="ident" id="2809946">Len</span><span class="op" id="2809949">(</span><span class="op" id="2809950">)</span>&nbsp;<span class="op" id="2809952">!=</span>&nbsp;<span class="ident" id="2809955">v2</span><span class="op" id="2809957">.</span><span class="ident" id="2809958">Len</span><span class="op" id="2809961">(</span><span class="op" id="2809962">)</span>&nbsp;<span class="op" id="2809964">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809969">return</span>&nbsp;<span class="builtintype" id="2809976">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2809984">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2809988">if</span>&nbsp;<span class="ident" id="2809991">v1</span><span class="op" id="2809993">.</span><span class="ident" id="2809994">Pointer</span><span class="op" id="2810001">(</span><span class="op" id="2810002">)</span>&nbsp;<span class="op" id="2810004">==</span>&nbsp;<span class="ident" id="2810007">v2</span><span class="op" id="2810009">.</span><span class="ident" id="2810010">Pointer</span><span class="op" id="2810017">(</span><span class="op" id="2810018">)</span>&nbsp;<span class="op" id="2810020">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810025">return</span>&nbsp;<span class="builtintype" id="2810032">true</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810039">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810043">for</span>&nbsp;<span class="ident" id="2810047">_</span><span class="op" id="2810048">,</span>&nbsp;<span class="ident" id="2810050">k</span>&nbsp;<span class="op" id="2810052">:=</span>&nbsp;<span class="keyword" id="2810055">range</span>&nbsp;<span class="ident" id="2810061">v1</span><span class="op" id="2810063">.</span><span class="ident" id="2810064">MapKeys</span><span class="op" id="2810071">(</span><span class="op" id="2810072">)</span>&nbsp;<span class="op" id="2810074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810079">if</span>&nbsp;<span class="op" id="2810082">!</span><span class="ident" id="2810083">deepValueEqual</span><span class="op" id="2810097">(</span><span class="ident" id="2810098">v1</span><span class="op" id="2810100">.</span><span class="ident" id="2810101">MapIndex</span><span class="op" id="2810109">(</span><span class="ident" id="2810110">k</span><span class="op" id="2810111">)</span><span class="op" id="2810112">,</span>&nbsp;<span class="ident" id="2810114">v2</span><span class="op" id="2810116">.</span><span class="ident" id="2810117">MapIndex</span><span class="op" id="2810125">(</span><span class="ident" id="2810126">k</span><span class="op" id="2810127">)</span><span class="op" id="2810128">,</span>&nbsp;<span class="ident" id="2810130">visited</span><span class="op" id="2810137">,</span>&nbsp;<span class="ident" id="2810139">depth</span><span class="op" id="2810144">+</span><span class="num" id="2810145">1</span><span class="op" id="2810146">)</span>&nbsp;<span class="op" id="2810148">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810154">return</span>&nbsp;<span class="builtintype" id="2810161">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810170">}</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810174">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810178">return</span>&nbsp;<span class="builtintype" id="2810185">true</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810191">case</span>&nbsp;<span class="ident" id="2810196">Func</span><span class="op" id="2810200">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810204">if</span>&nbsp;<span class="ident" id="2810207">v1</span><span class="op" id="2810209">.</span><span class="ident" id="2810210">IsNil</span><span class="op" id="2810215">(</span><span class="op" id="2810216">)</span>&nbsp;<span class="op" id="2810218">&amp;&amp;</span>&nbsp;<span class="ident" id="2810221">v2</span><span class="op" id="2810223">.</span><span class="ident" id="2810224">IsNil</span><span class="op" id="2810229">(</span><span class="op" id="2810230">)</span>&nbsp;<span class="op" id="2810232">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810237">return</span>&nbsp;<span class="builtintype" id="2810244">true</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810251">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2810255">//&nbsp;Can&#39;t&nbsp;do&nbsp;better&nbsp;than&nbsp;this:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810287">return</span>&nbsp;<span class="builtintype" id="2810294">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810301">default</span><span class="op" id="2810308">:</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="2810312">//&nbsp;Normal&nbsp;equality&nbsp;suffices</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810342">return</span>&nbsp;<span class="ident" id="2810349">valueInterface</span><span class="op" id="2810363">(</span><span class="ident" id="2810364">v1</span><span class="op" id="2810366">,</span>&nbsp;<span class="builtintype" id="2810368">false</span><span class="op" id="2810373">)</span>&nbsp;<span class="op" id="2810375">==</span>&nbsp;<span class="ident" id="2810378">valueInterface</span><span class="op" id="2810392">(</span><span class="ident" id="2810393">v2</span><span class="op" id="2810395">,</span>&nbsp;<span class="builtintype" id="2810397">false</span><span class="op" id="2810402">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810405">}</span><br>
<span class="lineno"></span><span class="op" id="2810407">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="2810410">//&nbsp;DeepEqual&nbsp;tests&nbsp;for&nbsp;deep&nbsp;equality.&nbsp;It&nbsp;uses&nbsp;normal&nbsp;==&nbsp;equality&nbsp;where</span><br>
<span class="lineno">130</span><span class="comment" id="2810481">//&nbsp;possible&nbsp;but&nbsp;will&nbsp;scan&nbsp;elements&nbsp;of&nbsp;arrays,&nbsp;slices,&nbsp;maps,&nbsp;and&nbsp;fields&nbsp;of</span><br>
<span class="lineno"></span><span class="comment" id="2810555">//&nbsp;structs.&nbsp;In&nbsp;maps,&nbsp;keys&nbsp;are&nbsp;compared&nbsp;with&nbsp;==&nbsp;but&nbsp;elements&nbsp;use&nbsp;deep</span><br>
<span class="lineno"></span><span class="comment" id="2810624">//&nbsp;equality.&nbsp;DeepEqual&nbsp;correctly&nbsp;handles&nbsp;recursive&nbsp;types.&nbsp;Functions&nbsp;are&nbsp;equal</span><br>
<span class="lineno"></span><span class="comment" id="2810702">//&nbsp;only&nbsp;if&nbsp;they&nbsp;are&nbsp;both&nbsp;nil.</span><br>
<span class="lineno"></span><span class="comment" id="2810732">//&nbsp;An&nbsp;empty&nbsp;slice&nbsp;is&nbsp;not&nbsp;equal&nbsp;to&nbsp;a&nbsp;nil&nbsp;slice.</span><br>
<span class="lineno">135</span><span class="keyword" id="2810779">func</span>&nbsp;<span class="ident" id="2810784">DeepEqual</span><span class="op" id="2810793">(</span><span class="ident" id="2810794">a1</span><span class="op" id="2810796">,</span>&nbsp;<span class="ident" id="2810798">a2</span>&nbsp;<span class="keyword" id="2810801">interface</span><span class="op" id="2810810">{</span><span class="op" id="2810811">}</span><span class="op" id="2810812">)</span>&nbsp;<span class="builtintype" id="2810814">bool</span>&nbsp;<span class="op" id="2810819">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810822">if</span>&nbsp;<span class="ident" id="2810825">a1</span>&nbsp;<span class="op" id="2810828">==</span>&nbsp;<span class="builtintype" id="2810831">nil</span>&nbsp;<span class="op" id="2810835">||</span>&nbsp;<span class="ident" id="2810838">a2</span>&nbsp;<span class="op" id="2810841">==</span>&nbsp;<span class="builtintype" id="2810844">nil</span>&nbsp;<span class="op" id="2810848">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810852">return</span>&nbsp;<span class="ident" id="2810859">a1</span>&nbsp;<span class="op" id="2810862">==</span>&nbsp;<span class="ident" id="2810865">a2</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810869">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810872">v1</span>&nbsp;<span class="op" id="2810875">:=</span>&nbsp;<span class="ident" id="2810878">ValueOf</span><span class="op" id="2810885">(</span><span class="ident" id="2810886">a1</span><span class="op" id="2810888">)</span><br>
<span class="lineno">140</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="2810891">v2</span>&nbsp;<span class="op" id="2810894">:=</span>&nbsp;<span class="ident" id="2810897">ValueOf</span><span class="op" id="2810904">(</span><span class="ident" id="2810905">a2</span><span class="op" id="2810907">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810910">if</span>&nbsp;<span class="ident" id="2810913">v1</span><span class="op" id="2810915">.</span><span class="ident" id="2810916">Type</span><span class="op" id="2810920">(</span><span class="op" id="2810921">)</span>&nbsp;<span class="op" id="2810923">!=</span>&nbsp;<span class="ident" id="2810926">v2</span><span class="op" id="2810928">.</span><span class="ident" id="2810929">Type</span><span class="op" id="2810933">(</span><span class="op" id="2810934">)</span>&nbsp;<span class="op" id="2810936">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810940">return</span>&nbsp;<span class="builtintype" id="2810947">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="2810954">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="2810957">return</span>&nbsp;<span class="ident" id="2810964">deepValueEqual</span><span class="op" id="2810978">(</span><span class="ident" id="2810979">v1</span><span class="op" id="2810981">,</span>&nbsp;<span class="ident" id="2810983">v2</span><span class="op" id="2810985">,</span>&nbsp;<span class="builtinfunc" id="2810987">make</span><span class="op" id="2810991">(</span><span class="keyword" id="2810992">map</span><span class="op" id="2810995">[</span><span class="ident" id="2810996">visit</span><span class="op" id="2811001">]</span><span class="builtintype" id="2811002">bool</span><span class="op" id="2811006">)</span><span class="op" id="2811007">,</span>&nbsp;<span class="num" id="2811009">0</span><span class="op" id="2811010">)</span><br>
<span class="lineno">145</span><span class="op" id="2811012">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
