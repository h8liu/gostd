<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/gostd.css">
</head>

<body>

<div class="pkgnavi">
<h1><a href="/gostd/index.html">Go Standard Library</a></h1>
<h2>go/ast</h2>
<ul>
<li><a href="/gostd/go/ast/ast.go.html">ast.go</a></li>
<li><a href="/gostd/go/ast/ast_test.go.html">ast_test.go</a></li>
<li><a href="/gostd/go/ast/commentmap.go.html">commentmap.go</a></li>
<li><a href="/gostd/go/ast/commentmap_test.go.html">commentmap_test.go</a></li>
<li><a href="/gostd/go/ast/example_test.go.html">example_test.go</a></li>
<li><a href="/gostd/go/ast/filter.go.html">filter.go</a></li>
<li><a href="/gostd/go/ast/filter_test.go.html">filter_test.go</a></li>
<li><a href="/gostd/go/ast/import.go.html" class="current">import.go</a></li>
<li><a href="/gostd/go/ast/print.go.html">print.go</a></li>
<li><a href="/gostd/go/ast/print_test.go.html">print_test.go</a></li>
<li><a href="/gostd/go/ast/resolve.go.html">resolve.go</a></li>
<li><a href="/gostd/go/ast/scope.go.html">scope.go</a></li>
<li><a href="/gostd/go/ast/walk.go.html">walk.go</a></li>
</ul>
</div>
<div class="code">
<span class="lineno">1</span><span class="comment" id="3242419">//&nbsp;Copyright&nbsp;2011&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3242474">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3242528">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3242579">package</span>&nbsp;<span class="ident" id="3242587">ast</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3242592">import</span>&nbsp;<span class="op" id="3242599">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3242602">&#34;go/token&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3242614">&#34;sort&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="string" id="3242622">&#34;strconv&#34;</span><br>
<span class="lineno"></span><span class="op" id="3242632">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3242635">//&nbsp;SortImports&nbsp;sorts&nbsp;runs&nbsp;of&nbsp;consecutive&nbsp;import&nbsp;lines&nbsp;in&nbsp;import&nbsp;blocks&nbsp;in&nbsp;f.</span><br>
<span class="lineno"></span><span class="comment" id="3242712">//&nbsp;It&nbsp;also&nbsp;removes&nbsp;duplicate&nbsp;imports&nbsp;when&nbsp;it&nbsp;is&nbsp;possible&nbsp;to&nbsp;do&nbsp;so&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno">15</span><span class="keyword" id="3242797">func</span>&nbsp;<span class="ident" id="3242802">SortImports</span><span class="op" id="3242813">(</span><span class="ident" id="3242814">fset</span>&nbsp;<span class="op" id="3242819">*</span><span class="ident" id="3242820">token</span><span class="op" id="3242825">.</span><span class="ident" id="3242826">FileSet</span><span class="op" id="3242833">,</span>&nbsp;<span class="ident" id="3242835">f</span>&nbsp;<span class="op" id="3242837">*</span><span class="ident" id="3242838">File</span><span class="op" id="3242842">)</span>&nbsp;<span class="op" id="3242844">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242847">for</span>&nbsp;<span class="ident" id="3242851">_</span><span class="op" id="3242852">,</span>&nbsp;<span class="ident" id="3242854">d</span>&nbsp;<span class="op" id="3242856">:=</span>&nbsp;<span class="keyword" id="3242859">range</span>&nbsp;<span class="ident" id="3242865">f</span><span class="op" id="3242866">.</span><span class="ident" id="3242867">Decls</span>&nbsp;<span class="op" id="3242873">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3242877">d</span><span class="op" id="3242878">,</span>&nbsp;<span class="ident" id="3242880">ok</span>&nbsp;<span class="op" id="3242883">:=</span>&nbsp;<span class="ident" id="3242886">d</span><span class="op" id="3242887">.</span><span class="op" id="3242888">(</span><span class="op" id="3242889">*</span><span class="ident" id="3242890">GenDecl</span><span class="op" id="3242897">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3242901">if</span>&nbsp;<span class="op" id="3242904">!</span><span class="ident" id="3242905">ok</span>&nbsp;<span class="op" id="3242908">||</span>&nbsp;<span class="ident" id="3242911">d</span><span class="op" id="3242912">.</span><span class="ident" id="3242913">Tok</span>&nbsp;<span class="op" id="3242917">!=</span>&nbsp;<span class="ident" id="3242920">token</span><span class="op" id="3242925">.</span><span class="ident" id="3242926">IMPORT</span>&nbsp;<span class="op" id="3242933">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3242938">//&nbsp;Not&nbsp;an&nbsp;import&nbsp;declaration,&nbsp;so&nbsp;we&#39;re&nbsp;done.</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3242986">//&nbsp;Imports&nbsp;are&nbsp;always&nbsp;first.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243018">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243026">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243031">if</span>&nbsp;<span class="op" id="3243034">!</span><span class="ident" id="3243035">d</span><span class="op" id="3243036">.</span><span class="ident" id="3243037">Lparen</span><span class="op" id="3243043">.</span><span class="ident" id="3243044">IsValid</span><span class="op" id="3243051">(</span><span class="op" id="3243052">)</span>&nbsp;<span class="op" id="3243054">{</span><br>
<span class="lineno">25</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3243059">//&nbsp;Not&nbsp;a&nbsp;block:&nbsp;sorted&nbsp;by&nbsp;default.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243097">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243108">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3243113">//&nbsp;Identify&nbsp;and&nbsp;sort&nbsp;runs&nbsp;of&nbsp;specs&nbsp;on&nbsp;successive&nbsp;lines.</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243171">i</span>&nbsp;<span class="op" id="3243173">:=</span>&nbsp;<span class="num" id="3243176">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243180">specs</span>&nbsp;<span class="op" id="3243186">:=</span>&nbsp;<span class="ident" id="3243189">d</span><span class="op" id="3243190">.</span><span class="ident" id="3243191">Specs</span><span class="op" id="3243196">[</span><span class="op" id="3243197">:</span><span class="num" id="3243198">0</span><span class="op" id="3243199">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243203">for</span>&nbsp;<span class="ident" id="3243207">j</span><span class="op" id="3243208">,</span>&nbsp;<span class="ident" id="3243210">s</span>&nbsp;<span class="op" id="3243212">:=</span>&nbsp;<span class="keyword" id="3243215">range</span>&nbsp;<span class="ident" id="3243221">d</span><span class="op" id="3243222">.</span><span class="ident" id="3243223">Specs</span>&nbsp;<span class="op" id="3243229">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243234">if</span>&nbsp;<span class="ident" id="3243237">j</span>&nbsp;<span class="op" id="3243239">&gt;</span>&nbsp;<span class="ident" id="3243241">i</span>&nbsp;<span class="op" id="3243243">&amp;&amp;</span>&nbsp;<span class="ident" id="3243246">fset</span><span class="op" id="3243250">.</span><span class="ident" id="3243251">Position</span><span class="op" id="3243259">(</span><span class="ident" id="3243260">s</span><span class="op" id="3243261">.</span><span class="ident" id="3243262">Pos</span><span class="op" id="3243265">(</span><span class="op" id="3243266">)</span><span class="op" id="3243267">)</span><span class="op" id="3243268">.</span><span class="ident" id="3243269">Line</span>&nbsp;<span class="op" id="3243274">&gt;</span>&nbsp;<span class="num" id="3243276">1</span><span class="op" id="3243277">+</span><span class="ident" id="3243278">fset</span><span class="op" id="3243282">.</span><span class="ident" id="3243283">Position</span><span class="op" id="3243291">(</span><span class="ident" id="3243292">d</span><span class="op" id="3243293">.</span><span class="ident" id="3243294">Specs</span><span class="op" id="3243299">[</span><span class="ident" id="3243300">j</span><span class="op" id="3243301">-</span><span class="num" id="3243302">1</span><span class="op" id="3243303">]</span><span class="op" id="3243304">.</span><span class="ident" id="3243305">End</span><span class="op" id="3243308">(</span><span class="op" id="3243309">)</span><span class="op" id="3243310">)</span><span class="op" id="3243311">.</span><span class="ident" id="3243312">Line</span>&nbsp;<span class="op" id="3243317">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3243323">//&nbsp;j&nbsp;begins&nbsp;a&nbsp;new&nbsp;run.&nbsp;&nbsp;End&nbsp;this&nbsp;one.</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243365">specs</span>&nbsp;<span class="op" id="3243371">=</span>&nbsp;<span class="builtinfunc" id="3243373">append</span><span class="op" id="3243379">(</span><span class="ident" id="3243380">specs</span><span class="op" id="3243385">,</span>&nbsp;<span class="ident" id="3243387">sortSpecs</span><span class="op" id="3243396">(</span><span class="ident" id="3243397">fset</span><span class="op" id="3243401">,</span>&nbsp;<span class="ident" id="3243403">f</span><span class="op" id="3243404">,</span>&nbsp;<span class="ident" id="3243406">d</span><span class="op" id="3243407">.</span><span class="ident" id="3243408">Specs</span><span class="op" id="3243413">[</span><span class="ident" id="3243414">i</span><span class="op" id="3243415">:</span><span class="ident" id="3243416">j</span><span class="op" id="3243417">]</span><span class="op" id="3243418">)</span><span class="op" id="3243419">...</span><span class="op" id="3243422">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243428">i</span>&nbsp;<span class="op" id="3243430">=</span>&nbsp;<span class="ident" id="3243432">j</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243437">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243441">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243445">specs</span>&nbsp;<span class="op" id="3243451">=</span>&nbsp;<span class="builtinfunc" id="3243453">append</span><span class="op" id="3243459">(</span><span class="ident" id="3243460">specs</span><span class="op" id="3243465">,</span>&nbsp;<span class="ident" id="3243467">sortSpecs</span><span class="op" id="3243476">(</span><span class="ident" id="3243477">fset</span><span class="op" id="3243481">,</span>&nbsp;<span class="ident" id="3243483">f</span><span class="op" id="3243484">,</span>&nbsp;<span class="ident" id="3243486">d</span><span class="op" id="3243487">.</span><span class="ident" id="3243488">Specs</span><span class="op" id="3243493">[</span><span class="ident" id="3243494">i</span><span class="op" id="3243495">:</span><span class="op" id="3243496">]</span><span class="op" id="3243497">)</span><span class="op" id="3243498">...</span><span class="op" id="3243501">)</span><br>
<span class="lineno">40</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243505">d</span><span class="op" id="3243506">.</span><span class="ident" id="3243507">Specs</span>&nbsp;<span class="op" id="3243513">=</span>&nbsp;<span class="ident" id="3243515">specs</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3243524">//&nbsp;Deduping&nbsp;can&nbsp;leave&nbsp;a&nbsp;blank&nbsp;line&nbsp;before&nbsp;the&nbsp;rparen;&nbsp;clean&nbsp;that&nbsp;up.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243595">if</span>&nbsp;<span class="builtinfunc" id="3243598">len</span><span class="op" id="3243601">(</span><span class="ident" id="3243602">d</span><span class="op" id="3243603">.</span><span class="ident" id="3243604">Specs</span><span class="op" id="3243609">)</span>&nbsp;<span class="op" id="3243611">&gt;</span>&nbsp;<span class="num" id="3243613">0</span>&nbsp;<span class="op" id="3243615">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243620">lastSpec</span>&nbsp;<span class="op" id="3243629">:=</span>&nbsp;<span class="ident" id="3243632">d</span><span class="op" id="3243633">.</span><span class="ident" id="3243634">Specs</span><span class="op" id="3243639">[</span><span class="builtinfunc" id="3243640">len</span><span class="op" id="3243643">(</span><span class="ident" id="3243644">d</span><span class="op" id="3243645">.</span><span class="ident" id="3243646">Specs</span><span class="op" id="3243651">)</span><span class="op" id="3243652">-</span><span class="num" id="3243653">1</span><span class="op" id="3243654">]</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243659">lastLine</span>&nbsp;<span class="op" id="3243668">:=</span>&nbsp;<span class="ident" id="3243671">fset</span><span class="op" id="3243675">.</span><span class="ident" id="3243676">Position</span><span class="op" id="3243684">(</span><span class="ident" id="3243685">lastSpec</span><span class="op" id="3243693">.</span><span class="ident" id="3243694">Pos</span><span class="op" id="3243697">(</span><span class="op" id="3243698">)</span><span class="op" id="3243699">)</span><span class="op" id="3243700">.</span><span class="ident" id="3243701">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243709">if</span>&nbsp;<span class="ident" id="3243712">rParenLine</span>&nbsp;<span class="op" id="3243723">:=</span>&nbsp;<span class="ident" id="3243726">fset</span><span class="op" id="3243730">.</span><span class="ident" id="3243731">Position</span><span class="op" id="3243739">(</span><span class="ident" id="3243740">d</span><span class="op" id="3243741">.</span><span class="ident" id="3243742">Rparen</span><span class="op" id="3243748">)</span><span class="op" id="3243749">.</span><span class="ident" id="3243750">Line</span><span class="op" id="3243754">;</span>&nbsp;<span class="ident" id="3243756">rParenLine</span>&nbsp;<span class="op" id="3243767">&gt;</span>&nbsp;<span class="ident" id="3243769">lastLine</span><span class="op" id="3243777">+</span><span class="num" id="3243778">1</span>&nbsp;<span class="op" id="3243780">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243786">fset</span><span class="op" id="3243790">.</span><span class="ident" id="3243791">File</span><span class="op" id="3243795">(</span><span class="ident" id="3243796">d</span><span class="op" id="3243797">.</span><span class="ident" id="3243798">Rparen</span><span class="op" id="3243804">)</span><span class="op" id="3243805">.</span><span class="ident" id="3243806">MergeLine</span><span class="op" id="3243815">(</span><span class="ident" id="3243816">rParenLine</span>&nbsp;<span class="op" id="3243827">-</span>&nbsp;<span class="num" id="3243829">1</span><span class="op" id="3243830">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243835">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243839">}</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243842">}</span><br>
<span class="lineno"></span><span class="op" id="3243844">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3243847">func</span>&nbsp;<span class="ident" id="3243852">importPath</span><span class="op" id="3243862">(</span><span class="ident" id="3243863">s</span>&nbsp;<span class="ident" id="3243865">Spec</span><span class="op" id="3243869">)</span>&nbsp;<span class="builtintype" id="3243871">string</span>&nbsp;<span class="op" id="3243878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3243881">t</span><span class="op" id="3243882">,</span>&nbsp;<span class="ident" id="3243884">err</span>&nbsp;<span class="op" id="3243888">:=</span>&nbsp;<span class="ident" id="3243891">strconv</span><span class="op" id="3243898">.</span><span class="ident" id="3243899">Unquote</span><span class="op" id="3243906">(</span><span class="ident" id="3243907">s</span><span class="op" id="3243908">.</span><span class="op" id="3243909">(</span><span class="op" id="3243910">*</span><span class="ident" id="3243911">ImportSpec</span><span class="op" id="3243921">)</span><span class="op" id="3243922">.</span><span class="ident" id="3243923">Path</span><span class="op" id="3243927">.</span><span class="ident" id="3243928">Value</span><span class="op" id="3243933">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243936">if</span>&nbsp;<span class="ident" id="3243939">err</span>&nbsp;<span class="op" id="3243943">==</span>&nbsp;<span class="builtintype" id="3243946">nil</span>&nbsp;<span class="op" id="3243950">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243954">return</span>&nbsp;<span class="ident" id="3243961">t</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3243964">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3243967">return</span>&nbsp;<span class="string" id="3243974">&#34;&#34;</span><br>
<span class="lineno"></span><span class="op" id="3243977">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span><span class="keyword" id="3243980">func</span>&nbsp;<span class="ident" id="3243985">importName</span><span class="op" id="3243995">(</span><span class="ident" id="3243996">s</span>&nbsp;<span class="ident" id="3243998">Spec</span><span class="op" id="3244002">)</span>&nbsp;<span class="builtintype" id="3244004">string</span>&nbsp;<span class="op" id="3244011">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244014">n</span>&nbsp;<span class="op" id="3244016">:=</span>&nbsp;<span class="ident" id="3244019">s</span><span class="op" id="3244020">.</span><span class="op" id="3244021">(</span><span class="op" id="3244022">*</span><span class="ident" id="3244023">ImportSpec</span><span class="op" id="3244033">)</span><span class="op" id="3244034">.</span><span class="ident" id="3244035">Name</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244041">if</span>&nbsp;<span class="ident" id="3244044">n</span>&nbsp;<span class="op" id="3244046">==</span>&nbsp;<span class="builtintype" id="3244049">nil</span>&nbsp;<span class="op" id="3244053">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244057">return</span>&nbsp;<span class="string" id="3244064">&#34;&#34;</span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244068">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244071">return</span>&nbsp;<span class="ident" id="3244078">n</span><span class="op" id="3244079">.</span><span class="ident" id="3244080">Name</span><br>
<span class="lineno"></span><span class="op" id="3244085">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3244088">func</span>&nbsp;<span class="ident" id="3244093">importComment</span><span class="op" id="3244106">(</span><span class="ident" id="3244107">s</span>&nbsp;<span class="ident" id="3244109">Spec</span><span class="op" id="3244113">)</span>&nbsp;<span class="builtintype" id="3244115">string</span>&nbsp;<span class="op" id="3244122">{</span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244125">c</span>&nbsp;<span class="op" id="3244127">:=</span>&nbsp;<span class="ident" id="3244130">s</span><span class="op" id="3244131">.</span><span class="op" id="3244132">(</span><span class="op" id="3244133">*</span><span class="ident" id="3244134">ImportSpec</span><span class="op" id="3244144">)</span><span class="op" id="3244145">.</span><span class="ident" id="3244146">Comment</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244155">if</span>&nbsp;<span class="ident" id="3244158">c</span>&nbsp;<span class="op" id="3244160">==</span>&nbsp;<span class="builtintype" id="3244163">nil</span>&nbsp;<span class="op" id="3244167">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244171">return</span>&nbsp;<span class="string" id="3244178">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244182">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244185">return</span>&nbsp;<span class="ident" id="3244192">c</span><span class="op" id="3244193">.</span><span class="ident" id="3244194">Text</span><span class="op" id="3244198">(</span><span class="op" id="3244199">)</span><br>
<span class="lineno">75</span><span class="op" id="3244201">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="comment" id="3244204">//&nbsp;collapse&nbsp;indicates&nbsp;whether&nbsp;prev&nbsp;may&nbsp;be&nbsp;removed,&nbsp;leaving&nbsp;only&nbsp;next.</span><br>
<span class="lineno"></span><span class="keyword" id="3244274">func</span>&nbsp;<span class="ident" id="3244279">collapse</span><span class="op" id="3244287">(</span><span class="ident" id="3244288">prev</span><span class="op" id="3244292">,</span>&nbsp;<span class="ident" id="3244294">next</span>&nbsp;<span class="ident" id="3244299">Spec</span><span class="op" id="3244303">)</span>&nbsp;<span class="builtintype" id="3244305">bool</span>&nbsp;<span class="op" id="3244310">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244313">if</span>&nbsp;<span class="ident" id="3244316">importPath</span><span class="op" id="3244326">(</span><span class="ident" id="3244327">next</span><span class="op" id="3244331">)</span>&nbsp;<span class="op" id="3244333">!=</span>&nbsp;<span class="ident" id="3244336">importPath</span><span class="op" id="3244346">(</span><span class="ident" id="3244347">prev</span><span class="op" id="3244351">)</span>&nbsp;<span class="op" id="3244353">||</span>&nbsp;<span class="ident" id="3244356">importName</span><span class="op" id="3244366">(</span><span class="ident" id="3244367">next</span><span class="op" id="3244371">)</span>&nbsp;<span class="op" id="3244373">!=</span>&nbsp;<span class="ident" id="3244376">importName</span><span class="op" id="3244386">(</span><span class="ident" id="3244387">prev</span><span class="op" id="3244391">)</span>&nbsp;<span class="op" id="3244393">{</span><br>
<span class="lineno">80</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244397">return</span>&nbsp;<span class="builtintype" id="3244404">false</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244411">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244414">return</span>&nbsp;<span class="ident" id="3244421">prev</span><span class="op" id="3244425">.</span><span class="op" id="3244426">(</span><span class="op" id="3244427">*</span><span class="ident" id="3244428">ImportSpec</span><span class="op" id="3244438">)</span><span class="op" id="3244439">.</span><span class="ident" id="3244440">Comment</span>&nbsp;<span class="op" id="3244448">==</span>&nbsp;<span class="builtintype" id="3244451">nil</span><br>
<span class="lineno"></span><span class="op" id="3244455">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">85</span><span class="keyword" id="3244458">type</span>&nbsp;<span class="ident" id="3244463">posSpan</span>&nbsp;<span class="keyword" id="3244471">struct</span>&nbsp;<span class="op" id="3244478">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244481">Start</span>&nbsp;<span class="ident" id="3244487">token</span><span class="op" id="3244492">.</span><span class="ident" id="3244493">Pos</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244498">End</span>&nbsp;&nbsp;&nbsp;<span class="ident" id="3244504">token</span><span class="op" id="3244509">.</span><span class="ident" id="3244510">Pos</span><br>
<span class="lineno"></span><span class="op" id="3244514">}</span><br>
<span class="lineno"></span><br>
<span class="lineno">90</span><span class="keyword" id="3244517">func</span>&nbsp;<span class="ident" id="3244522">sortSpecs</span><span class="op" id="3244531">(</span><span class="ident" id="3244532">fset</span>&nbsp;<span class="op" id="3244537">*</span><span class="ident" id="3244538">token</span><span class="op" id="3244543">.</span><span class="ident" id="3244544">FileSet</span><span class="op" id="3244551">,</span>&nbsp;<span class="ident" id="3244553">f</span>&nbsp;<span class="op" id="3244555">*</span><span class="ident" id="3244556">File</span><span class="op" id="3244560">,</span>&nbsp;<span class="ident" id="3244562">specs</span>&nbsp;<span class="op" id="3244568">[</span><span class="op" id="3244569">]</span><span class="ident" id="3244570">Spec</span><span class="op" id="3244574">)</span>&nbsp;<span class="op" id="3244576">[</span><span class="op" id="3244577">]</span><span class="ident" id="3244578">Spec</span>&nbsp;<span class="op" id="3244583">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244586">//&nbsp;Can&#39;t&nbsp;short-circuit&nbsp;here&nbsp;even&nbsp;if&nbsp;specs&nbsp;are&nbsp;already&nbsp;sorted,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244649">//&nbsp;since&nbsp;they&nbsp;might&nbsp;yet&nbsp;need&nbsp;deduplication.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244694">//&nbsp;A&nbsp;lone&nbsp;import,&nbsp;however,&nbsp;may&nbsp;be&nbsp;safely&nbsp;ignored.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244745">if</span>&nbsp;<span class="builtinfunc" id="3244748">len</span><span class="op" id="3244751">(</span><span class="ident" id="3244752">specs</span><span class="op" id="3244757">)</span>&nbsp;<span class="op" id="3244759">&lt;=</span>&nbsp;<span class="num" id="3244762">1</span>&nbsp;<span class="op" id="3244764">{</span><br>
<span class="lineno">95</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244768">return</span>&nbsp;<span class="ident" id="3244775">specs</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244782">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244786">//&nbsp;Record&nbsp;positions&nbsp;for&nbsp;specs.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244818">pos</span>&nbsp;<span class="op" id="3244822">:=</span>&nbsp;<span class="builtinfunc" id="3244825">make</span><span class="op" id="3244829">(</span><span class="op" id="3244830">[</span><span class="op" id="3244831">]</span><span class="ident" id="3244832">posSpan</span><span class="op" id="3244839">,</span>&nbsp;<span class="builtinfunc" id="3244841">len</span><span class="op" id="3244844">(</span><span class="ident" id="3244845">specs</span><span class="op" id="3244850">)</span><span class="op" id="3244851">)</span><br>
<span class="lineno">100</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3244854">for</span>&nbsp;<span class="ident" id="3244858">i</span><span class="op" id="3244859">,</span>&nbsp;<span class="ident" id="3244861">s</span>&nbsp;<span class="op" id="3244863">:=</span>&nbsp;<span class="keyword" id="3244866">range</span>&nbsp;<span class="ident" id="3244872">specs</span>&nbsp;<span class="op" id="3244878">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3244882">pos</span><span class="op" id="3244885">[</span><span class="ident" id="3244886">i</span><span class="op" id="3244887">]</span>&nbsp;<span class="op" id="3244889">=</span>&nbsp;<span class="ident" id="3244891">posSpan</span><span class="op" id="3244898">{</span><span class="ident" id="3244899">s</span><span class="op" id="3244900">.</span><span class="ident" id="3244901">Pos</span><span class="op" id="3244904">(</span><span class="op" id="3244905">)</span><span class="op" id="3244906">,</span>&nbsp;<span class="ident" id="3244908">s</span><span class="op" id="3244909">.</span><span class="ident" id="3244910">End</span><span class="op" id="3244913">(</span><span class="op" id="3244914">)</span><span class="op" id="3244915">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3244918">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244922">//&nbsp;Identify&nbsp;comments&nbsp;in&nbsp;this&nbsp;range.</span><br>
<span class="lineno">105</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3244959">//&nbsp;Any&nbsp;comment&nbsp;from&nbsp;pos[0].Start&nbsp;to&nbsp;the&nbsp;final&nbsp;line&nbsp;counts.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245019">lastLine</span>&nbsp;<span class="op" id="3245028">:=</span>&nbsp;<span class="ident" id="3245031">fset</span><span class="op" id="3245035">.</span><span class="ident" id="3245036">Position</span><span class="op" id="3245044">(</span><span class="ident" id="3245045">pos</span><span class="op" id="3245048">[</span><span class="builtinfunc" id="3245049">len</span><span class="op" id="3245052">(</span><span class="ident" id="3245053">pos</span><span class="op" id="3245056">)</span><span class="op" id="3245057">-</span><span class="num" id="3245058">1</span><span class="op" id="3245059">]</span><span class="op" id="3245060">.</span><span class="ident" id="3245061">End</span><span class="op" id="3245064">)</span><span class="op" id="3245065">.</span><span class="ident" id="3245066">Line</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245072">cstart</span>&nbsp;<span class="op" id="3245079">:=</span>&nbsp;<span class="builtinfunc" id="3245082">len</span><span class="op" id="3245085">(</span><span class="ident" id="3245086">f</span><span class="op" id="3245087">.</span><span class="ident" id="3245088">Comments</span><span class="op" id="3245096">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245099">cend</span>&nbsp;<span class="op" id="3245104">:=</span>&nbsp;<span class="builtinfunc" id="3245107">len</span><span class="op" id="3245110">(</span><span class="ident" id="3245111">f</span><span class="op" id="3245112">.</span><span class="ident" id="3245113">Comments</span><span class="op" id="3245121">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245124">for</span>&nbsp;<span class="ident" id="3245128">i</span><span class="op" id="3245129">,</span>&nbsp;<span class="ident" id="3245131">g</span>&nbsp;<span class="op" id="3245133">:=</span>&nbsp;<span class="keyword" id="3245136">range</span>&nbsp;<span class="ident" id="3245142">f</span><span class="op" id="3245143">.</span><span class="ident" id="3245144">Comments</span>&nbsp;<span class="op" id="3245153">{</span><br>
<span class="lineno">110</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245157">if</span>&nbsp;<span class="ident" id="3245160">g</span><span class="op" id="3245161">.</span><span class="ident" id="3245162">Pos</span><span class="op" id="3245165">(</span><span class="op" id="3245166">)</span>&nbsp;<span class="op" id="3245168">&lt;</span>&nbsp;<span class="ident" id="3245170">pos</span><span class="op" id="3245173">[</span><span class="num" id="3245174">0</span><span class="op" id="3245175">]</span><span class="op" id="3245176">.</span><span class="ident" id="3245177">Start</span>&nbsp;<span class="op" id="3245183">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245188">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245199">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245203">if</span>&nbsp;<span class="ident" id="3245206">i</span>&nbsp;<span class="op" id="3245208">&lt;</span>&nbsp;<span class="ident" id="3245210">cstart</span>&nbsp;<span class="op" id="3245217">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245222">cstart</span>&nbsp;<span class="op" id="3245229">=</span>&nbsp;<span class="ident" id="3245231">i</span><br>
<span class="lineno">115</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245235">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245239">if</span>&nbsp;<span class="ident" id="3245242">fset</span><span class="op" id="3245246">.</span><span class="ident" id="3245247">Position</span><span class="op" id="3245255">(</span><span class="ident" id="3245256">g</span><span class="op" id="3245257">.</span><span class="ident" id="3245258">End</span><span class="op" id="3245261">(</span><span class="op" id="3245262">)</span><span class="op" id="3245263">)</span><span class="op" id="3245264">.</span><span class="ident" id="3245265">Line</span>&nbsp;<span class="op" id="3245270">&gt;</span>&nbsp;<span class="ident" id="3245272">lastLine</span>&nbsp;<span class="op" id="3245281">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245286">cend</span>&nbsp;<span class="op" id="3245291">=</span>&nbsp;<span class="ident" id="3245293">i</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245298">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245306">}</span><br>
<span class="lineno">120</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245309">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245312">comments</span>&nbsp;<span class="op" id="3245321">:=</span>&nbsp;<span class="ident" id="3245324">f</span><span class="op" id="3245325">.</span><span class="ident" id="3245326">Comments</span><span class="op" id="3245334">[</span><span class="ident" id="3245335">cstart</span><span class="op" id="3245341">:</span><span class="ident" id="3245342">cend</span><span class="op" id="3245346">]</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245350">//&nbsp;Assign&nbsp;each&nbsp;comment&nbsp;to&nbsp;the&nbsp;import&nbsp;spec&nbsp;preceding&nbsp;it.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245407">importComment</span>&nbsp;<span class="op" id="3245421">:=</span>&nbsp;<span class="keyword" id="3245424">map</span><span class="op" id="3245427">[</span><span class="op" id="3245428">*</span><span class="ident" id="3245429">ImportSpec</span><span class="op" id="3245439">]</span><span class="op" id="3245440">[</span><span class="op" id="3245441">]</span><span class="op" id="3245442">*</span><span class="ident" id="3245443">CommentGroup</span><span class="op" id="3245455">{</span><span class="op" id="3245456">}</span><br>
<span class="lineno">125</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245459">specIndex</span>&nbsp;<span class="op" id="3245469">:=</span>&nbsp;<span class="num" id="3245472">0</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245475">for</span>&nbsp;<span class="ident" id="3245479">_</span><span class="op" id="3245480">,</span>&nbsp;<span class="ident" id="3245482">g</span>&nbsp;<span class="op" id="3245484">:=</span>&nbsp;<span class="keyword" id="3245487">range</span>&nbsp;<span class="ident" id="3245493">comments</span>&nbsp;<span class="op" id="3245502">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3245506">for</span>&nbsp;<span class="ident" id="3245510">specIndex</span><span class="op" id="3245519">+</span><span class="num" id="3245520">1</span>&nbsp;<span class="op" id="3245522">&lt;</span>&nbsp;<span class="builtinfunc" id="3245524">len</span><span class="op" id="3245527">(</span><span class="ident" id="3245528">specs</span><span class="op" id="3245533">)</span>&nbsp;<span class="op" id="3245535">&amp;&amp;</span>&nbsp;<span class="ident" id="3245538">pos</span><span class="op" id="3245541">[</span><span class="ident" id="3245542">specIndex</span><span class="op" id="3245551">+</span><span class="num" id="3245552">1</span><span class="op" id="3245553">]</span><span class="op" id="3245554">.</span><span class="ident" id="3245555">Start</span>&nbsp;<span class="op" id="3245561">&lt;=</span>&nbsp;<span class="ident" id="3245564">g</span><span class="op" id="3245565">.</span><span class="ident" id="3245566">Pos</span><span class="op" id="3245569">(</span><span class="op" id="3245570">)</span>&nbsp;<span class="op" id="3245572">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245577">specIndex</span><span class="op" id="3245586">++</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245591">}</span><br>
<span class="lineno">130</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245595">s</span>&nbsp;<span class="op" id="3245597">:=</span>&nbsp;<span class="ident" id="3245600">specs</span><span class="op" id="3245605">[</span><span class="ident" id="3245606">specIndex</span><span class="op" id="3245615">]</span><span class="op" id="3245616">.</span><span class="op" id="3245617">(</span><span class="op" id="3245618">*</span><span class="ident" id="3245619">ImportSpec</span><span class="op" id="3245629">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245633">importComment</span><span class="op" id="3245646">[</span><span class="ident" id="3245647">s</span><span class="op" id="3245648">]</span>&nbsp;<span class="op" id="3245650">=</span>&nbsp;<span class="builtinfunc" id="3245652">append</span><span class="op" id="3245658">(</span><span class="ident" id="3245659">importComment</span><span class="op" id="3245672">[</span><span class="ident" id="3245673">s</span><span class="op" id="3245674">]</span><span class="op" id="3245675">,</span>&nbsp;<span class="ident" id="3245677">g</span><span class="op" id="3245678">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3245681">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245685">//&nbsp;Sort&nbsp;the&nbsp;import&nbsp;specs&nbsp;by&nbsp;import&nbsp;path.</span><br>
<span class="lineno">135</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245727">//&nbsp;Remove&nbsp;duplicates,&nbsp;when&nbsp;possible&nbsp;without&nbsp;data&nbsp;loss.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245783">//&nbsp;Reassign&nbsp;the&nbsp;import&nbsp;paths&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;position&nbsp;sequence.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245849">//&nbsp;Reassign&nbsp;each&nbsp;comment&nbsp;to&nbsp;abut&nbsp;the&nbsp;end&nbsp;of&nbsp;its&nbsp;spec.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245904">//&nbsp;Sort&nbsp;the&nbsp;comments&nbsp;by&nbsp;new&nbsp;position.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3245943">sort</span><span class="op" id="3245947">.</span><span class="ident" id="3245948">Sort</span><span class="op" id="3245952">(</span><span class="ident" id="3245953">byImportSpec</span><span class="op" id="3245965">(</span><span class="ident" id="3245966">specs</span><span class="op" id="3245971">)</span><span class="op" id="3245972">)</span><br>
<span class="lineno">140</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3245976">//&nbsp;Dedup.&nbsp;Thanks&nbsp;to&nbsp;our&nbsp;sorting,&nbsp;we&nbsp;can&nbsp;just&nbsp;consider</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3246031">//&nbsp;adjacent&nbsp;pairs&nbsp;of&nbsp;imports.</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246062">deduped</span>&nbsp;<span class="op" id="3246070">:=</span>&nbsp;<span class="ident" id="3246073">specs</span><span class="op" id="3246078">[</span><span class="op" id="3246079">:</span><span class="num" id="3246080">0</span><span class="op" id="3246081">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246084">for</span>&nbsp;<span class="ident" id="3246088">i</span><span class="op" id="3246089">,</span>&nbsp;<span class="ident" id="3246091">s</span>&nbsp;<span class="op" id="3246093">:=</span>&nbsp;<span class="keyword" id="3246096">range</span>&nbsp;<span class="ident" id="3246102">specs</span>&nbsp;<span class="op" id="3246108">{</span><br>
<span class="lineno">145</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246112">if</span>&nbsp;<span class="ident" id="3246115">i</span>&nbsp;<span class="op" id="3246117">==</span>&nbsp;<span class="builtinfunc" id="3246120">len</span><span class="op" id="3246123">(</span><span class="ident" id="3246124">specs</span><span class="op" id="3246129">)</span><span class="op" id="3246130">-</span><span class="num" id="3246131">1</span>&nbsp;<span class="op" id="3246133">||</span>&nbsp;<span class="op" id="3246136">!</span><span class="ident" id="3246137">collapse</span><span class="op" id="3246145">(</span><span class="ident" id="3246146">s</span><span class="op" id="3246147">,</span>&nbsp;<span class="ident" id="3246149">specs</span><span class="op" id="3246154">[</span><span class="ident" id="3246155">i</span><span class="op" id="3246156">+</span><span class="num" id="3246157">1</span><span class="op" id="3246158">]</span><span class="op" id="3246159">)</span>&nbsp;<span class="op" id="3246161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246166">deduped</span>&nbsp;<span class="op" id="3246174">=</span>&nbsp;<span class="builtinfunc" id="3246176">append</span><span class="op" id="3246182">(</span><span class="ident" id="3246183">deduped</span><span class="op" id="3246190">,</span>&nbsp;<span class="ident" id="3246192">s</span><span class="op" id="3246193">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246197">}</span>&nbsp;<span class="keyword" id="3246199">else</span>&nbsp;<span class="op" id="3246204">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246209">p</span>&nbsp;<span class="op" id="3246211">:=</span>&nbsp;<span class="ident" id="3246214">s</span><span class="op" id="3246215">.</span><span class="ident" id="3246216">Pos</span><span class="op" id="3246219">(</span><span class="op" id="3246220">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246225">fset</span><span class="op" id="3246229">.</span><span class="ident" id="3246230">File</span><span class="op" id="3246234">(</span><span class="ident" id="3246235">p</span><span class="op" id="3246236">)</span><span class="op" id="3246237">.</span><span class="ident" id="3246238">MergeLine</span><span class="op" id="3246247">(</span><span class="ident" id="3246248">fset</span><span class="op" id="3246252">.</span><span class="ident" id="3246253">Position</span><span class="op" id="3246261">(</span><span class="ident" id="3246262">p</span><span class="op" id="3246263">)</span><span class="op" id="3246264">.</span><span class="ident" id="3246265">Line</span><span class="op" id="3246269">)</span><br>
<span class="lineno">150</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246273">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246276">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246279">specs</span>&nbsp;<span class="op" id="3246285">=</span>&nbsp;<span class="ident" id="3246287">deduped</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment" id="3246297">//&nbsp;Fix&nbsp;up&nbsp;comment&nbsp;positions</span><br>
<span class="lineno">155</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246326">for</span>&nbsp;<span class="ident" id="3246330">i</span><span class="op" id="3246331">,</span>&nbsp;<span class="ident" id="3246333">s</span>&nbsp;<span class="op" id="3246335">:=</span>&nbsp;<span class="keyword" id="3246338">range</span>&nbsp;<span class="ident" id="3246344">specs</span>&nbsp;<span class="op" id="3246350">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246354">s</span>&nbsp;<span class="op" id="3246356">:=</span>&nbsp;<span class="ident" id="3246359">s</span><span class="op" id="3246360">.</span><span class="op" id="3246361">(</span><span class="op" id="3246362">*</span><span class="ident" id="3246363">ImportSpec</span><span class="op" id="3246373">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246377">if</span>&nbsp;<span class="ident" id="3246380">s</span><span class="op" id="3246381">.</span><span class="ident" id="3246382">Name</span>&nbsp;<span class="op" id="3246387">!=</span>&nbsp;<span class="builtintype" id="3246390">nil</span>&nbsp;<span class="op" id="3246394">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246399">s</span><span class="op" id="3246400">.</span><span class="ident" id="3246401">Name</span><span class="op" id="3246405">.</span><span class="ident" id="3246406">NamePos</span>&nbsp;<span class="op" id="3246414">=</span>&nbsp;<span class="ident" id="3246416">pos</span><span class="op" id="3246419">[</span><span class="ident" id="3246420">i</span><span class="op" id="3246421">]</span><span class="op" id="3246422">.</span><span class="ident" id="3246423">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246431">}</span><br>
<span class="lineno">160</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246435">s</span><span class="op" id="3246436">.</span><span class="ident" id="3246437">Path</span><span class="op" id="3246441">.</span><span class="ident" id="3246442">ValuePos</span>&nbsp;<span class="op" id="3246451">=</span>&nbsp;<span class="ident" id="3246453">pos</span><span class="op" id="3246456">[</span><span class="ident" id="3246457">i</span><span class="op" id="3246458">]</span><span class="op" id="3246459">.</span><span class="ident" id="3246460">Start</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246468">s</span><span class="op" id="3246469">.</span><span class="ident" id="3246470">EndPos</span>&nbsp;<span class="op" id="3246477">=</span>&nbsp;<span class="ident" id="3246479">pos</span><span class="op" id="3246482">[</span><span class="ident" id="3246483">i</span><span class="op" id="3246484">]</span><span class="op" id="3246485">.</span><span class="ident" id="3246486">End</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246492">for</span>&nbsp;<span class="ident" id="3246496">_</span><span class="op" id="3246497">,</span>&nbsp;<span class="ident" id="3246499">g</span>&nbsp;<span class="op" id="3246501">:=</span>&nbsp;<span class="keyword" id="3246504">range</span>&nbsp;<span class="ident" id="3246510">importComment</span><span class="op" id="3246523">[</span><span class="ident" id="3246524">s</span><span class="op" id="3246525">]</span>&nbsp;<span class="op" id="3246527">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246532">for</span>&nbsp;<span class="ident" id="3246536">_</span><span class="op" id="3246537">,</span>&nbsp;<span class="ident" id="3246539">c</span>&nbsp;<span class="op" id="3246541">:=</span>&nbsp;<span class="keyword" id="3246544">range</span>&nbsp;<span class="ident" id="3246550">g</span><span class="op" id="3246551">.</span><span class="ident" id="3246552">List</span>&nbsp;<span class="op" id="3246557">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246563">c</span><span class="op" id="3246564">.</span><span class="ident" id="3246565">Slash</span>&nbsp;<span class="op" id="3246571">=</span>&nbsp;<span class="ident" id="3246573">pos</span><span class="op" id="3246576">[</span><span class="ident" id="3246577">i</span><span class="op" id="3246578">]</span><span class="op" id="3246579">.</span><span class="ident" id="3246580">End</span><br>
<span class="lineno">165</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246587">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246591">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246594">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246598">sort</span><span class="op" id="3246602">.</span><span class="ident" id="3246603">Sort</span><span class="op" id="3246607">(</span><span class="ident" id="3246608">byCommentPos</span><span class="op" id="3246620">(</span><span class="ident" id="3246621">comments</span><span class="op" id="3246629">)</span><span class="op" id="3246630">)</span><br>
<span class="lineno">170</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246634">return</span>&nbsp;<span class="ident" id="3246641">specs</span><br>
<span class="lineno"></span><span class="op" id="3246647">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3246650">type</span>&nbsp;<span class="ident" id="3246655">byImportSpec</span>&nbsp;<span class="op" id="3246668">[</span><span class="op" id="3246669">]</span><span class="ident" id="3246670">Spec</span>&nbsp;<span class="comment" id="3246675">//&nbsp;slice&nbsp;of&nbsp;*ImportSpec</span><br>
<span class="lineno">175</span><br>
<span class="lineno"></span><span class="keyword" id="3246700">func</span>&nbsp;<span class="op" id="3246705">(</span><span class="ident" id="3246706">x</span>&nbsp;<span class="ident" id="3246708">byImportSpec</span><span class="op" id="3246720">)</span>&nbsp;<span class="ident" id="3246722">Len</span><span class="op" id="3246725">(</span><span class="op" id="3246726">)</span>&nbsp;<span class="builtintype" id="3246728">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246737">{</span>&nbsp;<span class="keyword" id="3246739">return</span>&nbsp;<span class="builtinfunc" id="3246746">len</span><span class="op" id="3246749">(</span><span class="ident" id="3246750">x</span><span class="op" id="3246751">)</span>&nbsp;<span class="op" id="3246753">}</span><br>
<span class="lineno"></span><span class="keyword" id="3246755">func</span>&nbsp;<span class="op" id="3246760">(</span><span class="ident" id="3246761">x</span>&nbsp;<span class="ident" id="3246763">byImportSpec</span><span class="op" id="3246775">)</span>&nbsp;<span class="ident" id="3246777">Swap</span><span class="op" id="3246781">(</span><span class="ident" id="3246782">i</span><span class="op" id="3246783">,</span>&nbsp;<span class="ident" id="3246785">j</span>&nbsp;<span class="builtintype" id="3246787">int</span><span class="op" id="3246790">)</span>&nbsp;<span class="op" id="3246792">{</span>&nbsp;<span class="ident" id="3246794">x</span><span class="op" id="3246795">[</span><span class="ident" id="3246796">i</span><span class="op" id="3246797">]</span><span class="op" id="3246798">,</span>&nbsp;<span class="ident" id="3246800">x</span><span class="op" id="3246801">[</span><span class="ident" id="3246802">j</span><span class="op" id="3246803">]</span>&nbsp;<span class="op" id="3246805">=</span>&nbsp;<span class="ident" id="3246807">x</span><span class="op" id="3246808">[</span><span class="ident" id="3246809">j</span><span class="op" id="3246810">]</span><span class="op" id="3246811">,</span>&nbsp;<span class="ident" id="3246813">x</span><span class="op" id="3246814">[</span><span class="ident" id="3246815">i</span><span class="op" id="3246816">]</span>&nbsp;<span class="op" id="3246818">}</span><br>
<span class="lineno"></span><span class="keyword" id="3246820">func</span>&nbsp;<span class="op" id="3246825">(</span><span class="ident" id="3246826">x</span>&nbsp;<span class="ident" id="3246828">byImportSpec</span><span class="op" id="3246840">)</span>&nbsp;<span class="ident" id="3246842">Less</span><span class="op" id="3246846">(</span><span class="ident" id="3246847">i</span><span class="op" id="3246848">,</span>&nbsp;<span class="ident" id="3246850">j</span>&nbsp;<span class="builtintype" id="3246852">int</span><span class="op" id="3246855">)</span>&nbsp;<span class="builtintype" id="3246857">bool</span>&nbsp;<span class="op" id="3246862">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246865">ipath</span>&nbsp;<span class="op" id="3246871">:=</span>&nbsp;<span class="ident" id="3246874">importPath</span><span class="op" id="3246884">(</span><span class="ident" id="3246885">x</span><span class="op" id="3246886">[</span><span class="ident" id="3246887">i</span><span class="op" id="3246888">]</span><span class="op" id="3246889">)</span><br>
<span class="lineno">180</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246892">jpath</span>&nbsp;<span class="op" id="3246898">:=</span>&nbsp;<span class="ident" id="3246901">importPath</span><span class="op" id="3246911">(</span><span class="ident" id="3246912">x</span><span class="op" id="3246913">[</span><span class="ident" id="3246914">j</span><span class="op" id="3246915">]</span><span class="op" id="3246916">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246919">if</span>&nbsp;<span class="ident" id="3246922">ipath</span>&nbsp;<span class="op" id="3246928">!=</span>&nbsp;<span class="ident" id="3246931">jpath</span>&nbsp;<span class="op" id="3246937">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3246941">return</span>&nbsp;<span class="ident" id="3246948">ipath</span>&nbsp;<span class="op" id="3246954">&lt;</span>&nbsp;<span class="ident" id="3246956">jpath</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3246963">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246966">iname</span>&nbsp;<span class="op" id="3246972">:=</span>&nbsp;<span class="ident" id="3246975">importName</span><span class="op" id="3246985">(</span><span class="ident" id="3246986">x</span><span class="op" id="3246987">[</span><span class="ident" id="3246988">i</span><span class="op" id="3246989">]</span><span class="op" id="3246990">)</span><br>
<span class="lineno">185</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ident" id="3246993">jname</span>&nbsp;<span class="op" id="3246999">:=</span>&nbsp;<span class="ident" id="3247002">importName</span><span class="op" id="3247012">(</span><span class="ident" id="3247013">x</span><span class="op" id="3247014">[</span><span class="ident" id="3247015">j</span><span class="op" id="3247016">]</span><span class="op" id="3247017">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3247020">if</span>&nbsp;<span class="ident" id="3247023">iname</span>&nbsp;<span class="op" id="3247029">!=</span>&nbsp;<span class="ident" id="3247032">jname</span>&nbsp;<span class="op" id="3247038">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3247042">return</span>&nbsp;<span class="ident" id="3247049">iname</span>&nbsp;<span class="op" id="3247055">&lt;</span>&nbsp;<span class="ident" id="3247057">jname</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3247064">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword" id="3247067">return</span>&nbsp;<span class="ident" id="3247074">importComment</span><span class="op" id="3247087">(</span><span class="ident" id="3247088">x</span><span class="op" id="3247089">[</span><span class="ident" id="3247090">i</span><span class="op" id="3247091">]</span><span class="op" id="3247092">)</span>&nbsp;<span class="op" id="3247094">&lt;</span>&nbsp;<span class="ident" id="3247096">importComment</span><span class="op" id="3247109">(</span><span class="ident" id="3247110">x</span><span class="op" id="3247111">[</span><span class="ident" id="3247112">j</span><span class="op" id="3247113">]</span><span class="op" id="3247114">)</span><br>
<span class="lineno">190</span><span class="op" id="3247116">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3247119">type</span>&nbsp;<span class="ident" id="3247124">byCommentPos</span>&nbsp;<span class="op" id="3247137">[</span><span class="op" id="3247138">]</span><span class="op" id="3247139">*</span><span class="ident" id="3247140">CommentGroup</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3247154">func</span>&nbsp;<span class="op" id="3247159">(</span><span class="ident" id="3247160">x</span>&nbsp;<span class="ident" id="3247162">byCommentPos</span><span class="op" id="3247174">)</span>&nbsp;<span class="ident" id="3247176">Len</span><span class="op" id="3247179">(</span><span class="op" id="3247180">)</span>&nbsp;<span class="builtintype" id="3247182">int</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3247196">{</span>&nbsp;<span class="keyword" id="3247198">return</span>&nbsp;<span class="builtinfunc" id="3247205">len</span><span class="op" id="3247208">(</span><span class="ident" id="3247209">x</span><span class="op" id="3247210">)</span>&nbsp;<span class="op" id="3247212">}</span><br>
<span class="lineno">195</span><span class="keyword" id="3247214">func</span>&nbsp;<span class="op" id="3247219">(</span><span class="ident" id="3247220">x</span>&nbsp;<span class="ident" id="3247222">byCommentPos</span><span class="op" id="3247234">)</span>&nbsp;<span class="ident" id="3247236">Swap</span><span class="op" id="3247240">(</span><span class="ident" id="3247241">i</span><span class="op" id="3247242">,</span>&nbsp;<span class="ident" id="3247244">j</span>&nbsp;<span class="builtintype" id="3247246">int</span><span class="op" id="3247249">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="op" id="3247256">{</span>&nbsp;<span class="ident" id="3247258">x</span><span class="op" id="3247259">[</span><span class="ident" id="3247260">i</span><span class="op" id="3247261">]</span><span class="op" id="3247262">,</span>&nbsp;<span class="ident" id="3247264">x</span><span class="op" id="3247265">[</span><span class="ident" id="3247266">j</span><span class="op" id="3247267">]</span>&nbsp;<span class="op" id="3247269">=</span>&nbsp;<span class="ident" id="3247271">x</span><span class="op" id="3247272">[</span><span class="ident" id="3247273">j</span><span class="op" id="3247274">]</span><span class="op" id="3247275">,</span>&nbsp;<span class="ident" id="3247277">x</span><span class="op" id="3247278">[</span><span class="ident" id="3247279">i</span><span class="op" id="3247280">]</span>&nbsp;<span class="op" id="3247282">}</span><br>
<span class="lineno"></span><span class="keyword" id="3247284">func</span>&nbsp;<span class="op" id="3247289">(</span><span class="ident" id="3247290">x</span>&nbsp;<span class="ident" id="3247292">byCommentPos</span><span class="op" id="3247304">)</span>&nbsp;<span class="ident" id="3247306">Less</span><span class="op" id="3247310">(</span><span class="ident" id="3247311">i</span><span class="op" id="3247312">,</span>&nbsp;<span class="ident" id="3247314">j</span>&nbsp;<span class="builtintype" id="3247316">int</span><span class="op" id="3247319">)</span>&nbsp;<span class="builtintype" id="3247321">bool</span>&nbsp;<span class="op" id="3247326">{</span>&nbsp;<span class="keyword" id="3247328">return</span>&nbsp;<span class="ident" id="3247335">x</span><span class="op" id="3247336">[</span><span class="ident" id="3247337">i</span><span class="op" id="3247338">]</span><span class="op" id="3247339">.</span><span class="ident" id="3247340">Pos</span><span class="op" id="3247343">(</span><span class="op" id="3247344">)</span>&nbsp;<span class="op" id="3247346">&lt;</span>&nbsp;<span class="ident" id="3247348">x</span><span class="op" id="3247349">[</span><span class="ident" id="3247350">j</span><span class="op" id="3247351">]</span><span class="op" id="3247352">.</span><span class="ident" id="3247353">Pos</span><span class="op" id="3247356">(</span><span class="op" id="3247357">)</span>&nbsp;<span class="op" id="3247359">}</span>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19116218-3', 'auto');
  ga('send', 'pageview');
</script>
</body>
</html>
