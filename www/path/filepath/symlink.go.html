<!doctype html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Go standard library</title>
	<link rel="stylesheet" type="text/css" href="/style.css">
</head>

<body>

<div class="code">
<span class="lineno">1</span><span class="comment" id="3632987">//&nbsp;Copyright&nbsp;2012&nbsp;The&nbsp;Go&nbsp;Authors.&nbsp;All&nbsp;rights&nbsp;reserved.</span><br>
<span class="lineno"></span><span class="comment" id="3633042">//&nbsp;Use&nbsp;of&nbsp;this&nbsp;source&nbsp;code&nbsp;is&nbsp;governed&nbsp;by&nbsp;a&nbsp;BSD-style</span><br>
<span class="lineno"></span><span class="comment" id="3633096">//&nbsp;license&nbsp;that&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file.</span><br>
<span class="lineno"></span><br>
<span class="lineno">5</span><span class="keyword" id="3633147">package</span>&nbsp;<span class="ident" id="3633155">filepath</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3633165">import</span>&nbsp;<span class="op" id="3633172">(</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3633175">&#34;bytes&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3633184">&#34;errors&#34;</span><br>
<span class="lineno">10</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="string" id="3633194">&#34;os&#34;</span><br>
<span class="lineno"></span><span class="op" id="3633199">)</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span><span class="keyword" id="3633202">const</span>&nbsp;<span class="ident" id="3633208">utf8RuneSelf</span>&nbsp;<span class="op" id="3633221">=</span>&nbsp;<span class="num" id="3633223">0x80</span><br>
<span class="lineno"></span><br>
<span class="lineno">15</span><span class="keyword" id="3633229">func</span>&nbsp;<span class="ident" id="3633234">walkSymlinks</span><span class="op" id="3633246">(</span><span class="ident" id="3633247">path</span>&nbsp;<span class="builtintype" id="3633252">string</span><span class="op" id="3633258">)</span>&nbsp;<span class="op" id="3633260">(</span><span class="builtintype" id="3633261">string</span><span class="op" id="3633267">,</span>&nbsp;<span class="builtintype" id="3633269">error</span><span class="op" id="3633274">)</span>&nbsp;<span class="op" id="3633276">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633279">const</span>&nbsp;<span class="ident" id="3633285">maxIter</span>&nbsp;<span class="op" id="3633293">=</span>&nbsp;<span class="num" id="3633295">255</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633300">originalPath</span>&nbsp;<span class="op" id="3633313">:=</span>&nbsp;<span class="ident" id="3633316"><a href="/path/filepath/symlink.go.html#3633247">path</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3633322">//&nbsp;consume&nbsp;path&nbsp;by&nbsp;taking&nbsp;each&nbsp;frontmost&nbsp;path&nbsp;element,</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3633378">//&nbsp;expanding&nbsp;it&nbsp;if&nbsp;it&#39;s&nbsp;a&nbsp;symlink,&nbsp;and&nbsp;appending&nbsp;it&nbsp;to&nbsp;b</span><br>
<span class="lineno">20</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633436">var</span>&nbsp;<span class="ident" id="3633440">b</span>&nbsp;<span class="ident" id="3633442"><a href="/path/filepath/symlink.go.html#3633175">bytes</a></span><span class="op" id="3633447">.</span><span class="ident" id="3633448">Buffer</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633456">for</span>&nbsp;<span class="ident" id="3633460">n</span>&nbsp;<span class="op" id="3633462">:=</span>&nbsp;<span class="num" id="3633465">0</span><span class="op" id="3633466">;</span>&nbsp;<span class="ident" id="3633468"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3633473">!=</span>&nbsp;<span class="string" id="3633476">&#34;&#34;</span><span class="op" id="3633478">;</span>&nbsp;<span class="ident" id="3633480"><a href="/path/filepath/symlink.go.html#3633460">n</a></span><span class="op" id="3633481">++</span>&nbsp;<span class="op" id="3633484">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633488">if</span>&nbsp;<span class="ident" id="3633491"><a href="/path/filepath/symlink.go.html#3633460">n</a></span>&nbsp;<span class="op" id="3633493">&gt;</span>&nbsp;<span class="ident" id="3633495"><a href="/path/filepath/symlink.go.html#3633285">maxIter</a></span>&nbsp;<span class="op" id="3633503">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633508">return</span>&nbsp;<span class="string" id="3633515">&#34;&#34;</span><span class="op" id="3633517">,</span>&nbsp;<span class="ident" id="3633519"><a href="/path/filepath/symlink.go.html#3633184">errors</a></span><span class="op" id="3633525">.</span><span class="ident" id="3633526">New</span><span class="op" id="3633529">(</span><span class="string" id="3633530">&#34;EvalSymlinks:&nbsp;too&nbsp;many&nbsp;links&nbsp;in&nbsp;&#34;</span>&nbsp;<span class="op" id="3633565">+</span>&nbsp;<span class="ident" id="3633567"><a href="/path/filepath/symlink.go.html#3633300">originalPath</a></span><span class="op" id="3633579">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633583">}</span><br>
<span class="lineno">25</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3633588">//&nbsp;find&nbsp;next&nbsp;path&nbsp;component,&nbsp;p</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633621">var</span>&nbsp;<span class="ident" id="3633625">i</span>&nbsp;<span class="op" id="3633627">=</span>&nbsp;<span class="op" id="3633629">-</span><span class="num" id="3633630">1</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633634">for</span>&nbsp;<span class="ident" id="3633638">j</span><span class="op" id="3633639">,</span>&nbsp;<span class="ident" id="3633641">c</span>&nbsp;<span class="op" id="3633643">:=</span>&nbsp;<span class="keyword" id="3633646">range</span>&nbsp;<span class="ident" id="3633652"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3633657">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633662">if</span>&nbsp;<span class="ident" id="3633665"><a href="/path/filepath/symlink.go.html#3633641">c</a></span>&nbsp;<span class="op" id="3633667">&lt;</span>&nbsp;<span class="ident" id="3633669"><a href="/path/filepath/symlink.go.html#3633208">utf8RuneSelf</a></span>&nbsp;<span class="op" id="3633682">&amp;&amp;</span>&nbsp;<span class="ident" id="3633685"><a href="/path/filepath/symlink.go.html#3633194">os</a></span><span class="op" id="3633687">.</span><span class="ident" id="3633688">IsPathSeparator</span><span class="op" id="3633703">(</span><span class="builtintype" id="3633704">uint8</span><span class="op" id="3633709">(</span><span class="ident" id="3633710"><a href="/path/filepath/symlink.go.html#3633641">c</a></span><span class="op" id="3633711">)</span><span class="op" id="3633712">)</span>&nbsp;<span class="op" id="3633714">{</span><br>
<span class="lineno">30</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633720"><a href="/path/filepath/symlink.go.html#3633625">i</a></span>&nbsp;<span class="op" id="3633722">=</span>&nbsp;<span class="ident" id="3633724"><a href="/path/filepath/symlink.go.html#3633638">j</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633730">break</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633739">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633743">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633747">var</span>&nbsp;<span class="ident" id="3633751">p</span>&nbsp;<span class="builtintype" id="3633753">string</span><br>
<span class="lineno">35</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633762">if</span>&nbsp;<span class="ident" id="3633765"><a href="/path/filepath/symlink.go.html#3633625">i</a></span>&nbsp;<span class="op" id="3633767">==</span>&nbsp;<span class="op" id="3633770">-</span><span class="num" id="3633771">1</span>&nbsp;<span class="op" id="3633773">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633778"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3633779">,</span>&nbsp;<span class="ident" id="3633781"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3633786">=</span>&nbsp;<span class="ident" id="3633788"><a href="/path/filepath/symlink.go.html#3633247">path</a></span><span class="op" id="3633792">,</span>&nbsp;<span class="string" id="3633794">&#34;&#34;</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633799">}</span>&nbsp;<span class="keyword" id="3633801">else</span>&nbsp;<span class="op" id="3633806">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633811"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3633812">,</span>&nbsp;<span class="ident" id="3633814"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3633819">=</span>&nbsp;<span class="ident" id="3633821"><a href="/path/filepath/symlink.go.html#3633247">path</a></span><span class="op" id="3633825">[</span><span class="op" id="3633826">:</span><span class="ident" id="3633827"><a href="/path/filepath/symlink.go.html#3633625">i</a></span><span class="op" id="3633828">]</span><span class="op" id="3633829">,</span>&nbsp;<span class="ident" id="3633831"><a href="/path/filepath/symlink.go.html#3633247">path</a></span><span class="op" id="3633835">[</span><span class="ident" id="3633836"><a href="/path/filepath/symlink.go.html#3633625">i</a></span><span class="op" id="3633837">+</span><span class="num" id="3633838">1</span><span class="op" id="3633839">:</span><span class="op" id="3633840">]</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633844">}</span><br>
<span class="lineno">40</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633849">if</span>&nbsp;<span class="ident" id="3633852"><a href="/path/filepath/symlink.go.html#3633751">p</a></span>&nbsp;<span class="op" id="3633854">==</span>&nbsp;<span class="string" id="3633857">&#34;&#34;</span>&nbsp;<span class="op" id="3633860">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633865">if</span>&nbsp;<span class="ident" id="3633868"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3633869">.</span><span class="ident" id="3633870">Len</span><span class="op" id="3633873">(</span><span class="op" id="3633874">)</span>&nbsp;<span class="op" id="3633876">==</span>&nbsp;<span class="num" id="3633879">0</span>&nbsp;<span class="op" id="3633881">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3633887">//&nbsp;must&nbsp;be&nbsp;absolute&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633916"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3633917">.</span><span class="ident" id="3633918">WriteRune</span><span class="op" id="3633927">(</span><span class="ident" id="3633928"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3633937">)</span><br>
<span class="lineno">45</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633942">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3633947">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3633958">}</span><br>
<span class="lineno"></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3633963">fi</span><span class="op" id="3633965">,</span>&nbsp;<span class="ident" id="3633967">err</span>&nbsp;<span class="op" id="3633971">:=</span>&nbsp;<span class="ident" id="3633974"><a href="/path/filepath/symlink.go.html#3633194">os</a></span><span class="op" id="3633976">.</span><span class="ident" id="3633977">Lstat</span><span class="op" id="3633982">(</span><span class="ident" id="3633983"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3633984">.</span><span class="ident" id="3633985">String</span><span class="op" id="3633991">(</span><span class="op" id="3633992">)</span>&nbsp;<span class="op" id="3633994">+</span>&nbsp;<span class="ident" id="3633996"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3633997">)</span><br>
<span class="lineno">50</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634001">if</span>&nbsp;<span class="ident" id="3634004"><a href="/path/filepath/symlink.go.html#3633967">err</a></span>&nbsp;<span class="op" id="3634008">!=</span>&nbsp;<span class="ident" id="3634011">nil</span>&nbsp;<span class="op" id="3634015">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634020">return</span>&nbsp;<span class="string" id="3634027">&#34;&#34;</span><span class="op" id="3634029">,</span>&nbsp;<span class="ident" id="3634031"><a href="/path/filepath/symlink.go.html#3633967">err</a></span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634037">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634041">if</span>&nbsp;<span class="ident" id="3634044"><a href="/path/filepath/symlink.go.html#3633963">fi</a></span><span class="op" id="3634046">.</span><span class="ident" id="3634047">Mode</span><span class="op" id="3634051">(</span><span class="op" id="3634052">)</span><span class="op" id="3634053">&amp;</span><span class="ident" id="3634054"><a href="/path/filepath/symlink.go.html#3633194">os</a></span><span class="op" id="3634056">.</span><span class="ident" id="3634057">ModeSymlink</span>&nbsp;<span class="op" id="3634069">==</span>&nbsp;<span class="num" id="3634072">0</span>&nbsp;<span class="op" id="3634074">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634079"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634080">.</span><span class="ident" id="3634081">WriteString</span><span class="op" id="3634092">(</span><span class="ident" id="3634093"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3634094">)</span><br>
<span class="lineno">55</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634099">if</span>&nbsp;<span class="ident" id="3634102"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3634107">!=</span>&nbsp;<span class="string" id="3634110">&#34;&#34;</span>&nbsp;<span class="op" id="3634113">||</span>&nbsp;<span class="op" id="3634116">(</span><span class="ident" id="3634117"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634118">.</span><span class="ident" id="3634119">Len</span><span class="op" id="3634122">(</span><span class="op" id="3634123">)</span>&nbsp;<span class="op" id="3634125">==</span>&nbsp;<span class="num" id="3634128">2</span>&nbsp;<span class="op" id="3634130">&amp;&amp;</span>&nbsp;<span class="builtinfunc" id="3634133">len</span><span class="op" id="3634136">(</span><span class="ident" id="3634137"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3634138">)</span>&nbsp;<span class="op" id="3634140">==</span>&nbsp;<span class="num" id="3634143">2</span>&nbsp;<span class="op" id="3634145">&amp;&amp;</span>&nbsp;<span class="ident" id="3634148"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3634149">[</span><span class="num" id="3634150">1</span><span class="op" id="3634151">]</span>&nbsp;<span class="op" id="3634153">==</span>&nbsp;<span class="string" id="3634156">&#39;:&#39;</span><span class="op" id="3634159">)</span>&nbsp;<span class="op" id="3634161">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634167"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634168">.</span><span class="ident" id="3634169">WriteRune</span><span class="op" id="3634178">(</span><span class="ident" id="3634179"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3634188">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634193">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634198">continue</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634209">}</span><br>
<span class="lineno">60</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="comment" id="3634214">//&nbsp;it&#39;s&nbsp;a&nbsp;symlink,&nbsp;put&nbsp;it&nbsp;at&nbsp;the&nbsp;front&nbsp;of&nbsp;path</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634263">dest</span><span class="op" id="3634267">,</span>&nbsp;<span class="ident" id="3634269"><a href="/path/filepath/symlink.go.html#3633967">err</a></span>&nbsp;<span class="op" id="3634273">:=</span>&nbsp;<span class="ident" id="3634276"><a href="/path/filepath/symlink.go.html#3633194">os</a></span><span class="op" id="3634278">.</span><span class="ident" id="3634279">Readlink</span><span class="op" id="3634287">(</span><span class="ident" id="3634288"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634289">.</span><span class="ident" id="3634290">String</span><span class="op" id="3634296">(</span><span class="op" id="3634297">)</span>&nbsp;<span class="op" id="3634299">+</span>&nbsp;<span class="ident" id="3634301"><a href="/path/filepath/symlink.go.html#3633751">p</a></span><span class="op" id="3634302">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634306">if</span>&nbsp;<span class="ident" id="3634309"><a href="/path/filepath/symlink.go.html#3633967">err</a></span>&nbsp;<span class="op" id="3634313">!=</span>&nbsp;<span class="ident" id="3634316">nil</span>&nbsp;<span class="op" id="3634320">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634325">return</span>&nbsp;<span class="string" id="3634332">&#34;&#34;</span><span class="op" id="3634334">,</span>&nbsp;<span class="ident" id="3634336"><a href="/path/filepath/symlink.go.html#3633967">err</a></span><br>
<span class="lineno">65</span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634342">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634346">if</span>&nbsp;<span class="ident" id="3634349"><a href="/path/filepath/path_unix.go.html#3632421">IsAbs</a></span><span class="op" id="3634354">(</span><span class="ident" id="3634355"><a href="/path/filepath/symlink.go.html#3634263">dest</a></span><span class="op" id="3634359">)</span>&nbsp;<span class="op" id="3634361">||</span>&nbsp;<span class="ident" id="3634364"><a href="/path/filepath/symlink.go.html#3633194">os</a></span><span class="op" id="3634366">.</span><span class="ident" id="3634367">IsPathSeparator</span><span class="op" id="3634382">(</span><span class="ident" id="3634383"><a href="/path/filepath/symlink.go.html#3634263">dest</a></span><span class="op" id="3634387">[</span><span class="num" id="3634388">0</span><span class="op" id="3634389">]</span><span class="op" id="3634390">)</span>&nbsp;<span class="op" id="3634392">{</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634397"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634398">.</span><span class="ident" id="3634399">Reset</span><span class="op" id="3634404">(</span><span class="op" id="3634405">)</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634409">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp<span class="ident" id="3634413"><a href="/path/filepath/symlink.go.html#3633247">path</a></span>&nbsp;<span class="op" id="3634418">=</span>&nbsp;<span class="ident" id="3634420"><a href="/path/filepath/symlink.go.html#3634263">dest</a></span>&nbsp;<span class="op" id="3634425">+</span>&nbsp;<span class="builtintype" id="3634427">string</span><span class="op" id="3634433">(</span><span class="ident" id="3634434"><a href="/path/filepath/path.go.html#3620100">Separator</a></span><span class="op" id="3634443">)</span>&nbsp;<span class="op" id="3634445">+</span>&nbsp;<span class="ident" id="3634447"><a href="/path/filepath/symlink.go.html#3633247">path</a></span><br>
<span class="lineno">70</span>&nbsp;&nbsp;&nbsp;&nbsp<span class="op" id="3634453">}</span><br>
<span class="lineno"></span>&nbsp;&nbsp;&nbsp;&nbsp<span class="keyword" id="3634456">return</span>&nbsp;<span class="ident" id="3634463"><a href="/path/filepath/path.go.html#3621117">Clean</a></span><span class="op" id="3634468">(</span><span class="ident" id="3634469"><a href="/path/filepath/symlink.go.html#3633440">b</a></span><span class="op" id="3634470">.</span><span class="ident" id="3634471">String</span><span class="op" id="3634477">(</span><span class="op" id="3634478">)</span><span class="op" id="3634479">)</span><span class="op" id="3634480">,</span>&nbsp;<span class="ident" id="3634482">nil</span><br>
<span class="lineno"></span><span class="op" id="3634486">}</span>
</div>
</body>
</html>
